define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppMembersConfigForCreate",["DS/ENOProjectMgmtModels/Collections/Persons","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,n,a,o){"use strict";let s=i.extend({_uwaClassName:"RskOppMembersConfigForCreate",columnInfo:{},setup:function(){this.setColumnInfo()},type:"members",values:[{readWrite:"true",name:"assignees",attributeToDisplay:"fullName",imageAttribute:"image",singleObjectOnly:!1,label:o.ASSIGNEES,type:"person",typeAheadCallback:e.typeAheadCallback,customView:n,linkCallback:a.launchProperties,placeHolder:o.SEARCH_PLACEHOLDER_TEXT,excludePendingUser:!0,validateSameTenant:!0}],getAssigneesCustomButtons:function(){return i.assigneesCustomButtons}});return s._instance=s._instance||new s,s._instance}),define("DS/ENOProjectMgmtRskOppClientCommon/config/ActionButtonConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/utils/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i){"use strict";let n=e.extend({_uwaClassName:"ActionButtonConfig",type:"actionButtons",columnInfo:{},setup:function(){this.setColumnInfo()},values:[{name:i.COMPLETE,key:"complete",selected:!1,showOnCreate:!1,font:"check",checkFlag:!1},{name:i.RE_OPEN,key:"re-open",selected:!1,showOnCreate:!1,font:"reset",checkFlag:!1},{name:i.DELETE,key:"delete",selected:!1,showOnCreate:!1,font:"trash",checkFlag:!1}]});return n._instance=n._instance||new n,n._instance}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppContentConfig",["DS/ENOProjectMgmtModels/Collections/SearchObjects","DS/ENOProjectMgmtModels/Utils/FederatedSearch","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon"],function(e,t,i,n,a,o,s){"use strict";return i.extend({_uwaClassName:"RskOppContentConfig",type:"relatedContents",columnInfo:{},setup:function(e){this.setValues(e),this.setColumnInfo()},setValues:function(i){this.values=[{readWrite:"true",name:"affectedItems",attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!1,label:o.AFFECTED_ITEMS,type:"object",typeAheadCallback:e.typeAheadCallback,customView:n,searchSource:t.filterSearchSources(["3dspace","3dplan"]),excludeSearchTypes:{"3dspace":["Person","Security Context","Business Role"],swym:["pno:Person"]},linkCallback:a.launchProperties,placeHolder:o.SEARCH_PLACEHOLDER_TEXT,validateSameTenant:!0,preValidate:[{name:"context",label:o.CONTEXT,nlsMsg:o.CONTEXT_SELECTION_ERROR}]},{readWrite:"true",name:i.name,attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!1,label:i.label,type:"object",typeAheadCallback:e.typeAheadCallback,customView:n,searchSource:t.filterSearchSources(["3dspace"]),searchSourceTypes:{"3dspace":[i.searchTypes]},linkCallback:a.launchProperties,placeHolder:o.SEARCH_PLACEHOLDER_TEXT,validateSameTenant:!0},{readWrite:"true",name:"references",allowFileManagement:!0,attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!1,label:o.ATTACHMENTS,type:"object",typeAheadCallback:e.typeAheadCallback,customView:n,excludeSearchTypes:{"3dspace":["Person","Security Context","Business Role"],swym:["pno:Person"]},linkCallback:a.launchProperties,placeHolder:o.SEARCH_PLACEHOLDER_TEXT,validateSameTenant:!0}]}})}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppAppConfig",["UWA/Core","DS/ENOProjectMgmtCommonComponents/config/AppConfig","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i){"use strict";return e.extend(t,{_uwaClassName:"RskOppAppConfig",setFilterItems:function(e){let t=e._nls;this.filterPreferenceForDropdown={items:[{name:"owned",value:"owned",text:t.OWNED,label:t.OWNED,className:"drop-tool view-by-menu owned-view"},{name:"assigned",value:"assigned",text:i.ASSIGNED,label:i.ASSIGNED,className:"drop-tool view-by-menu assigned-view"},{name:"all",value:"all",text:i.ALL,label:i.ALL,className:"drop-tool view-by-menu all-view"}],dividerItem:[{className:"divider"}],subItems:e._subItems,organizationItems:[{name:"organization",value:"organization",text:i.OWNED_BY_ORGANIZATION,label:i.OWNED_BY_ORGANIZATION,className:"drop-tool view-by-menu organization-view"}],getItems:function(e){let i=e&&e.get("type"),n=this.items,a=n.find(e=>"all"===e.name);return a.text=e?t.ALL_CONTEXT_ITEMS:t.ALL_MY_ASSIGNED_ITEMS,!e&&(n=n.concat(this.dividerItem,this.organizationItems)),"Program"===i||"Project Space"===i?n.concat(this.dividerItem,this.subItems):(!widget.getValue("FilterOption")&&widget.setValue("FilterOption",a.name),!widget.getValue("SubFilterOption")&&widget.setValue("SubFilterOption",this.subItems[1].name),n)}}},supportedTypesAsParamsForContext:["Project Space","Task"],supportedTypesAsParamsInAppListing:["Risk","Opportunity"]})}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppPlanConfig",["DS/ENOProjectMgmtModels/Collections/SearchObjects","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon"],function(e,t,i,n,a,o){"use strict";return t.extend({_uwaClassName:"RskOppPlanConfig",columnInfo:{},type:"plan",setup:function(e){this.setValues(e),this.setColumnInfo()},setValues:function(t){this.values=[{label:a.ACTION_PLAN,name:"mitigationType",type:"select",readWrite:"true",defaultValue:void 0,values:void 0},{label:o.MEASURE_OF_SUCCESS,name:"measureOfSuccess",type:"textarea",numberOfDisplayLines:2,numberOfEditableLines:2,readWrite:"true"},{label:t.label,name:t.name,type:"textarea",numberOfDisplayLines:2,numberOfEditableLines:2,readWrite:"true"},{readWrite:"true",name:"resolvedBy",attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!1,label:a.RESOLVED_BY,type:"object",typeAheadCallback:e.typeAheadCallback,linkCallback:n.launchProperties,placeHolder:a.SEARCH_PLACEHOLDER_TEXT,customView:i,validateSameTenant:!0,preValidate:[{name:"context",label:a.CONTEXT,nlsMsg:a.CONTEXT_SELECTION_ERROR}]}]}})}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppPropertiesConfig",["UWA/Core","DS/ENOProjectMgmtModels/Collections/SearchObjects","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtHeatMapCustomView","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon"],function(e,t,i,n,a,o,s,l){"use strict";let r=s.MORE;return i.extend({_uwaClassName:"RskOppPropertiesConfig",type:"basic",columnInfo:{},setup:function(e){this.clientNLS=e,this.setValues(),this.addAdditionalValues(),this.setColumnInfo()},setValues:function(){this.values=[{label:s.TITLE,name:"title",type:"text",readWrite:"true",required:!0,numberOfDisplayLines:1,numberOfEditableLines:1,removeCarriageReturns:!0,maxLength:128,validate:!0},{label:s.NAME,name:"name",type:"text"},{label:s.DESCRIPTION,name:"description",type:"textarea",readWrite:"true",numberOfDisplayLines:2,numberOfEditableLines:2,maxLength:150},{name:"context",key:"contextId",readWrite:"true",attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!0,label:s.CONTEXT,type:"object",typeAheadCallback:t.typeAheadCallback,customView:a,linkCallback:n.launchProperties,placeHolder:s.CONTEXT_SEARCH_TEXT,validate:!0,fields:"readAccess",include:"configuration",validateSameTenant:!0,fetchSource:"RiskContextInfo",excludeSearchTypes:{"3dspace":["Program"]},preValidate:[{name:"affectedItems",label:s.AFFECTED_ITEMS,nlsMsg:s.CONTEXT_PREVALIDATE_MSG},{name:"resolvedBy",label:s.RESOLVED_BY,nlsMsg:s.CONTEXT_PREVALIDATE_MSG}]},{label:s.MATRIX_CONFIGURATION,name:"matrixConfiguration",type:"text",readWrite:!1},{label:s.EFFECTIVE_DATE,name:"effectiveDate",type:"date",readWrite:!0,defaultValue:new Date,required:!0,validate:!0},{label:this.clientNLS.IMPACT,name:"impact",type:"select",readWrite:!0,defaultValue:void 0,values:void 0},{label:l.PROBABILITY,name:"probability",type:"select",readWrite:!0,defaultValue:void 0,values:void 0},{label:this.clientNLS.RPN,name:"rpnValue",type:"text",readWrite:!1},{label:s.HEAT_MAP,name:"heatmap",readWrite:!1,customView:o},{label:s.COMMENT,name:"comments",type:"textarea",numberOfDisplayLines:2,numberOfEditableLines:2,maxLength:150},{label:s.POLICY,name:"policy",type:"select",mapFromRangeValue:!0},{label:s.ESTIMATED_DATES,name:"estimatedStartDate",type:"startStop",readWrite:"true",startDateAttribute:"estimatedStartDate",startDateLabel:s.START,endDateAttribute:"estimatedFinishDate",endDateLabel:s.END,validate:!0},{label:this.clientNLS.CLASS_TYPE,name:"classType",type:"select",readWrite:"true",defaultValue:void 0,values:void 0},{label:s.MATURITY_STATE,name:"state",type:"select",readWrite:"true",defaultValue:void 0,mapFromRangeValue:!0,values:void 0,maxLength:26},{label:s.ORGANIZATION,name:"organizationTitle",type:"text",group:r},{label:s.COLLABORATIVE_SPACE,name:"projectTitle",type:"text",group:r},{label:s.ACTUAL_DATES,startDateLabel:s.START,name:"actualStartDate",type:"startStop",endDateAttribute:"actualFinishDate",endDateLabel:s.END,group:r},{label:s.ORIGINATED,name:"originated",type:"date",group:r},{label:s.MODIFICATION_DATE,name:"modified",type:"date",group:r}]},getDefaultCommentsConfig:function(){return{label:s.COMMENT,name:"comments",type:"textarea",readWrite:"true",numberOfDisplayLines:2,numberOfEditableLines:2,maxLength:150}},getCommentsConfig:function(){return{label:s.COMMENT,name:"comments",type:"text"}},getDefaultImpactConfig:function(e,t){return{label:this.clientNLS.IMPACT,name:"impact",type:"select",readWrite:!t,defaultValue:e||"",values:void 0}},getDefaultProbabilityConfig:function(e,t){return{label:l.PROBABILITY,name:"probability",type:"select",readWrite:!t,defaultValue:e||"",values:void 0}},getImpactConfigForMatrix:function(t,i){let a=e.clone(i||{},!1),o=a.isEdit,s=a.inValidRMC,l=a.blankRange,r=a.isContextModified,c=a.isMatrixConfigSelectView,m=o&&(s||r||!c),d=t.Xaxis,u=d.nls[widget.lang]||d.name,p=n.formatRangeValuesForSelectView(d.nodes,"value",n.getconcatenatedActualDisplayValue,a),C=l?"":a.defaultValue||p[0].actualValue;return{required:o&&!C,label:u,name:"impact",type:"select",readWrite:m,defaultValue:C,values:p,validate:!0}},getProbabilityConfigForMatrix:function(t,i){let a=e.clone(i||{},!1),o=a.isEdit,s=a.inValidRMC,l=a.blankRange,r=a.isContextModified,c=a.isMatrixConfigSelectView,m=o&&(s||r||!c),d=t.Yaxis,u=d.nls[widget.lang]||d.name,p=n.formatRangeValuesForSelectView(d.nodes,"value",n.getconcatenatedActualDisplayValue,a),C=l?"":a.defaultValue||p[0].actualValue;return{required:o&&!C,label:u,name:"probability",type:"select",readWrite:m,defaultValue:C,values:p,validate:!0}},getDefaultMatrixConfig:function(){return{label:s.MATRIX_CONFIGURATION,name:"matrixConfiguration",type:"text",readWrite:!1,validate:!0}},getMultiValueMatrixConfig:function(e,t){let i;return t&&(i={blankRange:!0,blankRangeDisplayValue:t.title}),{required:!0,label:s.MATRIX_CONFIGURATION,name:"matrixConfiguration",type:"select",readWrite:!0,defaultValue:t&&t.id||"",validate:!0,values:n.formatRangeValuesForSelectView(e,"id","title",i)}}})}),define("DS/ENOProjectMgmtRskOppClientCommon/views/RskOppDetailsAndRelationships",["UWA/Core","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtDetailsAndRelationships","DS/ENOProjectMgmtModels/Collections/RelatedDataItems","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon"],function(e,t,i,n,a,o,s){"use strict";let l=["properties","members","classification"];return a.extend({_uwaClassName:"RskOppDetailsAndRelationships",render:function(){let e=this._parent.apply(this,arguments),t=this.detailsContainer.getElement(".object-properties-list");return t&&t.remove(),e},showDetailsDisplay:function(){let e=this.currentModel&&this.currentModel.isNew;e||(this.currentModel=this._collection.getCurrentDataModel(void 0),this.canRMCConnect=this.currentModel.model.canRMCConnect()),this._parent.apply(this,arguments),!this.isMassUpdate&&this.handleTabCustomRender(this.currentTab.key),e||this.canRMCConnect||n.buildNotification({message:s.RMC_CONNECT_ERROR_MESSAGE,hideDelay:5e3},"error")},_validateActionButtons:function(){let e=this;if(!this.currentModel)return;let i=this.currentModel.model.getActionsAttrsAccessMap(),n=i.canModify,a=i.canDelete,o=i.canDemote,s=i.canPromote,l=i.isComplete,r=this._actionButtonConfig&&this._actionButtonConfig.values;r&&r.forEach(function(i){let r=e.actionButtons[i.key];if(i.key===t.DELETE)r.disabled=Boolean(!a);else{let e;switch(r.disabled=!1,i.key){case t.COMPLETE:e=n&&s&&!l;break;case t.RE_OPEN:e=o&&l;break;case t.LINK:e=!0}r.visibleFlag=Boolean(e)}})},_checkAccess:function(){switch(this.currentTab.key){case"members":this._setFieldReadWrite("assignees","canToConnect"),this._setFieldReadWrite("ownerInfo","canChangeOwner"),this._setFieldReadWrite("informedUser","canFromConnect");break;case"plan":this._setFieldReadWrite("resolvedBy","canFromConnect");break;case"relatedContent":this._setFieldReadWrite("affectedItems","canFromConnect"),this._setFieldReadWrite("references","canFromConnect"),this._setFieldReadWrite("associatedRisks","canFromConnect")}},reset:function(){this._parent.apply(this,arguments),delete this.inValidRMC,delete this._membersTab,delete this.isContextModified,delete this.isMatrixConfigSelectView},initializeEvents:function(){let e={"onChange:matrixConfiguration":this.fetchMatrixConfigDetails,onChange:function(e,t){let i=t&&t.config;i&&this.handleTabCustomRender(i.name)}};this._parent(e),this.listenTo(this.currentModel.model,"onChange:"+t.ASSIGNEE_ATTR,this.handleTabCustomRender.bind(this,t.ASSIGNEE_ATTR))},validateContextFieldModified:function(){return this.isContextModified=this.currentModel.localRelatedItems.hasOwnProperty(t.CONTEXT_ATTR),this.isContextModified&&this.inValidRMC&&delete this.inValidRMC,this.isContextModified},isPropertiesTab:function(){return this._parent.apply(this,arguments)&&!this.isRMCContext},isMembersTab:function(){return Boolean("members"===this.currentTab.key&&this.currentTabView&&this.currentModel)},isClassificationTab:function(){return Boolean("classification"===this.currentTab.key&&this.currentTabView&&this.currentModel)},handleTabCustomRender:function(e){switch(e){case"properties":this.isPropertiesTab()&&(this._propertiesTab=this.currentTabView),this.handleMatrixConfigForPropertiesTab();break;case t.CONTEXT_ATTR:this.handleMatrixConfigForPropertiesTab();break;case"impact":case"probability":this.handleCommentsForPropertiesTab(e);break;case"members":this.isMembersTab()&&(this._membersTab=this.currentTabView),this.handleAssigneesFieldCustomBtns();break;case t.ASSIGNEE_ATTR:this.handleAssigneesFieldCustomBtns();break;case"classification":!this.isClassificationTab()&&this.relatedView[e]&&this.relatedView[e].acceptChanges(this.currentModel)}},handleCommentsForPropertiesTab:function(e){if(!this.isCreate){let t=this._propertiesTab._config,n=t&&i.findIndex(t.values,"name","comments");if(n>=0){let i=this.currentModel.isImpactProbabilityModified();t.values[n]=i&&e?t.getDefaultCommentsConfig():t.getCommentsConfig(),e&&this.currentModel.updateDetailsDisplay()}}},handleAssigneesFieldCustomBtns:function(){if(this._membersTab){let e,n,a=[],o=i.isSelfAssigned(this.currentModel),s=this.currentModel.model.canModify()||this.isCreate,l=this.currentModel.model.canToConnect()||this.isCreate;this._membersTab._config.getAssigneesCustomButtons().forEach(i=>{switch(i.id){case t.ASSIGN_TO_SELF:n="add",e=s&&l&&!o;break;case t.REMOVE_ASSIGN_TO_SELF:n="remove",e=s&&o}e&&(i.callback=this.currentModel.handleAssigneeUpdate.bind(this.currentModel,n),a.push(i))}),this._membersTab._config.columnInfo.assignees.customButtons=a,this.currentModel.updateDetailsDisplay()}},getMatrixConfigObj:function(e){let t,i,n=e.get("configuration");if(!n||!n.length){let e=this.currentModel.get("rmcActual"),t=this.currentModel.get("rmcGoverning"),i=e&&e.length,a=t&&t.length,o=i?e[0]||e.at(0):this._matrixConfigCollection.getDefaultConfiguration(),s=this.currentModel.model.isValidConfiguration();this.inValidRMC=!s&&this._matrixConfigCollection.getMatrixConfigDefinition(o.id),n=a&&t}if(i=n&&n.length,this.isMatrixConfigSelectView=i>(this.inValidRMC?0:1),this.updateRMCConfig(n),!this.isMatrixConfigSelectView)return t=i?n[0]||n.at(0):this._matrixConfigCollection.getDefaultConfiguration();this.handlePropertyTabUpdate()},handleMatrixConfigForPropertiesTab:function(){if(this._propertiesTab){!this.isNew&&this.validateContextFieldModified();let e=this.currentModel.getContextModel();if(e){let t=this.getMatrixConfigObj(e);t&&this.fetchMatrixConfigDetails(t.id)}else this.updateRMCConfig(),this.handlePropertyTabUpdate()}},fetchMatrixConfigDetails:function(t){if(this._propertiesTab&&e.is(t,"string"))if(t){let e=this._matrixConfigCollection.getMatrixConfigDefinition(t);e&&this.handlePropertyTabUpdate(e)}else this.handlePropertyTabUpdate()},validateRMCExistsAlready:function(e){return this.inValidRMC&&this.inValidRMC.id===e||this.isContextModified&&this.currentModel.model.getRMCActualId()===e},handlePropertyTabUpdate:function(t){if(this._propertiesTab){let n,a,o,s,l=Boolean(this.inValidRMC),r=Boolean(this.isContextModified),c=this._propertiesTab._config,m={inValidRMC:l,isContextModified:r,isMatrixConfigSelectView:this.isMatrixConfigSelectView},d=i.findIndex(c.values,"name","impact"),u=i.findIndex(c.values,"name","probability"),p=l&&this.currentModel.getMatrixAxisDisplayValue("impact",this.inValidRMC),C=l&&this.currentModel.getMatrixAxisDisplayValue("probability",this.inValidRMC);if(t){n=t.get("matrix");let i={blankRange:!(a=this.validateRMCExistsAlready(t.id)),isEdit:!this.isCreate&&this.currentModel.model.canEdit(),blankRangeDisplayValue:!a&&p&&p.displayValue,defaultValue:a&&(p&&p.actualValue||this.currentModel.model.get("impact"))};e.extend(i,m),o=c.getImpactConfigForMatrix(n,i),e.extend(i,{blankRangeDisplayValue:!a&&C&&C.displayValue,defaultValue:a&&(C&&C.actualValue||this.currentModel.model.get("probability"))}),s=c.getProbabilityConfigForMatrix(n,i)}else o=c.getDefaultImpactConfig(p&&p.actualValue,l||r),s=c.getDefaultProbabilityConfig(C&&C.actualValue,l||r);c.values[d]=o,c.values[u]=s,this.handleCommentsForPropertiesTab();let g={configs:{impact:o,probability:s},data:{impact:p,probability:C},isRMCExistsAlready:a};e.extend(g,m);let f=this.getAttributeValuesForPropertiesTab(g),h=this.currentModel.modificationsPending;this.currentModel.postAddRemoveContextMatrixConfig(t,f,this.isMatrixConfigSelectView),!h&&this.handleInitialOpenPropertyPanel()}},getAttributeValuesForPropertiesTab:function(t){let i={},n=e.clone(t||{},!1),a=n.inValidRMC,o=n.isContextModified,s=n.isRMCExistsAlready,l=n.configs.impact,r=n.configs.probability;if(this.isCreate||o&&!s){let e=l&&l.defaultValue||"",t=r&&r.defaultValue||"",n=e&&t&&Number(e)*Number(t)||"";i.comments="",i.rpnValue=n,i.impact=e,i.probability=t}else if(a){let e=n.data.impact,t=n.data.probability,a=this.inValidRMC.title;i.impact=l.readWrite?l.defaultValue:e.displayValue,i.probability=r.readWrite?r.defaultValue:t.displayValue,this.currentModel.model.canEdit()?(i.inValidRMCId=this.inValidRMC.id,i.inValidRMCTitle=a,i.impact_displayValue=e&&e.displayValue,i.probability_displayValue=e&&t.displayValue):i.matrixConfiguration=a}return i},updateRMCConfig:function(e){if(this._propertiesTab){let t=this._propertiesTab._config,n=i.findIndex(t.values,"name","matrixConfiguration");n>=0&&(this.canRMCConnect||this.isNew)&&(this.isMatrixConfigSelectView?(t.values[n]=t.getMultiValueMatrixConfig(e,this.inValidRMC||this.isContextModified),this.currentModel.dispatchEvent("resetDetailsDisplay")):t.values[n]=t.getDefaultMatrixConfig())}},handleRMCActualForCreateAndInvalidRMCPayload:function(){if(this.isCreate||this.isContextModified||this.inValidRMC){let e=this.currentModel.get("rmcId");if(e){let t=new o;this.currentModel.model.set("rmcActual",t),t.add({id:e})}this.currentModel.model.unset("rmcId")}},isPropertyPanelOpen:function(){return!this.isRMCContext&&this._parent.apply(this,arguments)},save:function(t){let i=e.clone(t||{},!1);i.invokeSaveEvent||this.isMassUpdate||(this.handleRMCActualForCreateAndInvalidRMCPayload(),i.resetWidgetData=this.inValidRMC||this.isContextModified||this.isMatrixConfigSelectView),this._parent(i)},updateCurrentTabPostSave:function(){let e=this.inValidRMC||this.isContextModified;!e&&l.forEach(e=>this.handleTabCustomRender(e)),this._parent({doNotUpdateCurrentTab:e}),delete this.inValidRMC,delete this.isContextModified}})}),define("DS/ENOProjectMgmtRskOppClientCommon/config/ActionPlanBreakdownChartConfig",[],function(){"use strict";let e={text:"",align:"center",verticalAlign:"middle",y:60,style:{fontFamily:"Arial",fontWeight:"bold",fontSize:"30px"}};return{_uwaClassName:"ActionPlanBreakdownChartConfig",chart:{type:"pie"},credits:!1,title:e,tooltip:{pointFormat:"<b>{point.y}</b> ({point.percentage:.2f}%)"},legend:{y:20,margin:5,maxHeight:75,labelFormatter:function(){return this.isEmpty?this.name:this.name+" ("+this.y+")"}},plotOptions:{pie:{animation:!0,allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},states:{hover:{brightness:.02}},showInLegend:!0,startAngle:-90,endAngle:90,center:["50%","100%"],size:"210%",point:{events:{legendItemClick:function(){if(this.series.chart.options.series.isEmpty)return!1;let t;return t=this.visible?parseInt(this.total)-this.options.y:parseInt(this.total)+this.options.y,e.text=String(t),this.series.chart.setTitle(e),!0},click:function(){if(this.series.chart.options.series.isEmpty)return!1;this.series.chart.options.onClickCallBack("ds6w:how/ds6w:actionPlan",this.actualValue)}}}}},series:[{innerSize:"45%",data:[]}],responsive:{rules:[{condition:{minHeight:390,maxWidth:768},chartOptions:{plotOptions:{pie:{center:["50%","80%"],size:"150%"}}}},{condition:{minHeight:390,maxWidth:500},chartOptions:{plotOptions:{pie:{center:["50%","80%"],size:"110%"}}}}]}}}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppMembersConfig",["DS/ENOProjectMgmtModels/Collections/Persons","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/MembersConfig","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon"],function(e,t,i,n,a,o,s,l){"use strict";let r=n.extend({_uwaClassName:"RskOppMembersConfig",columnInfo:{},setup:function(){this.values.push({readWrite:"true",name:"informedUser",label:l.INFORMED_USERS,attributeToDisplay:"fullName",imageAttribute:"image",type:"person",singleObjectOnly:!1,typeAheadCallback:e.typeAheadCallback,customView:a,linkCallback:o.launchProperties,placeHolder:s.SEARCH_PLACEHOLDER_TEXT,excludePendingUser:!0,validateSameTenant:!0}),this.setColumnInfo()}});return r._instance=r._instance||new r,r._instance}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppPlanConfigForCreate",["DS/ENOProjectMgmtModels/Collections/SearchObjects","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon"],function(e,t,i,n,a,o){"use strict";return t.extend({_uwaClassName:"RskOppPlanConfigForCreate",columnInfo:{},type:"plan",setup:function(e){this.setValues(e),this.setColumnInfo()},setValues:function(t){this.values=[{label:o.MEASURE_OF_SUCCESS,name:"measureOfSuccess",type:"textarea",numberOfDisplayLines:2,numberOfEditableLines:2,readWrite:"true"},{label:t.label,name:t.name,type:"textarea",numberOfDisplayLines:2,numberOfEditableLines:2,readWrite:"true"},{readWrite:"true",name:"resolvedBy",attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!1,label:a.RESOLVED_BY,type:"object",typeAheadCallback:e.typeAheadCallback,linkCallback:n.launchProperties,placeHolder:a.SEARCH_PLACEHOLDER_TEXT,customView:i,validateSameTenant:!0}]}})}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppTrendConfig",["UWA/Core","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/DefaultGridConfig","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon","css!DS/ENOProjectMgmtRskOppClientCommon/ENOProjectMgmtRskOppClientCommon.css"],function(e,t,i,n,a,o){"use strict";let s;return t.extend({_uwaClassName:"RskOppTrendConfig",type:"list",columnInfo:{},customContentColumnInfo:{},setup:function(e){this.setValues(e),this.setColumnInfo()},gridConfig:function(){let t=e.clone(i);return t.identifier="TrendGridView",t.showContextualMenuColumnFlag=!1,t.showSelectionCheckBoxesFlag=!1,t.rowSelection="none",t.customViews=[{identifier:"TrendList View",layoutDensity:"comfortable",columnsWidth:{rpnImpact:55,rpnProbability:80,rpnValue:82},columnsSortModel:[{dataIndex:"modified",sort:"desc"}],isDefault:!0}],t}(),registerReusableCellContent:{id:"rpnHistoryContent",buildContent:function(){return e.createElement("div",{class:"object-rating"})}},setModel:function(e){s=e},setValues:function(e){this.values=[{text:e.IMPACT,fields:"rpnImpact",dataIndex:"rpnImpact",mapFromRangeValue:!0,alignmentValue:"center"},{text:o.PROBABILITY,fields:"rpnProbability",dataIndex:"rpnProbability",mapFromRangeValue:!0,alignmentValue:"center"},{text:e.RPN,fields:"rpnValue",dataIndex:"rpnValue",typeRepresentation:"number",mapFromRangeValue:!0,alignmentValue:"center",customContentId:"rpnHistoryContent",onCellRequest:function(e){var t=this.reuseCellContent("rpnHistoryContent");t.empty();let i=e.nodeModel.options.data.model;if(i&&s){let e=i.get("rpnImpact"),n=i.get("rpnProbability"),a=i.get("rpnValue");a=Number(a);let o=s.getMatrixConfig(),l=s.getSeverityInfo(o,e,n),r=l&&l.backgroundColor||"#77797C",c=l&&l.textColor||"#ffffff";t.set({text:a,styles:{color:c,background:r}})}e.cellView._setReusableContent(t)}},{text:a.EFFECTIVE_DATE,fields:"rpnEffectiveDate",dataIndex:"rpnEffectiveDate",alignmentValue:"center",typeRepresentation:"date"},{text:a.MODIFICATION_DATE,fields:"modified",dataIndex:"modified",alignmentValue:"center",typeRepresentation:"datetime"},{text:a.COMMENT,fields:"rpnComments",dataIndex:"rpnComments"}]}})}),define("DS/ENOProjectMgmtRskOppClientCommon/config/ContextSelectionConfig",["DS/ENOProjectMgmtModels/Collections/SearchObjects","DS/ENOProjectMgmtModels/Utils/FederatedSearch","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,n,a,o){"use strict";let s=i.extend({_uwaClassName:"ContextSelectionConfig",columnInfo:{},setup:function(){this.setColumnInfo()},type:"properties",values:[{readWrite:"true",name:"context",attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!0,type:"object",typeAheadCallback:e.typeAheadCallback,customView:a,linkCallback:n.launchProperties,placeHolder:o.CONTEXT_SEARCH_TEXT,validateSameTenant:!0,excludeSearchTypes:{"3dspace":["Inbox Task","Project Baseline","Experiment","Project Snapshot"]},showRemoveMenuItem:!0}]});return s._instance=s._instance||new s,s._instance}),define("DS/ENOProjectMgmtRskOppClientCommon/config/BreakdownChartConfig",[],function(){"use strict";let e={text:"",align:"center",verticalAlign:"middle",y:60,style:{fontFamily:"Arial",fontWeight:"bold",fontSize:"30px"}};return{_uwaClassName:"RiskBreakdownConfig",chart:{type:"pie"},credits:!1,title:e,tooltip:{pointFormat:"<b>{point.y}</b> ({point.percentage:.2f}%)"},legend:{y:20,margin:5,maxHeight:75,labelFormatter:function(){return this.isEmpty?this.name:this.name+" ("+this.y+")"}},plotOptions:{pie:{animation:!0,allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},states:{hover:{brightness:.02}},showInLegend:!0,startAngle:-90,endAngle:90,center:["50%","100%"],size:"210%",point:{events:{legendItemClick:function(){if(this.series.chart.options.series.isEmpty)return!1;let t;return t=this.visible?parseInt(this.total)-this.options.y:parseInt(this.total)+this.options.y,e.text=String(t),this.series.chart.setTitle(e),!0},click:function(){if(this.series.chart.options.series.isEmpty)return!1;this.series.chart.options.onClickCallBack("ds6w:why/ds6w:fulfills/ds6w:severity",this.name)}}}}},series:[{innerSize:"45%",data:[]}],responsive:{rules:[{condition:{minHeight:390,maxWidth:768},chartOptions:{plotOptions:{pie:{center:["50%","80%"],size:"150%"}}}},{condition:{minHeight:390,maxWidth:500},chartOptions:{plotOptions:{pie:{center:["50%","80%"],size:"110%"}}}}]}}}),define("DS/ENOProjectMgmtRskOppClientCommon/constants/Constants",["DS/WebappsUtils/WebappsUtils"],function(e){"use strict";let t=e.getWebappsBaseUrl()+"ENOProjectMgmtRskOppClientCommon/assets/";return{BASE_URL:t,ADD_NODE:"add node",REMOVE:"Remove",ENTER_KEYCODE:13,MOVE_RISK:"move risk",EMPTY_CIRCLE:t+"icons/emptyCircle.png",QUARTERFILLED_CIRCLE:t+"icons/quarterFilledCircle.png",HALFFILLED_CIRCLE:t+"icons/halfFilledCircle.png",THREEQUARTERFILLED_CIRCLE:t+"icons/threeQuarterFilledCircle.png",FILLED_CIRCLE:t+"icons/filledCircle.png",ALLOWED_IMAGE_FORMATS:["png","jpg","jpeg","gif","tiff","bpg"]}}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppCreateConfig",["UWA/Core","DS/ENOProjectMgmtModels/Utils/FederatedSearch","DS/ENOProjectMgmtModels/Collections/SearchObjects","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtObjectCardView","DS/ENOProjectMgmtCommonComponents/views/ProjectMgmtHeatMapCustomView","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon"],function(e,t,i,n,a,o,s,l,r){"use strict";return n.extend({_uwaClassName:"RskOppCreateConfig",type:"basic",columnInfo:{},setup:function(e){this.clientNLS=e,this.setValues(),this.addAdditionalValues(),this.setColumnInfo()},setValues:function(){this.values=[{label:l.TITLE,name:"title",type:"text",readWrite:!0,required:!0,numberOfDisplayLines:1,numberOfEditableLines:1,removeCarriageReturns:!0,maxLength:128,validate:!0},{label:l.DESCRIPTION,name:"description",type:"textarea",readWrite:!0,numberOfDisplayLines:2,numberOfEditableLines:2,maxLength:150},{name:"context",label:l.CONTEXT,readWrite:!0,attributeToDisplay:"title",imageAttribute:"image",singleObjectOnly:!0,type:"object",required:!0,fetchSource:"RiskContextInfo",typeAheadCallback:i.typeAheadCallback,customView:a,linkCallback:s.launchProperties,placeHolder:l.SEARCH_PLACEHOLDER_TEXT,validate:!0,validateSameTenant:!0,excludeSearchTypes:{"3dspace":["Program"]},include:"configuration"},{label:l.MATRIX_CONFIGURATION,name:"matrixConfiguration",type:"text",readWrite:!1,validate:!0},{label:l.EFFECTIVE_DATE,name:"effectiveDate",type:"date",readWrite:!0,defaultValue:new Date,required:!0,validate:!0},{label:this.clientNLS.IMPACT,name:"impact",type:"select",readWrite:!0,defaultValue:void 0,values:void 0},{label:r.PROBABILITY,name:"probability",type:"select",readWrite:!0,defaultValue:void 0,values:void 0},{label:this.clientNLS.RPN,name:"rpnValue",type:"text",readWrite:!1},{label:l.HEAT_MAP,name:"heatmap",readWrite:!1,customView:o},{label:l.COMMENT,name:"comments",type:"textarea",readWrite:"true",numberOfDisplayLines:2,numberOfEditableLines:2,maxLength:150},{label:l.POLICY,name:"policy",type:"select",defaultValue:void 0,values:void 0},{label:l.ESTIMATED_DATES,name:"estimatedStartDate",type:"startStop",readWrite:!0,startDateAttribute:"estimatedStartDate",startDateLabel:l.START,endDateAttribute:"estimatedFinishDate",endDateLabel:l.END,validate:!0},{label:this.clientNLS.CLASS_TYPE,name:"classType",type:"select",readWrite:!0,defaultValue:void 0,values:void 0}]},getDefaultCommentsConfig:function(){return{label:l.COMMENT,name:"comments",type:"textarea",readWrite:"true",numberOfDisplayLines:2,numberOfEditableLines:2,maxLength:150}},getDefaultImpactConfig:function(){return{label:this.clientNLS.IMPACT,name:"impact",type:"select",readWrite:!0,defaultValue:void 0,values:void 0}},getDefaultProbabilityConfig:function(){return{label:r.PROBABILITY,name:"probability",type:"select",readWrite:!0,defaultValue:void 0,values:void 0}},getImpactConfigForMatrix:function(t,i){let n=e.clone(i||{},!1).inValidRMC,a=t.Xaxis,o=a.nls[widget.lang]||a.name,l=s.formatRangeValuesForSelectView(a.nodes,"value",s.getconcatenatedActualDisplayValue);return{required:n,label:o,name:"impact",type:"select",readWrite:!0,defaultValue:n?"":l[0].actualValue,values:l,validate:!0}},getProbabilityConfigForMatrix:function(t,i){let n=e.clone(i||{},!1).inValidRMC,a=t.Yaxis,o=a.nls[widget.lang]||a.name,l=s.formatRangeValuesForSelectView(a.nodes,"value",s.getconcatenatedActualDisplayValue);return{required:n,label:o,name:"probability",type:"select",readWrite:!0,defaultValue:n?"":l[0].actualValue,values:l,validate:!0}},getDefaultMatrixConfig:function(){return{label:l.MATRIX_CONFIGURATION,name:"matrixConfiguration",type:"text",readWrite:!1,validate:!0}},getMultiValueMatrixConfig:function(e){return{required:!0,label:l.MATRIX_CONFIGURATION,name:"matrixConfiguration",type:"select",readWrite:!0,defaultValue:"",validate:!0,values:s.formatRangeValuesForSelectView(e,"id","title",{blankRange:!0})}}})}),define("DS/ENOProjectMgmtRskOppClientCommon/config/ClassificationChartConfig",["DS/ENOProjectMgmtCommonComponents/config/AppConfig"],function(e){"use strict";return{_uwaClassName:"ClassificationChartConfig",chart:{type:"bar"},credits:!1,title:!1,xAxis:{type:"category",tickLength:0,labels:{step:1,style:{width:"180px",overflow:"hidden",textOverflow:"ellipsis"}}},yAxis:{allowDecimals:!1,lineWidth:1,title:{text:null}},legend:{enabled:!1},tooltip:{pointFormat:"<b>{point.y}</b>",style:{textOverflow:"ellipsis"}},plotOptions:{bar:{animation:!0,cursor:"pointer",color:e.ChartsColor.ORANGE0_COLOR,dataLabels:{enabled:!0},point:{events:{click:function(){this.isEmpty||("Classification"===this.classType?this.series.chart.options.onClickCallBack("ds6w:what/ds6w:library",this.actualValue):this.series.chart.options.onClickCallBack("ds6w:how/ds6w:classification",this.actualValue))}}}}},series:[{dataSorting:{enabled:!0,sortKey:"y"},data:[]}]}}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppPropertiesConfigForMassUpdate",["UWA/Core","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon"],function(e,t,i,n){"use strict";let a=t.extend({_uwaClassName:"RskOppPropertiesConfigForMassUpdate",columnInfo:{},setup:function(){this.setColumnInfo()},type:"basic",values:[{label:i.DESCRIPTION,name:"description",type:"textarea",readWrite:!0,numberOfDisplayLines:2,numberOfEditableLines:2,maxLength:150,validate:!0},{label:i.EFFECTIVE_DATE,name:"effectiveDate",type:"date",readWrite:!0,defaultValue:new Date,validate:!0},{label:i.ESTIMATED_DATES,name:"estimatedStartDate",type:"startStop",readWrite:!0,startDateAttribute:"estimatedStartDate",startDateLabel:i.START,endDateAttribute:"estimatedFinishDate",endDateLabel:i.END,validate:!0},{label:i.MATURITY_STATE,name:"state",type:"select",readWrite:"true",defaultValue:void 0,mapFromRangeValue:!0,values:void 0,maxLength:26,validate:!0},{label:n.CLASS_TYPE,name:"classType",type:"select",readWrite:!0,defaultValue:void 0,values:void 0,validate:!0}]});return a._instance=a._instance||new a,a._instance}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppTrendChartConfig",["DS/ENOProjectMgmtCommonComponents/config/AppConfig","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon"],function(e,t){"use strict";return{_uwaClassName:"RskOppTrendChartConfig",chart:{type:"scatter",spacingLeft:0,events:{redraw:function(){let e=this.series[0].points[0];this.fontIcon&&(this.fontIcon.destroy(),this.fontIcon=void 0),this.fontIcon=this.renderer.text(e.fontIcon,e.plotX+this.plotLeft-7,e.plotY+this.plotTop+3,!0).add()}}},credits:!1,title:!1,exporting:!1,yAxis:{allowDecimals:!1,lineWidth:1,title:{text:t.RPN,style:{fontWeight:"bold",color:e.ChartsColor.BLUE4_COLOR}}},xAxis:{type:"datetime",tickmarkPlacement:"on",minPadding:.1},tooltip:{headerFormat:"<b>{series.name}: {point.y} </b><br>",pointFormat:"{point.x:%A, %b %e, %Y} "},legend:{enabled:!1},plotOptions:{series:{lineWidth:2,color:e.ChartsColor.BLUE3_COLOR,step:"right",marker:{enabled:!0,radius:5}}},series:[{name:t.RPN,data:void 0}]}}),define("DS/ENOProjectMgmtRskOppClientCommon/config/TabConfigForCreate",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtRskOppClientCommon/config/RskOppMembersConfigForCreate","DS/ENOProjectMgmtCommonComponents/config/ClassificationConfigForCreate","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon"],function(e,t,i,n){"use strict";return e.extend({_uwaClassName:"TabConfigForCreate",name:"create",type:"tab",columnInfo:{},setup:function(e){this.setValues(e),this.setColumnInfo()},setValues:function(e){this.values=[{name:n.PROPERTIES,key:"properties",selected:!0,include:"context,ownerInfo,originatorInfo,rmcActual,rmcGoverning",font:"doc-text",config:e.CreateConfig,checkFlag:!0},{name:n.PLAN,key:"plan",selected:!1,font:"list-test",config:e.PlanConfigForCreate,checkFlag:!1},{name:n.RELATED_CONTENT,key:"relatedContent",selected:!1,font:"location",config:e.ContentConfig,checkFlag:!1},{name:n.MEMBERS,key:"members",selected:!1,font:"users",config:t,checkFlag:!1},{name:n.CLASSIFICATION,key:"classification",selected:!1,font:"library-class",config:i,checkFlag:!1}]},getDefaultTab:function(){for(let e in this.values)if(this.values[e].checkFlag)return this.values[e]}})}),define("DS/ENOProjectMgmtRskOppClientCommon/config/TabConfig",["DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtRskOppClientCommon/config/RskOppMembersConfig","DS/ENOProjectMgmtRskOppClientCommon/config/ActionButtonConfig","DS/ENOProjectMgmtCommonComponents/config/ClassificationConfig","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,n,a){"use strict";return e.extend({_uwaClassName:"TabConfig",name:"edit",type:"tab",actionButtonConfig:i,columnInfo:{},setup:function(e){this.setValues(e),this.setColumnInfo()},setValues:function(e){this.values=[{name:a.PROPERTIES,key:"properties",selected:!0,fields:"title,name,typeicon,owner,deleteAccess,modifyAccess,promoteAccess,demoteAccess,fromConnectAccess,toConnectAccess,RMCConnectAccess,description,effectiveDate,impact,probability,rpnValue,policy,estimatedStartDate,estimatedFinishDate,classType,state,actualStartDate,actualFinishDate,originated,modified,context.title,context.name,context.image,context.project,context.thumbnail,ownerInfo.title,ownerInfo.name,ownerInfo.image,ownerInfo.firstname,ownerInfo.lastname,ownerInfo.company,project,projectTitle,originator,originatorInfo.firstname,originatorInfo.lastname,rmcActual.title,rmcGoverning.title,validConfiguration,organizationTitle,comments,estimatedBenefit,estimatedBenefitInputUnit",include:"context,ownerInfo,originatorInfo,rmcActual,rmcGoverning",font:"doc-text",config:e.PropertiesConfig,checkFlag:!0},{name:a.PLAN,key:"plan",selected:!1,fields:"mitigationType,actionPlanStatus,measureOfSuccess,abatement,realizationPlan,resolvedBy.title,resolvedBy.name,resolvedBy.image",include:"resolvedBy",font:"list-test",config:e.PlanConfig,checkFlag:!1},{name:a.RELATED_CONTENT,key:"relatedContent",selected:!1,fields:"associatedRisks.title,associatedRisks.name,associatedRisks.image,affectedItems.title,affectedItems.name,affectedItems.image,references.title,references.name,references.image,associatedOpportunities.title,associatedOpportunities.name,associatedOpportunities.image",include:"associatedRisks,affectedItems,references,associatedOpportunities",font:"location",config:e.ContentConfig,checkFlag:!1},{name:a.MEMBERS,key:"members",selected:!1,fields:"assignees.title,assignees.name,assignees.image,assignees.firstname,assignees.lastname,changeOwnerAccess,informedUser.name,informedUser.firstname,informedUser.lastname,informedUser.image",include:"assignees,informedUser",font:"users",config:t,checkFlag:!1},{name:a.CLASSIFICATION,key:"classification",selected:!1,font:"library-class",config:n,checkFlag:!1},{name:a.TREND,key:"riskTrend",selected:!1,font:"chart-line-single",checkFlag:!1},{name:a.RELATIONS_LABEL,key:"relations",selected:!1,showOnCreate:!1,font:"object-related",checkFlag:!1},{name:a.COMMENT,key:"comments",selected:!1,showOnCreate:!1,font:"comment",checkFlag:!1}]},getDefaultTab:function(){for(let e in this.values)if(this.values[e].checkFlag)return this.values[e]}})}),define("DS/ENOProjectMgmtRskOppClientCommon/config/TabConfigForMassUpdate",["DS/ENOProjectMgmtRskOppClientCommon/config/RskOppPropertiesConfigForMassUpdate","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i){"use strict";let n=t.extend({_uwaClassName:"TabConfigForMassUpdate",columnInfo:{},setup:function(){this.setColumnInfo()},name:"create",type:"tab",values:[{name:i.PROPERTIES,key:"properties",selected:!0,font:"doc-text",config:e,checkFlag:!0}],getDefaultTab:function(){for(let e in this.values)if(this.values[e].checkFlag)return this.values[e]}});return n._instance=n._instance||new n,n._instance}),define("DS/ENOProjectMgmtRskOppClientCommon/config/RskOppListConfig",["UWA/Core","UWA/Utils","DS/ENOProjectMgmtModels/Utils/SearchUtil","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/config/ConfigBase","DS/ENOProjectMgmtCommonComponents/config/DefaultGridConfig","DS/ENOProjectMgmtRskOppClientCommon/constants/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents","i18n!DS/ENOProjectMgmtRskOppClientCommon/assets/nls/ENOProjectMgmtRskOppClientCommon","css!DS/ENOProjectMgmtCommonComponents/ENOProjectMgmtCommonComponents.css","css!DS/ENOProjectMgmtRskOppClientCommon/ENOProjectMgmtRskOppClientCommon.css"],function(e,t,i,n,a,o,s,l,r,c){"use strict";let m={0:l.EMPTY_CIRCLE,1:l.QUARTERFILLED_CIRCLE,2:l.HALFFILLED_CIRCLE,3:l.THREEQUARTERFILLED_CIRCLE},d=function(e){let t=e.cellView,i=t&&t.elements.container.getElement(".wux-tweakers");if(i&&i.setAttribute("has-badge",!0),e.nodeModel){let t=e.nodeModel.options.data.model;if(t){let e=t.get("state");return"object-maturity "+(e&&e.toLowerCase()||"")}}};return o.extend({_uwaClassName:"RskOppListConfig",type:"list",columnInfo:{},customContentColumnInfo:{},getGridConfig:function(t){let i=e.clone(s),n=e.merge({typeicon:!1,impact:!1,probability:!1,classType:!1,measureOfSuccess:!1},t||{});return i.cellDragEnabledFlag=!0,i.virtuallyLoadAllModelItems=!1,i.identifier="ListGridView",i.customViews=[{identifier:"AppList View",layoutDensity:"comfortable",columnsVisibleFlag:n,columnsWidth:{tree:"auto",name:125,description:175,context:175,rpnValue:110,modified:200,assignees:200,ownerInfo:200,state:225},columnsSortModel:[{dataIndex:"modified",sort:"desc"}],isDefault:!0}],i.statusBarOptions=this.getStatusBarOptions(),i},setup:function(e){this.clientNLS=e,this.setValues(e),this.addAdditionalValues(),this.setColumnInfo(),this.gridConfig=this.getGridConfig()},registerReusableCellContent:[{id:"assigneesContent",buildContent:function(){return e.createElement("div",{class:"grid-users-list"})}},{id:"rpnValueContent",buildContent:function(){return e.createElement("div",{class:"object-rating"})}}],getCellTooltip:function(e){let t;if(e.nodeModel&&(t=this.getColumnOrGroup(e.columnID)),t&&"mitigationType"===t.dataIndex){let t=e.nodeModel.options.data.model.get("actionPlanStatus")||"0";return{shortHelp:n.getFieldDefinitionColumn(e.nodeModel.options.data.model.getFieldDefinitionSource(),"actionPlanStatus").fieldDefinitionRangeItem[t].display,updateModel:!1}}return this.getCellDefaultTooltip(e)},updateImpactProbabiltyConfig:function(e){let t=a.findObject(this.values,"dataIndex","impact"),i=a.findObject(this.values,"dataIndex","probability"),n=this.clientNLS.IMPACT,o=c.PROBABILITY;e&&(n=e.Xaxis.nls[widget.lang]||e.Xaxis.name,o=e.Yaxis.nls[widget.lang]||e.Yaxis.name),t.text=n,i.text=o},getContextFields:function(){return"none,name,title,image,riskCreateAccess,project,thumbnail,configuration.title,configuration.name"},getContextIncludeFields:function(){return"none,configuration"},setValues:function(t){this.values=[{text:r.TITLE,key:"title",dataIndex:"tree",initialFields:"title,typeicon,validConfiguration,contextValidConfiguration",initialInclude:"rmcActual",fields:"modifyAccess,deleteAccess,promoteAccess,demoteAccess,fromConnectAccess,toConnectAccess,RMCConnectAccess,isSimpleTask",minWidth:"150",icon:""},{text:r.NAME,initialFields:"name",dataIndex:"name"},{text:r.DESCRIPTION,fields:"description",dataIndex:"description",massUpdateAllowedFlag:!0},{text:r.CONTEXT,include:"context,configuration,rmcActual,rmcGoverning",fields:"context.title,context.name,context.image,context.thumbnail,context.project,configuration.title,configuration.name,configuration.image,rmcActual.name,rmcActual.title,rmcGoverning.name,rmcGoverning.title",dataIndex:"context",typeRepresentation:"string",getCellValue:function(e){let t=e.nodeModel.options.data.model,i=t&&t.get("context");return i&&i.size()>0&&i.at(0).get("title")||"--"},getCellClassName:function(e){if(e.nodeModel)return"object-context"},getCellSemantics:function(e){let t="",i=e.nodeModel.options.data.model,n=i&&i.get("context"),a=n&&n.at(0);return a&&(t={icon:a.get("image"),label:a.title}),t}},{text:t.RPN,fields:"rpnValue",dataIndex:"rpnValue",typeRepresentation:"number",alignmentValue:"center",customContentId:"rpnValueContent",onCellRequest:function(e){var t=this.reuseCellContent("rpnValueContent");t.empty();let i=e.nodeModel.options.data.model;if(i){let e=i.getRiskSeverityInfo(),n=e&&e.backgroundColor,a=e&&e.textColor,o=i.get("rpnValue");t.set({text:o,styles:{color:a,background:n}})}e.cellView._setReusableContent(t)}},{text:r.ACTION_PLAN,initialFields:"mitigationType",fields:"actionPlanStatus",dataIndex:"mitigationType",typeRepresentation:"string",minWidth:"120",getCellValue:function(e){return e.nodeModel.options.data.model.get("mitigationType")},getCellClassName:function(e){if(e.nodeModel)return"object-context"},getCellSemantics:function(e){let t=e.nodeModel.options.data.model.get("actionPlanStatus")||"0";return{icon:m[t]||l.FILLED_CIRCLE,label:n.getFieldDefinitionColumn(e.nodeModel.options.data.model.getFieldDefinitionSource(),"actionPlanStatus").fieldDefinitionRangeItem[t].display}}},{text:t.IMPACT,initialFields:"impact",dataIndex:"impact",typeRepresentation:"number"},{text:c.PROBABILITY,initialFields:"probability",dataIndex:"probability",typeRepresentation:"number"},{text:c.MEASURE_OF_SUCCESS,initialFields:"measureOfSuccess",dataIndex:"measureOfSuccess"},{text:t.CLASS_TYPE,initialFields:"classType",dataIndex:"classType",massUpdateAllowedFlag:!0},{text:r.MODIFICATION_DATE,initialFields:"modified",dataIndex:"modified",alignmentValue:"center",typeRepresentation:"datetime"},{text:r.ASSIGNEES,fields:"assignees,assignees.name,assignees.firstname,assignees.lastname",include:"assignees",dataIndex:"assignees",typeRepresentation:"string",customContentId:"assigneesContent",onCellRequest:function(t){var n=this.reuseCellContent("assigneesContent");n.empty();let a=t.nodeModel.options.data.model,o=a&&a.get("assignees"),s=o&&o.length;s&&o.forEach(function(t){let a=t.id,o=t.getFullName(),l=e.createElement("div",{class:"grid-user-image"});e.createElement("img",{draggable:"true","data-id":a,title:o,class:"grid-user-image-img",src:i.userPictureURL(t.get("name"),"normal")}).inject(l),l.inject(n),1===s&&e.createElement("span",{"data-id":a,html:o,title:o,class:"wux-tweakers-string-label"}).inject(n)}),t.cellView._setReusableContent(n)}},{text:r.OWNER,fields:"owner,ownerInfo.name,ownerInfo.firstname,ownerInfo.lastname",include:"ownerInfo",dataIndex:"ownerInfo",typeRepresentation:"string",getCellValue:function(e){let t=e.nodeModel.options.data.model,i=t&&t.get("ownerInfo");return i&&i.length?i.at(0).get("fullName"):""},getCellClassName:function(e){if(e.nodeModel)return"object-owner"},getCellSemantics:function(e){let t=e.nodeModel.options.data.model,i=t&&t.get("ownerInfo");return t&&{icon:t.getOwnerUrl(),label:i&&i.length?i.at(0).get("fullName"):""}}},{text:r.MATURITY_STATE,initialFields:"state",dataIndex:"state",mapFromRangeValue:!0,getCellClassName:d,massUpdateAllowedFlag:!0}]}})}),define("DS/ENOProjectMgmtRskOppClientCommon/utils/RskOppCloneModel",["UWA/Core","DS/ENOProjectMgmtRskOppClientCommon/config/RskOppMembersConfig","DS/ENOProjectMgmtRskOppClientCommon/config/RskOppMembersConfigForCreate","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtCommonComponents/utils/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","DS/ENOProjectMgmtCommonComponents/utils/ProjectMgmtCloneModel","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,n,a,o,s,l,r){"use strict";let c=["impact","probability","rpnValue","comments","impact_displayValue","probability_displayValue"];return l.extend({_uwaClassName:"RskOppCloneModel",init:function(){this._parent.apply(this,arguments),this.MembersConfig=this.isNew?i:t},add:function(t,i,n){var a=e.clone(n||{},!1);a.sourceType="risk",this.updateConfigValidate(a),this._parent(t,i,a)},dataForRendering:function(){let e=this._parent.apply(this,arguments);return e.effectiveDate=this.get("effectiveDate"),e.actualStartDate=this.get("actualStartDate"),e.actualFinishDate=this.get("actualFinishDate"),e.estimatedStartDate=this.get("estimatedStartDate"),e.estimatedFinishDate=this.get("estimatedFinishDate"),e},remove:function(){this.updateConfigValidate(arguments[2]),this._parent.apply(this,arguments)},validate:function(e,t){var i=!0,n={fields:[],messages:{}};let a=this._attributesGet(e,"title"),o=this._attributesGet(e,"context"),s=this._attributesGet(e,"matrixConfiguration"),l=this._attributesGet(e,"impact"),c=this._attributesGet(e,"probability"),m=this.getDateFieldValue("effectiveDate",e),d=this.isValidString(a),u=o&&o.length,p=this.getInvalidRMCTitle(),C=this.isValidString(l),g=this.isValidString(c),f=this.validateMatrixConfig(s),h=this.model.getMatrixConfigById(s),b=h&&h.title,E=this.get("impact_displayValue"),O=this.get("probability_displayValue");return i&&!d&&(i=!1,n.fields.push("title")),i&&!u&&(i=!1,n.fields.push("context")),i&&!f&&(i=!1,n.fields.push("matrixConfiguration"),p&&(n.messages.matrixConfiguration=r.replace(r.INVALID_RMC_MESSAGE,{inValidRMCTitle:p}))),(i||!this.isNew&&f)&&!C&&(i=!1,n.fields.push("impact"),p&&b&&E&&(n.messages.impact=r.replace(r.INVALID_RMC_ATTRS_MESSAGE,{rmcAttrValue:this.get("impact_displayValue"),inValidRMCTitle:p,validRMCTitle:b}))),(i||!this.isNew&&f)&&!g&&(i=!1,n.fields.push("probability"),p&&b&&O&&(n.messages.probability=r.replace(r.INVALID_RMC_ATTRS_MESSAGE,{rmcAttrValue:this.get("probability_displayValue"),inValidRMCTitle:p,validRMCTitle:b}))),i&&!m&&(i=!1,n.fields.push("effectiveDate")),i=i&&this.validateStartEndDates(e,n,t),this.dispatchEvent("disableSaveButton",!i),i?this.dispatchEvent("onValidationSuccess")&&void 0:n},getInvalidRMCTitle:function(){let e=this.get("inValidRMCTitle");if(!e){if(!this.model.isValidConfiguration()){let t=this.model.get("rmcActual"),i=t&&t.length&&t.at(0);e=i&&i.title}}return e},validateMatrixConfig:function(e){if(!e){if(this.model.isValidConfiguration()){let t=this.model.get("rmcActual"),i=t&&t.length&&t.at(0);e=i&&i.id}}return this.isValidString(e)},isValidString:function(t){return Boolean(e.is(t,"string")&&t&&t.trim().length)},get:function(e){let t=this._parent.apply(this,arguments);if(t)switch(e){case"effectiveDate":case"actualStartDate":case"actualFinishDate":case"estimatedStartDate":case"estimatedFinishDate":t=t&&o.getIntlDateFormat(t.actualValue||t);break;case"estimatedBenefitInputUnit":t=this.model.getUOMInputIndex(t)}return t},set:function(t,i,n){let a;return this.updateConfigValidate(n),i&&e.is(i,"object")&&(i=i.actualValue),"impact"===t||"probability"===t?(arguments[1]=i,n&&!n.doNotResetRelatedAttrs&&(a=this._parent.apply(this,arguments),n&&delete n.whisper,this._setRPNValue(t,i,n))):"matrixConfiguration"===t&&(arguments[1]=i,a=this._parent.apply(this,arguments),this.dispatchEvent("onChange:"+t,[i])),a||this._parent.apply(this,arguments)},_setRPNValue:function(e,t,i){let n,a,o;if(this.isImpactProbabilityModified()){switch(e){case"impact":n=t,o=this.get("probability");break;case"probability":o=t,n=this.get("impact")}n=Number(n),o=Number(o),a=!isNaN(n)&&!isNaN(o)&&n*o||"",this.setRPNAttrs(a,i)}else this.setRPNAttrs(void 0,i)},isImpactProbabilityModified:function(){return this.localAttributes.impact!==this.model.get("impact")||this.localAttributes.probability!==this.model.get("probability")},setRPNAttrs:function(e,t){let i=!e&&this.model.get("comments")||"";this.set("rpnValue",e||this.model.get("rpnValue")),t&&this.set("comments",i,{config:t})},updateConfigValidate:function(e){if(e&&!this.isNew){let t=e.config||e;if(!t.validate){let e=this.model.isValidConfiguration();e||t&&(t.validate=!e)}}},getMatrixAxisDisplayValue:function(e,t){if(t){let i=this.model.get(e),n=t.get("matrix"),a="impact"===e?n.Xaxis:n.Yaxis,s=o.findObject(a.nodes,"value",i);return{actualValue:i,displayValue:s&&i+"-"+(s.nls[widget.lang]||s.label)}}},getNLSMessageForCreateError:function(e){let t,i=this.isNew,n=e.get("project");if(e.isXPlanObject()&&!n)t=r.COLLAB_SPACE_SELECT_ERROR;else if(!e.canCreate()){switch(e.type){case a.PROJECT:t=i?r.NO_DPMPROJECT_CREATE_ACCESS:r.NO_DPMPROJECT_CHANGE_CONTEXT_ACCESS;break;case a.XPROJECT:t=i?r.NO_XPROJECT_CREATE_ACCESS:r.NO_XPROJECT_CONTEXT_CHANGE_ACCESS;break;default:t=i?r.NO_CREATE_ACCESS_TT_MSG:r.NO_CHANGE_CONTEXT_ACCESS_TT_MSG}}return t},handleContextOnSync:function(e,t){let i=e.fieldName,n=e.contextOptions,a=this.getNLSMessageForCreateError(t);a?s.buildNotification({title:this.isNew?r.CANNOT_CREATE:r.CHANGE_CONTEXT,message:a,hideDelay:3500},"error"):(n.changed=Boolean(!a),this.setRelatedItemData(i,t,n))},dispatchEventForAssignees:function(e){let t=e&&e.invokeSaveEvent,i=this.hasEvent("submitSave");t&&i&&this.dispatchEvent("submitSave",[e])},handleAssigneeUpdate:function(t,i,s){let l=this.MembersConfig.columnInfo.assignees;if(!l)return;let r=n.get("user");if("add"===t){let t=this,n=function(e){t.add(a.ASSIGNEE_ATTR,e,{config:l}),t.dispatchEventForAssignees(s)};!i||i instanceof e.Class.Model||(i="");let c=i||o.getPersonObjectInfo(r);c.getCESStamp()?n(c):c.addEventOnce("onSync",n.bind(this,c))}else if("remove"===t){let e=this.get("assignees")._alreadyHasObjectInRelatedData(r);this.remove(a.ASSIGNEE_ATTR,e,{config:l}),this.dispatchEventForAssignees(s)}},handleAssigneesUpdateOnDrop:function(e,t,i){this.setRelatedItemData(e,t,{config:this.MembersConfig.columnInfo.assignees}),this.hasEvent("submitSave")&&this.dispatchEvent("submitSave",[i])},handleRemoveAssignees:function(e,t){if(e)this.remove(a.ASSIGNEE_ATTR,e,{config:this.MembersConfig.columnInfo.assignees});else{this.get(a.ASSIGNEE_ATTR).removeAll()}this.hasEvent("submitSave")&&this.dispatchEvent("submitSave",[t])},handleAttrsUpdateForActions:function(e,t,i){switch(this._parent.apply(this,arguments),e){case a.ASSIGNEE_ATTR:this.handleAssigneesUpdateOnDrop(e,t,i);break;case a.ASSIGN_TO_SELF:case a.REMOVE_ASSIGN_TO_SELF:this.handleAssigneeUpdate(a.ASSIGN_TO_SELF===e?"add":"remove",t,i);break;case a.REMOVE_ASSIGNEE:this.handleRemoveAssignees(t,i)}},postAddRemoveContextMatrixConfig:function(t,i,n){let a,o,s=c;(t=t instanceof e.Class.Model?t:"")&&(a=t.id,o=t.get("title")),this.model.set("rmcId",a),n||(s=s.concat("matrixConfiguration"),i.matrixConfiguration=o),this.clearLocalAttributes(s),i&&Object.keys(i).length&&this.set(i),this.updateDetailsDisplay(Object.keys(this.localAttributes).length)}})});