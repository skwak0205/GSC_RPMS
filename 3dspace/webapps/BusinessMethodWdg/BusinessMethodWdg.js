define("DS/BusinessMethodWdg/Utils",[],function(){"use strict";const e=(window.widget||{}).lang||"en";return{deepClone:e=>JSON.parse(JSON.stringify(e)),isEmptyObj:(e={})=>!Object.keys(e).length,replace:(e,t)=>(e||"").replace(/\{([\w\-]+)\}/g,function(e,s){return void 0!==t[s]?t[s]:""}),formatUShortDate:function(t){return new Date(t).toLocaleDateString(e,{year:"2-digit",month:"2-digit",day:"2-digit"})},formatShortDate:function(t){return new Date(t).toLocaleDateString(e,{year:"numeric",month:"short",day:"numeric",weekday:"short"})},formatLongDate:function(t){return new Date(t).toLocaleDateString(e,{year:"numeric",month:"long",day:"numeric",weekday:"long"})},formatTime:function(t){return new Date(t).toLocaleTimeString(e,{hour:"numeric",minute:"numeric"})}}}),define("DS/BusinessMethodWdg/Proxy3DSearchWidget",["UWA/Core","UWA/Utils","UWA/Utils/InterCom"],function(e,t,s){"use strict";const i=["swym","3dspace","drive","usersgroup","3dplan","globe","dashboard"];var o=["3dspace","drive"],r=function(e,i){this.socketName="search_socket_"+t.getUUID(),this.socket=new s.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.listener=this.objectsSelected.bind(this),this.socket.addListener("Selected_Objects_search",this.listener);var o=this;this.socket.addListener("onCloseTransient",function(){o.unregister()});var r=this.options({title:"iTitle"});i&&(r.idcard_activated=!0)};return r.prototype.destroy=function(){var e={};e.widget_id=widget&&widget.id||enoviaServer.widgetId,this.socket.dispatchEvent("UnregisterContext",e),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.removeListener("onCloseTransient"),this.socket.disconnect()},r.prototype.options=function(t){var s=e.clone(t||{},!1),o={title:"",types:"",role:"",default_search_criteria:"",app_socket_id:this.socketName,mode:"furtive",widget_id:widget.id,default_with_precond:!0,show_precond:!1,idcard_activated:!1,select_result_max_idcard:!1,source:[...i],tenant:window.enoviaServer?enoviaServer.tenant:widget.getValue("x3dPlatformId"),precond:"",excluded_types:{},callback:null};return s.excludedSearchTypes&&(o.excluded_types=s.excludedSearchTypes),e.extend(o,s),function(t){if(e.is(t.types,"object")){var s="Config not supported by 3dsearch. If you specify types for any source, you must do so for all sources",i=e.is(t.source,"array")?t.source:[t.source],o=Object.keys(t.types);if(o.length!==i.length)throw new Error(s);for(var r=0;r<o.length;r++)if(-1===i.indexOf(o[r]))throw new Error(s)}}(o),o.precond||(o.precond=r.buildSearchTypeQuery(o.types,o)),o},r.prototype.activate=function(t){var s=this,i=s.options(t),o=i.callback;e.is(o,"function")||(i.mode="default"),s.callback=o;var r={};r.widget_id=widget&&widget.id||enoviaServer.widgetId,s.socket.dispatchEvent("UnregisterContext",r),s.socket.addListener("RegisterContext_Response",function(){s.socket.dispatchEvent("InContextSearch",i),s.socket.removeListener("RegisterContext_Response")}),s.socket.dispatchEvent("RegisterContext",i)},r.prototype.isAvailable=function(){return e.is(this.socket)},r.prototype.objectsSelected=function(e){this.callback&&this.callback(e)},r.prototype.unregister=function(){var e={widget_id:widget&&widget.id||enoviaServer.widgetId};this.socket.dispatchEvent("UnregisterContext",e)},r.buildSearchTypeQuery=function(t,s){var i;if(t){if(e.is(t,"string")){var o=s.source||["3dspace"];if(-1===(o=e.is(o,"array")?o:[s.source]).indexOf("3dspace")&&o.length)throw new Error("types as string only supported for 3dspace source as it is a backward compatibility feature");t={"3dspace":t.split(",")}}var n=Object.keys(t),d=n.length;i="(";for(var a=0;a<d;a++){0!==a&&(i+=" OR ");var l=n[a],h=t[l];e.is(h,"string")&&(h=[h]),i+=r.buildSearchTypeQueryForSource(l,h,s)}if(s.excluded_types)i+=Object.keys(s.excluded_types).length>0?") AND NOT "+r.buildSearchTypeQuery(s.excluded_types,{exclude:!0}):")";else i+=")"}else s.excluded_types&&(i=" NOT "+r.buildSearchTypeQuery(s.excluded_types,{exclude:!0}));return i},r.buildSearchTypeQueryForSource=function(e,t,s){var i,o=r.isM1BasedSource(e);i=o?"flattenedtaxonomies:":"[ds6w:type]:",i+="(","swym"===e&&-1!==t.indexOf("pno:Person")&&s&&!s.exclude&&s.excludePendingUser&&(i="ut_state:1 && "+i);for(var n=0;n<t.length;n++){var d=t[n];0!==n&&(i+=" OR "),i+=o?'"types/'+d.trim()+'"':'"'+d.trim()+'"'}return i+=")"},r.isM1BasedSource=function(e){return-1!==o.indexOf(e)},r.computeSourceParameters=function(t){var s=e.clone(t.excludeSearchTypes||{},!1),i={};o.forEach(function(i){(e.is(t.searchSource,"array")&&-1!==t.searchSource.indexOf(i)||t.searchSource===i)&&(s[i]||(s[i]=["Person","Security Context"]))});var n,d=t.searchSourceTypes;return d&&(n={types:d,specificSourceParameter:i,excludePendingUser:t.excludePendingUser},r._buildSpecificSourceParameter(n)),r._buildSpecificSourceParameter(n={types:s,specificSourceParameter:i,exclude:!0}),i},r._buildSpecificSourceParameter=function(e){for(var t=e.specificSourceParameter,s=e.types,i=Object.keys(s),o=i.length,n=0;n<o;n++){var d=i[n],a=s[d],l=t[d],h=l&&l.additional_query||"";h&&(h+=" AND "),e.exclude&&(h+="NOT "),h+=r.buildSearchTypeQueryForSource(d,a,e),t[d]={additional_query:h}}return t},r}),define("DS/BusinessMethodWdg/API",["DS/PlatformAPI/PlatformAPI","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e,t){"use strict";const s=top.require("DS/UWPClientCode/Data/BusinessExperience"),i=top.require("DS/UWPClientCode/Data/Utils"),o=top.require(["DS","WAFData","WAFData"].join("/")),r=top.require("DS/Dashboard/PublicAPI"),n=function(){if(!d){var e=window.location,t=e.pathname,s=e.protocol+"//"+e.host,i=t.indexOf("/api/widget/");d=window.dsBaseUrl||s+t.substring(0,-1!==i?i+1:t.length)}return d};var d;const a=function(){var e=[],t=arguments.length-1;return Array.prototype.forEach.call(arguments,function(s,i){s&&(s+="",0!==i&&(s=s.replace(/^\//,"")),i!==t&&(s=s.replace(/\/$/,"")),e.push(s))}),e.join("/")},l={PATCH_WIDGET_DATA_ERROR_CODE:"API#patchData",getPlatformId:e=>e.getValue("x3dPlatformId"),getGlobalPlatformId:()=>r._getGlobalPlatformId(),getCurrentContext:()=>r._getActiveContext(),getContextProperty:e=>r._getContextProperty(l.getCurrentContext().modelId,e),getFileUri:(e,t)=>a(n(),s.getFileUri({widgetId:e.id,modelId:l.getCurrentContext().modelId,fileId:t})),uploadPrivateFile:(e,{fileData:t,fileId:i,key:o})=>s.uploadPrivateFile({widgetId:e.id,modelId:l.getCurrentContext().modelId,fileData:t,fileId:i,key:o,serviceName:r._getServiceName()}),deletePrivateFile:function(e,{fileId:t,key:i}){return s.deleteFile({widgetId:e.id,modelId:l.getCurrentContext().modelId,fileId:t,key:i,serviceName:r._getServiceName()})},attachAsset:(e,{serviceName:t,assetJson:i,key:o,servicePath:n,assetId:d})=>l.getServiceUrl({platformId:l.getPlatformId(e),serviceName:t}).then(t=>s.attachAsset({widgetId:e.id,modelId:l.getCurrentContext().modelId,assetJson:i,key:o,endpoint:a(t,n),assetId:d,serviceName:r._getServiceName()}).catch(e=>{throw e})),deleteAsset:(e,{assetId:t,key:i})=>s.deleteAsset({widgetId:e.id,modelId:l.getCurrentContext().modelId,assetId:t,key:i,serviceName:r._getServiceName()}),getAssetUri:(e,t)=>a(n(),s.getAssetUri({widgetId:e.id,modelId:l.getCurrentContext().modelId,assetId:t})),fetchRoles:()=>s.get({modelId:l.getCurrentContext().modelId,serviceName:r._getServiceName()}).then(e=>e.roles||[]).catch(e=>(console.error("Fail to load roles parameter.",e),[])),fetchApps:()=>new Promise((e,s)=>{try{t.getBusinessMethodApps({onComplete:e})}catch(e){s(e)}}),fetchAppMethod:({serviceName:e,platformId:t,path:s})=>l.getServiceUrl({serviceName:e,platformId:t}).then(e=>new Promise(function(t,r){if(!e||!s)return r("Missing some mandatory options.");const n=i.buildPath(e,s),d={method:"GET",headers:i.getDefaultHeaders({}),onComplete:function(e){t(JSON.parse(e))},onFailure:function(e,t){var s;try{s=JSON.parse(t)}catch(e){s=t}r(s)}};o.authenticatedRequest(n,d)})),getServiceUrl:({serviceName:e,platformId:s})=>new Promise((i,o)=>{function r(){o("No service url found.")}t.getServiceUrl({platformId:s,serviceName:e,onComplete:function(e){if("string"==typeof e)return i(e);if(Array.isArray(e)){const t=e.find(e=>!!e.url);return t?i(t.url):r()}return r()},onFailure:o})}),patchData:(t,s)=>(s=(s=s||[]).filter(function(e){return e})).length?e.patchWidgetData({widget:t,patches:s,silentErrorAlert:!1}).catch(function(){throw{code:l.PATCH_WIDGET_DATA_ERROR_CODE}}):Promise.resolve(),createPatch(e,t,s,i){var o=e.environment.getAllData();return"set"===t?{op:s in o?"replace":"add",path:"/"+s,value:i}:"delete"===t&&s in o&&null!=o[s]?{op:"remove",path:"/"+s}:null}};return l}),define("DS/BusinessMethodWdg/Store/Types",[],function(){"use strict";return{index:{getters:{isInited:"index_is-store-initied",isServicesInitied:"index_is-services-initied",get3DCompassServiceUrl:"index_get-3DCompass-service-url",getApps:"index_get-apps",getAppsMap:"index_get-apps-map",getSelectedAppId:"index_get-selected-app-id",getApp:"index_get-app-from-id",isMethodConfirmed:"index_is-method-confirmed"},mutations:{setSelectedAppId:"index_set-selected-app-id"},actions:{initStore:"index_init-store",fetchApps:"index_fetch-apps",onSetSelectedAppId:"index_on-set-selected-app-id",goBackToEditMethod:"index_go-back-to-edit-method",onConfirmMethod:"index_on-confirm-method",onCancelMethod:"index_on-cancel-method",setWidgetTitle:"index_set-widget-title"}},method:{getters:{getAppId:"method_get-app-id",getName:"method_get-name",getDescription:"method_get-description",getFormSchema:"method_get-form-schema",getFormModel:"method_get-from-model",getFormOptions:"method_get-form-options",getFiles:"method_get-files",getFileErrors:"method_get-file-errors",getAssets:"method_get-assets",getAssetErrors:"method_get-asset-errors"},mutations:{setName:"method_set-name",setDescription:"method_set-description",setFormModel:"method_set-form-model"},actions:{fetchMethod:"method_fetch-method",onNameChange:"method_on-name-change",onDescriptionChange:"method_on-description-change",onFormModelChange:"method_on-form-model-change",uploadPrivateFile:"method_upload-private-file",deletePrivateFile:"method_delete-private-file",attachAsset:"method_attach-asset",deleteAsset:"method_delete-asset"}}}}),define("DS/BusinessMethodWdg/WidgetStarter",["UWA/Core","vuejs"],function(e,t){"use strict";var s=e.Class.extend({init:function(e){this._widget=e,this._widget.launched?(this.onLoad(),this.onShow()):this._widget.addEvent("onLoad",function(){this.onLoad(),this.onShow()}.bind(this)),this._widget.addEvent("onShow",this.onShow.bind(this)),this._widget.addEvent("onHide",this.onHide.bind(this)),this._parent()},onLoad:function(){},onShow:function(){this._view&&this.onHide(),this._render()},onHide:function(){this._view.$destroy(),this._widget.body.empty(),this._view=null},_render:function(){this._widget.body.setContent(e.createElement("div",{id:this._id})),this._view=new t(Object.assign({el:"#"+this._id},this._component))}});return function(e,i){return s.extend({init:function(s){this._id=e,this._component=i,this._component.methods||(this._component.methods={}),t.prototype.$getWidget=function(){return this._widget}.bind(this),i.nls&&(t.prototype.$t=function(e){return this._component.nls[e]}.bind(this)),i.plugins&&Object.keys(i.plugins).forEach(e=>{this._component[e]=i.plugins[e]}),this._parent(s)}})}}),define("DS/BusinessMethodWdg/Plugins/Vuetify",["vuejs","vuetify","vuekit-preset","css!DS/BusinessMethodWdg/assets/vendors/vuekit-preset/vuetify-themed.css"],function(e,t,s){"use strict";return e.use(t),new t({preset:s,theme:{dark:!1}})}),define("DS/BusinessMethodWdg/Plugins/Vjsf",["vuejs","vjsf","css!DS/BusinessMethodWdg/assets/vendors/vjsf/main.css"],function(e,t){"use strict";return e.component("VJsf",t.default),t}),define("DS/BusinessMethodWdg/Plugins/Vukit",["vuejs","vu-kit",`css!DS/BusinessMethodWdg/assets/vendors/vu-kit/${window.VU_KIT_VERSION}/vu-kit.css`],function(e,t){"use strict";t.install(e)}),define("DS/BusinessMethodWdg/Components/AppTile",["DS/BusinessMethodWdg/Store/Types","text!DS/BusinessMethodWdg/assets/Template/Components/AppTile.vue"],function(e,t){"use strict";const s=window.dsDefaultWebappsBaseUrl||"";return{name:"AppTile",template:t,props:{active:{type:Boolean,default:()=>!1},appId:{type:String,default:()=>""},interaction:{type:Boolean,default:()=>!0}},emits:{click:null},data:()=>({iconInitied:!1,styles:{icon:{"background-image":""},iconWrapper:{"background-image":""}}}),computed:{NS:()=>"method",app(){return this.$store.getters[e.index.getters.getApp](this.appId)},appName(){return this.app?this.app.title:""},appBrand(){return this.app?this.app.brand:""},isServicesInitied(){return this.$store.getters[e.index.getters.isServicesInitied]},iconUrl(){const t=this.$store.getters[e.index.getters.get3DCompassServiceUrl];return(this.app?this.app.icon:"")||`${t}/widget/images/MyApps/${this.appId}_AppIcon.png`},iconWrapperUrl:()=>`${s}i3DXCompass/assets/v3.1/images/app/Appicon_backgound_r2021x_sprite.png`,iconBackgroundUrl(){return`url(${this.iconUrl})`},showIconLoading(){return!this.iconInitied&&!this.isServicesInitied}},watch:{appId(){this.iconInitied=!1,this.initIcons()},isServicesInitied(){this.onServicesInitied()}},mounted(){this.initIcons()},methods:{initIcons(){this.isServicesInitied&&!this.iconInitied&&(this.styles.icon["background-image"]=this.iconBackgroundUrl,this.styles.iconWrapper["background-image"]=`url(${this.iconWrapperUrl})`,this.iconInitied=!0)},onClick(){this.interaction&&this.$emit("click",this.appId)},onServicesInitied(){this.initIcons()}}}}),define("DS/BusinessMethodWdg/Components/UploadedTile",["DS/BusinessMethodWdg/Utils","text!DS/BusinessMethodWdg/assets/Template/Components/UploadedTile.vue"],function(e,t){"use strict";return{name:"UploadedTile",template:t,props:{error:{type:Boolean,default:!1},errorMsg:{type:String,default:""},hideDelete:{type:Boolean,default:!1},hideStatus:{type:Boolean,default:!1},href:{type:String,default:""},label:{type:String,default:""},lastModified:{type:Number,default:0},loading:{type:Boolean,default:!1},previewUrl:{type:String,default:""},size:{type:Number,default:0},success:{type:Boolean,default:!1},type:{type:String,default:""},typeIconUrl:{type:String,default:""}},emits:{remove:null},data:()=>({}),computed:{labelText(){return e.replace(this.$t("label"),{label:this.label})},typeText(){return e.replace(this.$t("type"),{type:this.type})},lastModifiedText(){const t=this.lastModified,s=`${e.formatShortDate(t)} - ${e.formatTime(t)}`;return e.replace(this.$t("lastModified"),{date:s})},sizeText(){const t=Math.round(this.size/1048576),s=Math.round(this.size/1024);return t?e.replace(this.$t("sizeMB"),{size:t}):e.replace(this.$t("sizeKB"),{size:s})},uploadedIconTooltip(){return this.success?this.$t("uploadedSuccessTooltip"):this.loading?this.$t("uploadingTooltip"):this.error?this.$t("uploadedErrorTooltip"):void 0}},watch:{},mounted(){},methods:{remove(){this.$emit("remove")}}}}),define("DS/BusinessMethodWdg/Components/Vjsf/VjsfRolesInput",["DS/BusinessMethodWdg/API","text!DS/BusinessMethodWdg/assets/Template/Components/Vjsf/VjsfRolesInput.vue"],function(e,t){"use strict";return{name:"VjsfRolesInput",template:t,components:{},props:{value:{type:Array,default:()=>[]},options:{type:Object,required:!0},schema:{type:Object,required:!0},fullSchema:{type:Object,required:!0},fullKey:{type:String,required:!0},label:{type:String,default:""},htmlDescription:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rules:{type:Array,required:!0},on:{type:Object,required:!0}},emits:{validate:null},data:()=>({roles:[],isFetchingRoles:!1,isFetchedRoles:!1,validateValidInputOrgFn:null,valid:!0,hasFocus:!1}),computed:{xProps(){return this.schema["x-props"]||{}},items(){return((this.isFetchedRoles?this.roles:this.value)||[]).map(e=>({value:e,label:e}))},placeholder(){return this.noRoles?this.$t("noRolesToSelect"):this.xProps.placeholder||this.$t("searchPlaceholder")},helper(){return this.xProps.helper},noRoles(){return this.isFetchedRoles&&0===this.roles.length}},mounted(){const e=this._getInput();e.addEventListener("focus",this.onFocus.bind(this)),e.addEventListener("blur",this.onBlur.bind(this));const t=this._getValidInput();this.validateValidInputOrgFn=t.validate,t.validate=this.validate},methods:{onInput(e){this.on.input(e)},onFocus(){if(this.valid=!0,this.hasFocus=!0,!this.isFetchingRoles)return this.isFetchingRoles=!0,e.fetchRoles().then(e=>{this.isFetchedRoles=!0,this.roles=e}).finally(()=>{this.isFetchingRoles=!1})},onBlur(){this.hasFocus=!1,this.validate()},validate(){const e=this._getValidInput();return this.hasFocus?(this.valid=!0,e.errorBucket=[],!0):this.required&&this.rules&&this.rules.length?(this.validateValidInputOrgFn.apply(e,arguments),this.value.length||(e.valid=!1,e.errorBucket.push(this.$t("requiredInput"))),this.valid=e.valid,e.valid):this.validateValidInputOrgFn.apply(e,arguments)},_getInput(){return this.$refs.select.$refs.input},_getValidInput(){return this.$refs.validInput}}}}),define("DS/BusinessMethodWdg/Components/Vjsf/VjsfFileInput",["DS/BusinessMethodWdg/Utils","DS/BusinessMethodWdg/Components/UploadedTile","text!DS/BusinessMethodWdg/assets/Template/Components/Vjsf/VjsfFileInput.vue"],function(e,t,s){"use strict";return{name:"VjsfFileInput",template:s,components:{UploadedTile:t},props:{value:{type:String,default:""},options:{type:Object,required:!0},schema:{type:Object,required:!0},fullSchema:{type:Object,required:!0},fullKey:{type:String,required:!0},label:{type:String,default:""},htmlDescription:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rules:{type:Array,required:!0},on:{type:Object,required:!0},files:{type:Object,default:()=>({})},fileErrors:{type:Object,default:()=>({})}},emits:{change:null,remove:null,validate:null},data:()=>({}),computed:{showFileInput(){return!this.hasFile},hasFile(){return this.file&&!e.isEmptyObj(this.file)},file(){return this.files[this.fullKey]},fileUploaded(){return(this.file||{}).uploaded},fileError(){return this.fileErrors[this.fullKey]},fileErrorMsg(){return((this.fileError||{}).error||{}).errorMessage}},watch:{file(e,t){!e&&t&&this.on.input(null)},fileUploaded(e,t){e&&!t&&this.on.input("true")}},mounted(){(this.file||{}).error&&this.$emit("validate")},methods:{removeFile(){this.on.input(null),this.$emit("remove",this.fullKey)},getFileLabel(){return this.file.model.name},getFileType(){return this.file.model.type},onSelectFile(e){const t=e.target.files[0];t&&this.$emit("change",{key:this.fullKey,file:t})},browseFile(){this.$refs.fileInput.click()}}}}),define("DS/BusinessMethodWdg/Components/Vjsf/Vjsf3DSearchInput",["DS/BusinessMethodWdg/Utils","DS/BusinessMethodWdg/Components/UploadedTile","text!DS/BusinessMethodWdg/assets/Template/Components/Vjsf/Vjsf3DSearchInput.vue"],function(e,t,s){"use strict";return{name:"Vjsf3DSearchInput",template:s,components:{UploadedTile:t},props:{value:{type:String,default:""},options:{type:Object,required:!0},schema:{type:Object,required:!0},fullSchema:{type:Object,required:!0},fullKey:{type:String,required:!0},label:{type:String,default:""},htmlDescription:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rules:{type:Array,required:!0},on:{type:Object,required:!0},assets:{type:Object,default:()=>({})},assetErrors:{type:Object,default:()=>({})}},emits:{change:null,remove:null,validate:null},data:()=>({SearchProxy:null,searchInput:""}),computed:{xProps(){return this.schema["x-props"]||{}},serviceName(){return this.xProps.serviceName},servicePath(){return this.xProps.servicePath},searchPrecondition(){return this.xProps.searchPrecondition},showSearchInput(){return!this.hasAsset},hasAsset(){return!!this.asset},asset(){return this.assets[this.fullKey]},assetUploaded(){return(this.asset||{}).uploaded},assetError(){return this.assetErrors[this.fullKey]},assetErrorMsg(){return((this.assetError||{}).error||{}).errorMessage}},watch:{asset(e,t){!e&&t&&this.on.input(null)},assetUploaded(e,t){e&&!t&&this.on.input("true")}},mounted(){(this.asset||{}).error&&this.$emit("validate")},beforeDestroy(){this._destroySearchProxy()},methods:{search(){this._destroySearchProxy(),require(["DS/BusinessMethodWdg/Proxy3DSearchWidget"],e=>{this.SearchProxy=new e,this.SearchProxy.activate({title:"Business Method",default_search_criteria:this.searchInput,callback:this._onSelectResults.bind(this),precond:this.searchPrecondition})})},remove(){this.on.input(null),this.$emit("remove",{key:this.fullKey})},getLabel(){return this.asset.model["ds6w:label"]},getType(){const e=this.asset.model["ds6w:docExtension"],t=this.asset.model["ds6w:type"];return e?`${e} ${t}`:t},getPreviewUrl(){return this.asset.model.preview_url},getTypeIconUrl(){return this.asset.model.type_icon_url},_onSelectResults(t){this._destroySearchProxy();const s=t[0];this.$emit("change",{key:this.fullKey,asset:e.deepClone(s),serviceName:this.serviceName,servicePath:this.servicePath,searchPrecondition:this.searchPrecondition})},_destroySearchProxy(){this.SearchProxy&&(this.SearchProxy.destroy(),this.SearchProxy=null)}}}}),define("DS/BusinessMethodWdg/Store/Modules/Method.store",["UWA/Utils","vuejs","ajv","DS/BusinessMethodWdg/Utils","DS/BusinessMethodWdg/API","DS/BusinessMethodWdg/Store/Types"],function(e,t,s,i,o,r){"use strict";const n={},d={ajv:new s.default,httpLib:{get:(t,s)=>new Promise((s,i)=>{const o=e.getQueryString(t,"q","");console.log("httpLib get url:",t,o),s({data:{}})})},textFieldProps:{outlined:!0},textareaProps:{outlined:!0}};function a(e){return`#BER:PRIVATE-ASSET{${e}}`}return{namespaced:!0,state:function(){return{appId:"",name:"",description:"",form:{schema:void 0,model:void 0,options:void 0},files:{},assets:{},fileErrors:{},assetErrors:{}}},getters:{[r.method.getters.getAppId]:e=>e.appId,[r.method.getters.getName]:e=>e.name,[r.method.getters.getDescription]:e=>e.description,[r.method.getters.getFormSchema]:e=>e.form.schema,[r.method.getters.getFormModel]:e=>e.form.model,[r.method.getters.getFormOptions]:e=>({...n,...e.form.options,...d}),[r.method.getters.getFiles]:e=>e.files,[r.method.getters.getFileErrors]:e=>e.fileErrors,[r.method.getters.getAssets]:e=>e.assets,[r.method.getters.getAssetErrors]:e=>e.assetErrors,export:e=>{const t=(e,t,s)=>{const i=t.split(".");!function e(t,o){const r=i[o];o!==i.length-1?(t[r]||(t[r]={}),e(t[r],o+1)):t[r]=s}(e,0)},s=i.deepClone(e.form.model||{});return i.isEmptyObj(e.files)||Object.keys(e.files).forEach(i=>{const o=e.files[i];t(s,i,{uri:a(o._id),info:o.model})}),i.isEmptyObj(e.assets)||Object.keys(e.assets).forEach(i=>{const o=e.assets[i];t(s,i,{uri:a(o._id),info:o.model})}),{name:e.name,description:e.description,model:s}}},mutations:{[r.method.mutations.setName](e,t=""){e.name=t},[r.method.mutations.setDescription](e,t=""){e.description=t},[r.method.mutations.setFormModel](e,t){e.form.model=t},addNewFile(e,{key:s,file:i}){const o={_id:void 0,href:"",uploaded:!1,uploading:!1,error:!1,model:{lastModified:i.lastModified,name:i.name,size:i.size,type:i.type}};t.set(e.files,s,o)},deleteFile(e,s){t.delete(e.files,s),t.delete(e.form.model,s)},setFileId(e,{key:s,_id:i}){e.files[s]._id=i;const r=o.getFileUri(this.$getWidget(),i);t.set(e.files[s],"href",r)},setFileUploaded(e,{key:s,value:i}){t.set(e.files[s],"uploaded",i)},setFileUploading(e,{key:s,value:i}){t.set(e.files[s],"uploading",i)},setFileError(e,{key:s,error:i}){t.set(e.files[s],"error",!0),t.set(e.fileErrors,s,i)},addNewAsset(e,{key:s,asset:o}){const r={_id:void 0,uploaded:!1,uploading:!1,error:!1,model:i.deepClone(o)};t.set(e.assets,s,r)},deleteAsset(e,{key:s}){t.delete(e.assets,s)},setAssetId(e,{key:t,_id:s}){e.assets[t]._id=s},setAssetUploaded(e,{key:s,value:i}){t.set(e.assets[s],"uploaded",i)},setAssetUploading(e,{key:s,value:i}){t.set(e.assets[s],"uploading",i)},setAssetError(e,{key:s,error:i}){t.set(e.assets[s],"error",!0),t.set(e.assetErrors,s,i)},setFormSchema(e,t){e.form.schema=t},setMethod(e,{appId:t,schema:s,model:i,options:o}={}){e.appId=t,e.form.schema=s||{},e.form.model=i||e.form.model?{...i,...e.form.model}:void 0,e.form.options=o||{}},initState(e,t){e.appId=t,e.name=this.$getValue("methodName")||"",e.description=this.$getValue("methodDescription")||"",e.files=this.$getValue("methodFiles")||{},e.assets=this.$getValue("methodAssets")||{},e.form.schema=this.$getValue("methodFormSchema"),e.form.model=this.$getValue("methodFormModel"),e.form.options=this.$getValue("methodFormOptions")||{}},resetModule(e){e.appId="",e.name="",e.description="",e.files={},e.fileErrors={},e.assets={},e.assetErrors={},e.form.schema=void 0,e.form.model=void 0,e.form.options=void 0}},actions:{[r.method.actions.fetchMethod]({state:e,commit:t,getters:s,rootGetters:i},n){const d=i[r.index.getters.getApp](n);if(!d)return Promise.reject(new Error(`App not found: ${n}`));const a=d.businessMethod,l=d.serviceId,h=(d.platforms||[]).find(e=>e.id===this.$getValue("x3dPlatformId"));let c;return(c=h?h.id:d.platformId||(d.platforms||[]).find(e=>!!e.id))||(c=o.getGlobalPlatformId()),a&&l?o.fetchAppMethod({serviceName:l,platformId:c,path:a}).then(i=>{t("setMethod",i);const o=s[r.method.getters.getFormSchema];this.$setValue("methodFormSchema",o?{...o}:null);const n=s[r.method.getters.getFormModel];this.$setValue("methodFormModel",n?{...n}:null);const d=e.form.options;this.$setValue("methodFormOptions",d?{...d}:null)}):Promise.reject(new Error(`App ${n} has no businessMethod path: "${a}" or no serviceName: "${l}".`))},[r.method.actions.onNameChange]({state:e}){return this.$setValue("methodName",e.name),Promise.resolve()},[r.method.actions.onDescriptionChange]({state:e}){return this.$setValue("methodDescription",e.description),Promise.resolve()},[r.method.actions.onFormModelChange]({state:e}){return this.$setValue("methodFormModel",e.form.model),Promise.resolve()},[r.method.actions.uploadPrivateFile]({state:e,commit:t},{key:s,file:i}){if(!i||!s)return Promise.reject("Missing mandatory parameters.");const r=(e.files[s]||{})._id;return t("addNewFile",{key:s,file:i}),t("setFileUploading",{key:s,value:!0}),o.uploadPrivateFile(this.$getWidget(),{fileData:i,fileId:r,key:s}).then(e=>{t("setFileId",{key:s,_id:e.id}),t("setFileUploaded",{key:s,value:!0})}).catch(e=>{console.error("### Upload file error:",e),t("setFileError",{key:s,error:{error:e}})}).finally(()=>{t("setFileUploading",{key:s,value:!1}),this.$setValue("methodFiles",e.files)})},[r.method.actions.deletePrivateFile]({state:e,commit:t},s){const i=e.files[s]._id;return t("deleteFile",s),o.deletePrivateFile(this.$getWidget(),{key:s,fileId:i}).catch(e=>{console.error("### Delete file error:",e)}).finally(()=>{this.$setValue("methodFiles",e.files)})},[r.method.actions.attachAsset]({state:e,commit:t},{key:s,asset:i,serviceName:r,servicePath:n}){return i&&s?(t("addNewAsset",{key:s,asset:i}),t("setAssetUploading",{key:s,value:!0}),o.attachAsset(this.$getWidget(),{key:s,assetJson:i,serviceName:r,servicePath:n}).then(e=>{t("setAssetId",{key:s,_id:e.id}),t("setAssetUploaded",{key:s,value:!0})}).catch(e=>{console.error("### Attach asset error:",e),t("setAssetError",{key:s,error:{error:e}})}).finally(()=>{t("setAssetUploading",{key:s,value:!1}),this.$setValue("methodAssets",e.assets)})):Promise.reject("Missing mandatory parameters.")},[r.method.actions.deleteAsset]({state:e,commit:t},{key:s}){const i=e.assets[s]._id;return t("deleteAsset",{key:s}),o.deleteAsset(this.$getWidget(),{key:s,assetId:i}).catch(e=>{console.error("### Delete asset error:",e)}).finally(()=>{this.$setValue("methodAssets",e.assets)})},resetModule({commit:e}){return e("resetModule"),this.$deleteValue("methodName"),this.$deleteValue("methodDescription"),this.$deleteValue("methodFiles"),this.$deleteValue("methodAssets"),this.$deleteValue("methodFormSchema"),this.$deleteValue("methodFormModel"),this.$deleteValue("methodFormOptions"),Promise.resolve()},initModule:({commit:e},t)=>(e("initState",t),Promise.resolve())}}}),define("DS/BusinessMethodWdg/Components/MethodForm",["DS/BusinessMethodWdg/Store/Types","DS/BusinessMethodWdg/Components/AppTile","DS/BusinessMethodWdg/Components/Vjsf/Vjsf3DSearchInput","DS/BusinessMethodWdg/Components/Vjsf/VjsfFileInput","DS/BusinessMethodWdg/Components/Vjsf/VjsfRolesInput","text!DS/BusinessMethodWdg/assets/Template/Components/MethodForm.vue"],function(e,t,s,i,o,r){"use strict";return{name:"MethodForm",template:r,components:{AppTile:t,Vjsf3DSearchInput:s,VjsfFileInput:i,VjsfRolesInput:o},props:{appId:{type:String,default:()=>""}},emits:{confirm:null,cancel:null},data:()=>({isFormValid:!1,isMethodFetched:!1,isMethodFetching:!1,isMethodFailedToFetch:!1,overlayStyles:{},timeoutOverlayStyles:void 0}),computed:{NS:()=>"method",name:{get(){return this.$store.getters[`${this.NS}/${e.method.getters.getName}`]},set(t){this.$store.commit(`${this.NS}/${e.method.mutations.setName}`,t),this.$store.dispatch(`${this.NS}/${e.method.actions.onNameChange}`)}},description:{get(){return this.$store.getters[`${this.NS}/${e.method.getters.getDescription}`]},set(t){this.$store.commit(`${this.NS}/${e.method.mutations.setDescription}`,t),this.$store.dispatch(`${this.NS}/${e.method.actions.onDescriptionChange}`)}},formSchema(){return this.$store.getters[`${this.NS}/${e.method.getters.getFormSchema}`]},formModel:{get(){return this.$store.getters[`${this.NS}/${e.method.getters.getFormModel}`]},set(t){this.$store.commit(`${this.NS}/${e.method.mutations.setFormModel}`,t),this.$store.dispatch(`${this.NS}/${e.method.actions.onFormModelChange}`)}},formOptions(){return this.$store.getters[`${this.NS}/${e.method.getters.getFormOptions}`]},files(){return this.$store.getters[`${this.NS}/${e.method.getters.getFiles}`]},fileErrors(){return this.$store.getters[`${this.NS}/${e.method.getters.getFileErrors}`]},assets(){return this.$store.getters[`${this.NS}/${e.method.getters.getAssets}`]},assetErrors(){return this.$store.getters[`${this.NS}/${e.method.getters.getAssetErrors}`]},isStoreInitied(){return this.$store.getters[e.index.getters.isInited]},app(){return this.$store.getters[e.index.getters.getApp](this.appId)},isMethodConfirmed(){return this.$store.getters[e.index.getters.isMethodConfirmed]}},watch:{isStoreInitied(e){e&&this.onStoreInited()},isMethodConfirmed(){this.setOverlayStyles()}},mounted(){this.isStoreInitied&&this.onStoreInited()},methods:{onStoreInited(){this.formSchema?(this.isMethodFailedToFetch=!1,this.isMethodFetching=!1,this.isMethodFetched=!0):this._fetchMethod(),this._updateWidgetTitle()},onNameChange(){},onDescriptionChange(){},onConfirmBtnClick(){this.$emit("confirm")},onCancelBtnClick(){const e=this.$t("confirmCancelMethodFormTitle"),t=this.$t("confirmCancelMethodFormBody");return this.$confirm(t,e,{okLabel:this.$t("confirmBtn"),cancelLabel:this.$t("cancelBtn")}).then(e=>{e&&this.$emit("cancel")})},onVjsf3DSearchInputChange(t){this.$store.dispatch(`${this.NS}/${e.method.actions.attachAsset}`,t).then(()=>{this.validateForm()})},onVjsf3DSearchInputRemove(t){this.$store.dispatch(`${this.NS}/${e.method.actions.deleteAsset}`,t)},onVjsfFileInputChange(t){this.$store.dispatch(`${this.NS}/${e.method.actions.uploadPrivateFile}`,t).then(()=>{this.validateForm()})},onVjsfFileInputRemove(t){this.$store.dispatch(`${this.NS}/${e.method.actions.deletePrivateFile}`,t)},goBackToEditMethod(){const t=this.$t("confirmGoBackToEditMethodFormTitle"),s=this.$t("confirmGoBackToEditMethodFormBody");return this.$confirm(s,t,{okLabel:this.$t("confirmBtn"),cancelLabel:this.$t("cancelBtn")}).then(t=>{t&&this.$store.dispatch(e.index.actions.goBackToEditMethod)})},setOverlayStyles(){this.isMethodConfirmed?(clearTimeout(this.timeoutOverlayStyles),this.timeoutOverlayStyles=setTimeout(()=>{this.overlayStyles={height:`${this.$refs.scrollableContent.scrollHeight}px`}},100)):this.overlayStyles={}},validateForm(){this.$refs.form.validate()},_fetchMethod(){return this.isMethodFetched=!1,this.isMethodFailedToFetch=!1,this.isMethodFetching=!0,this.$store.dispatch(`${this.NS}/${e.method.actions.fetchMethod}`,this.appId).then(()=>{this.isMethodFetched=!0}).catch(e=>{this.isMethodFailedToFetch=!0,console.error(e)}).finally(()=>{this.isMethodFetching=!1})},_updateWidgetTitle(){this.$store.dispatch(e.index.actions.setWidgetTitle,{appName:this.app.title})}}}}),define("DS/BusinessMethodWdg/Store/Index",["vuejs","vuex","UWA/Utils","DS/BusinessMethodWdg/Utils","DS/BusinessMethodWdg/API","DS/BusinessMethodWdg/Store/Types","DS/BusinessMethodWdg/Store/Modules/Method.store"],function(e,t,s,i,o,r,n){"use strict";const d=[{title:"3DPlay",brand:"3DEXPERIENCE",id:"X3DPLAW_AP",tenantAware:!0,serviceId:"3DDashboard",isFake:!0},{title:"3DSwym",brand:"3DEXPERIENCE",id:"X3DMCTY_AP",tenantAware:!0,businessMethod:"/webapps/BusinessMethodWdg/assets/FakeMethods/SwymIM_BM.json",serviceId:"3DDashboard",isFake:!0},{title:"Collaborative Task",brand:"ENOVIA",id:"ENOTASK_AP",tenantAware:!0,businessMethod:"/webapps/BusinessMethodWdg/assets/FakeMethods/CollaborativeTaskIM_BM.json",serviceId:"3DDashboard",isFake:!0},{title:"Issue Management",brand:"ENOVIA",id:"ENXISSU_AP",tenantAware:!0,businessMethod:"/webapps/BusinessMethodWdg/assets/FakeMethods/IssueManagementM_BM.json",serviceId:"3DDashboard",isFake:!0},{title:"Metrics Reader",brand:"NETVIBES",id:"NETMISO_AP",tenantAware:!1,businessMethod:"/webapps/BusinessMethodWdg/assets/FakeMethods/MetricsReaderM_BM.json",serviceId:"3DDashboard",isFake:!0},{title:"Web Notes",brand:"3DEXPERIENCE",id:"X3DNOTE_AP",tenantAware:!1,businessMethod:"/webapps/BusinessMethodWdg/assets/FakeMethods/WebNotesIM_BM.json",serviceId:"3DDashboard",isFake:!0},{title:"Project Planning",brand:"3DEXPERIENCE",id:"ENXPLAN_AP",tenantAware:!0,businessMethod:"/webapps/BusinessMethodWdg/assets/FakeMethods/ProjectPlanningIM_BM.json",serviceId:"3DDashboard",isFake:!0}],a=function(){return e.prototype.$getWidget()},l=function(e){let t=a().getValue(e);return"object"!=typeof t||Array.isArray(t)||(t=i.deepClone(t)),t},h=function(e,t){const s=a();let i=Promise.resolve();return s.setValue(e,t),i},c=function(e){const t=a();let s=Promise.resolve();return t.deleteValue(e),s};var p={[r.index.getters.isInited]:e=>e.isInitied,[r.index.getters.isServicesInitied]:e=>!!e.services,[r.index.getters.get3DCompassServiceUrl]:e=>e.services?e.services["3DCompass"]:"",[r.index.getters.getApps]:e=>Object.values(e.appsMap),[r.index.getters.getAppsMap]:e=>e.appsMap,[r.index.getters.getSelectedAppId]:e=>e.selectedAppId,[r.index.getters.getSelectedApp]:(e,t)=>t[r.index.getters.getApp](e.selectedAppId),[r.index.getters.getApp]:e=>t=>{let s;if(t)return!(s=e.appsMap[t])&&e.selectedAppId&&(s=l("selectedApp")),s},[r.index.getters.isMethodConfirmed]:e=>e.isMethodConfirmed},u={[r.index.mutations.setSelectedAppId](e,t=""){e.selectedAppId=t},setIsInited(e,t){e.isInitied=t},initState(e){e.selectedAppId=l("selectedAppId"),e.isMethodConfirmed=!!l("isMethodConfirmed")},setApps(e,t){e.appsMap=Object.fromEntries(t.map(e=>[e.id,e]))},setIsMethodConfirmed(e,t){e.isMethodConfirmed=t},setService(t,{name:s,url:i}){t.services||(t.services={}),e.set(t.services,s,i)},setServicesInitied(e,t){e.isServicesInitied=t},TEMP_setUseFakeApps(e,t){e.TEMP_useFakeApps=t}},m={[r.index.actions.fetchApps]:({state:e,commit:t})=>e.TEMP_useFakeApps?(t("setApps",d),Promise.resolve()):o.fetchApps().then(e=>{t("setApps",e||[])}),[r.index.actions.initStore]({state:e,getters:t,commit:i,dispatch:n}){i("initState");var d="useFakeBMApps"in s.parseQuery(top.window.location.search||"");i("TEMP_setUseFakeApps",d);const c=l("x3dPlatformId"),p=o.getContextProperty("platformId");c!==p&&h("x3dPlatformId",p);let u=n("fetchServices");return e.selectedAppId&&(u=u.then(()=>n("method/initModule",e.selectedAppId))),a().addEvents({endEdit:({submitted:e=!1}={})=>{if(e){const e=t[r.index.getters.getSelectedApp]||{};n(r.index.actions.setWidgetTitle,{appName:e.title})}}}),n(r.index.actions.setWidgetTitle),u.then(()=>{i("setIsInited",!0)}).catch(e=>{throw console.error(e),new Error("Fail to init store.")})},[r.index.actions.onSetSelectedAppId]({state:e,getters:t,dispatch:s}){const i=e.selectedAppId;if(h("selectedAppId",i),i){const e=t[r.index.getters.getApp](i);s("method/fetchForm",i),h("selectedApp",{...e})}else c("selectedAppId"),c("selectedApp"),c("isMethodConfirmed"),s("setTarget");return Promise.resolve()},[r.index.actions.goBackToEditMethod]:({commit:e,dispatch:t})=>(e("setIsMethodConfirmed",!1),c("isMethodConfirmed"),t("setTarget"),Promise.resolve()),[r.index.actions.onConfirmMethod]:({commit:e,dispatch:t})=>(e("setIsMethodConfirmed",!0),h("isMethodConfirmed",!0),t("setTarget"),Promise.resolve()),[r.index.actions.onCancelMethod]:({dispatch:e})=>e("method/resetModule"),[r.index.actions.setWidgetTitle](e,{appName:t,title:s}={}){const i=l("title")||"",o=s||i;let r="";t&&o?r=`${t} - ${o}`:!t&&o?r=o:t&&!o&&(r=t),a().setTitle(r),"string"==typeof s&&s!==i&&h("title",s)},setTarget({state:e,getters:t}){if(e.isMethodConfirmed){const s=t[r.index.getters.getApp](e.selectedAppId),i={appId:e.selectedAppId,title:s.title,name:s.title,tenantAware:s.tenantAware,x3dPlatformId:this.$getValue("x3dPlatformId"),method:t["method/export"]};h("target",i)}else c("target")},fetchServices:({commit:e})=>o.getServiceUrl({platformId:o.getPlatformId(a()),serviceName:"3DCompass"}).then(t=>{e("setService",{name:"3DCompass",url:t}),e("setServicesInitied",!0)})};e.use(t);const g={method:n},f=new t.Store({state:{isInitied:!1,appsMap:{},selectedAppId:"",isMethodConfirmed:!1,services:void 0,isServicesInitied:!1,TEMP_useFakeApps:!1},getters:p,actions:m,mutations:u,modules:g});return f.$getWidget=a,f.$setValue=h,f.$getValue=l,f.$deleteValue=c,f});const isDebugEnabled="debug_me"in window.UWA.Utils.parseQuery(window.location.search||"");window.VU_KIT_VERSION=window.VU_KIT_VERSION||"1.0.17",require.config({paths:{vuejs:`${window.dsDefaultWebappsBaseUrl}vuejs/2.6.10/vue.min`,vuex:`${window.dsDefaultWebappsBaseUrl}vuex/3.1.1/vuex.min`,"vu-kit":`${window.dsDefaultWebappsBaseUrl}BusinessMethodWdg/assets/vendors/vu-kit/${window.VU_KIT_VERSION}/vu-kit.umd${isDebugEnabled?"":".min"}`,vuetify:`${window.dsDefaultWebappsBaseUrl}BusinessMethodWdg/assets/vendors/vuetify/vuetify.min`,vjsf:`${window.dsDefaultWebappsBaseUrl}BusinessMethodWdg/assets/vendors/vjsf/main`,"vuekit-preset":`${window.dsDefaultWebappsBaseUrl}BusinessMethodWdg/assets/vendors/vuekit-preset/vuekit-preset.umd.min`,"regenerator-runtime":`${window.dsDefaultWebappsBaseUrl}BusinessMethodWdg/assets/vendors/regenerator-runtime/runtime`,ajv:`${window.dsDefaultWebappsBaseUrl}BusinessMethodWdg/assets/vendors/ajv/ajv7.min`}}),define("DS/BusinessMethodWdg/BusinessMethod",["vuejs","regenerator-runtime","DS/BusinessMethodWdg/WidgetStarter","DS/BusinessMethodWdg/Store/Index","DS/BusinessMethodWdg/Store/Types","DS/BusinessMethodWdg/Plugins/Vukit","DS/BusinessMethodWdg/Plugins/Vuetify","DS/BusinessMethodWdg/Plugins/Vjsf","DS/BusinessMethodWdg/Components/AppTile","DS/BusinessMethodWdg/Components/MethodForm","text!DS/BusinessMethodWdg/assets/Template/BusinessMethod.vue","i18n!DS/BusinessMethodWdg/assets/nls/BusinessMethod","css!DS/BusinessMethodWdg/BusinessMethodWdg.css"],function(e,t,s,i,o,r,n,d,a,l,h,c){"use strict";var p=top.require("DS/Dashboard/Utils");return s("business-method",{store:i,plugins:{vuetify:n},i18n:!0,nls:c,name:"BusinessMethod",template:h,components:{AppTile:a,MethodForm:l},data:()=>({isAppsFetching:!1,isAppsFetched:!1,isAppsFailedToFetch:!1,promiseAppsFetch:void 0}),computed:{apps(){return this.$store.getters[o.index.getters.getApps].sort((e,t)=>p.localeCompare(e.title,t.title))},appsMap(){return this.$store.getters[o.index.getters.getAppsMap]},hasApps(){return this.apps.length},selectedAppId:{get(){return this.$store.getters[o.index.getters.getSelectedAppId]},set(e){this.$store.commit(o.index.mutations.setSelectedAppId,e),this.$store.dispatch(o.index.actions.onSetSelectedAppId)}},isMethodConfirmed(){return this.$store.getters[o.index.getters.isMethodConfirmed]},isStoreInited(){return this.$store.getters[o.index.getters.isInited]}},mounted(){this.$store.dispatch(o.index.actions.initStore).then(()=>{this.onStoreInited()})},methods:{isSelectedApp(e){return!!this.selectedAppId&&e.id===this.selectedAppId},fetchApps(){return this.isAppsFetched?this.apps:this.isAppsFetching?this.promiseAppsFetch:(this.isAppsFetching=!0,this.isAppsFetched=!1,this.isAppsFailedToFetch=!1,void(this.promiseAppsFetch=this.$store.dispatch(o.index.actions.fetchApps).then(()=>(this.isAppsFetched=!0,this.apps)).catch(e=>{this.isAppsFailedToFetch=!0,console.error(e)}).finally(()=>{this.isAppsFetching=!1})))},onStoreInited(){this.selectedAppId?console.log("### Selected app id:",this.selectedAppId):this.fetchApps()},onSelectApp(e){this.selectedAppId=e;const t=this.appsMap[e].title;this._updateWidgetTitle({appName:t})},onCancelMethod(){this.$store.dispatch(o.index.actions.onCancelMethod),this.selectedAppId="",this._updateWidgetTitle(),this.fetchApps()},onConfirmMethod(){this.$store.dispatch(o.index.actions.onConfirmMethod)},_updateWidgetTitle({appName:e}={}){this.$store.dispatch(o.index.actions.setWidgetTitle,{appName:e})}}})});