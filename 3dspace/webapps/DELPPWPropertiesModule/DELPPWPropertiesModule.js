define("DS/DELPPWPropertiesModule/PropertiesModule",["UWA/Core","DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/models/EditPropModel","DS/EditPropWidget/constants/EditPropConstants"],function(e,t,n,o){"use strict";return{behaviors:["UXFactoryBehavior","SelectionBehavior","ModelBehavior","ResourceBehavior","DocumentBehavior"],creator:function(i,c,a,r,s,l){var u,d,p,m,D,g,f,S,h,y,P,C=[];return g=function(){var n,a,g=i.getElement(),f=c.getComponent("WUXDockAreaEnum"),S=c.getComponent("WUXFrameWindowsManager").getFrameWindow(i.getAppContext());e.is(S)&&(n=S.getImmersiveFrame(),e.is(n)&&((u=c.create("Panel",{position:{at:"top right"},side:f.RightDockArea,currentDockArea:f.RightDockArea,title:s.getNLSValue("Cmd.DisplayProperties.Title"),minWidth:450,height:300,content:g,resizableFlag:!0,visibleFlag:!1,collapsibleFlag:!0,floatableFlag:!0,verticallyStretchableFlag:!0})).close=function(){i.notify("toggleCmdCheckHeaderState",{cmdName:"DisplayProperties",cmdState:!1})},u.immersiveFrame=n,a=n.getDockingElement(u.currentDockArea),e.is(a)&&(a.collapseDockingZoneFlag=!1),d=new t({className:"DisplayPropertiesPanel",typeOfDisplay:o.ALL,selectionType:o.NO_SELECTION,displayType:o.STANDARD,readOnly:!1,extraNotif:!0,editMode:!1}),p=(p=r.get3DSpaceUrl()).endsWith("/")?p.substring(0,p.length-1):p,m=r.getTenant(),(D={}).selectedId=r.getReferenceId(C[0]),D.platformUrl=p,D.platformTenant=m,D.getSecurityContext=function(){return r.getSecurityContext()},D.getSelectedRefId=function(){return P()},D.addDocument=function(e,t){l.addDocument(t,{silent:!0}),l.addDocumentConnection(e,t.id,t.relName,{silent:!0}),i.notify("addDocumentConnections",[[e]]),i.notify("attachDocument",{})},D.deleteDocument=function(t,n,o){if(!e.is(o)){const e=l.getConnectedDocumentPIDs(t);Array.isArray(e)&&e.length>0&&(o=e.includes(`SpecificationDocument|${t}|${n}`)?"SpecificationDocument":"PLMDocConnection")}l.removeDocumentConnection(t,n,o),i.notify("attachDocument",{})},"PRODUCT"!==r.getPPRType(D.selectedId)&&d.addFacets([{require:"DS/DELPPWEnoDocuments/SpecificationsFacet",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"SpecificationDocuments",icon:"docs",text:s.getNLSValue("SpecificationsFacet.Specifications")},options:{appContext:D}},{require:"DS/DELPPWEnoDocuments/AttachmentsFacet",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"RelatedDocuments",icon:"attach",text:s.getNLSValue("AttachmentsFacet.Attachments")},options:{appContext:D}}]),d.inject(g)))},f=function(){return a.getSelections().reduce(function(e,t){return e.concat(t)},[])},P=function(){var e=f()[0];return r.getReferenceId(e)},S=function(){return f().map(function(e){return new n({tenant:r.getTenant(),service:"3DSpace",objectId:e})})},h=function(){var t;e.is(d)&&(t=S(),d.initDatas(t))},y=function(e){h()},{listenTo:function(){return{select:y}},onStart:function(t){g(),h(),e.is(u)&&u.show()},onStop:function(){C=[],e.is(u)&&(u.hide(),e.is(d)&&(d.destroyComponent(),d=null),u.destroy(),u=null)}}}}});