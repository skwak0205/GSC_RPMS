define("DS/RTUserPresenceAPI/RTUPavatar",["UWA/Class/View","DS/UIKIT/Tooltip"],function(e){"use strict";return e.extend({tagName:"div",className:"RTUPavatar",render:function(){return this.container.setContent([{tag:"img",class:"img-responsive img-rounded",src:this.model.get("avatarUrl"),alt:this.model.get("username")}]),this},inject:function(e){return this.container.inject(e),this},destroy:function(){return this.stopListening(),this._parent()},setup:function(){this.listenTo(this.model,"onChange:avatarUrl",this.render)}})}),define("DS/RTUserPresenceAPI/RTUPuser",["UWA/Class/Model"],function(e){"use strict";return e.extend({defaults:{login:"noLogin",presence:"Offline",username:"username",noAvatar:!1,avatarUrl:"./resources/en/1/webapps/InstantMessaging/assets/avatarDefault.png"}})}),define("DS/RTUserPresenceAPI/RTUPbadge",["UWA/Class/View","DS/UIKIT/Tooltip"],function(e,t){"use strict";const n={offline:"#d1d4d4",online:"#57B847",busy:"#EA4F37",away:"#E87B00"};return e.extend({tagName:"div",className:"RTUPbadge",render:function(e){var t,s=(this.model.get("presence")||"Unknown").toLowerCase(),r=n[s]||n.offline;switch(s){case"away":t="fonticon-cancel";break;case"offline":t="";break;case"busy":t="fonticon-minus";break;case"online":t="fonticon-check";break;default:t="fonticon-3ds-why"}return this.container.setContent([{tag:"span",class:"fonticon "+t,styles:{background:r}}]),this.container.getElement(".fonticon").addClassName=function(){},"fonticon-3ds-why"==t?this.hide():this.show(),this},setup:function(){this.listenTo(this.model,"onChange:presence",this.render)},inject:function(e){return this.container.inject(e),this},destroy:function(){return this.stopListening(),this._parent()}})}),define("DS/RTUserPresenceAPI/RTUserPresenceAPI",["UWA/Class/View","UWA/Class/Events","UWA/Class/Listener","DS/RTUserPresenceAPI/RTUPbadge","DS/RTUserPresenceAPI/RTUPavatar","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/RTAPIManager/RTAPIManager","DS/RTAPIManager/RTAPIuserModel","css!../RTUserPresenceAPI/RTUserPresenceAPI.css"],function(e,t,n,s,r,a,i,o){"use strict";return e.extend({tagName:"div",className:"RTUPAPI",setup:function(e){if(!e.login)return console.error("RTUserPresenceAPI needs login");if(!e.tenantId)return console.error("RTUserPresenceAPI needs tenantId");e.tenant=e.tenantId;var t,n=i.setUser(e);return this.user=n,this.tenant=e.tenantId,this.noAvatar=e.noAvatar,e.devEnv||e.noAvatar||n.get("hasAvatar")||!e.tenantId?e.devEnv&&n.set({avatarUrl:"./assets/avatarDefault.png"}):a.getServiceUrl({serviceName:"3DSwym",platformId:e.tenantId,onComplete:(t=this,function(n){t.user.set({avatarUrl:n+"/api/user/getpicture/login/"+e.login}),t.user.set({hasAvatar:!0})}),onFailure:function(e){console.error("RTUserPresenceAPI failed to retrieved 3DSwym url via i3DXCompassPlatformServices.getServiceUrl")}}),this.noAvatar||(this.avatar=new r({model:n,id:"AvatarView-"+n.cid})),this.badge=new s({model:n,id:"BadgeView-"+n.cid}),e.size&&(this.container.style.width=e.size,this.container.style.height=e.size,"80px"==e.size&&this.container.addClassName("big")),e.onclick&&(this.container.onclick=e.onclick,this.container.addClassName("clickable")),e.renderTo?this.render().inject(e.renderTo):this.render(),this},platformListener:function(e){return i._platformListener(e)},render:function(){return this.container.setContent([]),!this.noAvatar&&this.avatar&&this.avatar.render().inject(this.container),this.badge.render({noAvatar:this.noAvatar}).inject(this.container),this},inject:function(e){return this.container.inject(e)},destroy:function(){return this.stopListening(),this.avatar&&this.avatar.destroy(),this.badge&&this.badge.destroy(),this._parent()}})});