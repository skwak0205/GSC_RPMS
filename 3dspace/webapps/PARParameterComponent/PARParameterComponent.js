define("DS/PARParameterComponent/PARAlert",["DS/UIKIT/Alert"],function(e){"use strict";return{alert:null,message:function(t,i){this.alert||(this.alert=new e({closable:!0,visible:!0,autoHide:!0,hideDelay:6e3,maximumVisibleMessages:1,className:"wp-alert"}).inject(document.body,"top"),this.alert.add({className:i,message:UWA.is(t,"string")?t.escapeHTML():t})),this.alert.add({className:i,message:UWA.is(t,"string")?t.escapeHTML():t})},error:function(e){this.message(e,"error")},success:function(e){this.message(e,"success")},warn:function(e){this.message(e,"warning")},info:function(e){this.message(e,"primary")}}}),define("DS/PARParameterComponent/PARModel",["UWA/Core","UWA/Class/Model","UWA/Class/Options","UWA/Class/Collection","DS/WAFData/WAFData"],function(e,t,i,n,o){"use strict";return t.extend(i,{init:function(e){this.setOptions(e),this._parent()},initVars:function(){var t=this;"OnPremise"===this.options.tenant||void 0===this.options.tenant||""===this.options.tenant?(this.set("3DSpaceUrl",this.options.url),""===this.get("3DSpaceUrl")||void 0===this.get("3DSpaceUrl")?require(["DS/i3DXCompassServices/i3DXCompassServices"],function(e){e.getServiceUrl({serviceName:"3DSpace",onComplete:function(e){t.set("3DSpaceUrl",e.url),t.finalizeInit()}.bind(this)})}):this.finalizeInit()):require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(i){i.getPlatformServices({onComplete:function(i){var n=i;if(e.is(n)){for(var o=0,a=0,l=n.length,s=!0;o<l&&s;o++)n[o].platformId===t.options.tenant&&(a=o,s=!1);t.set("3DSpaceUrl",n[a]["3DSpace"]),t.finalizeInit()}}.bind(this)})})},setup:function(){this.initVars()},finalizeInit:function(){var t=this;o.authenticatedRequest(this.get("3DSpaceUrl")+"/resources/pno/person/getsecuritycontext",{method:"GET",type:"json",onComplete:function(e){t.set("SecurityContext",e.SecurityContext)},onFailure:function(){t.set("SecurityContext","VPLMProjectLeader.MyCompany.3DS Collab Space")}});var i={"Content-Type":"application/json",SecurityContext:t.get("SecurityContext")};void 0!==this.get("parentid")&&""!==this.get("parentid")||this.set("parentid",this.options.parentid),void 0!==this.get("changeid")&&""!==this.get("changeid")||this.set("changeid",this.options.changeid),void 0!==this.get("objectid")&&""!==this.get("objectid")||this.set("objectid",this.options.objectid),void 0!==this.get("objectid")&&""!==this.get("objectid")?o.authenticatedRequest(this.get("3DSpaceUrl")+"/resources/parameter/authoring/"+this.get("objectid"),{method:"GET",type:"json",headers:{"Content-Type":"application/json"},onComplete:function(i){var n=!0,o=e.clone(t.get("preferreddimensions"));t.get("preferreddimensions").forEach(function(e){i.dimension===e.value&&(n=!1)}),n&&o.push({value:i.dimension,nls:i.dimensionnls}),t.set("preferreddimensions",o),t.set("valuationtype",i.valuationtype),t.set("title",i.title),t.set("dimension",i.dimension),t.set("parentid",i.attributes.parentid),t.set("changeid",i.attributes.changeid),t.set("unit",i.attributes.unit),t.set("autoname",i.attributes.name),t.set("name",i.attributes.name),t.set("description",i.attributes.description),t.set("owner",i.attributes.owner),t.set("revision",i.attributes.revision),t.set("value",i.values.value),t.set("minvalue",i.values.minvalue),t.set("mininclus",i.values.mininclus),t.set("maxvalue",i.values.maxvalue),t.set("maxinclus",i.values.maxinclus),t.set("values",i.values.valuesvalue),t.set("mintolerance",i.values.mintolerance),t.set("maxtolerance",i.values.maxtolerance),t.set("minprecision",i.values.minprecision),t.set("maxprecision",i.values.maxprecision),t.set("function",i.values.function),t.set("objectiftype",i.values.objectiftype),t.set("objectifprobability",i.values.objectifprobability),t.set("objectifprobabilityunit",i.values.objectifprobabilityunit),t.set("objectifconfidence",i.values.objectifconfidence),t.set("objectifconfidencetunit",i.values.objectifconfidencetunit),t.set("forceupdate",i.objectid)},onFailure:function(e){console.log(e)}}):(o.authenticatedRequest(this.get("3DSpaceUrl")+"/resources/parameter/authoring/getdimensions",{method:"GET",type:"json",onComplete:function(e){t.set("alldimensions",e)},onFailure:function(){t.set("alldimensions",[])}}),o.authenticatedRequest(this.get("3DSpaceUrl")+"/resources/parameter/authoring/getpreferreddimensions",{method:"POST",type:"json",data:"ANGLEParameter;BooleanParameter;IntegerParameter;LENGTHParameter;MASSParameter;RealParameter;StringParameter;",headers:i,onComplete:function(e){t.set("preferreddimensions",e),t.set("preferreddimensionsbase",e)}}),o.authenticatedRequest(this.get("3DSpaceUrl")+"/resources/parameter/authoring/getpreferreddimensions",{method:"POST",type:"json",data:widget.getValue("preferreddimensionsMRU"),headers:{"Content-Type":"application/json",SecurityContext:t.get("SecurityContext")},onComplete:function(e){t.set("preferreddimensionsMRU",e)},onFailure:function(){t.set("preferreddimensionsMRU",[])}})),this.set("displaytype",this.options.type)},defaults:{preferreddimensions:[{value:"ANGLEParameter",nls:"Angle"},{value:"BooleanParameter",nls:"Boolean"},{value:"IntegeParameterr",nls:"Integer"},{value:"LENGTHParameter",nls:"Length"},{value:"MASSParameter",nls:"Mass"},{value:"RealParameter",nls:"Real"},{value:"StringParameter",nls:"String"}],preferreddimensionsbase:[{value:"ANGLEParameter",nls:"Angle"},{value:"BooleanParameter",nls:"Boolean"},{value:"IntegeParameterr",nls:"Integer"},{value:"LENGTHParameter",nls:"Length"},{value:"MASSParameter",nls:"Mass"},{value:"RealParameter",nls:"Real"},{value:"StringParameter",nls:"String"}],preferreddimensionsMRU:[],alldimensions:[],unitsselecteddimension:[],valuationtype:"1",title:"",dimension:"ANGLEParameter",selecteddimension:"",parentid:"",changeid:"",unit:"",autoname:!0,name:"",description:"",owner:"",value:"",minvalue:"",mininclus:!0,maxvalue:"",maxinclus:!0,values:[],mintolerance:"",maxtolerance:"",minprecision:"",maxprecision:"",revision:"A.1",role:"",priority:"0",function:"",objectiftype:"",objectifprobability:"",objectifprobabilityunit:"PERCENTAGE",objectifconfidence:"",objectifconfidencetunit:"PERCENTAGE",objectid:"",displaytype:""}})}),define("DS/PARParameterComponent/PARForm",["DS/UIKIT/Modal","DS/WAFData/WAFData","DS/UIKIT/Popover","DS/PARParameterComponent/PARAlert","i18n!DS/PARParameterComponent/assets/nls/PARParameterComponent"],function(e,t,i,n,o){"use strict";return{getForm:function(e){this.model=e;var t=this.PARremovevalue.bind(this),i=this.PARaddvalue.bind(this),n=this.PARchangeselectedvalue.bind(this),a=this.PARchangefunctionobjectif.bind(this),l=this.PARchangeautomatiquename.bind(this),s=this.PARchangedimension.bind(this),r=(this.PARcreateparam.bind(this),this.PARclicksetvalues.bind(this),this.PARchangevaluationtype.bind(this)),u=this.PARclickdetails.bind(u),c=this.PARchangevalue.bind(this),d=this.PARchangetitle.bind(this),m=this.PARchangedescription.bind(this),h=this.PARchangeunit.bind(this),v=this.PARchangeminvalue.bind(this),p=this.PARchangemininclus.bind(this),g=this.PARchangemaxvalue.bind(this),b=this.PARchangemaxinclus.bind(this),f=this.PARchangename.bind(this),y=this.PARchangeowner.bind(this),S=this.PARchangerole.bind(this),x=this.PARchangepriority.bind(this),P=this.PARclickselecteddimension.bind(this),A=this.PARchangeselecteddimension.bind(this),q=this.getFooter.bind(this),j=this.PARremoveerrorvalue.bind(this),M=this.PARremoveerrorminvalue.bind(this),R=this.PARremoveerrormaxvalue.bind(this),w=this.PARchangeaddvalues.bind(this),C=this.PARremoveerroraddvalues.bind(this),U=this.PARchangemintolerancevalue.bind(this),_=this.PARremoveerrormintolerancevalue.bind(this),E=this.PARchangemaxtolerancevalue.bind(this),N=this.PARremoveerrormaxtolerancevalue.bind(this),V=this.PARchangeminprecisionvalue.bind(this),F=this.PARremoveerrorminprecisionvalue.bind(this),k=this.PARchangemaxprecisionvalue.bind(this),W=this.PARremoveerrormaxprecisionvalue.bind(this),T=this.PARchangetypeobjectif.bind(this),D=this.PARchangeprobabilityobjectif.bind(this),I=this.PARchangeprobabilityunitobjectif.bind(this),L=this.PARchangeconfidenceobjectif.bind(this),O=this.PARchangeconfidenceunitobjectif.bind(this),B=this.PARshowdimensionslist.bind(this),G=(this._isValueValid.bind(this),this._isMinValid.bind(this),this._isMaxValid.bind(this),this._checkListOfValues.bind(this),this._isMultipleValueValid.bind(this),this._isMinMaxValid.bind(this),this._isMinIncludedValid.bind(this),this._isMaxIncludedValid.bind(this),this._isMinMaxIncludedValid.bind(this),this._updateMinError.bind(this),this._updateMaxError.bind(this),this._updateValueError.bind(this),this._updateValueMinMaxError.bind(this),e.get("preferreddimensions")),z=e.get("alldimensions"),H=e.get("unitsselecteddimension"),K=e.get("values"),J=(e.get("allowners"),[]),X=[],Q=[],Y=[{tag:"option",value:"Empty",text:""}],Z=[""];this.errorminvalue=null,this.errormaxvalue=null,this.errorvalue=null,this.errorvalues=null,G.forEach(function(e){J.push({tag:"option",value:e.value,text:e.nls})}),z.forEach(function(e){X.push([{tag:"div",class:"toggle",html:[{tag:"input",type:"radio",name:"radioalldimensions",id:e.nls,value:e.value},{tag:"label",class:"control-label",for:e.nls,html:e.nls}]}])}),H.forEach(function(e){Q.push({tag:"option",value:e.value,text:e.nls})}),K.forEach(function(e){Y.push({tag:"option",value:e.value,text:e.value}),Z.push(e.value)});var $=UWA.createElement("div",{id:"divcontent",class:"row"}),ee=UWA.createElement("div",{id:"divparent",class:"row",styles:{height:"600px",width:"100%",padding:"15px"}});ee.inject($),UWA.createElement("div",{id:"divtitle",class:"col-sm-12",html:[{tag:"label",text:o.get("Title")},{tag:"input",type:"text",id:"inputtitle",class:"form-control",value:this.model.get("title"),events:{keyup:function(){d()}}}]}).inject(ee),UWA.createElement("div",{id:"divdescription",class:"col-sm-12",html:[{tag:"label",text:o.get("Description")},{tag:"textarea",id:"inputdescription",class:"form-control",rows:"3",value:this.model.get("description"),events:{keyup:function(){m()}}}]}).inject(ee);var te=UWA.createElement("div",{id:"divalldimensions",html:[{tag:"div",id:"divalldimension",html:X,styles:{maxHeight:"400px",overflow:"auto",float:"left",width:"95%",padding:"15px",margin:"15px"},events:{change:function(e){A(e)}}},{tag:"div",id:"divfooteralldimension",styles:{padding:"15px",margin:"15px"},html:[{tag:"button",type:"button",id:"btnalldimsubmit",class:"btn btn-primary",html:"Submit",events:{click:function(){P()}}},{tag:"button",type:"button",id:"btnalldimcancel",class:"btn btn-default",html:"Cancel",events:{click:function(){document.querySelector("#divalldimensions").hide(),document.querySelector("#divparent").show()}}}],events:{change:function(e){A(e)}}}]});te.inject($),te.hide();UWA.createElement("div",{id:"divbuttonsalldimensions",html:[{tag:"button",type:"button",id:"btnalldimsubmit",class:"btn btn-primary",html:"Submit",events:{click:function(){P()}}},{tag:"button",type:"button",id:"btnalldimcancel",class:"btn btn-default",html:"Cancel",events:{click:function(){document.querySelector("#divparent").show()}}}]});var ie=!0;""!==this.model.get("objectid")&&void 0!==this.model.get("objectid")||(ie=!1),UWA.createElement("div",{id:"divdimensionunit",class:"col-sm-12",html:[{tag:"div",class:"row",html:[{tag:"div",id:"divdimension",class:"col-sm-12",html:[{tag:"label",text:o.get("Dimension")},{tag:"div",class:"input-group",html:[{tag:"select",id:"selectdimensions",class:"form-control",html:J,events:{change:function(){s()}},value:this.model.get("dimension"),disabled:ie},{tag:"span",id:"spandimensions",class:"input-group-btn",html:[{tag:"button",type:"button",id:"btndimensions",class:"btn btn-default",html:"...",events:{click:function(){B()}},disabled:ie}]}]}]}]}]}).inject(ee),UWA.createElement("div",{id:"divvalueunit",class:"col-sm-12",html:[{tag:"div",class:"row",html:[{tag:"div",id:"divvalue",class:"col-sm-6",html:[{tag:"label",text:o.get("Value")},{tag:"input",type:"text",class:"form-control",id:"inputvalue",value:this.model.get("value"),events:{keyup:function(){c()},keydown:function(){j()}}}]},{tag:"div",id:"divunit",class:"col-sm-6",html:[{tag:"label",text:o.get("DisplayUnit")},{tag:"select",id:"selectunit",class:"form-control",html:Q,events:{change:function(){h()}}}]}]}]}).inject(ee),UWA.createElement("div",{id:"divminmaxvalue",class:"col-sm-12",html:[{tag:"div",class:"row",html:[{tag:"div",id:"divminvalue",class:"col-sm-3",html:[{tag:"label",text:o.get("MinValue")},{tag:"input",type:"text",class:"form-control",id:"inputminvalue",value:this.model.get("minvalue"),events:{keyup:function(){v()},keydown:function(){M()}}}]},{tag:"div",class:"col-sm-3",styles:{"padding-top":"30px"},html:[{tag:"input",type:"checkbox",id:"cbinclusminvalue",checked:this.model.get("mininclus"),events:{change:function(){p()}}},{tag:"label",class:"control-label",for:"cbinclusminvalue",html:o.get("Included")}]},{tag:"div",id:"divmaxvalue",class:"col-sm-3",html:[{tag:"label",text:o.get("MaxValue")},{tag:"input",type:"text",class:"form-control",id:"inputmaxvalue",value:this.model.get("maxvalue"),events:{keyup:function(){g()},keydown:function(){R()}}}]},{tag:"div",class:"col-sm-3",styles:{"padding-top":"30px"},html:[{tag:"input",type:"checkbox",id:"cbinclusmaxvalue",checked:this.model.get("maxinclus"),events:{change:function(){b()}}},{tag:"label",class:"control-label",for:"cbinclusmaxvalue",html:o.get("Included")}]}]}]}).inject(ee);var ne=UWA.createElement("div",{id:"divsetvalues",class:"col-sm-12"});UWA.createElement("div",{id:"divvaluationtype",class:"col-sm-12",html:[{tag:"label",text:o.get("ValuationType")},{tag:"select",id:"selectvaluationtype",class:"form-control",html:[{tag:"option",value:"1",text:o.get("SimpleValue")},{tag:"option",value:"2",text:o.get("MultipleValue")}],events:{change:function(){r()}},value:this.model.get("valuationtype")}]}).inject(ne);var oe=oe="1"===this.model.get("valuationtype")?o.get("AuthorizedValues"):o.get("Values");UWA.createElement("div",{id:"divvalues",class:"col-sm-12",html:[{tag:"label",text:oe,id:"labelvalues"},{tag:"select",class:"form-control",multiple:!0,styles:{"margin-bottom":"5px"},id:"selectvalues",html:Y,events:{change:function(){n(Z)}}},{tag:"div",class:"row",styles:{"margin-bottom":"10px"},html:[{tag:"div",id:"divvaluesinput",class:"col-sm-6",html:[{tag:"input",type:"text",class:"form-control",id:"inputvalues",events:{keyup:function(){w()},keydown:function(){C()}}}]},{tag:"div",id:"divvaluesbuttons",class:"col-sm-6",html:[{tag:"button",type:"button",class:"btn btn-default",html:"+",id:"btnaddvalue",events:{click:function(){i(Z)}}},{tag:"button",type:"button",class:"btn btn-default",html:"-",id:"btnremovevalue",events:{click:function(){t(Z)}}}]}]}]}).inject(ne),UWA.createElement("div",{id:"divbtnsetvalues",class:"col-sm-12",html:[{tag:"div",class:"row",styles:{"margin-top":"10px"},html:[{tag:"div",id:"divbuttons",class:"col-sm-6",html:[{tag:"button",type:"button",class:"btn btn-default",html:o.get("MoreValues"),id:"btnmorevalues",styles:{margin:"5px"},events:{click:function(){u(ne)}}}]}]}]}).inject(ee),UWA.createElement("div",{id:"divminmaxtolerance",class:"col-sm-12",html:[{tag:"div",class:"row",html:[{tag:"div",id:"divmintolerance",class:"col-sm-6",html:[{tag:"label",text:o.get("MinTolerance")},{tag:"input",type:"text",class:"form-control",id:"inputmintolerance",events:{keyup:function(){U()},keydown:function(){_()}}}]},{tag:"div",id:"divmaxtolerance",class:"col-sm-6",html:[{tag:"label",text:o.get("MaxTolerance")},{tag:"input",type:"text",class:"form-control",id:"inputmaxtolerance",events:{keyup:function(){E()},keydown:function(){N()}}}]}]}]}).inject(ne),UWA.createElement("div",{id:"divminmaxprecision",class:"col-sm-12",html:[{tag:"div",class:"row",html:[{tag:"div",id:"divminprecision",class:"col-sm-6",html:[{tag:"label",text:o.get("MinPrecision")},{tag:"input",type:"text",class:"form-control",id:"inputminprecision",events:{keyup:function(){V()},keydown:function(){F()}}}]},{tag:"div",id:"divmaxprecision",class:"col-sm-6",html:[{tag:"label",text:o.get("MaxPrecision")},{tag:"input",type:"text",class:"form-control",id:"inputmaxprecision",events:{keyup:function(){k()},keydown:function(){W()}}}]}]}]}).inject(ne),ne.inject(ee),ne.hide();var ae=UWA.createElement("div",{id:"divdetails",class:"col-sm-12"});(""===this.model.get("objectid")||void 0===this.model.get("objectid")?UWA.createElement("div",{id:"divname",class:"col-sm-12",styles:{display:"none"},html:[{tag:"label",text:o.get("Name")},{tag:"div",class:"row",html:[{tag:"div",class:"col-sm-6",html:[{tag:"input",id:"inputname",type:"text",class:"form-control",disabled:!0}],value:this.model.get("name"),events:{keyup:function(){f()}}},{tag:"div",class:"col-sm-6",html:[{tag:"input",type:"checkbox",id:"cbname",styles:{display:"none"},value:"PLMParameter",checked:this.model.get("autoname"),events:{change:function(){l()}}},{tag:"label",styles:{display:"none"},id:"labelname",class:"control-label",for:"cbname",html:"Nom automatique"}]}]}]}):UWA.createElement("div",{id:"divname",class:"col-sm-12",styles:{display:"none"},html:[{tag:"label",text:o.get("Name")},{tag:"div",class:"row",html:[{tag:"div",class:"col-sm-6",html:[{tag:"input",id:"inputname",type:"text",class:"form-control",disabled:!1}],value:this.model.get("name"),events:{keyup:function(){f()}}},{tag:"div",class:"col-sm-6",html:[{tag:"input",type:"checkbox",id:"cbname",value:"PLMParameter",checked:this.model.get("autoname"),events:{change:function(){l()}},hidden:!0},{tag:"label",id:"labelname",class:"control-label",for:"cbname",html:"Nom automatique",hidden:!0}]}]}]})).inject(ae);var le=UWA.createElement("div",{id:"divrevisionowner",class:"col-sm-12",html:[{tag:"div",class:"row",html:[{tag:"div",id:"divrevision",class:"col-sm-6",html:[{tag:"label",text:o.get("Revision")},{tag:"div",id:"inputrevision",html:this.model.get("revision")}]},{tag:"div",id:"divowner",class:"col-sm-6",html:[{tag:"label",text:o.get("Owner")},{tag:"input",id:"inputowner",class:"form-control",value:this.model.get("owner"),events:{change:function(){y()}},disabled:!0}]}]}]});le.inject(ae),""!==this.model.get("objectid")&&void 0!==this.model.get("objectid")||le.hide();var se=!0;""!==this.model.get("objectid")&&void 0!==this.model.get("objectid")||(se=!1),UWA.createElement("div",{id:"divrolepriorityfunction",class:"col-sm-12",html:[{tag:"div",class:"row",html:[{tag:"div",styles:{display:"none"},id:"divrole",class:"col-sm-4",html:[{tag:"label",text:o.get("Role")},{tag:"input",type:"text",class:"form-control",id:"inputrole",value:this.model.get("role"),events:{keyup:function(){S()}},disabled:se}]},{tag:"div",id:"divpriority",class:"col-sm-6",html:[{tag:"label",text:o.get("Priority")},{tag:"input",type:"text",class:"form-control",id:"inputpriority",value:this.model.get("priority"),events:{keyup:function(){x()}}}]},{tag:"div",id:"divfunction",class:"col-sm-6",html:[{tag:"label",text:o.get("Function")},{tag:"select",id:"selectfunction",class:"form-control",html:[{tag:"option",value:"",text:""},{tag:"option",value:"Objective",text:o.get("Objective")}],events:{change:function(){a()}},value:this.model.get("function")}]}]}]}).inject(ae);var re=UWA.createElement("div",{id:"divparentobjectif",html:[{tag:"div",div:"divobjectiftype",class:"col-sm-12",html:[{tag:"div",class:"row",html:[{tag:"div",id:"divobjetiftype",class:"col-sm-4",html:[{tag:"label",text:o.get("Type")},{tag:"select",id:"selectobjetiftype",class:"form-control",html:[{tag:"option",value:"Target",text:o.get("Target"),selected:!0},{tag:"option",value:"Minimize",text:o.get("Minimize")},{tag:"option",value:"Maximize",text:o.get("Maximize")}],events:{change:function(){T()}}}]},{tag:"div",id:"divobjetifprobability",class:"col-sm-4",html:[{tag:"label",text:o.get("Probability")},{tag:"div",class:"row",html:[{tag:"div",class:"col-sm-6",html:[{tag:"input",type:"text",class:"form-control",id:"inputobjetifprobability",events:{keyup:function(){D()}}}]},{tag:"div",class:"col-sm-6",html:[{tag:"select",id:"selectobjetifprobabilityunit",class:"form-control",html:[{tag:"option",value:"NONE",text:""},{tag:"option",value:"PERCENTAGE",text:o.get("%"),selected:!0}],events:{change:function(){I()}}}]}]}]},{tag:"div",id:"divobjectifconfidence",class:"col-sm-4",html:[{tag:"label",text:o.get("Confidence")},{tag:"div",class:"row",html:[{tag:"div",class:"col-sm-6",html:[{tag:"input",type:"text",class:"form-control",id:"inputobjectifconfidence",events:{keyup:function(){L()}}}]},{tag:"div",class:"col-sm-6",html:[{tag:"select",id:"selectobjectifconfidenceunit",class:"form-control",html:[{tag:"option",value:"NONE",text:""},{tag:"option",value:"PERCENTAGE",text:o.get("%"),selected:!0}],events:{change:function(){O()}}}]}]}]}]}]}]});return re.inject(ae),re.hide(),UWA.createElement("div",{id:"divbtndetails",class:"col-sm-12",html:[{tag:"div",class:"row",styles:{"margin-top":"10px"},html:[{tag:"div",id:"divbuttons",class:"col-sm-6",html:[{tag:"button",type:"button",class:"btn btn-default",html:o.get("Details"),id:"btndetails",styles:{margin:"5px"},events:{click:function(){u(ae)}}}]}]}]}).inject(ee),ae.inject(ee),ae.hide(),"modal"!==this.model.get("displaytype")&&q().inject(ee),$},getFooter:function(){var e=this.PARcreateparam.bind(this),t=this,i=[];return""===this.model.get("objectid")||void 0===this.model.get("objectid")?i.push({tag:"button",type:"button",class:"btn btn-primary",html:"OK",id:"btncreateparam",styles:{margin:"5px"},events:{click:function(){e()}}}):i.push({tag:"button",type:"button",class:"btn btn-primary",html:"Update",id:"btncreateparam",styles:{margin:"5px"},events:{click:function(){e()}}}),"modal"===this.model.get("displaytype")&&i.push({tag:"button",type:"button",class:"btn btn-default",html:"Cancel",id:"btncancelparam",styles:{margin:"5px"},events:{click:function(){t.model.get("modalparent").hide()}}}),UWA.createElement("div",{id:"divfooterbuttons",class:"col-sm-12",html:[{tag:"div",class:"row",styles:{"margin-top":"10px"},html:[{tag:"div",id:"divbuttons",class:"col-sm-6 col-sm-offset-6",html:i}]}]})},PARremovevalue:function(e){var t=document.querySelector("#inputvalues"),i=document.querySelector("#selectvalues"),n=i.selectedIndex,o=[],a=-1===n?a="":i.options[n].value;t.value===a&&(i.options[n].remove(),e.splice(n,1),selectvalues.selectedIndex=0,inputvalues.value="");for(var l=0;l<i.options.length;l++){var s=i.options[l];o.push({value:s.value,nls:s.text})}this.model.set("values",o,{silent:!0})},PARaddvalue:function(e){if(void 0===this.erroraddvalues||!this.erroraddvalues.isVisible){var t=document.querySelector("#inputvalues"),i=document.querySelector("#selectvalues"),n=document.querySelector("#selectvaluationtype").value,o=t.value,a=i.selectedIndex,l=[],s=this._isMultipleValueValid(o);if(!UWA.is(s))if(/*!isNaN(newvalue) && */"2"===n||"1"===n&&-1===e.indexOf(o)){var r=-1===a?r="":i.options[a].value;if(""===r||"Empty"===r){var u=document.createElement("option");u.text=o,u.value=o,i.add(u),e.push(o)}else i.options[a].value=o,i.options[a].text=o,e[a]=o;selectvalues.selectedIndex=0,inputvalues.value="";for(var c=0;c<i.options.length;c++){var d=i.options[c];l.push({value:d.value,nls:d.text})}this.model.set("values",l,{silent:!0})}else console.log("Value already present in the list")}},PARchangeselectedvalue:function(){var e=document.querySelector("#inputvalues"),t=document.querySelector("#selectvalues");"Empty"!==t.value&&(e.value=t.value)},PARchangefunctionobjectif:function(){"Objective"===document.querySelector("#selectfunction").value?(divparentobjectif.show(),this.PARchangetypeobjectif()):(divparentobjectif.hide(),this.model.set("objectiftype","",{silent:!0})),this.model.set("function",document.querySelector("#selectfunction").value,{silent:!0})},PARchangeautomatiquename:function(){var e=document.querySelector("#cbname"),t=document.querySelector("#inputname");e.checked?t.disabled=!0:(t.disabled=!1,""!==t.value&&void 0!==t.value||(this.errorname=new i({target:document.querySelector("#inputname"),position:"top",body:o.get("Required")}),this.errorname.show())),this.model.set("autoname",e.checked,{silent:!0})},PARchangedimension:function(){var e=document.querySelector("#selectdimensions"),i=e.value,n={dimension:i},o=this,a=document.querySelector("#inputvalue"),l=document.querySelector("#divminmaxvalue"),s=document.querySelector("#divvalues");if(this.model.set("dimension",i,{silent:!0}),"BooleanParameter"===n.dimension||"StringParameter"===n.dimension?o.model.set("unitsselecteddimension",[]):t.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring/getunits",{method:"POST",type:"json",data:JSON.stringify(n),headers:{"Content-Type":"application/json"},onComplete:function(e){o.model.set("unitsselecteddimension",e)},onFailure:function(){o.model.set("unitsselecteddimension",[])}}),null!==e&&-1!==e.selectedIndex)if("BooleanParameter"===i){o.swapInputField("inputvalue",!0);var r=document.querySelector("#inputvalue"),u=document.createElement("option");u.text="TRUE",u.value="TRUE",r.add(u);var c=document.createElement("option");c.text="FALSE",c.value="FALSE",r.add(c),l.hide(),s.hide(),divminmaxtolerance.hide(),divminmaxprecision.hide()}else if("StringParameter"===i)o.swapInputField("inputvalue",!1),l.hide(),s.show(),divminmaxtolerance.hide(),divminmaxprecision.hide();else if("IntegerParameter"===i){o.swapInputField("inputvalue",!1);var d=parseInt(a.value),m=parseInt(document.querySelector("#inputminvalue").value),h=parseInt(document.querySelector("#inputmaxvalue").value);a.value=isNaN(d)?"":d,document.querySelector("#inputminvalue").value=isNaN(m)?"":m,document.querySelector("#inputmaxvalue").value=isNaN(h)?"":h,l.show(),s.show(),divminmaxtolerance.hide(),divminmaxprecision.hide()}else{o.swapInputField("inputvalue",!1);d=parseFloat(a.value),m=parseFloat(document.querySelector("#inputminvalue").value),h=parseFloat(document.querySelector("#inputmaxvalue").value);a.value=isNaN(d)?"":d,document.querySelector("#inputminvalue").value=isNaN(m)?"":m,document.querySelector("#inputmaxvalue").value=isNaN(h)?"":h,l.show(),s.show(),divminmaxtolerance.show(),divminmaxprecision.show()}},swapInputField:function(e,t){var i=document.querySelector("#"+e);if(null!==i){var n=i.type;if(t&&"text"===n){(l=i.getParent()).removeChild(i);var o=UWA.createElement("select",{id:e,type:"text",class:"form-control"});l.appendChild(o)}else if(!t){var a=!1;if(null!==n&&0===n.indexOf("select"))a=!0;else if(null==n){0===i.html().toLowerCase().indexOf("<option")&&(a=!0)}if(a){var l;(l=i.getParent()).removeChild(i);o=UWA.createElement("input",{id:e,type:"text",class:"form-control"});l.appendChild(o)}}}},PARcreateparam:function(){if(UWA.is(this.errorvalue))this.errorvalue.show();else if(UWA.is(this.errorminvalue))this.errorminvalue.show();else if(UWA.is(this.errormaxvalue))this.errormaxvalue.show();else if(void 0!==this.model.get("title")&&""!==this.model.get("title")){var e=this;this.errortitle&&this.errortitle.hide();var a=this.model.get("valuationtype"),l=this.model.get("title"),s=this.model.get("dimension"),r=""!==this.model.get("parentid")&&void 0!==this.model.get("parentid")?r=this.model.get("parentid"):"",u=""!==this.model.get("objectid")&&void 0!==this.model.get("objectid")?u=this.model.get("objectid"):"",c=this.model.get("unit"),d=this.model.get("name"),m=this.model.get("description"),h=this.model.get("owner"),v=this.model.get("values"),p=this.model.get("value"),g=this.model.get("minvalue"),b=this.model.get("maxvalue"),f=this.model.get("autoname"),y=this.model.get("mininclus"),S=this.model.get("maxinclus"),x=this.model.get("mintolerance"),P=this.model.get("maxtolerance"),A=this.model.get("minprecision"),q=this.model.get("maxprecision"),j=this.model.get("function"),M=this.model.get("objectiftype"),R=this.model.get("objectifprobability"),w=this.model.get("objectifprobabilityunit"),C=this.model.get("objectifconfidence"),U=this.model.get("objectifconfidencetunit"),_=""!==this.model.get("changeid")&&void 0!==this.model.get("changeid")?_=this.model.get("changeid"):"",E=this.model.get("priority"),N={"Content-Type":"application/json",SecurityContext:e.model.get("SecurityContext")};""!==_&&(N["DS-Change-Authoring-Context"]="pid:"+_);var V=!0;if("1"===a&&UWA.is(v))if(v.length>1)if(void 0===p||""===p)V=!1,UWA.is(this.errorvalueauthorized)?this.errorvalueauthorized.setBody(o.get("error.ValueNeeded")):this.errorvalueauthorized=new i({target:document.querySelector("#inputvalue"),position:"top",body:o.get("error.ValueNeeded")}),this.errorvalueauthorized.show();else{var F=this._isValueValid();UWA.is(F)?(V=!1,UWA.is(this.errorvalue)?this.errorvalue.setBody(o.get(F)):this.errorvalue=new i({target:document.querySelector("#inputvalue"),position:"top",body:o.get(F)}),this.errorvalue.show()):(this.model.set("value",document.querySelector("#inputvalue").value,{silent:!0}),UWA.is(this.errorvalue)&&(this.errorvalue.destroy(),this.errorvalue=null))}if(!0===V){var k={valuationtype:a,title:l,dimension:s,objectid:u,attributes:{parentid:r,unit:c,autoname:f,name:d,description:m,owner:h},values:{value:p,minvalue:g,mininclus:y,maxvalue:b,maxinclus:S,valuesvalue:v,mintolerance:x,maxtolerance:P,minprecision:A,maxprecision:q},objectif:{function:j,objectiftype:M,objectifprobability:R,objectifprobabilityunit:w,objectifconfidence:C,objectifconfidenceunit:U,priority:E}},W=document.querySelector("#btncreateparam").innerHTML;"OK"===W?t.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring",{method:"POST",type:"json",data:JSON.stringify(k),headers:N,onComplete:function(t){console.log(t),n.success(o.get("ParameterCreationOK")),e.model.set("objectid",t.objectid),e.model.set("physicalid",t.physicalid),e.model.set("relid",t.relid),e.model.set("name",t.attributes.name),e.model.set("owner",t.attributes.owner),e.model.set("revision",t.attributes.revision),"modal"===e.model.get("displaytype")&&e.model.get("modalparent").hide(),e.model.dispatchEvent("PARComponentCreate",e.model)},onFailure:function(t){console.log(t),void 0!==t.objectid&&""!==t.objectid?(e.model.set("objectid",t.objectid),n.warn(o.get("ParameterCreationWithErrors")+t.error)):n.error(o.get("ParameterCreationKO")+": "+t.error)}}):"Update"===W&&t.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring/"+u,{method:"PUT",type:"json",data:JSON.stringify(k),headers:N,onComplete:function(t){console.log(t),n.success(o.get("ParameterModificationOK")),e.model.dispatchEvent("PARComponentUpdate",e.model)},onFailure:function(t){void 0!==t.objectid&&""!==t.objectid?(e.model.set("objectid",t.objectid),n.warn(o.get("ParameterModificationWithErrors")+t.error)):n.error(o.get("ParameterModificationKO")+": "+t.error)}})}}else this.errortitle=new i({target:document.querySelector("#inputtitle"),position:"top",body:o.get("Required")}),this.errortitle.show()},PARapplyparam:function(){if(void 0!==this.model.get("title")&&""!==this.model.get("title")){var e=this;this.errortitle&&this.errortitle.hide();var a=this.model.get("valuationtype"),l=this.model.get("title"),s=this.model.get("dimension"),r=""!==this.model.get("parentid")&&void 0!==this.model.get("parentid")?r=this.model.get("parentid"):"",u=""!==this.model.get("objectid")&&void 0!==this.model.get("objectid")?u=this.model.get("objectid"):"",c=this.model.get("unit"),d=this.model.get("name"),m=this.model.get("description"),h=this.model.get("owner"),v=this.model.get("values"),p=this.model.get("value"),g=this.model.get("minvalue"),b=this.model.get("maxvalue"),f=this.model.get("autoname"),y=this.model.get("mininclus"),S=this.model.get("maxinclus"),x=this.model.get("mintolerance"),P=this.model.get("maxtolerance"),A=this.model.get("minprecision"),q=this.model.get("maxprecision"),j=this.model.get("function"),M=this.model.get("objectiftype"),R=this.model.get("objectifprobability"),w=this.model.get("objectifprobabilityunit"),C=this.model.get("objectifconfidence"),U=this.model.get("objectifconfidencetunit"),_=""!==this.model.get("changeid")&&void 0!==this.model.get("changeid")?_=this.model.get("changeid"):"",E=this.model.get("priority"),N={"Content-Type":"application/json",SecurityContext:e.model.get("SecurityContext")};""!==_&&(N["DS-Change-Authoring-Context"]="pid:"+_);var V={valuationtype:a,title:l,dimension:s,objectid:u,attributes:{parentid:r,unit:c,autoname:f,name:d,description:m,owner:h},values:{value:p,minvalue:g,mininclus:y,maxvalue:b,maxinclus:S,valuesvalue:v,mintolerance:x,maxtolerance:P,minprecision:A,maxprecision:q},objectif:{function:j,objectiftype:M,objectifprobability:R,objectifprobabilityunit:w,objectifconfidence:C,objectifconfidencetunit:U,priority:E}};t.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring",{method:"POST",type:"json",data:JSON.stringify(V),headers:N,onComplete:function(t){console.log(t),n.success(o.get("ParameterCreationOK")),e.model.set("objectid",t.objectid),e.model.set("name",t.attributes.name),e.model.set("owner",t.attributes.owner),e.model.set("revision",t.attributes.revision)},onFailure:function(t){console.log(t),void 0!==t.objectid&&""!==t.objectid?(e.model.set("objectid",t.objectid),n.warn(o.get("ParameterCreationWithErrors")+t.error)):n.error(o.get("ParameterCreationKO"))}})}else this.errortitle=new i({target:document.querySelector("#inputtitle"),position:"top",body:o.get("Required")}),this.errortitle.show()},PARclicksetvalues:function(e){"none"===e.style.display?e.show():e.hide()},PARclickdetails:function(e){"none"===e.style.display?e.show():e.hide()},PARchangevaluationtype:function(){this.model.set("valuationtype",document.querySelector("#selectvaluationtype").value,{silent:!0}),"1"===document.querySelector("#selectvaluationtype").value?(document.querySelector("#labelvalues").setText(o.get("AuthorizedValues")),document.querySelector("#inputvalue").disabled=!1):(document.querySelector("#labelvalues").setText(o.get("Values")),document.querySelector("#inputvalue").disabled=!0,document.querySelector("#inputvalue").value="")},PARchangevalue:function(){if("StringParameter"===this.model.get("dimension")||"BooleanParameter"===this.model.get("dimension"))this.model.set("value",document.querySelector("#inputvalue").value,{silent:!0});else{if(isNaN(document.querySelector("#inputvalue").value))UWA.is(this.errorvalue)?this.errorvalue.setBody(o.get("MustBeANumber")):this.errorvalue=new i({target:document.querySelector("#inputvalue"),position:"top",body:o.get("MustBeANumber")}),this.errorvalue.show();else{var e=this._isValueValid();UWA.is(e)?(UWA.is(this.errorvalue)?this.errorvalue.setBody(o.get(e)):this.errorvalue=new i({target:document.querySelector("#inputvalue"),position:"top",body:o.get(e)}),this.errorvalue.show()):(this.model.set("value",document.querySelector("#inputvalue").value,{silent:!0}),UWA.is(this.errorvalue)&&(this.errorvalue.destroy(),this.errorvalue=null))}this._updateMinError(),this._updateMaxError()}},PARremoveerrorvalue:function(){},PARchangetitle:function(){this.model.set("title",document.querySelector("#inputtitle").value,{silent:!0})},PARchangedescription:function(){this.model.set("description",document.querySelector("#inputdescription").value,{silent:!0})},PARchangeunit:function(){this.model.set("unit",document.querySelector("#selectunit").value,{silent:!0})},PARchangeminvalue:function(){if("StringParameter"===this.model.get("dimension")||"BooleanParameter"===this.model.get("dimension"));else{if(isNaN(document.querySelector("#inputminvalue").value))UWA.is(this.errorminvalue)?this.errorminvalue.setBody(o.get("MustBeANumber")):this.errorminvalue=new i({target:document.querySelector("#inputminvalue"),position:"top",body:o.get("MustBeANumber")}),this.errorminvalue.show();else{var e=this._isMinValid();UWA.is(e)?(UWA.is(this.errorminvalue)?this.errorminvalue.setBody(o.get(e)):this.errorminvalue=new i({target:document.querySelector("#inputminvalue"),position:"top",body:o.get(e)}),this.errorminvalue.show()):(this.model.set("minvalue",document.querySelector("#inputminvalue").value,{silent:!0}),UWA.is(this.errorminvalue)&&(this.errorminvalue.destroy(),this.errorminvalue=null))}this._updateValueError(),this._updateMaxError()}},PARremoveerrorminvalue:function(){},PARchangemininclus:function(){var e=this._isMinIncludedValid();UWA.is(e)?(UWA.is(this.errorminincvalue)?this.errorminincvalue.setBody(o.get(e)):this.errorminincvalue=new i({target:document.querySelector("#cbinclusminvalue"),position:"top",body:o.get(e)}),this.errorminincvalue.show()):UWA.is(this.errorminincvalue)&&(this.errorminincvalue.destroy(),this.errorminincvalue=null),this.model.set("mininclus",document.querySelector("#cbinclusminvalue").checked,{silent:!0})},PARchangemaxvalue:function(){if("StringParameter"===this.model.get("dimension")||"BooleanParameter"===this.model.get("dimension"));else{if(isNaN(document.querySelector("#inputmaxvalue").value))UWA.is(this.errormaxvalue)?this.errormaxvalue.setBody(o.get("MustBeANumber")):this.errormaxvalue=new i({target:document.querySelector("#inputmaxvalue"),position:"top",body:o.get("MustBeANumber")}),this.errormaxvalue.show();else{var e=this._isMaxValid();UWA.is(e)?(UWA.is(this.errormaxvalue)?this.errormaxvalue.setBody(o.get(e)):this.errormaxvalue=new i({target:document.querySelector("#inputmaxvalue"),position:"top",body:o.get(e)}),this.errormaxvalue.show()):(this.model.set("maxvalue",document.querySelector("#inputmaxvalue").value,{silent:!0}),UWA.is(this.errormaxvalue)&&(this.errormaxvalue.destroy(),this.errormaxvalue=null))}this._updateValueError(),this._updateMinError()}},PARremoveerrormaxvalue:function(){},PARchangemaxinclus:function(){var e=this._isMaxIncludedValid();UWA.is(e)?(UWA.is(this.errormaxincvalue)?this.errormaxincvalue.setBody(o.get(e)):this.errormaxincvalue=new i({target:document.querySelector("#cbinclusmaxvalue"),position:"top",body:o.get(e)}),this.errormaxincvalue.show()):UWA.is(this.errormaxincvalue)&&(this.errormaxincvalue.destroy(),this.errormaxincvalue=null),this.model.set("maxinclus",document.querySelector("#cbinclusmaxvalue").checked,{silent:!0})},PARchangemintolerancevalue:function(){"StringParameter"===this.model.get("dimension")||"BooleanParameter"===this.model.get("dimension")||(isNaN(document.querySelector("#inputmintolerance").value)?(this.errormintolerance=new i({target:document.querySelector("#inputmintolerance"),position:"top",body:o.get("MustBeANumber")}),this.errormintolerance.show()):this.model.set("mintolerance",document.querySelector("#inputmintolerance").value,{silent:!0}))},PARremoveerrormintolerancevalue:function(){void 0!==this.errormintolerance&&this.errormintolerance.hide()},PARchangemaxtolerancevalue:function(){"StringParameter"===this.model.get("dimension")||"BooleanParameter"===this.model.get("dimension")||(isNaN(document.querySelector("#inputmaxtolerance").value)?(this.errormaxtolerance=new i({target:document.querySelector("#inputmaxtolerance"),position:"top",body:o.get("MustBeANumber")}),this.errormaxtolerance.show()):this.model.set("maxtolerance",document.querySelector("#inputmaxtolerance").value,{silent:!0}))},PARremoveerrormaxtolerancevalue:function(){void 0!==this.errormaxtolerance&&this.errormaxtolerance.hide()},PARchangeminprecisionvalue:function(){"StringParameter"===this.model.get("dimension")||"BooleanParameter"===this.model.get("dimension")||(isNaN(document.querySelector("#inputminprecision").value)?(this.errorminprecision=new i({target:document.querySelector("#inputminprecision"),position:"top",body:o.get("MustBeANumber")}),this.errorminprecision.show()):this.model.set("minprecision",document.querySelector("#inputminprecision").value,{silent:!0}))},PARremoveerrorminprecisionvalue:function(){void 0!==this.errorminprecision&&this.errorminprecision.hide()},PARchangemaxprecisionvalue:function(){"StringParameter"===this.model.get("dimension")||"BooleanParameter"===this.model.get("dimension")||(isNaN(document.querySelector("#inputmaxprecision").value)?(this.errormaxprecision=new i({target:document.querySelector("#inputmaxprecision"),position:"top",body:o.get("MustBeANumber")}),this.errormaxprecision.show()):this.model.set("maxprecision",document.querySelector("#inputmaxprecision").value,{silent:!0}))},PARremoveerrormaxprecisionvalue:function(){void 0!==this.errormaxprecision&&this.errormaxprecision.hide()},PARchangename:function(){this.model.set("name",document.querySelector("#inputname").value,{silent:!0}),""===document.querySelector("#inputname").value||void 0===document.querySelector("#inputname").value?(this.errorname=new i({target:document.querySelector("#inputname"),position:"top",body:o.get("Required")}),this.errorname.show()):void 0!==this.errorname&&this.errorname.hide()},PARchangeowner:function(){this.model.set("owner",document.querySelector("#inputowner").value,{silent:!0})},PARchangerole:function(){this.model.set("role",document.querySelector("#inputrole").value,{silent:!0})},PARchangepriority:function(){this.model.set("priority",document.querySelector("#inputpriority").value,{silent:!0})},PARclickselecteddimension:function(){document.querySelector("#selectdimensions");var e=this.model.get("selecteddimension"),t=UWA.clone(this.model.get("preferreddimensionsMRU")),i=!0,n=UWA.clone(this.model.get("preferreddimensionsbase"));t.length>0&&t.forEach(function(t){t.value===e.value&&(i=!1)}),n.length>0&&n.forEach(function(t){t.value===e.value&&(i=!1)}),i&&(t.push({value:e.value,nls:e.nls}),t.length>10&&t.shift(),this.model.set("preferreddimensionsMRU",t)),this.model.set("dimension",e.value),document.querySelector("#divalldimensions").hide(),document.querySelector("#divparent").show()},PARchangeselecteddimension:function(e){this.model.set("selecteddimension",{value:e.target.value,nls:e.target.id})},PARchangeaddvalues:function(){"StringParameter"!==this.model.get("dimension")&&"BooleanParameter"!==this.model.get("dimension")&&isNaN(document.querySelector("#inputvalues").value)&&(this.erroraddvalues=new i({target:document.querySelector("#inputvalues"),position:"top",body:o.get("MustBeANumber")}),this.erroraddvalues.show()),UWA.is(this.errorvalue)&&(this.model.set("value",document.querySelector("#inputvalue").value,{silent:!0}),this.errorvalue.destroy(),this.errorvalue=null)},PARremoveerroraddvalues:function(){void 0!==this.erroraddvalues&&this.erroraddvalues.hide()},PARupdatedisplay:function(){if(""===this.model.get("objectid")||void 0===this.model.get("objectid"))document.querySelector("#btncreateparam").innerHTML="OK",document.querySelector("#cbname").style.visibility="visible",document.querySelector("#labelname").style.visibility="visible",document.querySelector("#inputrole").disabled=!1,document.querySelector("#cbname").checked?document.querySelector("#inputname").disabled=!0:document.querySelector("#inputname").disabled=!1,document.querySelector("#selectdimensions").disabled=!1,document.querySelector("#divrevisionowner").hide(),document.querySelector("#btndimensions").disabled=!1;else{document.querySelector("#btncreateparam").innerHTML="Update",document.querySelector("#cbname").style.visibility="hidden",document.querySelector("#labelname").style.visibility="hidden",document.querySelector("#inputrole").disabled=!0,document.querySelector("#inputname").disabled=!1,document.querySelector("#selectdimensions").disabled=!0,document.querySelector("#inputname").name=this.model.get("name"),document.querySelector("#inputrevision").value=this.model.get("revision"),document.querySelector("#inputowner").value=this.model.get("owner"),document.querySelector("#divrevisionowner").show(),document.querySelector("#btndimensions").disabled=!0,"2"===this.model.get("valuationtype")&&(document.querySelector("#inputvalue").disabled=!0);var e=this.model.get("dimension");"StringParameter"===e||"BooleanParameter"===e?(document.querySelector("#inputminvalue").disabled=!0,document.querySelector("#cbinclusminvalue").disabled=!0,document.querySelector("#inputmaxvalue").disabled=!0,document.querySelector("#cbinclusmaxvalue").disabled=!0,document.querySelector("#selectunit").disabled=!0,document.querySelector("#inputmintolerance").disabled=!0,document.querySelector("#inputmaxtolerance").disabled=!0,document.querySelector("#inputminprecision").disabled=!0,document.querySelector("#inputmaxprecision").disabled=!0,"BooleanParameter"===e&&(document.querySelector("#selectvaluationtype").disabled=!0,document.querySelector("#selectvalues").disabled=!0,document.querySelector("#inputvalues").disabled=!0,document.querySelector("#btnaddvalue").disabled=!0,document.querySelector("#btnremovevalue").disabled=!0)):"RealParameter"!==e&&"IntegerParameter"!==e||(document.querySelector("#selectunit").disabled=!0)}},PARchangetypeobjectif:function(){this.model.set("objectiftype",document.querySelector("#selectobjetiftype").value,{silent:!0})},PARchangeprobabilityobjectif:function(){this.model.set("objectifprobability",document.querySelector("#inputobjetifprobability").value,{silent:!0})},PARchangeprobabilityunitobjectif:function(){this.model.set("objectifprobabilityunit",document.querySelector("#selectobjetifprobabilityunit").value,{silent:!0})},PARchangeconfidenceobjectif:function(){this.model.set("objectifconfidence",document.querySelector("#inputobjectifconfidence").value,{silent:!0})},PARchangeconfidenceunitobjectif:function(){this.model.set("objectifconfidencetunit",document.querySelector("#selectobjectifconfidenceunit").value,{silent:!0})},PARshowdimensionslist:function(){document.querySelector("#divparent").hide(),document.querySelector("#divalldimensions").show()},_checkListOfValues:function(e,t){var i=null,n="#inputmaxvalue",o="#cbinclusmaxvalue";"Min"===e&&(n="#inputminvalue",o="#cbinclusminvalue");document.querySelector("#inputvalue").value;for(var a=document.querySelector("#selectvaluationtype").value,l=document.querySelector(n).value,s=document.querySelector(o).checked,r=document.querySelector("#selectvalues"),u=r.length,c=0,d=[];c<u;c++){var m=r.options[c].value;"Empty"!==m&&void 0!==m&&d.push(m)}if(d.length>0){var h=d.sort(function(e,t){return+e-+t}),v="Min"===e?h[1]:h[h.length-1];"Equality"===t&&parseFloat(v)===parseFloat(l)?"1"===a?i="Min"==e?"error.MinStricLessAuthValues":"error.MaxStricGreaterAuthValues":"2"===a&&(i="Min"==e?"error.MinStricLessMultipleValues":"error.MaxStricGreaterMultipleValues"):"Comparison"===t&&("Min"===e?s&&parseFloat(l)>parseFloat(v)?i="1"===a?"error.MinLessAuthValues":"error.MinLessMultipleValues":!s&&parseFloat(l)>=parseFloat(v)&&(i="1"===a?"error.MinStricLessAuthValues":"error.MinStricLessMultipleValues"):"Max"===e&&(s&&parseFloat(l)<parseFloat(v)?i="1"===a?"error.MaxGreaterAuthValues":"error.MaxGreaterMultipleValues":!s&&parseFloat(l)<=parseFloat(v)&&(i="1"===a?"error.MaxStricGreaterAuthValues":"error.MaxStricGreaterMultipleValues")))}return i},_isValueValid:function(){var e=null,t=!0,i=document.querySelector("#inputminvalue").value,n=document.querySelector("#inputmaxvalue").value,o=document.querySelector("#inputvalue").value,a=document.querySelector("#cbinclusmaxvalue").checked,l=document.querySelector("#cbinclusminvalue").checked;if((i.length>0&&!isNaN(i)&&1==l&&parseFloat(o)<parseFloat(i)||0==l&&parseFloat(o)<=parseFloat(i))&&(e="error.ValueLessThanMin",t=!1),(t&&n.length>0&&!isNaN(n)&&1==a&&parseFloat(o)>parseFloat(n)||0==a&&parseFloat(o)>=parseFloat(n))&&(e="error.ValueGreaterThanMax"),!0===t){for(var s=document.querySelector("#selectvaluationtype").value,r=document.querySelector("#selectvalues"),u=r.length,c=0,d=[];c<u;c++){var m=r.options[c].value;"Empty"!==m&&void 0!==m&&d.push(m)}"1"===s&&d.length>1&&-1===d.indexOf(o)&&(e="error.NotInTheList")}return e},_isMultipleValueValid:function(e){var t=null,i=!0,n=this.model.get("dimension");if("StringParameter"===n||"BooleanParameter"===n)return null;if(isNaN(e))return"error.NotAValidNumber";var o=document.querySelector("#inputminvalue").value,a=document.querySelector("#inputmaxvalue").value,l=document.querySelector("#cbinclusmaxvalue").checked,s=document.querySelector("#cbinclusminvalue").checked;return(o.length>0&&!isNaN(o)&&1==s&&parseFloat(e)<parseFloat(o)||0==s&&parseFloat(e)<=parseFloat(o))&&(t="error.ValueLessThanMin",i=!1),(i&&a.length>0&&!isNaN(a)&&1==l&&parseFloat(e)>parseFloat(a)||0==l&&parseFloat(e)>=parseFloat(a))&&(t="error.ValueGreaterThanMax"),t},_isMinMaxValid:function(e){var t=null,i=!0,n=document.querySelector("#inputminvalue").value,o=document.querySelector("#inputmaxvalue").value,a=document.querySelector("#inputvalue").value,l=document.querySelector("#selectvaluationtype").value,s=document.querySelector("#cbinclusmaxvalue").checked,r=document.querySelector("#cbinclusminvalue").checked;i=!0;return"1"===l&&a.length>0&&!isNaN(a)&&(("Min"===e&&n.length>0&&!isNaN(n)&&1==r&&parseFloat(a)<parseFloat(n)||0==r&&parseFloat(a)<=parseFloat(n))&&(i=!1,t="error.MinGreaterValue"),(i&&"Max"===e&&o.length>0&&!isNaN(o)&&1==s&&parseFloat(a)>parseFloat(o)||0==s&&parseFloat(a)>=parseFloat(o))&&(i=!1,t="error.MaxLessValue")),i&&n.length>0&&!isNaN(n)&&o.length>0&&!isNaN(o)&&(("Min"===e&&1==r&&parseFloat(o)<parseFloat(n)||0==r&&parseFloat(o)<=parseFloat(n))&&(i=!1,t="error.MinGreaterMax"),(i&&"Max"===e&&1==s&&parseFloat(n)>parseFloat(o)||0==s&&parseFloat(n)>=parseFloat(o))&&(i=!1,t="error.MaxLessMin")),i&&(t=this._checkListOfValues(e,"Comparison")),t},_isMinValid:function(){return this._isMinMaxValid("Min")},_isMaxValid:function(){return this._isMinMaxValid("Max")},_isMinIncludedValid:function(){return this._isMinMaxIncludedValid("Min")},_isMaxIncludedValid:function(){return this._isMinMaxIncludedValid("Max")},_isMinMaxIncludedValid:function(e){var t=null,i=!0,n="#inputmaxvalue",o="#cbinclusmaxvalue";"Min"===e&&(n="#inputminvalue",o="#cbinclusminvalue");var a=document.querySelector("#inputvalue").value,l=document.querySelector("#selectvaluationtype").value,s=document.querySelector(n).value,r=document.querySelector(o).checked;return!1===r&&s.length>0&&!isNaN(s)&&"0"!==l&&("1"===l&&a.length>0&&!isNaN(a)&&parseFloat(a)===parseFloat(s)&&(i=!1,t="Min"===e?"error.MinStricLessValue":"error.MaxStricGreaterValue"),1==i&&(t=this._checkListOfValues(e,"Equality"),UWA.is(t)&&(i=!1)),0==i&&(r=!0)),t},_updateValueMinMaxError:function(e){var t="#inputmaxvalue",i="maxvalue";"Min"===e?(t="#inputminvalue",i="minvalue"):"Value"===e&&(t="#inputvalue",i="value");var n="Min"===e?this._isMinValid():"Max"===e?this._isMaxValid():this._isValueValid();UWA.is(n)||(this.model.set(i,document.querySelector(t).value,{silent:!0}),"Min"===e&&UWA.is(this.errorminvalue)?(this.errorminvalue.destroy(),this.errorminvalue=null):"Max"===e&&UWA.is(this.errormaxvalue)?(this.errormaxvalue.destroy(),this.errormaxvalue=null):"Value"===e&&UWA.is(this.errorvalue)&&(this.errorvalue.destroy(),this.errorvalue=null))},_updateValueError:function(){this._updateValueMinMaxError("Value")},_updateMinError:function(){this._updateValueMinMaxError("Min")},_updateMaxError:function(){this._updateValueMinMaxError("Max")}}}),define("DS/PARParameterComponent/PARView",["UWA/Core","UWA/Class/View","UWA/Class/Debug","UWA/Class/Collection","DS/UIKIT/Mask","DS/UIKIT/Input/Text","DS/UIKIT/Modal","DS/WAFData/WAFData","DS/PARParameterComponent/PARForm","i18n!DS/PARParameterComponent/assets/nls/PARParameterComponent"],function(e,t,i,n,o,a,l,s,r,u){"use strict";return t.extend(i,{className:"EditorView",setup:function(){this.onModelLoaded(this.model),this.listenTo(this.model,"onChange:preferreddimensions",function(e){this.replaceselectcontain("#selectdimensions",e._attributes.preferreddimensions);e={dimension:document.querySelector("#selectdimensions").value};var t=this;"BooleanParameter"===e.dimension||"StringParameter"===e.dimension?t.model.set("unitsselecteddimension",[]):s.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring/getunits",{method:"POST",type:"json",data:JSON.stringify(e),headers:{"Content-Type":"application/json"},onComplete:function(e){t.model.set("unitsselecteddimension",e)},onFailure:function(){t.model.set("unitsselecteddimension",[])}})}),this.listenTo(this.model,"onChange:objectid",function(e){r.PARupdatedisplay()}),this.listenTo(this.model,"onChange:forceupdate",function(e){r.PARupdatedisplay()}),this.listenTo(this.model,"onChange:alldimensions",function(e){var t=document.querySelector("#divalldimension"),i="",n=this;e._attributes.alldimensions.forEach(function(e,t){0===t?(i=i.concat('<div class="toggle"><input type="radio" name="radios" id="'+e.nls+'" value="'+e.value+'" checked><label class="control-label" for"'+e.nls+'">'+e.nls+"</label></div>"),n.model.set("selecteddimension",{value:e.value,nls:e.nls})):i=i.concat('<div class="toggle"><input type="radio" name="radios" id="'+e.nls+'" value="'+e.value+'"><label class="control-label" for"'+e.nls+'">'+e.nls+"</label></div>")}),t.innerHTML=i}),this.listenTo(this.model,"onChange:unitsselecteddimension",function(e){var t=!1,i=this;this.replaceselectcontain("#selectunit",e._attributes.unitsselecteddimension.units),void 0!==e._attributes.unitsselecteddimension.units&&e._attributes.unitsselecteddimension.units.length>0&&(e._attributes.unitsselecteddimension.units.forEach(function(e){e.value===i.model.get("unit").value&&(t=!0)}),document.querySelector("#selectunit").value=t?this.model.get("unit").value:e._attributes.unitsselecteddimension.preferredunit.name)}),this.listenTo(this.model,"onChange:valuationtype",function(e){var t=document.querySelector("#labelvalues"),i=document.querySelector("#selectvaluationtype").value;"1"===e._attributes.valuationtype?t.setHTML(u.get("AuthorizedValues")):t.setHTML(u.get("Values")),e._attributes.valuationtype!==i&&(document.querySelector("#selectvaluationtype").value=e._attributes.valuationtype)}),this.listenTo(this.model,"onChange:title",function(e){document.querySelector("#inputtitle").value=e._attributes.title}),this.listenTo(this.model,"onChange:dimension",function(e){document.querySelector("#selectdimensions").value=e._attributes.dimension;e={dimension:e._attributes.dimension};var t=this;this.model.set("unit",{value:"",nls:""}),"BooleanParameter"===e.dimension||"StringParameter"===e.dimension?t.model.set("unitsselecteddimension",[]):s.authenticatedRequest(this.model.get("3DSpaceUrl")+"/resources/parameter/authoring/getunits",{method:"POST",type:"json",data:JSON.stringify(e),headers:{"Content-Type":"application/json"},onComplete:function(e){t.model.set("unitsselecteddimension",e)},onFailure:function(){t.model.set("unitsselecteddimension",[])}})}),this.listenTo(this.model,"onChange:unit",function(e){document.querySelector("#selectunit").value=e._attributes.unit.value;var t=e._attributes.unit;null!==t.value&&null!==t.nls||(null===t.value&&(t.value=""),null===t.nls&&(t.nls=""),this.model.set("unit",t,{silent:!0}))}),this.listenTo(this.model,"onChange:autoname",function(e){"boolean"==typeof e._attributes.autoname?e._attributes.autoname?document.querySelector("#cbname").checked=!0:document.querySelector("#cbname").checked=!1:(this.model.set("autoname",!0,{silent:!0}),document.querySelector("#cbname").checked=!0)}),this.listenTo(this.model,"onChange:name",function(e){void 0===e._attributes.name||""===e._attributes.name?document.querySelector("#inputname").value="":document.querySelector("#inputname").value=e._attributes.name}),this.listenTo(this.model,"onChange:description",function(e){void 0===e._attributes.description||""===e._attributes.description?document.querySelector("#inputdescription").value="":document.querySelector("#inputdescription").value=e._attributes.description}),this.listenTo(this.model,"onChange:owner",function(e){void 0===e._attributes.owner||""===e._attributes.owner?document.querySelector("#inputowner").value="":document.querySelector("#inputowner").value=e._attributes.owner}),this.listenTo(this.model,"onChange:revision",function(e){void 0===e._attributes.owner||""===e._attributes.revision?document.querySelector("#inputrevision").innerHTML="":document.querySelector("#inputrevision").innerHTML=e._attributes.revision}),this.listenTo(this.model,"onChange:value",function(e){void 0===e._attributes.value||""===e._attributes.value?document.querySelector("#inputvalue").value="":document.querySelector("#inputvalue").value=e._attributes.value}),this.listenTo(this.model,"onChange:minvalue",function(e){void 0===e._attributes.minvalue||""===e._attributes.minvalue||null===e._attributes.minvalue?document.querySelector("#inputminvalue").value="":document.querySelector("#inputminvalue").value=e._attributes.minvalue,null===e._attributes.minvalue&&this.model.set("minvalue","",{silent:!0})}),this.listenTo(this.model,"onChange:mininclus",function(e){"boolean"==typeof e._attributes.mininclus?e._attributes.mininclus?document.querySelector("#cbinclusminvalue").checked=!0:document.querySelector("#cbinclusminvalue").checked=!1:(this.model.set("mininclus",!0,{silent:!0}),document.querySelector("#cbinclusminvalue").checked=!0)}),this.listenTo(this.model,"onChange:maxvalue",function(e){void 0===e._attributes.maxvalue||""===e._attributes.maxvalue||null===e._attributes.maxvalue?document.querySelector("#inputmaxvalue").value="":document.querySelector("#inputmaxvalue").value=e._attributes.maxvalue,null===e._attributes.maxvalue&&this.model.set("maxvalue","",{silent:!0})}),this.listenTo(this.model,"onChange:maxinclus",function(e){"boolean"==typeof e._attributes.maxinclus?e._attributes.maxinclus?document.querySelector("#cbinclusmaxvalue").checked=!0:document.querySelector("#cbinclusmaxvalue").checked=!1:(this.model.set("maxinclus",!0,{silent:!0}),document.querySelector("#cbinclusmaxvalue").checked=!0)}),this.listenTo(this.model,"onChange:mintolerance",function(e){void 0===e._attributes.mintolerance||""===e._attributes.mintolerance||null===e._attributes.mintolerance?document.querySelector("#inputmintolerance").value="":document.querySelector("#inputmintolerance").value=e._attributes.mintolerance,null===e._attributes.mintolerance&&this.model.set("mintolerance","",{silent:!0})}),this.listenTo(this.model,"onChange:values",function(e){var t=e._attributes.values;null!=t&&null!=t||(t=[]),t.unshift({value:"Empty",nls:""}),this.replaceselectcontain("#selectvalues",t)}),this.listenTo(this.model,"onChange:preferreddimensionsMRU",function(e){var t=e._attributes.preferreddimensionsMRU,i=(document.querySelector("#selectdimensions"),"");e._attributes.preferreddimensionsMRU.forEach(function(e){i=i+e.value+";"}),widget.setValue("preferreddimensionsMRU",i);var n=this.model.get("preferreddimensionsbase").concat(t);this.model.set("preferreddimensions",n)}),this.listenTo(this.model,"onChange:function",function(e){document.querySelector("#selectfunction").value=e._attributes.function}),this.listenTo(this.model,"onChange:objectiftype",function(e){document.querySelector("#selectobjetiftype").value=e._attributes.function}),this.listenTo(this.model,"onChange:objectifprobability",function(e){document.querySelector("#inputobjetifprobability").value=e._attributes.function}),this.listenTo(this.model,"onChange:objectifprobabilityunit",function(e){document.querySelector("#selectobjetifprobabilityunit").value=e._attributes.function}),this.listenTo(this.model,"onChange:objectifconfidence",function(e){document.querySelector("#inputobjectifconfidence").value=e._attributes.function}),this.listenTo(this.model,"onChange:objectifconfidencetunit",function(e){document.querySelector("#inputobjectifconfidenceunit").value=e._attributes.function})},replaceselectcontain:function(e,t){for(var i=document.querySelector(e);i.firstChild;)i.removeChild(i.firstChild);void 0!==t&&t.length>0&&t.forEach(function(e){var t=document.createElement("option");null==e.nls?(t.text=e,t.value=e):(t.text=e.nls,t.value=e.value),i.add(t)})},onModelLoaded:function(e){this.renderForm(e)},renderForm:function(e){o.unmask(this.container);if("modal"===e.get("displaytype")){var t=new l({closable:!0,body:"<p>Waiting for a selection in Catia</p>",size:"400px"}).inject(this.container);e.set("modalparent",t),t.hide(),t.setBody(r.getForm(this.model)),t.setFooter(r.getFooter()),t.getBody().setStyles({maxHeight:"800px",overflow:"auto"}),UWA.createElement("div",{id:"divbutton",class:"col-sm-6",html:[{tag:"button",type:"button",class:"btn btn-default",html:"Param",id:"btnapplyparam",styles:{margin:"5px"},events:{click:function(){t.show()}}}]}).inject(this.container)}else{r.getForm(this.model).inject(this.container)}},loadData:function(){},render:function(){return this.container.setStyles({width:"100%",height:"100%"}),this},onResize:function(e){},destroy:function(){this.stopListening(),this.model=null,this._parent()}})}),define("DS/PARParameterComponent/PARComponent",["DS/PARParameterComponent/PARModel","DS/PARParameterComponent/PARView","UWA/Class/View","DS/i3DXCompassServices/i3DXCompassServices","UWA/Class/Promise"],function(e,t,i,n,o){"use strict";return i.extend({onLoad:function(){},setup:function(){var i=this;this._promise=new o(function(o,a){""===i.options.url||void 0===i.options.url?n.getServiceUrl({serviceName:"3DSpace",onComplete:function(n){n=n[0];i.options.url=n.url,i.model=new e(i.options),i.view=new t({model:i.model,id:"PLMParameter"}),i.view.render().inject(i.container),i.getData(),o()}.bind(i),onFailure:function(){a()}}):(i.model=new e(i.options),i.view=new t({model:i.model,id:"PLMParameter"}),i.view.render().inject(i.container),o())})},render:function(){return this},getData:function(){this.view.loadData()},getModel:function(){return this.model},getPARCompPromise:function(){return this._promise}})}),define("DS/PARParameterComponent/popup/PARPopup",["UWA/Controls/Abstract","DS/ENOFloatingPanel/ENOFloatingPanel","DS/PARParameterComponent/PARComponent","DS/PlatformAPI/PlatformAPI","UWA/Class/Promise","i18n!DS/PARParameterComponent/assets/nls/PARParameterComponent","css!DS/EditPropWidget/EditPropWidget.css"],function(e,t,i,n,o,a){"use strict";var l="ENOVIA - "+a.get("Parameters");return e.extend({defaultOptions:{serverName:"",serverUri:"",container:null,context:null,parentid:"",changeid:"",tenant:""},init:function(e){this._parent(e),this.parentid=e.parentid,this.tenant=e.tenant,UWA.is(e.context)&&UWA.is(e.context.getAuthoringContextPID)&&(this.changeid=e.context.getAuthoringContextPID()),this.initUI()},setDataReady:function(e){e&&(this.defaultModels=null),this.dataReady=e},initUI:function(){var e=this;this._parent(this.options),this.widgetPere=UWA.is(this.options.container)?this.options.container:UWA.is(widget.body)?widget.body:UWA.extend(document.body);var o=new i({parentid:this.parentid,type:"container",tenant:this.tenant,changeid:this.changeid});o.render(),e.fakeFloatingPanel=new t({className:"PAR_PopupDialFake",body:o.getContent(),title:l,pinOptions:null,pinCallback:null,overlay:!1,closable:!0,animate:!0,resizable:!0,events:{onClose:function(){e._cancel()}}}),e.fakeFloatingPanel.inject(this.widgetPere),o.getPARCompPromise().then(function(){e.fakeFloatingPanel.setNewSize({}),e.fakeFloatingPanel.lockWidth(),e.fakeFloatingPanel.centerIt(),UWA.is(e.fakeFloatingPanel.elements.body)&&(e.fakeFloatingPanel.elements.body.style.overflow="auto"),o.listenTo(o.getModel(),"PARComponentCreate",function(t){n.publish("DS/PARParameterComponent/PlatformAPI/create",t._attributes),e.destroyComponent()}),o.listenTo(o.getModel(),"PARComponentUpdate",function(e){n.publish("DS/PARParameterComponent/PlatformAPI/update",e._attributes)})})},show:function(){this.fakeFloatingPanel.show()},hide:function(){this.fakeFloatingPanel.hide()},onRefresh:function(){},_cancel:function(){this.fakeFloatingPanel.hide(),this.fakeFloatingPanel.destroy()},destroyComponent:function(){this.fakeFloatingPanel.hide(),this.fakeFloatingPanel.destroy()}})});