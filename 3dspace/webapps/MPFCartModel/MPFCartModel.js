define("DS/MPFCartModel/CartTimelineItemDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(t,e){"use strict";return e.extend({init:function(t,e){this._parent(t,"/mdcart/carts/{0}/timeline-items")},url:function(e){return this.connector.url(t.String.format(this.resourcePath,e.parentResourceId))}})}),define("DS/MPFCartModel/CartDataProxyv2",["UWA/Core","UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils"],function(t,e,r,n){"use strict";return r.extend({init:function(t,e){this._parent(t,"/mdcart/carts/{0}/v2",e)},urlPatch:function(t,r){var n;return n=e.format(this.resourcePath,t.id),this.connector.url(n,r)},urlPost:function(t,e){return new n(this.connector.url("/mdcart/carts/v2",e)).addParameter("contractingParty",t.contractingParty).getUrl()},urlGet:function(t,e){return this.delegate.urlGet(t,e)},_computeDefaultUrl:function(t,r){var n;return n=e.format(this.resourcePath,t.id),this.connector.url(n,r)}})}),define("DS/MPFCartModel/MeCartDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(t,e){"use strict";return e.extend({init:function(t,e){this._parent(t,"/me/carts",e)},doDelete:null,doPatch:null,doPut:null,urlGet:function(e,r){return e.id&&t.is(this.delegate)?this.delegate.urlGet(e,r):this._parent(e,r)},urlDelete:null,urlPatch:null,urlPut:null})}),define("DS/MPFCartModel/CartItemModel",["DS/MPFModel/MPFModel","DS/MPFUtils/MPFUtils","DS/MPFPortfolioModel/PortfolioHelper","DS/MPFPortfolioModel/LicensingHelper","i18n!DS/MPFCartModel/assets/nls/CartModel"],function(t,e,r,n,i){"use strict";const s=Object.freeze({TYPE:"type",STATE:"currentState",END_DATE:"EndDate",LICENSING_SCHEME:"LicensingScheme",LICENSING:"Licensing",PRODUCT_DISPLAY_NAME:"ProductDisplayName",TOTAL_FEE_AMOUNT:"TotalFeeAmount",TOTAL_GROSS_AMOUNT:"TotalGrossAmount",TOTAL_NET_AMOUNT:"TotalNetAmount",TOTAL_TAXES_AMOUNT:"TotalTaxesAmount",UNIT_FEE_AMOUNT:"UnitFeeAmount",UNIT_NET_AMOUNT:"UnitNetAmount",UNIT_TAXES_AMOUNT:"UnitTaxesAmount",CREATED:"Created",MODIFIED:"Modified",HISTORY:"History",INVOICE:"Invoice",IS_TEST_ITEM:"IsTestItem",NAME:"name",ORIGINAL_CREATION_DATE:"OriginalCreationDate",TOTAL_COMMISSION_BASIS_AMOUNT:"TotalCommissionBasisAmt",UNIT_COMMISSION_BASIS_AMOUNT:"UnitCommissionBasisAmt",QUANTITY:"Quantity",SKU_ID:"SkuId",PRODUCT_TRIGRAM:"ProductTrigram",PRODUCT_NUMBER:"ProductNumber",DISCOUNT:"Discount",TEMP_UUID:"TempUUID",ACTION:"Action",OFFER_ID:"OfferID",OFFER_QUANTITY:"OfferQuantity",UNIT_NET_AMOUNT_NOT_ALIGNED:"UnitNetAmountNotAligned",TOTAL_NET_AMOUNT_NOT_ALIGNED:"TotalNetAmountNotAligned",ONLINE_INSTANCE:"OnlineInstance",DISPLAY_PRICE:"displayPrice",EXTERNAL_OFFER_ID:"ExternalOfferId",TITLE:"title"}),a=Object.freeze({MAKE_REQUEST:"MP3DP_PrintRequest",ENGINEERING_REQUEST:"MPENG_EngineeringItem",SOFTWARE_REQUEST:"MP_SoftwareRequest"}),o=Object.freeze({YSC:"YSC",QSC:"QSC",QRC:"QRC",MSC:"MSC",ELC:"ELC"}),u=Object.freeze({accepted:"ACCEPTED",deleted:"DELETED",delivered:"DELIVERED",draft:"DRAFT",pendingProcessing:"PENDING_PROCESSING",processing:"PROCESSING",ready:"READY",shipped:"SHIPPED",submited:"SUBMITTED",submitted:"SUBMITTED",ACCEPTED:"ACCEPTED",DELETED:"DELETED",DELIVERED:"DELIVERED",DRAFT:"DRAFT",PENDING_PROCESSING:"PENDING_PROCESSING",PROCESSING:"PROCESSING",READY:"READY",SHIPPED:"SHIPPED",SUBMITTED:"SUBMITTED"}),l=t.extend({defaults:{Created:"",currentState:"",History:"",id:"",IsTestItem:!1,Modified:"",name:"",Quantity:0,TotalFeeAmount:0,TotalGrossAmount:0,TotalNetAmount:0,TotalTaxesAmount:0,type:null,UnitFeeAmount:0,UnitNetAmount:0,UnitTaxesAmount:0},setup:function(t,e){this._parent(t,e),this._type="CartItemModel"},renamedAttributes:function(){return{}},parse:function(t){const e=["IsTestItem","Invoice"],r=["Created","Modified","OriginalCreationDate"],n=["TotalCommissionBasisAmt","TotalCommissionBasisAmount","TotalFeeAmount","TotalGrossAmount","TotalNetAmount","TotalTaxesAmount","UnitCommissionBasisAmt","UnitCommissionBasisAmount","UnitFeeAmount","UnitNetAmount","UnitTaxesAmount"],i=["currentState","Data","History","id","name","status","type","ProductTrigram","ProductDisplayName","EndDate"],s={},a=this.renamedAttributes(),o=Object.keys(t);for(let u=0;u<o.length;u++){const l=t[o[u]];let d=o[u].replace("MP_SoftwareRequest.MP_","").replace("MP3DP_PrintRequest.MP3DP_","").replace("MP_CartItem.MP_","").replace(/_/g,"");a[d]&&(d=a[d]),-1!==e.indexOf(d)?s[d]="true"===l.toLowerCase():-1!==r.indexOf(d)?s[d]=l?new Date(l):"":-1!==n.indexOf(d)?s[d]=parseFloat(l)||0:(i.indexOf(d),s[d]=l)}return s},toJSON:function(t){const r=function(t){return t.replace("MP3DP_PrintRequest.MP3DP_","").replace("MP_CartItem.MP_","").replace(/_/g,"")},n={},i=["IsTestItem","Invoice"],s=["Created","Modified","MP_CartItem.MP_OriginalCreationDate"],a=["MP_CartItem.MP_Total_Commission_Basis_Amt","TotalFeeAmount","TotalGrossAmount","TotalNetAmount","TotalTaxesAmount","MP_CartItem.MP_Unit_Commission_Basis_Amt","UnitFeeAmount","UnitNetAmount","UnitTaxesAmount"],o=["currentState","Data","History","id","name","MP_CartItem.MP_status","type"],u=this.renamedAttributes(),l=Object.keys(this.omit());for(let t=0;t<l.length;t++){const d=l[t],c=this.get(d);if(-1!==i.map(r).indexOf(d)?n[i[i.map(r).indexOf(d)]]=c?"TRUE":"FALSE":-1!==s.map(r).indexOf(d)?n[s[s.map(r).indexOf(d)]]=c&&""!==c?c.toISOString():c:-1!==a.map(r).indexOf(d)?n[a[a.map(r).indexOf(d)]]=c?c.toString():"":-1!==o.map(r).indexOf(d)?n[o[o.map(r).indexOf(d)]]=c:n[d]=c,e.objectHasValue(u,d)){delete n[d];const t=e.objectValues(u).indexOf(d);n[Object.keys(u)[t]]=c}}return n},validate:function(t,e){const r=[],n=t[s.UNIT_NET_AMOUNT];n&&n&&r.push({field:s.UNIT_NET_AMOUNT,max:21474836,message:i.get("errorFieldsMax",{field:s.UNIT_NET_AMOUNT,value:21474836})});const a=t[s.TOTAL_NET_AMOUNT];if(a&&a>=21474836&&r.push({field:s.TOTAL_NET_AMOUNT,max:21474836,message:i.get("errorFieldsMax",{field:s.TOTAL_NET_AMOUNT,value:21474836})}),r.length>0)return r},getUnitMonthlyPrice:function(){return this.computeMonthlyPrice(parseFloat(this.getUnitNetAmount()))},getUnitMonthlyPriceNotAligned:function(){return this.computeMonthlyPrice(this.getUnitNetAmountNotAligned())},getTotalMonthlyPrice:function(){return this.computeMonthlyPrice(parseFloat(this.getTotalNetAmount()))},getTotalMonthlyPriceNotAligned:function(){return this.computeMonthlyPrice(this.getTotalNetAmountNotAligned())},computeMonthlyPrice:function(t){const e=this.getLicensingScheme();return e===o.YSC?t/=12:e!==o.QRC&&e!==o.QSC||(t/=3),t},getType:function(){return this.get(s.TYPE)},setType:function(t){return this.set(s.TYPE,t)},getCreated:function(){return this.get(s.CREATED)},setCreated:function(t){return this.set(s.CREATED,t)},getCurrentState:function(){return this.getState()},setCurrentState:function(t){return this.setState(t)},getState:function(){return this.get(s.STATE)},setState:function(t){return this.set(s.STATE,t)},getHistory:function(){return this.get(s.HISTORY)},setHistory:function(t){return this.set(s.HISTORY,t)},getInvoice:function(){return this.get(s.INVOICE)},setInvoice:function(t){return this.set(s.INVOICE,t)},getIsTestItem:function(){return this.get(s.IS_TEST_ITEM)},setIsTestItem:function(t){return this.set(s.IS_TEST_ITEM,t)},getModified:function(){return this.get(s.MODIFIED)},setModified:function(t){return this.set(s.MODIFIED,t)},getName:function(){return this.get(s.NAME)},setName:function(t){return this.set(s.NAME,t)},getOriginalCreationDate:function(){return this.get(s.ORIGINAL_CREATION_DATE)},setOriginalCreationDate:function(t){return this.set(s.ORIGINAL_CREATION_DATE,t)},getTotalCommissionBasisAmt:function(){return this.get(s.TOTAL_COMMISSION_BASIS_AMOUNT)},setTotalCommissionBasisAmt:function(t){return this.set(s.TOTAL_COMMISSION_BASIS_AMOUNT,t)},getTotalFeeAmount:function(){return this.get(s.TOTAL_FEE_AMOUNT)},setTotalFeeAmount:function(t){return this.set(s.TOTAL_FEE_AMOUNT,t)},getTotalGrossAmount:function(){return this.get(s.TOTAL_GROSS_AMOUNT)},setTotalGrossAmount:function(t){return this.set(s.TOTAL_GROSS_AMOUNT,t)},getTotalTaxesAmount:function(){return this.get(s.TOTAL_TAXES_AMOUNT)},setTotalTaxesAmount:function(t){return this.set(s.TOTAL_TAXES_AMOUNT,t)},getTotalNetAmount:function(){return this.get(s.TOTAL_NET_AMOUNT)},setTotalNetAmount:function(t){return this.set(s.TOTAL_NET_AMOUNT,t)},getUnitCommissionBasisAmt:function(){return this.get(s.UNIT_COMMISSION_BASIS_AMOUNT)},setUnitCommissionBasisAmt:function(t){return this.set(s.UNIT_COMMISSION_BASIS_AMOUNT,t)},getUnitFeeAmount:function(){return this.get(s.UNIT_FEE_AMOUNT)},setUnitFeeAmount:function(t){return this.set(s.UNIT_FEE_AMOUNT,t)},getUnitNetAmount:function(){return this.get(s.UNIT_NET_AMOUNT)},setUnitNetAmount:function(t){return this.set(s.UNIT_NET_AMOUNT,t)},getUnitTaxesAmount:function(){return this.get(s.UNIT_TAXES_AMOUNT)},setUnitTaxesAmount:function(t){return this.set(s.UNIT_TAXES_AMOUNT,t)},getQuantity:function(){return this.get(s.QUANTITY)},setQuantity:function(t){return this.set(s.QUANTITY,t)},getUnitNetAmountNotAligned:function(){return this.get(s.UNIT_NET_AMOUNT_NOT_ALIGNED)},getTotalNetAmountNotAligned:function(){return this.get(s.TOTAL_NET_AMOUNT_NOT_ALIGNED)},getEndDate:function(){return this.get(s.END_DATE)},getLicensingScheme:function(){return this.get(s.LICENSING_SCHEME)},getLicensing:function(){return this.get(s.LICENSING)},getProductDisplayName:function(){return this.get(s.PRODUCT_DISPLAY_NAME)},getProductTrigram:function(){return this.get(s.PRODUCT_TRIGRAM)},getProductNumber:function(){return this.get(s.PRODUCT_NUMBER)},getOfferId:function(){return this.get(s.OFFER_ID)},getOfferQuantity:function(){return this.get(s.OFFER_QUANTITY)},getSkuId:function(){return this.get(s.SKU_ID)},isEduItem:function(){const t=this.getProductTrigram();return r.isEdu(t)||!!t&&t.endsWith("-AC")},isMakerItem(){const t=this.getProductTrigram();return r.isMaker(t)},isPriceDisplayable(){return!1!==this.get(s.DISPLAY_PRICE)},getExternalOfferId(){return this.get(s.EXTERNAL_OFFER_ID)},getTitle(){return this.get(s.TITLE)}});return l.STATUS=u,l.States=u,l.Fields=s,l.MAX_TOTAL_NET_AMOUNT=21474836,l.Types=a,l.RevTypes=o,l.Licensings=n.LicensingSchemes,l}),define("DS/MPFCartModel/CartFilters",[],()=>{"use strict";return Object.freeze({FILTER_BY_STATE:"state",FILTER_BY_CREATION_DATE_DAYS:"creationDateDays",FILTER_BY_CREATION_DATE_MONTHS:"creationDateMonths",FILTER_BY_MODIFICATION_DATE_DAYS:"modificationDateDays",FILTER_BY_MODIFICATION_DATE_MONTHS:"modificationDateMonths",STATE_DRAFT:"draft",STATE_PENDING_FILTER:"pending",STATE_DELIVERED_FILTER:"delivered",STATE_CANCELED_FILTER:"cancelled",STATE_ALL_FILTER:"",CLEAR:"clear",FILTER_BY_TYPE:"type",TYPE_RENEWAL:"renewal"})}),define("DS/MPFCartModel/CartDuplicateOperationItem",["UWA/Class"],function(t){"use strict";var e={SHOP_ID:"ShopID",ITEMS_OFFERS_MAPPING:"ItemsOffersMapping"};return t.extend({init:function(t){this.shopId=t.shopId,this.itemsOffersMapping=t.itemsOffersMapping||{}},toDataObject:function(){var t={};return t[e.SHOP_ID]=this.shopId,Object.keys(this.itemsOffersMapping).length>0&&(t[e.ITEMS_OFFERS_MAPPING]=t.itemsOffersMapping),Object.freeze(t)}})}),define("DS/MPFCartModel/CartPatchOperation",["UWA/Core","UWA/Class"],function(t,e){"use strict";var r,n={none:"none",add:"add",modify:"modify",remove:"remove"};return n.NONE=n.none,n.ADD=n.add,n.MODIFY=n.modify,n.REMOVE=n.remove,(r=e.extend({init:function(t,e,r){t=n.hasOwnProperty(t)?t:n.none,e||(e="/"),this.op=t,this.path=e,this.value=r},getOperation:function(){return this.op},getPath:function(){return this.path},getValue:function(){return t.clone(this.value)},toJSON:function(){return{op:this.getOperation(),path:this.getPath(),value:this.getValue()}}})).Operations=n,r}),define("DS/MPFCartModel/CartDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils"],function(t,e,r){"use strict";return e.extend({init:function(t){this._parent(t,"/mdcart/carts")},urlPatch:function(t,e){var n;return n=this._parent(t,e),e||(e={}),e.partialRefresh&&(n=new r(n).addParameter("noRefresh",e.partialRefresh).getUrl()),n}})}),define("DS/MPFCartModel/CartItemDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(t,e){"use strict";return e.extend({init:function(t,e){this._parent(t,"/mdcart/carts/{0}/cart-items")},url:function(e){var r;return r=t.String.format(this.resourcePath,e.parentResourceId),this.connector.url(r)}})}),define("DS/MPFCartModel/CartDuplicateOperationDataProxy",["UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError"],function(t,e,r){"use strict";return e.extend({init:function(t){this._parent(t,"/mdcart/carts/{0}/duplicate")},buildPath:function(e){return t.format(this.resourcePath,e.getCartId())},urlGet:r.emit,urlPut:r.emit,urlPatch:r.emit,urlDelete:r.emit,doGet:r.emit,doPut:r.emit,doPatch:r.emit,doDelete:r.emit})}),define("DS/MPFCartModel/OwnerDataProxy",["UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError"],function(t,e,r){"use strict";return e.extend({init:function(t,e){this._parent(t,"/mdcart/carts/{0}/owner",e)},buildPath:function(e){return t.format(this.resourcePath,e.id)},doPost:r.emit,doDelete:r.emit,doGet:r.emit,doPut:r.emit,urlPost:r.emit,urlDelete:r.emit,urlGet:r.emit,urlPut:r.emit})}),define("DS/MPFCartModel/CartSorts",[],function(){"use strict";var t={SORT:"sort",CREATION_DATE:"creationDate",MODIFICATION_DATE:"modificationDate",DELIVERY_DATE:"deliveryDate",SERVICE_PROVIDER:"serviceProvider",CUSTOMER:"customer",STATE:"state",desc:function(t){return"-"+t}};return Object.freeze(t)}),define("DS/MPFCartModel/PrintRequestCartItemModel",["UWA/Core","DS/MPFCartModel/CartItemModel"],function(t,e){"use strict";return e.extend({defaults:{BoundingBoxX:0,BoundingBoxY:0,BoundingBoxZ:0,Data:"",DateAnswer:null,DateDelivery:null,Format:"",MaterialCategory:"",MaterialID:"",MaterialSubCategory:"",OriginalSTLDocumentID:"",Painting:!1,Part3DPrintMPId:"",Part3DPrintName:"",Part3DPrintStatus:"",PickUp:!1,PostalDelivery:!1,Polish:!1,Process:"",STLRepairedStatus:"",ToleranceMin:0,ToleranceRate:0,Unit:"",Volume:0},setup:function(t,e){this._parent(t,e)},parse:function(t){for(var e=["Painting","PickUp","Polish","PostalDelivery"],r=["DateAnswer","DateDelivery"],n=["BoundingBoxX","BoundingBoxY","BoundingBoxZ","ToleranceMin","ToleranceRate","Volume"],i=["Data","Format","MaterialCategory","MaterialID","MaterialSubCategory","OriginalSTLDocumentID","Part3DPrintMPId","Part3DPrintName","Part3DPrintStatus","Process","STLRepairedStatus","Unit"],s={},a=Object.keys(t),o=0;o<a.length;o++)-1!==e.indexOf(a[o])?s[a[o]]="true"===t[a[o]].toLowerCase():-1!==r.indexOf(a[o])?s[a[o]]=new Date(t[a[o]])?new Date(t[a[o]]):"":-1!==n.indexOf(a[o])?s[a[o]]=parseFloat(t[a[o]])||0:-1!==i.indexOf(a[o])&&(s[a[o]]=t[a[o]]);return s},toJSON:function(t){for(var e={},r=["Painting","PickUp","Polish","PostalDelivery"],n=["DateAnswer","DateDelivery"],i=["BoundingBoxX","BoundingBoxY","BoundingBoxZ","ToleranceMin","ToleranceRate","Volume"],s=["Data","Format","MaterialCategory","MaterialID","MaterialSubCategory","OriginalSTLDocumentID","Part3DPrintMPId","Part3DPrintName","Part3DPrintStatus","Process","STLRepairedStatus","Unit"],a=Object.keys(this.omit()),o=0;o<a.length;o++){var u=a[o],l=this.get(u);-1!==r.indexOf(u)?e[r[r.indexOf(u)]]=l?"TRUE":"FALSE":-1!==n.indexOf(u)?(e[n[n.indexOf(u)]]=""!==l?l.toLocaleDateString("en-US").replace(/[^ -~]/g,""):l,!l||0===l.getHours()&&0===l.getMinutes()&&0===l.getSeconds()&&0===l.getMilliseconds()||(e[n[n.indexOf(u)]]+=" "+l.toLocaleTimeString("en-US").replace(/[^ -~]/g,""))):-1!==i.indexOf(u)?e[i[i.indexOf(u)]]=l.toString():-1!==s.indexOf(u)?e[s[s.indexOf(u)]]=l:e[u]=l}return e}})}),define("DS/MPFCartModel/DeliveryServiceRequestCartItemModel",["UWA/Core","DS/MPFCartModel/CartItemModel"],function(t,e){"use strict";return e.extend({defaults:{DeliveryServiceName:""},setup:function(t,e){this._parent(t,e)},parse:function(t){for(var e=["DeliveryServiceName"],r={},n=Object.keys(t),i=0;i<n.length;i++)-1!==e.indexOf(n[i])&&(r[n[i]]=t[n[i]]);return r},toJSON:function(t){for(var e={},r=["DeliveryServiceName"],n=Object.keys(this.omit()),i=0;i<n.length;i++)-1!==r.indexOf(n[i])&&(e[r[r.indexOf(n[i])]]=this.get(n[i]));return e}})}),define("DS/MPFCartModel/AdditionalServiceRequestCartItemModel",["UWA/Core","DS/MPFCartModel/CartItemModel"],function(t,e){"use strict";return e.extend({defaults:{AdditionalServiceName:""},setup:function(t,e){this._parent(t,e)},parse:function(t){for(var e=["AdditionalServiceName"],r={},n=Object.keys(t),i=0;i<n.length;i++)-1!==e.indexOf(n[i])&&(r[n[i]]=t[n[i]]);return r},toJSON:function(t){for(var e={},r=["AdditionalServiceName"],n=Object.keys(this.omit()),i=0;i<n.length;i++)-1!==r.indexOf(n[i])&&(e[r[r.indexOf(n[i])]]=this.get(n[i]));return e}})}),define("DS/MPFCartModel/CartDuplicateOperation",["UWA/Class","UWA/Promise","DS/MPFCartModel/CartDuplicateOperationItem"],function(t,e,r){"use strict";return t.extend({init:function(t){this.cartId=t.cartId,this.dataProxy=t.dataProxy,this.operationItems=[]},addShop:function(t){var e;e=new r(t),this.operationItems.push(e)},getCartId:function(){return this.cartId},toDataObject:function(){return Object.freeze({CartsData:this.operationItems.map(function(t){return t.toDataObject()})})},execute:function(){var t,r;return t=this.dataProxy.urlPost(this),r=e.deferred(),this.dataProxy.request(t,{method:"POST",data:JSON.stringify(this.toDataObject()),onComplete:function(t){return r.resolve(t)},onFailure:r.reject}),r.promise}})}),define("DS/MPFCartModel/3DPFinishRequestCartItemModel",["UWA/Core","DS/MPFCartModel/CartItemModel"],function(t,e){"use strict";return e.extend({defaults:{FinishColors:""},setup:function(t,e){this._parent(t,e)},parse:function(t){for(var e=["FinishColors"],r={},n=Object.keys(t),i=0;i<n.length;i++)-1!==e.indexOf(n[i])&&(r[n[i]]=t[n[i]]);return r},toJSON:function(t){for(var e={},r=["FinishColors"],n=Object.keys(this.omit()),i=0;i<n.length;i++)-1!==r.indexOf(n[i])&&(e[r[r.indexOf(n[i])]]=this.get(n[i]));return e}})}),define("DS/MPFCartModel/FinishRequestCartItemModel",["UWA/Core","DS/MPFCartModel/CartItemModel"],function(t,e){"use strict";return e.extend({defaults:{FinishName:"",RelatedCartItemID:""},setup:function(t,e){this._parent(t,e)},parse:function(t){for(var e=["FinishName","RelatedCartItemID"],r={},n=Object.keys(t),i=0;i<n.length;i++)-1!==e.indexOf(n[i])&&(r[n[i]]=t[n[i]]);return r},toJSON:function(t){for(var e={},r=["FinishName","RelatedCartItemID"],n=Object.keys(this.omit()),i=0;i<n.length;i++)-1!==r.indexOf(n[i])&&(e[r[r.indexOf(n[i])]]=this.get(n[i]));return e}})}),define("DS/MPFCartModel/TimelineItemModel",["UWA/Core","DS/MPFModel/MPFModel","DS/MPFCartModel/CartItemModel"],function(t,e,r){"use strict";var n={VERSION:"version",TITLE:"title",CART_CHANGES:"cart-changes",MESSAGE:"message",PHASE_NUMBER:"phaseNumber"},i={SUBMITTED:"Submitted",ACCEPTED:"Accepted",CONFIRMED:"Confirmed",CANCELLED:"Cancelled",PROCESSING:"Processing",READY:"Ready",SHIPPED:"Shipped",REJECTED:"Rejected",DELIVERED:"Delivered",PENDING_PO:"PendingPO",PO_UPLOADED:"Purchase Order Uploaded",INVOICE_UPLOADED:"InvoiceUploaded",PAYMENT_RECEIVED:"PAYMENT RECEIVED",DELIVERABLE_UPLOADED:"DeliverableUploaded",PHASES_MODIFIED:"PhasesModified",MODIFIED:"Modified",ADDED:"Added",DELETED:"Deleted"},s=e.extend({defaults:{cartChanges:{},id:"",message:{}},setup:function(t,e){this._parent(t,e),this._type="TimelineItemModel"},parse:function(t){var e={id:t.id,message:t.message,title:t.title};if(t.phaseNumber&&(e[n.PHASE_NUMBER]=t.phaseNumber),e.message.creation&&(e.message.creation=new Date(e.message.creation+" UTC")),e.message.lastModification&&(e.message.lastModification=new Date(e.message.lastModification+" UTC")),t["cart-changes"]){e.cartChanges={};for(var i=Object.keys(t["cart-changes"]),s=0;s<i.length;s++)"deleted-items"===i[s]?e.cartChanges.deletedItems=t["cart-changes"]["deleted-items"]:"updated-fields"===i[s]?e.cartChanges.updatedFields=t["cart-changes"]["updated-fields"]:"version"===i[s]?e.cartChanges.version=t["cart-changes"].version:"object"==typeof t["cart-changes"][i[s]]&&(e.cartChanges[i[s]]=new r(null,{dataProxy:{}}).parse(t["cart-changes"][i[s]]))}return e},toJSON:function(t){var e={id:this.get("id"),message:this.getMessage(),title:this.getTitle()};if(this.get("message").creation&&(e.message.creation=this.get("message").creation),this.get("message").lastModification&&(e.message.lastModification=this.get("message").lastModification),this.get("cartChanges")){e["cart-changes"]={};for(var n=Object.keys(this.get("cartChanges")),i=0;i<n.length;i++)"deletedItems"===n[i]?e["cart-changes"]["deleted-items"]=this.get("cartChanges").deletedItems:"updatedFields"===n[i]?e["cart-changes"]["updated-fields"]=this.get("cartChanges").updatedFields:"version"===n[i]?e["cart-changes"].version=this.get("cartChanges").version:"object"==typeof this.get("cartChanges")[n[i]]&&(e["cart-changes"][n[i]]=new r(this.get("cartChanges")[n[i]],{dataProxy:{}}).toJSON())}return e},getID:function(){return this.get("id")},setID:function(t){return this.set("id",t)},getCartChange:function(t){return this.get(n.CART_CHANGES)[t]},setCartChange:function(t){return this.get(n.CART_CHANGES)[t.id]=t,this.get(n.CART_CHANGES)[t.id]},getMessage:function(){return this.get(n.MESSAGE)},setMessage:function(t){return this.set(n.MESSAGE,t)},getTitle:function(){return this.get(n.TITLE)},setTitle:function(t){return this.set(n.TITLE,t)},getPhaseNumber:function(){return this.get(n.PHASE_NUMBER)}});return s.Fields=Object.freeze(n),s.Titles=Object.freeze(i),s}),define("DS/MPFCartModel/CartPatchArray",["UWA/Class","DS/MPFCartModel/CartPatchOperation"],function(t,e){"use strict";return t.extend({init:function(){this._parent(),this.operations=[]},add:function(t){t&&"function"==typeof t.getOperation&&t.getOperation()!==e.Operations.none&&this.operations.push(t)},addAll:function(t){var e,r;for(e=t.length,r=0;r<e;r++)this.add(t[r])},getOperations:function(){return this.operations.slice()},length:function(){return this.operations.length},toJSON:function(){return{patchArray:this.getOperations()}}})}),define("DS/MPFCartModel/CartModel",["UWA/Core","UWA/Promise","DS/MPFModel/MPFModel","DS/MPFAddressModel/AddressModel","DS/MPFCartModel/CartItemModel","DS/MPFCartModel/TimelineItemModel","DS/MPFCartModel/CartPatchArray","DS/MPFCartModel/CartPatchOperation","DS/MPFUtils/MPFUtils","DS/MPFError/BadArgumentError"],(t,e,r,n,i,s,a,o,u,l)=>{"use strict";const d=Object.freeze({cancelled:"CANCELLED",delivered:"DELIVERED",draft:"DRAFT",paymentAccepted:"PAYMENT_ACCEPTED",paymentComplete:"PAYMENT_COMPLETE",paymentInitiated:"PAYMENT_INITIATED",paymentRefused:"PAYMENT_REFUSED",pendingPayment:"PENDING_PAYMENT",processing:"PROCESSING",submitted:"SUBMITTED",submited:"SUBMITTED",failed:"FAILED",blocked:"BLOCKED",expired:"EXPIRED"}),c=Object.freeze({NAME:"name",SHOP_NAME:"shopName",SHOP_ID:"shopId",PURCHASE_ORDER_NUMBER:"PurchaseOrderNumber",EXPENSE_FINANCIAL_LINE:"FinancialLine",OWNER_ID:"OwnerId",COMPANY_ID:"companyID",PURCHASE_ORDER_ID:"PoID",PAYMENT_METHOD:"PaymentMethod",STATE:"currentState",BLOCKED:"Blocked",BUYER_INVOICE_DOCUMENT_PID:"BuyerInvoiceDocumentPid",IS_PAYMENT_COMPLETE:"IsPaymentComplete",BUYER_INVOICE_NUMBER:"BuyerInvoiceNum",PAYMENT_URL:"PaymentUrl",CURRENCY:"currency",CURRENCY_DECIMALS:"currencyDecimals",ONLINE_INSTANCE:"onlineInstance",LICENSING_SCHEME:"licensingScheme",IS_DIRECT_PURCHASE:"IsDirectPurchase",LAST_UPDATE:"Modified",CREATED:"created",GLOBAL_STATE:"GlobalState",DELIVERY_DATE:"DateDelivery",OWNER_DATA:"OwnerData",CONTRACT_DOCUMENTS:"contract-documents",NET_AMOUNT_TOTAL:"NetAmountTotal",PRICE_MAXIMUM:"maximumPrice",PRICE_MINIMUM:"minimumPrice",MULTI_BIDDING_ID:"multibiddingId",GROSS_AMOUNT_TOTAL:"GrossAmountTotal",TAXES_AMOUNT_TOTAL:"TaxesAmountTotal",MINIMUM_ORDER_COST:"minimumOrderCostValue",CART_ITEMS:"items",ACTION_TYPE:"actionType",INVOICE_ID:"invoiceId",PAYMENT_INTENT_SECRET:"PaymentIntentSecret",QUOTE:"Quote",TENDER_ID:"TenderId",DEADLINE_DATE:"DeadlineDate",NUMBER_SELLERS:"NumberOfSellers",BILL_TO:"BillTo",SHIP_TO:"ShipTo",COUPON:"coupon",LEGAL_ENTITY_ID:"legalEntityId",LICENSOR_ID:"licensorId"}),T=Object.freeze({BANK_CARD:"CC",DEFERRED_BANK_TRANSFER:"DBT"}),E=Object.freeze({SOFTWARE_REQUEST:"MP_SoftwareRequest"}),I=Object.freeze({CANCELLED:"CANCELLED",DELIVERED:"DELIVERED",DRAFT:"DRAFT",SAVED_DRAFT:"SAVED_DRAFT",PAYMENT_ACCEPTED:"PAYMENT_ACCEPTED",PAYMENT_COMPLETE:"PAYMENT_COMPLETE",PAYMENT_INITIATED:"PAYMENT_INITIATED",PAYMENT_REFUSED:"PAYMENT_REFUSED",PENDING_PAYMENT:"PENDING_PAYMENT",PROCESSING:"PROCESSING",SUBMITTED:"SUBMITTED",FAILED:"FAILED",BLOCKED:"BLOCKED",EXPIRED:"EXPIRED",PROCESSED:"PROCESSED",FINISHED:"FINISHED"}),m=Object.freeze({CART_ITEMS:"cart-items"}),M=Object.freeze({RENEWAL:"renewal",START:"start"}),h=Object.freeze({CANCELLED:"CANCELLED",SUBMITTED:"SUBMITTED",WAITING_PAYMENT:"WAITING_PAYMENT",PROCESSING_PAYMENT:"PROCESSING_PAYMENT",PAID:"PAID",PROCESSING:"PROCESSING",READY:"READY",SHIPPED:"SHIPPED",DELIVERED:"DELIVERED"}),D=r.extend({defaults:{created:"",currency:"",currentState:"",items:null,timelineItems:null,name:"",shopID:"",shopName:"",PurchaseOrderNumber:"",OwnerId:""},setup(t,e){this._parent(t,e),this._type="CartModel",this.getItems()||this.setItems([]),this.getTimelineItems()||this.setTimelineItems([])},clone(){const t=this._parent();if(this.has("items")){t.set("items",[]);for(let e=0;e<this.get("items").length;e++)t.get("items").push(this.get("items")[e].clone())}if(this.has("timelineItems")){t.set("timelineItems",[]);for(let e=0;e<this.get("timelineItems").length;e++)t.get("timelineItems").push(this.get("timelineItems")[e].clone())}return t},parse(t){let e;if(u.isEmpty(t))e=this.omit();else if(t.hasOwnProperty(this.id))e=this.omit(),t=t[this.id];else{e=this._parent(t),u.objectChangeKey(e,"Created","created"),u.objectChangeKey(e,"Currency","currency"),u.objectChangeKey(e,"owner","Owner"),e.shopName||(e.shopName=e.ShopName),e.NetAmountTotal=e.NetAmountTotal&&parseFloat(e.NetAmountTotal),e.GrossAmountTotal=e.GrossAmountTotal&&parseFloat(e.GrossAmountTotal),e.FeeAmountTotal=e.FeeAmountTotal&&parseFloat(e.FeeAmountTotal),e.TaxesAmountTotal=e.TaxesAmountTotal&&parseFloat(e.TaxesAmountTotal),e[c.PRICE_MINIMUM]=e[c.PRICE_MINIMUM]&&parseFloat(e[c.PRICE_MINIMUM]),e[c.PRICE_MAXIMUM]=e[c.PRICE_MAXIMUM]&&parseFloat(e[c.PRICE_MAXIMUM]);const r=e.BillTo;r&&"object"==typeof r&&(this.billingAddress=new n(null,{dataProxy:"notNeeded"}),this.billingAddress.set(r),e.BillTo=r.id);const i=e.ShipTo;i&&"object"==typeof i&&(this.shippingAddress=new n(null,{dataProxy:"notNeeded"}),this.shippingAddress.set(i),e.ShipTo=i.id),e.Items&&(e.items=this.parseItems(e.Items),delete e.Items),e.timelineItems&&(e.timelineItems=this.parseTimelineItems(e.timelineItems)),e.CompanyID&&u.objectChangeKey(e,"CompanyID",c.COMPANY_ID),e.PersonID&&u.objectChangeKey(e,"PersonID","personID"),e.IsTest=!0===e.IsTest||"TRUE"===e.IsTest}return e},parseItems(e){let r=[];const n=t.is(e,"array")&&e.length>0;return n&&"string"==typeof e[0]?r=e:n&&"object"==typeof e[0]&&(r=e.map(t=>new i(t,{dataProxy:this.dataProxy,parse:!0}),this)),r},parseTimelineItems(e){let r=[];const n=t.is(e,"array")&&e.length>0;return n&&"string"==typeof e[0]?r=e:n&&"object"==typeof e[0]&&(r=e.map(t=>new s(t,{dataProxy:this.dataProxy,parse:!0}),this)),r},toJSON(){const t=this._parent();delete t.originalCart,delete t.Annotations,delete t.UserAllowedViews,t.Created=t.created,delete t.created,t.Currency=t.currency,delete t.currency,t.Items=[],t.timelineItems=[];const e=this.get("items");for(let r=0;r<e.length;r++)"object"==typeof e[r]?t.Items.push(e[r].toJSON()):t.Items.push(e[r]);delete t.items;const r=this.get("timelineItems");for(let e=0;e<r.length;e++)"object"==typeof r[e]?t.timelineItems.push(r[e].toJSON()):t.timelineItems.push(r[e]);return this.billingAddress&&(t.BillTo=this.billingAddress.toJSON()),this.shippingAddress&&(t.ShipTo=this.shippingAddress.toJSON()),this.get("onlineInstance")&&(t.OnlineInstance=this.get("onlineInstance")),t},getCartItems(t){const e=this.get("items")||[],r=[];return e.forEach(e=>{e.get("type")===t&&r.push(e)}),r},getCartItem(t){return this.get("items").filter(e=>e.get("id")===t).shift()},savePromise(e,r,n){let i;const s=!t.is(e)||"object"===t.typeOf(e);if(s&&(n=r),!0===(n=n||{}).patch){let t;s?t=e:(t={})[e]=r;const n=new o(o.Operations.modify,"/",t),u=new a;u.add(n),i=this.megaPatch(u)}else i=this._parent(e,r,n);return i},megaPatch(t,e={}){const r=this.dataProxy.url(this);return this.dataProxy.requestPromise(r,{method:"PATCH",data:JSON.stringify(t.toJSON())}).then(t=>{!1!==e.parse&&(this.set(this.parse(t)),this.dispatchEvent("onSync",[this,t,e]))})},updateState(t){let r;const n=I[t];if(n){const t=new o(o.Operations.modify,"/",{currentState:n}),e=new a;e.add(t),r=this.megaPatch(e)}else r=e.reject(new l("Invalid state for cart : "+n));return r},getName(){return this.get(c.NAME)},setName(t){return this.set(c.NAME,t)},getCurrency(){return this.get(c.CURRENCY)},setCurrency(t){return this.set(c.CURRENCY,t)},getCurrencyDecimals(){return this.get(c.CURRENCY_DECIMALS)},setCurrencyDecimals(t){return this.set(c.CURRENCY_DECIMALS,t)},getBillingAddress(){return this.billingAddress},setBillingAddress(t){this.billingAddress=t},getShippingAddress(){return this.shippingAddress||this.get("shippingAddress")},setShippingAddress(t){this.shippingAddress=t},getPaymentUrl(){return this.get(c.PAYMENT_URL)},setPaymentUrl(t){return this.set(c.PAYMENT_URL,t)},getPaymentMethod(){return this.get(c.PAYMENT_METHOD)},setPaymentMethod(t){return this.set(c.PAYMENT_METHOD,t)},getState(){return this.get(c.STATE)},setState(t){return this.set(c.STATE,t)},getItems(){return this.get(c.CART_ITEMS)},setItems(t){return this.set(c.CART_ITEMS,t)},getShopId(){return this.get("shopID")||this.get("ShopID")},getShopID(){return this.getShopId()},setShopId(t){return this.set("shopID",t)},getShopName(){return this.get(c.SHOP_NAME)},setShopName(t){return this.set(c.SHOP_NAME,t)},getPurchaseOrderNumber(){return this.get("PurchaseOrderNumber")},setPurchaseOrderNumber(t){return this.set("PurchaseOrderNumber",t)},getCompanyID(){return this.get(c.COMPANY_ID)},getPersonID(){return this.get("personID")},getOwnerId(){return this.get("OwnerId")},setOwnerId(t){return this.set("OwnerId",t)},getTimelineItems(){return this.get("timelineItems")},setTimelineItems(t){return this.set("timelineItems",t)},getPurchaseOrderId(){return this.get(c.PURCHASE_ORDER_ID)},setPurchaseOrderId(t){return this.set(c.PURCHASE_ORDER_ID,t)},getExpenseFinancialLine(){return this.get(c.EXPENSE_FINANCIAL_LINE)},setExpenseFinancialLine(t){return this.set(c.EXPENSE_FINANCIAL_LINE,t)},getBuyerInvoiceDocumentPid(){return this.get(c.BUYER_INVOICE_DOCUMENT_PID)},setBuyerInvoiceDocumentPid(t){return this.set(c.BUYER_INVOICE_DOCUMENT_PID,t)},isPaymentComplete(){return"TRUE"===this.get(c.IS_PAYMENT_COMPLETE)},setPaymentComplete(t){return this.set(c.IS_PAYMENT_COMPLETE,t)},getBuyerInvoiceNumber(){return this.get(c.BUYER_INVOICE_NUMBER)},isBlocked(){return"TRUE"===this.get(c.BLOCKED)},getOnlineInstance(){return this.get(c.ONLINE_INSTANCE)},getLicensingScheme(){return this.get(c.LICENSING_SCHEME)},isDirectPurchase(){return"TRUE"===this.get(c.IS_DIRECT_PURCHASE)},getLastUpdate(){return this.get(c.LAST_UPDATE)},getCreated(){return this.get(c.CREATED)},getGlobalState(){return this.get(c.GLOBAL_STATE)},getDeliveryDate(){return this.get(c.DELIVERY_DATE)},getOwnerData(){return this.get(c.OWNER_DATA)},getContractDocuments(){return this.get(c.CONTRACT_DOCUMENTS)},getNetAmountTotal(){return this.get(c.NET_AMOUNT_TOTAL)},getGrossAmountTotal(){return this.get(c.GROSS_AMOUNT_TOTAL)},getTaxesAmountTotal(){return this.get(c.TAXES_AMOUNT_TOTAL)},getMultiBiddingId(){return this.get(c.MULTI_BIDDING_ID)},setMultiBiddingId(t){return this.set(c.MULTI_BIDDING_ID,t)},getMinOrderCost(){return this.get(c.MINIMUM_ORDER_COST)},setMinOrderCost(t){return this.set(c.MINIMUM_ORDER_COST,t)},getActionType(){return this.get(c.ACTION_TYPE)},getInvoiceId(){return this.get(c.INVOICE_ID)},getPaymentIntentSecret(){return this.get(c.PAYMENT_INTENT_SECRET)},getQuote(){return this.get(c.QUOTE)},hasPrice(){return(this.get(c.PRICE_MAXIMUM)>=0||this.get(c.PRICE_MINIMUM>=0))&&this.get(c.NET_AMOUNT_TOTAL)>=0},isTender(){return!!this.get(c.TENDER_ID)||!!this.get(c.NUMBER_SELLERS)&&!!this.get(c.DEADLINE_DATE)},isTenderResponse(){return this.isTender()&&!this.getDeadlineDate()},getTenderId(){return this.get(c.TENDER_ID)},getDeadlineDate(){return this.get(c.DEADLINE_DATE)},getNumberSellers(){return this.get(c.NUMBER_SELLERS)},getCoupon(){return this.get(D.Fields.COUPON)},getLegalEntityId(){return this.get(D.Fields.LEGAL_ENTITY_ID)},getLicensorId(){return this.get(D.Fields.LICENSOR_ID)},hasEduItems(){const t=this.getItems();for(let e=0;e<t.length;e++)if(t[e].isEduItem())return!0;return!1},hasMakerItems(){const t=this.getItems();for(let e=0;e<t.length;e++)if(t[e].isMakerItem())return!0;return!1},getItemsLicenseScheme(){let t;const e=this.getItems().filter(t=>t.getType()===i.Types.SOFTWARE_REQUEST);return e.length>0&&(t=e[0].getLicensingScheme()),t},getItemsOfferIds(){return this.getItems().filter(t=>t.getOfferId()).reduce((t,e)=>{const r=e.getOfferId();return t.includes(r)||t.push(r),t},[]).join(",")},getProductsAsString(){return this.getItems().filter(t=>t.getType()===i.Types.SOFTWARE_REQUEST).reduce((t,e)=>0===t.length?e.get("ProductTrigram"):`${t}, ${e.get("ProductTrigram")}`,"")}});return D.STATUS=d,D.States=I,D.Fields=c,D.PaymentMethods=T,D.Types=E,D.Expands=m,D.ActionTypes=M,D.GlobalStates=h,D.LOCAL_STORAGE_KEY="mpCart",D.LOCAL_STORAGE_KEY_COUNTRY="mpCartCountry",D}),define("DS/MPFCartModel/LicensingSchemeMapping",["DS/MPFCartModel/CartModel"],function(t){"use strict";var e={getLicensingLabel:function(t){return"ADD"===t?"Add-On":"CAS"===t?"Casual Named User":"CB"===t?"Credit Based":"CON"===t?"Concurrent":"MAB"===t?"Machine Based":"NA"===t?"Not Applicable":"NAM"===t?"Named User":"PCK"===t?"Packaged Offering":"PUB"===t?"Publishing":"SVC"===t?"Service":"SYS"===t?"System":"TBC"===t?"To be completed":"TOC"===t?'Token Based "Credit"':"TOK"===t?"Token Based":""}};return e}),define("DS/MPFCartModel/CartModelHelper",["UWA/Core","DS/MPFCartModel/CartModel","DS/MPFCartModel/CartItemModel","DS/MPFCartModel/CartPatchArray","DS/MPFCartModel/CartPatchOperation","DS/MPFTracker/Dimension","DS/MPFTracker/Value","DS/MPFTracker/CloudType","i18n!DS/MPFCartModel/assets/nls/CartModel"],function(t,e,r,n,i,s,a,o,u){"use strict";const l={isWaitingForPurchaseOrder(e,r){const n="buyer"===r,i=t.is(e.getPurchaseOrderId());return n&&!i&&e.isBlocked()},isWaitingForInvoice(t,e){const n="seller"===e,i=!!t.getBuyerInvoiceNumber(),s=t.getItems().filter(function(t){const e=t.getState(),n=e===r.STATUS.shipped,i=e===r.STATUS.ready,s=e===r.STATUS.delivered;return n||i||s}).length>0;return n&&!i&&s},isWaitingForProceedToPayement(t,e){const r="buyer"===e,n=!!t.getBuyerInvoiceNumber();return r&&n&&!t.isPaymentComplete()},isConfirmed:t=>t.getItems().filter(function(t){const e=t.getState(),n=e===r.STATUS.shipped,i=e===r.STATUS.ready,s=e===r.STATUS.delivered;return n||i||s}).length>0,getElapsedTime(t){const e=new Date(t),r=new Date,n=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds());return l.getTimeDifference(n,e)},getRemainingTime(t){const e=new Date(t),r=new Date,n=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds());return l.getTimeDifference(e,n)},getTimeDifference(t,e){let r;const n=Math.floor((new Date(t)-new Date(e))/1e3);function i(t,e,i){if(!r){const s=n/t;if(s>1){const t=Math.round(s);r=t+" "+(t>1?i:e)}}}if(i(31536e3,u.get("year"),u.get("years")),i(2592e3,u.get("month"),u.get("months")),!r){if(n/86400>1){const n=l.getNumberDays(t,e);r=n+" "+(n>1?u.get("days"):u.get("day"))}}return i(3600,u.get("hour"),u.get("hours")),i(60,u.get("minute"),u.get("minutes")),r||u.get("fewSeconds")},getNumberDays(t,e){const r=Math.floor(new Date(t)-new Date(e))/864e5,n=r-Math.floor(r),i=(new Date(e).setHours(24,0,0,0)-new Date(e))/864e5;function s(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}return s(n,12)>s(i,12)?Math.ceil(r):Math.floor(r)},isPaidByDirectPurchase(t,n){const i=t.getState(),s=n.first().getState(),a=i===e.States.PENDING_PAYMENT,o=i===e.States.PAYMENT_INITIATED,u=i===e.States.PAYMENT_COMPLETE,l=i===e.States.PAYMENT_REFUSED,d=s===r.STATUS.submitted;return(a||o||u||l)&&d},getCurrencySymbol(e,r={}){r.locale||(r.locale="fr-FR");const n=e.getCurrency();let i;return t.is(n,"string")?""===n?n:(""===(i=(0).toLocaleString(r.locale,{style:"currency",currency:n}).replace(/[\w\s,.]/g,""))&&(i=(0).toLocaleString(r.locale,{style:"currency",currency:n}).replace(/[\d\s,.]/g,"")),i):"-"},formatPrice(e,r,n={}){n.locale||(n.locale="fr-FR");const i=e.getCurrency();let s;return t.is(r,"number")||(r=e.getNetAmountTotal()),t.is(i,"string")&&i.length>0?(s={style:"currency",currency:i},!0===n.noSymbol&&(s.currencyDisplay="code"),r=r.toLocaleString(n.locale,s)):(s={style:"decimal",maximumFractionDigits:2,minimumFractionDigits:2},r=r.toLocaleString(n.locale,s),r+=!0===n.noSymbol?" ":" -"),""!==r.replace(/[A-Za-z0-9.,\s]/g,"")||n.noSymbol?r.replace(/[A-Za-z]/g,""):r},removeAllCartItems(t){const e=new n;return t.getItems().forEach(function(t){e.add(new i(i.Operations.REMOVE,"/cart-items/"+t.id))}),t.megaPatch(e)},getCartCloudType(t){let e;return e=t.hasMakerItems()?o.MAKERS:t.hasEduItems()?o.EDU:o.OTHER},addTrackerInformation(t,e){const r=this.getCartCloudType(e);t.addDimension(s.ORDER_ID,e.getName()).addDimension(s.BUYER_ID,e.getOwnerId()).addDimension(s.SHOP_ID,e.getShopId()).addDimension(s.CURRENCY,e.getCurrency()).addDimension(s.ROLES,e.getProductsAsString()).addDimension(s.CLOUD_TYPE,r).addDimension(s.LICENSING_SCHEME,e.getItemsLicenseScheme()).addDimension(s.OFFER_IDS,e.getItemsOfferIds()).addPersonalValue(a.TOTAL_NET_AMOUNT,e.getNetAmountTotal()).addPersonalValue(a.TOTAL_TAX_AMOUNT,e.getTaxesAmountTotal())}};return l}),define("DS/MPFCartModel/TimelineItemCollection",["DS/MPFModel/MPFCollection","DS/MPFCartModel/TimelineItemModel"],function(t,e){"use strict";return t.extend({model:e})}),define("DS/MPFCartModel/TimelineItemFactory",["DS/MPFModelFactory/Factory","DS/MPFCartModel/TimelineItemModel","DS/MPFCartModel/TimelineItemCollection","DS/MPFCartModel/CartTimelineItemDataProxy","DS/MPFError/NotImplementedError"],function(t,e,r,n,i){"use strict";var s={TIMELINE_ITEM:"TimelineItem"},a=t.extend({createModel:function(t,r){var n=s.TIMELINE_ITEM;return r||(r={}),this._parent(e,n,t,r)},createCollection:function(t,e){var n=s.TIMELINE_ITEM;return e||(e={}),this._parent(r,n,t,e)},getDataProxy:function(){return this.dataProxies[s.TIMELINE_ITEM]||(this.dataProxies[s.TIMELINE_ITEM]=new n(this.connector)),this.dataProxies[s.TIMELINE_ITEM]}});return a.Types=s,a}),define("DS/MPFCartModel/CartCollection",["UWA/Core","DS/MPFModel/MPFCollection","DS/MPFCartModel/CartModel"],(t,e,r)=>{"use strict";return e.extend({model:r,parse(e){let r;const n="object"===t.typeOf(e),i=n&&e.numberOfCarts,s=n&&e.carts;return n&&i&&s?(this.totalModelCount=e.numberOfCarts,this.all=e.all,this.draft=e.draft,this.pending=e.pending,this.cancelled=e.cancelled,this.delivered=e.delivered,r=e.carts):r=e,r}})}),define("DS/MPFCartModel/CartItemCollection",["DS/MPFModel/MPFCollection","DS/MPFCartModel/CartItemModel"],function(t,e){"use strict";return t.extend({model:e})}),define("DS/MPFCartModel/CartItemFactory",["DS/MPFModelFactory/Factory","DS/MPFCartModel/CartItemModel","DS/MPFCartModel/CartItemCollection","DS/MPFCartModel/CartItemDataProxy"],function(t,e,r,n){"use strict";var i,s={CART_CART_ITEM:"cartCartItem"};return(i=t.extend({createModel:function(t,r,n){var i;return n||(n={}),i=n.customModelClass||e,this._parent(i,t,r,n)},createCollection:function(t,e,n){var i;return n||(n={}),i=n.customCollectionClass||r,this._parent(i,t,e,n)},getDataProxy:function(){return this.dataProxies.cartItem||(this.dataProxies.cartItem=new n(this.connector)),this.dataProxies.cartItem}})).Types=Object.freeze(s),i}),define("DS/MPFCartModel/MeSellerCartV2DataProxy",["UWA/Core","UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils","DS/MPFCartModel/CartFilters","DS/MPFCartModel/CartSorts","DS/MPFModel/CollectionFetchOptions","DS/MPFError/NotImplementedError"],function(t,e,r,n,i,s,a,o){"use strict";return r.extend({init:function(t){this._parent(t,"/me/shops/{0}/seller-cartsV2")},buildPath:function(t){return e.format(this.resourcePath,t.parentResourceId)},urlGet:function(e,r){var o,u;return r||(r={}),o=this._parent(e,r),u=new n(o),this._addParamToUrlIfOptionKeySet(u,r,i.FILTER_BY_STATE),this._addParamToUrlIfOptionKeySet(u,r,i.FILTER_BY_CREATION_DATE_DAYS),this._addParamToUrlIfOptionKeySet(u,r,i.FILTER_BY_CREATION_DATE_MONTHS),this._addParamToUrlIfOptionKeySet(u,r,i.FILTER_BY_MODIFICATION_DATE_DAYS),this._addParamToUrlIfOptionKeySet(u,r,i.FILTER_BY_MODIFICATION_DATE_MONTHS),this._addParamToUrlIfOptionKeySet(u,r,s.SORT),t.is(r[a.START])&&t.is(r[a.SIZE])&&u.addParameter(a.START,r[a.START]).addParameter(a.SIZE,r[a.SIZE]),this._addParamToUrlIfOptionKeySet(u,r,a.SEARCH),u.getUrl()},_addParamToUrlIfOptionKeySet:function(e,r,n){var i;i=r[n],t.is(i)&&""!==i&&e.addParameter(n,i)},urlPatch:o.emit,urlPut:o.emit,urlDelete:o.emit,urlPost:o.emit,doPatch:o.emit,doPut:o.emit,doDelete:o.emit,doPost:o.emit})}),define("DS/MPFCartModel/MeCartV2DataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils","DS/MPFCartModel/CartFilters","DS/MPFCartModel/CartSorts","DS/MPFModel/CollectionFetchOptions","DS/MPFError/NotImplementedError"],(t,e,r,n,i,s,a)=>{"use strict";return e.extend({init(t){this._parent(t,"/me/cartsV2")},urlGet(e,a={}){const o=this._parent(e,a),u=new r(o);return this._addParamToUrlIfOptionKeySet(u,a,n.FILTER_BY_STATE),this._addParamToUrlIfOptionKeySet(u,a,n.FILTER_BY_CREATION_DATE_DAYS),this._addParamToUrlIfOptionKeySet(u,a,n.FILTER_BY_CREATION_DATE_MONTHS),this._addParamToUrlIfOptionKeySet(u,a,n.FILTER_BY_MODIFICATION_DATE_DAYS),this._addParamToUrlIfOptionKeySet(u,a,n.FILTER_BY_MODIFICATION_DATE_MONTHS),this._addParamToUrlIfOptionKeySet(u,a,n.FILTER_BY_TYPE),this._addParamToUrlIfOptionKeySet(u,a,i.SORT),t.is(a[s.START])&&t.is(a[s.SIZE])&&u.addParameter(s.START,a[s.START]).addParameter(s.SIZE,a[s.SIZE]),this._addParamToUrlIfOptionKeySet(u,a,s.SEARCH),this._addParamToUrlIfOptionKeySet(u,a,s.COMPANY),this._addParamToUrlIfOptionKeySet(u,a,s.ONLINEINSTANCE),u.getUrl()},_addParamToUrlIfOptionKeySet(e,r,n){const i=r[n];t.is(i)&&""!==i&&e.addParameter(n,i)},urlPatch:a.emit,urlPut:a.emit,urlDelete:a.emit,urlPost:a.emit,doPatch:a.emit,doPut:a.emit,doDelete:a.emit,doPost:a.emit})}),define("DS/MPFCartModel/CartFactory",["DS/MPFModelFactory/Factory","DS/MPFCartModel/CartModel","DS/MPFCartModel/CartCollection","DS/MPFCartModel/CartDataProxy","DS/MPFCartModel/MeCartDataProxy","DS/MPFCartModel/CartDataProxyv2","DS/MPFCartModel/MeSellerCartV2DataProxy","DS/MPFCartModel/MeCartV2DataProxy","DS/MPFCartModel/OwnerDataProxy"],(t,e,r,n,i,s,a,o,u)=>{"use strict";const l=Object.freeze({CART:"CART",ME:"ME",ME_V2:"ME_V2",CARTV2:"CARTV2",SELLER_CARTV2:"SELLER_CARTV2",OWNER:"OWNER"}),d=t.extend({createModel(t,r,n={}){const i=n.customModelClass||e;return this._parent(i,t,r,n)},createCollection(t,e,n={}){const i=n.customCollectionClass||r;return this._parent(i,t,e,n)},getDataProxy(t){let e;return(t=t&&t.toUpperCase())===l.CART?(this.dataProxies.cart||(this.dataProxies.cart=new n(this.connector)),e=this.dataProxies.cart):t===l.ME?(this.dataProxies.me||(this.dataProxies.me=new i(this.connector,this.getDataProxy(l.CART))),e=this.dataProxies.me):t===l.CARTV2?(this.dataProxies.cartv2||(this.dataProxies.cartv2=new s(this.connector,this.getDataProxy(l.CART))),e=this.dataProxies.cartv2):t===l.SELLER_CARTV2?(this.dataProxies.sellerCartv2||(this.dataProxies.sellerCartv2=new a(this.connector)),e=this.dataProxies.sellerCartv2):t===l.ME_V2?(this.dataProxies.meV2||(this.dataProxies.meV2=new o(this.connector)),e=this.dataProxies.meV2):t===l.OWNER&&(this.dataProxies.owner||(this.dataProxies.owner=new u(this.connector)),e=this.dataProxies.owner),e}});return d.Types=l,d});