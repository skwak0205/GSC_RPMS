define("DS/XAppUXComponents/XAppWelcomeScreenIntegrator",["UWA/Core","DS/XAppServices/XAppWelcomeScreenServices","DS/XAppServices/XAppTrackers","i18n!DS/XAppUXComponents/assets/nls/XAppWelcomeScreenIntegrator","css!DS/XAppUXComponents/assets/css/XAppWelcomeScreenIntegrator"],function(t,e,i,n){"use strict";var o=function(t){this.options=t,this._lastTaskProgressBarStepTime=0};return o.prototype.initialize=function(){let t=this.getExecutionContext();if(t){let n=t.getComponent(WAfrStandardComponentKey.ModelEvents);n&&(this._onWelcomeScreenReadyEventToken=e.callWhenWelcomeScreenViewIsReady(t,this._addAppSwitchButton.bind(this)),this._onButtonClickedEventToken=n.subscribe({event:"EVT_WelcomeScreenButtonClicked"},this._onSidePanelButtonClick.bind(this)),this._onLinkClickedEventToken=n.subscribe({event:"EVT_WelcomeScreenLinkClicked"},this._onSidePanelLinkClick.bind(this)),this._onFileDroppedEventToken=n.subscribe({event:"EVT_WelcomeScreenFileDropped"},function(e){let n=!(!e||!e.isDropOK)&&!!e.isDropOk;i.trackLandingPageOnDrop(t,{isDropOk:String(n)})}),this._onGuidedTourClickedEventToken=n.subscribe({event:"EVT_WelcomeScreenGuidedTourClicked"},function(){i.trackLandingPageAppOverviewClick(t)}),this._onTaskProgressBarCompleteStepEventToken=n.subscribe({event:"XApp/WelcomeScreen/TaskProgressBarCompleteStep"},this._onTaskProgressBarCompleteStep.bind(this)),this._onTaskProgressBarCloseEventToken=n.subscribe({event:"XApp/WelcomeScreen/TaskProgressBarClose"},this._onTaskProgressBarClose.bind(this)))}},o.prototype.destroy=function(){this.clean()},o.prototype.clean=function(){delete this.options,this._lastTaskProgressBarStepTime=0;let t=this.getExecutionContext();if(t){let e=t.getComponent(WAfrStandardComponentKey.ModelEvents);if(e){let t=[this._onWelcomeScreenReadyEventToken,this._onViewReadyEventToken,this._onButtonClickedEventToken,this._onLinkClickedEventToken,this._onFileDroppedEventToken,this._onGuidedTourClickedEventToken,this._onTaskProgressBarCompleteStepEventToken,this._onTaskProgressBarCloseEventToken];for(let i=0;i<t.length;++i)e.unsubscribe(t[i])}}},o.prototype.callWhenViewIsReady=function(t){let i=this.getExecutionContext();return e.callWhenWelcomeScreenViewIsReady(i,t)},o.prototype._onTaskProgressBarCompleteStep=function(t){if(t&&t.progressBar){1===t.progressBar.currentStep&&(this._lastTaskProgressBarStepTime=0);let e=t.progressBar.lastStepChangeTime-this._lastTaskProgressBarStepTime;this._lastTaskProgressBarStepTime=t.progressBar.lastStepChangeTime;let n=t.progressBar.lastStepChangeTime-t.progressBar.startTime,o=e>0?Math.round(e/1e3*10,1)/10:null,s=Math.round(n/1e3*10)/10,r=t.progressBar.currentStep&&t.progressBar.currentStep===t.progressBar.totalStepCount;i.trackModelLoadingTime(this.getExecutionContext(),{fromAction:t.fromAction,progressStepNameIdentifier:t.stepName,stepDurationInSeconds:o,totalTimeInSeconds:s,isLoadingOver:r?1:0,progressStepIndex:t.progressBar.currentStep?t.progressBar.currentStep:null,progressStepsNb:t.progressBar.totalStepCount?t.progressBar.totalStepCount:null})}},o.prototype._onTaskProgressBarClose=function(t){if(t&&t.progressBar){let e=t.progressBar.startTime>0?Math.floor((Date.now()-t.progressBar.startTime)/1e3):null;i.trackModelLoadingCancelled(this.getExecutionContext(),{stepIndex:t.progressBar.currentStep,stepsNb:t.progressBar.totalStepCount,ellapsedTimeBeforeCancel:e,progressRate:Math.floor(t.progressBar.barProgressRate)})}},o.prototype._onSidePanelLinkClick=function(t){i.trackLandingPageLinkClick(this.getExecutionContext(),{linkName:t.id})},o.prototype._onSidePanelButtonClick=function(t){i.trackLandingPageActionButtonClick(this.getExecutionContext(),{buttonName:t.id})},o.prototype._addAppSwitchButton=function(){let e=document.getElementsByClassName("afr-welcome-screen-title"),o=e.length>0?e[e.length-1]:null,s=o?o.textContent:null;if(s&&this.options.appSwitchAction){let e=s.split(" "),r=e.pop(),a=e.join(" ");if(this.appSwitchButton={tag:"span",class:"xapp-appswitch-btn fonticon fonticon-chevron-down",title:n.get("SwitchAppBtn.Hover"),events:{click:function(t){let e=this.getExecutionContext();if(e){let n=e.getComponent(WAfrStandardComponentKey.HandlerComponent);n&&n.executeHandler({id:this.options.appSwitchAction,args:{fromLandingPage:!0,button:t.currentTarget}}),i.trackLandingPageAppSwitchClick(e)}}.bind(this)}},o.innerHTML="",a.length>0){new t.Element("span",{text:a+" "}).inject(o)}new t.Element("span",{html:[{tag:"span",text:r},this.appSwitchButton],styles:/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1?{display:"inline-block"}:{"white-space":"nowrap"}}).inject(o)}},o}),define("DS/XAppUXComponents/XAppDragAndDropManager",["UWA/Promise"],function(t){"use strict";var e=function(){Object.defineProperty(this,"dndOverlayTypes",{value:{forbidden:"Forbidden",overItems:"OverItems",overFullPage:"OverFullPage"},writable:!1})};return e.prototype.initalize=function(t){this.options=t,this.hideOverlayToken=void 0,this.dndItemOverlays=[],this.dndFullPageOverlay=null,this.dndForbiddenOverlay=null,void 0!==this.options.dragAndDrop&&!0!==this.options.dragAndDrop||(this._initViewerDDEventListeners(t),this.buildOverlay(t))},e.prototype.destroy=function(){this.clean()},e.prototype.buildOverlay=function(t){t&&t.overlayContainer&&t.callbacks&&(this.dndFullPageOverlay=new UWA.Element("div",{class:"xapp-dnd-fullpage",html:[{tag:"div",class:t.icons.dragAndDrop+" fonticon-5x"}],events:{drop:t.callbacks.onDrop}}),this.dndFullPageOverlay.inject(t.overlayContainer),this.dndFullPageOverlay.hide(),this.dndForbiddenOverlay=new UWA.Element("div",{class:"xapp-dnd-fullpage",html:[{tag:"div",class:t.icons.forbidden+" fonticon-5x"}]}),this.dndForbiddenOverlay.inject(t.overlayContainer),this.dndForbiddenOverlay.hide())},e.prototype.clean=function(){this._removeViewerDDEventListeners(this.options),this.dndFullPageOverlay&&(this.dndFullPageOverlay.remove(),this.dndFullPageOverlay.destroy(),delete this.dndFullPageOverlay),this.dndForbiddenOverlay&&(this.dndForbiddenOverlay.remove(),this.dndForbiddenOverlay.destroy(),delete this.dndForbiddenOverlay),delete this.options},e.prototype.onDragEnter=function(e,i){if(!("string"==typeof this.options.appId&&""!==this.options.appId&&i.dataTransfer.types.indexOf(this.options.appId)>=0||i.dataTransfer&&Array.isArray(i.dataTransfer.types)&&0===i.dataTransfer.types.length&&""===i.dataTransfer.getData("text")))if(i.stopPropagation(),i.preventDefault(),this.options.callbacks.onDragEnter&&"function"==typeof this.options.callbacks.onDragEnter){(function(){let e,n=this.options.callbacks.onDragEnter(i);return e=Promise.prototype.isPrototypeOf(n)?n:new t(function(t){t(n)})}).bind(this)().then(function(t){switch(t){case this.dndOverlayTypes.overItems:let e=0;for(;e<this.dndItemOverlays.length;e++)this.dndItemOverlays[e].show();break;case this.dndOverlayTypes.overFullPage:this.dndFullPageOverlay.show();break;case this.dndOverlayTypes.forbidden:this.dndForbiddenOverlay.show()}}.bind(this))}else this.dndFullPageOverlay.show()},e.prototype.onDragLeave=function(t,e){this.hideOverlayToken=setTimeout(function(){e.stopPropagation(),this.hideDnDOverlay()}.bind(this),300)},e.prototype.onDragOver=function(t,e){clearTimeout(this.hideOverlayToken),this.hideOverlayToken=void 0,e.stopPropagation(),e.preventDefault()},e.prototype.onDrop=function(t,e){e.preventDefault(),this.hideDnDOverlay()},e.prototype.hideDnDOverlay=function(){for(var t=0;t<this.dndItemOverlays.length;t++)this.dndItemOverlays[t].hide();this.dndFullPageOverlay.hide(),this.dndForbiddenOverlay.hide()},e.prototype._initViewerDDEventListeners=function(t){t&&t.viewer&&(t.__eventsCB__={},t.__eventsCB__.onDropCB=this.onDrop.bind(this,t),t.__eventsCB__.onDragEnterCB=this.onDragEnter.bind(this,t),t.__eventsCB__.onDragLeaveCB=this.onDragLeave.bind(this,t),t.__eventsCB__.onDragOverCB=this.onDragOver.bind(this,t),t.viewer.addEventListener("dragenter",t.__eventsCB__.onDragEnterCB,!1),t.viewer.addEventListener("dragleave",t.__eventsCB__.onDragLeaveCB,!1),t.viewer.addEventListener("dragover",t.__eventsCB__.onDragOverCB,!1),t.viewer.addEventListener("drop",t.__eventsCB__.onDropCB,!1))},e.prototype._removeViewerDDEventListeners=function(t){t&&t.viewer&&t.__eventsCB__&&(t.viewer.removeEventListener("dragenter",t.__eventsCB__.onDragEnterCB,!1),t.viewer.removeEventListener("dragleave",t.__eventsCB__.onDragLeaveCB,!1),t.viewer.removeEventListener("dragover",t.__eventsCB__.onDragOverCB,!1),t.viewer.removeEventListener("drop",t.__eventsCB__.onDropCB,!1))},e}),define("DS/XAppUXComponents/XAppNotificationsManager",["UWA/Core","DS/Notifications/NotificationsManagerViewOnScreen","DS/Notifications/NotificationsManagerUXMessages","DS/UIKIT/Alert","css!DS/XAppUXComponents/assets/css/XAppNotificationsManager"],function(t,e,i,n){"use strict";var o=function(){this.notifManager=null,this.alertElement=null};return o.prototype.initialize=function(){},o.prototype.displayNotifications=function(o,s){var r=[];return s&&s.notExclusive||this.clearNotifications("","",s),s&&!0===s.bUiKit?(null===this.alertElement&&(this.alertElement=new n(t.extend(t.clone({closable:!0,visible:!0,autoHide:!0,hideDelay:8e3,className:"xapp-alert"}),s.options))),this.alertElement&&(s.dialogElement&&this.alertElement.inject(s.dialogElement),o&&Array.isArray(o)&&o.forEach(function(t){if(t&&"string"==typeof t.message){var e=t.message.replace(/\.\n/g,". ").replace(/!\n/g,"! ").replace(/\?\n/g,"? ").replace(/\n/g,". ");this.alertElement.add({className:t.level,message:e})}}.bind(this)))):(null===this.notifManager&&(this.notifManager=i,e.setNotificationManager(this.notifManager)),o&&Array.isArray(o)&&o.forEach(function(t){var e=this.notifManager.addNotif({level:t.level,title:t.title,subtitle:t.subtitle,message:t.message,action:t.action,sticky:t.sticky});r.push(e)}.bind(this))),r},o.prototype.clearNotifications=function(t,i,n){n&&!0===n.bUiKit?this.alertElement&&(this.alertElement.destroy(),this.alertElement=null):e.removeNotifications(t,i)},o.prototype.clean=function(){},o.prototype.destroy=function(){},o}),define("DS/XAppUXComponents/XAppNotificationMask",["UWA/Core","DS/UIKIT/Spinner","css!DS/UIKIT/UIKIT","css!DS/XAppUXComponents/assets/css/XAppNotificationMask"],function(t,e){"use strict";var i=function(){};return i.prototype.mask=function(i,n){var o,s=n||document.body;this.isMasked(s)&&this.unmask(s),s.addClassName("xapp-masked"),o=t.createElement("div",{class:"xapp-mask"}),i&&t.createElement("div",{class:"xapp-mask-wrapper",html:{tag:"div",class:"xapp-mask-content",html:["string"==typeof i.iconClassName?"spinner"===i.iconClassName?new e({visible:!0,animate:!0,spin:!0}):{tag:"span",class:i.iconClassName}:void 0,{tag:"span",class:"string"==typeof i.description?"text":"",html:i.description},i.action?{tag:"div",html:{tag:"div",class:"btn btn-default xapp-mask-content-btn",text:i.action.label,events:{click:i.action.callback}}}:void 0]}}).inject(o),o.inject(s)},i.prototype.unmask=function(t){var e=t||document.body,i=e.getElement(" > .xapp-mask");i&&i.destroy(),e.removeClassName("xapp-masked")},i.prototype.isMasked=function(t){return(t||document.body).hasClassName("xapp-masked")},i}),define("DS/XAppUXComponents/XAppWaitingBar",["UWA/Core","DS/Controls/Button","DS/Controls/ProgressBar","i18n!DS/XAppUXComponents/assets/nls/XAppWaitingBar.json","css!DS/XAppUXComponents/assets/css/XAppWaitingBar.css"],function(t,e,i,n){"use strict";var o=function(){this._initialized=!1,this._isShown=!1,this._waitingBarZIndex=-1};o.prototype.initialize=function(){if(!this._initialized){let t=this.getExecutionContext();t&&(this._uiFrameComponent=t.getComponent(WAfrStandardComponentKey.UIFrame),s.call(this),r.call(this),this._initialized=!0,this._eventsComponent=t.getComponent(WAfrStandardComponentKey.ModelEvents),this._eventsComponent&&this._eventsComponent.publish({event:"XApp/WaitingBar/onInitialized"}))}},o.prototype.clean=function(){this.end()},o.prototype.destroy=function(){this._topContainerDiv&&(this._topContainerDiv.destroy(),this._topContainerDiv=null),this._initialized=!1},o.prototype.isInitialized=function(){return this._initialized},o.prototype.isShown=function(){return this._isShown},o.prototype.setStepNumber=function(t,e){let i=!1;this._indexNumberDiv&&(e&&void 0!==t||!e&&t>0)&&(this._indexNumberDiv.setText(t.toString()),i=!0),this._totalNumberDiv&&e>0&&(this._totalNumberDiv.setText(" / "+e.toString()),i=!0),this._numberContainerDiv.isHidden()&&i&&this._numberContainerDiv.show()},o.prototype.setIcon=function(t){this._iconContainerDiv&&(this._icon&&this._iconContainerDiv.removeClassName(this._icon),t&&(this._iconContainerDiv.addClassName(t),this._iconContainerDiv.show()),this._icon=t)},o.prototype.getIcon=function(){return this._icon},o.prototype.setTitle=function(t){this._titleDiv&&this._titleDiv.setHTML(t)},o.prototype.getTitle=function(){var t="";return this._titleDiv&&(t=this._titleDiv.getHTML()),t},o.prototype.setTitleSupplement=function(t){this._titleSupplementDiv&&(this._titleSupplementDiv.setHTML(t),this._titleSupplementDiv.show())},o.prototype.setAdditionalInfo=function(t){this._additionalInfoDiv&&this._additionalInfoDiv.setHTML(t)},o.prototype.addAdditionalInfoColor=function(t){this._additionalInfoDiv&&this._additionalInfoDiv.addClassName(t)},o.prototype.removeAdditionalInfoColor=function(t){this._additionalInfoDiv&&this._additionalInfoDiv.removeClassName(t)},o.prototype.setStopButtonVisibleFlag=function(t){this._stopButton&&(this._stopButton.visibleFlag=t)},o.prototype.setPauseButtonVisibleFlag=function(t){this._pauseButton&&(this._pauseButton.visibleFlag=t)},o.prototype.setPlayButtonVisibleFlag=function(t){this._playButton&&(this._playButton.visibleFlag=t)},o.prototype.setProgressBarValue=function(t){this._progressBar&&(this._progressBar.infiniteFlag&&(this._progressBar.infiniteFlag=!1),this._progressBar.value=t)},o.prototype.setProgressBarDisabled=function(t){this._progressBar&&(this._progressBar.disabled=t)},o.prototype.setProgressBarStatusFlag=function(t){this._progressBar&&(this._progressBar.statusFlag=t)},o.prototype.setProgressBarInfiniteFlag=function(t){this._progressBar&&(this._progressBar.infiniteFlag=t)},o.prototype.setProgressBarEmphasize=function(t){this._progressBar&&(this._progressBar.emphasize=t)},o.prototype.setDoNotHide=function(){this._bDoNotHide=!0},o.prototype.unsetDoNotHide=function(){this._bDoNotHide=!1},o.prototype.start=function(t){a.call(this,t),p.call(this,t),l.call(this,t),this.show(t)},o.prototype.end=function(){!0!==this._bDoNotHide&&(this.hide(),this.reset())},o.prototype.show=function(t){var e=500;t&&(this._onStopButtonClick=t.onStopButtonClick,this._onPauseButtonClick=t.onPauseButtonClick,this._onPlayButtonClick=t.onPlayButtonClick,e=t.delayBeforeShow),this._isShown||(clearTimeout(this._showTimeoutToken),this._showTimeoutToken=setTimeout(function(){this._isShown=!0,this._eventsComponent&&this._eventsComponent.publish({event:"XApp/WaitingBar/onShow"}),this._topContainerDiv.removeClassName("closed"),this._topContainerDiv.addClassName("isVisible"),this.bringToFront()}.bind(this),e))},o.prototype.hide=function(){this._isShown&&(this._isShown=!1,clearTimeout(this._showTimeoutToken),this._eventsComponent&&this._eventsComponent.publish({event:"XApp/WaitingBar/onHide"}),this._topContainerDiv.removeClassName("isVisible"),this._topContainerDiv.addClassName("closed"))},o.prototype.bringToFront=function(){var t=-1;if(this._uiFrameComponent){var e=this._uiFrameComponent.getImmersiveFrame();if(e){var i=e.windows;if(i)for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];if(o){var s=o.getZIndex();t<s&&(t=s)}}}t>=this._waitingBarZIndex&&(this._waitingBarZIndex=t+1,this._topContainerDiv.setStyle("z-index",this._waitingBarZIndex))}},o.prototype.reset=function(){this._numberContainerDiv&&this._numberContainerDiv.hide(),this._indexNumberDiv&&(this._indexNumberDiv.setText(""),this._indexNumberDiv.show()),this._totalNumberDiv&&(this._totalNumberDiv.setText(""),this._totalNumberDiv.show()),this._iconContainerDiv&&(this._iconContainerDiv.removeClassName(this._icon),this._iconContainerDiv.hide()),this._infosContainerDiv&&this._infosContainerDiv.show(),this._titleContainerDiv&&this._titleContainerDiv.show(),this._titleDiv&&this._titleDiv.show(),this._titleSupplementDiv&&this._titleSupplementDiv.hide(),this._additionalInfoDiv&&this._additionalInfoDiv.show(),this._buttonsContainerDiv&&this._buttonsContainerDiv.show(),this.setStopButtonVisibleFlag(!0),this.setPauseButtonVisibleFlag(!1),this.setPlayButtonVisibleFlag(!1),this.setProgressBarValue(0),this.setProgressBarInfiniteFlag(!1),this.setProgressBarStatusFlag(!0)};var s=function(){var e=this._uiFrameComponent?this._uiFrameComponent.getUIFrame():null;e&&(this._topContainerDiv=t.createElement("div",{class:"xapp-waitingbar-top-container closed"}).inject(e),this._mainContainerDiv=t.createElement("div",{class:"xapp-waitingbar-main-container"}).inject(this._topContainerDiv),this._numberContainerDiv=t.createElement("div",{class:"xapp-waitingbar-info-container xapp-waitingbar-number"}).inject(this._mainContainerDiv),this._indexNumberDiv=t.createElement("div",{class:"xapp-waitingbar-text black inline"}).inject(this._numberContainerDiv),this._totalNumberDiv=t.createElement("div",{class:"xapp-waitingbar-text inline"}).inject(this._numberContainerDiv),this._iconContainerDiv=t.createElement("div",{class:"xapp-waitingbar-info-container xapp-waitingbar-icon"}).inject(this._mainContainerDiv),this._iconContainerDiv.hide(),this._infosContainerDiv=t.createElement("div",{class:"xapp-waitingbar-info-container xapp-waitingbar-title"}).inject(this._mainContainerDiv),this._titleContainerDiv=t.createElement("div",{class:"xapp-waitingbar-title-container"}).inject(this._infosContainerDiv),this._titleDiv=t.createElement("div",{class:"xapp-waitingbar-text black inline"}).inject(this._titleContainerDiv),this._titleSupplementDiv=t.createElement("div",{class:"xapp-waitingbar-text black italic inline"}).inject(this._titleContainerDiv),this._titleSupplementDiv.hide(),this._additionalInfoDiv=t.createElement("div",{class:"xapp-waitingbar-text"}).inject(this._infosContainerDiv),this._progressbarContainerDiv=t.createElement("div",{class:"xapp-waitingbar-progress-container"}).inject(this._mainContainerDiv),this._buttonsContainerDiv=t.createElement("div",{class:"xapp-waitingbar-buttons-container"}).inject(this._mainContainerDiv),this._progressBar=new i({value:0,displayStyle:"lite"}).inject(this._progressbarContainerDiv))},r=function(){this._uiFrameComponent&&(this._stopButton=new e({label:"",displayStyle:"icon",icon:{iconName:"stop",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){"function"==typeof this._onStopButtonClick&&this._onStopButtonClick()}.bind(this)}).inject(this._buttonsContainerDiv),this._stopButton.getContent().title=n.get("WaitingBar.Stop"),this._pauseButton=new e({label:"",displayStyle:"icon",icon:{iconName:"pause",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){"function"==typeof this._onPauseButtonClick&&this._onPauseButtonClick()}.bind(this)}).inject(this._buttonsContainerDiv),this._playButton=new e({label:"",displayStyle:"icon",icon:{iconName:"play",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){"function"==typeof this._onPlayButtonClick&&this._onPlayButtonClick()}.bind(this)}).inject(this._buttonsContainerDiv))},a=function(t){t&&("number"==typeof t.indexNumber||"number"==typeof t.totalNumber?this.setStepNumber(t.indexNumber,t.totalNumber):this._numberContainerDiv&&this._numberContainerDiv.hide(),"string"==typeof t.icon&&this.setIcon(t.icon),"string"==typeof t.title||"string"==typeof t.titleSupplement||"string"==typeof t.additionalInfo?("string"==typeof t.title||"string"==typeof t.titleSupplement?("string"==typeof t.title?this.setTitle(t.title):this._titleDiv&&this._titleDiv.hide(),"string"==typeof t.titleSupplement?this.setTitleSupplement(t.titleSupplement):this._titleSupplementDiv&&this._titleSupplementDiv.hide()):this._titleContainerDiv&&this._titleContainerDiv.hide(),"string"==typeof t.additionalInfo?this.setAdditionalInfo(t.additionalInfo):this._additionalInfoDiv&&this._additionalInfoDiv.hide()):this._infosContainerDiv&&this._infosContainerDiv.hide())},p=function(t){var e=!(!t||"boolean"!=typeof t.stopButtonVisibleFlag)&&t.stopButtonVisibleFlag;this.setStopButtonVisibleFlag(e);var i=!(!t||"boolean"!=typeof t.pauseButtonVisibleFlag)&&t.pauseButtonVisibleFlag;this.setPauseButtonVisibleFlag(!1);var n=!(!t||"boolean"!=typeof t.playButtonVisibleFlag)&&t.playButtonVisibleFlag;this.setPlayButtonVisibleFlag(n),!1===n&&!1===i&&!1===e&&this._buttonsContainerDiv&&this._buttonsContainerDiv.hide()},l=function(t){t&&("number"==typeof t.progressValue&&this.setProgressBarValue(t.progressValue),"boolean"==typeof t.progressDisabled&&this.setProgressBarDisabled(t.progressDisabled),"string"==typeof t.progressEmphasize&&this.setProgressBarEmphasize(t.progressEmphasize),"boolean"==typeof t.statusFlag&&this.setProgressBarStatusFlag(t.statusFlag)),this.setProgressBarInfiniteFlag(!t||"boolean"!=typeof t.progressInfiniteFlag||t.progressInfiniteFlag)};return o}),define("DS/XAppUXComponents/XAppViewerDragAndDropComponent",["UWA/Core","UWA/Promise","DS/XAppUXComponents/XAppDragAndDropManager","css!DS/XAppLandingPage/assets/css/XAppLandingPageCoreV3"],function(t,e,i){"use strict";var n=function(t){this.options=t};return n.prototype.initialize=function(){this._dragAndDropManager||(this._dragAndDropManager=new i);let t=this.getExecutionContext().getSourceApp();t||(t=this.getExecutionContext().getTargetApp());let e=t?t.getId().toLowerCase():"",n=this.getExecutionContext().getComponent("Viewer");if(n){let t=n.get3DViewer();if(t){let i=function(){let i=this.buildDDOptions({appId:e,viewer:t.elements.container});this._dragAndDropManager.initalize(i)}.bind(this);if(this.resources)i();else{this.resources={},this.loadJsonResources(["i18n!DS/XAppLandingPage/assets/nls/XAppHomePage.json","text!DS/XAppLandingPage/assets/rsc/XAppHomePage.json"]).then(i)}}}},n.prototype.clean=function(){this._dragAndDropManager&&this._dragAndDropManager.clean()},n.prototype.destroy=function(){this.clean(),this._dragAndDropManager&&(this._dragAndDropManager.destroy(),delete this._dragAndDropManager),delete this.resources},n.prototype.buildDDOptions=function(t){return{appId:t.appId,callbacks:{onDrop:this.onDrop.bind(this),onDragEnter:this.onDragEnter.bind(this)},dragAndDrop:!0,icons:{dragAndDrop:this.resources["DragDrop.FontIcon"],forbidden:this.resources["Forbidden.FontIcon"]},overlayContainer:t.viewer,viewer:t.viewer}},n.prototype.loadJsonResources=function(i){return new e(function(e){if(i&&Array.isArray(i)){var n=function(o){o<i.length?require([i[o]],function(e){"object"!=typeof e&&(e=JSON.parse(e)),this.resources=t.extend(t.clone(this.resources),e),n(o+1)}.bind(this)):e()}.bind(this);n(0)}}.bind(this))},n.prototype.onDrop=function(t){if(t.preventDefault(),!this.options.onDrop)return;let e;var i=t.dataTransfer.getData("text");if(i)try{e=JSON.parse(i).data.items[0]}catch(t){}let n={dataParam:e,text:i,files:t.dataTransfer.files,items:t.dataTransfer.items,types:t.dataTransfer.types};this.displaySaveDialog().then(function(e){e&&this.executeAction(this.options.onDrop,t,n)}.bind(this))},n.prototype.displaySaveDialog=function(){return new e(function(t,e){let i=this.getExecutionContext().getComponent("AFR_HandlerComponent");i&&"string"==typeof this.options.closeAction?i.executeHandler({id:this.options.closeAction,args:{callback:t}}):e()}.bind(this))},n.prototype.executeAction=function(t,i,n){return new e(function(e){if(t&&"string"==typeof t){var o=this.getExecutionContext();if(o){var s=o.getComponent(WAfrStandardComponentKey.HandlerComponent);s&&s.executeHandler({id:t,args:{event:i,data:n}}).then(e.bind(this))}}else e()}.bind(this))},n.prototype.onDragEnter=function(t){return new e(function(e){this.options.onDragEnter&&"string"==typeof this.options.onDragEnter?this.executeAction(this.options.onDragEnter,t).then(e.bind(null)):e(this._dragAndDropManager.dndOverlayTypes.overFullPage)}.bind(this))},n});