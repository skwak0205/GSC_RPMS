<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:widget="http://www.netvibes.com/ns/">
  <head>
    <!-- Application Metas -->
	<!-- These information will be displayed in the widget preferences -->
    <title>Access Rights pop up</title>
    <meta name="author" content="G5C" />
    <meta name="description" content="Access Rights popup" />
    <!-- UWA Environment -->
	
	<script type="text/javascript" src="../AmdLoader/AmdLoader.js"></script>
	<!-- Load UWA environment --> 
	<link rel="stylesheet" type="text/css" href="../c/UWA/assets/css/standalone.css" />
	<script type="text/javascript" src="../c/UWA/js/UWA_Standalone_Alone.js"></script>
	<!-- UWA/Class/View, Model and Collection will be loaded dynamically -->

	<link rel="stylesheet" type="text/css" href="../UIKIT/UIKIT.css" /> 
	<script type="text/javascript" src="../UIKIT/UIKIT.js"></script> 

    
    <script type="text/javascript">
    /*
      We create the global MyWidget object.
      This object will be used to store variables and functions.
    */

    var dependencies = dependencies || [];

    require(
        // dependencies
        [
         	'DS/UIKIT/Input/Button',
         	'DS/WidgetServices/WidgetServices',
            'DS/SearchWidget/SearchWidget',
            'DS/UIKIT/Input/Text'
        ].concat(dependencies),

        // execute this callback, passing all dependencies as params

        function (UIButton, widgetServices, WidgetCore, TextUI) {

            var WIWI = {
                onLoad: function () { //Needed to be sure to have a widget.body
                    //widgetServices.setDistantServer(true);
                    var that = this;
                    widget.setBody({
                        tag: 'div',
                        'class': 'testSearch'
                    });
                    that.ServerName = new TextUI({
                        value: "https://vdevpril541dsy.ux.dsone.3ds.com",
                        name: 'ARP_ServerName',
                        className: 'ARP_ServerName',
                        id: 'ARP_ServerName',
                        attributes: {
                            placeholder: "Server name",
                        }
                    }).inject(widget.body);

                    that.ServerUri = new TextUI({
                        value: "3dexperience",
                        name: 'ARP_ServerUri',
                        className: 'ARP_ServerUri',
                        id: 'ARP_ServerUri',
                        attributes: {
                            placeholder: "Server Uri",
                        }
                    }).inject(widget.body);

                    that.PhysicalID = new TextUI({
                        value: "2C49B556DB590000A453205497940300",
                        name: 'ARP_PhysicalID',
                        className: 'ARP_PhysicalID',
                        id: 'ARP_PhysicalID',
                        attributes: {
                            placeholder: "PhysicalID",
                        }
                    }).inject(widget.body);

                    var Bouton = new UIButton({
                        name: "toOpenButton"
                    }).inject(widget.body);
                    Bouton.addEvent('onClick', function () {
                        that.ServerName.setValue("");
                        that.ServerUri.setValue("");
                        that.PhysicalID.setValue("");
                    });


                    var Bouton2 = new UIButton({
                        name: "toOpenButton"
                    }).inject(widget.body);
                    Bouton2.addEvent('onClick', function () {
                        that.ServerName.setValue("https://vdevpril541dsy.ux.dsone.3ds.com");
                        that.ServerUri.setValue("3dexperience");
                        that.PhysicalID.setValue("2C49B556DB590000A453205497940300");
                    });

                    var Bouton3 = new UIButton({
                        name: "toOpenButton"
                    }).inject(widget.body);
                    Bouton3.addEvent('onClick', function () {
                        that.ServerName.setValue("https://vdevpril972dsy.ux.dsone.3ds.com");
                        that.ServerUri.setValue("3dexperience");
                        that.PhysicalID.setValue("52C07591000085345458A28E0006BEAF");
                    });

                    




                    var Bouton = new UIButton({
                        name: "toOpenButton"						
                    });
                    Bouton.addEvent('onClick', function () {

                        var physicalId = "1";
                        if (that.PhysicalID.getValue() != "") {
                            physicalId = that.PhysicalID.getValue();
                        }



                        var searchWidget = new WidgetCore(widget,widget.body, {
                            'ForbiddenChar': '',
                            'MaxNumber': '5',
                            'MaxSize': '300',
                            //'topClassHeight': 'testSearch',
                            'position': 'auto',
                            'serverName': that.ServerName.getValue(),
                            'serverUri': that.ServerUri.getValue(),
                            events: {
                            }
                        }).inject(widget.body);


                        searchWidget.setSelectedItemList([{
                            "objectID": physicalId
                        }]);
                    }).inject(widget.body);
                },
            };
            widget.addEvent('onLoad', WIWI.onLoad);
            widget.body.setStyle("height", "900px");
        });
    

    </script>
  </head>
  <body>
    <p>Loading...</p>
   </body>
</html>
