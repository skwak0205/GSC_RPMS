define("DS/GEOHideShowFilterCmd/GEOHideShowFilterCmd",["DS/ApplicationFrame/Command","DS/WebInfraUI/ContextualBarManager","UWA/Core"],function(e,t,i){"use strict";return e.extend({_frmWindow:null,_exp:null,_viewer:null,_geomBtn:null,_surfaceState:!0,_lineState:!0,_pointState:!0,init:function(e){this._parent(e,{isAsynchronous:!0,mode:"exclusive"}),this._frmWindow=this.getFrameWindow(),this._viewer=this._frmWindow.getViewer(),this._exp=this._frmWindow.experience,this._surfaceState=!0,this._lineState=!0,this._pointState=!0,this._state=!0,this._glType=-1,this._exp.subscribe("ASSET/LOADINGFINISHED",this._onModelLoaded.bind(this))},_onModelLoaded:function(){this._surfaceState=!0,this._lineState=!0,this._pointState=!0,this._frmWindow=this.getFrameWindow(),this._viewer=this._frmWindow.getViewer(),this._exp=this._frmWindow.experience},_hideShow:function(){var e=this._frmWindow.experience.getRootBag();if(null!==e){var t=e.getChildren();if(1===t.length){var n=t[0];if(0!==this._glType)for(var o=0;o<n.getChildren().length;o++){var r=n.children[o];if(i.is(r.mesh3js))(c=r.mesh3js.sceneGraph.children[0]).getPrimitivesCount()&&c.getPrimitiveGroup(0).glType===this._glType&&(this._state?r.setVisibility(!0):r.setVisibility(!1),this._viewer.render());else for(var s=0;s<r.getChildren().length;s++){var l=r.children[s];if(i.is(l.mesh3js))for(var h=0;h<l.getChildren().length;h++){var a=l.children[h];(c=a.mesh3js.sceneGraph.children[0]).getPrimitivesCount()&&c.getPrimitiveGroup(0).glType===this._glType&&(this._state?a.setVisibility(!0):a.setVisibility(!1),this._viewer.render())}}}else if(0===this._glType){var d=n.children;for(o=0;o<d.length;o++){var u=d[o];for(s=0;s<u.getChildren().length;s++){var c;(c=(r=u.children[s]).mesh3js.sceneGraph.children[0]).getPrimitivesCount()&&c.getPrimitiveGroup(0).glType===this._glType&&(this._state?r.setVisibility(!0):r.setVisibility(!1),this._viewer.render())}}}}}},beginExecute:function(){var e=this;e.contextualMenu=new t({frameWindow:e._frmWindow});var i={type:e.contextualMenu.Button.Check,id:"HideShowSurface",rsc:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",nls:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",selected:e._surfaceState,onclickCB:function(){e._surfaceState=!e._surfaceState,e._state=e._surfaceState,e._glType=4,e._hideShow()}},n={type:e.contextualMenu.Button.Check,id:"HideShowLine",rsc:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",nls:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",selected:e._lineState,onclickCB:function(){e._lineState=!e._lineState,e._state=e._lineState,e._glType=1,e._hideShow()}},o={type:e.contextualMenu.Button.Check,id:"HideShowPoint",rsc:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",nls:"GEOHideShowFilterCmd/GEOHideShowFilterWkb",selected:e._pointState,onclickCB:function(){e._pointState=!e._pointState,e._state=e._pointState,e._glType=0,e._hideShow()}};e.surfaceBtnToken=e.contextualMenu.addButtons([i],{barType:e.contextualMenu.Toolbar.New}),e.lineBtnToken=e.contextualMenu.addButtons([n],{barType:e.contextualMenu.Toolbar.Append}),e.pointBtnToken=e.contextualMenu.addButtons([o],{barType:e.contextualMenu.Toolbar.Append}),e._viewer.render()},endExecute:function(){this.contextualMenu.removeButtons(this.surfaceBtnToken),this.contextualMenu.removeButtons(this.lineBtnToken),this.contextualMenu.removeButtons(this.pointBtnToken),this.contextualMenu.dispose(),this.contextualMenu=void 0}})});