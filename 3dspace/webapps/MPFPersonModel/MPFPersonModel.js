define("DS/MPFPersonModel/MePersonDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFUrl/UrlUtils"],function(e,t){"use strict";var r,o={ALLOW_CREATION:"creationAllowed",PLATFORM:"platform"};return(r=e.extend({init:function(e){this._parent(e,"/me")},url:function(e,r,n){var s,a,i;return n||(n={}),s=this.connector.url(this.resourcePath),(a=n[o.ALLOW_CREATION])&&(s=new t(s).addParameter(o.ALLOW_CREATION,a).getUrl()),(i=n[o.PLATFORM])&&(s=new t(s).addParameter(o.PLATFORM,i).getUrl()),s},request:function(e,t){if("GET"===t.method)return this.connector.request(e,t);t.onComplete()}})).Params=Object.freeze(o),r}),define("DS/MPFPersonModel/PersonModel",["DS/MPFModel/MPFModel","DS/MPFUtils/MPFUtils"],(e,t)=>{"use strict";const r=Object.freeze({ID:"id",USER_NAME:"name",FIRST_NAME:"firstName",LAST_NAME:"lastName",EMAIL:"email",COMPANY:"company",PERSON_ROLES:"PersonRoles",BUYER_TYPE:"buyerType",HAS_PUBLIC_SELLER_ROLE_ASSIGNED:"HasPublicSellerRoleAssigned",STATE:"state",COUNTRY:"Country"}),o=Object.freeze({BUYER:"buyer",SHOP_OPERATOR:"ShopOperator",OPERATOR:"DSOperator",EMP_ADMIN:"Admin"}),n=Object.freeze({ACTIVE:"active",PENDING:"pending"}),s=e.extend({defaults:function(){const e={};return e[r.ID]=null,e[r.FIRST_NAME]=null,e[r.LAST_NAME]=null,e[r.EMAIL]=null,e[r.COMPANY]=null,e},setup(e,t){this._parent(e,t),this._type="PersonModel"},parse:e=>e,validate:t.doNothing,getUserName(){return this.get(r.USER_NAME)},getFirstName(){return this.get(r.FIRST_NAME)},getLastName(){return this.get(r.LAST_NAME)},getFullName(){return`${this.getFirstName()} ${this.getLastName()}`},getCompany(){return this.get(r.COMPANY)},getCompanyId(){const e=this.getCompany();return e&&e.match(/\/([0-9A-F]{32})$/)[1]},getEmail(){return this.get(r.EMAIL)},getID(){return this.get(r.ID)},getRoles(){return this.get(r.PERSON_ROLES)},getBuyerType(){return this.get(r.BUYER_TYPE)},getState(){return this.get(r.STATE)},getCountry(){return this.get(r.COUNTRY)},hasRole(e){const r=this.getRoles()||[];return!!t.findInArray(r,function(t){return t.Role===e})},hasCountry(){return this.has(r.COUNTRY)},isDSOperator(){return this.hasRole(o.OPERATOR)},isSeller(){return"TRUE"===this.get(r.HAS_PUBLIC_SELLER_ROLE_ASSIGNED)},isEmpAdmin(){return(this.getRoles()||[]).some(function(e){return e.Role===o.EMP_ADMIN&&"Public"!==e.Project})},isAdminOfThisEMP(e){return(this.getRoles()||[]).some(function(t){return t.Role===o.EMP_ADMIN&&t.Project===e})}});return s.Fields=r,s.Roles=o,s.States=n,s}),define("DS/MPFPersonModel/ShopPersonsDataProxy",["DS/MPFDataProxy/DataProxy","UWA/Core","DS/MPFUrl/UrlUtils","DS/MPFCompanyModel/CompanyMemberDataProxy"],function(e,t,r,o){"use strict";return e.extend({doDelete:null,doPatch:null,init:function(e){this._parent(e,"/mdshop/shops/{0}/members",new o(e))},request:function(e,t){"POST"!==t.method&&"PUT"!==t.method||(t.method="PATCH"),this._parent(e,t)},url:function(e,o,n){var s,a,i=e.parentResourceId,l=t.String.format(this.resourcePath,i);return s=this.connector.url(l),n.companyId&&((a=new r(s)).addParameter("legalEntityID",n.companyId),s=a.getUrl()),s},urlDelete:null,urlGet:function(e){return this.connector.url(t.String.format(this.resourcePath,e.parentResourceId||e.collection.parentResourceId))},urlPost:null,urlPatch:null})}),define("DS/MPFPersonModel/PersonDataProxy",["DS/MPFDataProxy/DataProxy"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"/mdpeople/people")}})}),define("DS/MPFPersonModel/PersonCollection",["UWA/Promise","DS/MPFModel/MPFCollection","DS/MPFPersonModel/PersonModel"],function(e,t,r){"use strict";return t.extend({model:r,addAll:function(e,t){var o=this;if(e&&e.length){for(var n=[],s=0;s<e.length;s++)n.push({op:"add",value:e[s]});var a={onComplete:function(n){for(var s=0;s<e.length;s++){for(var a,i=0;i<n.length;i++)if(n[i].email.toLowerCase()===e[s].email.toLowerCase()){a=n[i];break}o.add(new r(a,{dataProxy:o.dataProxy}))}t.onComplete&&t.onComplete()},onFailure:t.onFailure};t.companyId&&(a.companyId=t.companyId),this._doPatch(n,a)}},addAllPromise:function(e,t){return this._wrapInPromise(this.addAll.bind(this),e,t)},removeOne:function(e,t){var r=this;if(e){var o=[{op:"remove",path:"/"+e,value:{Roles:t.roles,ShopId:t.shopID}}],n={onComplete:function(o){r.remove(e),t.onComplete&&t.onComplete()},onFailure:t.onFailure};t.companyId&&(n.companyId=t.companyId),this._doPatch(o,n)}},removeOnePromise:function(e,t){return this._wrapInPromise(this.removeOne.bind(this),e,t)},updateRoles:function(e,t){var r={};r.Roles=t.newRoles,t.shopId&&(r.ShopId=t.shopId),this._doPatch([{op:"modify",path:"/"+e,value:r}],t)},updateRolesPromise:function(e,t){return this._wrapInPromise(this.updateRoles.bind(this),e,t)},_doPatch:function(e,t){if(e){t.companyId&&(this.parentResourceId=t.companyId);var r=this.dataProxy.delegate?this.dataProxy.delegate.url(this,"",t):this.dataProxy.url(this,"",t);if(r){var o={method:"PATCH",data:JSON.stringify(e),onComplete:t.onComplete,onFailure:t.onFailure};this.dataProxy.request(r,o)}}},_wrapInPromise:function(t,r,o){o=o||{};var n=this,s=e.deferred();return o.onComplete=function(){s.resolve(n)},o.onFailure=s.reject,t(r,o),s.promise}})}),define("DS/MPFPersonModel/PersonFactory",["DS/MPFPersonModel/PersonModel","DS/MPFPersonModel/PersonCollection","DS/MPFPersonModel/PersonDataProxy","DS/MPFPersonModel/MePersonDataProxy","DS/MPFPersonModel/ShopPersonsDataProxy","DS/MPFCompanyModel/CompanyMemberDataProxy"],(e,t,r,o,n,s)=>{"use strict";const a=Object.freeze({ME:"me",SHOP:"shop",COMPANY:"company",PERSON:"person"});function i(e){if(!e)throw new Error("connector is required");this.connector=e,this.dataProxies={}}return i.prototype.createCollection=function(e,r=[],o={}){return o.dataProxy=this._getDataProxy(e),new t(r,o)},i.prototype.createModel=function(t,r={},n={}){let s;return n.dataProxy=this._getDataProxy(t),s=new e(r,n),t===a.ME&&(s=new e(r,{dataProxy:new o(this.connector)})),s},i.prototype._getDataProxy=function(e){let t=null;return e===a.ME?(this.dataProxies[a.ME]||(this.dataProxies[a.ME]=new o(this.connector)),t=this.dataProxies[a.ME]):e===a.SHOP?(this.dataProxies[a.SHOP]||(this.dataProxies[a.SHOP]=new n(this.connector)),t=this.dataProxies[a.SHOP]):e===a.COMPANY?(this.dataProxies[a.COMPANY]||(this.dataProxies[a.COMPANY]=new s(this.connector)),t=this.dataProxies[a.COMPANY]):(this.dataProxies[a.PERSON]||(this.dataProxies[a.PERSON]=new r(this.connector)),t=this.dataProxies[a.PERSON]),t},i.Types=a,i});