define("DS/i3DXCompass/Controls/Search",["UWA/Core","UWA/Controls/Abstract","DS/UIKIT/Input/Text","DS/UIKIT/Tooltip"],function(e,t,n,o){"use strict";var i=e.i18n;return t.extend({className:"compass-search",defaultOptions:{typeDelay:500},isActive:!1,currentText:"",typeTimeout:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=this,s=this.container=e.createElement("div",{class:this.className}),a=this.elements={};a.button=e.createElement("div",{class:this.className+"-button fonticon fonticon-search",events:{click:function(){t.dispatchEvent("onToggle")}}}).inject(s),new o({position:"left",target:a.button,className:"compass-tooltip",body:i("Search")}),a.reset=e.createElement("button",{class:this.className+"-text-reset close fonticon fonticon-clear",styles:{"font-size":"18px"},attributes:{type:"button","aria-hidden":!0},events:{click:function(){t.dispatchEvent("onReset")}}}),new o({position:"right",target:a.reset,className:"compass-tooltip",body:i("Clear search")}),a.text=new n({className:this.className+"-text",placeholder:i("searchapps"),attributes:{events:{keyup:function(){t.dispatchEvent("onKeyUp")}}}}),a.textWrapper=e.createElement("div",{class:this.className+"-text-wrapper",html:[a.reset,a.text]}).inject(s),s.addClassName(this.className)},onToggle:function(){var e=!this.isActive;this.container.toggleClassName("active",e),e?this.elements.text.setFocus():this.dispatchEvent("onReset"),this.isActive=e},onReset:function(){var e=this.elements.text;""!==this.currentText&&(window.clearTimeout(this.typeTimeout),e.setValue(""),this.currentText="",this.dispatchEvent("onSearch","")),e.setFocus()},onKeyUp:function(){var e=this,t=this.elements.text.getValue().toLowerCase();t!==this.currentText&&(this.currentText=t,window.clearTimeout(this.typeTimeout),this.typeTimeout=window.setTimeout(function(){e.dispatchEvent("onSearch",t)},this.options.typeDelay))},hide:function(){this.container.addClassName("transparent")},show:function(){this.container.removeClassName("transparent")},blur:function(){this.elements.text.setFocus(!1)}})}),define("DS/i3DXCompass/Types",["UWA/Core"],function(e){"use strict";var t={},n=null;return t.get=function(){return e.log("get Types"),e.log("Types = "+JSON.stringify(n)),n},t.set=function(t){e.log("Set Types"),n=t},t.reset=function(){n=null},t}),define("DS/i3DXCompass/Controls/IframeLoader",["UWA/Core","UWA/Controls/Abstract","DS/UIKIT/Mask"],function(e,t,n){"use strict";return t.extend({defaultOptions:{src:"",text:"",timeout:15e3,frameId:"3DCommerceRoleDescription"},className:"compass-iframe-loader",init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=this.options,o=this.elements=[];o.container=e.createElement("div",{class:this.className}),t.src&&""!==t.src&&!this._isUrl(t.src)?this.buildText(t.src):t.src&&""!==t.src&&this._isUrl(t.src)&&!this.getFailed()?(n.mask(o.container),this.launchTimeout(),o.iframe=e.createElement("iframe",{src:t.src,allowfullscreen:!0}).inject(o.container)):t.src&&""!==t.src&&this._isUrl(t.src)&&this.getFailed()?(this.buildText(),this.launchTimeout(),o.iframe=e.createElement("iframe",{src:t.src,class:"hidden",allowfullscreen:!0}).inject(o.container)):this.buildText()},buildText:function(t){this.elements.container.setContent(e.createElement("div",{class:t?this.className+"-text-description":this.className+"-text",html:t||this.options.text}))},_isUrl:function(e){return new RegExp("^(https?:\\/\\/)((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[\\(\\)-a-z\\d%_.~+]*)*(\\?[\\(\\);&a-z,\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},launchTimeout:function(){var t=this,o=this.elements,i=function(){removeEventListener("message",s),clearTimeout(a)},s=function(s){var a=s.data;a.id===t.options.frameId&&(i(),0===a.code?(o.iframe.addClassName("visible"),o.iframe.removeClassName("hidden"),"number"===e.typeOf(a.height)&&o.iframe.setStyle("height",a.height),o.container.getElement("."+t.className+"-text")&&o.container.getElement("."+t.className+"-text").addClassName("hidden")):t.buildText(),n.unmask(o.container),t.setFailed(!1))},a=setTimeout(function(){i(),n.unmask(o.container),t.buildText(),t.setFailed(!0)},this.options.timeout);addEventListener("message",s)},getFailed:function(){try{return"true"===sessionStorage.getItem("compass-iframe-loader-failed")}catch(t){return e.log(t),!1}},setFailed:function(t){var n=t?"true":"false";try{sessionStorage.setItem("compass-iframe-loader-failed",n)}catch(t){e.log(t)}}})}),define("DS/i3DXCompass/View/CheckOutView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Mask","DS/i3DXCompassServices/i3DXCompassPubSub"],function(e,t,n,o,i){"use strict";return t.extend({tagName:"div",className:"check-out",setup:function(e){return e.buyComponent&&(this.buyComponent=e.buyComponent),this},_buildIcon:function(){var t=this.model.get("brand");return t&&(t=t.toUpperCase()),0===this.model.get("id").indexOf("RAP-")&&(t="DEFAULT_CUSTOM"),"3DEXP PLATFORM"===t&&(t="PLATFORM"),n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}_Role.svg",t||"PLATFORM"))},_getTemplate:function(){return[{tag:"mpf-buy-wrapper"}]},render:function(){this.container.setContent(this._getTemplate());var e={product:this.model.get("externalIds")||this.model.get("acronym")},t=this.container.getElement("mpf-buy-wrapper");return o.mask(t),require(["DS/MPFClickAndBuyComponent/ClickAndBuyWrapper"],function(n){n.getClickAndBuyComponent(e).then(function(e){e.addEvent("addAdditionalItems",function(){i.publish("navigateToHome")}),t.setContent(e.render()),o.unmask(t)},function(){t.setContent("Contact us")})}),this}})}),define("DS/i3DXCompass/Controls/Message",["UWA/Core","UWA/Controls/Abstract","DS/UIKIT/Spinner"],function(e,t,n){"use strict";return t.extend({options:{className:"compass-overlay"},init:function(){var t=this.elements={text:e.createElement("div",{class:this.options.className+"-text"}),spinner:new n({className:this.options.className+"-spinner compass-spinner",animate:!1})};t.container=e.createElement("div",{class:this.options.className,styles:{display:"none"},html:[t.text,t.spinner]})},show:function(e,t){var n=this.elements;window.clearTimeout(this.timeoutVar),n.text.setContent(e||""),t?n.spinner.show():n.spinner.hide(),n.container.show()},hide:function(e){e?this.timeoutVar=window.setTimeout(this.hide.bind(this),e):this.elements.container.hide()}})}),define("DS/i3DXCompass/EventManager",["UWA/Core","UWA/Class","UWA/Class/Events"],function(e,t,n){"use strict";return new(t.extend(n))}),define("DS/i3DXCompass/X3DContent",["UWA/Core"],function(e){"use strict";var t={},n={};return t.getX3DContent=function(){return e.log("get X3DContent"),e.log("Content = "+JSON.stringify(n)),n},t.setX3DContent=function(t){e.log("set X3DContent"),n=t},t}),define("i3DXCompass/X3DContent",["DS/i3DXCompass/X3DContent"],function(e){"use strict";return e}),define("DS/i3DXCompass/CacheManager",["UWA/Core","UWA/Class","UWA/Utils","UWA/Storage","UWA/Storage/Adapter/Dom"],function(e,t,n,o){"use strict";var i,s,a=new o({adapter:"Dom",database:"3DCompass"});return t.singleton({setup:function(e,t){i=e,e||(a=null),s=t},setRequestCache:function(e,t){this.setCache(e.url+JSON.stringify(e.data),t)},getRequestCache:function(e){return this.getCache(e.url+JSON.stringify(e.data))},setCache:function(e,t,o){if(a)try{o?(t.cachedChecksum=this._getKeyUID(e+o),a.set(n.getCheckSum(e),t)):a.set(this._getKeyUID(e),t)}catch(e){a=null}},getCache:function(e,t,o){var i=null;if(t||(t=864e5),"dsrtv:"===window.location.protocol&&(t=null,o=null),a)try{o?(i=a.get(n.getCheckSum(e),t))&&i.cachedChecksum!==this._getKeyUID(e+o)&&(i=null):i=a.get(this._getKeyUID(e),t)}catch(e){a=null}return i},_getKeyUID:function(e){var t=n.getCheckSum(e+s+i+"420.1.0");if("dsrtv:"===window.location.protocol){var o=e.split("/");o.length>0&&(t=o[o.length-1])}return t},_getUser:function(){return i}})}),define("DS/i3DXCompass/View/SuggestionListView",["UWA/Core","UWA/Class/View","DS/UIKIT/Spinner"],function(e,t,n){"use strict";var o={className:"suggestion-section",suggestionsRendered:!1,attachEvents:function(){var e=this.collection;e.addEvent("onRemove",this.removeSug.bind(this)),e.addEvent("onMultipleAdd",this.renderSuggestions.bind(this))},render:function(){var t=this.elements.loader=e.createElement("div",{class:"compass-loading",html:new n({visible:!0,className:"compass-spinner"})});return this.suggestionsRendered&&t.hide(),this.container.addContent(t),this},renderSuggestions:function(){var t=this.elements,n=this.collection.map(function(e){return{tag:"li",class:"suggestion-item",html:[{tag:"img",class:"suggestion-item-icon",src:e.get("thumbnailUrl")},{class:"suggestion-item-description",html:[{class:"suggestion-item-title",text:e.get("title")},{class:"suggestion-item-baseline",text:e.get("baseline")}]}],"data-id":e.get("productId")}}),o=t.list;return o||(o=t.list=e.createElement("ul",{class:"suggestion-list"}).inject(this.container)),o.setContent(n),this.unmask(),this.attachEvents(),this.suggestionsRendered=!0,this},refresh:function(){var e=this;this.suggestionsRendered&&(this.mask(),this.collection.fetch({onComplete:function(){e.unmask()},onFailure:function(){e.unmask()}}))},removeSug:function(e){var t=this.getSugElmt(e);t&&t.destroy()},getSugElmt:function(t){return this.getElement(e.String.format('[data-id="{0}"]',t.id))},mask:function(){var e=this.elements.loader;e&&e.show()},unmask:function(){var e=this.elements.loader;e&&e.hide()}};return t.extend(o)}),define("DS/i3DXCompass/MarketingData",[],function(){"use strict";return{services:{X3DENGI_AP:{id:"X3DENGI_AP",title:"ENGINEERING",description:"Engineering As a Service",icon:"v3/Services_images/620x120_Engineering_Services_Mobile.jpg"},X3DPRIN_AP:{id:"X3DPRIN_AP",title:"MAKE",description:"Manufacturing As a Service",icon:"v3/Services_images/620x120_Make_Services_Mobile.jpg"},X3DPSLY_AP:{id:"X3DPSLY_AP",title:"PART SUPPLY",description:"Components As a Service",icon:"v3/Services_images/620x120_Part_Supply_Services_Mobile.jpg"},X3DINNO_AP:{id:"X3DINNO_AP",title:"Business Experiences",description:"Business Transformation As a Service",icon:"v3/Services_images/620x120_Business_Experiences_Mobile.png"}}}}),define("DS/i3DXCompass/Model/Install",["UWA/Core","UWA/Class/Model","UWA/Class/Collection"],function(e,t,n){"use strict";var o=t.extend({idAttribute:"appsId"}),i=n.extend({model:o});return t.extend({isCompatible:function(e){return!0},isAvailableForInstallation:function(){return 5!==this.get("status")},setup:function(){this._apps=new i(this.get("apps")),this.addEvent("onChange:apps",function(e,t){this._apps.set(t)})},_extractVersion:function(e){var t=e?e.split("."):[];return{release:t.length>0?parseInt(t[0],10):0,fd:t.length>1?parseInt(t[1],10):0,pinpoint:t.length>2?parseInt(t[2],10):0}},_isOptionalContent:function(){return"CNT"===this.get("type")},_containsPinpoint:function(){var e=this._extractVersion(this.get("SPlevel")),t=this._extractVersion(this.get("targetSPLevel"));return e.pinpoint>0||t.pinpoint>0},_isSameFD:function(){var e=this._extractVersion(this.get("SPlevel")),t=this._extractVersion(this.get("targetSPLevel"));return e.fd===t.fd},_isSameRelease:function(){var e=this._extractVersion(this.get("SPlevel")),t=this._extractVersion(this.get("targetSPLevel"));return e.release===t.release},getInstallationMode:function(){var e="Maintenance",t=this._extractVersion(this.get("SPlevel")),n=this._extractVersion(this.get("targetSPLevel"));return t&&n&&this._isSameRelease()&&!this._isSameFD()&&this._containsPinpoint()&&(e="Both"),e}})}),define("DS/i3DXCompass/Model/Product",["UWA/Core","UWA/Class/Model"],function(e,t){"use strict";return t.extend({})}),define("DS/i3DXCompass/View/PortfolioSectionView",["UWA/Core","UWA/Class/View"],function(e,t){"use strict";return t.extend({tagName:"portfolio-section",render:function(){return this.options.title&&this.container.addClassName("has-title"),this.options.background&&this.container.addClassName("has-background"),this.options.subTitle&&this.container.addClassName("has-subtitle"),this.container.setContent(this._buildContent()),this},_buildContent:function(){var e=this.options.title,t=this.options.subTitle,n=this.options.content,o=[];return e&&o.push({tag:"h2",class:this.tagName+"-title font-3dslight",text:e}),t&&o.push({class:this.tagName+"-subtitle font-3dslight",text:t}),n&&o.push(n),{tag:"portfolio-section-content",html:o}}})}),define("DS/i3DXCompass/Model/Suggestion",["UWA/Core","UWA/Utils","UWA/Class/Model"],function(e,t,n){"use strict";return n.extend({idAttribute:"productId",setup:function(){}})}),define("DS/i3DXCompass/Model/PlatformModel",["UWA/Core","UWA/Class/Model"],function(e,t){"use strict";return t.extend({setup:function(t){return e.log("This model has been initialized."),this}})}),define("DS/i3DXCompass/TopBarManager",["UWA/Core"],function(e){"use strict";var t=e.i18n,n={topBarProxy:null,menu:null,events:{},initialized:!1,MenuItem:null,_roles:null,init:function(e){require(["DS/TopBarProxy/TopBarProxy","DS/TopBarProxy/Menu","DS/TopBarProxy/MenuItem"],function(o,i,s){n.menu=new i,n.topBarProxy=new o({id:e.topBarId}),n.initialized=!0,n.topBarProxy.addContent({profile:[new s({label:t("myroles"),submenu:n.menu,multiSelect:!0})]}),n.events.onRoleChange=e.onRoleChange,n.MenuItem=s,n._roles&&n.setRoles(n._roles)})},setRoles:function(e){var o,i=n.MenuItem;n.initialized?(n._roles&&(n._roles=null),o=e.map(function(e){return new i({roleId:e.get("id"),label:e.get("title"),selected:e.get("active"),selectable:!0,onExecute:function(e){n.events.onRoleChange(e.get("roleId"),!e.get("selected"))}})}),e.length>1?(n.topBarProxy.setContent({profile:[new i({label:t("myroles"),submenu:n.menu,multiSelect:!0})]}),n.menu.reset(),n.menu.add(o)):(n.topBarProxy.empty(),n.menu.reset())):n._roles=e},removeRole:function(e){var t=n.getRoleItem(e);t&&(n.menu.remove(t),n.menu.length<=1&&n.topBarProxy.empty())},setChecked:function(e){var t=n.getRoleItem(e);t&&t.set("selected",e.get("active"))},containsRole:function(e){return!!n.getRoleItem(e)},getRoleItem:function(e){if(n.menu)return n.menu.findWhere({roleId:e.id})}};return n}),define("DS/i3DXCompass/Tools",["UWA/Core","UWA/Element","UWA/Utils","DS/i3DXCompass/EventManager"],function(e,t,n,o){"use strict";var i,s,a=!1,l=!1,r=null,c=!1,d=[],p=!0,u=null,m="en",h={os:null,browser:null,FEATURE_BETA_ACTIVATION:{},detectOs:function(){var e=h.getUserAgent().toLowerCase();e.indexOf("windows")>-1?h.os=e.indexOf("windows nt 10")>-1?"windows10":"windows":e.match(/(ipad|iphone|ipod)/g)?h.os="ios":e.indexOf("mac")>-1?h.os="macos":e.indexOf("android")>-1?h.os="android":e.indexOf("linux")>-1?h.os="linux":h.os="unknown"},isIphone:function(){var e=h.getUserAgent().toLowerCase();return/iphone/i.test(e)},_detectBrowser:function(){var e=n.Client.Engine;window.navigator.userAgent.indexOf("Edge")>-1?h.browser="edge":e.ie?h.browser="internet explorer":h.browser=e.name},_fetchOsDistribution:function(){var e=h.getUserAgent().toLowerCase().match(/.* (\(.*)\) .*/m),t=null;if(e.length>1){var n=e[1].split(";");n.length>1&&-1===n[1].indexOf("linux")&&(t=n[1].trim())}return t},getOs:function(){return h.os||h.detectOs(),h.os},getOsDistribution:function(){return h.osDistribution||(h.osDistribution=h._fetchOsDistribution()),h.osDistribution},getBrowser:function(){return h.browser||h._detectBrowser(),h.browser},getMajorIosVersion:function(){if(!h.iosVersion&&/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);h.iosVersion=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)],e.log("iOS version = "+h.iosVersion[0]+"."+h.iosVersion[1]+"."+h.iosVersion[2])}return h.iosVersion&&h.iosVersion[0]},getUserAgent:function(){return navigator.userAgent},arrayFind:function(e,t,n){var o;return e.some(function(e){if(t.call(n,e))return o=e,!0}),o},forEachOwnProperty:function(e,t,n){Object.keys(e).forEach(function(o){t.call(n,e[o],o)})},pushUnique:function(e,t){-1===e.indexOf(t)&&e.push(t)},unshiftUnique:function(e,t){-1===e.indexOf(t)&&e.unshift(t)},moveToFirst:function(e,t){var n=e.indexOf(t);-1!==n&&e.unshift(e.splice(n,1)[0])},includes:function(e,t){return t.every(function(t){return-1!==e.indexOf(t)})},intersection:function(e,t){return e.filter(function(e){return-1!==t.indexOf(e)})},removeDoublons:function(e){var t=[];return e.forEach(function(e){h.pushUnique(t,e)}),t},customLaunchWebApp:function(){return!1},enableWidgetDrag:function(){},instanciateWidget:function(){},onRoleChange:function(){},setCustomFunction:function(e,t){["customLaunchWebApp","enableWidgetDrag","instanciateWidget","onRoleChange"].indexOf(e)>-1&&(h[e]=t)},disableSelect:function(){t.setStyles.call(document.body,{"-webkit-touch-callout":"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"})},enableSelect:function(){t.setStyles.call(document.body,{"-webkit-touch-callout":"","-webkit-tap-highlight-color":"","-webkit-user-select":"","-moz-user-select":"","-ms-user-select":"","user-select":""})},isOverElement:function(e,t,n){return e.x>t.x&&e.x<t.x+n.width&&e.y>t.y&&e.y<t.y+n.height},isSameApp:function(e,t){return!!n.matchUrl(e,t)&&(n.parseUrl(e).directoryPath||"/").split("/")[1]===(n.parseUrl(t).directoryPath||"/").split("/")[1]},isBase64:function(e){return new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$").test(e)},isBase64Image:function(e){return e.indexOf("data:image")>-1&&e.indexOf(";base64,")>-1&&(e=e.split(";base64,")[1]),this.isBase64(e)},htmlEntityDecode:function(t){return e.createElement("div",{html:t}).getText()},now:Date.now||function(){return(new Date).getTime()},debounce:function(e,t,n){var o,i,s,a,l,r=function(){var c=h.now()-a;c<t&&c>=0?o=setTimeout(r,t-c):(o=null,n||(l=e.apply(s,i),o||(s=i=null)))};return function(){s=this,i=arguments,a=h.now();var c=n&&!o;return o||(o=setTimeout(r,t)),c&&(l=e.apply(s,i),s=i=null),l}},compareVersion:function(e,t){var n,o,i;for(e=e.split("."),t=t.split("."),o=Math.min(e.length,t.length),n=0;n<o;n++)if(0!==(i=parseInt(e[n],10)-parseInt(t[n],10)))return i;return e.length-t.length},i18n:function(t){var n=e.i18n(t);return n&&(n=n.replace("3DEXPERIENCE","<b>3D</b>EXPERIENCE")),n},isSmartphone:function(){return n.Client.getSize().width<959&&n.Client.getSize().height<570},isCarouselSmallSize:function(){return n.Client.getSize().width<1292&&n.Client.getSize().width>691},isValidMarketAppUrl:function(e){return/^[a-z]*:\/\/\?-.*/.test(e)},isOpenFullSize:function(){return this.isCompassV2()?n.Client.getSize().width<959:n.Client.getSize().width<641},isBetaModeActivated:function(t){var n=!1,o="3DCompass-"+t;if(void 0===this.FEATURE_BETA_ACTIVATION[o])try{n=!!e.is(localStorage.getItem(o)),this.FEATURE_BETA_ACTIVATION[o]=n}catch(t){e.log(t)}else n=this.FEATURE_BETA_ACTIVATION[o];return n},setCompassVersion:function(e){i=e||"V1"},isCompassV2:function(){return"V2"===this.getCompassVersion()},isDisableGoBack:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("role=true")>-1||window.location.pathname.indexOf("rootroles")>-1},isCompassV3:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3")>-1||"V3"===this.getCompassVersion()||"V32"===this.getCompassVersion()||"V34"===this.getCompassVersion()},isCompassV32:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3.2")>-1||window.location.search.toLowerCase().indexOf("3dcompass_v3.4")>-1||"V32"===this.getCompassVersion()||"V34"===this.getCompassVersion()},isCompassV34:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3.4")>-1||"V34"===this.getCompassVersion()},isCompassV34_debug:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3.4")>-1||"V34"===this.getCompassVersion()},isPlaygroundVisible:function(){return!(window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("playground=false")>-1)},isCompassV3MainStream:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3_main")>-1},isCompassV3ActiveGroup:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3_activeGroup")>-1},isSupportQuickLink:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_v3_supportquicklink")>-1||!0===a},isSupportAddToFavorite:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcompass_addtofavorite")>-1},isSupportQuickLinkFixMobileApp:function(){return document.querySelector("body.support-quick-link-fix-mobile-app")||!0===l},getCompassVersion:function(){return i},setCurrentQuadrant:function(e){s=e||this.isCompassV3()?e:"north"},setSupportQuickLink:function(e){a="V2"===e},setSupportQuickLinkFixMobileApp:function(e){l=e},getCurrentQuadrant:function(){return s},setShowCustom:function(e){p=e},getShowCustom:function(){return p||window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("3dcp_show_custom")>-1},setIsMultiTenant:function(e){r=e},getIsMultiTenant:function(){return r},setTenantList:function(e){d=e},getTenantList:function(){return d},setPortfolioUrl:function(e){u=e},setBusinessExperienceAvailable:function(e){c=e},isBusinessExperienceAvailable:function(){return c},getPortfolioAssetTemplateUrl:function(t,n){if(u&&""!==u){if(-1===n.indexOf(u))return u+e.String.format("/assets/{0}/{1}",t,n)}else if(this.isCompassV34_debug()&&-1===n.indexOf("https://my3dexperience-portfolio.3dexperience.3ds.com"))return e.String.format("https://my3dexperience-portfolio.3dexperience.3ds.com/public/{0}/{1}",t,n);return n},getPortfolioApiTemplateUrl:function(t){return u&&""!==u?u+e.String.format("/data/{0}_{1}.json",t,m):e.String.format("https://my3dexperience-portfolio.3dexperience.3ds.com/api/v1/categories/type/{0}",t)},getPortfolioApiTemplateUrlNoNLS:function(t){return u&&""!==u?u+e.String.format("/data/{0}.json",t):e.String.format("https://my3dexperience-portfolio.3dexperience.3ds.com/api/v1/categories/type/{0}",t)},setLang:function(e){m=e},getAddinModeURL:function(){var e="";return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("addinmode=catiav5")>-1?e={value:"catiav5"}:window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("addinmode=solidworks")>-1?e={value:"solidworks"}:window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("addinmode=xvl")>-1&&(e={value:"xvl"}),e},manageSeoTags:function(e,t){var n=null,o=null,i=null;if(e){n=e.get?e.get("title"):e.title,(o=e.get?e.get("tagLine"):e.tagLine)||(o=e.get?e.get("description"):e.description)&&(o=o.substring(0,150));var s=e.collection&&e.collection.url;"function"==typeof s&&(s=s()),-1===(i=s?(this.getFullRootPath()+"rootroles/"+(t||this.toSeoUrl(n))).replace(/\/\//g,"/"):window.location.href.replace(window.location.search,"")).indexOf("://")&&(i=i.replace(":/","://"))}require(["DS/PlatformAPI/PlatformAPI"],function(e){e.publish("mde.navigation.update.seo",{title:n,description:o,canonical:i})})},publishFullScreenSeo:function(){require(["DS/PlatformAPI/PlatformAPI"],function(e){e.publish("mde.navigation.update.seo",{fullPage:!0})})},getFullRootPath:function(){return window.location.origin+this.getRootPath()},getRootPath:function(){return window.location.pathname.split("compass-world")[0]+"/compass-world/"||"/compass-world/"},toSeoUrl:function(e){var t=e.toString();return"function"==typeof t.normalize&&(t=t.normalize("NFD")),t.replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").toLowerCase().replace(/&/g,"-and-").replace(/[^a-z0-9\-]/g,"").replace(/-+/g,"-").replace(/^-*/,"").replace(/-*$/,"")},hasWebpSupport:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))&&0==e.toDataURL("image/webp").indexOf("data:image/webp")},_supportBigUrl:function(e){var t=this.getBrowser();return!(("internet explorer"===t||"edge"===t)&&e.length>2045)},dispatchLauncherErrorEvent:function(e){switch(e.returnCode){case 100:o.dispatchEvent("onShowMessage",h.i18n("launcherbusyretry"));break;case 141:o.dispatchEvent("onShowMessage",h.i18n("errorcode141"));break;case 152:o.dispatchEvent("onShowMessage",h.i18n("installationerroraccess"));break;case 155:o.dispatchEvent("onShowMessage",h.i18n("installationerrordiskspace"));break;case 157:o.dispatchEvent("onShowMessage",h.i18n("installationcancelled"));break;case 225:o.dispatchEvent("onShowMessage",h.i18n("errorcode225"));break;case 227:o.dispatchEvent("onShowMessage",h.i18n("errorcode227"));break;default:o.dispatchEvent("onShowMessage",h.i18n("installationerror"))}o.dispatchEvent("onHideMessage",5e3)}};return h}),define("DS/i3DXCompass/Feature",["UWA/Core","DS/i3DXCompass/Tools","DS/i3DXCompass/CacheManager"],function(e,t,n){"use strict";var o,i,s=!1,a=!1,l=!1,r={},c=!1,d=!1,p=!1,u=null,m=null,h=!0,f={compassPanelSize:function(){},setCloud:function(e){d=e},enableBetaShoppingCart:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("feature-shopping-cart")>-1},supportPushState:function(){return t.isSupportQuickLink()||!e.is(n._getUser())&&!f.isMobileAppEnvironment()||window.location.href.indexOf("-3dprint.")>-1||window.location.href.indexOf("-ifweloop.")>-1},setNoPushStateNavigation:function(){p=!0},setExtraWhereUsedRoles:function(e){o=e},getExtraWhereUsedRoles:function(){return o},setRequestRole:function(e){h=e},canRequestRole:function(){return h},needPushState:function(){return!p||(p=!1,!1)},isBuyEnabledWorld:function(e){return"WORLD"===e&&f.isBuyEnabled()},isBuyEnabled:function(){return!f.isMobileAppEnvironment()&&!f.isOnPremiseEnvironment()},isOnPremiseEnvironment:function(){return!d},isMobileAppEnvironment:function(){return window.ds&&"MOBILE"===window.ds.env&&!0!==window.ds.isDesktopApp},isMobileAppEnvironnementV2:function(){return this.isMobileAppEnvironment()&&this.isCompassStandalone()},isCompassStandalone:function(){return document.body.hasClassName("compass-standalone-v3")},isNativeApplicationEnvironment:function(){return"undefined"!=typeof compassRichWithCef&&compassRichWithCef},isNativeApplicationOfflineEnvironment:function(){return"dsrtv:"===window.location.protocol},compassPanelFullSize:function(){f.compassPanelSize("FULL_WIDTH"),t.publishFullScreenSeo()},compassPanelRestoreDefaultSize:function(){f.compassPanelSize("DEFAULT")},enableBetaUnlockComingSoon:function(){return window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("iscomingsoonunlocked")>-1},enableMockFUN105351:function(){return window.location.search.indexOf&&window.location.search.indexOf("enableMockFUN105351")>-1},setLockInstallation:function(e){s=e},isLockInstallation:function(){return s},setLockInstallationUpdate:function(e){a=e},setLockUninstallationUpdate:function(e){l=e},isLockInstallationUpdate:function(){return a},isLockUninstallation:function(){return l},isCurrentPlatform:function(){return!(!this.getPreferences()||"currentPlatform"!==this.getPreferences().forceSelectTenant)},setPreferences:function(e){r=e&&"forceSelectTenant"===e.forceSelectTenant?{forceSelectTenant:"allPlatform"}:e},setUpdatedPreferences:function(e){c=e},getUpdatedPreferences:function(){return c},isCurrentPathnamePortfolioRoot:function(e){return null!==e.match(/welcome\/[a-z/]*compass-world[/]*$/g)},getPreferences:function(){return r||{}},setExclusionsCollection:function(e){i=e},getExclusionsCollection:function(){return i},isDelegatedToRichClientLaunchApp:function(e){return f.isNativeApplicationEnvironment()&&(!e||"3dexperience.exe"===e.toLowerCase()||"3dexperience"===e.toLowerCase())},setPortolioUrlLocale:function(e){u=e},getPortfolioUrlLocale:function(){return u},setContactFormConfiguration:function(e){m=e},getContactFormConfiguration:function(){return m},isSeoActivated:function(){return!0},isContactFormActivated:function(){return!0},isSolutionDetailActivated:function(){return!0},isFastPortfolioNavigation:function(){return document.location.pathname.indexOf("/offers")>-1||document.location.pathname.indexOf("/rootroles")>-1},isPortfolioNavigation:function(){return document.location.pathname.indexOf("/compass-world/")>-1},isCollaborativeBusinessInnovatorNavigation:function(){return document.location.pathname.indexOf("/collaborative-business-innovator")>-1},is3dswymerNavigation:function(){return document.location.pathname.indexOf("/3d-swymer")>-1||document.location.pathname.indexOf("/3dswymer")>-1},getBrandFromPacking:function(){return window.location.search.indexOf&&window.location.search.indexOf("getBrandFromPacking")>-1},isBusinessExperienceV3Activated:function(){return window.location.search.indexOf&&window.location.search.indexOf("isBusinessExperienceV3")>-1}};return f}),define("DS/i3DXCompass/UsageTracker",["UWA/Core","DS/Usage/TrackerAPI","DS/i3DXCompass/Tools"],function(e,t,n){"use strict";var o="";return{_IDS:{compass:{quadrant:{north:"compass.quadrant.north",east:"compass.quadrant.east",south:"compass.quadrant.south",west:"compass.quadrant.west",play:"compass.quadrant.play"},cross:"compass.cross",role:"compass.role",roleFavorite:"compass.role.favorite",app:"compass.app",appFavorite:"compass.app.favorite",section:"compass.section"}},inc:function(e,t,n,o){},getCompassVersion:function(e){return""===o&&(o=n.getCompassVersion()),o},clickQuadrant:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickQuadrant",persDim:{pd1:e.quadrant}})},clickApp:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickApp",persDim:{pd1:e.quadrant,pd2:e.appId,pd3:e.appName}})},clickCockpitByRole:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickCockpitByRole",persDim:{pd2:e.cockpitId,pd3:e.cockpitName,pd4:e.platformId}})},clickBusinessCockpit:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickBusinessCockpit",persDim:{pd2:e.cockpitId,pd3:e.cockpitName,pd4:e.usageId}})},clickBusinessMethod:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickBusinessMethod",persDim:{pd2:e.businessMethodId,pd3:e.businessMethodName,pd4:e.usageId}})},clickBusinessRole:function(e){this.compassInc({eventCategory:"compass",eventAction:"clickBusinessRole",persDim:{pd2:e.businessRoleId,pd3:e.businessRoleName}})},activateRole:function(e){this.compassInc({eventCategory:"compass",eventAction:"activateRole",persDim:{pd1:e.quadrant,pd2:e.roleId,pd3:e.roleName}})},desactivateRole:function(e){this.compassInc({eventCategory:"compass",eventAction:"desactivateRole",persDim:{pd1:e.quadrant,pd2:e.roleId,pd3:e.roleName}})},requestRole:function(e){this.compassInc({eventCategory:"compass",eventAction:"requestRole",persDim:{pd1:e.quadrant||"",pd2:e.roleId||"",pd3:e.roleName||""}})},openSection:function(e){this.compassInc({eventCategory:"compass",eventAction:"openSection",persDim:{pd4:e.sectionName}})},closeSection:function(e){this.compassInc({eventCategory:"compass",eventAction:"closeSection",persDim:{pd4:e.sectionName}})},addRoleToFavorite:function(e){this.compassInc({eventCategory:"compass",eventAction:"addRoleToFavorite",persDim:{pd2:e.roleId,pd3:e.roleName}})},addAppToFavorite:function(e){this.compassInc({eventCategory:"compass",eventAction:"addAppToFavorite",persDim:{pd2:e.appId,pd3:e.appName}})},removeAppToFavorite:function(e){this.compassInc({eventCategory:"compass",eventAction:"removeAppToFavorite",persDim:{pd2:e.appId,pd3:e.appName}})},compassClose:function(){this.compassInc({eventCategory:"compass",eventAction:"compassClose"})},compassOpen:function(){this.compassInc({eventCategory:"compass",eventAction:"compassOpen"})},goHome:function(e){this.compassInc({eventCategory:"compass",eventAction:"goHome"}),e&&this.trackPageView(e)},clickBack:function(e){this.compassInc({eventCategory:"compass",eventAction:"goBack"}),e&&this.trackPageView(e)},trackPageView:function(t){var n=e.clone(t);this.compassInc({pageURL:t.pageURL||window.location.pathname,pageTitle:n.pageTitle,persDim:{pd2:n.id||"",pd3:n.title||"",pd6:n.parentPage||""}},!0)},compassInc:function(n,o){var i=e.clone(n)||{};i.persDim||(i.persDim={}),i.persDim.pd10=this.getCompassVersion(),i.appID="X3DMYAP_AP",i.scope="3DCompass",o?t.trackPageView(i):t.trackPageEvent(i)}}}),define("DS/i3DXCompass/View/DemoPassportLogin",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/UsageTracker"],function(e,t,n,o){"use strict";return t.extend({tagName:"div",className:"demoPassportLogin",setup:function(e){return this},render:function(){console.log("render");return this.container.setContent(['<div class="image-passport"><img src="https://eu1-ds-iam.3dexperience.3ds.com/3DPassport/resources/img/3dexperience/3DEXLoginCompassTxt_BLUE@2X.png"></img></div>',{class:"passport-wrap",html:['<div class="header-passport">3DEXPERIENCE ID</div>','<div class="input-group"><span class="input-group-addon"><i class="fonticon fonticon-user"> </i></span><input type="text" value="fhu" class="form-control" placeholder="Email or username"></div>','<div class="input-group"><span class="input-group-addon"><i class="fonticon fonticon-lock"> </i></span><input type="password" value="********" class="form-control" placeholder="Password"></div>','<button class="btn btn-default login-form" type="submit">Log in</button>']}]),this.container.getElement(".login-form").addEvent("click",function(){window.location.href=window.location.href+"/userId:"+Date.now()}),this}})}),define("DS/i3DXCompass/View/RoleView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Tools","DS/i3DXCompass/Feature","DS/UIKIT/Tooltip"],function(e,t,n,o,i,s){"use strict";var a=function(e){var t=e.get?e.get("title"):e.title;return(e.get?e.get("slug"):e.slug)||o.toSeoUrl(t)},l=function(e,t){var n="",s=i.getPortfolioUrlLocale()?i.getPortfolioUrlLocale()+"/":"";return e&&(n=e.map(function(e){return a(e)}).join("/")),t&&(n+="/"),(o.getRootPath()+s+n+(t?a(t):"")).replace(/\/\//g,"/")};return t.extend({tagName:"div",className:"item-view-v3",domEvents:{click:"_onItemClickOnce"},clickable:!1,_onItemClick:function(t){e.Event.stop(t),this.clickable&&(this.dispatchEvent("onItemClick",[this.model,this.container]),!0!==this.disableSeoTags&&i.supportPushState()&&i.needPushState()&&(history.pushState("",this.model.get("title"),l(this.options.navigation,this.model)),o.manageSeoTags(this.model,a(this.model))))},setup:function(e){var t;this.appsList=e.appsCollection,this.clickable=e.clickable,e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.container.setAttribute("data-id",this.model.get("acronym")||this.model.get("id")),this.container.setAttribute("data-search",this.model.get("title")),this.model.get("type")&&this.container.setAttribute("data-type",this.model.get("type")),this.options.navigation&&(t=l(this.options.navigation,this.model),this.container.setAttribute("href",t),this.container.setAttribute("data-seo",t)),this.clickable&&this.container.setAttribute("data-click",""),!0===this.options.disableSeoTags&&(this.disableSeoTags=this.options.disableSeoTags),this._onItemClick&&(this._onItemClickOnce=o.debounce(this._onItemClick,500,!0).bind(this))},render:function(){return this.container.setContent(this._getTemplate()),this},_getTemplate:function(){var t,o=null;this.options.defaultIcon?((t=this.model.get("brand")||this.options.brand)&&(t=t.toUpperCase()),-1===this.options.defaultIcon.indexOf("Role")&&(t=t?"_"+t:""),o=n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}",e.String.format(this.options.defaultIcon,t)))):((t=this.model.get("brand")||this.options.brand)&&(t=t.toUpperCase()),0===this.model.get("id").indexOf("RAP-")&&(t="DEFAULT_CUSTOM"),"3DEXP PLATFORM"===t&&(t="PLATFORM"),o=n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}_Role.svg",t||"PLATFORM")));return[{tag:"img",class:0===this.model.get("id").indexOf("RAP-")&&this.model.get("icon")&&-1===this.model.get("icon").indexOf("ROLE_64")?"custom-with-image":"",src:this.model.get("icon")&&this.model.get("icon").indexOf("ROLE_64")>-1||this.options.defaultIcon?o:this.model.get("icon"),events:{error:function(){this.hasAttribute("data-error")||(this.setAttribute("data-error",!0),this.src=n.getWebappsAssetUrl("i3DXCompass","v3.1/images/role/PLATFORM_Role.svg"))}}},{class:"icon-wrapper "+this.options.additionalClassNameImage,styles:{"margin-left":"-64","z-index":"1"},html:{class:"icon-group",html:this._buildGroup()}},{class:"item-view-content-wrapper title",text:this.model.get("title")}]},_buildGroup:function(){var t;this.options.defaultIcon?((t=this.model.get("brand")||this.options.brand)&&(t=t.toUpperCase()),-1===this.options.defaultIcon.indexOf("Role")&&(t=t?"_"+t:""),n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}",e.String.format(this.options.defaultIcon,t)))):((t=this.model.get("brand")||this.options.brand)&&(t=t.toUpperCase()),0===this.model.get("id").indexOf("RAP-")&&(t="DEFAULT_CUSTOM"),"3DEXP PLATFORM"===t&&(t="PLATFORM"),n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}_Role.svg",t||"PLATFORM")));return{class:"icon-group-item",styles:{position:"relative"},tag:"div",html:[this.options.showRequestIcon?{class:"role-icon-request fonticon "+(this.model.get("requested")?" fonticon-hourglass":" fonticon-check")+(this.model.get("requested")?" role-icon-requested":"")}:null]}}})}),define("DS/i3DXCompass/Collection/PortfolioCollection",["UWA/Core","DS/WAFData/WAFData","UWA/Data","UWA/Class/Collection","DS/i3DXCompass/Tools","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s,a){"use strict";return o.extend({fetchPromise:function(n){var o,i,s=this,a=e.is(this.url,"function")?this.url():this.url;return o=e.Promise.deferred(),n||(n={}),n.proxy=null,n.ajax=t.request,n.cache=6e4,n.onComplete=function(e,t,n){o.resolve(s),caches.open("3dcompass-portfolio").then(function(e){var o=a+(s.data?JSON.stringify(s.data):"");return-1===Object.keys(n.responseHeaders).indexOf("Date")&&(n.responseHeaders.Date=new Date),e.put(o,new Response(JSON.stringify(t),{headers:n.responseHeaders}))})},n.onFailure=function(){caches.open("3dcompass-portfolio").then(function(e){var t=a+(s.data?JSON.stringify(s.data):"");return e.match(t)}).catch(function(e){o.reject(s)}).then(function(e){if(e)return e.json();o.reject(s)}).then(function(e){e&&((i=s.parse(e))?(s.set(i),s.dispatchEvent("onSync"),o.resolve(s)):o.reject(s))})},s.fetch(n),o.promise},parse:function(e){return e.map(function(e){return e.brand&&"3DExp Platform"!==e.brand||(e.brand="PLATFORM"),e.iconTemplate?e.iconTemplate=i.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return i.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return i.getPortfolioAssetTemplateUrl(e.id,t)})),e})}})}),define("DS/i3DXCompass/View/AppView",["UWA/Core","UWA/Utils","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Tools","DS/UIKIT/Tooltip"],function(e,t,n,o,i,s){"use strict";return n.extend({tagName:"div",className:"item-view-v3",domEvents:{click:"click","click .settings-img":"clickSettings"},clickable:!1,click:function(e){!e.target.hasClassName("settings-img")&&this.clickable&&this.dispatchEvent("onItemClick",[this.model,this.container])},clickSettings:function(t){this.clickable&&(e.Event.stop(t),this.dispatchEvent("onClickSettings",[this.model,this.container]))},setup:function(e){if(this.clickable=e.clickable,this.renderOnce=i.debounce(this.render,500,!0).bind(this),this.model&&this.model.addEvent("onChange:icon",this.renderOnce.bind(this)),this.model.isFamily&&this.model.isFamily()&&this.model.updateFamilyModel(),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.options.additionalAttribute)for(var t in this.options.additionalAttribute)this.options.additionalAttribute.hasOwnProperty(t)&&this.container.setAttribute(t,this.options.additionalAttribute[t]);this.container.setAttribute("data-id",this.model.get("id")),this.container.setAttribute("data-search",this.model.get("title")),this.model.get("quadrant")&&this.container.setAttribute("data-quadrant",this.model.get("quadrant")),this.clickable&&this.container.setAttribute("data-click",""),this.model.isWidget&&this.model.isWidget()&&(i.enableWidgetDrag(this.container,this.model.toJSON()),this.container.addClassName("widget-item")),this.model.isFamily&&this.model.isFamily()&&this.model.getChildrenForFamilyApp().Widget&&(i.enableWidgetDrag(this.container,this.model.getChildrenForFamilyApp().Widget.toJSON()),this.container.addClassName("widget-item"))},_injectTooltip:function(){this.tooltip&&this.tooltip.destroy(),this.tooltip=this.model.get("tooltip")?new s({target:this.container.getElement(".item-view-content-wrapper"),delay:{show:300},body:this.model.get("tooltip"),position:"bottom left",className:"compass-small-tooltip"}):null},render:function(){return this.container.setContent(this._getTemplate()),setTimeout(function(){this._lazyLoadImages(),this._injectTooltip()}.bind(this),0),this},_getTemplate:function(){var e={tag:"div",class:"img-unselect",styles:{"z-index":"2",height:"64px",width:"64px","background-size":"64px","background-repeat":"no-repeat","background-position":"50% 50%"},events:{error:function(){this.styles["background-image"]="url("+o.getWebappsAssetUrl("i3DXCompass","images/s.gif")+")"}}},t=this.model.get("icon")&&this.model.get("icon").indexOf("ROLE_64")>-1||this.options.defaultIcon?"":this.model.get("icon");return""===t&&(t=o.getWebappsAssetUrl("i3DXCompass","images/3DExpPlatform_Default.png")),"IntersectionObserver"in window?(e["data-src"]=t,e.loading="lazy",e.styles["background-image"]="url("+o.getWebappsAssetUrl("i3DXCompass","images/s.gif")+")"):e.styles["background-image"]="url("+t+")",[e,{class:"icon-wrapper "+this.options.additionalClassNameImage,styles:{position:"absolute","z-index":"1"},html:{class:"icon-group",html:this._buildGroup()}},{class:"item-view-content-wrapper title",text:this.model.get("title")},this.model.needSettingsMenu&&this.model.needSettingsMenu()&&this.clickable?this.buildSettingsElmt():null]},buildSettingsElmt:function(){return e.createElement("div",{class:"settings-img fonticon fonticon-chevron-down"})},_buildGroup:function(){var t=null;if(this.options.defaultIcon)t=o.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}",this.options.defaultIcon));else{var n=this.model.get("brand")||this.options.brand;t=o.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}_Role.svg",n||"PLATFORM"))}var i={tag:"img",events:{error:function(){this.src=o.getWebappsAssetUrl("i3DXCompass","images/3DExpPlatform_Default.png")}}},s=!this.model.get("icon")&&t||this.model.get("icon").indexOf("ROLE_64")>-1||this.options.defaultIcon?t:this.model.get("icon");return""===s&&(s=o.getWebappsAssetUrl("i3DXCompass","images/3DExpPlatform_Default.png")),i["data-src"]=s,i.loading="lazy",{class:"icon-group-item",styles:{position:"relative"},tag:"div",html:[this.model.get("granted")||this.model.get("buy")?null:{class:"icon-request",tag:"img",src:o.getWebappsAssetUrl("i3DXCompass","v3.1/images/Request_Badge.png")},!this.model.get("granted")&&this.model.get("buy")?{class:"icon-request",tag:"img",src:o.getWebappsAssetUrl("i3DXCompass","v3.1/images/Buy_Badge.png")}:null]}},_lazyLoadImages:function(){const e=this.container.getElements('[loading="lazy"]');if("IntersectionObserver"in window){const t=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting||void 0===e.isIntersecting){const t=e.target;"lazy"===t.getAttribute("loading")&&("img"===t.getTagName()?t.src=t.dataset.src:t.style["background-image"]="url("+t.dataset.src+")",t.setAttribute("loading","done"),t.removeAttribute("data-src"))}})});e.forEach(function(e){t.observe(e)})}else e.forEach(function(e){"img"===e.getTagName()?e.src=e.dataset.src:e.style["background-image"]="url("+e.dataset.src+")"})}})}),define("DS/i3DXCompass/View/AppListView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/Tools","DS/UIKIT/Tooltip","DS/i3DXCompass/CacheManager"],function(e,t,n,o,i){"use strict";return t.extend({tagName:"ul",className:"experience-list",setup:function(e){var t=this.collection;this.tooltips=[],this.customClass=e.customClass,this.favorite=e.favorite,this.draggable=e.draggable,this.customFilters=e.customFilters||{},t.addEvent("onMultipleAdd",this.addMultipleApp.bind(this)),t.addEvent("onRemove",this.removeApp.bind(this)),t.addEvent("onReorderApp",this.reorderApp.bind(this)),t.addEvent("onChange",this.updateItem.bind(this))},render:function(){var e=this.collection.filterApps(this.getFilters());return this.cleanTooltips(),this.container.setContent(this.buildAppSkeleton(e)),this.customClass&&this.container.addClassName(this.customClass),this.updateEmptyClass(),this},cleanTooltips:function(){this.tooltips.length>0&&(this.tooltips.invoke("destroy"),this.tooltips=[])},search:function(e){this.setCustomFilter("searched",e),this.render()},filterApps:function(e){this.setCustomFilter("appIds",e),this.render()},setCustomFilter:function(e,t){this.customFilters[e]=t||null},buildAppSkeleton:function(t){var n=this,o=[];return t.forEach(function(e){o.push(n.buildApp(e))}),o.push(e.createElement("li",{class:"clearfix"})),o},buildApp:function(t){var i,s=e.Utils.Client.Features.touchEvents,a=t.get("icon"),l=e.createElement("img",{class:"icon",id:"icon-"+t.get("id"),src:a,events:{error:function(){this.removeEvent("error"),this.src=this.src.substring(0,this.src.lastIndexOf("/"))+"/Default_App_Icon.png"},dragstart:function(e){this.draggable&&e.preventDefault()}}}),r=e.createElement("div",{text:t.get("title"),class:"title"}),c=e.createElement("li",{class:"exp-item"+(this.draggable?" drag-app":"")+(t.isRole()?" role"+(t.get("active")?" active":"")+(t.get("requested")?" requested":""):""),"data-id":t.id,"data-favorite-order":t.get("favoriteOrder"),html:[l,r]}),d=t.get("tooltip")||t.escape("title");return!s&&d&&(i=new o({className:"compass-small-tooltip",position:"bottom",target:c,delay:{show:1e3},body:d}),this.tooltips.push(i)),t.needSettingsMenu()&&this.buildSettingsElmt().inject(c),t.isWidget()&&(n.enableWidgetDrag(c,t.toJSON()),c.addClassName("widget-item")),t.isFamily()&&t.getChildrenForFamilyApp().Widget&&(n.enableWidgetDrag(c,t.getChildrenForFamilyApp().Widget.toJSON()),c.addClassName("widget-item")),t.isRole()&&t.get("granted")&&e.createElement("div",{class:"expand-img fonticon fonticon-right-open"}).inject(c),c},buildSettingsElmt:function(){return e.createElement("div",{class:"settings-img fonticon fonticon-right-open"})},getFilters:function(){var e=[],t=this.customFilters;return t.searched&&e.push({key:"searched",value:t.searched}),t.appIds&&e.push({key:"appIds",value:t.appIds}),e},changeApp:function(e){e.matchesFilters(this.getFilters())?this.addAppElmt(e):this.removeAppElmt(e)},addApp:function(e){e.matchesFilters(this.getFilters())&&this.addAppElmt(e)},addMultipleApp:function(e){e.length<5?e.forEach(this.addApp,this):this.render()},reorderApp:function(e){var t;e.matchesFilters(this.getFilters())&&(t=this.addAppElmt(e),this.favorite&&t.setData("favorite-order",e.get("favoriteOrder")))},removeApp:function(e){e.matchesFilters(this.getFilters())&&this.removeAppElmt(e)},addAppElmt:function(e){for(var t,n=!1,o=this.getAppElmt(e)||this.buildApp(e),i=this.collection.getPrevious(e);!n;)i?(t=this.getAppElmt(i))?(o.inject(t,"after"),n=!0):i=this.collection.getPrevious(i):(o.inject(this.container,"top"),n=!0);return this.updateEmptyClass(),o},removeAppElmt:function(e){var t=this.getAppElmt(e);t&&t.destroy(),this.updateEmptyClass()},getAppElmt:function(t){return this.getElement(e.String.format('[data-id="{0}"]',t.get("id")))},updateEmptyClass:function(){this.customFilters.searched||0!==this.collection.count(this.getFilters())?this.container.removeClassName("empty"):this.container.addClassName("empty")},addSettingsElmt:function(e,t){t&&!t.getElement(".settings-img")&&this.buildSettingsElmt().inject(t)},removeSettingsElmt:function(e,t){var n=t&&t.getElement(".settings-img");n&&n.destroy()},changePlatforms:function(e,t){e.needSettingsMenu()?this.addSettingsElmt(e,t):this.removeSettingsElmt(e,t)},updateItem:function(t){var o=this.getAppElmt(t),i=t._changed;o&&(e.is(i.active)&&o.toggleClassName("active",i.active),e.is(i.requested)&&o.toggleClassName("requested",i.requested),e.is(i.title)&&o.getElement(".title").setText(i.title),e.is(i.icon)&&o.getElement(".icon").setAttribute("src",i.icon),e.is(i.platforms)&&this.changePlatforms(t,o),t.isWidget()&&(e.is(i.title)||e.is(i.icon)||e.is(i.launchInfos)||e.is(i.config))&&n.enableWidgetDrag(o,t.toJSON()),t.isFamily()&&t.getChildrenForFamilyApp().Widget&&(e.is(i.title)||e.is(i.icon)||e.is(i.launchInfos)||e.is(i.config))&&n.enableWidgetDrag(o,t.getChildrenForFamilyApp().Widget.toJSON()))}})}),define("DS/i3DXCompass/Controls/BusinessExperienceSettings",["UWA/Core","DS/UIKIT/DropdownMenu","DS/i3DXCompass/Tools","DS/i3DXCompass/Feature","DS/i3DXCompass/EventManager","UWA/Utils","UWA/Class/Model"],function(e,t,n,o,i,s,a){"use strict";var l=e.i18n;return t.extend({init:function(e){var t;this.target=e.target,e.target.getOffsets(),this.target.addClassName("active"),this.model=e.model,t={items:this.getItems(),renderTo:e.renderTo||document.body,target:this.target,events:e.events},this._parent(t),this.trigger=e.trigger},buildSkeleton:function(){this._parent(),this.elements.container.addClassName("compass-app-settings")},getItems:function(){var e,t=this,n=[],o=[],i=!1;return this.model&&this.model.get("usages")&&this.model.get("usages").length>0?n=this.model.get("usages"):this.model&&this.model.get("platforms")&&this.model.get("platforms").length>1&&(n=this.model.get("platforms"),i=!0),n.forEach(function(n){e="",t.model.is_X3DBEMA_AP()&&t.model.get("appModel")&&t.model.get("appModel").get("platforms")&&(e=new a(t.model.get("appModel").get("platforms").detect(function(e){return e.id===n.id})),i=!0),o.push({id:i&&n.get?n.get("platformId"):e?e.get("id"):n.id,text:i&&n.get?n.get("displayName"):e?e.get("name"):n.title,selected:i&&n.get?t.model.preferedUsageId===n.get("platformId"):e?t.model.preferedUsageId===e.get("id"):t.model.preferedUsageId===n.id,handler:function(e){t.launchUsage(t.model,n)}})}),o},updateItem:function(e){this._parent(e)},launchUsage:function(t,n){var o=e.String.format(l("Launching {0}"),this.model.get("title"));i.dispatchEvent("onShowMessage",[o,5e3]),t.isDashboard()?this.model.savePreferedUsageId(n.get("platformId")):t.launchBusinessExperience(n),this._hide()},_hide:function(){this.hide(),this.destroy(),this.target.removeClassName("active")},onClickOutside:function(e){var t=e.target;t&&t===this.trigger&&e.stopPropagation(),this._hide()}})}),define("DS/i3DXCompass/View/BusinessMethodsListView",["UWA/Class/View","DS/i3DXCompass/Tools","DS/i3DXCompass/View/AppView","DS/i3DXCompass/Controls/BusinessExperienceSettings","UWA/Utils/Client","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e,t,n,o,i,s){"use strict";return e.extend({tagName:"div",className:"items-view-business-methods",setting:"",setup:function(e){return e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.renderOnce=t.debounce(this.render,500,!0).bind(this),this.collection&&(this.collection.addEvent("onAdd",this.renderOnce.bind(this)),this.collection.addEvent("onRemove",this.renderOnce.bind(this)),this.collection.addEvent("onChange",this.renderOnce.bind(this)),this.collection.length>0&&this.renderOnce()),this},buildSetting:function(e,t){var n=t.getElement(".settings-img").getOffsets(),s=i.getScrolls();this.setting=new o({model:e,target:t.getElement(".settings-img"),renderTo:document.body,position:{x:n.x-s.x,y:n.y-s.y+25}})},render:function(){var e=this;if(this.collection&&this.collection.forEach){var t=[],o=this.collection.size();this.collection.forEach(function(i,a){s.getAppInfo({appId:i.get("appId"),onComplete:function(s){o--,s.error||(i.updateModel(s),t[a]=new n({model:i,clickable:!0,additionalClassName:"app-item",additionalClassNameImage:s.brand?"is-"+s.brand.replace(" ","-"):"",events:{onHide:function(){e.setting&&e.setting.hide(),e.setting=""},onItemClick:function(e){e.launchBusinessExperience(e.getFistUsage())},onClickSettings:function(t,n){e.setting&&e.setting._hide(),e.setting="",e.buildSetting(t,n),e.setting.show()}}}).render()),0===o&&e.container.setContent(t.map(function(e){return e}))}})}),this.collection.length>0&&this.dispatchEvent("onShowBusinessMethodsSection")}return this}})}),define("DS/i3DXCompass/InterCom",["UWA/Utils/InterCom","DS/i3DXCompass/Tools"],function(e,t){"use strict";var n={initialize:function(o,i){var s=n.eventServer=new e.Server(o,{isPublic:!0});t.forEachOwnProperty(i,function(e,t){s.addListener(t,e)})},fireEvent:function(e,t){n.eventServer&&n.eventServer.dispatchEvent(e,t)}};return n}),define("DS/i3DXCompass/Controls/ScrollAccordion",["UWA/Core","UWA/Utils/Client","UWA/Event","UWA/Element","UWA/Controls/Abstract","DS/i3DXCompass/Tools","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip","DS/UIKIT/SuperModal"],function(e,t,n,o,i,s,a,l,r){"use strict";var c=s.i18n,d={defaultOptions:{className:"",sections:1,scrollable:!1,scrollSize:40},className:"compass-scroll-accordion",scrolled:0,sumHeight:0,containerHeight:0,scrollbarHeight:0,scrollMove:0,moved:!1,scrolling:!1,titleHeight:52,adjustDelay:300,adjustTimeoutId:null,fromAdjusScrolls:0,init:function(e){if(this._parent(e),e.data)e.sections!==e.data.length&&(this.options.sections=this.options.data.length);else{for(var t=e.sections-1,n=[];t>=0;t--)n.push({title:"",html:null,open:!0,visible:!0});this.options.data=n}this.sectionsByName={},this.buildSkeleton()},buildSkeleton:function(){var t,n,o,i,a,r,d,p,u,m,h,f,g=this,v=this.elements={container:e.createElement("div",{class:this.className+" smooth-scroll "+this.options.className}),wrapper:e.createElement("div",{class:this.className+"-wrapper"+("ios"===s.getOs()?" iosVersion":"")}),sections:[],sectionTitles:[],sectionContents:[],sectionContentWrappers:[]},C=0,b=this.options.sections,y=this.styles=[];for(h=e.createElement("div",{class:"delete-favorite",html:{tag:"span",class:"fonticon fonticon-trash"},events:{click:function(t){e.Event.stop(t),g._confirmModal()}}}),new l({position:"right",target:h,body:c("clickRemoveFavorite")});C<b;C++)f=(t=this.options.data[C]).parent?this.getParentElm(t.parent).elm:null,i=e.createElement("span",{class:this.className+"-section-title-icon "+("fonticon fonticon-"+t.icon||"")}),a=e.createElement("span",{class:this.className+"-section-title-text",text:t.title}),o=e.createElement("div",{class:this.className+"-section-title-wrapper"+(t.parent?" child":""),html:[i,a,{tag:"span",class:this.className+"-section-title-arrow fonticon fonticon-right-dir"},{tag:"span",class:this.className+"-section-title-arrow fonticon fonticon-down-dir"},"favorite"===t.id?t.html[0].collection.length>0?h:h.addClassName("hide"):""]}),u=v.sectionTitles.length,m=t.open?0:this.marginTopClosedSection(t),n=e.createElement("div",{class:this.className+"-section-title"+(t.icon?" has-icon":""),html:o,"data-sectionnum":u}),t.parent&&n.setAttribute("data-parent",t.parent),r=e.createElement("div",{class:this.className+"-section-content","data-sectionnum":u,html:t.html}),d=e.createElement("div",{class:this.className+"-section-content-wrapper",html:r,styles:{"margin-top":m}}),v.sectionTitles.push({container:n,icon:i,text:a}),v.sectionContents.push(r),v.sectionContentWrappers.push(d),p=e.createElement("div",{class:this.className+"-section"+(t.open?"":" closed")+(f&&!f.open?" hidden":"")+(t.name?" "+t.name:"")+(!1===t.visible?" not-visible":""),attributes:{"data-id":t.id},html:[n,{class:this.className+"-section-content-container",html:d}]}),v.sections.push(p),p.inject(v.wrapper),y.push({margin:m,height:0,closed:!t.open,scrollable:!!t.open,visible:!1!==t.visible}),t.name&&(this.sectionsByName[t.name]=u);v.wrapper.inject(v.container),this.options.scroller&&(v.scrollbar=e.createElement("div",{class:this.className+"-scrollbar"}),v.scrollbarWrapper=e.createElement("div",{class:this.className+"-scrollbar-wrapper",html:v.scrollbar}).inject(v.container)),this.initEvents()},marginTopClosedSection:function(e){for(var t=s.isSmartphone()?2:4,n=-1e4,o=0;o<e.html.length;o++)e.html[o].collection&&(n=Math.min(-141*e.html[o].collection.length/t,n));return n},setContent:function(e,t){var n=this.getSectionNum(e),o=this.elements.sectionContents[n];o&&o.setContent(t)},setTitle:function(e,t,n){var o,i,s,a,l=this.getSectionNum(e);l&&(o=this.elements.sectionTitles[l])&&(i=o.container,s=o.text,a=o.icon,s.setText(t),n?(i.addClassName("has-icon"),a.className=this.className+"-section-title-icon",a.addClassName(n)):i.removeClassName("has-icon"))},initEvents:function(){var e=this.eventHandler=this.handleEvent.bind(this),n=this.scrollbarEventHandler=this.handleScrollbarEvent.bind(this),o=this.titleEventHandler=this.handleTitleEvent.bind(this),i=this.eventNames={start:"touchstart",move:"touchmove",stop:"touchend",cancel:"touchcancel"};t.Features.touchEvents||(window.PointerEvent?(i=this.eventNames={start:"pointerdown",move:"pointermove",stop:"pointerup",cancel:"pointerup"},this.elements.wrapper.setStyle("touch-action","none")):window.MSPointerEvent&&(i=this.eventNames={start:"MSPointerDown",move:"MSPointerMove",stop:"MSPointerUp",cancel:"MSPointerUp"},this.elements.wrapper.setStyle("touch-action","none"))),this.options.scroller&&(this.elements.container.addEvent("mousewheel",e),this.elements.sectionContents.invoke("addEvent","transitionEnd",e),this.elements.container.addEvent(i.start,e),this.elements.container.addEvent("click",e,!1,0,!0),this.elements.scrollbar.addEvent("mousedown",n),this.elements.scrollbarWrapper.addEvent("transitionEnd",n)),this.elements.sectionContents.invoke("addEvent","resize",e),this.elements.container.addEvent("resize",e),this.elements.sectionTitles.forEach(function(e){e.container.addEvent("click",o)})},handleEvent:function(t){var n,o=this.eventNames;if(e.log("event:"+t.type),void 0===t.pointerType||"mouse"!==t.pointerType)switch(t.type){case o.start:n=this.dispatchEvent("onScrollInit",[t]);break;case o.move:n=this.dispatchEvent("onScrollMove",[t]);break;case o.cancel:case o.stop:n=this.dispatchEvent("onScrollStop",[t]);break;case"DOMMouseScroll":case"onmousewheel":case"mousewheel":n=this.dispatchEvent("onMouseWheel",[t]);break;case"onclick":case"click":n=this.dispatchEvent("onClick",[t]);break;case"transitionEnd":case"otransitionend":case"MSTransitionEnd":case"transitionend":case"webkitTransitionEnd":n=this.dispatchEvent("onScrollEnd",[t]);break;case"resize":n=t.target===this.elements.container?this.dispatchEvent("onContainerResize",[t]):this.dispatchEvent("onContentResize",[t])}return n},handleScrollbarEvent:function(e){var t;switch(e.type){case"mousedown":t=this.dispatchEvent("onScrollbarInit",[e]);break;case"mousemove":t=this.dispatchEvent("onScrollbarMove",[e]);break;case"mouseup":t=this.dispatchEvent("onScrollbarStop",[e]);break;case"transitionEnd":case"otransitionend":case"MSTransitionEnd":case"transitionend":case"webkitTransitionEnd":t=this.dispatchEvent("onScrollbarToggle",[e])}return t},handleTitleEvent:function(e){var t;switch(e.type){case"onclick":case"click":t=this.dispatchEvent("onTitleClick",[e])}return t},onTitleClick:function(e){var t=this,n=e.currentTarget.getData("sectionnum"),o=this.elements.container.getElements("[data-parent="+e.currentTarget.getParent().getAttribute("data-id")+"]");this.toggleSection(n),o.forEach(function(e){var o=t.elements.sections[n];o.hasClassName("closed")?(t.closeSection(e.getData("sectionnum")),o.hasClassName("hidden")||e.addClassName("hidden")):(t.openSection(e.getData("sectionnum")),e.removeClassName("hidden"),e.getParent().hasClassName("hidden")&&e.getParent().removeClassName("hidden"))}),o.length&&setTimeout(function(){t.dispatchEvent("onToggleSection")},800)},onClick:function(e){this.moved&&e.stopPropagation()},onMouseWheel:function(t){var o=n.wheelDelta(t)*this.options.scrollSize;e.log(n.wheelDelta(t)),e.log(n.wheelDelta(this.options.scrollSize)),e.log(o),this.scrolling=!0,this.scroll(o),t.preventDefault()},onScrollInit:function(e){var t=n.getPosition(e).y,i=this.eventNames,s=this.eventHandler;this.scrollMove=t,this.refMove=t,this.refTime=Date.now(),this.firstMove=t,this.moved=!1,o.addEvent.call(window,i.move,s),o.addEvent.call(window,i.stop,s),o.addEvent.call(window,i.cancel,s),this.elements.container.removeClassName("smooth-scroll"),this.scrolling=!0},onScrollMove:function(e){var t=n.getPosition(e).y,o=t-this.scrollMove,i=Date.now();this.scrollMove=t,this.scroll(o),i-this.refTime>300&&(this.refMove=t,this.refTime=i),!this.moved&&Math.abs(t-this.firstMove)>10&&(this.moved=!0),e.preventDefault()},onScrollStop:function(e){var t,i,s,a,l=this.eventNames,r=this.eventHandler;o.removeEvent.call(window,l.move,r),o.removeEvent.call(window,l.stop,r),o.removeEvent.call(window,l.cancel,r),this.elements.container.addClassName("smooth-scroll"),e&&(t=n.getPosition(e).y,i=Date.now()-this.refTime,a=(s=t-this.refMove)/i*300,Math.abs(s)>10&&i<=300?this.scroll(a):this.scrolling=!1)},onScrollbarInit:function(e){var t=n.getPosition(e).y,i=this.scrollbarEventHandler;0===n.whichButton(e)&&(this.scrollMove=t,o.addEvent.call(window,"mousemove",i),o.addEvent.call(window,"mouseup",i),this.elements.container.removeClassName("smooth-scroll"),this.elements.scrollbar.addClassName("grabbing")),e.stopPropagation()},onScrollbarMove:function(e){var t=n.getPosition(e).y,o=this.scrollableHeight,i=(t-this.scrollMove)*(o-this.sumHeight)/(this.scrollbarWrapperHeight-this.scrollbarHeight);this.scrollMove=t,this.scroll(i),e.preventDefault()},onScrollbarStop:function(){var e=this.scrollbarEventHandler;o.removeEvent.call(window,"mousemove",e),o.removeEvent.call(window,"mouseup",e),this.elements.container.addClassName("smooth-scroll"),this.elements.scrollbar.removeClassName("grabbing"),this.scrolling=!1},onScrollbarToggle:function(){var e=this.elements.scrollbarWrapper;0===e.getStyle("opacity")&&e.hide()},onScrollEnd:function(){this.scrolling=!1},onContainerResize:function(){var t,n=parseInt(this.elements.wrapper.getStyle("height"),10),o=this.styles,i=0;if(n!==this.containerHeight&&this.options.scroller){for(this.containerHeight=n,this.scrollbarWrapperHeight=n-12,t=this.styles.length-1;t>=0;t--)o[t].visible&&i++;e.log("containerHeight:"+n),e.log("visibleSections"+i),e.log("this.titleHeight"+this.titleHeight),this.scrollableHeight=n-i*this.titleHeight,this.dispatchEvent("onAdjustScrolls")}},onContentResize:function(e){var t=e.target,n=t.getData("sectionnum"),o=this.elements.sectionContentWrappers[n],i=this.styles[n],s=i.margin,a=parseInt(t.getStyle("height"),10);"NaN"===a.toString()&&(a=i.height),a!==i.height&&(i.height=a,o.setStyle("height",a),(!i.scrollable||s<-a)&&(o.setStyle("margin-top",-a),i.margin=-a),this.options.scroller&&(this.sumHeight=this.styles.reduce(function(e,t){return e+(t.closed&&!t.scrollable&&t.visible?0:t.height)},0),s<-a&&i.scrollable&&(this.scrolled+=s-i.margin),this.dispatchEvent("onAdjustScrolls")))},scroll:function(e){var t,n,o,i,s,a,l,r=e>0,c=this.elements.sectionContentWrappers,d=this.scrollableHeight,p=this.sumHeight,u=this.scrolled,m=r?c.length-1:0,h=r?-1:c.length;for(void 0===d&&(this.onContainerResize(),d=this.scrollableHeight);m!==h&&(s=this.styles[m],t=c[m],a=d-(p-u),!(0===e||e<0&&a>=0));r?m--:m++)s.scrollable&&s.visible&&(n=s.margin,o=s.height,a=e<0?Math.max(e,a):e,i=Math.max(Math.min(n+a,0),-o),t.setStyle("margin-top",i),s.margin=i,e-=l=i-n,u-=l);this.scrolled!==u&&this.dispatchEvent("onScroll",u-this.scrolled),this.scrolled=u,1!==this.fromAdjusScrolls&&(e>=0&&u<1?this.dispatchEvent("onScrollTop"):this.dispatchEvent("onScrollDown")),1===this.fromAdjusScrolls&&(this.fromAdjusScrolls=0),this.updateScrollbarPosition(),this.updateSectionStyles()},onAdjustScrolls:function(){this.adjustTimeoutId||(this.adjustTimeoutId=setTimeout(this.adjustScrolls.bind(this),this.adjustDelay))},adjustScrolls:function(){var e=this.scrollableHeight-(this.sumHeight-this.scrolled);this.adjustTimeoutId=null,e>0&&(this.fromAdjusScrolls=1,this.scroll(e)),this.updateScrollbar(),this.updateScrollbarPosition(),this.updateSectionStyles()},unScroll:function(e){for(var t,n=this.styles,o=n.length-1,i=0;o>=e;o--)(t=n[o]).scrollable&&t.visible&&(i-=t.margin);this.scroll(i)},updateScrollbar:function(){var e,t=this.scrollableHeight,n=this.sumHeight,o=this.elements,i=o.scrollbarWrapper,s=o.scrollbar;t>=n?(i.setStyle("opacity",0),o.container.removeClassName("has-scroller")):(e=t*this.scrollbarWrapperHeight/n,s.setStyle("height",e),i.show(),i.setStyle("opacity",1),this.scrollbarHeight=e,o.container.addClassName("has-scroller"))},updateScrollbarPosition:function(){var e=this.scrollableHeight,t=(this.scrollbarHeight-this.scrollbarWrapperHeight)*this.scrolled/(e-this.sumHeight);this.elements.scrollbar.setStyle("top",t)},updateSectionStyles:function(){for(var e,t,n,o,i,s,a,l,r,c=this.styles,d=this.elements.sections,p=c.length,u=p-1;u>=0;u--){e=c[u],t=null,o=d[u],n=e.height+e.margin<1,r=!(this.options.data&&!this.options.data[u].parent),a=!this.options.data||this.options.data[u].parent||r?this.options.data&&this.options.data[u].parent?this.getChildrenIndex(this.getParentElm(this.options.data[u].parent).index):[]:this.getChildrenIndex(u),s=!0,l=!0;for(var m=0;m<a.length;m++)c[a[m]].height+c[a[m]].margin<1==!1&&(r?l=!1:s=!1);if(e.scrollable&&(n&&s?(o.addClassName("closed"),e.closed=!0):(o.removeClassName("closed"),e.closed=!1)),n){for(i=u+1;i<p;i++)if(c[i].scrollable){t=c[i];break}(o.getChildren().length&&o.getChildren()[0].getAttribute("data-parent")&&o.hasClassName("closed")||r&&l)&&o.getChildren().length&&o.getChildren()[0].addClassName("hidden"),t&&t.margin<=-1?o.getAttribute("data-parent")&&o.addClassName("scrolled"):(o.getAttribute("data-parent")&&o.removeClassName("scrolled"),o.getChildren().length&&o.getChildren()[0].getAttribute("data-parent")&&!this.elements.container.getElement("[data-id="+o.getChildren()[0].getAttribute("data-parent")+"]").hasClassName("closed")&&o.getChildren()[0].removeClassName("hidden"))}else o.getAttribute("data-parent")&&o.removeClassName("scrolled"),o.getChildren().length&&o.getChildren()[0].getAttribute("data-parent")&&!this.elements.container.getElement("[data-id="+o.getChildren()[0].getAttribute("data-parent")+"]").hasClassName("closed")&&o.getChildren()[0].removeClassName("hidden")}},toggleSection:function(e){var t=this.elements.sectionContentWrappers[e],n=this.elements.sections[e],o=this.styles[e],i=o.closed,s=o.scrollable,l=this.options.scroller,r=i?0:-o.height;o.closed=!i,o.scrollable=i,l&&i?(s||(this.sumHeight+=o.height,this.scrolled-=o.margin),this.updateScrollbar(),this.unScroll(e)):(n.toggleClassName("closed"),t.setStyle("margin-top",r),l&&(i?this.sumHeight+=o.height:(this.sumHeight-=o.height,this.scrolled+=o.margin),o.margin=r),this.dispatchEvent("onAdjustScrolls"));var c=n.getAttribute("data-id");i?a.openSection({sectionName:c}):a.closeSection({sectionName:c}),this.dispatchEvent("onToggleSection")},showSection:function(t){var n=this.getSectionNum(t),o=this.elements.sections[n],i=this.styles[n];e.log("show section: "+t),i.visible||(i.visible=!0,this.scrollableHeight-=this.titleHeight,i.scrollable&&(this.sumHeight+=i.height,this.scrolled-=i.margin),o.removeClassName("not-visible"),this.dispatchEvent("onAdjustScrolls"))},hideSection:function(t){var n=this.getSectionNum(t),o=this.elements.sections[n],i=this.styles[n];e.log("hide section: "+t),i.visible&&(i.visible=!1,this.scrollableHeight+=this.titleHeight,i.scrollable&&(this.sumHeight-=i.height,this.scrolled+=i.margin),o.addClassName("not-visible"),this.dispatchEvent("onAdjustScrolls"))},getSectionNum:function(t){return"string"===e.typeOf(t)?this.sectionsByName[t]:t},closeSection:function(e){var t=this.getSectionNum(e);this.styles[t].closed||this.toggleSection(t)},openSection:function(e){var t=this.getSectionNum(e);this.styles[t].closed&&this.toggleSection(t)},getVisibleHeight:function(e){var t,n=this.getSectionNum(e);if(!(n>=this.options.sections))return(t=this.styles[n]).height+t.margin},showTempHeight:function(e,t){var n=this.getSectionNum(e),o=this.getVisibleHeight(n),i=this.styles[n];t>o&&this.elements.sectionContentWrappers[n].setStyle("margin-top",t-i.height)},hideTempHeight:function(e){var t=this.getSectionNum(e),n=this.styles[t];this.elements.sectionContentWrappers[t].setStyle("margin-top",n.margin)},isScrolling:function(){return this.scrolling},_confirmModal:function(){var e=this;new r({closable:!1}).dialog({body:c("confirmRemoveFavorite"),title:c("Remove all favorite Apps"),buttons:[{className:"primary",value:c("Remove"),action:function(t){e.dispatchEvent("onRemoveAllFavoriteApp"),t.hide()}},{value:c("cancel"),action:function(e){e.hide()}}]})},hideDeleteZone:function(){e.log("hideDeleteZone"),this.deleteZone.hide()},hideDeleteZone1:function(){e.log("hideDeleteZone1"),this.deleteZone.hide()},getPositionSection:function(e){var t;return this.options.data.forEach(function(n,o){n.id===e&&(t=o)}),t},getParentElm:function(e){for(var t=this.options.data,n=0;n<t.length;n++)if(t[n].id===e)return{index:n,elm:t[n]};return null},getChildrenIndex:function(e){for(var t=this.options.data,n=[],o=e+1;o<t.length;o++){if(t[e].id!==t[o].parent)return n;n.push(o)}return n}};return i.extend(d)}),define("DS/i3DXCompass/Model/GroupModel",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip","DS/UIKIT/SuperModal"],function(e,t,n,o,i,s){"use strict";return n.extend({setup:function(){"group"===this.get("type")?(this.set("canDelete",!0),this.set("canEdit",!0),this.set("defaultIcon","v3.1/images/Groups")):(this.set("canDelete",!1),this.set("canEdit",!1))},save:function(){},remove:function(){},updateTitle:function(e){this.set("title",e)},updateApp:function(e){this.set("appList",e)},deleteGroup:function(){var t=this;new s({closable:!1}).confirm(e.i18n("confirmRemoveFavorite"),e.i18n("confirmation"),function(e){e&&t.dispatchEvent("onRemoveGroup")})}})}),define("DS/i3DXCompass/Collection/PortfolioRoleCollection",["UWA/Core","UWA/Class/Model","DS/i3DXCompass/Collection/PortfolioCollection","DS/i3DXCompass/Tools"],function(e,t,n,o){"use strict";return n.extend({model:t,url:function(){return o.getPortfolioApiTemplateUrl("rootroles")},parse:function(e){return e.map(function(e){return e.brand&&"3DExp Platform"!==e.brand||(e.brand="PLATFORM"),e.iconTemplate?e.iconTemplate=o.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return o.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return o.getPortfolioAssetTemplateUrl(e.id,t)})),e})}})}),define("DS/i3DXCompass/ServiceApi/PortfolioApi",["UWA/Core","DS/i3DXCompass/Collection/PortfolioRoleCollection"],function(e,t){"use strict";var n=[],o=new t,i=!1,s=function(e){var t=o.find(function(t){return t.get("acronym")===e&&!t.get("contact")});return t&&(t=t.toJSON()),t},a=function(){n.forEach(function(e){setTimeout(e.callback,0,s(e.id))}),n.length=0};return{getPortolioRole:function(t,l){t&&l&&"function"===e.typeOf(l)&&function(t,l){o.size()>0?l(s(t)):(n.push({id:t,callback:l}),i||(i=!0,o.fetchPromise().then(function(){i=!1,a()},function(){i=!1,e.log("fetch: onFailure")})))}(t,l)},_private:{callbacks:n,fireCallbacks:a}}}),define("DS/i3DXCompass/View/BasketView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Mask","DS/i3DXCompass/Feature","DS/i3DXCompassServices/i3DXCompassPubSub"],function(e,t,n,o,i,s){"use strict";return t.extend({tagName:"div",className:"basket-view",setup:function(e){return this},_getTemplate:function(){return[{class:this.className+"-header",html:[{class:"title",text:"buy"}]},{tag:"mpf-buy-wrapper"}]},render:function(){var e=this.container;return o.mask(e),require(["DS/MPFMyCartSummary/MyCartSummaryFactory"],function(t){t.createMyCartSummary().then(function(t){t.addEvent("addAdditionalItems",function(){s.publish("navigateToHome")}),e.setContent(t.render()),o.unmask(e)})}),this}})}),define("DS/i3DXCompass/View/RoleSeoView",["UWA/Core","DS/i3DXCompass/View/RoleView","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Tools","DS/i3DXCompass/Feature","DS/UIKIT/Tooltip"],function(e,t,n,o,i,s){"use strict";return t.extend({tagName:"a"})}),define("DS/i3DXCompass/View/TopBarOverlayView",["UWA/Core","UWA/Class/View","DS/UIKIT/Input/Button","UWA/Utils","DS/i3DXCompass/Tools","DS/i3DXCompassServices/i3DXCompassPubSub"],function(e,t,n,o,i,s){"use strict";return t.extend({tagName:"div",className:"compass-v3 top-bar-overlay",topBar:"",topBarAlreadyExist:!1,hideTopBarCenter:!1,open:!1,setup:function(e){this.defaultQuadrant=e.defaultQuadrant,this.logoClassName=e.logoClassName,this.setTopBar(),this.setCompass(),this.updateCompassQuadrantClass(this.compass.getElement(".compass-on"),e.defaultQuadrant),this.compass.getElement(".compass-ct").hasClassName("open")||this.compass.getElement(".compass-ct").addClassName("open"),this.topBarAlreadyExist||this.render()},render:function(){var e=this.compass,t=(this.topBar,e.getElement(".compass-on"));this.open=!0,this.updateCompassQuadrantClass(t,i.getCurrentQuadrant()),o.Client.getSize().width>649&&!document.querySelector(".topbar-cmd.fonticon.fonticon-close")?this.topBarAlreadyExist?(e.getElement(".compass-ct").hasClassName("open")||e.getElement(".compass-ct").addClassName("open"),document.querySelector(".topbar-center").style.display&&"none"===document.querySelector(".topbar-center").style.display&&(this.hideTopBarCenter=!0,document.querySelector(".topbar-center").style.display="block",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="none",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display="none"),this.manageSearch(),document.querySelector(".topbar-center .tagnav").hide(),document.querySelector(".topbar-center .menu").hide(),this.getCrossButton().show().inject(this.container),this.inject(this.topBar.lastElementChild,"after")):document.querySelector(".add-top-bar")||(this.container.addClassName("add-top-bar"),this.getTopBarHeader().show().inject(this.container),this.inject(document.body)):this.topBarAlreadyExist||document.querySelector(".add-top-bar")||(this.container.addClassName("add-top-bar"),this.getTopBarHeader().show().inject(this.container),this.inject(document.body))},updateCompassQuadrantClass:function(e,t){var n=e!==this.compass.getElement(".compass-on")?this.compass.getElement(".compass-on"):null;e.removeClassName&&(e.removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south"),i.isCompassV3()&&e===this.compass.getElement(".compass-on")&&this.open||e.addClassName(t)),n&&n.hasClassName&&!n.hasClassName(t)&&n.removeClassName&&(n.removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south"),!i.isCompassV3()&&this.open&&n.addClassName(t))},manageSearch:function(){var e=document.body.getElement(".search-active");e&&e.removeClassName("search-active");var t=document.body.getElement(".topbar-cmd.search.active");t&&t.removeClassName("active")},getTopBarHeader:function(){return e.createElement("div",{class:"topbar-header",html:{tag:"span",class:"topbar-app-brand",text:"My3DEXPERIENCE"}})},getCrossButton:function(){var t=this;return e.createElement("div",{class:"topbar-cmd fonticon fonticon-close",styles:this.topBarAlreadyExist?"":{position:"fixed",left:"90%"},events:{click:function(){t.dispatchEvent("onClose")}}})},closeCompassV2:function(e){var t=this.compass;this.topBar,t.getElement(".compass-on");this.open=!1,document.getElement(".topbar-cmd.fonticon.fonticon-close").remove(),this.remove(),document.querySelector("."+this.logoClassName).show(),e&&this.dispatchEvent("onClose"),this.hideTopBarCenter?(document.querySelector(".topbar-center").style.display="none",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display=""):document.querySelector(".topbar-center .tagnav").show(),o.Client.getSize().width>639&&t.getElement(".compass-ct").addClassName("open"),this.updateCompassQuadrantClass(this.compass.getElement(".compass-on"),i.getCurrentQuadrant()),this.hideTopBarCenter=!1,s.publish("compassCloseV32TopBar",{})},closeCompassV2FullSize:function(e){var t,n=this.compass,s=(this.topBar,document.querySelector("."+this.logoClassName));n.getElement(".compass-on"),n.getElement(".compass-over-v3");this.open=!1,o.Client.getSize().width<959&&(t=i.getCurrentQuadrant(),this.remove(),this.updateCompassQuadrantClass(s,t),this.topBarAlreadyExist&&(this.hideTopBarCenter?(document.querySelector(".topbar-center").style.display="none",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display=""):(document.querySelector(".topbar-center .tagnav").show(),document.querySelector(".topbar-center .menu").show())),e&&this.dispatchEvent("onClose")),this.hideTopBarCenter=!1},setTopBar:function(){document.querySelector("#topbar")&&(this.topBar=document.querySelector("#topbar"),this.topBarAlreadyExist=!0)},setCompass:function(){document.querySelector("#topbar")?this.compass=document.querySelector("#compass_ctn"):document.querySelector("#compass-container")&&(this.compass=document.querySelector("#compass-container"))}})}),define("DS/i3DXCompass/Csrf",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/i3DXCompass/Tools"],function(e,t,n,o){"use strict";var i=null,s=null,a=null;return{initialize:function(e,t){i=e,s=t},request:function(t,i,a){var l,r=function(t){"function"==typeof a.onFailure?a.onFailure.apply(this,arguments):(e.log("ERROR"),e.log(t))};return l={timeout:15e3,method:"GET",type:"json",headers:{Accept:"application/json","Accept-Language":s},proxy:"passport",data:{os:o.detectOs()},cache:-1,onComplete:function(t){var n;t.code&&"0"!==t.code||t.error?(n=t.message&&""!==t.message?t.message:t.error&&t.error.type?t.error.type:t.error?t.error:t,t.error&&"java.net.SocketTimeoutException: Read timed out"===t.error.status&&e.log(e.i18n.get("Action is still pending... Please wait a few seconds and refresh your widget")),"function"==typeof a.onFailure?a.onFailure(t):e.log(n)):"function"==typeof a.onComplete&&a.onComplete(t)},onFailure:r,onTimeout:function(t){e.log(e.i18n.get("Action is still pending... Please wait a few seconds and refresh your widget")),r(t)}},n.authenticatedRequest(t,l)},formatUrl:function(e){return 0===e.indexOf("http")?e:i+""+e},getTokenCSRF:function(){return a},getOrGenerateTokenCSRF:function(t){a="Pending",this.request(this.formatUrl("security/csrf"),{},{onComplete:function(n){e.log(n),a=n["X-DS-CSRFTOKEN"],t&&t.context.request&&t.context.request(t.options)},onFailure:function(n){e.log(n),a=null,t&&t.callbacks&&"function"==typeof t.callbacks.onFailure&&t.callbacks.onFailure(n)}})}}}),define("DS/i3DXCompass/Data",["UWA/Core","UWA/Utils","UWA/Ajax","UWA/Data","DS/i3DXCompass/InterCom","DS/i3DXCompass/EventManager","DS/WebappsUtils/WebappsUtils","DS/WAFData/WAFData","DS/i3DXCompass/CacheManager","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/i3DXCompass/Tools","UWA/Storage","DS/i3DXCompass/Csrf","DS/i3DXCompass/Feature","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","UWA/Storage/Adapter/Object"],function(e,t,n,o,i,s,a,l,r,c,d,p,u,m,h){"use strict";var f,g,v,C=e.i18n,b={root:null,saveSectionTimeout:0,initialize:function(t,n){t.myAppsBaseUrl=t.myAppsBaseUrl.replace("/resources/AppsMngt","");var o=t.myAppsBaseUrl.replace(/\/$/,"")+"/resources/AppsMngt/";if(u.initialize(o,t.lang),this.myAppsBaseUrl=o,this.getAppsUrl=o+"apps/compass",t.platform&&(this.selectedPlatform=t.platform),t.userId?this.getAppsUrl=o+"apps/compass":this.getAppsUrl=o+"apps/public/compass",t.addinMode){this.addinMode=t.addinMode;try{localStorage.setItem("3DCompass-addinMode",JSON.stringify(t.addinMode))}catch(e){}}else try{var i=localStorage.getItem("3DCompass-addinMode");i?this.addinMode=JSON.parse(i):d.getAddinModeURL()&&(this.addinMode=d.getAddinModeURL(),localStorage.setItem("3DCompass-addinMode",JSON.stringify(d.getAddinModeURL())))}catch(e){try{d.getAddinModeURL()&&(this.addinMode=d.getAddinModeURL(),localStorage.setItem("3DCompass-addinMode",JSON.stringify(d.getAddinModeURL())))}catch(e){}}r.setup(t.userId,t.lang),this.setPreferencesUrl=o+"user/setPreferences",this.getPreferencesUrl=o+"user/getPreferences",this.setFavoriteUrl=o+"user/setFavorite",this.setSectionUrl=o+"apps/compass/section",this.getProcessDetailsUrl=o+"apps/licenses",this.requestRoleUrl=o+"role/request",this.tryRoleUrl=o+"role/try",this.encryptUrl=o+"security/encrypt",this.decryptUrl=o+"security/decrypt",this.getSuggestionsUrl=o+"role/suggestions",this.getAppInfoUrl=o+"apps",this.getFeatureCompass=o+"infos/feature/compass",this.preference=o+"api/v1/compass/preference",this.getPreferencesUserUrl=o+"user/preference",this.media=o+"media",t.myAppsBaseUrl&&!t.registryUrl&&(t.myAppsBaseUrl.indexOf("-apps.")>0?this.registryUrl=t.myAppsBaseUrl.replace("-apps.","-registry.").replace("/enovia",""):this.registryUrl=o.replace("AppsMngt/","AppsMngtRegistry/")),t.passportUrl&&(this.passportUrl=t.passportUrl),this.onlineInstallUrl=null,this.buildTransactionId=null,f=e.extend({},t),this.root=n,this.lang=t.lang,s.dispatchEvent("onInitialized")},request:function(n){var i,s,a,c=this,d={Accept:n.Accept||"application/json","Accept-Language":f?f.lang:null},p=n.proxy;"POST"!==n.method&&"PUT"!==n.method||!n.contentType||(d["Content-Type"]=n.contentType,d["X-DS-CSRFTOKEN"]=u.getTokenCSRF()),n.headers&&(d=e.merge(d,n.headers)),a=function(e,t){e&&(e.code&&e.code.indexOf&&-1!==e.code.indexOf("CSRF")||e.indexOf&&-1!==e.indexOf("CSRF"))||t&&(t.code&&t.code.indexOf&&-1!==t.code.indexOf("CSRF")||t.indexOf&&-1!==t.indexOf("CSRF"))?u.getOrGenerateTokenCSRF({context:c,options:n}):n.onFailure&&(t?n.onFailure(t):n.onFailure(e))},i={timeout:void 0!==n.timeout?n.timeout:15e3,cache:b._getCacheLevel(n),method:n.method||"GET",type:n.type||"json",headers:d,proxy:"none"!==p&&r._getUser()?p||"passport":null,data:n.postData,onComplete:n.onComplete,onFailure:a},n.urlParams&&(n.urlParams.debug=(void 0===v&&(v=-1!==window.location.search.indexOf("debug")),!1!==v||null));var m=e.Utils.getQueryString(window.location.href,"ticket");return m&&"passport"===i.proxy&&(n.urlParams||(n.urlParams={}),n.urlParams.ticket=m),s=n.url+(n.urlParams?"?"+t.toQueryString(n.urlParams):""),b._isCorsAvailable(n)||n.urlParams&&n.urlParams.cors?"passport"===i.proxy?l.authenticatedRequest(s,i):l.request(s,i):o.request(s,i)},_request:function(){return m.isMobileAppEnvironment()?l.authenticatedRequest:o.request},_getCacheLevel:function(e){var t=d.getBrowser(),n=0;return"internet explorer"!==t&&"edge"!==t||(n=-1),void 0!==e.cache?e.cache:n},get3DDashboardUrl:function(e){var t=this;this.dashboardUrl?e&&e(this.dashboardUrl):c.getServiceUrl({serviceName:"3DDashboard",onComplete:function(n){var o;n.length>0&&(o=n.detect(function(e){return e.url}))&&(t.dashboardUrl=o.url),e&&e(t.dashboardUrl)}})},_get3DDashboardUrl:function(e,t){h.getServicesByPlatform({platforms:e.platform&&e.platform.length>0?e.platform:[this.selectedPlatform],services:["3DDashboard"],config:{url:this._getRegistryURL()}}).then(t,t)},getBusinessExperienceUrl:function(e,t){"dsrtv:"!==window.location.protocol?h.getServicesByPlatform({platforms:e.platform&&e.platform.length>0?e.platform:[this.selectedPlatform],services:["businessexperience"],config:{url:this._getRegistryURL()}}).then(t,t):t()},setPreferences:function(e){var t={url:b.setPreferencesUrl,urlParams:e,onComplete:function(e){0===e.code?s.dispatchEvent("onShowMessage",[e.message,5e3]):s.dispatchEvent("onShowMessage",[e.message||C("errorsavingpreferences"),5e3])},onFailure:function(e){s.dispatchEvent("onShowMessage",[e&&e.message||C("errorsavingpreferences"),5e3])}};b.request(t)},getPreferences:function(t){e.is(r._getUser())&&b.request({url:b.getPreferencesUserUrl,type:"json",Accept:"text",urlParams:t.urlParams,onComplete:function(e){t.onComplete&&t.onComplete(e)},onFailure:function(e){t.onFailure&&t.onFailure(e)}})},saveSectionStatus:function(e){clearTimeout(b.saveSectionTimeout),b.saveSectionTimeout=setTimeout(function(){b.request({method:"PUT",url:b.setSectionUrl,contentType:"application/x-www-form-urlencoded",postData:{name:"value",value:e},cache:null})},1100)},setPreference:function(e){var t={url:b.setPreferencesUrl,urlParams:{name:e.name,value:e.value},cache:null,onComplete:function(t){t&&0===t.code?e&&e.onComplete&&e.onComplete():e&&e.onFailure&&e.onFailure()},onFailure:function(t,n){e&&e.onFailure&&e.onFailure()}};b.request(t)},getCasTgc:function(n){var o,i=this,s="ios"===d.getOs(),r={timeout:15e3,method:"GET",type:"json",onFailure:function(){n.onComplete()}},c=null,u=function(){r.onComplete=function(c){c.result?function(c){var d=t.encodeUrl(t.buildUrl(window.location,a.getWebappsBaseUrl()+"i3DXCompass/gettgc.html")),p=n.passportUrl.replace(/\/$/,"")+"/",u=t.buildUrl(p,"cas/getcastgc?userid="+f.userId+"&service=V6&ticket="+c+"&callback="+d),m=new RegExp("castgc=(.*-cas)");r.type="text",r.onComplete=function(t){if(t.data)"com.ds.compass"===(t=JSON.parse(t.data)).target&&(o.destroy(),window.removeEventListener("message",r.onComplete),"notgc"===t.castgc?n.onComplete():(s?g=t.castgc:i.storage.set("casTGC",t.castgc),n.onComplete(t.castgc)));else if(m.test(t)){e.log("CORS request succeeded");var a=m.exec(t);s?g=a[1]:i.storage.set("casTGC",a[1]),n.onComplete(a[1])}else n.onComplete()},r.onFailure=function(e){n.onComplete()},r.responseType="";try{l.request(u,r)}catch(t){e.log("CORS request failed"),window.addEventListener("message",function(e){i.storage.set("casTGC",e),r.onComplete(e)}),o=e.createElement("iframe",{src:u,class:"tgc-frame",styles:{border:"none",width:"0px",height:"0px"}}).inject(b.root)}}(c.result):n.onComplete()},l.request(f.proxyTicketUrl+(new Date).getTime(),r)};if(this.storage||(this.storage=new p({adapter:"Object",database:"compass"})),s)if(g)n.onComplete(g);else{try{g=i.storage.get("casTGC",5e3)}catch(e){}n.passportUrl?u():n.onComplete()}else{try{c=i.storage.get("casTGC",5e3)}catch(e){}c?n.onComplete(c):n.passportUrl?u():n.onComplete()}},getCasTransientUrl:function(o){var i,s={timeout:15e3,method:"GET",type:"json",onFailure:function(){o.onComplete()}},a=o.passportUrl.replace(/\/$/,"")+"/",l=t.buildUrl(a,"api/authenticated/cas/transient");s.type="json",s.onComplete=function(t){var n;if(t)try{(t=JSON.parse(t)).x3ds_reauth_url&&(n=t.x3ds_reauth_url)}catch(t){e.log("Authentication issue"),e.log(t)}o.onComplete(n)},s.onFailure=function(){o.onComplete()};try{(i=n.getRequest(l,s)).withCredentials=!0,i.send()}catch(t){e.log("CORS FAIL: getTransientUrl"),o.onComplete("")}},fetchPassportUrlForPlatform:function(e,t){h.getServicesByPlatform({platforms:e,services:["3dpassport"],config:{url:this._getRegistryURL()}}).then(t,t)},getCasTgcAndCasTransientUrl:function(t){var n,o,i=this,a=2,l=function(i){0===--a&&(e.is(n)&&e.is(o)?t.onComplete(n,o,i):(s.dispatchEvent("onShowMessage",C("sessionExpirationTitle")),c.getPlatformServices({onComplete:function(t){e.log(t)}})))};i.fetchPassportUrlForPlatform(t.platform?[t.platform]:[this.selectedPlatform],function(t){e.log(t);var s="";t&&t[0]&&t[0].services[0]&&(s=(s=t[0].services[0].url).replace("/cas","")),i.getCasTgc({passportUrl:s,onComplete:function(e){n=e,l(s)}}),i.getCasTransientUrl({passportUrl:s,onComplete:function(e){o=e,l(s)}})})},_isCorsAvailable:function(e){return e.url&&(e.url.indexOf(b.myAppsBaseUrl)>-1||e.url.indexOf("resources/compass/api")>-1)},_getRegistryURL:function(){return b.registryUrl}};return b}),define("DS/i3DXCompass/ServiceApi/UserStartupApi",["UWA/Core","DS/i3DXCompass/Data","DS/i3DXCompass/CacheManager"],function(e,t,n){"use strict";var o,i,s,a,l,r=!1,c=!1,d=[],p=function(){var e=u();return e?e+"user/startup":null},u=function(){return t.myAppsBaseUrl||l},m=function(e){return e=e||"",p()+a+e},h=function(e){return o||(o=n.getCache(m(e),144e5)),o},f=function(e){d.forEach(function(t){t[e]&&setTimeout(t[e],0,i)}),d.length=0},g=function(e){if(!p()&&(e.config&&e.config.myAppsBaseUrl||"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.myAppsBaseUrl)&&(l=(l=(l=e.config&&e.config.myAppsBaseUrl?e.config.myAppsBaseUrl:COMPASS_CONFIG.myAppsBaseUrl).replace("/resources/AppsMngt","")).replace(/\/$/,"")+"/resources/AppsMngt/"),e.config&&e.config.userId&&e.config.lang&&n.setup(e.config.userId,e.config.lang),!p())throw new Exception("No url found for myAppsBaseUrl");var o,s;c=!0,o=e.platform,s=h(o),i=s?JSON.parse(s.split("@@@")[1]):null;var a={cors:!0,platform:e.platform,roles:!0};t.request({url:p(),urlParams:a,headers:{"Accept-Language":e&&e.config?e.config.lang:null,"Last-Modified":function(){var e=h();return e?e.split("@@@")[0]:null}()},onComplete:function(t,o){var s=o&&(o["Last-Modified"]||o["Last-Modified".toLowerCase()]);r=!0,t&&(o&&s&&0===t.code&&!1===t.pending&&function(e,t,o){n.setCache(m(o),e+"@@@"+JSON.stringify(t))}(s,t,e.platform),i=t),f("onComplete"),c=!1},onFailure:function(){f(i?"onComplete":"onFailure"),c=!1}})};return{fetch:function(t){t&&"function"===e.typeOf(t.onComplete)&&(t.config&&t.config.userId&&(a=t.config.userId),function(e){var t=Date.now();r&&(!s||t-s<2e4)?e.onComplete(i):(s=t,d.push({onComplete:e.onComplete,onFailure:e.onFailure}),c||g(e))}({platform:t.platform,config:t.config,onComplete:t.onComplete,onFailure:t.onFailure}))}}}),define("DS/i3DXCompass/DaemonManager",["UWA/Core","UWA/Utils","UWA/Json","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/UIKIT/Alert","DS/UIKIT/Modal","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/UIKIT/Spinner","DS/UIKIT/Popover","DS/UIKIT/Input/Select","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s,a,l,r,c,d,p,u,m,h){"use strict";var f=["discoverAllInstall","startV6install","createShortcutFromV6Install","installMedia","selfUpdate","uninstall","runScript"],g=s.i18n,v=null,C={version:"1.0",msi:"0",frameId:"16086506-8109-4ac5-82d6-3e2f550fd401",ports:{localHttp:[20250,33150,40550,20250,33150,40550],localHttps:[20300,33200,40600,20300,33200,40600],myApps:void 0},daemonBase:"http://127.0.0.1",defaultFramePort:4444,framePort:null,framePath:"{0}:{1}/iframe?version={2}&id={3}#origin:{4}",frameOrigin:"{0}:{1}",frame:null,catEnvConfig:null,scriptsConfiguration:[],functionPath:"{0}:{1}/{2}?version={3}&castgc={4}&cryptws={5}&arg={6}&x3ds_transient_auth_url={7}",functionPathNoCrypt:"{0}:{1}/{2}?version={3}&arg={4}",requestPath:"{0}:{1}/{2}",origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+(window.location.pathname?"/"+window.location.pathname:""),timeout:2500,storageId:"compass-daemon-port",dpInfo:null,installing:!1,installed:!1,init:function(t,n){var o=parseInt(localStorage.getItem(C.storageId),10),i=C.getLocalPorts();e.is(o,"number")&&(-1===i.indexOf(o)?s.unshiftUnique(i,o):s.moveToFirst(i,o)),C.root=t,C.cloud=n},getFramePath:function(t){return e.String.format(C.framePath,C.daemonBase,t,C.version,C.frameId,encodeURIComponent(C.origin))},getFrameOrigin:function(){return e.String.format(C.frameOrigin,C.daemonBase,C.framePort)},parseMessage:function(e){return e},cryptArg:function(t){i.request({url:i.encryptUrl,method:"POST",type:"text",Accept:"text/plain",contentType:"application/x-www-form-urlencoded",postData:{value:t.arg},timeout:6e5,onComplete:function(e){i.getCasTgcAndCasTransientUrl({onComplete:function(n,o){t.onComplete({encrypted:e,tgc:n||"",x3dAuthUrl:o||""})}})},onFailure:function(n){e.log(n),t.onFailure()}})},buildMessage:function(t){var o,s,a=t.data,l=a.arg.functionName;"isDaemonBusy"===l?(o=e.String.format(C.requestPath,C.daemonBase,C.framePort,a.arg.functionName),t.onComplete({id:a.id,data:o})):(s=n.encode(a.arg),-1===f.indexOf(l)?(o=e.String.format(C.functionPathNoCrypt,C.daemonBase,C.framePort,"function",C.version,encodeURIComponent(s)),t.onComplete({id:a.id,data:o})):C.cryptArg({arg:s,onComplete:function(n){o=e.String.format(C.functionPath,C.daemonBase,C.framePort,"function",C.version,encodeURIComponent(n.tgc),encodeURIComponent(i.decryptUrl),encodeURIComponent(n.encrypted),encodeURIComponent(n.x3dAuthUrl)),t.onComplete({id:a.id,data:o})},onFailure:t.onFailure}))},request:function(n){var o,i,s,a=n.onFailure||function(){},l=function(){s=t.getUUID(),i=function(e){var t=C.parseMessage(e.data),o=t.id,l=t.data;o===s&&(i&&window.removeEventListener("message",i),0===l.returnCode?n.onComplete(l.content):103===l.returnCode||104===l.returnCode?C.showUpgradeModal({onComplete:function(){C.request(n)},onFailure:a}):a({returnCode:l.returnCode,commentary:l.commentary}))},window.addEventListener("message",i),o={id:s,arg:{functionName:n.functionName,params:n.params||{}}},C.buildMessage({data:o,onComplete:function(t){e.log(t),C.frame.contentWindow.postMessage(t,C.getFrameOrigin())},onFailure:a}),e.log(o)};C.installing||(C.installed?l():C.installDaemon({onComplete:function(){l()},onFailure:a,silent:n.silent}))},getLocalPorts:function(){return 0===C.daemonBase.indexOf("https://")?C.ports.localHttps:C.ports.localHttp},installDaemon:function(t){e.log("install daemon");var n=0,o=C.getLocalPorts(),s=o[n],a=function(){!0!==t.silent?C.getDpInfo({onComplete:function(e){C.showModal(t,e)}}):(e.log("launchApp event: silent mode is activated"),C.installing=!1,t.onFailure({}))},l={silent:t.silent,onComplete:t.onComplete,onFailure:t.onFailure,onPortFailure:function(){var t=C.ports.myApps;++n<o.length?(s=o[n],C.installDaemonOnPort(l,s)):n===o.length?e.is(t,"number")?C.installDaemonOnPort(l,t):null===t?a():i.request({url:i.getPreferencesUrl,type:"text",urlParams:{name:C.storageId},onComplete:function(n){var i=parseInt(n,10);e.is(i,"number")&&-1===o.indexOf(i)?(t=C.ports.myApps=i,C.installDaemonOnPort(l,t)):(C.ports.myApps=null,a())},onFailure:function(){a()}}):a()}};C.installDaemonOnPort(l,s)},installDaemonOnPort:function(t,n,o){var a,l,r;C.installing=!0,r=function(a){var c,d,p=C.parseMessage(a.data);p.id===C.frameId&&(e.log("iframe loaded"),window.removeEventListener("message",r),window.clearTimeout(l),a.origin&&((c=a.origin.split(":")).length>=2&&(d=parseInt(c[2],10)),d!==n&&(C.frame.src=C.getFramePath(d),n=d)),C.framePort=n,localStorage.setItem(C.storageId,C.framePort),o&&i.request({url:i.setPreferencesUrl,urlParams:{name:C.storageId,value:C.framePort}}),C.installing=!1,e.log("Daemon MSI version: "+p.data.msi),e.log("Daemon version: "+p.data.daemon),C.msi=p.data.msi||C.msi,C.version=p.data.daemon||C.version,C.installerType=p.data.type,!0!==t.silent?(C.installed=!0,C.getDpInfo({onComplete:function(n){var o=(n=n[0]).version,a=!n.options||n.options&&!0!==n.options.forceUpdate;null===o||s.compareVersion(C.msi,o)>=0?t.onComplete():(t.onOutdated&&(t.onOutdated(),t.onOutdated=void 0),p.data.daemon&&s.compareVersion(C.version,"2.0")>=0?i.request({url:i.getProcessDetailsUrl,urlParams:{os:s.getOs()},onComplete:function(e){C.installationPaths=e.installationPaths||[],C.showSelfUpdateModal(t,a)}}):C.showUpgradeModal(t,!0)),e.log("DP version: "+o)}})):t.onComplete&&t.onComplete())},window.addEventListener("message",r),l=window.setTimeout(function(){e.log("frame not loaded:"+C.getFramePath(n)),window.removeEventListener("message",r),a.destroy(),t.onPortFailure()},C.timeout),a=C.frame=e.createElement("iframe",{src:C.getFramePath(n),class:"daemon-frame",styles:{border:"none",width:"0px",height:"0px"}}).inject(C.root)},uninstallDaemon:function(){C.frame.destroy(),C.installed=!1},_buildDownloadButton:function(e,t,n){var o;return 1===e.length?o=new c({value:s.htmlEntityDecode(g("downloadlauncher")),className:"primary "+t,events:{onClick:function(){window.open(e[0].url),this.disable(),this.setClassName("default "+t),n.enable(),n.setClassName("primary")}}}):(o=new c({value:s.htmlEntityDecode(g("downloadlauncher")),className:"primary "+t,dropdown:{position:"bottom right",items:e.map(function(e){return{"data-url":e.url,text:s.htmlEntityDecode(e.tags.indexOf("ds6w:what/dp3ds:linux-distro/debian")>-1?g("downloadlauncherDeb"):g("downloadlauncherRpm"))}})}})).addEvent("onDropdownClick",function(e,o){console.log(o),window.open(o["data-url"]),this.disable(),this.setClassName("default "+t),n.enable(),n.setClassName("primary")}),o},showModal:function(t,n){var i=t.onComplete,s=t.onFailure,a=new c({value:g("continue"),className:"primary",disabled:!0,events:{onClick:function(){var n=parseInt(u.getValue(),10);e.is(n,"number")?(m.show(),t.onComplete=function(){D.hide(),i()},t.onPortFailure=function(){D.getContent().getElement(".modal-content").addClassName("failure"),w.setStyle("height",S.getSize().height+16),m.hide()},t.onOutdated=function(){D.hide()},C.installDaemonOnPort(t,n,!0)):(t.onComplete=i,t.onFailure=s,t.onOutdated=void 0,o.dispatchEvent("onShowMessage",["",3e4,!0]),D.hide(),C.installDaemon(t))}}}),u=new r({value:C.framePort,className:"daemon-port-input",events:{onChange:function(){a.enable(),a.setClassName("primary")},onClick:function(){a.enable(),a.setClassName("primary")},onKeyDown:function(){a.enable(),a.setClassName("primary")}}}),m=e.createElement("div",{class:"compass-loading",styles:{display:"none"},html:new d({visible:!0,className:"compass-spinner"})}),h=e.createElement("div",{tag:"span",class:"fonticon fonticon-info-circled"}),f=e.createElement("div",{tag:"span",class:"fonticon fonticon-info-circled"}),v=n?e.createElement("div",{class:"download-wrapper",html:[{tag:"div",class:"compass-java-desc",html:g("launcherfirstvisit")},{tag:"ul",html:[{tag:"li",class:"compass-java-desc",text:g("downloadlauncherclicking")},this._buildDownloadButton(n,"large block download-daemon-btn",a),{tag:"li",class:"compass-java-desc",text:g("installlauncherrunning")},{tag:"li",class:"compass-java-desc",html:[e.String.format(g("clickcontinue"),"<b>","</b>"),{text:g("youcaninstallrun")}]}]}]}):e.createElement("div",{class:"compass-java-desc",html:g("downloadlauncheradmin")}),b=e.createElement("div",{class:"more-wrapper",html:[{tag:"div",class:"compass-java-desc",html:g("alreadyinstalledlauncher")},{tag:"ul",html:[{tag:"li",class:"compass-java-desc",html:[g("launcherdiagnostics"),h]},{tag:"li",class:"compass-java-desc",html:[g("portchanged"),{class:"change-port",html:[{tag:"span",text:g("changeport")},u,f]}]}]}]}),y=e.createElement("div",{class:"more-container",styles:{height:0},html:b}),S=e.createElement("div",{class:"compass-java-desc alert-message alert-error",html:[g("portunreachable")]}),w=e.createElement("div",{class:"alert-wrapper",html:S}),D=new l({className:"compass-modal daemon-wrapper-modal",closable:!0,visible:!0,events:{onHide:function(){C.installing=!1,D.destroy()}},header:"<h4>"+g("welcomelauncher")+"</h4>",body:e.createElement("div",{class:"daemon-modal",html:[w,v,{class:"divider"},new c({value:g("troubleshootbtn"),icon:"right-dir",className:"link",events:{onClick:function(){this.setFocus(!1),y.toggleClassName("open"),y.hasClassName("open")?(this.setIcon("down-dir"),y.setStyle("height",b.getSize().height+16)):(this.setIcon("right-dir"),y.setStyle("height",""))}}}),y,m]}),footer:[a,{tag:"button",class:"btn btn-default",text:g("cancel"),events:{click:function(){D.hide()}}}]}).inject(document.body);new p({target:h,className:"compass-popover list-style-type-disc",position:"right",trigger:"hover",body:[{tag:"li",html:e.String.format(g("checksystrayicon"),'<span class="compass-systray"></span>')},{tag:"li",html:g("dontseelaunchermenu")}]}),new p({target:f,className:"compass-popover list-style-type-decimal",position:"right",trigger:"hover",body:{tag:"ul",html:[{tag:"li",html:e.String.format(g("clicksystrayicon"),'<span class="compass-systray"></span>')},{tag:"li",text:g("copyportnumber")},{tag:"li",text:g("pasteportnumber")},{tag:"li",html:e.String.format(g("clickcontinue"),"<b>","</b>")}]}}),o.dispatchEvent("onHideMessage")},showUpgradeModal:function(t,n){var i=!1,a=!1,r=C.dpInfo&&C.dpInfo[0]?C.dpInfo[0]:null,d=r?r.url:null,p=new c({value:g("continue"),className:"primary",disabled:!0,events:{onClick:function(){i=!0,o.dispatchEvent("onShowMessage",["",3e4,!0]),u.hide()}}}),u=new l({className:"compass-modal",closable:!0,visible:!0,events:{onHide:function(){u.destroy(),i?a?t.onComplete():(C.uninstallDaemon(),C.installDaemon(t)):C.uninstallDaemon()}},header:"<h4>"+g("launcherupdate")+"</h4>",body:e.createElement("div",{class:"daemon-modal",html:r?[{tag:"div",class:"compass-java-desc",html:e.String.format(g("updateinfos"),"","",r.version,(r.size/1e6).toFixed(2))},{tag:"div",class:"compass-java-desc",text:"1. "+g("downloadupdateclicking")},new c({value:s.htmlEntityDecode(g("downloadlauncher")),className:"primary large block download-daemon-btn",events:{onClick:function(){window.open(d),this.disable(),this.setClassName("default large block download-daemon-btn"),p.enable(),p.setClassName("primary")}}}),{tag:"div",class:"compass-java-desc",text:e.String.format("2. "+g("installupdaterunning"),"3DEXPERIENCELauncher")},{tag:"div",class:"compass-java-desc",html:e.String.format("3. "+g("clickcontinue"),"<b>","</b>")}]:{tag:"div",class:"compass-java-desc",text:g("updatelauncheradmin")}}),footer:d?[p,n?new c({value:g("proceedanyway"),events:{onClick:function(){i=!0,a=!0,o.dispatchEvent("onShowMessage",["",3e4,!0]),u.hide()}}}):null]:null}).inject(document.body);o.dispatchEvent("onHideMessage")},showSelfUpdateModal:function(t,n){var i=!1,s=!1,r=C.dpInfo&&C.dpInfo[0]?C.dpInfo[0]:null,d=r?r.url:null,p=C._buildInstallationPaths(),u=new c({value:g("continue"),className:"primary",disabled:!0,events:{onClick:function(){i=!0,o.dispatchEvent("onShowMessage",["",3e4,!0]),h.hide()}}}),m=new c({value:g("proceedanyway"),events:{onClick:function(){i=!0,s=!0,o.dispatchEvent("onShowMessage",["",3e4,!0]),h.hide()}}}),h=new l({className:"compass-modal",closable:!0,visible:!0,events:{onHide:function(){h.destroy(),i?s?t.onComplete():(C.uninstallDaemon(),C.installDaemon(t)):C.uninstallDaemon()}},header:"<h4>"+g("launcherupdate")+"</h4>",body:e.createElement("div",{class:"daemon-modal",html:d?[{tag:"div",class:"compass-java-desc",html:e.String.format(g("updateinfos"),'<a href="'+r.url+'">',"</a>",r.version,(r.size/1e6).toFixed(2))},{tag:"div",class:"compass-java-desc",text:"1. "+g("startselfupdateclicking")},new c({value:g("startselfupdate"),className:"primary large block download-daemon-btn",events:{onClick:function(){var t,n=this;!p.path&&p.pathSelect&&"cloud"!==p.pathSelect.getValue()[0]&&(t=p.pathSelect.getValue()[0]),m.disable(),C.selfUpdate({path:t,onComplete:function(){u.enable(),u.setClassName("primary")},onFailure:function(t){e.log("Self update failed with code "+t.returnCode+" ("+t.commentary+")"),new a({visible:!0}).inject(h.getBody(),"top").add({className:"error",message:g("selfupdateerror")}),n.enable(),n.setClassName("primary large block download-daemon-btn")}}),this.disable(),this.setClassName("default large block download-daemon-btn")}}}),{tag:"div",class:"compass-java-desc",text:"2. "+g("selfupdaterunning")},{tag:"div",class:"compass-java-desc",html:e.String.format("3. "+g("clickcontinue"),"<b>","</b>")},p.pathElmt]:{tag:"div",class:"compass-java-desc",text:g("updatelauncheradmin")}}),footer:d?[u,n?m:null]:null}).inject(document.body);o.dispatchEvent("onHideMessage")},selfUpdate:function(e){e.functionName="selfUpdate",e.params||(e.params={}),e.params.url=C.dpInfo[0].url,e.params.hash=C.dpInfo[0].md5,e.params.size=C.dpInfo[0].size,e.path&&(e.params.dataStoragePath=e.path),C.request(e)},discoverAllInstall:function(e){e.functionName="discoverAllInstall",C.request(e)},startV6install:function(t,n){var i;t.functionName="startV6install",t.params||(t.params={}),t.params.fileArgStrings=[],v&&(t.params.fileArgStrings.push({name:"-file",content:v}),this._addOpenFromWebArg(t),this._removeObjectFromLaunchInfos(t)),t.file&&t.file.name&&t.file.content&&(t.params.fileArgStrings.push({name:t.file.name,content:t.file.content}),this._addOpenFromWebArg(t),this._removeObjectFromLaunchInfos(t)),this._addRegistryUrl(t),e.log(t.params.fileArgStrings),e.merge(t.params,C._getCatEnvInformation(t.params,n)),(i=C.scriptsConfiguration.detect(function(e){return e.id===n.getPlatformId()}))&&i.beforeLaunch?C.launchScript({params:{name:i.beforeLaunch,params:e.String.format('-tenant "{0}" -user "{1}" -id "{2}" -name "{3}" -version "{4}"',n.getPlatformId(),m._getUser(),n.get("id"),n.get("title"),t.install.get("longName"))},onComplete:function(){C.request(t)},onFailure:function(e){o.dispatchEvent("onShowMessage",e.commentary)}}):C.request(t)},_getCatEnvInformation:function(e,t){var n;if(C.catEnvConfig){var o=e.argString.match(/-tenant=([^ ]+)/),i=null;o&&o.length>1?(i=o[1],t&&(n=t.getPreferredCatEnv(i)),n||(n=C.catEnvConfig.detect(function(e){return e.id===i||e.platformId===i}))&&n.catEnvDetails&&1===n.catEnvDetails.length&&(n=n.catEnvDetails[0])):C.catEnvConfig.length>0&&(n=C.catEnvConfig[0]),n&&n.direnv&&n.env&&(n={dirEnv:n.direnv,catEnvFileName:n.env})}return n},_addOpenFromWebArg:function(e){e&&e.params&&e.params.argString&&-1===e.params.argString.indexOf("-e CATUNILoadFromWebCmdHdr Open")&&(e.params.argString+=" -e CATUNILoadFromWebCmdHdr Open")},_addRegistryUrl:function(e){e&&e.params&&e.params.argString&&-1===e.params.argString.indexOf("-RegistryUrl")&&i.registryUrl?e.params.argString+=" -RegistryUrl="+i.registryUrl:e&&e.argString&&-1===e.argString.indexOf("-RegistryUrl")&&i.registryUrl&&(e.argString+=" -RegistryUrl="+i.registryUrl),e&&e.params&&e.params.argString&&-1===e.params.argString.indexOf("-3DRegistryURL")&&i.registryUrl?e.params.argString+=" -3DRegistryURL="+i.registryUrl:e&&e.argString&&-1===e.argString.indexOf("-3DRegistryURL")&&i.registryUrl&&(e.argString+=" -3DRegistryURL="+i.registryUrl)},_removeObjectFromLaunchInfos:function(e){e&&e.params&&e.params.argString&&e.params.argString.indexOf("-object")>-1&&(e.params.argString=e.params.argString.replace(/ -object ([^ ]+)/,"")),e&&e.params&&e.params.argString&&e.params.argString.indexOf("-objectType")>-1&&(e.params.argString=e.params.argString.replace(/ -objectType "([^"]+)"/,""))},createV6Shortcut:function(t,n){var i,a,l=n.get("icon"),r=s.isBase64Image(l)?l:l.substring(l.lastIndexOf("/")+1,l.lastIndexOf(".")),c=" - "+t.get("name"),d=s.htmlEntityDecode(n.get("title")),p=n.get("tooltip")?s.htmlEntityDecode(n.get("tooltip")):d,u={instID:t.get("daemonId"),exeName:n.getExeName(),argString:n.getShortcutLaunchInfos(),scName:d+c,iconRelPath:r,scDesc:"",nativeLauncherName:n.get("launcher")};o.dispatchEvent("onShowMessage",e.String.format(g("creatingshortcut"),p)),d!==p&&(u.scDesc=p+c),this._addRegistryUrl(u),a=function(){i={functionName:"createShortcutFromV6Install",params:u,onComplete:function(){o.dispatchEvent("onShowMessage",g("shortcutcreated")),o.dispatchEvent("onHideMessage",5e3)},onFailure:function(t){e.log(t),o.dispatchEvent("onShowMessage",g("shortcutcreatingerror")),o.dispatchEvent("onHideMessage",5e3)}},e.merge(i.params,C._getCatEnvInformation(i.params,n)),C.request(i)},l&&n&&n.get&&0===n.get("id").indexOf("MAP-")?C.convertToBase64Uri(l,function(e){u.iconRelPath=e,a()}):a()},convertToBase64Uri:function(t,n){var o=-1===t.indexOf("?")?"?":"&",i=e.createElement("img",{className:"hidden",src:t+o+"xrequestedwith=xmlhttprequest",attributes:{crossOrigin:"anonymous"},styles:{height:"64px",width:"64px",display:"none"}});i.addEventListener("load",function(t){n(function(t){var n=e.createElement("canvas"),o=n.getContext("2d");return n.width=t.width,n.height=t.height,o.drawImage(t,0,0),n.toDataURL("image/png")}(t.currentTarget)),i.destroy()}),i.inject(document.body)},uninstallMedia:function(e){e.functionName="uninstall",C.request(e)},installMedia:function(t){var n=C.scriptsConfiguration.detect(function(e){return null!==e.id});if(t.functionName="installMedia",n&&n.afterInstallation){var i=e.clone(t.onComplete);t.onComplete=function(){i.call(arguments),C.launchScript({params:{name:n.afterInstallation},onComplete:function(){e.log("Success:"+n.afterInstallation)},onFailure:function(t){e.log(t.commentary)}})}}n&&n.beforeInstallation?C.launchScript({params:{name:n.beforeInstallation},onComplete:function(){C.request(t)},onFailure:function(e){o.dispatchEvent("onShowMessage",e.commentary)}}):C.request(t)},launchScript:function(e){e.functionName="runScript",C.request(e)},isDaemonBusy:function(e){e.functionName="isDaemonBusy",C.request(e)},getDpInfo:function(t){if(C.cloud)if(C.dpInfo)t.onComplete(C.dpInfo);else{var n=s.getOs(),o=[e.String.format("ds6w:what/dp3ds:{0}/{1}","category","3DEXPERIENCELauncher"),e.String.format("ds6w:what/dp3ds:{0}/{1}","os",e.String.ucfirst(n))],a={id:(new Date).getTime(),method:"ResourcesV3::check",params:{tags:o,refine:i.clusterId}};i.request({url:i.onlineInstallUrl,proxy:"ajax",method:"POST",contentType:"application/json",postData:JSON.stringify(a),onComplete:function(e){var n=s.getOsDistribution();if(C.dpInfo=e.result.records,n){var o=C.dpInfo.filter(function(e){return e.tags.indexOf("ds6w:what/dp3ds:linux-distro/"+n)>-1});o.length>0&&(C.dpInfo=o)}else C.installerType&&C.dpInfo.length>1&&(C.dpInfo=C.dpInfo.filter(function(e){return e.url.indexOf("."+C.installerType.toLowerCase())>-1}),console.log(C.dpInfo));t.onComplete(C.dpInfo)},onFailure:function(){t.onComplete([{version:null}])}})}else t.onComplete([{version:null}])},setStructure:function(e){v=e},resetStructure:function(){v=null},setLauncherConfig:function(e){var t=e.split(":"),n=parseInt(t[t.length-1],10);n&&(localStorage.setItem(C.storageId,n),e=e.replace(":"+n,"")),C.daemonBase=e},setCatEnvConfig:function(e){C.catEnvConfig=e},setScriptsConfiguration:function(e){C.scriptsConfiguration=e},_buildInstallationPaths:function(){var t,n,o,i,a=s.removeDoublons(C.installationPaths);return 0===a.length?t=null:(a.push({label:g("DefaultInstallationLocation"),value:"cloud"}),i=a.map(function(e,t){return{label:e.label||e,value:void 0!==e.value?e.value:e,selected:0===t}}),o=new u({placeholder:!1,options:i}),n=e.createElement("div",{class:"compass-install-path",html:[{tag:"div",class:"compass-install-desc",text:g("instfilelocation")},o]})),{path:t,pathSelect:o,pathElmt:n}}};return C}),define("DS/i3DXCompass/Controls/Compass",["UWA/Core","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract","DS/i3DXCompass/Tools","DS/UIKIT/Tooltip","DS/i3DXCompass/UsageTracker","DS/i3DXCompass/Data","DS/i3DXCompassServices/i3DXCompassPubSub","UWA/Utils","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s,a,l,r,c,d){"use strict";var p=0,u={defaultOptions:{defaultQuadrant:"north",useQuadrantsOnTouch:!0},slideTimeout:0,getCompassOverClassName:function(){return i.isCompassV3()&&this.elements&&this.elements.compassBase&&!this.elements.compassBase.hasClassName("animate")?c.Client.getSize().width<959?"compass-over-v3-icon":"compass-over-v3":"compass-over"},quadrantNames:{north:"",east:"",south:"",west:"",play:""},quadrantLinkMapping:{north:"X3DMCTY_AP",east:"X3DDASH_AP",west:"MAP-EJOMVJSXC",south:"MAP-HNRPQLSTN"},offsets:{north:{x:32,y:20},east:{x:64,y:32},south:{x:32,y:64},west:{x:20,y:32},play:{x:40,y:40}},tooltipsOffsets:{north:[{x:14,y:-23},{x:-12,y:-20}],east:[{x:30,y:0},{x:15,y:15}],south:[{x:14,y:23},{x:-12,y:32}],west:[{x:-20,y:0},{x:-37,y:17}],play:[{x:14,y:0},{x:0,y:5}]},quadrantAction:"Click",currentQuadrant:null,highlightedQuadrant:null,open:!1,closable:!0,typeCompassView:"compassBase",activePlay:!1,playParam:!1,init:function(t){this._parent(t),e.is(t.closable)&&(this.closable=t.closable),this.updateCurrentQuadrant(),this.buildSkeleton()},updateCurrentQuadrant:function(){this.currentQuadrant=i.getCurrentQuadrant()},buildSkeleton:function(){var t=this.elements={},o=this;t.compassSmallOver=e.createElement("div",{class:"compass-small-over"}),t.compassQuadrantPlay=e.createElement("div",{class:"quadrant-play"}),t.compassQuadrantPlaySmall=e.createElement("div",{class:i.isSupportQuickLink()?"quadrant-play-small "+this.currentQuadrant:"quadrant-play-small"}),t.compassSmall=(i.isCompassV3(),e.createElement("div",{class:"compass-small",html:[t.compassSmallOver,t.compassQuadrantPlaySmall],events:{click:function(e){1===p?setTimeout(function(){o.dispatchEvent("onCompassSmallClick",[e,n.Features.touchEvents]),p=0},500):o.dispatchEvent("onCompassSmallClick",[e,n.Features.touchEvents])},mousemove:function(e){o.dispatchEvent("onCompassSmallOver",[e])},mouseout:function(){o.dispatchEvent("onCompassSmallOut")}}})),t.compassOver=e.createElement("div",{class:this.getCompassOverClassName()}),t.compassOn=e.createElement("div",{class:"compass-on"+(i.isCompassV2()||i.isCompassV3()?" "+this.currentQuadrant:"")}),t.compassBase=e.createElement("div",{class:"compass-base",html:[t.compassOver,t.compassOn,t.compassQuadrantPlay],events:{click:function(e){i.isCompassV3()?o.open?o.dispatchEvent("onCompassBaseClick",[e]):o.dispatchEvent("onOpenQuadrant",o.currentQuadrant):o.dispatchEvent("onCompassBaseClick",[e])},mousemove:function(e){if(i.isCompassV3()&&n.Features.touchEvents)return!0;o.dispatchEvent("onCompassBaseOver",[e])},mouseout:function(){o.dispatchEvent("onCompassBaseOut")},transitionEnd:o.updateOpenState.bind(o)}}),this.container=t.container=e.createElement("div",{class:"compass-ct",html:[t.compassSmall,t.compassBase]}),this.updateTopBarLog(this.currentQuadrant),this.hackIconTopBar()},getQuadrant:function(e,t,n,o,i,s){var a=e+t-s>0,l=s/2,r=(e-l)*(e-l)+(t-l)*(t-l);return r<o?r<n?"play":null:r>i?null:e-t>0?a?"east":"north":a?"south":"west"},initTranslate:function(){this.elements.tooltip=new s({target:this.elements.compassSmall,delay:{show:300},body:e.i18n("compassTooltipv3"),position:"right",className:"compass-small-tooltip"})},onCompassSmallClick:function(n,o){var s,a,l;s=t.getPosition(n),a=this.elements.compassSmall.getOffsets(),l=this.getQuadrant(s.x-a.x,s.y-a.y,256,256,1024,64),i.isCompassV2()?this.clickQuadrant(l):o&&!this.options.useQuadrantsOnTouch?this.clickQuadrant(this.currentQuadrant||this.options.defaultQuadrant):(e.log("click compass: clientX "+n.clientX+"; clientY "+n.clientY),l&&(this.quadrantAction="Open",this.clickQuadrant(l)))},onCompassBaseClick:function(e){var n,o,s;n=t.getPosition(e),o=this.elements.compassBase.getOffsets(),s=s=i.isCompassV2()?i.isOpenFullSize()?this.getQuadrant(n.x-o.x,n.y-o.y,2756,2756,8649,186):this.getQuadrant(n.x-o.x,n.y-o.y,256,256,1024,64):this.getQuadrant(n.x-o.x,n.y-o.y,1378,1378,3844,124),i.isCompassV2()?this.clickQuickLink(s):this.isPlayEvent(s)?(r.publish("activatePlayCallback",this.playParam),this.onActivePlay(!1),this.closeCompassOnActivePlay()):("play"!==s||i.isCompassV3())&&(this.quadrantAction="Click",this.clickQuadrant(s))},onCompassSmallOver:function(e){if(!(i.isSmartphone()||n.Features.touchEvents&&"ios"===i.getOs())){var o,s,a,l=this.elements,r=this.elements.tooltip,c=l.compassSmallOver,d=l.compassSmall,p=l.compassQuadrantPlay,u=l.compassQuadrantPlaySmall;o=t.getPosition(e),s=this.elements.compassSmall.getOffsets(),a=a=this.getQuadrant(o.x-s.x,o.y-s.y,256,256,1024,64),this.isPlayEvent(a)?(p.addClassName("over"),u.addClassName("over"),r.hide(),this.showTooltip(a),d.setStyle("cursor","pointer")):a!==this.highlightedQuadrant&&i.isSupportQuickLink()&&(this.highlightedQuadrant=a,c.className="compass-small-over",a?(r.hide(),this.showTooltip(a),c.addClassName(a),d.setStyle("cursor","")):d.setStyle("cursor","default"))}},closeCompassOnActivePlay:function(){i.isOpenFullSize()&&(this.dispatchEvent("onClose"),this.quadrantAction="Close")},onActivePlay:function(e,t,n){var o=this.elements,i=o.compassQuadrantPlay,s=o.compassQuadrantPlaySmall,a=document.body.getElement(".topbar-logo");a&&a.toggleClassName("play",e),e&&t&&(this.playParam=t),e!==this.activePlay&&(this.activePlay=e,e?(i.addClassName("play-activated"),s.addClassName("play-activated")):(i.setStyle("opacity",0),s.setStyle("opacity",0),setTimeout(function(){i.removeClassName("play-activated"),s.removeClassName("play-activated"),i.setStyle("opacity",1),s.setStyle("opacity",1)},301),t&&r.publish("resetPlayCallback",t)))},onCompassSmallOut:function(){i.isSmartphone()||(this.elements.compassSmallOver.className="compass-small-over",this.highlightedQuadrant=null,this.elements.compassQuadrantPlay.removeClassName("over"),this.elements.compassQuadrantPlaySmall.removeClassName("over"))},onCompassBaseOver:function(e){var n,o,s,a=this.elements,l=a.compassOver,r=a.compassBase,c=this.elements.tooltip;n=t.getPosition(e),o=this.elements.compassBase.getOffsets(),(s=s=i.isCompassV2()?i.isOpenFullSize()?this.getQuadrant(n.x-o.x,n.y-o.y,2756,2756,8649,186):this.getQuadrant(n.x-o.x,n.y-o.y,256,256,1024,64):this.getQuadrant(n.x-o.x,n.y-o.y,1378,1378,3844,124))&&this.isPlayEvent(s)?(this.elements.compassQuadrantPlay.addClassName("over"),this.elements.compassQuadrantPlaySmall.addClassName("over"),this.elements.compassBase.setStyle("cursor","pointer")):s&&s!==this.highlightedQuadrant&&(this.highlightedQuadrant=s,l.className=this.getCompassOverClassName(),i.isCompassV3()?(r.setStyle("cursor","pointer"),this.elements.compassBase.hasClassName("animate")?(c.hide(),this.showTooltip(s,!1,!0,!0),setTimeout(function(){l.addClassName(s),l.addClassName("active-over")},10)):(l.addClassName("over"),this.showTooltip("north","My 3DEXPERIENCE Compass",!0,!1))):"play"!==s||i.isCompassV2()?(l.addClassName(s),r.setStyle("cursor","")):r.setStyle("cursor","default"))},onCompassBaseOut:function(){i.isCompassV3()&&(this.elements.tooltip.hide(),this.elements.compassOver.className=this.getCompassOverClassName()),this.highlightedQuadrant=null,this.elements.compassQuadrantPlay.removeClassName("over"),this.elements.compassQuadrantPlaySmall.removeClassName("over")},clickQuickLink:function(e){this.currentQuadrant=e,this.quadrantAction="Close",this.open=!1,this.elements.compassOn.className="compass-on "+e,this.dispatchEvent("onOpenQuadrant",e),i.isOpenFullSize()&&this.dispatchEvent("onCloseCompassOverlayView"),a.clickQuadrant(e)},clickQuadrant:function(t){if(i.isSupportQuickLink()&&"play"!==t&&!this.open)return this.currentQuadrant=t,i.setCurrentQuadrant(t),r.publish("compassEvent",{quadrant:t}),void(this.elements.compassQuadrantPlaySmall.className="quadrant-play-small "+t);d.isMobileAppEnvironment()&&i.isSupportQuickLink()&&this.open&&!this.isPlayEvent(t)?"play"!==t&&(this.currentQuadrant=t,i.setCurrentQuadrant(t),this.dispatchEvent("onOpenQuadrant",t)):(i.isCompassV3()&&this.open&&this.closable&&!this.isPlayEvent(t)?!1===e.is(l.addinMode)&&(window.location.search.indexOf&&window.location.search.toLowerCase().indexOf("myembeded")>-1?(i.setCurrentQuadrant(t),this.currentQuadrant=t,this.iframeMy||(this.iframeMy=e.createElement("iframe",{styles:{height:"100%",width:"100%",border:0},tag:"iframe"})),this.iframeMy.src="https://dsext001-eu1-215dsi0708-my3dexperience.3dexperience.3ds.com/#"+t.toLowerCase(),this.elements.compassOn.className="compass-on "+t,document.querySelector("compass-nav-second .active")&&document.querySelector("compass-nav-second .active").removeClassName&&document.querySelector("compass-nav-second .active").removeClassName("active"),document.querySelector("compass-nav-main .active")&&document.querySelector("compass-nav-main .active").removeClassName&&document.querySelector("compass-nav-main .active").removeClassName("active"),document.body.getElement("compass-content").setContent(this.iframeMy)):("play"!==t&&(i.setCurrentQuadrant(t),this.currentQuadrant=t,i.isSupportQuickLink()&&(this.elements.compassQuadrantPlaySmall.className="quadrant-play-small "+t,this.updateTopBarLog(t))),this.dispatchEvent("onClose"),this.quadrantAction="Close")):i.isCompassV3()&&this.open&&!this.closable&&!this.isPlayEvent(t)?"play"!==t&&(this.currentQuadrant=t,i.setCurrentQuadrant(t),this.dispatchEvent("onOpenQuadrant",t)):t===this.currentQuadrant&&this.open&&this.closable&&!this.isPlayEvent(t)?!1===e.is(l.addinMode)&&(p=1,setTimeout(function(){p=0},500),this.dispatchEvent("onClose"),this.quadrantAction="Close"):(this.currentQuadrant=t,this.dispatchEvent("onOpenQuadrant",t)),a.clickQuadrant({quadrant:t}))},onClose:function(){this.open=!1,this.elements.compassBase.hasClassName("animate")&&this.elements.compassBase.removeClassName("animate"),i.isCompassV2()&&c.Client.getSize().width,this.container.removeClassName("open"),i.isSmartphone()&&document.body.getElement(".my-apps-panel").hasClassName("onSmartphone")?this.typeCompassView="compassSmall":this.typeCompassView="compassBase",document.querySelector(".topbar-logo")&&document.querySelector(".topbar-logo").className&&document.querySelector(".topbar-logo").className.indexOf&&document.querySelector(".topbar-logo").className.indexOf("default-compass-active")>-1&&(document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" default-compass-active",""))},isPlayEvent:function(e){return this.activePlay&&"play"===e},onOpenQuadrant:function(e){var t=this;i.isCompassV2()?this.open=!0:this.isPlayEvent(e)||(this.open||(this.open=!0,this.container.addClassName("open"),window.setTimeout(function(){t.elements.compassBase.addClassName("animate")},50)),this.elements.compassOn.className=i.isCompassV3()?"compass-on ":"compass-on "+e)},updateOpenState:function(){this.open||i.isCompassV2()||i.isCompassV3()||this.container.removeClassName("open")},setQuadrantNames:function(e){var t=this.quadrantNames;t.north=e.north,t.east=e.east,t.south=e.south,t.west=e.west,t.play=e.play},resetQuadrant:function(){this.elements.compassQuadrantPlaySmall.removeClassName("east").removeClassName("west").removeClassName("north").removeClassName("south"),i.setCurrentQuadrant(null)},_getQuadrantRelatedOffset:function(e,t,n,o,i){var s=this.tooltipsOffsets&&this.tooltipsOffsets[e][o];if(s)return i?{x:2*s.x+t,y:2*s.y+n}:{x:s.x+t,y:s.y+n}},showTooltip:function(t,n,o,s){var a,l,r,c,d,p,u,m;this.quadrantNames[t]&&(l=o?this.elements.compassBase.getSize():this.elements.compassSmall.getSize(),this.elements.tooltip.options.target=o?this.elements.compassBase:this.elements.compassSmall,u=l.height/2,(a=this.elements.tooltip).setBody(n||(!1!==this.open||i.isSupportQuickLink()?this.quadrantNames[t]:e.i18n("compassTooltipv3"))),c=1===(r=(m=a.elements.container.getSize().height/25)>1&&("east"!==t&&"west"!==t||m>=2)?1:0)?"bottom bottom-left":"right",d=1===r?u:-u,p=1===r?-u:0,a.options.offset=this._getQuadrantRelatedOffset(t,d,p,r,s),""!==this.quadrantNames[t]&&(a.show(),a.updatePosition(c)))},updateTopBarLog:function(e){var t=document.body.getElement(".topbar-logo");i.isSupportQuickLink()&&document.querySelector(".topbar-logo")&&(document.querySelector(".topbar-logo").className&&-1===document.querySelector(".topbar-logo").className.indexOf("compass-v3")&&(document.querySelector(".topbar-logo").className+=" compass-v3"),document.querySelector(".topbar-logo").className&&-1===document.querySelector(".topbar-logo").className.indexOf(e)&&this.open&&(document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" north",""),document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" east",""),document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" west",""),document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" play",""),document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" south",""),document.querySelector(".topbar-logo").className+=" "+e)),c.Client.getSize().width<959&&!this.open&&t&&!t.hasClassName("default-compass")&&t.addClassName("default-compass")},disPatchCloseByClickQuadrant:function(){this.dispatchEvent("onClose")},hackIconTopBar:function(){var e=this;document.querySelector(".topbar-logo")&&document.querySelector(".topbar-logo").addEventListener("click",function(t){c.Client.getSize().width<959&&!i.isSupportQuickLink()&&(e.open?(t.stopPropagation(),e.disPatchCloseByClickQuadrant(),document.querySelector(".topbar-logo").className&&document.querySelector(".topbar-logo").className.indexOf&&document.querySelector(".topbar-logo").className.indexOf("default-compass-active")>-1&&(document.querySelector(".topbar-logo").className=document.querySelector(".topbar-logo").className.replace(" default-compass-active",""))):!e.open&&document.querySelector(".topbar-logo").className&&(document.querySelector(".topbar-logo").className+=" default-compass-active")),c.Client.getSize().width<959&&e.open&&document.querySelector(".topbar-logo").className&&(document.querySelector(".topbar-logo").className+=" default-compass")})}};return o.extend(u)}),define("DS/i3DXCompass/Collection/InstallList",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Model/Install","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data"],function(e,t,n,o,i,s){"use strict";var a=e.i18n;return t.extend({model:n,parse:function(e){var t=this,n=[];return e.forEach(function(e){var o;e.lastBuildId&&("CODE"===e.type||"CNT"===e.type)&&t.isAvailableForCurrentEnvironment(e)&&(e.processes=(e.installedProcesses||[]).map(function(e){return e.split(".")[0]}),o=e.processes[0],e.dpId=e.lastBuildId+"+"+o,e.dpIdObj={ID:e.lastBuildId,process:o,golden:-1===(e.SPlevel||"").indexOf("."),release:"R"+e.level,SPLevel:e.SPlevel},e.name=(e.longName||e.GAlevel)+(e.registry_Identifier&&"!"!==e.registry_Identifier?" - "+e.registry_Identifier:""),e.daemonId=e.id,e.id=e.GAlevel+e.installationType+(e.registry_Identifier||""),n.push(e))}),n},isAvailableForCurrentEnvironment:function(e){var t=!0,n=s.buildTransactionId&&s.buildTransactionId.split("-")[0],o=e.installationType.indexOf("_Cloud")>-1;return(n>="R421"||""===n)&&e.installationType.toLowerCase().indexOf("desktop")>-1&&(t=s.cloud?o:!o),t},sync:function(e,t,n){switch(e){case"read":o.discoverAllInstall({onComplete:function(e){n&&n.onComplete&&n.onComplete(e)},onFailure:function(){i.dispatchEvent("onShowMessage",[a("unableinstalldata"),5e3]),n&&n.onFailure&&n.onFailure()},silent:n._silent})}}})}),define("DS/i3DXCompass/ServiceApi/UserServiceApi",["UWA/Core","UWA/Utils","DS/i3DXCompass/Data","DS/i3DXCompass/CacheManager"],function(e,t,n,o){"use strict";var i,s,a,l=!1,r=!1,c=[],d=function(){return p()?p()+"api/pull/self":null},p=function(){return n.myAppsBaseUrl||a},u=function(e){c.forEach(function(t){t[e]&&setTimeout(t[e],0,i)}),c.length=0},m=function(){r=!0,n.request({url:d(),headers:{"Last-Modified":void 0},onComplete:function(e,t){i=e,l=!0,t["Last-Modified"],u("onComplete"),r=!1},onFailure:function(){u(i?"onComplete":"onFailure"),r=!1}})},h=function(t){var n,p=Date.now();!d()&&(t.config&&t.config.myAppsBaseUrl||"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.myAppsBaseUrl)&&(a=(a=(a=t.config&&t.config.myAppsBaseUrl?t.config.myAppsBaseUrl:COMPASS_CONFIG.myAppsBaseUrl).replace("/resources/AppsMngt","")).replace(/\/$/,"")+"/resources/AppsMngt/"),!o._getUser()&&(t.config&&t.config.userId||"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.userId)&&(t.config&&t.config.userId?o.setup(t.config.userId,t.config.lang):o.setup(COMPASS_CONFIG.userId,COMPASS_CONFIG.lang)),l&&(!s||p-s<36e5)?t.onComplete(i):(s=p,c.push({onComplete:t.onComplete,onFailure:t.onFailure}),r||(d()?m():n=setInterval(function(){d()?(clearInterval(n),m()):e.log("wait for myapps url")},200)))};return{getUser:function(t){t&&"function"===e.typeOf(t.onComplete)&&h({config:t.config,onComplete:function(n){var o=t.platformId;if(n=e.clone(n),t.platformId)if(n.platform=e.Array.detect(n.platforms,function(e){return e.id===o}),delete n.platforms,n.platform)n.admin="admin"===n.platform.role;else if(n.admin=!1,t.onFailure)return t.onFailure();t.onComplete(n)},onFailure:t.onFailure})},_private:{callbacks:c,fireCallbacks:u,reset:function(){i=void 0,l=!1,r=!1}}}}),define("DS/i3DXCompass/View/PortfolioContactFormView",["UWA/Core","UWA/Class/View","DS/UIKIT/Mask","DS/i3DXCompass/ServiceApi/UserServiceApi","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature","DS/WebappsUtils/WebappsUtils","UWA/Utils"],function(e,t,n,o,i,s,a,l){"use strict";return t.extend({tagName:"div",className:"view-portfolio-contact",_id:"LDP52696",assetUrl:"https://dassaultsystemes-mkt-stage14-m.adobe-campaign.com/res/ds_mkt_stage14/embed.js",setup:function(e){this._uid=l.getUUID();var t=s.getContactFormConfiguration();t&&t.id&&t.assetUrl&&(this._id=t.id,this.assetUrl=t.assetUrl),e.id&&(this._id=e.id),e.assetUrl&&(this.assetUrl=e.assetUrl)},render:function(){var t=this,s={id:this._id,assetUrl:this.assetUrl,uid:this._uid};if(i._getUser())o.getUser({onComplete:function(o){var i={prefill:{firstName:o.firstname,lastName:o.lastname,email:o.email}},l=btoa(JSON.stringify(e.merge(s,i)));t.container.setContent({tag:"iframe",src:a.getWebappsAssetUrl("i3DXCompass","iframes/portfolio-contact-form.html?"+l)}),window.addEventListener("message",t._receiveMessage.bind(t)),n.mask(t.container)}});else{var l=btoa(JSON.stringify(s)),r=e.createElement("iframe",{src:a.getWebappsAssetUrl("i3DXCompass","iframes/portfolio-contact-form.html?"+l)});t.container.setContent(r),window.addEventListener("message",t._receiveMessage.bind(t)),n.mask(t.container)}return this},_receiveMessage:function(t){var o=t&&t.data;if(o)try{(o=JSON.parse(o)).id==="portfolio-contact-form-"+this._uid&&("onSuccess"===o.action?this.dispatchEvent("onClose"):"onLoaded"===o.action?n.unmask(this.container):"onResize"===o.action&&this.container.getElement("iframe").setStyle("height",o.value))}catch(t){e.log(t)}},_injectFormScript:function(){if(window.DsxForm)this._getUserInfoAndLoadForm();else{var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.onload=this._getUserInfoAndLoadForm.bind(this),e.src=this.assetUrl,document.getElementsByTagName("head")[0].appendChild(e)}},_getUserInfoAndLoadForm:function(){var e=this;i._getUser()?o.getUser({onComplete:function(t){e._loadForm({prefill:{firstName:t.firstname,lastName:t.lastname,email:t.email},setListeners:{onSuccess:function(t,n){return setTimeout(function(){e.dispatchEvent("onClose")},3e3),!0}}})}}):e._loadForm({setListeners:{onSuccess:function(t,n){return setTimeout(function(){e.dispatchEvent("onClose")},3e3),!0}}})},_loadForm:function(e){window.DsxForm&&(DsxForm.loadForm(this._id,e),n.unmask(this.container))},destroy:function(){return window.removeEventListener("message",this._receiveMessage.bind(this)),this._parent()}})}),define("DS/i3DXCompass/View/ContentOverlayView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/Tools","DS/UIKIT/Scroller","DS/UIKIT/Input/Button","DS/UIKIT/SuperModal","DS/i3DXCompass/Feature","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/i3DXCompass/Data","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/Feature","DS/i3DXCompass/View/PortfolioContactFormView"],function(e,t,n,o,i,s,a,l,r,c,d,p,u,m){"use strict";var h=e.i18n,f="content-overlay",g={ME:"fonticon-user",WE:"fonticon-users",COMPANY:"fonticon-building-office",WORLD:"fonticon-globe"},v=t.extend({tagName:"div",i18n:e.i18n,tempRemove:[],className:"compass-v3 "+f+" "+f+"-hidden",domEvents:{"click .content-overlay-icon-more.fonticon-info":"clickMore","click .content-overlay-icon-more.to-request":"requestRole","click .content-overlay-header":"_backClick","click .content-overlay-go-home":"callGoHome","click .content-overlay-icon-more.fonticon-close":"_dispatchClose"},setup:function(e){this.title=e.title,this.icon=e.icon,this.icon2=e.icon2,this.view=e.view,this.model=e.model,this.canEdit=!!this.model&&this.model.get("canEdit"),this.isEditMode=this.options.isEditMode||!1,this.canDelete=!!this.model&&this.model.get("canDelete"),e.additionalClassName&&this.container.addClassName(e.additionalClassName)},render:function(){var t;a.enableBetaShoppingCart()&&(t={class:f+"-footer",html:[{tag:"i",class:"fonticon fonticon-shopping-cart"},{text:e.i18n("{0} items").format("0")},new i({value:h("View Cart"),className:"primary",events:{onClick:function(e){}}})]}),this.container.setContent([this.buildHeader(),{id:"container-scroll",class:t?"with-footer":""},{id:"to-scroll",styles:{height:"100%"},html:this.view},t]);var n=this.container.getElement("#to-scroll"),s=this.container.getElement("#container-scroll");return this.scroller=new o({element:n}).inject(s),this},buildHeader:function(){var t,n,o,i,s,a,l,c=this;this.options.parentIcon&&(l=e.createElement("i",{class:"content-overlay-go-home fonticon "+g[this.options.parentIcon]}),new r({position:"bottom",target:l,className:"compass-small-tooltip",body:e.String.format(e.i18n("Back to {0}"),this.options.parentIcon)})),a=this.options.isDisableGoBack?e.createElement("i",{class:"content-overlay-back fonticon fonticon-chevron-left disable-go-back"}):e.createElement("i",{class:"content-overlay-back fonticon fonticon-chevron-left"}),this.options.isDisableGoBack||new r({position:"bottom",target:a,className:"compass-small-tooltip",body:e.i18n("Back")}),t=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-trash",events:{click:function(){c.deleteGroup()}}}),o=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-floppy ",styles:{display:"none"},events:{click:function(e){c.saveGroup(e),c.isEditMode||(o.hide(),n.show(),"favorite"!==c.model.get("id")&&(s.hide(),i.textContent=s.value,i.show()))}}}),n=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-pencil",events:{click:function(e){"favorite"!==c.model.get("id")&&(i.hide(),s.show()),o.show(),n.hide(),c.editGroup()}}}),s=e.createElement("input",{value:this.title,styles:{width:"86%",display:"none"},events:{click:function(t){e.Event.stopPropagation(t)}}}),i=e.createElement("h1",{html:this.title});var d=!1;return this.options&&this.options.request&&this.model.get("platforms")&&(d=!!this.model.get("platforms").detect(function(e){return!e.requested})),{class:f+"-header",html:[l,a,this.icon?{tag:"i",class:"fonticon fonticon-"+this.icon}:null,i,this.canEdit?s:null,this.canDelete?t:null,this.canEdit?n:null,this.canEdit?o:null,this.options.info&&!this.canEdit?this._buildInfoIcon():null,this.options.request&&d?this._buildRequestButton():null,this.options.request&&!d?this._buildRequestedIcon():null,null,this.options.closable?this._buildCloseIcon():null]}},_injectBuyButtonIfNeeded:function(){var e=this,t=this.model.get("externalIds")||this.model.get("acronym");require(["DS/MPFPortfolioModel/PortfolioHelper"],function(n){n.isAuthorizedToBuy(t).then(function(t){if(t){var n,o=e.container.getElement(".to-contact");e._buildBuyButton().inject(o||e.container.getElement(".content-overlay-header h1"),"after"),window.location.pathname.indexOf("/buy")>-1&&(n=e.container.getElement("[data-action=compass-buy]"))&&n.click()}})})},_buildBuyButton:function(){var e=this;return a.isCompassStandalone()&&c.getServiceUrl({serviceName:"my3dexperience",onComplete:function(t){t&&t.length>0&&(e.my3dexpUrl=t[0])}}),new i({value:h("Buy"),icon:"shopping-cart",className:"primary content-overlay-icon-more to-buy responsive-icon-text",attributes:{"data-action":"compass-buy"},events:{onClick:function(t){l.compassInc({eventCategory:"compass",eventAction:"compass-buy",persDim:{pd2:e.model.get("acronym"),pd3:e.model.get("title")}}),a.isNativeApplicationEnvironment()?c.getAppInfo({appId:"X3DMYEX_AP",onComplete:function(e){p.publish("launchAppCallback",e)}}):a.isCompassStandalone()?window.open(e.my3dexpUrl,"_blank"):e.clickBuy(t)}}})},_buildRequestButton:function(){var t,n,o=this.model,s=this,a={description:o.get("description"),platforms:[],buttonDisabled:!1,buttonText:h("request"),action:"sendRoleRequest"},l=o.get("platforms"),r=!0;return l.length>0?(a.platforms=l.reduce(function(t,n){return n.requested||(t.push({name:n.id,text:e.String.format(h("requeston"),n.name)}),r=!1),t},[]),r&&(a.buttonDisabled=!0)):(o.get("requested")||o.get("granted"))&&(a.buttonDisabled=!0),a.platforms.length>1?t={className:"compass-modal-dropdown",items:a.platforms,renderTo:document.body,position:"bottom right",events:{onClick:function(t,n){e.Event.stopPropagation(t),t.stopPropagation(),s.dispatchEvent("onRequestRole",[o,n.name])}}}:1===a.platforms.length&&(n=a.platforms[0].name),new i({value:a.buttonText,className:a.buttonDisabled?"default":"primary",disabled:a.buttonDisabled,events:{onClick:function(i){e.Event.stopPropagation(i),i.stopPropagation(),t||s.dispatchEvent("onRequestRole",[o,n])}},dropdown:t})},_buildInfoIcon:function(){var t=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-info"});return new r({position:"bottom",target:t,className:"compass-small-tooltip",body:e.i18n("About")}),t},_buildRequestedIcon:function(){var t=e.createElement("i",{class:"content-overlay-icon-more fonticon disabled fonticon-hourglass"});return new r({position:"bottom",target:t,className:"compass-small-tooltip",body:h("Role requested, awaiting validation")}),t},_buildCloseIcon:function(){var t=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-close"});return new r({position:"bottom",target:t,className:"compass-small-tooltip",body:h("Close")}),t},deleteGroup:function(t){var o=this;new s({closable:!1,renderTo:n.isOpenFullSize()?document.querySelector(".my-apps-panel.compass-v3"):""}).confirm(e.i18n("confirmRemoveFavorite"),e.i18n("confirmation"),function(e){e&&(o.goHome(t,!0),o.dispatchEvent("onRemoveGroup",o.model))})},saveGroup:function(t){var n=this;new s({closable:!1}).confirm(e.i18n("confirmRemoveFavorite"),e.i18n("confirmation"),function(e){e&&(n.isEditMode=!1,n.container.removeClassName("editMode"),"favorite"===n.model.get("id")?n.dispatchEvent("onRemoveFavoriteV3",[n.tempRemove]):(n.tempRemove.forEach(function(e,t){n.model.get("appList").splice(n.model.get("appList").indexOf(e),1)}),n.model.get("appList").length>0?n.dispatchEvent("onSaveGroup",n.model):(n.goHome(t,!0),n.dispatchEvent("onRemoveGroup",n.model))))})},editGroup:function(){this.isEditMode=!0,this.switchAppMode(),this.container.addClassName("editMode")},switchAppMode:function(){var t=this;this.container.getElements(".item-view-v3.app-item").forEach(function(n,o){n.getElement("fonticon-trash")||e.createElement("div",{styles:{"font-size":"25px"},class:" fonticon fonticon-trash",events:{click:function(o){e.Event.stopPropagation(o),t.tempRemove.push(n.getAttribute("data-id")),n.hide()}}}).inject(n.getElement(".item-view-content-wrapper"),"after"),n.getElement(".settings-img")&&n.getElement(".settings-img").hide(),n.addClassName("drag-app")})},_backClick:function(e){return!!(this.options.isDisableGoBack||e&&e.target.hasClassName("content-overlay-icon-more"))||(!(!e||!e.target.hasClassName("content-overlay-go-home"))||(this.back(e),this.dispatchEvent("onBackClick"),void l.clickBack()))},back:function(e){var t=this,n=this.container.getElement("video");if(e&&e.target.hasClassName("content-overlay-icon-more"))return!0;if(e&&e.target.hasClassName("content-overlay-go-home"))return!0;if(this.container.addClassName(f+"-hidden"),setTimeout(function(){t.view&&t.view.destroy&&t.view.destroy(),t.destroy(),t=null},301),n&&(n.remove(),n.destroy(),n=null),a.supportPushState()){var o=window.location.pathname.split("/"),i=o.splice(0,o.length-1).join("/"),s=i.split("/");s.indexOf("compass-world")===s.length-1&&(i=s.splice(0,s.length-1).join("/")),history.pushState("","",i)}this.dispatchEvent("onBack")},show:function(e){var t=this;this.render(),setTimeout(function(){t.container.removeClassName(f+"-hidden"),t.dispatchEvent("onShow")},25)},clickMore:function(t){e.Event.stopPropagation(t),t.stopPropagation(),this.dispatchEvent("onClickMore",this.model)},clickBuy:function(t,n){e.Event.stopPropagation(t),t.stopPropagation(),a.supportPushState()&&-1===window.location.pathname.indexOf("/buy")&&history.pushState("",this.model.get("title"),window.location.pathname+"/buy"),this.dispatchEvent("onClickBuy",[this.model,this.buyComponent])},callGoHome:function(e){this.dispatchEvent("callGoHomes",e)},goHome:function(e,t){var n=this;return!!(!t&&e&&e.target.hasClassName("content-overlay-icon-more")&&e.target.hasClassName("content-overlay-icon-more")&&e.target.hasClassName("content-overlay-icon-more"))||(!(t||!e||!e.target.hasClassName("content-overlay-header"))||(this.container.addClassName(f+"-hidden"),this.dispatchEvent("onBack",e),void setTimeout(function(){n.destroy()},301)))},_dispatchClose:function(e){this.dispatchEvent("callGoHomes",e),this.dispatchEvent("onClose")},addBuildRequestedIcon:function(){var e=this._buildRequestedIcon();this.container.getElement(".content-overlay-header button")&&(this.container.getElement(".content-overlay-header button").destroy(),e.inject(this.container.getElement(".content-overlay-header .fonticon-close"),"before"))},rebuildRequestButton:function(){var e=this._buildRequestButton();this.container.getElement(".content-overlay-header button")&&(this.container.getElement(".content-overlay-header button").destroy(),e.inject(this.container.getElement(".content-overlay-header .fonticon-close"),"before"))},requestRole:function(t){var n=this;e.Event.stopPropagation(t),t.stopPropagation(),this.dispatchEvent("onRequestRole",this.model),setTimeout(function(){t.target.getParent();n.addBuildRequestedIcon()},300)}});return v}),define("DS/i3DXCompass/Collection/ProductList",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/Model/Product","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s){"use strict";return t.extend({model:i,installList:null,validData:!1,data:null,isValid:[],setup:function(e){this.installList=e.installList},sync:function(e,t,i){var s,a=this,l=!1;switch(e){case"read":s=this.data={},n.request({url:n.getProcessDetailsUrl,urlParams:{os:o.getOs()},onComplete:function(e){var t,l=[],c=[];if(s.myapps=e,e.about&&e.about.forEach(function(e){"BuildTransactionID"===e.key&&(t=e.value,s.transactionId=t)}),e.cloud){if(e.env){e.env.forEach(function(e){e.licenses.forEach(function(e){o.pushUnique(l,e.id)})}),a.installList.forEach(function(e){c.push(e.get("dpIdObj")),e.get("processes").forEach(function(e){o.pushUnique(l,e)})});var d={id:(new Date).getTime(),method:"CodeLevelV4::status",params:{podID:t,clusterID:n.clusterId,processes:l,installs:c,type:"CODE",selectedApp:i.appId,os:o.getOs()}};n.request({url:n.onlineInstallUrl,proxy:"ajax",method:"POST",contentType:"application/json",postData:JSON.stringify(d),onComplete:function(e){s.downloadplatform=e,r()},onFailure:function(){r()}})}}else i&&i.onComplete&&r()},onFailure:function(){r()}})}function r(){!l&&i&&i.onComplete&&(l=!0,i.onComplete(s))}},parse:function(t){var n=[],o={},i=t.myapps,s=t.downloadplatform;return this.installList.forEach(function(t){t.get("processes").forEach(function(t){var i=o[t];e.is(i)||(n.push({id:t,env:[]}),o[t]=n.length-1)})}),i&&i.env&&(i.env.forEach(function(t){t.licenses.forEach(function(i){var s=i.id,a=o[s];e.is(a)?(n[a].env.push(t.id),n[a].granted||(n[a].granted=!0,n[a].title=i.title,n[a].apps=i.apps)):(n.push(e.merge(i,{env:[t.id],granted:!0})),o[s]=n.length-1)})}),s&&s.result&&s.result.stacks.forEach(function(e){e.processes.forEach(function(t){var i=o[t];n[i]&&(n[i].installType=e.installType,n[i].online=!0)})})),n},update:function(e){var t=this;this.fetch({appId:e.appId,onComplete:function(n,o,i){t.data=o,o.change=!0,e&&e.onComplete&&e.onComplete(n,o,i)}})},invalidate:function(){this.isValid=[]}})}),define("DS/i3DXCompass/View/ServicesView",["UWA/Core","UWA/Utils","UWA/Class/View","DS/UIKIT/Tooltip","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/X3DContent"],function(e,t,n,o,i,s,a){"use strict";var l={className:"service-section",_onClick:function(t){var n=t.get("url");"X3DPSLY_AP"===t.get("id")&&!0===e.is(s.addinMode)&&(n=this._manageAddinUrl(n)),i.isSameApp(n,window.location)||-1!==n.indexOf("addinmode")?window.open(n,"_self"):window.open(n,"_blank")},_manageAddinUrl:function(e){var t=s.addinMode&&s.addinMode.value;return s.cloud||(e=this._addQueryParams(e,"lockedapp",!0)),t&&(e=this._addQueryParams(e,"addinmode",t)),t&&"catiav5"===t.toLowerCase()&&(e=this._addQueryParams(e,"embeddedProfileId","CATIAV5")),t&&"xvl"===t.toLowerCase()&&(e=this._addQueryParams(e,"embeddedProfileId","XVL")),e},_addQueryParams:function(e,t,n){var o=-1===e.indexOf("?")?"?":"&";return e+o+t+"="+n},render:function(){return this.container.setContent(this._renderServices()),this},_renderServices:function(){var t=this.elements,n=this,i=this.collection.map(function(t){var i=e.createElement("li",{class:"service-item",html:[{tag:"img",class:"service-item-icon",src:t.get("icon"),events:{dragstart:function(e){e.preventDefault()}}},{tag:"div",class:"service-item-title",text:t.get("title")}],"data-id":t.get("id"),events:{click:function(){n._onClick(t)}}});return new o({position:"bottom",target:i,delay:{show:1e3},body:t.get("description")||t.get("title")}),i}),s=t.list;return s||(s=t.list=e.createElement("ul",{class:"service-list"})),s.setContent(i),s}};return n.extend(l)}),define("DS/i3DXCompass/Model/BusinessExperienceRoleDetailModel",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/WAFData/WAFData"],function(e,t,n,o,i,s,a){"use strict";return n.extend({setup:function(e){this._url=this.get("businessExperienceUrl")+"/resources/BusinessExperienceAccess/v1/model/Role/"+this.get("id"),this.url=this.get("businessExperienceUrl")+"/resources/BusinessExperienceAccess/v1/model/Role/"+this.get("id")+"?"+t.toQueryString({tenant:this.get("platformId"),cors:!0})},launchBusinessExperience:function(){var e="#business-experience:"+this.get("id")+"/version:"+this.get("version");o.get3DDashboardUrl(function(t){var n=t+e;-1!==window.location.href.indexOf(t)?i._supportBigUrl(n)?window.location.hash=e:window.open(n,"_self"):window.open(n,"_blank")})},updateModel:function(e){e.icon&&this.set("icon",e.icon)},needSettingsMenu:function(){return this.get("usages")&&this.get("usages").length>0},fetch:function(e){return e.businessMethodsCollection&&(this.businessMethodsCollection=e.businessMethodsCollection),e.businessExperienceCockpitsCollection&&(this.businessExperienceCockpitsCollection=e.businessExperienceCockpitsCollection),this._parent(e)},sync:function(e,t,n){var o=this;switch(e){case"read":return a.authenticatedRequest(o.url,{timeout:15e3,method:"GET",type:"json",headers:{Accept:"application/json"},onComplete:function(e,t){e&&(e.bms&&e.bms.map(function(e){e.platformId=o.get("platformId"),o.businessMethodsCollection.add(e)}),e.cockpits&&e.cockpits.map(function(e){e.platformId=o.get("platformId"),o.businessExperienceCockpitsCollection.add(e)}),n.onComplete(e))},onFailure:function(e,t){n.onFailure(t)}})}}})}),define("DS/i3DXCompass/Collection/ProductOptionalContentList",["UWA/Core","DS/i3DXCompass/Collection/ProductList","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/Feature"],function(e,t,n,o,i){"use strict";return t.extend({sync:function(e,t,i){var s,a=this,l=!1;switch(e){case"read":s=this.data={},n.request({url:n.getProcessDetailsUrl,urlParams:{os:o.getOs()},onComplete:function(e){var t,l=[],c=[];if(s.myapps=e,e.about&&e.about.forEach(function(e){"BuildTransactionID"===e.key&&(t=e.value,s.transactionId=t)}),e.cloud){if(e.env){e.env.forEach(function(e){e.licenses.forEach(function(e){o.pushUnique(l,e.id)})}),a.installList.forEach(function(e){c.push(e.get("dpIdObj")),e.get("processes").forEach(function(e){o.pushUnique(l,e)})});var d=d={id:(new Date).getTime(),method:"CodeLevelV4::status",params:{podID:t,clusterID:n.clusterId,processes:l,installs:c,type:"CNT",selectedApp:i.appId,os:o.getOs()}};n.request({url:n.onlineInstallUrl,proxy:"ajax",method:"POST",contentType:"application/json",postData:JSON.stringify(d),onComplete:function(e){s.downloadplatform=e,r()},onFailure:function(){r()}})}}else i&&i.onComplete&&r()},onFailure:function(){r()}})}function r(){!l&&i&&i.onComplete&&(l=!0,i.onComplete(s))}}})}),define("DS/i3DXCompass/View/ImageResponsiveView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Tools"],function(e,t,n,o){"use strict";var i=[{max:"620",prefix:"small"},{min:"621",prefix:"medium"}];return t.extend({tagName:"picture",className:"picture-responsive",render:function(){return i=[{max:"620",prefix:"small"},{min:"621",max:"1600",prefix:"large"},{min:"1601",prefix:"largex2"}],this.container.setContent(this._getSources()),this},_getSources:function(){var e=[];return(this.model.get("icon")||this.model.get("iconTemplate"))&&(e=i.map(this._getSource.bind(this))).push(this._buidDefaultImg()),e},_getSource:function(e){return{tag:"source",srcset:this._getSrcsets(e.prefix),media:this._buildMediaQuery(e)}},_getSrcsets:function(e){var t=[this._getSrcset(e)];return t.push(this._getSrcset(e,-1===e.indexOf("x2")?"2x":null)),t.join(", ")},_getSrcset:function(t,o){var i="2x"===o?t+"x2":t;return this.model.get("iconTemplate")?e.String.format(this.model.get("iconTemplate"),i)+(o?" "+o:""):n.getWebappsAssetUrl("i3DXCompass",e.String.format(this.model.get("icon"),t,i))+(o?" "+o:"")},_buildMediaQuery:function(e){return(e.min?"(min-width: "+e.min+"px)":"")+(e.min&&e.max?" and ":"")+(e.max?"(max-width: "+e.max+"px)":"")},_buidDefaultImg:function(){var e=i[i.length-1].prefix;return{tag:"img",src:this._getSrcset(e)}}})}),define("DS/i3DXCompass/View/BannerResponsiveView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/ImageResponsiveView"],function(e,t,n){"use strict";return t.extend({tagName:"div",className:"banner-responsive-view",render:function(){return this.container.setContent(this._getTemplate()),this},_getTemplate:function(){return{class:"icon-wrapper",html:[new n({model:this.model}).render(),{class:"banner-mask"}]}}})}),define("DS/i3DXCompass/View/DomainsDetailView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/BannerResponsiveView"],function(e,t,n,o){"use strict";var i=t.extend({tagName:"div",className:"item-view-square",domEvents:{click:"click"},click:function(){this.dispatchEvent("onItemClick",this.model)},render:function(){return this.container.setContent(this._getTemplate()),this},_getTemplate:function(){return[{class:"item-view-content-wrapper",styles:{"background-image":"url("+n.getWebappsAssetUrl("i3DXCompass",e.String.format(this.model.get("icon"),"thumb",this.model.get("id")))+")"},html:[{class:"item-view-content",html:{class:"title",text:this.model.get("title")}}]}]}});return t.extend({tagName:"div",className:"solution-detail",setup:function(e){return this.header=e.header,this},get:function(){var e=this;return[this.header?{class:"marketing-header",html:[{tag:"header",text:this.model.get("title")},{class:"subheader",text:this.model.get("subTitle")}]}:null,new o({model:this.model}).render(),this.header||!this.model.get("description")?null:{class:"description",html:this.model.get("description").replace(/{URL_RESSOURCES}/g,n.getWebappsAssetUrl("i3DXCompass",""))},{class:"marketing-footer",html:[{tag:"header",text:"Sub-Domains"},{class:"items-view-square",html:this.collection.map(function(t){return new i({model:t,events:{onItemClick:function(t){e.dispatchEvent("onItemClick",t)}}}).render()})}]}]},getBackgroundIcon:function(){var t=this.model.get("iconDetail"),o=this.model.get("icon");return t&&(t=this.model.get("iconDetail").startsWith("http")?this.model.get("iconDetail"):n.getWebappsAssetUrl("i3DXCompass",e.String.format(this.model.get("iconDetail"),"1440x128"))),o&&(o=this.model.get("icon").startsWith("http")?this.model.get("icon"):n.getWebappsAssetUrl("i3DXCompass",this.model.get("icon"))),t||o},render:function(){return this.container.setContent(this.get()),this}})}),define("DS/i3DXCompass/View/ProcessDetailView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/RoleView","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/BannerResponsiveView"],function(e,t,n,o,i){"use strict";return t.extend({tagName:"div",className:"view-process-detail",render:function(){return this.container.setContent(this._getTemplate()),this},getBackgroundIcon:function(t){var n=this.model.get("iconDetail"),i=this.model.get("icon");return n&&(n=this.model.get("iconDetail").startsWith("http")?this.model.get("iconDetail"):o.getWebappsAssetUrl("i3DXCompass",e.String.format(this.model.get("iconDetail"),t))),i&&(i=this.model.get("icon").startsWith("http")?this.model.get("icon"):o.getWebappsAssetUrl("i3DXCompass",this.model.get("icon"))),n||i},_getTemplate:function(){var e=this;return[new i({model:this.model}).render(),this.model.get("description")?{class:"portfolio-description",html:this.model.get("description").replace(/{URL_RESSOURCES}/g,o.getWebappsAssetUrl("i3DXCompass",""))}:null,{class:"marketing-footer",html:[{tag:"header",text:"Roles"},{class:"items-roles-view",html:this.collection.map(function(t){return new n({brand:e.model.get("brand"),clickable:!0,model:t,events:{onItemClick:function(){e.dispatchEvent("onItemClick",t)}}}).render()})}]}]}})}),define("DS/i3DXCompass/View/PortfolioGenericView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/BannerResponsiveView","DS/i3DXCompass/Collection/PortfolioCollection","DS/i3DXCompass/UsageTracker","DS/i3DXCompass/Tools","DS/UIKIT/Carousel","DS/i3DXCompass/Feature","DS/UIKIT/Badge","DS/UIKIT/Tooltip","DS/i3DXCompass/View/PortfolioContactFormView","DS/i3DXCompass/View/ContentOverlayView","DS/i3DXCompass/Data","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature","DS/UIKIT/Input/Button","DS/i3DXCompass/View/PortfolioSectionView"],function(e,t,n,o,i,s,a,l,r,c,d,p,u,m,h,f,g,v){"use strict";var C=[],b=function(e){return e.id.toLowerCase().replace(/ /g,"")},y=function(e){return e.filter(function(e){return C[e]}).map(function(e){return C[e]})},S=function(e){var t=e.get?e.get("title"):e.title;return(e.get?e.get("slug"):e.slug)||a.toSeoUrl(t)},w=function(e,t){var n="",o=r.getPortfolioUrlLocale()?r.getPortfolioUrlLocale()+"/":"";return e&&(n=e.map(function(e){return S(e)}).join("/")),t&&(n+="/"),(a.getRootPath()+o+n+(t?S(t):"")).replace(/\/\//g,"/")},D=t.extend({tagName:function(){return this.options.itemTagName||"a"},domEvents:{click:"click"},className:"portfolio-item",click:function(t){this.dispatchEvent("onItemClick",this.model),e.Event.stop(t),r.supportPushState()&&r.needPushState()&&(history.pushState("",this.model.get("title"),w(this.options.navigation,this.model)),a.manageSeoTags(this.model,S(this.model)))},setup:function(e){var t=this.model&&this.model.get("deployments")?["All"].concat(this.model.get("deployments")):null;return this.defaultIconsuffix=e.defaultIconsuffix||"thumb",t&&this.container.setAttribute("data-deployment",y(t).map(function(e){return b(e)}).join(",")),this},render:function(){var e=this.container,t=this._getTemplate(),n=w(this.options.navigation,this.model);return e.setAttribute("data-id",this.model.get("acronym")||this.model.get("id")),e.setAttribute("href",n),e.setAttribute("data-search",this.model.get("title")+(this.model.get("subTitle")?"/"+this.model.get("subTitle"):"")),e.setAttribute("data-seo",n),this.model.get("rank")&&e.setAttribute("data-rank",this.model.get("rank")),this.model&&this.model.get("comingSoon")&&e.addClassName("disabled"),e.setContent(t),this},_getTemplate:function(){var e=this.model.get("title").length>35;return{class:this._getPrefixedClassName("inner"),styles:{"background-image":"url("+this.getThumbnailIcon()+")"},html:{class:this._getPrefixedClassName("content"),html:[{class:this._getPrefixedClassName("title")+(e?" "+this._getPrefixedClassName("title-long"):""),html:this.model.get("title")},this.model.get("subTitle")?{class:this._getPrefixedClassName("subtitle"),text:this.model.get("subTitle")}:null,this._buildComingSoon()]}}},_buildComingSoon:function(){var e=null;return this.model&&this.model.get("comingSoon")&&(e={class:"coming-soon",tag:"img",src:n.getWebappsAssetUrl("i3DXCompass","/v3.2/Badge_Coming_Soon.png")}),e},_getPrefixedClassName:function(e){return this.className+"-"+e},getThumbnailIcon:function(){var t=window.devicePixelRatio>=2?this.defaultIconsuffix+"x2":this.defaultIconsuffix;return a.isCompassV32()||(t="thumb"),this.model.get("icon")?n.getWebappsAssetUrl("i3DXCompass",e.String.format(this.model.get("icon"),t,this.model.get("id"))):e.String.format(this.model.get("iconTemplate"),t,this.model.get("id"))}});return t.extend({tagName:"div",className:"portfolio",setup:function(t){if(!t.usageEntity)throw new Error("usageEntity options is mandatory");return t.itemsTitle&&(this.itemsTitle=t.itemsTitle),t.itemTagName&&(this.itemTagName=t.itemTagName),t.itemsDefaultIconsuffix&&(this.itemsDefaultIconsuffix=t.itemsDefaultIconsuffix),t.hideDescription&&(this.hideDescription=t.hideDescription),t.hideBanner&&(this.hideBanner=t.hideBanner),t.extendedDescription&&(this.extendedDescription=t.extendedDescription),t.buildBuy&&(this.buildBuy=t.buildBuy),this.model&&this.model.addEventOnce("onSync",this._onModelSync.bind(this)),this.renderOnce=a.debounce(this.render,500,!0).bind(this),this.collection&&(this.collection.addEvent("onSync",this.render.bind(this)),this.collection.addEvent("onAdd",this.renderOnce.bind(this)),this.collection.addEvent("onRemove",this.renderOnce.bind(this)),this.collection.addEvent("onChange",this.renderOnce.bind(this))),this._onItemClick&&(this._onItemClickOnce=a.debounce(this._onItemClick,500,!0).bind(this)),C={All:{id:"all",text:e.i18n("ALL")},"On Premise":{id:"onpremise",icon:"drive",text:e.i18n("On-premises")},"Public Cloud":{id:"cloud",icon:"cloud",text:e.i18n("On-cloud ")}},this._filterDeploymentsAndTranslate=y,this._deploymentToCode=b,this.model&&this.container.setAttribute("data-seo-current",w(t.navigation)),r.isBuyEnabled()&&this.refreshBascketFooter(),this},_onModelSync:function(){setTimeout(function(){this.collection=new i(this.model.get("data")),this.render()}.bind(this),25)},render:function(){var e=this.container,t=this.extendedDescription&&r.isSolutionDetailActivated();return e.setContent([this._buildBanner(),this._buildDescription(),t?this._buildBenefits():null,t?this._buildExtraContent():null,t?this._buildSuccessStory():null,t?this._buildDiscoverList():null,this._buildCourses(),this._buildFooter()]),setTimeout(function(){this._lazyLoadImages(),this._trackNavigation()}.bind(this),300),this},_isV32:function(){return!!this.model.get("tagLine")},_buildBanner:function(){return this.model&&!this.hideBanner?new o({model:this.model}).render():null},_buildTitleBanner:function(){return this.model&&!this.hideBanner&&this.model.get("title")?{tag:"portfolio-header-title",class:"font-3dslight",html:this.model.get("title")}:null},_buildTagLine:function(){var e=this.model&&this.model.get("tagLine");return this.hideDescription||!e?null:{tag:"h2",class:"font-3dssemibold",html:e}},_onContactUsClick:function(){var t=this;if(s.compassInc({eventCategory:"compass",eventAction:"compass-contact",persDim:{pd2:this.model.get("acronym"),pd3:this.model.get("title")}}),r.isOnPremiseEnvironment()||!r.isContactFormActivated())window.open("https://discover.3ds.com/my3dexperience-contact-sales","_blank");else{var n=new u({title:e.i18n("Contact us"),closable:!0,view:new p({events:{onClose:function(){n.back()}}}).render(),events:{onClose:function(){t.dispatchEvent("onClose")},callGoHomes:function(){n.back(),t.dispatchEvent("callGoHomes")}}}),o=t.container.getParent(".content-overlay").getParent().getElements(".content-overlay");n.inject(o[o.length-1]||t.container,"after"),n.show()}},_buildContactList:function(){var t,n=this.model,o=n.get("flyer"),i=[];return f.isMobileAppEnvironment()||(t=new g({className:"info",icon:"phone",id:"ContactListCallUs",value:e.i18n("Call Us")}),i.push(new g({className:"info",icon:"doc-log ",value:e.i18n("Contact Sales"),events:{onClick:this._onContactUsClick.bind(this)}}),t),new d({className:"compass-tooltip",position:"bottom",target:t.elements.container,trigger:"click touch",delay:{show:0,hide:0},body:"<div>"+e.i18n("USA & Canada: 1855 696 1125")+"</div><div>"+e.i18n("India: 1800 200 9276")+"</div> <div>"+e.i18n("Other English countries: +800 379 78 361")+"</div>"})),o&&i.push(new g({className:"info",icon:"download",value:o.text,events:{onClick:function(){var e=o.link;0!==e.indexOf("http")&&(e=a.getPortfolioAssetTemplateUrl(n.get("id"),e)),window.open(e,"_blank")}}})),{class:"portfolio-description-contact",html:i}},_buildTagList:function(){var e=this,t=null,n=this.model&&this.model.get("deployments")&&this.model.get("deployments").length>1?["All"].concat(this.model.get("deployments")):this.model&&this.model.get("deployments"),o=function(t){return t.length>1&&e.collection.find(function(e){return e.get("deployments").length!==t.length})};if(n){var i=(n=y(n)).map(function(t){return new c({content:t.text,className:1===n.length||"all"===t.id?"primary":"do-disable",selectable:!0,closable:!1,id:t.id,icon:"onpremise"===t.id?"drive"+(o(n)?"":" -disabled"):"all"===t.id?"":"cloud"+(o(n)?"":" -disabled"),events:{onClick:o(n)?function(){var t=this;if(this.elements.container.hasClassName("do-disable")){this.elements.container.getParent(".portfolio-description-tags").getElements(".badge").forEach(function(e){e.getAttribute("id")===t.options.id?e.removeClassName("do-disable").addClassName("badge-primary"):e.removeClassName("badge-primary").removeClassName("do-disable").addClassName("do-disable")});e.container.getElements("[data-deployment").forEach(function(e){e.getAttribute("data-deployment").indexOf(t.options.id)>-1?e.removeClassName("do-disable"):e.hasClassName("do-disable")||e.addClassName("do-disable")}),e.container.getElements("[data-deployment").find(function(e){return!e.isHidden()})?e.container.getElement(".portfolio-items-empty").hide():e.container.getElement(".portfolio-items-empty").show()}}:function(){},onClose:function(){var t;this.elements.container.addClassName("disabled"),this.setClosable(!1),t=i.filter(function(e){return!1===e.elements.container.hasClassName("disabled")&&e}).map(function(e){return e.options.id}),e.container.getElements("[data-deployment").forEach(function(e){var n=!1;t.forEach(function(t){-1===e.getAttribute("data-deployment").indexOf(t)&&(n=!0)}),!1!==n||0===t.length?e.hide():e.show()}),e.container.getElements("[data-deployment").find(function(e){return!e.isHidden()})?e.container.getElement(".portfolio-items-empty").hide():e.container.getElement(".portfolio-items-empty").show()}}})});t={class:"portfolio-description-tags font-3dslight",html:i}}return t},_buildCourses:function(){var e=null;return this.model&&this.model.get("courses")&&(e=this.model.get("courses").map(this._buildCourse.bind(this))),e?{class:"courses",html:e}:null},_buildCourse:function(t){var o=e.createElement("div",{class:"course-wrapper",html:[{class:"course-wrapper-cnt",html:[{class:"course-content",html:[{class:"course-title",text:t.title},{class:"course-img",html:{tag:"img",src:n.getWebappsAssetUrl("i3DXCompass",e.String.format(t.icon,t.id,t.id))}},{class:"course-description",text:t.description},{html:[{class:"course-footer",text:t.version+" | "+t.duree+" | "+t.language}]}]},{class:"course-expand fonticon fonticon-chevron-down",tag:"i",events:{click:function(){o.getElement(".course-detail").toggleClassName("hidden")}}}]},{class:"course-detail hidden",html:t.data&&t.data.map(function(e){return{class:"course-detail-item",html:[{class:"course-detail-title",html:[{tag:"i",class:"fonticon fonticon-book-open"},{tag:"span",text:e.title}]},{class:"course-detail-duration",text:e.duration}]}})}]});return o},stopVideo:function(){this.container.getElements(".portfolio-description video").forEach(function(e){e.pause()})},_buildSuccessStory:function(){var t=this,n=null,o=[],i=this.model?this.model.get("successStory"):null;return i&&(i.subTitle&&o.push({class:"portfolio-success-story-subtitle",text:i.subTitle}),i.link&&i.thumbnail&&o.push({class:"portfolio-success-story-media",html:this._buildMedia(a.getPortfolioAssetTemplateUrl(this.model.get("id"),i.thumbnail)),events:{click:function(){this.setContent(t._buildMedia(i.link))}}}),n=new v({className:"portfolio-success-story",title:e.i18n("SUCCESS STORY"),subTitle:i.title,content:o}).render()),n},_buildBenefits:function(){var t=null;if(this.model.get("benefits")){var n=e.String.format(e.i18n("Benefits of {0}"),this.model.get("title"));this.model.get("benefits").indexOf("<ul><li>");-1!==this.model.get("benefits").indexOf("Benefits of")&&(n=this.model.get("benefits").substring(0,this.model.get("benefits").indexOf("</p>")).replace("<p>","").replace("<strong>","").replace("</strong>","")),t=new v({className:"portfolio-benefits",title:n,content:{tag:"div",class:"font-3dsregular",html:this.model.get("benefits")}}).render()}return t},_buildBenefit:function(){return this.model.get("benefits").replaceAll("<p>&nbsp;</p>","").replaceAll("<ul><li>",'<div class = "benefit-container"><h3 class="font-3dssemibold"><li>').replaceAll("</li></ul>","</h3>").replaceAll("</p>","</p></div>")},_buildDescription:function(){var t=this.model&&this.model.get("description"),n=this.model?a.isCarouselSmallSize()||!this.model.get("descriptionMediasTemplate")?this.model.get("descriptionMediasTemplate"):this.model.get("descriptionMedias"):null;if(!this.hideDescription&&t){var o=[{tag:"portfolio-header-background"},{tag:"portfolio-header",html:[this._buildTitleBanner(),this._buildTagLine()]},{tag:"portfolio-content",class:"font-3dslight",html:[t,this.extendedDescription&&r.isSolutionDetailActivated()||this.buildBuy?this._buildContactList():null]}];n&&(n.sort(function(e,t){return e.indexOf(".mp4")>-1?-1:1}),n.sort(function(e,t){return e.indexOf(".mp4")>-1?-1:e<t?0:1}),n.length>1?o.push({tag:"portfolio-video",html:new l({autoPlay:!1,infinite:!1,animation:"fade",arrows:!1,slides:e.createElement("div",{html:n.map(this._buildMedia.bind(this))}),slideSelector:"> video, > img",events:{onSlide:this.stopVideo.bind(this)}})}):o.push({tag:"portfolio-video",html:n.map(this._buildMedia.bind(this))})),t={tag:"portfolio-description",html:o}}return this.hideDescription?null:t},_buildExtraContent:function(){var t=null,n=this.model?this.model:null,o=n?n.get("extraContent"):null;return o&&(t={class:"portfolio-extra-content",html:{class:"portfolio-extra-content-inner",html:[{html:[{class:"portfolio-extra-content-title font-3dsregular",text:o.title},{class:"portfolio-extra-content-content font-3dslight",text:o.content}]},{class:"portfolio-extra-content-play-button",html:{class:"portfolio-button",html:[{text:o.button.text}],events:{click:function(){if(!o.gatedContent||e.is(h._getUser())){var t=o.button.link;0!==t.indexOf("http")&&(t=a.getPortfolioAssetTemplateUrl(n.get("id"),t)),window.open(t,"_blank")}else window.location.href=m.passportUrl+"/login?service="+encodeURIComponent(window.location.origin+window.location.pathname+window.location.hash)}}}}]}}),t},_buildDiscoverList:function(){var t=this,o=null,i=this.model?this.model.get("discover"):null;return i&&i.length>0&&(o=new v({className:"discover-section",background:!0,title:e.i18n("DISCOVER MORE SOLUTIONS"),content:{class:"discover-section-list",html:i.filter(function(e){return t.model.collection.get(e)}).map(function(o){var i=t.model.collection.get(o);return{tag:"portfolio-discover-card",html:[{tag:"portfolio-discover-card-header",styles:{"background-image":"url("+function(t){var o=window.devicePixelRatio>=2?"thumbx2":"thumb";return t.get("icon")?n.getWebappsAssetUrl("i3DXCompass",e.String.format(t.get("icon"),o,t.get("id"))):e.String.format(t.get("iconTemplate"),o,t.get("id"))}(i)+")"}},{tag:"portfolio-discover-card-title",class:"text-ellipsis font-3dsregular",text:i.get("title")},{tag:"portfolio-discover-card-content",class:"font-3dsregular",text:i.get("tagLine")},{tag:"portfolio-discover-card-footer",html:{class:"portfolio-button font-3dssemibold",html:[{text:e.i18n("Learn more")},{tag:"i",class:"fonticon fonticon-chevron-right"}],events:{click:function(){t.model=i,t.render(),t.dispatchEvent("onDiscoverClick",i)}}}}]}})}}).render()),o},_buildMedia:function(t,o){var i;return t.indexOf("youtu.be")>-1||t.indexOf("youtube.com")>-1?i=e.createElement("div",{class:"video-responsive",html:{tag:"iframe",src:t,type:"text/html",width:"640",height:"360",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}}):t.indexOf(".mp4")>-1?i=e.createElement("video",{tag:"video",playsinline:!0,muted:!0,controls:!0,disablepictureinpicture:!0,controlslist:"nodownload",poster:a.hasWebpSupport()?n.getWebappsAssetUrl("i3DXCompass","/video-poster.webp"):n.getWebappsAssetUrl("i3DXCompass","/video-poster.png"),html:[{tag:"source",src:t.replace(".mp4",".webm"),type:"video/webm"},{tag:"source",src:t,type:"video/mp4"}],events:{contextmenu:function(e){e.preventDefault()}}}):(i={tag:"img",alt:0===o?e.String.format(e.i18n("My 3DEXPERIENCE - {0}"),this.model.get("title")):e.String.format(e.i18n("My 3DEXPERIENCE - {0} - {1}"),this.model.get("title"),o)},t.indexOf(".png")&&a.hasWebpSupport()&&(t=t.replace(".png",".webp")),i.src=e.String.format(t,""),i.srcset=e.String.format("{0} 620w",e.String.format(t,"_620px"))),i},_getNavigationPath:function(){var e="";return this.options.navigation&&(e=this.options.navigation.map(function(e){return e.get?e.get("id"):e.id}).join("/")),e},_buildFooter:function(){var t=this,n=this.collection,o=this._getNavigationPath(),i=r.getExclusionsCollection(),s=[];i&&i.length>0&&n.length>0&&o&&o.length>0&&i.forEach(function(e){o.indexOf(e.get("id"))>-1&&e.get("data").forEach(function(e){n.remove(e)})}),this.collection&&this.collection.length>0&&s.push(this._buildTagList());var a=e.createElement("div",{class:"portfolio-items",html:this.collection&&this.collection.slice(0,25).map(this._buildItem.bind(this))});if(s.push(a),s.push({class:"portfolio-items-empty",text:e.i18n("Please select an availability type: On-premises / On-cloud")}),this.list=new v({className:"section-footer",title:this.itemsTitle&&this.collection&&this.collection.length>0?this.itemsTitle:null,background:!0,content:s}).render(),this.collection&&this.collection.size()>25)for(var l=Math.ceil((this.collection.size()-25)/25),c=0;c<l;c++)requestAnimationFrame(function(n){t.collection.slice(25*(n+1),25*(n+2)).forEach(function(n){t._buildItem(n).getContent?a.appendChild(t._buildItem(n).getContent()):a.appendChild(e.createElement("div",t._buildItem(n)))})}.bind(this,c));return this.list},_buildItem:function(e){var t=new D({defaultIconsuffix:this.itemsDefaultIconsuffix,navigation:this.options.navigation,model:e,itemTagName:this.itemTagName,events:{onItemClick:this._onItemClickOnce.bind(this)}});return this._renderBuildItem(t)},_renderBuildItem:function(e){return e.render()},_onItemClick:function(e){this.dispatchEvent("onItemClick",e)},_trackNavigation:function(){var e=this.options.usageEntity;s.trackPageView({pageURL:w(this.options.navigation),pageTitle:e,id:this.model?this.model.get("acronym")||this.model.get("id"):"",title:this.model?this.model.get("title"):"",parentPage:this.options.parentIcon})},_lazyLoadImages:function(){const e=this.container.getElements('[loading="lazy"]');if("IntersectionObserver"in window){const t=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting||void 0===e.isIntersecting){const t=e.target;"lazy"===t.getAttribute("loading")&&("img"===t.getTagName()?t.src=t.dataset.src:t.style["background-image"]="url("+t.dataset.src+")",t.setAttribute("loading","done"),t.removeAttribute("data-src"))}})});e.forEach(function(e){t.observe(e)})}else e.forEach(function(e){e.src=e.dataset.src})},refreshBascketFooter:function(){var e=this;("PORTFOLIOS_OPERATIONS"===e.options.usageEntity||"trading"===e.options.usageEntity||e.options.parentIcon||document.querySelector("#my-apps-ct compass-nav-main .tab-item.active .fonticon-globe"))&&require(["DS/MPFMiniCartComponent/MiniCartComponentFactory","DS/MPFMiniCartComponent/MiniCartComponent","UWA/Class/Listener"],function(t,n,o){t.hasItems().then(function(t){t?"WORLD"!==e.options.parentIcon||document.querySelector("#my-apps-ct").hasClassName("compass-footer-visible")||document.querySelector("#my-apps-ct").addClassName("compass-footer-visible"):document.querySelector("#my-apps-ct").removeClassName("compass-footer-visible")})})}})}),define("DS/i3DXCompass/View/PortfolioBusinessExperienceRelationView",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/PortfolioGenericView"],function(e,t,n,o){"use strict";return o.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-business-experience-relation"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),e.itemsDefaultIconsuffix="small",this._parent(e)},_buildItem:function(e){for(var t=this,n=[],o=1;o<=5;o++)n.push({tag:"i",class:"fonticon fonticon-favorite-"+(o<=e.get("rating")?"on":"off")});return n.push({tag:"span",text:" ("+e.get("ratingCount")+")"}),{class:"portfolio-item-inner",html:[{class:"portfolio-item-image",html:e.get("icon")?{tag:"img",src:e.get("icon")}:null},{class:"portfolio-item-content",html:[{class:"content",html:[{class:"portfolio-item-title",text:e.get("title")},{class:"portfolio-item-rating",html:n},{class:"portfolio-item-logo",html:e.get("logo")?{tag:"img",src:e.get("icon")}:null}]},{class:"portfolio-item-description",text:e.get("descriptionShort")}]}],events:{click:function(){t.dispatchEvent("onItemClick",e)}}}}})}),define("DS/i3DXCompass/View/PortfolioDepth1View",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/PortfolioGenericView","DS/i3DXCompass/Tools"],function(e,t,n,o){"use strict";return n.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth1"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this._parent(e)}})}),define("DS/i3DXCompass/Collection/InstallOptionalContentList",["UWA/Core","DS/i3DXCompass/Model/Install","DS/i3DXCompass/Collection/InstallList","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data"],function(e,t,n,o,i,s){"use strict";e.i18n;return n.extend({model:t,parse:function(e){var t=this,n=[];return e.forEach(function(e){var o;e.lastBuildId&&"CNT"===e.type&&t.isAvailableForCurrentEnvironment(e)&&(e.processes=(e.installedProcesses||[]).map(function(e){return e.split(".")[0]}),o=e.processes[0],e.dpId=e.lastBuildId+"+"+o,e.dpIdObj={ID:e.lastBuildId,process:o,golden:-1===(e.SPlevel||"").indexOf("."),release:"R"+e.level,SPLevel:e.SPlevel},e.name=(e.longName||e.GAlevel)+(e.registry_Identifier&&"!"!==e.registry_Identifier?" - "+e.registry_Identifier:""),e.daemonId=e.id,e.id=e.GAlevel+e.installationType+(e.registry_Identifier||""),n.push(e))}),n}})}),define("DS/i3DXCompass/InstallManager",["UWA/Core","UWA/Controls/Abstract","UWA/Controls/Input","UWA/Class/Model","UWA/Class/Collection","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/EventManager","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/Collection/InstallList","DS/i3DXCompass/Collection/ProductList","DS/i3DXCompass/Collection/InstallOptionalContentList","DS/i3DXCompass/Collection/ProductOptionalContentList","DS/UIKIT/Modal","DS/UIKIT/Input/Select","DS/i3DXCompass/Feature","DS/UIKIT/Input/Button","DS/UIKIT/Spinner","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e,t,n,o,i,s,a,l,r,c,d,p,u,m,h,f,g,v,C){"use strict";var b=s.i18n,y=function(){return{tag:"div",styles:{padding:"20px",margin:"20px 0",border:"1px solid #eee","border-left-width":"5px","border-radius":"3px","text-align":"justify","border-left-color":"#E87B00"},html:[{tag:"p",text:b("outdated_installation_uninstall")},{tag:"p",html:b("outdated_installation_uninstall_warning")}]}},S=t.extend({defaultOptions:{},name:"compass-process-descriptor",buildSkeleton:function(){var t=this,n=this.elements,o=this.options.products.title;n.title=e.createElement("button",{class:"btn btn-primary btn-lg btn-block",html:o,events:{click:function(){t.dispatchEvent("onClick")}}}),n.container=e.createElement("div",{class:this.getClassNames(),html:[n.title]})},getContent:function(){return this.elements.container||this.buildSkeleton(),this.elements.container}}),w=o.extend({idAttribute:"codeLevel"}),D=i.extend({model:w,comparator:"place"}),E=o.extend({idAttribute:"installType",setup:function(){this._levels=new D(this.get("levels")),this.addEvent("onChange:levels",function(e,t){this._levels.set(t)})}}),A=i.extend({model:E}),I=o.extend({setup:function(){this._levels=new D(this.get("levels")),this.addEvent("onChange:levels",function(e,t){this._levels.set(t)})}}),N=i.extend({model:I}),k=null,T={INSTALL_NOTHING_TO_DO:0,INSTALL_PROPOSE_UPDATE:1,INSTALL_GA_ON_GA:2,INSTALL_FORCE_UPDATE:3,NEW_INSTALL_NOTHING_TO_DO:0,NEW_INSTALL_PROPOSE_UPDATE:1,NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL:2,NEW_INSTALL_FORCE_UPDATE:3,NEW_INSTALL_FORCE_UPDATE_UNINSTALL:4,NEW_INSTALL_ADDITIONAL:5,NEW_INSTALL_ERROR:6,releases:[],installList:new c,productList:null,productOptionalContentList:null,stackList:new A,stackOptionalList:new A,installOptionalList:new p,installLevelList:new N,installLevelOptionalList:new N,init:function(e){T.cloud=e,T.installList.addEvents({"onChange:lastBuildId":T.invalidateProductList,"onChange:processes":T.invalidateProductList,onAdd:T.invalidateProductList,onRemove:T.invalidateProductList}),T.installOptionalList.addEvents({"onChange:lastBuildId":T.invalidateProductList,"onChange:processes":T.invalidateProductList,onAdd:T.invalidateProductList,onRemove:T.invalidateProductList})},invalidateProductList:function(){T.productList&&T.productList.invalidate()},onlineInstallation:function(t,n,o,i,s,a,c,d){return n&&f.isLockInstallationUpdate()?(l.dispatchEvent("onShowMessage",b("isLockInstallationUpdate")),void l.dispatchEvent("onHideMessage",5e3)):f.isLockInstallation()?(l.dispatchEvent("onShowMessage",b("isLockInstallation")),void l.dispatchEvent("onHideMessage",5e3)):void r.isDaemonBusy({onComplete:function(e){e?(l.dispatchEvent("onShowMessage",b("launcherbusyretry")),l.dispatchEvent("onHideMessage",5e3)):d?T.optionalContentInstallation(t,n,o,c):T.onlineInstallationMenu(t,n,o,i,s,a,null,c)},onFailure:function(t){e.log(t),l.dispatchEvent("onShowMessage",b("launcherunavailable")),l.dispatchEvent("onHideMessage",5e3)}})},removeInstallation:function(t,n){var o=[];if(f.isLockUninstallation())return l.dispatchEvent("onShowMessage",b("isLockUninstallation")),void l.dispatchEvent("onHideMessage",5e3);if(T.modal=new m({className:"compass-modal",closable:!0,visible:!0,events:{onHide:function(){T.modal.destroy()}},header:"<h4>"+b("3dexperienceUninstallation")+"</h4>",body:"<div></div>",footer:[{tag:"button",class:"btn btn-primary",text:b("uninstall"),events:{click:function(){T.modal.hide(),T.uninstall(t)}}},{tag:"button",class:"btn btn-default",text:b("cancel"),events:{click:function(){T.modal.hide()}}}]}).inject(document.body),t.get("apps").length<=5){var i=t.get("apps").length;T.modal.setBody("<div>"+e.String.format("Are you sure you want to uninstall <b>{0}</b> ({1})?",n.get("title"),t.get("longName"))+"</div>"),t.get("apps").forEach(function(s){C.getAppInfo({appId:s.appsId,onComplete:function(s){i--,s.title!==n.get("title")&&o.push(s.title),0===i&&(1===o.length?T.modal.setBody("<div>"+e.String.format("Are you sure you want to uninstall <b>{0}</b> ({1})?",n.get("title"),t.get("longName"))+"</div>"):T.modal.setBody("<div>"+e.String.format("Are you sure you want to uninstall <b>{0}</b> ({1}) and <i>{2}</i> Apps?",n.get("title"),t.get("longName"),o.join(", "))+"</div>"))}})})}else T.modal.setBody("<div>"+e.String.format("Are you sure you want to uninstall <b>{0}</b> ({1}) and {2} related Apps?",n.get("title"),t.get("longName"),t.get("apps").length)+"</div>")},uninstall:function(t){var n={installId:t.get("daemonId"),isInteractive:!0};l.dispatchEvent("onShowMessage",b("lauchingUninstallation")),l.dispatchEvent("onHideMessage",5e3),r.uninstallMedia({params:n,onComplete:function(){l.dispatchEvent("onShowMessage",b("uninstallationsuccess")),l.dispatchEvent("onHideMessage",5e3)},onFailure:function(t){e.log(t),s.dispatchLauncherErrorEvent(t)}})},optionalContentInstallation:function(t,n,o,i){var a,l,r,c,d,p,u,h,f=[],g=(s.removeDoublons(T.installationPaths),t.get("powerBy")&&t.get("powerBy").extendedApp&&t.get("powerBy").baseApp.extraInstall&&t.get("powerBy").baseApp.extraInstall!==licenseToInstall?function(){t.set("licenses",[{id:t.get("powerBy").baseApp.extraInstall}]),t.set("powerByBase",!0),require(["DS/i3DXCompassServices/i3DXCompassPubSub"],function(e){e.publish("installApp",{appId:t.get("id")},function(){t.set("licenses",[{id:t.get("powerBy").extendedApp.extraInstall}]),t.set("powerByBase",!1),t.unset("install")})})}:function(){e.log("Nothing to do for ExtraDriveInstall")});t.get("licenses").forEach(function(e){f.push(T.productOptionalContentList.get(e.id))}),l={title:e.String.format(b(n?"updateOptionalContentOfAllRolesContaining":"installOptionalContentOfAllRolesContaining"),t.get("title")),id:"allgrantedprocesses",products:f},c=o,a=(o=t.get("stackOptionContentList")._models[0]).get("installType"),T.productOptionalContentList.where({installType:a,granted:!0}),d=T.stackOptionalList.get(a),p=d._levels.last(),r=e.createElement("div",{html:[e.createElement("div",{class:"compass-install-desc compass-install-intro",html:n?e.String.format(b("readyupdate"),p.get("commercialName")):e.String.format(b("readyinstallation"),p.get("commercialName"))}),n?{tag:"div",class:"compass-install-desc",html:e.String.format(b("nbcompleteupdgraded"),p.get("commercialName"))}:null,n&&!0===n.get("uninstall")?y():"",new S({products:l,events:{onClick:function(e,t,o){var i=n?n.getInstallationMode():"Both";n&&(c=n),!u&&h&&"cloud"!==h.getValue()[0]&&(u=h.getValue()[0]),T.launchInstallation(e,c,p,i,u,t,o)}.bind(T,l,g)}}),void 0]}),T.modal=new m({className:"compass-modal",closable:!0,visible:!0,events:{onHide:function(){T.modal.destroy()}},header:"<h4>"+b("3dexperienceinstallation")+"</h4>",body:r,footer:{tag:"button",class:"btn btn-default",text:b("cancel"),events:{click:function(){T.modal.hide()}}}}).inject(document.body)},onlineInstallationMenu:function(t,n,o,i,a,l,r,c){var d,p,u,f,g,v,C,w,D,E,A,I,N,P,_=[],O=[],x=s.removeDoublons(T.installationPaths);function U(e,t,o){var i=n?n.getInstallationMode():"Both";!A&&N&&"cloud"!==N.getValue()[0]&&(A=N.getValue()[0]),T.launchInstallation(e,C,E,i,A,t,o)}k||(k=t.extractMyAppsUrlFromLaunchInfo()),n?(n.get("processes").some(function(e){var t=T.productList.get(e);if(t.get("online")&&t.get("env").length>0)return O.push(t),!0}),0===O.length&&(d=n.get("installType"),O.push(T.productList.findWhere({granted:!0,installType:d}))),p={title:i?e.String.format(b("update"),t.get("title")):b("updateallprocesses"),id:"update",products:O}):(e.is(r)?_.push(T.productList.get(r)):t.get("licenses").forEach(function(e){var t=T.productList.get(e.id);t.get("installType")&&_.push(t)}),d=_[0].get("installType"),function(t,n){return t.length===n.length&&t.every(function(t){return e.Array.detect(n,function(e){return t.get("id")===e.get("id")})})}(O=T.productList.where({installType:d,granted:!0}),_)||i||(u={title:b("installallgranted"),id:"allgrantedprocesses",products:O}),f={title:i?e.String.format(b("install"),t.get("title")):e.String.format(b("installallcontaining"),t.get("title")),id:u?"allcontainingprocesses":"allgrantedprocesses",products:_},o||(o=T.installList.find(function(e){return!0===e.get("online")&&e.get("installType")===d&&"CNT"!==e.get("type")&&e.isCompatible(T.releases)&&e.isAvailableForInstallation()}))),(C=n||o)?(w=T.installLevelList.get(C.get("dpId")),E=w._levels.last()):(D=T.stackList.get(d),E=D._levels.last()),v=e.createElement("div",{class:"compass-install-desc compass-install-intro",html:n?e.String.format(b("readyupdate"),E.get("commercialName")):e.String.format(b("readyinstallation"),l?C.get("name"):E.get("commercialName"))}),0===x.length?A=null:(x.push({label:b("DefaultInstallationLocation"),value:"cloud"}),P=x.map(function(e,t){return{label:e.label||e,value:void 0!==e.value?e.value:e,selected:0===t}}),N=new h({placeholder:!1,options:P}),I=e.createElement("div",{class:"compass-install-path",html:[{tag:"div",class:"compass-install-desc",text:b("instfilelocation")},N]}));var R=t.get("powerBy")&&t.get("powerBy").extendedApp&&t.get("powerBy").baseApp.extraInstall&&t.get("powerBy").baseApp.extraInstall!==r?function(){t.set("licenses",[{id:t.get("powerBy").baseApp.extraInstall}]),t.set("powerByBase",!0);var e=t.get("powerBy")?t.get("powerBy").baseApp.id:t.get("id");t.get("powerBy")&&t.collection.get(e)&&t.collection.get(e).set("licenses",[{id:t.get("powerBy").baseApp.extraInstall}]);require(["DS/i3DXCompassServices/i3DXCompassPubSub"],function(n){n.publish("installApp",{appId:e},function(){t.set("licenses",[{id:t.get("powerBy").extendedApp.extraInstall}]),t.set("powerByBase",!1),t.unset("install")})})}:function(){e.log("Nothing to do for ExtraDriveInstall")};!a||n&&!0===n.get("uninstall")||I?(g=e.createElement("div",{html:[v,n&&!0===n.get("uninstall")?y():"",!o||l||E.get("selectedInstall")?null:{tag:"div",class:"compass-install-desc",html:e.String.format(b("nbcompleteupdgraded"),E.get("commercialName"))},l?new S({products:{title:e.String.format(b("installalladditionalresources"))},events:{onClick:U.bind(T,u||f,R,l)}}):null,p&&!l?new S({products:p,events:{onClick:U.bind(T,p,R)}}):null,a||!u||l?null:[new S({products:u,events:{onClick:U.bind(T,u,R)}}),{tag:"div",class:"compass-install-desc",html:e.String.format(b("orinstallrelated"),t.get("title"))}],f&&!l?new S({products:f,events:{onClick:U.bind(T,f,R)}}):null,I]}),T.modal=new m({className:"compass-modal",closable:!0,visible:!0,events:{onHide:function(){T.modal.destroy()}},header:"<h4>"+b("3dexperienceinstallation")+"</h4>",body:g,footer:{tag:"button",class:"btn btn-default",text:b("cancel"),events:{click:function(){T.modal.hide()}}}}).inject(document.body)):f?U.call(T,f,c):p&&U.call(T,p,c)},_getExtraInstall:function(e,t,n,o,i,s,a){T.onlineInstallationMenu(e,t,n,o,i,s,a)},launchInstallation:function(t,n,o,i,c,d,p){var u,m={},h=[],f=n?n.get("daemonId"):null;t.products.forEach(function(e){var t=e.get("env")[0];m[t]||(m[t]=[]),(!p||(p&&n&&n.get("processes").indexOf(e.get("id")))>-1)&&m[t].push(e.get("id"))}),Object.keys(m).forEach(function(e){m[e]&&m[e].length>0&&h.push({oiid:e,process:m[e]})}),u={clusterID:a.clusterId,processToInstallForOid:h,release:T.releaseForInstall,webServiceURL:a.onlineInstallUrl,type:n&&n.get("type")?n.get("type"):"DESKTOP_Cloud_Content"===o.get("codeType")?"CNT":"CODE",codeType:o.get("codeType"),levelType:i,codeLevel:p?n.get("lastBuildId"):o.get("codeLevel"),instVarData:{MyAppsURL:a.myAppsBaseUrl,Cas:null,PassportUrl:null,"3DRegistryURL":a.registryUrl,tenant:a.selectedPlatform},dataStoragePath:c||null,baseInstallIdForHF:f},p&&(u.installCnt=!0),u.osds="linux"===s.getOs()?"linux_a64":"win_b64",T.modal&&T.modal.hide(),a.getCasTgcAndCasTransientUrl({onComplete:function(t,o,i){if(e.log(u),u.instVarData.Cas=t,u.instVarData.x3ds_transient_auth_url=o,u.instVarData.PassportUrl=i,n&&n.get("uninstall")){var a=e.merge({release:n.get("level"),codeLevel:n.get("lastBuildId"),installId:f,uninstVarData:{uninstallType:"upgrade"}},u);r.uninstallMedia({params:a,onComplete:function(){u.baseInstallIdForHF=null,u.levelType="Both",r.installMedia({params:u,onComplete:function(){l.dispatchEvent("onShowMessage",b("installationsuccess")),l.dispatchEvent("onHideMessage",5e3),d&&("function"==typeof d?d():d.onComplete&&d.onComplete())},onFailure:function(t){e.log(t),s.dispatchLauncherErrorEvent(t),d&&("function"==typeof d?d():d.onFailure&&d.onFailure())}}),l.dispatchEvent("onShowMessage",b("launchinginstallation")),l.dispatchEvent("onHideMessage",5e3)},onFailure:function(t){e.log("onFailure"),e.log(t),s.dispatchLauncherErrorEvent(t)}})}else r.installMedia({params:u,onComplete:function(){l.dispatchEvent("onShowMessage",b("installationsuccess")),l.dispatchEvent("onHideMessage",5e3),d&&("function"==typeof d?d():d.onComplete&&d.onComplete())},onFailure:function(t){e.log(t),s.dispatchLauncherErrorEvent(t),d&&("function"==typeof d?d():d.onFailure&&d.onFailure())}}),l.dispatchEvent("onShowMessage",b("launchinginstallation")),l.dispatchEvent("onHideMessage",5e3)}})},getCompatibleAdditionalContent:function(t,n,o,i){var s=T.installOptionalList,a=T.productOptionalContentList,l=this;function r(e){var t=e.get("id"),n=e.get("thirdParty"),o={stack:"",installs:""};return e.get("powerBy")&&(t=e.get("powerBy").extendedApp?e.get("powerBy").extendedApp.id:e.get("powerBy").baseApp.id,(e.object&&"3DDrive"===e.object.serviceId||e.get("powerByBase"))&&(t=e.get("powerBy").baseApp.id)),o.installs=s.filter(function(e){return e.isCompatible(T.releases)&&(n||e._apps.get(t))}),o.stack=T.stackOptionalList,o}a||(a=T.productOptionalContentList=new u({installList:s})),s.fetch({_silent:i,onComplete:function(){a.update({appId:l._retrieveAppIdForInstallation(t),onComplete:function(o,i){var s;i.change&&T.extractOptionalData(i),s=e.is(t,"array")?t.map(r):r(t),n(s[0].installs,s[0].stack)}})},onFailure:function(){o&&o()}})},_retrieveAppIdForInstallation:function(e){var t,n;return e&&(e.get?n=e:e.length>0&&(n=e[0])),n&&(t=n.get("powerBy")?n.get("powerBy").extendedApp?n.get("powerBy").extendedApp.id:n.get("powerBy").baseApp.id:n.get("id")),t},getCompatibleInstalls:function(t,n,o,i){var s=T.installList,a=T.productList,l=this;function r(e){var t,n=e.get("id"),o=e.get("thirdParty");return e.get("powerBy")?e.object&&"3DDrive"===e.object.serviceId||e.get("powerByBase")?(n=e.get("powerBy").baseApp.id,s.filter(function(e){return e.isCompatible(T.releases)&&(o||e._apps.get(n))})):(e.get("powerBy").extendedApp?(n=e.get("powerBy").extendedApp.id,0===(t=s.filter(function(e){return e.isCompatible(T.releases)&&(o||e._apps.get(n))})).length&&(n=e.get("powerBy").baseApp.id,t=s.filter(function(e){return e.isCompatible(T.releases)&&(o||e._apps.get(n))&&e.get("instruction")!==T.NEW_INSTALL_ERROR}))):(n=e.get("powerBy").baseApp.id,t=s.filter(function(e){return e.isCompatible(T.releases)&&(o||e._apps.get(n))})),t):s.filter(function(e){return e.isCompatible(T.releases)&&(o||e._apps.get(n))})}a||(a=T.productList=new d({installList:s})),s.fetch({_silent:i,onComplete:function(){a.update({appId:l._retrieveAppIdForInstallation(t),onComplete:function(o,i){var s;i.change&&T.extractDpData(i),s=e.is(t,"array")?t.map(r):r(t),n(s)}})},onFailure:function(){o&&o()}})},extractDpData:function(e){var t=T.releases=[];e.myapps&&(T.cloud=e.myapps.cloud,T.installationPaths=e.myapps.installationPaths||[]),e.downloadplatform&&e.downloadplatform.result&&e.downloadplatform.result.stacks&&(e.downloadplatform.result.stacks.forEach(function(e){e.levels.forEach(function(e){s.pushUnique(t,e.release.substr(1,3))})}),T.stackList.set(e.downloadplatform.result.stacks),T.installLevelList.set(e.downloadplatform.result.installs),T.installList.forEach(function(e){var t=T.installLevelList.get(e.get("dpId")),n=t?function(e){var t=e;return e===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL?t=T.INSTALL_FORCE_UPDATE:e===T.NEW_INSTALL_ADDITIONAL||(e===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL?t=T.INSTALL_PROPOSE_UPDATE:e===T.NEW_INSTALL_ERROR&&(t=T.INSTALL_NOTHING_TO_DO)),t}(t.get("instruction")):0,o=t&&t._levels.length>0&&n!==T.INSTALL_NOTHING_TO_DO&&n!==T.INSTALL_GA_ON_GA,i=[],s=t?t.get("stack"):null;s&&(i=T.stackList.get(s)._levels.last().get("processes"));e.set({online:!0,update:o,status:n,instruction:t.get("instruction"),uninstall:t.get("instruction")===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL||t.get("instruction")===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL,installType:s,onlineStackProcesses:i,targetSPLevel:t&&t._levels&&t._levels.length>0?t._levels.last().get("targetSPLevel"):null})})),e.transactionId&&(T.releaseForInstall=e.transactionId.split("-")[0]),0===t.length&&T.releaseForInstall&&T.releases.push(T.releaseForInstall.substr(1,3))},extractOptionalData:function(e){var t=T.releases=[];e.myapps&&(T.cloud=e.myapps.cloud,T.installationPaths=e.myapps.installationPaths||[]),e.downloadplatform&&e.downloadplatform.result&&e.downloadplatform.result.stacks&&(e.downloadplatform.result.stacks.forEach(function(e){e.levels.forEach(function(e){s.pushUnique(t,e.release.substr(1,3))})}),T.stackOptionalList.set(e.downloadplatform.result.stacks),T.installLevelOptionalList.set(e.downloadplatform.result.installs),T.installOptionalList.forEach(function(e){var t=T.installLevelOptionalList.get(e.get("dpId")),n=t?function(e){var t=e;return e===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL?t=T.INSTALL_FORCE_UPDATE:e===T.NEW_INSTALL_ADDITIONAL||(e===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL?t=T.INSTALL_PROPOSE_UPDATE:e===T.NEW_INSTALL_ERROR&&(t=T.INSTALL_NOTHING_TO_DO)),t}(t.get("instruction")):0,o=t&&t._levels.length>0&&n!==T.INSTALL_NOTHING_TO_DO&&n!==T.INSTALL_GA_ON_GA,i=[],s=t?t.get("stack"):null;s&&(i=T.stackOptionalList.get(s)._levels.last().get("processes"));e.set({online:!0,update:o,status:n,uninstall:t.get("instruction")===T.NEW_INSTALL_PROPOSE_UPDATE_UNINSTALL||t.get("instruction")===T.NEW_INSTALL_FORCE_UPDATE_UNINSTALL,installType:t?t.get("stack"):null,onlineStackProcesses:i,targetSPLevel:t&&t._levels&&t._levels.length>0?t._levels.last().get("targetSPLevel"):null})})),e.transactionId&&(T.releaseForInstall=e.transactionId.split("-")[0]),0===t.length&&T.releaseForInstall&&T.releases.push(T.releaseForInstall.substr(1,3))},getInstall:function(e){return T.installList.get(e)},getInstallOptional:function(e){return T.installOptionalList.get(e)},showMacDownloadPanel:function(t,n){var o=new g({value:" ",disabled:!0,className:"primary btn-lg block"}),i=(new v).inject(o.getContent()).show();a.request({url:a.media+"/"+t.id,urlParams:{rolesCompass:"O3DADAC_RP"},onComplete:function(e){e.result&&e.result.length>0&&(i.destroy(),o.setDisabled(!1),o.getContent().setContent(b("Download")),o.addEvent("onClick",function(){window.open(e.result[0].codeLevels[0].volumes[0].url)}))}}),T.modal=new m({className:"compass-modal daemon-modal",closable:!0,visible:!0,events:{onHide:function(){T.modal.destroy()}},header:"<h4>"+t.get("title")+"</h4>",body:e.createElement("div",{class:"download-wrapper",html:[{tag:"ul",html:[{tag:"li",class:"compass-java-desc",text:b("downloadlauncherclicking")},o,{tag:"li",class:"compass-java-desc",text:b("installldownload")}]}]}),footer:{tag:"button",class:"btn btn-default",text:b("cancel"),events:{click:function(){T.modal.hide()}}}}).inject(document.body)}};return T}),define("DS/i3DXCompass/Controls/Settings",["UWA/Core","DS/i3DXCompass/Tools","DS/i3DXCompass/InstallManager","DS/UIKIT/DropdownMenu","UWA/Utils","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s){"use strict";var a=e.i18n;return o.extend({customClass:"compass-app-settings",iconClass:"fonticon fonticon-check",clickInstallId:"clickinstall",clickInstallRemoteId:"clickremote",clickOptionalContentInstall:"optionalContentInstall",clickOptionalContentStack:"optionalContentStack",clickConfig:"config",clickPlatform:"platform",init:function(t){if(t.isParentFamily)this.installItemsLength=this.getInstallWithouRemoteCount(t.familyOption.data.installs),this.app=t.familyOption.app,this.isForceSelectTenantActive=t.familyOption.isForceSelectTenantActive,t.familyOption={},this._parent(t);else{this.installItemsLength=this.getInstallWithouRemoteCount(t.data.installs),this.app=t.app,this.isForceSelectTenantActive=t.isForceSelectTenantActive;var n,o=this,s=t.data,l=s.installs,r=s.remoteInstall,c=s.platforms,d=t.preferredInstallId,p=t.processes,u=t.onlineInstallable,m=function(){var e=!1;return o.app.get("catEnvs")&&o.app.get("catEnvs").length>1?e=!0:o.app.get("catEnvs")&&Object.keys(o.app.get("catEnvs")).length>0&&Object.keys(o.app.get("catEnvs")).forEach(function(t){o.app.get("catEnvs")[t].length>1&&(e=!0)}),e},h=this.app.get("optionalContent")?this.getOptionalContentItem(p,u):null,f=l?l.filter(function(e){return!e._isOptionalContent()}).map(function(e){return this.getInstallItem(e,d,p,u,!1,t.shortcutEnabled,t.additionalContent)},this):null,g=f&&0===f.length,v=this.app.get("platforms")&&m()&&(!g||r)?this.getCatEnvItemByPlatforms():!c||g&&!r?null:this.getPlatformsItems(c),C=v||[];g&&(f.push({className:"header no-install",html:s.error?s.error:e.String.format(a("noinstall"),t.appTitle)}),u&&f.push({className:"download-link",name:this.clickInstallId,text:a("clickinstall")})),f&&t.remoteEnabled&&(f.push({className:"divider"}),r?f.push(this.getInstallItem(r,d,[],u,!0,!1)):u&&f.push({className:"download-link",name:this.clickInstallRemoteId,text:e.String.format(a("install"),t.remoteAppTitle)})),v&&f&&C.push({className:"divider"}),C=C.concat(f||[]),h&&(C=C.concat(h||[])),n={multiSelect:!0,maxItemsBeforeScroll:i.Client.getSize().height<400?5:i.Client.getSize().height<560?8:12,forceResponsive:m(),items:C,altPosition:function(){var e=o.elements,n=e.container.offsetWidth,i=e.container.offsetHeight,s=window.innerWidth,a=window.innerHeight,l=t.position.x,r=t.position.y;return l+n+20>s&&(l=s-n-20),r+i+20>a&&(r=a-i-20),{x:l,y:r}},renderTo:t.renderTo||document.body,target:t.target,events:t.events,shortcutEnabled:t.shortcutEnabled},this._parent(n)}this.trigger=t.trigger},buildSkeleton:function(){this._parent(),this.menus&&this.items.forEach(this.editItem,this),this.elements.container.addClassName(this.customClass)},editItem:function(t){var n=this,o=t.elements.container;t.html&&o.setContent(t.html);var i=e.createElement("icons");i.inject(o),"install"===t.type&&(o.setAttribute("data-type","install"),o.addClassName("has-install"),t.additionalContent&&!t.mand&&(o.addClassName("has-additional"),e.createElement("div",{class:"fonticon fonticon-install",title:a("additionalresources"),events:{click:function(){n.dispatchEvent("onClickAdditional",t.name),n.hideSettings()}}}).inject(i)),s.isOnPremiseEnvironment()||(o.addClassName("has-uninstall"),e.createElement("div",{class:"fonticon fonticon-drive-delete",title:a("uninstall"),events:{click:function(){n.dispatchEvent("onClickUninstall",t.name),n.hideSettings()}}}).inject(i)),t.optionalContent||!t.update&&!t.newProc||(o.addClassName("has-update"),e.createElement("div",{class:"fonticon fonticon-update"+(t.update?t.mand?" mand":" optional":t.newProc?" new":""),title:t.update?t.mand?a("updateneeded"):a("updateavailable"):t.newProc?a("newprocessesavailable"):"",events:{click:function(){t.newProc&&!t.update?n.dispatchEvent("onClickUpdate",["noInstallID",t.update]):n.dispatchEvent("onClickUpdate",[t.name,t.update]),n.hideSettings()}}}).inject(i)),t.shortcut&&(o.addClassName("has-shortcut"),e.createElement("div",{class:"fonticon fonticon-forward",title:a("createshortcut"),events:{click:function(){n.dispatchEvent("onClickShortcut",t.name)}}}).inject(i))),"optionalContentStack"!==t.type&&"optionalContentInstall"!==t.type||t.optionalContent&&(o.addClassName("has-optional-info"),e.createElement("div",{class:"fonticon fonticon-info",title:a("userassistance"),events:{click:function(){n.dispatchEvent("onClickOptionalConentDocumentation",t.name)}}}).inject(i))},getPlatformsItems:function(e){var t=this,n=[];return e.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),e.forEach(function(e){n.push(t.getPlatformItem(e))}),n},getCatEnvItemByPlatforms:function(){var e,t=[],n=[],o=this;return this.app.get("platforms").sort(),this.app.get("platforms").forEach(function(i){o.app.get("catEnvs")[i.id]?(t=[],o.app.get("catEnvs")[i.id].forEach(function(e,n){t.push(o.getConfigItem(e,i))}),(e=o.getPlatformItem(i)).items=t,e.className="platform-item-responsive",n.push(e)):n.push(o.getPlatformItem(i))}),n},getConfigItem:function(e,t){return{text:e.name,name:e.name,platformId:t.id,type:"config",selected:!!e.preferred,preferred:!!e.preferred}},getPlatformItem:function(e){return{text:e.name,name:e.id,type:"platform",className:"platform-item",selected:!this.isForceSelectTenantActive&&e.preferred,preferred:!this.isForceSelectTenantActive&&e.preferred}},getOptionalContentItem:function(e,o){var i=this.app.get("installOptionContentList")&&this.app.get("installOptionContentList")[0],s=this.app.get("stackOptionContentList"),l=null,r=[],c=!1;return i&&(e&&i.get("onlineStackProcesses")&&(r=t.intersection(e,i.get("onlineStackProcesses"))),c=o&&i.get("online")&&i.get("status")!==n.INSTALL_GA_ON_GA&&!t.includes(i.get("processes"),r)),i?i&&i.get("update")?l=a("updateoptionalcontentnow"):c&&(l=a("newoptionalcontent")):l=a("installoptionalcontentnow"),l?{text:l,name:i&&i.get("id")?i.get("id"):s.get("id"),type:i&&i.get("id")?"optionalContentInstall":"optionalContentStack",className:"install-item",icon:null,optionalContent:!0,update:i&&i.get("update")&&!this.app.isCustom(),shortcut:!1,newProc:!1}:null},getInstallItem:function(e,o,i,s,l,r,c){var d=l?"remote"===o:e.get("id")===o,p=[];return i&&e.get("onlineStackProcesses")&&(p=t.intersection(i,e.get("onlineStackProcesses"))),{text:l?a("remoteit"):e.get("name"),name:l?"remote":e.get("id"),type:"install",selected:d,additionalContent:c&&!0!==e.get("isContentInstalled"),preferred:d,mand:e.get("status")===n.INSTALL_FORCE_UPDATE&&!this.app.isCustom(),update:e.get("update")&&!this.app.isCustom(),shortcut:r,newProc:s&&e.get("online")&&e.get("status")!==n.INSTALL_GA_ON_GA&&!t.includes(e.get("processes"),p)&&!this.app.isCustom()}},getInstallWithouRemoteCount:function(e){return e?e.filter(function(e){return!e._isOptionalContent()}).length:0},onClick:function(e,t){var n=this,o=t.type,i={};if((o&&!e.target.hasClassName("fonticon-right-open")||!(t.elements.container.hasClassName("item item-back")||e.target.getParent(".item-submenu")||e.target.hasClassName("fonticon-right-open")||e.target.hasClassName("fonticon-left-open")))&&("install-item"!==t["data-type"]||1!==this.installItemsLength||"remote"===t.name||!e.target.hasClassName("install-item")&&!e.target.hasClassName("item-text"))){if(t.name===this.clickInstallId)return this.dispatchEvent("onClickInstall"),void this.hideSettings();if(t.name===this.clickInstallRemoteId)return this.dispatchEvent("onClickInstallRemote"),void this.hideSettings();if(t.type===this.clickOptionalContentStack||t.type===this.clickOptionalContentInstall)return n.dispatchEvent("onClickOptionalContent",[t.name,t.update,t.type]),void n.hideSettings();if(t.type===this.clickConfig){var s=n.updatePreferredConfig(t);return n.dispatchEvent("onConfigChange",[t]),void n.hideSettings(s)}"platform-item-responsive"===t.className&&t.items&&t.elements.container.querySelector(".fonticon-right-open")&&!n.isPreferredConfig(t.items)?t.elements.container.querySelector(".fonticon-right-open").click():(this.items.forEach(function(e){e.type===o&&e!==t&&e.preferred&&(e.icon=null,e.preferred=!1,n.updateItem(e))}),t.preferred=!0,n.updateItem(t),i[t.type]=t.name,this.dispatchEvent("onPlatformChange",i),t.type===this.clickPlatform&&n.hideSettings())}},isPreferredConfig:function(e){var t=!1;return e.forEach(function(e,n){!0===e.preferred&&(t=!0)}),t},updatePreferredConfig:function(e){var t=this,n=!1;return this.app.get("platforms").forEach(function(n){t.app.get("catEnvs")[n.id]&&t.app.get("catEnvs")[n.id].forEach(function(t,o){e.name===t.name&&e.platformId===n.id?t.preferred=!0:t.preferred=!1})}),this.items.forEach(function(t){"config"===t.type&&t!==e&&t.preferred?(n=!0,t.preferred=!1,e.selected=!1):"config"!==t.type||t!==e||t.preferred||(n=!0,e.preferred=!0,e.selected=!0),"platform"===t.type&&(n=!0,t.preferred=!1,e.selected=!1)}),n},onClickOutside:function(e){var t=e.target;t&&t===this.trigger&&e.stopPropagation(),this.hideSettings()},hideSettings:function(e){var t={},n=this;this.items&&this.items.forEach(function(e){e.preferred&&(e.type===n.clickConfig?t[e.type]=e:t[e.type]=e.name)}),!1===e||!0===e?this.dispatchEvent("onHideSettings",[t,e]):this.dispatchEvent("onHideSettings",t),this.hide(),this.destroy()},updateItem:function(t){t.icon?t.elements.icon?t.elements.icon.className=t.icon:t.elements.icon=e.createElement("span",{class:t.icon}).inject(t.elements.container,"top"):t.elements.icon&&(t.elements.icon.destroy(),delete t.elements.icon),t.preferred&&!t.elements.container.hasClassName("selectable selected")?t.elements.container.addClassName("selectable selected"):!t.preferred&&t.elements.container.hasClassName("selectable selected")&&t.elements.container.removeClassName("selectable").removeClassName("selected")}})}),define("DS/i3DXCompass/Model/App",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/InstallManager","DS/i3DXCompass/EventManager","DS/i3DXCompass/X3DContent","UWA/Utils/Cookie","DS/i3DXCompass/Types","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s,a,l,r,c,d,p,u){"use strict";var m={setup:function(){this.set("lowerCaseTitle",(this.get("title")||"").toLowerCase())},isCustom:function(){return this.get("thirdParty")},isNative:function(){return"Native"===this.get("type")},isFamily:function(){return"Family"===this.get("type")},isChildFamilyApp:function(){return!!this.get("isFamily")},isNativeMarketApp:function(){return this.isNative()&&(o.isValidMarketAppUrl(this.get("launchInfos"))||this.get("platforms")&&this.get("platforms").length>0&&o.isValidMarketAppUrl(this.get("platforms")[0].launchInfos))},isWeb:function(){return"Web"===this.get("type")},isWidget:function(){return"Widget"===this.get("type")},isAggregate:function(){return this.get("apps")&&this.get("apps").length>1},isRole:function(){return"Role"===this.get("type")},isServiceSwym:function(){return 2===this.get("service")},isServiceSpace:function(){return 1===this.get("service")},isWindows:function(){return this.get("tooltip").indexOf("Windows")>-1},matchesFilters:function(t){var n=this;return t.every(function(t){var o=t.key,i=t.value;return"searched"===o?!i||-1!==n.get("lowerCaseTitle").indexOf(i)||n.get("tooltip")&&-1!==n.get("tooltip").toLowerCase().indexOf(i)||n.id&&(-1!==n.id.toLowerCase().indexOf("_ap")&&-1!==i.indexOf("_ap")&&-1!==n.id.toLowerCase().indexOf(i)||-1===n.id.toLowerCase().indexOf("_ap")&&-1!==n.id.toLowerCase().indexOf(i)):"appIds"===o?!i||-1!==i.indexOf(n.id):"visibleQuadrant"===o?!i||-1!==["north","west","south","east"].indexOf(n.get("quadrant")):"function"===e.typeOf(n[o])?n[o]()===i:n.get(o)===i})},_isRemoteDisabled:function(){return"true"===c.get("3dremotevm")},getOptionalContent:function(e,t){var n=this,o=[this];e&&o.push(e),a.getCompatibleAdditionalContent(o,function(e,i){var s=e[0];e[1],n.get("install");if(s&&(e[0]=s.filter?s.filter(function(e){return s.get("status")!==a.NEW_INSTALL_ADDITIONAL&&s._isOptionalContent()}):s.get("status")!==a.NEW_INSTALL_ADDITIONAL&&s._isOptionalContent()?s:null),s=e[0],i){var l=!1;i._models[0]&&i._models[0].get("processes").forEach&&i._models[0].get("processes").forEach(function(e){o[0].get("licenses")&&o[0].get("licenses").forEach&&o[0].get("licenses").forEach(function(t){t.id===e&&(l=!0)})}),l||(i=null)}n.set("stackOptionContentList",i),n.set("installOptionContentList",e),n.set("optionalContent",!!i),t()},function(){t()},!1)},getInstallList:function(e,t,n,o){var i=this,s=[this];e&&s.push(e),a.getCompatibleInstalls(s,function(e){var n,o=e[0],s=e[1]||[],l=i.get("install");e[0]=o.filter(function(e){return e.get("status")!==a.NEW_INSTALL_ADDITIONAL&&!(e._isOptionalContent()&&e.get("status")===a.INSTALL_NOTHING_TO_DO)}),o=e[0],i._isRemoteDisabled()&&(s=[],"remote"===l&&(l=null)),"remote"===l&&s.length>0?n=s[0]:(n=a.getInstall(l),-1===o.indexOf(n)&&(n=null,l=null),n||1!==o.length||0!==s.length||(l=(n=o[0]).get("id"),i.set("install",l))),n||0!==o.length||(s.length>0?(l="remote",n=s[0]):l=null),t(e,n,l)},function(){n&&n()},o)},isOnlineInstallable:function(){var e=this.get("licenses"),t=a.productList;return!!(a.cloud&&this.isNative()&&!this.isNativeMarketApp()&&e.length>0&&e.every(function(e){return!(!t||!t.get(e.id))||(l.dispatchEvent("onMissingProcess"),!1)})&&e.detect(function(e){return t.get(e.id).get("online")}))},canAdditionalContent:function(e){var t=this,n=e.find(function(e){return e.get("appList").indexOf(t.get("id"))>-1}),o=this.get("licenses").detect(function(e){return"E94"===e.id});return a.cloud&&n&&!0===n.get("additionalContent")&&!o},canOptionalContent:function(e){var t=this,n=e.find(function(e){return e.get("appList").indexOf(t.get("id"))>-1});return a.cloud&&n&&!0===n.get("optionalContent")},getLaunchInfos:function(t,n,o){var i,s=this.get("launchInfos"),a=function(e){return!e||"string"!=typeof e||!e.trim()};if(void 0!==this.object&&this.object.envId&&(i=this.get("platforms")&&this.get("platforms").detect(function(e){return e.id===this.object.envId}.bind(this)))&&(i.launchUrl||i.launchInfos)&&(s=this.isWidget()?i.launchUrl:i.launchInfos),(void 0!==this.object||d.get())&&this.isNative()){var l=this.object,c=r.getX3DContent();void 0===l&&c&&c.data&&c.data.items&&c.data.items.length>0&&(l=c.data.items[0],(i=this.get("platforms")&&this.get("platforms").detect(function(e){return e.id===l.envId}))&&(i.launchUrl||i.launchInfos)&&(s=this.isWidget()?i.launchUrl:i.launchInfos)),s&&(s=s.replace("-workbench ","--AppName="),void 0!==l&&(a(l.contextId)||-1!==(s+=n+"-Ctx"+n+'"'+l.contextId+'"').search("-Prfctx")&&(s=s.replace(n+"-Prfctx","")),a(l.objectId)||(s+=n+"-object"+n+l.objectId,a(l.serviceId)||(s+=n+"-serviceId"+n+l.serviceId),a(l.objectType)||(s+=n+"-objectType"+n+'"'+l.objectType+'"')),s+=n+"-e"+n+"CATUNILoadFromWebCmdHdr"+n+"Open"))}if(s&&this.get("powerBy")){var p=this.get("powerBy").extendedApp?this.get("powerBy").extendedApp.id:this.get("powerBy").baseApp.id;this.object&&"3DDrive"===this.object.serviceId&&(p=this.get("powerBy").baseApp.id),s=s.replace(this.get("id"),p)}return t&&(s+=n+'-Cas="CASTGC='+t+'"'),o&&(s+=n+'-x3ds_transient_auth_url="'+o+'"'),e.log(s),s},getShortcutLaunchInfos:function(){var e,t=this.get("shortcutLaunchInfos");return this.get("powerBy")&&(e=this.get("powerBy").extendedApp?this.get("powerBy").extendedApp.id:this.get("powerBy").baseApp.id,t=t.replace(this.get("id"),e)),t},install:function(e){var t=this,n=this.getRemoteApp();this.getInstallList(n,function(o,i,s){var l="remote"===s,r=l?n:t;i?i.get("update")&&i.get("status")===a.INSTALL_FORCE_UPDATE||e.forceUpdate&&i.get("update")&&i.get("status")===a.INSTALL_PROPOSE_UPDATE?e&&!e.eventDetection?e.onFailure({error:"mandatory_update",install:i,app:r,remote:l}):e.onFailure({error:"recommended_update",install:i,app:r,remote:l}):e.onComplete({success:!0}):0===o[0].length&&0===(o[1]||[]).length?e.onFailure({error:"no_install_compatible",remoteAvailable:!!n}):e.onFailure({error:"no_install_selected"})},function(){e.onFailure({error:"unable_install_data"})},e.silent)},_launchTransient:function(n,s){var a,l,c=this,d=this.object,p=r.getX3DContent();void 0===d&&p&&p.data&&p.data.items&&p.data.items.length>0&&(d=p.data.items[0]),void 0!==d&&this.isWeb()&&(this.isServiceSwym()?d.hasOwnProperty("contextId")&&"Swym"===d.contextId&&(n=d.objectId):this.isServiceSpace()&&n&&(n+=-1!==n.search("[?&]")?"&":"?",d.hasOwnProperty("contextId")?n+="SecurityContext="+t.encodeUrl(d.contextId)+"&objectId="+d.objectId:n+="&objectId="+d.objectId)),n&&e.is(i.addinMode)&&c._isCompatibleAddin(c)&&i.addinMode&&i.addinMode.value&&(n=this._addQueryParams(n,"addinmode",i.addinMode&&i.addinMode.value)),i.get3DDashboardUrl(function(t){var d="west"===o.getCurrentQuadrant()||"south"===o.getCurrentQuadrant();if(l=n.indexOf("-ifwe.")>-1||t&&n.toLowerCase().indexOf(t.toLowerCase())>-1,o.isCompassV2()&&window.location.search&&-1!==window.location.search.indexOf("debug")&&-1===n.indexOf("debug")&&(n=-1===n.indexOf("?")?n+"?debug"+(d?"&addinmode=catiav5":""):n.slice(0,n.indexOf("?")+1)+"debug&"+(d?"addinmode=catiav5&":"")+n.slice(n.indexOf("?")+1)),a=r.getX3DContent(),(c.isWidget()||l)&&(l||c.isServiceSwym())&&"object"===e.typeOf(a)&&0!==Object.keys(a).length&&(n+=(n.endsWith("/")?"":"/")+(n.contains("#")?"":"#")+"content:X3DContentId="+encodeURIComponent(JSON.stringify(a))),c._isCurrentApplicationDashboard(t,n,window.location.href)){var p=e.Utils.parseUrl(n).anchor;window.location.hash===p&&(p+="/"),!1===e.is(i.addinMode)||c._isCompatibleAddin(c)?c._supportBigUrl(n)?window.location.hash=p:window.open(n,"_self"):window.open(n,"_blank")}else o.isSameApp(n,window.location)?o.customLaunchWebApp(n)||(!1===e.is(i.addinMode)?window.open(n,"_self"):window.open(n,"_blank")):c._isCompatibleAddin(c)?window.open(n,"_self"):window.open(n,"_blank");s.onComplete({success:!0})})},_launchInfosIsDashboard:function(e,t){return e&&t.toLowerCase().indexOf(e.toLowerCase())>-1||t.indexOf("-ifwe.")>-1},_isCurrentApplicationDashboard:function(e,t,n){return this.isWidget()&&this._launchInfosIsDashboard(e,t)&&e&&(n.toLowerCase().indexOf(e.replace("https://","").toLowerCase())>-1||n.indexOf("-ifwe.")>-1)},_supportBigUrl:function(e){var t=o.getBrowser();return!(("internet explorer"===t||"edge"===t)&&e.length>2045)},_addQueryParams:function(e,t,n){var o,i=e,s="";return e.indexOf("#")>-1&&(i=e.split("#")[0],s=e.split("#")[1]),o=-1===i.indexOf("?")?"?":"&",i+o+t+"="+n+(s?"#"+s:"")},_isCompatibleAddin:function(t){var o=this;return e.is(i.addinMode)&&t.get("apps")&&t.get("apps").length>1?t.get("apps").detect(function(e){return o._isCompatibleAddin(new n(e))}):e.is(i.addinMode)&&e.is(i.addinMode.value)&&t.get("addin")&&t.get("addin").detect(function(e){return e.toLowerCase()===i.addinMode.value.toLowerCase()})},_launchTransition:function(t,n,o){var i=this,s={id:this.get("id"),launchInfos:o?o.launchInfos:this.get("launchInfos"),title:this.get("title"),brand:this.get("brand"),config:o?o.config:this.get("config"),success:function(){e.log("Success in transition")},failure:function(){i._launchTransient.call(i,t,n)}};require(["DS/AppFrameGlobal/AppFrame3DD"],function(e){e.loadAppInfoAndDoTransition(s)})},getPlatformId:function(){var e=null,t=this.get("platforms")&&this.get("platforms").detect(function(e){return void 0!==this.object&&this.object.envId?e.id===this.object.envId:e.preferred}.bind(this));return t?e=t.id:this.get("platforms")&&(e=this.get("platforms")[0].id),e},launch:function(t){var n,l,c,d=this,m=this.isWidget()?this.get("launchUrl"):this.get("launchInfos"),h=r.getX3DContent();if(m=this.isWidget()?!(this.isAggregate()&&!this.get("platformId"))&&this.get("launchUrl"):this.get("launchInfos"),void 0!==this.object&&this.object.envId?((n=this.get("platforms").detect(function(e){return e.id===this.object.envId}.bind(this)))&&(n.launchUrl||n.launchInfos)&&(m=this.isWidget()?n.launchUrl:n.launchInfos,n.config),!m&&this.isAggregate()&&this.isWidget()&&(m=this.get("launchUrl")),"R1132100503382"===this.object.envId&&m.match(/-/g).length>1&&(m=(m=m.replace(/:\/\/([A-z0-9]+)\-/,"://"+this.object.envId.toLowerCase()+"-")).replace(/\-([A-z0-9]+)\-/,"-eu1-"))):h&&h.data&&h.data.items&&h.data.items.length>0&&((n=this.get("platforms").detect(function(e){return e.id===h.data.items[0].envId}))&&(n.launchUrl||n.launchInfos)&&(m=this.isWidget()?n.launchUrl:n.launchInfos,n.config),n&&"R1132100503382"===h.data.items[0].envId&&m.match(/-/g).length>1&&(m=(m=m.replace(/:\/\/([A-z0-9]+)\-/,"://"+h.data.items[0].envId.toLowerCase()+"-")).replace(/\-([A-z0-9]+)\-/,"-eu1-"))),u.isDelegatedToRichClientLaunchApp(this.get("exeName"))&&!this.isNativeMarketApp()){var f=e.clone(this.toJSON());"CUSTOM"===f.brand&&(f.brand=""),p.publish("launchAppCallback",f),"Native"===this.get("type")&&t.onComplete({success:!0})}else if("macos"===o.getOs()&&"Native"===this.get("type"))t.onFailure({error:"macos_app_download",app:d});else if(m||u.isNativeApplicationEnvironment()&&"Native"===this.get("type"))switch(this.get("type")){case"Web":case"Widget":this.get("transition")&&!1===e.is(i.addinMode)&&"openWith"!==t.origin?this._launchTransition(m,t,n):this._launchTransient(m,t);break;case"Native":"ios"===o.getOs()||"android"===o.getOs()?i.getCasTgcAndCasTransientUrl({platform:d.getPlatformId(),onComplete:function(n,i){var s=d.getLaunchInfos(n,"&",i);if(e.log("open "+s),8!==o.getMajorIosVersion())e.log("ios version != 8"),l=new Date,window.setTimeout(function(){e.log("setTimeout"),new Date-l<1200?(e.log("onFailure"),"ios"===o.getOs()?t.onFailure({error:"ios_app_not_installed"}):t.onFailure({error:"android_app_not_installed"})):(e.log("onComplete"),t.onComplete({success:!0}))},1e3),window.location=s;else{e.log("ios version = 8");var a=e.createElement("iframe",{styles:{border:"none",width:1,height:1},src:s});e.log("inject iframe"),a.inject(document.body),l=new Date,setTimeout(function(){e.log("setTimeout"),new Date-l<1200?(e.log("onFailure"),"ios"===o.getOs()?t.onFailure({error:"ios_app_not_installed"}):t.onFailure({error:"android_app_not_installed"})):(e.log("onComplete"),t.onComplete({success:!0})),e.log("destroy iframe"),a.destroy()},1e3)}}}):this.isNativeMarketApp()?i.getCasTgcAndCasTransientUrl({platform:d.getPlatformId(),onComplete:function(n,s){var a,r,c=d.getLaunchInfos(n,"&",s),p=o.getBrowser();if("internet explorer"===p||"edge"===p)navigator.msLaunchUri(c,function(){e.log("success")},function(){e.log("onFailure"),t.onFailure({error:"windows10_app_not_installed"})});else if("firefox"===p){var u=document.querySelector("#hiddenIframe")?document.querySelector("#hiddenIframe"):document.createElement("iframe");document.querySelector("#hiddenIframe")||(u.src="about:blank",u.id="hiddenIframe",u.style.display="none",document.body.appendChild(u));try{u.contentWindow.location.href=c}catch(n){e.log("onFailure"),t.onFailure({error:"windows10_app_not_installed"})}}else r=function(n){window.clearTimeout(a),e.log("onComplete"),t.onComplete({success:!0}),window.removeEventListener("blur",r)},window.focus(),e.log("open "+c),l=new Date,window.addEventListener("blur",r),a=window.setTimeout(function(){e.log("onFailure"),t.onFailure({error:"windows10_app_not_installed"}),window.removeEventListener("blur",r)},4e3),!1===e.is(i.addinMode)?window.location=c:window.open(m,"_blank")}}):(c=this.getRemoteApp(),this.getInstallList(c,function(n,o,l){var r="remote"===l,p=r?c:d;o?o.get("update")&&o.get("status")===a.INSTALL_FORCE_UPDATE&&!p.isCustom()?t.onFailure({error:"mandatory_update",install:o,app:p,remote:r}):(d.setCatEnvConfig(),i.getCasTgcAndCasTransientUrl({platform:p.getPlatformId(),onComplete:function(n,i){var a={instID:o.get("daemonId"),exeName:t.support?p.getSupportExeName():p.getExeName(),envString:p.get("envInfos"),argString:p.getLaunchInfos(n," ",i),nativeLauncherName:p.get("launcher")};p.get("powerBy")&&d.object&&"3DDrive"===d.object.serviceId&&(a.exeName=p.get("powerBy").baseApp.exe),s.startV6install({install:o,file:t.file,params:a,onComplete:function(n){t.onComplete({success:!0,remote:r}),e.log(n)},onFailure:function(n){t.onFailure({error:"applet_error",returnCode:n.returnCode,remote:r}),e.log(n)}},p)}})):0===n[0].length&&0===(n[1]||[]).length?t.onFailure({error:"no_install_compatible",remoteAvailable:!!c}):t.onFailure({error:"no_install_selected"})},function(){t.onFailure({error:"unable_install_data"})},t.silent))}else t.onFailure({error:"no_launch_infos"})},setCatEnvConfig:function(){this.get("catEnvConfig")&&s.setCatEnvConfig([this.get("catEnvConfig")])},getExeName:function(){var e=this.get("exeName");return e&&"3dexperience"===e.toLowerCase()&&(e+=".exe"),"linux"===o.getOs()&&(e=!e||"3dexperience.exe"!==e.toLowerCase()&&"3dexperience"!==e.toLowerCase()?e.replace(".exe",""):"3DEXPERIENCE"),e},getSupportExeName:function(){var e=this.get("supportModeExeName");return"linux"===o.getOs()&&(e=e.replace(".exe","")),e},getCatEnvs:function(){},getPreferredCatEnv:function(t){var n,o=e.clone(t);return u.isOnPremiseEnvironment()&&(o=o.toLowerCase()),this.get("catEnvs")&&this.get("catEnvs")[o]&&(n=this.get("catEnvs")[o].detect(function(e){return e.preferred})),n},needSettingsMenu:function(){var e=!this.isRole()&&(this.isFamily()&&(Object.keys(this.getChildrenForFamilyApp()).length>1||this.getPlatforms().length>1)||this.isNative()&&!this.isNativeMarketApp()||this.get("platforms").length>1||!!this.get("catEnvs"));return"macos"===o.getOs()&&this.isNative()&&(e=!1),u.isNativeApplicationEnvironment()&&(e=!this.isRole()&&!this.isNative()&&(this.get("platforms").length>1||Object.keys(this.getChildrenForFamilyApp()).length>1)),e},getRemoteApp:function(){var e,t=this.get("remoteInfos");if(t)return(e=this.clone()).set({launcher:t.launcher,exeName:t.exeName,launchInfos:t.remoteLaunchInfos,id:t.remoteAppId,licenses:t.licenses,title:t.title,install:"remote"}),e},addObjectToLaunchInfos:function(){},setObject:function(e){this.object=e},resetObject:function(){this.object&&delete this.object},getParentForChildrenFamilyApp:function(){var e,t,n=this;return e=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"type",value:"Family"}]),this.isChildFamilyApp()?(e.forEach(function(e,o){!t&&e.get("apps")&&e.get("apps").detect(function(e){return n.id===e.id})&&(t=e)}),t):t},getChildrenForFamilyApp:function(){var e=[],t={};return this.isFamily()?(this.get("apps").forEach(function(t){e.push(t.id)}),(e.length>0?this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e}]):[]).forEach(function(e){e.isNative()&&e.isWindows()?t.Windows=e:e.isNative()&&e.get("licenses")&&e.get("licenses").length>0?t.native=e:t[e.get("type")]||(t[e.get("type")]=e)}),t):{}},getPlatforms:function(){var e=this,t=[],n=[],o=this.getChildrenForFamilyApp();if(this.isFamily())for(const e in o)o.hasOwnProperty(e)&&o[e].get("platforms").forEach(function(o){-1===n.indexOf(o.id)?(n.push(o.id),o.appType=o.appType?-1===o.appType.indexOf(e)?o.appType+e+";":o.appType:e+";",t.push(o)):t[n.indexOf(o.id)].appType=t[n.indexOf(o.id)].appType?-1===t[n.indexOf(o.id)].appType.indexOf(e)?t[n.indexOf(o.id)].appType+e+";":t[n.indexOf(o.id)].appType:e+";"});else this.get("platforms").forEach(function(o){-1===n.indexOf(o.id)&&(o.appType=o.appType?o.appType.indexOf(e.get("type"))>-1?o.appType+e.get("type")+";":o.appType:e.get("type")+";",t.push(o))});return t},updateFamilyModel:function(){if(this.isFamily()){var e=this.getChildrenForFamilyApp();u.isNativeApplicationEnvironment()&&e.native?(this.set("brand",e.native.get("brand")),this.set("icon",e.native.get("icon"))):!u.isNativeApplicationEnvironment()&&e.Widget?(this.set("brand",e.Widget.get("brand")),this.set("icon",e.Widget.get("icon"))):!u.isNativeApplicationEnvironment()&&e.web&&(this.set("brand",e.web.get("brand")),this.set("icon",e.web.get("icon")))}},extractMyAppsUrlFromLaunchInfo:function(){var e=null,t=this.getLaunchInfos();if(t||this.get("platforms")&&this.get("platforms").length>0&&(t=this.get("platforms")[0].launchInfos),t&&t.indexOf("-MyAppsURL=")>-1){var n=t.split("-MyAppsURL=");n.length>1&&(n=n[1])&&n.length>0&&(e=n.split(" ")[0])}return e}};return n.extend(m)}),define("DS/i3DXCompass/Collection/AppList",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/Model/App","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s,a){"use strict";var l={model:i,lastResponseId:null,request:null,filterKeys:[],selectedTenant:null,fetch:function(e){var t=this.request;return a.isNativeApplicationEnvironment()&&o.selectedPlatform||o.selectedPlatform&&a.getPreferences()&&"currentPlatform"===a.getPreferences().forceSelectTenant?this.selectedTenant=o.selectedPlatform:this.selectedTenant=null,t&&t.cancel(),this.request=this._parent(e)},onSync:function(){this.request=null},onError:function(){this.request=null},setup:function(e,t){this.myappsObject={},this.added=[],a.isNativeApplicationEnvironment()&&o.selectedPlatform||o.selectedPlatform&&a.getPreferences()&&"currentPlatform"===a.getPreferences().forceSelectTenant?this.selectedTenant=o.selectedPlatform:this.selectedTenant=null,t&&t.master&&this.setupSlave(t)},setupSlave:function(e){this.master=e.master,this.filters=e.filters,this.comparator=e.comparator,this.initFetch(),this.filterKeys=this.filters.map(function(e){return e.key}),this.master.addEvent("onChange",this.changeApp.bind(this)),this.master.addEvent("onMultipleAdd",this.filterAndAdd.bind(this)),this.master.addEvent("onRemove",this.removeApp.bind(this))},_getCacheKey:function(){var e=o.getAppsUrl;return e.indexOf("?")>0&&(e=e.slice(0,e.indexOf("?"))),e},_isNotEmptyResponse:function(e){return e.north&&e.west&&e.south&&e.east&&e.north.length>0&&e.west.length>0&&e.south.length>0&&e.east.length>0},updateLocalCache:function(e){var t=s.getCache(this._getCacheKey(),2592e5);return t&&(t.preferences=e),s.setCache(this._getCacheKey(),t),!0},sync:function(e,t,i){var l,r=this,c=this.myappsObject,d=null;switch(e){case"read":var p=a.getExtraWhereUsedRoles();r.selectedTenant&&(p||(p=""),p+=r.selectedTenant),(d=s.getCache(r._getCacheKey(),2592e5,p))&&!a.getExtraWhereUsedRoles()||(this.lastId=null),"dsrtv:"!==window.location.protocol&&(l=o.request({url:o.getAppsUrl,urlParams:{platformId:r.selectedTenant,os:n.getOs(),envid:c.envId,objid:c.hasOwnProperty("objectId")&&(c.hasOwnProperty("envId")||c.hasOwnProperty("contextId"))?c.objectId:null,objtype:c.objectType||null,contextid:c.contextId||null,id:this.lastId||d&&d.id,processes:a.getExtraWhereUsedRoles()},onComplete:function(e){e&&0===e.code?r._isNotEmptyResponse(e)?(e.id&&e.id===r.lastId||r.myappsObjectSet||s.setCache(r._getCacheKey(),e,p),i&&i.onComplete&&(e.id&&e.id===r.lastId&&!r.myappsObjectSet||i.onComplete(e))):d&&JSON.stringify(d.preferences)!==JSON.stringify(e.preferences)&&(d.preferences=e.preferences,i.onComplete(d)):i&&i.onFailure&&i.onFailure(e)},onFailure:function(e){i&&i.onFailure&&i.onFailure(e)}})),d&&(d&&0===d.code?i&&i.onComplete&&setTimeout(function(){i.onComplete(d)},5):i&&i.onFailure&&i.onFailure(d))}return l},_injectCustomDataFromRichClient:function(t){var n=e.clone(t),o=!1;try{o=localStorage.getItem("UseDataFromRichClient")}catch(e){console.log("localStorage not supported")}if(o){var i=[];try{i=JSON.parse(localStorage.getItem("AfrWebInWinCompassdata"));var s=[];i.app.forEach(function(e){e.platforms=[],e.icon||(e.icon=""),s.push(e.id),e.title||(e.title=e.id)}),n.roles.role.forEach(function(e){!0===e.granted&&(e.appList=e.appList.concat(s))}),n.north[0].apps=n.north[0].apps.concat(i.app)}catch(e){}}return n},parse:function(t,n){var o=[],i=[],s=[],l=[],r=[];return e.log("Compass refresh: parsing apps"),(t=this._injectCustomDataFromRichClient(t)).id&&t.id===this.lastId?(n.remove=!1,t.changed=!1):(this.myappsObjectSet||(this.lastId=t.id),a.setCloud(t.cloud),t.favorite&&t.favorite.apps&&(o=t.favorite.apps.split(",")),["north","west","south","east","other"].forEach(function(n){var c=t[n];c&&c.forEach(function(c,d){var p=1===d;c.apps.forEach(function(c){var d=0;if(c.favoriteOrder=o.indexOf(c.id),c.isFavorite=-1!==c.favoriteOrder,c.lma=p,c.quadrant=n,void 0===c.remoteInfos&&(c.remoteInfos=void 0),"MAP-AAAPBYSWX"===c.id?c.brand="SOLIDWORKS":"MAP-CATCDVEAP"===c.id&&(c.brand="CATIA"),!a.isOnPremiseEnvironment()&&!1===c.tenantAware&&c.launchInfos&&-1===c.id.indexOf("MAP-")){var u=c.launchInfos.match(/\/\/([a-zA-Z0-9]*)/);u&&u.length>1&&(c.platformId=u[1].toUpperCase())}if("Native"===c.type&&(c.catEnvs=[]),"Native"===c.type&&c.platforms&&c.platforms.length>0&&t.config&&t.config.catEnv&&t.config.catEnv.length>0&&(c.catEnvs=[],c.catEnvConfig="",d=0,t.config.catEnv.forEach(function(e){(a.isOnPremiseEnvironment()&&c.platforms.find(function(t){return t.id.toLowerCase()===e.platformId.toLowerCase()})||!a.isOnPremiseEnvironment()&&c.platforms.find(function(t){return t.id===e.platformId}))&&(c.catEnvs[a.isOnPremiseEnvironment()?e.platformId.toLowerCase():e.platformId]=e.catEnvDetails,d+=e.catEnvDetails.length,t.config.catEnvPreferences&&t.config.catEnvPreferences.length>0&&t.config.catEnvPreferences.forEach(function(t){c.id===t.appId&&c.catEnvs[a.isOnPremiseEnvironment()?e.platformId.toLowerCase():e.platformId].forEach(function(n){n.name===t.catEnvName&&(n.preferred=!0,n.id=a.isOnPremiseEnvironment()?e.platformId.toLowerCase():e.platformId,(a.isOnPremiseEnvironment()&&c.platformId.toLowerCase()===t.platformId.toLowerCase()||!a.isOnPremiseEnvironment()&&c.platformId===t.platformId)&&(c.catEnvConfig=n))})}))}),c.platforms&&1===c.platforms.length&&!c.catEnvConfig&&c.catEnvs.lenght>0&&1===d&&(c.catEnvConfig=Object.keys(c.catEnvs)[0])),l.indexOf(c.id)>-1){var m=null,h=i.detect(function(e,t){return m=t,e.id===c.id});h&&(i[m]=e.merge(h,c))}else-1===s.indexOf(c.id)&&(i.push(c),s.push(c.id));c.apps&&c.apps.length>0&&c.apps.forEach(function(e){r.push(e)}),c.apps&&c.apps.length>0&&c.apps.forEach(function(e){-1===s.indexOf(c.id)&&(i.push(e),"Family"!==c.type&&l.push(e.id))})})})}),t.roles&&t.roles.role.forEach(function(e){(e.favoriteOrder=-1,e.isFavorite=!1,e.lma=!1,"undefined"!=typeof compassRichWithCef)?e.appList.detect(function(t){return i.detect(function(n){return n.id===t&&(!e.granted||"other"!==n.quadrant)})})&&i.push(e):i.push(e)}),t.services&&t.services.data.forEach(function(e,t){e.favoriteOrder=-1,e.isFavorite=!1,e.lma=!1,i.push(e)}),t.changed=!0),t.bers&&this.extractBEElements(t.bers,i),i},set:function(){this.added.length=0,this._parent.apply(this,arguments),this.added.length>0&&this.dispatchEvent("onMultipleAdd",[this.added])},onAdd:function(e){this.added.push(e)},initFetch:function(){this.master&&this.filterAndAdd(this.master)},removeApp:function(e){this.get(e)&&this.remove(e)},filterAndAdd:function(e){var t=e.filter(function(e){return e.matchesFilters(this.filters)},this);t.length>0&&this.add(t)},changeApp:function(t){var n=t._changed;this.filterKeys.some(function(t){return e.is(n[t])})&&(t.matchesFilters(this.filters)?(this.add(t),this.dispatchEvent("onMultipleAdd",[[t]])):this.removeApp(t)),this.get(t)&&e.is(n[this.comparator])&&(this.sort(),this.dispatchEvent("onReorderApp",t))},filterApps:function(e){return this.filter(function(t){return t.matchesFilters(e)})},getPrevious:function(e){var t=this.indexOf(e)-1;return t<0?null:this.at(t)},count:function(e){return this.reduce(function(t,n){return n.matchesFilters(e)?t+1:t},0)},setObject:function(t){this.myappsObjectSet=t.hasOwnProperty("objectId"),this.myappsObjectSet?this.forEach(function(e){e.setObject(t)}):e.log("Object is not valid for setObject")},resetObject:function(){this.forEach(function(e){e.resetObject()})},saveFavorites:function(){var e,t=this.pluck("id").join(",");e=a.isNativeApplicationEnvironment()&&o.selectedPlatform||o.selectedPlatform&&a.getPreferences()&&"currentPlatform"===a.getPreferences().forceSelectTenant?{platform:o.selectedPlatform,value:t}:{value:t},o.request({url:o.setFavoriteUrl,method:"POST",contentType:"application/x-www-form-urlencoded",postData:e,onComplete:function(){},onFailure:function(){}})},saveRoles:function(e){},getSelectedRoleApps:function(){var e=[],t=this.where({active:!0});return this.length===t.length?null:(t.forEach(function(t){t.get("appList").forEach(function(t){n.pushUnique(e,t)})}),e)},extractBEElements:function(t,n){var o={granted:!0,visible:!0,type:"Role",isRoleBE:!0,beList:[],cockpitList:[],platforms:[]};(t=JSON.parse(t)).forEach(function(t,i){o.id=t.id,o.title=t.title,t.platforms.forEach(function(e,t){o.platforms.push({platformId:e.id,platformName:e.name}),e.bms&&e.bms.forEach(function(t,i){t.platformId=e.id,t.platformName=e.name,t.type="businessMethod",n.push(t),o.beList.push(t.id)}),e.cockpits&&e.cockpits.forEach(function(t,i){t.platformId=e.id,t.platformName=e.name,t.type="cockpitBusiness",n.push(t),o.cockpitList.push(t.id)})}),n.push(e.clone(o))})}};return t.extend(l)}),define("DS/i3DXCompass/Model/PortfolioBusinessExperienceModel",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/Model/App","DS/i3DXCompass/X3DContent","DS/i3DXCompass/UsageTracker"],function(e,t,n,o,i,s,a,l,r,c){"use strict";return n.extend({preferedUsageId:"",setup:function(){var t=this;this.isDashboard()&&o.getPreferences({urlParams:{name:this.get("modelId")},onComplete:function(e){e&&e.preferredUsageId&&(t.preferedUsageId=e.preferredUsageId)},onFailure:function(){e.log("cockpit prefered failed")}})},launchBusinessExperience:function(t){if(t){if(t.content){var n=JSON.parse(t.content);0!==Object.keys(n).length&&(this.is_X3DBEMA_AP()&&n.data&&!n.data.items&&(n.data={items:[{envId:t.id}]}),r.setX3DContent(n))}this.get("appModel")?this.get("appModel").launch({onComplete:function(){e.log("appModel onComplete"),r.setX3DContent({})},onFailure:function(){e.log("appModel onFailure"),r.setX3DContent({})}}):this.get("appId")&&a.publish("launchApp",{appId:this.get("appId")},function(t){e.log(t),r.setX3DContent({}),t.error?e.log("launchApp onFailure ",t.error):e.log("launchApp ")}),this.isCockpit()?c.clickBusinessCockpit({cockpitId:this.get("id"),cockpitName:this.get("title"),usageId:t.id}):c.clickBusinessMethod({businessMethodId:this.get("id"),businessMethodName:this.get("title"),usageId:t.id})}},updateModel:function(e,t){var n=this;if(e.icon&&n.set("icon",e.icon),e){if(e.platforms&&e.platforms.length>0&&e.platforms.detect(function(e){return e.id.toLocaleLowerCase()===n.get("platformId").toLocaleLowerCase()})){var o=e.platforms.detect(function(e){return e.id.toLocaleLowerCase()===n.get("platformId").toLocaleLowerCase()});(o.launchUrl||e.launchUrl)&&(e.launchUrl=o.launchUrl||e.launchUrl),(o.config||e.config)&&(e.config=o.config||e.config),(o.checksum||e.checksum)&&(e.checksum=o.checksum||e.checksum),o.id&&(e.platformId=o.id),o.envInfos&&(e.envInfos=o.envInfos),o.shortcutLaunchInfos&&(e.shortcutLaunchInfos=o.shortcutLaunchInfos),o.remoteLaunchInfos&&e.remoteInfos&&(e.remoteInfos.remoteLaunchInfos=o.remoteLaunchInfos)}n.set("appModel",new l(e))}},updateX3DBEMA_AP:function(e){},needSettingsMenu:function(){return!!(this.get("usages")&&this.get("usages").length>1)||!!(this.get("platforms")&&this.get("platforms").length>1)},isDashboard:function(){return"cockpit"===this.get("type")},isCockpit:function(){return"cockpit-business"===this.get("type")},is_X3DBEMA_AP:function(){return"X3DBECC_AP"===this.get("appId")},getFistUsage:function(){return this.get("usages")&&this.get("usages").length>0?this.get("usages")[0]:""},savePreferedUsageId:function(e){this.preferedUsageId=e,o.setPreferences({name:this.get("modelId"),value:JSON.stringify({cockpitType:this.get("type"),preferredUsageId:e})})}})}),define("DS/i3DXCompass/Collection/BusinessExperienceCollection",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Model/PortfolioBusinessExperienceModel","DS/i3DXCompass/Data"],function(e,t,n,o){"use strict";var i=[];return t.extend({isFetched:!1,model:n,nbCallback:0,isRegistryFetched:!1,tempData:{},setup:function(e,t){return this.addEvent("registryCallback",this.manageCallback),t.pathURL&&(this.pathURL=t.pathURL),t.type&&(this.type=t.type),t.urlList&&(this.urlList=t.urlList),t.updateStep&&(this.updateStep=t.updateStep),this._parent(t)},fetch:function(e){var t=this;if(t.nbCallback=0,t.tempData={},e.urlList&&(t.urlList=e.urlList),0!==t.urlList.length||e.url)return this._parent(e);i.push(function(){t.fetch(e)})},sync:function(t,n,i){var s=this;switch(t){case"read":if(i.url){var a={cors:!0};return i.urlParams&&(a=e.merge(a,i.urlParams)),o.request({url:i.url+s.pathURL,urlParams:a,proxy:"passport",method:"GET",onComplete:function(e,t){e&&s.updateCollection(e,i,{id:s.urlList[0]&&s.urlList[0].id||"current"})},onFailure:function(e,t){s.updateCollection(t,i,s.urlList[0]&&s.urlList[0].id||"current")}})}(s.urlList.length>0||i.urlList&&i.urlList.length>0)&&s.urlList.forEach(function(e){if(e.services[0].url)try{o.request({url:e.services[0].url+s.pathURL,urlParams:{tenant:e.id,cors:!0},proxy:"passport",method:"GET",onComplete:function(t,n){t&&s.updateCollection(t,i,e)},onFailure:function(t,n){s.updateCollection(n,i,e)}})}catch(t){s.updateCollection([],i,e),console.log(t)}})}},parse:function(e){var t=this,n=[];return e&&Object.keys(e).length>0&&Object.keys(e).forEach(function(o){e[o].forEach(function(e){e.platformId=o,t.urlList.detect(function(e){return e.id===o})&&(e.businessExperienceUrl=t.urlList.detect(function(e){return e.id===o}).services[0].url),n.push(e)})}),n},updateCollection:function(e,t,n){this.nbCallback+=1,e&&Object.keys(e).length>0&&(this.tempData[n.id]=e),this.nbCallback===this.urlList.length&&(t&&t.onComplete&&Object.keys(this.tempData).length>0?(t.remove=!1,t.merge=!1,t.onComplete(this.tempData),this.updateStep&&this.updateStep(this.type,"Ready")):(t.onFailure(),this.updateStep&&this.updateStep(this.type,"Empty")))},manageCallback:function(e){e.urlList&&(this.urlList=e.urlList),i.forEach(function(e){setTimeout(e,0)})}})}),define("DS/i3DXCompass/Collection/BusinessExperienceMethodsCollection",["UWA/Core","DS/i3DXCompass/Collection/BusinessExperienceCollection","DS/WebappsUtils/WebappsUtils"],function(e,t,n){"use strict";return t.extend({tempData:{},pathURL:"/resources/BusinessExperienceAccess/v1/model/BusinessMethod",parse:function(t){var n,o=[];return t&&Object.keys(t).length>0&&Object.keys(t).forEach(function(i){t[i].forEach(function(t){n||(n=o.find(function(e){return"X3DBECC_AP"===e.appId})),t.platformId=i,t.settingNeeded=!0,t.granted=!0,t.brand="CUSTOM",t.platforms=[i],"X3DBECC_AP"===t.appId&&n?(n.platforms.push(t.platformId),n.usages&&n.usages.concat&&(n.usages=n.usages.concat(t.usages)),n=e.merge(n,t)):o.push(t)})}),o}})}),define("DS/i3DXCompass/Collection/BusinessExperienceCockpitsCollection",["UWA/Core","DS/i3DXCompass/Collection/BusinessExperienceCollection","DS/WebappsUtils/WebappsUtils"],function(e,t,n){"use strict";return t.extend({tempData:{},pathURL:"/resources/BusinessExperienceAccess/v1/model/Cockpit",parse:function(e){var t=[];return e&&Object.keys(e).length>0&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){e.platformId=n,e.settingNeeded=!0,e.granted=!0,e.brand="CUSTOM",e.type="cockpit-business",t.push(e)})}),t}})}),define("DS/i3DXCompass/View/PortfolioDepth6View",["UWA/Core","DS/i3DXCompass/View/PortfolioGenericView","DS/i3DXCompass/View/AppView","DS/UIKIT/Tooltip","DS/i3DXCompass/UsageTracker","DS/i3DXCompass/View/ContentOverlayView","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/i3DXCompass/Feature","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/View/PortfolioContactFormView","DS/UIKIT/Input/Button"],function(e,t,n,o,i,s,a,l,r,c,d){"use strict";var p=e.i18n;return t.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth6"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),(e.contact||e.buy)&&(e.buildBuy=!0,this.buildBuy=!0),this._parent(e)},_buildItem:function(e){var t=new n({isApp:!0,isLazy:!0,additionalClassName:"app-item",additionalClassNameImage:e.get("brand")?"is-"+e.get("brand").replace(" ","-"):"",model:e,clickable:void 0===this.options.clickable||this.options.clickable,events:{onItemClick:this._onItemClick.bind(this),onClickSettings:this._onSettingsClick.bind(this)}}).render(),i=e&&e.get("deployments")?["All"].concat(e.get("deployments")):null;return i&&(new o({className:"compass-tooltip",position:"bottom",target:t.getContent(),trigger:"click touch",body:this._filterDeploymentsAndTranslate(i).map(function(e){return e.text}).join(" | ")}),t.getContent().setAttribute("data-deployment",this._filterDeploymentsAndTranslate(i).map(function(e){return this._deploymentToCode(e)}.bind(this)).join(","))),t},_onSettingsClick:function(e){this.dispatchEvent("_onSettingsClick",e)},_buildContactList:function(){this.model;var e=[];return!l.isMobileAppEnvironment()&&this.options.contact&&e.push(this._buildContactButton()),this.options.buy&&this._injectBuyButtonIfNeeded(),{class:"portfolio-description-contact",html:e}},_buildContactButton:function(){var t=this;return this.options.contact&&!l.isMobileAppEnvironment()?new d({value:p("Contact us"),className:"info to-contact",icon:"mail",events:{onClick:function(n){if(e.Event.stop(n),i.compassInc({eventCategory:"compass",eventAction:"compass-contact",persDim:{pd2:t.model.get("acronym"),pd3:t.model.get("title")}}),l.isOnPremiseEnvironment()||!l.isContactFormActivated())window.open(t.options.contact,"_blank");else{var o=new s({title:p("Contact us"),closable:!0,view:new c({events:{onClose:function(){o.back()}}}).render(),events:{onClose:function(){t.dispatchEvent("onClose")},callGoHomes:function(){o.back(),t.dispatchEvent("callGoHomes")}}}),a=t.container.getParent(".content-overlay").getParent(),r=a.getElements(".content-overlay");r[r.length-1]?o.inject(r[r.length-1],"after"):o.inject(a),o.show()}}}}):null},_injectBuyButtonIfNeeded:function(){var e=this,t=this.model.get("externalIds")||this.model.get("acronym");require(["DS/MPFPortfolioModel/PortfolioHelper"],function(n){n.isAuthorizedToBuy(t).then(function(t){if(t){var n,o=e.container.getElement(".to-contact");o?e._buildBuyButton().inject(o,"before"):e._buildBuyButton().inject(e.container.getElement(".portfolio-description-contact")),window.location.pathname.indexOf("/buy")>-1&&(n=e.container.getElement("[data-action=compass-buy]"))&&n.click()}})})},_buildBuyButton:function(){var e=this;return l.isCompassStandalone()&&a.getServiceUrl({serviceName:"my3dexperience",onComplete:function(t){t&&t.length>0&&(e.my3dexpUrl=t[0])}}),new d({value:p("BUY"),icon:"shopping-cart",className:"primary",attributes:{"data-action":"compass-buy"},events:{onClick:function(t){i.compassInc({eventCategory:"compass",eventAction:"compass-buy",persDim:{pd2:e.model.get("acronym"),pd3:e.model.get("title")}}),l.isNativeApplicationEnvironment()?a.getAppInfo({appId:"X3DMYEX_AP",onComplete:function(e){r.publish("launchAppCallback",e)}}):l.isCompassStandalone()?window.open(e.my3dexpUrl,"_blank"):e.clickBuy(t)}}})},clickBuy:function(t,n){e.Event.stopPropagation(t),t.stopPropagation(),l.supportPushState()&&-1===window.location.pathname.indexOf("/buy")&&history.pushState("",this.model.get("title"),window.location.pathname+"/buy"),this.dispatchEvent("onClickBuy",[this.model,this.buyComponent])}})}),define("DS/i3DXCompass/View/MyApps",["UWA/Core","UWA/Utils/Client","UWA/Class/View","UWA/Controls/Accordion","UWA/Controls/Scroller","UWA/Class/Collection","DS/i3DXCompass/Tools","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/InstallManager","DS/i3DXCompass/TopBarManager","DS/i3DXCompass/Collection/AppList","DS/i3DXCompass/View/AppListView","DS/i3DXCompass/View/SuggestionListView","DS/i3DXCompass/Controls/Message","DS/i3DXCompass/Controls/Settings","DS/i3DXCompass/Controls/ScrollAccordion","DS/i3DXCompass/Controls/Search","DS/i3DXCompass/Controls/IframeLoader","DS/UIKIT/Modal","DS/UIKIT/Spinner","DS/UIKIT/Input/Button","DS/i3DXCompass/View/ServicesView","DS/i3DXCompass/CacheManager","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/Types","UWA/Utils/Cookie","DS/i3DXCompass/Controls/Compass","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip"],function(e,t,n,o,i,s,a,l,r,c,d,p,u,m,h,f,g,v,C,b,y,S,w,D,E,A,I,N,k,T,P){"use strict";var _=e.i18n,O={tagName:"div",className:"windows10"===a.getOs()?"wind10 my-apps-panel "+(a.isCompassV2()?"V2":""):"my-apps-panel"+(a.isCompassV2()?" V2":""),domEvents:{"click .compass-close":"close","click .exp-item":"clickApp","click .suggestion-item":"clickSuggestion","click .settings-img":"clickSettings","click .expand-img":"clickExpand","click .all-roles-btn":"toggleAllRoles","click .expanded-role-close, .expanded-role-title":"hideRoleDetail","click .expanded-role-info":"clickRoleInfo"},canShowOptionCotent:!1,currentQuadrant:"",itemsPerLine:0,setup:function(e){this.options=e,l.addEvents({onShowMessage:this.showMessage.bind(this),onHideMessage:this.hideMessage.bind(this)}),this.collections={grantedRoles:new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!0}]}),visibleRoles:new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!0},{key:"visible",value:!0}]})},this.views={},this.sugCollection=e.sugCollection},render:function(){var t,n=this.container;return(this.maskElmt=e.createElement("div",{class:"compass-loading",html:new S({visible:!0,className:"compass-spinner"})})).inject(n),this.options.closable&&(t=e.createElement("button",{class:"close compass-close fonticon fonticon-cancel",attributes:{type:"button","aria-hidden":!0}}),n.appendChild(t),new P({position:"left",target:t,body:_("Close")})),n.hide(),this},renderAppsView:function(t){var n,o,i,l=this,r=this.elements,c=this.container,d=new f,p=this.collections,h=this.views;p.favorite=new u(null,{master:this.collection,comparator:"favoriteOrder",filters:[{key:"isFavorite",value:!0},{key:"visibleQuadrant",value:!0}]}),p.platformRoles=new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!1},{key:"visible",value:!0}]}),p.expandedRole=new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0}]}),p.apps={},p.lma={},i=p.grantedRoles.getSelectedRoleApps(),h.favorite=new m({collection:p.favorite,customFilters:{appIds:i},customClass:"favorite",favorite:!0,draggable:!0}),h.visibleRoles=new m({collection:p.visibleRoles,customClass:"roles",draggable:!0}),h.platformRoles=new m({collection:p.platformRoles,customClass:"roles not-available-roles",draggable:!1}),h.expandedRole=new m({collection:p.expandedRole,customFilters:{appIds:[]},draggable:!0}),h.apps={},h.lma={},this.options.sectionData=t,r.error&&(r.error.destroy(),delete r.error),this.forEachQuadrant(function(e){p.apps[e]=new u(null,{master:l.collection,comparator:"title",filters:[{key:"quadrant",value:e},{key:"lma",value:!1}]}),h.apps[e]=new m({collection:p.apps[e],customFilters:{appIds:i},customClass:e,draggable:!0}),p.lma[e]=new u(null,{master:l.collection,comparator:"title",filters:[{key:"quadrant",value:e},{key:"lma",value:!0}]}),h.lma[e]=new m({collection:p.lma[e],customClass:a.isCompassV2()?"favorite":e})}),t.eservices&&t.eservices.data&&t.eservices.data.length>0&&(p.eservices=new s(t.eservices.data),h.eservices=new D({collection:p.eservices})),c.addEvent("resize",function(e){l.resizeAccordionData(e)}),n=new C({events:{onSearch:function(e){l.searchInViews(e)}}}),e.is(E._getUser())||n.container.setStyle("visibility","hidden"),n.inject(c),r.search=n,o=this.buildAccordion(),e.createElement("div",{class:"compass-accordion-wrapper",html:o}).inject(c),d.inject(c),this.appsAccordion=o,this.message=d,this.resizeAccordionData(),p.grantedRoles.addEvent("onChange:active",this.changeRoles.bind(this)),p.grantedRoles.addEvent("onChange:appList",this.changeRoles.bind(this)),p.grantedRoles.addEvent("onRemove",this.changeRoles.bind(this)),p.grantedRoles.addEvent("onMultipleAdd",this.changeRoles.bind(this))},renderSuggestionsView:function(){this.getSuggestionsView().renderSuggestions(),this.appsAccordion&&this.getSuggestionsView().collection.length>0&&this.appsAccordion.showSection("suggestions-section")},getSuggestionsView:function(){var e=this.views;return e.suggestions||(e.suggestions=new h({collection:this.sugCollection})),e.suggestions},renderErrorView:function(t){var n=this.elements;n.error||(n.error=e.createElement("div",{class:"compass-error",text:t}).inject(this.container))},_needToShowMyRoles:function(){return this.collections.visibleRoles.length>1||this.collections.platformRoles.length>0},buildAccordion:function(){var t,n=this,o=this.options.sectionData,i=!1,l=[],r=this.views,c=this.elements,d=[],p=[],u=c.expandedRole=e.createElement("div",{tag:"div",class:"expanded-role",html:[{class:"expanded-role-title"},{tag:"span",class:"fonticon fonticon-left-open expanded-role-close"},{tag:"span",class:"fonticon fonticon-info-circled expanded-role-info"},this.views.expandedRole.render()]}),m=c.allRolesBtn=e.createElement("span",{class:"fonticon fonticon-down-dir fonticon-interact all-roles-btn"}),h=this.getSuggestionsView(),f=r.eservices;return e.Utils.Client.Features.touchEvents||new P({position:"left",target:m,body:_("Show more roles")}),this.forEachQuadrant(function(t){d.push(r.apps[t].render()),!1===i&&r.apps[t].collection.size()>0&&(i=!0),d.push(e.createElement("div",{class:"alert-message alert-default noapps "+t,text:o[t].noapps})),p.push(r.lma[t].render())}),(o.services&&o.services.data&&o.services.data.length>0||f)&&l.push({id:"wrapperMP",title:_("3DEXPERIENCEMarketplace")||o.wrapperMP&&o.wrapperMP.title,html:f?e.createElement("div",{styles:{height:10}}):new D({collection:new s(o.services&&o.services.data||[])}).render(),open:!o.wrapperMP.closed,visible:!0,name:f?"learn-more-about-section":"services-section"}),f&&l.push({id:"eservices",parent:"wrapperMP",icon:"component",title:o.eservices&&o.eservices.title,html:r.eservices.render(),open:!o.eservices.closed,visible:!0,name:"services-section"}),f&&o.services&&o.services.data&&o.services.data.length>0&&l.push({id:"services",parent:"wrapperMP",icon:"globe",title:o.services&&o.services.title||_("MyCommunityServices"),html:new D({collection:new s(o.services&&o.services.data||[])}).render(),open:!o.services.closed,visible:!0,name:"services-section"}),l.push({id:"wrapperRole",title:o.wrapperRole.title||_("wrapperRole"),html:e.createElement("div",{styles:{height:10}}),open:!o.wrapperRole.closed,visible:!a.isCompassV2()&&e.is(E._getUser()),name:"learn-more-about-section"}),l.push({id:"roles",parent:a.isCompassV2()?"":"wrapperRole",title:o.roles.title,icon:"role roles",html:[r.visibleRoles.render(),e.createElement("div",{class:"alert-message alert-default noapps roles",text:o.roles.noapps}),r.platformRoles.render(),m,u],open:!o.roles.closed,visible:this._needToShowMyRoles(),name:"my-roles-section"}),e.is(E._getUser())&&l.push({id:"favorite",parent:a.isCompassV2()?"":"wrapperRole",title:o.favorite.title,icon:"star-empty favorite",html:[r.favorite.render(),e.createElement("div",{class:"alert-message alert-default noapps favorite",text:_("dropfavoriteappshere")})],open:!o.favorite.closed,visible:!0,name:"my-favorite-apps-section"}),a.isCompassV2()&&i?(t=l.length,this.forEachQuadrant(function(i){d[i]=[],d[i].push([r.apps[i].render(),e.createElement("div",{class:"alert-message alert-default noapps "+i,text:o[i].noapps})]),l.splice(t,0,{id:"apps-"+i,title:o[i].title,icon:n._getClassForQuadrant(i),html:d[i],open:!0,//!sectionData.north.closed,
visible:!0,name:"my-apps-section-"+i})})):i&&l.push({id:"apps",parent:a.isCompassV2()?"":"wrapperRole",title:"",html:d,open:!o.north.closed,visible:!0,name:"my-apps-section"}),e.is(e.Array.detect(p,function(e){return!e.getContent().hasClassName("empty")}))&&l.push({id:"lma",title:o.lma.title,html:p,open:!o.lma.closed,visible:!0,name:"learn-more-about-section"}),l.push({id:"suggestions",title:o.suggestions.title,html:h.render(),open:!o.suggestions.closed,visible:h.suggestionsRendered,name:"suggestions-section"}),new v({className:"apps-accordion",sections:a.isCompassV2()?7:4,scroller:!0,data:l,events:{onToggleSection:this.saveSections.bind(this),onScrollTop:function(){n.dispatchEvent("onScrollTop")},onScrollDown:function(){n.dispatchEvent("onScrollDown")},onRemoveAllFavoriteApp:function(){n.removeAllFavoriteApp()}}})},resizeAccordionData:function(){var e,t=this.container.getSize().width+1-34,n=this.itemsPerLine;(e=Math.floor(t/88))!==n&&(this.container.removeClassName("items-per-line-"+n),this.container.addClassName("items-per-line-"+e),this.itemsPerLine=e)},saveSections:function(){var t={};this.container.getElements(".compass-accordion-wrapper .compass-scroll-accordion-section").forEach(function(e){t[e.getAttribute("data-id")]=e.hasClassName("closed")}),e.is(E._getUser())&&r.saveSectionStatus(JSON.stringify(t))},manageRoleSectionDisplay:function(){this.appsAccordion&&(this._needToShowMyRoles()?this.appsAccordion.showSection("my-roles-section"):(this.appsAccordion.hideSection("my-roles-section"),this.collections.visibleRoles.forEach(function(e){this.toggleRole(e,!0)},this)))},initTopBar:function(){var e=this.collections.visibleRoles;p.setRoles(e),e.addEvent("onChange:active",function(e){p.setChecked(e)}),e.addEvent("onMultipleAdd",function(){p.setRoles(e)}),e.addEvent("onRemove",function(e){!0===e.get("granted")&&p.removeRole(e)})},searchInViews:function(e){this.filterViews("search",e)},filterAppsInViews:function(e){this.filterViews("filterApps",e)},filterViews:function(t,n){var o=this.views,i=e.is(n,"string")&&n.match(/^\s*role(s|)\s*:/g),s=i?n.replace(/^\s*role(s|)\s*:/g,"").trim():"",a=i?"":n;o.favorite[t](a),o.platformRoles[t](s),o.visibleRoles[t](s),this.forEachQuadrant(function(e){o.apps[e][t](a)})},clickApp:function(e){var t,n,o=e.target;this._handleAppClick||(this._handleAppClick=a.debounce(this.handleAppClick,500,!0).bind(this)),o.hasClassName("exp-item")?t=o:(o.hasClassName("icon")||o.hasClassName("title"))&&(t=o.getParent()),t&&(n=this.collection.get(t.getAttribute("data-id")),this._handleAppClick(n,t))},handleAppClick:function(t,n){var o=this,i=t.get("tooltip")||t.get("title"),s=t.isNative(),l=(T._IDS.compass.app,t.isRole()?t.get("process"):t.get("id")),r=t.get("title"),c=n.getParent("[data-id]")?n.getParent("[data-id]").getAttribute("data-id").indexOf("apps-")>-1?n.getParent("[data-id]").getAttribute("data-id").split("apps-")[1]:n.getParent("[data-id]").getAttribute("data-id"):"",p={onComplete:function(n){o.options.closeOnLaunch&&o.dispatchEvent("onClose"),s&&(p.support?o.showMessage(_("supportactivated"),5e3):n.remote?o.showMessage(e.String.format(_("remoting"),i),5e3):o.showMessage(e.String.format(_("launching"),i),5e3),I.get()&&A.publish("setTypesCallback",e.merge({appId:t.get("id")},I.get())))},onFailure:function(s){switch(s.error){case"no_launch_infos":case"no_install_selected":o.hideMessage(),o.openSettings(t,n.getElement(".settings-img"));break;case"no_install_compatible":o.hideMessage(),t.isOnlineInstallable()&&!s.remoteAvailable?d.onlineInstallation(t,null,null):o.openSettings(t,n.getElement(".settings-img"));break;case"mandatory_update":o.hideMessage(),d.onlineInstallation(s.app,s.install,null,s.remote);break;case"windows10_app_not_installed":o.hideMessage(),window.location="https://www.microsoft.com/store/apps/9wzdncrdjzv3";break;case"ios_app_not_installed":o.hideMessage(),a.isIphone()?window.location="https://itunes.apple.com/fr/app/3dplay-ar/id1455204301":window.location="https://itunes.apple.com/us/app/3dplay/id825988585?mt=8";break;case"android_app_not_installed":o.hideMessage(),window.location="https://play.google.com/store/apps/details?id=com.dsy.threedplayar";break;case"applet_error":100===s.returnCode?o.showMessage(_("launcherbusyretry"),5e3):s.remote?o.showMessage(e.String.format(_("remotingerror"),i),5e3):o.showMessage(e.String.format(_("launchingerror"),i),5e3)}}};if(s){if(t.get("supportModeExeName")){var u=new y({className:"compass-modal compass-modal-support",closable:!0,visible:!0,events:{onHide:function(){u.destroy()}},header:"<h4>"+_("supportmode")+"</h4>",body:_("supportactivated")+"<br>"+_("wantsupport"),footer:[e.createElement("button",{class:"btn btn-primary",text:_("yes"),events:{click:function(){p.support=!0,o.showMessage("",2e4,!0),t.launch(p),u.hide()}}}),e.createElement("button",{class:"btn btn-default",text:_("no"),events:{click:function(){o.showMessage("",2e4,!0),t.launch(p),u.hide()}}}),e.createElement("button",{class:"btn btn-default",text:_("cancel"),events:{click:function(){u.hide()}}})]}).inject(document.body);return void T.clickApp({quadrant:c,appId:l,appName:r})}this.showMessage("",2e4,!0)}else if(t.isRole())return T._IDS.compass.role,void(t.get("granted")?(t.get("active")?("Deactive",T.desactivateRole({quadrant:c,roleId:l,roleName:r})):("Active",T.activateRole({quadrant:c,roleId:l,roleName:r})),this.toggleRole(t)):("OpenRequestModal",T.requestRole({quadrant:c,roleId:l,roleName:r}),this.showRequestModal(t)));T.clickApp({quadrant:c,appId:l,appName:r}),s&&I.get()?p.onComplete({}):t.launch(p)},handleInstallDetectionEvent:function(e,t,n){if(e.appId){var o=this.collection.get(e.appId);o.isNative()?o.install({forceUpdate:!0,eventDetection:!0,silent:!!n,onComplete:function(){t.onComplete()},onFailure:function(e){t.onFailure(e)}}):t.onFailure({error:"not_native_app"})}else t.onFailure({error:"no_app_id"})},handleInstallAppEvent:function(t,n){var o,i,s=t.appId;s?(o=this.collection.get(s),i=o.get("tooltip")||o.get("title"),o.isNative()?o.install({forceUpdate:!0,onComplete:function(){n.onComplete()},onFailure:function(t){var s=t.error;switch(s){case"no_install_compatible":o.isOnlineInstallable()&&!t.remoteAvailable?d.onlineInstallation(o,null,null,null,!0,null,n):n.onFailure({error:"no_install_compatible_no_online_installation"});break;case"mandatory_update":d.onlineInstallation(t.app,t.install,null,t.remote,!0);break;case"applet_error":100===t.returnCode?n.onFailure({error:s,message:_("launcherbusyretry")}):t.remote?n.onFailure({error:s,message:_("launcherbusyretry")}):n.onFailure({error:s,message:e.String.format(_("launchingerror"),i)})}}}):n.onFailure({error:"not_native_app"})):n.onFailure({error:"no_app_id"})},handleLaunchAppEvent:function(t,n){if(e.is(t.appId)&&""!==t.appId){var o=this.collection.get(t.appId);if(o){e.log(o);var i=o.isNative(),s={silent:t.silent,onComplete:function(){n.onComplete({success:!0})},onFailure:function(e){switch(e.error){case"no_launch_infos":n.onFailure({error:"no_launch_infos"});break;case"no_install_selected":n.onFailure({error:"no_install_selected"});break;case"no_install_compatible":o.isOnlineInstallable()&&!e.remoteAvailable?n.onFailure({error:"no_install_compatible_online_installation"}):n.onFailure({error:"no_install_compatible_no_online_installation"});break;case"mandatory_update":n.onFailure({error:"mandatory_update_online_installation"});break;case"ios_app_not_installed":n.onFailure({error:"ios_app_not_installed"});break;case"android_app_not_installed":n.onFailure({error:"android_app_not_installed"});break;case"applet_error":n.onFailure({error:"applet_error"});break;case"unable_install_data":n.onFailure({error:"unable_install_data"})}}};if(t.fileName&&t.fileContent&&(s.file={name:t.fileName,content:t.fileContent}),i){if(o.get("supportModeExeName"))return void n.onFailure({error:"no_mode_selected"})}else if(o.isRole())return void n.onFailure({error:"app_is_a_role"});o.launch(s)}else n.onFailure({error:"no_app"})}else n.onFailure({error:"no_app_id"})},clickSuggestion:function(e){var t,n,o=e.target;(t=o.hasClassName("suggestion-item")?o:o.getParent(".suggestion-item"))&&(n=this.sugCollection.get(t.getAttribute("data-id")),this.handleSuggestionClick(n,t))},handleSuggestionClick:function(e){this.showTryModal(e)},showRequestModal:function(t){var n={description:t.get("description"),platforms:[],buttonDisabled:!1,buttonText:_("request"),action:"sendRoleRequest"},o=t.get("platforms"),i=!0;o.length>0?(n.platforms=o.reduce(function(t,n){return n.requested||(t.push({name:n.id,text:e.String.format(_("requeston"),n.name)}),i=!1),t},[]),i&&(n.buttonDisabled=!0)):(t.get("requested")||t.get("granted"))&&(n.buttonDisabled=!0),this.showRoleModal(t,n)},showTryModal:function(t){var n={description:t.get("productUrl"),platforms:null,buttonDisabled:!1,buttonText:_("tryit"),action:"sendTryRequest"},o=t.get("checkResultsByPlatformId");o.length>1?n.platforms=o.reduce(function(t,n){return n.checkResult&&t.push({name:n.platformId,text:e.String.format(_("tryiton"),n.displayName)}),t},[]):n.platforms=[],0!==n.platforms.length||o[0].checkResult||(n.buttonDisabled=!0),this.showRoleModal(t,n)},showRoleModal:function(e,t){var n,o,i,s=this,a=t.description,l=t.platforms;l.length>1?n={className:"compass-modal-dropdown",items:l,events:{onClick:function(n,i){s[t.action](e,i.name),o.hide()}}}:1===l.length&&(i=l[0].name),o=new y({className:"compass-modal compass-request-modal",closable:!0,visible:!0,events:{onHide:function(){o.destroy()}},header:"<h4>"+e.get("title")+"</h4>",body:new b({src:a,text:_("noadditionalinfo")}),footer:[new w({value:t.buttonText,className:t.buttonDisabled?"default":"primary",disabled:t.buttonDisabled,events:{onClick:function(){n||(s[t.action](e,i),o.hide())}},dropdown:n}),new w({value:_("cancel"),events:{onClick:function(){o.hide()}}})]}).inject(document.body)},clickRoleInfo:function(){var e=this.elements.expandedRole.getAttribute("data-id");this.showRequestModal(this.collection.get(e))},sendRoleRequest:function(t,n){var o=this,i=t.get("platforms"),s=function(){o.showMessage(_("requestfailure"),5e3)};o.showMessage("",2e4,!0),r.request({url:r.requestRoleUrl,method:"POST",contentType:"application/x-www-form-urlencoded",postData:{process:t.get("process"),platform:n},onComplete:function(e){e&&0===e.code?(t.set("requested",!0),n&&i.some(function(e){if(e.id===n)return e.requested=!0,!0}),o.showMessage(e.message,5e3)):s()},onFailure:s}),e.log("requested "+t.get("process")+":"+n)},sendTryRequest:function(t,n){var o=this,i=t.get("checkResultsByPlatformId"),s=function(){o.showMessage(_("trialrequestfailure"),5e3)};o.showMessage("",2e4,!0),n||(n=i[0].platformId),r.request({url:r.tryRoleUrl,method:"POST",contentType:"application/x-www-form-urlencoded",postData:{process:t.get("productId"),platform:n},onComplete:function(e){e&&0===e.code?(o.showMessage(e.message,5e3),o.refreshSuggestions()):s()},onFailure:s}),e.log("try "+t.get("productId")+":"+n)},refreshSuggestions:function(){this.views.suggestions.refresh()},_isRemoteDisabled:function(){return void 0===this._removeDisabled&&(this._removeDisabled="true"===N.get("3dremotevm")),this._removeDisabled},openSettings:function(n,o){var i,s=this,l=this._isRemoteDisabled(),p=n.getRemoteApp(),u=n.get("platforms"),m=o.getOffsets(),h=t.getScrolls(),f=function(t,f,v){var C,b,y=a.arrayFind(u,function(e){return e.preferred}),S=y?y.id:null,w=S,D=function(){i.hideSettings()};"none"!==document.body.getElement(".my-apps-panel").getStyle("display")?(t&&(C=t[0],b=t[1]&&t[1].length>0?t[1][0]:null),o.addClassName("active"),s.appsAccordion.addEvent("onScroll",D),(i=new g({data:{platforms:u.length>1?u:null,installs:C,remoteInstall:b,error:n.get("error")},preferredInstallId:v,processes:n.get("licenses").map(function(e){return e.id}),app:n,container:s.container,appTitle:n.get("tooltip")||n.get("title"),remoteAppTitle:p?p.get("title"):null,onlineInstallable:n.isOnlineInstallable(),trigger:o,target:o,position:{x:m.x-h.x+12,y:m.y-h.y},shortcutEnabled:!!S||1===u.length,remoteEnabled:!l&&!!n.get("remoteInfos"),additionalContent:n.canAdditionalContent(s.collections.grantedRoles),optionalContent:n.canOptionalContent(s.collections.grantedRoles),events:{onShow:function(){s.hideMessage()},onPlatformChange:function(t){var o=t.platform&&S!==t.platform,i=t.install&&v!==t.install;o&&u.forEach(function(o){(o.preferred=o.id===t.platform)&&(S=o.id,n.set("launchInfos",o.launchInfos),n.isWidget()&&(n.set("launchUrl",o.launchUrl||n.get("launchUrl")),n.set("config",o.config||n.get("config")),n.set("checksum",o.checksum||n.get("checksum")),n.set("platformId",o.id),s.container.getElements(e.String.format('[data-id="{0}"]',n.get("id"))).forEach(function(e){a.enableWidgetDrag(e,n.toJSON())})),n.isNative()&&(n.set("envInfos",o.envInfos),n.set("shortcutLaunchInfos",o.shortcutLaunchInfos),o.remoteLaunchInfos&&n.get("remoteInfos")&&(n.get("remoteInfos").remoteLaunchInfos=o.remoteLaunchInfos)))}),i&&n.set("install",t.install)},onHideSettings:function(e){var t=e.platform&&w!==e.platform,i=e.install&&v!==e.install;o.removeClassName("active"),s.appsAccordion.removeEvent("onScroll",D),(t||i)&&(r.setPreferences({appid:n.id,preferredPlatform:e.platform,preferredInstall:e.install}),w=e.platform)},onClickShortcut:function(e){c.createV6Shortcut(d.getInstall(e),n)},onClickUpdate:function(e,t){var o="remote"===e,i=o?b:d.getInstall(e);t?d.onlineInstallation(o?p:n,i,null,o):d.onlineInstallation(n,null,i)},onClickInstall:function(){d.onlineInstallation(n,null,null)},onClickInstallRemote:function(){d.onlineInstallation(p,null,null,!0)},onClickAdditional:function(e){var t=d.getInstall(e);d.onlineInstallation(n,null,t,null,null,!0)},onClickOptionalContent:function(e,t,o){var i,s;"optionalContentInstall"===o?i=d.getInstallOptional(e):s=n.get("stackOptionContentList"),d.onlineInstallation(n,!!t&&i,s,null,null,!1,!1,!0)}}})).show()):s.hideMessage()};this.elements.search.blur(),this.showMessage("",3e4,!0),n.isNative()&&!n.isNativeMarketApp()&&"ios"!==a.getOs()?this.canShowOptionCotent?n.getOptionalContent(p,function(){n.getInstallList(p,f)}):n.getInstallList(p,f):f()},clickSettings:function(e){var t=e.target,n=t.getParent(".exp-item").getAttribute("data-id"),o=this.collection.get(n);this.openSettings(o,t)},longClickApp:function(e){var t=this.collection.get(e.getAttribute("data-id"));t.isRole()?this.expandRoleDetail(t):t.needSettingsMenu()&&this.openSettings(t,e.getElement(".settings-img"))},clickExpand:function(e){var t=e.target.getParent(".exp-item").getAttribute("data-id"),n=this.collection.get(t);this.expandRoleDetail(n)},expandRoleDetail:function(e){var t=this.elements.expandedRole;this.views.expandedRole.filterApps(e.get("appList")),t.getElement(".expanded-role-title").setText(e.get("title")),t.setAttribute("data-id",e.id),this.container.addClassName("roles-expanded")},hideRoleDetail:function(){this.container.removeClassName("roles-expanded")},toggleAllRoles:function(){this.container.toggleClassName("all-roles"),this.elements.allRolesBtn.toggleClassName("fonticon-down-dir"),this.elements.allRolesBtn.toggleClassName("fonticon-up-dir")},close:function(){T._IDS.compass.cross;T.compassClose(),this.dispatchEvent("onClose")},onClose:function(){"undefined"==typeof compassRichWithCef?this.container.hide():A.publish("compassPanelOnHide",{})},open:function(){this.dispatchEvent("onOpen")},onOpen:function(){this.container.show(),r.get3DDashboardUrl()},displayQuadrant:function(e){var t=this.currentQuadrant;if(e){if(a.isCompassV2()){var n="play"===e?"north":e;this.appsAccordion.setTitle("my-apps-section",this.options.sectionData[n].title,this._getClassForQuadrant(n))}else this.appsAccordion.setTitle("my-apps-section",this.options.sectionData[e].title,this._getClassForQuadrant(e));t!==e&&(this.container.removeClassName(t),this.container.addClassName(e),this.currentQuadrant=e)}},_getClassForQuadrant:function(e){var t={north:"social",west:"3d",east:"intelligence",south:"simulation"},n="";return t[e]&&(n=" fonticon fonticon-compass-"+t[e]),e+n},forEachQuadrant:function(e){for(var t=["north","west","south","east"],n=t.length-1;n>=0;n--)e(t[n])},showMessage:function(e,t,n){var o=this.message;o&&(o.show(e,n),t&&o.hide(t))},hideMessage:function(e){var t=this.message;t&&t.hide(e)},setCanShowOptionCotent:function(e){this.canShowOptionCotent=e},mask:function(){this.maskElmt.show()},unmask:function(){this.maskElmt.hide()},setFavoriteApps:function(e,t){var n=t+e.length,o=this.collections.favorite,i=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:e}]);o.filter(function(e){return e.get("favoriteOrder")>=t}).forEach(function(e,t){-1===i.indexOf(e)&&e.set("favoriteOrder",n+t)}),i.forEach(function(e){e.set("favoriteOrder",t),e.set("isFavorite",!0),t++}),this.getContent().getElement(".delete-favorite").hasClassName("hide")&&this.getContent().getElement(".delete-favorite").removeClassName("hide"),this.getContent().getElement(".my-favorite-apps-section").hasClassName("closed")&&this.getContent().getElement(".my-favorite-apps-section").removeClassName("closed"),o.saveFavorites()},reorderFavoriteApp:function(e){var t=this.collections.favorite.get(e);t&&this.views.favorite.reorderApp(t)},removeFavoriteApp:function(e){var t=this.collections.favorite,n=t.get(e);n&&(n.set("isFavorite",!1),n.set("favoriteOrder",-1)),t.length<1&&!this.getContent().getElement(".delete-favorite").hasClassName("hide")&&this.getContent().getElement(".delete-favorite").addClassName("hide"),t.saveFavorites()},removeAllFavoriteApp:function(){var e=this.collections.favorite;this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"isFavorite",value:!0}]).forEach(function(e){e.set("isFavorite",!1),e.set("favoriteOrder",-1)}),this.getContent().getElement(".delete-favorite").hasClassName("hide")||this.getContent().getElement(".delete-favorite").addClassName("hide"),e.saveFavorites()},toggleRole:function(e,t){!0===t||!1===t?e.set("active",t):e.set("active",!e.get("active")),e.hasChanged("active")&&this.collections.grantedRoles.saveRoles({onComplete:function(){a.onRoleChange(e.get("process"),e.get("active"))}})},getVisibleHeight:function(e){return this.appsAccordion.getVisibleHeight(e)},showTempHeight:function(e,t){this.appsAccordion.showTempHeight(e,t)},hideTempHeight:function(e){this.appsAccordion.hideTempHeight(e)},closeSection:function(e){this.appsAccordion.closeSection(e)},isScrolling:function(){return this.appsAccordion.isScrolling()},stopScrolling:function(){this.appsAccordion.onScrollStop()},showDeleteZone:function(){var e;(e=this.getContent().getElement(".delete-favorite")).addClassName("show"),e.removeClassName("hide")},hideDeleteZone:function(){var e;(e=this.getContent().getElement(".delete-favorite")).removeClassName("active"),e.removeClassName("show")},changeRoles:function(){var e=this.collections.grantedRoles.getSelectedRoleApps();this.filterAppsInViews(e)}};return n.extend(O)}),define("DS/i3DXCompass/Collection/BusinessExperienceGenericCollection",["DS/i3DXCompass/Collection/PortfolioCollection","DS/i3DXCompass/Model/PortfolioBusinessExperienceModel"],function(e,t){"use strict";return e.extend({model:t,comparator:"title",setup:function(e,t){t.master&&(this.master=t.master,this.master.addEvent("onChange",this.changeModel.bind(this)),this.master.addEvent("onMultipleAdd",this.filterAndAdd.bind(this)),this.master.addEvent("onRemove",this.removeModel.bind(this))),this.filterType=t.filterType},removeModel:function(e){this.get(e)&&this.remove(e)},changeModel:function(e){e._changed;this.get(e)&&this.sort()},filterAndAdd:function(e){var t=this;e.forEach(function(e){e.get("type")===t.filterType&&t.add(e.toJSON())})}})}),define("DS/i3DXCompass/Controls/FamilyAppSettings",["UWA/Core","DS/UIKIT/DropdownMenu","DS/i3DXCompass/Tools","DS/i3DXCompass/Feature","DS/i3DXCompass/EventManager","DS/i3DXCompass/Controls/Settings","DS/i3DXCompass/InstallManager","DS/i3DXCompass/Collection/InstallList","UWA/Utils"],function(e,t,n,o,i,s,a,l,r){"use strict";var c=e.i18n;return s.extend({customClass:"compass-app-settings",iconClass:"fonticon fonticon-check",clickInstallId:"clickinstall",clickInstallRemoteId:"clickremote",clickOptionalContentInstall:"optionalContentInstall",clickOptionalContentStack:"optionalContentStack",clickConfig:"config",clickPlatform:"platform",init:function(t){this.familyApps=t.familyApps,this.platforms=t.data.platforms,this.isInstalled=t.data.installs&&t.data.installs.length>0,this.showMessage=t.events.showMessage,this.launchAppFamily=t.events.launchAppFamily,this.isForceSelectTenantActive=t.isForceSelectTenantActive,this.familyApps.native&&(t.app.set("optionalContent",this.familyApps.native.get("optionalContent")),t.app.set("catEnvs",this.familyApps.native.get("catEnvs")),t.app.set("installOptionContentList",this.familyApps.native.get("installOptionContentList")),t.app.set("stackOptionContentList",this.familyApps.native.get("stackOptionContentList"))),this.installItemsLength=this.getInstallWithouRemoteCount(t.data.installs),this.app=t.app,this.isForceSelectTenantActive=t.isForceSelectTenantActive;var n,o=this,i=t.data,s=i.installs,a=i.remoteInstall,l=i.platforms,d=t.preferredInstallId,p=t.processes,u=t.onlineInstallable,m=function(){var e=!1;return o.app.get("catEnvs")&&o.app.get("catEnvs").length>1?e=!0:o.app.get("catEnvs")&&Object.keys(o.app.get("catEnvs")).length>0&&Object.keys(o.app.get("catEnvs")).forEach(function(t){o.app.get("catEnvs")[t].length>1&&(e=!0)}),e},h=this.app.get("optionalContent")?this.getOptionalContentItem(p,u):null,f=s?s.filter(function(e){return!e._isOptionalContent()}).map(function(e){return this.getInstallItem(e,d,p,u,!1,t.shortcutEnabled,t.additionalContent)},this):null,g=f&&0===f.length,v=(this.app.get("platforms").length>0||l)&&m()&&(!g||a||t.isfamilyApps)?this.getCatEnvItemByPlatforms():l&&(!g||a||t.isfamilyApps)?this.getPlatformsItems(l):t.isfamilyApps&&t.familyApps.Windows?this.getPlatformsItems(l):null,C=v||[];g&&(f.push({className:"header no-install",html:i.error?i.error:e.String.format(c("noinstall"),t.appTitle)}),u&&f.push({className:"download-link",name:this.clickInstallId,text:c("clickinstall")})),f&&t.remoteEnabled&&(f.push({className:"divider"}),a?f.push(this.getInstallItem(a,d,[],u,!0,!1)):u&&f.push({className:"download-link",name:this.clickInstallRemoteId,text:e.String.format(c("install"),t.remoteAppTitle)})),v&&f&&C.push({className:"divider"}),C=C.concat(f||[]),h&&(C=C.concat(h||[])),n={familyOption:t,multiSelect:!0,maxItemsBeforeScroll:r.Client.getSize().height<400?5:r.Client.getSize().height<560?8:12,forceResponsive:m()||t.isfamilyApps,items:C,altPosition:function(){var e=o.elements,n=e.container.offsetWidth,i=e.container.offsetHeight,s=window.innerWidth,a=window.innerHeight,l=t.position.x,r=t.position.y;return l+n+20>s&&(l=s-n-20),r+i+20>a&&(r=a-i-20),{x:l,y:r}},renderTo:t.renderTo||document.body,target:t.target,events:t.events,shortcutEnabled:t.shortcutEnabled,isParentFamily:!0},this._parent(n),this.trigger=t.trigger},_getCatEnvItemByPlatforms:function(e){var t,n=[],o=[],i=this;return(e=e||this.app.get("platforms")).forEach(function(e){e.appType.indexOf("native")>-1&&i.app.get("catEnvs")[e.id]?(n=[],i.app.get("catEnvs")[e.id].forEach(function(t,o){n.push(i.getConfigItem(t,e))}),(t=i.getPlatformItem(e)).items=n,t.className="platform-item-responsive",o.push(t)):o.push(i.getPlatformItem(e))}),o},getCatEnvItemByPlatforms:function(){var e=this._getCatEnvItemByPlatforms(this.platforms),t=this.getFirstLevelPlatformView(),n=this.getFirstLevelLaunchAppView();return t.items=e,n?n.concat(t):[t]},getPlatformsItems:function(e){var t=e&&e.length>0?this._parent(e.sort()):[],n=this.getFirstLevelPlatformView(),o=this.getFirstLevelLaunchAppView();return t.length>1?n.items=t:(n.selected=!0,n.preferred=!0),o?o.concat(n):[n]},editItem:function(e){this._parent(e)},updateItem:function(e){-1===["launchApp","launchNative","launchWeb","platforms","launchMobile"].indexOf(e["data-type"])&&this._parent(e)},onClick:function(e,t){this._parent(e,t),this.clickOnLaunchApp&&this.canLaunchApp(this.familyApps[this.clickOnLaunchApp])&&("native"!==this.clickOnLaunchApp&&"Windows"!==this.clickOnLaunchApp||this.launchFamilyApp(this.clickOnLaunchApp),this.clickOnLaunchApp="")},getFirstLevelPlatformView:function(){var e=this,t=this.getFavoritePlatform();return this.firstLevelPlatformView={fonticon:"cloud-alt",text:t&&!this.isForceSelectTenantActive?t.id:c("Select platform …"),"data-type":"select-platforms",handler:function(t,n,o){t.showNative&&e.items,console.log("getFirstLevelPlatformView first view")},onShow:function(e){this.showPlatform(!o.isNativeApplicationEnvironment()&&this.familyApps.Widget?"Widget":"native")}},this.firstLevelPlatformView},getFirstLevelLaunchAppView:function(){var t=this,n=[],i=[],s=Object.keys(this.familyApps).length,a=["Windows","Macos"];return this.familyApps.forEach&&this.familyApps.forEach(function(e){a.filter(function(t){return e.get("tooltip").indexOf(t)>-1})}),!o.isNativeApplicationEnvironment()&&this.familyApps.native&&this.isInstalled?n.push({fonticon:"monitor","data-type":"launchNative",text:c("Launch as native app"),handler:function(e,n,o){t.canLaunchApp(this.familyApps.native)?t.launchFamilyApp("native"):t.showPlatform("native")}}):o.isNativeApplicationEnvironment()&&this.familyApps.Widget&&n.push({fonticon:"internet","data-type":"launchWeb",text:c("Launch as web app"),handler:function(e,n,o){t.canLaunchApp(this.familyApps.Widget)?t.launchFamilyApp("Widget"):t.showPlatform("Widget")}}),this.familyApps.Windows&&n.push({fonticon:"logo-windows","data-type":"launchMobile",text:e.String.format(c("Launch as {0} app"),a[0]),handler:function(e,n,o){t.canLaunchApp(this.familyApps.Windows)?t.launchFamilyApp("Windows"):t.showPlatform("Windows")}}),s>2&&this.isInstalled?(i.push({fonticon:"open-menu-dot","data-type":"launchApp",text:c("Launch as ..."),items:n,handler:function(e,t,n){console.log("You've taken some beautiful pictures ! ")}}),i):n},getFirstLevelInstallView:function(){var e=[];return e.push({fonticon:"install",text:c("R2022X FD02"),items:[],handler:function(e,t,n){console.log("You've taken some beautiful pictures ! ")}}),e},getFavoritePlatform:function(){var e,t=this.platforms;return(e=t.detect(function(e){return e.appType.indexOf("Widget")>-1&&!0===e.preferred}))||(e=t.detect(function(e){return!0===e.preferred})),1!==t.length||e?e:t[0]},getCatEnv:function(){var e=[];this.familyApps&&this.familyApps.filter(function(e){return e.isNative()}).forEach(function(t){t.get("catEnvs").forEach(function(t){e.push(t)})})},getPlatformItem:function(e){var t;return(t=this._parent(e))&&(t.appType=e.appType||"widget"),t},getOptionalContentItem:function(e,t){if(!o.isNativeApplicationEnvironment())return this._parent(e,t)},getInstallItem:function(e,t,n,i,s,a,l){var r;if(!o.isNativeApplicationEnvironment())return(r=this._parent(e,t,n,i,s,a,l))&&(r["data-type"]="install-item",this.installItemsLength<2&&(r.selected=!1)),r},canLaunchApp:function(e){var t=this.isForceSelectTenantActive?null:1===this.platforms.length?this.platforms[0]:n.arrayFind(this.platforms,function(e){return e.preferred});return t&&e.get("platforms").detect(function(e){return t.id===e.id})||0===e.get("platforms").length},showPlatform:function(e){i.dispatchEvent("onShowMessage",["Please select platform",5e3]),this.clickOnLaunchApp=e,this.menus.forEach(function(e){if(e.parentItem&&"Select platform …"===e.parentItem.name)e.items.forEach(function(e){-1===e.appType.indexOf("native")?(e.disabled=!0,e.elements.container.hide()):(e.disabled=!1,e.elements.container.show())});else if(e.parentItem&&"Launch as ..."===e.parentItem.name)!1===e.elements.container.isHidden()&&e.hide();else if(e.items.detect(function(e){return"select-platforms"===e["data-type"]})){var t=e.items.detect(function(e){return"select-platforms"===e["data-type"]});t.elements.container.getElement(".fonticon-right-open")?t.elements.container.getElement(".fonticon-right-open").click():t.show()}})},launchFamilyApp:function(e){this.launchAppFamily(this.familyApps[e])},isPreferredConfig:function(e){var t=!1;return"native"!==this.clickOnLaunchApp||(e.forEach(function(e,n){!0===e.preferred&&(t=!0)}),t)}})}),define("DS/i3DXCompass/View/PortfolioAsBusinessView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/PortfolioDepth1View","DS/i3DXCompass/Tools","DS/i3DXCompass/Data"],function(e,t,n,o,i){"use strict";return n.extend({setup:function(e){return this.container.addClassName("portfolio-depth1"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.hideServices=e.hideServices,this.hideBusinessExperience=e.hideBusinessExperience,this._parent(e)},_renderBuildItem:function(e){return("BUSINESS"===e.model.get("id")&&!0===this.hideBusinessExperience||"TRADING"===e.model.get("id")&&!0===this.hideServices)&&(e.container.className=e.container.className+" hidden"),e.render(),e}})}),define("DS/i3DXCompass/Collection/BusinessExperienceRolesCollection",["UWA/Core","DS/i3DXCompass/Collection/BusinessExperienceCollection","DS/i3DXCompass/Model/BusinessExperienceRoleDetailModel"],function(e,t,n){"use strict";return t.extend({tempData:{},pathURL:"/resources/BusinessExperienceAccess/v1/model/Role",model:n,parse:function(t){var n,o=this,i=[];return t&&Object.keys(t).length>0&&Object.keys(t).forEach(function(s){t[s].forEach(function(t){n=i.find(function(e){return e.id===t.id}),t.platformId=s,t.businessExperienceUrl=o.extractBusinessExperienceUrl(s),n?((n=e.merge(n,t)).platforms.push(t.platformId),n.businessExperienceUrls.push(t.businessExperienceUrl)):(t.platforms=[t.platformId],t.businessExperienceUrls=[t.businessExperienceUrl],i.push(t))})}),i},extractBusinessExperienceUrl:function(e){return this.urlList.detect(function(t){return t.id===e})?this.urlList.detect(function(t){return t.id===e}).services[0].url:""}})}),define("DS/i3DXCompass/View/PortfolioDepth4View",["UWA/Core","UWA/Class/View","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/PortfolioGenericView"],function(e,t,n,o){"use strict";return o.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth4"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),e.itemsDefaultIconsuffix="small",this._parent(e)},_renderBuildItem:function(t){(t.render(),t.model.get("brand"))&&e.createElement("img",{class:"process-brand",src:n.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/process/{0}_Logo.svg",t.model.get("brand")))}).inject(t.container.getElement(".portfolio-item-content"),"top");return t}})}),define("DS/i3DXCompass/View/CompassOverlayView",["UWA/Core","UWA/Class/View","DS/UIKIT/Input/Button","UWA/Utils","DS/i3DXCompass/Tools"],function(e,t,n,o,i){"use strict";return t.extend({tagName:"div",className:"V2 compass-modal-overlay modal-overlay in",topBar:"",compass:"",defaultQuadrant:"",logoClassName:"",hideTopBarCenter:!1,setup:function(e){this.defaultQuadrant=e.defaultQuadrant,this.logoClassName=e.logoClassName,this.setTopBar(e.logoClassName),this.setCompass()},render:function(){var e=this.compass,t=(this.topBar,e.getElement(".compass-on"));document.querySelector(".topbar-center").style.display&&"none"===document.querySelector(".topbar-center").style.display&&(this.hideTopBarCenter=!0,document.querySelector(".topbar-center").style.display="block",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="none",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display="none"),this.container.setContent(this.openCompassButton()),e.getElement(".compass-base").addClassName("animate"),e.getElement(".compass-ct").hasClassName("open")||e.getElement(".compass-ct").addClassName("open"),document.querySelector("."+this.logoClassName).hide(),this.manageSearch(),this.getCrossButton().show().inject(document.querySelector(".topbar-center")),document.querySelector(".topbar-center .tagnav").hide(),document.querySelector(".topbar-center .menu").hide(),this.updateCompassQuadrantClass(t,this.defaultQuadrant),this.inject(this.topBar,"after")},updateCompassQuadrantClass:function(e,t){var n=e!==this.compass.getElement(".compass-on")?this.compass.getElement(".compass-on"):null;e.removeClassName&&(e.removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south"),i.isCompassV3()&&e===this.compass.getElement(".compass-on")&&e.getParent(".compass-force-show")||e.addClassName(t)),n&&n.removeClassName&&(n.removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south"),!i.isCompassV3()&&e.getParent(".compass-force-show")&&n.addClassName(t))},manageSearch:function(){var e=document.body.getElement(".search-active");e&&e.removeClassName("search-active");var t=document.body.getElement(".topbar-cmd.search.active");t&&t.removeClassName("active")},getCrossButton:function(){var t=this;return e.createElement("div",{class:"top-bar-overlay compass-V2",html:{class:"topbar-cmd fonticon fonticon-close",events:{click:function(){t.closeCompassV2()}}}})},openCompassButton:function(){var e=this;return new n({value:"More applications",className:"primary btn-open-compass",styles:{position:"relative",top:"90%",left:"50%"},events:{onClick:function(){e.options.i3DXCompass.showAccordion(!0),e.closeCompassV2(),setTimeout(function(){document.querySelector(".my-apps-panel")&&!document.querySelector(".my-apps-panel").hasClassName("V2")&&document.querySelector(".my-apps-panel").addClassName("V2")},300)}}})},closeCompassV2:function(){var e=this.compass;this.topBar,e.getElement(".compass-on");this.remove(),e.hide(),document.body.getElement(".topbar-logo").show(),document.querySelector("."+this.logoClassName).show(),document.querySelector(".top-bar-overlay.compass-V2").remove(),this.hideTopBarCenter?(document.querySelector(".topbar-center").style.display="none",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display=""):(document.querySelector(".topbar-center .tagnav").show(),document.querySelector(".topbar-center .menu").show()),o.Client.getSize().width<959&&e.getElement(".compass-ct").removeClassName("open"),e.removeClassName("compass-force-show"),e.getElementsByClassName("compass-base")[0].removeClassName("animate"),this.hideTopBarCenter=!1},closeCompassV2FullSize:function(){var e,t=this.compass,n=(this.topBar,document.querySelector("."+this.logoClassName)),i=(t.getElement(".compass-on"),t.getElement(".compass-over-v3"));o.Client.getSize().width<959&&(e=i.hasClassName("north")?"north":i.hasClassName("east")?"east":i.hasClassName("south")?"south":i.hasClassName("west")?"west":"play",this.remove(),t.hide(),document.body.getElement(".topbar-logo").show(),this.updateCompassQuadrantClass(n,e),n.show(),document.querySelector(".top-bar-overlay.compass-V2").remove(),this.hideTopBarCenter?(document.querySelector(".topbar-center").style.display="none",document.querySelector(".topbar-center .global_ctn_search.topbar-search").style.display="",document.querySelector(".topbar-center .topbar-cmd.fonticon.fonticon-search.search").style.display=""):(document.querySelector(".topbar-center .tagnav").show(),document.querySelector(".topbar-center .menu").show()),t.removeClassName("compass-force-show"),t.getElementsByClassName("compass-base")[0].removeClassName("animate")),this.hideTopBarCenter=!1},setTopBar:function(e){this.topBar=document.getElement("."+e).getParent()},setCompass:function(){this.compass=this.topBar.getElement("#compass_ctn")}})}),define("DS/i3DXCompass/View/PortfolioServicesView",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/PortfolioDepth1View","DS/i3DXCompass/Tools","DS/i3DXCompass/Data"],function(e,t,n,o,i){"use strict";return n.extend({setup:function(e){return this.container.addClassName("portfolio-depth1"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),"ios"===o.getOs()||"macos"===o.getOs()?e.itemTagName="div":e.itemTagName="a",this._parent(e)},_renderBuildItem:function(t){return"Widget"===t.model.get("type")?(t.render(),t.container.addClassName("service"),o.enableWidgetDrag(t.container,t.model.toJSON()),t.container.addClassName("widget-item"),t.container.addClassName("drag-app"),e.createElement("i",{class:"fonticon fonticon-window fonticon-service-widget"}).inject(t.container.getElement(".portfolio-item-content")),"ios"!==o.getOs()&&"macos"!==o.getOs()||t.container.querySelector(".portfolio-item-content").addClassName("portfolio-item-content-draggable").removeClassName("portfolio-item-content")):(t.render(),t.container.addClassName("service")),t},_onClick:function(t){var n=t.model,s=n.get("url");"X3DPSLY_AP"===n.get("id")&&!0===e.is(i.addinMode)&&(s=this._manageAddinUrl(s)),o.isSameApp(s,window.location)||-1!==s.indexOf("addinmode")?window.open(s,"_self"):window.open(s,"_blank")},_manageAddinUrl:function(e){var t=i.addinMode&&i.addinMode.value;return i.cloud||(e=this._addQueryParams(e,"lockedapp",!0)),t&&(e=this._addQueryParams(e,"addinmode",t)),t&&"catiav5"===t.toLowerCase()&&(e=this._addQueryParams(e,"embeddedProfileId","CATIAV5")),t&&"xvl"===t.toLowerCase()&&(e=this._addQueryParams(e,"embeddedProfileId","XVL")),e},_addQueryParams:function(e,t,n){var o=-1===e.indexOf("?")?"?":"&";return e+o+t+"="+n}})}),define("DS/i3DXCompass/i3DXCompassServices",["UWA/Core","UWA/Utils","DS/i3DXCompass/Data","DS/i3DXCompass/EventManager","DS/i3DXCompass/ServiceApi/UserServiceApi","DS/i3DXCompass/CacheManager"],function(e,t,n,o,i,s){"use strict";var a,l,r,c,d,p,u=!1,m=!1,h=[],f=function(){var e=g();return e?e+(v()?"api/v1/services":"api/v1/public/services"):null},g=function(){return n.myAppsBaseUrl||p},v=function(){return s._getUser()},C=function(e){h.forEach(function(t){t[e]&&setTimeout(t[e],0,c)}),h.length=0},b=function(){return y()?JSON.parse(y().split("@@@")[1]):null},y=function(){return r||(r=s.getCache(f())),r},S=function(){m=!0,n.request({cache:null,urlParams:{cors:!0},url:f(),headers:{"Last-Modified":y()?y().split("@@@")[0]:null},onComplete:function(e,t){if(e&&0===e.code){a=null,l=null,c=e.platforms,u=!0;var n=t&&(t["Last-Modified"]||t["Last-Modified".toLowerCase()]);t&&n&&c&&c.length>0&&function(e,t){s.setCache(f(),e+"@@@"+JSON.stringify(t))}(n,c),C("onComplete")}else(c=b())?(u=!0,C("onComplete")):C("onFailure");m=!1},onFailure:function(){(c=b())?(u=!0,C("onComplete")):C("onFailure"),m=!1}})},w=function(t){var n=Date.now();!f()&&(t.config&&t.config.myAppsBaseUrl||"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.myAppsBaseUrl)&&(p=(p=(p=t.config&&t.config.myAppsBaseUrl?t.config.myAppsBaseUrl:COMPASS_CONFIG.myAppsBaseUrl).replace("/resources/AppsMngt","")).replace(/\/$/,"")+"/resources/AppsMngt/"),!v()&&(t.config&&t.config.userId||"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.userId)&&(t.config&&t.config.userId?s.setup(t.config.userId,t.config.lang):s.setup(COMPASS_CONFIG.userId,COMPASS_CONFIG.lang)),u&&c&&(!d||n-d<1e4)?t.onComplete(e.clone(c)):(d=n,h.push({onComplete:t.onComplete,onFailure:t.onFailure}),m||(f()?S():o.addEventOnce("onInitialized",D)))},D=function(){f()&&S(),o.removeEvent("onInitialized",D)},E=function(e){return t.composeUrl(t.parseUrl(e))},A=function(t,n){var o={};if(n&&n.services)return n.services.forEach(function(e){(!t||t&&!0===e.public)&&(o[e.name]=E(e.url))}),e.merge({platformId:n.id,displayName:n.name},o)},I=function(e,t){var n;if(t)return(n=t[e])?{platformId:t.platformId,url:n}:{platformId:t.platformId}},N=function(){c=void 0,a=void 0,l=void 0,u=!1,m=!1},k=function(t,n){return t&&(n||a?l=t.map(A.bind(null,n)):a=t.map(A.bind(null,n))),n?e.clone(l):e.clone(a)};return o.addEvent("onMyAppsDataChange",function(){N()}),{getUser:i.getUser,getPlatformServices:function(t){t&&"function"===e.typeOf(t.onComplete)&&w({config:t.config,onComplete:function(n){var o,i=t.platformId,s=t.public,a=k(n,s);o=i?e.Array.detect(a,function(e){return e.platformId===i}):a,t.onComplete(o)},onFailure:t.onFailure})},getPlatformConfig:function(t){t&&"function"===e.typeOf(t.onComplete)&&w({config:t.config,onComplete:function(n){var o,i=t.platformId,s=t.key,a=e.clone(n);o=i?e.Array.detect(a,function(e){return e.id===i}):a.map(function(t){var n=t.config;if(s&&e.is(n[s])){var o=n[s];(n={})[s]=o}return e.merge({platformId:t.id,displayName:t.name},n)}),i&&o&&(o=s&&e.is(o.config[s])?o.config[s]:s?void 0:o.config),t.onComplete(o)},onFailure:t.onFailure})},getServiceUrl:function(t){t&&t.serviceName&&"function"===e.typeOf(t.onComplete)&&w({config:t.config,onComplete:function(n){var o,i,s,a=t.platformId,l=t.public,r=k(n,l);a?(o=e.Array.detect(r,function(e){return e.platformId===a}),(i=I(t.serviceName,o))&&(s=i.url)):s=r.map(I.bind(null,t.serviceName)),t.onComplete(s)},onFailure:t.onFailure})},_private:{callbacks:h,fireCallbacks:C,fetchEnvironmentList:S,getEnvironmentList:w,normalizeUrl:E,extractUrls:A,extractUrl:I,reset:N}}}),define("DS/i3DXCompass/View/PortfolioDepth5View",["UWA/Core","DS/i3DXCompass/View/PortfolioGenericView","DS/i3DXCompass/View/RoleSeoView","DS/UIKIT/Input/Button","DS/UIKIT/Tooltip","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s){"use strict";return t.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth5"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),e.defaultIcon&&(this.defaultIcon=e.defaultIcon),this._parent(e)},_buildItem:function(t){var a=new n({model:t,defaultIcon:t.get("contact")?"{0}_eRole.png":this.defaultIcon,navigation:this.options.navigation,clickable:!0,events:{onItemClick:function(){t.get("contact")||this._onItemClick.apply(this,arguments)}.bind(this)}}).render(),l=t&&t.get("deployments")?["All"].concat(t.get("deployments")):null;if(l&&a.getContent().setAttribute("data-deployment",this._filterDeploymentsAndTranslate(l).map(function(e){return this._deploymentToCode(e)}.bind(this)).join(",")),!s.isMobileAppEnvironment()&&t.get("contact"))var r=new i({position:"bottom",className:"compass-tooltip",target:a.getContent(),trigger:"click touch",body:{class:"compass-tooltip-know-more",html:[{text:e.String.format(e.i18n("Know more about {0}"),t.get("portfolioName")||t.get("title"))},new o({value:e.i18n("Contact us"),className:"primary",events:{onClick:function(){r.hide(),this._onContactUsClick()}.bind(this)}})]},events:{onShow:function(){setTimeout(function(){r.hide()},2e3)}}});return a}})}),define("DS/i3DXCompass/View/PortfolioDepth2View",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/PortfolioGenericView"],function(e,t,n){"use strict";return n.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth2"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this._parent(e)}})}),define("DS/i3DXCompass/View/PortfolioDepth3View",["UWA/Core","UWA/Class/View","DS/i3DXCompass/View/PortfolioGenericView"],function(e,t,n){"use strict";return n.extend({tagName:"div",setup:function(e){return this.container.addClassName("portfolio-depth3"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this._parent(e)}})}),define("DS/i3DXCompass/Collection/PlatformCollection",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Model/PlatformModel"],function(e,t,n){"use strict";return t.extend({serviceFilter:"",model:n,comparator:"displayName",setup:function(e,t){return t.serviceFilter&&(this.serviceFilter=t.serviceFilter),this._parent(e&&e.length>0?this.hydrate(e):e,t)},hydrate:function(e){var t=this,n=[];return e.forEach(function(e){if(e.services)e.services.forEach(function(e){t.serviceFilter&&t.serviceFilter===e.name&&n.push(e)});else{var o=[],i={};Object.keys(e).forEach(function(n){t.serviceFilter&&n===t.serviceFilter?(i[n]=e[n],o.push(i)):t.serviceFilter||"displayName"!==n||"platformId"!==n||(i[n]=e[n],o.push(i))}),o.length>0&&n.push({id:e.platformId,displayName:e.displayName,services:o,servicesUrl:i})}}),n}})}),define("DS/i3DXCompass/View/CockpitView",["UWA/Core","UWA/Utils","DS/i3DXCompass/View/AppView","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Tooltip"],function(e,t,n,o,i){"use strict";return n.extend({click:function(e){this.dispatchEvent("onItemClick",[this.model,this.container])},_getTemplate:function(){var e={tag:"div",styles:{"z-index":"2",height:"64px",width:"64px","background-size":"64px","background-repeat":"no-repeat","background-position":"50% 50%","margin-left":"calc(50% - 32px)"},events:{error:function(){this.styles["background-image"]="url("+o.getWebappsAssetUrl("i3DXCompass","images/s.gif")+")"}}},t=this.model.get("thumbnail")&&this.model.get("thumbnail").indexOf("ROLE_64")>-1||this.options.defaultIcon?"":this.model.get("thumbnail");return""===t?e.class=this.model.get("defaultthumbnail"):"IntersectionObserver"in window?(e["data-src"]=t,e.loading="lazy",e.styles["background-image"]="url("+o.getWebappsAssetUrl("i3DXCompass","images/s.gif")+")"):e.styles["background-image"]="url("+t+")",[e,{class:"item-view-content-wrapper title",text:this.model.get("title")},this.model.needSettingsMenu&&this.model.needSettingsMenu()&&this.clickable?this.buildSettingsElmt():null]},buildSettingsElmt:function(){var t=this;return e.createElement("div",{class:"settings-img fonticon fonticon-chevron-down",events:{click:function(n){t.clickable&&(e.Event.stop(n),t.dispatchEvent("onClickSettings",[t.model,t.container]))}}})}})}),define("DS/i3DXCompass/View/CockpitsListView",["UWA/Core","UWA/Utils","UWA/Class/View","DS/UIKIT/Tooltip","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/X3DContent","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/CockpitView","DS/i3DXCompass/Controls/BusinessExperienceSettings","UWA/Utils/Client","DS/i3DXCompass/UsageTracker"],function(e,t,n,o,i,s,a,l,r,c,d,p){"use strict";return n.extend({tagName:"div",className:"items-view-business-methods",setting:"",setup:function(e){return e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.renderOnce=i.debounce(this.render,500,!1).bind(this),this.collection&&(this.collection.addEvent("onAdd",this.renderOnce.bind(this)),this.collection.addEvent("onRemove",this.renderOnce.bind(this)),this.collection.addEvent("onChange",this.renderOnce.bind(this)),this.collection.length>0&&this.renderOnce()),this},buildSetting:function(e,t){var n=this,o=t.getElement(".settings-img").getOffsets(),i=d.getScrolls();this.setting=new c({model:e,target:t.getElement(".settings-img"),renderTo:document.body,position:{x:o.x-i.x,y:o.y-i.y+25},events:{onUsage:function(e,t){n.launchCockpit(e,t)}}})},render:function(){var e=this;return this.collection&&this.collection.map&&(this.container.setContent(this.collection.map(function(t){return new r({model:t,clickable:!0,additionalClassName:"cockpit-item",events:{onHide:function(){var t=e.container.getElement(".settings-img.active");t&&t.removeClassName("active")},onItemClick:function(t,n){t.isDashboard()?t.preferedUsageId||!t.needSettingsMenu()?e.launchCockpit(t):(e.setting&&e.setting._hide(),e.setting="",e.buildSetting(t,n),e.setting.show()):t.launchBusinessExperience(t.getFistUsage()),t&&t.get&&t.get("modelId")?p.clickCockpitByRole({cockpitId:t.get("modelId"),cockpitName:t.get("name")}):t&&t.get&&p.clickBusinessCockpit({cockpitId:t.get("id"),cockpitName:t.get("title")})},onClickSettings:function(t,n){e.setting&&e.setting._hide(),e.setting="",e.buildSetting(t,n),e.setting.show()}}}).render()})),this.dispatchEvent("onShowCockpitsSection")),this},launchCockpit:function(e,t){var n=this.collection;if(e.get("modelId")){var o,a,l,r="#dashboard:"+e.get("modelId");t?(o=t.get("platformId"),l=t.get("3DDashboard")):e.get("platforms")&&e.get("platforms").length>0?e.preferedUsageId?(l=e.get("platforms").find(function(t){return t.get("platformId")===e.preferedUsageId}),o=e.preferedUsageId,l=l?l.get("3DDashboard"):""):e.get("platforms")[0]&&(o=e.get("platforms")[0].get("platformId"),l=e.get("platforms")[0].get("3DDashboard")):l=i.getTenantList().find(function(e){return s.selectedPlatform===e.platformId&&e["3DDashboard"]}),a=(l||n.getFirstURL())+"/"+r,-1!==window.location.href.indexOf("-ifwe.")&&i._supportBigUrl(a)&&o===s.selectedPlatform?window.location.hash=r:window.open(a,"_blank")}}})}),define("DS/i3DXCompass/View/BusinessExperienceContentOverlayView",["UWA/Core","DS/i3DXCompass/View/ContentOverlayView","DS/i3DXCompass/Tools","DS/UIKIT/Scroller","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip","DS/i3DXCompass/View/BusinessMethodsListView","DS/i3DXCompass/Collection/BusinessExperienceMethodsCollection","DS/i3DXCompass/Collection/BusinessExperienceCockpitsCollection","DS/i3DXCompass/View/CockpitsListView","DS/UIKIT/Accordion","DS/UIKIT/Mask"],function(e,t,n,o,i,s,a,l,r,c,d,p){"use strict";var u=e.i18n,m="content-overlay",h={ME:"fonticon-user",WE:"fonticon-users",COMPANY:"fonticon-building-office",WORLD:"fonticon-globe"};return t.extend({tagName:"div",i18n:e.i18n,tempRemove:[],className:"compass-v3 "+m+" "+m+"-hidden",domEvents:{"click .content-overlay-header":"_backClick","click .content-overlay-go-home":"callGoHome","click .content-overlay-icon-more.fonticon-close":"_dispatchClose"},setup:function(e){this.title=e.title,this.icon=e.icon,this.icon2=e.icon2,this.view=e.view,this.model=e.model,this.canEdit=!!this.model&&this.model.get("canEdit"),this.isEditMode=this.options.isEditMode||!1,this.canDelete=!!this.model&&this.model.get("canDelete"),e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.renderOnce=n.debounce(this.render,500,!0).bind(this),this.model&&(this.model.addEvent("onSync",this.render.bind(this)),this.model.addEvent("onAdd",this.renderOnce.bind(this)),this.model.addEvent("onRemove",this.renderOnce.bind(this)),this.model.addEvent("onChange",this.renderOnce.bind(this))),e.businessMethodCollection&&(this.businessExperienceMethodsCollection=new l(e.businessMethodCollection)),e.cockpitCollection&&(this.businessExperienceCockpitsCollection=new r(e.cockpitCollection))},render:function(){this.container.setContent([this.buildHeader(),{id:"container-scroll",class:""},{id:"to-scroll",styles:{height:"100%"},html:this.buildAccordion()},void 0]);var e=this.container.getElement("#to-scroll"),t=this.container.getElement("#container-scroll");return this.scroller=new o({element:e}).inject(t),this.options.buy&&this._injectBuyButtonIfNeeded(),this},buildAccordion:function(){var t,n=e.createElement("div",{styles:{height:"100%"},html:new a({collection:this.businessExperienceMethodsCollection,additionalClassName:"items-roles-view compass-scroll-accordion-section my-apps-section"}).render()}),o=e.createElement("div",{styles:{height:"100%"},html:new c({collection:this.businessExperienceCockpitsCollection,additionalClassName:"items-roles-view compass-scroll-accordion-section my-apps-section"}).render()}),i=[];return this.businessExperienceMethodsCollection.length>0&&i.push({title:u("My Business Methods"),name:"apps",content:n,selected:!0,className:"compass-scroll-accordion-section my-apps-section"}),this.businessExperienceCockpitsCollection.length>0&&i.push({title:u("My Cockpits"),name:"cockpits",content:o,selected:!0,className:"compass-scroll-accordion-section my-apps-section"}),t=new d({exclusive:!1,className:"divided",animated:!0,items:i}),this.accordion=t,t},buildHeader:function(){var t,n,o;return this.options.parentIcon&&(n=e.createElement("i",{class:"content-overlay-go-home fonticon "+h[this.options.parentIcon]}),new s({position:"bottom",target:n,className:"compass-small-tooltip",body:e.String.format(e.i18n("Back to {0}"),this.options.parentIcon)})),t=this.options.isDisableGoBack?e.createElement("i",{class:"content-overlay-back fonticon fonticon-chevron-left disable-go-back"}):e.createElement("i",{class:"content-overlay-back fonticon fonticon-chevron-left"}),this.options.isDisableGoBack||new s({position:"bottom",target:t,className:"compass-small-tooltip",body:e.i18n("Back")}),o=e.createElement("h1",{html:this.title}),{class:m+"-header",html:[n,t,this.icon?{tag:"i",class:"fonticon fonticon-"+this.icon}:null,o,this.options.closable?this._buildCloseIcon():null]}},_injectBuyButtonIfNeeded:function(){},_buildBuyButton:function(){},_buildRequestButton:function(){},_buildRequestedIcon:function(){},_buildCloseIcon:function(){var t=e.createElement("i",{class:"content-overlay-icon-more fonticon fonticon-close"});return new s({position:"bottom",target:t,className:"compass-small-tooltip",body:u("Close")}),t},deleteGroup:function(e){},saveGroup:function(e){},editGroup:function(){},switchAppMode:function(){},_backClick:function(e){return!!(this.options.isDisableGoBack||e&&e.target.hasClassName("content-overlay-icon-more"))||(!(!e||!e.target.hasClassName("content-overlay-go-home"))||(this.back(e),this.dispatchEvent("onBackClick"),void i.clickBack()))},back:function(e){var t=this;return!(!e||!e.target.hasClassName("content-overlay-icon-more"))||(!(!e||!e.target.hasClassName("content-overlay-go-home"))||(this.container.addClassName(m+"-hidden"),setTimeout(function(){t.view&&t.view.destroy&&t.view.destroy(),t.destroy(),t=null},301),void this.dispatchEvent("onBack")))},show:function(e){var t=this;this.render(),setTimeout(function(){t.container.removeClassName(m+"-hidden"),t.dispatchEvent("onShow")},25)},clickMore:function(e){},clickBuy:function(e,t){},callGoHome:function(e){this.dispatchEvent("callGoHomes",e)},goHome:function(e,t){var n=this;return!!(!t&&e&&e.target.hasClassName("content-overlay-icon-more")&&e.target.hasClassName("content-overlay-icon-more")&&e.target.hasClassName("content-overlay-icon-more"))||(!(t||!e||!e.target.hasClassName("content-overlay-header"))||(this.container.addClassName(m+"-hidden"),this.dispatchEvent("onBack",e),void setTimeout(function(){n.destroy()},301)))},_dispatchClose:function(e){this.dispatchEvent("callGoHomes",e),this.dispatchEvent("onClose")},addBuildRequestedIcon:function(){},rebuildRequestButton:function(){},requestRole:function(e){},unMask:function(){this.container.getElement(".mask")&&p.unmask(this.container.getElement(".mask").getParent())},mask:function(){this.container.getElement(".mask")||p.mask(this.container.getElement("#container-scroll"))}})}),define("DS/i3DXCompass/Collection/CockpitsByRolesCollection",["UWA/Core","DS/i3DXCompass/Collection/BusinessExperienceCollection","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/Collection/PlatformCollection"],function(e,t,n,o,i,s){"use strict";return t.extend({tempData:{},pathURL:"/api/contexts",comparator:"title",dashboardPlatformList:"",setup:function(e,t){return t.master&&(this.master=t.master),this._parent(e,t)},fetch:function(e){return e&&e.urlParams&&(this._lastRoles=e.urlParams.roles),this._parent.apply(this,arguments)},parse:function(e){var t=this,n=[];return e&&Object.keys(e).length>0&&Object.keys(e).forEach(function(o){e[o].forEach(function(e){"public"===e.access&&(e.platformId=o,e.settingNeeded=!1,e.granted=!0,e.brand="CUSTOM",e.thumbnail=t._getIconLink(e),e.defaultthumbnail="fonticon fonticon-chart-map-tree",e.title=e.name,e.tooltip=e.name,e.platforms=t.getTenantListForRoles(e.roles||[]),n.push(e))})}),n},onAdd:function(e){return this.master.add(e),this._parent(e)},getTenantListForRoles:function(e){var t=[],n=this;return e.forEach(function(e){n.grantedRolesCollection.forEach(function(n){n.get("process")===e&&n.get("grantedPlatforms").forEach(function(e){-1===t.indexOf(e)&&t.push(e)})})}),this.dashboardPlatformList.filter(function(e){return t.indexOf(e.get("platformId"))>-1})},updateTenantList:function(e){var t,n=this,a=i.getTenantList();n.urlList=[],a&&a.length&&(n.dashboardPlatformList=new s(a,{serviceFilter:"3DDashboard"})),a[0]&&a[0]["3DDashboard"]?((t=a.find(function(e){return e.platformId===o.selectedPlatform}))&&(n.urlList=[{id:t.platformId,services:[{id:"3DDashboard",url:t["3DDashboard"]}]}]),e&&"function"==typeof e&&e()):o._get3DDashboardUrl({platform:this.getTenantIds(a)},function(i){i&&(n.dashboardPlatformList=new s(i,{serviceFilter:"3DDashboard"})),i&&i[0]&&((t=i.find(function(e){return e.id===o.selectedPlatform}))&&(n.urlList=[t]),e&&"function"==typeof e&&e())})},formatRolesToString:function(e,t){var n=[];return e.forEach&&(this.grantedRolesCollection=e,e.forEach(function(e){(t||!t&&-1===e.get("id").indexOf("RAP-"))&&n.push(e.get("process"))})),n.join(",")},getFirstURL:function(){return this.urlList&&this.urlList.length>0?this.urlList[0].services[0].url:""},getTenantIds:function(e){var t=[];return e.forEach(function(e){e.platformId&&t.push(e.platformId)}),t},_getIconLink:function(e){return e.thumbnail&&e.thumbnail.fingerprint?this.getFirstURL()+"/api/contexts/cockpit/"+e.modelId+"/thumbnail?checksum="+e.thumbnail.fingerprint:""}})}),define("DS/i3DXCompass/View/ProcessesView",["UWA/Core","UWA/Utils","UWA/Class/View","DS/UIKIT/Tooltip","DS/i3DXCompass/Tools","DS/i3DXCompass/Data","DS/i3DXCompass/X3DContent","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/RoleView","DS/i3DXCompass/View/BusinessExperienceContentOverlayView","DS/i3DXCompass/View/BusinessMethodsListView","DS/i3DXCompass/View/CockpitsListView","DS/i3DXCompass/UsageTracker"],function(e,t,n,o,i,s,a,l,r,c,d,p,u){"use strict";var m=[];n.extend({tagName:"div",className:"item-view-process",domEvents:{click:"click"},click:function(){this.dispatchEvent("onItemClick",this.model)},render:function(){return this.container.setContent(this._getTemplate()),this},_getTemplate:function(){return[{class:"icon-wrapper",html:{class:"responsive",tag:"img",src:this.model.get("icon")?this.model.get("icon").startsWith("http")?this.model.get("icon"):l.getWebappsAssetUrl("i3DXCompass",this.model.get("icon")):l.getWebappsAssetUrl("i3DXCompass",e.String.format("v3.1/images/role/{0}_Role.png","PLATFORM"))}},{class:"item-view-content-wrapper",html:{class:"item-view-content",html:{class:"title",text:this.model.get("title")}}}]}});return n.extend({tagName:"div",className:"items-view-process",setup:function(e){return e.additionalClassName&&this.container.addClassName(e.additionalClassName),this.renderOnce=i.debounce(this.render,500,!0).bind(this),this.collection&&(this.collection.addEvent("onAdd",this.renderOnce.bind(this)),this.collection.addEvent("onRemove",this.renderOnce.bind(this)),this.collection.addEvent("onChange",this.renderOnce.bind(this))),this.events=e.events,this},render:function(){var e=this;return this.collection&&this.collection.map&&this.container.setContent(this.collection.map(function(t){return new r({model:t,clickable:!0,events:{onItemClick:function(t){e.clickRole(t)}}}).render()})),this},clickRole:function(e){e.get("id");var t=new c({title:e.get("title"),closable:this._isNotAddin(),model:e,info:!1,buy:!1,request:!1,additionalClassName:"portfolio portfolio-depth6 portfolio-background-white editMode",parentIcon:"ME",events:this.events});this._injectOverlayOnTop(t),t.show(),u.clickBusinessRole({businessRoleId:e.get("id"),businessRoleName:e.get("title")})},_isNotAddin:function(){return!(e.is(s.addinMode)&&e.is(s.addinMode.value))},_injectOverlayOnTop:function(e){var t=this.container.getParent().getElements(".content-overlay");e.inject(t[t.length-1]||this.container.getParent(".my-apps-panel"),"after"),m.push(e),e.show()}})}),define("DS/i3DXCompass/Collection/UserPreferencesCollection",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Data","DS/i3DXCompass/Model/GroupModel"],function(e,t,n,o){"use strict";return t.extend({isFetched:!1,groupCollection:[],model:o,setup:function(e){return this.url=n.myAppsBaseUrl.replace("/resources/AppsMngt","")+"enovia/resources/compass/api/v1/preference",this._parent(e)},fetch:function(e){var t=this.request;return t&&t.cancel(),this.request=this._parent(e),this.request},sync:function(e,t,o){var i,s=this;switch(e){case"read":i=n.request({url:this.url,onComplete:function(e){s.isFetched=!0,e&&"object"==typeof e?o&&o.onComplete&&o.onComplete(e):o&&o.onFailure&&o.onFailure(e)},onFailure:function(e){o&&o.onFailure&&o.onFailure(e)}})}return i},onAdd:function(e){},removeApp:function(e){this.get(e)&&this.remove(e)},getNameNewGroup:function(){var e=1,t=[];for(this.forEach(function(e){t.push(e.get("title"))});t.indexOf("New Folder "+e)>-1;)e++;return"New Folder "+e},reorderPreference:function(e){e&&(e.forEach(function(e,t){this.get(e.id)?this.get(e.id).set("order",e.order):this.add(new o(e))}),this.save())},addNewGroup:function(e){e.id&&(e.order||(e.order=this.length+1),this.add(new o(e)),this.save())},save:function(){var e=JSON.stringify(this);n.request({url:this.url,method:"PUT",contentType:"application/x-www-form-urlencoded",postData:{value:e},onComplete:function(e){},onFailure:function(e){}})}})}),define("DS/i3DXCompass/Controls/PreferencesSetting",["UWA/Core","DS/i3DXCompass/Tools","DS/UIKIT/DropdownMenu","DS/i3DXCompass/Feature","DS/UIKIT/Input/Toggle","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/Data","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s,a,l){"use strict";var r=e.i18n;return n.extend({init:function(e){var t={multiSelect:!0,items:this.getItems(e.hasRole),target:e.target,customClass:e.className,events:e.events,shortcutEnabled:e.shortcutEnabled};this._parent(t),this.trigger=e.trigger},buildSkeleton:function(){this._parent()},buildAppDisplay:function(){return{selectable:!1,id:"Apps-display",attributes:{"parent-data-type":"view-style"},fonticon:!o.getPreferences().viewStyle||o.getPreferences()&&"standard"===o.getPreferences().viewStyle?"view-big-tile":"view-small-thb",text:r("Apps layout"),items:[{selectable:!0,id:"view-style-small",selected:o.getPreferences()&&"small"===o.getPreferences().viewStyle,"data-value":"small","data-type":"view-style",fonticon:"view-small-thb",text:r("Compact Apps")},{selectable:!0,selected:!o.getPreferences().viewStyle||o.getPreferences()&&"standard"===o.getPreferences().viewStyle,id:"view-style-standard","data-value":"standard","data-type":"view-style",fonticon:"view-big-tile",text:r("Large Apps")}]}},buildPlatformFilter:function(){return{selectable:!1,id:"role-display",attributes:{"parent-data-type":"select-platform"},className:this.isDisplayClass(),fonticon:"cloud-alt fonticon-2x",text:r("Roles & Apps display"),items:[{selectable:!0,className:this.isDisplayClass("currentPlatform"),"data-type":"select-platform",id:"current-platform","data-value":"currentPlatform",selected:o.getPreferences()&&"currentPlatform"===o.getPreferences().forceSelectTenant,text:r("Current Platform")},{selectable:!0,selected:o.getPreferences()&&"allPlatform"===o.getPreferences().forceSelectTenant,id:"all-platform","data-value":"allPlatform","data-type":"select-platform",text:r("All Platforms")}]}},isDisplayClass:function(e){return"currentPlatform"===e?a.selectedPlatform&&t.getIsMultiTenant()?"":"hidden":!t.getIsMultiTenant()||l.isNativeApplicationEnvironment()?"hidden":""},getItems:function(e){var t=[];return e&&t.push(this.buildAppDisplay()),t.push(this.buildPlatformFilter()),t},onClick:function(e,t,n){if(!0!==n){var i=o.getPreferences()?o.getPreferences():{};"select-platform"===t["data-type"]?(("allPlatform"!==t["data-value"]&&"forceSelectTenant"!==t["data-value"]||!o.getPreferences()||"currentPlatform"!==o.getPreferences().forceSelectTenant)&&("currentPlatform"!==t["data-value"]||!o.getPreferences()||"allPlatform"!==o.getPreferences().forceSelectTenant&&"forceSelectTenant"!==o.getPreferences().forceSelectTenant)||this.dispatchEvent("onUpdateTenant"),i.forceSelectTenant=t["data-value"],o.setPreferences(i),this.dispatchEvent("save",["forceSelectTenant",t["data-value"]]),this.dispatchEvent("fetchAppList")):"view-style"===t["data-type"]&&this.dispatchEvent("save",["viewStyle",t["data-value"]]),this.updateParentContent(t),this.hide()}},updateParentContent:function(e){var t=e["data-type"],n=e.fonticon,o=this.getContent().getElement('[parent-data-type="'+t+'"]');"view-style"===t&&this.updateFonticon(o,n)},updateFonticon:function(e,t){!e.querySelector(".fonticon-"+t)&&e.querySelector(".fonticon")&&(e.querySelector(".fonticon").className=e.querySelector(".fonticon").className.replace(/fonticon-[a-zA-Z-]*/g,"fonticon-"+t))},updateDropDownPref:function(){var e=this.getContent().getElement("#role-display"),t=this.getContent().getElement("#role-display-header"),n=this.elements["menu-role-display"].getElement("#current-platform");n&&n.removeClassName("hidden").addClassName(this.isDisplayClass("currentPlatform")),e&&e.removeClassName("hidden").addClassName(this.isDisplayClass()),t&&t.removeClassName("hidden").addClassName(this.isDisplayClass())}})}),define("DS/i3DXCompass/Collection/SuggestionList",["UWA/Core","UWA/Class/Collection","DS/i3DXCompass/Data","DS/i3DXCompass/Model/Suggestion"],function(e,t,n,o){"use strict";var i={model:o,setup:function(){this.added=[]},sync:function(e,t,o){var i;switch(e){case"read":i=n.request({url:n.getSuggestionsUrl,onComplete:function(e){e&&0===e.code?o&&o.onComplete&&o.onComplete(e):o&&o.onFailure&&o.onFailure(e)},onFailure:function(e){o&&o.onFailure&&o.onFailure(e)}})}return i},parse:function(e){return e.suggestions},set:function(){this.added.length=0,this._parent.apply(this,arguments),this.added.length>0&&this.dispatchEvent("onMultipleAdd",[this.added])},onAdd:function(e){this.added.push(e)}};return t.extend(i)}),define("DS/i3DXCompass/View/BusinessExperienceMainView",["UWA/Core","DS/UIKIT/Accordion","DS/UIKIT/Scroller","UWA/Class/View","DS/i3DXCompass/View/ProcessesView","DS/i3DXCompass/Collection/BusinessExperienceRolesCollection","DS/i3DXCompass/Collection/BusinessExperienceMethodsCollection","DS/i3DXCompass/Collection/BusinessExperienceCockpitsCollection","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/View/BusinessMethodsListView","DS/i3DXCompass/View/CockpitsListView","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Mask","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s,a,l,r,c,d,p,u,m,h){"use strict";var f=[],g=e.i18n;return o.extend({tagName:"div",className:"scroll-container",isRegistryFetched:!1,urlList:[],collectionReady:{},setup:function(t){var n=this,o=function(e){return{urlList:n.urlList,updateStep:n.updateCollectionStep.bind(n),onFailure:n.updateView.bind(n),onComplete:n.updateView.bind(n),type:e}};return this.businessExperienceRolesCollection=new s(null,o("businessExperienceRoles")),this.businessExperienceMethodsCollection=new a(null,o("businessExperienceMethods")),this.businessExperienceCockpitsCollection=new l(null,o("businessExperienceCockpits")),this.events=t.events,this.wrapper=e.createElement("div",{styles:{height:"100%"}}),this.buildSubView(),n.getBEUrls(),this._parent.apply(this,arguments)},updateView:function(){return"Ready"===this.isCollectionReady()?(this.unMask(),this.wrapper.setContent(this.buildMeTabContent()),this.buildAndGetScrollableView(this.wrapper)):"Empty"===this.isCollectionReady()?(this.unMask(),this.wrapper.setContent(this.buildEmptyView()),this.buildAndGetScrollableView(this.wrapper)):void 0},render:function(){return"Ready"===this.isCollectionReady()?this.updateView():"Empty"===this.isCollectionReady()?this.updateView():(this.mask(),this)},buildSubView:function(){this.elements.ProcessesView=e.createElement("div",{styles:{height:"100%"},html:new i({events:this.events,collection:this.businessExperienceRolesCollection,additionalClassName:"items-roles-view compass-scroll-accordion-section my-roles-section"}).render()}),this.elements.BusinessMethodsListView=e.createElement("div",{styles:{height:"100%"},html:new d({collection:this.businessExperienceMethodsCollection,additionalClassName:"items-roles-view compass-scroll-accordion-section my-apps-section"}).render()}),this.elements.CockpitsListView=e.createElement("div",{styles:{height:"100%"},html:new p({collection:this.businessExperienceCockpitsCollection,additionalClassName:"items-roles-view compass-scroll-accordion-section my-apps-section"}).render()})},buildMeTabContent:function(){var e,n=[];return this.collectionReady.businessExperienceRoles&&"Ready"===this.collectionReady.businessExperienceRoles&&n.push({title:g("myroles"),name:"roles",className:"compass-scroll-accordion-section my-roles-section",content:this.elements.ProcessesView,selected:!0}),this.collectionReady.businessExperienceMethods&&"Ready"===this.collectionReady.businessExperienceMethods&&n.push({title:g("My Business Methods"),name:"apps",content:this.elements.BusinessMethodsListView,selected:!0,className:"compass-scroll-accordion-section my-apps-section"}),this.collectionReady.businessExperienceCockpits&&"Ready"===this.collectionReady.businessExperienceCockpits&&n.push({title:g("My Cockpits"),name:"cockpits",content:this.elements.CockpitsListView,selected:!0,className:"compass-scroll-accordion-section my-apps-section"}),e=new t({exclusive:!1,className:"divided",animated:!0,items:n}),this.accordion=e,e},buildEmptyView:function(){var t=e.createElement("div",{class:"portfolio-empty-view",styles:{"align-items":"normal"},html:{class:"portfolio-empty-view-content-wrapper",html:[{tag:"div",class:"portfolio-empty-view-content-title",html:[{text:g("You don't have any Roles related to Business Experiences")}]},{tag:"a",class:"portfolio-item",target:"_blank",styles:{color:"#ff000000"},html:[{tag:"div",class:"portfolio-item-inner",styles:{height:"120px","margin-top":"20px","background-position":"center center",display:"flex","background-repeat":"no-repeat",position:"relative","background-image":"url("+u.getWebappsAssetUrl("i3DXCompass","images/Discover_Business_Experiences.png")+")","justify-content":"center","align-items":"center"},html:[this.options.service&&this.options.service.get?{tag:"button",text:g("Discover Business Experiences"),class:"btn btn-root",styles:{width:"60%",height:"40%",color:"#fff","border-color":"#368ec4","background-color":"#42a2da"}}:null]}]}]}});return this.options.service&&this.options.service.get&&this.options.service.get("url")&&t.getElement("a").setAttribute("href",this.options.service.get("url")),t},getBEUrls:function(e){var t=this;f=[],this.resetCollectionReady(),c.getTenantList().forEach(function(e,n){(e.platformId&&!t.isCurrentPlatform()||e.platformId===r.selectedPlatform&&!t.isCurrentPlatform())&&f.push(e.platformId)}),r.getBusinessExperienceUrl({platform:f},function(e){t.isRegistryFetched=!0,e&&Object.keys(e).length>0?(t.urlList=e,t.businessExperienceRolesCollection.fetch({urlList:t.urlList}),t.businessExperienceMethodsCollection.fetch({urlList:t.urlList}),t.businessExperienceCockpitsCollection.fetch({urlList:t.urlList})):(t.collectionReady={businessExperienceRoles:"Empty",businessExperienceMethods:"Empty",businessExperienceCockpits:"Empty"},setTimeout(function(){t.updateView()},10))})},updateCollectionStep:function(e,t){var n=this;this.collectionReady[e]=t,!1!==this.isCollectionReady()&&setTimeout(function(){n.updateView()},10)},resetCollectionReady:function(){this.collectionReady={businessExperienceRoles:"",businessExperienceMethods:"",businessExperienceCockpits:""}},isCollectionReady:function(){var e=this,t="Pending";return Object.keys(this.collectionReady).forEach(function(n,o){e.collectionReady[n]?"Ready"===e.collectionReady[n]&&""!==t?t=e.collectionReady[n]:"Empty"===e.collectionReady[n]&&""!==t&&"Ready"!==t&&(t=e.collectionReady[n]):t=e.collectionReady[n]}),""===t&&(t=!1),t},unMask:function(){this.container.getElement(".mask")&&m.unmask(this.container.getElement(".mask").getParent())},mask:function(){this.container.getElement(".mask")||m.mask(this.container)},buildAndGetScrollableView:function(t){e.createElement("div",{class:"scroll-container"});return new n({element:t}).inject(this.container),this.container},isCurrentPlatform:function(){return h.getPreferences()&&"currentPlatform"===h.getPreferences().forceSelectTenant}})}),define("DS/i3DXCompass/View/CompassWrapperView31",["UWA/Core","UWA/Utils/Client","UWA/Class/View","UWA/Controls/Accordion","DS/UIKIT/Scroller","UWA/Class/Collection","DS/i3DXCompass/Tools","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/InstallManager","DS/i3DXCompass/TopBarManager","DS/i3DXCompass/Collection/AppList","DS/i3DXCompass/View/AppListView","DS/i3DXCompass/View/SuggestionListView","DS/i3DXCompass/Controls/Message","DS/i3DXCompass/Controls/Settings","DS/i3DXCompass/Controls/ScrollAccordion","DS/i3DXCompass/Controls/Search","DS/i3DXCompass/Controls/IframeLoader","DS/UIKIT/Modal","DS/UIKIT/Spinner","DS/UIKIT/Input/Button","DS/i3DXCompass/CacheManager","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/Types","UWA/Utils/Cookie","DS/i3DXCompass/Controls/Compass","DS/i3DXCompass/UsageTracker","DS/UIKIT/Tooltip","DS/UIKIT/Toggler","DS/UIKIT/Input/Toggle","DS/i3DXCompass/View/RoleView","DS/i3DXCompass/View/ContentOverlayView","DS/i3DXCompass/MarketingData","UWA/Class/Model","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/View/CheckOutView","DS/i3DXCompass/View/BasketView","DS/i3DXCompass/View/PortfolioDepth3View","DS/i3DXCompass/View/PortfolioDepth4View","DS/i3DXCompass/View/PortfolioDepth2View","DS/i3DXCompass/View/PortfolioDepth1View","DS/i3DXCompass/Collection/PortfolioCollection","DS/i3DXCompass/View/PortfolioDepth5View","DS/i3DXCompass/View/PortfolioDepth6View","DS/i3DXCompass/View/AppView","DS/i3DXCompass/Model/GroupModel","DS/UIKIT/Accordion","DS/UIKIT/SuperModal","DS/i3DXCompass/Feature","DS/UIKIT/DropdownMenu","DS/UIKIT/Mask","DS/i3DXCompass/View/ServicesView","DS/i3DXCompass/Collection/PortfolioRoleCollection","DS/i3DXCompass/View/PortfolioServicesView","DS/i3DXCompass/View/PortfolioAsBusinessView","DS/i3DXCompass/Controls/PreferencesSetting","DS/i3DXCompass/Controls/FamilyAppSettings","DS/i3DXCompass/View/BusinessExperienceMainView","DS/i3DXCompass/View/CockpitsListView","DS/i3DXCompass/View/BusinessMethodsListView","DS/i3DXCompass/Collection/CockpitsByRolesCollection","DS/i3DXCompass/Collection/BusinessExperienceGenericCollection","DS/i3DXCompass/View/BusinessExperienceContentOverlayView"],function(e,t,n,o,i,s,a,l,r,c,d,p,u,m,h,f,g,v,C,b,y,S,w,D,E,A,I,N,k,T,P,_,O,x,U,R,M,L,F,B,X,W,V,q,j,Q,H,z,G,K,J,Z,Y,$,ee,te,ne,oe,ie,se,ae,le,re,ce,de){"use strict";var pe=e.i18n,ue="ME",me="0-0",he="",fe=0,ge=0,ve=[],Ce={},be=!0,ye=!0,Se=!1,we=a.debounce(function(e){e&&(J.compassPanelRestoreDefaultSize(),setTimeout(function(){document.body.getElement(".topbar-compass")?document.body.getElement(".topbar-compass.compass-v3").show():document.body.getElement("#compass-container")&&(document.body.getElement("#compass-container.compass-v3").show(),document.querySelector(".compass-v3.top-bar-overlay.add-top-bar")&&(document.querySelector(".compass-v3.top-bar-overlay.add-top-bar").show(),E.publish("compassEvent",{topBarOverlay:"blue",size:"50px"}))),document.querySelector(".compass-standalone-login")&&document.querySelector(".compass-standalone-login").show(),E.publish("compassLogo",{hide:!1}),event||(be=!0)},100)),Ne.refreshBascketFooter()},100,!1),De=a.debounce(function(e){document.body.getElement(".topbar-compass")?document.body.getElement(".topbar-compass.compass-v3").hide():document.body.getElement("#compass-container")&&(document.body.getElement("#compass-container.compass-v3").hide(),document.querySelector(".compass-v3.top-bar-overlay.add-top-bar")&&(document.querySelector(".compass-v3.top-bar-overlay.add-top-bar").hide(),E.publish("compassEvent",{topBarOverlay:"white",size:"47px"}))),document.querySelector(".compass-standalone-login")&&document.querySelector(".compass-standalone-login").hide(),E.publish("compassLogo",{hide:!0}),be=!1,Ie()},100,!1),Ee=function(e,t){we(e),t?(t.pop(),J.supportPushState()&&J.needPushState()&&a.manageSeoTags(t[t.length-1])):this._resetWorldNavigation(),Ne.refreshBascketFooter()},Ae=function(e){e&&e.stopPropagation(),ve.length>0&&(ve.reverse().forEach(function(e,t){setTimeout(function(){e.back()},30*t)}),ve=[],Ne.refreshBascketFooter(),k.goHome({pageTitle:ue,parentPage:ue}))},Ie=function(){var e=document.body.getElements(".compass-v3.content-overlay video");e.length>1&&e.pop(),e.forEach(function(e){e.pause()})},Ne={tagName:"div",className:"windows10"===a.getOs()?"wind10 my-apps-panel compass-v3 ":"my-apps-panel compass-v3",domEvents:{"click .compass-close":"close","click .compass-nav-close-icon":"close","click .exp-item":"clickApp","click .suggestion-item":"clickSuggestion","click .settings-img":"clickSettings","click .expand-img":"clickExpand","click .all-roles-btn":"toggleAllRoles","click .expanded-role-close, .expanded-role-title":"hideRoleDetail","click .expanded-role-info":"clickRoleInfo","click .app-item":"clickApp"},canShowOptionCotent:!1,currentQuadrant:"",itemsPerLine:0,compassMainNav:3,compassSecondNav:0,setup:function(t){a.isSupportQuickLink()&&(this.container.className+=" support-quick-link"),this.options=t,l.addEvents({onShowMessage:this.showMessage.bind(this),onHideMessage:this.hideMessage.bind(this)}),e.is(D._getUser())||this.container.addClassName("compass-public"),this.roleV34Collection=new ee,E.subscribe("compassCloseV32TopBar",function(e){Ae(),we(!0)}),this.collections={grantedRoles:new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!0}]}),visibleRoles:new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!0},{key:"visible",value:!0}]})},this.preferencesCollection=t.preferencesCollection,this.collections.cockpitsByRolesCollection=new ce(null,{filterType:"cockpitBusiness",master:this.collection}),this.collections.businessMethodCollection=new ce(null,{filterType:"businessMethod",master:this.collection}),this.views={},this.sugCollection=t.sugCollection,this.container.addEvent("callGoHomes",Ae),this._renderContentOnToggleOnce=a.debounce(this._renderContentOnToggle,100,!1).bind(this),this._savePreferencesOnce=a.debounce(this._savePreferences,1e3,!1).bind(this)},updateEnableWidgetDrag:function(t,n,o,i){if(!n&&i&&(n=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0}]).find(function(e){return e.get("id")===i})),n&&n.isFamily()&&(n=n.getChildrenForFamilyApp.Widget||n),o&&n.get("platforms").length>1){var s=e.clone(n.toJSON());s.platformId=""}a.enableWidgetDrag(t,s||n.toJSON())},createGroup:function(e,t){var n,o,i,s=this;i=s.options.preferencesCollection.getNameNewGroup(),"Favorite"===e.id?o=s.collections.favorite.map(function(e){return e.get("id")}):e.type&&"Group"!==e.type||!s.options.preferencesCollection.find(function(t){return t.get("id")===e.id&&"group"===t.get("type")})?e.type&&"Role"!==e.type||!s.collections.visibleRoles.find(function(t){return t.get("id")===e.id})?e.type&&"App"!==e.type||(o=[e.id]):o=s.collections.visibleRoles.find(function(t){return t.get("id")===e.id}).get("appList"):o=s.options.preferencesCollection.find(function(t){return t.get("id")===e.id&&"group"===t.get("type")}).get("appList"),"Favorite"===t?o=o.concat(s.collections.favorite.map(function(e){return e.get("id")}).get("appList")):t.type&&"Group"!==t.type||!s.options.preferencesCollection.find(function(e){return e.get("id")===t.id&&"group"===e.get("type")})?t.type&&"Role"!==t.type||!s.collections.visibleRoles.find(function(e){return e.get("id")===t.id})?t.type&&"App"!==t.type||o.push(t.id):o=o.concat(s.collections.visibleRoles.find(function(e){return e.get("id")===t.id}).get("appList")):o=o.concat(s.options.preferencesCollection.find(function(e){return e.get("id")===t.id&&"group"===e.get("type")}).get("appList")),n=new z({id:"GR_"+(new Date).getTime(),title:i,type:"group",appList:o,order:s.options.preferencesCollection.length+1}),this.options.preferencesCollection.add(n),this.options.preferencesCollection.save(),this.clickRole(n,!1,!0),Ce["0-0"]&&!Ce["0-0"].getElement('[data-id="'+n.get("id")+'"]')&&new O({model:n,additionalClassName:"drag-app",clickable:!0,events:{onItemClick:function(e,t){s.clickRole(e,!1,!0)}}}).render().inject(Ce["0-0"].getElement(".items-roles-view"))},addAppMain:function(e){var t=this;if(Ce["0-0"]&&!Ce["0-0"].getElement('[data-id="'+e+'"]')){var n=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0}]).find(function(t){return t.get("id")===e});new H({model:n,clickable:!0,appsCollection:this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e}]),additionalClassName:"app-item drag-app",events:{onItemClick:function(e,n){t.clickApp(e,n)},onClickSettings:t.clickSettings.bind(t)}}).render().inject(Ce["0-0"].getElement(".items-roles-view"))}},render:function(){var t=this.container;return(this.maskElmt=e.createElement("div",{class:"compass-loading",html:new S({visible:!0,className:"compass-spinner"})})).inject(t),t.hide(),this},renderAppsView:function(t){var n,o,i,l=this,r=this.elements,c=this.container,d=new f,p=this.collections,h=this.views;t?this.sectionData=t:t=this.sectionData,p.favorite=new u(null,{master:this.collection,comparator:"favoriteOrder",filters:[{key:"isFavorite",value:!0},{key:"visibleQuadrant",value:!0}]}),p.platformRoles=new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!0},{key:"granted",value:!1},{key:"visible",value:!0}]}),p.expandedRole=new u(null,{master:this.collection,comparator:"title",filters:[{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0}]}),p.apps={},p.lma={},i=p.grantedRoles.getSelectedRoleApps(),h.favorite=new m({collection:p.favorite,customFilters:{appIds:i},customClass:"favorite",favorite:!0,draggable:!0}),h.visibleRoles=new m({collection:p.visibleRoles,customClass:"roles",draggable:!0}),h.platformRoles=new m({collection:p.platformRoles,customClass:"roles not-available-roles",draggable:!1}),h.expandedRole=new m({collection:p.expandedRole,customFilters:{appIds:[]},draggable:!0}),h.apps={},h.lma={},this.options.sectionData=t,r.error&&(r.error.destroy(),delete r.error),this.forEachQuadrant(function(e){p.apps[e]=new u(null,{master:l.collection,comparator:"title",filters:[{key:"quadrant",value:e},{key:"lma",value:!1}]}),h.apps[e]=new m({collection:p.apps[e],customFilters:{appIds:i},customClass:e,draggable:!0}),p.lma[e]=new u(null,{master:l.collection,comparator:"title",filters:[{key:"quadrant",value:e},{key:"lma",value:!0}]}),h.lma[e]=new m({collection:p.lma[e],customClass:a.isCompassV2()?"favorite":e})}),t.eservices&&t.eservices.data&&t.eservices.data.length>0&&(p.eservices=new s(t.eservices.data),h.eservices=new $({collection:p.eservices})),this._needToShowMyRoles()||this.container.addClassName("compass-public"),c.addEvent("resize",function(e){l.resizeAccordionData(e)}),a.isCompassV3()||(n=new C({events:{onSearch:function(e){l.searchInViews(e)}}}),!e.is(D._getUser())&&n&&n.container&&n.container.setStyle("visibility","hidden"),a.isCompassV32()&&n&&n.container&&n.container.hide(),n.inject(c),r.search=n),a.isCompassV32()||a.isCompassV34()||(o=this.buildAccordion());var g=[this.buildCompassNavMain(),this.buildSearch(),this.buildCompassNav(),this.builCompassContent()];e.createElement("compass-layout",{html:g}).inject(c),J.isBuyEnabled()&&this.buildCompassFooter(),d.inject(c),this.appsAccordion=o,this.message=d,this.resizeAccordionData(),p.grantedRoles.addEvent("onChange:active",this.changeRoles.bind(this)),p.grantedRoles.addEvent("onChange:appList",this.changeRoles.bind(this)),p.visibleRoles.addEvent("onChange:appList",this.changeRolesVisible.bind(this)),p.grantedRoles.addEvent("onRemove",this.changeRoles.bind(this)),p.visibleRoles.addEvent("onRemove",this.changeRolesVisible.bind(this)),p.grantedRoles.addEvent("onMultipleAdd",this.changeRoles.bind(this)),p.visibleRoles.addEvent("onMultipleAdd",this.changeRolesVisible.bind(this)),p.cockpitsByRolesCollection.addEvent("onChange:appList",this.changeRolesVisible.bind(this)),p.cockpitsByRolesCollection.addEvent("onRemove",this.changeRolesVisible.bind(this)),p.cockpitsByRolesCollection.addEvent("onMultipleAdd",this.changeRolesVisible.bind(this)),p.businessMethodCollection.addEvent("onChange:appList",this.changeRolesVisible.bind(this)),p.businessMethodCollection.addEvent("onRemove",this.changeRolesVisible.bind(this)),p.businessMethodCollection.addEvent("onMultipleAdd",this.changeRolesVisible.bind(this)),"dsrtv:"===window.location.protocol?l._renderContent():l.roleV34Collection.fetchPromise().then(l._renderContent.bind(l),l._renderContent.bind(l))},_isBusinessExperienceAvailable:function(){return a.isBusinessExperienceAvailable()||this._getInnovateService()},_getInnovateService:function(){return this.services&&this.services.length>0&&this.services.find(function(e){return"X3DINNO_AP"===e.id})},_renderContent:function(){var t=this;J.getBrandFromPacking()||(t.collections.grantedRoles.forEach(function(e){var n=t.roleV34Collection.find(function(t){return t.get("acronym")===e.get("process")&&!t.get("contact")});n&&e.set("brand",n.get("brand"))}),t.collections.platformRoles.forEach(function(e){var n=t.roleV34Collection.find(function(t){return t.get("acronym")===e.get("process")&&!t.get("contact")});n&&e.set("brand",n.get("brand"))}));var n=document.querySelector("compass-nav-main div");new P({container:n,activeClass:"active",ignored:["disabled","not-selectable"],selected:function(){var t=e.is(D._getUser())&&this._needToShowMyRoles()?0:3;return J.supportPushState()&&window.location.pathname.indexOf("compass-world")>-1&&(t=3),t}.call(this),events:{onToggle:function(e,n,o){o&&(fe=n,t._renderContentOnToggleOnce(e,n,o),ye&&(ye=!1))}}});var o=document.querySelector("compass-nav-second div");new P({container:o,activeClass:"active",ignored:["disabled","not-selectable"],selected:!e.is(D._getUser())&&document.body.hasClassName("compass-standalone-v3")?1:0,events:{onToggle:function(e,n,o){o&&(ge=n,t._renderContentOnToggleOnce(e,n,o))}}}),t.roleV34Collection.size()>0&&t.resetCache()},_setWorldNavigation:function(){if(J.supportPushState()&&!ye){var e=window.location.pathname;-1===e.indexOf("compass-world")&&history.pushState("","",(e+"/compass-world").replace(/\/\//g,"/"))}},_resetWorldNavigation:function(){if(J.supportPushState()&&!ye){var e=window.location.pathname;if(e.indexOf("compass-world")>-1){var t=e.split("compass-world")[0];t&&history.pushState("","",t.replace("//","/"))}}},updateCompanyNav:function(e){var t,n,o=this.container.getElement("compass-nav-main");o&&(n=o.querySelector(".fonticon-building-office")?o.querySelector(".fonticon-building-office").getParent("a"):"",t=o.querySelector(".fonticon-user")?o.querySelector(".fonticon-user"):o.querySelector(".fonticon-globe"),e&&n&&n.hasClassName("hidden")?n.removeClassName("disabled").removeClassName("hidden"):!1===e&&n&&!n.hasClassName("hidden")&&(n.addClassName("disabled hidden"),t&&t.click()))},updateSecondNav:function(){var e=this.container.getElement("compass-nav-second");"2-0"!==me&&"2-1"!==me&&this.services&&this.services.length>0?(e.show(),this.container.removeClassName("compass-second-nav-hidden")):this.services&&0===this.services.length&&(e.hide(),this.container.addClassName("compass-second-nav-hidden"))},_renderContentOnToggle:function(e){var t=this,n=this.container.getElement("compass-nav-second");if(me=fe+"-"+ge,e){var o,i=he!==me;"0-0"===me||"0-1"===me?(n.getElements(".tab-item")[0]&&n.getElements(".tab-item")[0].click(),n.hide(),t.container.hasClassName("compass-second-nav-hidden")||t.container.addClassName("compass-second-nav-hidden")):("3-1"===me||"3-0"===me)&&n&&n.isHidden()?(n.show(),t.container.removeClassName("compass-second-nav-hidden")):"2-0"!==me&&"2-1"!==me||!n||n.isHidden()||(n.hide(),t.container.addClassName("compass-second-nav-hidden")),Ce[me]||("0-0"===me?o=t.buildMeTabContent():"1-0"===me?o=t.buildWeTabContent():"2-0"===me||"2-1"===me?o=t.buildCompanyTabContent():"3-0"===me?o=t.buildWorldTabContent2():"3-1"===me?o=t.showAsBusiness():t._isBusinessExperienceAvailable()&&(o=new se({service:t._getInnovateService(),events:{callGoHomes:function(e){Ae(e)},onClose:function(){t.dispatchEvent("onClose")},onBack:function(){we(!0)},onShow:function(){De(!0)}}}).render()),Ce[me]=o),this.services=new s(t.options.sectionData&&t.options.sectionData.services&&t.options.sectionData.services.data||[]),0===me.indexOf("0-")?(ue="ME",t._resetWorldNavigation()):0===me.indexOf("1-")?(ue="WE",t._resetWorldNavigation()):0===me.indexOf("2-")?(ue="COMPANY",t.container.addClassName("compass-second-nav-hidden"),t._resetWorldNavigation()):0===me.indexOf("3-")?ue="WORLD":0===me.indexOf("4-")&&(ue="WORLD"),!0!==Se||"WORLD"!==ue||t.container.getParent().hasClassName("compass-footer-visible")?!1===Se&&"WORLD"!==ue&&t.container.getParent().hasClassName("compass-footer-visible")&&t.container.getParent().removeClassName("compass-footer-visible"):t.container.getParent().addClassName("compass-footer-visible");var a={pageTitle:ue,parentPage:ue};"ME"===ue&&(J.getPreferences()&&J.getPreferences().viewStyle?a.title=J.getPreferences().viewStyle:a.title="standard"),i&&(he=me,k.trackPageView(a))}document.querySelector("compass-content").setContent(Ce[me]);var l=this.search&&this.search.value.toLowerCase();this.search&&(""!==l&&this.search.focus(),t.filterViews("",l),this.inputSearchQuery&&this.inputSearchQuery.query&&(this.completeInputSearch(this.inputSearchQuery),this.inputSearchQuery=""))},showBusinessDetail:function(){var t=new s(this.options.sectionData&&this.options.sectionData.services&&this.options.sectionData.services.data||[]);return t.forEach(function(e){var t=e.get("id");U.services[t]&&(e.set("icon",U.services[t].icon),e.set("subTitle",U.services[t].description))}),this.buildAndGetScrollableView(e.createElement("div",{class:"world-tab",html:new te({usageEntity:"trading",hideDescription:!0,collection:t,events:{onItemClick:this._onClickService.bind(this)}}).render()}))},showBusinessDetailV32:function(e,t){var n,o,i=this,s=[e.toJSON()],a=this.services;a.forEach(function(e){var t=e.get("id");U.services[t]&&(e.set("icon",U.services[t].icon),e.set("subTitle",U.services[t].description))}),n=new te({usageEntity:"trading",hideDescription:!0,collection:a,events:{onItemClick:i._onClickService.bind(i)}}),o=new x({title:e.get("title"),closable:i._isNotAddin(),parentIcon:ue,model:e,view:n,buy:!1,events:{callGoHomes:function(e){Ae(e)},onClose:function(){i.dispatchEvent("onClose")},onGoHome:function(e){o.goHome(e)},onBack:Ee.bind(this,t,s),onBackClick:function(){ve.pop()},onShow:function(){De(t)}}}),n.render(),this._injectOverlayOnTop(o)},showAsBusiness:function(){var t=this,n=q.extend({model:R,url:M.getWebappsAssetUrl("i3DXCompass",e.String.format("/v3.1/data/business1.json","business"))}),o=q.extend({model:R,url:a.getPortfolioApiTemplateUrl("world-business")}),i=new n,l=new o,r=new s,c=this.buildAndGetScrollableView(e.createElement("div",{text:"..."})),d=function(){var n=i.toJSON();l.toJSON().forEach(function(e){n.push(e)}),r.add(n);var o=t.buildAndGetScrollableView(e.createElement("div",{class:"world-tab",html:new ne({usageEntity:"business",hideDescription:!0,collection:r,itemsDefaultIconsuffix:"small",hideServices:!(t.services&&t.services.length>0),hideBusinessExperience:!0,events:{onItemClick:function(e,n){"business_experiencesDetail"===e.get("childrenType")||("TRADING"===e.get("childrenType")?t.showBusinessDetailV32(e,!0):"roles"===e.get("childrenType")&&(t.showPlaygoundDetail(e,!0,[e.toJSON()],!0),J.compassPanelFullSize()))}}}).render()}));c.setContent(o),t._navigateToContent(o)};return i.fetchPromise().then(function(){l.fetchPromise().then(d,function(){e.log("ko"),c.setContent(t.showBusinessDetail())})}),c},_onClickService:function(t){var n="Widget"===t.get("type")?t.get("launchUrl"):t.get("url");"undefined"!=typeof compassRichWithCef&&"dsrtv:"!==window.location.protocol?E.publish("launchAppCallback",e.merge(t.toJSON(),{launchInfos:t.get("url")})):("X3DPSLY_AP"!==t.get("id")&&"X3DPRIN_AP"!==t.get("id")||!0!==e.is(r.addinMode)||(n=this._manageAddinUrl(n,t.get("id"))),a.isSameApp(n,window.location)||-1!==n.indexOf("addinmode")?window.open(n,"_self"):window.open(n,"_blank"))},_manageAddinUrl:function(e,t){var n=r.addinMode&&r.addinMode.value;return r.cloud||(e=this._addQueryParams(e,"lockedapp",!0)),n&&(e=this._addQueryParams(e,"addinmode",n)),n&&"catiav5"===n.toLowerCase()&&(e="X3DPRIN_AP"===t?this._addQueryParams(e,"source","catiav5"):this._addQueryParams(e,"embeddedProfileId","CATIAV5")),n&&"xvl"===n.toLowerCase()&&(e="X3DPRIN_AP"===t?this._addQueryParams(e,"source","xvl"):this._addQueryParams(e,"embeddedProfileId","XVL")),e},_addQueryParams:function(e,t,n){var o=-1===e.indexOf("?")?"?":"&";return e+o+t+"="+n},buildCloseIcon:function(){var t;return this.options.closable&&(t=e.createElement("i",{class:"compass-nav-close-icon fonticon fonticon-close compass-close"}),new T({position:"bottom",className:"compass-small-tooltip",target:t,body:pe("Close")})),t},buildSearch:function(){var t=this,n=e.createElement("i",{class:"fonticon fonticon-clear hidden",events:{click:function(){n.addClassName("hidden"),t.search.value="",t.filterViews("",""),t.search.focus()}}});return this.search=e.createElement("input",{tag:"input",class:"form-control compass-search-text",placeholder:pe("Search"),events:{drop:function(e){var o=e.dataTransfer.getData("text");t.filterViews("",o),o.match(/^\s*role(s|)\s*:/g)||!document.querySelector(".my-favorite-apps-section.accordion-item")||document.querySelector(".my-favorite-apps-section.accordion-item").hasClassName("active")||document.querySelector(".my-favorite-apps-section.accordion-item").addClassName("active"),o.match(/^\s*role(s|)\s*:/g)||!document.querySelector(".my-apps-section.accordion-item")||document.querySelector(".my-apps-section.accordion-item").hasClassName("active")||document.querySelector(".my-apps-section.accordion-item").addClassName("active"),document.querySelector(".my-roles-section.accordion-item")&&!document.querySelector(".my-roles-section.accordion-item").hasClassName("active")&&document.querySelector(".my-roles-section.accordion-item").addClassName("active"),o.length>0&&n.removeClassName("hidden")},keyup:function(){var e=this.value.toLowerCase();t.filterViews("",e),e.match(/^\s*role(s|)\s*:/g)||!document.querySelector(".my-favorite-apps-section.accordion-item")||document.querySelector(".my-favorite-apps-section.accordion-item").hasClassName("active")||document.querySelector(".my-favorite-apps-section.accordion-item").addClassName("active"),e.match(/^\s*role(s|)\s*:/g)||!document.querySelector(".my-apps-section.accordion-item")||document.querySelector(".my-apps-section.accordion-item").hasClassName("active")||document.querySelector(".my-apps-section.accordion-item").addClassName("active"),document.querySelector(".my-roles-section.accordion-item")&&!document.querySelector(".my-roles-section.accordion-item").hasClassName("active")&&document.querySelector(".my-roles-section.accordion-item").addClassName("active"),e.length>0&&n.removeClassName("hidden")}}}),new T({position:"left",target:n,className:"compass-small-tooltip",body:pe("Clear Search")}),{tag:"compass-nav-search",html:this.options.buildSearch?{class:"input-group",html:[this.search,n]}:e.createElement("div",{class:"search-content",styles:{height:"32px",display:"none"}})}},buildWeTabContent:function(){var t,n,o,i=this,a=new(s.extend({model:R,url:M.getWebappsAssetUrl("i3DXCompass","v3.1/data/industry.json")}));a.fetch({async:!1,onComplete:function(){t=a.get("01_TransportationMobility");var e=s.extend({model:R,url:M.getWebappsAssetUrl("i3DXCompass","v3.1/data/solution.json"),parse:function(e){return e.filter(function(e){return t.get("solutions").indexOf(e.id)>-1})}});(n=new e).fetch({async:!1,onComplete:function(){var e=s.extend({model:R,url:M.getWebappsAssetUrl("i3DXCompass","v3.1/data/process.json"),parse:function(e){var t=[];return n.forEach(function(n){e.filter(function(e){return e.granted&&n.get("processes").indexOf(e.id)>-1}).forEach(function(e){t.push(e)})}),t}});(o=new e).fetch()}})}});var l=new X({entity:"WE",itemsTitle:pe("Processes"),model:t,collection:o,hideDescription:!0,events:{onItemClick:function(e,t){i.showProcessDetail(e,!0,!1)}}});return this.buildAndGetScrollableView(e.createElement("div",{html:[{class:"marketing-header",html:[{tag:"header",class:"subheader",text:t.get("title")}]},l]}))},buildMeTabContent:function(){var t,n=this,o=new ae({collection:this.collections.cockpitsByRolesCollection,additionalClassName:"items-roles-view",events:{onShowCockpitsSection:function(){t&&t.getItem("cockpits")&&t.getItem("cockpits").elements&&(t.getItem("cockpits").elements.container&&t.getItem("cockpits").elements.container.removeClassName("hidden"),t.getItem("cockpits").elements.content&&t.getItem("cockpits").elements.content.removeClassName("hidden"))}}}),i=new le({collection:this.collections.businessMethodCollection,additionalClassName:"items-roles-view",events:{onShowBusinessMethodsSection:function(){t&&t.getItem("businessMethods")&&t.getItem("businessMethods").elements&&(t.getItem("businessMethods").elements.container&&t.getItem("businessMethods").elements.container.removeClassName("hidden"),t.getItem("businessMethods").elements.content&&t.getItem("businessMethods").elements.content.removeClassName("hidden"))}}}),s=this.options.sectionData;if(e.is(D._getUser())&&"dsrtv:"!==window.location.protocol){n.cockpitsByRolesCollection=new re(null,{master:this.collections.cockpitsByRolesCollection});var l=n.cockpitsByRolesCollection.formatRolesToString(n.collections.visibleRoles.filter(function(e){return d||!d&&-1===e.get("id").indexOf("RAP-")}),a.getShowCustom());n.cockpitsByRolesCollection._lastRoles!==l?this.cockpitsByRolesCollection.updateTenantList(function(){n.cockpitsByRolesCollection.reset(),n.cockpitsByRolesCollection.fetch({url:n.cockpitsByRolesCollection.getFirstURL(),urlParams:{projection:"withoutUserContexts",filter:!0,roles:l}})}):o.render()}var r,c,d=a.getShowCustom(),p=[],u=[],m=n.collections.visibleRoles.filter(function(e){return d||!d&&-1===e.get("id").indexOf("RAP-")}).map(function(e){return new O({model:e,clickable:!0,appsCollection:n.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e.get("appList")}]),additionalClassName:!0!==e.get("isRoleBE")?"drag-app role":"role",disableSeoTags:!0,events:{onItemClick:function(e,t){!0===e.get("isRoleBE")?n.clickRoleBE(e):n.clickRole(e,!1,!0)}}}).render()}),h=e.createElement("div",{styles:{height:"100%"},html:{class:"items-roles-view compass-scroll-accordion-section my-roles-section",html:m}}),f=e.createElement("div",{styles:{height:"100%"},html:{class:"items-roles-view compass-scroll-accordion-section favorite my-favorite-apps-section "+(n.collections.favorite&&0===n.collections.favorite.length?"empty":""),html:(c={},n.collections.favorite.forEach(function(e){var t=e.isChildFamilyApp()&&e.getParentForChildrenFamilyApp()||"";c[t.id]||p.push(new H({model:t||e,clickable:!0,additionalAttribute:{"data-favorite-order":e.get("favoriteOrder")},additionalClassName:"app-item drag-app",additionalClassNameImage:(t||e).get("brand")?"is-"+(t||e).get("brand").replace(" ","-"):"",events:{onItemClick:function(e,t){n.clickApp(e,t)},onClickSettings:n.clickSettings.bind(n)}}).render()),t&&!c[t.id]&&(c[t.id]=e)}),p.push(e.createElement("li",{class:"clearfix"})),p)}}),g=e.createElement("div",{styles:{height:"100%"},html:{class:"items-roles-view compass-scroll-accordion-section my-apps-section",html:(n.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0}]).forEach(function(e){e.isChildFamilyApp()||u.push(new H({model:e,clickable:!0,additionalClassName:"app-item drag-app",additionalClassNameImage:e.get("brand")?"is-"+e.get("brand").replace(" ","-"):"",events:{onItemClick:function(e,t){n.clickApp(e,t)},onClickSettings:n.clickSettings.bind(n)}}).render())}),u)}}),v=e.createElement("div",{styles:{height:"100%"},html:o}),C=e.createElement("div",{styles:{height:"100%"},html:i});r=e.createElement("div",{class:"delete-favorite hide",attributes:{title:pe("clickRemoveFavorite")},styles:{float:"right"},html:{tag:"span",class:"fonticon fonticon-trash",styles:{display:n.collections.favorite.length>0?"":"none"}}});var b=[{title:pe("myroles"),name:"roles",className:"compass-scroll-accordion-section my-roles-section",content:h,selected:!s.roles.closed}];b.push({title:pe("My Cockpits"),name:"cockpits",className:"compass-scroll-accordion-section my-apps-section my-cockpits-section"+this.collections.cockpitsByRolesCollection.length>0?"":" hidden",content:v,selected:!(!J.getPreferences()["me-cockpits-section"]||!1!==J.getPreferences()["me-cockpits-section"].closed)}),b.push({title:pe("My Favorite Apps")+r.outerHTML,name:"favorite",content:f,selected:!s.favorite.closed,className:"compass-scroll-accordion-section favorite my-favorite-apps-section",handler:function(){event.target.hasClassName("fonticon-trash")&&(event.stopPropagation(),n._confirmModal())}}),b.push({title:pe("My Apps"),name:"apps",content:g,selected:!s.north.closed,className:"compass-scroll-accordion-section my-apps-section"}),b.push({title:pe("My Business Methods"),name:"businessMethods",className:"compass-scroll-accordion-section my-apps-section my-business-methods-section"+this.collections.businessMethodCollection.length>0?"":" hidden",content:C,selected:!(!J.getPreferences()["me-businessMethods-section"]||!1!==J.getPreferences()["me-businessMethods-section"].closed)}),t=new G({exclusive:!1,className:"divided",items:b}),n.accordion=t;var y=n.buildAndGetScrollableView(e.createElement("div",{html:t}));return r=n.accordion.getContent().getElement(".accordion-item .delete-favorite"),new T({position:"bottom",target:r,className:"compass-small-tooltip",body:pe("clickRemoveFavorite")}),n.accordion.addEvent("onClick",n.saveSections.bind(n)),y},_confirmModal:function(){var e=this;new K({closable:!1,renderTo:a.isOpenFullSize()?document.querySelector(".my-apps-panel.compass-v3"):""}).dialog({body:pe("confirmRemoveFavorite"),title:pe("Remove all favorite Apps"),buttons:[{className:"primary",value:pe("Remove"),action:function(t){e.removeAllFavoriteApp(),t.hide()}},{value:pe("cancel"),action:function(e){e.hide()}}]})},buildAndGetScrollableView:function(t){var n=e.createElement("div",{class:"scroll-container"});return new i({element:t}).inject(n),n},buildWorldTabContent2:function(){var t=this,n=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrlNoNLS("exclusions"),parse:function(e){return Object.keys(e).map(function(t){return{id:t,data:e[t]}})}}));n.fetchPromise(),J.setExclusionsCollection(n);var o,i,s=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrl("world")})),l=new V({entity:"portfolio",usageEntity:"PORTFOLIOS_OPERATIONS",hideDescription:!0,collection:s,itemsDefaultIconsuffix:"small",events:{onItemClick:function(e){"industries"===e.get("childrenType")?(o=[e.toJSON()],t.showIndustries(e,!0,o),J.compassPanelFullSize()):"domains"===e.get("childrenType")?(o=[e.toJSON()],i=!0,t.showWorksDetails(e,!0,!1,o,i),J.compassPanelFullSize()):"roles"===e.get("childrenType")?(o=[e.toJSON()],i=!0,t.showPlaygoundDetail(e,!0,o,i),J.compassPanelFullSize()):"solutions"===e.get("childrenType")?(e.get("comingSoon")&&J.enableBetaUnlockComingSoon()||!e.get("comingSoon"))&&(o=[e.toJSON()],t.showLifeDetails(e,!0,o),J.compassPanelFullSize()):"audiences"===e.get("childrenType")&&(o=[e.toJSON()],t.showWorksDetails(e,!0,!0,o),J.compassPanelFullSize())}}}),r=function(){l.getContent().setContent(e.createElement("div",{class:"portfolio-empty-view",html:{class:"portfolio-empty-view-content-wrapper",html:[{tag:"div",class:"portfolio-empty-view-content-title",html:[{text:pe("No internet connection")}]},{tag:"div",class:"portfolio-empty-view-content",html:[{text:pe("You don't have access to the 3DS solutions portfolio. Please check your internet connection.")}]},{class:"fonticon fonticon-offline",tag:"i"}]}}))};return s.fetchPromise().then(function(){if(0===s.size())r();else{var e=t.search&&t.search.value.toLowerCase();t.search&&t.filterViews("",e),t._navigateToContent(l)}},r),this.buildAndGetScrollableView(e.createElement("div",{html:l.getContent()}))},_isNotAddin:function(){return!(e.is(r.addinMode)&&e.is(r.addinMode.value))},showLifeDetails:function(t,n,o){var i,s=this,l=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrl("solutionsexperiences"),parse:function(e){return e.filter(function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),t.get("exclusions")||t.set("exclusions",[]),-1===t.get("exclusions").indexOf(e.id)&&e.parents.detect(function(e){return e.id===t.get("id")})})}})),r=new B({model:t,usageEntity:"PORTFOLIO",itemsTitle:pe("Solutions"),parentIcon:ue,navigation:o,header:!0,collection:l,events:{onItemClick:function(t,n){var i=e.clone(o);i.push(t.toJSON()),s.showSolutionDetail(t,!1,i,!0)}}});i=new x({title:t.get("title"),closable:s._isNotAddin(),parentIcon:ue,model:t,view:r,events:{callGoHomes:function(e){Ae(e)},onClose:function(){s.dispatchEvent("onClose")},onGoHome:function(e){i.goHome(e)},onBack:Ee.bind(this,n,o),onBackClick:function(){ve.pop()},onShow:function(){De(n)}}}),l.fetchPromise().then(this._navigateToContent.bind(this,i,o)),this._injectOverlayOnTop(i)},showEduDetailsV32:function(t,n,o){var i,s=this,l=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrl("portfolios"),parse:function(e){return(e=e.filter(function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),t.get("children").detect(function(t){return t.id===e.id&&(e.rank=t.rank),t.id===e.id})})).sort(function(e,t){return e.rank-t.rank}),e}})),r=new W({model:t,itemsTitle:pe("AUDIENCES"),parentIcon:ue,usageEntity:"PORTFOLIO",navigation:o,collection:l,events:{onItemClick:function(t,n){var i=e.clone(o);i.push(t.toJSON()),s.showWorksDetails(t,!1,!0,i)}}});i=new x({title:t.get("title"),closable:s._isNotAddin(),parentIcon:ue,model:t,view:r,events:{callGoHomes:function(e){Ae(e)},onClose:function(){s.dispatchEvent("onClose")},onGoHome:function(e){i.goHome(e)},onBack:Ee.bind(this,n,o),onBackClick:function(){ve.pop()},onShow:function(){De(n)}}}),l.fetchPromise().then(this._navigateToContent.bind(this,i,o)),this._injectOverlayOnTop(i)},_goHome:Ae,showWorksDetails:function(t,n,o,i,s){var l,r=this,c=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrl("themes"),parse:function(e){return(e=e.filter(function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.parents.detect(function(e){return e.id===t.id})})).sort(function(e,t){return e.rank-t.rank}),e.sort(function(e,n){var o=e.parents.detect(function(e){return e.id===t.id}),i=n.parents.detect(function(e){return e.id===t.id});return o.rank-i.rank}),e}})),d=new B({model:t,itemsTitle:pe(o?"Audiences":"Domains"),usageEntity:o?"audience":"PORTFOLIO",parentIcon:ue,collection:c,navigation:i,events:{onItemClick:function(t,n){var a=o?{itemsTitle:pe("OFFERS"),child:{itemsTitle:pe("RELATED ROLES")}}:{itemsTitle:pe("Sub-Domains"),child:{itemsTitle:pe("Roles"),showBuy:s}},l=e.clone(i);l.push(t.toJSON()),r.showDomainsDetail(t,!1,!0,a,l)}}});l=new x({title:t.get("title"),closable:r._isNotAddin(),parentIcon:ue,model:t,view:d,events:{callGoHomes:function(e){Ae(e)},onClose:function(){r.dispatchEvent("onClose")},onGoHome:function(e){l.goHome(e)},onBack:Ee.bind(this,n,i),onBackClick:function(){ve.pop()},onShow:function(){De(n)}}}),c.fetchPromise().then(this._navigateToContent.bind(this,l,i)),this._injectOverlayOnTop(l)},showIndustries:function(t,n,o){var i=this,s=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrl("industries"),parse:function(e){return(e=e.filter(function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),-1===t.get("exclusions").indexOf(e.id)})).sort(function(e,t){return e.rank-t.rank}),e}})),l=new W({usageEntity:"PORTFOLIO",model:t,itemsTitle:pe("Industries"),parentIcon:ue,hideDescription:!0,navigation:o,collection:s,events:{onItemClick:function(t,n){var s=e.clone(o);s.push(t.toJSON()),i.showIndustrieDetail(t,"",s)}}}),r=new x({title:t.get("title"),model:t,closable:i._isNotAddin(),parentIcon:ue,view:l,events:{callGoHomes:function(e){Ae(e)},onClose:function(){i.dispatchEvent("onClose")},onGoHome:function(e){r.goHome(e)},onBack:Ee.bind(this,n,o),onBackClick:function(){ve.pop()},onShow:function(){De(n)}}});s.fetchPromise().then(this._navigateToContent.bind(this,r,o)),this._injectOverlayOnTop(r)},showBuy:function(t){var n=this,o=e.createElement("div",{class:"check-out-view",html:new L({model:t}).render()}),i=new x({title:pe("Check Out"),model:t,view:o,closable:n._isNotAddin(),parentIcon:ue,events:{callGoHomes:function(e){Ae(e)},onClose:function(){n.dispatchEvent("onClose")},onGoHome:function(e){i.goHome(e)},onBack:function(){we(!1)},onBackClick:function(){ve.pop()},onShow:function(){De(!1)}}});this._injectOverlayOnTop(i)},showBasketView:function(){var t=this;t.container.getParent().removeClassName("compass-footer-visible"),J.compassPanelFullSize();var n=e.createElement("div",{class:"basket-view",html:(new F).render()}),o=new x({title:pe("Cart"),view:n,closable:t._isNotAddin(),parentIcon:ue,events:{callGoHomes:function(e){Ae(e),"WORLD"!==ue||t.container.getParent().hasClassName("compass-footer-visible")||t.container.getParent().addClassName("compass-footer-visible")},onClose:function(){t.dispatchEvent("onClose")},onGoHome:function(e){o.goHome(e),"WORLD"!==ue||t.container.getParent().hasClassName("compass-footer-visible")||t.container.getParent().addClassName("compass-footer-visible")},onBack:function(){var e=0===ve.length;Ee.call(t,e,!1),"WORLD"!==ue||t.container.getParent().hasClassName("compass-footer-visible")||t.container.getParent().addClassName("compass-footer-visible")},onBackClick:function(){ve.pop();var e=0===ve.length;Ee.call(t,e,!1),"WORLD"!==ue||t.container.getParent().hasClassName("compass-footer-visible")||t.container.getParent().addClassName("compass-footer-visible")},onShow:function(){De(!1)}}});this._injectOverlayOnTop(o)},showPlaygoundDetail:function(t,n,o,i){var s,l,r=this;l=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrl("rootroles"),parse:function(e){return(e=e.filter(function(e){return e.brand||(e.brand="PLATFORM"),e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),t.get("children").detect(function(t){return t.id===e.id&&(e.rank=t.rank),t.id===e.id})})).sort(function(e,t){return e.rank-t.rank}),e}})),s=new x({title:t.get("title"),model:t,closable:r._isNotAddin(),parentIcon:ue,view:new B({usageEntity:"PORTFOLIO",parentIcon:ue,model:t,header:!0,hideDescription:!0,navigation:o,collection:l,events:{callGoHomes:function(e){Ae(e)},onClose:function(){r.dispatchEvent("onClose")},onGoHome:function(e){s.goHome(e)},onItemClick:function(t,n){var i=e.clone(o);i.push(t.toJSON()),r._onClickMoreV32(t,!1,i)}}}).render(),events:{onBack:Ee.bind(this,n,o),onBackClick:function(){ve.pop()},onShow:function(){De(n)},onClose:function(){r.dispatchEvent("onClose")},callGoHomes:function(e){Ae(e)}}}),this._injectOverlayOnTop(s),l.fetchPromise().then(this._navigateToContent.bind(this,s,o))},buildCompanyTabContent:function(){var t,n=this;return t=0===this.collections.platformRoles.length?e.createElement("div",{class:"portfolio-empty-view",html:{class:"portfolio-empty-view-content-wrapper",html:[{tag:"div",class:"portfolio-empty-view-content-title",text:pe("All Company Roles are granted to you.")},{class:"fonticon fonticon-check",tag:"i"}]}}):e.createElement("div",{styles:{height:"100%"},html:{class:"items-roles-view my-roles-section",html:this.collections.platformRoles.map(function(e){return new O({model:e,showRequestIcon:!0,clickable:!0,disableSeoTags:!0,appsCollection:n.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e.get("appList")}]),events:{onItemClick:function(e,t){n.clickRole(e,!1,!0,{request:!0})}}}).render()})}}),this.buildAndGetScrollableView(e.createElement("div",{html:t}))},_contentLoaded:function(){return this._contentLoadedOnce||(this._contentLoadedOnce=a.debounce(function(){Y.unmask(document.body.getElement("#my-apps-ct"))},500,!1)),this._contentLoadedOnce()},_maskContent:function(){return this._maskContentOnce||(this._maskContentOnce=a.debounce(function(){document.body.getElement("#my-apps-ct").getElement(".mask")||Y.mask(document.body.getElement("#my-apps-ct"))},300,!0)),this._maskContentOnce()},showOffers:function(t){var n=this,o=new x({hideHeader:!0,model:t,view:e.createElement("div",{class:"check-out-view",html:new L({model:t}).render()}),closable:n._isNotAddin(),parentIcon:ue,events:{callGoHomes:function(e){Ae(e)},onClose:function(){n.dispatchEvent("onClose")},onGoHome:function(e){o.goHome(e)},onBack:function(){we(0===ve.length)},onBackClick:function(){ve.pop()},onShow:function(){De(!1)}}});this._injectOverlayOnTop(o)},_navigateToContentFast:function(e){var t=this;if(document.body.addClassName("compass-no-transition"),J.supportPushState())if(window.location.pathname.indexOf("rootroles")>-1){if((o=window.location.pathname.split("rootroles")).length>1){var n=o[1].replace(/\//g,"");J.compassPanelFullSize(),t.roleV34Collection.fetchPromise().then(function(){var o=t.roleV34Collection.find(function(e){return a.toSeoUrl(e.get("title"))===n});o&&(a.manageSeoTags(o),ue="WORLD",t._onClickMoreV32(o,!0,[]),setTimeout(function(){t._contentLoaded(),e(),document.body.removeClassName("compass-no-transition")},200))})}}else if(window.location.pathname.indexOf("offers")>-1){var o;if((o=window.location.pathname.split("offers")).length>1){var i=o[1].replace(/\//g,"");i&&(J.compassPanelFullSize(),this.showOffers(new R({id:i}),!0,[]),ue="WORLD",setTimeout(function(){t._contentLoaded(),e(),document.body.removeClassName("compass-no-transition")},200))}}},_navigateToContent:function(t,n){var o=!1,i=this,s=["trading-experiences","data-science-experiences"],l=-1;J.supportPushState()&&!J.isFastPortfolioNavigation()&&setTimeout(function(){-1===l&&window.location.pathname.split("/").detect(function(e){return s.indexOf(e)>-1})&&(l=1,i.getContent("compass-nav-second").isHidden()||2!==i.getContent().getElements("compass-nav-second .tab-item").length||i.getContent().getElements("compass-nav-second .tab-item")[1].hasClassName("active")||i.getContent().getElements("compass-nav-second .tab-item")[1].click());var r=window.location.pathname.split("/"),c=window.location.pathname.split("/buy")[0],d=J.isCollaborativeBusinessInnovatorNavigation()||J.is3dswymerNavigation();t&&t.getContent&&(t=t.getContent());for(var p=0,u=r.length;p<u;p++){var m=e.clone(r).splice(0,p+1).join("/"),h=t.getElement('[data-seo="'+m+'"]'),f=t.getElement("[data-seo-current]");if(d&&("collaborative-business-innovator"!==r[p]||h?"3d-swymer"!==r[p]||h?"3dswymer"!==r[p]||h||(h=t.getElement('[data-seo="'+m.replace("3dswymer","collaborative-business-innovator")+'"]')):h=t.getElement('[data-seo="'+m.replace("3d-swymer","collaborative-business-innovator")+'"]'):(h=t.getElement('[data-seo="'+m.replace("collaborative-business-innovator","3d-swymer")+'"]'))||(h=t.getElement('[data-seo="'+m.replace("collaborative-business-innovator","3dswymer")+'"]'))),h&&(i._maskContent(),De(!0),J.setNoPushStateNavigation(),h.click(),h&&c===m&&(o=!0,n&&J.supportPushState()&&J.needPushState()&&a.manageSeoTags(n[n.length-1]))),f&&c===f.getAttribute("data-seo-current")||J.isCurrentPathnamePortfolioRoot(c)){o=!0,n&&J.supportPushState()&&J.needPushState()&&a.manageSeoTags(n[n.length-1]);break}}o&&setTimeout(function(){i._contentLoaded()},200)},25)},showDomainsDetail:function(t,n,o,i,s){i&&i.entity;var l=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrl("disciplines"),parse:function(e){return(e=e.filter(function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.parents.detect(function(e){return e.id===t.id})})).sort(function(e,n){var o=e.parents.detect(function(e){return e.id===t.id}),i=n.parents.detect(function(e){return e.id===t.id});return o.rank-i.rank}),e}})),r=new X({usageEntity:"domain",parentIcon:ue,itemsTitle:i&&i.itemsTitle,model:t,collection:l,navigation:s,events:{onItemClick:function(n,a){var l=e.clone(s);l.push(n.toJSON()),i&&i.onItemClick?i.onItemClick(n,!1,l,o):(n.set("brand",t.get("brand")),c.showProcessDetail(n,!1,l,o,i))}}}),c=this,d=new x({title:t.get("title"),model:t,closable:c._isNotAddin(),parentIcon:ue,view:r,events:{callGoHomes:function(e){Ae(e)},onClose:function(){c.dispatchEvent("onClose")},onGoHome:function(e){d.goHome(e)},onBack:Ee.bind(this,n,s),onBackClick:function(){ve.pop()},onShow:function(){De(n)}}});l.fetchPromise().then(this._navigateToContent.bind(this,d,s)),this._injectOverlayOnTop(d)},showIndustrieDetail:function(t,n,o,i){var s=this,l=null;l=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrl("solutionsexperiences"),parse:function(e){return(e=e.filter(function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.parents.detect(function(e){return e.id===t.id})})).sort(function(e,n){var o=e.parents.detect(function(e){return e.id===t.id}),i=n.parents.detect(function(e){return e.id===t.id});return o.rank-i.rank}),e}}));var r=new x({title:t.get("title"),model:t,closable:s._isNotAddin(),parentIcon:ue,view:new B({usageEntity:"industry",itemsTitle:pe("Solutions"),parentIcon:ue,navigation:o,model:t,collection:l,buy:i,events:{onItemClick:function(t,n){var a=e.clone(o);a.push(t.toJSON()),s.showSolutionDetail(t,"",a,i)}}}),events:{callGoHomes:function(e){Ae(e)},onClose:function(){s.dispatchEvent("onClose")},onGoHome:function(e){r.goHome(e)},onBack:Ee.bind(this,n,o),onBackClick:function(){ve.pop()},onShow:function(){De(n)}}});l.fetchPromise().then(this._navigateToContent.bind(this,r,o)),this._injectOverlayOnTop(r)},_onClickMoreV32:function(t,n,o){var i=this,s=null;if(o&&o.length>0&&(s=o[0].contact),t.get("apps")){if(t.get("apps").sort(function(e,t){return e.rank-t.rank}),t.set("data",t.get("apps").map(function(t){var n=[];return n.length>0?t=n[0].toJSON():(t.id=t.externalId,t.title=t.name,t.icon=r.myAppsBaseUrl.replace("/resources/AppsMngt/","")+e.String.format("/widget/images/MyApps/{0}_AppIcon.svg",t.externalId)),t}),{silent:!0}),"IFW"===t.get("acronym")){var l=i.collection.filterApps([{key:"isRole",value:!1}]);t.set("data",t.get("data").filter(function(e){var t=l.detect(function(t){return t.get("id")===e.externalId});return t&&(e.title=t.get("title")),e}),{silent:!0})}t.unset("apps",{silent:!0})}else if(t.get("appList")){0===(l=i.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:t.get("appList")}])).length&&(l=i.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:t.get("appList")}]));var c=i.roleV34Collection.find(function(e){return e.get("acronym")===t.get("process")});c&&c.get("description")?t.set({description:c.get("description"),descriptionMedias:c.get("descriptionMedias"),tagLine:c.get("tagLine")},{silent:!0}):t.set("description",pe("noadditionalinfo"),{silent:!0}),t.set({data:l},{silent:!0})}var d=i.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:"X3DOPMR_AP"}]),p=null;d&&d.length>0&&(p=d[0].get("platforms").map(function(e){return{id:e.id,text:e.name}}));var u=new Q({usageEntity:"role",itemsTitle:pe("Apps"),additionalClassName:"ME"===ue?"me-view portfolio-roles-view":"portfolio-roles-view",parentIcon:ue,navigation:o,clickable:!1,model:t,contact:s||J.isFastPortfolioNavigation(),buy:J.isBuyEnabledWorld(ue)||J.isFastPortfolioNavigation(),events:{onClickBuy:i.showBuy.bind(i),callGoHomes:function(e){Ae(e)},onClose:function(){i.dispatchEvent("onClose")},onGoHome:function(e){m.goHome(e)},onItemClick:function(e,t){},onRequestRole:function(e,t){i.sendRoleRequest(e,t)}}});u._onModelSync();var m=new x({title:t.get("title"),model:t,closable:i._isNotAddin(),parentIcon:ue,adminPlatforms:p,contact:s||J.isFastPortfolioNavigation(),isDisableGoBack:a.isDisableGoBack(),buy:J.isBuyEnabledWorld(ue)||J.isFastPortfolioNavigation(),view:u,events:{onClickBuy:i.showBuy.bind(i),callGoHomes:function(e){Ae(e)},onClose:function(){i.dispatchEvent("onClose")},onBack:Ee.bind(this,n,o),onBackClick:function(){ve.pop()},onShow:function(){De(n)}}});this._injectOverlayOnTop(m)},showSolutionDetail:function(t,n,o,i,s){var l,r,c=this,d=null;d=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrl("processexperiences"),parse:function(e){return(e=e.filter(function(e){return e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)})),e.parents.detect(function(e){return e.id===t.id})})).sort(function(e,n){var o=e.parents.detect(function(e){return e.id===t.id}),i=n.parents.detect(function(e){return e.id===t.id});return o.rank-i.rank}),e}})),r=new X({usageEntity:"solution",itemsTitle:pe("Processes"),extendedDescription:!0,parentIcon:ue,model:t,navigation:o,collection:d,events:{callGoHomes:function(e){Ae(e)},onClose:function(){c.dispatchEvent("onClose")},onGoHome:function(e){l.goHome(e)},onItemClick:function(t,n){var s=e.clone(o);s.push(t.toJSON()),c.showProcessDetail(t,!1,s,i,{child:{itemsTitle:pe("Roles"),showBuy:i}})},onDiscoverClick:function(e){l.container.getElement(".content-overlay-header h1").setText(e.get("title")),l.container.getElement(".scroller-content").scrollTop=0}}}),l=new x({title:t.get("title"),model:t,closable:c._isNotAddin(),parentIcon:ue,view:r,events:{callGoHomes:function(e){Ae(e)},onClose:function(){c.dispatchEvent("onClose")},onBack:Ee.bind(this,n,o),onBackClick:function(){ve.pop()},onShow:function(){De(n)}}}),d.fetchPromise().then(this._navigateToContent.bind(this,l,o)),this._injectOverlayOnTop(l)},showProcessDetail:function(t,n,o,i,s){var l=new(q.extend({model:R,url:a.getPortfolioApiTemplateUrl("rootroles"),parse:function(e){return(e=e.filter(function(e){return e.brand||(e.brand="PLATFORM"),e.iconTemplate?e.iconTemplate=a.getPortfolioAssetTemplateUrl(e.id,e.iconTemplate):e.iconTemplate="",e.descriptionMedias&&(e.descriptionMedias=e.descriptionMedias.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}),e.descriptionMediasTemplate&&(e.descriptionMediasTemplate=e.descriptionMediasTemplate.map(function(t){return a.getPortfolioAssetTemplateUrl(e.id,t)}))),e.parents.detect(function(e){return e.id===t.id})})).sort(function(e,n){var o=e.parents.detect(function(e){return e.id===t.id}),i=n.parents.detect(function(e){return e.id===t.id});return o.rank-i.rank}),e}})),r=this,c=new x({title:t.get("title"),model:t,closable:r._isNotAddin(),parentIcon:ue,view:new j({itemsTitle:s&&s.child&&s.child.itemsTitle,parentIcon:ue,model:t,usageEntity:s&&s.itemsTitle?s.itemsTitle:"process",navigation:o,defaultIcon:"{0}_Role.svg",collection:l,events:{onItemClick:function(t,n){var i=r.collections.visibleRoles.get(t.get("id")),s=e.clone(o);s.push(t.toJSON()),i||(i=r.collections.platformRoles.get(t.get("id"))),r._onClickMoreV32(t,!1,s)},callGoHomes:function(e){Ae(e)},onClose:function(){r.dispatchEvent("onClose")},onGoHome:function(e){c.goHome(e)}}}),events:{callGoHomes:function(e){Ae(e)},onClose:function(){r.dispatchEvent("onClose")},onGoHome:function(e){c.goHome(e)},onBack:Ee.bind(this,n,o),onBackClick:function(){ve.pop()},onShow:function(){De(n)}}});l.fetchPromise().then(this._navigateToContent.bind(this,c,o)),this._injectOverlayOnTop(c)},showRoleDetailWithRequest:function(e){var t=e.get("id"),n=this,o=n.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:this.collections.platformRoles.get(t).get("appList")}]),i=new x({title:e.get("title"),closable:n._isNotAddin(),model:e,icon2:"info",parentIcon:ue,view:e.get("appList").map(function(e){var t=o.detect(function(t){return t.get("id")===e});return t?new H({isApp:!0,additionalClassName:"app-item",model:t,appsCollection:n.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:t.get("appList")}])}).render():null}),events:{callGoHomes:function(e){Ae(e)},onClose:function(){n.dispatchEvent("onClose")},onGoHome:function(e){i.goHome(e)},onClickMore:n._onClickMore.bind(n),onClickBuy:n.showBuy.bind(n)}});this._injectOverlayOnTop(i)},builCompassContent:function(){return this.tabContent={tag:"compass-content"},this.tabContent},buildCompassNavMain:function(){var t=-1,n=this._needToShowMyRoles()?this.buildSettingIcon():null,o=this,i=[{icon:"user",text:pe("Compass_ME")},{icon:"users",text:pe("WE"),disabled:!0,hidden:!0},{icon:"building-office",text:pe("COMPANY"),hidden:!J.canRequestRole(),disabled:!J.canRequestRole()},{icon:"globe",text:pe("WORLD")}],s=e.createElement("i",{class:"compass-nav-search-icon compass-search fonticon fonticon-search",events:{click:function(){o.container.toggleClassName("compass-search-open"),o.container.getElement(".compass-nav-search-icon").toggleClassName("active"),o.container.getElement("compass-nav-search input").focus(),o.search.value="",o.filterViews("","")}}});new T({position:"left",target:s,className:"compass-tooltip",body:pe("Search")}),"small"===J.getPreferences().viewStyle&&o.container.getParent().addClassName("compass-view-small");return{tag:"compass-nav-main",html:[e.is(D._getUser())?o.buildCloseIcon():null,s,n,null,{class:"tab",tag:"div",html:i.map(function(e){return t++,{tag:"a",class:"tab-item"+(e.disabled?" disabled":"")+(e.hidden?" hidden":""),"data-index":4,events:{click:function(){o.compassMainNav=t,document.querySelectorAll("compass-nav-second .tab-item")&&document.querySelectorAll("compass-nav-second .tab-item").length>1&&!document.querySelector("compass-nav-second .tab-item.active")&&document.querySelectorAll("compass-nav-second .tab-item")[o.compassSecondNav].addClassName("active"),document.querySelector(".compass-on")&&document.querySelector(".compass-on").removeClassName&&document.querySelector(".compass-on").removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south")}},html:[{class:"tab-item-border",html:{tag:"div",class:"fonticon fonticon-"+e.icon}},{class:"tab-item-text",text:e.text}]}})}]}},buildSettingIcon:function(){var t=this,n=e.createElement("i",{class:"compass-nav-settings-icon compass-search fonticon fonticon-cog"});return new T({position:"right",target:n,className:"compass-small-tooltip",body:pe("Preferences")}),this.dropDownPref=new oe({target:n,className:"compass-dropdown",hasRole:this._needToShowMyRoles(),events:{onUpdateTenant:function(){t.collection.lastId=null,"R1132100503382"===r.selectedPlatform&&(t._maskContent(),setTimeout(function(){window.location.reload()},1100))},fetchAppList:function(e){t.options.reLoadQuadrant(e)},save:function(e,n){"viewStyle"===e&&t.container.getParent().toggleClassName("compass-view-small","small"===n),t._savePreferencesOnce(e,n)}}}),n&&n.addEventListener("click",function(e){t.dropDownPref.updateDropDownPref()}),n},updateDropDownPref:function(e,t){!0===e&&!1===e||(e=a.getIsMultiTenant()),t||(t="#force-select-tenant"),this.dropDownPref&&this.dropDownPref.getContent().getElement(t)&&(e&&this.dropDownPref.getContent().getElement(t).hasClassName("hidden")?this.dropDownPref.getContent().getElement(t).removeClassName("hidden"):!1!==this.dropDownPref||this.dropDownPref.getContent().getElement(t).hasClassName("hidden")||this.dropDownPref.getContent().getElement(t).addClassName("hidden"))},refreshBascketFooter:function(e){var t=function(){return document.querySelector("#my-apps-ct mpf-buy-wrapper")};!0!==e&&!1!==e||(Se=e),setTimeout(function(){"WORLD"!==ue||t()||!Se||document.querySelector("#my-apps-ct").hasClassName("compass-footer-visible")?!Se&&document.querySelector("#my-apps-ct").hasClassName("compass-footer-visible")&&document.querySelector("#my-apps-ct").removeClassName("compass-footer-visible"):document.querySelector("#my-apps-ct").addClassName("compass-footer-visible")},t()?300:0)},buildCompassFooter:function(){var t=this;e.createElement("compass-footer").inject(this.container,"bottom"),require(["DS/MPFMiniCartComponent/MiniCartComponentFactory","DS/MPFMiniCartComponent/MiniCartComponent","UWA/Class/Listener"],function(e,n,o){var i=new o;e.hasItems().then(function(o){o?(Se=!0,"WORLD"!==ue||t.container.getParent().hasClassName("compass-footer-visible")||t.container.getParent().addClassName("compass-footer-visible")):(Se=!1,t.container.getParent().removeClassName("compass-footer-visible")),e.getMiniCartComponent().then(function(e){e.render().inject(document.querySelector("compass-footer")),i.listenTo(e,n.Events.BUTTON_CLICKED,function(){J.supportPushState()&&-1===window.location.pathname.indexOf("/cart")&&history.pushState("","",window.location.pathname+"/cart"),t.showBasketView()})})})})},buildCompassNav:function(){var t=-1,n=this,o=e.is(D._getUser())&&!this._needToShowMyRoles()&&a.getIsMultiTenant()?this.buildSettingIcon():null,i=[pe("As a System of Operations"),pe("As a Business Model")],s=e.createElement("compass-nav-second",{html:[e.is(D._getUser())&&this._needToShowMyRoles()?null:n.buildCloseIcon(),o,{class:"tab tab-center",html:i.map(function(e){return t++,{tag:"a",class:"tab-item",text:e,events:{click:function(){n.compassSecondNav=t,document.querySelector('compass-nav-main [data-index="'+n.compassMainNav+'"]')&&!document.querySelector('compass-nav-main [data-index="'+n.compassMainNav+'"]').hasClassName("active")&&document.querySelector('compass-nav-main [data-index="'+n.compassMainNav+'"]').addClassName("active"),document.querySelector(".compass-on")&&document.querySelector(".compass-on").removeClassName&&document.querySelector(".compass-on").removeClassName("north").removeClassName("east").removeClassName("west").removeClassName("play").removeClassName("south")}}}})}]});return this._isBusinessExperienceAvailable()||(n.container.addClassName("compass-second-nav-hidden"),s.hide()),s},renderSuggestionsView:function(){this.getSuggestionsView().renderSuggestions(),this.appsAccordion&&this.getSuggestionsView().collection.length>0&&this.appsAccordion.showSection("suggestions-section")},getSuggestionsView:function(){var e=this.views;return e.suggestions||(e.suggestions=new h({collection:this.sugCollection})),e.suggestions},renderErrorView:function(t){var n=this.elements;n.error||(n.error=e.createElement("div",{class:"compass-error",text:t}).inject(this.container))},_needToShowMyRoles:function(){return this.collections.visibleRoles.length>0||this.collections.platformRoles.length>1},buildAccordion:function(){var t,n=this,o=this.options.sectionData,i=!1,l=[],r=this.views,c=this.elements,d=[],p=[],u=c.expandedRole=e.createElement("div",{tag:"div",class:"expanded-role",html:[{class:"expanded-role-title"},{tag:"span",class:"fonticon fonticon-left-open expanded-role-close"},{tag:"span",class:"fonticon fonticon-clear expanded-role-info"},this.views.expandedRole.render()]}),m=c.allRolesBtn=e.createElement("span",{class:"fonticon fonticon-down-dir fonticon-interact all-roles-btn"}),h=this.getSuggestionsView(),f=r.eservices;return e.Utils.Client.Features.touchEvents||new T({position:"bottom",target:m,className:"compass-small-tooltip",body:pe("Show more roles")}),this.forEachQuadrant(function(t){d.push(r.apps[t].render()),!1===i&&r.apps[t].collection.size()>0&&(i=!0),d.push(e.createElement("div",{class:"alert-message alert-default noapps "+t,text:o[t].noapps})),p.push(r.lma[t].render())}),(o.services&&o.services.data&&o.services.data.length>0||f)&&l.push({id:"wrapperMP",title:pe("3DEXPERIENCEMarketplace")||o.wrapperMP&&o.wrapperMP.title,html:f?e.createElement("div",{styles:{height:10}}):new $({collection:new s(o.services&&o.services.data||[])}).render(),open:!o.wrapperMP.closed,visible:!0,name:f?"learn-more-about-section":"services-section"}),f&&l.push({id:"eservices",parent:"wrapperMP",icon:"component",title:o.eservices&&o.eservices.title,html:r.eservices.render(),open:!o.eservices.closed,visible:!0,name:"services-section"}),f&&o.services&&o.services.data&&o.services.data.length>0&&l.push({id:"services",parent:"wrapperMP",icon:"globe",title:o.services&&o.services.title||pe("MyCommunityServices"),html:new $({collection:new s(o.services&&o.services.data||[])}).render(),open:!o.services.closed,visible:!0,name:"services-section"}),l.push({id:"wrapperRole",title:o.wrapperRole.title||pe("wrapperRole"),html:e.createElement("div",{styles:{height:10}}),open:!o.wrapperRole.closed,visible:!a.isCompassV2()&&e.is(D._getUser()),name:"learn-more-about-section"}),l.push({id:"roles",parent:a.isCompassV2()?"":"wrapperRole",title:o.roles.title,icon:"role roles",html:[r.visibleRoles.render(),e.createElement("div",{class:"alert-message alert-default noapps roles",text:o.roles.noapps}),r.platformRoles.render(),m,u],open:!o.roles.closed,visible:this._needToShowMyRoles(),name:"my-roles-section"}),e.is(D._getUser())&&l.push({id:"favorite",parent:a.isCompassV2()?"":"wrapperRole",title:o.favorite.title,icon:"star-empty favorite",html:[r.favorite.render(),e.createElement("div",{class:"alert-message alert-default noapps favorite",text:pe("dropfavoriteappshere")})],open:!o.favorite.closed,visible:!0,name:"my-favorite-apps-section"}),a.isCompassV2()&&i?(t=l.length,this.forEachQuadrant(function(i){d[i]=[],d[i].push([r.apps[i].render(),e.createElement("div",{class:"alert-message alert-default noapps "+i,text:o[i].noapps})]),l.splice(t,0,{id:"apps-"+i,title:o[i].title,icon:n._getClassForQuadrant(i),html:d[i],open:!0,visible:!0,name:"my-apps-section-"+i})})):i&&l.push({id:"apps",parent:a.isCompassV2()?"":"wrapperRole",title:"",html:d,open:!o.north.closed,visible:!0,name:"my-apps-section"}),e.is(e.Array.detect(p,function(e){return!e.getContent().hasClassName("empty")}))&&l.push({id:"lma",title:o.lma.title,html:p,open:!o.lma.closed,visible:!0,name:"learn-more-about-section"}),l.push({id:"suggestions",title:o.suggestions.title,html:h.render(),open:!o.suggestions.closed,visible:h.suggestionsRendered,name:"suggestions-section"}),new v({className:"apps-accordion",sections:a.isCompassV2()?7:4,scroller:!0,data:l,events:{onToggleSection:this.saveSections.bind(this),onScrollTop:function(){n.dispatchEvent("onScrollTop")},onScrollDown:function(){n.dispatchEvent("onScrollDown")},onRemoveAllFavoriteApp:function(){n.removeAllFavoriteApp()}}})},resizeAccordionData:function(){var e,t=this.container.getSize().width+1-34,n=this.itemsPerLine;(e=Math.floor(t/88))!==n&&(this.container.removeClassName("items-per-line-"+n),this.container.addClassName("items-per-line-"+e),this.itemsPerLine=e)},saveSections:function(t){var n={};"cockpits"===t.name?this._savePreferences("me-cockpits-section",{closed:!t.isSelected}):"businessMethods"===t.name?this._savePreferences("me-businessMethods-section",{closed:!t.isSelected}):this.accordion&&(this.accordion.items.forEach(function(e){n[e.name]=!e.isSelected}),e.is(D._getUser())&&r.saveSectionStatus(JSON.stringify(n)))},_savePreferences:function(t,n,o){if(t&&n&&e.is(D._getUser())){var i=J.getPreferences(),s="forceSelectTenant"===t&&i&&i[t]!==n;i[t]=n,r.setPreference({name:"compass-settings",value:JSON.stringify(i),onComplete:function(){E.publish("compassSettings",i),o&&o.onComplete&&o.onComplete()}}),s||this.collection.updateLocalCache(i),k.compassInc({eventCategory:"compass",eventAction:"compass-settings",persDim:{pd2:t,pd3:n}}),J.getPreferences()[t]=n}},manageRoleSectionDisplay:function(){this.appsAccordion&&(this._needToShowMyRoles()?this.appsAccordion.showSection("my-roles-section"):(this.appsAccordion.hideSection("my-roles-section"),this.collections.visibleRoles.forEach(function(e){this.toggleRole(e,!0)},this)))},_restCacheRebuild:function(){this.collections.favorite&&"0-0"===me&&Ce&&!Ce["0-0"]?this._renderContentOnToggleOnce(!0):(!this.collections.favorite||!Ce||"2-0"!==me&&"2-1"!==me||Ce["2-0"]||Ce["2-1"])&&"3-1"!==me&&"0-1"!==me||this._renderContentOnToggleOnce(!0),this.dropDownPref&&this.dropDownPref.updateDropDownPref()},initTopBar:function(){var e=this.collections.visibleRoles;p.setRoles(e),e.addEvent("onChange:active",function(e){p.setChecked(e)}),e.addEvent("onMultipleAdd",function(){p.setRoles(e)}),e.addEvent("onRemove",function(e){!0===e.get("granted")&&p.removeRole(e)})},completeInputSearch:function(t){t.query&&this.search?(this.search.getParent&&this.search.getParent("compass-nav-search").isHidden()&&this.container.getElement(".compass-nav-search-icon.compass-search.fonticon-search")&&this.container.getElement(".compass-nav-search-icon.compass-search.fonticon-search").click(),this.search.value=t.query,this.search.focus(),e.Event.dispatchEvent(this.search,"keyup")):t.query&&(this.inputSearchQuery=t)},searchInViews:function(e){this.filterViews("search",e)},filterAppsInViews:function(e){this.filterViews("filterApps",e)},filterViews:function(t,n){Ce[me]||this._renderContentOnToggle(!0),Ce[me].getElements(".item-view-v3,.portfolio-item").forEach(function(o){var i;if("quadrant"===t)(i=o.getAttribute("data-quadrant"))&&!o.hasAttribute("data-favorite-order")&&(""===n||i&&i===n?o.show():o.hide());else{i=o.getAttribute("data-search");var s=o.getAttribute("title");if(i){var a=e.is(n,"string")&&n.match(/^\s*role(s|)\s*:/g),l=a?n.replace(/^\s*role(s|)\s*:/g,"").trim():"";!n||!a&&(i.toLowerCase().indexOf(n.toLowerCase())>-1||s&&s.toLowerCase().indexOf(n.toLowerCase())>-1||o.getAttribute("data-id").toLowerCase().replace(/(false|true)$/,"")===n.toLowerCase())||a&&"Role"===o.getAttribute("data-type")&&o.getAttribute("data-id").toLowerCase().indexOf(l.toLowerCase())>-1?o.show():o.hide()}}})},clickApp:function(e,t){this._handleAppClick||(this._handleAppClick=a.debounce(this.handleAppClick,500,!0).bind(this)),t&&this._handleAppClick(e,t)},handleAppClick:function(t,n,o){var i=this,s=t.get("tooltip")||t.get("title"),l=t.isNative(),r=(k._IDS.compass.app,t.isRole()?t.get("process"):t.get("id")),c=t.get("title"),p=n.getParent("[data-id]")?n.getParent("[data-id]").getAttribute("data-id").indexOf("apps-")>-1?n.getParent("[data-id]").getAttribute("data-id").split("apps-")[1]:n.getParent("[data-id]").getAttribute("data-id"):"",u=(t.isWeb()||t.isWidget()||t.isFamily())&&!(!J.getPreferences()||"forceSelectTenant"!==J.getPreferences().forceSelectTenant),m=function(){var e=n.getElement(".settings-img");i.hideMessage(),e&&i.openSettings(t,e)},h={onComplete:function(n){i.options.closeOnLaunch&&i.dispatchEvent("onClose"),l&&(h.support?i.showMessage(pe("supportactivated"),5e3):n.remote?i.showMessage(e.String.format(pe("remoting"),s),5e3):i.showMessage(e.String.format(pe("launching"),s),5e3),A.get()&&E.publish("setTypesCallback",e.merge({appId:t.get("id")},A.get())))},onFailure:function(e){switch(e.error){case"no_launch_infos":case"no_install_selected":var o=n.getElement(".settings-img");i.hideMessage(),o&&i.openSettings(t,o);break;case"no_install_compatible":if(i.hideMessage(),t.isOnlineInstallable()&&!e.remoteAvailable)d.onlineInstallation(t,null,null);else(o=n.getElement(".settings-img"))&&i.openSettings(t,o);break;case"mandatory_update":i.hideMessage(),d.onlineInstallation(e.app,e.install,null,e.remote);break;case"windows10_app_not_installed":i.hideMessage();var s="https://www.microsoft.com/store/apps/9wzdncrdjzv3";J.isNativeApplicationEnvironment()?window.open(s,"_blank"):window.location=s;break;case"macos_app_download":i.hideMessage(),d.showMacDownloadPanel(e.app);break;case"ios_app_not_installed":i.hideMessage(),a.isIphone()?window.location="https://itunes.apple.com/fr/app/3dplay-ar/id1455204301":window.location="https://itunes.apple.com/us/app/3dplay/id825988585?mt=8";break;case"android_app_not_installed":i.hideMessage(),window.location="https://play.google.com/store/apps/details?id=com.dsy.threedplayar";break;case"applet_error":a.dispatchLauncherErrorEvent(e)}}};if(l){if(t.get("supportModeExeName")){var f=new y({className:"compass-modal compass-modal-support",closable:!0,visible:!0,events:{onHide:function(){f.destroy()}},header:"<h4>"+pe("supportmode")+"</h4>",body:pe("supportactivated")+"<br>"+pe("wantsupport"),footer:[e.createElement("button",{class:"btn btn-primary",text:pe("yes"),events:{click:function(){h.support=!0,i.showMessage("",2e4,!0),t.launch(h),f.hide()}}}),e.createElement("button",{class:"btn btn-default",text:pe("no"),events:{click:function(){i.showMessage("",2e4,!0),t.launch(h),f.hide()}}}),e.createElement("button",{class:"btn btn-default",text:pe("cancel"),events:{click:function(){f.hide()}}})]}).inject(document.body);return void k.clickApp({quadrant:p,appId:r,appName:c})}this.showMessage("",2e4,!0)}else if(t.isRole())return t.get("granted")?(t.get("active")?"Deactive":"Active",this.toggleRole(t)):("OpenRequestModal",this.showRequestModal(t)),void k.requestRole({quadrant:p,roleId:r,roleName:c});if(k.clickApp({quadrant:p,appId:r,appName:c}),l&&A.get())h.onComplete({});else if(t.isFamily()){var g=t.getChildrenForFamilyApp();J.isNativeApplicationEnvironment()&&g.native&&A.get()?h.onComplete({}):J.isNativeApplicationEnvironment()&&g.native?t.launch(h):!J.isNativeApplicationEnvironment()&&g.Widget&&(u&&!o&&g.Widget.get("platforms")&&g.Widget.get("platforms").length>1?m():g.Widget.launch(h))}else u&&!o&&t.get("platforms")&&t.get("platforms").length>1?m():t.launch(h)},handleInstallDetectionEvent:function(e,t,n){if(e.appId){var o=this.collection.get(e.appId);o.isNative()?o.install({forceUpdate:!0,eventDetection:!0,silent:!!n,onComplete:function(){t.onComplete()},onFailure:function(e){t.onFailure(e)}}):t.onFailure({error:"not_native_app"})}else t.onFailure({error:"no_app_id"})},handleInstallAppEvent:function(t,n){var o,i,s=t.appId;s?(o=this.collection.get(s),i=o.get("tooltip")||o.get("title"),o.isNative()?o.install({forceUpdate:!0,onComplete:function(){n.onComplete()},onFailure:function(t){var s=t.error;switch(s){case"no_install_compatible":o.isOnlineInstallable()&&!t.remoteAvailable?d.onlineInstallation(o,null,null,null,!0,null,n):n.onFailure({error:"no_install_compatible_no_online_installation"});break;case"mandatory_update":d.onlineInstallation(t.app,t.install,null,t.remote,!0);break;case"applet_error":100===t.returnCode?n.onFailure({error:s,message:pe("launcherbusyretry")}):t.remote?n.onFailure({error:s,message:pe("launcherbusyretry")}):n.onFailure({error:s,message:e.String.format(pe("launchingerror"),i)})}}}):n.onFailure({error:"not_native_app"})):n.onFailure({error:"no_app_id"})},handleLaunchAppEvent:function(t,n){if(e.is(t.appId)&&""!==t.appId){var o=this.collection.get(t.appId);if(o){e.log(o);var i=o.isNative(),s={origin:t.origin,silent:t.silent,onComplete:function(){n.onComplete({success:!0})},onFailure:function(e){switch(e.error){case"no_launch_infos":n.onFailure({error:"no_launch_infos"});break;case"no_install_selected":n.onFailure({error:"no_install_selected"});break;case"no_install_compatible":o.isOnlineInstallable()&&!e.remoteAvailable?n.onFailure({error:"no_install_compatible_online_installation"}):n.onFailure({error:"no_install_compatible_no_online_installation"});break;case"mandatory_update":n.onFailure({error:"mandatory_update_online_installation"});break;case"ios_app_not_installed":n.onFailure({error:"ios_app_not_installed"});break;case"android_app_not_installed":n.onFailure({error:"android_app_not_installed"});break;case"applet_error":n.onFailure({error:"applet_error"});break;case"unable_install_data":n.onFailure({error:"unable_install_data"})}}};if(t.fileName&&t.fileContent&&(s.file={name:t.fileName,content:t.fileContent}),i){if(o.get("supportModeExeName"))return void n.onFailure({error:"no_mode_selected"})}else if(o.isRole())return void n.onFailure({error:"app_is_a_role"});o.launch(s)}else n.onFailure({error:"no_app"})}else n.onFailure({error:"no_app_id"})},clickSuggestion:function(e){var t,n,o=e.target;(t=o.hasClassName("suggestion-item")?o:o.getParent(".suggestion-item"))&&(n=this.sugCollection.get(t.getAttribute("data-id")),this.handleSuggestionClick(n,t))},handleSuggestionClick:function(e){this.showTryModal(e)},showRequestModal:function(t){var n={description:t.get("description"),platforms:[],buttonDisabled:!1,buttonText:pe("request"),action:"sendRoleRequest"},o=t.get("platforms"),i=!0;o.length>0?(n.platforms=o.reduce(function(t,n){return n.requested||(t.push({name:n.id,text:e.String.format(pe("requeston"),n.name)}),i=!1),t},[]),i&&(n.buttonDisabled=!0)):(t.get("requested")||t.get("granted"))&&(n.buttonDisabled=!0),this.showRoleModal(t,n)},showTryModal:function(t){var n={description:t.get("productUrl"),platforms:null,buttonDisabled:!1,buttonText:pe("tryit"),action:"sendTryRequest"},o=t.get("checkResultsByPlatformId");o.length>1?n.platforms=o.reduce(function(t,n){return n.checkResult&&t.push({name:n.platformId,text:e.String.format(pe("tryiton"),n.displayName)}),t},[]):n.platforms=[],0!==n.platforms.length||o[0].checkResult||(n.buttonDisabled=!0),this.showRoleModal(t,n)},showRoleModal:function(e,t){var n,o,i,s=this,a=t.description,l=t.platforms;l.length>1?n={className:"compass-modal-dropdown",items:l,events:{onClick:function(n,i){s[t.action](e,i.name),o.hide()}}}:1===l.length&&(i=l[0].name),o=new y({className:"compass-modal compass-request-modal",closable:!0,visible:!0,events:{onHide:function(){o.destroy()}},header:"<h4>"+e.get("title")+"</h4>",body:new b({src:a,text:pe("noadditionalinfo")}),footer:[new w({value:t.buttonText,className:t.buttonDisabled?"default":"primary",disabled:t.buttonDisabled,events:{onClick:function(){n||(s[t.action](e,i),o.hide())}},dropdown:n}),new w({value:pe("cancel"),events:{onClick:function(){o.hide()}}})]}).inject(document.body)},clickRoleInfo:function(){var e=this.elements.expandedRole.getAttribute("data-id");this.showRequestModal(this.collection.get(e))},clickRoleBE:function(e){e.get("id");var t=this,n=new de({title:e.get("title"),closable:t._isNotAddin(),model:e,cockpitCollection:this.collections.cockpitsByRolesCollection.filter(function(t){return e.get("cockpitList").indexOf(t.id)>-1}),businessMethodCollection:this.collections.businessMethodCollection.filter(function(t){return e.get("beList").indexOf(t.id)>-1}),info:!1,buy:!1,request:!1,additionalClassName:"portfolio portfolio-depth6 portfolio-background-white editMode",parentIcon:"ME",events:{onBack:function(){we(!0)},onBackClick:function(){("0-0"!==me||Ce["0-0"])&&("2-0"!==me&&"2-1"!==me||Ce["2-0"]||Ce["2-1"])?ve.pop():(t._renderContentOnToggle(!0),ve=[])},onShow:function(){De(!0)},onGoHome:function(e){n.goHome(e)},callGoHomes:function(e){Ae(e)},onClose:function(){t.dispatchEvent("onClose")}}});this._injectOverlayOnTop(n),n.show(),k.clickBusinessRole({businessRoleId:e.get("id"),businessRoleName:e.get("title")})},clickRole:function(e,t,n,o){e.get("id");var i,s=this;i=o&&o.request?s.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:e.get("appList")}]):this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e.get("appList")}]);var a=new x({title:e.get("title"),closable:s._isNotAddin(),model:e,info:!t,buy:t,request:o&&o.request,additionalClassName:"Role"===e.get("type")&&"ME"===ue?"portfolio portfolio-depth6 portfolio-background-white editMode":"portfolio portfolio-depth6 portfolio-background-white",parentIcon:ue,view:{class:"portfolio-me-apps",html:i.map(function(t){return new H({isApp:!0,additionalClassName:"Role"===e.get("type")&&"ME"===ue?"app-item drag-app":"app-item",additionalClassNameImage:t.get("brand")?"is-"+t.get("brand").replace(" ","-"):"",model:t,clickable:"ME"===ue,events:{onItemClick:function(e,t){a.isEditMode||s.clickApp(e,t)},onClickSettings:s.clickSettings.bind(s)}}).render()})},events:{onClickMore:s._onClickMoreV32.bind(s),onClickBuy:s.showBuy.bind(s),onBack:function(){we(n)},onBackClick:function(){("0-0"!==me||Ce["0-0"])&&("2-0"!==me&&"2-1"!==me||Ce["2-0"]||Ce["2-1"])?ve.pop():(s._renderContentOnToggle(!0),ve=[])},onShow:function(){De(n)},onGoHome:function(e){a.goHome(e)},callGoHomes:function(e){Ae(e)},onClose:function(){s.dispatchEvent("onClose")},onRequestRole:function(e,t){s.sendRoleRequest(e,t)},onRemoveGroup:function(e){Ce["0-0"]&&Ce["0-0"].getElement('[data-id="'+e.get("id")+'"]')&&Ce["0-0"].getElement('[data-id="'+e.get("id")+'"]').destroy(),s.options.preferencesCollection.removeApp&&s.options.preferencesCollection.removeApp(e)},onRemoveFavoriteV3:function(e){e.forEach(function(e){s.removeFavoriteApp(e)})}}});this._injectOverlayOnTop(a),a.show()},_injectOverlayOnTop:function(e){var t=this.container.getParent().getElements(".content-overlay");e.inject(t[t.length-1]||this.container,"after"),ve.push(e),e.show()},sendRoleRequest:function(t,n){var o=this,i=t.get("platforms"),s=function(){o.showMessage(pe("Role has been requested."),5e3)};o.resetCache&&o.resetCache(),o.showMessage("",2e4,!0),r.request({url:r.requestRoleUrl,method:"POST",contentType:"application/x-www-form-urlencoded",postData:{process:t.get("process"),platform:n},onComplete:function(e){if(e&&0===e.code){if(t.set("requested",!0),n&&i.some(function(e){if(e.id===n)return e.requested=!0,!0}),ve[ve.length-1]&&ve[ve.length-1].addBuildRequestedIcon)i.detect(function(e){return!1===e.requested})?ve[ve.length-1].rebuildRequestButton():ve[ve.length-1].addBuildRequestedIcon();o.showMessage(e.message,5e3)}else s()},onFailure:s}),k.requestRole({roleId:t.get("process"),roleName:t.get("title")}),e.log("requested "+t.get("process")+":"+n)},sendTryRequest:function(t,n){var o=this,i=t.get("checkResultsByPlatformId"),s=function(){o.showMessage(pe("trialrequestfailure"),5e3)};o.showMessage("",2e4,!0),n||(n=i[0].platformId),r.request({url:r.tryRoleUrl,method:"POST",contentType:"application/x-www-form-urlencoded",postData:{process:t.get("productId"),platform:n},onComplete:function(e){e&&0===e.code?(o.showMessage(e.message,5e3),o.refreshSuggestions()):s()},onFailure:s}),e.log("try "+t.get("productId")+":"+n)},refreshSuggestions:function(){this.views.suggestions.refresh()},_isRemoteDisabled:function(){return void 0===this._removeDisabled&&(this._removeDisabled="true"===I.get("3dremotevm")),this._removeDisabled},openSettings:function(n,o){var i,s,l=this,p=!1;n.isFamily()&&(p=!0,(i=n.getChildrenForFamilyApp()).native?s=i.native:i.widget?s=i.widget:i.web&&(s=i.web));var u,m=this._isRemoteDisabled(),h=(s||n).getRemoteApp(),f=n.getPlatforms(),v=(s||n).get("catEnvs"),C=(n.isFamily()||n.isWeb()||n.isWidget())&&!(!J.getPreferences()||"forceSelectTenant"!==J.getPreferences().forceSelectTenant),b=function(){u&&u.hide&&(u.hideSettings(),l.container.getElement(".scroll-container .scroller-content")&&l.container.getElement(".scroll-container .scroller-content").removeEventListener("scroll",b))},y=o.getOffsets(),S=t.getScrolls(),w=function(t,w,D){var E,A,I=C?null:a.arrayFind(f,function(e){return e.preferred}),N=I?I.id:null,k=N,T=function(){u.hideSettings()};if("none"!==document.body.getElement(".my-apps-panel").style.display){t&&"undefined"==typeof compassRichWithCef&&(E=t[0],A=t[1]&&t[1].length>0?t[1][0]:null),o.addClassName("active"),l.appsAccordion&&l.appsAccordion.addEvent("onScroll",T);var P={data:{platforms:f.length>1||p?f:null,installs:E,remoteInstall:A,error:(s||n).get("error")},preferredInstallId:D,processes:(s||n).get("licenses").map(function(e){return e.id}),app:n,familyApps:i,isfamilyApps:p,container:l.container,appTitle:n.get("tooltip")||n.get("title"),remoteAppTitle:h?h.get("title"):null,onlineInstallable:(s||n).isOnlineInstallable(),trigger:o,target:o,renderTo:document.body,position:{x:y.x-S.x,y:y.y-S.y+25},shortcutEnabled:!!N||1===f.length||!!(s||n).get("catEnvConfig"),remoteEnabled:!m&&!!(s||n).get("remoteInfos"),additionalContent:(s||n).canAdditionalContent(l.collections.grantedRoles),isForceSelectTenantActive:C,optionalContent:(s||n).canOptionalContent(l.collections.grantedRoles),events:{onClick:function(t){e.log("new settings")},onShow:function(){l.hideMessage()},onPlatformChange:function(t){var s=t.platform&&N!==t.platform,r=t.install&&D!==t.install;s&&f.forEach(function(o){(o.preferred=o.id===t.platform)&&(N=o.id,p?(i.Windows&&i.Windows.get("platforms").detect(function(e){return e.id===N})&&(o=i.Windows.get("platforms").detect(function(e){return e.id===N}),i.Windows.set("launchInfos",o.launchInfos),i.Windows.set("envInfos",o.envInfos),i.Windows.set("shortcutLaunchInfos",o.shortcutLaunchInfos),o.remoteLaunchInfos&&i.Windows.get("remoteInfos")&&(i.Windows.get("remoteInfos").remoteLaunchInfos=o.remoteLaunchInfos)),i.Widget&&i.Widget.get("platforms").detect(function(e){return e.id===N})&&((o=i.Widget.get("platforms").detect(function(e){return e.id===N})).preferred=!0,i.Widget.set("launchInfos",o.launchInfos),i.Widget.set("launchUrl",o.launchUrl||(p&&i.Widget||n).get("launchUrl")),i.Widget.set("config",o.config||(p&&i.Widget||n).get("config")),i.Widget.set("checksum",o.checksum||(p&&i.Widget||n).get("checksum")),i.Widget.set("platformId",o.id),l.container.getParent().getElements(e.String.format('[data-id="{0}"]',n.get("id"))).forEach(function(t){if(C&&n.getPlatforms().length>1){var o=e.clone(i.Widget.toJSON());o.platformId=""}a.enableWidgetDrag(t,o||i.Widget.toJSON())})),i.native&&i.native.get("platforms").detect(function(e){return e.id===N})&&(o=i.native.get("platforms").detect(function(e){return e.id===N}),i.native.set("launchInfos",o.launchInfos),i.native.set("envInfos",o.envInfos),i.native.set("shortcutLaunchInfos",o.shortcutLaunchInfos),o.remoteLaunchInfos&&i.native.get("remoteInfos")&&(i.native.get("remoteInfos").remoteLaunchInfos=o.remoteLaunchInfos))):(n.set("launchInfos",o.launchInfos),(n.isWidget()||p&&i.Widget)&&((p&&i.Widget||n).set("launchUrl",o.launchUrl||(p&&i.Widget||n).get("launchUrl")),(p&&i.Widget||n).set("config",o.config||(p&&i.Widget||n).get("config")),(p&&i.Widget||n).set("checksum",o.checksum||(p&&i.Widget||n).get("checksum")),(p&&i.Widget||n).set("platformId",o.id),l.container.getParent().getElements(e.String.format('[data-id="{0}"]',n.get("id"))).forEach(function(t){if(C&&n.get("platforms").length>1){var o=e.clone((p&&i.Widget||n).toJSON());o.platformId=""}a.enableWidgetDrag(t,o||(p&&i.Widget||n).toJSON())})),(n.isNative()||p&&i.native)&&((p&&i.native||n).set("envInfos",o.envInfos),(p&&i.native||n).set("shortcutLaunchInfos",o.shortcutLaunchInfos),o.remoteLaunchInfos&&(p&&i.native||n).get("remoteInfos")&&((p&&i.native||n).get("remoteInfos").remoteLaunchInfos=o.remoteLaunchInfos))))}),r&&(p&&i.native||n).set("install",t.install),(n.isWeb()||n.isWidget()||p&&i.Widget)&&J.getPreferences()&&"forceSelectTenant"===J.getPreferences().forceSelectTenant&&s&&l.handleAppClick(p&&i.Widget||n,o.getParent("[data-id]"),!0)},onConfigChange:function(t){t.platformId&&v[t.platformId]&&(v[t.platformId].forEach(function(o,s){if(t.name===o.name){v[t.platformId][s].preferred=!0;var a=e.clone(v[t.platformId][s]);a.id=t.platformId,(p&&i.native||n).set("catEnvConfig",a)}}),f.forEach(function(e){e.id===t.platformId&&((p&&i.native||n).set("envInfos",e.envInfos),(p&&i.native||n).set("shortcutLaunchInfos",e.shortcutLaunchInfos),e.remoteLaunchInfos&&(p&&i.native||n).get("remoteInfos")&&((p&&i.native||n).get("remoteInfos").remoteLaunchInfos=e.remoteLaunchInfos))}))},onHideSettings:function(e,t){var s=e.platform&&k!==e.platform,a=e.install&&D!==e.install;if(o.removeClassName("active"),l.appsAccordion&&l.appsAccordion.removeEvent("onScroll",T),s||a){if(p)for(const t in i)i.hasOwnProperty(t)&&r.setPreferences({appid:i[t].id,preferredPlatform:e.platform,preferredInstall:e.install});else r.setPreferences({appid:n.id,preferredPlatform:e.platform,preferredInstall:e.install});k=e.platform}else t&&e.config&&(r.setPreferences({appid:(p&&i.native||n).id,preferredPlatform:e.config.platformId,preferredCatEnv:e.config.name}),r.setPreferences({appid:(p&&i.native||n).id,preferredPlatform:e.config.platformId,preferredInstall:e.install}),k=e.config.platform)},onClickShortcut:function(e){c.createV6Shortcut(d.getInstall(e),p&&i.native||n)},onClickUpdate:function(e,t){var o="remote"===e,s=o?A:d.getInstall(e);t?d.onlineInstallation(o?h:p&&i.native||n,s,null,o):d.onlineInstallation(p&&i.native||n,null,s)},onClickInstall:function(){d.onlineInstallation(p&&i.native||n,null,null)},onClickOptionalConentDocumentation:function(){require(["DS/WebUAUtils/WebUAUtils"],function(e){window.open(e.getHelpFullPath("EXP3DContentUserMap/content-r-wn.htm"))})},onClickInstallRemote:function(){d.onlineInstallation(h,null,null,!0)},onClickAdditional:function(e){var t=d.getInstall(e);d.onlineInstallation(p&&i.native||n,null,t,null,null,!0)},onClickOptionalContent:function(e,t,o){var s,a;"optionalContentInstall"===o?s=d.getInstallOptional(e):a=(p&&i.native||n).get("stackOptionContentList"),d.onlineInstallation(p&&i.native||n,!!t&&s,a,null,null,!1,!1,!0)},onClickUninstall:function(e){var t=d.getInstall(e);d.removeInstallation(t,p&&i.native||n)},launchAppFamily:function(e){l.handleAppClick(e,o,!(!J.getPreferences()||"forceSelectTenant"!==J.getPreferences().forceSelectTenant))}}};u=p?new ie(P):new g(P),l.container.getElement(".scroll-container .scroller-content")&&l.container.getElement(".scroll-container .scroller-content").addEventListener("scroll",b),u.show()}else l.hideMessage()};a.isCompassV3()||this.elements.search.blur(),this.showMessage("",3e4,!0),(n.isFamily()&&i.native||n.isNative())&&!n.isNativeMarketApp()&&"ios"!==a.getOs()&&"macos"!==a.getOs()?this.canShowOptionCotent?(i&&i.native||n).getOptionalContent(h,function(){(i&&i.native||n).getInstallList(h,w)}):(i&&i.native||n).getInstallList(h,w):w()},clickSettings:function(e,t){var n=t.getElement(".settings-img");n&&this.openSettings(e,n)},longClickApp:function(e){var t=this.collection.get(e.getAttribute("data-id"));if(t.isRole())this.expandRoleDetail(t);else if(t.needSettingsMenu()){var n=e.getElement(".settings-img");n&&this.openSettings(t,n)}},clickExpand:function(e){var t=e.target.getParent(".exp-item").getAttribute("data-id"),n=this.collection.get(t);this.expandRoleDetail(n)},expandRoleDetail:function(e){var t=this.elements.expandedRole;this.views.expandedRole.filterApps(e.get("appList")),t.getElement(".expanded-role-title").setText(e.get("title")),t.setAttribute("data-id",e.id),this.container.addClassName("roles-expanded")},hideRoleDetail:function(){this.container.removeClassName("roles-expanded")},toggleAllRoles:function(){this.container.toggleClassName("all-roles"),this.elements.allRolesBtn.toggleClassName("fonticon-down-dir"),this.elements.allRolesBtn.toggleClassName("fonticon-up-dir")},close:function(){if(!he){k._IDS.compass.cross;k.compassClose()}this.dispatchEvent("onClose"),he=""},onClose:function(){he="",J.isNativeApplicationEnvironment()||J.isMobileAppEnvironnementV2()?E.publish("compassPanelOnHide",{}):(this.container.hide(),we(!0,!0)),this._resetWorldNavigation()},open:function(){this.dispatchEvent("onOpen")},onOpen:function(){he="",this.container.show(),(!be||ve&&ve.length>0)&&(De(!0),"WORLD"===ve[0].options.parentIcon&&J.compassPanelFullSize()),r.get3DDashboardUrl()},displayQuadrant:function(e){var t=this.currentQuadrant;if(e){if(a.isCompassV2()||a.isCompassV3()){var n="play"===e?"north":e;this.appsAccordion&&this.appsAccordion.setTitle("my-apps-section",this.options.sectionData[n].title,this._getClassForQuadrant(n))}else this.appsAccordion.setTitle("my-apps-section",this.options.sectionData[e].title,this._getClassForQuadrant(e));t!==e&&(this.container.removeClassName(t),this.container.addClassName(e),this.currentQuadrant=e)}},_getClassForQuadrant:function(e){var t={north:"social",west:"3d",east:"intelligence",south:"simulation"},n="";return t[e]&&(n=" fonticon fonticon-compass-"+t[e]),e+n},forEachQuadrant:function(e){for(var t=["north","west","south","east"],n=t.length-1;n>=0;n--)e(t[n])},showMessage:function(e,t,n){var o=this.message;o&&(o.show(e,n),t&&o.hide(t))},hideMessage:function(e){var t=this.message;t&&t.hide(e)},setCanShowOptionCotent:function(e){this.canShowOptionCotent=e},mask:function(){this.maskElmt.show()},unmask:function(){this.maskElmt.hide()},rebuildFavorite:function(e){var t=this.collections.favorite.get(e),n=this.collections.favorite.indexOf(t);this._rebuildFavorite(t,n)},setFavoriteRoleV3:function(e){var t=this.collections.favorite,n=1,o=t.length,i=this.collections.visibleRoles.get(e)?this.collections.visibleRoles.get(e).get("appList"):"";this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:i}]).forEach(function(e){e.set("favoriteOrder",o+n),e.set("isFavorite",!0),t.add(e),n++}),t.saveFavorites()},setFavoriteAppsV3:function(e){var t=this.collections.favorite,n=1,o=t.length;this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"appIds",value:e}]).forEach(function(e){e.set("favoriteOrder",o+n),e.set("isFavorite",!0),t.add(e),n++}),t.saveFavorites()},setFavoriteApps:function(e,t){var n=this,o=document.querySelector(".my-apps-panel .accordion-item .delete-favorite .fonticon-trash"),i=this.collections.favorite,s=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"visibleQuadrant",value:!0},{key:"appIds",value:e}]);s&&o&&"none"===o.style.display&&(o.style.display=""),s.forEach(function(e){var o=e.isChildFamilyApp()&&e.getParentForChildrenFamilyApp()||"";o?(o.get("isFavorite")||n.addToFavorite(o,t),o.set("isFavorite",!0),t++):(e.get("isFavorite")||n.addToFavorite(e,t),e.set("isFavorite",!0),t++)}),a.isCompassV3()?this.getContent().getElement(".favorite").removeClassName("closed"):(this.getContent().getElement(".delete-favorite").hasClassName("hide")&&this.getContent().getElement(".delete-favorite").removeClassName("hide"),this.getContent().getElement(".my-favorite-apps-section").hasClassName("closed")&&this.getContent().getElement(".my-favorite-apps-section").removeClassName("closed")),document.body.getElements(".my-favorite-apps-section .item-view-v3").forEach(function(e,t){var n=e.getAttribute("data-id");i.get(n).set("favoriteOrder",t)}),i.saveFavorites()},reorderFavoriteApp:function(e){var t=this.collections.favorite.get(e);t&&this.views.favorite.reorderApp(t)},removeFavoriteApp:function(e){var t=this.collections.favorite,n=t.get(e),o=document.querySelector(".my-apps-panel .accordion-item .delete-favorite .fonticon-trash");n&&(n.set("isFavorite",!1),n.set("favoriteOrder",-1)),t.length<1&&o&&"none"!==o.style.display&&(o.style.display="none"),a.isCompassV3()&&t.length<1&&!this.getContent().getElement(".delete-favorite").hasClassName("hide")&&this.getContent().getElement(".delete-favorite").addClassName("hide"),t.saveFavorites()},removeAllFavoriteApp:function(){var e=this,t=this.collections.favorite,n=this.collection.filterApps([{key:"isRole",value:!1},{key:"lma",value:!1},{key:"isFavorite",value:!0}]),o=document.querySelector(".my-apps-panel .accordion-item .delete-favorite .fonticon-trash");n.forEach(function(t){t.set("isFavorite",!1),t.set("favoriteOrder",-1),e.removeToFavorite(t)}),o&&"none"!==o.style.display&&(o.style.display="none"),this.getContent().getElement(".delete-favorite").hasClassName("hide")||this.getContent().getElement(".delete-favorite").addClassName("hide"),t.saveFavorites()},toggleRole:function(e,t){if(!0===t||!1===t?e.set("active",t):e.set("active",!e.get("active")),!e.get("brand")){var n=this.roleV34Collection.find(function(t){return t.get("acronym")===e.get("process")&&!t.get("contact")});n&&("SSU"===e.get("process")?e.set("brand","SIMULIA"):e.set("brand",n.get("brand")))}},getVisibleHeight:function(e){return this.appsAccordion.getVisibleHeight(e)},showTempHeight:function(e,t){this.appsAccordion.showTempHeight(e,t)},resetCache:function(){Ce={}},hideTempHeight:function(e){this.appsAccordion.hideTempHeight(e)},closeSection:function(e){this.appsAccordion.closeSection(e)},isScrolling:function(){return this.appsAccordion.isScrolling()},stopScrolling:function(){this.appsAccordion.onScrollStop()},showDeleteZone:function(){var e;(e=this.getContent().getElement(".delete-favorite")).addClassName("show"),e.removeClassName("hide")},hideDeleteZone:function(){var e;(e=this.getContent().getElement(".delete-favorite")).removeClassName("active"),e.removeClassName("show")},changeRoles:function(){var e=this.collections.grantedRoles.getSelectedRoleApps();"2-0"!==me&&"2-1"!==me||this.filterAppsInViews(e),Ce&&Ce[me]?this.collections.visibleRoles.forEach(function(e){this.toggleRole(e,!0)},this):!Ce||"2-0"!==me&&"2-1"!==me||Ce["2-0"]||Ce["2-1"]||this._renderContentOnToggle(!0),this.dropDownPref&&this.dropDownPref.updateDropDownPref()},changeRolesVisible:function(){var e=this.collections.visibleRoles.getSelectedRoleApps();"0-0"===me&&this.filterAppsInViews(e),Ce&&Ce[me]?this.collections.visibleRoles.forEach(function(e){this.toggleRole(e,!0)},this):Ce&&!Ce[me]&&"0-0"===me&&this._renderContentOnToggle(!0),this.dropDownPref&&this.dropDownPref.updateDropDownPref()},_rebuildFavorite:function(e,t){var n=this,o=new H({model:e,additionalClassNameImage:e.get("brand")?"is-"+e.get("brand").replace(" ","-"):"",clickable:!0,additionalAttribute:{"data-favorite-order":e.get("favoriteOrder")},additionalClassName:"app-item drag-app",events:{onItemClick:function(e,t){n.clickApp(e,t)},onClickSettings:n.clickSettings.bind(n)}}).render(),i=Ce["0-0"].getElements(".my-favorite-apps-section .app-item,.exp-item"),s=i.detect(function(e,n){return n===t});s?o.inject(s,"before"):0===t?o.inject(Ce["0-0"].getElement(".content-wrapper .items-roles-view.compass-scroll-accordion-section.favorite.my-favorite-apps-section  .clearfix"),"before"):o.inject(i[i.length-1],"after")},addToFavorite:function(e,t){var n=this,o=new H({model:e,additionalClassNameImage:e.get("brand")?"is-"+e.get("brand").replace(" ","-"):"",clickable:!0,additionalAttribute:{"data-favorite-order":e.get("favoriteOrder")},additionalClassName:"app-item drag-app",events:{onItemClick:function(e,t){n.clickApp(e,t)},onClickSettings:n.clickSettings.bind(n)}}).render(),i=Ce["0-0"].getElements(".my-favorite-apps-section .app-item,.exp-item").detect(function(e,t){return e.hasClassName("exp-item")});i?o.inject(i,"before"):Ce["0-0"]&&!Ce["0-0"].getElement('.my-favorite-apps-section [data-id="'+e.get("id")+'"]')&&o.inject(Ce["0-0"].getElement(".content-wrapper .items-roles-view.compass-scroll-accordion-section.favorite.my-favorite-apps-section  .clearfix"),"before")},removeToFavorite:function(e){Ce["0-0"]&&Ce["0-0"].getElement('[data-id="'+e.get("id")+'"]')&&Ce["0-0"].getElement('[data-id="'+e.get("id")+'"]').destroy()}};return n.extend(Ne)}),define("DS/i3DXCompass/i3DXCompass",["UWA/Core","UWA/Controls/Abstract","UWA/Controls/Accordion","UWA/Controls/Scroller","UWA/Controls/ToolTip","UWA/Ajax","UWA/Data","UWA/Utils/InterCom","UWA/Event","UWA/Utils","UWA/Utils/Client","UWA/Json","UWA/Fx","UWA/Controls/Drag","UWA/Controls/Input","DS/i3DXCompass/Data","DS/i3DXCompass/Tools","DS/i3DXCompass/Collection/AppList","DS/i3DXCompass/Collection/SuggestionList","DS/i3DXCompass/View/MyApps","DS/i3DXCompass/DaemonManager","DS/i3DXCompass/EventManager","DS/i3DXCompass/InstallManager","DS/i3DXCompass/TopBarManager","DS/i3DXCompass/InterCom","DS/i3DXCompass/Controls/Compass","DS/UIKIT/Modal","DS/WebappsUtils/WebappsUtils","DS/i3DXCompass/X3DContent","DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompass/CacheManager","DS/i3DXCompass/Types","DS/i3DXCompass/UsageTracker","DS/i3DXCompass/i3DXCompassServices","DS/i3DXCompass/View/CompassOverlayView","DS/i3DXCompass/View/TopBarOverlayView","DS/i3DXCompass/View/CompassWrapperView31","DS/i3DXCompass/Collection/UserPreferencesCollection","DS/i3DXCompass/Feature"],function(e,t,n,o,i,s,a,l,r,c,d,p,u,m,h,f,g,v,C,b,y,S,w,D,E,A,I,N,k,T,P,_,O,x,U,R,M,L,F){"use strict";var B,X,W,V,q,j,Q,H,z,G,K,J=null,Z="north",Y="",$={},ee=[],te=function(e){return Q.getElement(e)},ne={},oe=e.i18n,ie={},se={},ae=!1,le=!1,re=!1,ce=!1,de=!1,pe=!1,ue=!1,me=[],he=[],fe=function(t,n,o){try{var i=document.body.getElement("."+n);i.addEvent("click",function(o){setTimeout(function(){document.querySelector(".my-apps-panel")&&!document.querySelector(".my-apps-panel").hasClassName("V2")&&(document.querySelector(".my-apps-panel").addClassName("V2"),document.querySelector("body").addClassName("compass-v2"))},300),c.Client.getSize().width<959?(K=new U({i3DXCompass:t,logoClassName:n,defaultQuadrant:g.getCurrentQuadrant(),openCompass:t.showAccordion})).render():de?H.dispatchEvent("onClose"):t.showAccordion(!0,Z),e.Event.stop(o)}),i.setStyle("cursor","pointer"),c.Client.getSize().width<959&&document.querySelector("body").addClassName("compass-v2"),i.addClassName(Z)}catch(e){setTimeout(function(){fe(t,n,o)},300)}},ge=function(e,t){var n=t||g.getCurrentQuadrant()||Y||Z;e&&ie.dispatchOpen(),de||(de=!0,B.onOpen(),F.isFastPortfolioNavigation()?(B._navigateToContentFast(function(){B.unmask(),ie.loadQuadrant(n),H.onOpenQuadrant(n)}),document.location.pathname.indexOf("/offers")>-1&&B.unmask()):(F.isPortfolioNavigation()&&!g.isSupportQuickLink()||H.onOpenQuadrant(n),ie.loadQuadrant(n)))},ve=function(t){return e.is(f.addinMode)&&e.is(f.addinMode.value)&&t.addin&&t.addin.detect(function(e){return e.toLowerCase()===f.addinMode.value.toLowerCase()})};return J="dsrtv:"===window.location.protocol?{closable:!1,closeOnLaunch:!1,lang:"en",myAppsBaseUrl:"",proxyTicketUrl:window.location}:{closable:!1,closeOnLaunch:!1,lang:"en",myAppsBaseUrl:"",proxyTicketUrl:c.buildUrl(c.composeUrl(e.extend(c.parseUrl(window.location),{anchor:""})),"api/passport/ticket?url=V6")},se.intercom={serverId:"com.ds.compass"},ie.initDrag=function(){var t,n,o,i,s,a,l,r,d,u,h,f,v,C,b,y=!0,S=!1,w=g.isCompassV3()?".content-wrapper .items-roles-view.compass-scroll-accordion-section.favorite.my-favorite-apps-section":".experience-list.favorite",D=null,E=!1,A=!1,I=!1,N=!1,k=!1,T=!1,P=!0,_=!1,x=null,U=g.isCompassV3ActiveGroup(),R=function(){u=d.getData("favorite-order"),(D=e.createElement("li",{class:"compass-app-drag-hover exp-item drop-favorite",html:{tag:"div",html:[{tag:"div",class:"fonticon fonticon-plus-circled add"},{tag:"div",text:oe("dropapphere"),class:"text"}]},"data-favorite-order":e.is(u,"number")?u:'"none"'})).inject(d,"before"),T&&n.removeClassName("empty"),r=window.setTimeout(function(){g.isCompassV3()||B.showTempHeight("my-favorite-apps-section",99),window.setTimeout(j.refreshCache,350)},700),!g.isCompassV3()&&v&&B.closeSection("my-roles-section"),_=!0},M=function(){j.createDropZoneToME&&(j.createDropZoneToME.getParent(),j.createDropZoneToME.destroy(),j.createDropZoneToME="",j.refreshCache())},L=function(){if(j.newDropZone&&event){var e=event.clientX,t=event.clientY,n=j.newDropZone.getSize().width,o=j.newDropZone.getSize().height,i=j.newDropZone.getOffsets().x,s=j.newDropZone.getOffsets().y;return e<n+i&&e>i&&t<o+s&&t>s}return!1},X=function(n){var o;if(!j.newDropZone||j.newDropZone&&!L()){o=e.createElement("div",{styles:{height:t.getSize().height,width:"100px",transition:"width 300ms"},class:"order-app compass-app-drag-hover"}),j.newDropZone=o,j.newDropZone.inject(n,function(){if(n){var e=event.clientX,t=(event.clientY,n.getSize().width),o=(n.getSize().height,n.getOffsets().x);return n.getOffsets().y,e-13<o?"before":t+o<e+13?"after":"bottom"}}()),j.refreshCache(),j.newDropZone.setStyle("width",t.getSize().width+"px"),window.setTimeout(function(){j.refreshCache()},350)}},q=function(){j.newDropZone&&!L()&&(j.newDropZone.style.width="0px",j.refreshCache(),window.setTimeout(function(){j.newDropZone&&(j.newDropZone.destroy(),j.newDropZone="")},150),window.setTimeout(function(){j.refreshCache()},350))},j=new m.Move({centerHandles:!0,snap:20,delegate:".drag-app, .drag-app > *",zones:g.isCompassV3()?w:".scroller-content .drag-app",handles:function(r){var c,p,u,m,b,D=r.target;if(k=!1,I=!1,N=!1,E=!1,o=!1,i=!1,T=!1,P=!0,_=!1,y=!0,!(document.querySelector(".favorite.my-favorite-apps-section.accordion-item")&&document.querySelector(".favorite.my-favorite-apps-section.accordion-item").hasClassName("active"))&&document.querySelector(".favorite.my-favorite-apps-section.accordion-item")&&document.querySelector(".favorite.my-favorite-apps-section.accordion-item").addClassName("active"),p=(t=D.hasClassName("drag-app")?D:D.getParent()).getSize().width,u=t.getSize().height,C=!!t.getParent(".portfolio-me-apps"),S=D.hasClassName("widget-item")||t.hasClassName("widget-item"),n=te(w),s=t.getAttribute("data-id"),a=t.getElement(".title")?t.getElement(".title").textContent:"",g.isCompassV3()&&(T=!!n&&n.hasClassName("empty"),n&&t.isInjected(n)?(l=n.getChildren().indexOf(t),t.getData("favorite-order"),x=e.createElement("div",{styles:{display:"none"}}).inject(document.body),t.inject(x),d=n.getChildren()[l],B.showDeleteZone(),A=!0):n&&(l=-1,n.getElement(e.String.format('[data-id="{0}"]',s))?P=!1:(d=n.getElement(".clearfix"),c=Q.getOffsets(),(v=!C&&t.getParent(".compass-scroll-accordion-section").hasClassName("my-roles-section"))?(h={x:c.x,y:t.getOffsets().y+3*t.getSize().height/2},f={width:Q.getSize().width,height:1e3}):(h={x:c.x,y:c.y},f={width:Q.getSize().width,height:t.getOffsets().y-c.y-t.getSize().height/2})),A=!1)),P&&l>=0&&R(),!g.isCompassV3()&&B.isScrolling()&&B.stopScrolling(),g.disableSelect(),window.setTimeout(j.refreshCache,1e3),g.isCompassV3()){S&&F.getPreferences().forceSelectTenant&&"forceSelectTenant"===(F.getPreferences()&&F.getPreferences().forceSelectTenant)&&t.getAttribute("data-data")&&!0===JSON.parse(t.getAttribute("data-data")).tenantAware&&""!==JSON.parse(t.getAttribute("data-data")).x3dPlatformId?(t.setAttribute("drag-enabled-force-select-tenant",!0),B.updateEnableWidgetDrag(t,!1,!0,s)):S&&F.getPreferences().forceSelectTenant&&"forceSelectTenant"!==(F.getPreferences()&&F.getPreferences().forceSelectTenant)&&t.getAttribute("data-data")&&!0===JSON.parse(t.getAttribute("data-data")).tenantAware&&""===JSON.parse(t.getAttribute("data-data")).x3dPlatformId&&t.getAttribute("drag-enabled-force-select-tenant")&&(t.removeAttribute("drag-enabled-force-select-tenant"),B.updateEnableWidgetDrag(t,!1,!1,s)),U&&t.getParent(".editMode")&&t.getParent(".editMode").getElement(".content-overlay-header")&&(m=t.getParent(".editMode").getElement(".content-overlay-header"),b=e.createElement("div",{class:"drop-manager-cancel",events:{mouseenter:function(){this.addClassName("hover")},mouseleave:function(){this.removeClassName("hover")}},html:'<div class="center"><span class="text">'+e.i18n("Drop here add to ME tab")+"</span></div>"}),j.createDropZoneToME=b,j.createDropZoneToME.inject(m),j.refreshCache());var O=e.clone(t);return O.getSize=t.getSize,O.setStyle=t.setStyle,O.setStyle("height",u),O.setStyle("width",p),O.querySelector(".icon-wrapper")&&O.querySelector(".icon-group")&&(O.querySelector(".icon-wrapper").setStyle=t.querySelector(".icon-group").setStyle,O.querySelector(".icon-wrapper").setStyle("width","64px"),O.querySelector(".icon-wrapper").setStyle("height","64px"),O.querySelector(".icon-group").setStyle=t.querySelector(".icon-group").setStyle,O.querySelector(".icon-group").setStyle("width","64px"),O.querySelector(".icon-group").setStyle("height","64px")),t.hasClassName("service")&&(O.querySelector(".portfolio-item-inner")&&(O.querySelector(".portfolio-item-inner").setStyle=t.querySelector(".portfolio-item-inner").setStyle,O.querySelector(".portfolio-item-inner").setStyle("height",t.querySelector(".portfolio-item-inner").getSize().height),O.querySelector(".portfolio-item-inner").setStyle("width",t.querySelector(".portfolio-item-inner").getSize().width)),O.querySelector(".portfolio-item-content-draggable")&&(O.querySelector(".portfolio-item-content-draggable").setStyle=t.querySelector(".portfolio-item-content-draggable").setStyle,O.querySelector(".portfolio-item-content-draggable").setStyle("height",t.querySelector(".portfolio-item-content-draggable").getSize().height),O.querySelector(".portfolio-item-content-draggable").setStyle("width",t.querySelector(".portfolio-item-content-draggable").getSize().width))),e.createElement("div",{class:t.hasClassName("service")?"compass-service-drag-icon":"compass-drag-icon",html:O}).inject(r.root)}return e.createElement("img",{class:"compass-drag-icon",src:t.getElement(".icon").src}).inject(r.root)},cancel:function(){return!0},stop:function(e){var n=[];b&&(clearInterval(b),b=""),N||(e.handles.destroy(),D&&D.destroy(),!I&&A&&(i?(t.remove(),B.removeFavoriteApp(s),O.removeAppToFavorite({appId:s,appName:a})):(e.zone&&e.zone.hasClassName("favorite")?B.reorderFavoriteApp(s):g.isCompassV3()&&B.rebuildFavorite(s),k=!0)),!k&&T&&te(w).addClassName("empty"),D=null,window.clearTimeout(r),g.isCompassV3()||window.setTimeout(function(){B.hideTempHeight(1)},500),x&&(x.destroy(),x=null),g.isCompassV3()&&B.getContent().getElement(".delete-favorite")&&B.hideDeleteZone(),U&&(e.zone&&e.zone.hasClassName("compass-app-drag-hover")&&e.zone.getAttribute("data-id")&&e.zone.removeClassName("compass-app-drag-hover"),j.newDropZone&&L()?(t.inject(j.newDropZone,"before"),q(),j.newDropZone.getParent(".items-roles-view")?(j.newDropZone.getParent(".items-roles-view").getElements("div").forEach(function(e,o){t.getAttribute("data-id")!==e.getAttribute("data-id")&&(e.getAttribute("data-id")?n.push({id:e.getAttribute("data-id"),type:e.getAttribute("data-type"),order:o}):n.push({id:t.getAttribute("data-id"),type:t.getAttribute("data-type"),order:o}))}),V.reorderPreference()):j.newDropZone.getParent(".portfolio-me-apps")&&j.newDropZone.getParent(".portfolio-me-apps").getElements("div").forEach(function(e,o){t.getAttribute("data-id")!==e.getAttribute("data-id")&&(e.getAttribute("data-id")?n.push(e.getAttribute("data-id")):n.push(t.getAttribute("data-id")))})):j.createDropZoneToME&&function(){if(j.createDropZoneToME&&event){var e=event.clientX,t=event.clientY,n=j.createDropZoneToME.getSize().width,o=j.createDropZoneToME.getSize().height,i=j.createDropZoneToME.getOffsets().x,s=j.createDropZoneToME.getOffsets().y;return e<n+i&&e>i&&t<o+s&&t>s}return!1}()&&(M(),V.addNewGroup({id:t.getAttribute("data-id"),type:"App"}),B.addAppMain(t.getAttribute("data-id"))),j.newDropZone&&q(),j.createDropZoneToME&&M()),g.enableSelect(),N=!0)},enter:function(e){E=!0,g.isCompassV3()||(t.getAttribute("data-id")===e.zone.getAttribute("data-id")||e.zone.hasClassName(".order-app")||(!j.newDropZone||L())&&j.newDropZone?t.getAttribute("data-id")===e.zone.getAttribute("data-id")?(e.zone.removeClassName("compass-app-drag-hover"),q()):e.zone&&e.zone.getAttribute("data-id")&&e.zone.hasClassName("compass-app-drag-hover")&&j.newDropZone&&L()?e.zone.removeClassName("compass-app-drag-hover"):q():(e.zone.addClassName("compass-app-drag-hover"),q()))},leave:function(e){D&&D.removeClassName("active"),g.isCompassV3()||((j.newDropZone&&!L()||!j.newDropZone)&&e.zone.getAttribute("data-id")&&e.zone.hasClassName("compass-app-drag-hover")?(e.zone.removeClassName("compass-app-drag-hover"),j.newDropZone||X(e.zone)):j.newDropZone&&!L()?q():j.newDropZone||t.getAttribute("data-id")===e.zone.getAttribute("data-id")||X(e.zone)),o=!1,E=!1},drop:function(n){if(!I){var r,c=D?D.getData("favorite-order"):null,d=e.is(c,"number")?c:W.max("favoriteOrder").get("favoriteOrder")+1,p=[];return!i&&U?(t.getAttribute("data-id")===n.zone.getAttribute("data-id")||n.zone.hasClassName(".order-app")?n.zone.hasClassName(".order-app")&&(n.zone.getParent(".items-roles-view")?n.zone.getParent(".items-roles-view").getElements("div").forEach(function(e,n){t.getAttribute("data-id")!==e.getAttribute("data-id")&&p.push(e.getAttribute("data-id")||t.getAttribute("data-id"))}):n.zone.getParent(".portfolio-me-apps")):"favorite"===n.zone.getAttribute("data-id")?"Role"===t.getAttribute("data-type")?B.setFavoriteRoleV3(t.getAttribute("data-id")):"App"===t.getAttribute("data-type")&&B.setFavoriteAppsV3([t.getAttribute("data-id")]):B.createGroup({id:t.getAttribute("data-id"),type:t.getAttribute("data-type")},{id:n.zone.getAttribute("data-id"),type:n.zone.getAttribute("data-type")}),j.newDropZone&&q()):(i||(l>=0?(t.inject(D,"before"),o&&B.setFavoriteApps([s],d),k=!0):o&&(t.hasClassName("role")||"Role"===t.getAttribute("data-type")?(r=W.get(t.getAttribute("data-id")),B.setFavoriteApps(r.get("appList"),d),B.toggleRole(r,!0)):B.setFavoriteApps([s],d),k=!0),I=!0),"-1"===t.getAttribute("data-favorite-order")&&(e.is(r)?O.addRoleToFavorite({roleId:s,roleName:a}):O.addAppToFavorite({appId:s,appName:a}))),!1}},move:function(n){var s,a={x:n.startOrigin.x+n.currentDelta.x,y:n.startOrigin.y+n.currentDelta.y};if(g.isCompassV3()&&(c.Client.getSize().height<a.y+t.getSize().height/2?(s=document.querySelector(".my-apps-panel .no-native-scrollbars.scroller-content, .my-apps-panel .native-scrollbars.scroller-content"),b&&(clearInterval(b),b=""),s.scrollHeight>c.Client.getSize().height&&s.scrollTop<s.scrollHeight&&(b||(s.scroll({top:s.scrollTop+36}),j.refreshCache()),b=setInterval(function(){s.scroll({top:s.scrollTop+36}),j.refreshCache()},250))):a.y<273?function(){var e=document.querySelector(".my-apps-panel .no-native-scrollbars.scroller-content, .my-apps-panel .native-scrollbars.scroller-content");b&&(clearInterval(b),b=""),e.scrollHeight>c.Client.getSize().height&&e.scrollTop>39&&(b||(e.scroll({top:e.scrollTop-36}),j.refreshCache()),b=setInterval(function(){e.scroll({top:e.scrollTop-36}),j.refreshCache()},250))}():b&&(clearInterval(b),b="")),!t.hasClassName("service")&&g.isCompassV3()&&(c.Client.getSize().width>640||y)&&P&&!_&&g.isOverElement(a,h,f)&&R(),A){var l=B.getContent().getElement(".delete-favorite"),r=l.getOffsets(),d=l.getSize();g.isOverElement(a,r,d)?(l.addClassName("active"),i=!0):(l.removeClassName("active"),i=!1)}if(E){var u,m,v,C,S,w,I,N=n.placeholderCache.length;if(D){var k=D.getOffsets(),T=D.getSize();g.isOverElement(a,k,T)?(D.addClassName("active"),o=!0):(D.removeClassName("active"),o=!1)}for(u=0;u<N;u++)if(!(C=(m=n.placeholderCache[u]).element).hasClassName("drop-favorite")&&!C.hasClassName("clearfix")&&D&&(v=C.getSize(),S=m.position,g.isOverElement(a,S,v))){a.x>S.x+v.width/2?(I=(w=C.nextSibling)?w.getData("favorite-order"):null,D.inject(C,"after")):(I=C.getData("favorite-order"),D.inject(C,"before")),D.setAttribute("data-favorite-order",e.is(I,"number")?p.encode(I):'"none"'),j.refreshPlaceholderCache();break}}}})},ie.manageNewGrantedRole=function(){var e=[];G&&(G.forEach(function(t){var n=B.container.getElement(".exp-item[data-id="+t+"true]");n&&(e.push(n),n.addClassName("grow"),n.setStyles("opacity","0"))}),setTimeout(function(){e.forEach(function(e){e.setStyle("opacity",1).setStyle("transition","all .5s ease-in-out").removeClassName("grow")})},100),setTimeout(function(){e.forEach(function(e){e.setStyle("transition",null)}),G=null},500))},ie.initDefaultTranslate=function(){oe({unableinstalldata:"Unable to retrieve install data",erroroccurred:"An error occurred",noinstall:"Application is not installed.",createshortcut:"Create Desktop Shortcut",launching:"Launching {0}",remoting:"Remoting {0}",errorsavingpreferences:"An error occurred while saving the preferences",creatingshortcut:"Creating Desktop Shortcut for {0}",selectionupdated:"Your selection has been updated",shortcutcreated:"Shortcut Created",install:"Install {0}",shortcutcreatingerror:"Shortcut Creating Error",launchingerror:"{0} Launching Error",remotingerror:"{0} Remoting Error",installprocess:"Install {0}",installallgranted:"Install All Granted Roles",installallcontaining:"Install All Roles Containing {0}",updateallprocesses:"Update All Roles",update:"Update {0}","3dexperienceinstallation":"3DEXPERIENCE Installation",installationerror:"Installation Error",sessionExpirationTitle:"Your session has expired. A new login is required.",installationerrordiskspace:"Installation Error: Not enough disk space for download",installationcancelled:"Installation Cancelled",errorcode225:"Uninstallation Error: Please check all related process are killed",errorcode141:"The Environment Configuration File file is invalid",errorcode227:"The uninstallation process has been cancelled.","3dexperienceUninstallation":"3DEXPERIENCE Uninstallation",installationsuccess:"Installation Success",launchinginstallation:"Launching Installation",uninstallationsuccess:"Uninstallation Success",lauchingUninstallation:"Launching Uninstallation",clickinstall:"Install Now",remoteit:"Remote Mode",ok:"OK",readyinstallation:"{0} is ready to be installed",readyupdate:"{0} is ready to update your installation",updateavailable:"Update available",updateneeded:"Update needed",newprocessesavailable:"New roles available",orinstallrelated:"Or",nbcompleteupdgraded:"NB: the complete installation will be upgraded to {0}",instfilelocation:"Installation File Location",javainstallation:"Java Installation",javanotinstalled:"The required Java Runtime Environment is not installed on this computer.",pleaseinstalljava:"Please install it now, both 32bit and 64bit versions.",dropapphere:"Drop your app here",dropfavoriteappshere:"Drop your favorite apps here",missingprocesses:"Missing Roles",missingprocessesreloaded:"Some roles are missing. The Compass has been reloaded.",searchapps:"Search Apps",supportmode:"Support Mode",supportactivated:"Support Mode is activated for recording system traces.",wantsupport:"Do you want to start the app with support mode?",yes:"Yes",no:"No",cancel:"Cancel",removeapp:"Remove App",Close:"Close",continue:"Continue",proceedanyway:"Update later",welcomelauncher:"Welcome to the 3DEXPERIENCE Launcher",launcherfirstvisit:"If this is your first visit to the 3DEXPERIENCE platform, please download and install the 3DEXPERIENCE Launcher.",downloadlauncherclicking:"Click the button below:",downloadlauncher:"Download 3DEXPERIENCE Launcher",startselfupdate:"Start update now",installlauncherrunning:"Run the downloaded file to start install.",installldownload:"Run the downloaded file to start install.",youcaninstallrun:"You can now install new apps or run those already installed.",clickcontinue:"Click {0}Continue{1}.",downloadlauncheradmin:"If the 3DEXPERIENCE Launcher is not installed on your machine, please contact your administrator to install it.",updatelauncheradmin:"Please contact your administrator to install the update.",alreadyinstalledlauncher:"If you have already installed the 3DEXPERIENCE Launcher, one of the following issues may be preventing it from working:",launchernotstarted:"The 3DEXPERIENCE Launcher is not started.",portchanged:"The port number used by the 3DEXPERIENCE Launcher may have changed or a firewall or anti-virus software may be blocking the port.",changeport:"If required, enter the new one:",portunreachable:"The provided port is unreachable.",launcherupdate:"Update 3DEXPERIENCE Launcher",downloadupdateclicking:"Click the button bellow:",updateinfos:"A new update of 3DEXPERIENCE Launcher is available ({0}version {2} / {3}MB{1}).",startselfupdateclicking:"Start launcher update by clicking here:",installupdaterunning:"Install the update by running the downloaded file: {0}",selfupdaterunning:"Wait for the update to finish.",selfupdateerror:"Unable to update 3DEXPERIENCE Launcher. Please try again or download and install manually.",checksystrayicon:"Check that the 3DEXPERIENCE Launcher icon {0} is available in the Windows system tray.",dontseelaunchermenu:"If you do not see 3DEXPERIENCE Launcher on the menu, please contact your administrator.",clicksystrayicon:"In the system tray, right-click the 3DEXPERIENCE Launcher {0}",copyportnumber:"Copy the port number.",pasteportnumber:"Paste it in the field.",troubleshootbtn:"Troubleshooting",launcherbusyretry:"The 3DEXPERIENCE Launcher is currently performing an action. Please retry later.",launcherunavailable:"The 3DEXPERIENCE Launcher is currently unavailable. Please try again later.",canrequest:"You can request this role from your Administrator.",requeston:"Request on {0}",alreadyrequestedplatforms:"{0} has already been requested on all platforms.",alreadyrequested:"{0} has already been requested.",noadditionalinfo:"No additional information for this role",request:"Request",requestfailure:"Request Failure",trialrequestfailure:"Trial Request Failure",tryit:"Try it",tryiton:"Try it on {0}",myroles:"My Roles",installationerroraccess:"Installation Error: Unable to access the Installation File Location",youcaninstallandlaunch:"You can now install new apps or run those already installed.",installallcontentavailable:"Install all additional content",installalladditionalresources:"Install all additional resources",additionalcontentavailable:"Additional content available",additionalresources:"Additional Resources",uninstall:"Uninstall",clickRemoveFavorite:"Click to remove all your favorite apps. </br> Or drag & drop any favorite app to remove it.",confirmRemoveFavorite:"Are you sure you want to remove all your favorite apps?","Remove all favorite Apps":"Remove all favorite Apps",confirmation:"Confirmation","3DEXPERIENCEMarketplace":"3DEXPERIENCE Marketplace",Remove:"Remove",Cancel:"Cancel",wrapperRole:"3DEXPERIENCE Roles & Apps",DassaultSystemesCommunities:"Dassault Systemes Communities",MyCommunityServices:"My Community Services",MyEnterpriseServices:"My Enterprise Services",DefaultInstallationLocation:"Default",outdated_installation_uninstall:"An outdated installation has been detected on your computer.",outdated_installation_uninstall_warning:"To install the new version, <b>the outdated installation will be uninstalled automatically.</b>",launcherdiagnostics:"You can also run diagnostic tests from the 3DEXPERIENCE Launcher Options",updateoptionalcontentnow:"Update Optional Content Now",installoptionalcontentnow:"Install Optional Content Now",newoptionalcontent:"New Optional Content Available",installOptionalContentOfAllRolesContaining:"Install Optional Content Of All Roles Containing {0}",updateOptionalContentOfAllRolesContaining:"Update Optional Content Of All Roles Containing {0}",compassTooltipv3:"Roles, Apps & Solutions portfolio",AUDIENCES:"AUDIENCES","LEARNING EXPERIENCES":"LEARNING EXPERIENCES","RELATED ROLES":"RELATED ROLES","My Favorite Apps":"My Favorite Apps","My Apps":"My Apps",Industries:"Industries","Check Out":"Check Out","Sub-Domains":"Sub-Domains",Solutions:"Solutions",Apps:"Apps",Processes:"Processes",Compass_ME:"ME",COMPANY:"COMPANY",WORLD:"WORLD",WE:"WE","As a System of Operations":"As a System of Operations","As a Business Model":"As a Business Model","Contact us":"Contact us",Search:"Search",Buy:"Buy",BUY:"BUY",isLockInstallationUpdate:"Installation of applications update are locked by your Administrators",isLockInstallation:"Installation of new applications are locked by your Administrators",isLockUninstallation:"Uninstallation of applications are locked by your Administrators","Compact Apps":"Compact Apps","Large Apps":"Large Apps","All Company Roles are granted to you.":"All Company Roles are granted to you.","Role requested, awaiting validation":"Role requested, awaiting validation","Back to {0}":"Back to {0}",Back:"Back",Details:"Details","Role has been requested.":"Role has been requested.","Know more about {0}":"Know more about {0}",Domains:"Domains",Roles:"Roles","SUCCESS STORY":"SUCCESS STORY","On-premises":"On-premises","On-cloud ":"On-cloud ","Call Us":"Call Us","Contact Sales":"Contact Sales","INDUSTRY SOLUTION EXPERIENCE":"INDUSTRY SOLUTION EXPERIENCE","Learn more":"Learn more","Discover also":"Discover also","Clear Search":"Clear Search","Social & Collaborative":"Social & Collaborative","3D Modeling":"3D Modeling",Simulation:"Simulation","Information Intelligence":"Information Intelligence","Other English countries: +800 379 78 361":"Other English countries: +800 379 78 361","India: 1800 200 9276":"India: 1800 200 9276","USA & Canada: 1855 696 1125":"USA & Canada: 1855 696 1125","Please select an availability type: On-premises / On-cloud":"Please select an availability type: On-premises / On-cloud","My 3DEXPERIENCE - {0}":"My 3DEXPERIENCE - {0}","My 3DEXPERIENCE - {0} - {1}":"My 3DEXPERIENCE - {0} - {1}","View Cart":"View Cart","{0} items":"{0} items",userassistance:"User Assistance","Select Platform at App launch":"Select Platform at App launch",Preferences:"Preferences","Platform selection":"Platform selection",OFFERS:"OFFERS",Download:"Download","Current Platform":"Current Platform",Platform:"Platform","Clear search":"Clear search",Audiences:"Audiences","All with Platform confirmation at App launch":"All with Platform confirmation at App launch","Apps layout":"Apps layout","All Platforms":"All Platforms",All:"All","Select platform …":"Select platform …","Roles & Apps display":"Roles & Apps display","Discover Business Experiences":"Discover Business Experiences","You don't have any Roles related to Business Experiences":"You don't have any Roles related to Business Experiences","My Business Methods":"My Business Methods","My Cockpits":"My Cockpits",About:"About",downloadlauncherRpm:"File .rpm (Redhat/CentOS)",downloadlauncherDeb:"File .deb (Debian/Ubuntu)","Are you sure you want to uninstall <b>{0}</b> ({1})?":"Are you sure you want to uninstall <b>{0}</b> ({1})?","Are you sure you want to uninstall <b>{0}</b> ({1}) and {2} related Apps?":"Are you sure you want to uninstall <b>{0}</b> ({1}) and {2} related Apps?","Are you sure you want to uninstall <b>{0}</b> ({1}) and <i>{2}</i> Apps?":"Are you sure you want to uninstall <b>{0}</b> ({1}) and <i>{2}</i> Apps?"})},ie.initTranslate=function(t,n){var o=J.lang,i=0,s=e.is(P._getUser())?3:2,l=function(){(i+=1)===s&&(i=0,t())},r=N.getWebappsAssetUrl("i3DXCompass",e.String.format("lang/{0}.json",o)),c={timeout:15e3,method:"GET",type:"json",onComplete:function(t){e.log("loaded "+o+" translations"),oe(t),g.setShowCustom(!0),g.setCompassVersion("V34"),f.request({url:f.getFeatureCompass,Accept:"text/plain",onComplete:function(e){e&&e.portfolio&&("https://drtbebqlk4bjh.cloudfront.net/21x"===e.portfolio&&(e.portfolio="https://drtbebqlk4bjh.cloudfront.net/21xFD03"),g.setPortfolioUrl(e.portfolio),e.contactFormConfiguration&&F.setContactFormConfiguration(e.contactFormConfiguration)),l()},onFailure:function(){l()}}),e.is(P._getUser())&&f.request({url:f.getPreferencesUserUrl,type:"json",Accept:"text",urlParams:{name:"compass-settings"},onComplete:function(e){e?e.forceSelectTenant?F.setPreferences(e):(e.forceSelectTenant=f.selectedPlatform?"currentPlatform":"allPlatform",F.setPreferences(e)):(e={forceSelectTenant:f.selectedPlatform?"currentPlatform":"allPlatform"},F.setPreferences(e)),l()},onFailure:function(){l()}}),x.getPlatformServices({onComplete:function(e){e&&(g.setIsMultiTenant(e.length>1),g.setTenantList(e)),l()},onFailure:function(){l()}})},onFailure:function(n){if(n instanceof TypeError)throw n;e.log("Failed to load "+o+" translations"),"en"!==o?(o="en",g.setLang(o),r=N.getWebappsAssetUrl("i3DXCompass",e.String.format("lang/{0}.json",o)),a.request(r,c)):t()}};"#_key"===o&&(o="en",oe=function(){}),a.request(r,c)},ie.handleQuadrantClick=function(e){(!g.isSupportQuickLink()||document.body.hasClassName&&document.body.hasClassName("support-quick-link-fix-mobile-app"))&&(E.fireEvent("compassEvent",{quadrant:e}),T.publish("compassEvent",{quadrant:e}),g.setCurrentQuadrant(e)),("play"!==e||g.isCompassV3())&&(g.isCompassV2()||(de||(de=!0,B.onOpen(),ie.dispatchOpen()),ie.loadQuadrant(e)))},ie._refreshSectionStates=function(e,t){e.north.closed=t.north[0].closed,e.west.closed=t.west[0].closed,e.south.closed=t.south[0].closed,e.east.closed=t.east[0].closed,t.north&&t.north[1]&&(e.lma.closed=t.north[1].closed),e.favorite.closed=t.favorite.closed,e.roles.closed=t.roles.closed,e.suggestions.closed=t.suggestions.closed,t.services&&(e.services.closed=t.services.closed),t.eservices&&(e.eservices.closed=t.eservices.closed),e.wrapperMP.closed=t.wrapperMP.closed,e.wrapperRole.closed=t.wrapperRole.closed},ie.loadQuadrant=function(t){var n=function(e,t){pe=!0,"undefined"!=typeof compassRichWithCef&&(pe=!0),re&&pe&&B&&B.resetCache&&(pe=!1,B.resetCache(),H.open&&B._restCacheRebuild&&B._restCacheRebuild()),e&&w.invalidateProductList(),B.manageRoleSectionDisplay(),ie.manageNewGrantedRole()};Y=t,z=window.clearTimeout(z),re?ce?(B.displayQuadrant(Y),W.fetch({onComplete:function(e,t){t.eservices&&B.views.eservices&&(B.views.eservices.collection.set(t.eservices.data),B.views.eservices.render()),B.setCanShowOptionCotent(t.contentInstallation),F.setLockInstallation(t.lockInstallation),F.setLockInstallationUpdate(t.lockInstallationUpdate),F.setLockUninstallationUpdate(t.lockUninstallation),ie._refreshSectionStates(X,t),void 0!==t.requestRole&&F.canRequestRole()!==t.requestRole&&(F.setRequestRole(t.requestRole),B.updateCompanyNav(t.requestRole)),n(t.changed,t.changed)},onFailure:function(){B.showMessage(oe("erroroccurred"),5e3),B.unmask(),n(!1)}})):(B.mask(),W.fetch({onComplete:function(e,t){ce=!0,B.displayQuadrant(Y),B.unmask(),B.setCanShowOptionCotent(t.contentInstallation),F.setLockInstallation(t.lockInstallation),F.setLockInstallationUpdate(t.lockInstallationUpdate),F.setLockUninstallationUpdate(t.lockUninstallation),void 0!==t.requestRole&&F.canRequestRole()!==t.requestRole&&(F.setRequestRole(t.requestRole),B.updateCompanyNav(t.requestRole)),n(t.changed,t.changed)},onFailure:function(){B.showMessage(oe("erroroccurred"),5e3),B.unmask(),n(!1)}})):W.fetch({onComplete:function(t,o){if(F.setCloud(o.cloud),void 0!==o.requestRole&&F.setRequestRole(o.requestRole),X?ie._refreshSectionStates(X,o):(X={north:{title:o.north[0].title,closed:o.north[0].closed,noapps:o.north[0].noapps,icon:!0},west:{title:o.west[0].title,closed:o.west[0].closed,noapps:o.west[0].noapps,icon:!0},south:{title:o.south[0].title,closed:o.south[0].closed,noapps:o.south[0].noapps,icon:!0},east:{title:o.east[0].title,closed:o.east[0].closed,noapps:o.east[0].noapps,icon:!0},lma:o.north&&o.north[1]?{title:o.north[1].title,closed:o.north[1].closed,noapps:"",icon:!1}:null,favorite:{title:o.favorite.title,closed:o.favorite.closed,noapps:"",icon:!0},roles:{title:o.roles.title,closed:o.roles.closed,noapps:o.roles.noroles,icon:!0},suggestions:{title:o.suggestions.title,closed:o.suggestions.closed,icon:!1},services:o.services,eservices:o.eservices,wrapperMP:{title:o.wrapperMP.title,closed:o.wrapperMP.closed,icon:!1},wrapperRole:{title:o.wrapperRole.title,closed:o.wrapperRole.closed,icon:!1}},e.log("onCompassLoaded"),S.dispatchEvent("onCompassLoaded")),B.setCanShowOptionCotent(o.contentInstallation),F.setLockInstallation(o.lockInstallation),F.setLockInstallationUpdate(o.lockInstallationUpdate),F.setLockUninstallationUpdate(o.lockUninstallation),o.config&&o.config.launcherUrl&&o.config.launcherUrl[0]&&""!==o.config.launcherUrl[0].url&&y.setLauncherConfig(o.config.launcherUrl[0].url),o.config&&o.config.catEnv&&o.config.catEnv[0]&&""!==o.config.catEnv[0].dir&&y.setCatEnvConfig(o.config.catEnv),o.config&&o.config.registryUrl&&(f.registryUrl=o.config.registryUrl),o.config&&o.config.scripts&&o.config.scripts.length>0&&y.setScriptsConfiguration(o.config.scripts),de){if(!re){var i=[];g.getTenantList().forEach(function(e,t){e.platformId&&i.push(e.platformId)}),f.getBusinessExperienceUrl({platform:i},function(e){g.setBusinessExperienceAvailable(e&&e.length>0),B.renderAppsView(X)})}re=!0,ce=!0,B.displayQuadrant(Y),B.unmask()}le||(le=!0,g.isCompassV3()?H.setQuadrantNames({north:oe("Social & Collaborative"),west:oe("3D Modeling"),south:oe("Simulation"),east:oe("Information Intelligence"),play:oe("compassTooltipv3")}):H.setQuadrantNames({north:o.north[0].title,west:o.west[0].title,south:o.south[0].title,east:o.east[0].title,play:o.play[0].title}),f.onlineInstallUrl=o.install,f.clusterId=o.clusterId,f.buildTransactionId=o.build,w.init(o.cloud),f.cloud=o.cloud,y.init(j,o.cloud),me.forEach(function(e){setTimeout(e,0)}),me.length=0,he.forEach(function(e){setTimeout(e,0)}),he.length=0,J.topBarId&&B.initTopBar()),n(o.changed)},onFailure:function(){B.renderErrorView(oe("erroroccurred")),B.unmask(),n(!1)}})},se.initialize=function(t){e.log("initializing Compass"),!t.platform&&g.isBetaModeActivated("switch-tenant")&&window.location.hostname&&(t.platform=window.location.hostname.slice(0,window.location.hostname.indexOf("-"))),J=e.merge(t,J),g.setCompassVersion(t.version&&"v2"===t.version.toLowerCase()?"V32":t.version),g.setSupportQuickLink(t.version),g.setCurrentQuadrant(g.isCompassV2()||g.isCompassV3()?t.defaultQuadrant:Z),Z=g.isCompassV2()||g.isCompassV3()?t.defaultQuadrant:Z,t.locale&&F.setPortolioUrlLocale(t.locale),P.setup(J.userId,J.lang),g.setLang(J.lang),E.initialize(se.intercom.serverId,{onSetObject:se.setObject,onResetObject:se.resetObject,onLaunchApp:se.launchApp,onSetStructure:se.setStructure,onResetStructure:se.resetStructure,onShowAccordion:se.showAccordion,onHideAccordion:se.hideAccordion,onSetX3DContent:se.setX3DContent,onResetX3DContent:se.resetX3DContent}),T.subscribe("setObject",se.setObject),T.subscribe("resetObject",se.resetObject),T.subscribe("launchApp",se.launchApp),T.subscribe("installApp",se.installApp),T.subscribe("detectInstallApp",se.detectInstallApp),T.subscribe("resetPlay",se.resetPlay),T.subscribe("activatePlay",se.activatePlay),T.subscribe("search",se.completeInputSearch),T.subscribe("resetQuadrant",se.resetQuadrant),T.subscribe("setStructure",se.setStructure),T.subscribe("resetStructure",se.resetStructure),T.subscribe("setTypes",se.setTypes),T.subscribe("resetTypes",se.resetTypes),T.subscribe("setX3DContent",se.setX3DContent),T.subscribe("resetX3DContent",se.resetX3DContent),"function"===e.typeOf(J.launchOnSameDomain)&&(g.setCustomFunction("customLaunchWebApp",J.launchOnSameDomain),delete J.launchOnSameDomain),"function"===e.typeOf(J.enableWidgetDrag)&&(g.setCustomFunction("enableWidgetDrag",J.enableWidgetDrag),delete J.enableWidgetDrag),"function"===e.typeOf(J.instanciateWidget)&&(g.setCustomFunction("instanciateWidget",J.instanciateWidget),delete J.instanciateWidget),"function"===e.typeOf(J.onRoleChange)&&(g.setCustomFunction("onRoleChange",J.onRoleChange),delete J.onRoleChange),"function"===e.typeOf(J.onOpen)&&(ie.onOpen=J.onOpen,delete J.onOpen),"function"===e.typeOf(J.onClose)&&(ie.onClose=J.onClose,delete J.onClose),-1===J.proxyTicketUrl.indexOf("?")?J.proxyTicketUrl+="?t=":J.proxyTicketUrl+="&t=",J.myAppsBaseURL&&(J.myAppsBaseUrl=J.myAppsBaseURL,delete J.myAppsBaseURL,e.log("Compass: myAppsBaseURL init option is deprecated. Please use myAppsBaseUrl instead.")),"function"===e.typeOf(J.setPanelMode)&&(F.compassPanelSize=J.setPanelMode),de=!1,ie.initDefaultTranslate(),J.compassTarget?(j=e.extendElement(document.getElementById(J.compassTarget)))||e.log("Compass: this compass target markup is not available!"):e.log("Compass: you must provide a target for Compass (compassTarget)!"),H=new A({closable:J.closable,defaultQuadrant:Z,events:{onOpenQuadrant:function(e){g.isCompassV3(),ie.handleQuadrantClick(e)},onCloseCompassOverlayView:function(){K.closeCompassV2FullSize(!0)},onClose:function(){F.isNativeApplicationEnvironment()||F.isMobileAppEnvironnementV2()||(B.onClose(),ie.dispatchClose(),z=window.clearTimeout(z),de=!1),g.isCompassV3()&&g.getCurrentQuadrant()&&(E.fireEvent("compassEvent",{quadrant:g.getCurrentQuadrant()}),T.publish("compassEvent",{quadrant:g.getCurrentQuadrant()}),g.setCurrentQuadrant(g.getCurrentQuadrant()))}}}).inject(j),F.isPortfolioNavigation()?(j.hide(),setTimeout(function(){H.inject(j)},300)):H.inject(j),f.initialize(J,j),g.isCompassV2()&&fe(this,t.logoClassName,t.defaultQuadrant),ie.initTranslate(function(){J.topBarId&&!g.isCompassV3()&&D.init({topBarId:J.topBarId,onRoleChange:function(e,t){var n=W.get(e);n&&B.toggleRole(n,t)}}),W=new v(null,{comparator:"title"}),V=new L([],{comparator:"order"}),q=new C,g.isCompassV3()?(H.initTranslate(),document.querySelector(".topbar-compass")?(document.querySelector(".topbar-compass").addClassName("compass-v3"),g.isSupportQuickLink()&&document.querySelector(".topbar-compass").addClassName("support-quick-link")):document.querySelector("#compass-container")&&document.querySelector("#compass-container").addClassName("compass-v3"),B=new M({buildSearch:!0,closable:J.closable,collection:W,sugCollection:q,preferencesCollection:V,closeOnLaunch:J.closeOnLaunch,reLoadQuadrant:function(e){ie.loadQuadrant(e)},filter:{}}),F.supportPushState()&&T.subscribe("navigateToContent",function(){document.location.pathname.indexOf("compass-world")>-1&&(ge(!0),B._goHome(),setTimeout(function(){B._navigateToContent(document.body.getElement(".portfolio.portfolio-depth1"))},500))}),T.subscribe("navigateToHome",function(){B._goHome()})):B=new b({closable:J.closable,collection:W,sugCollection:q,closeOnLaunch:J.closeOnLaunch}),B.addEvent("onClose",function(){F.isNativeApplicationEnvironment()||F.isMobileAppEnvironnementV2()||(H.onClose(),ie.dispatchClose(),z=window.clearTimeout(z),de=!1)}),g.isSmartphone()&&(g.isCompassV2()||g.isCompassV3()||g.isCompassV3()||(B.addEvent("onScrollTop",function(){H.switchCompassView(!1)}),B.addEvent("onScrollDown",function(){H.switchCompassView(!0)})),H.addEvent("onUnScroll",function(e){0!==B.appsAccordion.scrolled&&B.appsAccordion.unScroll(0)})),(Q=e.extendElement(document.getElementById(J.appsTarget)))&&B.render().inject(Q),S.addEvent("onMissingProcess",function(){if(!ue){ce=!1,ie.loadQuadrant(Y),ue=!0;var e=new I({className:"compass-modal compass-modal-missing",closable:!0,visible:!0,events:{onHide:function(){ue=!1,e.destroy()}},header:"<h4>"+oe("missingprocesses")+"</h4>",body:oe("missingprocessesreloaded")}).inject(document.body)}}),ie.initDrag(),F.isPortfolioNavigation()||ie.loadQuadrant(""!=Y?Y:Z),document.location.pathname.indexOf("compass-world")>-1&&ge(!0),J.closable&&"undefined"==typeof compassRichWithCef||ge(""!=Y?Y:Z),T.publish("private.viewIsReady",{});require(["DS/PlatformAPI/PlatformAPI"],function(e){e.subscribe("com.ds.compass:onGrantedRole",function(e){W.lastId=void 0,ce=!1,x._private.reset(),B.resetCache&&(pe=!0,B.resetCache()),ie.loadQuadrant(Y)}),e.subscribe("MpfCartUpdated",function(e){B.refreshBascketFooter(e.nbItems>0)})}),ae=!0,f.get3DDashboardUrl(),document.location.pathname.indexOf("compass-world")>-1&&ge(!0),T._initCefSubscriberIfNeeded()},t.version)},ie._manageUrlNavigation=function(t){var n=document.location.pathname;0===n.indexOf("/world/")&&e.log(n)},se.showAccordion=ge,ie.dispatchOpen=function(){E.fireEvent("compassPanelOnShow",{}),T.publish("compassPanelOnShow",{}),ie.onOpen&&ie.onOpen()},se.hideAccordion=function(e){de&&(H.onClose(),B.onClose(),z=window.clearTimeout(z),de=!1),e&&ie.dispatchClose()},se.resetQuadrant=function(t){g.isSupportQuickLink()&&(e.log("Compass: resetPlay play quadrant"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),H.resetQuadrant())},se.resetPlay=function(t){if(!g.isCompassV2()){var n={onComplete:function(){e.log("onComplete"),T.publish("resetPlayCallback",t)}};e.log("Compass: resetPlay play quadrant"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),H.onActivePlay(!1,t,n)}},se.activatePlay=function(t){if(!g.isCompassV2()){var n={onComplete:function(){e.log("onComplete"),T.publish("activatePlayCallback",t)}};e.log("Compass: active play quadrant"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),H.onActivePlay(!0,t,n)}},se.completeInputSearch=function(t){if(ae){e.log("Compass: complete Input Search"),e.log("query = "+t.query),ge(!0),B.completeInputSearch(t)}},ie.dispatchClose=function(){B&&B.resetCache&&(pe=!0,B.resetCache()),E.fireEvent("compassPanelOnHide",{}),T.publish("compassPanelOnHide",{}),ie.onClose&&ie.onClose()},se.isInitialized=function(){return ae},se.setObject=function(t){var n;e.log("Compass: set object"),e.log(t),"object"===e.typeOf(t)?(JSON.stringify(t)!==JSON.stringify(ne)&&B.showMessage(oe("selectionupdated"),5e3),(ne=t).hasOwnProperty("cstorage")&&!ne.hasOwnProperty("envId")&&(ne.envId=ne.cstorage),ne.hasOwnProperty("cspace")&&!ne.hasOwnProperty("contextId")&&(ne.contextId=ne.cspace),(n=ne.serviceId)&&"string"==typeof n&&n.trim()||console.warn("setObject without key: serviceId is deprecated, please provide the source id of the object")):ne={},se.resetStructure(),se.resetTypes(),W.setObject(ne)},se.resetObject=function(){e.log("Compass: reset object"),ne={},W.resetObject()},se.setX3DContent=function(t){e.log("Compass: set content"),e.log(t),"object"===e.typeOf(t)&&0!==Object.keys(t).length&&(k.setX3DContent(t),T.publish("setX3DContentCallback",t))},se.resetX3DContent=function(){e.log("Compass: reset content");k.setX3DContent({})},se.installApp=function(t){var n={onComplete:function(){T.publish("installAppCallback",t)},onFailure:function(n){t=e.merge(t,n),T.publish("installAppCallback",t)}};e.log("Compass: install App"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),B.handleInstallAppEvent(t,n)},se.detectInstallApp=function(t){var n={onComplete:function(){T.publish("detectInstallAppCallback",t)},onFailure:function(n){t=e.merge(t,n),T.publish("detectInstallAppCallback",t)}};e.log("Compass: detect install App"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),B.handleInstallDetectionEvent(t,n,!0)},se.launchApp=function(t){e.log("Compass: launch App"),e.log("appId = "+t.appId),e.log("widgetId = "+t.widgetId),e.log("silent = "+t.silent),e.log("fileName = "+t.fileName),e.log("fileContent = "+t.fileContent);var n={widgetId:t.widgetId,appId:t.appId,response:"",origin:t.origin},o={onComplete:function(){e.log("COMPLETE"),n.response="COMPLETE",E.fireEvent("launchApp",n),t._PUB_SUB_ID&&(n._PUB_SUB_ID=t._PUB_SUB_ID),T.publish("launchAppCallback",n)},onFailure:function(o){var i=o.error;e.log(i),n.response=i,E.fireEvent("launchApp",n),t._PUB_SUB_ID&&(n._PUB_SUB_ID=t._PUB_SUB_ID),T.publish("launchAppCallback",n)}};B.handleLaunchAppEvent(t,o)},se.setStructure=function(t){e.log("Compass set structure"),e.log(t),"object"===e.typeOf(t)&&"string"===e.typeOf(t.structure)?(se.resetObject(),se.resetTypes(),y.setStructure(t.structure)):y.resetStructure()},se.resetStructure=function(){e.log("reset structure"),y.resetStructure()},se.setTypes=function(t){e.log("Compass set Types"),e.log(t),"object"===e.typeOf(t)?(_.set(t),se.resetStructure(),W.resetObject()):_.reset()},se.resetTypes=function(){e.log("reset Types"),_.reset()},se.getAppInfo=function(t){var n;t&&t.appId&&"function"===e.typeOf(t.onComplete)?(n=function(){var n=se._private._getAppList().get(t.appId),o=n?e.clone(n.toJSON()):void 0;if(!0===e.is(f.addinMode)&&o&&o.apps&&o.apps.length>1){var i=[];o.apps.forEach(function(e){ve(e)&&i.push(e)}),o.apps=i}if(n&&void 0!==n.object&&n.object.envId)n.get("platforms")&&n.get("platforms").detect(function(e){return e.id===n.object.envId})&&(o.platformId=n.object.envId);else if(window.location.hash){var s={};if(window.location.hash.substring(1,window.location.hash.length).split("/").forEach(function(e){var t=e.split(":");s[t[0]]=t[1]}),s.content){var a=s.content.split("=");if(a.length>1){var l={};try{l=JSON.parse(decodeURIComponent(a[1]))}catch(t){e.log(t)}l&&l.data&&l.data.items&&l.data.items[0]&&l.data.items[0].envId&&(o.platformId=l.data.items[0].envId)}}}!o&&$[t.appId]&&(o=$[t.appId]),o&&e.is(o.trusted)&&!0===o.trusted?t.onComplete(o):(ee[t.appId]||(ee[t.appId]=[]),ee[t.appId].push(t),1===ee[t.appId].length&&f.request({url:f.getAppInfoUrl,urlParams:{id:t.appId},onComplete:function(e){e&&($[t.appId]=e),ee[t.appId].forEach(function(t){t.onComplete(e)}),ee[t.appId]=null},onFailure:function(){throw ee[t.appId].forEach(function(e){o&&(o.error=!0),e.onComplete(o)}),ee[t.appId]=null,new Error("No config found for App:"+t.appId)}}))},se._private._isAppsDataInitialized()?n():me.push(n)):t&&"function"===e.typeOf(t.onComplete)&&t.onComplete(new Error("Mandatory params are missing"))},se.getAppsInfo=function(t){var n;t&&"function"===e.typeOf(t.onComplete)?(n=function(){var n=[];t.data&&"array"===e.typeOf(t.data)?t.data.forEach(function(t){var o=se._private._getAppList().get(t),i=o?o.toJSON():void 0;if(!0===e.is(f.addinMode)&&i&&i.apps&&i.apps.length>1){var s=[];i.apps.forEach(function(e){ve(e)&&s.push(e)}),i.apps=s}i&&e.is(i.trusted)&&!0===i.trusted&&n.push(i)}):se._private._getAppList().forEach(function(t){t&&e.is(t.get("trusted"))&&!0===t.get("trusted")&&n.push(t)}),t.onComplete(n)},se._private._isAppsDataInitialized()?n():he.push(n)):t&&"function"===e.typeOf(t.onComplete)&&t.onComplete(new Error("Mandatory params are missing"))},se.getBusinessMethodApps=function(t){var n;t&&"function"===e.typeOf(t.onComplete)&&(n=function(){var e=[];se._private._getAppList().forEach(function(t){t.get("businessMethod")&&e.push(t.toJSON())}),t.onComplete(e)},se._private._isAppsDataInitialized()?n():he.push(n))},se.getBusinessExperiences=function(t){t&&"function"===e.typeOf(t.onComplete)&&function(){t.onComplete([])}()},se.searchApplication=function(t){var n;t&&"function"===e.typeOf(t.onComplete)&&(n=function(){var e={count:0,data:[]};se._private._getAppList().forEach(function(n){var o=n.get("id"),i=n.get("title"),s=n.get("platforms")&&0===n.get("platforms").length||n.get("platforms")&&n.get("platforms").detect(function(e){return e.id.toLowerCase()===f.selectedPlatform.toLowerCase()}),a=["north","west","south","east"].indexOf(n.get("quadrant"))>-1,l=t.query,r=t.limit||3;o&&a&&s&&(o.toLowerCase().replace(/(false|true)$/,"")===l.toLowerCase()||i&&i.toLowerCase().indexOf(l.toLowerCase())>-1)&&(e.data.length<r&&e.data.push({id:n.get("id"),title:n.get("title"),type:n.get("type"),icon:n.get("icon"),brand:n.get("brand"),tooltip:n.get("tooltip")}),e.count+=1)}),t.onComplete(e)},se._private._isAppsDataInitialized()?n():he.push(n))},se.onRoleChange=function(e,t){var n;e?(n=W.findWhere({process:e},{granted:!0}))&&B.toggleRole(n,t):(ce=!1,de&&ie.loadQuadrant(Y))},se._private={_setQuadrant:function(e){Y=e,H&&(H.currentQuadrant=e)},_getMyAppsView:function(){return B},_getAppList:function(){return W},_isAppsDataInitialized:function(){return le},_loadQuadrant:ie.loadQuadrant},se}),define("i3DXCompass/i3DXCompass",["DS/i3DXCompass/i3DXCompass"],function(e){"use strict";return e}),define("DS/i3DXCompass/ServiceApi/GrantedRolesApi",["UWA/Core","DS/i3DXCompass/i3DXCompass","DS/i3DXCompass/EventManager","DS/i3DXCompass/Data","DS/i3DXCompass/Collection/AppList","DS/i3DXCompass/CacheManager"],function(e,t,n,o,i,s){"use strict";var a,l=[],r=function(e){l.forEach(function(t){setTimeout(t,0,e)}),l.length=0},c=function(){var e=[],n=a||t._private._getAppList();return n&&n.forEach(function(t){(function(e){return e.isRole()&&!0===e.get("granted")&&"CUSTOM"!==e.get("id")})(t)&&e.push({id:t.get("process"),name:t.get("title"),platforms:t.get("grantedPlatforms")})}),e},d=function(){r(c()),n.removeEvent(d)};return{getGrantedRoles:function(t){t&&"function"===e.typeOf(t)&&function(t){var r=c();r.length>0?t(r):(l.push(t),n.addEventOnce("onCompassLoaded",d),"undefined"!=typeof COMPASS_CONFIG&&COMPASS_CONFIG.myAppsBaseUrl&&!a&&(o.initialize(COMPASS_CONFIG),s.setup(COMPASS_CONFIG.userId,COMPASS_CONFIG.lang),(a=new i).fetch({onComplete:function(){n.dispatchEvent("onCompassLoaded",d)},onFailure:function(){e.log("AppList: onFailure")}})))}(t)},_private:{callbacks:l,fireCallbacks:r}}});