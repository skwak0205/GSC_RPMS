define("DS/VCXKeyFramer/VCXObjectAnimation",["UWA/Class"],function(t){"use strict";var e=t.extend({init:function(){this._Tracks={},this._AnimatedTracks=null,this._scenario=null},unInitialize:function(){for(var t in this._scenario=null,this._AnimatedTracks=null,this._Tracks)this._Tracks.hasOwnProperty(t)&&this._Tracks[t].unInitialize()},SetScenario:function(t){this._scenario=t},GetScenario:function(){return this._scenario},SetBoostDirty:function(){this._AnimatedTracks=null,this._scenario&&this._scenario.SetBoostDirty()},GetListTrackNames:function(t){for(var e in this._Tracks)if(this._Tracks.hasOwnProperty(e)){var i=e;t.push(i)}},AddTrack:function(t,e){e&&(this.SetBoostDirty(),this._Tracks[t]=e,e.SetObjectAnimation(this))},GetTrack:function(t){return t in this._Tracks?this._Tracks[t]:null},GetMaxFrame:function(){var t=0;for(var e in this._Tracks)if(this._Tracks.hasOwnProperty(e)){var i=this._Tracks[e].GetMaxFrame();i>t&&(t=i)}return t},RemoveTrack:function(t){this.SetBoostDirty();var e=this._Tracks[t];e&&e.SetObjectAnimation(null),delete this._Tracks[t]},GetTrackNumber:function(){var t=0;for(var e in this._Tracks)this._Tracks.hasOwnProperty(e)&&t++;return t},RemoveConstantTracks:function(){this.SetBoostDirty();var t=[];for(var e in this._Tracks){if(this._Tracks.hasOwnProperty(e))console.log("     "+e),this._Tracks[e].IsConstant()&&t.push(e)}for(var i=0;i<t.length;i++)this.RemoveTrack(t[i]),console.log("  RemoveTrack("+t[i]+")")},Clone:function(){var t=new e,i=[];this.GetListTrackNames(i);for(var r=0;r<i.length;r++){var a=i[r],n=this.GetTrack(a);if(n){var s=n.Clone();t.AddTrack(a,s)}}return t}});return e}),define("DS/VCXKeyFramer/VCXKeyFramer",["UWA/Class","DS/VCXWebTracks/VCXInterpolatorConstant","DS/VCXWebTracks/VCXInterpolatorLinear","DS/VCXWebTracks/VCXInterpolatorCubic","DS/VCXWebTracks/VCXInterpolatorCylindrical","DS/VCXWebProperties/VCXPropertyMap","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyMapNeutrals"],function(t,e,i,r,a,n,s,o,l,h){"use strict";return t.extend({init:function(t){this._modifiableServer=t,this._restoreSet={},this._Neutrals=new h(this._restoreSet),this._DefaultInterpolators={},this._Interpolators=[new e,new i,new r,new a],this._contextMngr=null},unInitialize:function(){this._modifiableServer.unInitialize(),this._modifiableServer=null,this._restoreSet={},this._Neutrals=null,this._DefaultInterpolators={},this._Interpolators=[]},SetDefaultInterpolator:function(t,e){this._DefaultInterpolators[t]=e},GetDefaultInterpolator:function(t){var e=this._DefaultInterpolators[t];return void 0===e?this._Interpolators[1]:e>2?this._Interpolators[0]:this._Interpolators[e]},AddNeutrals:function(t,e){this._modifiableServer.AddModifiable(t);var i=t.GetHashing();this._Neutrals.AddOrModifyPropertySet(i,e)},RemoveNeutrals:function(t){this._Neutrals.RemovePropertySet(t)},GetNeutrals:function(t){return this._Neutrals.GetPropertySet(t)},RestoreNeutralPropertiesOneModifiable:function(t,e){var i=this._restoreSet[t];if(i){var r=this._modifiableServer.GetModifiableFromHashing(t);if(!1!==r.IsLiving()){var a=this._Neutrals.GetPropertySet(t);if(a){for(var n in i)if(i.hasOwnProperty(n)){var s=null;if(e){var o=e.GetTrack(n);o&&(s=o.GetKey(0))}if(s);else{var l=a.GetProperty(n);if(l){var h=l.GetPropertyValue();r.OnChangeProperty(n,h)}}}if(r.GetVirtualProperties){var f=r.GetVirtualProperties();for(var n in f)if(f.hasOwnProperty(n)){var c=r.GetInterpolator(n);null==c&&(c=this.GetDefaultInterpolator(n));var u=c.GetInterpolatedValue(a,n,0,null);if(u){r.OnChangeProperty(n,u,{})}}}r.OnChangePropertiesEnd(),this.EmptyRestoreSetOneModifiable(r)}else console.log("Properties has been changed but neutrals not found!")}}},AddPropertyToRestoreSet:function(t,e){this._restoreSet[t]||(this._restoreSet[t]={}),this._restoreSet[t][e]=!0},EmptyRestoreSetOneModifiable:function(t){if(t){var e=t.GetHashing();if(this._restoreSet.hasOwnProperty(e))t.GetRequiredPropertiesForTransition()||delete this._restoreSet[e]}},InitRestoreSetFromNeutrals:function(t){var e=[];t?e.push(t):this._Neutrals.GetListModifiables(e);for(var i=0;i<e.length;i++){var r=e[i],a=this._Neutrals.GetPropertySet(r);if(a)for(var n in a._map)a._map.hasOwnProperty(n)&&this.AddPropertyToRestoreSet(r,n)}},InitRestoreSetforPlay:function(t){for(var e in t._animations)if(t._animations.hasOwnProperty(e)){var i=t._animations[e];if(i){var r=[];i.GetListTrackNames(r);for(var a=0;a<r.length;a++){var n=r[a];this.AddPropertyToRestoreSet(e,n)}}}},RestoreNeutralProperties:function(t){var e=[];this._Neutrals.GetListModifiables(e);for(var i=0;i<e.length;i++){var r,a=e[i];t&&(r=t.GetObjectAnimation(a)),this.RestoreNeutralPropertiesOneModifiable(a,r)}},UpdatePropertiesOneModifiable:function(t,e,i,r,a){var n=0,s=this._modifiableServer.GetModifiableFromHashing(i);if(!s)return n;if(null===t._AnimatedModifiables&&!1===s.IsLiving())return 0;var o=this._Neutrals.GetPropertySet(i),l=t._animations[i];if(l){var h={};if(a)h[a]=!0;else if(h=t.GetAnimatedTracksForBlockRange(l,r),s.GetVirtualProperties){var f=s.GetVirtualProperties();for(var c in f)f.hasOwnProperty(c)&&(h[c]=!0)}for(var c in h){var u=s.GetInterpolator(c);if(null==u&&(u=this.GetDefaultInterpolator(c)),"Actor.Pulse.Type"===c&&u.SetRangeChanged(!1),this._contextMngr)if(this._contextMngr.getOpenSMGXML())if(!o.GetProperty(c)){var d=s.GetProperty(c);o.AddOrModifyProperty(d),this.AddNeutrals(s,o)}var v=u.GetInterpolatedValue(o,c,e,l._Tracks);if(v){var _={};u.GetRangeChanged&&(_.rangeChanged=u.GetRangeChanged()),s.OnChangeProperty(c,v,_),n++}}n>0&&s.OnChangePropertiesEnd()}return n},UpdateProperties:function(t,e,i,r){var a=t.GetBlockRangeToJumpToFrame(e);if(i)this.UpdatePropertiesOneModifiable(t,e,i,a,r);else{var n=t.GetAnimatedModifiablesForRange(a);for(var s in n){if(n.hasOwnProperty(s))this._modifiableServer.GetModifiableFromHashing(s)&&this.UpdatePropertiesOneModifiable(t,e,s,a,r)}}},UpdateProperty:function(t,e,i,r){var a=this._modifiableServer.GetModifiableFromHashing(i);if(a){var n=this._Neutrals.GetPropertySet(i),s=t._animations[i];if(s){if(s.GetTrack(r)){var o=a.GetInterpolator(r);null==o&&(o=this.GetDefaultInterpolator(r));var l=o.GetInterpolatedValue(n,r,e,s._Tracks);l&&a.OnChangeProperty(r,l)}a.OnChangePropertiesEnd()}}},GetPropertiesAtTimeZero:function(t){var i=new e,r=new n,a=this._modifiableServer.GetHashTable();for(var h in a)if(a.hasOwnProperty(h)){var f=h,c=null;if(t.GetApplyNeutralAtGoToScenario()&&(c=this._Neutrals.GetPropertySet(f))){var u=new l;for(var d in c._map)c._map.hasOwnProperty(d)&&u.AddOrModifyProperty(c._map[d]);r.AddOrModifyPropertySet(f,u)}var v=t.GetObjectAnimation(f);if(v)for(var _ in v._Tracks)if(v._Tracks.hasOwnProperty(_)){v.GetTrack(_);var p=i.GetInterpolatedValue(c,_,0,v._Tracks);if(p){var m=new s(new o(_,0),p);r.AddOrModifyProperty(f,m)}}}return r},GetPropertiesOneModifiableAtTimeZero:function(t,i){var r=new l;if(!i||!t)return r;var a=new e,n=i.GetHashing(),h=null;t.GetApplyNeutralAtGoToScenario()&&(h=this._Neutrals.GetPropertySet(n))&&(r=h.Clone());var f=t.GetObjectAnimation(n);if(f)for(var c in f._Tracks)if(f._Tracks.hasOwnProperty(c)){f.GetTrack(c);var u=a.GetInterpolatedValue(h,c,0,f._Tracks);if(u){var d=new s(new o(c,0),u);r.AddOrModifyProperty(d)}}return r},SetContextMngr:function(t){this._contextMngr=t}})}),define("DS/VCXKeyFramer/VCXScenarioVisibility",["UWA/Class","DS/VCXWebVisibility/VCXIVisibility"],function(t,e){"use strict";var i=t.extend({init:function(){this._visibilityMap={},this._visibilityMapCollab={},this._mode=0},GetMode:function(){return this._mode},SetMode:function(t){this._mode=t},Empty:function(){this._visibilityMap={},this._visibilityMapCollab={}},GetVisibles:function(){var t=[];for(var i in this._visibilityMap)this._visibilityMap.hasOwnProperty(i)&&this._visibilityMap[i]===e.EVisState.Visible&&t.push(i);return t},GetInvisibles:function(){var t=[];for(var i in this._visibilityMap)this._visibilityMap.hasOwnProperty(i)&&this._visibilityMap[i]===e.EVisState.Hidden&&t.push(i);return t},GetVisibleCollabs:function(){var t=[];for(var i in this._visibilityMapCollab)this._visibilityMapCollab.hasOwnProperty(i)&&this._visibilityMapCollab[i]===e.EVisState.Visible&&t.push(i);return t},AddVisibles:function(t){for(var i=0;i<t.length;i++)this._visibilityMap[t[i]]=e.EVisState.Visible},AddInvisibles:function(t){for(var i=0;i<t.length;i++)this._visibilityMap[t[i]]=e.EVisState.Hidden},AddVisibleCollabs:function(t){for(var i=0;i<t.length;i++)this._visibilityMapCollab[t[i]]=e.EVisState.Visible},AddVisibleToGroups:function(t){if(t){t.IsRenderable&&t.IsRenderable()||(this._visibilityMap[t.GetID()]=e.EVisState.Visible);for(var i=t.QueryInterface("VCXIModelNavigable").getChildren(),r=0;r<i.length;r++){var a=i[r];a&&this.AddVisibleToGroups(a.GetObject())}}},AddVisibleToDescendants:function(t){if(t){this._visibilityMap[t.GetID()]=e.EVisState.Visible;for(var i=t.QueryInterface("VCXIModelNavigable").getChildren(),r=0;r<i.length;r++){var a=i[r];a&&this.AddVisibleToDescendants(a.GetObject())}}},AddVisible:function(t){t&&(this._visibilityMap[t.GetID()]=e.EVisState.Visible)},RemoveVisible:function(t){t&&delete this._visibilityMap[t.GetID()]},AddInvisibleToDescendants:function(t){if(t){this._visibilityMap[t.GetID()]=e.EVisState.Hidden;for(var i=t.QueryInterface("VCXIModelNavigable").getChildren(),r=0;r<i.length;r++){var a=i[r];a&&this.AddInvisibleToDescendants(a.GetObject())}}},AddInvisible:function(t){t&&(this._visibilityMap[t.GetID()]=e.EVisState.Hidden)},RemoveInvisible:function(t){t&&delete this._visibilityMap[t.GetID()]},AddVisibleCollab:function(t){this._visibilityMapCollab[t.GetID()]=e.EVisState.Visible},RemoveVisibleCollab:function(t){delete this._visibilityMapCollab[t.GetID()]},FindVisibleCollab:function(t){return this._visibilityMapCollab[t]===e.EVisState.Visible?1:-1},IsVisibleWithParents:function(t){var i=t.GetID(),r=-1;if(t.IsKindOf("VCXWebComponentOccurrence")&&!t.IsDressup){var a=this._visibilityMap[i];a===e.EVisState.Hidden?r=0:a===e.EVisState.Visible&&(r=1),-1===r&&(2===this._mode?r=1:1===this._mode?r=0:0===this._mode&&(r=-1))}else this._visibilityMapCollab[i]===e.EVisState.Visible&&(r=1);return r},Clone:function(t){var e=new i;return e.SetMode(t.GetMode()),e.AddVisibles(t.GetVisibles()),e.AddInvisibles(t.GetInvisibles()),e.AddVisibleCollabs(t.GetVisibleCollabs()),e}});return i}),define("DS/VCXKeyFramer/VCXScenario",["UWA/Class","DS/VCXWebTracks/VCXKey","DS/VCXKeyFramer/VCXScenarioVisibility","DS/VCXKeyFramer/VCXObjectAnimation","DS/VCXWebTracks/VCXTrack","DS/WebRBTree/WebRBIterator","DS/CoreEvents/Events"],function(t,e,i,r,a,n,s){"use strict";var o=t.extend({init:function(){this._IsEMSDirty=!0,this._animations={},this._visibility=new i,this._bApplyNeutralAtGoToScenario=!0,this._bIsTransition=!1,this._bZoomFitAll=!1,this._maxFrameOverride=null,this._maxFrameCache=null,this._CurrentFrame=0,this._sequenceMaxFrame=null,this._markersTrack=new a,this._currentMarkerSequence="",this._AnimatedModifiables=null,this._AnimatedModifiablesMaxFrame=0,this._AnimatedModifiablesNbBlocks=200,this._LastBlock=0,this._bIsBounce=!1,this._bIsLoop=!1,this._bIsReverse=!1,this._bIsBouncing=!1,this._speed=1,this._scenarioType=o.EScenarioType.Scenario,this._docId=-1},IsEMSDirty:function(){return this._IsEMSDirty},SetEMSDirty:function(t){this._IsEMSDirty=t},unInitialize:function(){for(var t in this._AnimatedModifiables=null,this._visibility=null,this._animations){if(this._animations.hasOwnProperty(t))this._animations[t].unInitialize()}this._animations={},this._markersMap={}},SetBoostDirty:function(){this.SetEMSDirty(!0),this._maxFrameCache=null,this._AnimatedModifiables=null,this._LastBlock=0},SetDocId:function(t){this._docId=t},GetDocId:function(){return this._docId},SetCurrentFrame:function(t){this._CurrentFrame=t,s.publish({event:"VCX_UPDATE_MARKER_SEQ",data:{time:t,scenarioID:this.GetID()}})},GetCurrentFrame:function(){return this._CurrentFrame},SetIsTransition:function(t){void 0!==t&&(this._bIsTransition=t)},GetIsTransition:function(){return this._bIsTransition},SetIsBounce:function(t){void 0!==t&&(this._bIsBounce=t)},GetIsBounce:function(){return this._bIsBounce},SetIsLoop:function(t){void 0!==t&&(this._bIsLoop=t)},GetIsLoop:function(){return this._bIsLoop},SetIsReverse:function(t){void 0!==t&&(this._bIsReverse=t)},GetIsReverse:function(){return this._bIsReverse},SetIsBouncing:function(t){void 0!==t&&(this._bIsBouncing=t)},GetIsBouncing:function(){return this._bIsBouncing},SetSpeed:function(t){void 0!==t&&(this._speed=t)},GetSpeed:function(){return this._speed},GetType:function(){return this.componentType},GetVisibility:function(){return this._visibility},SetVisibility:function(t){this.SetEMSDirty(!0),this._visibility=t},SetZoomFitAll:function(t){this._bZoomFitAll=t},GetZoomFitAll:function(){return this._bZoomFitAll},SetApplyNeutralAtGoToScenario:function(t){this._bApplyNeutralAtGoToScenario=t},GetApplyNeutralAtGoToScenario:function(){return this._bApplyNeutralAtGoToScenario},AddObjectAnimation:function(t,e){t?(this._animations[t]=e,this.SetBoostDirty(),e&&e.SetScenario(this)):console.log("HASHING EMPTY in VCXScenario::AddObjectAnimation")},RemoveObjectAnimation:function(t){this.SetBoostDirty();var e=this._animations[t];e&&e.SetScenario(null),delete this._animations[t]},GetObjectAnimation:function(t){return t in this._animations?this._animations[t]:null},GetListModifiables:function(t){for(var e in this._animations)if(this._animations.hasOwnProperty(e)){var i=e;t.push(i)}},HasAnimation:function(){for(var t in this._animations)if(this._animations.hasOwnProperty(t)){var i=t,r=this.GetObjectAnimation(i),a=[];r.GetListTrackNames(a);for(var n=0;n<a.length;n++){var s=a[n],o=r.GetTrack(s),l=0;if(void 0!==o)if(1===(l=o._treekeys.size)){var h=new e;if(h.SetFrame(0),null===o._treekeys.lowerBound(h).data())return!0}else if(l>1)return!0}}return!1},SetMaxFrame:function(t){this._maxFrameOverride=t},GetMaxFrame:function(){if(null!==this._maxFrameOverride)return this._maxFrameOverride;if(this._maxFrameCache)return this._maxFrameCache;var t=0;for(var e in this._animations)if(this._animations.hasOwnProperty(e)){var i=e,r=this.GetObjectAnimation(i).GetMaxFrame();r>t&&(t=r)}return this._maxFrameCache=t,t},RemoveConstantTracks:function(){this.SetBoostDirty();var t=[];for(var e in this._animations)if(this._animations.hasOwnProperty(e)){console.log("scanning "+e);var i=this._animations[e];i.RemoveConstantTracks(),0===i.GetTrackNumber()&&t.push(e)}for(var r=0;r<t.length;r++)this.RemoveObjectAnimation(t[r])},InitForPlay:function(t){for(var i in this._animations)if(this._animations.hasOwnProperty(i)){var r=i,a=this.GetObjectAnimation(r),n=t._modifiableServer.GetModifiableFromHashing(r);if(!n)continue;var s=[];a.GetListTrackNames(s);for(var o=t.GetNeutrals(r),l=0;l<s.length;l++){var h=s[l],f=a.GetTrack(h);if(void 0!==f){if(f.GetKey(0))continue;if(o)if(o.GetProperty(h))continue;var c=new e;c.SetFrame(0),c.SetValue(n.GetProperty(h).GetPropertyValue().Clone()),c.SetIsVolatile(!0),f.AddKey(c)}}}},ClearVolatileKeys:function(){for(var t in this._animations)if(this._animations.hasOwnProperty(t)){var e=t,i=this.GetObjectAnimation(e),r=[];i.GetListTrackNames(r);for(var a=0;a<r.length;a++){var n=r[a],s=i.GetTrack(n);if(void 0!==s){var o=s.GetKey(0);o&&o.GetIsVolatile()&&s.RemoveKey(0)}}}},SetPropertyMapAtFrame:function(t,i){for(var n in this.SetBoostDirty(),t._map)if(t._map.hasOwnProperty(n)){var s=t.GetPropertySet(n);for(var o in s._map)if(s._map.hasOwnProperty(o)){var l=s.GetProperty(o),h=l.GetPropertyInfo().GetBehaviorType();if(2===h||1===h&&0!==i)continue;var f=l.GetPropertyValue(),c=this.GetObjectAnimation(n);c||(c=new r,this.AddObjectAnimation(n,c));var u=c.GetTrack(o);u||(u=new a,c.AddTrack(o,u));var d=new e;d.SetFrame(i),d.SetValue(f),u.AddKey(d)}}},EmptyObjectAnimation:function(){this.SetBoostDirty();var t=[];this.GetListModifiables(t);for(var e=0;e<t.length;e++){var i=t[e];this.RemoveObjectAnimation(i)}},Clone:function(t){t?t.EmptyObjectAnimation():t=this._experienceBase.Factory.BuildComponent("VCXScenario");var e=[];this.GetListModifiables(e);for(var i=0;i<e.length;i++){var r=e[i],a=this.GetObjectAnimation(r).Clone();t.AddObjectAnimation(r,a)}var n=this.GetVisibility(),s=n.Clone(n);t.SetVisibility(s);var o,l=this.QueryInterface("VCXIModifiable");l&&(o=l.GetProperties());var h=t.QueryInterface("VCXIModifiable");if(h&&o)for(var f in o._map)if(o._map.hasOwnProperty(f)){var c=o.GetProperty(f);h.OnChangeProperty(f,c.GetPropertyValue().Clone())}return h.OnChangePropertiesEnd(),t},CloneObjAnim:function(t){if(t){this.EmptyObjectAnimation();var e=[];t.GetListModifiables(e);for(var i=0;i<e.length;i++){var r=e[i],a=t.GetObjectAnimation(r).Clone();this.AddObjectAnimation(r,a)}}},ResetRangeCache:function(){for(var t in this._animations)if(this._animations.hasOwnProperty(t)){var e=t,i=this.GetObjectAnimation(e),r=[];i.GetListTrackNames(r);for(var a=0;a<r.length;a++){var n=r[a];i.GetTrack(n).ResetRangeCache()}}},SetSequenceMaxFrame:function(t){this._sequenceMaxFrame=t},GetSequenceMaxFrame:function(){return this._sequenceMaxFrame},SetScenarioType:function(t){this._scenarioType=t},GetScenarioType:function(){return this._scenarioType},SetName:function(t){this._name!==t&&(this._name=t,s.publish({event:"VCX_SCENARIO_NAME_CHANGED",data:this}))},GetName:function(){return this._name},SortMarkers:function(){var t=[],e=Object.keys(this._markersMap);return e.sort(function(t,e){return t-e}),e.forEach(function(e){t.push(e)}),t},AddMarker:function(t,i){var r=new e;r.SetFrame(t),r.SetValue(i.GetID()),this._markersTrack.AddKey(r)},RemoveMarker:function(t){this._markersTrack.RemoveKey(t)},GetTrackMarkers:function(){return this._markersTrack},GetCurrentMarkerSequence:function(){return this._currentMarkerSequence},SetCurrentMarkerSequence:function(t){this._currentMarkerSequence=t},GetAnimatedTracksForBlockRange:function(t,e){var i={},r=t._AnimatedTracks;if(r&&e)for(var a=e.start;a<=e.end;a++){var n=r[a];for(var s in n)n.hasOwnProperty(s)&&(i[s]=!0)}else for(var s in t._Tracks)t._Tracks.hasOwnProperty(s)&&(i[s]=!0);return i},GetBlockRangeToJumpToFrame:function(t){var e;if(this._AnimatedModifiables){(e={}).start=this._LastBlock;var i=Math.floor(t*this._AnimatedModifiablesNbBlocks/this._AnimatedModifiablesMaxFrame);if(i>=this._AnimatedModifiablesNbBlocks&&(i=this._AnimatedModifiablesNbBlocks-1),e.end=i,this._LastBlock=i,e.start>e.end){var r=e.start;e.start=e.end,e.end=r}}return e},GetAnimatedModifiablesForRange:function(t){var e={};if(this._AnimatedModifiables&&t)for(var i=t.start;i<=t.end;i++){var r=this._AnimatedModifiables[i];for(var a in r)r.hasOwnProperty(a)&&(e[a]=!0)}else for(var a in this._animations)this._animations.hasOwnProperty(a)&&(e[a]=!0);return e},BuildAnimatedModifiablesSets:function(t){this._AnimatedModifiablesMaxFrame=this.GetMaxFrame();for(var e in this._AnimatedModifiablesNbBlocks=Math.floor(this._AnimatedModifiablesMaxFrame/30*2)+1,this._AnimatedModifiablesNbBlocks>200&&(this._AnimatedModifiablesNbBlocks=200),this._AnimatedModifiables=[],this._animations)if(this._animations.hasOwnProperty(e)){var i=e;(T=this.GetObjectAnimation(i))._AnimatedTracks=[];var r=t._modifiableServer.GetModifiableFromHashing(i);if(!1===r.IsLiving())continue;var a=[];T.GetListTrackNames(a);for(var s=0;s<a.length;s++){var o=a[s],l=T.GetTrack(o)._treekeys,h=new n(l),f=h.next(),c=!0,u=null;if(null!==f){var d=r.GetInterpolator(o);if(null==d&&(d=t.GetDefaultInterpolator(o)),d)if("VCXInterpolatorLinear"!==(u=d.GetType())&&"VCXInterpolatorConstant"!==u)u=null;else{var v=f.GetValue().GetType();"VCXPropertyValueEnum"!==v&&"VCXPropertyValueHyperlinkId"!==v&&"VCXPropertyValueBoolean"!==v&&"VCXPropertyValueString"!==v&&"VCXPropertyValueDocId"!==v&&"VCXPropertyValueBase64"!==v&&"VCXPropertyValueLink"!==v&&"VCXPropertyValuePath"!==v||(u="VCXInterpolatorConstant"),"Actor.Pulse.Type"===o&&(c=!1)}}if(null!==u)for(var _=null;null!==f;){f.GetValue();var p=0,m=null;if(0!==f.GetFrame())if(_)p=_.GetFrame(),m=_.GetValue();else{var b=t.GetNeutrals(i);if(b){var y=b.GetProperty(o);y&&(m=y.GetPropertyValue())}}if(c&&null!==m&&m.IsEqualTo(f.GetValue()));else{var G=Math.floor(p*this._AnimatedModifiablesNbBlocks/this._AnimatedModifiablesMaxFrame),S=Math.floor(f.GetFrame()*this._AnimatedModifiablesNbBlocks/this._AnimatedModifiablesMaxFrame)+1;S>this._AnimatedModifiablesNbBlocks&&(S=this._AnimatedModifiablesNbBlocks),"VCXInterpolatorConstant"===u&&(G=S-1);for(A=G;A<S;A++){(V=this._AnimatedModifiables[A])||(V=this._AnimatedModifiables[A]={}),V[i]=!0,(M=T._AnimatedTracks[A])||(M=T._AnimatedTracks[A]={}),M[o]=!0}}_=f,f=h.next()}else for(var A=0;A<this._AnimatedModifiablesNbBlocks;A++){var M;(V=this._AnimatedModifiables[A])||(V=this._AnimatedModifiables[A]={}),V[i]=!0,(M=T._AnimatedTracks[A])||(M=T._AnimatedTracks[A]={}),M[o]=!0}}}for(A=0;A<this._AnimatedModifiablesNbBlocks;A++){var V;(V=this._AnimatedModifiables[A])&&Object.keys(V).length;var C={};for(var i in V)if(V.hasOwnProperty(i)){var T,k=(T=this.GetObjectAnimation(i))._AnimatedTracks[A];for(var I in k)k.hasOwnProperty(I)&&(C[I]?C[I]++:C[I]=1)}for(var I in C)C.hasOwnProperty(I)}}});return o.EScenarioType={Scenario:0,Layer:1,CADView:2,CADCapture:3},Object.defineProperty(o.prototype,"componentType",{enumerable:!0,get:function(){return"VCXScenario"}}),o});