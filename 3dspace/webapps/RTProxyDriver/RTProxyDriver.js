define("DS/RTProxyDriver/RTLogger",["UWA/Class","UWA/Utils"],function(e,t){"use strict";var o=new(e.extend({init:function(e,t){var o,r,i;if(e)if("string"==typeof e)n={service:e};else n=e;else var n={};for(o in this.service=n.service,this.getStringActivator=n.getStringActivator||(this.service?"logger"+this.service:"debug"),this.serviceColor=t||n.color,this.backgroundColor=n.backgroundColor,this.createLogMethod=function(e,t,o,r){return function(i,n){if(!i)return null;if(!t||!console.log.bind)return console.log(i,n||"");var E=console.log.bind(console);return!t.levelindex&&0!==t.levelindex||t.levels.indexOf(e)<=t.levelindex?"string"==typeof i?E("%c"+(t.service?"["+t.service+"]":"")+"["+e+"] "+i,"background-color:"+(r||t.backgroundColor||"white")+";color:"+(o||t.serviceColor||"black")+";",-1!=i.indexOf("%c")&&(n||t.opts)||""):E(i,n):null}},n&&n.dontDefaultLevel||(this.levels=["log","info","table","error","warn","debug"]),this.levels)r=this.levels[o],(i=this)[r]=i.createLogMethod(r,i);if(UWA.Utils.getQueryString(decodeURIComponent(document.URL),this.getStringActivator))UWA.log("Logger init service "+this.service+", traces activated");else{this.levelindex=0;-1!=document.location.hostname.indexOf("?")?(document.location.hostname,this.getStringActivator):(document.location.hostname,this.getStringActivator)}},setLevel:function(e){if(!e||"string"!=typeof e||-1==this.levels.indexOf(e))return this.levelindex=null,console.log("Logger setLevel defaulted to all levels");this.levelindex=this.levels.indexOf(e)},setService:function(e,t){if(!e||"string"!=typeof e)return console.log("Logger setService bad arg");this.service=e,t&&"string"==typeof t&&(this.serviceColor=t)},setOptions:function(e){if(!e||"string"!=typeof e)return console.log("Logger setOptions bad arg");this.opts=e},addLevel:function(e,t,o,r){return e&&"string"==typeof e?this[e]?console.log("Logger addLevel "+e+" already exists"):(o?this.levels.splice(o,0,e):this.levels.push(e),this[e]=this.createLogMethod(e,this,t),void(r&&this.setLevel(e))):console.log("Logger addLevel bad arg")},setColor:function(e){if(!e||"string"!=typeof e)return console.log("Logger setColor bad arg");this.serviceColor=e},setBackgroundColor:function(e){if(!e||"string"!=typeof e)return console.log("Logger setColor bad arg");this.backgroundColor=e}}))({service:"3DIM",color:"blue",backgroundColor:"lightgray"});return o.addLevel("xmpp","green"),o.addLevel("node","green"),o}),define("DS/RTProxyDriver/RTProxyDriver",["UWA/Class","UWA/Utils","UWA/Class/Events","DS/RTProxyDriver/RTLogger"],function(e,t,o,r){"use strict";r.debug("RTProxyDriver load");var i={},n={"3DIM":{token:void 0},"3DNOTIF":{token:void 0}},E={eventName:{SETDRIVER:"SETDRIVER",GETSTATUSLIST:"GETSTATUSLIST",CONNECTED:"CONNECTED",BUDDYLISTBUILT:"BUDDYLISTBUILT",ONMESSAGERECEIVED:"ONMESSAGERECEIVED",ONDATARECEIVED:"ONDATARECEIVED",CLOSESESSION:"CLOSESESSION:",SENDMSG:"SENDMSG",SENDDATA:"SENDDATA",GETSTATUS:"GETSTATUS",GETALLSTATUS:"GETALLSTATUS",STATUSUPDATED:"STATUSUPDATED",SETSTATUS:"SETSTATUS",CREATEGROUP:"CREATEGROUP",ADDCONTACT:"ADDCONTACT",REMOVEGROUP:"REMOVEGROUP",RENAMEGROUP:"RENAMEGROUP",RENAMEGROUPVIEW:"RENAMEGROUPVIEW",REMOVECONTACT:"REMOVECONTACT",ONPRESENCERECEIVED:"ONPRESENCERECEIVED",SEARCHCONTACT:"SEARCHCONTACT",RESULTOFSEARCH:"RESULTOFSEARCH",RESULTOFSEARCHFORSEARCHAPI:"RESULTOFSEARCHFORSEARCHAPI",SENDNOTIF:"SENDNOTIF",DISCONNECTED:"DISCONNECTED",LOGOUT:"LOGOUT",GETARCHIVES:"GETARCHIVES",ONARCHIVERECEIVED:"ONARCHIVERECEIVED",CLEANARCHIVES:"CLEANARCHIVES",GROUPREMOVED:"GROUPREMOVED",SIGNOUT:"SIGNOUT"}},s=new o;return s.addEvent("SETDRIVER",function(e){var t=e.nameApp;n[t]&&!i[t]&&require(["DS/RTDriver/RTDriver"],function(o){r.debug("RTDriver loaded by RTProxyDriver");var n=new o(e);n&&(i[t]=n,s.dispatchEvent("DRIVERSETTED",[]))})}),s.addEvent("LOGOUT",function(e){var t=e.nameApp;delete i[t]}),E.dispatch=function(e,t){s&&s.dispatchEvent(e,t)},E.addEvent=function(e,t){s&&s.addEvent(e,t)},E.removeEvent=function(e,t){s&&("ALL"===e?s.removeEvents():s.removeEvent(e,t))},E});