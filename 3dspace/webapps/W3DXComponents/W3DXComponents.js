/*! -- Copyright 2014 Dassault Systemes. All rights reserved. */
define("DS/W3DXComponents/Views/Item/SkeletonRootView",["UWA/Core","DS/W3DXComponents/ContentSet","DS/W3DXComponents/Views/Layout/ChannelView","DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Layout/ListView","DS/W3DXComponents/Views/Item/TileView","DS/UIKIT/Input/ButtonGroup","DS/UIKIT/Input/Button","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a,r){"use strict";return e.extend({name:"root-skeleton",defaultOptions:{defaultView:"channel",actions:{},switcher:{},detail:{},contents:{views:[{id:"channel",view:i},{id:"tile",view:n,itemView:o},{id:"list",view:s}]}},_getButtonGroup:function(e){var i,n,s=this;if(t.is(e))return i=e.events||(e.events={}),n=i.onClick,i.onClick=function(t,e){n&&n(t,e),s.dispatchEvent("onClick",[e,t])},new a(e||{})},getContentsViewOptions:function(e){var i,n,s,o,a=(i=this.options,n="buttonGroup",s=this.collection,"function"==typeof i[n]?i[n].apply(s,o):t.clone(i[n],!1));return(e=e||{}).default=e.id===this.options.defaultView,e=t.clone(e,!1),t.is(a)&&"channel"!==e.id&&(e.header=UWA.createElement("div",{class:"btn-grp-wrapper"}),this._getButtonGroup(a).inject(e.header)),this._parent.call(this,e)},onMaximized:function(t){var e=this.switcherView.getValue();(t=t||{}).type&&"maximized"===t.type?this._windowed=!1:this._windowed=!0,!this._windowed&&(e="tile"),this.dispatchEvent("onSwitch",[null,e])},onViewChange:function(t){this.onMaximized.apply(this,arguments)}})}),define("DS/W3DXComponents/Views/Layout/ScrollView",["UWA/Core","UWA/Event","UWA/Element","UWA/Class/View","UWA/Class/Timed","UWA/Utils/Client","UWA/Fx","DS/UIKIT/Scroller","DS/UIKIT/Spinner","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a,r,l){"use strict";var c={DEACTIVATED:"deactivated",READY:"ready",PULLING:"pulling",RELEASING:"releasing",LOADING:"loading"};function h(e,i,n,s,o){var a=180*(n>e?(n-e)/(i-e):0),r=n;s=!t.is(s)||s,o=!t.is(o)||o,s&&d.call(this,a),o&&u.call(this,r,this.axis)}function d(e){t.is(e,"number")&&this.elements.pullareaIcon.setStyles({"-webkit-transform":"rotate3d(0, 0, 1, "+e+"deg)","-ms-transform":"rotate3d(0, 0, 1, "+e+"deg)","-moz-transform":"rotate3d(0, 0, 1, "+e+"deg)",transform:"rotate3d(0, 0, 1, "+e+"deg)"})}function u(e,i){var n;t.is(e,"number")&&(n="x"===i?"translate3d("+e+"px, 0, 0)":"translate3d(0, "+e+"px, 0)",this.scroller.getContent().setStyles({"-webkit-transform":n,"-ms-transform":n,"-moz-transform":n,transform:n}))}function p(t){var e=this.elements;switch(t){case c.PULLING:e.pullareaText.setText("Pull to refresh"),e.pullareaIcon.show(),e.pullareaLoader.hide(),this.scroller.elements.content.setStyle("overflow-"+this.axis,"visible"),this.pullToRefreshState=c.PULLING;break;case c.RELEASING:e.pullareaText.setText("Release to refresh"),e.pullareaIcon.addClassName("spin").show(),this.fx.tween("spinhack",180,720),setTimeout(function(){e.pullareaIcon.removeClassName("spin")},this.spinningTime),e.pullareaLoader.hide(),this.pullToRefreshState=c.RELEASING;break;case c.LOADING:e.pullareaText.hide(),e.pullareaIcon.hide(),e.pullareaLoader.show(),this.container.addClassName("ease"),u.call(this,this.pullLoadingPosition,this.axis),this.pullToRefreshState=c.LOADING;break;default:case c.READY:case c.DEACTIVATED:this.container.addClassName("ease"),h.call(this,0,0,0),setTimeout(function(t){var e=t.elements;e&&(e.pullareaText&&e.pullareaText.hide(),e.pullareaIcon&&e.pullareaIcon.hide(),e.pullareaLoader&&e.pullareaLoader.hide(),t.container&&t.container.removeClassName("ease"))},300,this),this.scroller.elements.content.setStyle("overflow-"+this.axis,"auto"),this.pullToRefreshState=t===c.DEACTIVATED?c.DEACTIVATED:c.READY}}function m(t){var e=this.elements;switch(t){default:case c.READY:e.infiniteareaLoader.hide(),e.infinitearea.show(),this.infiniteScrollState=c.READY;break;case c.LOADING:e.infinitearea.show(),e.infiniteareaLoader.show(),this.infiniteScrollState=c.LOADING;break;case c.DEACTIVATED:e.infiniteareaLoader.hide(),e.infinitearea.hide(),this.infiniteScrollState=c.DEACTIVATED}}function f(t){switch(t.type){case"touchstart":case"mousedown":case"MSPointerDown":this.pullPosition=0,this._handlePull(t);break;case"touchmove":case"mousemove":case"MSPointerMove":this._handlePull(t);break;case"touchend":case"touchcancel":case"mouseup":case"MSPointerUp":this.pullPosition=-1;break;case"scroll":this._handleScroll();break;case"DOMSubtreeModified":case"orientationchange":case"resize":this._handleScroll()}}return r=r.extend({getPosition:function(){var t=this.elements.content;return{y:-t.scrollTop,x:-t.scrollLeft}},getProgress:function(t){var e=this.elements,i="x"===t?"width":"height",n=this.getPosition()[t],s=e.container.getDimensions()[i],o=e.content.getScrolls()[i];return o>0?Math.min((s+Math.abs(n))/o,1):1},isMaxPosition:function(t,e){var i=this.elements.content;return"x"===t?e>0?i.scrollLeft>=i.scrollWidth-i.clientWidth:i.scrollLeft<=0:"y"===t?e>0?i.scrollTop>=i.scrollHeight-i.clientHeight:i.scrollTop<=0:void 0}}),n.extend(s,{tagName:"div",className:"scroll-view",pullPosition:-1,pullLoadingPosition:40,pullMinPosition:20,pullMaxPosition:75,pullFactor:.6,scrollMaxProgress:.85,loadingMinTime:500,spinningTime:1600,defaultOptions:{orientation:"vertical",useInfiniteScroll:!0,usePullToRefresh:!0,loadingCompleteEvent:"loadingComplete",scrollEndEvent:"infiniteScrollEnd"},setup:function(t){var e=t.view,i=t.orientation;this.view=e,this.listenTo(e,this.options.scrollEndEvent,m.bind(this,c.DEACTIVATED)),this.listenTo(e,this.options.loadingCompleteEvent,this.endLoading.bind(this)),this.options.orientation="vertical"===i||"horizontal"===i?i:this.defaultOptions.orientation,"horizontal"===this.options.orientation?(this.axis="x",this.dimension="width"):(this.axis="y",this.dimension="height")},render:function(){var t=this.elements,e=this.options,n=this.view,s=this;return n.render(),n.container.setStyle("horizontal"===this.options.orientation?"height":"width","100%"),this.container.removeClassName("horizontal").removeClassName("vertical").addClassName(e.orientation).empty(),t.pullareaLoader=new l({visible:!1}),t.infiniteareaLoader=new l({visible:!1}),t.pullarea=new i("div",{class:"pullarea",html:{tag:"div",class:"pullarea-info",html:[t.pullareaLoader,new i("span",{class:"fonticon fonticon-arrows-ccw"}).hide(),new i("span",{class:"text"}).hide()]}}).inject(this.container),t.infinitearea=new i("div",{class:"infinitearea",html:{tag:"div",class:"infinitearea-info",html:[t.infiniteareaLoader]}}),this.scroller=new r({element:new i("div",{html:[{tag:"div",class:"scrollable-body",html:n.container},{tag:"div",class:"scrollable-footer",html:t.infinitearea}]})}),this.scroller.getContent().setStyle(this.dimension,"100%"),this.scroller.inject(this.container),t.pullareaInfo=t.pullarea.getElement(".pullarea-info"),t.infiniteareaInfo=t.infinitearea.getElement(".infinitearea-info"),t.pullareaIcon=t.pullarea.getElement("span.fonticon"),t.pullareaText=t.pullarea.getElement("span.text"),this.fx=new a(t.pullareaIcon,{duration:this.spinningTime,transition:"backOut",events:{onAnimate:function(){d.call(s,this.current.spinhack)}}}),function(){this.scroller.elements.content.addEvents({resize:f.bind(this),scroll:f.bind(this)}),this.container.addEvents({touchstart:f.bind(this),touchend:f.bind(this),touchcancel:f.bind(this),resize:f.bind(this)})}.call(this),p.call(this,this.options.usePullToRefresh?c.READY:c.DEACTIVATED),m.call(this,this.options.useInfiniteScroll?c.READY:c.DEACTIVATED),this},isLoading:function(){return this.infiniteScrollState===c.LOADING||this.pullToRefreshState===c.LOADING},endLoading:function(){this.setDelayed("endLoading",function(){this.infiniteScrollState===c.LOADING&&m.call(this,c.READY),this.pullToRefreshState===c.LOADING&&p.call(this,c.READY),this._handleScroll()},this.loadingMinTime)},usePullToRefresh:function(t){p.call(this,t?c.READY:c.DEACTIVATED)},useInfiniteScroll:function(t){m.call(this,t?c.READY:c.DEACTIVATED)},_getReleaseHandler:function(){return t.is(this.handler)||(this.handler=this._handleRelease.bind(this)),this.handler},_handlePull:function(t){var n,s=this.pullToRefreshState,o=this.axis,a=e.getPosition(t)[o];s!==c.DEACTIVATED&&(n=-1!==this.pullPosition?(a-this.pullPosition)*this.pullFactor:0,s===c.READY&&0===this.pullPosition?(this.pullPosition=a,function(){this.container.addEvents({touchmove:f.bind(this)})}.call(this)):s===c.READY&&!this.isLoading()&&n>0&&this.scroller.isMaxPosition(o,-1)?(p.call(this,c.PULLING),function(){i.addEvent.call(window,"touchend",this._getReleaseHandler(),!0,1,!0),this.container.addEvent("touchmove",e.stop)}.call(this),h.call(this,this.pullMinPosition,this.pullMaxPosition,n),e.stop(t)):s===c.PULLING?(n>this.pullMaxPosition&&p.call(this,c.RELEASING),h.call(this,this.pullMinPosition,this.pullMaxPosition,n)):s===c.RELEASING&&h.call(this,this.pullMinPosition,this.pullMaxPosition,n,!1,!0))},_handleRelease:function(){this.pullToRefreshState===c.RELEASING?(p.call(this,c.LOADING),this.options.useInfiniteScroll&&m.call(this,c.READY),this.dispatchEvent("onPullToRefresh")):p.call(this,c.READY),function(){i.removeEvent.call(window,"touchend",this._getReleaseHandler(),!0),function(){this.container.removeEvent("touchmove")}.call(this)}.call(this)},_handleScroll:function(t){var e,i;(this.options.useInfiniteScroll&&this.infiniteScrollState!==c.DEACTIVATED&&!this.isLoading()&&this.scroller.getProgress(this.axis)>this.scrollMaxProgress&&null!==(e=this.container,(i=e.offsetParent)!==document.body?i:null)||t)&&(m.call(this,c.LOADING),this.dispatchEvent("onInfiniteScroll"))},scrollToPosition:function(t,e,i){this.scroller.scrollTo(t,e,i)},scrollToElement:function(t,e,i){this.scroller.scrollToElement(t,e,i)},destroy:function(){this.view&&this.view.destroy(),this.removeEvents(),this.container.removeEvents(),this.stopListening(),this._parent()}})}),define("DS/W3DXComponents/Views/Plugins/LazyLoading",["UWA/Core"],function(t){"use strict";var e={defaultImgSrc:"",loaderSrc:"",imgElem:"",imgSrc:""};return{triggerLoading:function(t,e,i){var n=this;t.setAttribute("src",i),UWA.createElement("img",{styles:{display:"none"},events:{load:function(){n.onLoad(),this.destroy()},error:function(){n.onLoadError(),this.destroy()}}}).inject(document.body).setAttribute("src",e)},setSrc:function(t,e){t.setAttribute("src",e)},onLoading:function(){var i=t.extend(e,this.lazyLoading,!0),n=i.imgElem,s=i.imgSrc,o=i.loaderSrc;this.triggerLoading(n,s,o)},onLoadError:function(){var t=this.lazyLoading,e=t.imgElem,i=t.defaultImgSrc;this.setSrc(e,i),this.dispatchEvent("onLoadError")},onLoad:function(){var t=this.lazyLoading,e=t.imgElem,i=t.imgSrc;this.setSrc(e,i),this.dispatchEvent("onLoad")}}}),define("DS/W3DXComponents/PDFViewer",["UWA/Core","UWA/Event","UWA/Class/View","UWA/Utils","DS/UIKIT/Input/Button","DS/UIKIT/Input/Text","DS/UIKIT/Alert","DS/UIKIT/Mask","DS/PDFjs/PDFjs","DS/WAFData/WAFData","i18n!DS/W3DXComponents/assets/nls/PDFViewer","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a,r,l,c,h){"use strict";return i.extend({tagName:"div",className:"pdf-viewer",url:"",pageNum:1,scale:100,forceFit:!1,stickyViewer:!1,downloadUrl:"",fullScreen:!1,_fullScreenButton:null,_pageRendering:!1,_pageNumPending:null,_canvas:null,_pdfDoc:null,_zoomChanged:!1,domEvents:{resize:"_onResize"},setup:function(t){(t=t||{}).requestsOptions=t.requestsOptions||{};this.url=t.url||"",this.scale=parseInt(t.scale)||100,this.pageNum=parseInt(t.pageNum)||1,this.forceFit=!1!==t.forceFit,this.stickyViewer=t.stickyViewer,this.fullScreen=t.fullScreen,this.downloadUrl=t.downloadUrl||"",this.deactivateShortcutsOnBlur=!0===t.forceFit,this.options=t},render:function(){var i=this,n=t.createElement,a=i.container,r=i.elements,l="",c=i._getClientInformation();return i.stickyViewer&&(a.addClassName("sticky-pdf-viewer"),l=" sticky-toolbar"),a.addClassName("shortcuts-active"),n("div",{class:i.className+"-toolbar"+l,html:[{class:i.className+"-pagetools",html:[new s({className:i.className+"-previouspage-btn default",icon:"fonticon-left-dir",events:{onClick:i._onPrevPage.bind(i)}}),new s({className:i.className+"-nextpage-btn default",icon:"fonticon-right-dir",events:{onClick:i._onNextPage.bind(i)}}),n("span",{class:i.className+"-pages",html:[r.pageNum=new o({className:i.className+"-page-num",events:{onKeyDown:function(t){"return"===e.whichKey(t)&&(i.pageNum=parseInt(t.target.value),i._queueRenderPage(i.pageNum||1))}}}),{tag:"span",text:" / ",styles:{margin:"0 5px 0 5px"}},r.pageCount=n("div",{class:i.className+"-page-count"}),{tag:"span",text:" pages",styles:{"margin-left":"5px"}}]}),new s({className:i.className+"-zoomout-btn default",icon:"fonticon-minus",events:{onClick:i._onZoomOut.bind(i)}}),new s({className:i.className+"-zoomin-btn default",icon:"fonticon-plus",events:{onClick:i._onZoomIn.bind(i)}}),i.forceFit?"":new s({className:i.className+"-zoomfit-btn default",icon:"fonticon-arrow-double-combo",events:{onClick:i._onZoomFit.bind(i)}}),i.downloadUrl?new s({className:i.className+"-download-btn default",icon:"fonticon-download",events:{onClick:i._downloadAction.bind(i)}}):"",i.fullScreen?i._fullScreenButton=new s({className:i.className+"-fullscreen-btn default",icon:"fonticon-resize-full",events:{onClick:i._fullScreen.bind(i)}}):""]}]}).inject(a),n("div",{class:i.className+"-canvas-wrapper",html:[{tag:"canvas",class:i.className+"-canvas"}]}).inject(a),i._canvas=i.getElement("."+i.className+"-canvas"),i._downloadPdf(),c.isIphone||c.isIpad||(i.deactivateShortcutsOnBlur&&(window.addEventListener("click",i._deactivateShortcuts.bind(i)),i.container.addEvent("click",i._activateShortcuts.bind(i))),document.body.addEventListener("keyup",i._manage_shortcuts.bind(i),!1)),i},renderPage:function(t){this._queueRenderPage(t)},notify:function(t){t=t||{};this._alert||(this._alert=new a({className:this.className+"-alert"}).inject(this.container||window.body)),this._alert.add(t),this._alert.show()},setUrl:function(t){this.url=t,this._downloadPdf()},_renderPage:function(t){var e=this;e._pdfDoc&&(e._pageRendering=!0,(t=t||e.pageNum)>e._pdfDoc.numPages&&(t=e._pdfDoc.numPages),t<=0&&(t=1),e.pageNum=t,e._pdfDoc.getPage(t).then(function(t){var i,n,s=e._canvas,o=e.container;s.width=o.getDimensions().width*(e.scale/100)-45,n=t.getViewport(s.width/t.getViewport(1).width),s.height=n.height,i={canvasContext:s.getContext("2d"),viewport:n},t.render(i).promise.then(function(){e._pageRendering=!1,null!==e._pageNumPending&&(e._renderPage(e._pageNumPending),e._pageNumPending=null)}).catch(e._catchPDfjsError.bind(e)),o.setStyle("height",n.height+54+"px")}).catch(e._catchPDfjsError.bind(e)),e.elements.pageNum.setValue(e.pageNum))},_downloadPdf:function(){var e=this,i=e.container;function n(n){t.log(n),r.unmask(i),e.options.requestsOptions.onFailure?e.options.requestsOptions.onFailure():e.notify({message:h.unreachableUrl,className:"error"})}e.url&&(r.mask(i),c.handleRequest(e.url,{method:"GET",type:"arraybuffer",authentication:e.options.requestsOptions.authentication,onComplete:function(t){t=new Uint8Array(t),l.getDocument(t).then(function(t){e._pdfDoc=t,e.elements.pageCount.textContent=e._pdfDoc.numPages,r.unmask(i),e._queueRenderPage(e.pageNum)}).catch(e._catchPDfjsError.bind(e))},onFailure:n,onTimeout:n}))},_queueRenderPage:function(t){this._pageRendering?this._pageNumPending=t||this.pageNum:this._renderPage(t)},_onPrevPage:function(){this.pageNum<=1||(this.pageNum--,this._queueRenderPage(this.pageNum))},_onNextPage:function(){this.pageNum>=this._pdfDoc.numPages||(this.pageNum++,this._queueRenderPage(this.pageNum))},_onZoomIn:function(){this.forceFit&&(this._zoomChanged=!0),this.scale+=10,this._queueRenderPage(this.pageNum)},_onZoomOut:function(){var t,e=this.scale;this.forceFit&&(this._zoomChanged=!0),(t=e-10)<=0&&(t=10),t!==e&&(this.scale=t,this._queueRenderPage(this.pageNum))},_onZoomFit:function(){this.scale=100,this._queueRenderPage(this.pageNum)},_onResize:function(){this.forceFit&&!this._zoomChanged?function(t,e,i){var n,s,o,a,r;function l(){var r=(new Date).getTime()-a;r<e&&r>=0?setTimeout(l,e-r):(null,i||(t.apply(o,s),n||null))}}(this._onZoomFit(),1e3,!1):this._zoomChanged=!1},_downloadAction:function(){var t=this._getClientInformation();window.open(this.downloadUrl,(t.isIphone||t.isIpad)&&t.isSafari?"_blank":"_self")},_fullScreen:function(){var t=this.container;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?(document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),this._fullScreenButton.setIcon("fonticon-resize-full")):(t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(),this._fullScreenButton.setIcon("fonticon-resize-small"))},_getClientInformation:function(){var t=n.Client,e=t.Platform,i=t.Engine;return{isIpad:!0===e.ipad,isIphone:"safari"===i.name&&e.ios&&!1===e.ipad,isSafari:"safari"===i.name}},_catchPDfjsError:function(t){r.unmask(this.container),this.notify({message:t&&t.message||"An error occured.",className:"error"})},_activateShortcuts:function(){this.container.addClassName("shortcuts-active")},_deactivateShortcuts:function(){this.container.removeClassName("shortcuts-active")},_manage_shortcuts:function(e){if(this.container.hasClassName("shortcuts-active"))switch(e.keyCode){case 27:t.is(this._fullScreenButton)&&this._fullScreenButton.setIcon("fonticon-resize-full");break;case 37:this._onPrevPage();break;case 39:this._onNextPage();break;case 107:this._onZoomIn();break;case 109:this._onZoomOut()}},destroy:function(){var t=this._getClientInformation();return this._canvas&&this._canvas.destroy(),this._pdfDoc=null,this._alert&&this._alert.destroy(),this._alert=null,t.isIphone||t.isIpad||document.body.removeEvent("keyup",this._manage_shortcuts),this._parent.apply(this,arguments)}})}),define("DS/W3DXComponents/LanguagePicker",["UWA/Core","UWA/Class/View","DS/WAFData/WAFData","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Input/Toggle","i18n!DS/W3DXComponents/assets/nls/LanguagePicker"],function(t,e,i,n,s,o,a){"use strict";return e.extend({_propertyName:null,_passportUrl:null,_service:{url:null,data:{}},_getSupportedLanguages:null,_getCurrentLanguage:null,_setCurrentLanguage:null,_modal:null,_saveButton:null,_cancelButton:null,_currentLanguage:null,_language:null,className:"language-picker",_createContent:function(){var e,r=[];for(var l in e=this._getSupportedLanguages(),this._currentLanguage=this._getCurrentLanguage(),this._language=this._currentLanguage,this.saveButton=new s({value:a.Save,className:"primary",events:{onClick:function(){this.saveButton.load(),this.cancelButton.setDisabled();for(var e=0;e<r.length;e++)r[e].setDisabled();this._service.onComplete=function(){this._language!==this._currentLanguage?this._setCurrentLanguage(this._language):this._modal.hide()}.bind(this),this._service.onFailure=function(){this.saveButton.load(!1),this.cancelButton.setDisabled(!1);for(var t=0;t<r.length;t++)r[t].setDisabled(!1)}.bind(this),null!==this._service.url?("function"==typeof this._propertyName?this._service.data=t.Json.encode(this._propertyName(this._language)):"string"==typeof this._propertyName&&(this._service.data[this._propertyName]=t.Json.encode(this._language)),t.Data.request(this._service.url,this._service)):null!==this._passportUrl?(this._service.url=("/"===this._passportUrl.slice(-1)?this._passportUrl:this._passportUrl+"/")+"my-profile/update/language/"+this._language,i.authenticatedRequest(this._service.url,{method:"POST",onComplete:this._service.onComplete,onFailure:this._service.onComplete})):this._setCurrentLanguage(this._language)}.bind(this)}}),this.cancelButton=new s({value:a.Cancel,events:{onClick:function(){this._modal.hide()}.bind(this)}}),e){var c=new o({name:"language",label:e[l].localizedName+" ("+e[l].staticName+")",value:l,className:"primary",events:{onChange:this._changeLanguage.bind(this)}});this._language===l&&c.check(),r.push(c)}return this._modal=new n({closable:!0,header:"<h4>"+a.LanguagePreferences+"</h4>",body:r,footer:[this.saveButton,this.cancelButton],events:{onHide:function(){this.destroy()}.bind(this)}}),this._modal},_changeLanguage:function(t){this._language=t.target.value},render:function(){return this.container.setContent(this._createContent()),this},show:function(){this._modal.show()},setup:function(e){return e&&(t.merge(this._service,e.service),e.hasOwnProperty("propertyName")&&(this._propertyName=e.propertyName),e.hasOwnProperty("passportUrl")&&(this._passportUrl=e.passportUrl),e.hasOwnProperty("availableLanguagesGetter")&&e.hasOwnProperty("currentLanguageGetter")&&e.hasOwnProperty("currentLanguageSetter")&&(this._getSupportedLanguages=e.availableLanguagesGetter,this._getCurrentLanguage=e.currentLanguageGetter,this._setCurrentLanguage=e.currentLanguageSetter)),this}})}),define("DS/W3DXComponents/Views/Plugins/Multisel",function(){"use strict";return{_initSelectionSet:function(){this._selectionState||(this._selectionState={isActive:!1,selectedObjects:[],wasExplicitlyActivated:!1})},resetSelectionState:function(){this._selectionState&&(this._selectionState.isActive=!1,this._selectionState.selectedObjects=[],this._selectionState.wasExplicitlyActivated=!1)},setMultisel:function(t){this._selectionState=t,this.dispatchEvent("onSetMultisel")},activateMultisel:function(t){this._initSelectionSet(),this._selectionState.isActive=!0,this._selectionState.wasExplicitlyActivated=t,this.dispatchEvent("onActivateMultisel")},deactivateMultisel:function(){this.resetSelectionState(),this.dispatchEvent("onDeactivateMultisel")},addSelection:function(t){this._initSelectionSet(),this._selectionState.selectedObjects.push(t),this.dispatchEvent("onAddSelection",t)},removeSelection:function(t){if(this._selectionState){for(var e=this._selectionState.selectedObjects.length-1;e>=0;e--)this._selectionState.selectedObjects[e].id===t.id&&this._selectionState.selectedObjects.splice(e,1);this.dispatchEvent("onRemoveSelection",t)}},isSelected:function(t){return!!this._selectionState&&this._selectionState.selectedObjects.filter(function(e){return e.id===t.id}).length>0},selectionIsEmpty:function(){return this._initSelectionSet(),0===this._selectionState.selectedObjects.length},getSelectionState:function(){return this._initSelectionSet(),this._selectionState},getSelection:function(){return this._initSelectionSet(),this._selectionState.selectedObjects}}}),define("DS/W3DXComponents/Models/ActionModel",["UWA/Core","UWA/Class/Model"],function(t,e){"use strict";return e.extend({defaults:{title:"",icon:"",id:"",context:!1,overflow:!0}})}),define("DS/W3DXComponents/Views/GraphView",["UWA/Core","UWA/Class/View","DS/UIKIT/Alert","DS/3DXHighcharts/3DXHighcharts","i18n!DS/W3DXComponents/assets/nls/Views/GraphView","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s){"use strict";var o="warning",a=["#3A7DCC","#F8941C","#FFCB06","#9EC944","#34B0D2","#8A5DC0","#D95F5C"],r={enabled:!1},l={enabled:!1};var c=e.extend({tagName:"div",className:"w3dx-GraphView",defaultOptions:{custoClass:"",title:"",subtitle:"",type:"line",xAxis:{title:"",categories:[],type:"linear"},yAxis:{title:""},series:[],unit:"",stacking:"",showPlot:!1,animation:!0,width:null,height:null},_highcharts:null,_tableEl:null,_alert:null,_messages:[],_isInjected:!1,setup:function(e){(e=e||{}).series=e.series||[],e.xAxis=e.xAxis||{},e.yAxis=e.yAxis||{},e.xAxis.categories=e.xAxis.categories||[],this.options=t.extend(t.clone(this.defaultOptions),e||{},!0),this._parent(e)},render:function(){var t,e=this.options,i=e.series;if(t=e.type=e.type.toLowerCase(),this.container.addClassName(e.custoClass),!i.length)return this._notify({message:s.noValidDataProvided,type:o}),this;if("table"===t)this._highcharts&&(this._highcharts.destroy(),this._highcharts=null),this._drawTable();else try{this._tableEl&&(this._tableEl.destroy(),this._tableEl=null),this._drawHighcharts()}catch(t){this._notify({message:t.message})}return this},reflow:function(){return this._highcharts&&this._highcharts.reflow(),this},setSize:function(t,e){return t=t||100,e=e||100,this._highcharts?this._highcharts.setSize(t,e):this._tableEl&&this._tableEl.setStyles({width:t,height:e}),this},destroy:function(){this._highcharts&&(this._highcharts.destroy(),this._highcharts=null),this._tableEl&&(this._tableEl.destroy(),this._tableEl=null),this._alert&&(this._alert.destroy(),this._alert=null),this._messages=null,this._parent()},_parseGraphOption:function(e){var i,n,o={},a=e.type;switch("datetime"===e.xAxis.type&&(e.xAxis.categories=null),a){case"line":o=this._getLineOptions(e);break;case"pie":case"donut":o=this._getPieDonutOptions(e);break;case"column":o=this._getColumnOptions(e);break;default:throw t.log("DS/W3DXComponents/Views/GraphView : Error => No valid type found in chart options"),{message:(i=s.TypeGraphNotDef,n={typeGraph:a},i.replace(/\{([\w\-]+)\}/g,function(t,e){return void 0!==n[e]?n[e]:""}))}}return o.title={text:e.title},o.subtitle={text:e.subtitle},o},_getLineOptions:function(t){var e={},i=t.xAxis,n=t.unit,s=t.showPlot,o=t.stacking,a=i.categories||[];return e.plotOptions={area:{fillOpacity:.1,marker:{enabled:s}},line:{marker:{enabled:s}}},e.xAxis={title:{text:i.title},type:i.type},e.xAxis.categories=a.length?a:null,e.yAxis={title:{text:t.yAxis.title+(n?" ("+n+")":"")},plotLines:[{value:0,width:1,color:"#808080"}]},e.tooltip={pointFormat:"{series.name}: <b>{point.y}</b>"+("none"!==o?" ({point.percentage:.1f}%)<br/>":"")},e.series=t.series,e=this._getThresholdOptions(e,t)},_getColumnOptions:function(t){var e={},i=t.unit,n=t.xAxis,s=t.stacking,o=n.categories||[];return e.xAxis={title:{text:n.title},type:n.type},e.yAxis={allowDecimals:!1,title:{text:t.yAxis.title+(i?" ("+i+")":"")}},e.xAxis.categories=o.length?o:null,e.tooltip={pointFormat:"{series.name}: <b>{point.y}</b>"+("none"!==s?" ({point.percentage:.1f}%)<br/>":"")},e.series=t.series,e=this._getThresholdOptions(e,t)},_getPieDonutOptions:function(t){var e={plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000"},showInLegend:!0}}};return e.tooltip={pointFormat:"<b>"+s.total+": {point.y}</b> ({point.percentage:.1f} %)"},e.series=[{type:"pie",name:t.unit,data:t.series[0].data,innerSize:"donut"===t.type?"60%":"0%"}],e},_getThresholdOptions:function(e,i){var n=e.yAxis,s=n.plotLines,o=i.yAxis,a=o.thresholdMin||{},r=o.thresholdMax||{},l=a.value,c=r.value;return s||(s=n.plotLines=[]),a&&t.is(l)&&s.push({id:"limit-min",color:"#9EC944",dashStyle:"ShortDash",width:2,value:l||0,zIndex:100,label:{text:a.title||""}}),r&&t.is(c)&&s.push({id:"limit-max",color:"#B22222",dashStyle:"ShortDash",width:2,value:c||0,zIndex:100,label:{text:r.title||""}}),e},_drawHighcharts:function(){var e,i,o=this.options,c=o.expertOpts,h=o.stacking||"none",d=o.unit;i=this._parseGraphOption(o),t.extend(i,{chart:{renderTo:this.container,type:o.type,width:o.width||null,height:o.height||null},plotOptions:{series:{animation:o.animation,stacking:"none"===h?null:h}},legend:{borderWidth:0},tooltip:{valueSuffix:d},colors:a,credits:r,exporting:l},!0),c&&t.extend(i,c,!0),this._messages=[];try{this._highcharts=new n.Chart(i)}catch(n){t.log(n),t.log("GraphView: Provided highcharts options:"),t.log(i),e=n.message||"",HighchartsAdapter||(e=s.highchartsStandaloneNotDef+";<br/> "+e),this._notify({message:e||" "+s.errorInOptions})}},_drawTable:function(){var e,i,n,a,r,l,c,h,d,u,p,m,f,g=0,v=[],w=t.createElement,C=this,S=C.container,y=C.options,_=y.series||[],E=y.unit||"",b=(y.xAxis||{}).categories||[],D=!!b.length;function x(){C._notify({message:s.noValidDataProvided,type:o})}if(_.length&&_[0].data){for(v=(p=_[0]).data,d=w("table",{class:this.className+"-table table table-striped table-hover",html:[w("thead",{html:m=w("tr",{class:"th-row row"})}),u=w("tbody")]}),f=p.columns||[],D&&f.length&&m.addContent({tag:"th",class:"th-col col",html:"&nbsp;"}),e=0,c=f.length;e<c;e++)m.addContent({tag:"th",class:"th-col col",html:f[e]+""});for(e=0,l=v.length;e<l;e++)for(n=v[e],r=w("tr",{class:"tb-row row"}).inject(u),D&&(h=b[e]||"",r.addContent({tag:"td",class:"tb-col col category",html:h+""})),i=0,a=n.length;i<a;i++)g++,r.addContent({tag:"td",class:"tb-col col",html:n[i]+""});g?(C._messages=[],S.setContent(d),E&&S.addContent({tag:"div",class:"unit",html:"("+E+")"})):x()}else x()},_notify:function(e){var n,o,a=this._alert,r=this.container;n=(o=(e=e||{}).type||"error").ucfirst()+": <b>"+(e.message||s.errorNotSpec)+".</b>",r?(a&&a.destroy(),r.empty(),this._alert=a=new i({className:this.className+"-notify",closable:e.closable||!1,visible:!0,autoHide:e.autoHide||!1,hideDelay:e.hideDelay||4e3}).inject(r),this._isInjected?a.add({message:n,className:o}):this._messages.push(e)):t.log(n)},onPostInject:function(){var t=this;t._isInjected=!0,t._messages.forEach(function(e){t._notify(e)}),t._messages=[]}});return c.TYPE_LINE="line",c.TYPE_COLUMN="column",c.TYPE_PIE="pie",c.TYPE_DONUT="donut",c.TYPE_TABLE="table",c.XAXIS_TYPE_LINEAR="linear",c.XAXIS_TYPE_DATETIME="datetime",c.XAXIS_TYPE_LOG="logarithmic",c.STACKING_NONE="none",c.STACKING_NORMAL="normal",c.STACKING_PERCENT="percent",function(){try{n.setOptions({lang:{contextButtonTitle:s.contextButtonTitle,drillUpText:s.drillUpText,loading:s.loading,resetZoomTitle:s.resetZoomTitle,months:[s.jan,s.feb,s.mar,s.apr,s.may,s.jun,s.jul,s.aug,s.sep,s.oct,s.nov,s.dec],shortMonths:[s.sjan,s.sfeb,s.smar,s.sapr,s.smay,s.sjun,s.sjul,s.saug,s.ssep,s.soct,s.snov,s.sdec],weekdays:[s.sun,s.mon,s.tue,s.wen,s.thu,s.fri,s.sat]}})}catch(e){t.log("Graph View Error: Highcharts is not defined. Can't be translated.")}}(),c}),define("DS/W3DXComponents/Views/Temp/DeprecatedAutocomplete",["UWA/Core","UWA/Event","UWA/Data","UWA/Json","UWA/Controls/Abstract","UWA/String"],function(t,e,i,n,s,o){"use strict";return s.extend({typeTimeout:null,dataCache:{},itemCache:{},defaultOptions:{suggestUrl:null,suggestKey:"",placeholder:"",shouldExist:!1,itemDataKey:"item",dataParser:null,typeDelay:500,minLength:1,maxHeight:"auto",suggestFormat:"{name}",className:"uwa-autocomplete nv-autocomplete"},init:function(t){this._parent(t),this.buildSkeleton(),this.attachEvents()},buildSkeleton:function(){var e=this.elements,i=this.options.className;e.form=t.createElement("form",{class:i}),e.inputContainer=t.createElement("div",{class:i+"-searchbox"}).inject(e.form),e.input=t.createElement("input",{class:i+"-input",placeholder:this.options.placeholder,type:"text"}).inject(e.inputContainer),this.resetInput(),e.suggestsContainer=t.createElement("div",{class:i+"-suggests"}).inject(e.form),e.suggests=t.createElement("ul").inject(e.suggestsContainer),e.container=e.form},attachEvents:function(){var t=this.elements;t.input.addEvent("keyup",this.onKeyUp.bind(this)),t.input.addEvent("blur",this.onBlur.bind(this)),t.input.addEvent("focus",this.onFocus.bind(this)),t.form.addEvent("submit",function(i){var n=this.itemCache[t.input.value.toLowerCase()];return e.stop(i),this.options.shouldExist&&!n||(this.options.suggestKey&&n&&(t.input.value=n[this.options.suggestKey]),this.dispatchEvent("onSelect",[t.input.value,n]),t.input.blur(),this.dispatchEvent("onHideSuggests")),!1}.bind(this))},getSuggestions:function(t){var e;if(t)return this.dataCache[t]?(this.dispatchEvent("onUpdateSuggests",[this.dataCache[t]]),void(this.typeTimeout=null)):void(this.options.suggestUrl&&(e=this.options.suggestUrl.replace("{text}",t),i.getText(e,function(e){(e=this.dataParse(e)).length>0&&(this.dataCache[t]=e,this.dispatchEvent("onUpdateSuggests",[e])),this.typeTimeout=null}.bind(this))))},dataParse:function(e){var i,s,o,a=this.options.dataParser;if(t.is(a,"function"))e=a(e);else{if(n.isJson(e))e=n.decode(e),o=!0;else for(i in e=n.xmlToJson(e))if(e.hasOwnProperty(i)){e=e[i];break}for(i in e)e.hasOwnProperty(i)&&(s||(s=i),Array.isArray(e[i])&&(e=e[i],o=!0));!o&&s&&(e=[e[s]])}return Array.isArray(e)?e:[]},resizeSuggests:function(){var t=this.elements,e=t.input.getDimensions();t.suggestsContainer.setStyle("width",e.width+"px"),this.options.maxHeight&&"auto"!==this.options.maxHeight&&t.suggestsContainer.setStyle("height",this.options.maxHeight+"px")},getFormattedSuggest:function(e){return this.options.suggestFormat.replace(/\{(\w+)\}/g,function(i,n){return t.is(e,"string")?e:e[n]})},resetInput:function(){var t=this.elements;t.input.placeholder?t.input.value="":t.input.value=this.options.placeholder,this.resetCache()},getFocus:function(){this.elements.input.focus()},resetCache:function(){this.dataCache={},this.itemCache={}},onUpdateSuggests:function(e){var i,n,s=this.elements;s.suggests.empty(),this.dispatchEvent("onShowSuggests"),Array.isArray(e)&&0!==e.length&&(e.forEach(function(e){var a=this.getFormattedSuggest(e);i=t.createElement("li"),(n=t.createElement("a").inject(i)).setHTML(a),i.inject(s.suggests),this.options.suggestKey&&(this.itemCache[e[this.options.suggestKey].toLowerCase()]=e),n.addEvent("click",function(t){var e=this.options.suggestKey?t[this.options.suggestKey]:o.stripTags(this.getFormattedSuggest(t));this.dispatchEvent("onSelect",[e,t])}.bind(this,e))}.bind(this)),this.resizeSuggests())},onSelect:function(t,e){this.elements.input.value=t,this.dispatchEvent("onHideSuggests")},onHideSuggests:function(){this.elements.container.removeClassName(this.options.className+"-suggestsDisplayed")},onShowSuggests:function(){this.elements.container.addClassName(this.options.className+"-suggestsDisplayed")},onBlur:function(t){setTimeout(function(){this.dispatchEvent("onHideSuggests")}.bind(this),200)},onFocus:function(t){var i=this.elements,n=e.getElement(t);i.input.value===this.options.placeholder&&(i.input.value=""),this.getSuggestions(n.value)},onKeyUp:function(t){var i=e.getElement(t);0!==i.value.length?i.value.length>=this.options.minLength&&!this.typeTimeout&&(clearTimeout(this.typeTimeout),this.typeTimeout=setTimeout(function(){this.getSuggestions(i.value)}.bind(this),this.options.typeDelay)):this.onHideSuggests()}})}),define("DS/W3DXComponents/IdCard",["UWA/Core","UWA/Event","UWA/Array","UWA/Utils","UWA/Class","UWA/Class/View","UWA/Class/Model","UWA/Class/Debug","DS/UIKIT/Tooltip","DS/UIKIT/DropdownMenu","DS/UIKIT/Native/Dropdown","DS/UIKIT/Input/Text","DS/CefCommunication/CefCommunication","i18n!DS/W3DXComponents/assets/nls/IdCard","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a,r,l,c,h,d,u,p){"use strict";var m=0,f=1,g=0,v=1,w=n.Client.Features.touchEvents,C=/translateX\((([0-9\.\-]+)(?:px)*?)\)/;function S(e,i,n,o){var a=e[i];switch(t.typeOf(a)){case"function":return a.apply(n,o);case"class":return a;default:return a instanceof s?a:t.clone(a)}}var y=c.extend({defaultOptions:{bound:!1,position:"",removeOnHide:!1},_onWindowClick:function(t){var i=this.options.menuIcon,n=e.getElement(t);n===i||n.isInjected(i)?(t.stopPropagation(),this.toggle()):this.hide()},init:function(){this._parent.apply(this,arguments),this._onWindowClick=this._onWindowClick.bind(this),this.options.menuIcon.addEvent("click",this._onWindowClick),this.addEvents({onShow:function(){t.extendElement(document.body).addEvent("click",this._onWindowClick)},onHide:function(){t.extendElement(document.body).removeEvent("click",this._onWindowClick)}})}}),_=a.extend({defaults:{actions:null,facets:null,banner:null,thumbnail:null,title:null,ownerName:null,date:null,description:null,editView:null,editViewOptions:null},_retrieve:function(t,e){var i,n,s=void 0;return"string"==typeof t&&e&&"object"==typeof e&&((n=(i=t.split("->",2)).length)>1?s=this._retrieve(i[1],e[i[0]]):1===n&&(s=e[t])),s},get:function(t){return this._retrieve(t,this._attributes)},init:function(t,e){if(!e||!e.idCard)throw new Error("ID card instance could not be found.");return this._idCard=e.idCard,this._parent.apply(this,arguments)},destroy:function(){this._idCard=null,this.removeEvents(),this.stopListening()},"onChange:actions":function(e,i){!this._idCard._useNativeActionMenu()&&"array"===t.typeOf(i)&&i.length>10&&console.warn("The total of action buttons in the header should not exceed 10!")}});return o.extend({_rendered:!1,_controls:null,_createContent:function(){return""},_registerControl:function(t,e){if("string"==typeof t)return this._controls[t]&&this._controls[t].destroy(),this._controls[t]=e,e;throw new Error("Invalid arguments!")},_unregisterControl:function(t){if("string"!=typeof t)throw new Error("Invalid arguments!");this._controls[t]&&(this._controls[t].destroy(),delete this._controls[t])},init:function(){return this._controls={},this._parent.apply(this,arguments)},render:function(){return this.container.setContent(this._createContent()),this._rendered=!0,this},inject:function(){return this._rendered||this.render(),this._parent.apply(this,arguments)},destroy:function(){var t,e=null,i=this._controls;for(e in i)i.hasOwnProperty(e)&&(i[e].destroy(),delete i[e]);return this.stopListening(),this.dispatchEvent("onDestroy",[this]),t=this._parent(),this.options=null,this.container=null,this.tagName=null,this.className=null,this.attributes=null,this.domEvents=null,t}}).extend({_config:null,_attributesMapping:null,_collapsed:!1,_folded:!1,_minimized:!1,_facetsLikeTabs:!0,_editableElements:["title","banner","thumbnail"],_selectedFacet:null,_selectedFacetName:null,_previouslySelectedFacetName:null,_mode:m,_actionsLayout:g,_facetsLayout:g,_transitioning:!1,_inDOM:!1,_facetsScrollToLeft:0,_nativeActionMenu:!1,model:null,tagName:"div",className:"id-card without-banner without-thumbnail",domEvents:{resize:"_onResize","keyup .title-section > input":"_onTitleChangeRequest","click .banner-section .fonticon-pencil":"_onBannerChangeRequest","click .thumbnail-section .fonticon-pencil":"_onThumbnailChangeRequest"},_useNativeActionMenu:function(){return!0===this._nativeActionMenu&&u.isAvailable()},_getModelAttribute:function(e,i){if(!e&&!i)throw new Error("Attribute name and getter are both missing!");var n,s=this.model,o=this._attributesMapping,a=o&&o[e]||e;return i||(i="function"==typeof a?a:s.get),n=i.call(s,a),t.typeOf(n)?n+"":""},_createTitleSection:function(){return{class:"title-section",html:{tag:"h1",html:[{tag:"span",html:this._config.get("title")}]}}},_createList:function(e,i){if(!e)throw new Error("List type argument is missing");var n,s,o,a,r,c,d,u,p,m=this,f=e+"s",C=null,S=null,_=[],E=[],b=this._facetsLikeTabs,D=null;if((r=t.clone(this._config.get(f)))&&(r.length>0||"action"===e&&this._useNativeActionMenu())){if(E=[],_=[],"facet"===e)switch(d=this.getSelectedFacet(),t.typeOf(d)){case"number":u=function(t,e){return d===e?"selected":""};break;case"string":u=function(t){return d===t?"selected":""};break;default:u=function(){return""}}for(s=0,o=r.length;s<o;s++)c=!1,(n=r[s]).icon&&n.text?"facet"===e?(a=this._getFacetValue(n),!1!==b||a||(c=!0)):a="":(c=!0,a=""),n.hidden=c,p=n.handler?function(){var t=n.name||s,i=e,o=n.handler;return function(e){"facet"===i?this.selectFacet(t):(o.call(this),this.dispatchEvent("onActionSelect",[t]))}}().bind(this):null,i!==v&&E.push({className:e+(c?" hidden":""),text:(n.text?n.text+(a?" | ":""):"")+(a||""),icon:"fonticon fonticon-"+n.icon,selectable:"facet"===e,handler:p||null}),i!==g&&("action"===e?n.listElt=t.createElement("span",{class:e+" interactive"+(c?" hidden":""),html:{tag:"span",class:"fonticon fonticon-"+n.icon},events:p?{click:p}:null}):(D=t.createElement("span",{class:"fonticon fonticon-"+n.icon}),n.listElt=t.createElement("div",t.merge(n.name?{"data-name":n.name}:{},{class:e+(c?" hidden":"")+(p?"":" idc-disabled ")+" interactive "+(!1!==b?" tab-behavior":"")+" "+u(n.name,s),html:[D,!1!==b?{tag:"span",class:"facet-label",html:n.text}:"",!1!==b&&n.text&&a?{tag:"span",class:"facet-text-separator",html:"|"}:"",a?{tag:"span",class:"facet-count",html:a}:""],"data-position":""+s,events:p?{click:p}:null}))),_.push(n.listElt),w||this._registerControl(e+"Tooltip"+s,new l({target:!1===b||"action"===e?n.listElt:D,body:n.text,position:"bottom"})));if(i!==g&&(C=t.createElement("div",{class:e+"s-list",html:_})),i!==v){var x=null,V=null,A=null,I=t.createElement("div",{class:"menu-icon-wrapper interactive",html:{class:"fonticon "+("action"===e?"fonticon-down-open":"fonticon-menu-dot")},events:"action"===e?{click:function(){m.dispatchEvent("onActionMenuIconClick",[I,m,V])}}:null});"action"===e&&this._useNativeActionMenu()?(A=h,x=I):A=y,V=this._registerControl(e+"sMenu",new A({items:E,menuIcon:I,target:x})),"facet"===e&&V.addEventOnce("onShow",function(){var e=m.getSelectedFacet();t.is(e)&&m._highlightFacet(m._getFacetElt(e,!0))}),V.elements.container.getElements(".item").forEach(function(t,e){var i={"data-position":e};r[e].name&&(i["data-name"]=r[e].name),t.set(i)}),S=t.createElement("div",{class:e+"s-menu",html:[I,V]})}return this._config.set(f+"WithExtraData",r),C?S?[C,S]:C:S||null}return null},_createBannerSection:function(){var e,i=this._config.get("banner->url");return i?(e=t.createElement("span",{class:"fonticon fonticon-pencil interactive"}),w||this._registerControl("bannerEditTooltip",new l({target:e,body:p.Change,position:"bottom"})),{class:"banner-section"+(!0===this._config.get("banner->alwaysEditable")?" edit-mode":""),html:[{class:"banner",styles:{"background-image":"url('"+i+"')"}},e]}):{class:"banner-section"}},_createThumbnailSection:function(){var e,i=this._config.get("thumbnail->url");return i?(e=t.createElement("span",{class:"fonticon fonticon-pencil interactive"}),w||this._registerControl("thumbnailEditTooltip",new l({target:e,body:p.Change,position:"bottom"})),{class:"thumbnail-section"+(!0===this._config.get("thumbnail->alwaysEditable")?" edit-mode":""),html:[{class:"thumbnail"+(!0===this._config.get("thumbnail->squareFormat")?" square-format":""),styles:{"background-image":"url('"+i+"')"}},e]}):{class:"thumbnail-section"}},_createActionsSection:function(){return{class:"actions-section",html:this._createList("action",this._useNativeActionMenu()?"menu":void 0)}},_createHeaderSection:function(){return{class:"header-section",html:[this._createTitleSection(),this._createActionsSection()]}},_createDetailedInfoSection:function(){var t=this._config.get("date"),e=this._config.get("ownerName"),i=this._config.get("description"),n=this._config.get("publicationText");return{class:"detailed-info-section",html:[{class:"owner-name-section",html:[n&&e?{tag:"span",class:"text-muted",html:n}:"",e?{tag:"span",class:"text-primary",html:e}:"",t?{tag:"span",class:"text-muted",html:(e?" : ":"")+t}:""]},i?{class:"description-section",html:i}:null]}},_createMainSection:function(){return{class:"main-section",html:{class:"info-and-thumbnail-section",html:[this._createThumbnailSection(),{class:"info-section",html:[this._createHeaderSection(),this._createDetailedInfoSection()]}]}}},_createFacetsSection:function(){var t={class:"facets-section",html:{class:"facets",html:this._createList("facet")}},e=this._config.get("facetsWithExtraData");return!0===(!e||(!!(this._facetsLikeTabs&&e.length<=1)||!e.some(function(t){return!t.hidden})))?this.container.addClassName("without-facets"):this.container.removeClassName("without-facets"),t},_refreshSection:function(e){var i,n=null,s=void 0,o=this.elements,a=e+"Section";if(o[a]){switch(e){case"actions":for(s in this._controls)this._controls.hasOwnProperty(s)&&0===s.indexOf("actionTooltip")&&this._unregisterControl(s);break;case"facets":for(s in this._controls)this._controls.hasOwnProperty(s)&&0===s.indexOf("facetTooltip")&&this._unregisterControl(s)}switch((i=this["_create"+e.ucfirst()+"Section"]())&&(n=t.createElement("div",i)),function(t,e){if(t){var i=t.getParent();if(i)return e?i.replaceChild(e,t):t.destroy(),t}}(o[a],n),n?o[a]=n:delete o[a],e){case"actions":this._adaptActionsLayout();break;case"facets":this._facetsScrollToLeft=0,this._adaptFacetsLayout()}}},_handleFacetsVisibility:function(e,i,n,s){var o,a=!1,r=[],l=n.getElements(".facet:not(.hidden)"),c=this.container.hasClassName("facets-as-list"),h=Math.floor((e-(c?0:38))/48);if(!t.is(i,"number"))throw new Error('"facetsScrollToLeft" is supposed to be a number');return n||(n=this.getElement(".facets-list")),t.is(s,"number")||(s=Math.ceil((n.getSize().width-i-e+(c?0:38))/48)),o=Math.max(0,l.length-h-s),(s>0||o>0)&&(a=!0,o>0&&(r=l.slice(0,o)),s>0&&(r=r.concat(l.reverse().slice(0,s)))),l.forEach(function(t){r.indexOf(t)<0?t.removeClassName("resp-hidden"):t.addClassName("resp-hidden")}),a},_getMinimumScrollForFacetEltToBeVisible:function(t,e){var i,n=0;return e||(e=this.getElement(".facets-list")),this.container&&!0===this._inDOM&&((i=Math.round(t.getPosition(this.elements.facetsSection,"left").x))<=0?n=i:(38,n=(i=this.elements.facetsSection.getSize().width-i-48)>=38?0:48*Math.ceil((38-i)/48))),n},_scrollFacetSectionToFacetElt:function(t,e){var i;e||(e=this.getElement(".facets-list")),this.container&&!0===this._inDOM&&(t?this._facetsScrollToLeft=Math.round(t.getPosition(this.elements.facetsSection,"left").x)+this._facetsScrollToLeft:((i=e.style.transform)&&(i=i.match(C)),this._facetsScrollToLeft=i?+i[2]:0),n.Client.Platform.ios&&(e.style["-webkit-transform"]="translateX(-"+this._facetsScrollToLeft+"px)"),e.style.transform="translateX(-"+this._facetsScrollToLeft+"px)")},_scrollFacetSectionAndHandleFacetsVisibility:function(t,e){var i,n,s,o,a=0,r=t.getElement(".facet.selected"),l=r;if(r){if(!r.hasClassName("resp-hidden")&&e>=182){o=r;do{o=o.previousElementSibling}while(o&&o.hasClassName("hidden"));if(o&&o.hasClassName("resp-hidden"))l=o;else{s=r;do{s=s.nextElementSibling}while(s&&s.hasClassName("hidden"));s&&(l=s)}}a=this._getMinimumScrollForFacetEltToBeVisible(l,t)}return n=(t.getSize().width-(this._facetsScrollToLeft+a)-e+(this.container.hasClassName("facets-as-list")?0:38))/48,n=Math.abs(n-Math.floor(n))<=.1?Math.max(0,Math.floor(n)):Math.max(0,Math.ceil(n)),i=this._handleFacetsVisibility(e,this._facetsScrollToLeft+a,t,n),this._scrollFacetSectionToFacetElt(t.getElement(".facet:not(.resp-hidden):not(.hidden)"),t),i},_adaptSectionLayout:function(e){var i=e.type,n=this.getElement("."+i+"s-list");if(!n)return!1;var s,o=n.getSize(),a="_"+i+"sLayout",r=n.hasClassName("minimized"),l=t.is(e.maxWidth)?e.maxWidth:e.containerWidth*e.maxWidthInPercent;return o.width<Math.floor(l)?(s=!1,this[a]=v,this.container.addClassName(i+"s-as-list"),"facet"===i&&(r?(n.removeClassName("without-counts"),n.getSize().width>l?n.addClassName("without-counts"):(n.removeClassName("minimized"),n.getSize().width>l&&n.addClassName("minimized")),!1!==this._facetsLikeTabs&&(s=this._scrollFacetSectionAndHandleFacetsVisibility(n,l))):!1!==this._facetsLikeTabs&&this._handleFacetsVisibility(l,0,n,0))):(s=!0,o.width>38&&(this[a]=g,this.container.removeClassName(i+"s-as-list")),"facet"===i&&!1!==this._facetsLikeTabs&&(n.hasClassName("without-counts")||(r||n.addClassName("minimized"),(0===l||n.getSize().width>l)&&n.addClassName("without-counts")),s=this._scrollFacetSectionAndHandleFacetsVisibility(n,l))),s?o.width>38&&(this[a]=g,this.container.removeClassName(i+"s-as-list")):(this[a]=v,this.container.addClassName(i+"s-as-list")),!0},_adaptActionsLayout:function(){var t,e,i,n,s=this.container,o=.25,a=this.getElement(".actions-list"),r=this.getElement(".header-section");return!(!r||!a)&&(i=r.getSize().width,a.getSize().width>o*i?(this._actionsLayout===v&&s.addClassName("with-priority-title"),n=(t=this.getElement(".title-section h1")).getSize().height,e=0,t.getElements("span").forEach(function(t){e+=t.getSize().width}),o=1-e/i,n>28&&o>.4&&(o=.4)):s.removeClassName("with-priority-title"),this._adaptSectionLayout({type:"action",maxWidthInPercent:o,containerWidth:i}))},_adaptFacetsLayout:function(){var t=this.getElement(".facets");if(t)return this._adaptSectionLayout({type:"facet",maxWidthInPercent:1,containerWidth:t.getSize().width})},_makeTransition:function(t,e){var i=this;return this._transitioning=!0,this.container.addClassName("transitioning"),t.call(this),this._transitioning=!1,setTimeout(function(){!1===i._transitioning&&i.container&&i.container.removeClassName("transitioning")},e),this},_handleImagesDisplay:function(){this.container.getSize().width<=400?(this.container.addClassName("small-size-id-card"),this.container.addClassName("without-banner"),this.container.addClassName("without-thumbnail")):(this.container.removeClassName("small-size-id-card"),this._minimized||this._collapsed||this._folded||(this._config.get("thumbnail->url")?this.container.removeClassName("without-thumbnail"):this.container.addClassName("without-thumbnail"),this._config.get("banner->url")?this.container.removeClassName("without-banner"):this.container.addClassName("without-banner")))},_getFacet:function(e){var i=null,n=this._config.get("facets");if(n&&n.length>0)switch(t.typeOf(e)){case"string":i=n.detect(function(t){return t.name===e});break;case"number":i=n[e];break;default:throw new Error("Invalid facet key!")}return i},_getFacetElt:function(e,i){var n=null,s=t.typeOf(e);switch(!0!==i&&(i=!1),s){case"string":case"number":n=this.getElement(".facets-"+(i?"menu":"list")+" .facet[data-"+("string"===s?"name":"position")+'="'+e+'"]');break;default:throw new Error("Invalid facet key!")}return n},_getFacetValue:function(t){var e="";return t&&(t.attribute||t.getter)&&(e=this._getModelAttribute(t.attribute,t.getter)),e},_getFacetName:function(t){var e=null;return t&&((e=t.name)||(e=[],t.text&&e.push("t_"+t.text),t.icon&&e.push("i_"+t.icon),(e=e.join("&"))&&(e=n.getCheckSum(e)))),e||(e=n.getUUID()),e},_setConfig:function(e){var i=this.model,n={},s=this.options;return e.forEach(function(t){n[t]=S(s,t,i)}),e.indexOf("bannerUrl")>-1&&(n.banner=t.merge(n.banner||{},{url:n.bannerUrl}),delete n.bannerUrl),e.indexOf("thumbnailUrl")>-1&&(n.thumbnail=t.merge(n.thumbnail||{},{url:n.thumbnailUrl}),delete n.thumbnailUrl),["title","ownerName","date","description"].forEach(function(t){n[t]=this._getModelAttribute(t)},this),t.is(n.facets,"array")&&n.facets.forEach(function(t){t.value=this._getFacetValue(t)},this),this._config.set(n),this},_onResize:function(){this._rendered&&this.container.getSize().width>0&&(this._handleImagesDisplay(),this._useNativeActionMenu()||this._adaptActionsLayout(),this._adaptFacetsLayout())},onInjected:function(){this.container&&(this._inDOM=!0,this._onResize(),this.container.addClassName("ready"))},_highlightFacet:function(t){if(t){var e,i,n=t.hasClassName("item"),s=this.getElements(".facet.selected");if(s.some(function(e){return e===t}))return!1;s.forEach(function(t){t.removeClassName("selected")}),t.addClassName("selected"),e=parseInt(t.getAttribute("data-position"),10),(i=this._getFacetElt(e,!n))&&i.addClassName("selected")}else console.warn("The facet element to highlight could not be found");return this},_injectEditView:function(e,i){var n=this._registerControl("editView",new e(t.merge({model:this.model},this._config.get("editViewOptions"))));return n.render(),n.inject(i),n},_onTitleChangeRequest:function(t){var e=this._controls.titleInput;e&&this.dispatchEvent("onTitleChangeRequest",[e.getValue(),this])},_onBannerChangeRequest:function(t){this.dispatchEvent("onBannerChangeRequest",[this])},_onThumbnailChangeRequest:function(t){this.dispatchEvent("onThumbnailChangeRequest",[this])},_createContent:function(){return[this._createBannerSection(),this._createMainSection(),this._createFacetsSection()]},init:function(e){var i,n,s,o=e&&e.model;if(!o)throw new Error("Model is missing");this._attributesMapping||(this._attributesMapping={}),this._config=new _({},{idCard:this}),this.listenTo(e.model,"onChange",this.render),n=(i=this._refreshSection).bind(this,"title"),s=i.bind(this,"detailedInfo"),this.listenTo(this._config,{"onChange:title":n,"onChange:date":s,"onChange:ownerName":s,"onChange:description":s,"onChange:facets":i.bind(this,"facets"),"onChange:actions":i.bind(this,"actions"),"onChange:banner":i.bind(this,"banner"),"onChange:thumbnail":i.bind(this,"thumbnail")}),["folded","collapsed","minimized","facetsLikeTabs","editableElements","attributesMapping","nativeActionMenu"].forEach(function(t){e.hasOwnProperty(t)&&(this["_"+t]=S(e,t,o))},this),this.addEventOnce("onRender",function(){var i=S(e,"selectedFacet",o);t.is(this._selectedFacet)||this.selectFacet(i),!0===this._folded&&(this._folded=!1,this.fold()),!0===this._collapsed&&(this._collapsed=!1,this.collapse()),this._minimized&&(this._minimized=!1,this.minimize())}),this._parent.apply(this,arguments),this.dispatchEvent("onInit",[this,e])},setOptions:function(e,i){if(e){var n={};t.is(i)&&"string"==typeof e?n[e]=i:n=e,this._parent(n),this._setConfig(Object.keys(n))}return this},setup:function(e){return this.setOptions(t.merge(t.clone(e,!1),this.options))},render:function(){return this._rendered?this.setOptions(this.options):this._parent(),this.dispatchEvent("onRender",[this]),this},onRender:function(){return this.selectFacet(this._selectedFacet),this._mode===f&&this.switchToEditMode(),["title","actions","facets","banner","thumbnail","detailed-info"].forEach(function(t){var e=t.camelCase()+"Section";this.elements[e]=this.getElement("."+t+"-section"),this.elements[e]||delete this.elements[e]},this),this._mode===f&&(this._mode=m,this.switchToEditMode()),this._onResize(),this},minimize:function(){return this._minimized||(this._minimized=!0,this.container.addClassName("without-banner"),this.container.addClassName("without-thumbnail"),this.container.addClassName("minimized")),this},maximize:function(){return this._minimized&&(this._minimized=!1,this._handleImagesDisplay(),this.container.removeClassName("minimized")),this},isMinimized:function(){return this._minimized},selectFacet:function(e,i){if(!t.is(e,"number")&&!t.is(e,"string"))return!1;var n,s=e,o=this._getFacet(s),a=this.getSelectedFacet();if(t.is(a)||o||(s=0,o=this._getFacet(s)),!o)return!1;if(!1!==this._facetsLikeTabs){if(!(n=this._getFacetElt(s))&&!this._rendered)return this.setOption("selectedFacet",e),this;if(!this._highlightFacet(n))return this;this._selectedFacet=n.getAttribute("data-name")||parseInt(n.getAttribute("data-position"),10),this._previouslySelectedFacetName=this._selectedFacetName,this._selectedFacetName=this._getFacetName(o),this._adaptFacetsLayout()}return i&&!0===i.silent||this._previouslySelectedFacetName===this._selectedFacetName&&!1!==this._facetsLikeTabs||(o.handler.call(this),this.dispatchEvent("onFacetSelect",[this._selectedFacet,a])),this},getSelectedFacet:function(){return this._selectedFacet},collapse:function(){return this._collapsed||this._mode!==m||(this._collapsed=!0,this.container.addClassName("without-banner"),this.container.addClassName("without-thumbnail"),this.container.addClassName("collapsed")),this},expand:function(){return this._collapsed&&(this._collapsed=!1,this._handleImagesDisplay(),this.container.removeClassName("collapsed")),this},isCollapsed:function(){return this._collapsed},fold:function(){return this._makeTransition(function(){this._folded||this._mode!==m||(this._folded=!0,this.container.addClassName("without-banner"),this.container.addClassName("without-thumbnail"),this.container.addClassName("folded"))},200),this},unfold:function(){return this._makeTransition(function(){this._folded&&(this._folded=!1,this._handleImagesDisplay(),this.container.removeClassName("folded"))},300),this},isFolded:function(){return this._folded},switchToEditMode:function(){if(this._mode!==f){var e,n=this,s=this.model,o=this._folded,a=this._collapsed,r=this._editableElements,l=this.elements.bannerSection,c=this.getElement(".title-section"),h=this.elements.thumbnailSection,u=this._config.get("editView"),p=t.typeOf(u);if(i.isArray(r)&&r.length>0){if(o&&this.unfold(),a&&this.expand(),this._mode=f,this.container.addClassName("edit-mode"),this.stopListening(s,"onChange",this.render),c&&r.indexOf("title")>=0)switch(c.addClassName("edit-mode"),p){case"class":this._injectEditView(u,c);break;case"string":require([u],function(t){n._injectEditView(t,c)});break;default:(e=this._registerControl("titleInput",new d({value:this._config.get("title").unescapeHTML()||""}))).inject(c),e.focus()}this._config.get("banner->url")&&r.indexOf("banner")>=0&&l.addClassName("edit-mode"),this._config.get("thumbnail->url")&&r.indexOf("thumbnail")>=0&&h.addClassName("edit-mode"),!0===o&&this.addEventOnce("onSwitchToViewMode",this.fold),!0===a&&this.addEventOnce("onSwitchToViewMode",this.collapse),this.dispatchEvent("onSwitchToEditMode",[this])}}return this},switchToViewMode:function(){if(this._mode!==m){var t=this.getElement(".title-section"),e=this.elements.bannerSection,i=this.elements.thumbnailSection;this._mode=m,this.container.removeClassName("edit-mode"),t&&(this._unregisterControl("titleInput"),this._unregisterControl("editView"),t.removeClassName("edit-mode")),e&&!0!==this._config.get("banner->alwaysEditable")&&e.removeClassName("edit-mode"),i&&!0!==this._config.get("thumbnail->alwaysEditable")&&i.removeClassName("edit-mode"),this.render(),this.listenTo(this.model,"onChange",this.render),this.dispatchEvent("onSwitchToViewMode",[this])}return this},destroy:function(){return this._config.destroy(),this._config=null,this._inDOM=!1,this._parent.apply(this,arguments)}})}),define("DS/W3DXComponents/Views/Layout/CardView",["UWA/Core","UWA/Event","UWA/Element","UWA/Utils/Client","UWA/Class/View","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s){"use strict";var o=n.Features;function a(t,e,n,s){"init"===t?i.addEvents.call(e,{touchstart:n,mousedown:n,MSPointerDown:n},void 0,void 0,s):"start"===t?i.addEvents.call(e,{touchmove:n,mousemove:n,MSPointerMove:n,touchend:n,touchcancel:n,mouseup:n,MSPointerUp:n},void 0,void 0,s):"stop"===t?i.removeEvents.call(e,{touchmove:n,mousemove:n,MSPointerMove:n,touchcancel:n,touchend:n,mouseup:n,MSPointerUp:n}):"destroy"===t&&i.removeEvents.call(e,{touchstart:n,mousedown:n,MSPointerDown:n,touchmove:n,mousemove:n,MSPointerMove:n,touchcancel:n,touchend:n,mouseup:n,MSPointerUp:n})}function r(t){var e=t.type;return-1!==e.indexOf("mouse")?"mouse":-1!==e.indexOf("touch")?"touch":-1!==e.indexOf("ointer")?"pointer":"none"}return s.extend({tagName:"div",elements:{},className:"cardview",cards:null,_currIndex:1,contWidthCache:null,_eventHandler:null,dragInitEvent:null,dragMoveEvent:null,isDragging:null,dragPositions:[],maxAnimDuration:550,dragThreshold:60,isMuted:!1,isTracking:null,isAnimActive:!1,transitionProp:"",lastShownIndex:null,defaultOptions:{index:0,cardBackground:"white",bounce:!0},init:function(t,e){if(!Array.isArray(t))throw new Error("Elements must be of type array.");this._parent(e),this._currIndex=this.options.index,this.cards=this.mapElements(t)},setup:function(e){var i=this.container;o.matrixCSS?this.setPosition=function(e,i){var n=t.is(i.x,"number")?i.x+"px":i.x||0,s=t.is(i.y,"number")?i.y+"px":i.y||0;e.setStyle(e.getStyleName("transform",!0),"translate3d("+n+","+s+", 0)")}:this.setPosition=function(e,i){var n=t.is(i.x,"number")?i.x+"px":i.x||0,s=t.is(i.y,"number")?i.y+"px":i.y||0;e.setStyle(e.getStyleName("transform",!0),"translate("+n+","+s+")")},this.transitionProp=i.getStyleName("transform",!0),this._parent(e)},render:function(){return this.buildCards(0,this.cards.length-1),this},mapElements:function(t){return t.map(function(t){return t instanceof s&&t.render(),{container:null,content:t,_animCount:0,_isDragged:!1,_index:null}})},buildCard:function(e,i){return t.createElement("div",{class:this.className+"-card",html:e,styles:i})},buildCards:function(t,e){for(var n,s=this.cards,o=document.createDocumentFragment(),a=t||0,r=e||0,l=e+1;a<=r;a++)(n=s[a]).container=this.buildCard(n.content||null,{backgroundColor:this.options.cardBackground}),this.setPosition(n.container,{x:a<=this._currIndex?0:"100%",y:null}),n.container.inject(o);s[l]&&s[l].container&&s[l].container.isInjected()?i.inject.call(o,s[l].container,"before"):this.container.appendChild(o)},onPreInject:function(){this.initDragEvents()},getContainerDim:function(){return this.container?this.container.getDimensions().innerWidth:0},onDragInit:function(t){if(!this.isDragging&&function(t){return"touchstart"===t.type||0===e.whichButton(t)}(t)){var i=this.getContainerDim(),n=this.cards[this._currIndex];n&&(this.dragInitEvent={width:this.getContainerDim(),position:e.getPosition(t),time:t.timeStamp,draggedCard:n},a("start",this.container,this._eventHandler),this.contWidthCache=i,this.isTracking=r(t))}},onDragMove:function(i){if(this.dragInitEvent&&this.isTracking===r(i)){var n,s,o,a,l,c=this.options,h=e.getPosition(i),d=this.dragInitEvent,u=this.dragMoveEvent,p=d.position,m=this.cards,f=this._currIndex,g=d.width,v=h.x-p.x,w=i.timeStamp,C=!1;if(this.isDragging&&u)e.stop(i),n=h.x-(u?this.dragMoveEvent.position.x:0),a=u.draggedCard,o="right"===(s=u.direction)||u.bounce?v:g-Math.abs(v),this.setPosition(a.container,{x:o,y:null}),t.extend(this.dragMoveEvent,{time:w,position:h,currentDelta:{x:n,y:null}});else if(Math.abs(v)>=this.dragThreshold){if(this.blockScroll(),"right"===(s=v>0?"right":"left")?(f+1,a=m[f],l=f):(f-2,a=m[f+1],l=f+1),0===f&&"right"===s||f===m.length-1&&"left"===s){if(!c.bounce)return void this.resetDragFlags();C=!0,a||(a=m[f],l=f)}a._isDragged=!0,this.isDragging=!0,this.isAnimActive=!0,this.dragMoveEvent={draggedCard:a,index:l,currentPos:{x:o,y:null},position:h,time:w,direction:s||null,bounce:C,currentDelta:{x:n,y:null}},this.throwEvent("onStartDrag",a,{direction:s,index:l},i)}}},onDragStop:function(t){var i=this,n=i.dragInitEvent;if(i.isTracking===r(t)&&i.isDragging){var s,o,l=i.dragMoveEvent,c={time:t.timeStamp,position:e.getPosition(t)},h=i.container,d=n.position,u=c.position,p=c.time-n.time,m=n.width,f=l.currentDelta,g=i.calculateSpeed(d,u,p),v=h.getPosition(document.documentElement).x,w=l.draggedCard,C=!1,S=l.direction,y=i._currIndex,_=l.bounce;i.deblockScroll(),a("stop",h,i._eventHandler),_?s=0:(s=i.calculateFinalPosition(f,u,m,v,g))===m&&"right"===S?(i.updateIndex("left"),C=!0):0===s&&"left"===S&&(i.updateIndex("right"),C=!0),o=i.calculateTime(s,v,u,g),i.animateCardPosition(w,{x:s,y:null},{duration:Math.min(o,i.maxAnimDuration),cb:function(e){var n,s,o=e._index;_?(n=o,s="onPullCard"):"right"===S&&C||"left"===S&&!C?n=o-1:("left"===S&&C||"right"===S&&!C)&&(n=o),i.isAnimActive=!1,n!==i.lastShownIndex&&(i.lastShownIndex=n,s="onShowCard"),s&&i.throwEvent(s,e,{direction:S,index:n},t),e._index=null}}),i.throwEvent("onEndDrag",w,{direction:S,index:"right"===S?y:y+1,didSnap:C},t),i.resetDragFlags(w)}else i.resetDragFlags(n?n.card:null)},blockScroll:function(){this.container.addEvents({mousemove:e.preventDefault,touchmove:e.preventDefault})},deblockScroll:function(){var t=this.container;t.removeEvent("mousemove",e.preventDefault),t.removeEvent("touchmove",e.preventDefault)},calculateFinalPosition:function(t,e,i,n,s){var o=t.x;return o>0?e.x>=n+.4*i||s>=.5?i:0:o<0?e.x<=n+.6*i||s>=.5?0:i:e.x<=n+.5*i?0:i},calculateSpeed:function(t,e,i){var n;return n=Math.abs(t.x-e.x),Math.min(n/i,1.9)},throwEvent:function(t,e,i,n){this.dispatchEvent(t,[this,e,i,n])},calculateTime:function(t,e,i,n){return Math.abs(t+e-i)/n},resetDragFlags:function(t){this.dragInitEvent=null,this.dragMoveEvent=null,this.isTracking=null,this.isDragging=!1,this.dragPositions=[],t&&(t._isDragged=!1)},updateShadows:function(){var t=this._currIndex;this.removeShadow(t-1),this.addShadow(t),this.removeShadow(t+2),this.addShadow(t+1)},updateIndex:function(t){this._currIndex="left"===t?this._currIndex-1:this._currIndex+1},removeAnimationStyles:function(t){t.setStyles({transitionDuration:"",transitionProperty:"",perspective:"",fontSmoothing:"",transformOrigin:"",transitionTimingFunction:"",transitionDelay:"",transformStyle:""})},getAnimStyles:function(t,e){var i=this.container,n=this.transitionProp||i.getStyleName("transform",!0),s=t.x||0,a=t.y||0,r={transformOrigin:"0 0",fontSmoothing:"antialiased",perspective:800,transitionDelay:"0ms",transitionDuration:Math.round(e,10)+"ms",transitionProperty:n,transformStyle:"preserve-3d",transitionTimingFunction:"cubic-bezier(0.33, 0.66, 0.66, 1)"};return o.matrixCSS?r.transform="translate3d("+s+"px, "+a+"px, 0)":r.transform="translate("+s+"px, "+a+"px)",r},setPosition:function(){},animateCardPosition:function(e,i,n){var s,o=this,a=n||{},r=i,l=r.x,c=e.container,h=a.duration||400,d=o.getAnimStyles(r,h);function u(){clearTimeout(s),e._animCount--,o.removeAnimationStyles(c),c.removeEvent("transitionEnd"),0!==e._animCount||e._isDragged||(e._index=o.cards.indexOf(e),o.setPosition(c,{x:l===o.contWidthCache?"100%":0,y:null}),t.is(a.cb,"function")&&a.cb.call(null,e))}s=setTimeout(u,o.maxAnimDuration+20),e._animCount++,c.addEvent("transitionEnd",u),c.setStyles(d)},initDragEvents:function(){var t=this,i=t.container;if(!i)throw new Error("Render CardView before injecting.");i.addEvent("click",function(i){if(t.isAnimActive)return e.stop(i),!1},void 0,void 0,!0),t._eventHandler=t._eventHandler||t.handleEvent.bind(t),a("init",i,t._eventHandler,!0)},removeDragEvents:function(){var t=this.container;a("destroy",t,this._eventHandler),t.removeEvents()},handleEvent:function(t){switch(t.type){case"touchstart":case"mousedown":case"MSPointerDown":this.onDragInit(t);break;case"touchmove":case"mousemove":case"MSPointerMove":this.onDragMove(t);break;case"touchend":case"touchcancel":case"mouseup":case"MSPointerUp":this.onDragStop(t)}},addCards:function(e,i){var n,s,o,a=(i||{}).where||"after",r=this.cards,l=this._currIndex,c=t.is(this.lastShownIndex)?this.lastShownIndex:l;if(!Array.isArray(e))throw new Error("Elements should be of type Array.");if(!t.is(a,"number")&&!t.is(a,"string"))throw new Error("Where must be of type string or number.");if(0!==e.length){switch(n=this.mapElements(e),a){case"after":s=r.length,o=(r=r.concat(n)).length-1;break;case"before":s=0,r=n.concat(r),o=n.length-1,l+=n.length,c+=n.length;break;default:s=a=a>r.length-1?r.length:a,r=r.slice(0,a).concat(n).concat(r.slice(a)),l=a>l?l:l+a,c=a>c?c:c+a,o=n.length-1}this.cards=r,this._currIndex=l,this.lastShownIndex=c,this.buildCards(s,o)}},addEmptyCard:function(t){this.addCards([null],t)},setCardContent:function(t,e){var i=this.cards[e];i&&(t instanceof s&&t.render(),i.content&&i.content.destroy(),i.content=t,i.content.inject(i.container.empty()))},removeShadow:function(t){var e=this.cards[t];e&&e.container&&e.container.removeClassName("shadow")},addShadow:function(t){var e=this.cards[t];e&&e.container&&e.container.addClassName("shadow")},removeCards:function(e,i){if(!t.is(e,"number")||!t.is(i,"number"))throw new Error("Arguments must be of type number.");if(i-e<0)throw new Error("Error with indexes.");this.cards.splice(e,i-e).forEach(function(t){t.content&&t.content.destroy(),t.container.destroy()})},getCardAt:function(t){return this.cards[t]||null},mute:function(){if(!this.isMuted){var t=this.container;this.isMuted=!0,a("destroy",t,this._eventHandler)}},unMute:function(){if(this.isMuted){var t=this.container;this.isMuted=!1,a("init",t,this._eventHandler)}},destroy:function(){this.removeDragEvents(),this.stopListening(),this.resetDragFlags(),this.cards.forEach(function(t){var e=t.content,i=t.container;e&&e.destroy(),i&&i.destroy()}),this._parent(),this.cards.length=0}})}),define("DS/W3DXComponents/Views/Temp/TempHandlebars",[],function(){var t,e,i,n,s,o,a,r;return t=function(){"use strict";function t(t){this.string=t}return t.prototype.toString=function(){return""+this.string},t}(),e=function(e){"use strict";var i={},n=t,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o=/[&<>"'`]/g,a=/[&<>"'`]/;function r(t){return s[t]||"&amp;"}i.extend=function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])};var l,c=Object.prototype.toString;i.toString=c,(l=function(t){return"function"==typeof t})(/x/)&&(l=function(t){return"function"==typeof t&&"[object Function]"===c.call(t)}),i.isFunction=l;var h=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===c.call(t)};return i.isArray=h,i.escapeExpression=function(t){return t instanceof n?t.toString():t||0===t?(t=""+t,a.test(t)?t.replace(o,r):t):""},i.isEmpty=function(t){return!t&&0!==t||!(!h(t)||0!==t.length)},i}(),i=function(){"use strict";var t=["description","fileName","lineNumber","message","name","number","stack"];function e(e,i){var n;i&&i.firstLine&&(e+=" - "+(n=i.firstLine)+":"+i.firstColumn);for(var s=Error.prototype.constructor.call(this,e),o=0;o<t.length;o++)this[t[o]]=s[t[o]];n&&(this.lineNumber=n,this.column=i.firstColumn)}return e.prototype=new Error,e}(),n=function(t,n){"use strict";var s={},o=e,a=i;s.VERSION="1.3.0";s.COMPILER_REVISION=4;s.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};var r=o.isArray,l=o.isFunction,c=o.toString;function h(t,e){var i;this.helpers=t||{},this.partials=e||{},(i=this).registerHelper("helperMissing",function(t){if(2!==arguments.length)throw new a("Missing helper: '"+t+"'")}),i.registerHelper("blockHelperMissing",function(t,e){var n=e.inverse||function(){},s=e.fn;return l(t)&&(t=t.call(this)),!0===t?s(this):!1===t||null==t?n(this):r(t)?t.length>0?i.helpers.each(t,e):n(this):s(t)}),i.registerHelper("each",function(t,e){var i,n=e.fn,s=e.inverse,o=0,a="";if(l(t)&&(t=t.call(this)),e.data&&(i=p(e.data)),t&&"object"==typeof t)if(r(t))for(var c=t.length;o<c;o++)i&&(i.index=o,i.first=0===o,i.last=o===t.length-1),a+=n(t[o],{data:i});else for(var h in t)t.hasOwnProperty(h)&&(i&&(i.key=h,i.index=o,i.first=0===o),a+=n(t[h],{data:i}),o++);return 0===o&&(a=s(this)),a}),i.registerHelper("if",function(t,e){return l(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||o.isEmpty(t)?e.inverse(this):e.fn(this)}),i.registerHelper("unless",function(t,e){return i.helpers.if.call(this,t,{fn:e.inverse,inverse:e.fn,hash:e.hash})}),i.registerHelper("with",function(t,e){if(l(t)&&(t=t.call(this)),!o.isEmpty(t))return e.fn(t)}),i.registerHelper("log",function(t,e){var n=e.data&&null!=e.data.level?parseInt(e.data.level,10):1;i.log(n,t)})}s.HandlebarsEnvironment=h,h.prototype={constructor:h,logger:d,log:u,registerHelper:function(t,e,i){if("[object Object]"===c.call(t)){if(i||e)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else i&&(e.not=i),this.helpers[t]=e},registerPartial:function(t,e){"[object Object]"===c.call(t)?o.extend(this.partials,t):this.partials[t]=e}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(d.level<=t){var i=d.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,e)}}};function u(t,e){d.log(t,e)}s.logger=d,s.log=u;var p=function(t){var e={};return o.extend(e,t),e};return s.createFrame=p,s}(),s=function(t,n,s){"use strict";var o={},a=e,r=i,l=s.COMPILER_REVISION,c=s.REVISION_CHANGES;function h(t,e,i){var n=function(t,n){return e(t,(n=n||{}).data||i)};return n.program=t,n.depth=0,n}return o.checkRevision=function(t){var e=t&&t[0]||1;if(e!==l){if(e<l){var i=c[l],n=c[e];throw new r("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+n+").")}throw new r("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},o.template=function(t,e){if(!e)throw new r("No environment passed to template");var i={escapeExpression:a.escapeExpression,invokePartial:function(t,i,n,s,o,a){var l=e.VM.invokePartial.apply(this,arguments);if(null!=l)return l;if(e.compile){var c={helpers:s,partials:o,data:a};return o[i]=e.compile(t,{data:void 0!==a},e),o[i](n,c)}throw new r("The partial "+i+" could not be compiled when running in runtime-only mode")},programs:[],program:function(t,e,i){var n=this.programs[t];return i?n=h(t,e,i):n||(n=this.programs[t]=h(t,e)),n},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i={},a.extend(i,e),a.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(n,s){var o,a,r=(s=s||{}).partial?s:e;s.partial||(o=s.helpers,a=s.partials);var l=t.call(i,r,n,o,a,s.data);return s.partial||e.VM.checkRevision(i.compilerInfo),l}},o.programWithDepth=function(t,e,i){var n=Array.prototype.slice.call(arguments,3),s=function(t,s){return s=s||{},e.apply(this,[t,s.data||i].concat(n))};return s.program=t,s.depth=n.length,s},o.program=h,o.invokePartial=function(t,e,i,n,s,o){var a={partial:!0,helpers:n,partials:s,data:o};if(void 0===t)throw new r("The partial "+e+" could not be found");if(t instanceof Function)return t(i,a)},o.noop=function(){return""},o}(0,0,n),o=function(o,a,r,l,c){"use strict";var h=n,d=t,u=i,p=e,m=s,f=function(){var t=new h.HandlebarsEnvironment;return p.extend(t,h),t.SafeString=d,t.Exception=u,t.Utils=p,t.VM=m,t.template=function(e){return m.template(e,t)},t},g=f();return g.create=f,g}(),a=function(t){"use strict";var e=i;function n(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var s={ProgramNode:function(t,e,i,o){var a,r;3===arguments.length?(o=i,i=null):2===arguments.length&&(o=e,e=null),n.call(this,o),this.type="program",this.statements=t,this.strip={},i?((r=i[0])?(a={first_line:r.firstLine,last_line:r.lastLine,last_column:r.lastColumn,first_column:r.firstColumn},this.inverse=new s.ProgramNode(i,e,a)):this.inverse=new s.ProgramNode(i,e),this.strip.right=e.left):e&&(this.strip.left=e.right)},MustacheNode:function(t,e,i,o,a){if(n.call(this,a),this.type="mustache",this.strip=o,null!=i&&i.charAt){var r=i.charAt(3)||i.charAt(2);this.escaped="{"!==r&&"&"!==r}else this.escaped=!!i;t instanceof s.SexprNode?this.sexpr=t:this.sexpr=new s.SexprNode(t,e),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,e,i){n.call(this,i),this.type="sexpr",this.hash=e;var s=this.id=t[0],o=this.params=t.slice(1),a=this.eligibleHelper=s.isSimple;this.isHelper=a&&(o.length||e)},PartialNode:function(t,e,i,s){n.call(this,s),this.type="partial",this.partialName=t,this.context=e,this.strip=i},BlockNode:function(t,i,s,o,a){if(n.call(this,a),t.sexpr.id.original!==o.path.original)throw new e(t.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=t,this.program=i,this.inverse=s,this.strip={left:t.strip.left,right:o.strip.right},(i||s).strip.left=t.strip.right,(s||i).strip.right=o.strip.left,s&&!i&&(this.isInverse=!0)},ContentNode:function(t,e){n.call(this,e),this.type="content",this.string=t},HashNode:function(t,e){n.call(this,e),this.type="hash",this.pairs=t},IdNode:function(t,i){n.call(this,i),this.type="ID";for(var s="",o=[],a=0,r=0,l=t.length;r<l;r++){var c=t[r].part;if(s+=(t[r].separator||"")+c,".."===c||"."===c||"this"===c){if(o.length>0)throw new e("Invalid path: "+s,this);".."===c?a++:this.isScoped=!0}else o.push(c)}this.original=s,this.parts=o,this.string=o.join("."),this.depth=a,this.isSimple=1===t.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(t,e){n.call(this,e),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,e){n.call(this,e),this.type="DATA",this.id=t},StringNode:function(t,e){n.call(this,e),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,e){n.call(this,e),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,e){n.call(this,e),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,e){n.call(this,e),this.type="comment",this.comment=t}};return s}(),r=function(){"use strict";return function(){var t={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,i,n,s,o,a,r){var l=a.length-1;switch(o){case 1:return new s.ProgramNode(a[l-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],a[l-1],a[l],this._$);break;case 4:this.$=new s.ProgramNode(a[l-2],a[l-1],a[l],this._$);break;case 5:this.$=new s.ProgramNode(a[l-1],a[l],[],this._$);break;case 6:this.$=new s.ProgramNode(a[l],this._$);break;case 7:case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[a[l]];break;case 10:a[l-1].push(a[l]),this.$=a[l-1];break;case 11:this.$=new s.BlockNode(a[l-2],a[l-1].inverse,a[l-1],a[l],this._$);break;case 12:this.$=new s.BlockNode(a[l-2],a[l-1],a[l-1].inverse,a[l],this._$);break;case 13:case 14:this.$=a[l];break;case 15:this.$=new s.ContentNode(a[l],this._$);break;case 16:this.$=new s.CommentNode(a[l],this._$);break;case 17:case 18:this.$=new s.MustacheNode(a[l-1],null,a[l-2],e(a[l-2],a[l]),this._$);break;case 19:this.$={path:a[l-1],strip:e(a[l-2],a[l])};break;case 20:case 21:this.$=new s.MustacheNode(a[l-1],null,a[l-2],e(a[l-2],a[l]),this._$);break;case 22:this.$=new s.PartialNode(a[l-2],a[l-1],e(a[l-3],a[l]),this._$);break;case 23:this.$=e(a[l-1],a[l]);break;case 24:this.$=new s.SexprNode([a[l-2]].concat(a[l-1]),a[l],this._$);break;case 25:this.$=new s.SexprNode([a[l]],null,this._$);break;case 26:this.$=a[l];break;case 27:this.$=new s.StringNode(a[l],this._$);break;case 28:this.$=new s.IntegerNode(a[l],this._$);break;case 29:this.$=new s.BooleanNode(a[l],this._$);break;case 30:this.$=a[l];break;case 31:a[l-1].isHelper=!0,this.$=a[l-1];break;case 32:this.$=new s.HashNode(a[l],this._$);break;case 33:this.$=[a[l-2],a[l]];break;case 34:this.$=new s.PartialNameNode(a[l],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(a[l],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(a[l],this._$));break;case 37:this.$=new s.DataNode(a[l],this._$);break;case 38:this.$=new s.IdNode(a[l],this._$);break;case 39:a[l-2].push({part:a[l],separator:a[l-1]}),this.$=a[l-2];break;case 40:this.$=[{part:a[l]}];break;case 43:this.$=[];break;case 44:a[l-1].push(a[l]);break;case 47:this.$=[a[l]];break;case 48:a[l-1].push(a[l])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,i=[0],n=[null],s=[],o=this.table,a="",r=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;s.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var u,p,m,f,g,v,w,C,S,y,_={};;){if(m=i[i.length-1],this.defaultActions[m]?f=this.defaultActions[m]:(null==u&&(y=void 0,"number"!=typeof(y=e.lexer.lex()||1)&&(y=e.symbols_[y]||y),u=y),f=o[m]&&o[m][u]),void 0===f||!f.length||!f[0]){var E="";if(!c){for(v in S=[],o[m])this.terminals_[v]&&v>2&&S.push("'"+this.terminals_[v]+"'");E=this.lexer.showPosition?"Parse error on line "+(r+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[u]||u)+"'":"Parse error on line "+(r+1)+": Unexpected "+(1==u?"end of input":"'"+(this.terminals_[u]||u)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[u]||u,line:this.lexer.yylineno,loc:h,expected:S})}}if(f[0]instanceof Array&&f.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+u);switch(f[0]){case 1:i.push(u),n.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(f[1]),u=null,p?(u=p,p=null):(l=this.lexer.yyleng,a=this.lexer.yytext,r=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(w=this.productions_[f[1]][1],_.$=n[n.length-w],_._$={first_line:s[s.length-(w||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(w||1)].first_column,last_column:s[s.length-1].last_column},d&&(_._$.range=[s[s.length-(w||1)].range[0],s[s.length-1].range[1]]),void 0!==(g=this.performAction.call(_,a,l,r,this.yy,f[1],n,s)))return g;w&&(i=i.slice(0,-1*w*2),n=n.slice(0,-1*w),s=s.slice(0,-1*w)),i.push(this.productions_[f[1]][0]),n.push(_.$),s.push(_._$),C=o[i[i.length-2]][i[i.length-1]],i.push(C);break;case 3:return!0}}return!0}};function e(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}var i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,i,n,s;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(i=this._input.match(this.rules[o[a]]))||e&&!(i[0].length>e[0].length)||(e=i,n=a,this.options.flex));a++);return e?((s=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,i,n){function s(t,i){return e.yytext=e.yytext.substr(t,e.yyleng-i)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}}};return t}();function n(){this.yy={}}return t.lexer=i,n.prototype=t,t.Parser=n,new n}()}(),function(t,e,i,n,s){"use strict";var r=o,l=a,c=i.parser,h=i.parse,d=n.Compiler,u=n.compile,p=n.precompile,m=s,f=r.create,g=function(){var t=f();return t.compile=function(e,i){return u(e,i,t)},t.precompile=function(e,i){return p(e,i,t)},t.AST=l,t.Compiler=d,t.JavaScriptCompiler=m,t.Parser=c,t.parse=h,t};return(r=g()).create=g,r}(0,0,function(t,e){"use strict";var i={},n=r,s=a;return i.parser=n,i.parse=function(t){return t.constructor===s.ProgramNode?t:(n.yy=s,n.parse(t))},i}(),function(t){"use strict";var e={},n=i;function s(){}return e.Compiler=s,s.prototype={compiler:s,disassemble:function(){for(var t,e,i,n=this.opcodes,s=[],o=0,a=n.length;o<a;o++)if("DECLARE"===(t=n[o]).opcode)s.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var r=0;r<t.args.length;r++)"string"==typeof(i=t.args[r])&&(i='"'+i.replace("\n","\\n")+'"'),e.push(i);s.push(t.opcode+" "+e.join(" "))}return s.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;i<e;i++){var n=this.opcodes[i],s=t.opcodes[i];if(n.opcode!==s.opcode||n.args.length!==s.args.length)return!1;for(var o=0;o<n.args.length;o++)if(n.args[o]!==s.args[o])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(i=0;i<e;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.accept(t)},accept:function(t){var e,i=t.strip||{};return i.left&&this.opcode("strip"),e=this[t.type](t),i.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,i=0,n=e.length;i<n;i++)this.accept(e[i]);return this.isSimple=1===n,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,i=(new this.compiler).compile(t,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var s=0,o=i.depths.list.length;s<o;s++)(e=i.depths.list[s])<2||this.addDepth(e-1);return n},block:function(t){var e=t.mustache,i=t.program,n=t.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var s=e.sexpr,o=this.classifySexpr(s);"helper"===o?this.helperSexpr(s,i,n):"simple"===o?(this.simpleSexpr(s),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(s,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,i,n=t.pairs;this.opcode("pushHash");for(var s=0,o=n.length;s<o;s++)i=(e=n[s])[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type),"sexpr"===i.type&&this.sexpr(i)):this.accept(i),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(t,e,i){var n=t.id,s=n.parts[0],o=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",s,o)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var s=this.setupFullMustacheParams(t,e,i),o=t.id.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",s.length,o);else{if(this.options.knownHelpersOnly)throw new n("You specified knownHelpersOnly, but used the unknown helper "+o,t);this.opcode("invokeHelper",s.length,o,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth),t.parts[0]?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var e=1,i=t.parts.length;e<i;e++)this.opcode("lookup",t.parts[e])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new n("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,i=0,s=e.length;i<s;i++)this.opcode("lookup",e[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,i=t.eligibleHelper,n=this.options;if(i&&!e){var s=t.id.parts[0];n.knownHelpers[s]?e=!0:n.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e,i=t.length;i--;)e=t[i],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,i){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),n}},e.precompile=function(t,e,i){if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new n("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0);var s=i.parse(t),o=(new i.Compiler).compile(s,e);return(new i.JavaScriptCompiler).compile(o,e)},e.compile=function(t,e,i){if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new n("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);var s;function o(){var n=i.parse(t),s=(new i.Compiler).compile(n,e),o=(new i.JavaScriptCompiler).compile(s,e,void 0,!0);return i.template(o)}return"data"in(e=e||{})||(e.data=!0),function(t,e){return s||(s=o()),s.call(this,t,e)}},e}(),function(t,e){"use strict";var i=t.COMPILER_REVISION,n=t.REVISION_CHANGES,s=t.log,o=e;function a(t){this.value=t}function r(){}r.prototype={nameLookup:function(t,e){var i,n;return 0===t.indexOf("depth")&&(i=!0),n=/^[0-9]+$/.test(e)?t+"["+e+"]":r.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",i?"("+t+" && "+n+")":n},compilerInfo:function(){return"this.compilerInfo = ["+i+",'"+n[i]+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,i,n){this.environment=t,this.options=e||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var a,r=t.opcodes;this.i=0;for(var l=r.length;this.i<l;this.i++)"DECLARE"===(a=r[this.i]).opcode?this[a.name]=a.value:this[a.opcode].apply(this,a.args),a.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o("Compile completed with content left on stack");return this.createFunctionContext(n)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,i="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(i+=" data = data || {};"),t.push(i)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var n=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],o=0,a=this.environment.depths.list.length;o<a;o++)n.push("depth"+this.environment.depths.list[o]);var r=this.mergeSource();if(this.isChild||(r=this.compilerInfo()+r),t)return n.push(r),Function.apply(this,n);var l="function "+(this.name||"")+"("+n.join(",")+") {\n  "+r+"}";return s("debug",l+"\n\n"),l},mergeSource:function(){for(var t,e="",i=0,n=this.source.length;i<n;i++){var s=this.source[i];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e,i){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.lastHelper=this.setupHelper(t,e,!0),s=this.nameLookup("depth"+this.lastContext,e,"context"),o="helper = "+n.name+" || "+s;n.paramsInit&&(o+=","+n.paramsInit),this.push("("+o+",helper ? helper.call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+"))"),i||this.flushInline()},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var i=this.setupHelper(0,t,e),n=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit),this.pushSource("if (helper = "+n+") { "+o+" = helper.call("+i.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+o+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,i,n=this.popStack();this.options.stringParams&&(i=this.popStack(),e=this.popStack());var s=this.hash;e&&s.contexts.push("'"+t+"': "+e),i&&s.types.push("'"+t+"': "+i),s.values.push("'"+t+"': ("+n+")")},compiler:r,compileChildren:function(t,e){for(var i,n,s=t.children,o=0,a=s.length;o<a;o++){i=s[o],n=new this.compiler;var r=this.matchExistingProgram(i);null==r?(this.context.programs.push(""),r=this.context.programs.length,i.index=r,i.name="program"+r,this.context.programs[r]=n.compile(i,e,this.context),this.context.environments[r]=i):(i.index=r,i.name="program"+r)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;e<i;e++){var n=this.context.environments[e];if(n&&n.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,i=this.environment.children[t],n=i.depths.list,s=[i.index,i.name,"data"],o=0,a=n.length;o<a;o++)1===(e=n[o])?s.push("depth0"):s.push("depth"+(e-1));return(0===n.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new a(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i,n,s="",o=this.isInline();if(o){var r=this.popStack(!0);if(r instanceof a)e=r.value,n=!0;else{var l=(i=!this.stackSlot)?this.incrStack():this.topStackName();s="("+this.push(l)+" = "+r+"),",e=this.topStack()}}else e=this.topStack();var c=t.call(this,e);return o?(n||this.popStack(),i&&this.stackSlot--,this.push("("+s+c+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+s+c+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];n instanceof a?this.compileStack.push(n):this.pushStack(n)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof a)return i.value;if(!e){if(!this.stackSlot)throw new o("Invalid stack pop");this.stackSlot--}return i},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof a?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,i){var n=[];return{params:n,paramsInit:this.setupParams(t,n,i),name:this.nameLookup("helpers",e,"helper"),callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(e)].concat(n).join(", ")}},setupOptions:function(t,e){var i,n,s,o=[],a=[],r=[];o.push("hash:"+this.popStack()),this.options.stringParams&&(o.push("hashTypes:"+this.popStack()),o.push("hashContexts:"+this.popStack())),n=this.popStack(),((s=this.popStack())||n)&&(s||(this.context.aliases.self="this",s="self.noop"),n||(this.context.aliases.self="this",n="self.noop"),o.push("inverse:"+n),o.push("fn:"+s));for(var l=0;l<t;l++)i=this.popStack(),e.push(i),this.options.stringParams&&(r.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+a.join(",")+"]"),o.push("types:["+r.join(",")+"]")),this.options.data&&o.push("data:data"),o},setupParams:function(t,e,i){var n="{"+this.setupOptions(t,e).join(",")+"}";return i?(this.useRegister("options"),e.push("options"),"options="+n):(e.push(n),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=r.RESERVED_WORDS={},h=0,d=l.length;h<d;h++)c[l[h]]=!0;return r.isValidJavaScriptVariableName=function(t){return!(r.RESERVED_WORDS[t]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t))},r}(n,i))}),define("DS/W3DXComponents/Views/Layout/PanelSlider/PanelSlider",["UWA/Core","UWA/Event","UWA/Element","UWA/Utils/Client","UWA/Class/View","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s){"use strict";var o=n.Features;return s.extend({className:"panel-slider",tagName:"div",_elements:null,_nextIndex:0,_ANIM_TMR:500,_displayedPanels:0,_panelsContent:null,_panels:null,_isMuted:!1,_totalSizes:0,_cachedWidth:null,init:function(t,e){if(!Array.isArray(t))throw new Error("Arguments must be of type array");if(e&&!Array.isArray(e.layout))throw new Error("Layout options should be an Object[] of {className: String, size: Number}");this._elements=t,this._panels=[],this._panelsContent=[],this._parent(e)},_initEvents:function(){i.addEvent.call(this.placeHolder,"resize",this._resize.bind(this))},_removeEvents:function(){this.placeHolder&&i.removeEvent.call(this.placeHolder,"resize")},render:function(){var t=this.options;return this.elements.body=this.container,this.container.addClassName(this.className),t.className&&this.container.addClassName(t.className),this.setLayout(t.layout),this._buildPanels(this._elements),this},_doIntelligentRelayout:function(t){var e=this,i=t||{},n=i.index,s=i.indexRef,o=i.animate,a=i.prevLayout,r=i.layoutDelta,l=n-s-1,c=0,h=0,d=null,u=n-e._displayedPanels;function p(){++c<h||(e._nextIndex=n+1,e._cleanUnShownSlides({force:!0}),e._resizePanels({from:e._nextIndex}),e._resetActiveClasses(),d&&e._throwEvents(d),e._isMuted=!1,i.callback&&i.callback.apply(i.scope||e,[n,e._panelsContent[n],e]))}l>0?d="next":l<0&&(d="back"),e._isMuted=!0,u>=0&&(h++,e._resizePanels({from:0,to:u,animate:o,layout:a,callback:p})),h++,e._resizePanels({from:u+1,to:n,animate:o,indexRef:r<0?n+1:s,callback:p}),h++,n+1!==e._panels.length-1?e._resizePanels({from:n+1,to:e._panels.length-1,animate:o,layout:a,indexRef:r<0?n+1:s,callback:p}):p()},setLayout:function(e,i){var n,s,o,a=this,r=a.getContent(),l=t.merge(i||{},{animate:!0,index:null}),c=this.options.layout,h=this._nextIndex,d=l.index,u=l.animate?{size:!0,position:!0}:null;this._isMuted?l.callback&&l.callback.call(l.scope,!1):(a._totalSizes=0,a.options.layout=e,a._displayedPanels=a.options.layout.length,a.options.layout.forEach(function(t){a._totalSizes+=t.size}),s=a._calculateRefSizes(a._cachedWidth),a._currHiddenSize=s.currHiddenSize,a._currEmptySize=s.currEmptySize,r&&r.isInjected()&&(0!==(n=a.options.layout.length-c.length)||t.is(d)||d===h-1||a._resize({force:!0}),(o=t.is(d)?d:h-1>a._displayedPanels-1?h-1:a._displayedPanels-1)-h-1,n>=0&&o-a._displayedPanels<=0?a.slideTo(o,{doSlide:l.animate,callback:l.callback,scope:l.scope}):a._doIntelligentRelayout({index:o,indexRef:h,animate:u,prevLayout:c,layoutDelta:n,callback:l.callback,scope:l.scope})))},_buildPanels:function(t){for(var e,i=0,n=this._displayedPanels;i<n;i++)e=this._buildPanel(t[i],{className:this.options.layout[i].className,active:!0}).inject(this.elements.body),this._panels[i]=e,this._panelsContent[i]=t[i];this._nextIndex=i,this._addEmptyPanel(),this._panelsContent=this._panelsContent.concat(t.slice(i))},_buildPanel:function(e,i){var n="panel ";return i&&(n+=i.className||"",n+=i.active?" active":""),t.createElement("div",{class:n,html:e})},onPostInject:function(){this.placeHolder=this.getContent().getParent(),this._resize(),this._initEvents()},_calculateRefSizes:function(t,e,i){var n=e||this.options.layout,s=n.length;i||this._totalSizes;return{currEmptySize:t*n[s-1].size/this._totalSizes,currHiddenSize:t*n[0].size/this._totalSizes}},_resize:function(t){var e,i,n=t||{},s=this.getContent();s&&s.isInjected()?(i=s.getDimensions().innerWidth,(this._cachedWidth!==i||n.force)&&(e=this._calculateRefSizes(i),this._currHiddenSize=e.currHiddenSize,this._currEmptySize=e.currEmptySize,this._cachedWidth=i,this._resizePanels({from:0,to:this._nextIndex,animate:n.animate?{size:!0,position:!0}:null,callback:n.callback}))):n.callback&&n.callback.call(n.scoe,!1)},_calculatePanelDim:function(t){var e,i=t.index,n=t.layoutOffset,s=t.indexRef||this._nextIndex,o=this._displayedPanels,a=t.layout||this.options.layout,r=this._cachedWidth,l=t.allSizes||this._totalSizes,c=a[Math.max(i-n,0)],h=a[Math.max(i-n-1,0)],d=a[0].size/l*r;return i<s-o?e={width:d,left:"-"+d,active:!1,className:a[0].className}:i===s-o?e={width:d,left:0,active:!0,className:a[0].className}:i!==s?e={width:r*c.size/l,left:t.posOffset||0,active:!0,className:c.className}:i===s&&(e={width:h?r*h.size/l:void 0,left:r,active:!1,className:a[a.length-1].className}),e.index=i,e},_removeAnimationStyles:function(t){t.setStyles({transitionDuration:"",transitionProperty:"",perspective:"",fontSmoothing:"",transformOrigin:"",transitionTimingFunction:"",transitionDelay:"",transformStyle:""})},_getAnimationStyles:function(e,i,n){var s=!(!n.position&&!n.size),a=this.container,r=Math.round(i,10),l=Math.round(e,10),c=a.getStyleName("transform",!0),h={width:l||void 0,transformStyle:"preserve-3d"};return s&&t.extend(h,{transformOrigin:"0 0",fontSmoothing:"antialiased",perspective:800,transitionDelay:"0ms",transitionDuration:this._ANIM_TMR+"ms",transitionProperty:[n.size?"width":""].concat([n.position?c:""]).join(","),transitionTimingFunction:"cubic-bezier(0.77, 0, 0.175, 1)"}),o.matrixCSS?h.transform="translate3d("+r+"px, 0, 0)":h.transform="translate("+r+"px, 0)",h},_resizePanels:function(i){var n,s,o,a,r,l,c=this,h=c._nextIndex,d=h-c._displayedPanels,u=i||{},p=c._panels,m=t.is(u.from)?u.from:d,f=t.is(u.to)?u.to:h,g=f-(m||1),v=0,w=[],C=0,S=!1;function y(){clearTimeout(l),S||(S=!0,w.forEach(function(t){var e=p[t.index];c._resetPanelLayoutClasses(e,t.className,{active:t.active})}),t.is(u.callback,"function")&&u.callback.call())}function _(t,i){e.getElement(i)===t&&(v===g?(v++,y()):v++,t.removeEvent("transitionEnd"),c._removeAnimationStyles(t))}for(u.animate=u.animate||{},n=u.animate.size||u.animate.position,u.layout?u.layout.forEach(function(t){C+=t.size}):(u.layout=c.options.layout,C=c._totalSizes);m<=f;m++)(o=p[m])&&(a=w[w.length-1],s=c._calculatePanelDim({index:m,layoutOffset:d,posOffset:a&&a.active?a.left+a.width:null,layout:u.layout,allSizes:C,indexRef:u.indexRef}),r=c._getAnimationStyles(s.width,s.left,u.animate),w.push(s),o.removeEvent("transitionEnd"),n?(o.addEvent("transitionEnd",_.bind(null,o)),o.setStyles(r)):o.setStyles(r));n?l=setTimeout(y,c._ANIM_TMR+20):u.callback&&setTimeout(y,0)},_resetPanelLayoutClasses:function(t,e,i){var n=i||{};t.className="panel "+e+(n.active?" active":"")},_resetActiveClasses:function(){for(var t,e=this._nextIndex-this._displayedPanels,i=this._nextIndex,n=this._nextIndex-this._displayedPanels,s=this.options.layout;e<i;e++)t=e-n,this._resetPanelLayoutClasses(this._panels[e],s[t].className,{active:!0})},insertPanel:function(t,e,i){this.insertPanels([t],e,i)},insertPanels:function(e,n,s){var o=this,a=t.merge(s||{},{resize:!1,animate:!1}),r=o._nextIndex,l=o._panels,c=o.elements.body,h=document.createDocumentFragment();function d(){var t=c.getElement(".panel:nth-child("+(n+1)+")");t?i.inject.call(h,t,"before"):i.inject.call(h,c),o._cleanUnShownSlides({force:!0}),a.callback&&a.callback.call(a.scope,o)}e.forEach(function(t,e){var i=e+n;i>=r?o._panelsContent.splice(i,0,t):(function(t,e){var i=o._buildPanel(t);l.splice(e,0,i),i.inject(h)}(t,i),0)}),a.resize?o._resizePanels({animate:!!a.animate&&{position:!0,size:!0},from:n,to:o._nextIndex,callback:d}):setTimeout(d,0)},getPanel:function(t){var e=this._panels;return t>=this._nextIndex||!e[t]?null:e[t]},getPanels:function(){var t=this._panels;return t.slice(0,t.length-1)},_addEmptyPanel:function(){var t=this._nextIndex,e=this._panels,i=e[t];(i=this._buildPanel(null,t)).setStyles({width:this._currEmptySize||0}),this._setPanelPosition(i,this._cachedWidth),e[t]=i,i.inject(this.elements.body)},_setPanelPosition:function(t,e){o.matrixCSS?t.setStyle("transform","translate3d("+e+"px, 0, 0)"):t.setStyle("transform","translate("+e+"px, 0)")},_cleanSlide:function(t,e){!0===e.force?t.empty():setTimeout(function(){t.empty()},this._ANIM_TMR)},_cleanUnShownSlides:function(e){var n=this,s=e||{};function o(){var e=n._nextIndex+1,o=n._panels,a=n._panelsContent,r=o.length;for(o[n._nextIndex]?o[n._nextIndex].empty():n._addEmptyPanel();e<r;e++)a[e]&&t.is(a[e],"element")&&i.isInjected.apply(a[e])&&o[e].removeChild(a[e]),o[e].destroy();o.splice(n._nextIndex+1),s.cb&&s.cb.call(n)}s.force?o():setTimeout(function(){o()},n._ANIM_TMR)},addPanel:function(t,e,i){this._panels[e]&&this._panels[e].setContent(t),this._panelsContent[e]=t,i&&i.mute||e<this._nextIndex&&e>this._nextIndex-this.options.layout.length&&this.dispatchEvent("onPanelShown",e)},slideNext:function(t){var e,i,n=this,s=t||{};n._isMuted?s.callback&&s.callback.call(s.scope,!1):(n._isMuted=!0,e=n._nextIndex,i=n._displayedPanels,s.content&&(n._panelsContent[n._nextIndex]=s.content),n._panels[e].setContent(n._panelsContent[e]),e=++n._nextIndex,n._resizePanels({animate:{size:!0,position:!0},from:e-i-1,to:e-1,callback:function(){var t=e-1;n._addEmptyPanel(),n._throwEvents("next"),n._isMuted=!1,s.callback&&s.callback.apply(s.scope||n,[t,n._panelsContent[t],n])}}))},slideBack:function(t){var e=this,i=e._nextIndex,n=e._displayedPanels,s=e._panels,o=t||{};e._isMuted?o.callback&&o.callback.call(o.scope,!1):(e._isMuted=!0,s[i-n]&&(i=--e._nextIndex,e._resizePanels({animate:{size:!0,position:!0},from:i-n,callback:function(){var t=i-1;s[i].removeClassName("active"),s[i+1].destroy(),s.pop(),e._cleanSlide(s[i],{force:!0}),e._throwEvents("back"),e._isMuted=!1,o.callback&&o.callback.apply(o.scope||e,[t,e._panelsContent[t],e])}})))},slideTo:function(e,i){var n,s=this,o=t.merge(i||{},{doSlide:!0}),a=s._panels,r=s._panelsContent,l=s._nextIndex,c=s._displayedPanels;s._isMuted?o.callback&&o.callback.call(o.scope,!1):(s._isMuted=!0,e<0?t.log("[PanelSlider] Cannot slide to that panel!"):(e>=l||l<=c?(!function(t,e){for(var i,n=t,o=e,l=document.createDocumentFragment(),c=s.elements.body;n<o;n++)(i=a[n])?i.setContent(r[n]):((i=s._buildPanel(r[n],n)).setStyle("width",s._currHiddenSize),s._setPanelPosition(i,s._cachedWidth),i.inject(l),a.push(i));c.appendChild(l)}(l,e+1),l=e+1,n="next"):e<=c&&(l=e+1,n="back"),s._nextIndex=l,s._resize({force:!0,animate:o.doSlide,callback:function(t){s._isMuted=!1,t||(o.callback&&o.callback.apply(o.scope||s,[e,s._panelsContent[e],s]),s._throwEvents(n),s._cleanUnShownSlides({force:!0}))}})))},_throwEvents:function(t){var e;switch(t){case"next":this.dispatchEvent("onSlideNext"),e=this._nextIndex-1;break;case"back":this.dispatchEvent("onSlideBack"),e=this._nextIndex-this.options.layout.length}this.dispatchEvent("onPanelShown",e)},isMuted:function(){return!!this._isMuted},refresh:function(t){this._resize({force:!0},t)},getLayoutSize:function(){this.options.layout.length},destroy:function(){this._removeEvents(),this.stopListening(),this._panelsContent.forEach(function(e){e&&t.is(e.destroy,"function")&&e.destroy()}),this._panels.forEach(function(t){t&&(t.removeEvent("transitionEnd"),t.destroy())}),this._panelsContent.length=0,this._panels.length=0,this._parent()}})}),define("DS/W3DXComponents/AppNavigationPersistence",["UWA/Core","UWA/Class"],function(t,e){"use strict";var i=null,n=e.extend({_localStorage:null,_isFirstInit:null,_getLocalStorage:function(){this._localStorage=JSON.parse(localStorage.getItem(widget.id))},_setLocalStorage:function(){try{localStorage.setItem(widget.id,JSON.stringify(this._localStorage))}catch(t){console.error(t)}},_removeLocalStorage:function(){localStorage.removeItem(widget.id)},setRoute:function(t){this._localStorage?(this._localStorage.route?this._isFirstInit=!1:this._isFirstInit=!0,this._localStorage.route=t):(this._isFirstInit=!0,this._localStorage={route:t}),this._setLocalStorage()},getRoute:function(){return this._localStorage&&this._localStorage.route?this._localStorage.route:null},isFirstInit:function(){return this._isFirstInit},setFacetViewMode:function(t,e){this._localStorage?(this._localStorage.facetViewMode||(this._localStorage.facetViewMode={}),this._localStorage.facetViewMode[t]=e):(this._localStorage={facetViewMode:{}},this._localStorage.facetViewMode[t]=e),this._setLocalStorage()},getFacetViewMode:function(){return this._localStorage&&this._localStorage.facetViewMode?this._localStorage.facetViewMode:null},clear:function(){this._localStorage=null,this._isFirstInit=!0,this._removeLocalStorage()},init:function(t){this._parent.apply(this,arguments),this._getLocalStorage()}});return{getInstance:function(){return null===i&&(i=new n),i}}}),define("DS/W3DXComponents/Collections/ActionsCollection",["UWA/Core","UWA/Class/Collection","UWA/Class/Model","DS/W3DXComponents/Models/ActionModel"],function(t,e,i,n){"use strict";return e.extend({model:n,name:"actions",url:function(){return"/"+this.name},setup:function(e,n){var s,o,a,r=n._modelKey;r&&r instanceof i&&(this._modelKey=r,this.url=(o="url",(s=r)&&(a=s[o],t.is(a,"function")&&(a=a.call(s))),a+Object.getPrototypeOf(this).url.call(this)))}})}),define("DS/W3DXComponents/Views/Temp/TempView",["DS/W3DXComponents/Views/Temp/TempHandlebars","UWA/Core","UWA/Class/View","UWA/Utils"],function(t,e,i,n){"use strict";var s=["template","templateHelpers","mapping"],o=function(t){function e(e){e._isShown&&e._isRendered&&function(e){return t.contains(e.container)}(e)&&e.dispatchEvent("onDomRefresh")}return function(t){t.addEvent("onShow",function(){!function(t){t._isShown=!0,e(t)}(t)},this),t.addEvent("onRender",function(){!function(t){t._isRendered=!0,e(t)}(t)},this)}}(document.documentElement),a={get:n.memoize(function(e){return t.compile(e)})};return i.extend({init:function(t){var i,n;for(t=e.clone(t||{},!1),i=s.length-1;i>=0;i--)n=s[i],t.hasOwnProperty(n)&&(this[n]=t[n],delete t[n]);this._parent.call(this,t),o(this),this.listenTo(this,"onShow",this.onShowCalled)},id:function(){return this.cid},applyMapping:function(t,i){var n,s,o,a=t;for(n in i)s=i[n],e.is(s,"function")?a[n]=s.call(this):((o=s.split(/[\.\[\]]/)).unshift(t),a[n]=o.reduce(function(t,e){return t&&t[e]}));return a},getTemplate:function(){var t=this.template;return a.get(e.is(t,"function")?t.call(this):t)},mixinTemplateHelpers:function(t){t=t||{};var i=this.templateHelpers||{};return e.is(i,"function")&&(i=i.call(this)),i.cid=this.cid,this.name&&(i.name=this.name),e.extend(t,i)},onShowCalled:function(){},onPostInject:function(){this.dispatchEvent("onShow")},destroy:function(){return this.isDestroyed=!0,this.dispatchEvent("onDestroy"),this.stopListening(),this._parent.apply(this,arguments),this}})}),define("DS/W3DXComponents/Views/Temp/TempItemView",["DS/W3DXComponents/Views/Temp/TempView"],function(t){"use strict";return t.extend({serializeData:function(){var t={};return this.model?(t=this.model.toJSON(),this.mapping&&(t=this.applyMapping(t,this.mapping))):this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this.isDestroyed=!1,this.dispatchEvent("onBeforeRender"),this.dispatchEvent("onBeforeItemRendered");var t=this.serializeData(),e=this.getTemplate()(t=this.mixinTemplateHelpers(t));return this.container.setHTML(e),this.dispatchEvent("onRender"),this.dispatchEvent("onItemRendered"),this},destroy:function(){this.isDestroyed||(this.dispatchEvent("onItemBeforeDestroy"),this._parent.apply(this,arguments),this.dispatchEvent("onItemDestroyed"))}})}),define("DS/W3DXComponents/Views/EmptyView",["DS/W3DXComponents/Views/Temp/TempItemView","i18n!DS/W3DXComponents/assets/nls/Views/EmptyView.json","css!DS/W3DXComponents/W3DXComponents"],function(t,e){"use strict";return t.extend({name:"empty-view",tagName:"div",defaultOptions:{icon:void 0,title:e.noItem,subtitle:""},setup:function(){this.container.addClassName(this.getClassNames())},template:function(){var t='<div class="'+this.getClassNames("-infos")+'">',e=this.options.icon,i=this.options.title;return e&&(t+='<span class="'+this.getClassNames("-icon")+" center-block fonticon fonticon-5x fonticon-"+e+'" ></span>'),i&&(t+='<span class="'+this.getClassNames("-title")+' center-block">'+i+"</span>"),t+="</div>"}})}),define("DS/W3DXComponents/Views/Item/FilterView",["UWA/Core","DS/W3DXComponents/Views/Temp/TempItemView","css!DS/W3DXComponents/W3DXComponents"],function(t,e){"use strict";return e.extend({name:"filter",tagName:"ul",template:'                            {{#each filters}}                                <li data-field={{field}}">{{value}}</li> |                             {{/each}}                            <li class="selected">All</li>                        ',domEvents:{"click li":"onClickCalled"},init:function(t){var e=UWA.clone(t,!1);["container","template","tagName","domEvents"].forEach(function(t){delete e[t]}),this._parent(e)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},onClickCalled:function(t){this.dispatchEvent("onClick",{field:t.target.dataset.field,value:t.target.textContent}),this.getElement(".selected").removeClassName("selected"),t.target.addClassName("selected")},serializeData:function(){return this.model}})}),define("DS/W3DXComponents/Views/Temp/TempCollectionView",["DS/W3DXComponents/Views/Temp/TempView","UWA/Core","UWA/Class/Model"],function(t,e,i){"use strict";var n=["itemView","emptyView","itemViewOptions","itemViewEventPrefix","filterer"];return t.extend({itemViewEventPrefix:"ItemView",filterCallback:function(t,e){var i,n;i=t.container,n=e,i=UWA.extendElement(i),n?i.show():i.hide()},init:function(t){var i,s;for(t=e.clone(t||{},!1),i=n.length-1;i>=0;i--)s=n[i],t.hasOwnProperty(s)&&(this[s]=t[s],delete t[s]);this._initChildViewStorage(),this._initVisibleItemsStorage(),this._parent.call(this,t),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(this._bufferedChildren.forEach(function(t){t.dispatchEvent("onShow")}),this._bufferedChildren=[])},_initChildViewStorage:function(){this.children={}},_initVisibleItemsStorage:function(){this.visibleItems=[]},_initialEvents:function(){this._parent.apply(this,arguments),this.collection&&this.listenTo(this.collection,{onAdd:this.addChildView,onRemove:this.removeItemView,onReset:this.render})},addChildView:function(t,e,i){this.destroyEmptyView();var n=this.getItemView(t),s=this.collection.indexOf(t);this.addItemView(t,n,s)},onShowCalled:function(){for(var t in this.children)this.children[t].dispatchEvent("onShow")},render:function(){return this.isDestroyed=!1,this.triggerBeforeRendered(),this._renderChildren(),this.triggerRendered(),this},triggerBeforeRendered:function(){this.dispatchEvent("onBeforeRender"),this.dispatchEvent("onCollectionBeforeRender")},triggerRendered:function(){this.dispatchEvent("onRender"),this.dispatchEvent("onCollectionRendered")},_renderChildren:function(){this.startBuffering(),this.destroyChildren(),this.visibleItems.length=0,this.showCollection(),this.collection.isEmpty()&&this.dispatchEvent("onVisibilityChange",[this.visibleItems]),this.endBuffering()},showCollection:function(){var t;this.collection.forEach(function(e,i){t=this.getItemView(e),this.addItemView(e,t,i)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!e.is(this._emptyView)){var n=new i;this._emptyView=this.addItemView(n,t,0)}},destroyEmptyView:function(){e.is(this._emptyView)&&this.removeChildView(this._emptyView)},getEmptyView:function(){return this.emptyView},getItemView:function(t){var e=this.itemView;if(!e)throw new Error("An `itemView` must be specified");return e},filter:function(t,i){var n,s;(e.is(t,"function")||null===t)&&(this.filterer=t),(e.is(i,"function")||null===i)&&(this.filterCallback=i),this.collection.forEach(function(t,i){if(n=!e.is(this.filterer,"function")||this.filterer(t,i),!(s=this.getChildView(t)))throw new Error("No view foun for #"+t.cid);this.filterCallback(s,n),this.updateVisibleItems(s.model,n,!1)},this),this.dispatchEvent("onVisibilityChange",[this.visibleItems])},getChildView:function(t){var e;if(this.collection)return(e=this.collection.get(t))?this.children[e.cid]:void 0},addItemView:function(t,i,n){var s,o=this.itemViewOptions,a=i===this.getEmptyView();s=!e.is(this.filterer,"function")||this.filterer(t,n),e.is(o,"function")&&(o=o.call(this,t,n));var r=this.buildItemView(t,i,o);return this.addChildViewEventForwarding(r),this.dispatchEvent("onBeforeItemAdded",r),!a&&this.filterer&&this.filterCallback(r,s),this.children[t.cid]=r,this.renderItemView(r,n),this._isShown&&!this.isBuffering&&r.dispatchEvent("onShow"),this.dispatchEvent("onAfterItemAdded",r),a||this.updateVisibleItems(t,s),r},addChildViewEventForwarding:function(t){var e=this.itemViewEventPrefix;t.addEvent("onAnyEvent",function(){var i=Array.prototype.slice.call(arguments),n="on"==i[0].substring(0,2)?i[0].substring(2,i[0].length):i[0];i[0]="on"+e+n,i.splice(1,0,t),this.dispatchEvent(i.splice(0,1)[0],i)},this)},renderItemView:function(t,e){t.render(),this.appendHtml(this,t,e)},buildItemView:function(t,i,n){return new i(e.extend({model:t},n||{}))},removeItemView:function(t){var e=this.children[t.cid];this.removeChildView(e)},removeChildView:function(t){var e;t&&(e=this.getEmptyView(),delete this.children[t.model.cid],this.updateVisibleItems(t.model,!1,!0,"removeChildView"),t.destroy(),this.isBuffering&&t.container.parentNode===this.elBuffer&&this.elBuffer.removeChild(t.container),e&&t instanceof e&&delete this._emptyView),this.dispatchEvent("onItemRemoved",t)},onVisibilityChange:function(){0===this.visibleItems.length?this.showEmptyView():this.destroyEmptyView()},appendBuffer:function(t,e){t.container.addContent(e)},appendHtml:function(t,e,i){t.isBuffering?(t.elBuffer.appendChild(e.container),t._bufferedChildren.push(e)):t.container.appendChild(e.container)},updateVisibleItems:function(t,i,n){var s=!1;!e.is(n)&&(n=!0);var o=this.visibleItems,a=o.indexOf(t),r=-1!==a;return i&&!r?(o.push(t),s=!0):!i&&r&&(o.splice(a,1),s=!0),s&&n&&this.dispatchEvent("onVisibilityChange",[o]),s},destroy:function(){this.isDestroyed||(this.dispatchEvent("onCollectionBeforeDestroyed"),this.destroyChildren(),this.dispatchEvent("onCollectionDestroyed"),this._parent.apply(this,arguments))},destroyChildren:function(){for(var t in this.children)this.removeChildView(this.children[t])}})}),define("DS/W3DXComponents/Views/Layout/NestedScrollView",["DS/W3DXComponents/Views/Layout/ScrollView","UWA/Core","DS/W3DXComponents/Views/Temp/TempItemView","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i){"use strict";var n=["nested"];return i.extend({name:"scroll-nested",template:"",tagName:"div",defaultOptions:{orientation:"vertical",scrollPosition:null,useInfiniteScroll:!0,usePullToRefresh:!0},init:function(t){var i,s;for(t=e.clone(t||{},!1),i=n.length-1;i>=0;i--)s=n[i],t.hasOwnProperty(s)&&(this[s]=t[s],delete t[s]);["container","tagName","template","itemViewEventPrefix","itemViewContainer","domEvents"].forEach(function(e){delete t[e]}),this._parent.call(this,t)},setup:function(){this.container.addClassName(this.getClassNames("-container")),delete this.options.events,this._initNestedView(),this._initScrollView(),this.listenTo(this.collection,{onReset:function(){var t=this.getOption("useInfiniteScroll");this.scrollView&&this.scrollView.useInfiniteScroll(t)}})},_initScrollView:function(){var i,n,s=this.nestedView;if(s)return i=this._scrollViewEvents={onInfiniteScroll:function(){Array.prototype.unshift.call(arguments,this.scrollView),this.dispatchEvent("onInfiniteScroll",arguments)},onPullToRefresh:function(){Array.prototype.unshift.call(arguments,this.scrollView),this.dispatchEvent("onPullToRefresh",arguments)}},n=this.scrollView=new t(e.extend(this.options,{view:s})),this.listenTo(n,i),this.scrollView},_initNestedView:function(){var t,i,n,s,o,a,r=(s="nested",o=this,(n=this)&&(a=n[s],e.is(a,"function")&&(a=a.call(o,n))),a);return t=this._nestedViewEvents={onItemViewDrag:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewDrag",arguments)},onItemViewCheck:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewCheck",arguments)},onItemViewSelect:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewSelect",arguments)},onItemViewUnSelect:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewUnSelect",arguments)},onItemViewClick:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewClick",arguments)},onItemViewDblClick:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewDblClick",arguments)},onItemViewContextMenu:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewContextMenu",arguments)},onItemViewActionClick:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onItemViewActionClick",arguments)},onAddSelection:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onAddSelection",arguments)},onRemoveSelection:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onRemoveSelection",arguments)},onDeactivateMultisel:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onDeactivateMultisel",arguments)},onUnSelectAll:function(){Array.prototype.unshift.call(arguments,this.nestedView),this.dispatchEvent("onUnSelectAll",arguments)}},i=this.nestedView=new r(e.extend({collection:this.collection},this.options)),this.listenTo(i,t),i},onRender:function(){return this.scrollView&&this.injectSubView(this.scrollView),this._parent.apply(this,arguments)},injectSubView:function(t,e){var i=e?this.getElement(e):this.container;t&&i&&(this.undelegateDOMEvents(),t.render().inject(i),this.delegateDOMEvents())},selectItemView:function(t,e){e||(e={});var i=this.nestedView,n=i.selectItemView&&i.selectItemView.apply(i,arguments);return e.scrollPosition&&this.scrollToItemView(n,e.scrollPosition)||n},getSelectedItemView:function(t){var e=this.nestedView;return e.getSelectedItemView&&e.getSelectedItemView.apply(e,arguments)},unSelectAll:function(t){var e=this.nestedView;return e.unSelectAll&&e.unSelectAll.apply(e,arguments)},setShadings:function(t){var e=this.nestedView;return e.setShadings&&e.setShadings.apply(e,arguments)},resetShadings:function(){var t=this.nestedView;return t.resetShadings&&t.resetShadings.apply(t,arguments)},scrollToItemView:function(t,e){var n;if(n=t instanceof i?t:this.nestedView.getChildView(t)){var s=this.getOption("scrollDuration");return s=s>0?s:0,this.scrollView.scrollToElement(n.container,e,s),n}},scrollToPosition:function(){var t=this.scrollView;return t.scrollToPosition&&t.scrollToPosition.apply(t,arguments)},onItemViewSelect:function(){var t,e=this.getOption("scrollPosition");if(e){if(t=arguments[arguments.length-1],"auto"===e){var i=this.isElementInViewport(t.container,!0);if(i.isInViewport)return;i.posOverflow.top?e="top":i.posOverflow.bottom&&(e="bottom")}this.scrollToItemView(t,e)}},isElementInViewport:function(t,e){var i={},n=t.getBoundingClientRect();return i.isInViewport=n.top>=50&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth),e&&(i.posOverflow={},i.posOverflow.top=!(n.top>=50),i.posOverflow.left=!(n.left>=0),i.posOverflow.bottom=!(n.bottom<=(window.innerHeight||document.documentElement.clientHeight)),i.posOverflow.right=!(n.right<=(window.innerWidth||document.documentElement.clientWidth))),i},destroy:function(){if(!this.isDestroyed){var t=this.scrollView,e=this.nestedView;return this.stopListening(t,this._scrollViewEvents),this.stopListening(e,this._nestedViewEvents),t.destroy(),delete this.scrollView,delete this.nestedView,this._parent.apply(this,arguments)}}})}),define("DS/W3DXComponents/Views/Temp/TempCompositeView",["DS/W3DXComponents/Views/Temp/TempCollectionView","UWA/Core"],function(t,e){"use strict";return t.extend({_initialEvents:function(){this.listenToOnce(this,"onRender",function(){this.collection&&this.listenTo(this.collection,{onAdd:this.addChildView,onRemove:this.removeItemView,onReset:this._renderChildren})})},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON(),this.mapping&&(t=this.applyMapping(t,this.mapping))),t},render:function(){this.isRendered=!0,this.isDestroyed=!1,this.resetItemViewContainer();var t=this.renderModel();return this.container.setHTML(t),this.dispatchEvent("onCompositeModelRendered"),this._renderChildren(),this.dispatchEvent("onCompositeRendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.dispatchEvent("onCompositeCollectionBeforeRender"),this._parent.apply(this,arguments),this.dispatchEvent("onCompositeCollectionRendered"))},renderModel:function(){var t={};return t=this.serializeData(),t=this.mixinTemplateHelpers(t),this.getTemplate()(t)},appendBuffer:function(t,e){this.getItemViewContainer(t).addContent(e)},appendHtml:function(t,e,i){t.isBuffering?(t.elBuffer.appendChild(e.container),t._bufferedChildren.push(e)):this.getItemViewContainer(t).appendChild(e.container)},getItemViewContainer:function(t){if("itemViewContainerElem"in t)return t.itemViewContainerElem;var i,n=this.options.itemViewContainer||this.itemViewContainer;if(n){var s=e.is(n,"function")?n.call(this):n;i=t.container.getElement(s)}else i=t.container;return t.itemViewContainerElem=i,i},resetItemViewContainer:function(){this.itemViewContainerElem&&delete this.itemViewContainerElem}})}),define("DS/W3DXComponents/Views/Item/CounterView",["UWA/Core","DS/W3DXComponents/Views/Temp/TempItemView","css!DS/W3DXComponents/W3DXComponents"],function(t,e){"use strict";return e.extend({name:"set-detail-view",tagName:"div",template:function(){return'                                {{#if title}}<span class="'+this.getClassNames("-title")+'">{{title}}</span>                                <span class="'+this.getClassNames("-count")+'">{{itemsLength}}</span>{{/if}}                            '},init:function(e){e=t.clone(e||{},!1),["container","template","tagName"].forEach(function(t){delete e[t]}),this._parent.call(this,e)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},mixinTemplateHelpers:function(){var t=this._parent.apply(this,arguments),e=this.collection,i=e.state&&e.state.totalRecords;return!i&&(i=e.size()),t.itemsLength=i,t},setOptions:function(t){this._parent.apply(this,arguments);var e=this.collection;if(t.title){var i=this.templateHelpers||(this.templateHelpers={});i.title=t.title||i.title,e&&this.listenTo(e,{onAdd:this.render,onRemove:this.render,onReset:this.render})}else e&&this.stopListening(e);return this}})}),define("DS/W3DXComponents/Views/Item/ActionView",["DS/W3DXComponents/Views/Temp/TempItemView","UWA/Core","UWA/Event","UWA/Class/Events","DS/UIKIT/Tooltip","css!DS/W3DXComponents/W3DXComponents","css!DS/UIKIT/UIKIT.css"],function(t,e,i,n,s){"use strict";return t.extend({name:"action",tagName:"div",template:function(){return'<div class="'+this.getClassNames("-icon-wrapper")+'"><span  class="fonticon fonticon-2x fonticon-{{icon}}"></span></div>'},domEvents:function(){return{click:this.dispatchAsEventListener("onClick"),touchstart:this.dispatchAsEventListener("onClick")}},init:function(t){t=e.clone(t||{},!1),["container","template","tagName","domEvents"].forEach(function(e){delete t[e]}),this._parent.call(this,t)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},onRender:function(){e.is(this.model.get("title"))&&this.model.get("title").trim().length>0&&new s({position:"bottom",target:this.container,body:this.model.get("title")})}})}),define("DS/W3DXComponents/Views/Item/DropDownActionView",["UWA/Core","DS/W3DXComponents/Views/Temp/TempItemView","css!DS/W3DXComponents/W3DXComponents","css!DS/UIKIT/UIKIT.css"],function(t,e){"use strict";return e.extend({name:"drop-down-action",tagName:"li",template:function(){return'                                <span class="'+this.getClassNames("-icon-wrapper")+'"><span class="fonticon fonticon-2x fonticon-{{icon}}"></span></span>                                <span class="'+this.getClassNames("-title")+'">{{title}}</span>                            '},domEvents:function(){return{click:this.dispatchAsEventListener("onClick")}},init:function(e){e=t.clone(e||{},!1),["className","container","template","tagName","domEvents"].forEach(function(t){delete e[t]}),this._parent.call(this,e)},setup:function(){this.container.addClassName(this.getClassNames("-container")),this.model&&this.listenTo(this.model,{onChange:this.render})}})}),define("DS/W3DXComponents/Views/Layout/ActionsView",["UWA/Core","DS/W3DXComponents/Views/Item/ActionView","DS/W3DXComponents/Views/Temp/TempCollectionView","UWA/Event","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n){"use strict";return i.extend({name:"actions",tagName:"div",itemView:e,itemViewEventPrefix:"Action",domEvents:function(){return{resize:this.dispatchAsEventListener("onResize")}},defaultOptions:{updateOnResize:!0},init:function(e){e=t.clone(e||{},!1),["container","template","tagName","itemViewEventPrefix","domEvents"].forEach(function(t){delete e[t]}),this._parent.call(this,e)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},updateOverflow:function(){var t=this.container.offsetWidth-1,e=Math.floor(t/50);this.overflowActions=this.visibleItems.slice(e);this.dispatchEvent("onUpdateOverflow",[this.overflowActions])},onUpdateOverflow:function(t){var e=function(t,e){t.forEach(function(t){t.set({visible:e})})};e(t,!1),e(this.collection.without(t),!0)},onAfterItemAdded:function(){this.updateOverflow()},onItemRemoved:function(){this.updateOverflow()},onResize:function(){this.updateOverflow()},onVisibilityChange:function(){this.updateOverflow()},onDestroy:function(){this.container.removeEvent()}})}),define("DS/W3DXComponents/Views/Layout/DropDownActionsView",["DS/W3DXComponents/Views/Item/DropDownActionView","DS/W3DXComponents/Views/Temp/TempCompositeView","UWA/Core","UWA/Element","UWA/Event","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s){"use strict";var o="drop-down-actions",a=["position","positionOptions"];return e.extend({name:o,tagName:"div",itemView:t,itemViewContainer:function(){return"."+o+"-wrapper"},itemViewEventPrefix:"Action",position:function(){throw new Error("You must specify a position!")},positionOptions:{},template:function(){return'                        <ul class="'+this.getClassNames("-wrapper")+'"></ul>                    '},init:function(t){var e,n;for(t=i.clone(t||{},!1),e=a.length-1;e>=0;e--)n=a[e],t.hasOwnProperty(n)&&(this[n]=t[n],delete t[n]);["container","template","itemViewContainer","itemViewEventPrefix","tagName"].forEach(function(e){delete t[e]}),this._parent.call(this,t)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},updatePosition:function(){var t=this,e=function(e){return i.is(e,"function")?e.call(t):e};return this.isDestroyed||this.container.setPosition(e(this.position||this.options.position),e(this.positionOptions||this.options.positionOptions)),this},onShow:function(){n.addEvent.call(document,"click",this.onClickOutside.bind(this),null,0,!0),n.addEvent.call(this.container.getParent(),"resize",this.updatePosition.bind(this),null,0,!0),this.updatePosition()},onClickOutside:function(t){t&&(s.getElement(t).isInjected(this.container)||s.getElement(t)===this.container)||this.destroy()},onDestroy:function(){n.removeEvent.call(document,"click",this.onClickOutside,!0),n.removeEvent.call(this.container.getParent(),"resize",this.updatePosition,!0)}})}),define("DS/W3DXComponents/Views/Item/ActionsInlineView",["UWA/Class/Collection","UWA/Core","DS/W3DXComponents/Views/Layout/ActionsView","DS/W3DXComponents/Views/Layout/DropDownActionsView","DS/W3DXComponents/Views/Temp/TempItemView","DS/UIKIT/Native/Dropdown","DS/W3DXComponents/Collections/ActionsCollection","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a){"use strict";var r=["alwaysOverflow"];return s.extend({name:"actions-inline",tagName:"div",template:function(){return'                                <div class="'+this.getClassNames("-wrapper")+'"></div>                                <div class="action-container actions-inline-dotted hidden">                                    <div class="action-icon-wrapper"><span class="fonticon fonticon-2x fonticon-dot-3"></span></div>                                </div>                            '},domEvents:{"click .actions-inline-dotted":"onClickDotted","touchstart .actions-inline-dotted":"onClickDotted"},init:function(t){var i,n;for(t=e.clone(t||{},!1),i=r.length-1;i>=0;i--)n=r[i],t.hasOwnProperty(n)&&(this[n]=t[n],delete t[n]);["container","template","tagName","domEvents"].forEach(function(e){delete t[e]}),this.contextualActions=t.contextualActions,this._parent.call(this,t)},setup:function(){this.container.addClassName(this.getClassNames("-container")),this._initActionsView()},_initActionsView:function(){var t,e;return t=this._actionsViewEvents={onVisibilityChange:function(){Array.prototype.unshift.call(arguments,this.actionsView),this.dispatchEvent("onVisibilityChange",arguments)},onActionClick:function(t,e){e.preventDefault(),Array.prototype.unshift.call(arguments,this.actionsView),this.dispatchEvent("onActionClick",arguments)},onUpdateOverflow:this.onUpdateOverflow,onDestroy:function(){this.stopListening(this.actionsView,this._actionsViewEvents),delete this.actionsView},onResize:function(){this.dropDown&&this.dropDown.filter()}},e=this.actionsView=new i({collection:this.collection,filterer:this.isActionsVisible.bind(this)}),this.listenTo(e,t),e},_initDottedElem:function(){return this.dottedElem=this.getElement("."+this.name+"-dotted")},getContextualArg:function(){return this},_updateContextualActions:function(){var t,i=this;this.contextualActions=[];var n=function(t){var e=t.handler;e&&(t.handler=function(){e(i.getContextualArg())}),t.items&&t.items.forEach(n)};if(this.options&&this.options.contextualActions){var s=this.options.contextualActions;(t="function"==typeof s?s.apply(this.model):e.clone(s))&&t instanceof Array&&(t.forEach(n),this.contextualActions=t)}},_initDropDownMenu:function(){this.dottedElem;this._updateContextualActions();this.dropDown=new o({target:this.dottedElem,items:this.contextualActions});this.dropDown.show()},addContextualAction:function(t){return this.dropDown.addItem(t)},_executeHandler:function(t,e,i){i(t,e)},_initDropDown:function(){var t,i,s=this.dottedElem;return i=this._dropDownEvents={onActionClick:function(){Array.prototype.unshift.call(arguments,this.dropDown),this.dispatchEvent("onActionClick",arguments),this.destroyDropDown()},onDestroy:function(){this.stopListening(this.dropDown,this._dropDownEvents),delete this.dropDown}},t=this.dropDown=new n({collection:this.collection,filterer:this.isActionsOverflow.bind(this),position:function(){var t,i=this.container.getSize(),n=s.getOffsets(),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=n.x-i.width+s.offsetWidth,r=s.offsetHeight+n.y+i.height;return t=r>o+12||r>window.innerHeight+12?n.y-i.height+12:n.y+s.offsetHeight-12,e.merge({x:a,y:t},n)}}),this.listenTo(t,i),t},injectSubView:function(t,e){var i=this.container.getElement(e);t&&i&&(this.undelegateDOMEvents(),i.grab(t.render().getContent()),this.delegateDOMEvents())},isActionsVisible:function(t,i){var n=!t.get("overflow"),s=this.options.filterer;return e.is(s,"function")&&(s=s.call(this,t,i),n=n&&s),n},isActionsOverflow:function(t,i){var n=!t.get("visible")||t.get("overflow"),s=this.options.filterer;return e.is(s,"function")&&(s=s.call(this,t,i),n=n&&s),n},hasOverflowAction:function(){this.collection;var t=!1;return this.collection&&(t=this.collection.some(this.isActionsOverflow,this)),t},destroyDropDown:function(){this.dropDown&&(this.dropDown.destroy(),delete this.dropDown)},onRender:function(){this._initDottedElem(),this.injectSubView(this.actionsView,"."+this.name+"-wrapper")},onShow:function(){this.actionsView.dispatchEvent("onShow")},onClickDotted:function(t){if(this.dispatchEvent("onActionClickDotted"),this.contextualActions){if(this.dropDown)return;this._initDropDownMenu()}else{if(this.dropDown)return;this._initDropDown().render().inject(document.body)}t.stopPropagation()},onUpdateOverflow:function(){this._isShown&&(this.hasOverflowAction()?(this.dottedElem.removeClassName("hidden"),this.dispatchEvent("onDottedVisible")):(this.destroyDropDown(),this.dottedElem.addClassName("hidden"),this.dispatchEvent("onDottedHidden")))},destroy:function(){if(!this.isDestroyed)return this.actionsView.destroy(),this.destroyDropDown(),delete this.dottedElem,this._parent.apply(this,arguments)}})}),define("DS/W3DXComponents/Views/Item/TileView",["DS/W3DXComponents/Views/Temp/TempHandlebars","UWA/Class/Collection","UWA/Core","DS/W3DXComponents/Views/Item/ActionsInlineView","DS/W3DXComponents/Views/Plugins/LazyLoading","DS/W3DXComponents/Views/Temp/TempItemView","DS/UIKIT/Input/Toggle","DS/W3DXComponents/Collections/ActionsCollection","DS/UIKIT/DropdownMenu","DS/UIKIT/Tooltip","css!DS/UIKIT/UIKIT.css","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a,r,l,c){"use strict";var h=["lazyLoading"];return t.registerHelper("getImgAttrs",function(e){var n,s,o="";if(e){for(n in e){if(s=e[n],!i.is(s))break;o+=(n=t.Utils.escapeExpression(n))+'="'+(s=t.Utils.escapeExpression(s))+'" '}return new t.SafeString(o)}}),o.extend(s,{name:"tile",tagName:"div",template:function(){return'                                        <div class="'+this.getClassNames("-check")+' {{#unless withMultisel}}hidden{{/unless}}">                                            <div class="toggle toggle-primary">                                                <input type="checkbox" name="radios" value="" id="checkbox-{{cid}}">                                                <label class="control-label" for="checkbox-{{cid}}"></label>                                            </div>                                        </div>                                        <div class="'+this.getClassNames("-sub-container")+'" draggable="true">                                            <div class="'+this.getClassNames("-header")+'">                                                {{#if image}}<img src="{{#unless lazyLoading}}{{image}}{{/unless}}" {{getImgAttrs imgAttrs}} class="'+this.getClassNames("-image")+'" draggable="false"/>{{/if}}                                            </div>                                            <div class="'+this.getClassNames("-body")+'">                                                {{#if icon}}<img src="{{icon}}" class="'+this.getClassNames("-icon")+'" draggable="false"/>{{/if}}\t                                                <div class="'+this.getClassNames("-title")+'">{{{title}}}</div>                                                <div class="'+this.getClassNames("-subtitle")+'">{{{subtitle}}}</div>                                                <div class="'+this.getClassNames("-content")+'">{{{content}}}</div>                                            <progress max="100" value="10" class="'+this.getClassNames("-progress")+'"></progress>                                            </div>                                            <div class="'+this.getClassNames("-actions")+'">                                                <div class="actions-inline-container">                                                    <div class="action-container single-action hidden">                                                        <div class="action-icon-wrapper"><span class="fonticon fonticon-2x"></span></div>                                                    </div>                                                    <div class="action-container actions-inline-dotted hidden">                                                        <div class="action-icon-wrapper"><span class="fonticon fonticon-2x fonticon-down-open"></span></div>                                                    </div>                                                </div>                                            </div>                                        </div>                                    '},domEvents:function(){return{"click .tile-sub-container":function(t){t&&t.target&&this.container.getElement(".actions-inline-container")&&this.container.getElement(".actions-inline-container").contains(t.target)||this.dispatchEvent("onClick",[t])},"contextmenu .tile-sub-container":function(t){return t.preventDefault(),this.dispatchEvent("onContextMenu",[t]),!1},dragstart:this.dispatchAsEventListener("onDrag"),"dblclick .tile-sub-container":function(t){t&&t.target&&this.container.getElement(".actions-inline-container")&&this.container.getElement(".actions-inline-container").contains(t.target)||this.dispatchEvent("onDblClick",[t])},"change .tile-check input":this.dispatchAsEventListener("onCheck")}},init:function(t){var e,n;for((t=i.clone(t||{},!1)).attributes||(t.attributes={}),e=h.length-1;e>=0;e--)n=h[e],t.hasOwnProperty(n)&&(this[n]=t[n],delete t[n]);["container","template","tagName","domEvents"].forEach(function(e){delete t[e]}),this._parent.call(this,t)},setup:function(){this.container.addClassName(this.getClassNames("-container")),this.listenTo(this.model,{onAdd:this.onAdd,onChange:this.render,onProgress:this.onProgress,onLoad:this.onLoad}),!this.options.contextualActions&&this.model.actions&&this.model.actions instanceof r&&this.listenTo(this.model.actions,{onRemove:this.render,onAdd:this.render,onChange:this.render}),this.manageLazyLoading()},_executeHandler:function(t,e,i){i(t,e)},_initDropDown:function(){var t;t=this.container.getElement(".actions-inline-dotted .action-icon-wrapper"),this.dropDown=new l({target:t,items:this.contextualActions}),this.dropDown.show()},updateContextualActions:function(t){this.options.contextualActions=t,this._updateContextualActions()},_updateContextualActions:function(){var t,e=this;this.contextualActions=[];var n=function(t){var i=t.handler;i&&(t.handler=function(){i(e)}),t.items&&t.items.forEach(n)};if(this.options&&this.options.contextualActions){var s=this.options.contextualActions;(t="function"==typeof s?s.apply(this.model):i.clone(s))&&t instanceof Array&&(t.forEach(n),this.contextualActions=t)}else this.model.actions&&((t=i.is(this.model.actions,"function")?this.model.actions():this.model.actions)instanceof r?(t=t.map(function(t){return{text:t.get("title"),fonticon:t.get("icon"),multisel:!1,handler:function(){e.dispatchEvent("onActionClick",[e,{model:t},arguments[0]])}}}))&&t instanceof Array&&t.length>0&&(this.contextualActions=t):console.log("TileView: actions on model not correctly defined."))},_setAspectRatios:function(){var t=this.container.getElement(".tile-image");t&&(t.onload=function(){this.naturalWidth/this.naturalHeight>1?(this.removeClassName("portrait"),this.addClassName("landscape")):(this.removeClassName("landscape"),this.addClassName("portrait"))})},mixinTemplateHelpers:function(){var t,e=this._parent.apply(this,arguments);return(t=e.imgAttrs)&&i.is(t,"function")&&(e.imgAttrs=t.call(this)),e.withMultisel=this.options.withMultisel,e},manageLazyLoading:function(){this.lazyLoading&&((this.templateHelpers||(this.templateHelpers={})).lazyLoading=this.lazyLoading)},persistCheckbox:function(){this.container.getElement(".tile-check").addClassName("persist")},unPersistCheckbox:function(){this.container.getElement(".tile-check").removeClassName("persist")},setShading:function(t){for(var e=0;e<t.length;e++)t[e].criteria(this.model)&&(this.container.setStyle("background-color",t[e].color),this.container.addClassName("shaded"),this.container.getElement(".tile-header").setStyle("outline-color",t[e].color))},resetShading:function(){this.container.style.backgroundColor="",this.container.removeClassName("shaded")},select:function(t){t||(t={}),this.container.addClassName("selected"),this.container.getElement(".tile-check input")&&(this.container.getElement(".tile-check input").checked=!0),t.silent||this.dispatchEvent("onSelect")},unSelect:function(t){this.container.removeClassName("selected"),this.container.getElement(".tile-check input")&&(this.container.getElement(".tile-check input").checked=!1),t&&!t.silent&&this.dispatchEvent("onUnSelect")},isSelected:function(){return this.container.hasClassName("selected")},onBeforeRender:function(){this.dropDown&&(this.dropDown.destroy(),delete this.dropDown),this.container.getElement(".actions-inline-dotted")&&this.container.getElement(".actions-inline-dotted").removeEvent("click")},onRender:function(){var t=this;if(this._setAspectRatios(),this.container.addClassName("with-actions"),this.options.actionButtonBinding)this.options.actionButtonBinding(this);else if(this._updateContextualActions(),this.contextualActions)if(1===this.contextualActions.length){var e=this.contextualActions[0];this.container.getElement(".single-action").removeClassName("hidden"),e.fonticon&&this.container.getElement(".single-action .fonticon").addClassName("fonticon-"+e.fonticon),e.handler&&this.container.getElement(".single-action").addEvent("click",function(){t._actionTooltip&&t._actionTooltip.hide(),e.handler.apply(t,arguments)}),i.is(e.text)&&e.text.trim().length>0&&(delete this._actionTooltip,this._actionTooltip=new c({position:"bottom",target:this.container.getElement(".single-action"),body:e.text}))}else this.contextualActions.length>1&&this.container.getElement(".actions-inline-dotted")&&(this.container.getElement(".actions-inline-dotted").removeClassName("hidden"),this.container.getElement(".actions-inline-dotted").addEvent("click",function(e){if(t.contextualActions){if(t.dropDown)return;t.dispatchEvent("onActionClickDotted",t),t._initDropDown()}}))},onItemRendered:function(){this.lazyLoading&&(this.lazyLoading=i.merge({imgElem:this.getElement(".tile-image"),imgSrc:this.model.get("image")},this.lazyLoading))},onProgress:function(t){this.getElement("progress").value=t},onLoad:function(){this.container.removeClassName("progress"),this.getElement("progress").value=0},onAdd:function(t,e,i){i.isProgress&&this.container.addClassName("progress")},destroy:function(){if(!this.isDestroyed)return this.dropDown&&(this.dropDown.destroy(),delete this.dropDown),this._actionTooltip&&(this._actionTooltip.destroy(),delete this._actionTooltip),this.container.getElement(".actions-inline-dotted")&&this.container.getElement(".actions-inline-dotted").removeEvent("click"),this._parent.apply(this,arguments)}})}),define("DS/W3DXComponents/Views/Item/RowView",["UWA/Core","DS/W3DXComponents/Views/Temp/TempHandlebars","DS/W3DXComponents/Views/Temp/TempItemView","DS/UIKIT/DropdownMenu","DS/UIKIT/Input/Toggle","DS/W3DXComponents/Collections/ActionsCollection","DS/W3DXComponents/Views/Item/ActionsInlineView","DS/UIKIT/Tooltip","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a,r){"use strict";return e.registerHelper("propertyHelper",function(t,e,i){var n=e.property||e,s=e.type||null,o=t[n]||"";switch(s){case"date":o=new Date(1e3*o).toLocaleString()}return o.toString().replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}),i.extend({name:"row",tagName:"tr",template:function(){return'                            {{#if withMultisel}}<td class="row-data-check">                                <div class="row-check">                                    <div class="toggle toggle-primary">                                        <input type="checkbox" name="radios" value="" id="checkbox-{{cid}}">                                        <label class="control-label" for="checkbox-{{cid}}"></label>                                    </div>                                </div>                            </td>{{/if}}                            {{#each properties}}                                <td class="row-data{{#if this.actions}}-actions{{/if}}" >                                    {{#if this.actions}}                                        <div class="actions-inline-container">                                            <div class="action-container single-action hidden">                                                <div class="action-icon-wrapper"><span class="fonticon fonticon-2x"></span></div>                                            </div>                                            <div class="action-container actions-inline-dotted hidden">                                                <div class="action-icon-wrapper"><span class="fonticon fonticon-2x fonticon-down-open"></span></div>                                            </div>                                        </div>                                    {{/if}}                                    {{#if this.icon}}<img src="{{../../this.icon}}" class="'+this.getClassNames("-icon")+'" draggable="false"/>{{/if}}                                    {{#unless this.actions}}{{propertyHelper ../../this ../this}}{{/unless}}                                </td>                            {{/each}}                            '},domEvents:function(){return{"click .row-data":this.dispatchAsEventListener("onClick"),dragstart:this.dispatchAsEventListener("onDrag"),"change .row-check input":this.dispatchAsEventListener("onCheck")}},defaultOptions:{properties:null},init:function(e){(e=t.clone(e||{},!1)).attributes||(e.attributes={}),t.extend(e.attributes,{draggable:"true"}),["className","container","template","tagName","domEvents"].forEach(function(t){delete e[t]}),this._parent.call(this,e)},setup:function(){this.container.addClassName(this.getClassNames("-container")),this.listenTo(this.model,"onChange",this.render),!this.options.contextualActions&&this.model.actions&&this.model.actions instanceof o&&this.listenTo(this.model.actions,{onRemove:this.render,onAdd:this.render,onChange:this.render})},_initDropDown:function(){var t;t=this.container.getElement(".actions-inline-dotted"),this.dropDown=new n({target:t,items:this.contextualActions}),this.dropDown.show()},updateContextualActions:function(t){this.options.contextualActions=t,this._updateContextualActions()},_updateContextualActions:function(){var e,i=this;this.contextualActions=[];var n=function(t){var e=t.handler;e&&(t.handler=function(){e(i)}),t.items&&t.items.forEach(n)};if(this.options&&this.options.contextualActions){var s=this.options.contextualActions;(e="function"==typeof s?s.apply(this.model):t.clone(s))&&e instanceof Array&&(e.forEach(n),this.contextualActions=e)}else this.model.actions&&((e=t.is(this.model.actions,"function")?this.model.actions():this.model.actions)instanceof o?(e=e.map(function(t){return{text:t.get("title"),fonticon:t.get("icon"),multisel:!1,handler:function(){i.dispatchEvent("onActionClick",[i,{model:t},arguments[0]])}}}))&&e instanceof Array&&e.length>0&&(this.contextualActions=e):console.log("TileView: actions on model not correctly defined."))},injectSubView:function(t,e){var i=this.container.getElement(e);t&&i&&(this.undelegateDOMEvents(),t.render().inject(i),this.delegateDOMEvents())},setOptions:function(t){var e;return this._parent.apply(this,arguments),t.properties&&((e=this.templateHelpers||(this.templateHelpers={})).properties=t.properties||e.properties||Object.keys(this.model.defaults())),this},persistCheckbox:function(){this.container.getElement(".row-check").addClassName("persist")},unPersistCheckbox:function(){this.container.getElement(".row-check").removeClassName("persist")},setShading:function(t){for(var e=0;e<t.length;e++)t[e].criteria(this.model)&&this.container.setStyle("background-color",t[e].color)},resetShading:function(){this.container.style.backgroundColor=""},onBeforeRender:function(){this.dropDown&&(this.dropDown.destroy(),delete this.dropDown),this.container.getElement(".actions-inline-dotted")&&this.container.getElement(".actions-inline-dotted").removeEvent("click")},mixinTemplateHelpers:function(){var t=this._parent.apply(this,arguments);return t.withMultisel=this.options.withMultisel,t},onRender:function(){var e=this;if(this.container.addClassName("with-actions"),this.options.actionButtonBinding)this.options.actionButtonBinding(this);else if(this._updateContextualActions(),this.contextualActions)if(1===this.contextualActions.length){var i=this.contextualActions[0];this.container.getElement(".single-action").removeClassName("hidden"),i.fonticon&&this.container.getElement(".single-action .fonticon").addClassName("fonticon-"+i.fonticon),i.handler&&this.container.getElement(".single-action").addEvent("click",i.handler),t.is(i.text)&&i.text.trim().length>0&&(delete this._actionTooltip,this._actionTooltip=new r({position:"bottom",target:this.container.getElement(".single-action"),body:i.text}))}else this.contextualActions.length>1&&this.container.getElement(".actions-inline-dotted")&&(this.container.getElement(".actions-inline-dotted").removeClassName("hidden"),this.container.getElement(".actions-inline-dotted").addEvent("click",function(t){if(e.contextualActions){if(e.dropDown)return;e.dispatchEvent("onActionClickDotted",e),e._initDropDown()}}))},select:function(t){t||(t={}),this.container.addClassName("selected"),this.container.getElement(".row-check input")&&(this.container.getElement(".row-check input").checked=!0),t.silent||this.dispatchEvent("onSelect")},unSelect:function(t){this.container.removeClassName("selected"),this.container.getElement(".row-check input")&&(this.container.getElement(".row-check input").checked=!1),t&&!t.silent&&this.dispatchEvent("onUnSelect")},isSelected:function(){return this.container.hasClassName("selected")},destroy:function(){if(!this.isDestroyed)return this.actionsView&&(this.actionsView.destroy(),delete this.actionsView),this._actionTooltip&&(this._actionTooltip.destroy(),delete this._actionTooltip),this._parent.apply(this,arguments)}})}),define("DS/W3DXComponents/Views/Item/ThumbnailView",["DS/W3DXComponents/Views/Item/TileView","css!DS/UIKIT/UIKIT.css","css!DS/W3DXComponents/W3DXComponents"],function(t){"use strict";return t.extend({name:"thumbnail",init:function(t){(this._parent.call(this,t),this.getOption("thumbnailType"))&&("small"===this.getOption("thumbnailType")&&(this.container.className+=" small-thumbnail-container"))}})}),define("DS/W3DXComponents/Views/Layout/TableView",["UWA/Core","DS/W3DXComponents/Views/Temp/TempCompositeView","DS/W3DXComponents/Views/Temp/TempItemView","DS/W3DXComponents/Views/Item/RowView","DS/W3DXComponents/Views/Plugins/Multisel","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s){"use strict";return e.extend(s,{name:"table",tagName:"table",itemView:n,template:function(){return'                                {{#if headers}}                                    <thead>                                        <tr>                                            {{#if withMultisel}}<th class="'+this.getClassNames("-check")+'"></th>{{/if}}                                            {{#each headers}}                                                <th {{#if actions}}                                                        class="'+this.getClassNames("-actions")+'"                                                    {{else}}                                                        {{#if sortable}}class="sortable"{{/if}} data-property="{{property}}"                                                    {{/if}}                                                >{{label}}</th>                                            {{/each}}                                        </tr>                                    </thead>                                {{/if}}                                <tbody></tbody>                                <tfoot></tfoot>                            '},itemViewContainer:"tbody",defaultOptions:{headers:null,defaultItem:null,selectionMode:"oneToOne",headerOnEmpty:!0},domEvents:{"click th.sortable":"onClickHeader"},selectedHeader:{el:null,sort:"descending"},init:function(e){e=t.clone(e||{},!1),["container","tagName","template","itemViewEventPrefix","itemViewContainer","domEvents"].forEach(function(t){delete e[t]}),this._initSelectionSet(),this._parent.call(this,e)},setup:function(){this.container.addClassName(this.getClassNames("-container"))},setOptions:function(e){var i;this._parent.apply(this,arguments),e.headers&&((i=this.templateHelpers||(this.templateHelpers={})).headers=e.headers||i.headers||[],this.templateHelpers.headers.length>0&&(this.itemViewOptions=t.extend(this.itemViewOptions||{},{properties:i.headers.map(function(t){for(var e,i=["property","type","icon","actions"],n={},s=0;s<i.length;s++)n[e=i[s]]=t[e];return n})},!0))),e.sort&&(this.sort=e.sort);var n="nullToMany"===this.getOption("selectionMode");return this.itemViewOptions=t.merge({withMultisel:n},this.itemViewOptions||{},!0),this},mixinTemplateHelpers:function(){var t=this._parent.apply(this,arguments);return t.withMultisel="nullToMany"===this.getOption("selectionMode"),t},setShadings:function(t){for(var e=0;e<this.collection.length;e++)this.getChildView(this.collection._models[e]).setShading(t)},resetShadings:function(){for(var t=0;t<this.collection.length;t++)this.getChildView(this.collection._models[t]).resetShading()},sort:function(t,e,i){var n=t.sortBy(function(t){if(UWA.is(i,"function"))return i.call(t);var e=i.split(/[\.\[\]]/),n=null;return e.unshift(t.toJSON()),(n=e.reduce(function(t,e){return t[e]}))&&n.toLowerCase()});"descending"===e&&n.reverse(),t.reset(n),this.dispatchEvent("onSort",[e,i])},onClickHeader:function(t){var e=t.target||t.srcElement,i=e.dataset?e.dataset.property:e.getAttribute("data-property");i=this.itemViewOptions.mapping?this.itemViewOptions.mapping[i]:i,this.selectedHeader.el&&this.selectedHeader.el.removeClassName(this.selectedHeader.sort),this.selectedHeader.el=e,this.selectedHeader.sort="descending"===this.selectedHeader.sort?"ascending":"descending",this.selectedHeader.el.addClassName(this.selectedHeader.sort),this.sort(this.collection,this.selectedHeader.sort,i)},selectItemView:function(t,e){var n,s,o,a=this.getOption("selectionMode");if(a&&(n=t instanceof i?t:this.getChildView(t))){switch(o=(s=this.currentItemView)&&s===n,a){case"oneToOne":this.selectOneToOne(n,o,e);break;case"nullToOne":this.selectNullToOne(n,o,e);break;case"nullToMany":this.selectOneToMany(n,e)}return n}},addSelectedClass:function(t){this.getChildView(t).select({silent:!0})},removeSelectedClasses:function(){for(var t=0;t<this.collection.length;t++)this.getChildView(this.collection._models[t]).unSelect({silent:!0})},getSelectedItemView:function(){return this.currentItemView},selectNullToOne:function(t,e,i){return this.unSelectAll(),e||(this.currentItemView=t,t.select()),t},selectOneToOne:function(t,e,i){return e||(this.unSelectAll(),this.currentItemView=t,t.select()),t},selectOneToMany:function(t,e){return t.select(e),t},unselectOneToMany:function(t){t.unSelect({silent:!0})},unSelectAll:function(t){t||(t={});var e=this.currentItemView;e&&(e.unSelect(t),delete this.currentItemView,t.silent||this.dispatchEvent("onUnSelectAll"))},destroyEmptyView:function(){this.options.headerOnEmpty||this.container.getElement("thead").show(),this._parent.apply(this,arguments)},showEmptyView:function(){this.options.headerOnEmpty||this.container.getElement("thead").hide(),this._parent.apply(this,arguments)},onRender:function(){var t=this.getOption("defaultItem");t&&this.selectItemView(t)},onActivateMultisel:function(){this.refreshUI()},onDeactivateMultisel:function(){this.cleanUI()},onSetMultisel:function(){this.refreshUI()},onAddSelection:function(t){var e=this.getChildView(t);this.selectOneToMany(e,{silent:!0})},onItemRemoved:function(){this._selectionState.isActive&&this.deactivateMultisel()},onRemoveSelection:function(t){var e=this.getChildView(t);e&&this.unselectOneToMany(e)},cleanUI:function(){for(var t,e=0;e<this.collection.length;e++)(t=this.getChildView(this.collection._models[e]))&&(t.unPersistCheckbox(),t.unSelect());this.container.removeClassName(this.getClassNames("-multisel"))},populateUI:function(){if(this._selectionState.isActive){for(var t=0;t<this.collection.length;t++)this.getChildView(this.collection._models[t]).persistCheckbox();var e=this._selectionState.selectedObjects;for(t=0;t<e.length;t++)this.getChildView(this.collection.get(e[t].id)).select({silent:!0});this.container.addClassName(this.getClassNames("-multisel"))}else 1===this._selectionState.selectedObjects.length&&this.getChildView(this.collection.get(this._selectionState.selectedObjects[0].id)).select({silent:!0})},refreshUI:function(){this.cleanUI(),this.populateUI()},onItemViewClick:function(t,e){this._selectionState.isActive?this.selectItemView(t,{event:e,silent:!0}):this.selectItemView(t,{event:e,silent:!1})}})}),define("DS/W3DXComponents/Views/Layout/TableScrollView",["DS/W3DXComponents/Views/Layout/TableView","DS/W3DXComponents/Views/Layout/NestedScrollView","css!DS/W3DXComponents/W3DXComponents"],function(t,e){"use strict";return e.extend({name:"table-scroll",nested:t})}),define("DS/W3DXComponents/Views/Layout/GridView",["UWA/Class/View","DS/W3DXComponents/Views/Plugins/Multisel","DS/W3DXComponents/Views/Temp/TempCollectionView","DS/W3DXComponents/Views/Temp/TempItemView","DS/W3DXComponents/Views/Item/ThumbnailView","UWA/Core","css!DS/W3DXComponents/W3DXComponents","css!DS/UIKIT/UIKIT.css"],function(t,e,i,n,s,o){"use strict";function a(t){var e,i,n,s;if(t)return t.itemView&&(i=t.itemView.prototype,n="className",i&&(s=i[n],o.is(s,"function")&&(s=s.call(i))),e=s),e||""}return i.extend(e,{name:"grid",tagName:"div",itemView:s,defaultOptions:{layout:null,defaultItem:null,selectionMode:"oneToOne",className:"",header:null},init:function(t){t=o.clone(t||{},!1),["container","tagName","template","itemViewEventPrefix","domEvents"].forEach(function(e){delete t[e]}),this._initSelectionSet(),this._parent.call(this,t)},setup:function(){if(this.container.addClassName(this.getClassNames("-container")),!this.options||!this.options.layout||1!==this.options.layout.column)for(var t=0;t<8;t++)UWA.createElement("div",{class:"by-pass-flex"}).inject(this.container)},setOptions:function(t){if(!this._itemViewOptions&&(this._itemViewOptions=this.itemViewOptions||{}),this._parent.apply(this,arguments),t.hasOwnProperty("layout")){var e,i,n,s,r=t.layout,l="";e={className:i=this._itemViewOptions.className?this._itemViewOptions.className:a(this),attributes:{styles:""}},this.container&&this.container.removeClassName("row-layout").removeClassName("column-layout").removeClassName("uikit-layout"),r&&(s=r.column),r&&(n=r.row),s?s.xsmall||s.small||s.medium||s.large?(s.xsmall&&12%s.xsmall==0&&(l+=" col-xs-"+12/s.xsmall),s.small&&12%s.small==0&&(l+=" col-sm-"+12/s.small),s.medium&&12%s.medium==0&&(l+=" col-md-"+12/s.medium),s.large&&12%s.large==0&&(l+=" col-lg-"+12/s.large),this.addClassName("uikit-layout"),e={className:i+l,attributes:{styles:{flex:"none"}}}):(this.addClassName("column-layout"),e={className:i,attributes:{styles:{height:"",width:(100/s).toFixed(2)+"%",flex:"none"}}}):n&&(this.addClassName("row-layout"),e={className:i,attributes:{styles:{width:"",height:(100/n).toFixed(2)+"%",flex:"none"}}}),this.itemViewOptions=o.merge(e,this._itemViewOptions||{},!0)}var c="nullToMany"===this.getOption("selectionMode");return this.itemViewOptions=o.merge({withMultisel:c},this.itemViewOptions||{},!0),this},addClassName:function(t){return this.container?this.container.addClassName(t):(this.options.className||(this.options.className=""),this.options.className+=" "+t),this},setShadings:function(t){for(var e=0;e<this.collection.length;e++)this.getChildView(this.collection._models[e]).setShading(t)},resetShadings:function(){for(var t=0;t<this.collection.length;t++)this.getChildView(this.collection._models[t]).resetShading()},selectItemView:function(t,e){var i,s,o,a=this.getOption("selectionMode");if(a&&(i=t instanceof n?t:this.getChildView(t))){switch(o=(s=this.currentItemView)&&s===i,a){case"oneToOne":this.selectOneToOne(i,o,e);break;case"nullToOne":this.selectNullToOne(i,o,e);break;case"nullToMany":this.selectOneToMany(i,e)}return i}},addSelectedClass:function(t){this.getChildView(t).select({silent:!0})},removeSelectedClasses:function(){for(var t=0;t<this.collection.length;t++)this.getChildView(this.collection._models[t]).unSelect({silent:!0})},getSelectedItemView:function(){return this.currentItemView},selectNullToOne:function(t,e,i){return this.unSelectAll(),e||(this.currentItemView=t,t.select(i)),t},selectOneToOne:function(t,e,i){return e||(this.unSelectAll(),this.currentItemView=t,t.select(i)),t},selectOneToMany:function(t,e){return this.currentItemView=t,t.select(e),t},unselectOneToMany:function(t){t.unSelect({silent:!0})},unSelectAll:function(t){t||(t={});var e=this.currentItemView;e&&(e.unSelect(t),delete this.currentItemView,t.silent||this.dispatchEvent("onUnSelectAll"))},appendBuffer:function(t,e){t.container.insertBefore(e,t.container.getElement(".by-pass-flex"))},appendHtml:function(t,e,i){t.isBuffering?(t.elBuffer.appendChild(e.container),t._bufferedChildren.push(e)):t.container.insertBefore(e.container,t.container.getElement(".by-pass-flex"))},onRender:function(){var t=this.getOption("defaultItem"),e=this.getOption("header");o.is(e)&&(e=o.is(e,"function")?e.call(this):e).inject&&e.inject(this.container,"top"),t&&this.selectItemView(t)},onActivateMultisel:function(){this.refreshUI()},onDeactivateMultisel:function(){this.cleanUI()},onSetMultisel:function(){this.refreshUI()},onAddSelection:function(t){var e=this.getChildView(t);this.selectOneToMany(e,{silent:!0})},onItemRemoved:function(){this._selectionState.isActive&&this.deactivateMultisel()},onRemoveSelection:function(t){var e=this.getChildView(t);e&&this.unselectOneToMany(e)},cleanUI:function(){for(var t,e=0;e<this.collection.length;e++)(t=this.getChildView(this.collection._models[e]))&&(t.unPersistCheckbox(),t.unSelect());this.container.removeClassName(this.getClassNames("-multisel"))},populateUI:function(){if(this._selectionState.isActive){for(var t=0;t<this.collection.length;t++)this.getChildView(this.collection._models[t]).persistCheckbox();var e=this._selectionState.selectedObjects;for(t=0;t<e.length;t++)this.getChildView(this.collection.get(e[t].id)).select({silent:!0});this.container.addClassName(this.getClassNames("-multisel"))}else 1===this._selectionState.selectedObjects.length&&this.getChildView(this.collection.get(this._selectionState.selectedObjects[0].id)).select({silent:!0})},refreshUI:function(){this.cleanUI(),this.populateUI()},onItemViewClick:function(t,e){this._selectionState.isActive?this.selectItemView(t,{event:e,silent:!0}):this.selectItemView(t,{event:e,silent:!1})}})}),define("DS/W3DXComponents/Views/Layout/GridScrollView",["DS/W3DXComponents/Views/Layout/GridView","DS/W3DXComponents/Views/Layout/NestedScrollView","css!DS/W3DXComponents/W3DXComponents"],function(t,e){"use strict";return e.extend({name:"grid-scroll",nested:t})}),define("DS/W3DXComponents/Views/Layout/ListView",["DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Item/TileView","css!DS/W3DXComponents/W3DXComponents"],function(t,e){"use strict";return t.extend({name:"list",defaultOptions:{layout:{column:1},selectionMode:"oneToOne",itemView:e,scrollPosition:"auto",useInfiniteScroll:!0,usePullToRefresh:!0,scrollDuration:200}})}),define("DS/W3DXComponents/Views/Layout/ChannelView",["UWA/Core","DS/W3DXComponents/Views/Layout/GridScrollView","css!DS/W3DXComponents/W3DXComponents"],function(t,e){"use strict";return e.extend({name:"channel",defaultOptions:{layout:{row:1},orientation:"horizontal",useInfiniteScroll:!0,usePullToRefresh:!0}})}),define("DS/W3DXComponents/Views/Temp/TempAutocomplete",["UWA/Core","UWA/Event","UWA/String","DS/W3DXComponents/Views/Temp/DeprecatedAutocomplete","DS/UIKIT/Spinner","i18n!DS/W3DXComponents/assets/nls/Views/Temp/TempAutocomplete","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o){"use strict";var a,r,l=n.extend({_prevText:"",_suggestsIndex:0,defaultOptions:{attributes:{type:"autocomplete",autocomplete:"off"},className:"temp-autocomplete"},resizeSuggests:function(){},init:function(t){this._parent(t),t=t||{},this.collection=t.collection?t.collection:null,this.getSuggestions=t.getSuggestions||this.getSuggestions,this.suggestDistinction=t.suggestDistinction||this.suggestDistinction},attachEvents:function(){this._parent.apply(this,arguments);var t=this.elements;t.input.addEvent("keydown",this.onKeyDown.bind(this)),t.input.addEvent("paste",this.onPaste.bind(this)),t.input.addEvent("drop",this.onPaste.bind(this))},getId:function(){return this.elements.input.id},getName:function(){return this.elements.input.name},getFormattedLabel:function(t){return this.options.labelFormat.replace(/\{(\w+)\}/g,function(e,i){return UWA.is(t,"string")?t:t[i]})},suggestDistinction:function(t){return!1},successProcess:function(t,e){if(0===(t=UWA.is(t,"string")?this.dataParse(t):t).length&&this.options.onEmailAddress&&i.isEmail(e)){var n=this.options.onEmailAddress(e);n&&(t=[n])}t.length>0&&(this.dataCache[e]=t),this.dispatchEvent("onUpdateSuggests",[t]),this.elements.spin.hide(),this.typeTimeout=null},onUpdateSuggests:function(t){var n,s,a,r,l=this,c=this.elements;if(c.suggests.empty(),Array.isArray(t)&&t.length>0){for(var h=function(){var t=function(t){var e=l.options.suggestKey?t[l.options.suggestKey]:i.stripTags(l.getFormattedSuggest(t));l.elements.input.set({"data-key":e}),l.dispatchEvent("onSelect",[e,t,r])}.bind(this,p);!!navigator.userAgent.match(/(iPhone|iPad|iPod)/g)?s.addEvent("touchstart",t):(s.addEvent("click",t),s.addEvent("mouseover",function(t){var i=e.getElement(t);c.suggests.getElement(".selected").removeClassName("selected"),i.parentNode.addClassName("selected")}))},d=Math.min(t.length,8),u=0;u<d;u++){var p=t[u],m=this.getFormattedSuggest(p);m=(r=this.suggestDistinction(p))?m+" ("+r+")":m,this.options.suggestKey&&(this.itemCache[p[this.options.suggestKey].toLowerCase()]=p),n=UWA.createElement("li"),s=UWA.createElement("a",{text:m}).inject(n),n.inject(c.suggests),r?(n.addClassName("distinct"),this.options.unlockDistinctClick?h():n.addClassName("locked")):h()}(a=this.elements.suggests.getElement("li:not(.locked)"))&&a.addClassName("selected"),l._suggestsIndex=0,this.resizeSuggests()}else n=UWA.createElement("li"),(s=UWA.createElement("a").inject(n)).setHTML(o.NoResults),n.inject(c.suggests),n.addClassName("error-suggest");this.dispatchEvent("onShowSuggests")},onSelect:function(t,e){e&&(this.elements.input.value=this.getFormattedLabel(e),this.resetInput(),this.onHideSuggests(),setTimeout(function(){this.getFocus()}.bind(this),100))},onBlur:function(t){setTimeout(function(){this.dispatchEvent("onHideSuggests")}.bind(this),200)},onFocus:function(t){var i=this,n=this.elements,s=e.getElement(t);n.input.value===this.options.placeholder&&(n.input.value=""),this.getSuggestions(s.value,this.dataCache,function(t){i.successProcess(t,s.value)}),this.dispatchEvent("onFocused",t)},onShowSuggests:function(){var t=this.elements;t.input.value.length>0&&t.container.addClassName(this.options.className+"-suggestsDisplayed")},onPaste:function(t){setTimeout(function(){this.onKeyUp(t)}.bind(this),50)},onKeyDown:function(t){var i=this,n=i.elements.suggests.getElements("li:not(.locked)"),s=n[i._suggestsIndex],o=t.code||t.key;function a(t){var e=i._suggestsIndex+t;n[e]&&(s.removeClassName("selected"),i._suggestsIndex=e,n[e].addClassName("selected"))}if(i.elements.container.hasClassName(this.options.className+"-suggestsDisplayed")){switch(o){case"Escape":case"Esc":i.onHideSuggests();break;case"ArrowDown":case"Down":a(1);break;case"ArrowUp":case"Up":a(-1);break;case"Enter":case"NumpadEnter":s&&s.getElement("a")&&s.getElement("a").triggerEvent("click");break;default:return}e.stop(t)}else"ArrowDown"!==o&&"Down"!==o||i.onShowSuggests()},onKeyUp:function(t){var e=this,i=this.elements.input,n=i.value;if(n!==this._prevText)return 0===n.trim().length?(this.resetInput(),this.onHideSuggests(),void(this.typeTimeout=null)):(this._prevText=n,i.removeAttribute("data-key"),void(n.length>=this.options.minLength&&(clearTimeout(this.typeTimeout),this.showSpin(),this.typeTimeout=setTimeout(function(){this.getSuggestions(n,this.dataCache,function(t){e.successProcess(t,n)})}.bind(this),this.options.typeDelay))))},resetInput:function(t){this.elements.input.value="",this._prevText="";var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),this.elements.input.dispatchEvent(e),t&&this.resetCache()},showSpin:function(){var t,e=this.elements;e.suggests.empty(),this.elements.spin.show(),(t=UWA.createElement("li")).addClassName("li-spinner"),this.elements.spin.inject(t),t.inject(e.suggests),this.dispatchEvent("onShowSuggests")},buildSkeleton:function(){this._parent.apply(this,arguments),this.options.id&&(this.elements.input.id=this.options.id),this.options.name&&(this.elements.input.name=this.options.name),this.options.attributes&&this.elements.input.set(this.options.attributes),this.elements.spin=new s({className:"small"}),this.autosize=new c(this.elements.input,this.options.container)},destroy:function(){this.autosize&&this.autosize.destroy(),this._parent.apply(this,arguments)}});function c(e,i){var n;function s(){var t,i,s;for(t=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,s=0;s<a.length;s++)null!=(i=t[a[s]])&&(n.style[a[s]]=i);n.disabled="disabled",n.style.whiteSpace="pre",n.style.position="absolute",n.style.top=n.style.left="-9999em"}function o(){var t,s;(t=e.value||e.placeholder)!==n.value&&(n.setText(t),s=n.offsetWidth+r,i&&i.offsetWidth&&(s=i.offsetWidth>n.offsetWidth?n.offsetWidth:i.offsetWidth-4),e.style.width=s+"px")}function l(t){var i;e[(i=t?"remove":"add")+"Event"]("keydown",o),e[i+"Event"]("keyup",o),e[i+"Event"]("input",o),e[i+"Event"]("paste",o),e[i+"Event"]("change",o)}return n=t.createElement("span"),document.body.appendChild(n),s(),l(),o(),{remap:s,refresh:o,destroy:function(){l(!0),n.destroy(),e.style.width=""}}}return a=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","webkitBoxSizing","mozBoxSizing","boxSizing","padding","border"],r=20,l}),define("DS/W3DXComponents/Views/Item/MultiselView",["UWA/Core","UWA/Event","DS/W3DXComponents/Views/Item/ActionsInlineView","DS/UIKIT/Tooltip","i18n!DS/W3DXComponents/assets/nls/Views/Item/MultiselView","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s){"use strict";return i.extend({tagName:"div",template:function(){return'                                <div class="'+this.getClassNames("-multisel-button")+'">                                    <input type="checkbox" id="{{cid}}-multisel-button" name="{{cid}}-buttons" value="multisel"/>                                    <label class="multisel-label fonticon fonticon-2x fonticon-select-on" for="{{cid}}-multisel-button"></label>                                    <div class="multisel-counter">{{counter}}</div>                                </div>                                <div class="'+this.getClassNames("-wrapper")+'"></div>                                <div class="action-container actions-inline-dotted hidden">                                    <div class="action-icon-wrapper"><span class="fonticon fonticon-2x fonticon-open-down"></span></div>                                </div>                            '},domEvents:{"change input":"onChangeInput"},init:function(t){this.buildMultiselActions=t.buildMultiselActions||function(){return[]},this._parent.apply(this,arguments)},setup:function(){this._parent.apply(this,arguments);var t=this.templateHelpers||(this.templateHelpers={});t.counter=t.counter||0,this.isInMultiselMode=!1},onChangeInput:function(t){var i=e.getElement(t);i.checked?this.dispatchEvent("onMultiselOn",[this,i.value]):(this.exitMultisel(),this.dispatchEvent("onMultiselOff",[this,i.value]))},resetMultisel:function(){this.templateHelpers.counter=0,this.collection.reset(),this.container.getElement("input").checked=!1},_filterActions:function(t,e){for(var i=[],n=UWA.clone(t),s=0;s<n.length;s++)if(n[s].items){var o=n[s];o.items=this._filterActions(n[s].items,e),i.push(o)}else n[s].id?e.indexOf(n[s].id)>-1&&n[s].multisel&&i.push(n[s]):n[s].multisel&&i.push(n[s]);return i},buildMultisel:function(t){if(t.isActive){var e=t.selectedObjects.length;this._updateCounter(e),this.selectedModels=t.selectedObjects,this.contextualActions=this.options.contextualActions=this.buildMultiselActions(this.selectedModels),this.render(),this.container.getElement("input").checked="checked",this.dottedElem.removeClassName("hidden"),this.dispatchEvent("onDottedVisible"),0!==e||t.wasExplicitlyActivated||this.exitMultisel()}},getContextualArg:function(){return this.selectedModels},_executeHandler:function(t,e,i){i(this.selectedModels)},_updateCounter:function(t){this.templateHelpers.counter=t,this.container.getElement(".multisel-counter").setText(t)},exitMultisel:function(){this.container.getElement("input").checked=!1,this._updateCounter(0),this.destroyDropDown(),this.dottedElem.addClassName("hidden"),this.dispatchEvent("onDottedHidden")},setOptions:function(t){this._parent.apply(this,arguments);var e=this.collection;return e&&this.listenTo(e,{onReset:function(){this.render(),this.container.getElement("input").checked="checked"}}),this},onRender:function(){this._parent.apply(this,arguments),delete this.tooltip,this.tooltip=new n({position:"bottom",target:this.container.getElement(".multisel-label"),body:s.tooltipMultiselIcon})}})}),define("DS/W3DXComponents/Views/Item/SwitcherView",["UWA/Core","UWA/Utils","UWA/Event","DS/W3DXComponents/Views/Temp/TempItemView","DS/UIKIT/Tooltip","DS/UIKIT/IconDropdown","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o){"use strict";return n.extend({name:"switcher",tagName:"div",template:function(){return this.getOption("tempSingleIconOnMobile")?'                            {{#each buttons}}                                <div style="display: none;" class="'+this.getClassNames("-button")+'">                                    <input type="radio" id="{{../cid}}-{{id}}-button" name="{{../cid}}-buttons" value="{{id}}" {{#if default}}checked="checked"{{/if}}/>                                    <label for="{{../cid}}-{{id}}-button"/>                                </div>                            {{/each}}                            <div class="'+this.getClassNames("-button")+'">                              <label id="switch-view-button"/>                                <span style="font-size: 24px; margin: 0;" class="fonticon fonticon-view-big-thb"></span>                              </label>                            </div>                                                        ':'                            {{#each buttons}}                                <div class="'+this.getClassNames("-button")+'">                                    <input type="radio" id="{{../cid}}-{{id}}-button" name="{{../cid}}-buttons" value="{{id}}" {{#if default}}checked="checked"{{/if}}/>                                    <label for="{{../cid}}-{{id}}-button"/>                                </div>                            {{/each}}                            '},domEvents:{"change input":"onChange"},defaultOptions:{buttons:[]},init:function(e){e=t.clone(e||{},!1),["container","template","tagName","domEvents"].forEach(function(t){delete e[t]}),this._parent.call(this,e)},setup:function(){var t=this.templateHelpers||(this.templateHelpers={});this.container.addClassName(this.getClassNames("-container")),t.buttons=t.buttons||this.getOption("buttons")},onRender:function(){var e=this;if(this.getOption("tempSingleIconOnMobile")){var i=t.extendElement(e.container).getElement("#switch-view-button"),n=e.options.buttons.filter(function(t){return t.default})[0];n=n||{};var a=[];e.options.buttons.forEach(function(t){a.push({name:t.id,fonticon:function(t){switch(t){case"thumbnail":return"view-small-thb";case"tilebig":return"view-big-tile";case"tile":return"view-small-tile";case"table":return"view-list";default:return""}}(t.id),description:t.title,selectable:!0,selected:n.id===t.id})});var r=new s({position:"bottom",target:i});new o({target:i,items:a,events:{onClick:function(t,n){n.actived||(e.dispatchEvent("onSwitch",[e,n.name]),this.items.forEach(function(t){t.actived=!1}),n.actived=!0,i.children[0].className=n.elements.icon.className,r.setBody(n.description))}}}).items.forEach(function(t){t.name===n.id&&(i.children[0].className=t.elements.icon.className,r.setBody(t.description))})}else this.options.buttons.forEach(function(i){if(t.is(i.title)&&i.title.trim().length>0){var n=t.extendElement(e.container).getElement("#"+e.cid+"-"+i.id+"-button");new s({position:"bottom",target:n.getParent(),body:i.title})}})},clear:function(){this.container.getElements("input").map(function(t){t.removeAttribute("checked")})},setValue:function(e){var i=this.container.getElement("input#"+this.cid+"-"+e+"-button");t.is(i)&&(this.clear(),i.setAttribute("checked","checked"),this.dispatchEvent("onSwitch",[this,e]))},getValue:function(){for(var t,e,i=this.container.getElements("input"),n=0;t=i[n];n++)if(t.checked){e=t;break}return e.value},onChange:function(t){var e=i.getElement(t);e.checked&&this.dispatchEvent("onSwitch",[this,e.value])}})}),define("DS/W3DXComponents/Views/Item/SetView",["DS/W3DXComponents/Views/Item/SwitcherView","DS/W3DXComponents/Views/Item/ActionsInlineView","DS/W3DXComponents/Views/Item/CounterView","DS/W3DXComponents/Views/Temp/TempItemView","DS/W3DXComponents/Collections/ActionsCollection","UWA/Core","DS/W3DXComponents/Views/Item/MultiselView","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a){"use strict";function r(t,e){var i;return t&&(i=t[e],o.is(i,"function")&&(i=i.call(t))),i}return n.extend({name:"set",tagName:"div",template:function(){return'                        <div class="'+this.getClassNames("-header")+'">                            <div class="'+this.getClassNames("-detail")+'"></div>                            <div class="'+this.getClassNames("-actions")+'"></div>                            <div class="'+this.getClassNames("-multiselHeader")+'"></div>                            <div class="'+this.getClassNames("-switcher")+'"></div>                        </div>                        <div class="'+this.getClassNames("-contents")+'"></div>                    '},defaultOptions:{actions:{},switcher:{},detail:{},multiselHeader:{},contents:{},multiselAction:{id:"multisel",icon:"check",overflow:!1}},actions:e,switcher:t,detail:i,multiselHeader:a,init:function(t){(t=o.clone(t||{},!1))&&t.actions&&t.actions.view&&(this.actions=t.actions.view),t&&t.detail&&t.detail.view&&(this.detail=t.detail.view),t&&t.switcher&&t.switcher.view&&(this.switcher=t.switcher.view),t&&t.multiselHeader&&t.multiselHeader.view&&(this.multiselHeader=t.multiselHeader.view),["container","template","tagName"].forEach(function(e){delete t[e]}),this._parent.call(this,t)},setup:function(){var t,e=this.getOption("contents"),i="nullToMany"===this.getOption("contents").selectionMode,n=this.getOption("defaultView");this.container.addClassName(this.getClassNames("-container"));for(var s=0;s<e.views.length;s++)if(e.views[s].default){t=e.views[s];break}t&&(console.log("DS/W3DXComponents/Views/Item/SetView - Use of deprecated option contents.views[n].default=true, use contents.defaultView instead"),n=t.id),n||(n=e.views[0].id),this.currentViewId=n,this._initDetailView(),i&&this._initMultiselHeaderView(),this._initActionsView(),this._initSwitcherView(),this._initContentsViews(e.views)},_initDetailView:function(){var t=r(this,"detail");return this.detailView=new t(this.getDetailViewOptions())},getDetailViewOptions:function(){return o.extend(this.getOption("detail"),{collection:this.collection})},_initMultiselHeaderView:function(){if(this.getOption("actions").collection){var t,e,i=r(this,"multiselHeader");return e=this._multiselHeaderViewEvents={onMultiselOn:function(){this.contentsViews[this.currentViewId].nestedView.activateMultisel(!0),this.dispatchEvent("onMultiselOn",arguments)},onMultiselOff:function(){this.contentsViews[this.currentViewId].nestedView.deactivateMultisel(),this.dispatchEvent("onMultiselOff",arguments)},onActionClick:function(){Array.prototype.unshift.call(arguments,this.actionsView),this.dispatchEvent("onActionClick",arguments)}},t=this.multiselHeaderView=new i(this.getMultiselHeaderViewOptions()),this.listenTo(t,e),t}},getMultiselHeaderViewOptions:function(){var t=new s,e="nullToMany"===this.getOption("contents").selectionMode,i=this.getOption("buildMultiselActions");return{collection:t=o.is(t,"function")?t.call(this):t,withMultisel:e,buildMultiselActions:i}},buildMultiselOnCheck:function(t){if(this.multiselHeaderView){var e=this.contentsViews[this.currentViewId].nestedView,i=e.getSelectionState();e.isSelected(t)?e.removeSelection(t):(i.isActive||e.activateMultisel(!1),e.addSelection(t)),this.multiselHeaderView.buildMultisel(i)}e.selectionIsEmpty()&&!i.wasExplicitlyActivated&&e.deactivateMultisel()},buildMultiselOnClick:function(t){if(this.multiselHeaderView){var e=this.contentsViews[this.currentViewId].nestedView,i=e.getSelectionState();i.isActive?(e.isSelected(t)?e.removeSelection(t):e.addSelection(t),this.multiselHeaderView.buildMultisel(i)):(e.deactivateMultisel(),e.addSelection(t)),e.selectionIsEmpty()&&!i.wasExplicitlyActivated&&e.deactivateMultisel()}},_initActionsView:function(){if(this.getOption("actions").collection){var t,e,i=r(this,"actions");return e=this._actionsViewEvents={onActionClick:function(){Array.prototype.unshift.call(arguments,this.actionsView),this.dispatchEvent("onActionClick",arguments)},onVisibilityChange:this.onVisibilityChange},t=this.actionsView=new i(this.getActionsViewOptions()),this.listenTo(t,e),t}},getActionsViewOptions:function(){var t=this.getOption("actions"),e=t.collection;return e=o.is(e,"function")?e.call(this):e,o.merge({collection:e},t)},_initSwitcherView:function(){var t,e,i=r(this,"switcher");return e=this._switcherViewEvents={onSwitch:function(){Array.prototype.unshift.call(arguments,this.switcherView),this.dispatchEvent("onSwitch",arguments)}},t=this.switcherView=new i(this.getSwitcherViewOptions()),this.listenTo(t,e),t},getSwitcherViewOptions:function(){return o.extend(this.getOption("switcher"),{buttons:this.getOption("contents").views,tempSingleIconOnMobile:this.getOption("tempSingleIconOnMobile")})},_initContentsViews:function(t){return this.contentsViews={},t.forEach(function(t,e){this.currentViewId===t.id?this.contentsViews[t.id]=this._buildContentsView(t):this.getOption("lazyRender")||(this.contentsViews[t.id]=this._buildContentsView(t))},this),this.contentsViews},getContentsViewOptions:function(t){var e=this.getOption("contents"),i=o.extend(UWA.clone(e),t,!0);return o.extend(i,{collection:this.collection})},_buildContentsView:function(t){if(t&&t.view){if(this.contentsViews[t.id])throw new Exception("View is already built");var e=new t.view(this.getContentsViewOptions(t)),i={onItemViewDrag:function(){Array.prototype.unshift.call(arguments,e),this.dispatchEvent("onItemViewDrag",arguments)},onItemViewCheck:function(){Array.prototype.unshift.call(arguments,e),arguments[2]instanceof n?this.buildMultiselOnCheck(arguments[2].model):this.buildMultiselOnCheck(arguments[2]),this.dispatchEvent("onItemViewCheck",arguments)},onItemViewClick:function(){Array.prototype.unshift.call(arguments,e),arguments[2]instanceof n?this.buildMultiselOnClick(arguments[2].model):this.buildMultiselOnClick(arguments[2]),this.dispatchEvent("onItemViewClick",arguments)},onItemViewDblClick:function(){Array.prototype.unshift.call(arguments,e),this.dispatchEvent("onItemViewDblClick",arguments)},onItemViewContextMenu:function(){Array.prototype.unshift.call(arguments,e),this.dispatchEvent("onItemViewContextMenu",arguments)},onItemViewSelect:function(){Array.prototype.unshift.call(arguments,e),this.dispatchEvent("onItemViewSelect",arguments)},onAddSelection:function(){Array.prototype.unshift.call(arguments,e),this.dispatchEvent("onAddSelection",arguments)},onRemoveSelection:function(){Array.prototype.unshift.call(arguments,e),this.dispatchEvent("onRemoveSelection",arguments)},onDeactivateMultisel:function(){Array.prototype.unshift.call(arguments,e),this.multiselHeaderView.exitMultisel(),this.dispatchEvent("onDeactivateMultisel",arguments)},onUnSelectAll:function(){Array.prototype.unshift.call(arguments,e),this.dispatchEvent("onUnSelectAll",arguments)},onInfiniteScroll:function(){Array.prototype.unshift.call(arguments,e),this.dispatchEvent("onInfiniteScroll",arguments)},onPullToRefresh:function(){Array.prototype.unshift.call(arguments,e),this.dispatchEvent("onPullToRefresh",arguments)},onRender:function(){Array.prototype.unshift.call(arguments,e),this.dispatchEvent("onRenderContentView",arguments)},onDestroy:function(){Array.prototype.unshift.call(arguments,e),this.stopListening(e),this.dispatchEvent("onDestroyContentView",arguments)}};return this.listenTo(e,i),e.container.hide(),e}},onRender:function(){var t=this.name;if(!this.currentViewId)throw Exception("No default view defined");for(var e in this.injectSubView(this.multiselHeaderView,"."+t+"-multiselHeader"),this.dispatchEvent("onMultiselHeaderView",this.multiselHeaderView),this.injectSubView(this.detailView,"."+t+"-detail"),this.dispatchEvent("onRenderDetailView",this.detailView),this.actionsView&&this.injectSubView(this.actionsView,"."+t+"-actions")&&this.dispatchEvent("onRenderActionsView",this.actionsView),this.contentsViews)this.contentsViews[e]&&this.injectSubView(this.contentsViews[e],"."+this.name+"-contents");return this.injectSubView(this.switcherView,"."+t+"-switcher"),this.dispatchEvent("onRenderSwitcherView",this.switcherView),this.switcherView.setValue(this.currentViewId),this},showContentsView:function(t,e){var i,n;if(!this.contentsViews[t]){for(var s=this.getOption("contents"),a=0;a<s.views.length;a++)if(s.views[a].id===t){n=s.views[a];break}this.contentsViews[t]=this._buildContentsView(n),this.injectSubView(this.contentsViews[t],"."+this.name+"-contents")}var r=this.contentsViews[t];if(e||(e={}),(i=e.selectedItemView)&&(i=this.selectItemView(i.model,{silent:!0,view:r})),r.container.show(),i&&this.scrollToItemView(i,{view:r,scrollPosition:this.getContentsViewOptions().scrollPosition}),this.currentShadings?r.setShadings&&r.setShadings(this.currentShadings):r.resetShadings&&r.resetShadings(),"nullToMany"===r.nestedView.options.selectionMode){var l=this.contentsViews[this.currentViewId];if(l&&"nullToMany"!==l.nestedView.options.selectionMode&&l.nestedView.resetSelectionState(),l&&l.nestedView.getSelectionState&&r.nestedView.setMultisel&&l.nestedView.getSelectionState()){var c=o.extend({},l.nestedView.getSelectionState());r.nestedView.setMultisel(c),this.multiselHeaderView.buildMultisel(c)}}this.currentViewId=t},injectSubView:function(t,e){var i=this.container.getElement(e);t&&i&&(this.undelegateDOMEvents(),i.grab(t.render().getContent()),this.delegateDOMEvents())},switchView:function(t){this.switcherView.setValue(t)},selectItemView:function(t,e){e||(e={});var i=e.view||this.contentsViews[this.currentViewId];return i&&i.selectItemView&&i.selectItemView(t,e)},selectItemViews:function(){if(this.getSelection())for(var t=this.getSelection()._models,e=0;e<t.length;e++)this.selectItemView(t[e],{silent:!0})},getSelectedItemView:function(t){t||(t={});var e=t.view||this.contentsViews[this.currentViewId];return e&&e.getSelectedItemView&&e.getSelectedItemView()},getSelection:function(){return this.contentsViews[this.currentViewId].nestedView.getSelection()},unSelectAll:function(t){t||(t={});var e=t.view||this.contentsViews[this.currentViewId];return e&&e.unSelectAll&&e.unSelectAll(t)},setShadings:function(t){t=t||{},this.currentShadings=t;var e=t.view||this.contentsViews[this.currentViewId];return e&&e.setShadings&&e.setShadings(this.currentShadings)},resetShadings:function(){this.currentShadings=null;var t=this.contentsViews[this.currentViewId];return t&&t.resetShadings&&t.resetShadings()},scrollToItemView:function(t,e){e||(e={});var i=e.view||this.contentsViews[this.currentViewId];return i&&i.scrollToItemView&&i.scrollToItemView(t,e.scrollPosition)},scrollToPosition:function(t,e){e||(e={});var i=e.view||this.contentsViews[this.currentViewId];return i&&i.scrollToPosition&&i.scrollToPosition(t.x,t.y)},minimize:function(){this.isMinimized||(this.isMinimized=!0,this.container.addClassName("minimized"),this.dispatchEvent("onMinimized"))},maximize:function(){this.isMinimized&&(this.isMinimized=!1,this.container.removeClassName("minimized"),this.dispatchEvent("onMaximized"))},onVisibilityChange:function(){arguments[arguments.length-1].length?this.getElement(".set-actions").addClassName("with-actions"):this.getElement(".set-actions").removeClassName("with-actions")},onSwitch:function(){var t,e,i,n=arguments[arguments.length-1],s=this.getOption("contents").views,o=(t="id",e=n,s.forEach(function(n){n[t]===e&&(i=n)}),this.getSelectedItemView()),a=this.currentViewId,r=this.contentsViews[a];a=arguments[arguments.length-1],r&&(r.container.hide(),r.unSelectAll({silent:!0})),a&&this.showContentsView(a,{selectedItemView:o})},onShow:function(){this.detailView&&this.detailView.dispatchEvent("onShow"),this.switcherView&&this.switcherView.dispatchEvent("onShow"),this.actionsView&&this.actionsView.dispatchEvent("onShow"),this.multiselHeaderView&&this.multiselHeaderView.dispatchEvent("onShow")},destroyContentsViews:function(){for(var t in this.contentsViews)this.contentsViews[t]&&this.contentsViews[t].destroy();this.contentsViews.length=0},destroy:function(){if(!this.isDestroyed)return this.actionsView&&this.stopListening(this.actionsView,this._actionsViewEvents),this.stopListening(this.switcherView,this._switcherViewEvents),this.detailView&&(this.detailView.destroy(),delete this.detailView),this.multiselHeaderView&&(this.multiselHeaderView.destroy(),delete this.multiselHeaderView),this.actionsView&&(this.actionsView.destroy(),delete this.actionsView),this.switcherView&&(this.switcherView.destroy(),delete this.switcherView),this.destroyContentsViews(),this._parent.apply(this,arguments)}})}),define("DS/W3DXComponents/MemberSet",["UWA/Core","DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Layout/TableScrollView","DS/W3DXComponents/Views/Item/SetView","DS/W3DXComponents/Views/Item/TileView","DS/W3DXComponents/Collections/ActionsCollection","i18n!DS/W3DXComponents/assets/nls/MemberSet","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a){"use strict";var r="member-set";return n.extend({name:r,defaultOptions:{contents:{views:[{id:"tile",title:a.titleTileView,view:e,itemView:s,default:!0},{id:"table",title:a.titleTableView,view:i}]}},template:function(){return'                <div class="'+this.getClassNames("-header")+'">                    <div class="'+this.getClassNames("-multiselHeader")+'"></div>                    <div class="'+this.getClassNames("-detail")+'"></div>                    <div class="'+this.getClassNames("-actions")+'"></div>                    <div class="'+this.getClassNames("-switcher")+'"></div>                </div>                <div class="'+this.getClassNames("-slidepanel")+'"></div>                <div class="'+this.getClassNames("-contents")+'"></div>            '},init:function(t){this._parent(t)},setup:function(){this._parent.apply(this,arguments),this.options.slidepanel&&(this.slidepanel=this.options.slidepanel,this._initSlidepanelView())},_initSlidepanelView:function(){var e,i,n,s=(i="slidepanel",(e=this)&&(n=e[i],t.is(n,"function")&&(n=n.call(e))),n);return this.slidepanelView=new s.view(this.getSlidepanelViewOptions())},getSlidepanelViewOptions:function(){var e=this;return t.extend(this.getOption("slidepanel").viewOptions,{collection:this.collection,onClose:function(){e.refreshHeight()}})},togglePanel:function(){this.slidepanelView.container.hasClassName("expanded")?this.slidepanelView.hide():(this.slidepanelView.show(),this.slidepanelView.getElement("tr:not(.hidden) input").focus()),this.refreshHeight()},onRender:function(){this.injectSubView(this.slidepanelView,"."+r+"-slidepanel"),this._parent.apply(this,arguments)},refreshHeight:function(){var t=this.container.getElement("."+r+"-slidepanel"),e=this.container.getElement("."+r+"-contents"),i=this.container.getSize().height-t.getSize().height-50;e.setStyle("height",i+"px")},destroy:function(){this.slidepanelView&&this.slidepanelView.destroy(),this._parent.apply(this,arguments)}})}),define("DS/W3DXComponents/Views/Item/LabelManagerView",["UWA/Core","UWA/Event","UWA/Element","UWA/Utils","DS/W3DXComponents/Views/Temp/TempItemView","DS/W3DXComponents/Views/Temp/TempAutocomplete","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o){"use strict";var a="labelselector-item-view";return s.extend({tagName:"div",className:a+"-container",name:a,template:function(){return'                                <table>                                    {{#each categories}}                                        <tr class="tr-{{id}}">                                            <td>                                                <span id="{{id}}-label">{{name}}</span>                                            </td>                                            <td>                                                <div id="{{id}}-wrapper" class="'+a+'-wrapper"></div>                                            </td>                                        </tr>                                    {{/each}}                                </table>'},domEvents:{"click .supp-icon":"onClickSuppCalled","click tr":"onLineClick"},init:function(t){t=t||{},this.collection=t.collection?t.collection:null,this._parent(t),this.newObjects=[],document.body.addEventListener("mousedown",this.clickOutside.bind(this))},setup:function(){var t=this.templateHelpers||(this.templateHelpers={});t.categories=t.categories||this.options.categories||[]},clickOutside:function(t){t.target===this.container||this.container.contains(t.target)||(this.container.removeClassName("highlighted"),this.container.getElement(".highlighted")&&this.container.getElement(".highlighted").removeClassName("highlighted"))},onLineClick:function(t){e.getElement(t).getElement("input").focus()},onFocus:function(t){var i=e.getElement(t),n=i.dataset?i.dataset.category:i.getAttribute("data-category");this.container.getElement(".highlighted")&&this.container.getElement(".highlighted").removeClassName("highlighted"),this.container.getElement("#"+n+"-label").addClassName("highlighted"),this.container.addClassName("highlighted")},onClickSuppCalled:function(t){var i=e.getElement(t);this.removeObject(i.parentElement.dataset.id)},validateSelection:function(t,e){return this.newObjects.map(function(i){i.item===e&&(t=i.selection)}),t=t||n.getUUID()},addObject:function(t,e,i,n,s){t=this.validateSelection(t,i);this.options.allowMultipleCategories||this.removeObject(t);var o=this.autocomplete.getFormattedLabel(i);this.renderOneLabel(t,o,s);var a={selection:t,categoryId:e,prevDistinction:n,item:i};this.newObjects.push(a),this.dispatchEvent("onUpdate",[this.newObjects])},removeObject:function(t){var e,i,n,s,o=this.container.getElement('[data-id="'+t+'"]');if(o){var a=(e=this.newObjects,i="selection",n=t,e.forEach(function(t){t[i]===n&&(s=t)}),s);this.newObjects.splice(this.newObjects.indexOf(a),1),o.remove(),this.dispatchEvent("onUpdate",[this.newObjects])}},renderOneLabel:function(t,e,n){new i("span",{"data-id":t,class:"label-object",html:[{tag:"div",class:"formatted-label",text:e},{tag:"div",class:"supp-icon",html:"&times;"}]}).inject(n,"before")},getJsonObjects:function(){return this.newObjects},attachAutocomplete:function(e,i){var n=this;return t.extend(this.options,{collection:this.collection,container:i,events:{onSelect:function(t,i,s){i&&n.addObject(t,e,i,s,this.getContent())},onFocused:function(t){n.onFocus(t)}},attributes:{"data-category":e}}),this.autocompletes=this.autocompletes||{},this.autocompletes[e]&&this.autocompletes[e].destroy(),this.options.autocompleteExtension?this.autocompletes[e]=new this.options.autocompleteExtension(this.options):this.autocompletes[e]=new o(this.options),this.autocomplete=this.autocompletes[e],this.autocomplete.inject(i)},onRender:function(){for(var t=this.options.categories,e=0;e<t.length;e++)this.attachAutocomplete(t[e].id,this.container.getElement("#"+t[e].id+"-wrapper"))},destroy:function(){this.autocompletes&&Object.keys(this.autocompletes).forEach(function(t){this.autocompletes[t].destroy()},this),this._parent.apply(this,arguments)}})}),define("DS/W3DXComponents/Views/Item/PanelAddMemberView",["UWA/Core","UWA/Element","UWA/Class/View","DS/W3DXComponents/Views/Item/LabelManagerView","DS/UIKIT/Input/Button","i18n!DS/W3DXComponents/assets/nls/Views/Item/PanelAddMemberView","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o){"use strict";var a="paneladdmember-item-view";return i.extend({tagName:"div",className:a+"-container",name:a,labels:[],init:function(t){this.options=t,this.options.saveProcess&&(this.saveProcess=this.options.saveProcess),this.onClose=this.options.onClose?this.options.onClose:function(){},this._parent(t),this.buildSkeleton()},buildSkeleton:function(){this.buildBody(),this.buildButton(),this.container.setHTML([this.elements.labelmanager,this.elements.buttons])},buildButton:function(){var e=this,i=new s({value:o.Add,className:"primary",disabled:!0,events:{onClick:function(){e.onSaveCalled()}}}),n=new s({value:o.Cancel,className:"default",events:{onClick:function(){e.onCancelCalled()}}});this.elements.buttons=t.createElement("div",{class:a+"-buttons"}),this.elements.buttons.save=i,this.elements.buttons.cancel=n,this.elements.buttons.addContent([i,n])},buildBody:function(){var e=this,i=t.extend({spreadClick:!0,events:{onUpdate:function(t){e.elements.buttons.save.setDisabled(t.length<1),e.labels=t}}},this.options);this.addMemberBody=new n(i),this.elements.labelmanager=t.createElement("div",{class:a+"-body",html:this.addMemberBody.render()})},saveProcess:function(t){for(var e=0;e<t.length;e++)this.collection.add({people:t[e].selection,role:t[e].categoryId})},show:function(){this.container.addClassName("expanded")},hide:function(){this.container.removeClassName("expanded")},onSaveCalled:function(){var t=this.labels;this.saveProcess(t),this.resetView()},onCancelCalled:function(){this.resetView()},resetView:function(){this.hide(),this.buildSkeleton(),this.render(),this.onClose()},destroy:function(){this.addMemberBody&&this.addMemberBody.destroy(),this._parent.apply(this,arguments)}})}),define("DS/W3DXComponents/ContentSet",["DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Layout/ListView","DS/W3DXComponents/Views/Layout/TableScrollView","DS/W3DXComponents/Views/Item/SetView","DS/W3DXComponents/Views/Item/TileView","UWA/Core","i18n!DS/W3DXComponents/assets/nls/ContentSet","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a){"use strict";return n.extend({name:"content-set",defaultOptions:{actions:{},switcher:{},detail:{},contents:{defaultView:"thumbnail",views:[{id:"thumbnail",title:a.titleThumbnailView,view:t},{id:"tile",title:a.titleTileView,view:t,itemView:s},{id:"table",title:a.titleTableView,view:i},{id:"list",view:e,selectionMode:"oneToOne"}]}},getSwitcherViewOptions:function(){var t=o.clone(this._parent.apply(this,arguments));return t.buttons.pop(),t},onPositionChange:function(t,e){switch(e){case"left":this.minimize();break;case"right":default:this.maximize()}},onMinimized:function(){this.dispatchEvent("onSwitch",[null,"list"])},onMaximized:function(){var t=this.switcherView.getValue();this.dispatchEvent("onSwitch",[null,t])}})}),define("DS/W3DXComponents/Skeleton",["UWA/Core","UWA/Element","UWA/Utils","UWA/Class/Model","UWA/Class/Collection","UWA/Class/View","UWA/Class/Promise","DS/UIKIT/Mask","DS/UIKIT/Tooltip","DS/W3DXComponents/Views/Layout/PanelSlider/PanelSlider","DS/W3DXComponents/Views/Layout/CardView","DS/W3DXComponents/Views/Layout/ListView","DS/W3DXComponents/Views/Item/TileView","DS/W3DXComponents/Views/Layout/ChannelView","DS/W3DXComponents/Views/Item/SkeletonRootView","DS/W3DXComponents/IdCard","DS/WebAppsFoundations/Router","DS/WebAppsFoundations/AbstractHistory","i18n!DS/W3DXComponents/assets/nls/Skeleton","css!DS/UIKIT/UIKIT.css","css!DS/W3DXComponents/W3DXComponents"],function(t,e,i,n,s,o,a,r,l,c,h,d,u,p,m,f,g,v,w){"use strict";function C(e,i,n){n=t.merge(n||{},{clone:!0});var s=t.is(i,"function")?i.call(null,e):i||{};return n.clone?t.clone(s,!1):s}function S(e,i){var n=[],s=i&&(!t.is(i.cacheFacets)||i.cacheFacets),o=y(e,i);return e._facets?e._facets:(o&&o.facets&&(n=o.facets,t.is(n,"function")&&(n=n.call(e)),s&&(e._facets=n)),n)}function y(e,i){var n,s=e._idCardOptions;return s||(n=i.idCardOptions,s=t.is(n,"function")?n.call(null,e):n||{},e._idCardOptions=s),s}var _,E,b=n.extend({defaults:{renderer:null,id:null,isLoading:!1,isPanelRendered:!1,panelNode:null,isRoot:!1,facetIndex:null,currentPromises:null},getActiveView:function(){var t=this.get("panelNode"),e=t?t.get("activeNode"):null,i=e?e.get("activeFacet"):null;return i?i.view:null},getActiveModel:function(){var t=this.get("panelNode");return t?t.getActiveModel():null},setup:function(){this.set("currentPromises",{})},destroy:function(t){this.get("panelNode")&&this.get("panelNode").destroy(t)}}),D=n.extend({defaults:{nodeCollection:null,activeNode:null,cardView:null},setup:function(t){var e,i=new V;t||(t={}),this.set("nodeCollection",i),t.addNode&&(e=new x,i.add(e),this.set("activeNode",e))},getActiveModel:function(){var t=this.get("activeNode");return t&&t.get("assignedModel")||null},setActiveNode:function(e){var i=this.get("nodeCollection");if(t.is(e,"number")&&(e=i.at(e)),!e||!(e instanceof n)||i.indexOf(e)<0)throw new Error("Node doesn't belong to this collection.");this.set("activeNode",e)},attachNode:function(t){this.get("nodeCollection").add(t)},destroy:function(t){var e=this.get("nodeCollection"),i=this.get("cardView"),n=0,s=[],o=t||{};function a(t){t.forEach(function(t){t.destroy(o)})}e.forEach(function(t){s.push(t),0!==n&&n%3==0?(setTimeout(a(s),0),s=[],n=0):n++}),a(s),i&&(i.destroy(),i=null)}}),x=n.extend({defaults:{assignedModel:null,idCard:null,facets:null,activeFacet:null,isRoot:!1,placeHolder:null},setup:function(t){var e=(t=t||{}).assignedModel,i=e&&e._facetObjs||[];this.set("facets",i),e&&(e._facetObjs=i),this.nodeCollection=new V(t.nodes),this.listenTo(this,"onChange:assignedModel",this.onAssignedModel)},onAssignedModel:function(t,e){if(e){var i=t,n=i.get("facets"),s=e._facetObjs||[];n=n.concat(s),i.set("facets",n),e._facetObjs=n}},destroyFacet:function(e,i,n){var s=t.merge(n||{},{removeFacet:!0}),o=this.get("facets"),a=e.view,r=o.indexOf(e);a&&a.destroy(),t.extend(e,{view:null,viewType:null}),s.deleteRef&&(t.extend(e,{collection:null,reference:null}),s.removeFacet&&o.splice(r,1))},destroyFacets:function(e){var i=t.merge(e||{},{removeFacet:!1}),n=this;n.get("facets").forEach(function(t,e){n.destroyFacet(t,e,i)}),i.deleteRef&&n.set("facets",[])},setActiveFacet:function(t){if(this.get("facets").indexOf(t)<0)throw new Error("Facet does not exist in node.");this.set("activeFacet",t)},getFacet:function(t){var e=t;return this.get("facets").detect(function(t){return t.reference===e})||null},setFacet:function(t,e){var i,n,s=e||{},o=this.get("facets");return i=this.getFacet(this,t),n={viewType:s.viewType||null,collection:null,url:null,index:s.index,view:null,reference:t},i?(this.destroyFacet(o,i,{deleteRef:!0}),i=n):o.push(n),n},destroy:function(e){var i=this.pick(["idCard","facets","assignedModel","placeHolder"]),n=i.idCard,s=i.facets,o=i.placeHolder,a=i.assignedModel,r=e||{};this.destroyFacets(r),o&&(o.destroy(),this.set("placeHolder",null)),n&&(n.destroy(),this.set("idCard",null)),r.deleteRef&&(s.length=0,a&&t.extend(a,{_facets:null,_facetObjs:null}))}}),V=s.extend({model:x,fetch:function(){}}),A={EXPANDED:"expanded",CONTRACTED:"contracted",COLLAPSED:"collapsed"},I=o.extend({tagName:"div",className:"skeleton",elements:null,panelSlider:null,placeHolder:null,rendererMap:null,rootRenderer:null,rootRendererName:null,widthCache:null,heightCache:null,expandedLayout:[{size:25,className:"left"},{size:75,className:"right"}],contractedLayout:[{size:100,className:"left"}],collapsedLayout:[{size:100,className:"right"}],leftColumnMax:400,leftColumnMin:280,leftColumnDefaultRatio:25,cardBuildOffset:5,state:"contracted",slideCb:null,currentRoute:null,currentRouteSteps:null,tempRouteSteps:null,eventList:null,MAX_UNBUILT_DISTANCE:3,defaultOptions:{widthThreshold:560,rootIdCardOptions:null,responsiveTrigger:function(){return!1},minimizeIdCards:!0,height:"100%",startRoute:null,rendererOptions:{collection:s,view:null,swipe:i.Client.Features.touchEvents&&!i.Client.Features.pointerEvents,idKey:null,viewOptions:null,collectionOptions:null,fetchOptions:null,fetchMode:"always",cacheFacets:!0,idCardOptions:null}},init:function(e,i){i||(i={});var n,s=i.rootIdCardOptions;if(!e)throw new Error("Renderer map needs to be specified.");if(s&&(!s.model||!s.facets))throw new Error("If you specify rootIdCardOptions you need to specify a model and facets.");this._parent(i),this.rootRendererName=i.root&&e[i.root]?i.root:Object.keys(e)[0],this.rendererMap=function(e,i){var n,s=Object.keys(e),o={};return s.forEach(function(s){n=t.clone(e[s],!1),o[s]=t.merge(n,i)}),o}(e,this.options.rendererOptions),this.currentRouteSteps=[],this.elements={},this.eventList=[],this.options.startRoute=this.options.startRoute||(this.options.rootIdCardOptions?"/":"/"+this.rootRendererName+"/"),this.history=n=this.options.history||new v,this.router=new g({routes:{"(*path)(/?*)":this.goTo.bind(this)},History:n}),t.is(n.started)&&!n.started&&this.history.start({silent:!0})},render:function(){var t=this.elements;return this.container.addClassName("skeleton-cnt contracted"),t.content=this.container,this.panelSlider||this.buildPanelSlider(),this.router.navigate(this.currentRoute||this.options.startRoute,{trigger:!0}),this},onPostInject:function(){var t=this.elements,e=this.options;if(!t.content)throw new Error("You must render this view before you try to inject it.");this.panelSlider&&(this.placeHolder=this.getContent().getParent(),this.panelSlider.placeHolder=this.placeHolder,this.setHeight(e.height,{shouldCache:!1}),this.initContainerEvents())},goTo:function(e,n){var s=this,o=s.parseRoute(e||"/",s.rendererMap,{rootIdCardOptions:s.options.rootIdCardOptions,defaultRootRenderer:s.rootRendererName}),a=i.parseQuery(n||""),r=a.f||a.facet,l=a.s||a.state,c=o[o.length-1];if(1===o.length&&s.options.rootIdCardOptions&&!c.get("renderer"))c.set("facetIndex",r?parseInt(r):0);else if(r){if(!c.id)throw new Error("Facet index can only be specified after an ID and at the end of a route path.");o.push(new b({facetIndex:r?parseInt(r):0}))}s.mergeRoutes(o,s.currentRouteSteps||[],{state:l}).then(function(t){var e=t.steps,i=t.config,n=s.currentRouteSteps;s.currentRouteSteps=e,s.tempRouteSteps=null,s.currentRoute=s.getRoute(),s.updateStepStates(e,{minimizeIdCards:s.options.minimizeIdCards,addSelectedClass:i.addSelectedClass}),e.length-1==0||s.areStepsEqual(e.length-1,n,e)||s.eventList.push({name:"onItemSelect",args:[e[e.length-1].get("panelNode").getActiveModel()]}),i.notifyPosition&&s.notifyViewsPosition(),i.emptyEventQueue&&s.throwEvents(s.eventList)}).catch(function(e){e||(e=""),s.eventList=[],t.log("Error building route.\n"+e.stack||e)})},throwEvents:function(t){var e,i,n=this;!Array.isArray(t)&&(t=[t]),t.forEach(function(t){e=t.context||n,i=t.args.map(function(t){return t?C(n,t,{clone:!1}):null}),e.dispatchEvent(t.name,i)}),t.length=0},parseRoute:function(e,i,n){n||(n={});var s,o,a,r=[];function l(t){throw new Error(t.msg||'Could not find "'+t.renderer+'" in renderer map while parsing route: /'+e+"/.")}function c(e){e||l({renderer:e}),a=r[r.length-1],!function(e){return!t.is(i[e])}(e)?r.push(new b({renderer:e})):(o=e,(!a&&0!==h||a&&a.id)&&l({renderer:e}),a?a.set("id",o):0===h&&l({msg:"You cannot specify an ID directly at the root."}))}if(s=(e=e.trim().replace(/^\/|\/$/g,"")).split("/"),!e)return n.rootIdCardOptions?r.push(new b):r.push(new b({renderer:n.defaultRootRenderer})),r;for(var h=0,d=s.length;h<d;h++)c(s[h]);return r},stringifySteps:function(e,n){n||(n={});var s="";return e.forEach(function(n,o){var a=n.id||null,r=n.get("renderer"),l=n.get("facetIndex"),c=t.is(l);s+="/",r&&(s+=r+"/",s+=a||""),e.length-1===o&&(s+=c?"?"+i.toQueryString({f:l}):"")}),n.state&&(s+=(s.indexOf("?")<0?"?":"&")+i.toQueryString({s:n.state})),s},getFacetIndex:function(t,e){for(var i,n,s=0,o=e.length;s<o;s++)if(n=(i=e[s]).handler._opts,i&&t===n.rendererRef)return s},selectFacet:function(e,i,n,s){s||(s={});var o,r,l=this,c=i[e],h=c.get("panelNode"),d=s.node||h.get("activeNode"),u=d.get("placeHolder"),p=d.get("assignedModel"),m=s.idCard||l.getIdCardAt(e),f=c.get("renderer"),g=n[f],v=c.get("facetIndex"),w={steps:i,stepIndex:e,node:d,placeHolder:u};if(0!==e||m){if(o=S(p,g),f?(r=f,v=l.getFacetIndex(f,o)):t.is(v)&&(r=o[v=Math.min(o.length-1,v)]&&o[v].handler._opts.rendererRef),!r)return a.resolve();t.merge(t.merge(w,{facetIndex:v,rendererRef:r}),o[v]?o[v].handler._opts:{})}else t.merge(w,{key:"_modelKey",fetchOptions:g.fetchOptions?t.clone(g.fetchOptions,!1):null,rendererRef:f});return(m&&m.getContent()?(m.selectFacet(v,{silent:!0}),a.resolve()):a.resolve()).then(l.loadFacet.bind(l,w)).then(function(t){var e,i,n=t.facet,s=l.getState(),o=t.steps,r=n.view,c=d.get("activeFacet").view===r,h=[];if(r)return!c&&l.hideFacet(n,{notify:!1}),r.getContent().isInjected()||(r.inject(u),c&&l.showFacet(n)),s===A.EXPANDED?t.stepIndex===o.length-1?h.push({name:"onPositionChange",args:[s,"right"],context:r}):h.push({name:"onPositionChange",args:[s,"left"],context:r}):h.push({name:"onPositionChange",args:[s,null],context:r}),e=l.getViewAt(o.length-1)?l.getViewAt(o.length-1).getContent():null,i=l.getViewAt(o.length-2)?l.getViewAt(o.length-2).getContent():null,s===A.EXPANDED?e&&i&&e.isInjected()&&i.isInjected()&&h.push({name:"onRouteChange",args:[l.getRoute(),l]}):e&&e.isInjected()&&h.push({name:"onRouteChange",args:[l.getRoute(),l]}),l.throwEvents(h.concat(l.eventList||[])),a.resolve()}).catch(l.treatError.bind(l)),a.resolve()},areStepsEqual:function(t,e,i){var n,s,o=e[t],a=e[t-1],r=i[t],l=i[t-1],c=["id","renderer"],h=!1;return o&&r&&(o.pick(c),r.pick(c),n=a?a.pick(c):{},s=l?l.pick(c):{},h=n.id&&s.renderer&&n.id===s.id&&n.renderer===s.renderer||0===t),h},updateStepStates:function(e,i){var n,s,o,a,r,l,c=this;i=t.merge(i||{},{minimizeIdCards:!0,addSelectedClass:!1});e.forEach(function(t,h){n=t.get("panelNode"),s=n&&n.get("cardView"),o=c.getIdCardAt(h),l=e[h+1],a=t.getActiveView(),r=l?l.getActiveModel():null,t.id,h!==e.length-1?(s&&s.mute(),i.minimizeIdCards&&o&&o.minimize(),i.addSelectedClass&&a&&r&&c.selectItemView(r,a)):s&&s.unMute()}),c.adaptRootView(),(o=c.getIdCardAt(e.length-1))&&o.maximize()},destroySteps:function(t,e){e||(e={});for(var i=e.from||0,n=e.to||t.length;i<n;i++)t[i]&&t[i].destroy({deleteRef:!0});return Array.isArray(e.oldSteps)&&e.oldSteps.forEach(function(t){t.destroy({deleteRef:!0})}),a.resolve()},mergeRoutes:function(e,i,n){n||(n={});var s,o,r,l,c,h,d,u,p,m=this,f=m.MAX_UNBUILT_DISTANCE,g=0,v=0,w=i.length-1,C=e.length-1,S=0,y=[],_={},E=[];function b(t,i){for(var n=[],s=t,o=i;s<=o;s++)n.push(m.renderStep(s,e));return a.all(n)}function D(t,e){var i,n,s,o,a,r,l=!1,c=["facetIndex","renderer"];return t&&e&&(i=t.pick(c),n=e.pick(c),s=i.renderer,o=n.renderer,a=i.facetIndex,r=n.facetIndex,l=s&&o?s===o:a===r),l}for(;v<=C;v++){var x;s=i[v],o=e[v],h=m.areStepsEqual(v,e,i),r=s&&s.get("renderer"),l=o&&o.get("renderer"),h&&!s.get("isPanelRendered")||!h?(!t.is(p)&&(p=v),g++,h?o.set(s.pick(["panelNode","currentPromises","isRoot"])):s&&s.get("isPanelRendered")&&(x=s)&&E.push(x),o.set("isLoading",v>=e.length-m.expandedLayout.length),o.set("isPanelRendered",!1)):(r&&l&&r!==l&&(w!==C||v!==C)&&y.push(v),e[v].set(s.pick(["isLoading","isPanelRendered","isRoot","currentPromises","panelNode"])))}return S=v-1,m.tempRouteSteps=e,y.forEach(function(t){var i,n,s,o=e[t],a=o.get("panelNode");o.get("isPanelRendered")&&(n=(i=a.get("activeNode")).setFacet(""),s=e[t].getActiveView(),m.switchFacets(n,i.get("activeFacet"),{notify:!1}),i.setActiveFacet(n),s&&(m.eventList.push({name:"onFacetUnselect",args:[m],context:s}),m.deSelectItemView(s)))}),0===p&&0===C||Math.abs(p-C)>=f&&p>0?u=0===S?(m.getState()!==A.CONTRACTED?m.setContractedLayout({index:S}):a.resolve()).then(m.renderStep.bind(m,S,e)):m.doSliderAction("slideTo",m[m.getState()+"Layout"].length-1,{doSlide:!1}).then(function(){e[0].set({isPanelRendered:!1,isLoading:!1}),E.push(e[0])}).then(b.bind(m,Math.max(S-1,0),S)):C===w&&m.areStepsEqual(C,e,i)&&m.areStepsEqual(Math.max(C-1,0),e,i)&&(t.is(e[S].get("facetIndex"))||e[S].get("renderer"))&&!D(e[S],i[S])?u=m.selectFacet(C,e,m.rendererMap):0===g&&C>=0&&C!==w&&e.length!==i.length-1?(_.notifyPosition=!0,_.emptyEventQueue=!0,m.getViewAt(S)&&m.eventList.push({name:"onRouteChange",args:[m.getRoute(),m]}),m.deSelectItemView(m.getViewAt(S)),u=0===C&&m.state===A.EXPANDED?m.setContractedLayout({index:S,animate:!1}):m.doSliderAction("slideTo",S,{animate:!1})):e.length===i.length-1&&m.areStepsEqual(C,e,i)?(_.notifyPosition=!0,_.emptyEventQueue=!0,S=Math.max(S-1,0),d=m.panelSlider.getPanels().length-2,m.deSelectItemView(m.getViewAt(e.length-1)),m.getViewAt(d)&&m.eventList.push({name:"onRouteChange",args:[m.getRoute(),m]}),u=(e[S].get("isPanelRendered")?a.resolve({doSlide:!0}):m.doSliderAction("insertPanel",null,d,{resize:!0,animate:!0}).then(function(){return a.resolve({doSlide:!1})})).then(function(t){return t||(t={}),0===C&&m.state===A.EXPANDED?m.setContractedLayout({index:S}).then(m.renderStep.bind(m,S,e)):t.doSlide?m.doSliderAction("slideBack").then(m.renderStep.bind(m,S,e)):m.renderStep(S,e)})):m.areStepsEqual(w,i,e)&&C===w+1?(c=m.calculateLayout(),_.addSelectedClass=!0,m.eventList.push({name:"onPositionChange",args:[A.EXPANDED,c===A.EXPANDED?"left":null],context:e[w].getActiveView()}),u=m.state===A.CONTRACTED&&c===A.EXPANDED?m.renderStep(S,e).then(function(t){return m.setExpandedLayout().then(function(){return a.resolve(t)})}):m.renderStep(S,e).then(function(t){return m.doSliderAction("slideNext").then(function(){return a.resolve(t)})})):w===C&&!m.areStepsEqual(S,e,i)&&m.areStepsEqual(S-1,e,i)?(_.addSelectedClass=!0,u=m.renderStep(S,e)):m.areStepsEqual(S,e,i)&&D(e[S],i[S])&&C===w&&n.state?(_.notifyPosition=!0,_.emptyEventQueue=!0,c=m.calculateLayout(),u=(n.state===A.COLLAPSED?m.setCollapsedLayout():c===A.CONTRACTED?m.setContractedLayout():m.setExpandedLayout()).then(function(){return m.getViewAt(S)&&m.eventList.push({name:"onRouteChange",args:[m.getRoute(),m]}),a.resolve()})):(_.addSelectedClass=!0,u=w>C&&m.panelSlider.getPanels().length>C?m.doSliderAction("slideTo",S).then(b.bind(m,Math.max(S-1,0),S)):b(Math.max(S-1,0),S).then(function(t){var i=m.getRenderedPanelsCount(e,{limit:S}),s=function(){return a.resolve(t)};return n.state===A.COLLAPSED?m.setCollapsedLayout({steps:e,force:!0,index:i,animate:!1}).then(s):m.getState()!==A.EXPANDED?m.setExpandedLayout({animate:!1,index:i}).then(s):m.doSliderAction("slideTo",i,{doSlide:!1}).then(s)})),u.then(function e(i){return t.is(i,"array")?a.all(i.map(e)):i&&i.render?i.render():a.resolve()}).then(function(){return y.forEach(function(t){m.selectFacet(t,e,m.rendererMap)}),a.resolve()}).then(function(){return m.destroySteps(i,{from:v,oldSteps:E}),a.resolve()}).then(function(){return a.resolve({steps:e,config:_})}).catch(m.treatError.bind(m))},deSelectItemView:function(e){e&&(t.is(e.removeSelectedClasses,"function")?e.removeSelectedClasses():t.is(e.unSelectAll,"function")&&(t.log("Skeleton: 'unSelectAll' is deprecated in favor of 'removeSelectedClasses'."),e.unSelectAll()))},selectItemView:function(e,i){i&&(t.is(i.addSelectedClass,"function")?i.selectItemView(e):t.is(i.selectItemView,"function")&&(t.log("Skeleton: 'unSelectAll' is deprecated in favor of 'removeSelectedClasses'."),i.selectItemView(e,{silent:!0,trigger:!1})))},doSliderAction:function(e){var i=arguments,n=this.panelSlider,s=e;return[].splice.call(i,0,1),t.is(i[i.length-1],"object")||[].push.call(i,{}),new a(function(t){i[i.length-1].callback=t,n[s].apply(n,i)})},selectItem:function(e){var i;this.panelSlider.isMuted()||(i=this.getCollectionAt(this.currentRouteSteps.length-1))&&(e instanceof n&&i.get(e)?this.onItemViewSelect(e):t.is(e,"number")&&(e=i.at(e))&&this.onItemViewSelect(e))},getRenderedPanelsCount:function(e,i){i||(i={});for(var n,s=0,o=0,a=t.is(i.limit)?i.limit:e.length;o<a;o++)((n=e[o]).get("isPanelRendered")||n.get("isLoading"))&&s++;return s},renderStep:function(t,e){var i,n,s=e[t],o=this.panelSlider,r=o.getPanels(),l=this.getRenderedPanelsCount(e,{limit:t});if(!s.get("isPanelRendered")||s.get("isLoading"))return s.set("isPanelRendered",!0),r[l]?(n=l,s.set("isLoading",!1),i=this.loadPanel(t,e,o.getPanel(n)||n)):(n=l,i=this.doSliderAction("insertPanel",null,n).then(function(){return s.set("isLoading",!1),a.resolve()}).then(this.loadPanel.bind(this,t,e,o.getPanel(n)||n))),i},getCollectionAt:function(t){var e=this.getNodeAt(t),i=e?e.get("activeFacet"):null;return i?i.collection:null},treatError:function(e){if(e){t.log("Error: "+(e.reason||e)+(e.reason&&e.reason.stack?"\n"+e.reason.stack:""));var i,n=e.steps,s=e.stepIndex||0,o=[];this.eventList=[];for(var r=0,l=s;r<l;r++)o.push(n[r].clone());return this.destroySteps(o,e.stepIndex),(i=o[o.length-1])?(i.set("id",null),this.router.navigate(this.stringifySteps(o,{rootIdCardOptions:this.options.rootIdCardOptions}),{trigger:!0})):this.router.navigate(this.options.rootIdCardOptions?"/":"/"+this.rootRendererName+"/",{trigger:!0}),a.reject()}},loadPanel:function(e,i,n){var s,o,r,l,c,h=this,d=h.rendererMap,u=i[e],p=i[e-1],m=p?d[p.get("renderer")]:null,f=p?p.get("currentPromises"):null,g=h.panelSlider;function v(e){var i,n,s,o=e.collection,a=f.fetchCollection;return(i=l.get("activeNode").getFacet(p.get("renderer")))||(i=l.get("activeNode").setFacet(p.get("renderer"))),s=t.merge({_modelId:p?p.get("id"):null},C(null,m.collectionOptions)),n=i.collection||h.createCollection(null,o,s),i.collection=n,f.fetchCollection=a=a||h.doCollectionAction("fetch",n,C(null,m.fetchOptions)),a}function w(s){var o,l,c,f,v,w=r.get("activeNode"),C={};if(s){if(v=m,!(s.length>0))return a.reject({stepIndex:e,steps:i,reason:"Collection is empty."});if(l=s.model,f=p.id,C[v.idKey||l&&l.prototype.idAttribute||"id"]=f,!(o=s.findWhere(C)))return a.reject({stepIndex:e,steps:i,reason:"Model with id '"+f+"' was not found."});w.set("assignedModel",o)}else 0===e&&(w.set("isRoot",!0),r.set("isRoot",!0),v=d[u.get("renderer")]);return r.attachNode(w),c=h.buildPanelContent({node:w,renderer:v,stepIndex:e,step:u,steps:i,parentCollection:s}),t.is(n,"element")?n.setContent(c.el):g.addPanel(c.el,n),r.setActiveNode(w),u.set("currentPromises",{}),p&&p.set("currentPromises",{}),a.resolve(c)}return(r=u.get("panelNode"))||(r=new D({addNode:!0}),u.set("panelNode",r)),p&&!p.get("panelNode")?(l=new D({addNode:!0}),p.set("panelNode",l)):p&&(l=p.get("panelNode")),c=(s=l?l.get("activeNode"):null)?s.get("activeFacet")||s.get("facets")[0]:null,o=c?c.collection:null,new a(function(t,i){return 0===e||o?w(o).then(t).catch(i):(n=f.loadCollection,f.loadCollection=n=n||(m?h.getRendererModules(m,["collection"]):null),n).then(v).then(w).then(t).catch(i);var n})},getFacet:function(e){var i=e.node,n=e.rendererRef,s=i.get("activeFacet"),o=i.getFacet(n);return o||(o=i.setFacet(n,{index:e.facetIndex||0})),s===o?(s.view&&this.throwEvents({name:"onFacetSelect",context:s.view,args:[this]}),a.reject("Facet is already selected.")):(o.view?this.switchFacets(o,s,[this]):s&&this.hideFacet(s),a.resolve(t.merge(e,{facet:o})))},renderFacet:function(e){var i,n,s,o,r=this,l=e.rendererRef,c=e.node.get("assignedModel"),h=e.facet,u=e.rendererModules,p=e.steps[e.stepIndex],f=u.collection,g=t.merge(C(c,e.viewOptions),{model:c}),v=r.rendererMap[l],w=r.options,S=v?v.fetchMode||"once":null;function y(){return a.resolve(t.merge({fetchArgs:arguments},e))}function _(){t.is(l,"string")&&v?(p.set("renderer",l),p.set("facetIndex",null)):(p.set("renderer",""),p.set("facetIndex",e.facetIndex))}function E(){return"never"!==S&&("once"===S&&0===n.length||"always"===S)&&r.doCollectionAction("fetch",n,C(c,v.fetchOptions)),a.resolve()}return h.view?((n=h.view.collection)&&"always"===S&&(s=E().then(y)),_(),s||a.resolve(e)):(t.is(g.itemView,"string")&&t.log("Warning: If the view options contain an item view as an AMD module it will not be loaded dynamically by the skeleton."),t.is(l,"string")&&v?(o=u.view||(0===e.stepIndex?m:d),g=t.merge(0===e.stepIndex?{defaultView:w.useRootChannelView?"channel":"tile"}:{},t.merge(g,C(c,v.viewOptions))),(i=C(c,v.collectionOptions))[e.key]=c||null,h.collection=n=h.collection||r.createCollection(c,f,i),h.view=r.createCollectionView(o,t.extend({collection:n},g)).render(),r.initCollectionViewEvents(h.view),s=E().then(y)):((o=u.view)&&(h.view=r.createDetailView(o,g),h.view.render()),s=a.resolve(t.merge(e))),_(),s)},setActiveFacet:function(t){var e=t.node,i=t.facet;return e.setActiveFacet(i),a.resolve(t)},loadFacet:function(e){var i=this,n=i.rendererMap,s=e.node,o=e.rendererRef,l=s.get("assignedModel"),c=e.placeHolder,h=n[o];if(!l)throw new Error("Cannot load facet of uninitialized node");if(e.adaptableView)throw new Error("Adaptable view no longer supported, you should create a parent view that manages both subviews.");return r.mask(c),i.getFacet(e).then(i.setActiveFacet.bind(i)).then(function(e){return e.facet.view?a.resolve(e):h?t.is(o,"string")&&h?i.getRendererModules(h,["view","collection"]):void 0:i.getRendererModules({view:o},["view"])}).then(function(i){return r.unmask(c),a.resolve(t.merge({rendererModules:i},e))}).then(i.renderFacet.bind(i)).then(function(t){var e,s=t.steps[t.stepIndex],o=t.facet.view,r=n[s.get("renderer")]||{},l=s.id,c=o.collection;return o&&c&&l&&((e={})[r.idKey||c.model.prototype.idAttribute||"id"]=l,0===c.length?c.addEventOnce("onSync",function(){i.selectItemView(c.findWhere(e),o)}):i.selectItemView(c.findWhere(e),o)),a.resolve(t)}).catch(function(i){return a.reject(i&&i.reason?i:t.merge(e,{reason:i}))})},getRendererModules:function(e,i){var n,s,o={},r=[],l=[];return i||(i=[]),i.forEach(function(i){var n=e[i];switch(t.typeOf(n)){case"string":r.push(n),l.push(i);break;case"class":case"function":o[i]=n;break;default:o[i]=null}}),(n=r,s=[],t.is(n,"string")?s[0]=n:s=n,new a(function(t,e){require(s,function(){t.call(null,Array.prototype.slice.call(arguments))},function(t){e("Error loading modules."+(t&&t.requireModules?t:""))})})).then(function(t){return Array.prototype.forEach.call(t,function(t,e){t&&(o[l[e]]=t)}),a.resolve(o)})},buildPanelSlider:function(){var t=new c([],{layout:[{size:1,className:"left"}],container:this.getContent(),events:{onSlideNext:this.onSlideEnd.bind(this,"right"),onSlideBack:this.onSlideEnd.bind(this,"left")}});t.render(),this.panelSlider=t},onSlideEnd:function(t){var e=this,i=e.getSteps();function n(t){var i;switch(e.getState()){case A.EXPANDED:i=e.expandedLayout.length;break;case A.COLLAPSED:i=e.collapsedLayout.length;break;case A.CONTRACTED:i=e.contractedLayout.length}return t.call(e,i-1)}switch(t){case"left":e.eventList.push({name:"onSlide",args:[n.bind(e,e.getViewAt),n.bind(e,e.getModelAt),"left"]});break;case"right":e.eventList.push({name:"onSlide",args:[e.getViewAt.bind(e,i.length-1),e.getModelAt.bind(e,i.length-1),"right"]})}},onActionClick:function(t,e,i){var n=Array.prototype.slice.call(arguments,3),s=this.getNodeAt(e);n.unshift(this.getViewAt(e),this),i.apply(s.get("idCard"),n)},onFacetClick:function(t){var e=Array.prototype.slice.call(arguments,0,0);e=e.concat(Array.prototype.slice.call(arguments,1)),t.apply(this,e)},wrapActionFunction:function(t,e,i){var n=this,s=t,o=i;return function(){var t,i=s.call(e.get("assignedModel"),arguments);return i&&Array.isArray(i)&&(t=n.wrapActions(i,e,o)),t}},wrapFacetFunction:function(t,e){var i=this,n=e,s=n.node;return function(){var e,o=s.get("assignedModel"),a=o._facets||t.call(o,arguments);return a&&Array.isArray(a)&&(e=i.wrapFacets(a,n)),e}},wrapFacets:function(e,i){var n=this;return e.map(function(e,s){var o=t.clone(e.handler),a=t.clone(i,!1);return t.merge(a,{facetIndex:s}),t.merge({handler:o?n.onFacetClick.bind(n,o,a):null},e)})},wrapActions:function(e,i,n){var s=this;return e.map(function(e){var o=t.clone(e.handler);return t.merge({handler:s.onActionClick.bind(s,i.model,n,o)},e)})},createIdCard:function(e,i,n,s,o){var a,r=t.clone(o,!1)||{},l=r.actions,c=r.facets;return r.model=e.get("assignedModel"),r.selectedFacet=null,Array.isArray(l)?r.actions=this.wrapActions(l,e,n):t.is(l,"function")&&(a=t.clone(r.actions),r.actions=this.wrapActionFunction(a,e,n)),Array.isArray(c)?r.facets=this.wrapFacets(c,{node:e,placeHolder:i,stepIndex:n,steps:s}):t.is(c,"function")&&(a=t.clone(r.facets),r.facets=this.wrapFacetFunction(a,{node:e,placeHolder:i,stepIndex:n,steps:s})),new f(r)},buildPanelTitle:function(e,i){return t.createElement("div",{class:this.className+"-id-cnt",html:[i]})},initCollectionViewEvents:function(t){t.addEvent("onItemViewSelect",this.onItemViewSelect.bind(this))},initContainerEvents:function(){e.addEvent.call(this.container,"resize",this.onResize.bind(this)),this.panelSlider._removeEvents()},getModelPosition:function(t){for(var e,i,n,s=0,o=this.currentRouteSteps,a=o.length;s<a&&(n=(i=o[s]).get("panelNode"),!i.get("isPanelRendered")||!n||(e=n.get("activeNode").get("activeFacet")).collection!==t.collection);s++);return{panelIndex:s,facet:e}},notifyViewsPosition:function(){var t,e,i=this.currentRouteSteps.length-1,n=this.getState();n===A.EXPANDED?(t=this.getViewAt(i-1),e=this.getViewAt(i),t&&this.eventList.push({name:"onPositionChange",args:[n,"left"],context:t}),e&&this.eventList.push({name:"onPositionChange",args:[n,"right"],context:e})):(t=this.getViewAt(i))&&this.eventList.push({name:"onPositionChange",args:[n,null],context:t})},switchViews:function(t,e){t.getContent().addClassName("push"),e.getContent().removeClassName("push")},createCollectionView:function(t,e){return new t(e)},createDetailView:function(t,e){return new t(e)},buildPanelContent:function(t){var e=t.node,i=t.renderer,n=this.buildNodeContent(t);return{el:[this.buildPanelControls(e),i&&i.swipe&&t.parentCollection?this.createCardView(n.el,t):n.el],render:n.render}},buildPanelControls:function(){var e,i,n=this,s=t.createElement;return e=s("div",{class:"fonticon fonticon-clickable fonticon-left-open skeleton-ctrl-back",events:{click:function(){n.slideBack(),_.hide()}}}),i=s("div",{class:"fonticon fonticon-clickable  fonticon-expand-collapse-panel  skeleton-ctrl-collapse",events:{click:function(){n.toggleCollapse(),E.hide()}}}),_&&_.destroy(),_=new l({position:"right",target:e,body:w.backIcon,offset:{x:0,y:0}}),E&&E.destroy(),E=new l({position:"bottom",target:i,body:w.collapseIcon,offset:{x:0,y:0}}),s("div",{class:"skeleton-ctrl",html:[e,i]})},buildNodeContent:function(e){var i,s,o,a,r=this,l=r.options,c=e.node,h=e.stepIndex,d=e.steps,u=e.renderer,p=t.createElement,m=p("div",{class:"skeleton-panel"}),f=p("div",{class:"facetviews"}),g="If you specify rootIdCardOptions you need to specify a model and facets.";if(0===h)if(l.rootIdCardOptions){if(!(s=y(a={},{idCardOptions:l.rootIdCardOptions})).facets)throw new Error(g);if(!s.model)throw new Error(g);i=s.model,t.extend(i,a),c.set("assignedModel",i),o=r.createIdCard(c,f,h,d,s),c.set("idCard",o),r.buildPanelTitle(c,o).inject(m)}else r.buildPanelTitle(c,null).inject(m),c.set("assignedModel",new n);else i=c.get("assignedModel"),s=y(i,u),o=r.createIdCard(c,f,h,d,s),c.set("idCard",o),r.buildPanelTitle(c,o).inject(m);return f.inject(m),c.set("placeHolder",f),{el:m,render:function(){var e=t.merge({},{idCard:s?o:null,node:c});return r.selectFacet(h,d,r.rendererMap,e)}}},createCardView:function(e,i){var n,s,o=(i=t.clone(i,!1)).step,a=i.parentCollection,r=o.get("panelNode"),l=r.get("cardView"),c=r.get("activeNode").get("assignedModel"),d=a.indexOf(c),u=this.cardBuildOffset;return l&&l.destroy(),s=Math.min(u,d),(n=function(t,e){for(var i=[];t<e;t++)a.at(t)&&i.push(null);return i}(d-u,d+u))[s]=e,(l=new h(n,{index:s,events:{onShowCard:this.onShowCard.bind(this,i,d),onStartDrag:this.onStartDrag.bind(this,i),onEndDrag:this.onEndDrag.bind(this,i)}})).render(),r.set("cardView",l),l},onShowCard:function(t,e,i,n,s){if(n._dragEvent){var o,a,r=t.parentCollection,l=n._dragEvent,c=l.ghostContent,h=l.nextModelIndex,d=r.at(h),u=l.direction,p=s.index,m=this.cardBuildOffset;(o=this.getViewAt(t.steps.length-2))&&o.selectItemView&&o.selectItemView(d,{silent:!0}),c&&c.content.render(),"right"===u?(a=f(h-m,h),i.addCards(a,{where:"before"})):(a=f(h+1,h+m),i.addCards(a)),this.dispatchEvent("onItemSelect",d),delete n._dragEvent}function f(t,e){for(var n,s=[],o=t,a=e;o<a;o++)n=o-h+p,r.at(o)&&!i.getCardAt(n)&&s.push(null);return s}},onStartDrag:function(t,e,i,n){var s,o,a,r,l,c=t.step,h=t.parentCollection,d=c.get("panelNode"),u=d.get("activeNode"),p=h.indexOf(u.get("assignedModel")),m=this.getDragNextIndex(p,n),f=m.nextModelIndex,g=m.nextCardIndex;f<0||p<0||(s=h.at(f))&&(r=d.get("nodeCollection").findWhere({assignedModel:s}),l={currModelIndex:p,nextModelIndex:f,nextCardIndex:g,ghostContent:null,direction:n.direction,collection:h},r?l.newActiveNode=r:(o=new x({assignedModel:s}),t.node=o,a=this.buildNodeContent(t),e.setCardContent(a.el,g),l.ghostContent={node:o,content:a}),i._dragEvent=l)},onEndDrag:function(t,e,i,n){if(i._dragEvent){var s,o,a,r=n.didSnap,l=i._dragEvent,c=t.step.get("panelNode"),h=l.ghostContent,d=h?h.node:l.newActiveNode;r?(a=d.get("assignedModel"),c.attachNode(d),c.setActiveNode(d),(s=this.currentRouteSteps[t.stepIndex-1])&&(o=this.rendererMap[s.get("renderer")],s.set(s.idAttribute,a.get(o.idKey||a.idAttribute||"id")))):c.get("nodeCollection").get(d)||d.destroy()}},getDragNextIndex:function(t,e){var i,n;return"left"===e.direction?(n=t+1,i=e.index):(n=t-1,i=e.index-1),{nextCardIndex:i,nextModelIndex:n}},doCollectionAction:function(e,i,n){return n||(n={}),new a(function(s){i[e](t.merge({onComplete:function(){s.apply(null,arguments),n.onComplete&&n.onComplete.apply(null,arguments)},onFailure:function(){s.apply(null,arguments),n.onFailure&&n.onFailure.apply(null,arguments)}},n))})},createCollection:function(t,e,i){return new e(null,i)},onItemViewSelect:function(){var e,i,n,s,o,a,r,l,c=arguments[arguments.length-1],h=c.model||c,d=this.getModelPosition(h).panelIndex,u=this.expandedLayout.length,p=this.getModelAt(d+1);if(!this.panelSlider.isMuted())if(s=this.currentRouteSteps.map(function(t){return t.clone()}),p&&(h===this.getModelAt(d+1)||p.id&&h.id&&p.id===h.id))this.throwEvents({name:"onFacetSelect",args:[this],context:this.getViewAt(d+1)});else{if(d===s.length-u&&(e=s[d+1],s.pop()),n={facetIndex:0},o=s[d],l=S(h,a=this.rendererMap[o.get("renderer")]),!(i=h.get(a.idKey||h.idAttribute||"id")))throw new Error("Every model must specify an ID, either through the 'id' property of the model or the one specified by the 'idKey' property of the renderer.");0!==l.length?(o.set(o.idAttribute,i),s.splice(d+1,s.length-1,new b(n)),r={rootIdCardOptions:this.options.rootIdCardOptions,state:this.getState()===A.COLLAPSED?A.COLLAPSED:null},this.router.navigate(this.stringifySteps(s,r),{trigger:!0}),e&&setTimeout(e.destroy.bind(e),0)):t.log("It is not possible to select an item that has no facets.")}},calculateLayout:function(e){var i=e||{},n=t.is(i.respTrigger)?i.respTrigger:this.callResponsiveTrigger(),s=this.options;return(i.width||this.widthCache||this.container.getDimensions().innerWidth)>=s.widthThreshold||n?A.EXPANDED:A.CONTRACTED},onResize:function(t){var e,i,n,s=this,o=t||{},r=s.container.getDimensions().innerWidth,l=s.currentRouteSteps,c=s.panelSlider,h=s.state;if(0!==r&&s.widthCache!==r||o.force){if(s.widthCache=r,c._cachedWidth=r,n=s.callResponsiveTrigger(),i=s.calculateLayout({respTrigger:n}),s.adaptRootView({respTriggerOutput:n}),s.state===A.COLLAPSED||l.length<=1)return void c.refresh();switch(i){case A.EXPANDED:e=s.setExpandedLayout({animate:!1});break;case A.CONTRACTED:e=s.state!==A.CONTRACTED?s.setContractedLayout({animate:!1}):s.doSliderAction("refresh")}return e.then(function(){return h!==s.state&&s.notifyViewsPosition(),a.resolve()})}},callResponsiveTrigger:function(t){return this.options.responsiveTrigger.call(this,{state:t||this.state})},adaptRootView:function(t){var e=this.options,i=(t||{}).respTriggerOutput||this.callResponsiveTrigger(),n=e.useRootChannelView,s=this.currentRouteSteps.length-1,o=this.getViewAt(0);n&&0===s&&o&&o.switchView&&(i?o.switchView("tile"):o.switchView("channel"))},setExpandedLayout:function(t){var e=this,i=t||{},n=e.elements.content,s=e.widthCache||e.container.getDimensions().innerWidth,o=.25*s,r=e.expandedLayout[0].size,l=e.leftColumnMin,c=e.leftColumnMax,h=e.leftColumnDefaultRatio;return r=o<=l?l/s*100:o>=c?c/s*100:h,e.expandedLayout[0].size=r,e.expandedLayout[1].size=100-r,e.doSliderAction("setLayout",e.expandedLayout,i).then(function(){return n.removeClassName(A.CONTRACTED),n.removeClassName(A.COLLAPSED),n.addClassName(A.EXPANDED),e.state=A.EXPANDED,a.resolve()})},setContractedLayout:function(t){var e=this,i=e.elements.content,n=t||{};return e.doSliderAction("setLayout",e.contractedLayout,n).then(function(){return i.removeClassName(A.EXPANDED),i.removeClassName(A.COLLAPSED),i.addClassName(A.CONTRACTED),e.state=A.CONTRACTED,a.resolve()})},slideBack:function(){var t,e;this.panelSlider.isMuted()||1===this.currentRouteSteps.length||((e=this.currentRouteSteps.map(function(t){return t})).pop(),(t=e[e.length-1])&&t.set("id",null),this.router.navigate(this.stringifySteps(e,this.options),{trigger:!0}))},setCollapsedLayout:function(e){e||(e={});var i=this,n=i.elements.content,s=e.steps||i.currentRouteSteps,o=i.collapsedLayout;return i.panelSlider.isMuted()||s.length<=1||i.state===A.CONTRACTED&&t.is(e.force)&&!e.force?a.resolve():(i.state!==A.COLLAPSED?i.doSliderAction("setLayout",o,e).then(function(){return n.removeClassName(A.EXPANDED),n.removeClassName(A.CONTRACTED),n.addClassName(A.COLLAPSED),i.state=A.COLLAPSED,a.resolve()}):a.resolve()).catch(function(e){t.log("Skeleton: Error modifying collapsed layout "+(e?e.stack||e:""))})},toggleCollapse:function(){this.router.navigate(this.stringifySteps(this.currentRouteSteps,{rootIdCardOptions:this.options.rootIdCardOptions,state:this.getState()===A.COLLAPSED?"auto":A.COLLAPSED}),{trigger:!0})},getViewAt:function(t){var e=this.getSteps(),i=e[t]?e[t].get("panelNode"):null,n=i?i.get("activeNode"):null,s=n?n.get("activeFacet"):null,o=s?s.view:null;return s?o:null},getNodeAt:function(t){var e=this.getSteps(),i=e[t]?e[t].get("panelNode"):null;return i?i.get("activeNode"):null},getIdCardAt:function(t){var e=this.getNodeAt(t);return e?e.get("idCard"):null},getModelAt:function(t){var e=this.getNodeAt(t);return e?e.get("assignedModel"):null},getCurrentPanelIndex:function(){return this.getSteps().length-1},setHeight:function(e,i){var n=this.getContent(),s=t.merge(i||{},{shouldCache:!0});if(!n)throw new Error("Content has not yet been created.");switch(this.heightCache=s.shouldCache?e:this.heightCache,t.typeOf(e)){case"string":n.setStyle("height",e);break;case"number":n.setStyle("height",e+"px")}},getState:function(){return this.state},getSkeletonState:function(){return t.log("Skeleton: `getSkeletonState` is deprecated, use `getState` instead."),this.getState.apply(this,arguments)},getSteps:function(){return this.tempRouteSteps||this.currentRouteSteps},getRoute:function(){var t=this.getState();return this.stringifySteps(this.getSteps(),{rootIdCardOptions:this.options.rootIdCardOptions,state:t===A.COLLAPSED?t:null})},setRoute:function(t){this.router.navigate(t,{trigger:!0})},getActiveIdCard:function(){var t=this.getNodeAt(this.getSteps().length-1);return t?t.get("idCard"):null},refresh:function(){this.onResize({force:!0})},hideFacet:function(e,i){if(e){var n=i||{},s=e.view,o=!t.is(n.notify)||n.notify;s&&(s.getContent().hide(),o&&this.throwEvents({name:"onFacetUnselect",args:[this],context:s}))}},showFacet:function(e,i){if(e){var n=i||{},s=e.view,o=!t.is(n.nofity)||n.notify;s&&(s.getContent().show(),o&&this.throwEvents({name:"onFacetSelect",args:[this],context:s}))}},switchFacets:function(t,e,i){this.hideFacet(e,i),this.showFacet(t,i)},destroy:function(){var e=this.currentRouteSteps;this.stopListening();try{e.forEach(function(t){t.destroy({deleteRef:!0})}),this.panelSlider&&(this.panelSlider.destroy(),this.panelSlider=null)}catch(e){t.log("Skeleton: Error destroying skeleton: "+e.stack)}e.length=0,this.tempRouteSteps&&(this.tempRouteSteps.length=0),this.rendererMap=null,this._parent.apply(this,arguments)}});return t.extend(I,{getRendererHandler:function(e,i){var n,s=e,o=t.merge(i||{},{key:"_modelKey",fetchOptions:null,viewOptions:null});if(!t.is(s,"string")&&!t.is(s,"class"))throw new Error("Renderer must be a string that references another renderer or a Constructor.");return n=function(e){var i=this.currentRouteSteps.map(function(t){return t.clone()}),n=i[e.stepIndex];t.is(s,"string")&&this.rendererMap[s]?(n.set("renderer",s),n.set("facetIndex",null)):(n.set("facetIndex",e.facetIndex),n.set("renderer",null)),n.set("id",null),i.splice(e.stepIndex+1,i.length),this.router.navigate(this.stringifySteps(i,{rootIdCardOptions:this.options.rootIdCardOptions,state:this.getState()}),{trigger:!0})},o.rendererRef=s,n._opts=o,n}}),I});