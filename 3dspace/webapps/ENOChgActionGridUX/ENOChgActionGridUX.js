define("DS/ENOChgActionGridUX/scripts/Wrapper/ChgTransferWrapper",["DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_ChangeOwnerCmd","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS"],function(e,t,i,n,a,r,o){var s={launchTransferDialog:function(e){this.enableTransferCommand(e)},refreshGridAfterTransfer:function(e,a){t.unsubscribe("DS/PADUtils/PADCommandProxy/refresh"),null!=e&&null!=e.transferOwnershipPanel&&e.transferOwnershipPanel.close();for(var r=a&&a.data&&a.data.authored&&a.data.authored.modified?a.data.authored.modified:[],o=0;o<r.length;o++)i.getCAOwnerForTransfer(r[o]).then(function(e){var a=n.processOwnerID(e.members),r=[];r.push(e.caid),r.push(a[0]),i.getUserFullNameWithProcessData(a,r).then(function(e){e.processList=r;var i=e.processList[1],n=e.userDisplayName.userInfo[i].userDisplayName,a={id:"pid:"+e.processList[0],newOwner:n,userName:i};t.publish("ca-IDCard-on-change-transfer-responsibility",a);var o=document.querySelector(".fonticon-arrows-ccw");o&&o.click()},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)})},enableTransferCommand:function(i){var n={_selectedItems:[],getSelectedNodes:function(){return this._selectedItems},addSelection:function(e,t){this._selectedItems=[];var i=this;UWA.is(e,"array")?e.forEach(function(e){i._selectedItems.push(e)}):i._selectedItems.push(e)},getReference:function(e){return getID()},getParent:function(e){return e.getParent()},getType:function(e){return getType()},getName:function(e){return getLabel()}},a=[];for(let e=0;e<i.length;e++){var r=UWA.extend(i[e],{getID:function(){return i[e].id},getLabel:function(){return i[e].name},getOwner:function(){return i[e].owner},getType:function(){return i[e].type},getDisplayName:function(){return i[e].name},object:{revision:"-"}});a.push(r)}n.addSelection(a);var o=new e({context:n,ID:"ActionBar_ChangeOwner"});t.subscribe("DS/PADUtils/PADCommandProxy/refresh",function(e){s.refreshGridAfterTransfer(o,e)}),o.begin()}};return s}),define("DS/ENOChgActionGridUX/scripts/Model/ChgChangeDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataProcess","require"],function(e,t,i,n,a,r,o,s,l){"use strict";return e.extend({init:function(){},createTreeDocument:function(){var e=new n;return new t({dataModelSet:e})},loadData:function(e,t){var l=new n;e.prepareUpdate();for(var c=0;c<t.length;c++){var d,u;if(t[c].icon)d=t[c].icon,u=t[c].image;else{d=a.getGlobalVariable().computeUrl("/snresources/images/icons/small/I_ECM_CA.png"),u=a.getGlobalVariable().computeUrl("/snresources/images/icons/large/I_ECM_CA108x144.png")}var g="-";if(null!=t[c].dueDate&&null!=t[c].dueDate){g=new UWA.Date(t[c].dueDate).strftime("%Y-%m-%d")}var p=t[c].name+" | "+t[c].responsible;t[c].title=s.escapeHTML(t[c].title);var h=this.getCustomTooltip(t[c]);if("-"==g&&""==t[c].group)var m=t[c].maturity;else if("-"!=g&&""==t[c].group){m=t[c].maturity+" | "+g;h=h+"\n"+r.CHG_TOOLTIP_DUEDATE+": "+g}else if("-"==g&&""!=t[c].group){m=t[c].maturity+" | "+t[c].group;h=h+"\n"+r.CHG_TOOLTIP_GROUP+": "+t[c].group}else{m=t[c].maturity+" | "+g+" | "+t[c].group;h=h+"\n"+r.CHG_TOOLTIP_DUEDATE+": "+g+"\n"+r.CHG_TOOLTIP_GROUP+": "+t[c].group}var C="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low",v=["level-low"],f=[r.CHG_TOOLTIP_SEVERIY_LOW];1==t[c].severityGrade?(C="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium",v=["level-medium"],f=[r.CHG_TOOLTIP_SEVERIY_MEDIUM]):2==t[c].severityGrade&&(C="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high",v=["level-high"],f=[r.CHG_TOOLTIP_SEVERIY_HIGH]);var w=new UWA.Element("div",{});UWA.createElement("span",{html:t[c].name}).inject(w);var E=new UWA.Element("div",{class:"iconsDiv"});if("True"==t[c].onHold){var D=new UWA.Element("div",{class:"gridIconContainer",title:r.CHG_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(D),D.inject(E),v.push("pause"),f.push(r.CHG_TOOLTIP_HOLD)}var b=new UWA.Element("div",{class:"gridIconContainer",title:r.CHG_TOOLTIP_NEW});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(b),b.inject(E),v.push("database-add"),f.push(r.CHG_TOOLTIP_NEW),E.inject(w),t[c].ca_name=w.outerHTML;var A=new UWA.Element("div",{}),y=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:C}).inject(y);var S=UWA.createElement("span",{html:t[c].severity});y.inject(A),S.inject(A),t[c].sev=A.outerHTML;var _="/api/user/getpicture/login/"+t[c].trigram+"/format/normal",T=a.getGlobalVariable().computeSwymUrl(_),G=new UWA.Element("div",{class:"members"}),I=new UWA.Element("div",{class:"assignee"}),O="";if(a.getGlobalVariable().isSwymInstalled)O=UWA.createElement("img",{class:"userIcon",src:T});else{var N=o.getAvatarDetails(t[c].responsible);(O=UWA.createElement("div",{html:N.avatarStr,class:"avatarIcon"})).style.setProperty("background",N.avatarColor)}O.inject(I);var V=UWA.createElement("span",{class:"userName",html:t[c].responsible});I.inject(G),V.inject(G),t[c].user=G.outerHTML;var U=new UWA.createElement("div",{class:"loader"}),L=new UWA.createElement("div",{class:"loader"}),x=new UWA.createElement("div",{class:"loader"});t[c].assignees=U.outerHTML,t[c].reviewers=L.outerHTML,t[c].followers=x.outerHTML;for(var M=!1,P=(a.getGlobalVariable().existingCAIds,e.getChildren()),W=0;W<P.length;W++){var H=P[W];H.options.grid.id==t[c].id&&(M=!0,H.updateOptions({label:t[c].title,subLabel:p,description:m,grid:t[c],icons:[d],thumbnail:u,activeFlag:!1,customTooltip:h,statusbarIcons:v,statusbarIconsTooltips:f,contextualMenu:["Copy1","Move1"]}))}if(!M){var R=i.createTreeNodeDataModel(l,{label:t[c].title,subLabel:p,description:m,grid:t[c],icons:[d],thumbnail:u,activeFlag:!1,customTooltip:h,statusbarIcons:v,statusbarIconsTooltips:f,contextualMenu:["Copy1","Move1"]});e.addChild(R,0)}}e.pushUpdate()},getCustomTooltip:function(e){return r.CHG_TOOLTIP_TITLE+": "+e.title+"\n"+r.CHG_TOOLTIP_NAME+": "+e.name+"\n"+r.CHG_TOOLTIP_SEVERITY+": "+e.severity+"\n"+r.CHG_TOOLTIP_OWNER+": "+e.responsible+"\n"+r.CHG_TOOLTIP_MATURITY+": "+e.maturity},loadDataIndexed:function(e,t){var c=e,d=new n;e.prepareUpdate();for(var u=l("DS/ENOChangeActionUX/scripts/CAPreferencesManager").getCASummaryViewSelection(),g=0;g<t.length;g++){var p=t[g].iconURL,h=t[g].previewURL,m="-";if(null!=t[g].dueDate&&null!=t[g].dueDate){m=new UWA.Date(t[g].dueDate).strftime("%Y-%m-%d")}var C=t[g].name+" | "+t[g].responsible;t[g].title=s.escapeHTML(t[g].title);var v=this.getCustomTooltip(t[g]);if("-"==m&&""==t[g].group)var f=t[g].maturity;else if("-"!=m&&""==t[g].group){f=t[g].maturity+" | "+m;v=v+"\n"+r.CHG_TOOLTIP_DUEDATE+": "+m}else if("-"==m&&""!=t[g].group){f=t[g].maturity+" | "+t[g].group;v=v+"\n"+r.CHG_TOOLTIP_GROUP+": "+t[g].group}else{f=t[g].maturity+" | "+m+" | "+t[g].group;v=v+"\n"+r.CHG_TOOLTIP_DUEDATE+": "+m+"\n"+r.CHG_TOOLTIP_GROUP+": "+t[g].group}var w="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low",E=["level-low"],D=[r.CHG_TOOLTIP_SEVERIY_LOW];1==t[g].severityGrade?(w="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium",E=["level-medium"],D=[r.CHG_TOOLTIP_SEVERIY_MEDIUM]):2==t[g].severityGrade&&(w="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high",E=["level-high"],D=[r.CHG_TOOLTIP_SEVERIY_HIGH]);var b=new UWA.Element("div",{});UWA.createElement("span",{html:t[g].name}).inject(b);var A=new UWA.Element("div",{class:"iconsDiv"});if("true"==t[g].onHold){var y=new UWA.Element("div",{class:"gridIconContainer",title:r.CHG_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(y),y.inject(A),E.push("pause"),D.push(r.CHG_TOOLTIP_HOLD)}if("attach"==t[g].referential&&(E.push("attach"),D.push(r.CHG_TOOLTIP_ATTACHMENT)),"thumbs-down"==t[g].reject){var S=new UWA.Element("div",{class:"gridIconContainer",title:r.CHG_TOOLTIP_REJECT});UWA.createElement("div",{class:"fonticon fonticon-thumbs-down rejectCA"}).inject(S),S.inject(A),E.push("thumbs-down"),D.push(r.CHG_TOOLTIP_REJECT)}A.inject(b),t[g].ca_name=b.outerHTML;var _=new UWA.Element("div",{}),T=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:w}).inject(T);var G=UWA.createElement("span",{html:t[g].severity});T.inject(_),G.inject(_),t[g].sev=_.outerHTML;var I=new UWA.Element("div",{class:"members"}),O="";if(t[g].changeAssignee[0]){var N="",V=t[g].changeAssignee[0].split(",");V.sort();for(var U=0;U<V.length;U++){var L=V[U].split("|"),x=L[0],M=L[1];N=N+x+" ("+M+"),\n",O=O+x+" ("+M+"),";var P="/api/user/getpicture/login/"+M+"/format/normal",W=a.getGlobalVariable().computeSwymUrl(P),H=new UWA.Element("div",{class:"assignee"}),R="";if(a.getGlobalVariable().isSwymInstalled)R=UWA.createElement("img",{class:"userIcon",src:W});else{var k=o.getAvatarDetails(x);(R=UWA.createElement("div",{html:k.avatarStr,class:"avatarIcon"})).style.setProperty("background",k.avatarColor)}R.inject(H),H.inject(I)}N=N.slice(0,-2),O=O.slice(0,-1),I.set({title:N})}t[g].assigneeGroup=O,t[g].assignees=I.outerHTML;var F=new UWA.Element("div",{class:"members"}),j="";if(t[g].changeReviewer[0]){N="";var B=t[g].changeReviewer[0].split(",");B.sort();for(U=0;U<B.length;U++){var X=B[U].split("|"),q=X[0],z=X[1];N=N+q+" ("+z+"),\n",j=j+q+" ("+z+"),";P="/api/user/getpicture/login/"+z+"/format/normal",W=a.getGlobalVariable().computeSwymUrl(P);var Y=new UWA.Element("div",{class:"assignee"});R="";if(a.getGlobalVariable().isSwymInstalled)R=UWA.createElement("img",{class:"userIcon",src:W});else{k=o.getAvatarDetails(q);(R=UWA.createElement("div",{html:k.avatarStr,class:"avatarIcon"})).style.setProperty("background",k.avatarColor)}R.inject(Y),Y.inject(F)}N=N.slice(0,-2),j=j.slice(0,-1),F.set({title:N})}if(t[g].changeApprover[0]){Y=new UWA.Element("div",{class:"assignee"}),R="",N=r.CHG_ROUTE_TEMPLATE;var K=t[g].changeApprover[0];j=K+" ("+K+")",N=K;var J=a.getGlobalVariable().computeUrl("/snresources/images/icons/small/iconSmallRouteTemplate.png");R=UWA.createElement("img",{class:"userRTIcon",src:J});UWA.createElement("span",{class:"userName",html:t[g].changeApprover[0]});R.inject(Y),Y.inject(F),F.set({title:N})}t[g].reviewerGroup=j,t[g].reviewers=F.outerHTML;var Q=new UWA.Element("div",{class:"members"}),Z="";if(t[g].changeFollower[0]){N="";var $=t[g].changeFollower[0].split(",");$.sort();for(U=0;U<$.length;U++){var ee=$[U].split("|"),te=ee[0],ie=ee[1];N=N+te+" ("+ie+"),\n",Z=Z+te+" ("+ie+"),";P="/api/user/getpicture/login/"+ie+"/format/normal",W=a.getGlobalVariable().computeSwymUrl(P);var ne=new UWA.Element("div",{class:"assignee"});R="";if(a.getGlobalVariable().isSwymInstalled)R=UWA.createElement("img",{class:"userIcon",src:W});else{k=o.getAvatarDetails(te);(R=UWA.createElement("div",{html:k.avatarStr,class:"avatarIcon"})).style.setProperty("background",k.avatarColor)}R.inject(ne),ne.inject(Q)}N=N.slice(0,-2),Z=Z.slice(0,-1),Q.set({title:N})}t[g].followerGroup=Z,t[g].followers=Q.outerHTML;var ae="/api/user/getpicture/login/"+t[g].owner+"/format/normal",re=a.getGlobalVariable().computeSwymUrl(ae),oe=new UWA.Element("div",{class:"members"}),se=new UWA.Element("div",{class:"assignee"}),le="";if(a.getGlobalVariable().isSwymInstalled)le=UWA.createElement("img",{class:"userIcon",src:re});else{k=o.getAvatarDetails(t[g].responsible);(le=UWA.createElement("div",{html:k.avatarStr,class:"avatarIcon"})).style.setProperty("background",k.avatarColor)}le.inject(se);var ce=UWA.createElement("span",{class:"userName",html:t[g].responsible});se.inject(oe),ce.inject(oe),t[g].user=oe.outerHTML;var de=!1,ue=c.getChildren();for(U=0;U<ue.length;U++){ue[U].options.grid.id==t[g].id&&(de=!0)}var ge=!1;if(u&&u.length>0&&u.includes(t[g].id)&&(ge=!0),!de&&!ge){var pe=i.createTreeNodeDataModel(d,{label:t[g].title,subLabel:C,description:f,grid:t[g],icons:[p],thumbnail:h,customTooltip:v,emptyStatusbarVisibleFlag:!0,activeFlag:!1,statusbarIcons:E,statusbarIconsTooltips:D,contextualMenu:["Copy1","Move1"]});e.addChild(pe)}}e.pushUpdate()},updateNodeIndexed:function(e,t,s){null!=s&&"false"==s||e.unselectAll();var l=new n,c="-";null!=t[0].dueDate&&null!=t[0].dueDate&&(c=t[0].dueDate);var d=t[0].name+" | "+t[0].responsible,u=this.getCustomTooltip(t[0]);if("-"==c)var g=t[0].maturity;else{g=t[0].maturity+" | "+c;u=u+"\n"+r.CHG_TOOLTIP_DUEDATE+": "+c}var p="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low",h=["level-low"],m=[r.CHG_TOOLTIP_SEVERIY_LOW];1==t[0].severityGrade?(p="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium",h=["level-medium"],m=[r.CHG_TOOLTIP_SEVERIY_MEDIUM]):2==t[0].severityGrade&&(p="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high",h=["level-high"],m=[r.CHG_TOOLTIP_SEVERIY_HIGH]);var C=new UWA.Element("div",{});UWA.createElement("span",{html:t[0].name}).inject(C);var v=new UWA.Element("div",{class:"iconsDiv"}),f=new UWA.Element("div",{class:"gridIconContainer",title:r.CHG_TOOLTIP_NEW});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(f),f.inject(v),h.push("database-add"),m.push(r.CHG_TOOLTIP_NEW),v.inject(C),t[0].ca_name=C.outerHTML;var w=new UWA.Element("div",{}),E=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:p}).inject(E);var D=UWA.createElement("span",{html:t[0].severity});E.inject(w),D.inject(w),t[0].sev=w.outerHTML;var b="/api/user/getpicture/login/"+t[0].trigram+"/format/normal",A=a.getGlobalVariable().computeSwymUrl(b),y=new UWA.Element("div",{class:"members"}),S=new UWA.Element("div",{class:"assignee"}),_="";if(a.getGlobalVariable().isSwymInstalled)_=UWA.createElement("img",{class:"userIcon",src:A});else{var T=o.getAvatarDetails(t[0].responsible);(_=UWA.createElement("div",{html:T.avatarStr,class:"avatarIcon"})).style.setProperty("background",T.avatarColor)}_.inject(S);var G=UWA.createElement("span",{class:"userName",html:t[0].responsible});S.inject(y),G.inject(y),t[0].user=y.outerHTML;var I=i.createTreeNodeDataModel(l,{label:t[0].title,subLabel:d,description:g,grid:t[0],icons:[t[0].icon],thumbnail:t[0].thumbnail,customTooltip:u,statusbarIcons:h,statusbarIconsTooltips:m,emptyStatusbarVisibleFlag:!0,contextualMenu:["Copy1","Move1"]});null!=s&&"false"==s||e.getXSO().add(I),e.addChild(I,0)},addCAMembers:function(e,t,i){var n=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"members"}),s=new UWA.Element("div",{class:"members"}),l="",c="",d="",u="",g="",p="";t.sort(function(e,t){return e.fullname<t.fullname?-1:e.fullname>t.fullname?1:0});for(var h=0;h<t.length;h++)if("contributor"==t[h].role){l=l+t[h].fullname+" ("+t[h].name+"),\n",u=u+t[h].fullname+" ("+t[h].name+"),";var m="/api/user/getpicture/login/"+t[h].name+"/format/normal",C=a.getGlobalVariable().computeSwymUrl(m),v=new UWA.Element("div",{class:"assignee"}),f="";if(a.getGlobalVariable().isSwymInstalled)f=UWA.createElement("img",{class:"userIcon",src:C});else{var w=o.getAvatarDetails(t[h].fullname);(f=UWA.createElement("div",{html:w.avatarStr,class:"avatarIcon"})).style.setProperty("background",w.avatarColor)}f.inject(v),v.inject(n)}else if("reviewer"==t[h].role){c=c+t[h].fullname+" ("+t[h].name+"),\n",g=g+t[h].fullname+" ("+t[h].name+"),";m="/api/user/getpicture/login/"+t[h].name+"/format/normal",C=a.getGlobalVariable().computeSwymUrl(m);var E=new UWA.Element("div",{class:"assignee"});f="";if(a.getGlobalVariable().isSwymInstalled)f=UWA.createElement("img",{class:"userIcon",src:C});else{w=o.getAvatarDetails(t[h].fullname);(f=UWA.createElement("div",{html:w.avatarStr,class:"avatarIcon"})).style.setProperty("background",w.avatarColor)}f.inject(E),E.inject(r)}else if("follower"==t[h].role){d=d+t[h].fullname+" ("+t[h].name+"),\n",p=p+t[h].fullname+" ("+t[h].name+"),";m="/api/user/getpicture/login/"+t[h].name+"/format/normal",C=a.getGlobalVariable().computeSwymUrl(m);var D=new UWA.Element("div",{class:"assignee"});f="";if(a.getGlobalVariable().isSwymInstalled)f=UWA.createElement("img",{class:"userIcon",src:C});else{w=o.getAvatarDetails(t[h].fullname);(f=UWA.createElement("div",{html:w.avatarStr,class:"avatarIcon"})).style.setProperty("background",w.avatarColor)}f.inject(D),D.inject(s)}if(i&&i.length>0){E=new UWA.Element("div",{class:"assignee"}),f="";c=i[0].name,g=i[0].name;m="/snresources/images/icons/small/iconSmallRouteTemplate.png",C=a.getGlobalVariable().computeUrl(m);f=UWA.createElement("img",{class:"userRTIcon",src:C});UWA.createElement("span",{class:"userName",html:i[0].name});f.inject(E),E.inject(r)}u=u.slice(0,-1),l=l.slice(0,-2),n.set({title:l}),g=g.slice(0,-1),c=i&&i.length>0?c:c.slice(0,-2),r.set({title:c}),p=p.slice(0,-1),d=d.slice(0,-2),s.set({title:d}),e.setAttribute("assigneeGroup",u),e.setAttribute("assignees",n.outerHTML),e.setAttribute("reviewerGroup",g),e.setAttribute("reviewers",r.outerHTML),e.setAttribute("followerGroup",p),e.setAttribute("followers",s.outerHTML)},addReferentials:function(e,t){if(t.length>0){var i=e.options.statusbarIcons,n=e.options.statusbarIconsTooltips;i.push("attach"),n.push(r.CHG_TOOLTIP_ATTACHMENT),e.updateOptions({grid:{referential:"attach"},statusbarIcons:i,statusbarIconsTooltips:n})}else{i=e.options.statusbarIcons,n=e.options.statusbarIconsTooltips;var a=i.indexOf("attach");a>-1&&(i.splice(a,1),n.splice(a,1)),e.updateOptions({grid:{referential:"false"},statusbarIcons:i,statusbarIconsTooltips:n})}},setThumbnailURL:function(e,t){null!=e&&null!=e.options&&null!=t&&e.updateOptions({thumbnail:t})}})}),define("DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig",[],function(){"use strict";var e={LEFT_PANEL_SIZE_EXPANDED:300,LEFT_PANEL_SIZE_COLLAPSED:40,MOBILE_CUTOFF:500,TABLET_CUTOFF:768};return e}),define("DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalVariable",["UWA/Class","DS/Windows/ImmersiveFrame"],function(e,t){"use strict";var i=new t({});return e.singleton({getImmersiveFrame:function(){return i}})}),define("DS/ENOChgActionGridUX/scripts/View/ChgEventHandler",["DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/UIKIT/Mask"],function(e,t,i,n,a,r){"use strict";return{subscribeEvents:function(){e.subscribe("ca-IDCard-on-change-maturity",function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(t){t.updateMaturity(e)})}),e.subscribe("ca-IDCard-on-change-hold-status",function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(t){t.update_Hold_Reject(e)})}),e.subscribe("ca-IDCard-on-change-transfer-responsibility",function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(t){t.updateOwner(e)})}),e.subscribe("ca-IDCard-on-change-approval-status",function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(t){t.update_Hold_Reject(e)})}),e.subscribe("ca-IDCard-on-change-cancel",function(e){}),e.subscribe("ca-IDCard-on-change-id-card-details",function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(t){t.update_Title_Sev_DueDate(e)})}),e.subscribe("ca-IDCard-on-change-add-person",function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(t){t.updateMembers(e)})}),e.subscribe("ca-IDCard-on-change-remove-person",function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(t){t.updateMembers(e)})}),e.subscribe("ca-IDCard-on-add-remove-referential",function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(t){t.updateReferential(e)})}),e.subscribe("ca-IDCard-on-change-group",function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(t){t.updateGroup(e);var i=document.getElementById("outer-ca-div");i&&r.unmask(i)})}),e.subscribe("ca-create-grid-injection",function(e){var r=e.CADetails,o=e.isSelect;let s=[r.changeaction.id.replace("pid:","")];i.getObjectInfo(s,["icon","image"]).then(function(e){r.changeaction.icon=e[0].dataelements.icon,r.changeaction.image=e[0].dataelements.image;var i=t.processChangeActionCreateData(r),s=i.processData,l=i.memberList;n.getUserFullNameFromIDs(l).then(function(e){e.processList=s;var i=t.processedListWithName(e);"true"!=a.getGlobalVariable().indexMode&&a.getGlobalVariable().existingCAIds.push("pid:"+i[0].id),require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout","DS/UIKIT/Mask"],function(e,t){e.refreshLayout(i,o);var n=document.getElementById("outer-ca-div");null==n&&"undefined"==n||t.unmask(n)})},function(e){return Promise.reject(e)})})})}}}),define("DS/ENOChgActionGridUX/scripts/View/ChgGenericCreateChangeAction",["DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS"],function(e,t,i,n,a,r,o,s){let l={onCompleteCallback:function(t){n.getNewCADetails(t.context).then(function(t){if(null!=t.changeaction||null!=t.changeaction){let o=["icon","image"],s=[t.changeaction.id.replace("pid:","")];n.getObjectInfo(s,o).then(function(n){t.changeaction.icon=n[0].dataelements.icon,t.changeaction.image=n[0].dataelements.image;var o=a.processChangeActionCreateData(t);this.processNode=o.processData;var s=o.memberList,l=this;r.getUserFullNameFromIDs(s).then(function(t){t.processList=l.processNode;var n=a.processedListWithName(t);"true"!=i.getGlobalVariable().indexMode&&i.getGlobalVariable().existingCAIds.push("pid:"+n[0].id),require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(e){e.refreshLayout(n)});var r=document.getElementById("outer-ca-div");null==r&&"undefined"==r||e.unmask(r)},function(e){return Promise.reject(e)})})}else{var o=document.getElementById("outer-ca-div");null==o&&"undefined"==o||e.unmask(o)}})},onFailureCallback:function(){console.log("ERROR : FAILED CREATE CA");var t=document.getElementById("outer-ca-div");null==t&&"undefined"==t||e.unmask(t)},createChangeAction:function(){let e=widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action",t={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:s.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:e,select:[]},events:{onSuccess:function(e){let t=e.result[0].identifier,i={};i.context=t,i.type="ChangeAction",l.onCompleteCallback(i)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new o).CreateNew(t)}};return l}),define("DS/ENOChgActionGridUX/scripts/View/ChgApplicationTopBarWrapper",["DS/ENOXPageToolBar/js/PageToolBar","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS","DS/ENOXBreadcrumb/js/Breadcrumb"],function(e,t,i){"use strict";var n=function(){};return n.prototype.init=function(n,a){this._applicationChannel=n;var r={withInformationButton:!1,withWelcomePanelButton:!1,modelEvents:this._applicationChannel,parentContainer:a},o=new e(r);o.render().inject(a);o.getBodyContent();this._breadcrumb=new i({rootID:"home",rootText:t.CHG_Home,rootIcon:"home",modelEvents:this._applicationChannel})},n.prototype._subscribeToEvents=function(){},n}),define("DS/ENOChgActionGridUX/scripts/View/ChgDataGridViewToolbar",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS"],function(e,t){var i=Object.create(null);return i.toolbar=null,i.sortingData={menu:[{type:"PushItem",title:t.CHG_Column_Severity,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z"},action:{module:"DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout",func:"sortBySeverity"}},{type:"PushItem",title:t.CHG_Column_Maturity,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z"},action:{module:"DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout",func:"sortByMaturity"}}]},i.viewData={menu:[{type:"PushItem",title:t.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout",func:"changeView"},tooltip:t.CHG_TOOLTIP_GRID_VIEW},{type:"PushItem",title:t.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgActionGridUX/scripts/View/ChgTileViewLayout",func:"changeView"},tooltip:t.CHG_TOOLTIP_TILE_VIEW}]},i.filterData={menu:[{type:"CheckItem",title:t.CHG_Filter_ActiveCA,state:"selected",action:{module:"DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout",func:"filterView"},tooltip:t.CHG_Filter_ActiveCA_Def},{type:"CheckItem",title:t.CHG_Filter_InactiveCA,action:{module:"DS/ENOChgActionGridUX/scripts/View/ChgInActiveCAFilterView",func:"filterView"},tooltip:t.CHG_Filter_InactiveCA_Def}]},i.writetoolbarDefination=function(){var i={entries:[{id:"back",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"home",fontIconFamily:1}},action:{module:"DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout",func:"backToSummary"},category:"status",tooltip:t.CHG_TOOLTIP_HOME},{id:"addNewBlankCAId",dataElements:{typeRepresentation:"expandInput",data:"search"},position:"far",category:"create",tooltip:t.CHG_Quick_CreateCA},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"},{id:"filter",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"near",tooltip:t.CHG_Toolbar_FilterBy,category:"status"},{id:"sorting",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"sorting",fontIconFamily:1},value:this.sortingData},position:"far",tooltip:t.CHG_TOOLTIP_SORT,category:"View"}],typeRepresentations:{enumSelectionMode:{stdTemplate:"comboSelector",semantics:{possibleValues:[t.CHG_Filter_MyActiveCA,t.CHG_Filter_MyActiveCAAsAssignee,t.CHG_Filter_MyActiveCAAsReviewer,t.CHG_Filter_MyActiveCAAsFollower,t.CHG_Filter_MyAllCA]}}}},n={id:"creategroup",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"group-add",fontIconFamily:1}},action:{module:"DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout",func:"assignGroupToCAs"},position:"far",category:"create",tooltip:t.CHG_TOOLTIP_CREATE_GROUP};return"true"===e.getGlobalVariable().CHG_CHANGE_GROUP&&i.entries.push(n),JSON.stringify(i)},i.onPlusClick=function(e){console.log("Search functionality")},i}),define("DS/ENOChgActionGridUX/scripts/View/ChgCreateChangeAction",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/UIKIT/Mask","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e,t,i,n,a,r,o,s){var l={onCompleteCallback:function(e){if(null!=e.changeaction||null!=e.changeaction){var n=[e.changeaction.id.replace("pid:","")];o.getObjectInfo(n,["icon","image"]).then(function(n){e.changeaction.icon=n[0].dataelements.icon,e.changeaction.image=n[0].dataelements.image;var r=t.processChangeActionCreateData(e);this.processNode=r.processData;var o=r.memberList,l=this;s.getUserFullNameFromIDs(o).then(function(e){e.processList=l.processNode;var n=t.processedListWithName(e);"true"!=a.getGlobalVariable().indexMode&&a.getGlobalVariable().existingCAIds.push("pid:"+n[0].id),require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(e){e.refreshLayout(n)});var r=document.getElementById("outer-ca-div");null==r&&"undefined"==r||i.unmask(r)},function(e){return Promise.reject(e)})})}else{var r=document.getElementById("outer-ca-div");null==r&&"undefined"==r||i.unmask(r)}},onFailureCallback:function(){console.log("ERROR : FAILED CREATE CA");var e=document.getElementById("outer-ca-div");null==e&&"undefined"==e||i.unmask(e)},createChangeAction:function(){e.prototype.execute(l.onCompleteCallback)},createBlankChangeAction:function(e,t,n){var a=n.value;if(void 0!==window.__karma__&&(a="ODT_CA"),null!=a&&""!=a.trim()){var o=document.getElementById("outer-ca-div");null==o&&"undefined"==o||i.mask(o);let e=widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action";var s={version:"v0",changeaction:{name:"",revision:"-",type:e="type_"+e.replace(" ",""),description:a,attributes:[{name:"Synopsis",value:a},{name:"Estimated Completion Date",value:""},{name:"Severity",value:"Low"}]}};r.createCA(JSON.stringify(s),l.onCompleteCallback,l.onFailureCallback)}n.value=""}};return l}),define("DS/ENOChgActionGridUX/scripts/View/ChgWelcomePanelWrapper",["DS/ENOXWelcomePanel/js/ENOXWelcomePanel","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS"],function(e,t){"use strict";var i=function(){};return i.prototype.init=function(i,n){this._applicationChannel=i;var a=[{id:"activities",title:t.CHG_Activity_Title,actions:[{id:"CA",text:t.CHG_Activity_CA,fonticon:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-change",className:"action-new"}]}];new e({collapsed:!1,title:"ca",notifications:[],activities:a,parentContainer:n,modelEvents:i}).render()},i}),define("DS/ENOChgActionGridUX/scripts/Triptych/ChgTriptychWrapper",["DS/ENOXTriptych/js/ENOXTriptych","css!DS/ENOChgActionGridUX/ENOChgActionGridUX"],function(e,t){"use strict";var i=function(){};return i.prototype.init=function(t,i,n,a,r){this._left=document.createElement("div"),this._left.classList.add("ca-triptych-wrapper"),this._main=document.createElement("div"),this._main.classList.add("ca-triptych-wrapper"),this._right=document.createElement("div"),this._right.classList.add("ca-triptych-wrapper"),this._applicationChannel=t,this._triptych=new e;widget.body.offsetWidth;var o={left:{resizable:!0,originalSize:400,originalState:"close",overMobile:!0,withClose:!1},right:{resizable:!0,minWidth:250,originalSize:400,originalState:"close",overMobile:!0},borderLeft:!0,container:i,withtransition:!0,modelEvents:this._applicationChannel};this._triptych.init(o,this._left,this._main,this._right)},i.prototype.inject=function(e){this._triptych.inject(e)},i.prototype._getTriptych=function(){return this._triptych},i.prototype.getLeftPanelContainer=function(){return this._left},i.prototype.getLeftPanelContainerTriptych=function(){return this._triptych._leftPanelContent},i.prototype.getRightPanelContainer=function(){return this._right},i.prototype.getMainPanelContainer=function(){return this._main},i}),define("DS/ENOChgActionGridUX/scripts/Wrapper/ChgIDCardWrapper",["DS/ENOChangeActionUX/scripts/Services/CAIDCardServices","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e,t){var i=e;return i.CAIDCardWrapper=function(i){var n="pid:";i.pid&&(n+=i.pid);var a={transientCAPid:n,nameTitlePref:"Title",target:i.target};i.target.empty(),e.getCAIDCard(a),this._modelEvents=i._modelEvents,this._modelEvents.subscribe({event:"ca-back-to-summary"},function(e){t.killTaggerProxies(-1),require(["DS/ENOChgActionGridUX/scripts/Wrapper/ChgTagNavigatorProxy"],function(e){e.activate()})})},i.killTaggerProxies=function(e){t.killTaggerProxies(e)},i}),define("DS/ENOChgActionGridUX/scripts/Wrapper/ChgTagNavigatorProxy",["DS/TagNavigatorProxy/TagNavigatorProxy","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){"use strict";var i=null,n=null,a=[],r={init:function(a){var o={widgetId:widget.id,filteringMode:"FilteringOnServer",colorize:!0};i&&i.die(),n=a.DataContext,(i=e.createProxy(o)).addOpenTaggerListener(function(){require(["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS"],function(e,t,i){var n={level:"info",title:i.WARNING_TAGGER_INFO,subtitle:i.WARNING_TAGGER,sticky:!1};window.notif=e,t.removeLastNotificationDisplayed(),t.setNotificationManager(window.notif),t.setFadeOutPolicy(2),t.setStackingPolicy(1),t.setRemoveStackOnFirstTimeoutFlag(!0),null!=t._notifScreen&&t._notifScreen.addClassName("ca-align-center"),e.addNotif(n)})}),i.addEvent("onFilterChange",function(e){var a=i.getCurrentFilter();n.ChglayoutModel.empty(),Object.keys(a.allfilters).length>0?(t.getGlobalVariable().indexMode="true",n.refreshGrid(e,a)):(t.getGlobalVariable().indexMode="true",n.refreshGrid(e,a),t.getGlobalVariable().indexMode="false",n.refreshGrid(e,a))}),i.addEvent("colorize",function(e){var t=e.tagColors;r._colorize(t)}),i.addEvent("unColorize",function(e){r._uncolorize()})},setTags:function(e,t){if(i&&t){var n=r.getTagsList(t);t.forEach(function(e){if(-1!=n.indexOf(e.sixw)){for(var t=!1,i=0;i<a.length;i++)if(a[i].sixw==e.sixw&&a[i].object==e.object){a[i]=e,t=!0;break}t||a.push(e)}})}i.setTags(e,a)},deactivate:function(){i&&i.deactivate()},activate:function(){i&&i.activate()},clearLocalFilter:function(){i&&i.clearLocalFilter()},getTaglistData:function(){return[{sixw:"ds6w:what/ds6w:status",modelField:"maturity",compareType:"AcontainsB"},{sixw:"ds6w:why/ds6w:fulfills/ds6w:severity",modelField:"severity",compareType:"String"},{sixw:"ds6w:who/ds6w:responsible",modelField:"responsible",compareType:"String"},{sixw:"ds6w:when/ds6w:ends/ds6w:dueDate",modelField:"dueDate",compareType:"date"},{sixw:"ds6w:who/ds6w:assignee",modelField:"assigneeGroup",compareType:"BcontainsA"},{sixw:"ds6w:who/ds6w:approver",modelField:"reviewerGroup",compareType:"BcontainsA"},{sixw:"ds6w:who/ds6w:informed",modelField:"followerGroup",compareType:"BcontainsA"}]},getTagsList:function(e){var t=[];return e&&e.forEach(function(e){t.push(e.sixw)}),r.getTaglistData().forEach(function(e){t.push(e.sixw)}),t},tagCompare:function(e,t,i){if(t&&e)if("String"==i){if(e==t)return!0}else if("AcontainsB"==i){if(e.contains(t))return!0}else if("BcontainsA"==i){if(t.contains(e))return!0}else if("Array"==i){if(t.indexOf(e)>-1)return!0}else if("date"==i)return a=t,r=n=e,n.length>7?r=new UWA.Date(n).strftime("%Y-%m-%d"):n.length>4&&(r=new UWA.Date(n).strftime("%Y-%m")),!!a.contains(r);var n,a,r;return!1},_uncolorize:function(){"tree"==n.caGridView.options.columns[0].dataIndex&&(n.caGridView.options.columns[0].getCellKPIColor=null,n.caGridView.caDatagrid.prepareUpdateView(),n.caGridView.caDatagrid.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0)),n.caGridView.tilesView&&(n.caGridView.tilesView.getColor=function(){},n.caGridView.tilesView.prepareUpdateView(),n.caGridView.tilesView.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0))},_colorize:function(e){var t=r.getTagsList().indexOf(e[0].predicate);if(t>=0){var i=r.getTaglistData()[t];"tree"==n.caGridView.options.columns[0].dataIndex&&(n.caGridView.options.columns[0].getCellKPIColor=function(t){for(var n=0;n<e.length;n++)if(r.tagCompare(e[n].object,t.nodeModel.options.grid[i.modelField],i.compareType))return e[n].color;return null},n.caGridView.caDatagrid.prepareUpdateView(),n.caGridView.caDatagrid.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0)),n.caGridView.tilesView&&(n.caGridView.tilesView.getColor=function(t){t.options.grid;for(var n=0;n<e.length;n++)if(r.tagCompare(e[n].object,t.options.grid[i.modelField],i.compareType))return e[n].color},n.caGridView.tilesView.prepareUpdateView(),n.caGridView.tilesView.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0))}}};return r}),define("DS/ENOChgActionGridUX/scripts/Utils/ChgChangeActionUtil",["i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS","DS/ENOChgActionGridUX/scripts/View/ChgDataGridViewToolbar","DS/Controls/ProgressBar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgServices/scripts/services/ChgDataService","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown"],function(e,t,i,n,a,r,o,s,l,c,d,u,g){"use strict";var p=Object.create(null);return p.currentView="Grid",p.previousView="Grid",p.selectedNode="",p.getColumns=function(){var t=[{text:e.CHG_Column_Tittle,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150},{text:e.CHG_Column_Name,dataIndex:"ca_name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_Column_Maturity,dataIndex:"maturity",editableFlag:!1,compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.stateGrade&&"undefined"!=n.options.grid.stateGrade?i.options.grid.stateGrade==n.options.grid.stateGrade?0:i.options.grid.stateGrade<n.options.grid.stateGrade?-1:1:0}},{text:e.CHG_Column_Severity,dataIndex:"sev",editableFlag:!1,allowUnsafeHTMLContent:!0,compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.severityGrade&&"undefined"!=n.options.grid.severityGrade?i.options.grid.severityGrade==n.options.grid.severityGrade?0:i.options.grid.severityGrade<n.options.grid.severityGrade?-1:1:0},getCellGroupingKey:function(e){return e.nodeModel.options.grid.severity}},{text:e.CHG_Column_DueDate,dataIndex:"dueDate",typeRepresentation:"date",editableFlag:!1},{text:e.CHG_Column_Assignees,dataIndex:"assignees",editableFlag:!1,allowUnsafeHTMLContent:!0,getCellGroupingKey:function(e){return e.nodeModel.options.grid.assigneeGroup}},{text:e.CHG_Column_Reviewers,dataIndex:"reviewers",editableFlag:!1,allowUnsafeHTMLContent:!0,getCellGroupingKey:function(e){return e.nodeModel.options.grid.reviewerGroup}},{text:e.CHG_Column_Followers,dataIndex:"followers",editableFlag:!1,allowUnsafeHTMLContent:!0,visibleFlag:!1,getCellGroupingKey:function(e){return e.nodeModel.options.grid.followerGroup}},{text:e.CHG_Column_Responsible,dataIndex:"user",editableFlag:!1,allowUnsafeHTMLContent:!0,getCellGroupingKey:function(e){return e.nodeModel.options.grid.responsible}},{text:e.CHG_Column_Attachment,dataIndex:"referential",typeRepresentation:"icon",editableFlag:!1,visibleFlag:!0,alignment:"center"}],i={text:e.CHG_COLUMN_GROUP,dataIndex:"group",editableFlag:!1,allowUnsafeHTMLContent:!0,visibleFlag:!1};return"true"===n.getGlobalVariable().CHG_CHANGE_GROUP&&t.push(i),t},p.getOpenMenu=function(t,i){return{type:"PushItem",title:e.CHG_Menu_Open,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-open"},action:{callback:function(){var e={multipleHitCount:2};t.onItemClick(e,i.cellInfos)}}}},p.getRelationalExplorerMenu=function(t,i){return{type:"PushItem",title:e.CHG_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){for(var i=t.caDatagrid.treeDocument.getSelectedNodes(),n=[],a=0;a<i.length;a++){var r=i[a].options.grid.id;n.push(r)}e.openRelationalExplorer(n)})}}}},p.getDeleteMenu=function(t,i){return{type:"PushItem",title:e.CHG_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){require(["DS/ENOChgActionGridUX/scripts/View/ChgChangeActionDelete"],function(e){e.deleteCA(i.cellInfos)})}}}},p.getTransferMenu=function(t,i){return{type:"PushItem",title:e.CHG_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){for(var t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<t.length;a++)n.push(t[a].options.grid);require(["DS/ENOChgActionGridUX/scripts/Wrapper/ChgTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},p.changeView=function(i){if(widget.body.getDimensions().width<=a.MOBILE_CUTOFF?r.updateCASummaryViewMobile(i):r.updateCASummaryViewDesktop(i),"GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),(o=document.querySelector(".toolbar-ca-div .wux-ui-3ds-view-list"))&&o.addClassName("currentView"),(s=document.querySelector(".toolbar-ca-div .wux-ui-3ds-view-small-tile"))&&s.removeClassName("currentView"),(l=document.querySelector(".cagridView"))&&(l.removeClassName("hideView"),l.removeClassName("nonVisible"),l.addClassName("showView")),(c=document.querySelector(".catileView"))&&(c.removeClassName("showView"),c.addClassName("hideView"));else if("TileView"==i){var n,o,s,l,c;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),(o=document.querySelector(".toolbar-ca-div .wux-ui-3ds-view-list"))&&o.removeClassName("currentView"),(s=document.querySelector(".toolbar-ca-div .wux-ui-3ds-view-small-tile"))&&s.addClassName("currentView"),(l=document.querySelector(".cagridView"))&&(l.removeClassName("showView"),l.addClassName("hideView")),(c=document.querySelector(".catileView"))&&(c.removeClassName("hideView"),c.addClassName("showView"));var d=this;setTimeout(function(){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(e){if(""!=d.selectedNode)for(var t=e.ChglayoutModel.getChildren(),i=0;i<t.length;i++){var n=t[i],a=n.options.grid.id;d.selectedNode==a&&e.caGridView.tilesView.setActiveCell(n._rowID,!0)}})},100)}},p.filterView=function(e,a){if("activeCA"==e)this.currentFilterView="activeCA",(r=document.querySelector("#quickCreateContainer"))&&r.removeClassName("disableCreate"),(o=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",o.options.grid.data.menu[1].state="unselected",0==a&&null!=a&&setTimeout(function(){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(e){document.getElementById("outer-ca-div");e.ChglayoutModel.empty();var t=document.querySelector(".toolbar-ca-div"),a=new i({displayStyle:"lite",value:2,domId:"progBar"}).inject(t,"top");n.getGlobalVariable().indexMode="false";var r={filterView:"activeca"};e.refreshGrid(null,null,a,r),n.getGlobalVariable().indexMode="true",e.refreshGrid(null,null,a,r)})},100);else if("inactiveCA"==e){var r,o;this.currentFilterView="inactiveCA",(r=document.querySelector("#quickCreateContainer")).addClassName("disableCreate"),(o=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",o.options.grid.data.menu[1].state="selected";var s=this;setTimeout(function(){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(e){if(""!=s.selectedNode)for(var t=e.ChglayoutModel.getChildren(),a=0;a<t.length;a++){var r=t[a],o=r.options.grid.id;s.selectedNode==o&&e.caGridView.tilesView.setActiveCell(r._rowID,!0)}document.getElementById("outer-ca-div");e.ChglayoutModel.empty();var l=document.querySelector(".toolbar-ca-div"),c=new i({displayStyle:"lite",value:2,domId:"progBar"}).inject(l,"top");n.getGlobalVariable().indexMode="false";var d={filterView:"inactiveCA"};e.refreshGrid(null,null,c,d),n.getGlobalVariable().indexMode="true",e.refreshGrid(null,null,c,d)})},100)}},p.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:n.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},p.showNotification=function(e,t,i,n,a,r,o){var s={level:e,title:t,subtitle:i,message:n,sticky:a,allowUnsafeHTML:o||!1};window.notifs||(window.notifs=c,d.setNotificationManager(window.notifs)),r?d.inject(r):d.elements.container.isInjected()||d.inject(),window.notifs.addNotif(s)},p}),define("DS/ENOChgActionGridUX/scripts/View/ChgInActiveCAFilterView",["UWA/Core","DS/Controls/ResponsiveTileView","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgActionGridUX/scripts/Utils/ChgChangeActionUtil","DS/ENOChgActionGridUX/scripts/View/ChgDataGridViewToolbar"],function(e,t,i,n,a){"use strict";return{filterView:function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(e){e.caGridView.caDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){n.filterView("inactiveCA")},100)})}}}),define("DS/ENOChgActionGridUX/scripts/Utils/ChgChangeActionFeaturesUtil",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS","DS/ENOChgActionGridUX/scripts/Utils/ChgChangeActionUtil","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/WidgetServices/WidgetServices","DS/ENOChgServices/scripts/services/ChgInfraService","require"],function(e,t,i,n,a,r,o,s,l){"use strict";return{showRMBMenuOnGrid:function(e,t){return new Promise(function(i,n){var r="false",o=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();o.length>1&&(r="true");var c=[];c.push(a.getOpenMenu(e,t)),c.push(a.getRelationalExplorerMenu(e,t));var d={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(d);var u=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),g=u.openWith(d);if("false"==r)var p=u.getUserAccess("pid:"+t.cellInfos.nodeModel.options.grid.id);var h=[];h.push(g),"false"==r&&h.push(p),Promise.all(h).then(function(n){n[0]&&c.push(n[0]),c.push(s.getCopyLink(e,o)),"false"==r?(n[1]&&"true"==n[1].userAccess.Transfer&&c.push(a.getTransferMenu(e,t)),n[1]&&"true"==n[1].userAccess.Delete&&c.push(a.getDeleteMenu(e,t))):(c.push(a.getTransferMenu(e,t)),c.push(a.getDeleteMenu(e,t))),i(c)})})},createCustomColumn:function(e){let t=this;return new Promise(function(e,n){let a=i.enoviaCAGlobalVariable.changeActionSubTypes;r.getCombinedClassList(a).then(function(i){console.log("listForCustomView............................"),r.getPropertyForClassGrid(i).then(function(i){let n=r.makeCombinedColumnList(i),a=t.filterColumn(n);console.log(a),e(a)})})})},filterColumn:function(e){let t=this,i=[],n=["ds6w:label","ds6w:dueDate","ds6w:responsible","ds6w:severity","ds6w:status","ds6w:identifier","ds6wg:marketing_Name","ds6w:changeReviewList","ds6w:changeApprovalList"];for(let t of n)e.delete(t);return console.log(e),e.forEach((e,n,a)=>{console.log(e),console.log(n);let r=t.createColumnDefination(e,n);i.push(r)}),i},createColumnDefination:function(e,t){let i={text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!0,visibleFlag:!1};return"dateTime"===e.dataType.replace("http://www.w3.org/2001/XMLSchema#","")&&(i.getCellValue=((e,i)=>o.formatDate(new Date(e.nodeModel.getAttributeValue(t)),!0))),i}}}),define("DS/ENOChgActionGridUX/scripts/View/ChgTileViewLayout",["UWA/Core","DS/ENOChgActionGridUX/scripts/Utils/ChgChangeActionUtil"],function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(e){e.caGridView.caDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.changeView("TileView")},100)})},showEmptyView:function(){var e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgActionGridUX/scripts/View/ChgzApplicationFrame",["DS/CoreEvents/ModelEvents","DS/Core/Core","DS/ENOChgActionGridUX/scripts/Triptych/ChgTriptychWrapper","DS/ENOChgActionGridUX/scripts/View/ChgApplicationTopBarWrapper","DS/ENOChgActionGridUX/scripts/View/ChgWelcomePanelWrapper","css!DS/UIKIT/UIKIT.css","css!DS/ENOChgActionGridUX/ENOChgActionGridUX"],function(e,t,i,n,a){"use strict";var r=function(){};return r.prototype._init=function(e,t,i){this._applicationChannel=e,this._leftContent=t,this._middleContent=i,this._initDom()},r.prototype._initDom=function(){var e=document.querySelector("#zPlaneid");e&&e.destroy(),this._content=UWA.createElement("div",{id:"zPlaneid"}),this._content.classList.add("z-panel"),this._topbar=UWA.createElement("div",{id:"ztoolbar",styles:{display:"none"}}),this._topbar.classList.add("z-topbar"),this._mainContainer=document.createElement("div"),this._mainContainer.classList.add("z-content"),this._content.appendChild(this._topbar),this._content.appendChild(this._mainContainer),this._pageToolBarComponent=new n,this._pageToolBarComponent.init(this._applicationChannel,this._topbar),this._triptychWrapper=new i,this._triptychWrapper.init(this._applicationChannel,this._mainContainer),this._middleContent&&this._middleContent._container&&this._applicationChannel.publish({event:"triptych-set-content",data:{side:"middle",content:this._middleContent._container}}),this.__mobileBreakpoint=this._triptychWrapper._triptych.__mobileBreakpoint},r.prototype._subscribeEvents=function(){},r.prototype.inject=function(e){e.appendChild(this._content)},r.prototype.destroy=function(){this._content=null},r}),define("DS/ENOChgActionGridUX/scripts/Wrapper/ChgSplitViewWrapper",["DS/ENOXSplitView/js/ENOXSplitView","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS"],function(e,t,i){var n=null,a=e;a.prototype.getLeftViewWrapper=function(){return UWA.extendElement(this.getLeft())},a.prototype.getRightViewWrapper=function(){return UWA.extendElement(this.getRight())},a.prototype.addRightCloseButton=function(){if(null!=this._rightPanel){var e="fonticon-expand-left";widget.body.getBoundingClientRect().width<t.TABLET_CUTOFF&&(e="fonticon-expand-right");var n=UWA.createElement("div",{class:"splitview-close fonticon "+e,id:"splitview-close",title:i.CHG_TOOLTIP_COLLAPSE,styles:{"font-size":"20px"}});n.inject(this._rightPanel);var a=this;n.onclick=function(e){a._hideSide("left"),a._rightPanel.classList.remove("right-container-mobile-view");var n=document.querySelector(".splitview-close.fonticon-expand-left");if(n)n.title=i.CHG_TOOLTIP_EXPAND,n.removeClassName("fonticon-expand-left"),n.addClassName("fonticon-expand-right");else{var r=document.querySelector(".splitview-close.fonticon-expand-right");r.title=i.CHG_TOOLTIP_COLLAPSE,a._showSide("left"),(r=UWA.extendElement(r)).removeClassName("fonticon-expand-right"),r.addClassName("fonticon-expand-left"),widget.getViewportDimensions().width<t.TABLET_CUTOFF&&(a._hideSide("right"),a._modelEvents.publish({event:"ca-on-SwipeLeft",data:{parentEvent:e}}))}}}},a.prototype.setContextForGesture=function(e){(n=this)._rightPanel.addEventListener("touchstart",s,!1),n._rightPanel.addEventListener("touchmove",l,!1),e&&e.onLeftSwipe&&(n.onLeftSwipe=e.onLeftSwipe)};var r=null,o=null;function s(e){const t=function(e){return e.touches||e.originalEvent.touches}(e)[0];r=t.clientX,o=t.clientY}function l(e){if(r&&o){var t=e.touches[0].clientX,i=e.touches[0].clientY,s=r-t,l=o-i;Math.abs(s)>Math.abs(l)&&n&&(s>0?(n._rightPanel.classList.add("right-container-mobile-view"),a.prototype._showSide.call(n,"right")):Math.abs(s)>.02*widget.body.getBoundingClientRect().width&&(n._rightPanel.classList.remove("right-container-mobile-view"),a.prototype._hideSide.call(n,"right"),n._modelEvents.publish({event:"ca-on-SwipeLeft",data:{parentEvent:e}}))),r=null,o=null}}return a}),define("DS/ENOChgActionGridUX/scripts/View/ChgExpandInputTextBox",["UWA/Core","DS/Controls/Abstract","DS/Controls/LineEditor","DS/Controls/Button","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS","DS/ENOChgActionGridUX/scripts/View/ChgCreateChangeAction","DS/ENOChgActionGridUX/scripts/View/ChgGenericCreateChangeAction","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/ENOChgActionGridUX/ENOChgActionGridUX"],function(e,t,i,n,a,r,o,s){"use strict";var l=null,c=function(){null!=l&&(l.that.lineEditor._myInput.setStyle("width","auto"),l.that.createList.inject(l.that.dropdown),l.that.lineEditor.inject(l.that.createCAContainer,"top"),l.remove(),l=null)};return t.inherit({name:"ExpandInput",_preBuildView:function(){this.elements.container=new UWA.Element("div",{class:"container-expandInput wux-tweakers",id:"quickCreateContainer"}),this.createCAContainer=new UWA.Element("div",{class:"hideBox transition"}),this.lineEditor=new i({placeholder:a.CHG_CREATE_NEW_PLACEHOLDER,sizeInCharNumber:25,selectAllOnFocus:!0,displayClearFieldButtonFlag:!0}),this.lineEditor.inject(this.createCAContainer),this.lineEditor.getContent().addClassName("prevent-ios-zoom-in"),this.dropdown=new UWA.Element("div",{class:"createCAdropdown"}),this.createList=new UWA.Element("ul",{class:"createUL"});var e=new UWA.Element("li",{class:"createLI"});this.dropdownParent=new UWA.Element("div",{class:"dropdownParent"});new UWA.Element("span",{class:"item-icon fonticon fonticon-doc cursorPointer"});UWA.createElement("span",{class:"item-text",html:a.CHG_CreateCA,title:a.CHG_CreateCA,id:"idCreateCA"}).inject(this.dropdownParent),this.dropdownParent.inject(e),e.inject(this.createList),this.createList.inject(this.dropdown),this.createList.addEvents({click:function(){"true"==s.getGlobalVariable().CHG_OLD_CA_CREATE?r.createChangeAction():o.createChangeAction(),c()}}),this.cancelBtn=new n({label:a.CHG_CANCEL_Button_Label,emphasize:"primary",domId:"expandInput_cancel_btn"}),this.cancelBtn.getContent().addClassName("expandInput_cancel_btn"),this.dropdown.inject(this.createCAContainer),this.createCAContainer.inject(this.elements.container);var t={icon:{}};t.icon.iconName="plus",t.icon.fontIconFamily=1,t.tooltip="YOLO";this.createCAContainer,this.lineEditor;this.plusBtn=new n(t),this.plusBtn.getContent().addClassName("wux-tweakers-multirep-button").addClassName("wux-tweaker-function").addClassName("wux-ui-style-icon"),this.plusBtn.inject(this.elements.container),this._parent(),this.isMultiSelection=!1;this.cancelBtn.addEventListener("click",function(){c()}),this.createList.addEventListener("click",function(){c()}),document.getElementById("zPlaneid")&&document.getElementById("zPlaneid").addEventListener("mouseup",function(e){if(c(),e.target.hasClassName("prevent-ios-zoom-in")||e.target.getParent().hasClassName("prevent-ios-zoom-in"));else if(e.target.getParent().hasClassName("icon-blue"));else{var t=document.querySelectorAll("#quickCreateContainer")[0];t&&(t.getChildren()[0].removeClassName("showBox"),t.getChildren()[1].removeClassName("icon-blue"))}}),l=null},toggleDisplayLineEditor:function(){console.log(arguments,this)},getModalInputBox:function(e){return null==l&&(l=UWA.createElement("div",{class:"input_FloatingDiv",id:"input_FloatingDiv"}),this.lineEditor.remove(),this.createList.remove(),l.addContent(this.lineEditor),l.addContent(this.createList),l.addContent(this.cancelBtn),l.that=this,l.that.lineEditor._myInput.setStyle("width","100%"),e.top&&l.setStyle("top",e.top),e.left&&(e.left+164>widget.body.getBoundingClientRect().width?(l.setStyle("left",0),l.setStyle("width","100%")):l.setStyle("left",e.left)),l.addEventListener("click",function(e){e.stopPropagation()})),l},removeModalInputBox:function(){c()}})}),define("DS/ENOChgActionGridUX/scripts/View/ChgTweakerExpandInput",["UWA/Core","DS/Tweakers/TweakerBase","DS/Utilities/Dom","DS/Utilities/Utils","DS/Core/PointerEvents","DS/Utilities/KeyboardUtils","DS/ENOChgActionGridUX/scripts/View/ChgExpandInputTextBox","DS/ENOChgActionGridUX/scripts/View/ChgCreateChangeAction"],function(e,t,i,n,a,r,o,s){"use strict";var l=t.inherit({name:"TweakerExpandInput",publishedProperties:{displayStyle:{defaultValue:"TextBox",type:"string"},value:{defaultValue:"",type:"string",advancedSetter:!0},valueType:{defaultValue:"string",type:"string"}},computeTweakerContentLength:function(){return this._getCurrentTouchMode()?19:14},_upgradeValue:function(e){return"1"===e||1===e||"true"===e||!0===e||"0"!==e&&0!==e&&"false"!==e&&!1!==e&&"undefined"}}),c=function(e,i){t.prototype.baseViewModule.call(this,e,i)};n.applyMixin(c,t.prototype.baseViewModule);var d=function(e,t){c.call(this,e,t)};return n.applyMixin(d,c),d.prototype.buildView=function(){var e=this._options.viewOptions||{};e.escapeHTML=this._tweaker.escapeHTML,e.touchMode=this._tweaker._getCurrentTouchMode(),e.disabled=this._tweaker.readOnly,e.selectAllOnFocus=!0,e.fireOnlyFromUIInteractionFlag=!0,e.autoCommitFlag=!0;var t=new o(e);this._view=t,this.setValue(this._tweaker.value)},d.prototype.handleEvents=function(){var e=this,t=this._tweaker,n=this._view;n.addEventListener("buttonclick",function(e){if(e.stopPropagation(),document.getElementsByClassName("toolbar-ca-div")[0].getBoundingClientRect().width>500)n.createCAContainer.hasClassName("showBox")?(n.createCAContainer.removeClassName("openBox"),n.createCAContainer.removeClassName("showBox"),n.plusBtn.getContent().removeClassName("icon-blue")):(n.createCAContainer.addClassName("showBox"),setTimeout(function(){n.createCAContainer.addClassName("openBox")},20),n.lineEditor._myInput.focus(),n.plusBtn.getContent().addClassName("icon-blue"));else{n.plusBtn.getContent().removeClassName("icon-blue"),n.createCAContainer.style.display="none";var i={};i.top=t.getContent().getBoundingClientRect().bottom,i.left=t.getContent().getBoundingClientRect().right,i.zIndex=40003,document.body.addContent(n.getModalInputBox(i)),n.lineEditor._myInput.focus()}}),n&&t&&(i.addEventOnElement(t,n,"focus",function(e){e.stopPropagation()}),i.addEventOnElement(t,n,"blur",function(e){e.stopPropagation(),t.onPostEdit()}),i.addEventOnElement(t,n,"uncommittedChange",function(e){e.stopPropagation(),t.onPreEdit()}),i.addEventOnElement(t,n.dropdown,"click",function(e){e.stopPropagation(),n.createCAContainer.style.setProperty("display","none"),n.plusBtn.getContent().removeClassName("icon-blue"),n.createCAContainer.removeClassName("showBox")}),i.addEventOnElement(t,n.lineEditor,"keydown",function(e){e.stopPropagation(),e.keyCode===r.ESCAPE&&t.onCancelEdit(),e.keyCode===r.ENTER&&(n.value=n.lineEditor.value,t.keyDownEventCallback?t.keyDownEventCallback(e,t,n.lineEditor):s.createBlankChangeAction(e,t,n.lineEditor),n.removeModalInputBox())}),i.addEventOnElement(t,n,"change",function(i){i.stopPropagation();var a=n.value,r=void 0;r=null==a?a:function(e,t){switch(e){case"integer":var i=parseInt(t,10);return isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"number":return i=parseFloat(t),isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"boolean":return null!==/true/i.exec(t)||"1"===t;case"string":return t?t.toString():"";case"object":return JSON.parse(t);default:return t}}(t.valueType,a),e.setTweakerValue(r)}))},d.prototype.setValue=function(e){var t,i,n=this._tweaker,a=this._view;a&&n&&(a.value=null==e?e:(t=n.valueType,"string"==typeof(i=e)?i:"object"===t?JSON.stringify(i):"integer"!==t&&"number"!==t||!(Number.isNan&&!0===Number.isNaN(i)||void 0!==isNaN&&!0===isNaN(i))?"integer"===t||"number"===t?i.toString():i:"NaN"))},l.prototype.baseViewModule=c,l.prototype.VIEW_MODULES={TextBox:{classObject:d},readOnly:{classObject:d}},l.prototype.registerViewModule=function(e,t){},l.prototype.registerkeyDownCallback=function(e){this.keyDownEventCallback=e},l}),define("DS/ENOChgActionGridUX/scripts/View/ChgChangeActionDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/ENOChgActionGridUX/scripts/View/ChgDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgActionGridUX/scripts/View/ChgTweakerExpandInput","DS/ENOChgActionGridUX/scripts/View/ChgCreateChangeAction","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/ResponsiveLargeTilesCollectionView","DS/ENOChgActionGridUX/scripts/Utils/ChgChangeActionUtil","DS/ENOChgActionGridUX/scripts/View/ChgTileViewLayout","DS/Controls/ProgressBar","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/factories/ChangeObjectFactory","DS/ENOChgActionGridUX/scripts/Utils/ChgChangeActionFeaturesUtil","DS/ENOChangeActionUX/scripts/ChangeActionInit","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","require"],function(e,t,i,n,a,r,o,s,l,c,d,u,g,p,h,m,C,v,f,w,E,D){"use strict";return e.extend({init:function(e){this._parent(e),this._modelEvents=null,"undefined"!=e&&"undefined"!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.caDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.caDatagridView.inject(this.options.target),this.caDatagridView.setStyle("width",this.options.target.offsetWidth))},render:function(){try{var e=this.processColumns(),t=this,h={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_Empty_DataGrid_Message,identifier:"width",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return f.showRMBMenuOnGrid(t,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){r.readyDragContent(e,t)}};h=UWA.merge(h,this.options),this.caDatagrid=new n(h),this.caDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,i){let n=e[0].columnsVisibleFlag;if(null!=n&&null!=n){let e=Object.keys(n);C.getGlobalVariable().customeViewList=e}widget.onRefresh(),console.log(i),console.log(t.caDatagrid)},this.tilesView=new d({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!0,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){r.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});var m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return f.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.tilesView.onContextualEvent=m,this.tilesView.buildStatusBar([{type:l.STATUS.NB_ITEMS},{type:l.STATUS.NB_SELECTED_ROWS}]);var v={expandInput:{stdTemplate:"expandInputtemplate"}},w={expandInputtemplate:{path:"DS/ENOChgActionGridUX/scripts/View/ChgTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new o}catch(e){console.log(e)}var E={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:c.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:c.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}};this.caDatagrid.getTypeRepresentationFactory().registerTypeTemplates(w),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(v),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(E),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}}),a.toolbar=this.caDatagrid.setToolbar(a.writetoolbarDefination()),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(w),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(v),(t=this).toolbar.addEventListener("onReady",function(e){var i=t.toolbar.getNodeModelByID("filterBaseCAId");i&&i.onAttributeChange(function(e){console.log("Need to update the view based on : "+e.data.changedAttributeValue)});var n=t.toolbar.getNodeModelByID("addNewBlankCAId");n&&n._associatedView.registerkeyDownCallback(s.createBlankChangeAction);var a=t.toolbar.getNodeModelByID("eyeToggle");a&&(a._associatedView.elements.internalView.elements.button.onclick=function(e){t._modelEvents.publish({event:"ca-DataGrid-toolbar-eyeToggle",data:e,context:a})})}),this.caDatagrid.buildStatusBar([{type:l.STATUS.NB_ITEMS},{type:l.STATUS.NB_SELECTED_ROWS}]),this._modelEvents.subscribe({event:"ca-DataGrid-on-search"},function(e){var i=e.query;i&&t.caDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(i)||e.options.grid.name.contains(i)?e.isVisible()||!e.options.grid.title.contains(i)&&!e.options.grid.name.contains(i)||e.show():e.hide()})}),this._modelEvents.subscribe({event:"ca-DataGrid-on-reset-search"},function(e){t.caDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),t.caDatagrid.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),t.caDatagrid.getTreeDocument().getXSO().onAdd(function(e){t._modelEvents.publish({event:"ca-DataGrid-on-click",data:{model:e.options.grid},context:e})}),t.caDatagrid.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length?t._modelEvents.publish({event:"ca-DataGrid-on-unselect-all",data:{model:e.options.grid},context:e}):t._modelEvents.publish({event:"ca-DataGrid-on-unselect",data:{model:e},context:e})}),t.tilesView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount){i.nodeModel.select(!0),t._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}),t.tilesView=new u({model:t.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!0,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){r.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});var n={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return f.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.tilesView.onContextualEvent=n,this.tilesView.buildStatusBar([{type:l.STATUS.NB_ITEMS},{type:l.STATUS.NB_SELECTED_ROWS}]),t.caDatagridView.removeChild(t.caDatagridView.getChildren()[2]);var o=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 40px)",position:"relative"},class:"catileView hideView"}),s=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_Empty_DataGrid_Message}).inject(s),t.tilesView.inject(o),s.inject(o),t.caDatagridView.addContent(o);var d=a.toolbar.getNodeModelByID("back");d&&d.updateOptions({visibleFlag:!0}),g.previousView=g.currentView;var h=a.toolbar.getNodeModelByID("view");h&&(h.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}}}),p.changeView())}},this.caDatagridView=UWA.createElement("div",{id:"outer-ca-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-ca-div"});var D=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-ca-div"});this.toolbar.inject(D);var b=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 40px)",position:"relative"},class:"content-ca-div cagridView showView nonVisible"}),A=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 40px)",position:"relative"},class:"catileView hideView"}),y=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_Empty_DataGrid_Message}).inject(y),this.caDatagrid.inject(b),this.tilesView.inject(A),y.inject(A),this.caDatagridView.addContent(D),this.caDatagridView.addContent(b),this.caDatagridView.addContent(A)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.caDatagrid.reapplySortModel()},backToSummary:function(){this.tilesView=new d({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!0,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){r.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});var e={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return f.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.tilesView.onContextualEvent=e,this.tilesView.buildStatusBar([{type:l.STATUS.NB_ITEMS},{type:l.STATUS.NB_SELECTED_ROWS}]);var t=this;this.tilesView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.caDatagridView.removeChild(this.caDatagridView.getChildren()[2]);var n=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 40px)",position:"relative"},class:"catileView hideView"}),a=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_Empty_DataGrid_Message}).inject(a),this.tilesView.inject(n),a.inject(n),this.caDatagridView.addContent(n),this._modelEvents.publish({event:"ca-back-to-summary",data:{}})},setListnersOnToolbar:function(){widget.onRefresh=function(){require(["DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout"],function(e){var t=document.getElementById("outer-ca-div");m.mask(t),r.setInfraValue().then(function(i){new w({type:"ChangeAction",information:i}).loadInfraForWidget().then(function(i){e.ChglayoutModel.empty(),m.unmask(t);var n=document.querySelector(".toolbar-ca-div"),a=new h({displayStyle:"lite",value:2,domId:"progBar"}).inject(n,"top");C.getGlobalVariable().indexMode="false",e.refreshGrid(null,null,a),C.getGlobalVariable().indexMode="true",e.refreshGrid(null,null,a)})})})},widget.onResize=function(){D("DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout").loadingViewPreference()}}})}),define("DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout",["DS/ENOChgActionGridUX/scripts/View/ChgChangeActionDataGridView","DS/ENOChgActionGridUX/scripts/Utils/ChgChangeActionUtil","DS/ENOChgActionGridUX/scripts/Model/ChgChangeDataGridModel","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/UIKIT/Mask","DS/ENOChgActionGridUX/scripts/View/ChgTileViewLayout","DS/ENOChgActionGridUX/scripts/View/ChgDataGridViewToolbar","DS/ENOChgActionGridUX/scripts/Wrapper/ChgTagNavigatorProxy","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS","DS/Controls/ProgressBar","DS/ENOChgActionGridUX/scripts/View/ChgEventHandler","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","DS/ENOChgActionGridUX/scripts/Utils/ChgChangeActionFeaturesUtil","require"],function(e,t,i,n,a,r,o,s,l,c,d,u,g,p,h,m,C,v,f){"use strict";var w={nextTotal:0,createIndexedView:function(n){var a=this,g={};g=UWA.merge(g,n),l.mask(g.target),g.columns=t.getColumns(),v.createCustomColumn().then(function(t){g.columns=[...g.columns,...t],g.treeDocument=(new i).createTreeDocument(),a.ChglayoutModel=g.treeDocument;var n=new e(g);a.caGridView=n;let m=a.caGridView.caDatagrid._customViewsManager.getCustomViews()[0].columnsVisibleFlag;if(s.getGlobalVariable().customeViewList=[],null!=m&&null!=m){let e=Object.keys(m);s.getGlobalVariable().customeViewList=e}var C=d.toolbar.getNodeModelByID("back");C&&C.updateOptions({visibleFlag:!1}),s.getGlobalVariable().indexMode="false",w.refreshGrid(),r.getCAFDData().then(function(e){o.processFacetDataPromise(e.facets).then(function(t){o.processCAListIndexed(e).then(function(r){(new i).loadDataIndexed(g.treeDocument,r),w.setPreviewURL(g.treeDocument,r),n.caDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}],n.reapplySortModel(),n.setListnersOnToolbar(),h.subscribeEvents(),0==g.treeDocument.getChildren().length?c.showEmptyView():c.hideEmptyView(),a.loadingViewPreference(),a.filterView("activeca",!1),u.init({DataContext:w}),u.setTags(null,t),n._modelEvents.subscribe({event:"ca-DataGrid-on-dblclick"},function(e){u.deactivate()}),l.unmask(g.target);var o=e.infos.next_start,s=e.infos.nresults;if(w.nextTotal+=e.infos.nresults,s<e.infos.nhits){var d=w.nextTotal/e.infos.nhits*100,m=document.querySelector(".toolbar-ca-div"),C=new p({displayStyle:"lite",value:d,domId:"progBar"}).inject(m,"top");w.addIndexedData(o,C,g)}},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)})}),g.modelEvents.subscribe({event:"ca-on-SwipeLeft"},function(e){a.backToSummary()})})},addIndexedData:function(e,t,n){r.getCAFDData(null,e,n).then(function(e){var n=o.processCAListIndexed(e);(new i).loadDataIndexed(w.ChglayoutModel,n),w.caGridView.caDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}],w.caGridView.reapplySortModel();var a=e.infos.next_start;if(w.nextTotal+=e.infos.nresults,0!=e.infos.nresults)t.value=w.nextTotal/e.infos.nhits*100,w.addIndexedData(a,t);else{t.value=100;var r=document.getElementById("progBar");null!=r&&r.remove()}},function(e){return Promise.reject(e)})},refreshLayout:function(e,t){var n=this.ChglayoutModel;c.hideEmptyView(),(new i).updateNodeIndexed(n,e,t),this.caGridView.tilesView.setActiveCell(0,!0),this.caGridView.caDatagrid.ensureNodeModelVisible(this.ChglayoutModel.getChildren()[0],!1)},refreshGrid:function(e,n,l,u){w.nextTotal=0;var g=d.toolbar.getNodeModelByID("filter"),p=(g.options.grid.semantics.label,g.options.grid.data.menu[0].state);u="selected"==p?{filterView:"activeca"}:{filterView:"inactiveCA"},"true"==s.getGlobalVariable().indexMode?r.getCAFDData(n,null,u).then(function(e){o.processFacetDataPromise(e.facets).then(function(a){o.processCAListIndexed(e).then(function(r){(new i).loadDataIndexed(w.ChglayoutModel,r),w.ChglayoutModel.unselectAll(),w.setPreviewURL(w.ChglayoutModel,r),w.caGridView.caDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}],w.caGridView.reapplySortModel(),0==w.ChglayoutModel.getChildren().length?c.showEmptyView():c.hideEmptyView();for(var o=w.ChglayoutModel.getChildren(),s=0;s<o.length;s++){var d=o[s],g=d.options.grid.id;if(t.selectedNode==g){w.ChglayoutModel.getXSO().add(d);break}}require(["DS/ENOChgActionGridUX/scripts/Wrapper/ChgTagNavigatorProxy"],function(e){"undefined"!=n&&null!=n||e.clearLocalFilter(),e.setTags(null,a),e.activate()});var p=e.infos.next_start;e.infos.nresults;if(0!=e.infos.nresults)l.value=w.nextTotal/e.infos.nhits*100,w.addIndexedData(p,l,u);else{var h=document.getElementById("progBar");null!=h&&(console.log("finish loading..............................."),h.remove())}})},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)}):"inactiveCA"!=u.filterView&&r.getTimestamp().then(function(e){var t=o.processTimestampData(e);f("DS/ENOChangeActionUX/scripts/CAPreferencesManager").updateLastIndexTime(t),r.getCASummary(t,u).then(function(e){var t=o.processCASummaryList(e),n=t.processData,s=t.memberList;a.getUserFullNameFromIDs(s).then(function(e){e.processList=n;var t=o.processedListWithName(e),a=o.makeObjList(t);r.getObjectInfo(a,["icon","image"]).then(function(e){if(t.length==e.length)for(var n=0;n<t.length;n++)t[n].icon=e[n].dataelements.icon,t[n].image=e[n].dataelements.image;(new i).loadData(w.ChglayoutModel,t),w.caGridView.caDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}],w.caGridView.reapplySortModel(),0==w.ChglayoutModel.getChildren().length?c.showEmptyView():c.hideEmptyView(),w.addMembersToNonIndexedCA(w.ChglayoutModel,t)},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)})},changeView:function(){t.changeView("GridView")},filterView:function(){var e=s.getGlobalVariable().isInitialLoad;t.filterView("activeCA",e),s.getGlobalVariable().isInitialLoad=!1},update_Title_Sev_DueDate:function(e){for(var t=w.ChglayoutModel.getChildren(),i=0;i<t.length;i++){if(t[i].options.grid.id==e.id.slice(4,e.id.length)){var n=t[i].options.statusbarIcons,a=t[i].options.statusbarIconsTooltips;if(n.shift(),a.shift(),"Low"==e.severity){var r=0,o="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";n.unshift("level-low"),a.unshift(g.CHG_TOOLTIP_SEVERIY_LOW)}else"Medium"==e.severity?(r=1,o="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium",n.unshift("level-medium"),a.unshift(g.CHG_TOOLTIP_SEVERIY_MEDIUM)):"High"==e.severity&&(r=2,o="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high",n.unshift("level-high"),a.unshift(g.CHG_TOOLTIP_SEVERIY_HIGH));var s=new UWA.Element("div",{}),l=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:o}).inject(l);var c=UWA.createElement("span",{class:"gridIconName",html:e.severity});l.inject(s),c.inject(s);var d="-";if("Unassigned"==e.dueDate)e.dueDate=void 0;else{e.dueDate=new UWA.Date(e.dueDate).strftime("%Y-%m-%d"),d=e.dueDate}var u=g.CHG_TOOLTIP_TITLE+": "+e.title+"\n"+g.CHG_TOOLTIP_NAME+": "+t[i].options.grid.name+"\n"+g.CHG_TOOLTIP_SEVERITY+": "+e.severity+"\n"+g.CHG_TOOLTIP_OWNER+": "+t[i].options.grid.responsible+"\n"+g.CHG_TOOLTIP_MATURITY+": "+t[i].options.grid.maturity;if("-"==d)var p=t[i].options.grid.maturity;else{p=t[i].options.grid.maturity+" | "+d;u=u+"\n"+g.CHG_TOOLTIP_DUEDATE+": "+d}t[i].updateOptions({label:e.title,description:p,grid:{title:e.title,severity:e.severity,severityGrade:r,sev:s.outerHTML,dueDate:e.dueDate},statusbarIcons:n,statusbarIconsTooltips:a,customTooltip:u});break}}},updateMaturity:function(e){for(var t=this,i=w.ChglayoutModel.getChildren(),n=0;n<i.length;n++){if(i[n].options.grid.id==e.id.slice(4,e.id.length)){let r=n;var a=[];let s={maturity:i[r].options.grid.policy+"."+e.maturity};a.push(s),o.getNLSForProcessedList("CASummary",a).then(function(){a.forEach(function(n){var a="-";null!=i[r].options.grid.dueDate&&null!=i[r].options.grid.dueDate&&(a=i[r].options.grid.dueDate);n.maturity;var o=g.CHG_TOOLTIP_TITLE+": "+i[r].options.grid.title+"\n"+g.CHG_TOOLTIP_NAME+": "+i[r].options.grid.name+"\n"+g.CHG_TOOLTIP_SEVERITY+": "+i[r].options.grid.severity+"\n"+g.CHG_TOOLTIP_OWNER+": "+i[r].options.grid.responsible+"\n"+g.CHG_TOOLTIP_MATURITY+": "+n.maturity,s=n.maturity;"-"!=a&&(s=s+" | "+a,o=o+"\n"+g.CHG_TOOLTIP_DUEDATE+": "+a),""!=i[r].options.grid.group&&i[r].options.grid.group&&(s=s+" | "+i[r].options.grid.group,o=o+"\n"+g.CHG_TOOLTIP_GROUP+": "+i[r].options.grid.group);var l=0;"In Work"==e.maturity?(l=1,t.update_Hold_Reject(e,!0)):"In Approval"==e.maturity?l=2:"Approved"==e.maturity&&(l=3),i[r].updateOptions({description:s,grid:{maturity:n.maturity,stateGrade:l},customTooltip:o})})})}}},update_Hold_Reject:function(e,t){for(var i=w.ChglayoutModel.getChildren(),n=0;n<i.length;n++){if(i[n].options.grid.id==e.id.slice(4,e.id.length)){var a=i[n].options.statusbarIcons,r=i[n].options.statusbarIconsTooltips,o=new UWA.Element("div",{});UWA.createElement("span",{html:i[n].options.grid.name}).inject(o);var s=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){var l=new UWA.Element("div",{class:"gridIconContainer",title:g.CHG_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(l),l.inject(s),a.push("pause"),r.push(g.CHG_TOOLTIP_HOLD)}else if("false"==e.onHold){(d=a.indexOf("pause"))>-1&&(a.splice(d,1),r.splice(d,1))}if("Reject"==e.approvalStatus){var c=new UWA.Element("div",{class:"gridIconContainer",title:g.CHG_TOOLTIP_REJECT});UWA.createElement("div",{class:"fonticon fonticon-thumbs-down rejectCA"}).inject(c),c.inject(s),a.push("thumbs-down"),r.push(g.CHG_TOOLTIP_REJECT)}else if("Approve"==e.approvalStatus){(d=a.indexOf("thumbs-down"))>-1&&(a.splice(d,1),r.splice(d,1))}else if(null==e.approvalStatus){var d;(d=a.indexOf("thumbs-down"))>-1&&(a.splice(d,1),r.splice(d,1))}s.inject(o),i[n].updateOptions({grid:{ca_name:o.outerHTML},statusbarIcons:a,statusbarIconsTooltips:r});break}}},updateOwner:function(e){for(var t=w.ChglayoutModel.getChildren(),i=0;i<t.length;i++){if(t[i].options.grid.id==e.id.slice(4,e.id.length)){var a=t[i].options.grid.name+" | "+e.newOwner,r="-";null!=t[i].options.grid.dueDate&&null!=t[i].options.grid.dueDate&&(r=t[i].options.grid.dueDate);var o=g.CHG_TOOLTIP_TITLE+": "+t[i].options.grid.title+"\n"+g.CHG_TOOLTIP_NAME+": "+t[i].options.grid.name+"\n"+g.CHG_TOOLTIP_SEVERITY+": "+t[i].options.grid.severity+"\n"+g.CHG_TOOLTIP_OWNER+": "+e.newOwner+"\n"+g.CHG_TOOLTIP_MATURITY+": "+t[i].options.grid.maturity;"-"!=r&&(o=o+"\n"+g.CHG_TOOLTIP_DUEDATE+": "+r),""!=t[i].options.grid.group&&t[i].options.grid.group&&(o=o+"\n"+g.CHG_TOOLTIP_GROUP+": "+t[i].options.grid.group);var l="/api/user/getpicture/login/"+e.userName+"/format/normal",c=s.getGlobalVariable().computeSwymUrl(l),d=new UWA.Element("div",{}),u=new UWA.Element("div",{class:"assignee"}),p="";if(s.getGlobalVariable().isSwymInstalled)p=UWA.createElement("img",{class:"userIcon",src:c});else{var h=n.getAvatarDetails(e.newOwner);(p=UWA.createElement("div",{html:h.avatarStr,class:"avatarIcon"})).style.setProperty("background",h.avatarColor)}p.inject(u);var m=UWA.createElement("span",{class:"userName",html:e.newOwner});u.inject(d),m.inject(d),t[i].updateOptions({subLabel:a,grid:{user:d.outerHTML},customTooltip:o});break}}},updateGroup:function(e){for(var t=w.ChglayoutModel.getChildren(),i=0;i<e.changeactions.length;i++)for(var n=e.changeactions[i].replace("pid:",""),a=0;a<t.length;a++)if(t[a].options.grid.id==n){var r=w.createDescForGivenNode(t[a],e),o=w.createCustoTooltipForGivenNode(t[a],e);t[a].updateOptions({description:r,grid:{group:e.title,groupId:e.groupId},customTooltip:o})}},createDescForGivenNode:function(e,t){var i="",n="-";null!=e.options.grid.dueDate&&null!=e.options.grid.dueDate&&(n=e.options.grid.dueDate);i=e.options.grid.maturity;return"-"!=n&&(i=i+" | "+n),""!=t.title&&(i=i+" | "+t.title),i},createCustoTooltipForGivenNode:function(e,t){var i="-";null!=e.options.grid.dueDate&&null!=e.options.grid.dueDate&&(i=e.options.grid.dueDate);var n=g.CHG_TOOLTIP_TITLE+": "+e.options.grid.title+"\n"+g.CHG_TOOLTIP_NAME+": "+e.options.grid.name+"\n"+g.CHG_TOOLTIP_SEVERITY+": "+e.options.grid.severity+"\n"+g.CHG_TOOLTIP_OWNER+": "+e.options.grid.owner+"\n"+g.CHG_TOOLTIP_MATURITY+": "+e.options.grid.maturity;return"-"!=i&&(n=n+"\n"+g.CHG_TOOLTIP_DUEDATE+": "+i),""!=t.title&&(n=n+"\n"+g.CHG_TOOLTIP_GROUP+": "+t.title),n},updateMembers:function(e){for(var t=w.ChglayoutModel.getChildren(),i=0;i<t.length;i++){if(t[i].options.grid.id==e.id.slice(4,e.id.length)){var a=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"members"}),l="",c="",d="",u="",g="",p="",h=e.allpersons;h.sort(function(e,t){return e.fullName<t.fullName?-1:e.fullName>t.fullName?1:0});for(var m=0;m<h.length;m++){if(h[m].role.contains("contributor")){l=l+h[m].fullName+" ("+h[m].userName+"),\n",u=u+h[m].fullName+" ("+h[m].userName+"),";var C="/api/user/getpicture/login/"+h[m].userName+"/format/normal",v=s.getGlobalVariable().computeSwymUrl(C),f=new UWA.Element("div",{class:"assignee"}),E="";if(s.getGlobalVariable().isSwymInstalled)E=UWA.createElement("img",{class:"userIcon",src:v});else{var D=n.getAvatarDetails(h[m].fullName);(E=UWA.createElement("div",{html:D.avatarStr,class:"avatarIcon"})).style.setProperty("background",D.avatarColor)}E.inject(f),f.inject(a)}if(h[m].role.contains("reviewer")){if("Person"==h[m].type){c=c+h[m].fullName+" ("+h[m].userName+"),\n",g=g+h[m].fullName+" ("+h[m].userName+"),";C="/api/user/getpicture/login/"+h[m].userName+"/format/normal",v=s.getGlobalVariable().computeSwymUrl(C);var b=new UWA.Element("div",{class:"assignee"});E="";if(s.getGlobalVariable().isSwymInstalled)E=UWA.createElement("img",{class:"userIcon",src:v});else{D=n.getAvatarDetails(h[m].fullName);(E=UWA.createElement("div",{html:D.avatarStr,class:"avatarIcon"})).style.setProperty("background",D.avatarColor)}}else if("Route Template"==h[m].type){b=new UWA.Element("div",{class:"assignee"}),E="";var A=h[m].fullName;c=c+h[m].fullName+",\n",g=g+h[m].fullName+" ("+h[m].userName+"),";var y=s.getGlobalVariable().computeUrl("/snresources/images/icons/small/iconSmallRouteTemplate.png");E=UWA.createElement("img",{class:"userRTIcon",src:y});UWA.createElement("span",{class:"userName",html:A})}E.inject(b),b.inject(r)}if(h[m].role.contains("follower")){d=d+h[m].fullName+" ("+h[m].userName+"),\n",p=p+h[m].fullName+" ("+h[m].userName+"),";C="/api/user/getpicture/login/"+h[m].userName+"/format/normal",v=s.getGlobalVariable().computeSwymUrl(C);var S=new UWA.Element("div",{class:"assignee"});E="";if(s.getGlobalVariable().isSwymInstalled)E=UWA.createElement("img",{class:"userIcon",src:v});else{D=n.getAvatarDetails(h[m].fullName);(E=UWA.createElement("div",{html:D.avatarStr,class:"avatarIcon"})).style.setProperty("background",D.avatarColor)}E.inject(S),S.inject(o)}}u=u.slice(0,-1),l=l.slice(0,-2),a.set({title:l}),g=g.slice(0,-1),c=c.slice(0,-2),r.set({title:c}),p=p.slice(0,-1),d=d.slice(0,-2),o.set({title:d}),t[i].updateOptions({grid:{assignees:a.outerHTML,reviewers:r.outerHTML,followers:o.outerHTML,assigneeGroup:u,reviewerGroup:g,followerGroup:p}});break}}},updateReferential:function(e){for(var t=w.ChglayoutModel.getChildren(),i=[],n=[],a=0;a<t.length;a++){if(t[a].options.grid.id==e.id.slice(4,e.id.length)){if(w.setPreviewURLForNonIndexed(t[a],e.referentials),e.referentials.length>0){if("attach"!=t[a].options.grid.referential){i=t[a].options.statusbarIcons,n=t[a].options.statusbarIconsTooltips;i.push("attach"),n.push(g.CHG_TOOLTIP_ATTACHMENT),t[a].updateOptions({grid:{referential:"attach"},statusbarIcons:i,statusbarIconsTooltips:n})}}else{i=t[a].options.statusbarIcons,n=t[a].options.statusbarIconsTooltips;var r=i.indexOf("attach");r>-1&&(i.splice(r,1),n.splice(r,1)),t[a].updateOptions({grid:{referential:"false"},statusbarIcons:i,statusbarIconsTooltips:n})}break}}},sortBySeverity:function(){d.sortingData.menu[1].fonticon.content=d.sortingData.menu[1].fonticon.content.replace(" icon-blue","");var e=w.caGridView,t=d.toolbar.getNodeModelByID("sorting");d.sortingData.menu[0].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(d.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.caDatagrid.sortModel=[{dataIndex:"sev",sort:"asc"}]):(d.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.caDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:d.sortingData}})},sortByMaturity:function(){d.sortingData.menu[0].fonticon.content=d.sortingData.menu[0].fonticon.content.replace(" icon-blue","");var e=w.caGridView,t=d.toolbar.getNodeModelByID("sorting");d.sortingData.menu[1].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(d.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.caDatagrid.sortModel=[{dataIndex:"maturity",sort:"asc"}]):(d.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.caDatagrid.sortModel=[{dataIndex:"maturity",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:d.sortingData}})},backToSummary:function(){var e=d.toolbar.getNodeModelByID("back");e&&e.updateOptions({visibleFlag:!1}),t.selectedNode="",w.caGridView.backToSummary();var i="";"Grid"==t.previousView?(i="view-list",w.changeView()):(i="view-small-tile",c.changeView());var n=d.toolbar.getNodeModelByID("view");n&&n.updateOptions({grid:{semantics:{icon:{iconName:i}}}})},addMembersToNonIndexedCA:function(e,t){for(var o=e.getChildren(),s=0;s<t.length;s++)for(var l=0;l<o.length;l++){var c=o[l];c.options.grid.id==t[s].id&&r.getCAMembers(c).then(function(e){var t=n.createMemberList(e.members),r=e;a.getUserFullNameFromIDs(t).then(function(e){e.processList=r;var t=n.processedMemberListWithName(e);(new i).addCAMembers(t.nodeModel,t.members,t.routeTemplate),(new i).addReferentials(t.nodeModel,t.referentials),w.setPreviewURLForNonIndexed(t.nodeModel,t.referentials)},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)})}},setPreviewURL:function(e,t){var n=[],a=[];t.forEach(function(e){var t=e.id,i=e.referentialList,r={caPhyid:t,referentialList:i,previewURL:e.previewURL};n.push(r),0!=i.length&&(a=a.concat(i))});var s=[];0!=a.length&&(a=a.filter(function(e,t,i){return i.indexOf(e)===t}),r.getDocumentImage(a).then(function(t){s=null!=t.referentialInfo?t.referentialInfo.results:[];for(var a=o.getThumbnailURL(n,s),r=e.getChildren(),l=0;l<r.length;l++){var c=r[l],d=c.options.grid.id;if(a.hasOwnProperty(d)){var u=a[d];(new i).setThumbnailURL(c,u)}}}))},setPreviewURLForNonIndexed:function(e,n){var a=[];n.forEach(function(e){var t=e.id.slice(4);a.push(t)});var s=e.options.grid.id;if(a.length>0){r.getObjectInfo(a,["icon","image"]).then(function(n){var a=o.getThumbnailURLForNonIndexed(e,n);a=""!=a?a:preview_url,(new i).setThumbnailURL(e,a);var r=jQuery(".thumbnail");null!=r&&null!=r&&1==r.length&&s==t.selectedNode&&(a="url('"+a+"')",r[0].style.setProperty("background-image",a))})}},removeDataFromGrid:function(e,t){var i=this,n=(this.ChglayoutModel,e.id);this.ChglayoutModel.getChildren();this.ChglayoutModel.search({shouldStop:function(e){if(e.options.grid.id===n){if(i.removingNode(e),t){var a=e.options.grid.title;m.success(a+" "+g.delete_CA_message)}return!0}return!1}})},removingNode:function(e){this.ChglayoutModel.removeRoot(e)},loadingViewPreference:function(){var e=f("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=C.MOBILE_CUTOFF){var t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(c.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{var i=e.getCASummaryViewDesktop();void 0===i||"GridView"===i?this.changeView():c.changeView()}},assignGroupToCAs:function(){var e=w.ChglayoutModel.getSelectedNodes(),t=[];if(e.length>0)if(w.CheckGroupCreateCondition(e)){for(var i=0;i<e.length;i++){var n="pid:"+e[i].options.grid.id;t.push(n)}var a=e[0].options.grid.groupId,r={facetName:"createGroupFromSummary",ChangeActionList:t,oldGroupId:a=""==a||null==a?"":a.indexOf("pid:")>-1?a:"pid:"+a,oldGroupTitle:e[0].options.grid.group};require(["DS/ENOChangeActionUX/scripts/Views/ChgChangeActionCreateGroup"],function(e){e.createGroup(r)})}else m.error(g.CHG_GROUP_MULTI_CREATE_WARN);else m.error(g.CHG_GROUP_CREATE_WARN)},CheckGroupCreateCondition:function(e){for(var t=!0,i=e[0].options.grid.groupId,n=1;n<e.length;n++){if(i!=e[n].options.grid.groupId){t=!1;break}}return t}};return w}),define("DS/ENOChgActionGridUX/scripts/View/ChgChangeActionHome",["UWA/Core","DS/ENOChgActionGridUX/scripts/Wrapper/ChgSplitViewWrapper","DS/CoreEvents/ModelEvents","DS/ENOChgActionGridUX/scripts/View/ChgzApplicationFrame","DS/ENOChgActionGridUX/scripts/View/ChgWelcomePanelWrapper","DS/Controls/Expander","DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout","DS/ENOChgActionGridUX/scripts/Wrapper/ChgIDCardWrapper","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalVariable","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","DS/ENOChgActionGridUX/scripts/Utils/ChgChangeActionUtil","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,r,o,s,l,c,d,u,g,p){"use strict";return{init:function(t,s){var d={name:"appChannelModleEvent"};this._applicationChannel=new i(d),this._welcomePanelComponent=new a,this._applicationContainer=document.createElement("div"),e.extendElement(this._applicationContainer),widget.body.setContent(this._applicationContainer),c.getImmersiveFrame().inject(this._applicationContainer),this._zApplicationFrame=new n,this._zApplicationFrame._init(this._applicationChannel,this._welcomePanelComponent),c.getImmersiveFrame().setContentInBackgroundLayer(this._zApplicationFrame),this._welcomePanelComponent.init(this._applicationChannel,this._zApplicationFrame._triptychWrapper.getLeftPanelContainerTriptych()),this._applicationChannel.publish({event:"triptych-set-size",data:{side:"left",size:200}}),this._container=e.createElement("div"),this._container.classList.add("changeAction-landingpage"),this._recentCAsContainer=e.createElement("div"),this._recentCAsContainer.classList.add("recent-cas"),this._emptyDiv=e.createElement("div",{id:"emptyDivCARecent",styles:{color:"silver","text-align":"center","justify-content":"center",padding:"50px"}}),this._contentsContainer=e.createElement("div",{styles:{height:"100%"}}),e.createElement("div",{id:"skeleton-container",text:l.NO_INFORMATION_CA,class:"skeleton-container",styles:{height:"100%",width:"100%",Display:"flex","align-items":"center","justify-content":"center"}}).inject(this._contentsContainer),this._emptyDiv.setAttribute("id","emptyContent"),this._emptyDiv.setHTML("<span class='fonticon fonticon-wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-change'></span><br/><font-size='17px>"+l.CHG_No_RecentItems+"</font>"),this._recentCAsContainer.appendChild(this._emptyDiv);var u=this,p=!1;this._applicationChannel.subscribe({event:"splitview-size-changed"},function(e){!1!==p&&clearTimeout(p),p=setTimeout(function(){g.updateIDCardSize(e)},500)}),this._myMVsContainer=this.getSplitView(this._applicationChannel),this.setSplitViewEvent(this._myMVsContainer),this._myMVsContainer.addRightCloseButton(),this._myMVsContainer.getRight().appendChild(this._contentsContainer);var h=l.CHG_Recent_CA_Header;this._expander1=new r({style:"simple",header:h,body:this._recentCAsContainer,expandedFlag:!0}),this._container.appendChild(this._myMVsContainer.getContent()),this._zApplicationFrame._triptychWrapper.getMainPanelContainer().appendChild(this._container);var m={};m.modelEvents=this._applicationChannel,m.target=this._myMVsContainer.getLeftViewWrapper(),o.createIndexedView(m);var C=this._applicationChannel;widget.addEvents({onSearch:function(e){C.publish({event:"ca-DataGrid-on-search",data:{query:e},context:u})},onResetSearch:function(e){C.publish({event:"ca-DataGrid-on-reset-search",data:{query:e},context:u})}})},getSplitView:function(e){var i=25,n=g.getIDCardSize();null===n||isNaN(n)||(i=n);var a=new t,r={modelEvents:e,withtransition:!0,withoverflowhidden:!1,params:{leftWidth:i,rightWidth:75,leftMinWidth:25,leftVisible:!0,rightVisible:!1},rightMaximizer:!0,leftMaximizer:!1,resizable:!0};return a.init(r),a.setContextForGesture(),a},setSplitViewEvent:function(e){var t=e,i="";t._modelEvents.subscribe({event:"ca-DataGrid-on-dblclick"},function(e){i=e.model.id,u.selectedNode=i;var n={};n.target=t.getRightViewWrapper(),n.pid=e.model.id,n.data=e.model,n._modelEvents=t._modelEvents,t._rightPanel.classList.add("right-container-mobile-view"),document.getElementById("splitview-close")&&document.getElementById("splitview-close").hasClassName("fonticon-expand-left")&&widget.body.getBoundingClientRect().width<d.TABLET_CUTOFF&&(document.getElementById("splitview-close").removeClassName("fonticon-expand-left"),document.getElementById("splitview-close").addClassName("fonticon-expand-right")),t._showSide("right"),s.killTaggerProxies(-1),s.CAIDCardWrapper(n)}),t._modelEvents.subscribe({event:"ca-DataGrid-on-click"},function(e){if(t._rightVisible){i=e.model.id,u.selectedNode=i;var n={};n.target=t.getRightViewWrapper(),n.pid=e.model.id,n.data=e.model,n._modelEvents=t._modelEvents,s.killTaggerProxies(-1),s.CAIDCardWrapper(n)}var a={[e.model.id]:{id:e.model.id,name:e.model.name,title:e.model.title,type:e.model.type}},r={metadata:{appId:widget.id,appName:widget.getValue("appId"),timestamp:Math.floor(Date.now())},data:{paths:[e.model.id],attributes:a},version:"1.0"};p.publish("DS/Object/select",r)}),t._modelEvents.subscribe({event:"ca-DataGrid-on-addChild"},function(e){if(t._rightVisible){i=e.model.id;var n={};n.target=t.getRightViewWrapper(),n.pid=e.model.id,n.data=e.model,n._modelEvents=t._modelEvents,s.killTaggerProxies(-1),s.CAIDCardWrapper(n)}}),t._modelEvents.subscribe({event:"ca-DataGrid-on-unselect"},function(e){if(t._rightVisible&&e.model.options.grid.id==i){i=e.model.getTreeDocument().getSelectedNodes()[0].options.grid.id;var n={};n.target=t.getRightViewWrapper(),n.pid=e.model.getTreeDocument().getSelectedNodes()[0].options.grid.id,n.data=e.model.getTreeDocument().getSelectedNodes()[0].options.grid,n._modelEvents=t._modelEvents,s.killTaggerProxies(-1),s.CAIDCardWrapper(n)}}),t._modelEvents.subscribe({event:"ca-DataGrid-on-unselect-all"},function(e){t._rightVisible&&(t.getRightViewWrapper().empty(),t.getRightViewWrapper().setHTML("<div class='noInfo'>"+l.CHG_NO_INFO_AVAILABLE+"</div>"))}),t._modelEvents.subscribe({event:"ca-DataGrid-toolbar-eyeToggle"},function(e){t._rightVisible?t._hideSide("right"):t._showSide("right")}),t._modelEvents.subscribe({event:"ca-back-to-summary"},function(e){t._rightVisible&&(t._hideSide("right"),p.publish("ca-back-to-summary-hide-slidein"))})}}}),define("DS/ENOChgActionGridUX/scripts/View/ChgChangeActionDelete",["UWA/Core","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChgActionGridUX/scripts/View/ChgDataGridLayout","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],function(e,t,i,n,a,r,o,s,l){"use strict";return{deleteCA:function(e){var a=e.nodeModel.options.grid.id,s=e.nodeModel.options.grid.name,c=e.nodeModel.options.grid.title,d=[{label:n.CHG_OK_Button_Label,handler:function(){var e=[],s={physicalid:a};e.push(s),t.deleteObjectStructure(e).then(function(e){if(console.log(e),e.results.length>0){e.results[0].name;var t=l("DS/ENOChangeActionUX/scripts/CAPreferencesManager"),a=t.getLastIndexTime(),o=t.getLastDeleteTime();(null!=o||""!=o)&&o<a&&t.removeFromCASummaryDeletePID([]);var s=Math.round((new Date).getTime()/1e3);t.updateLastDeleteTime(s),t.addToCASummaryDeletePID(e.results[0].physicalid);var c={id:e.results[0].physicalid};r.removeDataFromGrid(c,!0)}else i.warn(n.Block_delete_CA_message)},function(e){return Promise.reject(e)}),o.closeDialog()},className:"primary"},{label:n.CHG_CANCEL_Button_Label,handler:function(){o.closeDialog()},className:"default"}],u={title:n.CHG_CA_Delete_Info_Title,content:n.CHG_Delete_Info_Content+"<br><br>"+c+" ("+s+")",buttonArray:d};o.launchInfoDailog(u)}}});