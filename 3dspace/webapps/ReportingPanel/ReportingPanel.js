define("DS/ReportingPanel/Filter/ReportingFilter",["UWA/Class/View","i18n!DS/ReportingPanel/assets/nls/ReportingPanelFilterNls","UWA/Core","DS/Controls/Toggle","DS/Controls/TooltipModel","css!DS/ReportingPanel/ReportingPanel","DS/Controls/ButtonGroup"],function(e,t,n,i,o,r,a){var l=[],s="",c={};return e.extend({launchReportFilter:function(e){_objparam=e,this._filterObject(e)},_filterObject:function(e){var t,n=UWA.createElement("div",{class:"toggle-container"}),i=new a({type:"checkbox"});t=this._tooltipValue(e),(i=this._createAllCheckbox(i,e,t)).inject(n);var o=document.getElementsByClassName("filterDiv_container")[0];n.inject(o),i.addEventListener("buttonclick",e=>this._filterChange(e))},_tooltipValue:function(e){for(var t=[],n=0,i=0;i<e._column.length;i++)if(1==e._column[i].isFilter){_filterColumn=e._column[i];for(var o=0;o<_filterColumn.filterOptions.length;o++)null!=_filterColumn.filterOptions[o].tooltip&&(t[n]=_filterColumn.filterOptions[o].tooltip,n++)}return t},_createAllCheckbox:function(e,n,r){var a=1;if(c["0checkboxID"]={filterName:t.ALL,state:!0},r.length>-1){var u=new i({type:"checkbox",id:"0checkboxID",label:t.ALL,value:"0checkboxID",checkFlag:!1});e.addChild(u),u.tooltipInfos=new o({shortHelp:t.ALL})}else{u=new i({type:"checkbox",id:"0checkboxID",label:t.ALL,value:"0checkboxID",checkFlag:!1});e.addChild(u)}itr=0;for(var d=0;d<n._filterData.length;d++){l=n._filterData[d].value;for(var g=0;g<l.length;g++){var f=l[g].key,h=l[g].value;if(h=1==h,s=a+"checkboxID",0!=r.length){u=new i({type:"checkbox",id:s,label:f,value:s,checkFlag:h});e.addChild(u),u.tooltipInfos=new o({shortHelp:r[itr]}),itr++}else{u=new i({type:"checkbox",id:s,label:f,value:s,checkFlag:h});e.addChild(u)}c[s]={filterName:f,state:!1},a++}}return e},ManageCheckbox:function(e){var t=!1,n=e.currentTarget.getChildren()[0].dsModel,i=!1;if("0checkboxID"==e.dsModel.value&&1==e.dsModel.checkFlag){if(i=!0,n.checkFlag=!0,i){for(var o=1;o<e.currentTarget.getChildren().length;o++)e.currentTarget.getChildren()[o].dsModel.checkFlag=!1;for(let e in c)for(var r=0;r<_objparam._filterData.length;r++)for(var a=_objparam._filterData[r],l=0;l<a.value.length;l++)e.state=a.value[l].value=!1}}else if("0checkboxID"==e.dsModel.value&&0==e.dsModel.checkFlag){n.checkFlag=!0;for(o=1;o<e.currentTarget.getChildren().length;o++)e.currentTarget.getChildren()[o].dsModel.checkFlag=!1;for(let e in c)for(r=0;r<_objparam._filterData.length;r++)for(a=_objparam._filterData[r],l=0;l<a.value.length;l++)e.state=a.value[l].value=!1}else if("0checkboxID"!=e.dsModel.value)if(1==e.dsModel.checkFlag){o=0;for(let t in c)if(0!=o){s=e.currentTarget.getChildren()[o].dsModel.checkFlag,o++;for(r=0;r<_objparam._filterData.length;r++)for(a=_objparam._filterData[r],l=0;l<a.value.length;l++)if(a.value[l].key==c[t].filterName){c[t].state=a.value[l].value=s;break}}else c["0checkboxID"].state=!1,n.checkFlag=!1,o++}else{for(o=1;o<e.currentTarget.getChildren().length;o++)if(1==e.currentTarget.getChildren()[o].dsModel.checkFlag){t=!0;break}if(0==t){n.checkFlag=!0;for(let e in c)for(r=0;r<_objparam._filterData.length;r++)for(a=_objparam._filterData[r],l=0;l<a.value.length;l++)e.state=a.value[l].value=!1}else{var s;o=0;for(let t in c)if(0!=o){s=e.currentTarget.getChildren()[o].dsModel.checkFlag,o++;for(r=0;r<_objparam._filterData.length;r++)for(a=_objparam._filterData[r],l=0;l<a.value.length;l++)if(a.value[l].key==c[t].filterName){c[t].state=a.value[l].value=s;break}}else c["0checkboxID"].state=!1,n.checkFlag=!1,o++}}},_filterChange:function(e){this.ManageCheckbox(e);var t=_objparam._filterData,n=_objparam._column;this._CloneData=JSON.parse(JSON.stringify(_objparam._dataSetCopy)),n.shift(),this._performFilter(t,this._CloneData,n),_objparam.fillTreeDoc(this._CloneData,n)},checkIfAllBlank:function(e){for(var t=0;t<e.length;t++)if(!0===e[t].value)return!1;return!0},_performFilter:function(e,t,n){for(var i=e.length,o=0;o<n.length;o++)if(!0===n[o].isFilter){0;for(var r=0;r<i;r++)if(n[o].dataIndex===e[r].key){var a={},l=e[r];a.value=o,l.index=a.value}}for(o=0;o<e.length;o++)for(var s=e[o].value,c=e[o].index,u=0;u<t.length;u++){var d=!1;if(!0!==this.checkIfAllBlank(s)){for(r=0;r<s.length;r++)if(!0===s[r].value){var g=t[u][c];if(s[r].key.toUpperCase()===g.toUpperCase()){d=!0;break}}0==d&&(t.splice(u,1),u--)}}}})}),define("DS/ReportingPanel/SidePanelView",["UWA/Class/View","DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/models/EditPropModel","i18n!DS/ReportingPanel/assets/nls/ReportingPanelNls"],function(e,t,n,i,o){"use strict";var r=null;return e.extend({slideInContent:"",setup:function(){this.slideInContent=UWA.createElement("div",{id:"slideInPropertiesContent",styles:{height:"95%",width:"100%"}})},getPlatformId:function(){return"undefined"!=typeof widget&&widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise"},buildSlideIn:function(e,a,l,s){var c=new t({typeOfDisplay:n.ALL,displayType:n.STANDARD,readOnly:!1,extraNotif:!1,setEditButton:!1,readOnly:!0});c.addFacets([{position:1,require:"DS/ENORIPE_Relations/views/RelationsTab",facet:{name:"relations",text:o.get("relations_tab"),icon:"object-related"}}]);var u=e,d=this.getPlatformId(),g=[],f=new i({metatype:"businessobject",tenant:d,objectId:u});g.push(f),c.initDatas(g),c.inject(this.slideInContent),r=UWA.extendElement(this.slideInContent);var h=l.getRightPanelContent();return r.inject(h),r}})}),define("DS/ReportingPanel/toolbar/ReportingToolbar",["UWA/Class/View","DS/Handlebars/Handlebars4","DS/CoreEvents/ModelEvents","text!DS/ReportingPanel/toolbar/html/ReportingToolbar.html","i18n!DS/ReportingPanel/assets/nls/ReportingPanelNls","css!DS/ReportingPanel/ReportingPanel","css!DS/UIKIT/UIKIT.css"],function(e,t,n,i,o,r,a){"use strict";var l,s=t.compile(i),c=!1;return e.extend({name:"toolbar-view",className:function(){return this.getClassNames("-container")},tagName:"div",domEvents:{"click .information-panel":"informationIconClick","click .filter-panel":"filterIconClick","click .export-panel":"exportIconClick"},init:function(e){for(var t in e._self=this,e.isFilterIconShow=!0!==e.isFilterIconShow&&!1!==e.isFilterIconShow||e.isFilterIconShow,this.modelEvents=e.model,this._subcribe(),e)this[t]=e[t];this._parent(e)},setup:function(e){UWA.is(e.className)&&this.container.addClassName(e.className),e.information_nls_name=o.Information,e.export_nls_name=o.Export,e.filter_nls_name=o.Filter,this.container.setHTML(s(e))},render:function(e){return this},_subcribe:function(){this.modelEvents.subscribe({event:"ReportingPanelEvent-info-icon-close"},function(){l.classList.remove("selected")})},informationIconClick:function(){var e=this.container.getElement(".information-panel");e&&(e=e.getElement(".fonticon"),l=e,e.classList.contains("selected")?(c=!0,e.classList.remove("selected")):(c=!1,e.classList.add("selected"))),c?this.modelEvents.publish({event:"ReportingPanelEvent-info-panel-close"}):this.modelEvents.publish({event:"ReportingPanelEvent-info-panel-open"})},filterIconClick:function(){var e=this.container.getElement(".filter-panel");e&&(e=e.getElement(".fonticon"),l=e,e.classList.contains("selected")?(c=!0,e.classList.remove("selected")):(c=!1,e.classList.add("selected"))),c?this.modelEvents.publish({event:"ReportingPanelEvent-filter-panel-close"}):this.modelEvents.publish({event:"ReportingPanelEvent-filter-panel-open"})},exportIconClick:function(){this.container.getElement(".export-panel")&&this.modelEvents.publish({event:"ReportingPanelEvent-export-panel-open"})}})}),define("DS/ReportingPanel/WidgetMaximizeHandler",["UWA/Class","UWA/Controls/Abstract"],function(e,t){"use strict";return t.extend({init:function(){if(window&&window.parent&&window.parent.document&&window.frameElement){var e=window.frameElement.id.replace("frame","wi");this.widget=window.parent.document.querySelector("."+e),this.widget&&(this.btnContainer=this.widget.querySelector(".moduleHeader"))}this._observeButtons(),this.isMaximized=!1,this._updateHandlers()},maximize:function(){this._maximize();var e=this;return new UWA.Class.Promise(function(t,n){e._wait(function(){t(null)})})},restore:function(){this._restore();var e=this;return new UWA.Class.Promise(function(t,n){e._wait(function(){t(null)})})},destroy:function(){this.maximizedObserver&&(this.maximizedObserver.disconnect(),this.maximizedObserver=null)},_observeButtons:function(){if(this.btnContainer){var e=this;this.maximizedObserver=new MutationObserver(function(t){e._isWidgetMaximized()!==this.isMaximized&&(e._updateHandlers(),e.dispatchEvent("widget-maxmized-changed",e.isMaximized))}),this.maximizedObserver.observe(this.btnContainer,{attributes:!0})}},_isWidgetMaximized:function(){return!!this.btnContainer&&null!==this.btnContainer.querySelector(".fonticon-resize-small")},_updateHandlers:function(){if(this._maximize=function(){},this._restore=function(){},this._wait=function(e){e()},this.btnContainer){var e=this.btnContainer.querySelector(".fonticon-resize-full"),t=this.btnContainer.querySelector(".fonticon-resize-small"),n=this,i=function(e,t){if(e.gotEl||n.btnContainer.querySelector(e.cls)&&(e.gotEl=!0),e.gotNewW){if(1===e.gotNewW){var o;(o=n.widget.getBoundingClientRect().width)===e.oldW?e.gotNewW=2:e.oldW=o}}else(o=n.widget.getBoundingClientRect().width)!=e.oldW&&(e.gotNewW=1,e.oldW=o);e.gotEl&&e.gotNewW&&2===e.gotNewW?(n._updateHandlers(),t()):++e.cnt<30?setTimeout(i,100,e,t):t()},o=this.widget.getBoundingClientRect().width;e?(n.isMaximized=!1,this._maximize=function(){var e=n.btnContainer.querySelector(".fonticon-resize-full");e&&(e.click(),n.isMaximized=!0)},this._wait=i.bind(null,{oldW:o,cnt:0,cls:".fonticon-resize-small"})):t&&(n.isMaximized=!0,this._restore=function(){var e=n.btnContainer.querySelector(".fonticon-resize-small");e&&(e.click(),n.isMaximized=!1)},this._wait=i.bind(null,{oldW:o,cnt:0,cls:".fonticon-resize-full"}))}}})}),define("DS/ReportingPanel/WidgetServices",["UWA/Array","UWA/Widget","UWA/Utils","UWA/Json","UWA/Core","DS/Controls/ProgressBar","DS/WAFData/WAFData"],function(e,t,n,i,o,r,a){"use strict";var l=!1,s=!1,c=!1,u={},d={},g={},f=null,h={setReplayODT:function(e){l=e},isReplayODT:function(){return l},isReplayedODT:function(){return this.isReplayODT()||"infra_odt_wgd"===this.getWidgetId()||!0===window.isReplayODT},isTransientWidget:function(){var e=this.getWidgetId();return!!e&&0===e.indexOf("preview")},setODTMultiSel:function(e){s=e},isMultiSelODT:function(){return s},isTouchDevice:function(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},setODTComment:function(e){c=e},isCommentODT:function(){return c},getProdLevel:function(){return this.isReplayODT()?0:2},generateUniqueId:function(){return(new Date).getTime()+""+10*Math.random()},commonChar:function(e,t,n){var i=e,o=t;i.length>o.length&&(i=t,o=e);for(var r={},a=0,l=0;l<i.length&&(0===a||!n);l++){var s=i[l];!r[s]&&o.indexOf(s)>=0&&a++,r[s]=!0}return a},removeDuplicate:function(t,n){var i=[];if(null!=t&&e.isArray(t)){var o={};t.forEach(function(e){var t=n(e);1!==o[t]&&(o[t]=1,i.push(e))})}return i},arrayContains:function(e,t,n){return this.arrayContains2(e,t,function(e,t){return n(e)==n(t)})},arrayContains2:function(e,t,n){var i=-1;return e.every(function(e,o){return!n(e,t)||(i=o,!1)}),i},getImageUser:function(e,t){var n="";n=3==e?"fonticon fonticon-users-group":2==e?"fonticon fonticon-users":"fonticon fonticon-user";return"medium"===t&&(n+=" fonticon-2x "),{tag:"span",class:n}},getUrl:function(){return window.location.href},getRealPath:function(e,t,n){var i="";if(null==n&&(n=!1),(t=t||this.getWidgetObject())&&"function"==typeof t.getUrl&&0!=this.getProdLevel()){var o=t.getUrl();""!=(i=o.substring(0,o.indexOf("/webapps")))&&null!=i&&!1===n?i+="/webapps/":(i=t.getUrl(),i=(i=this.removeParameterOfUrl(i)).substring(0,i.lastIndexOf("/")),n&&(i+="/"))}else i=this.getUrl(),i=this.removeParameterOfUrl(i);return UWA.Utils.buildUrl(i,e)},removeParameterOfUrl:function(e){var t=e.split("?");if(t.length>0)return t[0]},startProgress:function(e,t,n){if(!this.isProgressBusy()){if(this.currentProgressBar=t.partisionedProgressLabel,this.labelWaitingOperation=UWA.i18n(t.partisionedProgressLabel),this.progressContextDiv=t.progressBarContext,this.progressContextDiv){this.progressContextDiv.addClassName("masked");var i=o.createElement("div",{class:"mask"}),a=o.createElement("div",{class:"PBwrapper"}),l=o.createElement("div",{class:"PBcontent"});if(o.createElement("span",{class:"text",text:this.labelWaitingOperation}).inject(l),new UWA.Element("div",{class:"wux-control-inline-container",style:{"vertical-align":"top"}}).inject(l),l.inject(a),a.inject(i),i.inject(this.progressContextDiv),this.progressContextRenderTo=l,!0!==t.useWaitCursor){if(this.progressbar=new r({value:0}).inject(l),null!=e){var s=parseInt(t.progressBarStowedHits,10),c=this.progressbar.value+100/(e.length/n)/1*s;c=Math.min(c,100),console.log(c),this.progressbar.value=c,console.log(this.progressbar.value),t.progressBarStowedHits=0}}else this.progressbar=void 0,i.style.cursor="wait",void 0!==t.progressBarWaitContext&&(t.progressBarWaitContext.style.cursor="wait")}if(null!=t.disableActionBar&&null!=this.modifiedElement){this.modifiedElement.forEach(function(e){e.hasClassName("wux-ui-state-disabled")&&e.removeClassName("wux-ui-state-disabled")})}this.modifiedElement=[];var u=[];if(null!=t.disableActionBar){var d=document.querySelectorAll(".wux-afr-cmdstarter");null!=d&&"function"==typeof d.forEach&&d.forEach(function(e){e.hasClassName("wux-ui-state-disabled")||(e.addClassName("wux-ui-state-disabled"),u.push(e))})}this.modifiedElement=u}},isProgressBusy:function(){var e=!1;this.progressContextDiv&&(this.progressContextDiv.getElement(" > .mask")&&(e=!0));return e},stopProgress:function(e,t){var n=this;if(n.currentProgressBar==e.partisionedProgressLabel){var i=20;t.length>200&&(i=200),t.length>400&&(i=2e3),setTimeout(function(){if(n.modifiedElement.forEach(function(e){e.hasClassName("wux-ui-state-disabled")&&e.removeClassName("wux-ui-state-disabled")}),n.progressContextDiv){var t=n.progressContextDiv.getElement(" > .mask");t&&t.destroy(),n.progressContextDiv.removeClassName("masked")}n.progressContextRenderTo=n.progressContextDiv,!0===e.useWaitCursor&&void 0!==e.progressBarWaitContext&&(e.progressBarWaitContext.style.cursor="")},i)}},updateProgress:function(e,t,n){if(this.startProgress(e,n,t),this.currentProgressBar!=n.partisionedProgressLabel)n.progressBarStowedHits+=1;else if(null!=this.progressbar){var i=this.progressbar.value+100/(e.length/t)/1;i=Math.min(i,100),console.log(i),this.progressbar.value=i,console.log(this.progressbar.value)}},partitionedAuthenticatedRequest:function(t,n){var o=this;n.progressBarStowedHits=0;var r=i.decode(n.data);if(n.commonKeys=new e,null==n.requestArray)for(var l in r)e.isArray(r[l])?null==n.requestArray&&(n.requestArray=l):n.commonKeys.push(l);var s=r[n.requestArray],c=!1,u=[],d=0,g=5;null!=n.minChunkSize&&(g=n.minChunkSize);var f=-1;(f=Math.ceil(s.length/20))>50&&(f=50),f<g&&(f=g),s.length<=20&&(n.useWaitCursor=!0),null!=n.symultaneousRequest&&0!=n.symultaneousRequest||o.startProgress(void 0,n,f);var h=n.onComplete;n.onComplete=function(l){o.updateProgress(s,f,n);var g=null;if(null==n.responseArray){for(var p in l)if(e.isArray(l[p])){n.responseArray=p,g=l[n.responseArray];break}}else g="function"==typeof n.responseArray?n.responseArray(l):l[n.responseArray];g.forEach(function(e){u.push(e)});var m=!1;if("function"==typeof n.cancelCallback&&(m=n.cancelCallback()),0==l.success&&null!=l.success&&(c=!0),!m&&d+f<s.length){d+=f;var v=[];if("function"==typeof n.chunkify)v=n.chunkify(d,f,s);else for(var _=d;_<d+f&&_<s.length;_++)v.push(s[_]);if(v.length>0){var b={};n.commonKeys.forEach(function(e){b[e]=r[e]}),b[n.requestArray]=v,n.data=i.encode(b),a.authenticatedRequest(t,n)}}else o.stopProgress(n,s),l.success=!c,"function"==typeof n.responseArrayMerge?l=n.responseArrayMerge(l,u):l[n.responseArray]=u,h.call(null,l)};var p=n.onFailure;n.onFailure=function(e,t,i){o.stopProgress(n,s),p.call(null,e,t,i)};var m=n.onTimeout;n.onTimeout=function(e,t,i){o.stopProgress(n,s),m.call(null,e,t,i)};var v=[];if("function"==typeof n.chunkify)v=n.chunkify(d,f,s);else for(var _=d;_<d+f&&_<s.length;_++)v.push(s[_]);var b={};n.commonKeys.forEach(function(e){b[e]=r[e]}),b[n.requestArray]=v,n.data=i.encode(b),a.authenticatedRequest(t,n)},get3DSpaceUrl:function(e){var t=location.protocol+"//"+location.hostname;return e&&(e.serverUrl=t,e.serverUri="3DSpace"),t+"/3DSpace"},_failUrlAsync:function(e,t,n){var i="3DSpace"===e?this.get3DSpaceUrl(n):"";t.onComplete.call(null,i)},getServicesUrl:function(e){var t=this,n=this._getCancelObject();return this.getWebInWinParameters(function(i){var o=i?i.myAppsBaseUrl:null;!1===n.isCancelled()&&(e.myAppsBaseUrl=o||e.myAppsBaseUrl,n.handler=t.__getServicesUrl(e))}),n},__getServicesUrl:function(t){var n=this,i=this._getCancelObject(),o=t.platformId?t.platformId:null,r=!1;if(o=o||(null!=n.getTenantID()?n.getTenantID():null)){var a=g[o];(r=!!a)&&t.onComplete.call(null,a)}return r||require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(r){if(!1===i.isCancelled()){var a={onComplete:function(n){e.isArray(n)&&n.length>0&&(n=n[0]),n=n||{},o&&(g[o]=n),t.onComplete.call(null,n)},onFailure:function(e){t.onComplete.call(null,{})}};if(o&&(a.platformId=o),t.myAppsBaseUrl){var l={myAppsBaseUrl:t.myAppsBaseUrl,userId:"all",lang:n.getLanguage()};a.config=l}i.handler=r.getPlatformServices(a)}}),i},getWidgetObject:function(){var e=window.widget&&window.widget instanceof t;return f||((f=e?window.widget:new t).body||(f.body=UWA.extend(document.body)),e||(f.lang=window.top.dsLang?window.top.dsLang:f.lang,window.widget=f),f)},addWidgetResizeEvent:function(e){var t=this.getWidgetObject();(t||this.getWidgetBody()).addEvent("onResize",e)},removeWidgetResizeEvent:function(e){var t=this.getWidgetObject();(t||this.getWidgetBody()).removeEvent("onResize",e)},setWidgetObject:function(e){f=e},getLanguage:function(){var e=this.getWidgetObject(),t=null;return e&&(t=e.lang?e.lang:this.getWidgetValue("lang")),t||(t=window.top.dsLang?window.top.dsLang:"en"),t},setWidgetValue:function(e,t){var n=this.getWidgetObject();n&&"function"==typeof n.setValue&&n.setValue(e,t),u[e]=t},getWidgetValue:function(e){var t=this.getWidgetObject(),n=t&&"function"==typeof t.getValue?t.getValue(e):void 0;return n||(n=u[e]),n},deleteWidgetValue:function(e){var t=this.getWidgetObject();t&&"function"==typeof t.deleteValue&&t.deleteValue(e),delete u[e]},addWidgetPreference:function(e){var t=this.getWidgetObject();t&&"function"==typeof t.addPreference&&t.addPreference(e)},setWidgetPreferences:function(e){var t=this.getWidgetObject();t&&"function"==typeof t.setPreferences&&t.setPreferences(e)},getWidgetPreferences:function(){return this.getWidgetObject().preferences},getWidgetPreference:function(e){var t=this.getWidgetObject();return t&&"function"==typeof t.getPreference?t.getPreference(e):null},getWidgetPreferenceValue:function(e){var t=this.getWidgetPreference(e);return t&&t.value?t.value:null},getWidgetId:function(){var e=this.getWidgetObject();return e?e.id:"0"},getWidgetBody:function(){var e=this.getWidgetObject();return e&&e.body?e.body:UWA.extend(document.body)},isDebug:function(){return"1"===this.getWidgetValue("debug_me")},getTenantID:function(e){var t=this.getWidgetValue("x3dPlatformId");return(t=t||("undefined"!=typeof enoviaServerCAWidget?enoviaServerCAWidget.tenant:null))||e},setTenantID:function(e){this.setWidgetValue("x3dPlatformId",e)},getTenants:function(e){var t=this;this._getPlatformServices(function(n){var i=[];null!==n&&(n.forEach(function(e){i.push(e.platformId)}),t.getTenantID()||t.setTenantID(i[0])),e.call(this,i)})},getWebInWinParameters:function(e){var t=this;window.COMPASS_CONFIG&&window.COMPASS_CONFIG.myAppsBaseUrl?e(window.COMPASS_CONFIG):this._getMyappsUrl(function(n){window.COMPASS_CONFIG||(window.COMPASS_CONFIG={}),n&&(window.COMPASS_CONFIG.myAppsBaseUrl=n,window.COMPASS_CONFIG.userId||(window.COMPASS_CONFIG.userId=window.enoviaServerCAWidget&&window.enoviaServerCAWidget.contextUser?window.enoviaServerCAWidget.contextUser:"all"),window.COMPASS_CONFIG.lang||(window.COMPASS_CONFIG.lang=t.getLanguage())),e(window.COMPASS_CONFIG)})},getGrantedRoles:function(e,t){var n=this;require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(i){n.getWebInWinParameters(function(o){i.getGrantedRoles(function(i){var o=[];i.forEach(function(e){var n=!0;t&&e.platforms&&(n=e.platforms.indexOf(t)>=0),(n=n||"InternalDS"===e.id)&&o.push(e.id)}),e.call(n,o)})})})},isChangeAvailable:function(){return!this.isNatifEnvironnement()},isNatifEnvironnement:function(){return"undefined"!=typeof dscef},isWebInWinEnvironment:function(){return this.isCatiaV5Environment()||this.isSolidworksEnvironment()},isCatiaV5Environment:function(){return"catiav5"===this._getEnvironment()},isSolidworksEnvironment:function(){return"solidworks"===this._getEnvironment()},_getEnvironment:function(){return this.getUrlParameter("addinmode")},getUrlParameter:function(e){return this._getUrlParameters()[e]},_getUrlParameters:function(){if(!this.storedUrlParams){var e={},t=[window.top.location];window!==window.top&&t.push(window.location),t.forEach(function(t){t.search.substr(1).split("&").forEach(function(t){var n=t.split("=");n.length>1&&(e[n[0]]=n[1])})}),this.storedUrlParams=e}return this.storedUrlParams},_getMyappsUrl:function(e){this.isNatifEnvironnement()&&"function"==typeof dscef.getMyAppsURL?dscef.getMyAppsURL().then(function(t){console.log("MyApps URL",t),e.call(null,t)}).catch(function(t){console.error("Failed to fetch MyApps URL: "+t),e.call(null,null)}):e.call(null,null)},getCancelObject:function(){return this._getCancelObject()},_getCancelObject:function(){return{isCancelled:function(){return!1!==this.handler.toCancel},cancel:function(){this.handler.cancel()},handler:{toCancel:!1,cancel:function(){this.toCancel=!0}}}},_getServiceUrlAsync:function(e,t,n){var i=this;t=t||{};var o=this._getCancelObject();return this.getWebInWinParameters(function(r){var a=r?r.myAppsBaseUrl:null;!1===o.isCancelled()&&(t.myAppsBaseUrl=a||t.myAppsBaseUrl,o.handler=i.__getServiceUrlAsync(e,t,n))}),o},__getServiceUrlAsync:function(e,t,n){var i=this,o=this._getCancelObject();o._answerGiven=!1,o.hasEnded=function(){return!0===this.toCancel||!0===this._answerGiven};var r=t.platformId?t.platformId:null,a=!1;if(r=r||(null!=i.getTenantID()?i.getTenantID():null)){var l=d[e+r];(a=!!l)&&(o._answerGiven=!0,t.onComplete.call(null,l))}return a||require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(a){if(!1===o.isCancelled()){setTimeout(function(){o.hasEnded()||!1!==o.isCancelled()||(o.cancel(),t.onComplete.call(null,"3DSpace"===e?i.get3DSpaceUrl(n):""))},5e3);try{var l={serviceName:e,onComplete:function(a){if(o._answerGiven=!0,!1===o.isCancelled()){var l=a;a&&"string"!=typeof a&&a.length>0&&(l=a[0].url),l=l||("3DSpace"===e?i.get3DSpaceUrl(n):""),r&&(d[e+r]=l),t.onComplete.call(null,l)}},onFailure:function(r){o._answerGiven=!0,!1===o.isCancelled()&&t.onComplete.call(null,"3DSpace"===e?i.get3DSpaceUrl(n):"")}};if(r&&(l.platformId=r),t.myAppsBaseUrl){var s={myAppsBaseUrl:t.myAppsBaseUrl,userId:"all",lang:i.getLanguage()};l.config=s}if(!1!==t.wintop&&t.wintop){if(t.serverUrl){var c=t.serverUrl[0]["3DSpace"];l.onComplete(c)}}else a.getServiceUrl(l)}catch(r){o._answerGiven=!0,i.displayErrorOnConsole(r.stack),i._failUrlAsync(e,t,n)}}},function(){i.displayErrorOnConsole("Fail loading i3DXCompassServices"),i._failUrlAsync(e,t,n)}),o},displayErrorOnConsole:function(e){console.log("%c"+e,"color: red")},getSourceUrlAsync:function(e,t){var n=e&&e.source?e.source:"3DSpace";return this._getServiceUrlAsync(n,e,t)},get3DSpaceUrlAsync:function(e,t){return this.getSourceUrlAsync(e,t)},get3DSwymUrlAsync:function(e,t){return this._getServiceUrlAsync("3DSwym",e,t)},get3DSearchUrlAsync:function(e,t){return this._getServiceUrlAsync("3DSearch",e,t)},getCompassUrlAsync:function(e,t){return this._getServiceUrlAsync("3DCompass",e,t)},_getPlatformServices:function(e){require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(t){t.getPlatformServices({onComplete:function(t){e.call(this,t)},onFailure:function(t){that.displayErrorOnConsole("Cannot retrieve the Platform Services"),e.call(this,null)}})})},getFullUrl:function(e,t,n){var i="",o=e,r=t,a=this.getWidgetObject();if(null==a||"function"!=typeof a.getUrl||""!=e&&null!=e||""!=t&&null!=t)""!=e&&null!=e||(o=this.getServerUrl()),""!=t&&null!=t||(r=this.getRootURI()),i=UWA.Utils.buildUrl(o,r);else{var l=a.getUrl();r=(i=l.substring(0,l.indexOf("/webapps"))).substring(i.lastIndexOf("/")+1)}if(""==i&&(i=this.get3DSpaceUrl()),null!=n){var s=i;""!==r&&(s=i.substring(0,i.indexOf("/"+r))),n.serverUrl=s,n.serverUri=r}return i},getServerUrl:function(){var e="";return(e=location.host)||(e=location.origin),e.indexOf("http")<0&&(e=location.protocol?location.protocol+"//"+e:"http://"+e),e},getRootURI:function(){var e=location.pathname,t=e.indexOf("/",1);return t<0&&(t=e.indexOf("\\",1)),e=e.substring(0,t)},convertDateToStandard:function(e,t){if(!e)return{value:"",valueDB:""};var n=t?e:new Date,i=e.getUTCFullYear(),o=e.getUTCMonth()+1,r=e.getUTCDate(),a=n.getUTCHours(),l=n.getUTCMinutes(),s=n.getUTCSeconds();return this.isReplayedODT()&&(a=12,l=0,s=0,n.setHours(a),n.setMinutes(l),n.setSeconds(s)),o<10&&(o="0"+o),r<10&&(r="0"+r),a<10&&(a="0"+a),l<10&&(l="0"+l),s<10&&(s="0"+s),n.setYear(i),n.setMonth(e.getMonth()),n.setDate(r),{value:n.toLocaleString(this.getLanguage()),valueDB:i+"/"+o+"/"+r+"@"+a+":"+l+":"+s+":GMT"}},formatDateObj:function(e){if(!e)return null;var t=e.split("@"),n=e;if(t.length>1){var i=t[0].split("/"),o=i[0],r=i[1]-1,a=i[2],l=t[1].split(":"),s=l[0],c=l[1],u=l[2];(n=new Date).setUTCHours(s),n.setUTCMinutes(c),n.setUTCSeconds(u),n.setUTCFullYear(o),n.setUTCDate(1),n.setUTCMonth(r),n.setUTCDate(a)}return n},formatDate:function(e,t){var n=e,i=e instanceof Date?e:this.formatDateObj(e);return i&&(n=1==t?i.toLocaleString(this.getLanguage()):i.toLocaleDateString(this.getLanguage())),n},addNewStyles:function(e,t,n){var i="";for(var o in t){var r=t[o],a="{";for(var l in r){a+=l+":"+r[l]+";"}a.length>1&&(i+=o+" "+(a+="}"))}if(i)return this.addNewStyle(e,i,n)},addNewStyle:function(e,t,n){var i=this,o=document.getElementsByClassName(e),r=null;return o&&o.length>0&&(r=o[0]),n&&r&&(this.addNewStyle(e+"_temp",t,!1),r.parentNode.removeChild(r),r=null),r||((r=document.createElement("style")).type="text/css",r.className=e,document.getElementsByTagName("head")[0].appendChild(r)),r.appendChild(document.createTextNode(t)),setTimeout(function(){i.clearJSStylesheet(e+"_temp")}),r},clearJSStylesheet:function(e){var t=document.getElementsByClassName(e);t&&t.length>0&&t[0].parentNode.removeChild(t[0])},download:function(e,t,n,i){var o="json"===n,r=o?JSON.stringify(t,null,"\t"):t;if(e=this.isReplayedODT()?"ODT_ToRemove":e,!0===i){var a=this.getTenantID();e+=a?"_"+a:""}e+=o?".json":".txt";var l=(o?"application/json":"text/plain")+";charset=utf-8;";if(window.navigator&&window.navigator.msSaveOrOpenBlob){var s=new Blob([decodeURIComponent(encodeURI(r))],{type:l});window.navigator.msSaveOrOpenBlob(s,e)}else{var c=document.createElement("a");c.setAttribute("href","data:"+l+","+encodeURIComponent(r)),c.setAttribute("download",e),c.setAttribute("target","_blank"),document.body.appendChild(c),c.click(),document.body.removeChild(c)}},compareValue:function(e,t){if(!isNaN(e)||!isNaN(t)){if(!isNaN(e)&&!isNaN(t))return Number(t)==Number(e)?0:Number(t)>Number(e)?1:-1;e+="",t+=""}return t.localeCompare(e,void 0,{numeric:!0,sensitivity:"base"})}};return window.widget&&!0===window.widget.getValue("proto")&&(h.servicesUrls=d),h}),define("DS/ReportingPanel/ImageUtil",["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e){"use strict";function t(){this.data={}}return t.prototype={getServerURL:function(){var t="";return e.getPlatformServices({onComplete:function(e){t=e[0]["3DSpace"]}}),t},getTypeIconUrl:function(e){if("function"==typeof e.getIconUrl)return e.getIconUrl();var t="",n="",i=e.options||e.object&&e.object.options;return i&&i.icons&&null!=(n=i.icons[0])&&(n.hasOwnProperty("iconPath")?t=n.iconPath.substr(4,n.iconPath.length-5):n.startsWith("/")?t=getServerURL()+n:n.startsWith("https")&&(t=n)),t},getTypeIconUrlFromExpandedAssembly:function(e){var t="",n=null;return null!=e&&e.hasOwnProperty("options")||e.hasOwnProperty("object")&&e.object.hasOwnProperty("options")?n=e.options||e.object.options:null!=e&&e.hasOwnProperty("attributes")&&(n=e.attributes),n&&n.icons?null!=(t=n.icons[0])&&t.startsWith("/")&&(t=getServerURL()+t):n&&n.type_icon_url&&null!=(t=n.type_icon_url)&&t.startsWith("/")&&(t=getServerURL()+t),t},createElement:function(e,t){var n=document.createElement("img");return n.src=e,t&&t.appendChild(n),n}},new t}),define("DS/ReportingPanel/ReportPanelExport",["UWA/Class/View","DS/ReportingPanel/WidgetServices"],function(e,t){"use strict";return e.extend({downloadFile:function(e,n,i,o){e+=i;var r="";o&&"en"!=t.getLanguage()&&(r="\ufeff"),r+=n;var a=document.createElement("a");if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([r],{type:"text/csv;charset:utf-8"}),e);else if(URL&&"download"in a){a.href=URL.createObjectURL(new Blob([r],{type:"text/csv;charset:utf-8"})),a.style.visibility="hidden",a.setAttribute("download",e);var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!1,!1,self,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}else location.href="data:application/octet-stream,"+encodeURIComponent(r)}})}),define("DS/ReportingPanel/DlgMaximizeHandler",["UWA/Controls/Abstract","DS/ReportingPanel/WidgetMaximizeHandler"],function(e,t){"use strict";return e.extend({init:function(e){var n=this;this.dialog=e,this.isUIVisible=!0,this.isMaximized=!1,this.widgetHandler=new t,this.widgetHandler.addEvent("widget-maxmized-changed",function(e){n._updateHeaderButtons(e),n.dispatchEvent("widget-maxmized-changed",e)}),this._insertMinMaxButtons()},destroy:function(){this.widgetHandler.destroy(),this.widgetHandler=null},isWidgetMaximized:function(){return this.widgetHandler.isMaximized},setUIVisibility:function(e){this.isUIVisible!==e&&(this.isUIVisible=e,this._updateHeaderButtons(this.isMaximized))},_insertMinMaxButtons:function(){var e=this.dialog.elements.header.querySelector(".floatingPanel_RightButtons");if(e){var t=this;this.maxBtn=UWA.createElement("span",{class:"right-actions fonticon fonticon-resize-full ",styles:{display:this.widgetHandler.isMaximized?"none":"inline-block"},events:{click:function(){t._maximize()},touchstart:function(){t._maximize()}}}).inject(e,"top"),this.restoreBtn=UWA.createElement("span",{class:"right-actions fonticon fonticon-resize-small ",styles:{display:this.widgetHandler.isMaximized?"inline-block":"none"},events:{click:function(){t._restore()},touchstart:function(){t._restore()}}}).inject(e,"top")}},_updateHeaderButtons:function(e){this.isMaximized=e,this.isUIVisible?e?(this.maxBtn.setStyle("display","none"),this.restoreBtn.setStyle("display","inline-block")):(this.maxBtn.setStyle("display","inline-block"),this.restoreBtn.setStyle("display","none")):(this.maxBtn.setStyle("display","none"),this.restoreBtn.setStyle("display","none"))},_maximize:function(e){this._updateHeaderButtons(!0),this.restoreRect=this.dialog.elements.container.getBoundingClientRect();var t=this;this.widgetHandler.maximize().then(function(){var n=t.dialog.elements.container.parentElement.getBoundingClientRect();t.dialog._changeWidth(n.width),t.dialog._changeHeight(n.height),t.dialog._resizeContainer(),t.dialog.isMaximized=!0,t.dialog.options.resizable&&!e&&(t.dialog._showResizeContainer(!1),t.oldResizeCB=t.dialog.__showResizeContainerCB,t.dialog.__showResizeContainerCB=function(){})})},_restore:function(){this._updateHeaderButtons(!0);var e=this;this.widgetHandler.restore().then(function(){e.restoreRect&&(e.dialog.isMaximized=!1,e.dialog.setNewSize({width:e.restoreRect.width,height:e.restoreRect.height}),e.dialog._changeLeft(e.restoreRect.left),e.dialog._changeTop(e.restoreRect.top),e.dialog.options.resizable&&(e.dialog.__showResizeContainerCB=e.oldResizeCB))})}})}),define("DS/ReportingPanel/CommandDialog",["css!DS/ReportingPanel/ReportingPanel","UWA/Controls/Abstract","UWA/Core","DS/ENOFloatingPanel/ENOFloatingPanel","DS/UIKIT/Input/Button","DS/ReportingPanel/ImageUtil","DS/ReportingPanel/DlgMaximizeHandler","i18n!DS/ReportingPanel/assets/nls/CommandDialog","DS/ENO6WPlugins/jQuery"],function(e,t,n,i,o,r,a,l,s){"use strict";return t.extend({buttonStyle:{ok:1,okCancel:2,none:3,cancel:4},init:function(){this._dialog=null,this._okButton=null,this._cancelButton=null,this._closeButton=null},create:function(e,t,n){var i=t||{};this._onOkHandler=i.onOk||function(){},this._onCloseHandler=i.onClose||function(){},this._enableCmdFn=i.enableCmd||null,this._fnContext=n||this,this._OKBtnText=i.OKBtnText||l.okButton,i.onCloseOverride&&(i.events||(i.events={}),i.events.onClose=i.onCloseOverride);var o=this._createFooter(i.buttonStyle||this.buttonStyle.okCancel),r=void 0===i.overlay||i.overlay,s=this._createDialog(o,e,i.resizable||!1,i.maximizable||!1,i.closeButton,i.events||{},i.title,r,i.className||"",i.persistId);this.updateUI();var c=this;return i.powerMaximize&&(this.DlgMaximizeHandler=new a(s),this.DlgMaximizeHandler.addEvent("widget-maxmized-changed",function(e){c.dispatchEvent("widget-maxmized-changed",e)})),s},destroy:function(){this.DlgMaximizeHandler&&(this.DlgMaximizeHandler.destroy(),this.DlgMaximizeHandler=null),this._dialog&&(this._dialog.destroy(),this._dialog=null)},setTitle:function(e){this._dialog&&this._dialog.setTitle(e)},updateUI:function(){this._cancelButton&&this._cancelButton.setDisabled(!1),this._closeButton&&(this._closeButton.disabled=!1),this._okButton&&(this._okButton.isDisabled()&&(this._okButton.events=null),this._enableCmdFn?this._okButton.setDisabled(!this._enableCmdFn.apply(this._fnContext)):this._okButton.setDisabled(!1))},isWidgetMaximized:function(){return!!this.DlgMaximizeHandler&&this.DlgMaximizeHandler.isWidgetMaximized()},setPowermaximizeVisibility:function(e){this.DlgMaximizeHandler&&this.DlgMaximizeHandler.setUIVisibility(e)},maximize:function(e){this.DlgMaximizeHandler&&this.DlgMaximizeHandler._maximize(e)},restore:function(){this.DlgMaximizeHandler&&this.DlgMaximizeHandler._restore()},_onOk:function(){this._disableUI(),this._onOkHandler.apply(this._fnContext)},_onCancel:function(){this._disableUI(),this._onCloseHandler.apply(this._fnContext),this.destroy()},_disableUI:function(){this._okButton&&this._okButton.setDisabled(!0),this._cancelButton&&this._cancelButton.setDisabled(!0),this._closeButton&&(this._closeButton.disabled=!0)},_disableOK:function(){this._okButton&&this._okButton.setDisabled(!0)},_createFooter:function(e){if(e!==this.buttonStyle.none){var t=document.createElement("div");e===this.buttonStyle.ok?this._okButton=new o({value:this._OKBtnText,className:"primary"}):e===this.buttonStyle.cancel?this._cancelButton=new o({value:l.cancelButton,className:"default"}):(this._okButton=new o({value:this._OKBtnText,className:"primary"}),this._cancelButton=new o({value:l.cancelButton,className:"default"}));var n=this;return this._okButton&&(this._okButton.inject(t),this._okButton.addEvent("onClick",function(){n._onOk()})),this._cancelButton&&(this._cancelButton.inject(t),this._cancelButton.addEvent("onClick",function(){n._onCancel()})),t}},_decreaseAllzIndex:function(e){if(e&&""!==e)for(var t=s("."+e),n=0;n<t.length;n+=1){var i=s(t[n]).css("zIndex");s.isNumeric(i)&&s(t[n]).css("zIndex",i-=1)}},_setToTopzIndex:function(e){s(e).css("zIndex",40040)},_createDialog:function(e,t,n,o,r,a,l,s,c,u){var d=this;a.onClose||(a.onClose=function(){d._onCancel()}),this._decreaseAllzIndex(c),this._dialog=new i({className:"command_dialog "+c,title:l,footer:e,body:t,overlay:s,escapeToClose:r,closable:r,animate:!0,resizable:n,maximizable:o,autocenter:!0,visible:!0,events:a,limitParent:!0,persistId:u}),this._setToTopzIndex(this._dialog.elements.container);var g=this,f=function(){g._decreaseAllzIndex(c),g._setToTopzIndex(g._dialog.elements.container)};return this._dialog.elements.content.addEventListener("touchstart",f,!0),this._dialog.elements.content.addEventListener("mousedown",f,!0),this._dialog}})}),define("DS/ReportingPanel/ReportingPanel",["DS/Tree/TreeListView","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/ReportingPanel/CommandDialog","i18n!DS/ReportingPanel/assets/nls/ReportingPanelNls","DS/ENOXTriptych/js/ENOXTriptych","DS/ReportingPanel/SidePanelView","DS/ReportingPanel/Filter/ReportingFilter","DS/ReportingPanel/ReportPanelExport","DS/CoreEvents/ModelEvents","DS/ReportingPanel/toolbar/ReportingToolbar","css!DS/ReportingPanel/ReportingPanel"],function(e,t,n,i,o,r,a,l,s,c,u,d){var g,f,h,p,m,v,_,b,C,w,y,S,D=null,x=null,P=0,U="",I=0,E="",O=new l;return{launchReportingPanel:function(e,t,n){this.init(e,t)},init:function(e,t){(w=this)._dataSet=e,w._column=t,v=UWA.createElement("div",{class:"mainDiv_container"}),m=UWA.createElement("div",{class:"rightPanelDiv_container"}),g=UWA.createElement("div",{class:"centerPanelDiv_container"}),C=UWA.createElement("div",{class:"filterDiv_container"}),f=UWA.createElement("div",{class:"toolbar"}),h=UWA.createElement("div",{class:"column",style:{"vertical-align":"left",float:"top",margin:"0px",border:"double",position:"relative",padding:"15px","font-size":"15px"}});var n=new i,r=n.create(v,{className:"ReportingPanelComponent",closeButton:!0,title:o.ReportTitle,buttonStyle:n.buttonStyle.none,resizable:!0,persistId:"ReportDialogId",maximizable:!0,overlay:!1,onClose:function(){!function(){var e=r.getModalBodySize();e.height=r.getContainerHeight();var t="report_dlg_size";widget.getValue(t)||widget.addPreference({name:t,type:"hidden",defaultValue:"{}"});widget.setValue(t,JSON.stringify(e)),n.destroy()}()},events:{onResizeFloating:function(){}}},this);w.dialog=r,r.inject(widget.body);var a=widget.getValue("report_dlg_size");null==a&&(a='{ "width":580, "height":280 }'),r.setNewSize(JSON.parse(a)),r.centerIt(),setTimeout(function(){r.setMinSize(280,220)},10),y=!1;for(var l=0;l<w._column.length;l++)!0===w._column[l].isFilter&&(y=!0);I=-1,P=-1;for(var s=0;s<w._column.length;s++)if(w._column[s].tooltipColumn){"STATUS"==w._column[s].tooltipColumn.toUpperCase()&&(I=s),E=w._column[s].dataIndex;for(l=0;l<w._column.length;l++)if(w._column[l].dataIndex.toUpperCase()==w._column[s].tooltipColumn.toUpperCase()){P=l,U=w._column[l].dataIndex;break}break}if(P>-1)for(var c=0;c<w._dataSet.length;c++){var u=w._dataSet[c];"SUCCESS"==u[P].toUpperCase()&&(u[P]="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-check"),"FAILED"==u[P].toUpperCase()&&(u[P]="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-wrong")}return w._dataSetCopy=JSON.parse(JSON.stringify(w._dataSet)),w._columnClone=JSON.parse(JSON.stringify(w._column)),b=w.setTopToolbar(),w._filterData=w._creatFilterDataObj(w._column),O._performFilter(w._filterData,w._dataSet,w._column),w.fillTreeDoc(w._dataSet,w._column),w._displayData(),w._createFilterPanelView(),w},setTopToolbar:function(){S=new c;return this.subscribeEvents(),this._repotToolbar=new u({model:S,isFilterIconShow:y}),this._repotToolbar},controlToolBarButtons:function(e,t,n){document.getElementById(e).querySelectorAll("*")[0].style.pointerEvents=t,document.getElementById(e).querySelectorAll("*")[0].style.opacity=n},subscribeEvents:function(){var e=this;S.subscribe({event:"ReportingPanelEvent-info-panel-open"},function(){e._displayProperties()}),S.subscribe({event:"ReportingPanelEvent-info-panel-close"},function(){e._hidePropertiesPanel()}),S.subscribe({event:"ReportingPanelEvent-filter-panel-open"},function(){e._OpenfilterPanel()}),S.subscribe({event:"ReportingPanelEvent-filter-panel-close"},function(){e._CloseFilterPanel()}),S.subscribe({event:"ReportingPanelEvent-export-panel-open"},function(){e._ExportObject()})},fillTreeDoc:function(i,r){for(var l,s=0,c=new t({useAsyncPreExpand:!0}),u=0;u<r.length;u++)!0===r[u].isHidden&&s++;var d=100/(r.length-s)+"%";for(u=0;u<r.length;u++)!0!==r[u].isHidden&&("icon"==r[u].typeRepresentation?r[u].width=54:((l=r[u]).width=d,l.isDraggable=!0,l.isEditable=!1,l.height=38));for(u=r.length-1;u>0;u--)if(!0!==r[u].isHidden){r[u].width="auto";break}var m=[];for(u=0;u<r.length;u++)m[u]=r[u].dataIndex;for(var v=0;v<i.length;v++){for(var C=i[v],y={},x=0;x<m.length;x++){var P=m[x],U=C[x];null!=U&&null!=U.escapeHTML&&(U=U.escapeHTML()),y[P]=U}var I=new n({label:" ",grid:y});c.addRoot(I)}if(r.unshift({text:"Tree",dataIndex:"tree",isHidden:!0}),null!=D&&w._treeView.getContent().destroy(),D=new e({class:"iterationsTreeListView",id:"iterationsTreeListViewId",enableListSelection:!0,resize:{columns:!0,rows:!0},selection:{nodes:!0,rowHeaders:!0,columnHeaders:!1,toggle:!0},headersDimensions:{height:35},columns:r,treeDocument:c,onDragStartCell:k,onDragCell:k,onDragEndCell:k,onDropCell:k}),w._treeView=D,null!=D){var O=JSON.parse(JSON.stringify(w._columnClone));if(D.options.columns.length==O.length)for(var R=0,A=1;A<D.options.columns.length;A++)if(D.options.columns[A].dataIndex!=O[A].dataIndex){for(R=0;R<D.options.columns.length&&D.options.columns[A].dataIndex!=O[R].dataIndex;R++);console.log("swaping "+A+"with "+R);for(var B=0;B<i.length;B++){var T=i[B][R];i[B][R]=i[B][A],i[B][A]=T}var W=O[R];O[R]=O[A],O[A]=W}}var M,k=function(e){e.dataTransfer.dropEffect="none",e.dataTransfer.effectAllowed="none"};""!=E&&(w._treeView.options.shouldDisplayTooltip=function(e){if(e.nodeModel){if(M=w.getStatusIndex(),e.cellModel.options.columnID==M&&e.cellModel.options.rowID>-1){var t=w._treeView.getManager().getRoots()[e.cellModel.options.rowID].options.grid[E];return null!=t&&null!=t.unescapeHTML&&(t=t.unescapeHTML()),{shortHelp:t,updateModel:!1}}var n=e.cellModel.options.value;return null!=n&&null!=n.unescapeHTML&&(n=n.unescapeHTML()),{shortHelp:n,updateModel:!1}}});D.defaultOptions.defaultCellHeight=30,window._treeView=D,h.innerHTML=o.TotalRecords+i.length,h.inject(f),b.render().inject(f),D.inject(g),D.getManager().getNodesXSO().onChange(function(){var e=["info_btn"],t=D.getManager(),n=t.getSelectedRows();if(n.length>0){var i=t.getTreeNodeModelFromRowID(n[0]);if(i.options.grid.ObjectStatus){if("true"===i.options.grid.ObjectStatus.toLowerCase()){w.controlToolBarButtons(e,"auto","1.3");var o=i.options.grid.ID;null!=_&&_.destroy();var r=new a;_=r.buildSlideIn(o,i,p)}else!0===p._isRightOpen?(p._hidePanel(" "),S.publish({event:"ReportingPanelEvent-info-icon-close"}),w.controlToolBarButtons(e,"none","0.3")):w.controlToolBarButtons(e,"none","0.3")}else{o=i.options.grid.ID;null!=_&&_.destroy();r=new a;_=r.buildSlideIn(o,i,p)}}}),g.getElement(".wux-tree-treelistview").setStyle("height","inherit"),g.getElement(".wux-datagrid").setStyle("height","inherit"),g.getElement(".wux-layouts-gridengine").setStyle("height","inherit"),g.getElement(".wux-layouts-gridengine").setStyle("min-height","150px")},getStatusIndex:function(){for(var e,t=0;t<D.options.columns.length;t++)if("STATUS"==D.options.columns[t].dataIndex.toUpperCase()){e=t;break}return e},_displayData:function(){(p=new r).init({left:{resizable:!0,originalSize:240,originalState:"close",overMobile:!0},right:{resizable:!0,originalState:"close",overMobile:!0,autoCloseFlag:!0},borderRight:!0,borderLeft:!0,withtransition:!0},null,g,m),f.inject(v),C.inject(v),p.inject(v),!1===Boolean(y)&&(document.getElementsByClassName("fonticon fonticon-2x fonticon-export")[0].style.paddingRight="35px"),p._container.getElementsByClassName("triptych-close-right fonticon fonticon-wrong")[0].hidden=!0},_displayProperties:function(e){var t=D.getDocument().getSelectedNodes();if(0!=t.length)if(t[0]._options.grid.ObjectStatus){if("true"===t[0]._options.grid.ObjectStatus.toLowerCase()){var n=t[0]._options.grid.ID;if(0===_.getChildren().length){var i=new a;_=i.buildSlideIn(n,e,p),p._showPanel(" ")}else p._showPanel(" ")}}else{n=t[0]._options.grid.ID;if(0===_.getChildren().length){i=new a;_=i.buildSlideIn(n,e,p),p._showPanel(" ")}else p._showPanel(" ")}},_hidePropertiesPanel:function(){!0===p._isRightOpen&&(document.getElementById("slideInPropertiesContent").destroy(),p._hidePanel(" "))},_creatFilterDataObj:function(e){for(var t={},n=[],i=[],o=[],r=!1,a=0,l=[],s=0;s<e.length;s++)!0===e[s].isFilter&&(o[a]=e[s],a++);for(a=0;a<o.length;a++)if(null!=t&&(t.value=n,l.push(t)),n=[],(t={}).key=o[a].dataIndex,o[a].filterOptions)for(var c=0,u=0;u<o[a].filterOptions.length;u++)r="on"==o[a].filterOptions[u].default,i.key=o[a].filterOptions[u].value,i.value=r,n[c]=i,i={},c++;return t.value=n,l.push(t),l.shift(),l},_createFilterPanelView:function(){var e=new l;x=w,e.launchReportFilter(x)},_OpenfilterPanel:function(){var e=document.getElementsByClassName("filterDiv_container")[0];"none"===e.getStyle("display")&&e.setStyle("display","block"),e.addClassName("highlighted-border")},_CloseFilterPanel:function(){var e=document.getElementsByClassName("filterDiv_container")[0];"block"===e.getStyle("display")&&e.setStyle("display","none")},_ExportObject:function(e){e=w;for(var t=D.getDocument().getSelectedNodes(),n=new Date,i=" "+(n.getMonth()+1)+"_"+n.getDate()+"_"+n.getFullYear()+" "+n.getHours()+"_"+n.getMinutes()+"_"+n.getSeconds(),r=o.csvFileName+i,a=[],l=[],c="",u="",d=e._column.length,g=0,f=0;f<d;f++)1!=e._column[f].isHidden&&(a[g]=e._column[f].text,l[g]=e._column[f].dataIndex,u=u+a[g]+",",g++);if(c=u.substring(0,u.length-1)+"\n",u="",t.length<=0){d=e._treeView._datagrid._cellsManager.options.model.length;if(I>-1)for(f=0;f<d;f++){for(var h=w._treeView.getManager().getRoots()[f].options.grid[E],p=w._treeView.getManager().getRoots()[f].options.grid,m=0;m<l.length;m++){null!=p[v=l[m]]&&null!=p[v]||(p[v]=""),u=p[U]==p[v]?u+h+" ,":u+'"'+p[v].replace(/"/g,'\\"')+'",'}c=c+u.substring(0,u.length-1)+"\n",u=""}else for(f=0;f<d;f++){for(p=w._treeView.getManager().getRoots()[f].options.grid,m=0;m<l.length;m++){null!=p[v=l[m]]&&null!=p[v]||(p[v]=""),u=u+'"'+p[v].replace(/"/g,'\\"')+'",'}c=c+u.substring(0,u.length-1)+"\n",u=""}}else if(I>-1)for(t=D.getDocument().getSelectedNodes(),f=0;f<t.length;f++){for(h=w._treeView.getManager().getRoots()[t[f]._rowID].options.grid[E],p=t[f]._options.grid,m=0;m<l.length;m++){null!=p[v=l[m]]&&null!=p[v]||(p[v]=""),u=p[U]==p[v]?u+h+" ,":u+'"'+p[v].replace(/"/g,'\\"')+'",'}c=c+u.substring(0,u.length-1)+"\n",u=""}else for(f=0;f<t.length;f++){for(p=t[f]._options.grid,m=0;m<l.length;m++){var v;null!=p[v=l[m]]&&null!=p[v]||(p[v]=""),u=u+'"'+p[v].replace(/"/g,'\\"')+'",'}c=c+u.substring(0,u.length-1)+"\n",u=""}(new s).downloadFile(r,c,".csv",!0)}}});