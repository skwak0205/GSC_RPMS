define("DS/CATSmmJsApi/Api",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("DS/CATSmmJsApi/IdUtils",["require","exports"],function(e,t){"use strict";function n(e,t){if(t||(t=[]),null===e)return t;for(let n=0,s=e.length;n<s;n++){const s=e.charAt(n);if(a(s))t.push(s);else{let e=s.charCodeAt(0).toString(16),n=e.length;n%2!=0&&(e="0"+e,n++);for(let e=0;e<n;e+=2)t.push("~");t.push(e.toLocaleUpperCase("en-US"))}}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBuf=t.decode=t.isSafeChar=t.encodeBuf=t.encode=t.constructAbsoluteId=t.getLocalId=t.getSuperResourceId=t.depth=t.ROOT_RESOURCE_ID=t.ID_SEPARATOR=void 0,t.ID_SEPARATOR="/",t.ROOT_RESOURCE_ID="",t.depth=function(e){let n=0;for(let s=0,o=e.length;s<o;s++)e.charAt(s)===t.ID_SEPARATOR&&n++;return n},t.getSuperResourceId=function(e){if(t.ROOT_RESOURCE_ID===e)return null;const n=e.lastIndexOf(t.ID_SEPARATOR);if(-1===n)throw new SyntaxError("IdUtils invalid id: "+e);return 0===n?t.ROOT_RESOURCE_ID:e.substring(0,n)},t.getLocalId=function(e){const n=e.lastIndexOf(t.ID_SEPARATOR);if(-1===n)throw new SyntaxError("IdUtils invalid id: "+e);return c(e,n+1,e.length)},t.constructAbsoluteId=function(e,s){const o=[];return t.ROOT_RESOURCE_ID!==e&&o.push(e),o.push(t.ID_SEPARATOR),n(s,o),o.join("")},t.encode=function(e){const t=[];return n(e,t),t.join("")},t.encodeBuf=n;const s="A".charCodeAt(0),o="Z".charCodeAt(0),r="a".charCodeAt(0),i="z".charCodeAt(0);function a(e){const t=e.charCodeAt(0);return s<=t&&t<=o||r<=t&&t<=i||"0"<=e&&e<="9"||"."===e||"-"===e||"_"===e}function c(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length);const s=[];return _(e,t,n,s),s.join("")}function _(e,t,n,s){s||(s=[]);let o=t;for(;o<n;){const t=e.charAt(o);if("~"===t){let t=2;for(o++;"~"===e.charAt(o);)t+=2,o++;const n=String.fromCharCode(parseInt(e.substring(o,o+t),16));s.push(n),o+=t}else s.push(t),o++}return s}t.isSafeChar=a,t.decode=c,t.decodeBuf=_}),define("DS/CATSmmJsApi/Constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LICENSE_KEY_TRA=t.DefaultServerPreferences=t.CLICK_DELAY=t.MOD_DOUBLE_CLICK=t.MOD_LONG_TOUCH=t.MOD_SHIFT=t.MOD1=t.TAG_RESOURCE=t.TAG_FILES=t.TAG_CAN_BE_ADDED_TO_CONTEXT=t.TAG_NAVIGATION_KIND_PREDICATE_REVERSED=t.TAG_NAVIGATION_KIND_PREDICATE=t.TAG_NAVIGATION_KIND_RESOURCE=t.C_SYC_ENOVIA=t.C_TRA_SCOPE=t.COMPONENT_SEARCH=t.COMPONENT_TRASH=t.COMPONENT_FILESYSTEM=t.COMPONENT_PREVIEW=t.COMPONENT_PROPERTIES=t.COMPONENT_TREE=t.C_VPM_REFERENCE_TYPE=t.C_VPM_INSTANCE_TYPE=t.P_SYC_CONTEXT_ROLE=t.P_SYC_ENOVIA_TYPE=t.P_SYC_DESCRIBES_NAVIGATION=t.P_SYC_CONTEXT=t.P_SYC_HAS_JS_SCRIPT=t.P_SYC_ACTION_ARGUMENT_CONSTRAINED_TO_POSSIBLE_VALUES=t.P_SYC_ACTION_ARGUMENT_POSSIBLE_VALUE=t.P_SYC_ACTION_ARGUMENT_INITIAL_VALUE=t.P_SYC_ACTION_ARGUMENT_TYPE=t.P_SYC_ACTION_ENABLED=t.P_SYC_ACTION_HAS_ARGUMENT=t.P_SYC_HAS_ACTION=t.C_SYC_PREVIEW=t.P_SYC_FACETS=t.P_SYC_PROPERTY_CHILD=t.P_DECLARED_TYPE=t.P_SYC_TRA_SOURCE=t.C_TRACEABILITY_REQUIREMENT=t.C_TRACEABILITY_DOCUMENT=t.P_SYC_INNER_PART=t.P_HAS_PART=t.P_SYC_INSTANCE_OF=t.P_SYC_PREVIEW_IS_DEFAULT=t.P_SYC_PREVIEW_LOCATION=t.P_SYC_CAN_UPLOAD=t.P_SYC_ERROR=t.P_SYC_HAS_HELP=t.P_SYC_HAS_ICON=t.P_SYC_HAS_PREVIEW=t.P_SYC_IDENTIFIER=t.PS_SYC_CHILDREN=t.P_SYC_PAGE_ELEMENT=t.P_SYC_CHILD=t.P_SYC_VERSION=t.P_SYC_LEAF=t.P_SYC_TITLE=t.P_SYC_DISPLAY_TEXT=t.NS_SYC_TYPE=t.P_RDFS_label=t.C_RDFS_Resource=t.C_RDF_Property=t.C_RDF_XMLLiteral=t.P_RDF_type=t.XSD_dateTime=t.XSD_boolean=t.XSD_integer=t.XSD_string=t.NS_SYC=t.NS_DS_VOCABULARIES=t.HTML_SYC_CSS_INTERACT=t.HTML_SYC_DESCRIBES_NAVIGATION_PARAMETER=t.HTML_SYC_ICON_URL_PARAMETER=t.HTML_SYC_TITLE_PARAMETER=t.HTML_SYC_ENOVIA_TYPE=t.HTML_SYC_TYPES_PARAMETER=t.HTML_SYC_SORT_VALUE=t.HTML_SYC_SORT_VALUE_TYPE_DATE=t.HTML_SYC_SORT_VALUE_TYPE=t.HTML_SYC_FILTER_PARENT_ID=t.HTML_SYC_FILTER_ID=t.HTML_SYC_PREVIEW_PARAMETER=t.HTML_SYC_ID_ANCHOR_PREFIX=t.HTML_SYC_DRAGTAGS_PARAMETER=t.HTML_SYC_DROPTAGS_PARAMETER=t.HTML_SYC_AREA_PARAMETER=t.HTML_SYC_HREF_PARAMETER=t.HTML_SYC_FILENAME_PARAMETER=t.HTML_SYC_TRASHABLE_PARAMETER=t.HTML_SYC_DRAG_ID_PARAMETER=t.HTML_SYC_DRAG_DATA_PARAMETER=t.HTML_SYC_DOWNLOAD_URL_PARAMETER=t.HTML_SYC_UPLOAD_URL_PARAMETER=t.HTML_SYC_ID_PARAMETER=t.STATEMENT_ID_PREFIX=t.SYC_CONTEXT_MACRO=t.ID_SEPARATOR=t.ROOT_RESOURCE_ID=t.SYC_TYPE_URI_SEPARATOR=t.URI_PARAM_FROM_MESSAGE=t.URI_PARAM_SELECTOR=t.URI_PARAM_CONTEXT=t.URI_PARAM_PREVIEW_OPTIONS_SELECTION=t.URI_PARAM_PREVIEW_LAYER_TAG=t.URI_PARAM_PREVIEW_EXTRA_OPTIONS=t.URI_PARAM_PREVIEW_OPTIONS=t.URI_PARAM_PREVIEW_TYPES=t.URI_PARAM_ENTRY=t.URI_PARAM_RESOURCE_ID=t.AuthenticationKind=t.ErrorCode=t.SelectorsAll=t.Selectors=t.PreviewFormat=void 0,t.PreviewFormat={Html:"1d-html",HtmlCanvas:"2d-canvas",Svg:"2d-svg",Vg:"2d-vg",Js:"js",Custom:"3d-custom"};t.Selectors={parents:"parents",path:"path",children:"children",details:"details",previews:"previews",nls:"nls",actions:"actions",display:"display"},t.SelectorsAll=[t.Selectors.parents,t.Selectors.children,t.Selectors.details,t.Selectors.previews,t.Selectors.nls,t.Selectors.actions],t.ErrorCode={AUTHENTICATION_NEEDED:1,INVALID_CREDENTIALS:2,INTERNAL_ERROR:3,INVALID_LICENSE:4},t.AuthenticationKind={Password:"User-Password",OAuth:"OAuth",OAuth1:"OAuth1",OAuth2:"OAuth2",CasOAuth1:"CasOAuth1",Cas:"Cas",WebSocketProxy:"WebSocketProxy"},t.URI_PARAM_RESOURCE_ID="id",t.URI_PARAM_ENTRY="entry",t.URI_PARAM_PREVIEW_TYPES="pvwTypes",t.URI_PARAM_PREVIEW_OPTIONS="o",t.URI_PARAM_PREVIEW_EXTRA_OPTIONS="o2",t.URI_PARAM_PREVIEW_LAYER_TAG="tag",t.URI_PARAM_PREVIEW_OPTIONS_SELECTION="sel",t.URI_PARAM_CONTEXT="context",t.URI_PARAM_SELECTOR="selector",t.URI_PARAM_FROM_MESSAGE="m",t.SYC_TYPE_URI_SEPARATOR=".",t.ROOT_RESOURCE_ID="",t.ID_SEPARATOR="/",t.SYC_CONTEXT_MACRO="$sycContext",t.STATEMENT_ID_PREFIX="sycstatement:",t.HTML_SYC_ID_PARAMETER="sycid",t.HTML_SYC_UPLOAD_URL_PARAMETER="sycuploadurl",t.HTML_SYC_DOWNLOAD_URL_PARAMETER="sycdownloadurl",t.HTML_SYC_DRAG_DATA_PARAMETER="sycdragdata",t.HTML_SYC_DRAG_ID_PARAMETER="sycdragid",t.HTML_SYC_TRASHABLE_PARAMETER="syctrashable",t.HTML_SYC_FILENAME_PARAMETER="sycfilename",t.HTML_SYC_HREF_PARAMETER="sychref",t.HTML_SYC_AREA_PARAMETER="sycarea",t.HTML_SYC_DROPTAGS_PARAMETER="sycdroptags",t.HTML_SYC_DRAGTAGS_PARAMETER="sycdragtags",t.HTML_SYC_ID_ANCHOR_PREFIX="__syc_lid__",t.HTML_SYC_PREVIEW_PARAMETER="sycpreview",t.HTML_SYC_FILTER_ID="sycfilterid",t.HTML_SYC_FILTER_PARENT_ID="sycfilterparentid",t.HTML_SYC_SORT_VALUE_TYPE="sycsortvaluetype",t.HTML_SYC_SORT_VALUE_TYPE_DATE="Date",t.HTML_SYC_SORT_VALUE="sycsortvalue",t.HTML_SYC_TYPES_PARAMETER="syctypes",t.HTML_SYC_ENOVIA_TYPE="sycenoviatype",t.HTML_SYC_TITLE_PARAMETER="syctitle",t.HTML_SYC_ICON_URL_PARAMETER="sycicon",t.HTML_SYC_DESCRIBES_NAVIGATION_PARAMETER="sycdescribesnavigation",t.HTML_SYC_CSS_INTERACT="syc-interact";const n="http://www.w3.org/2001/XMLSchema#",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o="http://www.w3.org/2000/01/rdf-schema#";t.NS_DS_VOCABULARIES="http://www.3ds.com/vocabularies/",t.NS_SYC=t.NS_DS_VOCABULARIES+"syc/",t.XSD_string=n+"string",t.XSD_integer=n+"integer",t.XSD_boolean=n+"boolean",t.XSD_dateTime=n+"dateTime",t.P_RDF_type=s+"type",t.C_RDF_XMLLiteral=s+"XMLLiteral",t.C_RDF_Property=s+"Property",t.C_RDFS_Resource=o+"Resource",t.P_RDFS_label=o+"label",t.NS_SYC_TYPE=t.NS_SYC+"type/",t.P_SYC_DISPLAY_TEXT=t.NS_SYC+"displayText",t.P_SYC_TITLE="http://purl.org/dc/terms/title",t.P_SYC_LEAF=t.NS_SYC+"leaf",t.P_SYC_VERSION=t.NS_SYC+"version",t.P_SYC_CHILD=t.NS_SYC+"treeChild",t.P_SYC_PAGE_ELEMENT=t.NS_SYC+"pageElement",t.PS_SYC_CHILDREN=[t.P_SYC_CHILD,t.P_SYC_PAGE_ELEMENT],t.P_SYC_IDENTIFIER="http://purl.org/dc/terms/identifier",t.P_SYC_HAS_PREVIEW=t.NS_SYC+"preview",t.P_SYC_HAS_ICON=t.NS_SYC+"icon",t.P_SYC_HAS_HELP=t.NS_SYC+"help",t.P_SYC_ERROR=t.NS_SYC+"error",t.P_SYC_CAN_UPLOAD=t.NS_SYC+"canUpload",t.P_SYC_PREVIEW_LOCATION=t.NS_SYC+"previewLocation",t.P_SYC_PREVIEW_IS_DEFAULT=t.NS_SYC+"previewIsDefault",t.P_SYC_INSTANCE_OF=t.NS_SYC+"isInstanceOf",t.P_HAS_PART="http://purl.org/dc/terms/hasPart",t.P_SYC_INNER_PART=t.NS_SYC+"innerPart",t.C_TRACEABILITY_DOCUMENT=t.NS_SYC_TYPE+"Traceability.Document",t.C_TRACEABILITY_REQUIREMENT=t.NS_SYC_TYPE+"Traceability.Requirement",t.P_SYC_TRA_SOURCE=t.NS_SYC+"traceability/source",t.P_DECLARED_TYPE=t.NS_SYC+"declaredType",t.P_SYC_PROPERTY_CHILD=t.NS_SYC+"propertyChild",t.P_SYC_FACETS=[t.P_SYC_INSTANCE_OF,t.P_SYC_PROPERTY_CHILD],t.C_SYC_PREVIEW=t.NS_SYC_TYPE+"Preview",t.P_SYC_HAS_ACTION=t.NS_SYC+"hasAction",t.P_SYC_ACTION_HAS_ARGUMENT=t.NS_SYC+"hasArgument",t.P_SYC_ACTION_ENABLED=t.NS_SYC+"enabled",t.P_SYC_ACTION_ARGUMENT_TYPE=t.NS_SYC+"argumentType",t.P_SYC_ACTION_ARGUMENT_INITIAL_VALUE=t.NS_SYC+"argumentInitValue",t.P_SYC_ACTION_ARGUMENT_POSSIBLE_VALUE=t.NS_SYC+"argumentPossibleValue",t.P_SYC_ACTION_ARGUMENT_CONSTRAINED_TO_POSSIBLE_VALUES=t.NS_SYC+"argumentConstrainedToPossibleValues",t.P_SYC_HAS_JS_SCRIPT=t.NS_SYC+"hasJsScript",t.P_SYC_CONTEXT=t.NS_SYC+"context",t.P_SYC_DESCRIBES_NAVIGATION=t.NS_SYC+"describesNavigation",t.P_SYC_ENOVIA_TYPE=t.NS_SYC+"enovia/type",t.P_SYC_CONTEXT_ROLE=t.NS_SYC+"enovia/contextRole",t.C_VPM_INSTANCE_TYPE=t.NS_SYC_TYPE+"Enovia.VPMInstance",t.C_VPM_REFERENCE_TYPE=t.NS_SYC_TYPE+"Enovia.VPMReference",t.COMPONENT_TREE="tree",t.COMPONENT_PROPERTIES="properties",t.COMPONENT_PREVIEW="preview",t.COMPONENT_FILESYSTEM="filesystem",t.COMPONENT_TRASH="trash",t.COMPONENT_SEARCH="search",t.C_TRA_SCOPE=t.NS_SYC_TYPE+"Scope",t.C_SYC_ENOVIA=t.NS_SYC_TYPE+"Enovia",t.TAG_NAVIGATION_KIND_RESOURCE="navigationKind:navigationResource",t.TAG_NAVIGATION_KIND_PREDICATE="navigationKind:predicate",t.TAG_NAVIGATION_KIND_PREDICATE_REVERSED="navigationKind:predicateReversed",t.TAG_CAN_BE_ADDED_TO_CONTEXT="canBeAddedToContext",t.TAG_FILES="Files",t.TAG_RESOURCE="Resource",t.MOD1="mod1",t.MOD_SHIFT="shift",t.MOD_LONG_TOUCH="long_touch",t.MOD_DOUBLE_CLICK="double_click",t.CLICK_DELAY=300,t.DefaultServerPreferences=["enableMultiContext","style"],t.LICENSE_KEY_TRA="CATTRA_AP"}),define("DS/CATSmmJsApi/Rdf",["require","exports","DS/CATSmmJsApi/Constants","DS/CATSmmJsApi/IdUtils"],function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterByObject=t.someSubject=t.someObject=t.firstObject=t.getHtmlRDFS=t.getObject=t.getObjectType=t.objectIsResource=t.constructStatementId=t.Model=t.Resource=void 0;class o{constructor(e,t){this.uri=e,this.model=t}getSomeObject(e,t){return a([this.uri],[e],t,this.model.bySubject(this.uri))}get statements(){return this.model.bySubject(this.uri)}get inverseStatements(){return this.model.byObject(this.uri)}}t.Resource=o;class r{constructor(e){this._statementsBySubject={},this._statementsByObject={},this.length=0,e&&this.pushAll(e)}static merge(...e){if(0===e.length)return new r;const t=new r,n=e.sort((e,t)=>t.length-e.length),s=n[0];return Object.keys(s._statementsBySubject).forEach(e=>{t._statementsBySubject[e]=s._statementsBySubject[e].slice()}),Object.keys(s._statementsByObject).forEach(e=>{t._statementsByObject[e]=s._statementsByObject[e].slice()}),t.length=s.length,n.slice(1).forEach(e=>{Object.keys(e._statementsBySubject).forEach(n=>{e._statementsBySubject[n].forEach(e=>t.push(e))})}),t}getResource(e){return new o(e,this)}bySubject(e){if(null==e)return[];let t=this._statementsBySubject[e];return t||(this._statementsBySubject[e]=t=[]),t}byObject(e){if(null==e)return[];let t=this._statementsByObject[e];return t||(this._statementsByObject[e]=t=[]),t}pushAll(e){const t=e.length;for(let n=0;n<t;n++)this.push(e[n])}push(e){this.length++;let t=this._statementsBySubject[e.subjectId];if(t||(this._statementsBySubject[e.subjectId]=t=[]),function(e,t){for(const n of e)if(n.predicate===t.predicate&&n.objectId===t.objectId&&n.objectType===t.objectType&&n.objectValue===t.objectValue)return!0;return!1}(t,e)||t.push(e),void 0!==e.objectId){let t=this._statementsByObject[e.objectId];t||(this._statementsByObject[e.objectId]=t=[]),function(e,t){for(const n of e)if(n.predicate===t.predicate&&n.subjectId===t.subjectId)return!0;return!1}(t,e)||t.push(e)}}clearResource(e){this._statementsBySubject[e]=[]}}function i(e){return void 0!==e.objectId}function a(e,t,n,s){const o=function(e,t){let n,s;for(n=0;n<e.length;n++)if(t(s=e[n],n,e))return s;return null}(s,function(n){return(t=>-1!==e.indexOf(t))(n.subjectId)&&(e=>-1!==t.indexOf(e))(n.predicate)});if(o){if(i(o))return o.objectId;if(void 0!==o.objectValue)return o.objectValue;console.log("Unknown Statement type",o)}return n}t.Model=r,t.constructStatementId=function(e){if(void 0===e.objectId)return"";let t=[n.STATEMENT_ID_PREFIX];return s.encodeBuf(e.subjectId,t),t.push(s.ID_SEPARATOR),s.encodeBuf(e.predicate,t),t.push(s.ID_SEPARATOR),s.encodeBuf(e.objectId,t),t.join("")},t.objectIsResource=i,t.getObjectType=function(e){return i(e)?n.C_RDFS_Resource:void 0!==e.objectType?e.objectType:n.XSD_string},t.getObject=function(e){return void 0!==e.objectId?e.objectId:e.objectValue},t.getHtmlRDFS=function(e,t){let s=a([e],[n.P_RDFS_label],null,t);if(!s){let t=e.lastIndexOf("/"),n=e.lastIndexOf("#");n>t&&(t=n),s=(s=-1===t?e:e.substring(t+1)).substring(0,1).toLocaleUpperCase("en-US")+s.substring(1),s=decodeURIComponent(s)}return s},t.firstObject=function(e,t){if(t.length>0){const e=t[0];if(void 0!==e.objectId)return e.objectId;if(void 0!==e.objectValue)return e.objectValue;console.log("Unknown Statement type",e)}return e},t.someObject=a,t.someSubject=function(e){return e.length>0?e[0].subjectId:null},t.filterByObject=function(e,t,n){return n.filter(function(n){return(t=>void 0!==t&&-1!==e.indexOf(t))(n.objectId)&&(e=>-1!==t.indexOf(e))(n.predicate)})}}),define("DS/CATSmmJsApi/Utils",["require","exports","DS/CATSmmJsApi/Rdf","DS/CATSmmJsApi/Constants"],function(e,t,n,s){"use strict";function o(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(e){const t=document.createElement("div");t.innerHTML=e;const n=t.textContent;return n||""}function i(e,t,r){const i={id:r?r.resolveUrl(e):e,title:void 0,defaultTitle:"",canUpload:!1,types:[],icon:"",leaf:!1,errors:[],describesNavigation:!1,canBeAddedToContext:!1};for(let e=0,a=t.length;e<a;e++){const a=t[e];switch(a.predicate){case s.P_SYC_DISPLAY_TEXT:void 0!==a.objectValue&&(n.getObjectType(a)===s.C_RDF_XMLLiteral?i.title=a.objectValue:i.title=o(a.objectValue));break;case s.P_SYC_TITLE:void 0===i.title&&void 0!==a.objectValue&&(n.getObjectType(a)===s.C_RDF_XMLLiteral?i.title=a.objectValue:i.title=o(a.objectValue));break;case s.P_RDF_type:void 0!==a.objectId&&i.types.push(a.objectId);break;case s.P_SYC_HAS_ICON:const e=n.getObject(a);""===i.icon&&void 0!==e&&r&&(i.icon=r.resolveUrl(e));break;case s.P_SYC_LEAF:i.leaf="true"===a.objectValue;break;case s.P_SYC_ERROR:void 0!==a.objectValue&&i.errors.push(a.objectValue);break;case s.P_SYC_CAN_UPLOAD:i.canUpload="true"===a.objectValue;break;case s.P_SYC_DESCRIBES_NAVIGATION:i.describesNavigation="true"===a.objectValue;break;case s.P_SYC_ENOVIA_TYPE:i.enoviaType=a.objectValue;break;case s.P_SYC_PREVIEW_IS_DEFAULT:i.isDefaultPreview="true"===a.objectValue;break;case s.P_SYC_CONTEXT:i.canBeAddedToContext="true"===a.objectValue}}if(""===i.icon&&r)for(let e=0,t=i.types.length;e<t;e++){const t=i.types[e];if(0===t.indexOf(s.NS_SYC_TYPE)){i.icon=r.icons+"/type/"+t.substring(s.NS_SYC_TYPE.length);break}}return 0===e.indexOf(s.NS_SYC_TYPE)?i.defaultTitle=n.getHtmlRDFS(e,t):i.defaultTitle=i.id,i}function a(e){return null!=e&&(""===e||"/"===e.charAt(0))}Object.defineProperty(t,"__esModule",{value:!0}),t.escapeAttributeValue=t.offsetTopRelativeTo=t.fromPrototype=t.findElementWithClass=t.findElementWithAttribute=t.findElementWithTag=t.encodeQuery=t.decodeQuery=t.isBlankNode=t.isSycId=t.shortenUri=t.objectValueToHtml=t.getTitle=t.createResourceElement=t.asyncGetResourcesInfo=t.getResourceInfo=t.htmlToText=t.escapeHtml=t.getSycTypeFromTypeUri=t.UrlRegExp=void 0,t.UrlRegExp=/^(([^:/?#]+):)(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,t.getSycTypeFromTypeUri=function(e){return-1===e.indexOf(s.NS_SYC_TYPE)?null:decodeURIComponent(e.substring(s.NS_SYC_TYPE.length))},t.escapeHtml=o,t.htmlToText=r,t.getResourceInfo=i,t.asyncGetResourcesInfo=function(e,t,n=[]){const s=[];for(const o of t){const t=e.getResource(o,n).then(t=>{if(t.ok)return t.json().then(t=>i(o,t.bySubject(o),e.config));{const t=e.config.resolveUrl(o);return{id:t,title:void 0,defaultTitle:t,canUpload:!1,types:[],icon:"",leaf:!1,errors:[],describesNavigation:!1,canBeAddedToContext:!1}}});s.push(t)}return Promise.all(s)},t.createResourceElement=function(e){const t=document.createElement("span");if(t.className="syc-resource",a(e.id)?t.setAttribute(s.HTML_SYC_ID_PARAMETER,e.id):e.canUpload&&t.setAttribute(s.HTML_SYC_UPLOAD_URL_PARAMETER,e.id),e.errors.length>0&&t.classList.add("syc-error"),e.icon){const n=document.createElement("span");n.className="syc-resource-icon",n.style.backgroundImage=`url("${e.icon}")`,t.appendChild(n)}const n=document.createElement("span");return n.className="syc-resource-title",void 0!==e.title?n.innerHTML=e.title:n.innerHTML=e.defaultTitle,t.appendChild(n),t},t.getTitle=function(e,t){let o=void 0;for(let e=0,i=t.length;e<i;e++){const i=t[e];switch(i.predicate){case s.P_SYC_DISPLAY_TEXT:if(void 0!==i.objectValue)return n.getObjectType(i)===s.C_RDF_XMLLiteral?i.objectValue:r(i.objectValue);break;case s.P_SYC_TITLE:void 0!==i.objectValue&&(o=n.getObjectType(i)===s.C_RDF_XMLLiteral?i.objectValue:r(i.objectValue))}}return void 0!==o?o:0===e.indexOf(s.NS_SYC_TYPE)?n.getHtmlRDFS(e,t):e},t.objectValueToHtml=function(e,t,n){if("string"!=typeof e.objectValue)return null;let r;switch(e.objectType){case s.XSD_boolean:r=e.objectValue;break;case s.XSD_dateTime:r=o(new Date(e.objectValue).toLocaleString(null!=n?n:navigator.language));break;case s.C_RDF_XMLLiteral:r=t.resolveUrlInHtml(e.objectValue);break;default:r=o(e.objectValue)}return r},t.shortenUri=function(e){if(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("#");if(n>t)return e.substring(n+1);if(t>=0)return e.substring(t+1)}return e},t.isSycId=a,t.isBlankNode=function(e){return e.startsWith("_:")},t.decodeQuery=function(e){const t={};return e.length>0&&e.substring(1).split("&").map(e=>e.split("=")).forEach(e=>t[decodeURIComponent(e[0].replace(/\+/gm,"%20"))]=decodeURIComponent(e[1].replace(/\+/gm,"%20"))),t},t.encodeQuery=function(e){let t="";return Object.keys(e).forEach(n=>{const s=e[n];""!==s&&null!=s&&(""!==t&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(s))}),""!==t?"?"+t:""},t.findElementWithTag=function(e,t){for(t=t.toLowerCase();e&&e.tagName.toLowerCase()!==t;)e=e.parentElement;return e},t.findElementWithAttribute=function(e,t){for(;e;){const n=e.getAttribute(t);if(n)return{element:e,attributeValue:n};e=e.parentElement}return null},t.findElementWithClass=function(e,t){for(;e;){for(const n of t)if(e.classList.contains(n))return e;e=e.parentElement}return null},t.fromPrototype=function(e,t){const n=Object.create(e);for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},t.offsetTopRelativeTo=function(e,t){let n=e.offsetParent,s=e.offsetTop;for(;n!==t&&n&&null!==n.parentElement;)s+=n.offsetTop,n=n.offsetParent;return s},t.escapeAttributeValue=function(e,t){return e.replace(new RegExp("\\"+t,"g"),"\\'")}}),define("DS/CATSmmJsApi/PlmUtils",["require","exports","DS/CATSmmJsApi/Constants","DS/CATSmmJsApi/Utils"],function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTypeFromTypeUri=t.getIdFromResourceId=t.decomposeResourceId=t.CONNECTION_PREFIX=t.EXTRA_INFO_SEP=void 0,t.EXTRA_INFO_SEP="-",t.CONNECTION_PREFIX="_";const o="/S.";function r(e){const s=e.indexOf(n.ID_SEPARATOR,1);let r=e.indexOf(t.EXTRA_INFO_SEP,s+1);const i=e.indexOf(n.ID_SEPARATOR,s+1);i>s&&r>i&&(r=-1);const a=r>s?r:i,c=e.substr(s+1,t.CONNECTION_PREFIX.length)===t.CONNECTION_PREFIX,_=e.substring(s+(c?2:1),a>s?a:void 0),u=e.substring(0,s),l=r>s?e.substring(r+1,i>s?i:void 0):void 0;return{envId:u.startsWith(o)?u.substring(o.length):"OnPremise",plmId:_,repositoryId:u,extraInfo:l,subResourcePath:i>s?e.substring(i+1):void 0,isConnection:c}}t.decomposeResourceId=r,t.getIdFromResourceId=function(e){return r(e).plmId},t.getTypeFromTypeUri=function(e){const t=s.getSycTypeFromTypeUri(e);if(t){const e=t.indexOf(n.SYC_TYPE_URI_SEPARATOR);if(e>=0)return t.substr(e+1)}return t}}),define("DS/CATSmmJsApi/JobReport",["require","exports","DS/CATSmmJsApi/Utils"],function(e,t,n){"use strict";class s{constructor(){this.messages=[]}static from(e){return n.fromPrototype(s.prototype,e)}getLastMessageStr(){return this.messages.length>0?this.messages[this.messages.length-1].text:""}getMinLevel(){let e=2;for(const t of this.messages)if(t.level<e&&(e=t.level),0===e)return e;return e}}return s.MessageStatus={Error:0,Warning:1,Info:2},s}),define("DS/CATSmmJsApi/Config",["require","exports","DS/CATSmmJsApi/Constants"],function(e,t,n){"use strict";class s{constructor(e){let t,n,s,o;if("string"==typeof e)n=(s=r(e))+"webapps/",t=s+"syc/";else{if(o=e.base,e.syc?t=r(e.syc):e.context&&(t=(s=r(e.context))+"syc/",n=s+"webapps/"),e.webapps&&(n=r(e.webapps)),!n)throw"Can't compute webapps url";if(!t)throw"Can't compute syc url"}const a=t+"rest/",c=t+"service/";this.context=null!=s?s:i(t),this.base=null!=o?o:i(this.context),this.webapps=n,this.syc=t,this.icons=t+"icon",this.publicApi=t+"api",this.rest=a,this.resource=a+"resource",this.preview=a+"preview",this.preview2=a+"preview2",this.data=a+"data",this.service=c,this.coreService=c+"core",this.interactionService=c+"interaction",this.actionService=c+"action",this.navigationService=c+"navigation",this.globalsettingsService=c+"globalsettings",this.propertiesCategoryConfig=c+"configfile/CATSmmWebPropCategories.json",this.defaultPreferencesService=c+"preference/CATSmmSettingsWebClientDefaults",this.jobService=c+"job",this.auth=t+"auth",this.event="ws"+t.substring(4)+"event",this.proxy="ws"+t.substring(4)+"ws/proxy",this.nls=t+"nls/",this.fullPage=this.webapps+"CATSmmUI/NavigationFullPage.html",this.widget=this.webapps+"CATSmmUI/Navigation.html"}resolveUrl(e){const t=n.SYC_CONTEXT_MACRO+"/webapps";return 0===e.indexOf(t)?this.webapps.substring(0,this.webapps.length-1)+e.substring(t.length):0===e.indexOf(n.SYC_CONTEXT_MACRO)?this.context.substring(0,this.context.length-1)+e.substring(n.SYC_CONTEXT_MACRO.length):e}resolveUrlInHtml(e){const t=n.SYC_CONTEXT_MACRO+"/webapps";let s=o(e,t,this.webapps.substring(0,this.webapps.length-1));return s=o(s,encodeURIComponent(t),encodeURIComponent(this.webapps.substring(0,this.webapps.length-1))),s=o(e,n.SYC_CONTEXT_MACRO,this.context.substring(0,this.context.length-1)),s=o(s,encodeURIComponent(n.SYC_CONTEXT_MACRO),encodeURIComponent(this.context.substring(0,this.context.length-1)))}getDataEntryUrl(e,t){return this.data+e+"?entry="+encodeURIComponent(t)}static fromLocation(e){return new s(s.getContextUrlFromLocation(e))}}function o(e,t,n){return e.replace(new RegExp(function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}(t),"g"),n)}function r(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),e}function i(e,t=1){const{url:n,path:s}=function(e){const t=document.createElement("a");t.href=e;const n=t.pathname.split("/").filter(e=>""!==e);return{url:t,path:n}}(e);return r(n.protocol+"//"+n.host+"/"+s.slice(0,-1*t).join("/"))}return function(e){e.getContextUrlFromLocation=function(e){return i(e,3)},e.getWebappsUrlFromLocation=function(e){return i(e,2)}}(s||(s={})),s}),define("DS/CATSmmJsApi/Request",["require","exports","DS/CATSmmJsApi/JobReport","DS/CATSmmJsApi/Constants","DS/CATSmmJsApi/Utils","DS/WAFData/WAFData"],function(e,t,n,s,o,r){"use strict";function i(e){window.hasOwnProperty("widget")&&widget.lang&&(e.headers||(e.headers={}),e.headers["Accept-Language"]=widget.lang)}return class{constructor(e){this.config=e}getGlobalSettings(e,t){const n=this.config.globalsettingsService,s={method:"GET",responseType:"json",onComplete:e,onFailure:t,headers:{Accept:"application/json"},timeout:0};r.authenticatedRequest(n,s)}getPropertiesCategoryConfig(e,t){const n=this.config.propertiesCategoryConfig,s={method:"GET",responseType:"json",onComplete:e,onFailure:t,headers:{Accept:"application/json"},timeout:0};r.authenticatedRequest(n,s)}prepareInteractionRequestWithFiles(e,t,n,r,a,c){const _={};_[s.URI_PARAM_CONTEXT]=n.join(",");const u=this.config.interactionService+o.encodeQuery(_),l=new FormData;l.append("interaction",JSON.stringify(e));for(let e=0;e<t.length;e++)l.append(t[e].name,t[e]);const p={method:"POST",data:l,responseType:"json",onComplete:r,onFailure:a,onUploadProgress:c,headers:{Accept:"application/json"},timeout:0};return i(p),{url:u,options:p}}prepareInteractionRequest2(e,t,n,r,a,c,_){const u={};u[s.URI_PARAM_CONTEXT]=r.join(",");const l=this.config.interactionService+o.encodeQuery(u),p=new FormData;if(e&&p.append("actionCall",JSON.stringify(e)),p.append("interaction",JSON.stringify(t)),n)for(let e=0;e<n.length;e++)p.append(n[e].name,n[e]);const S={method:"POST",data:p,responseType:"json",onComplete:a,onFailure:c,onUploadProgress:_,headers:{Accept:"application/json"},timeout:0};return i(S),{url:l,options:S}}prepareInteractionRequest(e,t,n,r){const a={};a[s.URI_PARAM_CONTEXT]=t.join(",");const c=this.config.interactionService+o.encodeQuery(a),_={method:"POST",data:JSON.stringify(e),responseType:"json",onComplete:n,onFailure:r,headers:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json"},timeout:0};return i(_),{url:c,options:_}}prepareJobReportRequest(e,t,r,a){const c={};c[s.URI_PARAM_FROM_MESSAGE]=""+t,c.id=e;const _=this.config.jobService+o.encodeQuery(c),u={method:"GET",responseType:"json",onComplete:(e,t)=>r(n.from(e),t),onFailure:a,headers:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json"},timeout:0};return i(u),{url:_,options:u}}prepareJobReportsRequest(e,t){const n=this.config.jobService,s={method:"GET",responseType:"json",onComplete:e,onFailure:t,headers:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json"},timeout:0};return i(s),{url:n,options:s}}prepareActionRequest(e,t,n,r){const a={};a[s.URI_PARAM_CONTEXT]=t.join(",");const c=this.config.actionService+o.encodeQuery(a),_={method:"POST",data:JSON.stringify(e),responseType:"json",onComplete:n,onFailure:r,headers:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json"},timeout:0};return i(_),{url:c,options:_}}prepareGetDataEntries(e,t,n){const s=this.config.data+e,o={method:"GET",responseType:"json",onComplete:t,onFailure:n,headers:{Accept:"application/json"},timeout:0};return i(o),{url:s,options:o}}prepareGetDataRequest(e,t,n,s,o,r){const a=this.config.data+e+"?entry="+t,c={method:"GET",responseType:n,onComplete:s,onFailure:(e,t,n)=>{let s;try{t&&(s=JSON.parse(t))}catch(e){}finally{o&&o(e,s,n)}},onProgress:r,timeout:0};return i(c),{url:a,options:c}}prepareModifyDataRequest(e,t,n,s,o,r){const a=this.config.data+e+"?entry="+t,c={method:"PUT",data:n,onComplete:s,onFailure:o,onUploadProgress:r,timeout:0};return i(c),{url:a,options:c}}uploadFiles(e,t,n,s,o){const a={method:"PUT",data:t[0],type:"json",onComplete:n,onFailure:s,onUploadProgress:o,timeout:0};i(a),r.authenticatedRequest(e,a)}prepareResourceRequest(e,t,n,r,a){const c={};c[s.URI_PARAM_SELECTOR]=t.join(","),c[s.URI_PARAM_CONTEXT]=n.join(",");const _=this.config.resource+e+o.encodeQuery(c),u={method:"GET",responseType:"json",onComplete:(t,n)=>{t.unshift({subjectId:e,predicate:"http://www.3ds.com/vocabularies/syc/sycId",objectValue:e,objectType:s.XSD_string}),r(t,n)},onFailure:a,headers:{Accept:"application/json"},timeout:0};return i(u),{url:_,options:u}}preparePreviewRequest(e,t,n,r,a,c,_,u){const l={};l[s.URI_PARAM_PREVIEW_TYPES]=r.join(","),t&&t.selection&&t.selection.length>0&&(l[s.URI_PARAM_PREVIEW_OPTIONS_SELECTION]=t.selection.join(",")),(n||t)&&(l[s.URI_PARAM_PREVIEW_EXTRA_OPTIONS]=JSON.stringify(Object.assign({},t?t.specific:void 0,n))),a&&(l[s.URI_PARAM_PREVIEW_LAYER_TAG]=a.join(",")),c&&(l[s.URI_PARAM_CONTEXT]=c.join(","));const p=this.config.preview+e+o.encodeQuery(l),S={method:"GET",responseType:"json",onComplete:(t,n)=>{t.id=e,_(t,n)},onFailure:u,headers:{Accept:"application/json"},timeout:0};return i(S),{url:p,options:S}}}}),define("DS/CATSmmJsApi/Client",["require","exports","DS/CATSmmJsApi/Config","DS/CATSmmJsApi/Request","DS/CATSmmJsApi/Rdf","DS/CATSmmJsApi/Constants","DS/CATSmmJsApi/Utils","DS/WAFData/WAFData","DS/CATSystemCommon/Utils"],function(e,t,n,s,o,r,i,a,c){"use strict";const _=[r.PreviewFormat.Html,r.PreviewFormat.HtmlCanvas],u={loaded:0,loading:1};function l(e){window.hasOwnProperty("widget")&&widget.lang&&(e.headers||(e.headers={}),e.headers["Accept-Language"]=widget.lang)}function p(e,t){if(e===t)return!0;if(!e||!t)return!1;for(let n=0;n<t.length;n++)if(-1===e.indexOf(t[n]))return!1;return!0}function S(e){const t=()=>new Promise((t,n)=>{if("string"==typeof e.data)t(JSON.parse(e.data));else if(e.data instanceof Blob){const n=new FileReader;n.onloadend=(()=>{"string"==typeof n.result&&t(JSON.parse(n.result))}),n.readAsText(e.data)}else if(e.data instanceof ArrayBuffer){const n=new Blob([e.data]),s=new FileReader;s.onloadend=(()=>{"string"==typeof s.result&&t(JSON.parse(s.result))}),s.readAsText(n)}else t(e.data)}),n=e;return n.json=t,n.errorMessage=(()=>{const e=n.error;return e?t().then(e=>{if(e.detailedMessage)return e.detailedMessage;if(e.message)return e.message;throw new Error}).catch(()=>e.toString()):Promise.reject("No error")}),n}return class{constructor(e){this.display=!0,this.shortValidityPeriod=3e3,this.validityPeriod=36e5,this._models={},this._eventTarget=document.createDocumentFragment(),this.config=e||n.fromLocation(location.href),this._request=new s(this.config),this._context=[],this._optionsCache={}}getPreviewOptions(e){return this._optionsCache[e]}setPreviewOptions(e,t){this._optionsCache[e]=t}wrapRequest(e,t,n){}getContext(){return this._context.slice()}setContext(e){e||(e=[]),function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.length===t.length){for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}(this._context,e)||(this._context=e.slice(),this.clearCache())}clearCache(){this._models={}}invalidateCache(e,t){const n=(new Date).getTime();e.forEach(e=>{const s=this._models[e];s&&n-s.timestamp>=t&&delete this._models[e]})}displayMode(e){if(this.display){const t=e.slice();return t.push(r.Selectors.display),t}return e}request(e,t){return new Promise((n,s)=>{const o={...t};void 0===o.timeout&&(o.timeout=0),o.onComplete=((s,o)=>{try{t&&t.onComplete&&t.onComplete(s,o)}finally{n(S({url:e,ok:!0,headers:o,data:s}))}}),o.onFailure=((s,o,r)=>{try{t&&t.onFailure&&t.onFailure(s,o,r)}finally{n(S({url:e,ok:!1,headers:r,error:s,data:o}))}}),l(o),this.wrapRequest(e,o,this.config),a.authenticatedRequest(e,o)})}requestData(e,t){return this.request(e,t).then(e=>{if(e.ok)return e.data;throw e.data?e.data:e.error?e.error:e.errorMessage})}sendJson(e,t,n){const s={method:"POST",type:"json",data:JSON.stringify(t),headers:{"Content-Type":"application/json; charset=UTF-8"},...n};return n&&(s.headers={...s.headers,...n.headers}),this.requestData(e,s)}_getJson(e,t,n){return new Promise((s,o)=>{const r={method:"GET",responseType:"json",onComplete:(n,o)=>{t&&t(n,o),s(S({url:e,ok:!0,headers:o,data:n}))},onFailure:(t,o,r)=>{n&&n(t,o,r),s(S({url:e,ok:!1,headers:r,error:t,data:o}))},headers:{Accept:"application/json"},timeout:0};l(r),this.wrapRequest(e,r,this.config),a.authenticatedRequest(e,r)})}getGlobalSettings(e,t){return this._getJson(this.config.globalsettingsService,e,t)}getPropertiesCategoryConfig(e,t){return this._getJson(this.config.propertiesCategoryConfig,e,t)}getDefaultPreferences(e,t){return this._getJson(this.config.defaultPreferencesService,e,t)}hasLicense(e){return this.sendJson(this.config.service+"hasLicense",e)}getRepositoriesWithAddress(e){return this.requestPublicApiRes({method:"GET",query:e,resource:"",serviceName:"repositories",version:1,headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>{if(e.ok)return e.json();throw e.error?e.error:new Error("Error accessing requestPublicApiRes")})}getPreviewIds(e,t,n){this.getResource(e,[r.Selectors.previews],(n,s)=>{const o=[];for(const t of n.bySubject(e))t.predicate===r.P_SYC_HAS_PREVIEW&&t.objectId&&o.push(t.objectId);const a=o.map(e=>i.getResourceInfo(e,n.bySubject(e),this.config));t(a,s)},n)}getPreviewData(e){const t={};e.preferredFormats&&(t[r.URI_PARAM_PREVIEW_TYPES]=e.preferredFormats.join(",")),e.options&&e.options.selection&&e.options.selection.length>0&&(t[r.URI_PARAM_PREVIEW_OPTIONS_SELECTION]=e.options.selection.join(",")),(e.extraOptions||e.options)&&(t[r.URI_PARAM_PREVIEW_EXTRA_OPTIONS]=JSON.stringify(Object.assign({},e.options?e.options.specific:void 0,e.extraOptions))),e.tags&&(t[r.URI_PARAM_PREVIEW_LAYER_TAG]=e.tags.join(",")),this._context&&(t[r.URI_PARAM_CONTEXT]=this._context.join(","));const n=this.config.preview+e.previewId+i.encodeQuery(t);return new Promise((t,s)=>{const o={method:"GET",responseType:"text",onComplete:(e,s)=>{t(S({url:n,ok:!0,headers:s,data:e}))},onFailure:(e,s,o)=>{t(S({url:n,ok:!1,headers:o,error:e,data:s}))},headers:e.headers,timeout:0};l(o),a.authenticatedRequest(n,o)})}getPreviewWithOptions(e,t,n,s,o,r,i){if(this.overridePreviewOptions){n=n||{};for(const e in this.overridePreviewOptions)this.overridePreviewOptions.hasOwnProperty(e)&&(n[e]=this.overridePreviewOptions[e])}const c=this._request.preparePreviewRequest(e,t,n,s,o,this.getContext(),r,i);this.wrapRequest(c.url,c.options,this.config),a.authenticatedRequest(c.url,c.options)}getPreview(e,t,n,s,o){this.getPreviewWithOptions(e,this.getPreviewOptions(e),n,_,null,(e,n)=>{e.resourceId=t,s(e,n)},o)}requestPreview(e){const t=this.config.preview2;return this.sendJson(t,e).then(t=>(t.id=e.preview.id,t))}callCoreService(e,t,n){const s={};s[r.URI_PARAM_CONTEXT]=this.getContext().join(",");const o=this.config.coreService+i.encodeQuery(s),a={method:"POST",type:"json",data:JSON.stringify(e),onComplete:t,onFailure:n,headers:{"Content-Type":"application/json; charset=UTF-8"}};return this.request(o,a)}callInteractionService(e,t,n){return new Promise((s,o)=>{let r,i;r=t?(e,n)=>{try{t(e,n)}finally{s(e)}}:s,i=n?(e,t,s)=>{try{n(e,t,s)}finally{o(t||e)}}:(e,t)=>o(t||e);const c=this._request.prepareInteractionRequest(e,this.getContext(),r,i);this.wrapRequest(c.url,c.options,this.config),a.authenticatedRequest(c.url,c.options)})}callInteractionServiceWithFiles(e,t,n,s,o){return new Promise((r,i)=>{let c,_;c=n?(e,t)=>{try{n(e,t)}finally{r(e)}}:r,_=s?(e,t,n)=>{try{s(e,t,n)}finally{i(t||e)}}:(e,t)=>i(t||e);const u=this._request.prepareInteractionRequestWithFiles(e,t,this._context,c,_,o);this.wrapRequest(u.url,u.options,this.config),a.authenticatedRequest(u.url,u.options)})}callInteractionService2(e,t,n,s,o,r){return new Promise((i,c)=>{let _,u;_=s?(e,t)=>{try{s(e,t)}finally{i(e)}}:i,u=o?(e,t,n)=>{try{o(e,t,n)}finally{c(t||e)}}:(e,t)=>c(t||e);const l=this._request.prepareInteractionRequest2(e,t,n,this._context,_,u,r);this.wrapRequest(l.url,l.options,this.config),a.authenticatedRequest(l.url,l.options)})}callActionService(e,t,n){const s=this._request.prepareActionRequest(e,this._context,t,n);this.wrapRequest(s.url,s.options,this.config),a.authenticatedRequest(s.url,s.options)}callNavigationService(e,t){const n={};n[r.URI_PARAM_CONTEXT]=this.getContext().join(",");const s=this.config.navigationService+i.encodeQuery(n);return this.sendJson(s,e,t)}requestPublicApiRes(e){const t=this.config.publicApi+"/"+e.serviceName+"/v"+e.version+"/res"+e.resource+i.encodeQuery(e.query||{});return new Promise((n,s)=>{const o={method:e.method,responseType:e.responseType,data:e.data,onComplete:(e,s)=>{n(S({url:t,ok:!0,headers:s,data:e}))},onFailure:(e,s,o)=>{n(S({url:t,ok:!1,headers:o,error:e,data:s}))},headers:e.headers,timeout:0};l(o),a.authenticatedRequest(t,o)})}getJobReport(e,t,n,s){const o=this._request.prepareJobReportRequest(e,t,n,s);this.wrapRequest(o.url,o.options,this.config),a.authenticatedRequest(o.url,o.options)}getJobReports(e,t){const n=this._request.prepareJobReportsRequest(e,t);this.wrapRequest(n.url,n.options,this.config),a.authenticatedRequest(n.url,n.options)}getData(e,t,n,s,o,r){const i=this._request.prepareGetDataRequest(e,t,n,s,o,r);this.wrapRequest(i.url,i.options,this.config),a.authenticatedRequest(i.url,i.options)}getDataEntries(e,t,n){const s=this._request.prepareGetDataEntries(e,t,n);this.wrapRequest(s.url,s.options,this.config),a.authenticatedRequest(s.url,s.options)}modifyData(e,t,n,s,o,r){const i=this._request.prepareModifyDataRequest(e,t,n,s,o,r);this.wrapRequest(i.url,i.options,this.config),a.authenticatedRequest(i.url,i.options)}addEventListener(e,t,n){this._eventTarget.addEventListener(e,t,n)}removeEventListener(e,t,n){this._eventTarget.removeEventListener(e,t,n)}_dispatchResourceChanged(e,t){c.dispatchCustomEvent(this._eventTarget,"syc-resource-changed",{resource:t.statements.getResource(e),selectors:t.selectors})}getResource(e,t,n,s){if(null==e){const e="Resource is null or undefined";return s&&s(new Error(e),void 0,{}),Promise.reject(e)}const i=(new Date).getTime();let c=this._models[e];return c&&c.state===u.loading&&p(c.selectors,t)?(n&&c.pendingsComplete.push(n),s&&c.pendingsFailure.push(s),c.promise):c&&c.state===u.loaded&&i-c.timestamp<=this.validityPeriod&&p(c.selectors,t)?(n&&setTimeout(()=>n(c.statements,{}),0),c.promise):((c={timestamp:i,statements:new o.Model,state:u.loading,selectors:t,pendingsComplete:[],pendingsFailure:[],promise:new Promise(e=>{})}).promise=new Promise((o,i)=>{n&&c.pendingsComplete.push(n),s&&c.pendingsFailure.push(s),1===t.length&&t[0]===r.Selectors.path||(this._models[e]=c);const _=this._request.prepareResourceRequest(e,this.displayMode(t),this._context,(t,n)=>{c.timestamp=(new Date).getTime(),c.statements.pushAll(t),c.state=u.loaded;for(const e of c.pendingsComplete)try{e(c.statements,n)}catch(e){console.error(e)}c.pendingsComplete=[],o(S({url:_.url,ok:!0,headers:n,data:c.statements})),this._dispatchResourceChanged(e,c)},(t,n,s)=>{delete this._models[e];for(const e of c.pendingsFailure)try{e(t,n,null!=s?s:{})}catch(e){console.error(e)}o(S({url:_.url,ok:!1,headers:null!=s?s:{},error:t,data:n}))});this.wrapRequest(_.url,_.options,this.config),a.authenticatedRequest(_.url,_.options)}),c.promise)}}});