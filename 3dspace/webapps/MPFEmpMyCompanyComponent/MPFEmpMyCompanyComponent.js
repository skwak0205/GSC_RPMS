define("DS/MPFEmpMyCompanyComponent/AddressSection",["UWA/String","UWA/Class/View","DS/MPFServices/ObjectService","DS/MPFCompanyModel/CompanyModel","DS/MPFAddressModel/AddressModel","DS/MPFAddressModel/AddressCollection","DS/MPFCountryModel/CountryCollection","DS/MPFAddressModel/AddressFactory","DS/MPFCartModel/CartFactory","DS/MPFCartModel/CartItemFactory","DS/MPFBuyerAddressComponent/BuyerAddressBook","i18n!DS/MPFEmpMyCompanyComponent/assets/nls/EmpMyCompanyComponent"],function(e,t,n,s,i,o,r,a,c,d,p,h){"use strict";const m=Object.freeze({SHIPPING:"shipping",BILLING:"billing"}),u=t.extend({className:"mpf-emp-company-address-section",setup:function(e){n.requiredOfPrototype(e.company,s,"options.company must be a CompanyModel"),n.requiredOfPrototype(e.addresses,o,"options.addresses must be a AddressCollection"),n.requiredOfPrototype(e.countries,r,"options.countries must be a CountryCollection"),n.requiredOfPrototype(e.addressFactory,a,"options.addressFactory must be an AddressFactory"),n.requiredOfPrototype(e.cartFactory,c,"options.cartFactory must be a CartFactory"),n.requiredOfPrototype(e.cartItemFactory,d,"options.cartItemFactory must be a CartItemFactory"),this.company=e.company,this.addresses=e.addresses,this.countries=e.countries,this.addressFactory=e.addressFactory,this.cartFactory=e.cartFactory,this.cartItemFactory=e.cartItemFactory,this.type=e.type===m.SHIPPING?m.SHIPPING:m.BILLING,this.addressBook=this._createAddressBook(),this.listenTo(this.addresses,"onAdd",this.render.bind(this))},render:function(){return this.container.setContent([this.addressBook,{tag:"div",class:"mpf-emp-address-title",text:e.ucfirst(h.get(this.type+"Address"))},{tag:"div",class:"mpf-emp-address-panel",html:[{tag:"span",text:this._createPanelText()},{tag:"span",class:"mpf-address-book-link",text:h.get("manageAddresses"),events:{click:this._openAddressBook.bind(this)}}]}]),this},destroy:function(){this.stopListening(),this.company=null,this.countries=null,this.addressFactory=null,this.cartFactory=null,this.cartItemFactory=null,this._parent(),this.container=null},isCompleted:function(){return this._filterAddresses(this.addresses).length>0},_createPanelText:function(){let t;const n=this._filterAddresses(this.addresses);return t=0===n.length?h.get("enter"+e.ucfirst(this.type)+"Address"):1===n.length?this._generateAddressString(n[0]):h.get("severalAddressesDefined")},_generateAddressString:function(e){const t=[i.Fields.LINE1,i.Fields.LINE2,i.Fields.LINE3,i.Fields.LINE4,i.Fields.POSTAL_CODE,i.Fields.CITY,i.Fields.STATE];let n="";t.forEach(function(t){e.get(t)&&(n+=e.get(t)+", ")});const s=this.countries.getCountryWithIso3(e.getCountry());return n+=s?s.getName():e.getCountry()},_filterAddresses:function(e){let t;return t=this.type===m.BILLING?e.getBillingAddresses({country:this.company.getCountry(),omitNew:!0}):e.filter(function(e){return e.isShipTo()&&!e.isNew()})},_createAddressBook:function(){const e=new p({addressFactory:this.addressFactory,cartFactory:this.cartFactory,cartItemFactory:this.cartItemFactory,className:"mpf-"+this.type+"AddressBook buyer-address-book",companyFactory:this.companyFactory,buyer:this.company,buyerTypeLocked:!0,countryReadOnly:this.type===m.BILLING,showSelectButton:!1,model:this.addresses,preSetCountry:this.company.getCountry(),isBillingAddress:this.type===m.BILLING,isCreationAllowed:this.type===m.BILLING,countries:this.countries});return this.listenTo(e,"onSelected",this._displayNewSelectedAddress.bind(this)),e},_openAddressBook:function(){this.addressBook.render().show()},_displayNewSelectedAddress:function(e){e.ok&&this.render()}});return u.Types=m,u}),define("DS/MPFEmpMyCompanyComponent/NavButtons",["UWA/Class/View","DS/UIKIT/Input/Button","i18n!DS/MPFEmpMyCompanyComponent/assets/nls/EmpMyCompanyComponent"],function(e,t,n){"use strict";const s=Object.freeze({SHOW_NEW_PAGE:"showNewPage",FINISH:"finish"}),i=e.extend({className:"mpf-emp-navigation-buttons",setup:function(e){this.pages=e.pages,this.currentPageIndex=e.currentPageIndex,this.previousButton=this._createPreviousButton(),this.nextButton=this._createNextButton(),this.finishButton=this._createFinishButton()},render:function(){const e=[];return this.currentPageIndex>0&&e.push(this.previousButton),this.currentPageIndex<this.pages.length-1&&e.push(this.nextButton),this.currentPageIndex===this.pages.length-1&&e.push(this.finishButton),this.container.setContent(e),this},destroy:function(){this.previousButton.removeEvents(),this.nextButton.removeEvents(),this.finishButton.removeEvents(),this.pages=null,this._parent(),this.container=null},_createPreviousButton:function(){const e=new t({value:n.get("back"),className:"mpf-previous-button default",icon:"chevron-left"});return e.addEvent("onClick",this._dispatchShowNewPage.bind(this,"previous")),e},_createNextButton:function(){const e=new t({value:n.get("next"),className:"mpf-next-button default",icon:"chevron-right right"});return e.addEvent("onClick",this._dispatchShowNewPage.bind(this,"next")),e},_createFinishButton:function(){const e=new t({value:n.get("finish"),className:"mpf-finish-button primary"});return e.addEvent("onClick",this._dispatchFinish.bind(this)),e},_dispatchShowNewPage:function(e){const t="next"===e?this.currentPageIndex+1:this.currentPageIndex-1;this.dispatchEvent(s.SHOW_NEW_PAGE,t)},_dispatchFinish:function(){this.dispatchEvent(s.FINISH)}});return i.Events=Object.freeze(s),i}),define("DS/MPFEmpMyCompanyComponent/MembersPage",["UWA/Class/View","DS/MPFServices/ObjectService","DS/MPFPersonModel/PersonCollection","DS/MPFInviteModel/InviteFactory","DS/MPFMembersComponent/MembersComponent","i18n!DS/MPFEmpMyCompanyComponent/assets/nls/EmpMyCompanyComponent"],function(e,t,n,s,i,o){"use strict";return e.extend({className:"mpf-emp-page mpf-emp-company-members-page",setup:function(e){t.requiredOfPrototype(e.members,n,"options.members must be a PersonCollection"),t.requiredOfPrototype(e.inviteFactory,s,"options.inviteFactory must be an InviteFactory"),this.members=e.members,this.inviteFactory=e.inviteFactory,this.companyId=e.companyId,this.pageTitle=o.get("members"),this.menuUpdateTopic=e.menuUpdateTopic,this.membersComponent=this._createMembersComponent(),this.listenTo(this.members,"onAdd",this._dispatchMenuUpdate.bind(this)),this.listenTo(this.members,"onRemove",this._dispatchMenuUpdate.bind(this))},render:function(){return this.container.setContent(this.membersComponent.render()),this},isCompleted:function(){return this.members&&this.members.size()>1},destroy:function(){this.stopListening(),this.members=null,this._parent(),this.container=null},_dispatchMenuUpdate:function(){this.dispatchEvent(this.menuUpdateTopic)},_createMembersComponent:function(){return new i({members:this.members,inviteFactory:this.inviteFactory,roles:["Buyer","Admin"],companyId:this.companyId,type:i.Types.COMPANY})}})}),define("DS/MPFEmpMyCompanyComponent/InformationPage",["UWA/String","UWA/Promise","UWA/Class/View","DS/UIKIT/Mask","DS/MPFServices/ObjectService","DS/MPFCompanyModel/CompanyModel","DS/MPFCountryModel/CountryCollection","DS/MPFView/FieldTextInputV2","DS/MPFView/FieldSelectInputV2","i18n!DS/MPFEmpMyCompanyComponent/assets/nls/EmpMyCompanyComponent"],function(e,t,n,s,i,o,r,a,c,d){"use strict";return n.extend({domEvents:{resize:"_onResize"},className:"mpf-emp-page mpf-emp-company-info-page",setup:function(e){i.requiredOfPrototype(e.company,o,"options.company must be a CompanyModel"),i.requiredOfPrototype(e.countries,r,"options.countries must be a CountryCollection"),this.company=e.company,this.countries=e.countries,this.pageTitle=d.get("information"),this.menuUpdateTopic=e.menuUpdateTopic,this.inputs=this._createInputs(),this.listenTo(this.company,"onChange:"+o.Fields.COUNTRY,this._validateFilledInputs.bind(this)),this.listenTo(this.company,"onChange",this._dispatchMenuUpdate.bind(this))},render:function(){const e=this._renderInputs();return this.container.setContent([e]),this},validate:function(){let e=!0;for(let t=0;t<this.inputs.length;t++){const n=this.inputs[t].validate();!1!==n&&!1!==n.isValid||(e=!1)}return e},isCompleted:function(){return!!(this.company.getId()&&this.company.getEmpName()&&this.company.getRegistrationId()&&this.company.getTaxRegistrationId())},save:function(){if(this.company.hasPendingChanges()){s.mask(this.container);const e=this.company.getPendingChanges();return this.company.savePromise(e,{patch:!0}).then(()=>{this._isCountryReadOnly()&&this.countrySelect.setReadOnly(),s.unmask(this.container)}).catch(e=>(s.unmask(this.container),t.reject(e)))}return t.resolve()},destroy:function(){this.stopListening();for(let e=0;e<this.inputs.length;e++)this.inputs[e].destroy();this.company=null,this._parent(),this.container=null},_validateFilledInputs:function(){for(let e=0;e<this.inputs.length;e++){const t=this.inputs[e].getValue();t&&t.length>0&&this.inputs[e].validate()}},_dispatchMenuUpdate:function(){this.dispatchEvent(this.menuUpdateTopic)},_createInputs:function(){const t=[];return t.push(new a({model:this.company,fieldName:o.Fields.NAME,fieldLabel:e.ucfirst(d.get("companyName")),required:!0,readOnly:!this.company.isNew(),dynamicValidation:!0,saveOnChange:!1,silent:!1})),this.countrySelect=new c({model:this.company,selectableOptions:this._prepareCountryOptionsArray(this.countries),fieldName:o.Fields.COUNTRY,fieldLabel:e.ucfirst(d.get("country")),placeholder:d.get("selectACountry"),readOnly:this._isCountryReadOnly(),required:!0,dynamicValidation:!0,saveOnChange:!1,silent:!1}),t.push(this.countrySelect),t.push(new a({model:this.company,fieldName:o.Fields.TAX_REGISTRATION_ID,fieldLabel:e.ucfirst(d.get("taxRegistrationId")),readOnly:!1,required:!0,dynamicValidation:!0,saveOnChange:!1,silent:!1})),t.push(new a({model:this.company,fieldName:o.Fields.REGISTRATION_ID,fieldLabel:e.ucfirst(d.get("registrationId")),readOnly:!1,required:!0,dynamicValidation:!0,saveOnChange:!1,silent:!1})),t.push(new a({model:this.company,fieldName:o.Fields.EMP_NAME,fieldLabel:d.get("empName"),readOnly:!1,required:!0,dynamicValidation:!0,saveOnChange:!1,tooltip:d.get("empNameInfo"),silent:!1})),t},_renderInputs:function(){const e=[];for(let t=0;t<this.inputs.length;t++)e.push(this.inputs[t].render());return e},_onResize:function(){this.container.getSize().width>599?this.container.addClassName("mpf-horizontal"):this.container.removeClassName("mpf-horizontal")},_isCountryReadOnly:function(){return this.company.has(o.Fields.COUNTRY)&&""!==this.company.getCountry()},_prepareCountryOptionsArray:function(e){const t=[];for(let n=0;n<e.size();n++){const s=e.at(n),i={value:s.getIso3(),label:s.getName(),selected:s.getIso3()===this.company.getCountry()};t.push(i)}return t}})}),define("DS/MPFEmpMyCompanyComponent/MenuItem",["UWA/Core","UWA/Class/View","DS/MPFError/BadArgumentError"],function(e,t,n){"use strict";const s=Object.freeze({ITEM_SELECTED:"itemSelected"}),i=t.extend({className:"mpf-emp-menu-item",domEvents:{click:"_onClick"},setup:function(t){if(!e.is(t.label,"string"))throw new n("options.label must be a string");this.label=t.label,this.isCompleted=t.isCompleted,this.isSelected=t.isSelected},render:function(){const e=this.isCompleted?"fonticon fonticon-check checked":"unchecked",t="mpf-menu-label"+(this.isSelected?" selected":"");return this.container.setContent([{tag:"div",class:"mpf-icon-container",html:[{tag:"span",class:e}]},{tag:"span",text:this.label,class:t}]),this},destroy:function(){this._parent(),this.container=null},_onClick:function(){this.isSelected||this.dispatchEvent(s.ITEM_SELECTED)}});return i.Events=s,i}),define("DS/MPFEmpMyCompanyComponent/Header",["UWA/Class/View","DS/MPFServices/ObjectService","DS/MPFCompanyModel/CompanyModel"],function(e,t,n){"use strict";return e.extend({className:"mpf-emp-my-company-header",setup:function(e){t.requiredOfPrototype(e.company,n,"options.company must be a CompanyModel"),this.company=e.company,this.currentPage=e.currentPage,this.listenTo(this.company,"onChange:"+n.Fields.NAME,this.render.bind(this))},render:function(){return this.container.setContent([{tag:"span",text:this.company.getName()},{tag:"span",text:" | "},{tag:"span",text:this.currentPage,class:"mpf-emp-current-page"}]),this},destroy:function(){this.stopListening(),this.company=null,this.currentPage=null,this._parent(),this.container=null}})}),define("DS/MPFEmpMyCompanyComponent/Menu",["UWA/Core","UWA/Class/View","DS/MPFEmpMyCompanyComponent/MenuItem"],function(e,t,n){"use strict";const s=Object.freeze({NEW_PAGE_SELECTION:"newPageSelection"}),i=t.extend({className:"mpf-emp-menu",setup:function(e){this.pages=e.pages,this.currentPageIndex=e.currentPageIndex,this.menuUpdateTopic=e.menuUpdateTopic,this.items=[]},render:function(){return this.items=this._createMenuItems(this.pages),this.container.setContent([{tag:"div",class:"mpf-item-container",html:this.items}]),this},selectNthItem:function(t){e.is(t,"number")&&t>=0&&t<this.pages.length&&t!==this.currentPageIndex&&this.dispatchEvent(s.NEW_PAGE_SELECTION,t)},destroy:function(){this._removeMenuItems(),this.stopListening(),this.pages=null,this._parent(),this.container=null},_createMenuItems:function(e){this._removeMenuItems();const t=[];for(let s=0;s<e.length;++s){const i=e[s],o=new n({label:i.pageTitle,isSelected:s===this.currentPageIndex,isCompleted:i.isCompleted()}).render();this.listenTo(o,n.Events.ITEM_SELECTED,this.selectNthItem.bind(this,s)),this.listenTo(i,this.menuUpdateTopic,this._updateItemStatus.bind(this,i,o)),t.push(o.render())}return t},_removeMenuItems:function(){for(let e=0;e<this.pages.length;e++)this.stopListening(this.pages[e]);for(let e=0;e<this.items.length;e++)this.stopListening(this.items[e]),this.items[e].destroy();this.items=[]},_updateItemStatus:function(e,t){t.isCompleted=e.isCompleted(),t.render()}});return i.Events=s,i}),define("DS/MPFEmpMyCompanyComponent/AddressesPage",["UWA/Class/View","DS/MPFServices/ObjectService","DS/MPFCompanyModel/CompanyModel","DS/MPFAddressModel/AddressCollection","DS/MPFCountryModel/CountryCollection","DS/MPFAddressModel/AddressFactory","DS/MPFCartModel/CartFactory","DS/MPFCartModel/CartItemFactory","DS/MPFEmpMyCompanyComponent/AddressSection","i18n!DS/MPFEmpMyCompanyComponent/assets/nls/EmpMyCompanyComponent"],function(e,t,n,s,i,o,r,a,c,d){"use strict";return e.extend({className:"mpf-emp-page mpf-emp-addresses-page",setup:function(e){t.requiredOfPrototype(e.company,n,"options.company must be a CompanyModel"),t.requiredOfPrototype(e.addresses,s,"options.company.addresses must be a AddressCollection"),t.requiredOfPrototype(e.countries,i,"options.countries must be a CountryCollection"),t.requiredOfPrototype(e.addressFactory,o,"options.addressFactory must be an AddressFactory"),t.requiredOfPrototype(e.cartFactory,r,"options.cartFactory must be a CartFactory"),t.requiredOfPrototype(e.cartItemFactory,a,"options.cartItemFactory must be a CartItemFactory"),this.company=e.company,this.addresses=e.addresses,this.countries=e.countries,this.addressFactory=e.addressFactory,this.cartFactory=e.cartFactory,this.cartItemFactory=e.cartItemFactory,this.pageTitle=d.get("addresses"),this.menuUpdateTopic=e.menuUpdateTopic,this.billingAddressSection=this._createBillingAddressSection(),this.shippingAddressSection=this._createShippingAddressSection(),this.listenTo(this.company.addresses,"onChange",this._dispatchMenuUpdate.bind(this))},render:function(){return this.container.setContent([this.billingAddressSection.render(),this.shippingAddressSection.render()]),this},destroy:function(){this.stopListening(),this.billingAddressSection.destroy(),this.shippingAddressSection.destroy(),this.billingAddressSection=null,this.shippingAddressSection=null,this.company=null,this.countries=null,this.addressFactory=null,this.cartFactory=null,this.cartItemFactory=null,this._parent(),this.container=null},isCompleted:function(){return this.billingAddressSection.isCompleted()},_dispatchMenuUpdate:function(){this.dispatchEvent(this.menuUpdateTopic)},_createBillingAddressSection:function(){return new c({company:this.company,addresses:this.addresses,countries:this.countries,addressFactory:this.addressFactory,cartFactory:this.cartFactory,cartItemFactory:this.cartItemFactory,type:c.Types.BILLING})},_createShippingAddressSection:function(){return new c({company:this.company,addresses:this.addresses,countries:this.countries,addressFactory:this.addressFactory,cartFactory:this.cartFactory,cartItemFactory:this.cartItemFactory,type:c.Types.SHIPPING})}})}),define("DS/MPFEmpMyCompanyComponent/EmpMyCompanyComponent",["UWA/Core","UWA/Class/View","DS/UIKIT/Alert","DS/MPFServices/ObjectService","DS/MPFCompanyModel/CompanyModel","DS/MPFPersonModel/PersonCollection","DS/MPFCountryModel/CountryCollection","DS/MPFAddressModel/AddressFactory","DS/MPFCartModel/CartFactory","DS/MPFCartModel/CartItemFactory","DS/MPFInviteModel/InviteFactory","DS/MPFEmpMyCompanyComponent/Header","DS/MPFEmpMyCompanyComponent/Menu","DS/MPFEmpMyCompanyComponent/NavButtons","DS/MPFEmpMyCompanyComponent/InformationPage","DS/MPFEmpMyCompanyComponent/AddressesPage","DS/MPFEmpMyCompanyComponent/MembersPage","i18n!DS/MPFEmpMyCompanyComponent/assets/nls/EmpMyCompanyComponent","css!DS/MPFEmpMyCompanyComponent/MPFEmpMyCompanyComponent"],function(e,t,n,s,i,o,r,a,c,d,p,h,m,u,l,y,C,g){"use strict";const F=Object.freeze({ON_FINISH:"onFinish",MENU_UPDATE:"menuUpdate"}),f=t.extend({className:"mpf-emp-my-company-component",setup:function(t){s.requiredOfPrototype(t.company,i,"options.company must be a CompanyModel"),s.requiredOfPrototype(t.members,o,"options.members must be a PersonCollection"),s.requiredOfPrototype(t.countries,r,"options.countries must be a CountryCollection"),s.requiredOfPrototype(t.addressFactory,a,"options.addressFactory must be an AddressFactory"),s.requiredOfPrototype(t.cartFactory,c,"options.cartFactory must be a CartFactory"),s.requiredOfPrototype(t.cartItemFactory,d,"options.cartItemFactory must be a CartItemFactory"),s.requiredOfPrototype(t.inviteFactory,p,"options.inviteFactory must be an InviteFactory"),this.company=t.company,this.members=t.members,this.countries=t.countries,this.addressFactory=t.addressFactory,this.cartFactory=t.cartFactory,this.cartItemFactory=t.cartItemFactory,this.inviteFactory=t.inviteFactory,this.currentPageIndex=e.is(t.currentPageIndex)?t.currentPageIndex:0,this.pages=this._createPages(),this.menu=this._createMenu(this.pages),this.header=this._createHeader(this.pages),this.navButtons=this._createNavButtons(this.pages),this.alert=this._createAlert()},render:function(){const e=this.pages[this.currentPageIndex].render();return this.container.setContent([this.header.render(),this.alert,{tag:"div",class:"mpf-emp-main-panel",html:[this.menu.render(),e]},this.navButtons.render()]),this},destroy:function(){this.stopListening(),this.header.destroy(),this.menu.destroy(),this.navButtons.destroy();for(var e=0;e<this.pages.length;e++)this.pages[e].destroy();this._parent(),this.container=null},_createPages:function(){const e=[];return e.push(new l({company:this.company,countries:this.countries,menuUpdateTopic:F.MENU_UPDATE})),e.push(new y({company:this.company,addresses:this.company.addresses,countries:this.countries,addressFactory:this.addressFactory,cartFactory:this.cartFactory,cartItemFactory:this.cartItemFactory,menuUpdateTopic:F.MENU_UPDATE})),e.push(new C({members:this.members,inviteFactory:this.inviteFactory,companyId:this.company.get("id"),menuUpdateTopic:F.MENU_UPDATE})),e},_createHeader:function(e){return new h({company:this.company,currentPage:e[this.currentPageIndex].pageTitle})},_createMenu:function(e){const t=new m({pages:e,currentPageIndex:this.currentPageIndex,menuUpdateTopic:F.MENU_UPDATE});return this.listenTo(t,m.Events.NEW_PAGE_SELECTION,this.setCurrentPage.bind(this)),t},_createNavButtons:function(e){const t=new u({pages:e,currentPageIndex:this.currentPageIndex});return this.listenTo(t,u.Events.SHOW_NEW_PAGE,this.setCurrentPage.bind(this)),this.listenTo(t,u.Events.FINISH,this.dispatchEvent.bind(this,F.ON_FINISH,{company:this.company,members:this.members})),t},_createAlert:function(){return new n({autoHide:!0,closeOnClick:!0,visible:!1})},setCurrentPage:function(t){if(e.is(t)&&t!==this.currentPageIndex&&t>=0&&t<this.pages.length&&(!e.is(this.pages[this.currentPageIndex].validate,"function")||this.pages[this.currentPageIndex].validate()))if(e.is(this.pages[this.currentPageIndex].save,"function")){var n=this;this.pages[this.currentPageIndex].save().catch(function(e){console.log(e),n.alert.add({className:"error",message:g.get("savingError")}).show()}).finally(this._executePageChange.bind(this,t))}else this._executePageChange(t)},_executePageChange:function(e){this.currentPageIndex=e,this.header.currentPage=this.pages[this.currentPageIndex].pageTitle,this.menu.currentPageIndex=this.currentPageIndex,this.navButtons.currentPageIndex=this.currentPageIndex,this.render()}});return f.Events=F,f}),define("DS/MPFEmpMyCompanyComponent/EmpMyCompanyFactory",["UWA/Core","UWA/Class","UWA/Promise","DS/MPFConnector/MarketplaceConnector","DS/MPFServices/MarketplaceServices","DS/MPFModelFactory/MPFFactoriesV2","DS/MPFCompanyModel/CompanyFactory","DS/MPFPersonModel/PersonFactory","DS/MPFEmpMyCompanyComponent/EmpMyCompanyComponent"],function(e,t,n,s,i,o,r,a,c){"use strict";let d,p,h,m,u,l,y;const C=t.extend();return C.create=function(t={}){const C=t.service||i.MAKE;return s.fetchPromise({service:C}).then(function(e){const t=o.getInstance(e);return n.all([t.getFactory(o.Types.PERSON),t.getFactory(o.Types.COUNTRY),t.getFactory(o.Types.COMPANY),t.getFactory(o.Types.ADDRESS),t.getFactory(o.Types.CART),t.getFactory(o.Types.CART_ITEM),t.getFactory(o.Types.INVITE)])}).then(function(e){const t=(l=e[0]).createModel(a.Types.ME);return y=e[1].createCollection(),d=e[2],p=e[3],h=e[4],m=e[5],u=e[6],n.all([t.fetchPromise(),y.fetchPromise()])}).then(function(e){const t=e[0].getCompanyId(),s=d.createModel(r.Types.COMPANY,{id:t},{addressFactory:p}),i=l.createCollection(a.Types.COMPANY,[],{parentResourceId:t});return y=e[1],n.all([s.fetchPromise(),i.fetchPromise()])}).then(function(n){const s=e.extend({company:n[0],members:n[1],countries:y,addressFactory:p,cartFactory:h,cartItemFactory:m,inviteFactory:u},t);return new c(s)})},C});