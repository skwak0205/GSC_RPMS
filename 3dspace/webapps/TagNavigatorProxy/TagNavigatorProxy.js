define("DS/TagNavigatorProxy/Logger",[],function(){"use strict";return new function(t){var e,i,o,n,r,a;function s(t){return function(){if(i)if(o.console){if(window.update_tn_snackbar&&window.update_tn_snackbar.apply(null,[arguments,2]),"function"==typeof o.console[t])return o.console[t].apply(o.console,Array.prototype.slice.call(arguments));if("function"!=typeof o.console[t]&&"object"==typeof o.console[t]&&"debug"!==t)return o.console[t](Array.prototype.slice.call(arguments))}else if(o.opera&&"function"==typeof o.opera.postError)return o.opera.postError.apply(null,Array.prototype.slice.call(arguments))}}for("boolean"!=typeof t&&(t=!1),i=t,o=window||global||{},this.disable=function(){return i=!1,this},n=0,r=(a=["log","info","warn","error","debug","group","groupEnd"]).length;n<r;n++)this[e=a[n]]=s(e)}(!0)}),define("DS/TagNavigatorProxy/ProxyNLS",["UWA/Class"],function(t){"use strict";var e={};return e.en={clearFilters:"Clear Filters",focus:"Focus content",unfocus:"Unfocus content"},e.jp={clearFilters:"Clear Filters",focus:"Focus content",unfocus:"Unfocus content"},e.zh={clearFilters:"Clear Filters",focus:"Focus content",unfocus:"Unfocus content"},e.de={clearFilters:"Clear Filters",focus:"Focus content",unfocus:"Unfocus content"},e.fr={clearFilters:"Effacer les filtres",focus:"Zoom sur le contenu",unfocus:"DÃ©zoomer le contenu"},t.singleton({init:function(){this._currentLanguage="en",this.getNLS=function(t){return e[this._currentLanguage][t]},this.setCurrentLanguage=function(t){null===this._currentLanguage&&(this._currentLanguage=t)}}}).init()}),define("DS/TagNavigatorProxy/TaggerWebInWinProxy",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Class/Events","UWA/Utils/InterCom","DS/MessageBus/MessageBus","DS/TagNavigatorProxy/Logger"],function(t,e,i,o,n,r,a){"use strict";var s=!1;return e.extend(o,i,{_index_notif:0,_socket:null,_filters:null,_proxyId:"Universal_SearchCtx_Proxy",_contextId:null,_socket_id:"",init:function(e){if(!(t.is(e,"object")&&t.is(e.widgetId,"string")&&t.is(e.events.addFilterChangeListener,"function")&&t.is(e.events.addCriteriaChangeListener,"function")))throw new Error("E_INVALIDARG: in init !");var i=this;this._socket_id="webinwinproxy_socket_"+e.widgetId+"_"+e.proxyId,this._socket=new n.Socket(this._socket_id,{dispatchRetryInterval:0}),this._socket.subscribeServer("SearchComServer",window),e.event_id="createProxy",e.proxyId=e.proxyId||this._proxyId,this._proxyId=e.proxyId,this._contextId=e.contextId,this._dispatchEvent({notif_name:"event4taggerWebInWin",notif_parameters:e}),this._socket.addListener("onFilterChange",function(o){t.is(o)&&t.is(o.allfilters)&&t.is(o.localfilters)||a.warn("Error, expect to have parameters.allfilters and parameters.localfilter arg !!!"),i._filters=o,e.events.addFilterChangeListener.call(null,o)}),this._socket.addListener("_internalFilterChangeListener",function(e){t.is(e)&&t.is(e.allfilters)&&t.is(e.localfilters)||a.warn("Error, expect to have parameters.allfilters and parameters.localfilter arg !!!"),i._filters=e}),this._socket.addListener("addFilterChangeListener",function(o){t.is(o)&&t.is(o.allfilters)&&t.is(o.localfilters)||a.warn("Error, expect to have parameters.allfilters and parameters.localfilter arg !!!"),i._filters=o,e.events.addFilterChangeListener.call(null,o)}),this._socket.addListener("addPLMUpdateListener",function(o){t.is(o)&&t.is(o.allfilters)&&t.is(o.localfilters)||a.warn("Error, expect to have parameters.allfilters and parameters.localfilter arg !!!"),i._filters=o,e.events.addPLMUpdateListener.call(null,o)}),this._socket.addListener("onGroupingChange",function(e){t.is(e)&&t.is(e.groups,"array")||a.warn("Error, expect to have parameters.groups as an array !!!"),i.dispatchEvent("onGroupingChange",e)}),this._socket.addListener("colorize",function(t){i.dispatchEvent("colorize",t)}),this._socket.addListener("unColorize",function(t){i.dispatchEvent("unColorize",t)}),this._socket.addListener("addRequestSuggestsListener",function(o){t.is(o)&&t.is(o.allfilters)&&t.is(o.localfilters)||a.warn("Error, expect to have parameters.allfilters and parameters.localfilter arg !!!"),i._filters=o,e.events.addRequestSuggestsListener.call(null,o)}),this._socket.addListener("addCriteriaChangeListener",function(o){t.is(o)||a.warn("Error, expect to have valid parameters arg !!!"),i._filters=o,e.events.addCriteriaChangeListener.call(null,o)}),this._socket.addListener("addVisibilityChangeListener",function(e){t.is(e)||a.warn("Error, expect to have valid parameters arg !!!"),s=e}),this.log("TaggerWebInWinProxy.createProxy sent")},toggleProxyFocus:function(t){this.log("TaggerWebInWinProxy.toggleProxyFocus sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"toggleProxyFocus",status_focus:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},getCurrentFilter:function(){return this.log("TaggerWebInWinProxy.getCurrentFilter"),this._filters},getDisplayStatus:function(){return this.log("TaggerWebInWinProxy.getDisplayStatus"),t.clone(s)},clearLocalFilter:function(){t.is(this._filters,"object")&&(this._filters={}),this.log("TaggerWebInWinProxy.clearLocalFilter sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"clearLocalFilter",proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},setColorMap:function(e){if(!t.is(e,"object"))throw new Error(`The options should be of type object, not ${typeof e}`);this.log("TaggerWebInWinProxy.setColorMap sent");let i={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"setColorMap",options:e,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(i)},setLocalFilter:function(t,e){this.log("TaggerWebInWinProxy.setLocalFilter sent");var i={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"setLocalFilter",options:t,warn:e,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(i)},setTags:function(t,e,i){this.log("TaggerWebInWinProxy.setTags sent");var o={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"setTags",tagsdata:t,summaryData:e,attribute:i,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(o)},addSubjects:function(t){this.log("TaggerWebInWinProxy.addSubjects sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"addSubjects",tagsdata:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},setCriteria:function(t){this.log("TaggerWebInWinProxy.setCriteria sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"setCriteria",suggestedArray:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},updateCriteria:function(t){this.log("TaggerWebInWinProxy.updateCriteria sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"updateCriteria",suggestedArray:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},updatePLMSuggestions:function(t){this.log("TaggerWebInWinProxy.updatePLMSuggestions sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"updatePLMSuggestions",suggestedArray:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},updateSuggestions:function(t){this.log("TaggerWebInWinProxy.updateSuggestions sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"updateSuggestions",suggestedArray:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},removeCriteria:function(t){this.log("TaggerWebInWinProxy.removeCriteria sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"removeCriteria",predicatesToRemove:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},displayCriteria:function(t){this.log("TaggerWebInWinProxy.displayCriteria sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"displayCriteria",proxyId:this._proxyId,contextId:this._contextId,checkIsACriteria:t}};this._dispatchEvent(e)},unsetTags:function(){this.log("TaggerWebInWinProxy.unsetTags sent");var t={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"unsetTags",proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(t)},focusOnSubjects:function(t,e,i){this.log("TaggerWebInWinProxy.focusOnSubjects sent");var o={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"focusOnSubjects",subjectsURI:t,persistTags:e,dataSources:i,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(o)},unfocus:function(){this.log("TaggerWebInWinProxy.focusOnSubjects sent");var t={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"unfocus",proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(t)},setStatus:function(t){this.log("TaggerWebInWinProxy.focusOnSubjects sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"setStatus",status:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},die:function(){this.log("TaggerWebInWinProxy.die sent");var e,i={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"die",proxyId:this._proxyId,contextId:this._contextId}};t.is(this._contextId)&&(i.notif_parameters.contextId=this._contextId,e=r.getSubscriptions({channel:this._contextId,topic:"WebInWinTaggerProxy_die"})),t.is(e,"array")&&e.length>0?r.publish({channel:this._contextId,topic:"WebInWinTaggerProxy_die",data:i}):this._dispatchEvent(i),this._socket.unsubscribeServer("SearchComServer")},setPredicates:function(t){this.log("TaggerWebInWinProxy.setPredicates sent"),this.configurePredicates(t)},configurePredicates:function(t){this.log("TaggerWebInWinProxy.configurePredicates sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"configurePredicates",configuration:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},toggleDisplayAll:function(t){this.log("TaggerWebInWinProxy.toggleDisplayAll sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"toggleDisplayAll",force:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},toggleDisplayAllCriteria:function(t){this.log("TaggerWebInWinProxy.toggleDisplayAllCriteria sent");var e={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"toggleDisplayAllCriteria",force:t,proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(e)},activate:function(){this.log("TaggerWebInWinProxy.activate sent");var t={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"activate",proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(t)},deactivate:function(){this.log("TaggerWebInWinProxy.deactivate sent");var t={notif_name:"event4taggerWebInWin",notif_parameters:{event_id:"deactivate",proxyId:this._proxyId,contextId:this._contextId}};this._dispatchEvent(t)},_dispatchEvent:function(e){if(!t.is(e,"object")||!t.is(e.notif_parameters,"object"))throw new Error("E_INVALIDARG: in _dispatchEvent !");var i=e;i.notif_parameters.index_notif=this._index_notif,this._socket.dispatchEvent("onDispatchToWin",i),this._index_notif=this._index_notif+1}})}),define("DS/TagNavigatorProxy/ProxyView",["UWA/Core","UWA/Class/View","DS/TagNavigatorProxy/ProxyNLS","css!DS/TagNavigatorProxy/TagNavigatorProxy"],function(t,e,i){"use strict";return e.extend({domEvents:{click:"_toggleProxyFocus"},container:function(){return this.$focusButton||(this.$focusButton=t.createElement("div",{class:"proxyView"})),this.$focusButton},setup:function(){this.listenTo(this.model,{"onChange:isFocused":this._onFocusChanged,"onChange:isAlive":this._haraKiri,"onChange:hasFilter":this._onFilter,"onChange:lang":this._updateNls})},destroy:function(){this.stopListening(),this._parent()},_onFocusChanged:function(){this.$focusButton&&this.$focusButton.toggleClassName("active")},_haraKiri:function(){this.container.destroy()},_onFilter:function(t,e){this.$focusButton.getElement("span").toggleClassName("fonticon-tag",!e),this.$focusButton.getElement("span").toggleClassName("fonticon-tag-filter",e)},_updateNls:function(t,e){i.setCurrentLanguage(e),this.$clearFilterButton&&this.$clearFilterButton.setDropdown({items:[{text:i.getNLS("clearFilters")}]}),this.$focusButton.setOptions({attributes:{title:i.getNLS(this.model.get("isFocused")?"unfocus":"focus")}})},render:function(){return this.$focusButton.addContent({tag:"span",class:"fonticon fonticon-tag"}),this},_toggleProxyFocus:function(){this.model.toggleProxyFocus()}})}),define("DS/TagNavigatorProxy/TagNavigatorProxyPrivate",["DS/TagNavigatorProxy/Logger"],function(t){"use strict";return{getParentModule:function(){var e={};return function(i,o){if(e[i])e[i]&&(t.info("TagNavigatorProxyPrivate#getParentModule - getting cached module"),o(e[i]));else if(t.info("TagNavigatorProxyPrivate#getParentModule - trying to load the module"),function(){var t;try{top.document,t=!0}catch(e){t=!1}return t}())try{t.info("isParentAccessible: true, require from top window"),top.require([i],function(n){t.info("require from top window SUCCEEDED"),e[i]=n,o(n)})}catch(n){try{t.info("require from top window FAILED - retry on parent of current window.");let n=require;window.parent!=top?(n=window.parent.require,t.info("using require from parent of current window")):t.info("using require from current window"),n([i],function(n){t.info("require SUCCEEDED"),e[i]=n,o(n)})}catch(e){t.info("require from parent of current window FAILED !!, no further attempt"),o(null)}}else try{t.info("isParentAccessible: false, require from current window"),require([i],function(n){t.info("require current window SUCCEEDED"),e[i]=n,o(n)})}catch(e){t.info("require from current window FAILED !!, no further attempt"),o(null)}}}()}}),define("DS/TagNavigatorProxy/AbstractTagger6WProxy",["UWA/Core","UWA/Class/Model","UWA/Utils","UWA/Utils/InterCom","UWA/Class/Timed","DS/TagNavigatorProxy/Logger","DS/TagNavigatorProxy/TagNavigatorProxyPrivate"],function(t,e,i,o,n,r,a){"use strict";var s,g=!1,d=["tenant"],c=function(t){return UWA.is(s)||(s={}),s[t]||{}};return e.extend(n,{defaults:{isFocused:!1,hasFilter:!1,isAlive:!0,lang:"en"},setup:function(e){if("object"!=typeof e)return r.log("Error in TagNavigatorProxy init...");if("string"!=typeof e.widgetId){if("string"!=typeof e.contextId)throw new Error("If in 3DD context: give a widgetId. Else give a contextId.");e.widgetId="IsNotInWidget"}e.id=i.getUUID(),this.options=e,window.proxyLogs&&(r.group("AbstractTagger6WProxy# Create proxy"),r.info("Options : ",e),r.groupEnd("AbstractTagger6WProxy# Create proxy"));var n=this,a=window;if(e.rightParentWindow)a=e.rightParentWindow;else try{for(;a&&a!==a.top&&!a.create6WTaggerView;)a=a.parent}catch(t){a=a.top}c(this.options.id),this.taggerServer="com.ds.tagger6w",r.log("TNP - init socket"),this._mySocket=new o.Socket(e.id,{dispatchRetryInterval:40}),this._mySocket.subscribeServer(this.taggerServer,a,"*"),e.events&&(e.events.addTagCreationListener&&"function"==typeof e.events.addTagCreationListener&&this._mySocket.addListener("addTagCreationListener",e.events.addTagCreationListener),e.events.addTagDeletionListener&&"function"==typeof e.events.addTagDeletionListener&&this._mySocket.addListener("addTagDeletionListener",e.events.addTagDeletionListener),e.events.addUnfocusSubjectsListener&&"function"==typeof e.events.addUnfocusSubjectsListener&&this._mySocket.addListener("addUnfocusSubjectsListener",e.events.addUnfocusSubjectsListener)),this._mySocket.addListener("addLocalFilterStatusListener",function(t){var e=t.isFocused,i=t.hasFilter;this.get("isFocused")!==e&&this.set({isFocused:e}),this.get("hasFilter")!==i&&this.set({hasFilter:i})}.bind(this)),this._throwError=function(t){r.log(t)},this._mySocket.addListener("throwError",function(t){r.log(t)}),e.events&&t.is(e.events.addColorizeListener,"function")&&(this.cbForColorize=e.events.addColorizeListener),this._mySocket.addListener("colorize",function(t){window.proxyLogs&&(r.group("Colorize"),r.info("colors : ",t),r.groupEnd("Colorize")),n.cbForColorize?n.cbForColorize(t):n.dispatchEvent("colorize",t)}),e.events&&t.is(e.events.addUnColorizeListener,"function")&&(this.cbForUnColorize=e.events.addUnColorizeListener),this._mySocket.addListener("unColorize",function(t){window.proxyLogs&&(r.group("unColorize"),r.groupEnd("unColorize")),n.cbForUnColorize?n.cbForUnColorize(t):n.dispatchEvent("unColorize",t)}),this._mySocket.addListener("onSelection",function(t){window.proxyLogs&&(r.group("addSelectionChangeListener"),r.info("selections : ",t),r.groupEnd("addSelectionChangeListener")),n.dispatchEvent("onSelection",t)}),this._mySocket.addListener("onLoadMoreTags",function(t){window.proxyLogs&&(r.group("addLoadMoreTagsListener"),r.info("selections : ",t),r.groupEnd("addLoadMoreTagsListener")),n.dispatchEvent("onLoadMoreTags",t)}),e.events&&t.is(e.events.addGroupingChangeListener,"function")&&(this.cbForGroupingChange=e.events.addGroupingChangeListener),this._mySocket.addListener("onGroupingChange",function(t){window.proxyLogs&&(r.group("onGroupingChange"),r.info("groups : ",t),r.groupEnd("onGroupingChange")),n.cbForGroupingChange?n.cbForGroupingChange(t):n.dispatchEvent("onGroupingChange",t)}),this.isProxyReady=!1,this._mySocket.addListener("proxyIsReady",function(e){var i,o;r.log("TNP - isReady!"),i=n.options.id,o=t.extend(c(n.options.id),e.filters),UWA.is(s)||(s={}),s[i]=o,n.set({lang:e.lang}),n.isProxyReady=!0}),this._mySocket.addListener("isDead",function(){n.set({isAlive:!1}),n._mySocket.removeListener(),n._mySocket.disconnect()}),this._mySocket.addListener("updateDisplayStatus",function(e){g=!!t.is(e,"boolean")&&e,t.is(n.cbForVisibilityChange,"function")&&n.cbForVisibilityChange(e)}),this._mySocket.dispatchEvent("getProxy",e,void 0,[n.taggerServer])},internalGetFilters:function(t){if("com.ds.tagger6w"===t.taggerServer)return s},getCurrentFilter:function(){var e=c(this.options.id);return window.proxyLogs&&(r.group("Get current filters"),r.info(this),r.info("Filters : ",e),r.groupEnd("Get current filters")),t.clone(e)},getDisplayStatus:function(){return window.proxyLogs&&(r.group("Get display status"),r.info(this),r.info("Tagger is ",g?"displayed.":"not displayed."),r.groupEnd("Get display status")),t.clone(g)},setStatus:function(t){window.proxyLogs&&(r.group("setStatus"),r.info("setStatus: ",t),r.groupEnd("Get display status")),this._dispatchIfReady("setStatus",t)},die:function(){window.proxyLogs&&(r.group("Destroy proxy"),r.info(this),r.groupEnd("Destroy proxy"));this._mySocket.dispatchEvent("die",null,void 0,[this.taggerServer]),this.cbForOpenTagger&&(this.cbForOpenTagger=null),this.cbForCloseTagger&&(this.cbForCloseTagger=null),this.cbForFilterChange&&(this.cbForFilterChange=null),this.cbForCriteriaChange&&(this.cbForCriteriaChange=null),this.cbForRequestSuggests&&(this.cbForRequestSuggests=null),this.cbForPLMUpdate&&(this.cbForPLMUpdate=null),this.cbForInternalFilterChange&&(this.cbForInternalFilterChange=null),this.cbForVisibilityChange&&(this.cbForVisibilityChange=null),this.cbForSortChange&&(this.cbForSortChange=null),this.cbForGroupingChange&&(this.cbForGroupingChange=null)},focusOnSubjects:function(t,e,i,o){if(window.proxyLogs&&(r.group("Focus on subjects"),r.info(e?"Persisting tags":"Not persisting tags"," on ",this.cid),r.info("Focused URIs : ",t),r.info("Where to put tags : ",i),r.info("tagging options : ",o),r.groupEnd("Focus on subjects")),window.top.TN_activateInterCom||window.TN_activateInterCom)this._dispatchIfReady("focusOnSubjects",{subjectsURI:t,persistTags:e,dataSources:i,options:o});else try{let n=this;a.getParentModule("DS/TagNavigator/TagNavigator",function(a){window.proxyLogs&&r.info("AbstractTagger6WProxy TagNavigator direct call success."),a._focusOnSubjects({subjectsURI:t,persistTags:e,dataSources:i,options:o},n.options.id)})}catch(n){window.proxyLogs&&r.warn('AbstractTagger6WProxy TagNavigator direct call for "focusOnSubjects" has failed. Falling back to Intercom'),this._dispatchIfReady("focusOnSubjects",{subjectsURI:t,persistTags:e,dataSources:i,options:o})}},unfocus:function(){if(window.proxyLogs&&(r.group("Unfocus subjects"),r.info("Proxy identification : ",this),r.groupEnd("Unfocus subjects")),window.top.TN_activateInterCom||window.TN_activateInterCom)this._dispatchIfReady("unfocus");else try{let t=this;a.getParentModule("DS/TagNavigator/TagNavigator",function(e){window.proxyLogs&&r.info("AbstractTagger6WProxy TagNavigator direct call success."),e._unfocus(void 0,t.options.id)})}catch(t){window.proxyLogs&&r.warn('AbstractTagger6WProxy TagNavigator direct call for "unfocus" has failed. Falling back to Intercom'),this._dispatchIfReady("unfocus")}},unsetTags:function(){if(window.proxyLogs&&(r.group("Unset tags"),r.info("Proxy identification : ",this),r.groupEnd("Unset tags")),window.top.TN_activateInterCom||window.TN_activateInterCom)this._dispatchIfReady("unsetTags");else try{let t=this;a.getParentModule("DS/TagNavigator/TagNavigator",function(e){window.proxyLogs&&r.info("AbstractTagger6WProxy TagNavigator direct call success."),e._unsetTags(void 0,t.options.id)})}catch(t){window.proxyLogs&&r.warn('AbstractTagger6WProxy TagNavigator direct call for "unsetTags" has failed. Falling back to Intercom'),this._dispatchIfReady("unsetTags")}},addTagCreationListener:function(t,e){"function"==typeof t?this._mySocket.addListener("addTagCreationListener",t.bind(e)):this._throwError("Invalid Arg")},addTagDeletionListener:function(t,e){"function"==typeof t?this._mySocket.addListener("addTagDeletionListener",t.bind(e)):this._throwError("Invalid Arg")},activate:function(){window.proxyLogs&&(r.group("Activate proxy"),r.info("Proxy identification : ",this),r.groupEnd("Activate proxy")),this._dispatchIfReady("activate")},deactivate:function(){window.proxyLogs&&(r.group("Deactivate proxy"),r.info("Proxy identification : ",this),r.groupEnd("Deactivate proxy")),this._dispatchIfReady("deactivate")},toggleProxyFocus:function(t){var e;e="boolean"==typeof t?t:!this.get("isFocused"),window.proxyLogs&&(r.group("Toggle proxy focus"),r.info("Proxy identification : ",this),r.info(e?"Focusing":"Unfocusing"),r.groupEnd("Toggle proxy focus")),this._dispatchIfReady("toggleProxyFocus",{focusStatus:e})},clearLocalFilter:function(t){var e=c(this.options.id);window.proxyLogs&&(r.group("Clear local filters"),r.info("Filters before : ",e),r.groupEnd("Clear local filters")),delete e.allfilters,delete e.localfilters,delete e.PLMParameters,this._dispatchIfReady("clearLocalFilter",{refine:!0===t})},setLocalFilter:function(t,e){window.proxyLogs&&(r.group("Set local filters"),r.info("Filters before : ",this.localFilter),r.info("Filters after : ",t),r.groupEnd("Set local filters")),!1!==e&&(e=!0),this._dispatchIfReady("setLocalFilter",{localFilter:t,warn:e})},addLocalFilter:function(t,e){window.proxyLogs&&(r.group("Add local filters"),r.info("Filters before : ",this.localFilter),r.info("Filters to add : ",t),r.groupEnd("Add local filters")),!1!==e&&(e=!0),this._dispatchIfReady("addLocalFilter",{localFilter:t,warn:e})},removeLocalFilter:function(t,e){window.proxyLogs&&(r.group("Remove local filters"),r.info("Filters before : ",this.localFilter),r.info("Filters to remove : ",t),r.groupEnd("Remove local filters")),!1!==e&&(e=!0),this._dispatchIfReady("removeLocalFilter",{localFilter:t,warn:e})},setLocalGrouping:function(t,e){window.proxyLogs&&(r.group("Set local grouping"),r.info("groupingData : ",t),r.info("triggerGroupingChangeCB : ",e),r.groupEnd("Set local filters")),!1!==e&&(e=!0),this._dispatchIfReady("setLocalGrouping",{grouping:t,triggerGroupingChangeCB:e})},clearLocalGrouping:function(t){window.proxyLogs&&(r.group("Clear local grouping"),r.info("triggerGroupingChangeCB: ",t),r.groupEnd("Clear local grouping")),this._dispatchIfReady("clearLocalGrouping",{triggerGroupingChangeCB:t})},_requestGroupingChange:function(t){window.proxyLogs&&(r.group("Request local grouping"),r.info("info: ",JSON.stringify(t)),r.groupEnd("Request local grouping")),this._dispatchIfReady("requestGroupingChange",t)},setColorMap:function(t){window.proxyLogs&&(r.group("Set color map"),r.info("Colors : ",t),r.groupEnd("Set color map")),this._dispatchIfReady("setColorMap",t)},setPredicates:function(t){this.configurePredicates(t)},configurePredicates:function(t){window.proxyLogs&&(r.group("Configure predicates"),r.info("Predicates : ",t),r.groupEnd("Configure predicates")),this._dispatchIfReady("configurePredicates",t)},toggleDisplayAll:function(e){window.proxyLogs&&(r.group("Toggle display all"),r.info(t.is(e)?"Forcing "+(e?"show all":"light view"):"Switching view"),r.groupEnd("Toggle display all")),this._dispatchIfReady("toggleDisplayAll",e)},toggleDisplayAllCriteria:function(e){window.proxyLogs&&(r.group("Toggle display all criteria"),r.info(t.is(e)?"Forcing "+(e?"More Criteria":"Less Criteria"):"Switching view"),r.groupEnd("Toggle display all criteria")),this._dispatchIfReady("toggleDisplayAllCriteria",e)},updateProxyOptions:function(t){if(UWA.is(t,"object")){for(var e={},i=0;i<d.length;i++)UWA.is(t[d[i]])&&(e[d[i]]=t[d[i]]);Object.keys(e).length>0&&(window.proxyLogs&&(r.group("Update proxy options"),r.info("options to update:",e),r.groupEnd("Update proxy options")),this._dispatchIfReady("updateProxyOptions",e))}},showEmbeddedView:function(){window.proxyLogs&&r.info("Received showEmbeddedView event"),this._dispatchIfReady("showEmbeddedView")},hideEmbeddedView:function(){window.proxyLogs&&r.info("Received hideEmbeddedView event"),this._dispatchIfReady("hideEmbeddedView")},setEmbeddedViewProperties:function(t){window.proxyLogs&&r.info("Received setEmbeddedViewProperties event: "+t),this._dispatchIfReady("setEmbeddedViewProperties",t)},_dispatchIfReady:function(t,e){this._mySocket.dispatchEvent(t,e,void 0,[this.taggerServer])}})}),define("DS/TagNavigatorProxy/Tagger6WProxy",["UWA/Core","DS/TagNavigatorProxy/AbstractTagger6WProxy","DS/TagNavigatorProxy/Logger","DS/TagNavigatorProxy/TagNavigatorProxyPrivate"],function(t,e,i,o){"use strict";var n,r=function(t){return n[t]||{}},a=function(t,e){n[t]=e};return e.extend({setup:function(e){var o,s=this;this._parent(e),n=this.internalGetFilters(this),window.proxyLogs&&(i.group("Setup proxy FOS"),i.info("Options : ",e),i.info("Identifier : ",this.cid),i.groupEnd("Setup proxy FOS")),o=e.events?e.events.addFilterChangeListener:void 0,this.addFilterChangeListener(o),o=e.events?e.events.addCriteriaChangeListener:void 0,this.addCriteriaChangeListener(o),o=e.events?e.events.addPLMUpdateListener:void 0,this.addPLMUpdateListener(o),o=e.events?e.events.addRequestSuggestsListener:void 0,this.addRequestSuggestsListener(o),o=e.events?e.events.addOpenTaggerListener:void 0,this.addOpenTaggerListener(o),o=e.events?e.events.addCloseTaggerListener:void 0,this.addCloseTaggerListener(o),o=e.events?e.events._internalFilterChangeListener:void 0,this.addInternalFilterChangeListener(o),o=e.events?e.events._addVisibilityChangeListener:void 0,this.addVisibilityChangeListener(o),o=e.events?e.events.addSortChangeListener:void 0,this.addSortChangeListener(o),o=e.events?e.events.addLoadMoreTagsListener:void 0,this.addLoadMoreTagsListener(o),this._mySocket.addListener("onFilterChange",function(e){var o=!UWA.is(e,"object")||!UWA.is(e.triggerProxyCB)||!0===e.triggerProxyCB;window.proxyLogs&&(i.group("Filter change event"),i.info("Filters : ",e?UWA.clone(e):"undefined"),i.info("triggerProxyCB : ",o),i.groupEnd("Filter change event ")),delete e.triggerProxyCB,a(s.options.id,t.extend(r(s.options.id),e)),o&&("function"==typeof s.cbForFilterChange&&s.cbForFilterChange(e),s.dispatchEvent("onFilterChange",e))}),this._mySocket.addListener("onCriteriaChange",function(t){window.proxyLogs&&(i.group("Criteria change event"),i.info("Criteria : ",t),i.groupEnd("Criteria change event")),"function"==typeof s.cbForCriteriaChange&&s.cbForCriteriaChange(t),s.dispatchEvent("onCriteriaChange",t)}),this._mySocket.addListener("plmUpdate",function(t){window.proxyLogs&&(i.group("Update PLM event"),i.info("PLM : ",t),i.groupEnd("Update PLM event")),"function"==typeof s.cbForPLMUpdate&&s.cbForPLMUpdate(t)}),this._mySocket.addListener("requestSuggestions",function(t){window.proxyLogs&&(i.group("Request Suggestions event"),i.info("query : ",t),i.groupEnd("Request Suggestions event")),"function"==typeof s.cbForRequestSuggests&&s.cbForRequestSuggests(t)}),this._mySocket.addListener("proxyIsReady",function(e){var i=r(s.options.id);a(s.options.id,t.extend(i,e.filters));var o=i.allfilters&&i.allfilters.isSimplified;(e.forceFilterChangeEvent||!o&&i.allfilters&&0!==Object.keys(i.allfilters).length)&&("function"==typeof s.cbForFilterChange&&s.cbForFilterChange(i),s.dispatchEvent("onFilterChange",i))}),this._mySocket.addListener("onOpenTagger",function(){"function"==typeof s.cbForOpenTagger&&s.cbForOpenTagger()}),this._mySocket.addListener("onLoadMoreTags",function(){"function"==typeof s.cbForLoadMoreTags&&s.cbForLoadMoreTags()}),this._mySocket.addListener("onCloseTagger",function(){"function"==typeof s.cbForCloseTagger&&s.cbForCloseTagger()}),this._mySocket.addListener("onSortChange",function(t){"function"==typeof s.cbForSortChange&&s.cbForSortChange(t)}),this._mySocket.addListener("_internalFilterChangeListener",function(t){"function"==typeof s.cbForInternalFilterChange&&s.cbForInternalFilterChange(t)})},setTags:function(t,e,n){if(window.proxyLogs&&(i.group("Set tags"),i.info("Tags data : ",t),i.info("Summary data : ",e),i.info("Identifier : ",this.cid),i.groupEnd("Set tags")),window.top.TN_activateInterCom||window.TN_activateInterCom)this._dispatchIfReady("setTags",{tagsdata:t,summaryData:e,options:n});else try{let r=this,a={tagsdata:t,summaryData:e,options:n},s=performance.now(),g=UWA.clone(a,!0);window.proxyLogs&&i.info("setTags UWA Clone: ",performance.now()-s),o.getParentModule("DS/TagNavigator/TagNavigator",function(t){window.proxyLogs&&i.info("Tagger6WProxy TagNavigator direct call success."),t._setTags(g,r.options.id)})}catch(o){window.proxyLogs&&i.warn('Tagger6WProxy TagNavigator direct call for "setTags" has failed. Falling back to Intercom'),this._dispatchIfReady("setTags",{tagsdata:t,summaryData:e,options:n})}},addSubjects:function(t){window.proxyLogs&&(i.group("Add subjects"),i.info("Tags data : ",t),i.groupEnd("Add subjects")),this._dispatchIfReady("addSubjects",{tagsdata:t})},setCriteria:function(t){window.proxyLogs&&(i.group("Set criteria"),i.info("Criteria : ",t),i.groupEnd("Set criteria")),this._dispatchIfReady("setCriteria",{criteria:t})},removeCriteria:function(t){window.proxyLogs&&(i.group("Remove criteria"),i.info("Criteria : ",t),i.groupEnd("Remove criteria")),this._dispatchIfReady("removeCriteria",{criteria:t})},updateCriteria:function(t){window.proxyLogs&&(i.group("Update criteria"),i.info("Criteria : ",t),i.groupEnd("Update criteria")),this._dispatchIfReady("updateCriteria",{criteria:t})},updateCriterion:function(t){window.proxyLogs&&(i.group("Update criterion"),i.warn("NOTHING IMPLEMENTED !!!!!"),i.groupEnd("Update criterion"))},displayCriteria:function(t){window.proxyLogs&&(i.group("Display criteria"),i.info("Criteria : ",t),i.groupEnd("Display criteria")),this._dispatchIfReady("displayCriteria",t)},addFilterChangeListener:function(t,e){"function"==typeof t&&(this.cbForFilterChange=t.bind(e))},addCriteriaChangeListener:function(t,e){"function"==typeof t&&(this.cbForCriteriaChange=t.bind(e))},addPLMUpdateListener:function(t,e){"function"==typeof t&&(this.cbForPLMUpdate=t.bind(e))},addRequestSuggestsListener:function(t,e){"function"==typeof t&&(this.cbForRequestSuggests=t.bind(e))},addOpenTaggerListener:function(t,e){"function"==typeof t&&(this.cbForOpenTagger=t.bind(e))},addCloseTaggerListener:function(t,e){"function"==typeof t&&(this.cbForCloseTagger=t.bind(e))},addInternalFilterChangeListener:function(t,e){"function"==typeof t&&(this.cbForInternalFilterChange=t.bind(e))},addVisibilityChangeListener:function(t,e){"function"==typeof t&&(this.cbForVisibilityChange=t.bind(e))},addSortChangeListener:function(t,e){"function"==typeof t&&(this.cbForSortChange=t.bind(e))},addLoadMoreTagsListener:function(t,e){"function"==typeof t&&(this.cbForLoadMoreTags=t.bind(e))},updatePLMSuggestions:function(t){window.proxyLogs&&(i.group("Update PLM suggestions"),i.info("Data : ",t),i.groupEnd("Update PLM suggestions")),this._dispatchIfReady("updatePLMSuggestions",t)},updateSuggestions:function(t){window.proxyLogs&&(i.group("Update Suggestions"),i.info("Data : ",t),i.groupEnd("Update Suggestions")),this._dispatchIfReady("updateSuggestions",t)}})}),define("DS/TagNavigatorProxy/Tagger6WProxyWithFilteringServices",["UWA/Core","DS/TagNavigatorProxy/AbstractTagger6WProxy","DS/TagNavigatorProxy/Logger","DS/TagNavigatorProxy/TagNavigatorProxyPrivate"],function(t,e,i,o){"use strict";var n;return e.extend({init:function(e){var o,r=this;this._parent(e),n=this.internalGetFilters(this),window.proxyLogs&&(i.group("Create proxy WFS"),i.info("Options : ",e),i.groupEnd("Create proxy WFS")),o=e.events?e.events.addFilterSubjectsListener:void 0,this.addFilterSubjectsListener(o),this.getExplicitTagsByTagger=e.getExplicitTagsByTagger,this._mySocket.addListener("onFilterSubjectsChange",function(e){var o;!function(t,e){n[t]=e}(r.options.id,t.extend((o=r.options.id,n[o]||{}),e)),"function"==typeof r.cbForFilterChange&&r.cbForFilterChange(e),window.proxyLogs&&(i.group("Filtered subjects change event"),i.info("Filtered subject list : ",e),i.groupEnd("Filtered subjects change event")),r.dispatchEvent("onFilterSubjectsChange",e)})},setSubjectsTags:function(t){if(window.proxyLogs&&(i.group("Set subject tags"),i.info("Subject tags : ",t),i.groupEnd("Set subject tags")),window.top.TN_activateInterCom||window.TN_activateInterCom)this._dispatchIfReady("setSubjectsTags",t);else try{let e=this,n=performance.now(),r=UWA.clone(t,!0);window.proxyLogs&&i.info("setSubjectsTags UWA Clone: ",performance.now()-n),o.getParentModule("DS/TagNavigator/TagNavigator",function(t){window.proxyLogs&&i.info("Tagger6WProxyWithFilteringServices TagNavigator direct call success."),t._setSubjectsTags(r,e.options.id)})}catch(e){window.proxyLogs&&i.warn('Tagger6WProxyWithFilteringServices TagNavigator direct call for "setTags" has failed. Falling back to Intercom'),this._dispatchIfReady("setSubjectsTags",t)}},addSubjectsTags:function(t){window.proxyLogs&&(i.group("Add subject tags"),i.info("Subject tags : ",t),i.groupEnd("Add subject tags")),this._dispatchIfReady("addSubjectsTags",t)},addFilterSubjectsListener:function(t,e){"function"==typeof t&&(this.cbForFilterChange=t.bind(e))}})}),define("DS/TagNavigatorProxy/TagNavigatorProxy",["UWA/Core","DS/TagNavigatorProxy/Tagger6WProxy","DS/TagNavigatorProxy/Tagger6WProxyWithFilteringServices","DS/TagNavigatorProxy/Logger","DS/TagNavigatorProxy/TagNavigatorProxyPrivate"],function(t,e,i,o,n){"use strict";-1!==location.search.indexOf("proxyLogs")&&(window.proxyLogs=!0),(-1!==location.search.indexOf("TN_activateInterCom")||window.__karma__&&window.__karma__.config&&window.__karma__.config.args.find(t=>"TN_activateInterCom"===t))&&(window.top.TN_activateInterCom=!0);var r={createProxy:function(n){return window.proxyLogs&&(o.group("Create proxy method"),o.info("Optons : ",n),o.groupEnd("Create proxy method")),"WithFilteringServices"===n.filteringMode?new i(n):"FilteringOnServer"===n.filteringMode?new e(n):void t.log("Invalid input Args")},filteringMode:{FilteringOnServer:"FilteringOnServer",WithFilteringServices:"WithFilteringServices"}},a=["enableTagsOnDemand","testFeature"];return r.getFeatureStatus=function(t){return new Promise(function(e){n.getParentModule("DS/TagNavigator/TaggerSettings",function(i){let o={};UWA.is(t,"array")&&t.forEach(function(t){UWA.is(t,"string")&&-1!=a.indexOf(t)&&(o[t]=!!i.getOption(t))}),e(o)})})},r}),define("TagNavigatorProxy",["TagNavigatorProxy/TagNavigatorProxy"],function(t){"use strict";return t}),define("TagNavigatorProxy/TagNavigatorProxy",["DS/TagNavigatorProxy/TagNavigatorProxy"],function(t){"use strict";return t});