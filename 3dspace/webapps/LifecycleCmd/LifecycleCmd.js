define("DS/LifecycleCmd/ImageUtil",["DS/LifecycleServices/LifecycleServicesSettings"],function(e){"use strict";function t(){this.data={}}return t.prototype={getTypeIconUrl:function(t){if("function"==typeof t.getIconUrl)return t.getIconUrl();var n="",i="",r=t.options||t.object&&t.object.options;return r&&r.icons&&null!=(i=r.icons[0])&&(i.hasOwnProperty("iconPath")?n=i.iconPath.substr(4,i.iconPath.length-5):"string"==typeof i&&(i.startsWith("/")?n=e.getServerURL()+i:i.startsWith("https")&&(n=i))),n},getTypeIconUrlFromExpandedAssembly:function(t){var n="",i=null;return null!=t&&t.hasOwnProperty("options")||t.hasOwnProperty("object")&&t.object.hasOwnProperty("options")?i=t.options||t.object.options:null!=t&&t.hasOwnProperty("attributes")&&(i=t.attributes),i&&i.icons?null!=(n=i.icons[0])&&n.startsWith("/")&&(n=e.getServerURL()+n):i&&i.type_icon_url&&null!=(n=i.type_icon_url)&&n.startsWith("/")&&(n=e.getServerURL()+n),n},createElement:function(e,t){var n=document.createElement("img");return n.src=e,t&&t.appendChild(n),n}},new t}),define("DS/LifecycleCmd/Dictionary",["UWA/Class"],function(e){"use strict";return e.extend({init:function(){this.data={}},add:function(e,t){this.data[e]=t},find:function(e){return this.data[e]},remove:function(e){delete this.data[e]},contains:function(e){return null!=this.data[e]},count:function(){var e=0;return Object.keys(this.data).map(function(t){++e}),e},clear:function(){this.data={}},each:function(e){var t=this.data;Object.keys(this.data).map(function(n){e(n,t[n])})}})}),define("DS/LifecycleCmd/MessageMediator",["UWA/Class","UWA/Controls/Abstract"],function(e,t){"use strict";return e.singleton({init:function(){var e=t.extend({});this.mediator=new e},addEvent:function(e,t,n){this.mediator.addEvent(e,t,n)},removeEvent:function(e,t,n){this.mediator.removeEvent(e,t,n)},hasEvent:function(e){return this.mediator.hasEvent(e)},dispatchEvent:function(e,t){this.mediator.dispatchEvent(e,t)},clear:function(){var e=t.extend({});this.mediator=new e}})}),define("DS/LifecycleCmd/Queue",["UWA/Class"],function(e){"use strict";return e.extend({init:function(){this.data=[]},enqueue:function(e){this.data.push(e)},dequeue:function(){return this.data.shift()},front:function(){return this.data[0]},back:function(){return this.data[this.data.length-1]},length:function(){return this.data.length},clear:function(){this.data=[]}})}),define("DS/LifecycleCmd/TargetFolderUtil",["UWA/Class","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/LifecycleServices"],function(e,t,n){return new(e.extend({getTargetFolderId:function(e){return this._isTargetFolderEnforced()||this._isContextFolderEditor(e)?t.getCurrentFolderID():null},_isTargetFolderEnforced:function(){return t.getEnforceFolderLinkSetting()},_isContextFolderEditor:function(e){if(!e)return!1;var t=!1,i=n.getCurrentAppName(e);return console.log(i),null!=i&&i.indexOf("ENOFOL")>=0&&(t=!0),t}}))}),define("DS/LifecycleCmd/Set",["UWA/Class"],function(e){"use strict";return e.extend({init:function(){this._values={},this._size=0,this._hashFn=JSON.stringify},add:function(e){this.contains(e)||(this._values[this._hashFn(e)]=e,this._size++)},remove:function(e){this.contains(e)&&(delete this._values[this._hashFn(e)],this._size--)},contains:function(e){return void 0!==this._values[this._hashFn(e)]},size:function(){return this._size},each:function(e,t){for(var n in this._values)e.call(t,this._values[n])}})}),define("DS/LifecycleCmd/PatchDisplayNotification",["DS/LifecycleServices/LifecycleServices"],function(e){"use strict";function t(){}return t.prototype={createFunction:function(t){var n=e.getCurrentAppName(t);"DELMFN_AP"===n?t.displayNotification||(t.displayNotification=function(e){"function"==typeof t.getAlertManager&&t.getAlertManager().add({className:e.eventID,message:e.msg})}):"DELMGA_AP"===n&&!t.displayNotification&&require.defined("DS/DELWebMfgAssetsDefUIServices/UIUtils")&&(t.displayNotification=function(e){var t=require("DS/DELWebMfgAssetsDefUIServices/UIUtils");t&&t.AlertManager&&t.AlertManager.add({className:e.eventID,message:e.msg})})}},new t}),define("DS/LifecycleCmd/Stack",["UWA/Class"],function(e){"use strict";return e.extend({init:function(){this.data=[],this.top=0},push:function(e){this.data[this.top++]=e},pop:function(){if(this.top<=0)throw new Error("Stack empty!");return this.data[--this.top]},peek:function(){if(this.top<=0)throw new Error("Stack empty!");return this.data[this.top-1]},length:function(){return this.top},clear:function(){this.data=[],this.top=0}})}),define("DS/LifecycleCmd/LifecycleCmd",[],function(){return{}}),define("DS/LifecycleCmd/CommandMediator",["UWA/Class","UWA/Controls/Abstract"],function(e,t){"use strict";return e.singleton({init:function(){var e=t.extend({});this.mediator=new e},addEvent:function(e,t,n){this.mediator.addEvent(e,t,n)},removeEvent:function(e,t,n){this.mediator.removeEvent(e,t,n)},hasEvent:function(e){return this.mediator.hasEvent(e)},dispatchEvent:function(e,t){this.mediator.dispatchEvent(e,t)},clear:function(){var e=t.extend({});this.mediator=new e}})}),define("DS/LifecycleCmd/CommandAPI",["DS/ApplicationFrame/CommandsManager","DS/WebappsUtils/WebappsUtils","i18n!DS/LifecycleWidget/assets/nls/LifecycleWidgetNls"],function(e,t,n){var i={Properties:{fw:void 0,icon:"I_CATSSEditorDisplayProperties.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-attributes",family:WUXManagedFontIcons.Font3DS},title:n.properties},DeleteHdr:{fw:"LifecycleCmd",icon:"I_StandardDelete_32.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash",family:WUXManagedFontIcons.Font3DS},title:n.delete_},MaturityHdr:{fw:"LifecycleCmd",icon:"I_LifeCycleManagement32x.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collaborative-lifecycle-management",family:WUXManagedFontIcons.Font3DS},title:n.maturity},RevisionHdr:{fw:"LifecycleCmd",icon:"I_Revise.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-line-add",family:WUXManagedFontIcons.Font3DS},title:n.newRevision},NewBranchHdr:{fw:"LifecycleCmd",icon:"I_NewBranch.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-branch-add",family:WUXManagedFontIcons.Font3DS},title:n.newBranch},ReviseFromHdr:{fw:"LifecycleCmd",icon:"I_NewRevisionFrom32.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-branch-add wux-ui-3ds-flip-vertical",family:WUXManagedFontIcons.Font3DS},title:n.newRevisionFrom},DuplicateHdr:{fw:"LifecycleCmd",icon:"I_Duplicate.png",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",family:WUXManagedFontIcons.Font3DS},title:n.duplicate}};function r(e,n){return t.getWebappsBaseUrl()+(n||"RevisionFamily")+"/assets/icons/32/"+e}return{checkAvailability:function(t,n,r,o){if("Properties"===t)return!0;var c,s=!1;for(c in i)if(c===t){s=!0;break}return s&&(s=(c=e.getCommand(t,r))&&c.isTypesSupported([n[0].type])&&c.checkCIDAndSeeIfAllowed(n)),s},runCommand:function(t,n,i,r){if("Properties"===t)!function(e,t){var n={_context:t,_selection:[{getID:function(){return e}}],getSecurityContext:function(){return this._context},getSelectedNodes:function(){return this._selection},displayNotification:function(){}};require(["DS/LifecycleControls/EditPropDialog"],function(e){(new e).launchProperties(n)})}(n[0].physicalid,r);else{var o=e.getCommand(t,i);o&&("function"==typeof r.getSecurityContext&&(o.context.getSecurityContext=r.getSecurityContext),o.execute(n))}},getFontIcon:function(e){return i[e].fonticon},getIcon:function(e){return"url("+r(i[e].icon,i[e].fw)+")"},getIconPath:function(e){return r(i[e].icon,i[e].fw)},getTitle:function(e){return i[e].title},commands:Object.keys(i),getCallbackFunction:function(e,t,n,i){var r=this,o=e,c=t,s=n,u=i;return function(){r.runCommand(o,c,s,u)}}}}),define("DS/LifecycleCmd/AssemblySelectionUtil",["UWA/Class","DS/LifecycleCmd/ImageUtil"],function(e,t){return e.extend({_context:null,getSelection:function(e,t){var n=[];if(!e)return n;this._context=e;var i=t,r=null;if(i)r=this._createSelObj4Node.bind(this);else{if("function"!=typeof e.getSelectedNodes)return n;if(!(i=e.getSelectedNodes()))return n;r=this._createSelObj.bind(this)}return i.forEach(function(e){var t=r(e);n.push(t)},this),n},_createSelObj:function(e){var n=this._getRevision(e),i=this._getType(e),r=void 0,o=void 0,c=void 0;return e.getAttribute&&(r=e.getAttribute("ds6w:type"),o=e.getAttribute("ds6w:status"),c=e.getAttribute("ds6w:cadMaster")),null==r&&(r=i),null==o&&e.hasOwnProperty("object")&&e.object&&(o=e.object.current),{physicalid:e.getID(),name:e.getLabel(),displayName:this._getDisplayName(e,n),type:i,typeDisplayName:r,current:o,revision:n,tenant:this._getTenant(e),cadMaster:c,imageUrl:t.getTypeIconUrl(e)}},_createSelObj4Node:function(e){var n=e.Title;return e.revision&&(n+=" "+e.revision),{physicalid:e.id||e.nodeID||e.physicalid,name:e.Title,displayName:n,type:e.type,revision:e.revision,tenant:this._getTenant(e),cadMaster:e.cadMaster,imageUrl:t.getTypeIconUrlFromExpandedAssembly(e)}},_getType:function(e){var t=null;try{void 0===(t=e.options.type)&&(t=e.options.grid["ds6w:type"]),void 0===t&&(t=e.options.grid["ds6wg:type"])}catch(n){e.object&&e.object.type?t=e.object.type:e.type&&(t=e.type)}return null==t&&null!=e.getType&&(t=e.getType()),t},_getRevision:function(e){var t;try{t=e.object.revision}catch(n){void 0===(t=e.options.grid["ds6wg:revision"])&&(t=e.options.grid["ds6w:revision"])}return null==t&&(t=""),t},_getDisplayName:function(e,t){var n;return"function"==typeof e.getDisplayName?n=e.getDisplayName():(n=e.options.display?e.options.display:e.getLabel(),""!==t&&(n=n+" "+t)),n},_getTenant:function(e){var t=null;try{t=e.getTenant?e.getTenant():widget.getValue("x3dPlatformId")}catch(e){}return t}})}),define("DS/LifecycleCmd/SelectionUtil",["UWA/Class","DS/LifecycleCmd/ImageUtil","DS/LifecycleServices/LifecycleServices"],function(e,t,n){return e.extend({_context:null,getSelection:function(e,t){var n=[];if(!e)return n;this._context=e;var i=t,r=null;if(i)r=this._createSelObj4Node.bind(this);else{if("function"!=typeof e.getSelectedNodes)return n;if(!(i=e.getSelectedNodes()))return n;r=this._createSelObj.bind(this)}return"function"==typeof i.forEach&&i.forEach(function(e){this._addToNode(e,this._context);var t=r(e);n.push(t)},this),n},getAppSelectionRootPids:function(e){var t=[],i=n.getCurrentAppName(e);if(["ENOPSTE_AP","ENOPSTR_AP","ENOFOL4_AP"].indexOf(i)>-1&&"function"==typeof e.getSelectedNodes){var r=e.getSelectedNodes(),o=new Map(r.map(e=>[e.getID(),e]));r.forEach(function(e){var n=e.getPath(),i=e.getID(),r=!1;n.every(function(e,n){var c=e.getID(),s=o.has(c);return c===i?(r||-1!==t.indexOf(c)||t.push(c),!1):(r=s,!0)})})}return t},_addToNode:function(e,t){var n={};if(t&&"objects"in t&&"objectsPID"in t){var i=t.objectsPID.indexOf(e.physicalid);if(i>=0){var r=t.objects[i];"options"in r&&(n=r.options)}}e.type;var o="";if("ds6w:status"in e?e.currentDisplayName=e["ds6w:status"]:"ds6w:status"in n&&(e.currentDisplayName=n["ds6w:status"]),"ds6w:type"in e?e.typeDisplayName=e["ds6w:type"]:"ds6w:type"in n&&(e.typeDisplayName=n["ds6w:type"]),!("icon"in e)&&"icons"in n){o=n.icons[0];e.icon=o}},_getAttValue:function(e,t){var n=void 0;return"function"==typeof e.getAttribute?n=e.getAttribute(t):e.options&&e.options.grid?n=e.options.grid[t]:e.object&&e.object.options&&(n=e.object.options[t]),n||""},_createSelObj:function(e){var n=this._getRevision(e),i=this._getType(e),r=this._getServiceId(e),o=this._getAttValue(e,"ds6w:type"),c=this._getAttValue(e,"ds6w:status"),s=this._getAttValue(e,"ds6w:cadMaster");return null==o&&(o=i),null==c&&e.hasOwnProperty("object")&&e.object&&(c=e.object.current),{physicalid:"function"==typeof e.getID?e.getID():"",name:"function"==typeof e.getLabel?e.getLabel():"",displayName:this._getDisplayName(e,n),type:i,serviceId:r,typeDisplayName:o,current:c,revision:n,tenant:this._getTenant(e),imageUrl:t.getTypeIconUrl(e),cadMaster:s}},_createSelObj4Node:function(e){var t=e.displayName;e.revision&&(t+=" "+e.revision);var n=null;"icon"in e&&(n=e.icon);var i=e.type;"typeDisplayName"in e&&(i=e.typeDisplayName);var r="";"currentDisplayName"in e&&(r=e.currentDisplayName);var o=null;return"serviceurl"in e&&(o=e.serviceurl),{physicalid:e.id||e.nodeID||e.physicalid||e.physicalId,objectId:e.id||e.nodeID||e.objectId,name:e.displayName,displayName:t,type:e.type,typeDisplayName:i,current:r,serviceurl:o,revision:e.revision,tenant:this._getTenant(e),imageUrl:n}},_getType:function(e){var t=null;try{void 0===(t=e.options.type)&&(t=e.options.grid["ds6w:type"]),void 0===t&&(t=e.options.grid["ds6wg:type"])}catch(n){e.object&&e.object.type?t=e.object.type:e.type&&(t=e.type)}return null==t&&null!=e.getType&&(t=e.getType()),t||""},_getServiceId:function(e){var t;return e.object&&e.object.serviceId&&(t=e.object.serviceId),t||(e.options&&e.options.grid&&(t=e.options.grid.serviceId),t||("function"==typeof e.getServiceId&&(t=e.getServiceId()),t||("function"==typeof e.getAttribute&&(t=e.getAttribute("serviceId")),t||(t||(t="3DSpace"),t))))},_getRevision:function(e){var t;return"function"==typeof e.getAttribute?t=e.getAttribute("ds6wg:revision"):e.object&&e.object.revision?t=e.object.revision:e.options&&e.options.grid&&null==(t=e.options.grid["ds6wg:revision"])&&(t=e.options.grid["ds6w:revision"]),null==t&&(t=""),t},_getDisplayName:function(e,t){var n;return"function"==typeof e.getDisplayName?n=e.getDisplayName():"function"==typeof e.getLabel?n=e.getLabel():(e.options&&e.options.display&&(n=e.options.display),""!==t&&(n=n+" "+t)),n||""},_getTenant:function(e){var t=null;try{t=e.getTenant?e.getTenant():widget.getValue("x3dPlatformId")}catch(e){}return t}})}),define("DS/LifecycleCmd/CommandMgr",["UWA/Class","DS/LifecycleCmd/SelectionUtil","DS/LifecycleCmd/MessageMediator","DS/LifecycleCmd/CommandMediator","DS/LifecycleCmd/Dictionary","DS/LifecycleCmd/Queue","DS/LifecycleServices/Refresh","DS/LifecycleCmd/PatchDisplayNotification","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/Utils","DS/PlatformAPI/PlatformAPI"],function(e,t,n,i,r,o,c,s,u,a,d){"use strict";return e.singleton({_initialized:!1,currentLocation:null,init:function(){this._commands=new r,this._runningCommands=new r,this.selUtil=new t,this._UIUpdateQueue=new o,this._PSEContextWithDisabledEdit=!1,c.init()},registerCommand:function(e,t){this._commands.add(e.name,e),this._initContext(t)},executeCmd:function(e,t,i){this._runningCommands.add(e.name,e),this._updateCmdUI(i.context);var r=function(){"function"==typeof i.onCompletedCallback&&i.onCompletedCallback()};try{c.setContext(i.context),n.dispatchEvent("LC_CmdMgr_preExecCmd",{cmd:e});var o=this,s=this.selUtil.getSelection(i.context,i.targetNodes);t.executeCmd(s,i,function(){o._postCmdExec(e,i.context),r()})}catch(t){this._handleError(t,i.context),this._postCmdExec(e,i.context),r()}},_initContext:function(e){this._initialized||(this._initialized=!0,e?(this._initCmdMgr(e),n.dispatchEvent("LC_CmdMgr_Init"),i.dispatchEvent("init")):this._initPADContextAsync())},_initCmdMgr:function(e){u.app_initialization(function(){}),u.setFolderCommunicationChannel(e),s.createFunction(e);var t=function(t){var n=t||e;if(n&&"function"==typeof n.getSelectedNodes){var i=n.getSelectedNodes();this._updateUIState(i)}};i.addEvent("update",t,this),n.addEvent("LC_CmdMgr_UpdateUI",t,this),this._onSelChangePAD=a.debounce(this._onSelChangePADImpl.bind(this),100),setTimeout(function(){this._updateUIState([])}.bind(this))},_initPADContextAsync:function(){var e=this;require(["DS/PADUtils/PADContext"],function(t){var r=t.get();e._initCmdMgr(r),r.getPADTreeDocument().getXSO().onPostAdd(function(t){e._onSelChangePAD(r)}),r.getPADTreeDocument().getXSO().onPostRemove(function(t){e._onSelChangePAD(r)}),r.getPADTreeDocument().getXSO().onEmpty(function(t){e._onSelChangePAD(r)}),d.subscribe("FolderEditor.CurrentFolder",function(t){e._onCurrentFolderChange(r,t)}.bind(e)),r.addEvent("editModeModified",function(t){var n=!t;n!==e._PSEContextWithDisabledEdit&&(e._PSEContextWithDisabledEdit=n,e._onSelChangePAD(r))}),e._setCurrentLocation(r),e._PSEContextWithDisabledEdit="function"==typeof r.getEditMode&&!0!==r.getEditMode(),n.dispatchEvent("LC_CmdMgr_Init"),i.dispatchEvent("init")})},_getFolderSelectionObject:function(e){var t=this.selUtil.getSelection(e);return 1===t.length?t[0]:null},_inspectFolderLocation:function(e){var t={isTrashFolder:!1,isFavorite:!1},n="function"==typeof e.getCurrentFolder?e.getCurrentFolder():null,i=JSON.parse(n);return i&&(t.isTrashFolder=!!i.IsInDeletedItems&&i.IsInDeletedItems,t.isFavorite=!!i.IsFavorite&&i.IsFavorite),t},_setCurrentLocation:function(e){var t=this._inspectFolderLocation(e);this.currentLocation=this._getFolderSelectionObject(e),this.currentLocation&&(this.currentLocation.IsInDeletedItems=t.isTrashFolder,this.currentLocation.IsLink=t.isFavorite)},_onSelChangePADImpl:function(e){var t=e.getPADTreeDocument().getXSO().get();this._UIUpdateQueue.enqueue(t),setTimeout(function(){this._queuedUpdateUIState()}.bind(this))},_onCurrentFolderChange:function(e,t){this._setCurrentLocation(e),this._UIUpdateQueue.enqueue([]),setTimeout(function(){this._queuedUpdateUIState(),n.dispatchEvent("LC_CmdMgr_CurrentFolderChanged",t)}.bind(this))},_postCmdExec:function(e,t){this._runningCommands.remove(e.name,e),this._updateCmdUI(t),n.dispatchEvent("LC_CmdMgr_postExecCmd",{cmd:e})},_queuedUpdateUIState:function(){if(0!==this._UIUpdateQueue.length()){var e=this._UIUpdateQueue.dequeue();this._updateUIState(e)}},_updateUIState:function(e){var t="none";this.currentLocation&&(this.currentLocation.IsInDeletedItems?t="trash":this.currentLocation.type&&this._selectionContainsFolder([this.currentLocation.type])&&(t="standard"));var n=!1;0===e.length&&"standard"===t&&(e=[this.currentLocation],this.currentLocation.IsLink&&(n=!0));var i=e.length,r=this.getSelTypeArray(e),o=this._selectionContainsFolder(r),c=this._PSEContextWithDisabledEdit,s=function(s){return s.isSelCountSupported(i)&&(!1===o||s.isFolderSelSupported())&&s.isFolderContextSupported(t)&&s.shouldEnable()&&s.isTypesSupported(r)&&s.checkCIDAndSeeIfAllowed(e)&&(!1===c||s.isEnabledWhenPSEEditModeDisabled())&&!(n&&!1===s.isLinkSupported())&&s.remainEnabled()};this._commands.each(function(t,n){var i=n.getAsyncUpdate(e),r=!i&&s(n);r?n.enable():n.disable(),i&&i.then(function(){(r=s(n))?n.enable():n.disable()})})},getSelTypeArray:function(e){var t=[];return e.forEach(function(e){var n=e.type?e.type:this.selUtil._getType(e);-1===t.indexOf(n)&&t.push(n)},this),t},_selectionContainsFolder:function(e){var t=!1;return e.every(function(e){return!(["Workspace","Workspace Vault","Personal Workspace","Folder","Personal Folder","RootFolder"].indexOf(e)>=0)||(t=!0,!1)},this),t},_updateCmdUI:function(e){var t=!1;if(this._runningCommands.each(function(e,n){!1===n.options.isAsynchronous&&(t=!0)}),t)this._commands.each(function(e,t){t.disable(),t.commandRunningNotify(!0)});else{var n=this.selUtil.getSelection(e);this._updateUIState(n),this._commands.each(function(e,t){t.commandRunningNotify(!1)})}},_handleError:function(e,t){if(console.log(e),t&&"function"==typeof t.displayNotification){var n=e;e.hasOwnProperty("message")&&(n=e.message);var i={eventID:"error",msg:n};t.displayNotification(i)}}})}),define("DS/LifecycleCmd/CommandBase",["DS/LifecycleCmd/CommandMgr","DS/LifecycleCmd/TargetFolderUtil","DS/ApplicationFrame/Command"],function(e,t,n){"use strict";return n.extend({name:"",context:null,_shouldEnable:!0,init:function(t,n){this.name=n,null===(t=t||{ID:"dummyID",context:{}}).context?this._setPADContextAsync():this.context=t.context,this._parent(t,{mode:"exclusive",isAsynchronous:!1}),e.registerCommand(this,t.context)},beginExecute:function(){},execute:function(){},endExecute:function(){},executeCmd:function(n,i,r){var o=null;o="function"==typeof this.getTargetFolderId?this.getTargetFolderId(this.context):t.getTargetFolderId(this.context),i&&"function"!=typeof i.forEach&&(i=[i]),e.executeCmd(this,n,{context:this.context,targetFolderId:o,name:this.name,onCompletedCallback:r,targetNodes:i})},isSelCountSupported:function(e){return!1},isFolderSelSupported:function(){return!1},isTypesSupported:function(e){return!0},shouldEnable:function(){return this._shouldEnable},setShouldEnable:function(e){this._shouldEnable=e},checkCIDAndSeeIfAllowed:function(e){var t=!0,n=e.length;if(n>0)if("function"==typeof e[0].getID){for(var i=0;i<n;i++)if(0===e[i].getID().indexOf("cid:")){t=!1;break}}else if(e[0].physicalid)for(i=0;i<n;i++)if(0===e[i].physicalid.indexOf("cid:")){t=!1;break}return t},isFolderContextSupported:function(e){return"trash"!==e},isEnabledWhenPSEEditModeDisabled:function(){return!1},isLinkSupported:function(){return!0},getAsyncUpdate:function(e){return null},_setPADContextAsync:function(){var e=this;require(["DS/PADUtils/PADContext"],function(t){e.context=t.get()})},remainEnabled:function(){return!0},commandRunningNotify:function(e){}})}),define("DS/LifecycleCmd/RestoreDeletedItemsCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"restore_deleteditems_command")},execute:function(){var e=this;require(["DS/DeleteWidget/DeleteWidget"],function(t){e.executeCmd(new t("restore"))})},isSelCountSupported:function(e){return 1===e},isTypesSupported:function(e){var t=!0;return e.every(function(e){return!(["CATIA Embedded Component","CATAnalysisResults","CATAnalysisComputations"].indexOf(e)>=0)||(t=!1,!1)},this),t},isFolderContextSupported:function(e){return"trash"===e}})}),define("DS/LifecycleCmd/NewBranchCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleCmd/CommandMgr","DS/LifecycleServices/DictionaryServices"],function(e,t,n){"use strict";return e.extend({init:function(e){this._parent(e,"newbranch_command")},execute:function(e){var t=this;require(["DS/NewBranchWidget/NewBranchWidget"],function(n){t.executeCmd(new n,e)})},isSelCountSupported:function(e){return e>=1},listOfTypesToBlock:["XCADModelRepReference"],_isBlockedType:function(e){return this.listOfTypesToBlock.some(function(t){return t===e})},isTypesSupported:function(e){var t=this;return!e.some(function(e){return!(e&&!t._isBlockedType(e))||n.isKindOfFromCache(t.listOfTypesToBlock,e)})},checkCIDAndSeeIfAllowed:function(e){return!0},getAsyncUpdate:function(e){var i=this,r=t.getSelTypeArray(e);if(r.every(function(e){return!!i._isBlockedType(e)||n.isTypeInCache(e)}))return null;var o=[];r.forEach(function(t){o.push(n.getIsKindOfPromise(e[0].tenant,i.listOfTypesToBlock,t))},this);return UWA.Class.Promise.all(o).then(function(e){return!e.some(function(e){return e},this)})}})}),define("DS/LifecycleCmd/ThumbnailsLayoutCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this.context=e.context,this._parent(e,"tileslayout_command")},execute:function(e){if(null!==this._ctx&&void 0!==this._ctx){this.context.thumbnailsLayout()}},isSelCountSupported:function(e){return!0},isFolderSelSupported:function(){return!0},isEnabledWhenPSEEditModeDisabled:function(){return!0},remainEnabled:function(){return!0},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/ReviseFromCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleCmd/CommandMgr","DS/LifecycleServices/DictionaryServices","DS/LifecycleServices/LifecycleServices","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/Utils","DS/LifecycleServices/WebReq"],function(e,t,n,i,r,o,c){"use strict";return e.extend({init:function(e){this._parent(e,"reviseFrom_command"),this._useMerge=!1,this._setupMergeUsageTypes()},_setupMergeUsageTypes:function(){var e=this;this._checkUrlParamForMergeTypes(),this._getMergeUsageTypesFromExpression().then(function(t){e.mergeTypeArray=e.mergeTypeArray.concat(t),e.refTypeArray=e.refTypeArray.filter(t=>-1===e.mergeTypeArray.indexOf(t))})},_getMergeUsageTypesFromExpression:function(){var e=this,t="OnPremise";return window&&window.widget&&window.widget.getValue("x3dPlatformId")&&(t=window.widget.getValue("x3dPlatformId")),new UWA.Promise(function(n,o){r.app_initialization(function(){i.getSecurityContextPromise(t,e.context).then(function(e){c.get("/resources/lifecycle/util/getExpression",{tenant:t,securityContext:e,params:{expression:"LifecycleMergeEnabledTypes"}}).then(function(e){if(e&&e.result){var t=e.result.split(",");n(t)}}).catch(e=>{})}).catch(e=>{})})})},_checkUrlParamForMergeTypes:function(){var e=o.getURLParamValue("mergeTypes");if(e){var t=e.split(",");this.mergeTypeArray=this.mergeTypeArray.concat(t)}},refTypeArray:["CATPart","CATProduct","VPMReference","SoftwareLogicalItem"],mergeTypeArray:[],_checkSelectionForMergeUsage:function(e){var n=t.selUtil.getSelection(this.context,e),i=t.getSelTypeArray(n);if(i&&Array.isArray(i)&&i.length>0){var r=i[0];r&&(this._useMerge=this._isMergeType(r))}},execute:function(e){var t=this;if(this._checkSelectionForMergeUsage(e),this._useMerge){require(["DS/CompareCmd/CompareCmd"],function(n){var r={ID:"CompareMergeHdr"};if(e){var o=i._getSecurityContextFromContext(t.context);e.forEach(function(e){e.objIDType="modelID",e.objType=e.type,e.contextId=o}),r.disregardSelectedNodes=!0,r.CompareIds=e}t.mergeCmd=new n(r),t.mergeCmd.context=t.context,t.mergeCmd.begin()})}else require(["DS/ReviseFromWidget/ReviseFromWidget"],function(n){t.executeCmd(new n,e)})},isSelCountSupported:function(e){return this._useMerge?1===e||2===e:1===e},_isRefType:function(e){return this.refTypeArray.some(function(t){return t===e})},_isMergeType:function(e){return this.mergeTypeArray.some(function(t){return t===e})},isTypesSupported:function(e){var t=this;return e.every(function(e){return t._isRefType(e)||n.isKindOfFromCache(t.refTypeArray,e)?(t._useMerge=!1,!0):!!t._isMergeType(e)&&(t._useMerge=!0,!0)})},getAsyncUpdate:function(e){var i=this,r=t.getSelTypeArray(e);if(r.every(function(e){return!!i._isRefType(e)||(!!i._isMergeType(e)||n.isTypeInCache(e))}))return null;var o=[];r.forEach(function(t){o.push(n.getIsKindOfPromise(e[0].tenant,i.refTypeArray,t))},this);return UWA.Class.Promise.all(o).then(function(e){return e.every(function(e){return e},this)})}})}),define("DS/LifecycleCmd/OSLCConsumerCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"oslc_command")},setup:function(e){this.oslcConsumerOptions=e},execute:function(){var e=this;require(["DS/OSLCConsumer/OSLCConsumer"],function(t){e.executeCmd(new t(e.oslcConsumerOptions))})},isSelCountSupported:function(e){return 1===e},isFolderSelSupported:function(){return!1}})}),define("DS/LifecycleCmd/DuplicateCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"duplicate_command")},execute:function(e){var t=this;require(["DS/DuplicateWidget/DuplicateWidget"],function(n){t.executeCmd(new n,e)})},isSelCountSupported:function(e){return e>=1},isTypesSupported:function(e){return e.every(function(e){return!(["Route Template","ENOCLG_LibraryReference","XCADModelRepReference"].indexOf(e)>=0)},this)}})}),define("DS/LifecycleCmd/DeleteCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"delete_command")},execute:function(e){var t=this;require(["DS/DeleteWidget/DeleteWidget"],function(n){t.executeCmd(new n("delete"),e)})},isSelCountSupported:function(e){return e>=1},isFolderSelSupported:function(){return!0},isTypesSupported:function(e){return e.every(function(e){return!0},this),!0},isLinkSupported:function(){return!1},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/ReviseCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"revise_command")},execute:function(e){var t=this;require(["DS/ReviseWidget/ReviseWidget"],function(n){t.executeCmd(new n,e)})},isSelCountSupported:function(e){return e>=1},isTypesSupported:function(e){var t=!1;return Array.isArray(e)&&e.length>0&&(t=e.every(function(e){return!!e&&!(["ENOCLG_LibraryReference"].indexOf(e)>=0)})),t},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/IterationsCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"iterations_command")},execute:function(){var e=this;require(["DS/IterationsWidget/IterationsWidget"],function(t){e.executeCmd(new t)})},isSelCountSupported:function(e){return 1===e},isTypesSupported:function(e){var t=!1;return e.every(function(e){["CATPart","3DShape","SystemModel"].indexOf(e)>=0&&(t=!0)},this),t},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/DeleteDeletedItemsCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/LifecycleServices"],function(e,t,n){"use strict";return e.extend({init:function(e){this._parent(e,"delete_deleteditems_command")},execute:function(){var e=this;require(["DS/DeleteWidget/DeleteWidget"],function(t){e.executeCmd(new t("destroy"))})},isSelCountSupported:function(e){return 1===e},isTypesSupported:function(e){var t=!0;return e.every(function(e){return!(["CATIA Embedded Component","CATAnalysisResults","CATAnalysisComputations"].indexOf(e)>=0)||(t=!1,!1)},this),t},isFolderContextSupported:function(e){return!0}})}),define("DS/LifecycleCmd/LargeTilesLayoutCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this.context=e.context,this._parent(e,"largetileslayout_command")},execute:function(e){if(null!==this._ctx&&void 0!==this._ctx){this.context.largeTilesLayout()}},isSelCountSupported:function(e){return!0},isFolderSelSupported:function(){return!0},isEnabledWhenPSEEditModeDisabled:function(){return!0},remainEnabled:function(){return!0},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/ClearAllCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this.context=e.context,this._parent(e,"clearall_command")},execute:function(e){if(null!==this._ctx&&void 0!==this._ctx){this.context.empty()}},isSelCountSupported:function(e){return!0},isFolderSelSupported:function(){return!0},isEnabledWhenPSEEditModeDisabled:function(){return!0},remainEnabled:function(){return!0},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/HistoryCmd",["DS/LifecycleCmd/CommandBase","DS/LifecycleServices/LifecycleServices","DS/ENOXVersionExplorerUtils/VersionExplorerSettings"],function(e,t,n){"use strict";return e.extend({init:function(e){var i=this;this.isEditMode=!0,this.lastEditModeFromPadContext=!0,this._parent(e,"history_command"),null==i.context&&require(["DS/PADUtils/PADContext"],function(e){var t=e.get();null!=t&&(null!=t.getEditMode&&!0!==t.getEditMode()&&(i.isEditMode=!1,i.lastEditModeFromPadContext=!1),t.addEvent("editModeModified",function(e){!0===e?(i.isEditMode=!0,i.lastEditModeFromPadContext=!0):(i.isEditMode=!1,i.lastEditModeFromPadContext=!1)}))}),t.getHistoryConfigPromise().then(function(e){n.historyConfig=e},function(){n.historyConfig=null})},execute:function(){var e,t=this;this.historyDlg||(this.disable(),require(["DS/HistoryExplorer/HistoryDialog"],function(n){t.historyDlg=new n,t.historyDlg.addEvent("onComplete",e=function(n){t.historyDlg.removeEvent("onComplete",e),t.historyDlg=null}),t.executeCmd(t.historyDlg)}))},isSelCountSupported:function(e){return 1===e},isFolderSelSupported:function(){return!1},isEnabledWhenPSEEditModeDisabled:function(){return!0},remainEnabled:function(){return null==this.historyDlg},commandRunningNotify:function(e){this.lastEditModeFromPadContext&&(this.isEditMode=!e)},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/TilesLayoutCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this.context=e.context,this._parent(e,"tileslayout_command")},execute:function(e){if(null!==this._ctx&&void 0!==this._ctx){this.context.tilesLayout()}},isSelCountSupported:function(e){return!0},isFolderSelSupported:function(){return!0},isEnabledWhenPSEEditModeDisabled:function(){return!0},remainEnabled:function(){return!0},checkCIDAndSeeIfAllowed:function(e){return!0}})}),define("DS/LifecycleCmd/IterationsSWCmd",["DS/LifecycleCmd/CommandBase"],function(e){"use strict";return e.extend({init:function(e){this._parent(e,"iterations_sw_command")},execute:function(){var e=this;require(["DS/IterationsWidget/IterationsSWWidget"],function(t){e.executeCmd(new t)})},isSelCountSupported:function(e){return 1===e},isTypesSupported:function(e){var t=!1;Array.isArray(e)&&1==e.length&&(t=null!=e[0]);return t}})}),define("DS/LifecycleCmd/MaturityCmd",["DS/LifecycleCmd/CommandBase","UWA/Class/Promise"],function(e,t){"use strict";return e.extend({init:function(e){this._parent(e,"maturity_command")},executeAsync:function(e){var t=this;return new UWA.Class.Promise(function(n,i){t.execute(e,function(){n()})})},execute:function(e,t){var n=this;require(["DS/MaturityWidget/MaturityWidget"],function(i){n.maturityWidget=new i(n.options),n.executeCmd(n.maturityWidget,e,t)})},executeCompactViewAsync:function(e,t,n,i){var r=this;return new UWA.Class.Promise(function(o,c){r.executeCompactView(e,t,n,i,function(){o()})})},executeCompactView:function(e,t,n,i,r){var o=this;require(["DS/ChangeMaturityWidget/ChangeMaturityWidget"],function(c){o.changeMaturityWidget=new c(e,t,n,i,r),o.changeMaturityWidget.inject(t)})},_onResize:function(){this.maturityWidget&&"function"==typeof this.maturityWidget.onResize&&this.maturityWidget.onResize()},isSelCountSupported:function(e){return e>=1},isFolderSelSupported:function(){return!0},getTargetFolderId:function(){return null},isTypesSupported:function(e){var t=!1;return Array.isArray(e)&&e.length>0&&(t=e.every(function(e){return!!e&&!(["CATPart","CATProduct","CATDrawing"].indexOf(e)>=0)})),t},checkCIDAndSeeIfAllowed:function(e){return!0}})});