/*!  COPYRIGHT DASSAULT SYSTEMES 2016   */
define("DS/UPSCommands/commands/UPSAuthCmdCutCopyPaste",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/AppContext","DS/AuthGenericCommands/AuthGenericCmdUtils","DS/AuthGenericCommands/AuthGenericCmdWSAccess","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json"],function(e,t,n,a,o,s,i){"use strict";var r=[{modeler:"Unknown type is not yet supported for reparent service",user:s.reparent_failed_unsupported_type_child_unknown},{modeler:"Input parameters are not valid",user:s.ERR_008},{modeler:"Error  from  [moveProductInstance]  Id  [Cannot paste an instance under a terminal reference]",user:i.reparent_failed_target_3DPart},{modeler:"Target for reparent service is invalid",user:i.reparent_failed_target_invalid},{modeler:"cannot be cast to com.dassault_systemes.vplm.modeler.entity.PLMxReferenceEntity",user:s.insert_unsupported_unkowntype_parent,type:i.type_PhysicalProduct},{modeler:"You don't have the required license for this command.",user:s.error_license},{modeler:"Embedded Component not supported",user:i.authoring_failed_EC},{modeler:"Reparent disabled if parent reference has config modeler",user:i.reparent_failed_parent_config},{modeler:"ERR_FUN092398",user:i.ERR_FUN092398},{modeler:"Invalid input parameter source/isInstanceOf",user:i.ERR_IR_820293}];return e.extend(t,{defaultOptions:{modeler:"product",version:"1.0",bAllOrNothing:!0,chunkSize:30},_getResourceId:function(e){return Array.isArray(e)&&0!==e.length?e[e.length-1]:""},_getRelationId:function(e){return!Array.isArray(e)||e.length<2?"":e[e.length-2]},_getPathInstance:function(e){for(var t=[],n=e.slice();Array.isArray(n)&&n.length>2;)t.unshift(this._getRelationId(n)),n.length=n.length-2;return t},init:function(e){e.context&&n.setContext(e.context),this._parent(e,{mode:"exclusive",isAsynchronous:!1})},execute:function(e){var t=e.data.ordering;this.existingChildren={};var o=[],s=e.data.parents.length;console.log("nTarget =",s);for(var r=0;r<s;r++){var d=e.data.parents[r],l=n.getNodesById(this._getResourceId(d))[0];console.log("Target["+r+"] is",n.getName(l));var u={isInstanceOf:this._getResourceId(d),pathArray:d,node:l};t&&(u.order=t);var m=[],c=n.getChildren(l);c&&c.length>0&&c.forEach(function(e){var t=n.getInstance(e);t&&m.push(t)}),this.existingChildren[u.isInstanceOf]=m,o.push(u)}var p=[],h=[];var f=e.data.children.length;for(console.log("nSource =",f),r=0;r<f;r++){d=e.data.children[r];var v=this._getResourceId(d),C=n.getNodesById(v)[0];console.log("Source["+r+"] is",n.getName(C));var S=this._getPathInstance(d),A={isInstanceOf:v,instance:this._getRelationId(d)};S.length>0&&(A.pathArray=S),p.push(A),h.push(v)}for(r=0;r<s;r++){var g=o[r].isInstanceOf;if(!a.canInstantiate(g,h,i.operationAborted_Cycle))return void(e.onFailure&&e.onFailure())}for(var R=[],y=0;y<s;y++)for(var _=y===s-1?e.mode:"CopyPaste",P=0;P<f;P++){var U={target:o[y],source:p[P]};"CutPaste"===_&&(U.mode=_),R.push(U)}var D={chunkSize:e.data.chunkSize||this.defaultOptions.chunkSize,requests:R,cbOnProgress:function(e,t,n){console.log("reparentMassOperations.cbOnProgress",t)},cbOnComplete:function(t,a){var o=[],s=[];if(t.getAnswers().forEach(function(e){var a=e.answer;"success"===a.status?(n.author(!0),t.getClientTaskData()?o.push({hasParent:a.hasParent,resourceid:a.childIsInstanceOf,relationid:a.childInstance,instanceName:a.instanceName,clientTaskData:t.getClientTaskData()}):o.push({hasParent:a.hasParent,resourceid:a.childIsInstanceOf,relationid:a.childInstance,instanceName:a.instanceName})):s.push(a)}),o.length>0&&e.onSuccess&&(console.log("reparentMassOperations.cbOnComplete done, start refresh onSuccess (",o.length,")"),console.timeEnd("ccp-ws"),e.onSuccess(o)),s.length>0&&e.onFailure){var i=s[0].messages,r=s[0].targets;console.log("reparentMassOperations.cbOnComplete done, start refresh onFailure"),console.timeEnd("ccp-ws"),e.onFailure({messages:[i],targets:[r]})}}};console.log("reparentMassOperations need to process",R.length,"operation(s)"),console.time("ccp-ws");this._reparentMassOperations(D,e)},_optimize:function(e){for(var t=[],n=e.length,a={},o=0,s=0;s<n;s++){a[l=(d=e[s]).target.isInstanceOf]?a[l].count++:(a[l]={count:1,cacheId:o++},d.target.pathArray&&(a[l].pathArray=d.target.pathArray),this.existingChildren[l].length>0&&(a[l].children=this.existingChildren[l]),d.target.order&&(a[l].order=d.target.order))}var i={};for(var r in a)i[r]={isInstanceOf:r},a[r].pathArray&&(i[r].pathArray=a[r].pathArray),a[r].children&&(i[r].children=a[r].children),a[r].order&&(i[r].order=a[r].order),a[r].count>1&&(i[r].cacheId=a[r].cacheId);for(s=0;s<n;s++){r=(d=e[s]).target.isInstanceOf,d.source.isInstanceOf;var d,l={};void 0===a[r].used?(l=i[r],a[r].used=!0):l={cacheId:i[r].cacheId};var u={target:l,source:d.source};d.mode&&(u.mode=d.mode),t.push(u)}return t},_reparentMassOperations:function(e,t){var n=this,s=e,d="CutPaste"===t.mode?i.reparent_failed:i.insert_existing_failed;return s.cbOnProcess=function(e,t){console.log("reparentMassOperations.cbOnProcess: size=",t.length),t=n._optimize(t),console.log(t),o.reparent({data:{version:n.defaultOptions.version,bAllOrNothing:n.defaultOptions.bAllOrNothing,operations:t},modeler:n.defaultOptions.modeler,timeout:6e4,onComplete:function(o){if("success"===(o="string"==typeof o?JSON.parse(o):o).status){o.clientTaskData&&e.addClientTaskData(o.clientTaskData);for(var s=0,i=t.length;s<i;s++){var l=t[s],u=(h=o.results[s]).hasParent;n.existingChildren[u].push(h.childInstance),h.status="success",e.setAnswer(l,h)}}if("failure"===o.status){var m;void 0!==o.messages&&(m=a.buildErrorMessage(o.messages,{remapErrors:r}));var c=[d+" "+m],p=t[0].target.pathArray;for(s=0,i=t.length;s<i;s++){l=t[s];var h={status:"failure",messages:c,targets:p};e.setAnswer(l,h)}e.cancel()}},onFailure:function(n,o){console.log("reparentMassOperations.onFailure");var s=void 0;try{var i=JSON.parse(o);i||(i=o),s=a.buildErrorMessage(i.messages,{remapErrors:r})}catch(e){s=n.message}for(var l=[d+" "+s],u=t[0].target.pathArray,m=0,c=t.length;m<c;m++){var p=t[m],h={status:"failure",messages:l,targets:u};e.setAnswer(p,h)}e.cancel()}})},new o.MassChunkedRequests(s)}})}),define("DS/UPSCommands/commands/UPSAuthCmdAvailability",["UWA/Class","DS/PADUtils/PADContext","DS/Selection/CSOManager","DS/Utilities/Utils"],function(e,t,n,a){"use strict";const o="monoSelection",s="multiSelection",i="empty_no_authoring_or_multiSelection";var r=!0;return e.extend({init:function(e){var o=this;o._parent(e),o._tokens={};var s=t.get();if(s){"function"==typeof s.getEditMode&&(r=s.getEditMode(),s.addEvent("editModeModified",o._check_onUpdateAuthoring.bind(o))),o.defaultOptions._check_onAdd=a.debounce(o._check_onAdd,200),o.defaultOptions._check_onRemove=a.debounce(o._check_onRemove,200);var i=s.name;if("pad_component"===i){o._check_onAdd();var d=s.getPADTreeDocument().getXSO();o._tokens.onAdd2D=d.onPostAdd(o.defaultOptions._check_onAdd.bind(o)),o._tokens.onAdd2D=d.onPostRemove(o.defaultOptions._check_onRemove.bind(o))}"ENOPAD3DViewer"===i&&(o._check_onAdd(),o._tokens.onAdd3D=n.onPostAdd(o.defaultOptions._check_onAdd.bind(o)),o._tokens.onRemove3D=n.onPostRemove(o.defaultOptions._check_onRemove.bind(o)))}var l=this._destroy;this._destroy=function(){void 0!==o._tokens&&(o._tokens.onAdd3D&&(n.unsubscribe(o._tokens.onAdd3D),o._tokens.onAdd3D=void 0),o._tokens.onRemove3D&&(n.unsubscribe(o._tokens.onRemove3D),o._tokens.onRemove3D=void 0)),l.call(o)}},_check_onAdd:function(){var e=this,t=void 0,n=this.defaultOptions.availability;if(n){var a=e._getSelectionCount(),d=!0;if(n===i&&0===a&&(d=!1),d&&!r)return void e._enableCommand(!1);"always"===n||n===i?t=!0:n===o?t=1===a:n===s&&(t=a>=1)}t&&this.defaultOptions.fnCmdAvailability?e.defaultOptions.fnCmdAvailability(function(n){t=n,e._enableCommand(t)}):e._enableCommand(t)},_check_onRemove:function(){var e=this,t=void 0,n=this.defaultOptions.availability;if(n){var a=e._getSelectionCount(),d=!0;if(n===i&&0===a&&(d=!1),d&&!r)return void e._enableCommand(!1);"always"===n||n===i?t=!0:n===o?t=1===a:n===s&&(t=a>=1)}t&&this.defaultOptions.fnCmdAvailability?e.defaultOptions.fnCmdAvailability(function(n){t=n,e._enableCommand(t)}):e._enableCommand(t)},_check_onUpdateAuthoring:function(e){r=e;var t=this,n=void 0,a=this.defaultOptions.availability;if(a){var d=t._getSelectionCount(),l=!0;if(a===i&&0===d&&(l=!1),l&&!r)return void t._enableCommand(!1);"always"===a||a===i?n=!0:a===o?n=1===d:a===s&&(n=d>=1)}n&&this.defaultOptions.fnCmdAvailability?this.defaultOptions.fnCmdAvailability(function(e){t._enableCommand(e)}):t._enableCommand(n)},_getSelectionCount:function(){var e=t.get();if(e&&e.name){if("pad_component"===e.name)return e.getPADTreeDocument().getXSO().get().length;if("ENOPAD3DViewer"===e.name)return n.get().length}return-1},_enableCommand:function(e){!0===e?this.enable():this.disable()},_destroy:function(){this._parent()}})}),define("DS/UPSCommands/UPSCmdUtils",["DS/AuthGenericCommands/AuthGenericCmdWSAccess","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json"],function(e,t){"use strict";var n={},a={},o={};function s(e,t){var a=t.commandName,s=o[a];if(void 0!==s[e])return s[e];if(void 0!==n[e]){if(null===n[e])return null;for(var i=n[e],r=i.length,d=0;d<r;d++){if(!0===s[i[d]])return s[e]=!0,!0}return s[e]=!1,!1}}function i(e){for(var t={},o=e.length,i=0;i<o;i++)for(var r=e[i],d=(n[r],a[r]),l=d.length,u=0;u<l;u++){var m=d[u],c=m.params,p=c.commandName;if(null!==t[p]){void 0===t[p]?t[p]={params:c,supported:m.supported}:t[p].supported.push(m.supported);var h=s(r,c);!0===h?t[p].supported.push(r):!1===h&&(c.onComplete(m.supported),t[p]=null)}}for(var f in t)if(null!==t[f]){var v=t[f].supported.filter(function(e,t,n){return n.indexOf(e)===t});t[f].params.onComplete(v)}e.forEach(function(e){a[e]=void 0})}return{isTypesAuthorized:function(t){var r=t.commandName;if(!o[r]){o[r]={};var d=o[r];if(t.supported)for(var l in t.supported)d[l]=t.supported[l]}for(var u=[],m=[],c=t.types,p=c.length,h=0;h<p;h++){switch(s(C=c[h],t)){case!0:-1===u.indexOf(C)&&u.push(C);break;case!1:break;case null:void 0===a[C]&&(a[C]=[]),a[C].push({params:t,supported:u});break;case void 0:default:m.push(C)}}var f=m.length;if(0!==f){var v=[];for(h=0;h<f;h++){var C=m[h],S=!1;void 0===n[C]?(v.push(C),n[C]=null,S=!0):null===n[C]?S=!0:s(C,t)&&u.push(C),!0===S&&(void 0===a[C]&&(a[C]=[]),a[C].push({params:t,supported:u}))}0!==v.length?e.getTypesHierarchy({modeler:"product",data:{types:v},onComplete:function(e){(e="string"==typeof e?JSON.parse(e):e).types_hierarchies.forEach(function(e){var t=e.type,a=e.hierarchy;n[t]=a}),i(v)},onFailure:function(e){i(v)}}):t.onComplete(u)}else t.onComplete(u)},isChildrenTypesAuthorized:function(t){for(var o=[],r=[],d=t.types,l=d.length,u=0;u<l;u++){var m=d[u];switch(t.supportedChildrenTypes[m]){case!0:-1===o.indexOf(m)&&o.push(m);break;case!1:break;case null:void 0===a[m]&&(a[m]=[]),a[m].push({params:t,supported:o});break;case void 0:default:r.push(m)}}var c=r.length;if(0!==c){var p=[];for(u=0;u<c;u++){m=r[u];var h=!1;void 0===n[m]?(p.push(m),n[m]=null,h=!0):null===n[m]?h=!0:s(m,t)&&o.push(m),!0===h&&(void 0===a[m]&&(a[m]=[]),a[m].push({params:t,supported:o}))}0!==p.length?e.getTypesHierarchy({modeler:"product",data:{types:p},onComplete:function(e){(e="string"==typeof e?JSON.parse(e):e).types_hierarchies.forEach(function(e){var t=e.type,a=e.hierarchy;n[t]=a}),i(p)},onFailure:function(e){i(p)}}):t.onComplete(o)}else t.onComplete(o)},move3D:function(n){var a={version:"1.0",bAllOrNothing:!0,instances:n.instances};e.move3D({data:a,modeler:"product",onComplete:function(e){if(n.onComplete){var a=UWA.is(e,"string")?JSON.parse(e):e;"Embedded Component not supported"===a.message&&(a.message=t.authoring_failed_EC),n.onComplete(a)}},onFailure:function(e,a){if(n.onFailure){var o=UWA.is(a,"string")?JSON.parse(a):a;if(o.messages&&o.messages.length>0)for(var s=0;s<o.messages.length;s++)"Embedded Component not supported"===o.messages[s]&&(o.messages[s]=t.authoring_failed_EC);n.onFailure(o)}}})}}}),define("DS/UPSCommands/commands/UPSAuthCmdRevisionUpdate",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdRevisionUpdate","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],function(e,t,n,a,o,s,i,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1},l={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdRevisionUpdate",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",commandName:i.UPSAuthRevisionUpdate,reportTitle:i.UPSAuthRevisionUpdate_report,commandMode:"TreeList",options:{webInWin:!1,visibleColumn:{IsModified:!0,Title:!0,Revision:!0,Maturity:!0,Type:!0,Responsible:!0,Candidate:!0,ReplaceAction:!0,ExpectedRevision:!0,ExpectedMaturity:!0},EnableByRevision:!0,EnableBubbleup:!0,EnableAutoBubbleup:!0,EnableCompare:!0},remapErrors:[{modeler:"Input parameters are not valid",user:r.ERR_008},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:i.authoring_failed_EC},{modeler:"ERR_FUN092398",user:i.ERR_FUN092398}],fnCmdAvailability:function(e){var t=!1,n=o.getSelectedNodes();if(n.length>0){var a=[];n.forEach(function(e){var t=o.getType(e);-1==a.indexOf(t)&&a.push(t)}),s.isTypesAuthorized({commandName:this.className,supported:d,types:a,onComplete:function(n){n.length&&(t=!0),e(t)}})}},isValidSelection:function(e,t){for(var n=[],a=0;a<e.length;a++){var i=o.getAllDescendants(e[a]);if(i&&i.length)for(var r=0;r<e.length;r++)if(a!==r){var u=e[r];-1!==i.indexOf(u)&&(n.push(u),e.splice(r,1),r=0,a=0)}}var m=[];e.forEach(function(e){m.push(o.getType(e));var t=o.getChildren(e);t&&t.length>0&&t.forEach(function(e){m.push(o.getType(e))})}),m=m.filter(function(e,t,n){return n.indexOf(e)===t}),s.isChildrenTypesAuthorized({commandName:this.className,supported:d,supportedChildrenTypes:l,types:m,onComplete:function(a){var s={valid:[],invalid:[],status:!0};e.forEach(function(e){if(-1!==a.indexOf(o.getType(e))){var t=o.getChildren(e);if(t&&t.length>0){var n=0;t.forEach(function(e){-1!==a.indexOf(o.getType(e))&&n++}),n>0?s.valid.push(e):(s.invalid.push({node:e,why:"ROOT_NO_CHILD"}),s.status=!1)}else s.invalid.push({node:e,why:"ROOT_NO_CHILD"}),s.status=!1}else s.invalid.push({node:e,why:"BADTYPE"}),s.status=!1}),n.forEach(function(e){s.invalid.push({node:e,why:"CYCLE"}),s.status=!1}),t(s)}})}}})}),define("DS/UPSCommands/commands/UPSAuthCmdReplaceByRevision",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdRevisionUpdate","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],function(e,t,n,a,o,s,i,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReplaceByRevision",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",commandName:i.UPSAuthReplaceByRevision,reportTitle:i.UPSAuthReplaceByRevision_report,commandMode:"FlatList",options:{webInWin:!1,visibleColumn:{IsModified:!0,Title:!0,Revision:!0,Maturity:!0,Type:!0,Responsible:!0,Candidate:!0,ReplaceAction:!0,ExpectedRevision:!0,ExpectedMaturity:!0},EnableByRevision:!0,EnableBubbleup:!1,EnableAutoBubbleup:!1,EnableCompare:!0},remapErrors:[{modeler:"Input parameters are not valid",user:r.ERR_008},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:i.authoring_failed_EC},{modeler:"ERR_FUN092398",user:i.ERR_FUN092398}],fnCmdAvailability:function(e){var t=!1;if(s.isThereARootSelected())e(t);else{var n=s.getSelectedNodes();if(n.length>0){var a=n[n.length-1],i=s.getType(a);o.isTypesAuthorized({commandName:this.className,supported:d,types:[i],onComplete:function(n){t=-1!==n.indexOf(i),e(t)}})}}},isValidSelection:function(e,t){var n=[],a=[],i=s.getSelectedRoots();e.forEach(function(e){if(-1===i.indexOf(e))n.push(e);else{var t=s.getName(e);a.push({node:e,why:"ROOT",name:t})}}),s.getParentWithChild(n).forEach(function(e){var t=e.child,o=n.indexOf(t);if(o>-1){n.splice(o,1);var i=s.getName(t);a.push({node:t,why:"CHILD",name:i,parent:e.parent})}});var r=[];n.forEach(function(e){r.push(s.getType(e))}),o.isTypesAuthorized({commandName:this.className,supported:d,types:r,onComplete:function(e){var o={valid:[],invalid:[],status:!0},i=[];n.forEach(function(t,o){if(-1!==e.indexOf(r[o]))i.push(t);else if(n.indexOf(t)>-1){var d=s.getName(t);a.push({node:t,why:"BADTYPE",name:d})}}),o.valid=i,o.invalid=a,o.status=0===a.length,t(o)}})}}})}),define("DS/UPSCommands/commands/UPSAuthCmdReorder",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdReorder","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],function(e,t,n,a,o,s,i,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReorder",modeler:"product",version:"1.0",availability:"monoSelection",remapErrors:[{modeler:"Error  from  [PLMCoreAccess : convertM1IDinPLMID]  Id  [Error while converting Ids: Unable to solve all ids]",user:r.ERR_006},{modeler:"Input parameters are not valid",user:r.ERR_006},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:i.authoring_failed_EC},{modeler:"ERR_FUN092398",user:i.ERR_FUN092398}],fnCmdAvailability:function(e){var t=!1,n=o.getSelectedNodes();if(n.length>0){var a=o.getType(n[0]);s.isTypesAuthorized({commandName:this.className,supported:d,types:[a],onComplete:function(n){t=-1!==n.indexOf(a),e(t)}})}},isValidParentSelection:function(e,t){var n=o.getType(e);s.isTypesAuthorized({commandName:this.className,supported:d,types:[n],onComplete:function(a){var o={valid:[],invalid:[],status:null};-1!==a.indexOf(n)?(o.valid.push(e),o.status=!0):(o.invalid.push(e),o.status=!1),t(o)}})},isChildrenOrderable:function(e,t){var n=[],a=[];e.forEach(function(e){var t=o.getType(e);n.push(t),-1===a.indexOf(t)&&a.push(t)}),s.isTypesAuthorized({commandName:this.className,supported:d,types:a,onComplete:function(a){var o={valid:[],invalid:[],status:[]};e.forEach(function(e,t){-1!==a.indexOf(n[t])?(o.valid.push(e),o.status.push(!0)):(o.invalid.push(e),o.status.push(!1))}),t(o)}})}}})}),define("DS/UPSCommands/commands/UPSAuthCmdInsertExistingProductOrPart",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdInsertExisting","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json"],function(e,t,n,a,o,s,i,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1},l={VPMReference:!0,VPMRepReference:!0,"3DShape":!0,Drawing:!0},u={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdInsertExisting",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"empty_no_authoring_or_multiSelection",chunkSize:10,reportTitle:r.insert_reportTitle,chooser:{precondFilter:'(flattenedtaxonomies:"types/VPMReference" OR (flattenedtaxonomies:"types/VPMRepReference" AND [ds6w:composed]:FALSE))',precondFilterAddRoot:'(flattenedtaxonomies:"types/VPMReference" OR (flattenedtaxonomies:"types/VPMRepReference" AND [ds6w:composed]:FALSE))',source:["3dspace"],multiSel:!0,advanced_search:{showByDefault:!0}},remapErrors:[{modeler:"Input parameters are not valid",user:i.ERR_007},{modeler:"Embedded Component not supported",user:r.authoring_failed_EC},{modeler:"ERR_FUN092398",user:r.ERR_FUN092398}],fnCmdAvailability:function(e){var t=!1,n=o.getSelectedNodes();n.length>0?this.isValidParentSelection(n,function(n){t=n.status,e(t)}):e(t=!0)},isValidParentSelection:function(e,t){var n=[];e.forEach(function(e){n.push(o.getType(e))}),s.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach(function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)}),t(o)}})},isValidChildrenSelection:function(e,t){var n=[];e.forEach(function(e){n.push(e["ds6w:type_value"])}),s.isTypesAuthorized({commandName:this.className+"_Children",supported:l,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach(function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)}),t(o)}})},isValidRootSelection:function(e,t){var n=[];e.forEach(function(e){n.push(e["ds6w:type_value"])}),s.isTypesAuthorized({commandName:this.className+"_AddRoot",supported:u,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach(function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)}),t(o)}})}}})}),define("DS/UPSCommands/commands/UPSAuthCmdUpdateRevOnEntireStructure",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdUpdateRevOnEntireStructure","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],function(e,t,n,a,o,s,i,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"AuthGenericCmdUpdateRevOnEntireStructure",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"monoSelection",commandName:i.UPSAuthCmdUpdateRevOnEntireStructure,confirmationTitle:i.UPSAuthCmdUpdateRevOnEntireStructure_confirmation,reportTitle:i.UPSAuthCmdUpdateRevOnEntireStructure_report,remapErrors:[{modeler:"Input parameters are not valid",user:r.ERR_008},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:i.authoring_failed_EC},{modeler:"ERR_FUN092398",user:i.ERR_FUN092398}],fnCmdAvailability:function(e){var t=!1,n=s.getSelectedNodes()[0],a=s.getType(n);o.isTypesAuthorized({commandName:this.className,supported:d,types:[a],onComplete:function(n){t=-1!==n.indexOf(a),e(t)}})}}})}),define("DS/UPSCommands/commands/UPSAuthCmdReplaceProductConfiguration",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdReplaceProductConfiguration","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],function(e,t,n,a,o,s,i,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReplaceProductConfiguration",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",reportTitle:i.UPSAuthCmdReplaceByConfiguration_report,chooser:{precondFilter:'(flattenedtaxonomies:"types/VPMReference")',source:["3dspace"],multiSel:!1,advanced_search:{ups:!0}},remapErrors:[{modeler:"Error from [ProductOperations : replaceReference] Id [Instance duplication failed] : Error from [PLMxKRefInstanceTemplate : checkAggregationBusinessRules] Id [Instance Aggregation forbidden [S_OK/False]]",user:i.replace_V6_under_V5},{modeler:"Input parameters are not valid",user:r.ERR_007},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:i.authoring_failed_EC},{modeler:"ERR_FUN092398",user:i.ERR_FUN092398}],fnCmdAvailability:function(e){if(s.isThereARootSelected())e(!1);else{var t=s.getSelectedNodes();if(t.length>0){var n=[];t.forEach(function(e){n.push(s.getType(e))}),o.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o=!0;t.forEach(function(t,s){-1!==a.indexOf(n[s])||e(o=!1)}),e(o)}})}}},isValidSelection:function(e,t){var n=[];e.forEach(function(e){n.push(s.getType(e))}),o.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach(function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)}),t(o)}})},isValidReplacer:function(e,t){var n=e["ds6w:type_value"];o.isTypesAuthorized({commandName:this.className,supported:d,types:[n],onComplete:function(e){var a=-1!==e.indexOf(n);t(a)}})}}})}),define("DS/UPSCommands/commands/UPSAuthCmdUnparent",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdUnparent","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],function(e,t,n,a,o,s,i,r){"use strict";var d={VPMReference:!0,VPMRepReference:!0,"3DShape":!0,Drawing:!0,CATProduct:!0,CATPart:!0,CATShape:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdUnparent",modeler:"product",version:"1.0",availability:"multiSelection",bAllOrNothing:!1,chunkSize:50,commandName:i.UPSAuthDetach,reportTitle:i.UPSAuthDetach_report,remapErrors:[{modeler:"Error  from  [PLMCoreAccess : convertM1IDinPLMID]  Id  [Error while converting Ids: Unable to solve all ids]",user:r.ERR_008},{modeler:"Input parameters are not valid",user:r.ERR_008},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:i.authoring_failed_EC},{modeler:"ERR_FUN092398",user:i.ERR_FUN092398}],fnCmdAvailability:function(e){var t=!1;if(o.isThereARootSelected())e(!1);else{var n=o.getSelectedNodes();if(n.length>0){var a=n[n.length-1],i=o.getType(a);s.isTypesAuthorized({commandName:this.className,supported:d,types:[i],onComplete:function(n){t=-1!==n.indexOf(i),e(t)}})}}},isValidSelection:function(e,t){var n=[];e.forEach(function(e){n.push(o.getType(e))}),s.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach(function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)}),t(o)}})}}})}),define("DS/UPSCommands/commands/UPSAuthCmdReplaceByLatestRevision",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdReplaceByLatestRevision","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],function(e,t,n,a,o,s,i,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReplaceByLatestRevision",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",commandName:i.UPSAuthReplaceByLatestRevision,reportTitle:i.UPSAuthReplaceByLatestRevision_report,remapErrors:[{modeler:"Input parameters are not valid",user:r.ERR_008},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:i.authoring_failed_EC},{modeler:"ERR_FUN092398",user:i.ERR_FUN092398}],fnCmdAvailability:function(e){var t=!1;if(s.isThereARootSelected())e(t);else{var n=s.getSelectedNodes();if(n.length>0){var a=n[n.length-1],i=s.getType(a);o.isTypesAuthorized({commandName:this.className,supported:d,types:[i],onComplete:function(n){t=-1!==n.indexOf(i),e(t)}})}}},isValidSelection:function(e,t){var n=[];e.forEach(function(e){n.push(s.getType(e))}),o.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach(function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)}),t(o)}})}}})}),define("DS/UPSCommands/commands/UPSAuthCmdInsertProductConfiguration",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdInsertProductConfiguration","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/AuthGenericCommands/AppContext","DS/UPSCommands/UPSCmdUtils","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json"],function(e,t,n,a,o,s,i,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1},l={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!1};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdInsertProductConfiguration",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",chunkSize:50,chooser:{precondFilter:'flattenedtaxonomies:"types/VPMReference"',source:["3dspace"],multiSel:!1,advanced_search:{showByDefault:!0}},remapErrors:[{modeler:"Input parameters are not valid",user:i.ERR_007},{modeler:"Embedded Component not supported",user:r.authoring_failed_EC},{modeler:"ERR_FUN092398",user:r.ERR_FUN092398}],fnCmdAvailability:function(e){var t=!1,n=o.getSelectedNodes();this.isValidParentSelection(n,function(n){t=n.status,e(t)})},isValidParentSelection:function(e,t){var n=[];e.forEach(function(e){n.push(o.getType(e))}),s.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach(function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)}),t(o)}})},isValidChildrenSelection:function(e,t){var n=[];e.forEach(function(e){n.push(e["ds6w:type_value"])}),s.isTypesAuthorized({commandName:this.className+"_Children",supported:l,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach(function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)}),t(o)}})}}})}),define("DS/UPSCommands/commands/UPSAuthCmdReplaceByExisting",["UWA/Class","DS/ApplicationFrame/Command","DS/AuthGenericCommands/commands/AuthGenericCmdReplaceByExisting","DS/UPSCommands/commands/UPSAuthCmdAvailability","DS/UPSCommands/UPSCmdUtils","DS/AuthGenericCommands/AppContext","i18n!DS/UPSCommands/assets/nls/UPSAuthCatalog.json","i18n!DS/AuthGenericCommands/assets/nls/AuthGenericCommandsCatalog.json"],function(e,t,n,a,o,s,i,r){"use strict";var d={VPMReference:!0,VPMRepReference:!1,"3DShape":!1,Drawing:!0};return e.extend(t,n,a,{defaultOptions:{className:"UPSAuthCmdReplaceByExisting",modeler:"product",version:"1.0",bAllOrNothing:!1,availability:"multiSelection",reportTitle:i.UPSAuthCmdReplaceByExisting_report,chooser:{precondFilter:'(flattenedtaxonomies:"types/VPMReference")',precondFilterDrawing:'(flattenedtaxonomies:"types/Drawing" AND [ds6w:composed]:FALSE)',source:["3dspace"],multiSel:!1,advanced_search:{showByDefault:!0}},remapErrors:[{modeler:"Error from [ProductOperations : replaceReference] Id [Instance duplication failed] : Error from [PLMxKRefInstanceTemplate : checkAggregationBusinessRules] Id [Instance Aggregation forbidden [S_OK/False]]",user:i.replace_V6_under_V5},{modeler:"Input parameters are not valid",user:r.ERR_007},{modeler:"You don't have the required license for this command.",user:r.error_license},{modeler:"Embedded Component not supported",user:i.authoring_failed_EC},{modeler:"ERR_FUN092398",user:i.ERR_FUN092398}],fnCmdAvailability:function(e){if(s.isThereARootSelected())e(!1);else{var t=s.getSelectedNodes();if(t.length>0){var n=[];if(t.forEach(function(e){n.push(s.getType(e))}),-1!==n.indexOf("VPMReference")&&-1!==n.indexOf("Drawing"))return void e(!1);o.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o=!0;t.forEach(function(t,s){-1!==a.indexOf(n[s])||e(o=!1)}),e(o)}})}}},isValidSelection:function(e,t){var n=[];e.forEach(function(e){n.push(s.getType(e))}),o.isTypesAuthorized({commandName:this.className,supported:d,types:n,onComplete:function(a){var o={valid:[],invalid:[],status:!0};e.forEach(function(e,t){-1!==a.indexOf(n[t])?o.valid.push(e):(o.invalid.push(e),o.status=!1)}),t(o)}})},isValidReplacer:function(e,t){var n=e["ds6w:type_value"];o.isTypesAuthorized({commandName:this.className,supported:d,types:[n],onComplete:function(e){var a=-1!==e.indexOf(n);t(a)}})}}})});