/*!  Copyright 2014 Dassault Systemes. All rights reserved. */
define("DS/CATWebUXComponents/CATWebUXComment",["UWA/Core","UWA/Class","DS/Controls/Popup","DS/Utilities/TouchUtils","DS/VisuEvents/EventsManager","DS/Menu/ContextualMenu","i18n!DS/CATWebUXComponents/assets/nls/CATWebUXComponents","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,i,n,a,o,s){"use strict";return t.extend({init:function(t){var l=t||{};this._parent(l);const r="#77797C";var c,d=l.commentData,u=l.displayMode||"normal",m=l.disableEdition||!1,h=!0,g=!1;let f,C,b,v,p,y,T,D,k,A,E,S;const x=navigator.userAgent.includes("Firefox")?"true":"plaintext-only";function W(e){let t=e.from[0].view,i=e.from[0].event.composedPath();var n=!t.hasClassName("DMUCommentReplyButton")&&(t===f||i&&i.find(e=>e.hasClassName("DMUCommentMainDiv"))===f);l.onClickCB({target:d,event:e,selected:n,div:f,isEnableEdition:n&&"p"===t.getTagName()&&!d.isReadOnly()})}function w(e){if(h){let t=e.data.event.composedPath();!e.data.event.target.isContentEditable&&(e.data.event.target===f||t&&t.find(e=>e.hasClassName("DMUCommentMainDiv"))===f)&&l.onCtxMenuCB({target:d,event:e.data.event})}}function U(e){l.onReplyCB({target:d,event:e,allowReplies:l.allowReplies})}function F(){if(!C)return;const e=`${d.owner.name}${d.date?" - "+d.date:""}${d.markupName?"\n"+d.markupName:""}`;C.setAttribute("title",e)}function N(){if(d.owner){if(d.owner.color||d.isExternal){var t=d.isExternal?r:d.owner.color;C&&C.getStyle("color").replace(/\s/g,"")!==t&&C.setStyle("color",t)}d.isExternal&&v.setStyles({color:r,"font-weight":"bold"}),d.owner.name&&v.getText()!==d.owner.name&&(F(),v.setText(d.owner.name)),d.owner.imageUrl&&"normal"===u&&(c?c.src!==d.owner.imageUrl&&(c.src=d.owner.imageUrl):c=e.createElement("img",{src:d.owner.imageUrl,events:{load:function(){c&&b&&C&&C.firstChild&&C.firstChild===b&&(C.removeChild(b),C.appendChild(c))},error:function(){b&&c&&C&&C.firstChild&&C.firstChild===c&&(C.removeChild(c),C.appendChild(b))}}}))}d.date&&p.getText()!==d.date&&(F(),p.setText(d.date)),T&&T.innerText!==d.content&&(T.innerText=d.content),d.isReadOnly()||d.hasAlertFlag()&&!f.hasClassName("readOnly")?(f.addClassName("readOnly"),T&&T.setAttribute("contentEditable",!1),k&&k.setStyle("display",d.hasAlertFlag()?"block":"none")):d.isReadOnly()||d.hasAlertFlag()||!f.hasClassName("readOnly")||(f.removeClassName("readOnly"),T&&T.setAttribute("contentEditable",x),k&&k.setStyle("display","none"))}function P(){if(f||(f=e.createElement("div",{class:"DMUCommentMainDiv"+(m?" DMUCommentNonEditable":"")})),d.isReply&&l.allowReplies&&f.addClassName("reply"),(d.isReadOnly()||d.hasAlertFlag())&&f.addClassName("readOnly"),"normal"===u){C=e.createElement("div",{class:"DMUCommentPictureDiv"}).inject(f),b=e.createElement("i",{class:"wux-ui-3ds wux-ui-3ds-user"}).inject(C),d.isReply&&l.allowReplies||(y=e.createElement("div",{class:"DMUCommentRepliesCount"}).inject(f));let t=e.createElement("div",{class:"DMUCommentHeader"}).inject(f);v=e.createElement("div",{class:"DMUCommentOwner"}).inject(t),p=e.createElement("div",{class:"DMUCommentDate"}).inject(t),T=e.createElement("p",{class:"DMUCommentContent"}).inject(f);let o=!m&&!d.isReadOnly()&&!d.hasAlertFlag();if(T.setAttribute("contentEditable",!!o&&x),m||(T.addEventListener("keyup",function(e){"Enter"!==e.key||e.shiftKey?" "!==e.key&&32!==e.keyCode||e.stopPropagation():T.blur()}),T.addEventListener("keydown",function(e){"Enter"!==e.key||e.shiftKey||e.preventDefault()}),T.addEventListener("blur",function(){T.setAttribute("spellcheck",!1),!l.onEditionEndCB||d.isReadOnly()||d.hasAlertFlag()||l.onEditionEndCB({target:d,value:T.innerText})}),T.addEventListener("focus",function(){T.setAttribute("spellcheck",!0)}),T.addEventListener("paste",function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)})),o&&!d.isReadOnly()&&!d.hasAlertFlag()){let t=l.allowReplies?"reply":"plus",o=l.allowReplies?s.replyButtonLabel:s.addButtonLabel;D=e.createElement("div",{class:"DMUCommentReplyButton wux-ui-3ds wux-ui-3ds-"+t}).inject(f),n.getTouchMode()&&D.addClassName("touchMode"),new i({target:D,trigger:"hover",offset:{x:l.allowReplies?-10:-35,y:10},position:"bottom",arrowBoxFlag:!0}).setBody(o),l.onReplyCB&&a.addEvent(D,"onPrimaryPointerClick",U)}k=e.createElement("div",{class:"DMUCommentAlert wux-ui-3ds wux-ui-3ds-attention ",styles:{display:d.hasAlertFlag()?"block":"none"}}).inject(f),new i({target:k,trigger:"hover",position:"left",offset:{x:-10,y:-20}}).setBody(s.pointedPageRemoved)}else if("light"===u){f.hasClassName("DMUCommentMainDivLightMode")||f.addClassName("DMUCommentMainDivLightMode"),e.createElement("i",{class:"wux-ui-3ds wux-ui-3ds-comment"}).inject(f);let t=e.createElement("div",{class:"DMUCommentHeader"}).inject(f);v=e.createElement("div",{class:"DMUCommentOwner"}).inject(t),p=e.createElement("div",{class:"DMUCommentDate"}).inject(t)}l.onClickCB&&a.addEvent(f,"onPrimaryPointerClick",W),l.onCtxMenuCB&&!S&&(S=o.addEventListener(f,{callback:w})),l.onEnterCB&&f.addEventListener("mouseenter",function(){f.hasClassName("hover")||f.addClassName("hover"),l.onEnterCB({target:d,prehighlightedFlag:!0})}),l.onLeaveCB&&f.addEventListener("mouseleave",function(){f.hasClassName("hover")&&f.removeClassName("hover"),l.onLeaveCB({target:d,prehighlightedFlag:!1})}),N()}this.getCommentDiv=function(){return f},this.update=function(e){if(e){for(var t=Object.keys(e),i=0;i<t.length;i++)d[t[i]]!==e[t[i]]&&(d[t[i]]=e[t[i]]);N()}},this.updateDisplayMode=(e=>{e!==u&&(u=e,l.onClickCB&&a.removeEvent(f,"onPrimaryPointerClick",W),l.onReplyCB&&D&&a.removeEvent(D,"onPrimaryPointerClick",U),l.onCtxMenuCB&&S&&(o.removeEventListener(f,S),S=null),C&&C.firstChild&&C.firstChild.removeEvents(),T&&T.removeEvents(),f&&(f.removeEvents(),f.remove()),P())}),this.setCtxMenuAvailability=function(e){h!==e&&(h=e,N())},this.updateDate=function(e){e&&p.getText()!==e&&(F(),p.setText(e))},this.enableContentEdition=function(){setTimeout(function(){T&&T.focus()})},this.setInformationIcon=function(t){E?t!==E.src&&(t?E.src=t:(f.removeChild(E),E=null,g=!1)):t&&(E=e.createElement("img",{class:"DMUCommentDraggableDiv",src:t}).inject(f))},this.setIsDraggable=function(e){e!==g&&(g=e,E&&(E.setAttributes({draggable:g}),E.ondragstart=g?function(e){var t=e.target.id;A&&((t=A)||(t=e.target.id)),e.dataTransfer.setData("text",t)}:null))},this.setDragContent=function(e){A=e},this.getDragContent=function(){return A},this.setInEdition=function(e){e?f.hasClassName("selected")||f.addClassName("selected"):f.hasClassName("selected")&&f.removeClassName("selected")},this.updateRepliesCount=function(e){y&&(0===e?y.setStyle("visibility","hidden"):y.setStyle("visibility","visible"),y.setText("("+e+")"))},this.setDisplayFlag=function(e,t){e?f.setStyles({"padding-left":"5px","border-left":"5px solid "+(t?"#57B847":"#368EC4")}):f.setStyles({"padding-left":"","border-left":""})},this.setHovered=function(e){e?f.hasClassName("hover")||f.addClassName("hover"):f.hasClassName("hover")&&f.removeClassName("hover")},this.remove=function(){l.onClickCB&&a.removeEvent(f,"onPrimaryPointerClick",W),l.onReplyCB&&D&&a.removeEvent(D,"onPrimaryPointerClick",U),l.onCtxMenuCB&&S&&(o.removeEventListener(f,S),S=null),C&&C.firstChild&&C.firstChild.removeEvents(),T&&T.removeEvents(),f&&(f.removeEvents(),f.remove(),f.destroy()),y=f=T=p=v=C=D=null},P()}})}),define("DS/CATWebUXComponents/CATWebUXNotification",["UWA/Class","UWA/Core","DS/Visualization/ThreeJS_DS","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Alert","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/VisuEvents/EventsManager","css!DS/UIKIT/UIKIT.css","DS/Controls/Abstract","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,i,n,a,o,s,l){"use strict";var r;return e.extend({init:function(){var e,c,d,u,m;this._parent();var h,g,f,C,b="left",v=!1,p=n.getWebappsAssetUrl("CATWebUXComponents","graphics")+"/I_Expander.png",y="BasicNotification",T=function(){var t=0;if(h){var i=h.getImmersiveFrame().getDockingElement("left"===b?WUXDockAreaEnum.LeftDockArea:WUXDockAreaEnum.RightDockArea),n=i.getContainedWindows();if(n&&n.length&&(n[0].isAWindowGroup()&&n[0].getEmbeddedWindows().length||!n[0].isAWindowGroup())){for(var a=n[0].getEmbeddedWindows?n[0].getEmbeddedWindows():n,o=!1,s=0;s<a.length;s++)a[s].visibleFlag&&(o=!0);o&&!i.collapseDockingZoneFlag&&(t=i.dockingZoneSize+i._collapserSize)}else i.interactiveDockAreaVisibleFlag&&(t=i.dockingZoneSize);t+=20,e&&e.setStyles("left"===b?{left:t+"px"}:{right:t+"px"})}};function D(){var t=document.querySelectorAll(".CATWebUXNotification");if(h&&d&&(h.getImmersiveFrame().removeEventListener("freeZoneResize",T),h.getViewer().unsubscribe(u),d=u=null),m&&(l.removeEventFromToken(m),m=null),t.length)for(var i=0;i<t.length;i++)t[i]!==e&&t[i].dsModel!==e||(c&&(clearTimeout(c),c=0),t[i].remove?t[i].remove():t[i].destroy(),e=null)}function k(e){if(f){var t=255*new i.Color(e).getHSL().l;f.childNodes.forEach(function(e){e.setStyles({color:t>120?"":"white"})})}}this.build=function(i){if(D(),i){var n="number"==typeof i.duration?i.duration:3e3;if(y=i.notificationType||"BasicNotification",i.message)if("HelpNotification"===y){(e=new a({className:"CATWebUXNotification",visible:!0,hideDelay:i.autoHide?n:void 0,autoHide:i.autoHide,maximumVisibleMessages:1,messages:[{message:i.message,className:i.type||"primary"}]}).inject(i.body,"top")).notifType=i.type||"primary",e.elements.container.dsModel=e;var A=0;e.elements.container.childNodes[0].offsetWidth&&0!==e.elements.container.childNodes[0].offsetWidth?A=e.elements.container.childNodes[0].offsetWidth:e.elements.container.childNodes[0].style.pixelWidth&&0!==e.elements.container.childNodes[0].style.pixelWidth&&(A=e.elements.container.childNodes[0].style.pixelWidth);var E=A+35,S=parseFloat(i.body.getStyle("width"));e.elements.container.childNodes[0].setStyles({left:((S-E)/2<=0?10:(S-E)/2)+"px"}),i.autoHide&&(c&&(clearTimeout(c),c=0),c=setTimeout(D,1.5*n))}else if("CustomNotification"===y){e=new t.Element("div",{class:"CATWebUXNotification CATWebUXNotificationMainDiv"}),i.webInWinFrame||e.setStyles({"max-width":"calc(100% - 120px)"}),g=new t.Element("div",{class:"CATWebUXNotificationIconBody"}).inject(e),f=new t.Element("div",{class:"CATWebUXNotificationTextBody"}).inject(e),i.webInWinFrame||f.setStyles({"max-width":"calc(100% - 52px)"});var x=new t.Element("p",{class:"CATWebUXNotificationPrimaryText"}).inject(f);if(x.innerText=i.message,i.secondary)new t.Element("p",{class:"CATWebUXNotificationSecondaryText"}).inject(f).innerText=i.secondary;else x.setStyles({position:"relative",top:"6px"}),f.setStyle("margin","5px");if(i.icon&&i.icon.length?new t.Element("img",{src:i.icon}).inject(g):new t.Element("span",{class:"CATWebUXNotificationDefaultIcon wux-ui-3ds wux-ui-3ds-1x "+(i.fontIcon?i.fontIcon:"wux-ui-3ds-info")}).inject(g),i.hidden){C=new t.Element("div",{class:"CATWebUXNotificationHiddenTextBody"}).inject(f),new t.Element("p",{class:"CATWebUXNotificationHiddenText"}).inject(C).innerText=i.hidden;var W=new t.Element("div",{class:"CATWebUXNotificationExpBody"}).inject(e),w=new t.Element("img",{class:"CATWebUXNotificationExpDiv",src:p}).inject(W),U=function(){w.setStyles({transform:v?"rotate(180deg)":"rotate(0deg)",opacity:v?"0.5":""}),C.setStyle("display",v?"":"none"),i.onNotificationSizeChanged&&i.onNotificationSizeChanged()};U(),m=l.addEvent(W,"onPrimaryPointerClick",function(){v=!v,U()}),f.setStyles({width:"calc(100 % - 90px)"})}else f.setStyles({width:"calc(100 % - 60px)"});b=i.dockingSide?i.dockingSide:"left",e.setStyle("right"===b?"right":"left","20px"),d||i.frmWindow&&((h=i.frmWindow).getImmersiveFrame().addEventListener("freeZoneResize",T),d=1,u=h.getViewer().onBackgroundModify(k),k(h.getViewer().backgroundColor)),e.inject(i.body,"top"),i.autoHide&&(c&&(clearTimeout(c),c=0),c=setTimeout(D,n))}else if("BasicNotification"===y){r||(r=o,s.setNotificationManager(r));var F="info";t.is(i.type)&&"primary"!==i.type&&(F=i.type),r.addNotif({level:F,message:i.message,sticky:!1})}}},this.getDimensions=function(){var t={width:0,height:0};if(!e)return t;if("CustomNotification"===y){var i=g.getDimensions();t.width+=i.outerWidth,i=f.getDimensions(),t.width+=i.outerWidth,C&&(t.width+=32),t.width+=22,t.height+=i.outerHeight,t.height+=22}else t.width=e.elements.container.childNodes[0].offsetWidth,t.width+=e.elements.container.childNodes[0].style.left,t.height=e.elements.container.childNodes[0].offsetHeight,t.height+=e.elements.container.childNodes[0].style.top;return t},this.destroy=function(){D()}}})}),define("DS/CATWebUXComponents/CATWebUXThumbnail",["UWA/Core","UWA/Class","DS/VisuEvents/EventsManager","DS/UIKIT/Spinner","DS/Controls/Toggle","DS/Utilities/TouchUtils","DS/Controls/ProgressBar","DS/Menu/ContextualMenu","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,i,n,a,o,s,l){"use strict";var r=0,c=t.extend({init:function(t){var c=t||{};this._parent(c);var d,u,m=this,h=new Image,g=!0,f="number"==typeof c.width?c.width:144,C="number"==typeof c.height?c.height:108;let b=c.displayMode||"normal";var v,p,y,T,D,k,A=f,E=C,S=!1,x=!1,W=!1,w=!1,U=c.isCheckable,F=!1,N=0,P=!1,X=c.title,B="#368ec4",M=!0,I=!0,j=!1;let H=!1;var z,L,R,_,V,O,Z,K;let q,Q,G,$,J,Y,ee,te,ie,ne,ae,oe,se,le,re,ce,de,ue;var me,he,ge,fe,Ce,be,ve=!1;let pe,ye,Te,De=t.enableDrag,ke=t.readOnly;var Ae={},Ee={userName:null,userColor:null,userPic:null,defaultUserPic:null,date:null};function Se(e){"Enter"===e.key||13===e.keyCode?we(e):"Escape"!==e.key&&27!==e.keyCode||Ue(e)}function xe(e){" "!==e.key&&32!==e.keyCode||e.stopPropagation()}function We(){if(P&&S&&!le&&!j){le=!0,O.setAttributes({contenteditable:!0}),window.getSelection().removeAllRanges();var e=document.createRange();e.selectNodeContents(O),window.getSelection().addRange(e),O.focus(),X=Fe(O),O.setStyles({textOverflow:"initial"}),O.addEventListener("blur",we),O.addEventListener("keydown",Se),O.addEventListener("keyup",xe)}}function we(e){if(le){le=!1,O.removeEventListener("blur",we),O.removeEventListener("keydown",Se),O.removeEventListener("keyup",xe),O.setAttributes({contenteditable:!1});var t=Fe(O);t||(O.innerText=X,t=X),t!==X&&c.onTitleEditedCB({title:t,id:c.id}),Ae.title=t,Be()}e&&(e.preventDefault(),e.stopPropagation())}function Ue(e){O.innerText=X,we(e)}function Fe(e){for(var t="",i=(e.innerText||"").split("\n"),n=0;n<i.length;n++)(i[n]||n!==i.length-1)&&(i[n]=i[n].replace("\r",""),t+=i[n]);return t}function Ne(){if(V){var e=F?22:0;e=25+e,c.icon&&(e+=20),ge&&ge.fontIcon&&(e+=20),V.setStyles({width:"calc(100% - "+e+"px)","margin-left":ge&&ge.fontIcon?"5px":c.icon?"0":"15px"})}}function Pe(){_&&(R.removeChild(_),_=null),(c.icon||ge&&ge.fontIcon)&&(_=e.createElement("div",{id:"thumbImg"+r+"_"+c.id,class:"CATWebUXThumbnailIcon"}).inject(R),R.firstChild?R.insertBefore(_,R.firstChild):_.inject(R),ge&&ge.fontIcon?((y=e.createElement("span",{class:"CATWebUXThumbnailClickableIcon "+ge.fontIcon}).inject(_)).setStyles({fontSize:"18px",color:"white",marginLeft:"10px",marginTop:"6px",transition:"all 0.5s"}),_.setStyles({backgroundColor:"#42a2da",width:"36px",height:"31px",margin:"0",border:"1px solid #368ec4"})):_.setStyles({backgroundImage:'url("'+c.icon+'")'})),_&&_.setStyles({display:I||j?"":"none"}),Ne()}function Xe(){A=Math.floor(0===u?f:277),E=Math.floor(0===u?C:82),1===u?(ie&&ie.hasClassName("CATWebUXThumbnailPreviewThumbDiv")&&ie.removeClassName("CATWebUXThumbnailPreviewThumbDiv"),R&&R.hasClassName("CATWebUXThumbnailThumbContentDiv")&&R.removeClassName("CATWebUXThumbnailThumbContentDiv"),ie&&ie.addClassName("CATWebUXThumbnailPreviewTileDiv"),R&&(R.addClassName("CATWebUXThumbnailTileContentDiv"),R.setStyles({top:""})),K&&K.setStyles({display:""})):(ie&&ie.hasClassName("CATWebUXThumbnailPreviewTileDiv")&&ie.removeClassName("CATWebUXThumbnailPreviewTileDiv"),R&&R.hasClassName("CATWebUXThumbnailTileContentDiv")&&R.removeClassName("CATWebUXThumbnailTileContentDiv"),ie&&ie.addClassName("CATWebUXThumbnailPreviewThumbDiv"),R&&(R.addClassName("CATWebUXThumbnailThumbContentDiv"),R.setStyles({top:E-("none"===J.style.display?40:60)+"px",height:"100px"})),K&&K.setStyles({display:"none"}),ee&&ee.setStyles({outline:""})),"light"!==b&&q.setStyles({width:A+"px",height:E+"px"}),($&&"none"!==J.style.display||T)&&$.setStyles({width:"calc(100% - "+(c.userPic?"65px":"30px")+")"}),J&&""===J.style.display&&ee.setStyles({height:"calc(100% - 20px)"})}function Be(){if("light"!==b){if(V||(V=e.createElement("div",{class:"CATWebUXThumbnailTextDiv"}).inject(R),Ne()),O&&(c.onTitleEditedCB&&i.removeEvent(O,"onPrimaryPointerClick",We),V.removeChild(O)),Z&&V.removeChild(Z),K&&V.removeChild(K),ge&&ge.title)(O=e.createElement("p",{id:"thumbTitle"+c.id,class:"CATWebUXThumbnailText CATWebUXThumbnailTitle",contenteditable:!1}).inject(V)).innerText=ge.title;else{if(Ae.title&&((O=e.createElement("p",{id:"thumbTitle"+c.id,class:"CATWebUXThumbnailText CATWebUXThumbnailTitle",contenteditable:!1}).inject(V)).innerText=Ae.title||" ",O.title=Ae.title,Ae.titleIcon)){var t,n=e.createElement("img",{src:Ae.titleIcon}).inject(V);n.onerror=function(){n.destroy(),clearInterval(t)},t=setInterval(function(){n.naturalWidth>0&&(clearInterval(t),n.destroy(),O&&O.setStyles({"background-image":"url("+Ae.titleIcon+")","background-size":n.naturalWidth+"px "+n.naturalHeight+"px","background-repeat":"no-repeat","background-position":"left center","padding-left":n.naturalWidth+5+"px"}))},10)}Ae.subtitle&&((Z=e.createElement("p",{id:"thumbSubTitle"+c.id,class:"CATWebUXThumbnailText CATWebUXThumbnailSubtitle"}).inject(V)).innerText=Ae.subtitle,Z.title=Ae.subtitle),Ae.additionalText&&((K=e.createElement("p",{class:"CATWebUXThumbnailText CATWebUXThumbnailAddText"}).inject(V)).innerText=Ae.additionalText,K.title=Ae.additionalText)}O&&V.appendChild(O),Z?(V.appendChild(Z),ee.setStyle("overflow","hidden")):ee.setStyle("overflow",""),K&&(V.appendChild(K),ee.setStyle("overflow","hidden")),R.setStyles({height:Z||K?"100px":""}),c.onTitleEditedCB&&i.addEvent(O,"onPrimaryPointerClick",We),m.highlightThumbnail(D),V.setStyles({display:I||j?"":"none"})}else be.set({title:Ae.title,text:Ae.title})}function Me(){if("normal"===b?(q||(q=e.createElement("div",{id:"thumbnailView_"+r+"_"+c.id,class:"CATWebUXThumbnailThumbContainer"})),Q=e.createElement("div",{id:"thumbnailPrefixMainDiv_"+r+"_"+c.id,class:"CATWebUXThumbnailPrefixContainer"}).inject(q),(G=e.createElement("img",{id:"thumbUserPic"+r+"_"+c.id,class:"CATWebUXThumbnailInfoPic"}).inject(Q)).setStyles({opacity:"0"}),c.displayPrefix&&(T=e.createElement("div",{class:"CATWebUXThumbnailPrefixDiv"}).inject(Q)),Te||(Te=e.createElement("div",{class:"CATWebUXThumbnailProgressDiv",styles:{display:"none"}}).inject(Q),new s({emphasize:"info",shape:"circular",height:20,infiniteFlag:!0}).inject(Te)),$=e.createElement("div",{id:"thumbSubContainer"+r+"_"+c.id,class:"CATWebUXThumbnailSubContainer"}).inject(q),J=e.createElement("div",{id:"thumbUserInfo"+r+"_"+c.id,class:"CATWebUXThumbnailInfoContent"}).inject($),se=e.createElement("p",{id:"thumbUserName"+r+"_"+c.id,class:"CATWebUXThumbnailInfoName"}).inject(J),(Y=e.createElement("p",{id:"thumbCreationDate"+r+"_"+c.id,class:"CATWebUXThumbnailCreationDate"}).inject(J)).setStyles({display:"none"}),ee=e.createElement("div",{id:"thumbMainDiv"+r+"_"+c.id,class:"CATWebUXThumbnailThumbMainDiv"}).inject($),te=e.createElement("div",{id:"thumbShading"+r+"_"+c.id,class:"CATWebUXThumbnailColorDiv"}).inject(ee),ie=e.createElement("div",{id:"thumbAppIcon"+r+"_"+c.id,class:"CATWebUXThumbnailPreviewDiv"}).inject(ee),ne=e.createElement("div",{class:"CATWebUXThumbnailDisabledDiv"}),ie.appendChild(ne),(R=e.createElement("div",{id:"thumbContent"+r+"_"+c.id,class:"CATWebUXThumbnailContent"}).inject(ee)).addEventListener("mouseenter",function(){j&&(O&&O.setStyles({color:B,"text-decoration":"underline"}),y&&y.setStyles({transform:"rotate(180deg)"}))}),R.addEventListener("mouseleave",function(){j&&(O&&O.setStyles({color:"","text-decoration":""}),y&&y.setStyles({transform:""}))}),Pe(),R.setStyles({display:c.icon||c.title||c.subtitle||c.onCtxMenuCB?"":"none"}),ae=e.createElement("div",{id:c.id+"_checkBoxDiv"+r+"_",class:"CATWebUXThumbnailCheckBoxDiv"}).inject(ie),(oe=new a({checkFlag:!1}).inject(ae)).elements.container.addClassName("CATWebUXThumbnailCheckDiv")):"light"===b&&(q||(q=e.createElement("div",{id:"thumbnailView_"+r+"_"+c.id,class:"CATWebUXThumbnailLightContainer"})),e.createElement("i",{class:"wux-ui-3ds wux-ui-3ds-presentation-slide"}).inject(q),be=e.createElement("div",{class:"CATWebUXThumbnailLightTextDiv",title:c.title,text:c.title}).inject(q)),(c.title||c.subtitle||c.additionalText||c.text)&&(Ae={title:c.title?c.title:c.text,subtitle:c.subtitle,additionalText:c.additionalText,titleIcon:c.titleIcon},Be()),le=!1,ue=!1,re=!1,c.clickCB&&(ce=function(e){le||setTimeout(function(){if(!re&&!ue){if(e&&e.from&&e.from.length&&e.from[0].event&&e.from[0].event.eventAlreadyConsumed)return re=!1,void(ue=!1);w||0!==N||c.clickCB({id:c.id,data:c.data,event:e}),w=!1,N>0&&N--}re=!1,ue=!1},c.doubleClickCB?200:10)},i.addEvent(q,"onPrimaryPointerClick",ce)),q.addEventListener("mouseenter",function(){o.getTouchMode()||(W=!0,Y&&Y.getText()&&Y.setStyles({display:""}),G&&Ee.userPic&&G.setStyles({opacity:"1"}),ae&&ae.setStyles({display:U?"":"none"}),Ce&&H&&Ce.setStyles({display:""})),c.onEnterCB&&c.onEnterCB({id:c.id,prehighlightedFlag:!0})}),q.addEventListener("mouseleave",function(){o.getTouchMode()||(W=!1,Y&&Y.getText()&&!v&&Y.setStyles({display:"none"}),G&&Ee.userPic&&!v&&G.setStyles({opacity:"0"}),ae&&ae.setStyles({display:U&&v?"":"none"}),Ce&&H&&Ce.setStyles({display:"none"})),c.onLeaveCB&&c.onLeaveCB({id:c.id,prehighlightedFlag:!1})}),o.getTouchMode()&&(c.onEnterCB&&q.addEventListener("touchstart",function(){c.onEnterCB({id:c.id,prehighlightedFlag:!0})}),c.onLeaveCB&&q.addEventListener("touchend",function(){c.onLeaveCB({id:c.id,prehighlightedFlag:!0})})),o.getTouchMode()&&(ae&&ae.setStyles({display:U?"":"none"}),Ce&&Ce.setStyles({display:""}),G&&G.setStyles({opacity:"1"}),Y&&Y.setStyles({display:""})),c.doubleClickCB&&(de=function(e){setTimeout(function(){w||(N=2,c.doubleClickCB({id:c.id,data:c.data,event:e})),w=!1},5)},i.addEvent(q,"onPrimaryPointerDoubleClick",de)),oe){if(oe.addEventListener("buttonclick",function(){setTimeout(function(){oe&&U&&(oe.checkFlag=v)},0)}),Z||K){var t=0;R.addEventListener("mouseenter",function(){t=setTimeout(function(){R&&0===u&&R.setStyles({top:E-("none"===J.style.display?66:86)+"px"})},500)}),R.addEventListener("mouseleave",function(){0===u&&(t&&(clearTimeout(t),t=0),R.setStyles({top:E-("none"===J.style.display?40:60)+"px"}))})}}}function Ie(e){if(e)!d&&ne&&((d=new n({visible:!0})).inject(ne),d.getContent().addClassName("CATWebUXThumbnailSpinner"),ne.setStyles({opacity:"1",visibility:"unset"}));else{if(d){for(;ne.firstChild;)ne.removeChild(ne.firstChild);d.destroy(),d=null}ne&&ne.setStyles({opacity:"0",visibility:"hidden"})}}let je;r++,this.displayProgress=(()=>{je||(je=setTimeout(()=>{je=null,Te&&Te.setStyle("display","")},500))}),this.hideProgress=(()=>{je&&(clearTimeout(je),je=null),Te&&Te.setStyle("display","none")}),this.updateDisplayMode=(e=>{if(e!==b){if(b=e,m.clear(),q)for(;q.firstElementChild;)q.removeChild(q.firstElementChild);Me()}}),this.setVisibleFlag=function(e){g=e,q&&q.setStyle("display",g?"":"none")},this.getVisibleFlag=function(){return g},this.setDimensions=function(e,t){e&&t&&(e===f&&t===C||(f=e,C=t,Xe()))},this.setPreview=function(e,t){e&&ie?(p=e,h.src=p,t&&ie.setStyles({"background-color":t}),ie.setStyles({backgroundImage:'url("'+p+'")',"background-size":"cover"}),Ie(!1)):Ie(!0)},this.setThumbnailTexts=function(e){Object.assign(Ae,e),Be()},this.setDisplayFlag=function(e,t){var i;x=t,i=(S=e)&&!M?"#77797c":S&&x?"rgb(87, 184, 71)":S?B:"rgba(255, 255, 255, 0)",te&&te.setStyle("background-color",i)},this.setThumbnailActiveFlag=function(e){M=e,m.highlightThumbnail(D),m.setDisplayFlag(S,x)},this.getThumbnailActiveFlag=function(){return M},this.setThumbnailPrefix=function(e){T&&(T.innerText=e)},this.getThumbnailPrefix=function(){return T?T.innerText:""},this.highlightThumbnail=function(e){if(D!==e){D=e;var t=M?B:"#77797c";O&&O.setStyles({color:e?t:"","text-decoration":e?"underline":""}),T&&T.setStyles({color:e?t:""})}},this.getDisplayFlag=function(){return S},this.getData=function(){return c.data},this.setThumbnailID=function(e){c.id=e},this.getThumbnailID=function(){return c.id},this.allowTitleEdition=function(e){!(P=e)&&le&&Ue()},this.isInEdition=function(){return le},this.getContent=function(){return q},this.inject=function(e){return q.inject(e),m},this.clear=function(){ae&&He&&i.removeEvent(ae,"onPrimaryPointerClick",He),ce&&i.removeEvent(q,"onPrimaryPointerClick",ce),de&&i.removeEvent(q,"onPrimaryPointerDoubleClick",de),O&&We&&i.removeEvent(O,"onPrimaryPointerClick",We),z&&L&&i.removeEvent(z,"onPrimaryPointerClick",L),q&&L&&ye&&(l.removeEventListener(q,ye),ye=null),fe&&i.removeEventFromToken(fe),Ie(!1),h=de=ce=He=fe=null,Te=ee=te=ie=ne=R=_=V=O=Z=K=null,ae=oe=null},this.setDisplayType=function(e){e!==u&&(u=e,Xe(),p&&(h.src=p))},this.setInformationIcon=function(t){"normal"===b?(me?t!==me.src&&(t?me.src=t:ee&&(ee.removeChild(me),me=null,ve=!1)):t&&ee&&(me=e.createElement("img",{class:"CATWebUXThumbnailFavoriteDiv",src:t}).inject(ee)),Ce&&Ce.setStyle("margin-right",me?"28px":"")):q&&(t?me=e.createElement("i",{class:"CATWebUXThumbnailLightFavoriteDiv wux-ui-3ds wux-ui-3ds-highlight-review"}).inject(q):(me&&q.removeChild(me),me=null,ve=!1))},this.setIsDraggable=function(e){ve=e,me&&me.getAttribute("draggable")!==ve.toString()&&(me.setAttributes({draggable:ve}),me.ondragstart=ve?function(e){var t=e.target.id;he&&((t=he)||(t=e.target.id)),e.dataTransfer.setData("text",t),e.stopPropagation()}:null),ee&&ee.getAttribute("draggable")!==ve.toString()&&(ee.setAttributes({draggable:ve}),ie&&ie.setAttributes({draggable:ve}),te&&te.setAttributes({draggable:ve}),z&&z.setAttributes({draggable:ve}),O&&O.setAttributes({draggable:ve}),ee.ondragstart=ve?function(e){if((e.shiftKey&&De||!e.shiftKey&&!De)&&!ke)return!1;let t=e.target.id;pe&&(t=pe),e.dataTransfer.setData("text",t),e.dataTransfer.setDragImage(ie,e.offsetX,e.offsetY)}:null)},this.setReadOnlyFlag=function(e){ke=e},this.enableDragContent=function(e){De=e},this.isDraggable=function(){return ve},this.setFavoriteDivDragContent=function(e){he=e},this.setSlideViewTransferDragContent=function(e){pe=e},this.getDragContent=function(){return he},this.setTitleAndIconSectionVisibleFlag=function(e){I=e,R&&R.setStyles({borderTopWidth:I||j||c.onlyText?"":"0px",backgroundColor:I||j||c.onlyText?"":"rgba(255, 255, 255, 0)"}),Be(),Pe()},this.getDisplayType=function(){return u},this.setIsCheckableFlag=function(e){U=e,ae&&ae.setStyles({display:U&&(o.getTouchMode()||W)?"":"none"})},this.getIsCheckableFlag=function(){return U},this.setCheckFlag=function(e,t,i){e!==v&&(v=e,oe&&(oe.checkFlag=e,!i&&c.checkFlagChangedCB&&U&&c.checkFlagChangedCB({id:c.id,checkFlag:e,data:c.data,event:t})),v||!c.showCheckBoxOnMouseEvt||o.getTouchMode()||ae.setStyles({display:"none"}),ae&&ae.setStyles({display:v&&U?"":U&&(o.getTouchMode()||W)?"":"none"}),o.getTouchMode()||(G&&G.setStyles({opacity:v||W?"1":"0"}),Y&&Y.setStyles({display:v||W?"":"none"}))),"1"===u&&ee.setStyle("outline",U&&e?"4px solid #368ec4":"")},this.isChecked=function(){return!!U&&v},this.setCtxMenuAvailability=function(t){t!==F&&((F=t)&&(z||(z=e.createElement("div",{class:"CATWebUXThumbnailCtxMenuDiv"}).inject(ie)),c.onCtxMenuCB&&!L&&(L=function(e){F&&("@onPrimaryPointerClickEvent"===e.eventType&&(ue=!0),c.onCtxMenuCB({id:c.id,event:e.data?e.data.event:e.from[0].event,openFromButton:"@onPrimaryPointerClickEvent"===e.eventType}))},i.addEvent(z,"onPrimaryPointerClick",L),ye=l.addEventListener(q,{callback:L}))),z&&z.setStyle("display",F?"":"none"),Ne())},this.getCtxMenuAvailability=function(){return F},this.setThumbnailLabelClickableFlag=function(e,t){if(e!==j){if(j=e,!c.onLabelContentClickCB)return;(c.icon||c.title||c.subtitle||c.onCtxMenuCB)&&(j?(R.addClassName("CATWebUXThumbnailClickableDiv"),t&&(ge=t),k=i.addEvent(R,"onPrimaryPointerClick",function(e){if(e&&e.from&&e.from.length&&e.from[0].event){if(e.from[0].event.eventAlreadyConsumed)return;e.from[0].event.eventAlreadyConsumed=!0}c.onLabelContentClickCB({id:c.id})})):(R.removeClassName("CATWebUXThumbnailClickableDiv"),ge=null,k&&(i.removeEventFromToken(k),k=null)),m.setTitleAndIconSectionVisibleFlag(I))}},this.getThumbnailLabelClickableFlag=function(){return j},this.setReplyButtonVisibility=function(t){H=t,c.onReplyCB&&H&&!Ce?(Ce=e.createElement("p",{id:"thumbReplyDiv"+r+"_"+c.id,class:"CATWebUXThumbnailReplyDiv wux-ui-3ds wux-ui-3ds-reply"}).inject(ie),me&&Ce.setStyle("margin-right","28px"),Ce.setStyle("display",o.getTouchMode()||W?"":"none"),fe=i.addEvent(Ce,"onPrimaryPointerClick",function(){re=!0,c.onReplyCB({id:c.id})})):!H&&Ce&&(ie.removeChild(Ce),fe&&i.removeEventFromToken(fe),Ce=null,fe=null)},this.updateUserCredentials=function(e){if(e){void 0!==e.userName&&Ee.userName!==e.userName&&(Ee.userName=e.userName,Ee.userName&&(t=!0),se&&(se.setText(Ee.userName?Ee.userName:""),se.title=Ee.userName?Ee.userName:"")),Ee.defaultUserPic=e.defaultUserPic?e.defaultUserPic:Ee.defaultUserPic,(void 0!==e.userColor&&Ee.userColor!==e.userColor||void 0!==e.userPic&&Ee.userPic!==e.userPic)&&(Ee.userColor=e.userColor,Ee.userPic=e.userPic,(Ee.userPic||Ee.userColor)&&(t=!0),G&&(Ee.defaultUserPic&&G.addEventListener("error",function(){G.src=Ee.defaultUserPic?Ee.defaultUserPic:""}),G.src=Ee.userPic,G.setStyles({"border-color":Ee.userColor?"rgb("+Ee.userColor.r+","+Ee.userColor.g+","+Ee.userColor.b+")":""}))),void 0!==e.date&&Ee.date!==e.date&&(Ee.date=e.date,Ee.date&&(t=!0),Y&&(Y.setText(Ee.date?Ee.date:""),Y.title=Ee.date?Ee.date:""));var t=Ee.userName||Ee.date||Ee.userPic||Ee.userColor;J&&J.setStyle("display",Ee.userName||Ee.date?"":"none"),G&&G.setStyle("display",Ee.userPic||Ee.userColor?"":"none"),Q&&Q.setStyle("display",c.displayPrefix||t?"":"none"),t&&ee&&ee.setStyles({outline:""}),$&&(t&&!$.hasClassName("CATWebUXThumbnailSubContainerBackground")?$.addClassName("CATWebUXThumbnailSubContainerBackground"):!t&&$.hasClassName("CATWebUXThumbnailSubContainerBackground")&&$.removeClassName("CATWebUXThumbnailSubContainerBackground"))}},Me();var He=function(e){U&&(w=!0,m.setCheckFlag(!v,e.from[0].event))};i.addEvent(ae,"onPrimaryPointerClick",He),this.setIsCheckableFlag("boolean"==typeof c.isCheckable&&c.isCheckable),this.setCheckFlag("boolean"==typeof c.checkFlag&&c.checkFlag,null,!0),this.setDisplayFlag("boolean"==typeof c.displayFlag&&c.displayFlag),this.setPreview(c.preview,c.backgroundColor),this.allowTitleEdition("boolean"==typeof c.allowTitleEdition&&c.allowTitleEdition),this.setCtxMenuAvailability("boolean"==typeof c.allowCtxMenu&&c.allowCtxMenu),this.setTitleAndIconSectionVisibleFlag("boolean"!=typeof c.displayTitleAndIcon||c.displayTitleAndIcon),this.setInformationIcon("string"==typeof c.informationIcon?c.informationIcon:null),this.setIsDraggable("boolean"==typeof c.isDraggable&&c.isDraggable),this.setFavoriteDivDragContent("string"==typeof c.dragContent?c.dragContent:null),this.setThumbnailLabelClickableFlag("boolean"==typeof c.contentDivClickableFlag&&c.contentDivClickableFlag),this.updateUserCredentials({userName:c.userName,userColor:c.userColor,userPic:c.userPic,defaultUserPic:c.defaultUserPic,date:c.date}),this.setDisplayType("number"==typeof c.displayType?c.displayType:0),this.setReplyButtonVisibility("boolean"==typeof c.showReplyButton&&c.showReplyButton)}});return c.THUMBNAIL=0,c.TILE=1,c}),define("DS/CATWebUXComponents/CATWebUXInfoFlag",["UWA/Core","UWA/Class","DS/Visualization/ThreeJS_DS","DS/VisuEvents/EventsManager","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,i,n){"use strict";return t.extend({init:function(t){var a=t||{};if(a.frameWindow&&a.viewer){var o,s,l,r,c,d;this._parent(a);var u,m=0,h={},g=!1,f=!0,C=!a.dockingSide||"left"!==a.dockingSide&&"right"!==a.dockingSide?"right":a.dockingSide,b="";this.display=function(t){if(!t.dockingSide||t.dockingSide===C||"left"!==t.dockingSide&&"right"!==t.dockingSide||(C=t.dockingSide),b=t.style||"",u="function"==typeof t.compactDisplay?t.compactDisplay:null,o||(o=e.createElement("div",{class:"CATWebUXInfoFlag"}),a.frameWindow.getUIFrame().appendChild(o),s=e.createElement("div",{class:"CATWebUXInfoFlagMainDiv"}).inject(o),r=e.createElement("div",{class:"CATWebUXInfoFlagIcon"}).inject(s),l=e.createElement("p",{class:"CATWebUXInfoFlagParagraph"}).inject(s),c=e.createElement("div",{class:"CATWebUXInfoFlagIconDiv"}).inject(s),d=e.createElement("span",{class:"fonticon CATWebUXInfoFlagIconButton"}).inject(c),h.onBackgroundMod||(h.onBackgroundMod=a.viewer.onBackgroundModify(y)),h.onFreeZoneResize||(a.frameWindow.getImmersiveFrame().addEventListener("freeZoneResize",T),h.onFreeZoneResize=1)),this.hide(),t.className&&!o.hasClassName(t.className)&&o.addClassName(t.className),t.label?(l.setStyles({display:""}),l.innerText=t.label,l.title="",setTimeout(function(){l&&l.offsetWidth>190&&(s.title=t.title?t.title:t.label)},50)):(l.setStyles({display:"none"}),s.title=t.title||""),t.icon)r.setStyles({display:"",backgroundImage:'url("'+t.icon+'")'});else if(t.fontIcon){e.createElement("span",{class:t.fontIcon}).inject(r).setStyles({fontSize:"18px",color:"white",marginTop:"6px"}),r.setStyles({backgroundColor:"#368ec4",marginTop:0,"border-top-left-radius":"3px","border-bottom-left-radius":"3px"})}else r.setStyles({display:"none"});"Accept"===t.widgetType?(d.hasClassName("fonticon-cancel")&&d.removeClassName("fonticon-cancel"),d.addClassName("fonticon-check"),d.setStyles({color:"rgb(30, 163, 98)"})):"Cancel"===t.widgetType&&(d.hasClassName("fonticon-check")&&d.removeClassName("fonticon-check"),d.addClassName("fonticon-cancel"),d.setStyles({color:"rgb(255, 50, 50)"})),h.onPointerDownCB=n.addEvent(o,"onPrimaryPointerDownUnique",function(e){"touch"===(e.type?e.type:e.from[0].type).indexOf!==-1&&(v(),setTimeout(p,1e3))}),t.onClickCB?(h.onClickCB=n.addEvent(o,"onPrimaryPointerClick",t.onClickCB),s.addEventListener("mouseenter",v),s.addEventListener("mouseleave",p),p()):v(),y(a.viewer.backgroundColor),T(),o.setStyles({display:f?"":"none",opacity:1}),g=!0,"webUXStyle"===b&&(s.setStyles({"background-color":"rgb(226, 228, 227)","border-color":"rgb(204, 204, 204)",padding:0}),l.setStyles({fontSize:"16px",marginTop:"0px"}))},this.hide=function(){o&&g&&(g=!1,o.setStyles({opacity:0}),h.onClickCB&&(n.removeEventFromToken(h.onClickCB),h.onClickCB=null,s.removeEventListener("mouseenter",v),s.removeEventListener("mouseleave",p)),h.onPointerDownCB&&(n.removeEventFromToken(h.onPointerDownCB),h.onPointerDownCB=null),setTimeout(function(){!g&&o&&o.setStyles({display:"none"})},200))},this.isDisplayed=function(){return g},this.setVisibleFlag=function(e){f=e,o&&o.setStyles({display:f&&g?"":"none"})},this.getVisibleFlag=function(){return f},this.clean=function(){this.hide(),a&&a.frameWindow&&a.frameWindow.getUIFrame()&&o&&a.frameWindow.getUIFrame().removeChild(o),h.onBackgroundMod&&a.viewer&&a.viewer.unsubscribe(h.onBackgroundMod),h.onFreeZoneResize&&a.frameWindow&&a.frameWindow.getImmersiveFrame().removeEventListener("freeZoneResize",T),o=l=r=c=d=u=null,h={}}}function v(){""===b?c&&c.setStyles({opacity:1}):s.setStyles({"background-color":"rgb(216, 218, 217)"})}function p(){""===b?c&&c.setStyles({opacity:0}):s.setStyles({"background-color":"rgb(226, 228, 227)"})}function y(e){if(l&&""===b){var t=255*new i.Color(e).getHSL().l;l.setStyles({color:t>120?"rgb(0,0,0)":"rgb(255, 255, 255)"})}}function T(){m=0;var e=a.frameWindow.getImmersiveFrame(),t=e.getDockingElement("left"===C?WUXDockAreaEnum.LeftDockArea:WUXDockAreaEnum.RightDockArea),i=t.getContainedWindows();if(i&&i.length&&(i[0].isAWindowGroup()&&i[0].getEmbeddedWindows().length||!i[0].isAWindowGroup())){for(var n=i[0].getEmbeddedWindows?i[0].getEmbeddedWindows():i,s=!1,c=0;c<n.length;c++)n[c].visibleFlag&&(s=!0);if(s&&!t.collapseDockingZoneFlag){var d=t._collapserSize;m=t.dockingZoneSize+d}}else t.interactiveDockAreaVisibleFlag&&(m=t.dockingZoneSize);if(m+=20,o&&(o.setStyles("left"===C?{left:m+"px"}:{right:m+"px"}),u&&r&&l)){l.setStyle("display","");var h=u({freeZoneWidth:e.getFreeZone().getSize().width,flagOffset:m,flagWidth:o.getSize().width});l.setStyle("display",h?"none":""),r.setStyles({"border-top-right-radius":h?"3px":"","border-bottom-right-radius":h?"3px":""})}}}})}),define("DS/CATWebUXComponents/CATWebUXSectionHeader",["UWA/Core","UWA/Class","DS/VisuEvents/EventsManager","DS/Controls/Toggle","DS/Utilities/TouchUtils","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,i,n,a){"use strict";var o=t.extend({init:function(t){var n,a,o=t||{};this._parent(o);var s=o.cmdData.id;if(this.getid=function(){return s},this.inject=function(e){return n.inject(e),this},this.clear=function(){i.removeEvent(n,"onPrimaryPointerClick",a)},n=e.createElement("div",{class:"CATWebUXSectionHeaderCheckOptions"}),o.cmdData&&"button"===o.cmdData.type){if(o.cmdData&&o.cmdData.icon){var l=e.createElement("img",{src:o.cmdData.icon}).inject(n);l.setStyles({width:"22px",height:"22px"}),l.ondragstart=function(){return!1}}a=function(){o.cmdData.cb(),o.toggleFunc()}}var r=e.createElement("p").inject(n);r.innerHTML=o.cmdData?o.cmdData.nls:"",r.title=o.cmdData?o.cmdData.nls:"",i.addEvent(n,"onPrimaryPointerClick",a)}});return t.extend({init:function(t){var s=t||{};this._parent(s);var l,r,c,d,u,m,h,g,f,C=this,b=!0,v=!0,p=[],y=[],T=[];function D(){var e=s.fontIcon?50:s.draggable?40:20;(p.length&&b||y.length&&v)&&(p.length&&b&&(e+=20),y.length&&v&&(e+=30*y.length)),a.getTouchMode()&&(e+=20),d.setStyles({width:"calc(100% - "+e+"px)","margin-left":s.fontIcon?"40px":s.draggable?"25px":"10px"})}function k(){h&&!h.hasClassName("CATWebUXSectionHeaderSectionBulletsActivated")?(h.addClassName("CATWebUXSectionHeaderSectionBulletsActivated"),g&&g.setStyle("height",String(40*p.length)+"px")):C.closeContextualSectionHeader()}this.inject=function(e){return l.inject(e),this},this.getContent=function(){return l},this.clear=function(){var e;for(s.doubleClickCB&&i.removeEvent(r,"onPrimaryPointerDoubleClick",s.doubleClickCB),e=0;e<p.length;e++)p[e].clear();if(p.splice(0,p.length),h&&i.removeEvent(h,"onPrimaryPointerClick",k),T&&T.length)for(e=0;e<T.length;e++)i.removeEventFromToken(T[e])},this.closeContextualSectionHeader=function(){h&&h.hasClassName("CATWebUXSectionHeaderSectionBulletsActivated")&&(h.removeClassName("CATWebUXSectionHeaderSectionBulletsActivated"),g&&g.setStyle("height","0px"))},this.setHeaderLabel=function(e){d&&(d.innerHTML=e,void 0!==s.displayTooltip&&!0!==s.displayTooltip||(d.title=e))},this.setSubMenuCommands=function(t){var i;if(p.length){for(C.closeContextualSectionHeader(),i=0;i<p.length;i++)p[i].clear();p.splice(0,p.length),g&&(r.removeChild(g),g=null)}if(t&&t.length)for((g=e.createElement("div",{class:"CATWebUXSectionHeaderContextualCmdSection"}).inject(r)).setStyle("height","0px"),i=0;i<t.length;i++)p.push(new o({cmdData:t[i],toggleFunc:C.closeContextualSectionHeader}).inject(g));C.setSubMenuCommandsVisibility(b),D()},this.setSubMenuCommandsVisibility=function(e){b=e,h.setStyles({display:p.length&&b?"":"none"}),D()},this.setQuickAccessCommands=function(t){var a;for(a=0;a<T.length;a++)i.removeEventFromToken(T[a]);for(T.length=0;c.firstChild;)c.removeChild(c.firstChild);y.length=0,t&&t.length&&t.forEach(function(t){if("switch"===t.type){var a=new n({value:t.id,type:"switch",checkFlag:"boolean"==typeof t.checkFlag&&t.checkFlag}).inject(c);a.elements.container.title=t.title,a.quickBtnType=t.type,y.push(a),a.elements.container.setStyles({margin:"8px 7px 5px 0px",display:"inline-block"}),a.addEventListener("change",function(e){!f&&t.cb&&t.cb(e),f=!1})}else{var o=e.createElement("span",{id:"DMUQuickAccess"+t.id,class:(t.fontIcon||t.initialFontIcon)+" CATWebUXSectionHeaderSectionBullets"}).inject(c);o.setStyles({"margin-right":"10px","margin-top":"10px"}),"checkbox"===t.type&&(o.checkFlag=Boolean(t.checkFlag),o.checkFlag&&o.setStyles({color:"rgb(47, 166, 204)"})),o.quickBtnType=t.type,o.title=t.title,y.push(o),T.push(i.addEvent(o,"onPrimaryPointerClick",function(){"checkbox"===t.type?(o.checkFlag=!o.checkFlag,o.setStyles({color:o.checkFlag?"rgb(47, 166, 204)":""})):"toggle"===t.type&&(o.hasClassName(t.initialFontIcon)?(o.removeClassName(t.initialFontIcon),o.addClassName(t.alternativeFontIcon)):(o.removeClassName(t.alternativeFontIcon),o.addClassName(t.initialFontIcon))),o.hasClassName("disable")||("toggle"===t.type?t.cb(o.hasClassName(t.alternativeFontIcon)):t.cb())}))}}),C.setQuickAccessCommandsVisibility(v),D()},this.setQuickAccessCommandsVisibility=function(e){v=e,c.setStyles({display:y.length&&v?"":"none"}),D()},this.setAdditionalCommandsVisibility=function(e){C.setSubMenuCommandsVisibility(e),C.setQuickAccessCommandsVisibility(e)},this.enableHeaderDrag=function(e){u&&(u.setAttribute("draggable",e),e?a.getTouchMode()&&m.setStyle("display",""):m.setStyle("display","none"))},this.setAdditionalCheckBoxActiveFlag=function(e,t){e>=0&&e<y.length&&"boolean"==typeof y[e].checkFlag&&y[e].checkFlag!==t&&("switch"!==y[e].quickBtnType?y[e].setStyles({color:t?"rgb(47, 166, 204)":""}):f=!0,y[e].checkFlag=t)},this.setQuickAccessCommandActiveFlag=function(e,t){var i=y.findIndex(function(t){return t.id&&t.id.includes(e)});i>=0&&y[i].hasClassName("CATWebUXSectionHeaderSectionBullets")&&(t&&y[i].hasClassName("disable")?y[i].removeClassName("disable"):t||y[i].hasClassName("disable")||y[i].addClassName("disable"))},l=e.createElement("div",{class:"CATWebUXSectionHeaderMainDiv"}),r=e.createElement("div",{class:"CATWebUXSectionHeader"}).inject(l),s.fontIcon?e.createElement("div",{class:"CATWebUXSectionHeaderIcon "+s.fontIcon}).inject(r):s.draggable&&(u=e.createElement("div",{class:"CATWebUXSectionHeaderDraggableDiv",draggable:!0}).inject(r),m=e.createElement("div",{class:"CATWebUXSectionHeaderDraggableIcon wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-drag-grip"}).inject(u),u.ondragstart=function(e){var t=e.target.id;s.onDragStart&&((t=s.onDragStart())||(t=e.target.id)),e.dataTransfer.setData("text",t)},a.getTouchMode()||(u.addEventListener("mouseenter",function(){"true"===u.getAttribute("draggable")&&m.setStyle("display","")}),u.addEventListener("mouseleave",function(){"true"===u.getAttribute("draggable")&&m.setStyle("display","none")}),m.setStyle("display","none"))),d=e.createElement("p",{class:"CATWebUXSectionHeaderLabel"}).inject(u||r),(h=e.createElement("span",{class:"fonticon fonticon-menu CATWebUXSectionHeaderSectionBullets"}).inject(r)).setStyles({display:"none","margin-right":"10px","margin-top":"8px"}),c=e.createElement("div",{class:"CATWebUXSectionHeaderQuickAccessDiv"}).inject(r),this.setSubMenuCommands(s.cmdList),this.setQuickAccessCommands(s.quickAccessBtnList),this.setHeaderLabel(s.sectionLabel),D(),s.doubleClickCB&&i.addEvent(r,"onPrimaryPointerDoubleClick",s.doubleClickCB),i.addEvent(h,"onPrimaryPointerClick",k)}})}),define("DS/CATWebUXComponents/CATWebUXButtonExpander",["require","exports","DS/VisuEvents/EventsManager","UWA/Core","DS/Utilities/TouchUtils","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,i,n,a){"use strict";return class{constructor(e){let t,o,s,l,r,c=this;function d(t){e.onClickCB&&e.onClickCB({target:e.onClickData,data:t,div:c})}function u(){s&&s.removeEventListener("transitionend",u),t&&s&&!t.hasClassName("expanded")&&s.setStyle("display","none")}function m(){t&&s&&l&&(t.hasClassName("expanded")?(s.addEventListener("transitionend",u),t.removeClassName("expanded"),l.removeClassName("wux-ui-3ds-expand-down"),l.addClassName("wux-ui-3ds-expand-right")):(s.setStyle("display",""),window.requestAnimationFrame(()=>{t&&l&&(t.addClassName("expanded"),l.removeClassName("wux-ui-3ds-expand-right"),l.addClassName("wux-ui-3ds-expand-down"))})),e.onExpandCB&&e.onExpandCB())}t=n.createElement("div",{class:"DMUButtonExpanderMainDiv"});let h=n.createElement("div",{class:"ButtonExpanderHeaderDiv","disable-selection":e.disableSelection||!1}).inject(t);if(o=n.createElement("div",{class:"DMUButtonExpanderExpanderDiv",styles:{visibility:e.displayExpander?"inherit":"hidden"}}).inject(h),a.getTouchMode()&&h.addClassName("touchMode"),e.displayExpander&&i.addEvent(e.disableSelection?h:o,"onPrimaryPointerClick",m),s=n.createElement("div",{class:"ButtonExpanderContentDiv",styles:{display:"none"}}).inject(t),l=n.createElement("i",{class:"wux-ui-3ds wux-ui-3ds-expand-right"}).inject(o),e.icon){let t=n.createElement("img",{class:"DMUButtonExpanderIcon",src:e.icon,events:{error:function(){h&&t&&h.removeChild(t)}}}).inject(h)}r=n.createElement("div",{class:"DMUButtonExpanderTitleDiv",text:e.title,"disable-selection":e.disableSelection||!1,styles:{"font-size":e.fontSize,"font-weight":e.bold?"bold":"normal","font-style":e.italic?"italic":"normal"}}).inject(h),e.customHeader&&n.createElement("div",{class:"DMUButtonExpanderCustomHeaderDiv"}).inject(h).appendChild(e.customHeader),e.onClickCB&&i.addEvent(r,"onPrimaryPointerClick",d),this.getMainDiv=function(){return t},this.setTitle=function(e){r&&(r.innerText=e)},this.getHeaderDiv=function(){return h},this.getContentDiv=function(){return s},this.isExpanded=function(){return!!t&&t.hasClassName("expanded")},this.setExpanded=function(i){e.displayExpander&&t&&s&&l&&(!i&&t.hasClassName("expanded")?(s.addEventListener("transitionend",u),t.removeClassName("expanded"),l.removeClassName("wux-ui-3ds-expand-down"),l.addClassName("wux-ui-3ds-expand-right")):i&&!t.hasClassName("expanded")&&(s.setStyle("display",""),window.requestAnimationFrame(()=>{t&&l&&(t.addClassName("expanded"),l.removeClassName("wux-ui-3ds-expand-right"),l.addClassName("wux-ui-3ds-expand-down"))})))},this.setHighlight=function(e){t&&(e&&!t.hasClassName("DMUButtonExpanderHighlighted")?t.addClassName("DMUButtonExpanderHighlighted"):!e&&t.hasClassName("DMUButtonExpanderHighlighted")&&t.removeClassName("DMUButtonExpanderHighlighted"))},this.remove=function(){e.displayExpander&&i.removeEvent(e.disableSelection?h:o,"onPrimaryPointerClick",m),e.onClickCB&&i.removeEvent(r,"onPrimaryPointerClick",d),t&&t.remove(),o=t=s=l=null}}}}),
/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
define("DS/CATWebUXComponents/CATWebUXNotifBar",["UWA/Core","UWA/Controls/Abstract","UWA/Utils","DS/UIKIT/Spinner","css!DS/UIKIT/UIKIT","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,i,n){"use strict";return t.extend({defaultOptions:{className:"",msgType:"primary",icon:!0,autoHide:!1,hideDelay:2e3,closable:!0},init:function(t){var i=t||{};i.className=i.className||"",this._parent(i),this.transitionTime=i.animationOff||this._debugmode?0:200,this.elements.container=e.createElement("ul",{class:"CATWebUXNotifBar alert "+this.options.className})},add:function(t){var a,o,s,l,r=this,c=i.getUUID();return t.msgType=t.msgType||this.options.msgType,t.icon="boolean"==typeof t.icon?t.icon:this.options.icon,t.autoHide="boolean"==typeof t.autoHide?t.autoHide:this.options.autoHide,t.closable="boolean"==typeof t.closable?t.closable:this.options.closable,t.buttons=t.buttons||[],t.buttons=i.splat(t.buttons),l="fade in alert-message alert-"+t.msgType+(0===this.transitionTime?" odtreplay":""),a=e.createElement("li",{id:c,class:l,html:{tag:"p",class:"msg",text:t.message}}),t.icon&&(a.addClassName("alert-has-icon"),e.createElement("span",{class:"icon fonticon"}).inject(a,"top")),o=e.createElement("div",{class:"btn-grp-sep"}).inject(a),s={id:c,show:function(){a.show()},hide:function(){a.hide()},remove:function(){r.remove(c)},buttons:[]},t.buttons.length>0&&t.buttons.forEach(function(t){var i;t.label&&t.onClick?(t.className=t.className||"default",t.doClose=t.doClose||!1,i=e.createElement("button",{class:"btn btn-sm btn-"+t.className,text:t.label,events:{click:function(){t.onClick(),t.doClose&&r.remove(c)}}}),s.buttons.push({label:t.label,show:function(){i.show()},hide:function(){i.hide()}}),i.inject(o)):"spinner"===t.className?(i=new n({visible:!0,animate:!1}),s.buttons.push({label:"spinner",show:function(){i.spin(),i.show()},hide:function(){i.stop(),i.hide()}}),i.inject(o)):s.buttons.push(null)}),t.closable&&(a.addClassName("alert-closable"),e.createElement("span",{class:"fonticon fonticon-cancel close",events:{click:function(){r.remove(c)}}}).inject(o,"bottom")),this.elements[c]=a,a.inject(this.elements.container),t.autoHide&&(this._toggleAutoHide(!0,c),a.addEvents({mouseover:r._toggleAutoHide.bind(r,!1),mouseleave:r._toggleAutoHide.bind(r,!0,c)})),s},removeAll:function(e){var t,i=0,n=function(){0===--i&&"function"==typeof e&&e()};for(t in this.elements)"container"!==t&&this.elements.hasOwnProperty(t)&&(i++,this.remove(t,n));0===i&&"function"==typeof e&&e()},remove:function(e,t){var i=this,n=this.elements[e];n&&"container"!==e?(n.removeClassName("in"),setTimeout(function(){n.destroy(),delete i.elements[e],"function"==typeof t&&t()},i.transitionTime)):"function"==typeof t&&t()},getContainer:function(){return this.elements.container},_toggleAutoHide:function(e,t){var i=this;e&&t?this.hidingIntervalId=setTimeout(function(){i.remove(t)},i.options.hideDelay):clearInterval(this.hidingIntervalId)}})}),define("DS/CATWebUXComponents/CATWebUXPanel",["UWA/Core","DS/Windows/Panel","DS/UIKIT/Spinner","css!DS/CATWebUXComponents/CATWebUXComponents.css"],function(e,t,i){"use strict";return t.extend({init:function(t){var n=t||{};n.identifier=n.identifier?n.identifier:n.id,n.floatableFlag="boolean"!=typeof n.floatableFlag||n.floatableFlag,n.autoCloseFlag="boolean"!=typeof n.autoCloseFlag||n.autoCloseFlag,n.resizableFlag="boolean"!=typeof n.resizableFlag||n.resizableFlag,n.allowMaximizeFlag="boolean"!=typeof n.allowMaximizeFlag||n.allowMaximizeFlag,n.maximizeButtonFlag="boolean"!=typeof n.maximizeButtonFlag||n.maximizeButtonFlag,n.horizontallyStretchableFlag="boolean"!=typeof n.horizontallyStretchableFlag||n.horizontallyStretchableFlag,n.verticallyStretchableFlag="boolean"!=typeof n.verticallyStretchableFlag||n.verticallyStretchableFlag,n.ensureHeightDefinitionOnHierarchy=!0,n.currentDockArea="number"==typeof n.currentDockArea?n.currentDockArea:WUXDockAreaEnum.NoneDockArea,n.allowedDockAreas="number"==typeof n.allowedDockAreas?n.allowedDockAreas:WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea|WUXDockAreaEnum.TopDockArea,n.floatableFlag="boolean"!=typeof n.floatableFlag||n.floatableFlag,n.icon&&!n.icon.endsWith(".png")&&(n.icon+=" CATWebUXPanelIcon"),this._parent(n);var a,o=!0,s=this,l=!1,r=e.createElement("div",{id:"CATWebUXPanelDisabledDiv",class:"CATWebUXPanelDisabledDiv"}).inject(this.elements.container),c=new i({visible:!0}),d=n.widthStep;c.inject(r),c.getContent().addClassName("CATWebUXPanelSpinner");var u,m,h,g,f=550,C={width:n.width,height:n.height,minWidth:n.minWidth,minHeight:n.minHeight,currentDockArea:n.currentDockArea,allowedDockAreas:n.allowedDockAreas,allowMaximizeFlag:n.allowMaximizeFlag,maximizeButtonFlag:n.maximizeButtonFlag,resizableFlag:n.resizableFlag,floatableFlag:n.floatableFlag};function b(){var e=n.immersiveFrame.getContent().getSize(),t=e.width<f;if(t){if(t!==u){u=t;var i=s._getDimensionsFromPreferences()||s._getDockedDimensionsFromPreferences();C.width=i&&i.width?i.width:s.getWidth(),C.minWidth=s.getMinWidth()||C.minWidth,C.height=i&&i.height?i.height:s.getHeight(),C.minHeight=s.getMinHeight()||C.minHeight,C.currentDockArea=s.currentDockArea,C.allowMaximizeFlag=s.allowMaximizeFlag,C.maximizeButtonFlag=s.maximizeButtonFlag,C.resizableFlag="boolean"==typeof s.resizableFlag?s.resizableFlag:n.resizableFlag,C.floatableFlag="boolean"==typeof s.floatableFlag?s.floatableFlag:n.floatableFlag,s.setProperties({allowMaximizeFlag:!1,maximizeButtonFlag:!1,resizableFlag:!1,allowedDockAreas:WUXDockAreaEnum.LeftDockArea,floatableFlag:!1}),s._saveDetachedInPreferences(),s.currentDockArea!==WUXDockAreaEnum.LeftDockArea&&(m&&(clearTimeout(m),m=null),m=setTimeout(function(){n.immersiveFrame.dockWindow(s,WUXDockAreaEnum.LeftDockArea,{attachToOtherDockedWindow:!0})}))}var a=n.immersiveFrame.getDockingElement(WUXDockAreaEnum.LeftDockArea)._collapserSize;s.setProperties({minWidth:e.width-a}),s.setWidth(e.width-a)}else t!==u&&(u=t,s.setProperties({allowedDockAreas:C.allowedDockAreas,currentDockArea:C.currentDockArea,minWidth:C.minWidth,minHeight:C.minHeight,allowMaximizeFlag:C.allowMaximizeFlag,maximizeButtonFlag:C.maximizeButtonFlag,resizableFlag:C.resizableFlag,floatableFlag:C.floatableFlag}),n.immersiveFrame.dockWindow(s,C.currentDockArea,{attachToOtherDockedWindow:!0}),h&&(clearTimeout(h),h=null),h=setTimeout(function(){C.width>0&&s.setWidth(C.width),C.height>0&&s.setHeight(C.height)}))}if(this.setPanelVisibilityFlag=function(e,t){if(e!==s.visibleFlag||t)if(s.visibleFlag=e,s.visibleFlag){if(n.viewerFrame&&(n.viewerFrame.addEvent("resize",b),b()),s.getDockedFlag()&&t){var i=n.immersiveFrame.getDockingElement(s.currentDockArea).getContainedWindows();1===i.length&&i[0].isAWindowGroup()&&(i[0].currentWindows=[s]);var a=n.immersiveFrame.getDockingElement(s.currentDockArea);a.collapseDockingZoneFlag&&(a.collapseDockingZoneFlag=!1)}}else n.viewerFrame&&n.viewerFrame.removeEvent("resize",b)},this.getPanelVisibilityFlag=function(){return s.visibleFlag},this.isSmallWidth=function(){return u},this.collapsePanel=function(){var e=n.immersiveFrame.getDockingElement(s.currentDockArea);e&&e.setProperties({collapseDockingZoneFlag:!0})},this._parentDestroy=this.destroy,this.destroy=function(){l=!0,g&&(clearTimeout(g),g=null),m&&(clearTimeout(m),m=null),h&&(clearTimeout(h),h=null),n.viewerFrame&&n.viewerFrame.removeEvent("resize",b),s.visibleFlag=!1,s._parentDestroy()},this.clean=function(){s.destroy()},this.getPanelID=function(){return n.identifier},this.setWidth=function(e){if(d){var t=e,i=s.getMinWidth(),a=(t-i)/d,o=Math.floor(a);t=a-o<.7?i+o*d:i+(o+1)*d,!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.LeftDockArea&&s.currentDockArea!==WUXDockAreaEnum.RightDockArea||(n.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize=t),s.width=t}else!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.LeftDockArea&&s.currentDockArea!==WUXDockAreaEnum.RightDockArea||(n.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize=e),s.width=e},this.getWidth=function(){return!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.LeftDockArea&&s.currentDockArea!==WUXDockAreaEnum.RightDockArea?s.width:n.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize},this.setMinWidth=function(e){s.minWidth=e,s.minWidth>s.getWidth()&&s.setWidth(s.minWidth)},this.getMinWidth=function(){return s.minWidth},this.setWidthStep=function(e){d=e,s.setWidth(s.getWidth())},this.getWidthStep=function(){return d},this.setHeight=function(e){if(n.heightStep){var t=e,i=s.getMinHeight(),a=(t-i)/n.heightStep,o=Math.floor(a);t=a-o<.7?i+o*n.heightStep:i+(o+1)*n.heightStep,!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.BottomDockArea&&s.currentDockArea!==WUXDockAreaEnum.TopDockArea||(n.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize=e),s.height=t}else n.heightStep||(!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.BottomDockArea&&s.currentDockArea!==WUXDockAreaEnum.TopDockArea||(n.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize=e),s.height=e)},this.getHeight=function(){return!s.getDockedFlag()||s.currentDockArea!==WUXDockAreaEnum.BottomDockArea&&s.currentDockArea!==WUXDockAreaEnum.TopDockArea?s.height:n.immersiveFrame.getDockingElement(s.currentDockArea).dockingZoneSize},this.setMinHeight=function(e){s.minHeight=e,s.minHeight>s.getHeight()&&s.setHeight(s.minHeight)},this.getMinHeight=function(){return s.minHeight},this.setEnableFlag=function(e){o!==e&&(o=e,r.setStyles({display:o?"none":"block"}),a&&clearTimeout(a),a=setTimeout(()=>{l||(r.setStyles({opacity:o?"0":"1"}),a=null)},100))},this.getEnableFlag=function(){return o},this.setResizableFlag=function(e){s.resizableFlag!==e&&(e||(s.setWidth(s.getMinWidth()),s.setHeight(s.getMinHeight())),s.resizableFlag=e)},this.getResizableFlag=function(){return s.resizableFlag},this.setPanelPosition=function(e){e&&(s.position=e)},n.width&&this.setWidth(n.width),n.height&&this.setHeight(n.height),n.minWidth&&this.setMinWidth(n.minWidth),n.minHeight&&this.setMinHeight(n.minHeight),s.getDockedFlag()&&n.immersiveFrame.getDockingElement(this.currentDockArea)&&n.immersiveFrame.dockWindow(s,this.currentDockArea,{attachToOtherDockedWindow:!0}),s.isSmallWidth()||s._saveDockAreaInPreferences(),n.className&&this.elements.container.addClassName(n.className),this.addEventListener("placeChange",function(){s.isSmallWidth()||l||(g&&(clearTimeout(g),g=null),g=setTimeout(function(){if(g=null,s.visibleFlag&&!l&&(s._saveDockAreaInPreferences(),n.onPlaceChangedCB&&n.onPlaceChangedCB({currentDockArea:s.currentDockArea}),n.onPanelResizedCB))try{let e=window.getComputedStyle(s.getContent());n.onPanelResizedCB({width:Math.round(parseInt(e.width)),height:Math.round(parseInt(e.height)),widthModifiedInteractively:!0,currentDockArea:s.currentDockArea})}catch(e){window.console.log(e)}}))}),n.viewerFrame&&(n.viewerFrame.addEvent("resize",b),b()),d||n.heightStep||n.onPanelResizedCB){var v={width:0,height:0};this.addEventListener("startResize",function(){v.width=s.getWidth(),v.height=s.getHeight(),s.visibleFlag&&n.onBeforePanelResizeCB&&n.onBeforePanelResizeCB({width:s.getWidth(),height:s.getHeight(),widthModifiedInteractively:!0,currentDockArea:s.currentDockArea})}),this.addEventListener("resize",function(){s.visibleFlag&&n.onPanelResizeCB&&n.onPanelResizeCB({width:s.getWidth(),height:s.getHeight(),widthModifiedInteractively:!0,currentDockArea:s.currentDockArea})}),this.addEventListener("stopResize",function(){s.visibleFlag&&(d&&s.setWidth(s.getWidth()),n.heightStep&&s.setHeight(s.getHeight()),v.width===s.getWidth()&&v.height===s.getHeight()||!n.onPanelResizedCB||n.onPanelResizedCB({width:s.getWidth(),height:s.getHeight(),widthModifiedInteractively:!0,currentDockArea:s.currentDockArea})),v={width:0,height:0}})}n.closePanelCB&&this.addEventListener("close",n.closePanelCB),setTimeout(function(){s.visibleFlag&&!l&&s.ensureVisible()})}})}),define("DS/CATWebUXComponents/CATWebUXUtils",[],function(){"use strict";var e,t={};return t._sendUsageProbe=function(t,i,n){if(e){var a=e.getPADTracker({eventCategory:"usage",eventAction:t}),o={eventLabel:i};void 0!==n&&(o.eventValue=n),a.setEventData(o),a.trackPageEvent()}else require(["DS/PADServices/utils/PADTrackerManager"].concat([]),function(t,i,n,a){e=a,this._sendUsageProbe(t,i,n)}.bind(this,t,i,n))},t.isMobile=function(){return navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},Object.freeze(t)}),define("DS/CATWebUXComponents/CATWebUXValidationPanel",["UWA/Core","UWA/Class","DS/CATWebUXComponents/CATWebUXNotifBar","i18n!DS/CATWebUXComponents/assets/nls/CATWebUXComponents"],function(e,t,i,n){"use strict";return t.extend({init:function(t){var a,o,s,l=null,r=null;a=t.message,o=n.validationPanelOk,s=n.validationPanelCancel,this.display=function(t,n){return l=new e.Element("div",{class:"CATWebUXValidationPanel","data-rec-id":"WebUXValidationPanel",styles:{position:"absolute",display:"inline-block"}}),r||((r=new i({className:"WebUXValidationPanel"}).inject(l)).add({msgType:"primary",message:a,closable:!1,buttons:[{className:"primary",label:o,onClick:t},{className:"default",label:s,onClick:n}]}),r.show()),l},this.show=function(){l&&l.setStyle("display","inline-block")},this.hide=function(){l&&l.setStyle("display","none")},this.setButtonEnableFlag=function(e){var t=document.getElementsByClassName("CATWebUXNotifBar"),i=e.btnId,n=e.enableFlag,a=null;"Ok"===i?a=t[0].getElementsByClassName("btn-primary"):"Cancel"===i&&(a=t[0].getElementsByClassName("btn-default")),a&&a[0]&&(!0===n?a[0].disabled=!1:!1===n&&(a[0].disabled=!0))},this.destroy=function(){r&&r.destroy(),r=l=null}}})});