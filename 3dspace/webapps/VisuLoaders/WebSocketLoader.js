define("DS/VisuLoaders/WebSocketLoader",[],function(){"use strict";var t=window.mySocket,e=function(t,e,i,n){this.msg=t,this.msgData=e,this.answer=i,this.onCompletedCB=n};e.emit=function(){};var i=function(){this.pendingRequests=[],this.pending=0,this.maxPending=5};return i.prototype.isEnabled=function(){return!!t},i.prototype.emit=function(t,i,n,s){if(this.pending<this.maxPending)this._emit(t,i,n,s);else{var o=new e(t,i,n,s);this.pendingRequests.push(o)}},i.prototype._emitNext=function(){if(this.pending<this.maxPending&&this.pendingRequests.length>0){var t=this.pendingRequests.shift();this._emit(t.msg,t.msgData,t.answer,t.onCompletedCB)}},i.prototype._emit=function(e,i,n,s){this.pending++,t.emit(e,i);var o=this;t.on(n,function(t){s(t),o.pending--,o._emitNext()})},new i});