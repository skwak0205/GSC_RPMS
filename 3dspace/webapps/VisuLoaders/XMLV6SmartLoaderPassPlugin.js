define("DS/VisuLoaders/XMLV6SmartLoaderPassPlugin",["DS/Visualization/ThreeJS_DS"],function(e){"use strict";return function(r){this.enabled=!1,this.renderTarget=null;var t,i=r,n=new e.Frustum,o=new e.Matrix4;this.init=function(e){e.context,t=e},this.render=function(e,r){this.enabled&&(i.isWebWorkerBusy()||this.update(e,r))},this.update=function(r,a){var s,u,c,l,d;t.autoUpdateScene&&r.updateMatrixWorld(),a.matrixWorldInverse.getInverse(a.matrixWorld),o.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),n.setFromMatrix(o);var p=[];for(s=0,u=(d=r.getWebGLObjects("main",0)).length;s<u;s++)if(null!==(c=d[s])&&(!((l=c.object)instanceof e.Mesh)||!l.frustumCulled||n.intersectsObject(l))&&"BBox"==l.name){var h=-1;if(null!==l.boundingSphere){var m=new e.Vector3;m.copy(l.boundingSphere.center),m.applyMatrix4(l.matrixWorld);var f=new e.Vector3;f.subVectors(m,a.position);var b=f.length();h=l.boundingSphere.radius/b}p.push({name:l._occurrence.parent.node.name,priority:h})}p.sort(function(e,r){return e.priority<r.priority?1:e.priority>r.priority?-1:0}),i.loadGeometryFiles(p)}}});