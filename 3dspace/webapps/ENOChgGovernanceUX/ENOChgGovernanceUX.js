define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMemberFilterView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"teamfilter",tagName:"div",className:"chg-member-view",setup:function(){this.template='                                                <div class="'+this.getClassNames("-role-filter")+'">                                                    <table class="filter-table table">                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByName+'</td>                                                            <td>                                                                <div class="filter-input">                                                                    <input type="text" placeholder="'+t.CHG_Member_SearchMembers_PlaceHolder+'" class="form-control form-control-root filtertext">                                                                    <div class="clear-filter fonticon fonticon-cancel-circled"></div>                                                                </div>                                                            </td>                                                        </tr>                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByResponsibilities+'</td>                                                            <td class="chg-member-view-filter toggle-primary">                                                                <div class="toggle-container toggle-filter-view">                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="allToggle" class="roleFilter" checked>                                                                        <label class="control-label" for="allToggle" style="color: gray;">'+t.CHG_Member_Filter_All+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="contributorToggle" class="roleFilter">                                                                        <label class="control-label" for="contributorToggle" style="color: gray;">'+t.CHG_Member_Filter_Assignees+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="revMemToggle" class="roleFilter">                                                                        <label class="control-label" for="revMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Approvers+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="followMemToggle" class="roleFilter">                                                                        <label class="control-label" for="followMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Followers+"</label>                                                                    </div>                                                                </div>                                                            </td>                                                        </tr>                                                    </table>                                                </div>",this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view-role-filter",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"keyup .filtertext":function(e){var t=e.target.value,i=this.container.getElement(".clear-filter");t.length>0?i.setStyle("visibility","visible"):i.setStyle("visibility","hidden"),this.dispatchEvent("memberFilterKeyUp",arguments)},"click .clear-filter":function(e){this.container.getElement(".clear-filter").setStyle("visibility","hidden");var t=this.container.getElement(".filtertext");if(t){t.value=""}this.dispatchEvent("memberFilterKeyUp",{target:{value:""}})},"focus .filtertext":function(){var e=document.getElementsByClassName("searchfiler-input-container");e.addClassName("highlighted-border"),e.removeClassName("border-without-focus")},"click .roleFilter":function(){this.dispatchEvent("memberRoleFilter",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCreateChangeRequest",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require"],function(e,t,i,n,a){return{launchCreateChangeRequestDialog:function(o){console.log("launchCreateChangeRequestDialog ............................");let r={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:i.CHG_NEW_CHANGE_REQUEST_FORM,type:"Change Request",silentMode:!1,overlay:!0,options:{typeName:"Change Request",preferedType:"Change Request",select:[]},events:{onSuccess:function(e){o&&(o.isClickProcessing=!1);var t=document.getElementsByClassName("moduleWrapper")[0];null==t&&"undefined"==t||n.mask(t);let i=e.result[0].identifier,r={};r.context=i,r.type="ChangeRequest";let s=a("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),l=a("DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil");s.launchPropertyPanelContext(r),l.displayObjectInfoInsideIDcard(i,!0)},onFailure:function(e){console.log("onFailure..............."+e),o&&(o.isClickProcessing=!1)},onCancel:function(e){o&&(o.isClickProcessing=!1)}}};(new e).CreateNew(r)}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddRelatedScope,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveRelatedScope,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTagNavigatorProxy",["DS/TagNavigatorProxy/TagNavigatorProxy","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){"use strict";var i=null,n=null,a=[],o={init:function(a){var r={widgetId:widget.id,filteringMode:"FilteringOnServer",colorize:!0};i&&i.die(),n=a.DataContext,(i=e.createProxy(r)).addOpenTaggerListener(function(){require(["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS"],function(e,t,i){var n={level:"info",title:i.WARNING_TAGGER_INFO,subtitle:i.WARNING_TAGGER,sticky:!1};window.notif=e,t.removeLastNotificationDisplayed(),t.setNotificationManager(window.notif),t.setFadeOutPolicy(2),t.setStackingPolicy(1),t.setRemoveStackOnFirstTimeoutFlag(!0),null!=t._notifScreen&&t._notifScreen.addClassName("ca-align-center"),e.addNotif(n)})}),i.addEvent("onFilterChange",function(e){var a=i.getCurrentFilter();n.ChgCOlayoutModel.empty(),Object.keys(a.allfilters).length>0?(t.getGlobalVariable().indexMode="true",n.refreshGrid(e,a)):(t.getGlobalVariable().indexMode="true",n.refreshGrid(e,a),t.getGlobalVariable().indexMode="false",n.refreshGrid(e,a))}),i.addEvent("colorize",function(e){var t=e.tagColors;o._colorize(t)}),i.addEvent("unColorize",function(e){o._uncolorize()})},setTags:function(e,t){if(i&&t){var n=o.getTagsList(t);t.forEach(function(e){if(-1!=n.indexOf(e.sixw)){for(var t=!1,i=0;i<a.length;i++)if(a[i].sixw==e.sixw&&a[i].object==e.object){a[i]=e,t=!0;break}t||a.push(e)}})}i.setTags(e,a)},deactivate:function(){i&&i.deactivate()},activate:function(){i&&i.activate()},clearLocalFilter:function(){i&&i.clearLocalFilter()},getTaglistData:function(){return[{sixw:"ds6w:what/ds6w:status",modelField:"maturity",compareType:"AcontainsB"},{sixw:"ds6w:why/ds6w:fulfills/ds6w:severity",modelField:"severity",compareType:"String"},{sixw:"ds6w:who/ds6w:responsible",modelField:"responsible",compareType:"String"},{sixw:"ds6w:when/ds6w:ends/ds6w:dueDate",modelField:"dueDate",compareType:"date"}]},getTagsList:function(e){var t=[];return e&&e.forEach(function(e){t.push(e.sixw)}),o.getTaglistData().forEach(function(e){t.push(e.sixw)}),t},tagCompare:function(e,t,i){if(t&&e)if("String"==i){if(e==t)return!0}else if("AcontainsB"==i){if(e.contains(t))return!0}else if("BcontainsA"==i){if(t.contains(e))return!0}else if("Array"==i){if(t.indexOf(e)>-1)return!0}else if("date"==i)return a=t,o=n=e,n.length>7?o=new UWA.Date(n).strftime("%Y-%m-%d"):n.length>4&&(o=new UWA.Date(n).strftime("%Y-%m")),!!a.contains(o);var n,a,o;return!1},_uncolorize:function(){"tree"==n.coGridView.options.columns[0].dataIndex&&(n.coGridView.options.columns[0].getCellKPIColor=null,n.coGridView.coDatagrid.prepareUpdateView(),n.coGridView.coDatagrid.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0)),n.coGridView.tilesView&&(n.coGridView.tilesView.getColor=function(){},n.coGridView.tilesView.prepareUpdateView(),n.coGridView.tilesView.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0))},_colorize:function(e){var t=o.getTagsList().indexOf(e[0].predicate);if(t>=0){var i=o.getTaglistData()[t];"tree"==n.coGridView.options.columns[0].dataIndex&&(n.coGridView.options.columns[0].getCellKPIColor=function(t){for(var n=0;n<e.length;n++)if(o.tagCompare(e[n].object,t.nodeModel.options.grid[i.modelField],i.compareType))return e[n].color;return null},n.coGridView.caDatagrid.prepareUpdateView(),n.coGridView.caDatagrid.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0)),n.coGridView.tilesView&&(n.coGridView.tilesView.getColor=function(t){t.options.grid;for(var n=0;n<e.length;n++)if(o.tagCompare(e[n].object,t.options.grid[i.modelField],i.compareType))return e[n].color},n.coGridView.tilesView.prepareUpdateView(),n.coGridView.tilesView.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0))}}};return o}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersFeaturesUtil",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i){"use strict";var n={showRMBMenuOnGrid:function(e,t){return new Promise(function(a,o){var r="false",s={},l=i("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil"),c=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),d=c[0].options.grid.roles;s.currentObjType=c[0].options.grid.type;var u=0;c.length>1&&(r="true"),d.indexOf("Approver")>=0?(s.Approver="DISCONNECT",u++):s.Approver="CONNECT",d.indexOf("Coordinator")>=0?(s.Coordinator="DISCONNECT",u++):s.Coordinator="CONNECT",d.indexOf("Follower")>=0?(s.Follower="DISCONNECT",u++):s.Follower="CONNECT",d.indexOf("Assignee")>=0?(s.Assignee="DISCONNECT",u++):s.Assignee="CONNECT";var g=d.indexOf("Owner")>=0||d.indexOf("Originator")>=0;if(0==g&&1==u&&(s.showConfirmation=!0),"false"==r)i("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout");var p=[],h=t.cellInfos.nodeModel.options.grid.id,m=t.cellInfos.nodeModel.options.grid.type,C=t.cellInfos.nodeModel.options.grid.name,v=t.cellInfos.nodeModel.options.grid.displayType;"Group"==m&&(m="foaf:Group",C=t.cellInfos.nodeModel.options.grid.fullName,v=t.cellInfos.nodeModel.options.grid.type);var f={objectId:h,objectType:m,displayName:C,displayType:v,facetName:"dependency"};[].push(f);var b=i("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").openWith(f),w=[];w.push(b),Promise.all(w).then(function(i){"Person"==s.currentObjType&&((1!=l.isChangeCoordinatorConnected||1==l.isChangeCoordinatorConnected&&"DISCONNECT"==s.Coordinator)&&p.push(n.getChangeCoordinatorMenu(e,t,s)),p.push(n.getFollowerMenu(e,t,s)),p.push(n.getAssigneeMenu(e,t,s))),"Group"==s.currentObjType&&(p.push(n.getFollowerMenu(e,t,s)),p.push(n.getAssigneeMenu(e,t,s))),0==g&&p.push(n.getDeleteMenu(e,t,s)),i[0]&&p.push(i[0]),a(p)})})},getChangeCoordinatorMenu:function(e,i,n){var a={type:"CheckItem",title:t.CHG_Member_Menu_Change_Coordinator,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){console.log("Coordinator : "+n.Coordinator),n.role="Coordinator",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Coordinator&&(a.state="selected"),a},getFollowerMenu:function(e,i,n){var a={type:"CheckItem",title:t.CHG_Member_Menu_Follower,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){console.log("Follower : "+n.Follower),n.role="Follower",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Follower&&(a.state="selected"),a},getAssigneeMenu:function(e,i,n){var a={type:"CheckItem",title:t.CHG_Member_Menu_Assignee,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){console.log("Assignee : "+n.Assignee),n.role="Assignee",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Assignee&&(a.state="selected"),a},getDeleteMenu:function(e,i,n){return{type:"PushItem",title:t.CHG_Member_Menu_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){console.log("remove "),n.role=[],"DISCONNECT"==n.Follower&&n.role.push("Follower"),"DISCONNECT"==n.Approver&&n.role.push("Approver"),"DISCONNECT"==n.Coordinator&&n.role.push("Coordinator"),"DISCONNECT"==n.Assignee&&n.role.push("Assignee"),n.showConfirmation=!0,e.updatePersonRole(i.cellInfos,n)})}}}}};return n}),define("DS/ENOChgGovernanceUX/scripts/model/facets/issue/ChgIssueDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,a,o,r,s,l,c,d,u){"use strict";let g=u.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),p=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"CO_Issue",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",g)},loadIssueData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName;""==e.maturityNLS&&(e.maturityNLS=e.stateNLS);let a=e.maturityNLS;var o=this.getCustomTooltip(e);return new i({label:e.title,subLabel:n,description:a,grid:e,customTooltip:o,icons:[e.icon],thumbnail:e.thumbnail,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.parentCRId;var o=e[0].id,r={resolvedBy:[]};r.physicalId=o,r.resolvedBy.push({physicalId:a});let c=document.getElementById("outer-CO-issue-grid-div");"undefined"!=c&&null!=c&&d.mask(c),s.updateExistingIssue(o,r).then(function(e){s.getIssueDetails(o).then(function(n){let a=n.body;l.processedChangeRequestNewIssueList(a).then(function(n){p.prototype.addNodesInLayoutModel(t.treeDocument,n),i(e)}),d.unmask(c)})},function(e){d.unmask(c),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.parentCRId;var r=e[0].id,l={resolvedBy:[]};l.physicalId=r,l.resolvedBy.push({physicalId:a});let u=document.getElementById("outer-issue-grid-div");"undefined"!=u&&null!=u&&d.mask(u),s.removeExistingIssue(r,l).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);c.success(o.CHG_GOV_Issue_Remove_Success),d.unmask(u)},function(e){d.unmask(u),n()})})},addNodesInLayoutModel:function(e,t){let i=p.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,a;n=e,a=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;a(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return p}),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/group/ChgChangeGroupModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet"],function(e,t,i,n){"use strict";return e.extend({init:function(){},createTreeDocument:function(){return new t({})},loadData:function(e,t,i){e.prepareUpdate();for(var n=t.groups,a=0;a<n.length;a++){var o=this.createNode(n[a].title,n[a].id);i&&n[a].id==i.id||e.addRoot(o)}e.pushUpdate()},createNode:function(e,t){return new i({label:e,value:t})}})}),define("DS/ENOChgGovernanceUX/scripts/model/ChgCODataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,a,o,r,s,l){"use strict";var c=s.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new n,i=new t({id:"coSummary",dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",c)},loadIndexedChangeOrders:function(e,t){var a=e,o=new n;e.prepareUpdate();for(var r=0;r<t.length;r++){var s=this.createCustomNameField(t[r]);t[r].co_name=s;var l=this.createCustomSeverity(t[r]);t[r].sev=l;var c=this.createCustomChangeCoordinatorField(t[r]);t[r].co_Coordinator=c;var d=this.createCustomOwnerField(t[r]);t[r].co_Owner=d;for(var u=this.getStatusBarIcons(t[r]),g=this.statusbarIconsTooltips(t[r]),p=this.getSubLevel(t[r]),h=this.getDescription(t[r]),m=this.createCustomTooltip(t[r]),C=!1,v=a.getChildren(),f=0;f<v.length;f++){v[f].options.grid.id==t[r].id&&(C=!0)}if(!C){var b=i.createTreeNodeDataModel(o,{label:t[r].title,subLabel:p,description:h,grid:t[r],icons:[t[r].iconURL],thumbnail:t[r].thumbnail,statusbarIcons:u,statusbarIconsTooltips:g,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(b)}}e.pushUpdate()},loadChangeOrderData:function(e,t){var o=e,r=new n;e.prepareUpdate();for(var s=0;s<t.length;s++){var l=this.createCustomNameField(t[s],"NonIndex");t[s].co_name=l;var c=this.createCustomSeverity(t[s]);t[s].sev=c;var d=this.createCustomChangeCoordinatorField(t[s]);t[s].co_Coordinator=d;var u=this.createCustomOwnerField(t[s]);t[s].co_Owner=u;for(var g=this.getStatusBarIcons(t[s],"NonIndex"),p=this.statusbarIconsTooltips(t[s],"NonIndex"),h=this.getSubLevel(t[s]),m=this.getDescription(t[s]),C=this.createCustomTooltip(t[s]),v=!1,f=(a.getGlobalVariable().existingCOIds,v=!1,o.getChildren()),b=0;b<f.length;b++){f[b].options.grid.id==t[s].id&&(v=!0)}if(!v){var w=i.createTreeNodeDataModel(r,{label:t[s].title,subLabel:h,description:m,grid:t[s],icons:[t[s].iconURL],thumbnail:t[s].thumbnail,statusbarIcons:g,statusbarIconsTooltips:p,customTooltip:C,contextualMenu:["Copy1","Move1"]});e.addChild(w,0)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"coSummaryNotEmpty"}),e.unselectAll();var a=new n,o=this.createCustomNameField(t[0]);t[0].co_name=o;var r=this.createCustomSeverity(t[0]);t[0].sev=r;var s=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=s;var l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;var c=this.getStatusBarIcons(t[0]),d=this.statusbarIconsTooltips(t[0]),u=this.getSubLevel(t[0]),g=this.getDescription(t[0]),p=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(a,{label:t[0].title,subLabel:u,description:g,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:c,statusbarIconsTooltips:d,customTooltip:p});e.addChild(h,0),e.getXSO().add(h)},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){var a=new UWA.Element("div",{class:"gridIconContainer",title:o.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(a),a.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:o.CHG_TOOLTIP_NEW_ORDER});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{var l=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}s.inject(o);var c=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),c.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){var t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){var i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",o=a.getGlobalVariable().computeSwymUrl(n),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:o});else{var l=r.getAvatarDetails(e.changeCoordinatorFullName);(s=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}s.inject(i);var c=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),c.inject(t)}return t.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var a=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),a.inject(i),i.outerHTML},createCustomMaturity:function(e){var t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");var i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){var i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){var i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(o.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(o.CHG_TOOLTIP_NEW_ORDER),i},createCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){return e.name+" | "+e.ownerFullName},getDescription:function(e){return e.maturityNLS},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMemberFilterView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"teamfilter",tagName:"div",className:"chg-member-view",setup:function(){this.template='                                                <div class="'+this.getClassNames("-role-filter")+'">                                                    <table class="filter-table table">                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByName+'</td>                                                            <td>                                                                <div class="filter-input">                                                                    <input type="text" placeholder="'+t.CHG_Member_SearchMembers_PlaceHolder+'" class="form-control form-control-root filtertext">                                                                    <div class="clear-filter fonticon fonticon-cancel-circled"></div>                                                                </div>                                                            </td>                                                        </tr>                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByResponsibilities+'</td>                                                            <td class="chg-member-view-filter toggle-primary">                                                                <div class="toggle-container toggle-filter-view">                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="allToggle" class="roleFilter" checked>                                                                        <label class="control-label" for="allToggle" style="color: gray;">'+t.CHG_Member_Filter_All+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="originatorToggle" class="roleFilter">                                                                        <label class="control-label" for="originatorToggle" style="color: gray;">'+t.CHG_Member_Filter_Originator+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="revMemToggle" class="roleFilter">                                                                        <label class="control-label" for="revMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Approvers+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="followMemToggle" class="roleFilter">                                                                        <label class="control-label" for="followMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Followers+"</label>                                                                    </div>                                                                </div>                                                            </td>                                                        </tr>                                                    </table>                                                </div>",this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view-role-filter",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"keyup .filtertext":function(e){var t=e.target.value,i=this.container.getElement(".clear-filter");t.length>0?i.setStyle("visibility","visible"):i.setStyle("visibility","hidden"),this.dispatchEvent("memberFilterKeyUp",arguments)},"click .clear-filter":function(e){this.container.getElement(".clear-filter").setStyle("visibility","hidden");var t=this.container.getElement(".filtertext");if(t){t.value=""}this.dispatchEvent("memberFilterKeyUp",{target:{value:""}})},"focus .filtertext":function(){var e=document.getElementsByClassName("searchfiler-input-container");e.addClassName("highlighted-border"),e.removeClassName("border-without-focus")},"click .roleFilter":function(){this.dispatchEvent("memberRoleFilter",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";var h=g.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"crOrchestration",useAsyncPreExpand:!0});return e.onPreExpand(function(e){var t=e.target.options.grid.id;if(console.log("call for children"+e.target),t){let i=!0;s.getChangeOrchestration(t,i).then(function(t){l.processCRChangeOrchestration(t).then(function(t){var i=m.prototype.createTreeDocumentNodeModel(t);if(e.target.hasChildren())for(var n=!1,a=e.target.getChildren(),o=0;o<i.length;o++){n=!1;for(var r=0;r<a.length;r++)if(a[r].options.grid.id==i[o].options.grid.id){n=!0;break}n||e.target.addChild(i[r])}else e.target.addChild(i);e.target.preExpandDone()})},function(e){return Promise.reject(e)})}}),e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},loadChangeOrchestrationData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),a.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&u.isMasked(e)&&u.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomNameField(e);e.chgObjName=t;var n=this.createCustomSeverity(e);e.sev=n;var o=this.createCustomChangeCoordinatorField(e);e.chgObjCoordinator=o;var r=this.createCustomOwnerField(e);e.chgObjOwner=r;var s,l=e.name+" | "+e.ownerFullName,c=e.maturityNLS,d=this.getStatusBarIcons(e),u=this.statusbarIconsTooltips(e),g=this.getCustomTooltip(e);return s=a.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:s,subLabel:l,description:c,children:e.isKindOfChangeAction?null:[],grid:e,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],statusbarIcons:d,statusbarIconsTooltips:u,customTooltip:g,useAsyncPreExpand:!0})},createCustomNameField:function(e){var t=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(t);var i=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.ecm_change_on_hold){var n=new UWA.Element("div",{class:"gridIconContainer",title:o.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(n),n.inject(i)}return i.inject(t),t.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var a=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),a.inject(i),i.outerHTML},createCustomChangeCoordinatorField:function(e){var t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){var i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",o=a.getGlobalVariable().computeSwymUrl(n),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:o});else{var l=r.getAvatarDetails(e.changeCoordinatorFullName);(s=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}s.inject(i);var c=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),c.inject(t)}return t.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{var l=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}s.inject(o);var c=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),c.inject(n),n.outerHTML},getStatusBarIcons:function(e){var t=[];return"Low"==e.severity?t.push("level-low"):"Medium"==e.severity?t.push("level-medium"):"High"==e.severity&&t.push("level-high"),"TRUE"==e.ecm_change_on_hold&&t.push("pause"),t},statusbarIconsTooltips:function(e){var t=[];return t.push(e.severityNLS),"TRUE"==e.ecm_change_on_hold&&t.push(o.CHG_GOV_TOOLTIP_HOLD),t},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},updateNodeIndexed:function(e,t){console.log(t)},addNewChildren:function(e){var t=this;let i="Change Request";if(this.treeDocument.getSelectedNodes().length>1)d.error(o.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else{this.treeDocument.getSelectedNodes().length?(this.treeDocument.getSelectedNodes()[0].options.grid.id,i="Change Order"):this.contextID;var n=document.getElementById("outer-orchestration-grid-div");"undefined"!=n&&null!=n&&u.mask(n),"Change Order"==e.type?s.getChangeOrderInfo(e.objectID).then(function(e){l.processedChangeOrchestrationSummaryList(e).then(function(e){m.prototype.addNodesInLayoutModel(t.treeDocument,e,!0),u.unmask(n)})},function(e){u.unmask(n)}):"Change Action"==e.type&&s.getNewCADetails(e.objectID).then(function(e){var t=l.processChangeActionInContext(e).processData;console.log(t),require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],function(e){e.addNodesInLayout(t),u.unmask(n)})},function(e){u.unmask(n)})}},addExistingChildren:function(e){var t,i=this;let n="Change Request";if(this.treeDocument.getSelectedNodes().length>1)d.error(o.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else{this.treeDocument.getSelectedNodes().length?(t=this.treeDocument.getSelectedNodes()[0].options.grid.id,n="Change Order"):t=this.contextID;var a=document.getElementById("outer-orchestration-grid-div");"undefined"!=a&&null!=a&&u.mask(a),s.addExistingInCRChangeOrchestration(t,n,e).then(function(e){l.processCRChangeOrchestration(e).then(function(e){m.prototype.addNodesInLayoutModel(i.treeDocument,e),u.unmask(a)})},function(e){u.unmask(a)})}},addNodesInLayoutModel:function(e,t,i=!1){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var n,a,o=m.prototype.createTreeDocumentNodeModel(t);if(e.getSelectedNodes().length?(n=!1,a=e.getSelectedNodes()[0]):n=!0,n){if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(o);else for(var r=o.length-1;r>=0;r--)e.addRoot(o[r],0);if(e.pushUpdate(),i)try{let e=p("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var s=t[0];e.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:s,View:"Change Orchestration"})}catch(e){console.log(e)}}else if(null==a.getChildren())e.addRoot(o,0);else{if(a.prepareUpdate(),0==a.getChildren().length)a.addChild(o);else for(r=o.length-1;r>=0;r--)a.addChild(o[r],0);a.pushUpdate(),a.isExpanded()||a.expand()}},removeChildren:function(){var e=this,t=e.treeDocument.getSelectedNodes();if(t.length){let g="Change Order";var i,n,r=t[0].getParent().options.grid.id;void 0===r?(i=e.contextID,g="Change Request",n=!0):(i=r,n=!1);var l=[];l.push({id:t[0].options.grid.id,type:t[0].options.grid.type});for(var c=0;c<t.length;c++)if("ChangeAction"===t[c].options.grid.isKindOfType){if(d.error(o.CHG_GOV_ChangeOrchestration_CA_Not_Removed),a.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&u.isMasked(e)&&u.unmask(e)}return}for(c=1;c<t.length;c++){if(r!==t[c].getParent().options.grid.id){if(d.error(o.CHG_GOV_ChangeOrchestration_Toolbar_Invalid_Selection),a.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&u.isMasked(e)&&u.unmask(e)}return}l.push({id:t[c].options.grid.id,type:t[c].options.grid.type})}s.removeInCRChangeOrchestration(i,g,l).then(function(i){if(n){for(var r=0;r<t.length;r++)e.treeDocument.removeRoot(t[r]);0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"})}else{var s=t[0].getParent();s.prepareUpdate();for(r=0;r<t.length;r++)s.removeChild(t[r]);s.pushUpdate()}if(a.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&u.isMasked(e)&&u.unmask(e)}d.success(o.CHG_GOV_ChangeOrchestration_Toolbar_Remove_Success)},function(e){if(a.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&u.isMasked(e)&&u.unmask(e)}})}else d.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,a;n=e,a=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;a(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return m}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAAddMemberView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"chg-add-member",tagName:"div",className:"chg-add-member",setup:function(){this.template='                                                <div class="'+this.getClassNames("-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-body")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table class="add-member-table table">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-assignee")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Assignee+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-assignee-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-assignee-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search assignee-field-search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-approver")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Approver+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-approver-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-approver-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search approver-field-search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-informed-user")+' " >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Follower+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-informed-user-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-informed-user-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search informed-user-field-search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-button")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t</div>                                                </div>',this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"click .assignee-field-search":function(){this.dispatchEvent("searchAssignee",arguments)},"click .approver-field-search":function(){this.dispatchEvent("searchApprover",arguments)},"click .informed-user-field-search":function(){this.dispatchEvent("searchInformedUser",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t){var i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"PushItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"PushItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(i){var n=i.accessBits;const a="true"==(n=t.processAccessBitIA(n)).AddAssignee,o="true"==n.RemoveAssignee;return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Contributors_Toolbar_AddContributor,position:"far",visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Contributors_Toolbar_RemoveContributor,position:"far",visibleFlag:o,disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout",func:"removeHandler"}}}]}},i}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesView",["DS/ENOChangeActionUX/scripts/Views/CARealizedView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a){"use strict";return{createRealizedChangesView:function(n){var o={};o=UWA.merge(o,n),this._modelEvents=o.contextDetails._modelEvents,this.id=o.id;var r="pid:"+o.id;let s=o.contextDetails.title;var l="";let c={caModel:{id:r,name:o.contextDetails.name,title:s,description:o.contextDetails.description,severity:o.contextDetails.severity,maturity:o.contextDetails.maturity,invokedFrom:"gov",isSelected:o.isSelected}},d=o.target,u=new(new e(c).buildRealizedView());u.container=d,t.getChangeActionUserAccess(o.id).then(function(e){l=e.data[0],l=i.processAccessBitCA(l),u.model={id:r,name:o.contextDetails.name,title:s,description:o.contextDetails.description,severity:o.contextDetails.severity,maturity:o.contextDetails.maturity,invokedFrom:"gov",isSelected:o.isSelected,get:function(e){return"userAccess"==e?l:"id"==e?r:"synopsis"===e?s:void 0},fetch:function(e){console.log("dummy fetch called...!"),e.onComplete(),a.publish("load-dependency"+widget.id,r)}},d.addContent(u.render())})}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeAction/ChgChangeActionDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask"],function(e,t,i,n,a,o,r,s,l,c,d,u){"use strict";let g=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},loadCAData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName;""==e.maturityNLS&&(e.maturityNLS=e.stateNLS);let a=e.maturityNLS;var o=this.getCustomTooltip(e);return new i({label:e.title,subLabel:n,description:a,grid:e,customTooltip:o,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addNewChildren:function(e){if("Change Action"==e.type){var t=document.getElementById("outer-CA-grid-div");"undefined"!=t&&null!=t&&u.mask(t),s.getNewCADetails(e.objectID).then(function(e){var i=l.processChangeActionInContext(e).processData;console.log(i),c.getUserFullName(i[0].owner).then(function(e){i[0].ownerFullName=e.userDisplayName.userInfo[i[0].owner].userDisplayName,require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout"],function(e){e.addNodesInLayout(i),u.unmask(t)})})},function(e){u.unmask(t)})}},removeExistingChildren:function(e){},addNodesInLayoutModel:function(e,t){let i=g.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()}});return g}),define("DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/EditPropWidget/constants/EditPropConstants","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o){"use strict";return{hideFacet:function(e){for(var i=0;i<e.elements.container._lFacets.length;i++){var n=e.elements.container._lFacets[i];n.facet.name!=t.FACET_PROPERTIES&&(n.alwaysVisible=!1)}},addAllFacet:function(i,n){var a=[];a.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/applicability/ChgApplicabilityfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Applicability",icon:"evolution-effectivity",text:e.CHG_GOV_Header_Applicability},options:{}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/dependency/ChgDependencyfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Dependency",icon:"dependencies",text:e.CHG_GOV_Header_Dependency},options:{}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopefacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CO_RelatedScope",icon:"object-related-cog",text:e.CHG_GOV_Header_RelatedScope},options:{data:n}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssuefacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Issue",icon:"issue",text:e.CHG_GOV_Header_Issue},options:{data:n}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRRelatedScopefacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CR_RelatedScope",icon:"object-related-cog",text:e.CHG_GOV_Header_RelatedScope},options:{data:n}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/decision/ChgDecisionfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Decision",icon:"text-quote",text:e.CHG_GOV_Header_Decision},options:{}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactBasis",icon:"change-request-alert",text:e.CHG_GOV_DataGrid_Column_ImpactBasis},options:{data:n}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgImpactedItemfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactItem",icon:"change-request-impacted-items",text:e.CHG_GOV_DataGrid_Column_ImpactedItem},options:{data:n}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ChangeAction",icon:"change-action",text:e.CHG_GOV_DataGrid_Column_IA_CA},options:{data:n}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgContributorfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_Assignee",icon:"users",text:e.CHG_GOV_DataGrid_Column_Contributors},options:{data:n}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CA_Context",icon:"3d-object",text:e.CHG_GOV_Header_Contexts},options:{}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/attachment/ChgAttachmentfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Attachment",icon:"attach",text:e.CHG_GOV_Header_Attachments},options:{}}),a.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CA_Flowdown",icon:"flow-down",text:e.CHG_GOV_Header_Flowdown},options:{}}),a.push(t.FACET_RELATIONS),a.push(t.FACET_SWYMCOMMENTS),i.addFacets(a)},getUpdateIMpactAnalysisFacet:function(e){var t=this;return new Promise(function(r,s){1==e.length?n.getImpactAnalysisUserAccess(e[0].physicalId).then(function(t){var n=t.data[0].dataelements;n=a.processAccessBitIA(n),e[0].accessBits=n;var s={id:t.data[0].id,type:t.data[0].type,accessBits:n};i.getGlobalVariable().IAAccessBitsData={widgetID:widget.id,iaID:t.data[0].id,type:t.data[0].type,accessBits:n},o.publish("CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",s),r(s)}):r(t.getImpactAnalysisFacets(e))})},getImpactAnalysisFacets:function(t){return[{require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactBasis",icon:"change-request-alert",text:e.CHG_GOV_DataGrid_Column_ImpactBasis},options:{data:t},actions:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",func:"onTabClickAction"}},{require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgImpactedItemfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactItem",icon:"change-request-impacted-items",text:e.CHG_GOV_DataGrid_Column_ImpactedItem},options:{data:t}},{require:"DS/ENOChgGovernanceUX/scripts/view/facets/attachment/ChgAttachmentfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Attachment",icon:"attach",text:e.CHG_GOV_Header_Attachments},options:{}},{require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgContributorfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_Assignee",icon:"users",text:e.CHG_GOV_DataGrid_Column_Contributors},options:{data:t}}]},updateFacetOnSelection:function(e,t,i){"ChangeOrder"==e&&this.getChangeOrderTab(t,i),"ChangeAction"==e&&this.getChangeActionTab(t,i),"ChangeRequest"==e&&this.getChangeRequestTab(t,i),"ChangeAnalysis"==e&&this.getImpactAnalysisTab(t,i),null==e&&this.hideFacet(i)},getChangeRequestTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"CR_RelatedScope"==n.facet.name&&(n.alwaysVisible=!0),"Issue"==n.facet.name&&(n.alwaysVisible=!0),"Decision"==n.facet.name&&(n.alwaysVisible=!0),"Applicability"==n.facet.name&&(n.alwaysVisible=!0)}},getChangeOrderTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"Dependency"==n.facet.name&&(n.alwaysVisible=!0),"Applicability"==n.facet.name&&(n.alwaysVisible=!0),"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"CO_RelatedScope"==n.facet.name&&(n.alwaysVisible=!0),"Issue"==n.facet.name&&(n.alwaysVisible=!0),"Decision"==n.facet.name&&(n.alwaysVisible=!0)}},getChangeActionTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"Dependency"==n.facet.name&&(n.alwaysVisible=!0),"Applicability"==n.facet.name&&(n.alwaysVisible=!0),"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"CA_Context"==n.facet.name&&(n.alwaysVisible=!0),"CA_Flowdown"==n.facet.name&&(n.alwaysVisible=!0),"Issue"==n.facet.name&&(n.alwaysVisible=!0),"Decision"==n.facet.name&&(n.alwaysVisible=!0)}},getImpactAnalysisTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"IA_ImpactBasis"==n.facet.name&&(n.alwaysVisible=!0),"IA_ImpactItem"==n.facet.name&&(n.alwaysVisible=!0),"IA_Assignee"==n.facet.name&&(n.alwaysVisible=!0),"IA_ChangeAction"==n.facet.name&&(n.alwaysVisible=!0),"Attachment"==n.facet.name&&(n.alwaysVisible=!0)}}}}),define("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceSlideIn",["UWA/Class/View","UWA/Core"],function(e,t){"use strict";return e.extend({init:function(e,t,i){this.slideinContainer=e,this.parentContainer=t,this.content=i,this._parent.call(this)},setup:function(){this.layoutResizer=new UWA.createElement("div",{id:"layout-resizer-div",class:"layout-resizer"})},render:function(){return this},buildSlideIn:function(){const e=UWA.createElement("div",{id:"slideInContent"});this.getHeaderCommand().inject(e),this.getBody().inject(e),e.inject(this.slideinContainer),e.set({events:{touchmove:function(e){e.stopPropagation()}}}),this._handlerKeyUp=function(e){27==e.which&&that.hideSlideIn()},UWA.extendElement(document).addEvent("keyup",this._handlerKeyUp)},getHeaderCommand:function(){const e=UWA.createElement("div",{id:"slideInHeaderCommand",styles:{padding:"2px 14px",position:"absolute","z-index":"1",right:"0px"}});return UWA.createElement("span",{class:"close fonticon fonticon-cancel cursorPointer",title:"Close"}).inject(e).addEvent("click",this.onCloseButtonClick.bind(this)),e},onCloseButtonClick:function(){this.hideSlideIn()},getBody:function(){const e=UWA.createElement("div",{id:"slideInBody"});return"string"==typeof this.content?e.innerHTML=this.content:this.content instanceof HTMLElement?e.appendChild(this.content):void 0!==this.content.render&&this.content.render().inject(e),e},showSlideIn:function(){if(UWA.is(this.slideinContainer)){this.resizerContainer&&(this.resizerContainer.style.display="block"),window.matchMedia("(max-width: 768px)").matches?(this.slideinContainer.style.width="100%",this.resizerContainer&&(this.resizerContainer.style.right="100%")):(this.slideinContainer.style.width="600px",this.resizerContainer&&(this.resizerContainer.style.right="600px"),this.slideinContainer.style.minWidth="250px",this.slideinContainer.style.borderLeftWidth="1px")}},hideSlideIn:function(){if(UWA.is(this.slideinContainer)){this.slideinContainer.style.width="0",this.slideinContainer.style.minWidth="0",this.resizerContainer&&(this.resizerContainer.style.right="0px",this.resizerContainer.style.display="none"),this.slideinContainer.style.borderLeftWidth="0";this.parentContainer.setStyle("width","calc( 100% - 0px )"),this.destroy()}},destroy:function(){}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddContexts,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveContexts,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require"],function(e,t,i,n,a,o,r){"use strict";var s={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const a=[];let o=!1;const l=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();l.length>1&&(o=!0);const c=l.map(e=>e.options.grid.id),d=(l.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),r("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),u={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"},g=d.openWith(u);o?(a.push(n.createPropertyPushItem(c)),a.push(s.getRelationalExplorerMenu(c)),a.push(s.getMaturityMenu(e)),a.push(s.getTransferMenu(e)),t(a)):(a.push(n.createPropertyPushItem(c)),a.push(s.getRelationalExplorerMenu(c)),g.then(i=>{i&&a.push(i),a.push(s.getMaturityMenu(e)),a.push(s.getTransferMenu(e)),t(a)}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getMaturityMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){e.cellInfos.nodeModel.options.grid;for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],o=[],r=0;r<n.length;r++)a.push(n[r].options.grid),o.push({physicalid:n[r].options.grid["@id"]||n[r].options.grid.id});new i({context:a,ID:"MaturityHdr"}).executeAsync(o)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return s}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){let i=Object.create(null);return i.toolbar=null,i.sortingData={menu:[{type:"PushItem",title:e.CHG_GOV_DataGrid_Column_Severity,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"sortBySeverity"}},{type:"PushItem",title:e.CHG_GOV_DataGrid_Column_Maturity,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"sortByMaturity"}}]},i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCATileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveCA,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"filterView",argument:{filter:"activeCA"}},tooltip:e.CHG_Filter_ActiveCA_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveCA,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"filterView",argument:{filter:"inactiveCA"}},tooltip:e.CHG_Filter_InactiveCA_Def}]},i.writetoolbarDefination=function(){let i={entries:[{id:"filter",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"},{id:"sorting",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"sorting",fontIconFamily:1},value:this.sortingData},position:"far",tooltip:e.CHG_TOOLTIP_SORT,category:"View"}]};var n={id:"creategroup",className:"menuCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"group-add",fontIconFamily:1},position:"far",tooltip:e.CHG_TOOLTIP_CREATE_GROUP,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"assignGroupToCAs"}},category:"View"};let a="true";return"false"==t.getGlobalVariable().isFullLicence&&(a="false"),"true"===t.getGlobalVariable().CHG_CHANGE_GROUP&&"true"==a&&i.entries.unshift(n),i},i}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";var h=g.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"craffectedItems",useAsyncPreExpand:!0});return e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},loadAffectedItemsData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),a.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&u.isMasked(e)&&u.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=e.name+" | "+e.typeNLS;var n,o=e.maturityNLS,r=this.getCustomTooltip(e);return n=a.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:n,subLabel:t,description:o,grid:e,icons:[e.icon],thumbnail:e.thumbnail,customTooltip:r,contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addExistingChildren:function(e){var t=this,i=this.contextID,n=document.getElementById("outer-affectedItems-grid-div");"undefined"!=n&&null!=n&&u.mask(n),s.addExistingInCRAffectedItems(i,e).then(function(e){l.processCRAffectedItems(e).then(function(e){m.prototype.addNodesInLayoutModel(t.treeDocument,e),u.unmask(n)})},function(e){u.unmask(n)})},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var i=m.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(var n=i.length-1;n>=0;n--)e.addRoot(i[n],0);e.pushUpdate()},removeChildren:function(){var e=this,t=this.treeDocument.getSelectedNodes();if(t.length){for(var i=[],n=0;n<t.length;n++)i.push({id:t[n].options.grid.id,updateAction:"DISCONNECT"});var r=this.contextID;s.removeCRAffectedItems(r,i).then(function(i){for(var n=0;n<t.length;n++)e.treeDocument.removeRoot(t[n]);if(a.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&u.isMasked(e)&&u.unmask(e)}0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"}),d.success(o.CHG_GOV_AffectedItems_Remove)},function(e){if(a.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&u.isMasked(e)&&u.unmask(e)}})}else d.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return m}),define("DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields",["UWA/Core","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";return{createCustomNameField:function(t){var n=new e.Element("div",{});e.createElement("span",{html:t.name}).inject(n);var a=new e.Element("div",{class:"iconsDiv"});if("true"==t.onHold){var o=new e.Element("div",{class:"gridIconContainer",title:i.CHG_GOV_TOOLTIP_HOLD});e.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(a)}return a.inject(n),n.outerHTML},createCustomSeverity:function(t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==t.severity?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==t.severity&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new e.Element("div",{}),a=new e.Element("div",{class:"gridIconContainer"});e.createElement("div",{class:i}).inject(a);var o=e.createElement("span",{html:t.severityNLS});return a.inject(n),o.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(i){var a=new e.Element("div",{class:"members"});if(""!=i.changeCoordinatorFullName){var o=new e.Element("div",{class:"assignee"}),r="/api/user/getpicture/login/"+i.changeCoordinator+"/format/normal",s=t.getGlobalVariable().computeSwymUrl(r),l="";if(t.getGlobalVariable().isSwymInstalled)l=e.createElement("img",{class:"userIcon",src:s});else{var c=n.getAvatarDetails(i.changeCoordinatorFullName);(l=e.createElement("div",{html:c.avatarStr,class:"avatarIcon"})).style.setProperty("background",c.avatarColor)}l.inject(o);var d=e.createElement("span",{class:"userName",html:i.changeCoordinatorFullName});o.inject(a),d.inject(a)}return a.outerHTML},createCustomOwnerField:function(i){var a="/api/user/getpicture/login/"+i.owner+"/format/normal",o=t.getGlobalVariable().computeSwymUrl(a),r=new e.Element("div",{class:"members"}),s=new e.Element("div",{class:"assignee"}),l="";if(t.getGlobalVariable().isSwymInstalled)l=e.createElement("img",{class:"userIcon",src:o});else{var c=n.getAvatarDetails(i.ownerFullName);(l=e.createElement("div",{html:c.avatarStr,class:"avatarIcon"})).style.setProperty("background",c.avatarColor)}l.inject(s);var d=e.createElement("span",{class:"userName",html:i.ownerFullName});return s.inject(r),d.inject(r),r.outerHTML},getStatusBarIcons:function(e){var t=[];return"Low"==e.severity?t.push("level-low"):"Medium"==e.severity?t.push("level-medium"):"High"==e.severity&&t.push("level-high"),"true"==e.onHold&&t.push("pause"),t},statusbarIconsTooltips:function(e){var t=[];return t.push(e.severityNLS),"true"==e.onHold&&t.push(i.CHG_GOV_TOOLTIP_HOLD),t},getCustomTooltip:function(e){return i.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+i.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+i.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+i.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+i.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS}}}),define("DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig",[],function(){"use strict";var e={LEFT_PANEL_SIZE_EXPANDED:300,LEFT_PANEL_SIZE_COLLAPSED:40,MOBILE_CUTOFF:500,TABLET_CUTOFF:768,MOBILE_BREAKPOINT:500,PATH_HOME:"/home",PATH_LANDING_PAGE:"LandingPage",PATH_CO_INFO:"COInfo",PATH_CO_DETAILS:"CODetails",PATH_CA_INFO:"CAInfo",PATH_CA_DETAILS:"CADetails",PATH_CR_INFO:"CRInfo",PATH_CR_DETAILS:"CRDetails",PATH_CR_ORCHESTRATION_LEVEL1:"CROrchestrationL1",PATH_CR_ORCHESTRATION_LEVEL2:"CROrchestrationL2",PATH_CR_ORCHESTRATION_LEVEL3:"CROrchestrationL3",PATH_CO_ORCHESTRATION_LEVEL1:"COOrchestrationL1",PATH_CO_ORCHESTRATION_LEVEL2:"COOrchestrationL2",PATH_CO_ORCHESTRATION_LEVEL3:"COOrchestrationL3",PATH_NEW_CHANGE_ORDER:"NewChangeOrder",PATH_NEW_CHANGE_REQUEST:"NewChangeRequest",PATH_NEW_CHANGE_ACTION:"NewChangeAction",PATH_OPEN_CHANGE_ORDER:"OpenChangeOrder",PATH_OPEN_CHANGE_REQUEST:"OpenChangeRequest",PATH_RECENTY_OPENED:"RecentlyOpened",PATH_MY_CHANGE_ORDERS:"MyChangeOrders",PATH_MY_CHANGE_REQUESTS:"MyChangeRequests",PATH_MY_CHANGE_ACTIONS:"MyChangeActions",PATH_CO_IDCard:"Change Order ID Card",ROUTE_HOME:"home",ROUTE_LANDING_PAGE:"home.LandingPage",ROUTE_CO_INFO:"home.COInfo",ROUTE_CR_INFO:"home.CRInfo",ROUTE_CA_INFO:"home.CAInfo",ROUTE_CO_DETAILS:"home.COInfo.CODetails",ROUTE_CR_DETAILS:"home.CRInfo.CRDetails",ROUTE_CA_DETAILS:"home.CAInfo.CADetails",ROUTE_CR_ORCHESTRATION_LEVEL1:"home.CRInfo.CRDetails.OrchestrationL1",ROUTE_CR_ORCHESTRATION_LEVEL2:"home.CRInfo.CRDetails.OrchestrationL1.OrchestrationL2",ROUTE_CR_ORCHESTRATION_LEVEL3:"home.CRInfo.CRDetails.OrchestrationL1.OrchestrationL2.OrchestrationL3",ROUTE_CO_ORCHESTRATION_LEVEL1:"home.COInfo.CODetails.OrchestrationL1",ROUTE_CO_ORCHESTRATION_LEVEL2:"home.COInfo.CODetails.OrchestrationL1.OrchestrationL2",ROUTE_CO_ORCHESTRATION_LEVEL3:"home.COInfo.CODetails.OrchestrationL1.OrchestrationL2.OrchestrationL3",ROUTE_RECENTY_OPENED:"home.RecentlyOpened",ROUTE_MY_CHANGE_ORDERS:"home.MyChangeOrders",ROUTE_MY_CHANGE_REQUESTS:"home.MyChangeRequests",ROUTE_MY_CHANGE_ACTIONS:"home.MyChangeActions"};return e}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){var t=Object.create(null);return t.toolbar=null,t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_AddMember,position:"far",category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgAddMemberLayout",func:"launchAddMemberPanel"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Remove,position:"far",disabled:!0,category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout",func:"removeHandler"}}},{id:"filter",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"filter",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Filter,position:"far",category:"View",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMemberFilterLayout",func:"launchFilterMemberPanel"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter",["UWA/Class","UWA/Class/Promise","UWA/Core","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n){"use strict";return{_initializationPromiseBIFilter:null,_isBIFilterInitialized:!1,_biFilter:null,_currentView:"",_inputDocument:null,_isBIFilterActivated:!1,initializeBIFilter:function(e){this._inputDocument=e,this._cleanBIFilterProxy(),this._initializationPromiseBIFilter=this._createBIFilterProxy(),this._isBIFilterActivated=!0},cleanPathTag:function(){if(!0===this._isBIFilterInitialized){this._biFilter.setPathTags({nodes:[],paths:[]})}},_createBIFilterProxy:function(){var e=this;return new t(function(t,i){require(["DS/ENOFilterBIUX/FilterBIComponentProxy","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(n,a){var o=widget.id,r={tenant:a.getGlobalVariable().tenant,processingMode:"appProcessing",colorize:!0,widgetId:o,appId:widget.getValue("appId"),isWebInWin:a.getGlobalVariable().isNative,platformServices:a.getGlobalVariable().tenantMappings};1==a.getGlobalVariable().is3DSpace&&(r.contextId="context1");try{e._biFilter=new n(r),e._biFilter.addEvent("fetchFilterBIColorizeEvent",e._onFilterBIColorize,e),e._biFilter.addEvent("FilterBIUnColorize",e._onFilterBIUnColorize,e),e._biFilter.addEvent("fetchFilterBIFilteringEvent",e._onFilterBIFilteringEvent,e)}catch(e){i(new Error("The BIFilter proxy could not be initialized: "+e))}e._isBIFilterInitialized=!0,t()})})},focusOnSubjects:function(e){var t=this._biFilter;if(t&&t._biFilter){if(0===e.length)return void t._biFilter.unfocus();for(var i={},n=[],a=0;a<e.length;a++)i[e[a].options.physicalId]="3DSpace",n.push("pid://"+e[a].options.physicalId);t._biFilter.myTagProxy.focusOnSubjects(n,!0,i)}},_onSetPathTags:function(e,t){var i;if((i=this)._inputDocument=t,!1!==(i=this)._isBIFilterInitialized){var n={nodes:[],paths:[]};if(e&&e.data)e.data.roots.map(e=>{let t=e.options.grid.id;n.nodes.push(t)});i._biFilter.setTagsWithFetchSynthesis(n.nodes,function(){widget.dispatchEvent("onSetPathTags")})}else i._initializationPromiseBIFilter.then(function(){i._onSetPathTags(e,t)})},_onSetPathTagsForProposedRealized:function(e,t){var i;(i=this)._inputDocument=t,!1!==(i=this)._isBIFilterInitialized?i._biFilter.setTagsWithFetchSynthesis(e,function(){widget.dispatchEvent("onSetPathTags")}):i._initializationPromiseBIFilter.then(function(){i._biFilter.setTagsWithFetchSynthesis(e,function(){widget.dispatchEvent("onSetPathTags")})})},_cleanBIFilterProxy:function(){this._biFilter&&this._biFilter.cleanProxy&&this._biFilter.cleanProxy()},_activate:function(){this._biFilter&&this._biFilter.cleanProxy&&this._biFilter.activate()},_deactivate:function(){this._biFilter&&this._biFilter.cleanProxy&&this._biFilter.deactivate()},_taggerWebInWinEvent:function(e){this._biFilter&&this._biFilter.taggerWebInWinEvent&&this._biFilter.taggerWebInWinEvent(e)},_onFilterBIFilteringEvent:function(e){n.publish(`${this._inputDocument.options.id} of ${widget.id}`,e),e&&i.is(e.localfilters,"object")&&Object.keys(e.localfilters).length>0?widget.setValue("pathTags",e.localfilters):widget.deleteValue("pathTags")},_onFilterBIColorize:function(e,t,i){n.publish(`${this._inputDocument.options.id} colorize ${widget.id}`,e)},_onFilterBIUnColorize:function(e){n.publish(`${this._inputDocument.options.id} uncolorize ${widget.id}`,e)}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/applicability/ChgApplicabilityfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,a,o){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"applicability-container"}))},updateFacet:function(){var e=this;a.mask(this.elements.container),require(["DS/ENOChgGovernanceUX/scripts/components/applicabilityView/ChgApplicabilityView"],function(t){if(e.elements&&e.elements.container){var i=e.getModel();if(!i)return!1;if(1==i.isMergedModel())return;var n={model:i,container:e.elements.container};e.elements.container.setContent(""),new t(n).build(),a.unmask(e.elements.container)}})},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovCRTagNavigatorProxy",["DS/TagNavigatorProxy/TagNavigatorProxy","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){"use strict";var i=null,n=null,a=[],o={init:function(a){var r={widgetId:widget.id,filteringMode:"FilteringOnServer",colorize:!0};i&&i.die(),n=a.DataContext,(i=e.createProxy(r)).addOpenTaggerListener(function(){require(["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS"],function(e,t,i){var n={level:"info",title:i.WARNING_TAGGER_INFO,subtitle:i.WARNING_TAGGER,sticky:!1};window.notif=e,t.removeLastNotificationDisplayed(),t.setNotificationManager(window.notif),t.setFadeOutPolicy(2),t.setStackingPolicy(1),t.setRemoveStackOnFirstTimeoutFlag(!0),null!=t._notifScreen&&t._notifScreen.addClassName("ca-align-center"),e.addNotif(n)})}),i.addEvent("onFilterChange",function(e){var a=i.getCurrentFilter();n.ChgCRlayoutModel.empty(),Object.keys(a.allfilters).length>0?(t.getGlobalVariable().indexCRMode="true",n.refreshGrid(e,a)):(t.getGlobalVariable().indexCRMode="true",n.refreshGrid(e,a),t.getGlobalVariable().indexCRMode="false",n.refreshGrid(e,a))}),i.addEvent("colorize",function(e){var t=e.tagColors;o._colorize(t)}),i.addEvent("unColorize",function(e){o._uncolorize()})},setTags:function(e,t){if(i&&t){var n=o.getTagsList(t);t.forEach(function(e){if(-1!=n.indexOf(e.sixw)){for(var t=!1,i=0;i<a.length;i++)if(a[i].sixw==e.sixw&&a[i].object==e.object){a[i]=e,t=!0;break}t||a.push(e)}})}i.setTags(e,a)},deactivate:function(){i&&i.deactivate()},activate:function(){i&&i.activate()},clearLocalFilter:function(){i&&i.clearLocalFilter()},getTaglistData:function(){return[{sixw:"ds6w:what/ds6w:status",modelField:"maturity",compareType:"AcontainsB"},{sixw:"ds6w:why/ds6w:fulfills/ds6w:severity",modelField:"severity",compareType:"String"},{sixw:"ds6w:who/ds6w:responsible",modelField:"responsible",compareType:"String"},{sixw:"ds6w:when/ds6w:ends/ds6w:dueDate",modelField:"dueDate",compareType:"date"}]},getTagsList:function(e){var t=[];return e&&e.forEach(function(e){t.push(e.sixw)}),o.getTaglistData().forEach(function(e){t.push(e.sixw)}),t},tagCompare:function(e,t,i){if(t&&e)if("String"==i){if(e==t)return!0}else if("AcontainsB"==i){if(e.contains(t))return!0}else if("BcontainsA"==i){if(t.contains(e))return!0}else if("Array"==i){if(t.indexOf(e)>-1)return!0}else if("date"==i)return a=t,o=n=e,n.length>7?o=new UWA.Date(n).strftime("%Y-%m-%d"):n.length>4&&(o=new UWA.Date(n).strftime("%Y-%m")),!!a.contains(o);var n,a,o;return!1},_uncolorize:function(){"tree"==n.crGridView.options.columns[0].dataIndex&&(n.crGridView.options.columns[0].getCellKPIColor=null,n.crGridView.coDatagrid.prepareUpdateView(),n.crGridView.coDatagrid.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0)),n.crGridView.tilesView&&(n.crGridView.tilesView.getColor=function(){},n.crGridView.tilesView.prepareUpdateView(),n.crGridView.tilesView.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0))},_colorize:function(e){var t=o.getTagsList().indexOf(e[0].predicate);if(t>=0){var i=o.getTaglistData()[t];"tree"==n.crGridView.options.columns[0].dataIndex&&(n.crGridView.options.columns[0].getCellKPIColor=function(t){for(var n=0;n<e.length;n++)if(o.tagCompare(e[n].object,t.nodeModel.options.grid[i.modelField],i.compareType))return e[n].color;return null},n.crGridView.caDatagrid.prepareUpdateView(),n.crGridView.caDatagrid.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0)),n.crGridView.tilesView&&(n.crGridView.tilesView.getColor=function(t){t.options.grid;for(var n=0;n<e.length;n++)if(o.tagCompare(e[n].object,t.options.grid[i.modelField],i.compareType))return e[n].color},n.crGridView.tilesView.prepareUpdateView(),n.crGridView.tilesView.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0))}}};return o}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(t){const i=!(!t||"true"!==t.AddImpactBasis),n=!(!t||"true"!==t.RemoveImpactBasis),a=!(!t||"true"!==t.AddImpactedItems);return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_AddImpactBasis,position:"far",visibleFlag:i,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"addExistingHandler"}}},{id:"massUpdate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},disabled:!0,tooltip:"Mass Update",position:"far",visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"massUpdateHandler"}}},{id:"addImpactedItem",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"change-request-impacted-items",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_AddImpactedItem,position:"far",disabled:!0,visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"addImpactedItemHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",disabled:!0,visibleFlag:n,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable",["DS/DataDragAndDrop/DataDragAndDrop","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/UIKIT/Mask","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a){"use strict";var o={makeDroppable:function(n,r){e.droppable(n,{drop:function(e,s,l){if(l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault(),l.dataTransfer&&l.dataTransfer.dropEffect&&(l.dataTransfer.dropEffect="copy"),UWA.is(e)&&""!=e){var c=JSON.parse(e),d=i.checkTenantInforamation(c);if(0!=d.TenantInfoMissing.length)t.error(a.CHG_GOV_Pref_PlatformMissing_Error);else if(0!=d.DiffTenantData.length)t.error(a.CHG_GOV_Pref_PlatformDoesNotMatch_Error);else{c=i.removeDuplicatesToBeDroppedObjects(c);var u=i.filterBasedOnServiceId(c);if(u.incorrectServiceInfo&&Array.isArray(u.incorrectServiceInfo)&&u.incorrectServiceInfo.length>0){var g=a.CHG_GOV_WARN_DROP_SKIPPED+"<br/>";for(var p in u.incorrectServiceInfo)g+=u.incorrectServiceInfo[p]+"<br/>";t.warn(g,"false")}o.ExecuteDrop(c,r)}}else t.error(a.CHG_GOV_Drop_Not_Supported);n.style.borderWidth="0px"},over:function(){arguments[0].setStyles({borderStyle:"solid",borderColor:"#368ec4",borderWidth:"1px"})},leave:function(){arguments[0].setStyle("borderWidth","0px")}})},ExecuteDrop:function(e,i){if(e){var n=e.data.items;UWA.is(n)&&UWA.is(n.length)&&n.length>0&&i(n)}else t.error(a.CHG_GOV_Drop_Not_Supported)}};return o}),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/view/ChgIDCardHeaderBuilder",["UWA/Class/View","UWA/Core","DS/Handlebars/Handlebars","DS/ResizeSensor/js/ResizeSensor","DS/UIKIT/DropdownMenu","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/IDCardHeaderMain.html","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/AttributesPartial.html","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/MinifiedAttributesPartial.html","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/AttributeSectionPartial.html","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChangeIDCard","DS/PlatformAPI/PlatformAPI","DS/Controls/Loader","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ChangeMaturityWidget/ChangeMaturityWidget","DS/Controls/TooltipModel","DS/ENOChgRouter5/scripts/ChgRouter","css!DS/ChangeMaturityWidget/ChangeMaturityWidget","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f,b){"use strict";var w=e.extend({name:"chg-id-card",className:function(){return this.getClassNames("-container")},domEvents:{"click .toggle-minified-icon":"toggleMinified","click .attribute-value":"_triggerClickOnAttributeEvent"},init:function(e){console.log("inside init ChgIDCardHeaderBuilder");this._parent.call(this,e)},setup:function(){this.container&&(this.container.empty(),this.container.destroy()),this.modelEvents=this.model.get("modelEvents"),this.modelEventsTokens=[],this._subscribeToModelEvents(),this._subscribeToPlatformEvents();var e=this._parseAttributes(this.model.get("attributes"),this.model.get("attributesLayout"));this.templateOptions={withHomeButton:void 0!==this.model.get("withHomeButton")&&this.model.get("withHomeButton"),withExpandCollapseButton:void 0!==this.model.get("withExpandCollapseButton")&&this.model.get("withExpandCollapseButton"),withActionsButton:void 0===this.model.get("withActionsButton")||this.model.get("withActionsButton"),withInformationButton:void 0!==this.model.get("withInformationButton")&&this.model.get("withInformationButton"),withToggleMinifiedButton:void 0!==this.model.get("withToggleMinifiedButton")&&this.model.get("withToggleMinifiedButton"),showBackButton:void 0!==this.model.get("showBackButton")&&this.model.get("showBackButton"),thumbnail:this.model.get("thumbnail"),smallIcon:this.model.get("smallIcon"),title:this.model.get("title"),version:"-"!=this.model.get("version")?this.model.get("version"):"",attributes:e,dropdown:void 0!==this.model.get("dropdown")&&this.model.get("dropdown"),freezones:this.model.get("freezones"),minified:this.model.get("minified"),nls:c.templateNLS},void 0===this.model.get("customEvents")&&this.model.set("customEvents",{}),this.modelOnChangeListener=function(e){},this.model.addEvent("onChange",this.modelOnChangeListener)},render:function(){var e=this,t=i.compile(o);i.compile(r),i.compile(s);i.registerPartial("Attributes",r),i.registerPartial("MinifiedAttributes",s),i.registerPartial("AttributeSection",l),e.container.setHTML(t(e.templateOptions)),e.addLoaderInAttributes(e.templateOptions.attributes),e.addCustomTooltipsInAttributes(e.templateOptions.attributes),e.templateOptions.withHomeButton||e.templateOptions.withExpandCollapseButton||e.templateOptions.showBackButton||(e.container.addClassName("no-sidebar-buttons"),e.container.getElement(".sidebar-buttons").addClassName("hidden")),e.templateOptions.withActionsButton&&e.templateOptions.dropdown&&(e.templateOptions.dropdown.target=e.container.getElement(".actions-menu-icon"),e.templateOptions.dropdown.items.length?(e.container.getElement(".actions-menu-icon").removeClassName("hidden"),e.templateOptions.dropdownElement=new a(e.templateOptions.dropdown)):e.container.getElement(".actions-menu-icon").addClassName("hidden"));var n=e.model.get("freezones");void 0!==n&&n.length>0&&n.forEach(function(t,i){var n=e.container.getElement(".free-zone-"+i);if("string"==typeof t){var a=b.escapeHTML(t);n.innerHTML=a,""!=t&&(n.tooltipInfos=new m({title:f.CHG_Common_Dialog_Description,longHelp:t,mouseRelativePosition:!1,allowUnsafeHTMLLongHelp:!1,position:"left",moreHelpCB:function(){C.getDependency("xChangeApp")._applicationChannel.publish({event:"information-panel-open",data:null})}}))}else t instanceof HTMLElement?n.appendChild(t):void 0!==t.render&&t.render().inject(n)}),e.requestID=window.requestAnimationFrame(function(){e.resize()}),e.templateOptions.minified&&e.container.addClassName("minified");var c=e.getMaturityContainer();return e.createMaturitySpan(c),e},addLoaderInAttributes:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.length;n++){var a,o,r,s=i[n];if(s.showLoader)if(s.displayWhenMinified?(a=this.container.getElements("#"+s.command)[0].getElementsByClassName("attribute-value")[0].firstChild,o=this.container.getElements("#"+s.command)[1].getElementsByClassName("attribute-value")[0].firstChild):o=this.container.getElements("#"+s.command)[0].getElementsByClassName("attribute-value")[0].firstChild,(r=new u).height="15",r.inject(o),r.on(),a)(r=new u).height="15",r.inject(a),r.on()}},addCustomTooltipsInAttributes:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.length;n++){i[n].valueCustomTooltip}},createMaturitySpan:function(e,t){var i=this;if(!i.maturityCmd||"true"==t){i.stateDiv=UWA.createElement("div",{styles:{overflow:"hidden",height:"100%"},class:"maturity-container"});var n={SecurityContext:p.getGlobalVariable().getSecurityContext()};i.maturityCmd&&"true"!=t||(i.maturityCmd=new g),i.maturityCmd.executeCompactViewAsync(widget,i.stateDiv,n,i.model.id).then(function(){var t=i.maturityCmd.changeMaturityWidget.currentState,n=i.maturityCmd.changeMaturityWidget.current,a={valueDisplay:t,valueActual:n};i.model.set("currentState",a),console.log("Maturity  updated"),i.modelEvents.publish({event:"maturity-updated",data:a});let o={valueDisplay:t,valueActual:n,id:i.model.id};d.publish("Change-Maturity-Update",o),i.createMaturitySpan(e,"true")})}if(e){i.model.get("accessBits");if(i.model.get("onHold")){var a="["+f.CHG_GOV_DataGrid_Column_Maturity_Hold+"]";e.innerText=i.model.get("currentState").valueDisplay+" "+a,e.classList.remove("type-hyperlink")}else"false"!=p.getGlobalVariable().isFullLicence||"Change Request"!=i.model._previousAttributes.type&&"Change Order"!=i.model._previousAttributes.type?(e.innerText="",i.stateDiv.inject(e),e.classList.add("type-hyperlink")):(e.innerText=i.model.get("currentState").valueDisplay,e.classList.remove("type-hyperlink"))}},createNewAttributes:function(e){for(var t=this.model.get("attributes"),i=this.model.get("accessBits"),n=0;n<t.length;n++){var a=(l=t[n]).accessBit;if(a){var o=i[a];l.editable="false"!=o}}for(var r=e.attributes,s=0;s<t.length;s++){var l=t[s];for(var d in r)d==l.command&&(null!=r[d].editable&&(l.editable=r[d].editable),null!=r[d].displayWhenMinified&&(l.displayWhenMinified=r[d].displayWhenMinified),null!=r[d].fieldNLS&&(l.name=r[d].fieldNLS),null!=r[d].valueActual&&(l.valueActual=r[d].valueActual),null!=r[d].valueDisplay&&(l.valueDisplay=r[d].valueDisplay,l.valueTooltip=r[d].valueDisplay),null!=r[d].valueTooltip&&(l.valueTooltip=r[d].valueTooltip),null!=r[d].valueCustomTooltip&&(l.valueTooltip="",l.valueCustomTooltip=r[d].valueCustomTooltip),1==r[d].showLoader?(l.valueDisplay="",l.valueActual="",l.valueDisplay="",l.valueTooltip=c.loading):0==r[d].showLoader&&(l.showLoader=!1))}return t},createNewMenu:function(){var e=[],t=[],i=this.model.get("accessBits");this.templateOptions.dropdown.items.concat(this.templateOptions.dropdown.hiddenItems).forEach(function(n,a){"true"==i[n.accessBit]?e.unshift(n):t.push(n)}),this.templateOptions.dropdown.items=e,this.templateOptions.dropdown.hiddenItems=t},reRenderHeaderNonAttributeFields(e){var t=this;e.title&&(t.container.getElement(".name").innerHTML=e.title),e.freezones&&e.freezones.constructor===Array&&e.freezones.forEach(function(e,i){var n=t.container.getElement(".free-zone-"+i);"string"==typeof e?n.innerHTML=e:e instanceof HTMLElement?n.appendChild(e):void 0!==e.render&&e.render().inject(n)})},reRenderHeaderAttributes:function(e){this.templateOptions.attributes=this._parseAttributes(e,this.model.get("attributesLayout"));var t=i.compile(r),n=i.compile(s);this.container.getElement(".attributes-placeholder").innerHTML=t({attributes:this.templateOptions.attributes}),this.container.getElement(".attributes-section-when-minified-container").innerHTML=n({attributes:this.templateOptions.attributes}),this.addLoaderInAttributes(this.templateOptions.attributes),this.addCustomTooltipsInAttributes(this.templateOptions.attributes);var a=this.getMaturityContainer();this.createMaturitySpan(a),this.resize()},getMaturityContainer:function(){for(var e,t,i=!0,n=this.templateOptions.attributes,a=0;a<n.length;a++)for(var o=n[a],r=0;r<o.length;r++){var s=o[r];"maturity"==s.command&&(i=s.displayWhenMinified)}return i?(e=this.container.getElements("#maturity")[0].getElementsByClassName("attribute-value")[0].firstChild,t=this.container.getElements("#maturity")[1].getElementsByClassName("attribute-value")[0].firstChild):t=this.container.getElements("#maturity")[0].getElementsByClassName("attribute-value")[0].firstChild,this.templateOptions.minified?e:t},reRenderHeaderMenu:function(){this.templateOptions.dropdownElement&&this.templateOptions.dropdownElement.destroy(),0==this.templateOptions.dropdown.items.length?this.container.getElement(".actions-menu-icon").addClassName("hidden"):(this.container.getElement(".actions-menu-icon").removeClassName("hidden"),this.templateOptions.dropdownElement=new a(this.templateOptions.dropdown))},attachResizeSensor:function(){var e=this;e.resizeSensor=new n(e.container,function(){e.resize()}),e.container.getElements(".attributes-placeholder .attribute-section").forEach(function(e){var t=e.getElement(".attribute-value");t.style.width=e.offsetWidth-e.getElement(".attribute-name").offsetWidth-21+"px",t.style.overflow="hidden",t.style.textOverflow="ellipsis"})},resize:function(){var e=this.container.offsetWidth;this.container.hasClassName("minified")&&this._checkMinifiedAttributesOverflow();this.container.offsetWidth;var t=this.container.getElement('.attribute-columns[data-column-index="0"]'),i=this.container.getElement('.attribute-columns[data-column-index="1"]'),n=this.container.getElement('.attribute-columns[data-column-index="2"]'),a=this.container.getElement(".image-placeholder"),o=this.container.getElement(".free-zone-0"),r=0;a&&(a.hasClassName("hidden")?(a.removeClassName("hidden"),r=a.offsetWidth,a.addClassName("hidden")):r=a.offsetWidth),e-20<t.offsetWidth+r?(this.container.addClassName("no-image-placeholder"),a.addClassName("hidden")):(this.container.removeClassName("no-image-placeholder"),a.removeClassName("hidden"));var s=0;i&&(i.hasClassName("hidden")?(i.removeClassName("hidden"),s=i.offsetWidth,i.addClassName("hidden")):s=i.offsetWidth),null!=i&&(e-40<t.offsetWidth+a.offsetWidth+s?i.addClassName("hidden"):i.removeClassName("hidden"));var l=0;n&&(n.hasClassName("hidden")?(n.removeClassName("hidden"),l=n.offsetWidth,n.addClassName("hidden")):l=n.offsetWidth),null!==n&&(e-60<t.offsetWidth+a.offsetWidth+i.offsetWidth+l?n.addClassName("hidden"):n.removeClassName("hidden"));null!==n?0==n.offsetWidth||e-80<t.offsetWidth+a.offsetWidth+i.offsetWidth+n.offsetWidth+450?o.addClassName("hidden"):o.removeClassName("hidden"):e-80<t.offsetWidth+a.offsetWidth+i.offsetWidth+450?o.addClassName("hidden"):o.removeClassName("hidden")},minify:function(){if(this.templateOptions.minified=!0,!this.container.hasClassName("minified")){this.container.addClassName("minified"),this.modelEvents.publish({event:"idcard-minified"}),console.log("idcard-minified");var e=this.getMaturityContainer();this.createMaturitySpan(e)}},expand:function(){if(this.templateOptions.minified=!1,this.container.hasClassName("minified")){this.container.removeClassName("minified"),this.modelEvents.publish({event:"idcard-expanded"});var e=this.getMaturityContainer();this.createMaturitySpan(e)}},toggleMinified:function(){var e=this.container.querySelector(".toggle-minified-icon"),t=this.container.hasClassName("minified");t?(this.expand(),null!==e&&(e.classList.remove("fonticon-expand-down"),e.classList.add("fonticon-expand-up"),e.title=c.templateNLS.collapse)):(this.minify(),null!==e&&(e.classList.remove("fonticon-expand-up"),e.classList.add("fonticon-expand-down"),e.title=c.templateNLS.expand));var i=!t;console.log("idcard-header-minified"+i),this.modelEvents.publish({event:"idcard-header-minified",data:{value:i}}),d.publish("idcard-header-minified",{value:i})},_checkMinifiedAttributesOverflow:function(){for(var e=this.container.getElement(".attributes-section-when-minified-container"),t=e.getElements(".attribute-section"),i=0;i<t.length;i++)t[i].removeClassName("hidden");if(!(e.scrollWidth<=e.offsetWidth))for(var n=0,a=0;a<t.length;a++)(n+=t[a].offsetWidth)>e.offsetWidth&&t[a].addClassName("hidden")},_triggerClickOnAttributeEvent:function(e){var t={index:parseInt(e._uwaTarget.parentElement.getAttribute("data-attribute-index"),10),attributeName:e._uwaTarget.parentElement.querySelector(".attribute-name").innerHTML};this.modelEvents.publish({event:"idcard-attributes-clicked",data:t})},_parseAttributes:function(e,t){var i=[],n=0;return void 0!==e&&(i.push(e.slice(0,t[0])),t[1]&&i.push(e.slice(t[0],t[0]+t[1])),t[2]&&i.push(e.slice(t[0]+t[1],t[0]+t[1]+t[2])),i.forEach(function(e){e.forEach(function(e){e.index=n++})})),i},idCardHeaderUpdate:function(e){if(console.log("idcard-header-update modelEvents"),e.accessBits&&(this.model.set("accessBits",e.accessBits),this.createNewMenu(),this.reRenderHeaderMenu()),e.attributes||e.accessBits){var t=this.createNewAttributes(e);this.reRenderHeaderAttributes(t),e.attributes&&e.attributes.owner&&this.model.set("owner",e.attributes.owner.valueActual)}var i=!1;if(e.title&&(this.model.set("title",e.title),i=!0),e.freezones&&e.freezones.constructor===Array&&e.freezones[0]){var n=this.model.get("freezones");n[0]=e.freezones[0].data,this.model.set("freezones",n),i=!0}i&&this.reRenderHeaderNonAttributeFields(e)}});return w.prototype._subscribeToPlatformEvents=function(){var e=this;d.unsubscribe("idcard-header-update"),d.subscribe("idcard-header-update",function(t){e.idCardHeaderUpdate(t)}),d.unsubscribe("idcard-header-update-maturity"),d.subscribe("idcard-header-update-maturity",function(){console.log("====subscribe--idcard-header-update-maturity---");var t=e.getMaturityContainer();e.createMaturitySpan(t,"true")}),w.prototype.platformEventsSubscribed=!0},w.prototype._subscribeToModelEvents=function(){var e=this;e.model.get("modelEvents").subscribe({event:"idcard-header-update"},function(t){e.idCardHeaderUpdate(t)}),e.model.get("modelEvents").subscribe({event:"idcard-header-update-maturity"},function(){var t=e.getMaturityContainer();e.createMaturitySpan(t,"true")})},w}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovExpandInputTextBox",["UWA/Core","DS/Controls/Abstract","DS/Controls/LineEditor","DS/Controls/Button","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,a){"use strict";var o=null,r=function(){null!=o&&(o.that.lineEditor._myInput.setStyle("width","auto"),o.that.createList.inject(o.that.dropdown),o.that.lineEditor.inject(o.that.createCAContainer,"top"),o.remove(),o=null)};return t.inherit({name:"ExpandInput",_preBuildView:function(){this.elements.container=new UWA.Element("div",{class:"container-expandInput wux-tweakers",id:"quickCreateContainer"}),this.createCAContainer=new UWA.Element("div",{class:"hideBox transition"}),this.lineEditor=new i({placeholder:a.CHG_GOV_CREATE_NEW_PLACEHOLDER,sizeInCharNumber:25,selectAllOnFocus:!0,displayClearFieldButtonFlag:!0}),this.lineEditor.inject(this.createCAContainer),this.lineEditor.getContent().addClassName("prevent-ios-zoom-in"),this.dropdown=new UWA.Element("div",{class:"createCAdropdown"}),this.createList=new UWA.Element("ul",{class:"createUL"});new UWA.Element("li",{class:"createLI"});this.dropdownParent=new UWA.Element("div",{class:"dropdownParent"});new UWA.Element("span",{class:"item-icon fonticon fonticon-doc cursorPointer"}),UWA.createElement("span",{class:"item-text",html:a.CHG_CreateCA,title:a.CHG_CreateCA,id:"idCreateCA"});this.createList.addEvents({click:function(){console.log("CO title entered.."),r()}}),this.cancelBtn=new n({label:"Cancel",emphasize:"primary",domId:"expandInput_cancel_btn"}),this.cancelBtn.getContent().addClassName("expandInput_cancel_btn"),this.createCAContainer.inject(this.elements.container);var e={icon:{}};e.icon.iconName="plus",e.icon.fontIconFamily=1,e.tooltip="YOLO";this.createCAContainer,this.lineEditor;this.plusBtn=new n(e),this.plusBtn.getContent().addClassName("wux-tweakers-multirep-button").addClassName("wux-tweaker-function").addClassName("wux-ui-style-icon"),this.plusBtn.inject(this.elements.container),this._parent(),this.isMultiSelection=!1;this.cancelBtn.addEventListener("click",function(){r()}),this.createList.addEventListener("click",function(){r()}),document.getElementById("zPlaneid")&&document.getElementById("zPlaneid").addEventListener("mouseup",function(e){if(r(),e.target.hasClassName("prevent-ios-zoom-in")||e.target.getParent().hasClassName("prevent-ios-zoom-in"));else if(e.target.getParent().hasClassName("icon-blue"));else{var t=document.querySelectorAll("#quickCreateContainer")[0];t&&(t.getChildren()[0].removeClassName("showBox"),t.getChildren()[1].removeClassName("icon-blue"))}}),o=null},toggleDisplayLineEditor:function(){console.log(arguments,this)},getModalInputBox:function(e){return null==o&&(o=UWA.createElement("div",{class:"input_FloatingDiv",id:"input_FloatingDiv"}),this.lineEditor.remove(),this.createList.remove(),o.addContent(this.lineEditor),o.addContent(this.createList),o.addContent(this.cancelBtn),o.that=this,o.that.lineEditor._myInput.setStyle("width","100%"),e.top&&o.setStyle("top",e.top),e.left&&(e.left+164>widget.body.getBoundingClientRect().width?(o.setStyle("left",0),o.setStyle("width","100%")):o.setStyle("left",e.left)),o.addEventListener("click",function(e){e.stopPropagation()})),o},removeModalInputBox:function(){r()}})}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/ChgCRDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,a,o,r,s,l){"use strict";var c=s.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",c)},loadIndexedChangeRequests:function(e,t){var a=e,o=new n;e.prepareUpdate();for(var r=0;r<t.length;r++){var s=this.createCustomNameField(t[r]);t[r].co_name=s;var l=this.createCustomSeverity(t[r]);t[r].sev=l;var c=this.createCustomChangeCoordinatorField(t[r]);t[r].co_Coordinator=c;var d=this.createCustomOwnerField(t[r]);t[r].co_Owner=d;for(var u=this.getStatusBarIcons(t[r]),g=this.statusbarIconsTooltips(t[r]),p=this.getSubLevel(t[r]),h=this.getDescription(t[r]),m=this.createCustomTooltip(t[r]),C=!1,v=a.getChildren(),f=0;f<v.length;f++){v[f].options.grid.id==t[r].id&&(C=!0)}if(!C){var b=i.createTreeNodeDataModel(o,{label:t[r].title,subLabel:p,description:h,grid:t[r],icons:[t[r].iconURL],thumbnail:t[r].thumbnail,statusbarIcons:u,statusbarIconsTooltips:g,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(b)}}e.pushUpdate()},loadChangeRequestData:function(e,t){var o=e;let r=new n;e.prepareUpdate();for(let n=0;n<t.length;n++){let d=this.createCustomNameField(t[n],"NonIndex");t[n].co_name=d;let u=this.createCustomSeverity(t[n]);t[n].sev=u;let g=this.createCustomChangeCoordinatorField(t[n]);t[n].co_Coordinator=g;let p=this.createCustomOwnerField(t[n]);t[n].co_Owner=p;let h=this.getStatusBarIcons(t[n],"NonIndex"),m=this.statusbarIconsTooltips(t[n],"NonIndex"),C=this.getSubLevel(t[n]),v=this.getDescription(t[n]),f=this.createCustomTooltip(t[n]);for(var s=!1,l=(a.getGlobalVariable().existingCRIds,s=!1,o.getChildren()),c=0;c<l.length;c++){l[c].options.grid.id==t[n].id&&(s=!0)}if(!s){let a=i.createTreeNodeDataModel(r,{label:t[n].title,subLabel:C,description:v,grid:t[n],icons:[t[n].iconURL],thumbnail:t[n].thumbnail,statusbarIcons:h,statusbarIconsTooltips:m,customTooltip:f,contextualMenu:["Copy1","Move1"]});e.addChild(a)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"crSummaryNotEmpty"}),e.unselectAll();let a=new n,o=this.createCustomNameField(t[0]);t[0].co_name=o;let r=this.createCustomSeverity(t[0]);t[0].sev=r;let s=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=s;let l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;let c=this.getStatusBarIcons(t[0]),d=this.statusbarIconsTooltips(t[0]),u=this.getSubLevel(t[0]),g=this.getDescription(t[0]),p=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(a,{label:t[0].title,subLabel:u,description:g,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:c,statusbarIconsTooltips:d,customTooltip:p});e.getXSO().add(h),e.addChild(h,0)},createCustomNameField:function(e,t){let i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);let n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){let e=new UWA.Element("div",{class:"gridIconContainer",title:o.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(e),e.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:o.CHG_TOOLTIP_NEW_REQUEST});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){let t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){let i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",o=a.getGlobalVariable().computeSwymUrl(n),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:o});else{let t=r.getAvatarDetails(e.changeCoordinatorFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(i);let l=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),l.inject(t)}return t.outerHTML},createCustomSeverity:function(e){let t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);let a=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),a.inject(i),i.outerHTML},createCustomMaturity:function(e){let t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");let i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){let i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){let i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(o.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(o.CHG_TOOLTIP_NEW_REQUEST),i},createCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){let t="";return t=e.name+" | "+e.ownerFullName},getDescription:function(e){let t="";return t=e.maturityNLS},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgImpactAnalysisOnCreateCA",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i,n,a,o){return{createNewChangeActionInContext:function(e){let t=widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action";let r=e.parentID,s={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:a.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:t,select:[],parentPIDs:[r]},events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Action"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout"],function(i){i.ChgChangeActionDataGridModel.addNewChildren(t);try{let t=o("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var n=e.result[0];n.isKindOfType="Change Action",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:n,View:"Impact Analysis"})}catch(e){console.log(e)}i.modelEvents.publish({event:"CA-Creation-Update",data:{}})})},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new n).CreateNew(s)}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t){let i=Object.create(null);return i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(i){var n=i.accessBits;const a="true"==(n=t.processAccessBitIA(n)).ManageImplementingChanges;return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_IA_Toolbar_AddCA,position:"far",visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"AddNewChangeAction"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"wrong",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_IA_Toolbar_DeleteCA,position:"far",disabled:!0,visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]}},i}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require"],function(e,t,i,n,a,o,r){"use strict";var s={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const a=[];let o=!1;const l=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();l.length>1&&(o=!0);const c=l.map(e=>e.options.grid.id),d=(l.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),r("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),u={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"},g=d.openWith(u);o?(a.push(n.createPropertyPushItem(c)),a.push(s.getRelationalExplorerMenu(c)),a.push(s.getMaturityMenu(e)),a.push(s.getTransferMenu(e)),t(a)):(a.push(n.createPropertyPushItem(c)),a.push(s.getRelationalExplorerMenu(c)),g.then(i=>{i&&a.push(i),a.push(s.getMaturityMenu(e)),a.push(s.getTransferMenu(e)),t(a)}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getMaturityMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){e.cellInfos.nodeModel.options.grid;for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],o=[],r=0;r<n.length;r++)a.push(n[r].options.grid),o.push({physicalid:n[r].options.grid["@id"]||n[r].options.grid.id});new i({context:a,ID:"MaturityHdr"}).executeAsync(o)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return s}),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/facets/context/ChgCAcontextDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask"],function(e,t,i,n,a,o,r,s,l,c,d,u){"use strict";let g=e.extend({init:function(e){this.parentCAId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},loadContextData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.previewicon,a=e.name+" | "+e.ownerFullName,o=e.currentNLS;var r=this.getCustomTooltip(e);return new i({label:e.title,subLabel:a,description:o,grid:e,customTooltip:r,icons:[e.icon],thumbnail:n,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.parentCAId,o=document.getElementById("outer-context-grid-div");"undefined"!=o&&null!=o&&u.mask(o),s.updateExistingCAContext(a,e).then(function(e){var n={contextid:a,length:e.data.length};d.publish("context:update",n);let r=[];e&&(r=e.data),g.prototype.addNodesInLayoutModel(t.treeDocument,r),i(e),u.unmask(o)},function(e){u.unmask(o),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.parentCAId,r=document.getElementById("outer-context-grid-div");"undefined"!=r&&null!=r&&u.mask(r),s.updateExistingCAContext(a,e).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);if(0==t.treeDocument.getAllDescendants().length){var s={contextid:a,length:t.treeDocument.getAllDescendants().length};d.publish("context:update",s)}c.success(o.CHG_GOV_context_Remove_Success),u.unmask(r)},function(e){u.unmask(r),n()})})},addNodesInLayoutModel:function(e,t){let i=g.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.getXSO().add(i[t]),e.addRoot(i[t],0);e.pushUpdate()}});return g}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,a,o,r,s,l,c,d,u,g){"use strict";let p=g.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),h=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"CR_RelatedScope",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",p)},loadRelatedScopeData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.previewicon,a=e.name+" | "+e.ownerFullName,o=e.currentNLS;var r=this.getCustomTooltip(e);return new i({label:e.title,subLabel:a,description:o,grid:e,customTooltip:r,icons:[e.icon],thumbnail:n,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.parentCRId,o=document.getElementById("outer-relatedScope-grid-div");"undefined"!=o&&null!=o&&u.mask(o),s.updateExistingRelatedScope(a,e).then(function(e){var n={contextid:a,length:e.data.length};d.publish("relatedScope:update",n);let r=[];e&&(r=e.data),h.prototype.addNodesInLayoutModel(t.treeDocument,r),i(e),u.unmask(o)},function(e){u.unmask(o),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.parentCRId,r=document.getElementById("outer-relatedScope-grid-div");"undefined"!=r&&null!=r&&u.mask(r),s.removeExistingRelatedScope(a,e).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);if(0==t.treeDocument.getAllDescendants().length){var s={contextid:a,length:t.treeDocument.getAllDescendants().length};d.publish("relatedScope:update",s)}c.success(o.CHG_GOV_relatedScope_Remove_Success),u.unmask(r)},function(e){u.unmask(r),n()})})},addNodesInLayoutModel:function(e,t){let i=h.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.getXSO().add(i[t]),e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,a;n=e,a=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;a(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return h}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o){return{launchCreateChangeIADialog:function({contextCRId:n}){console.log("launchCreateChangeIADialog ............................");let o={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:i.CHG_NEW_CHANGE_ANALYSIS_FORM,type:"Change Analysis",silentMode:!1,overlay:!0,options:{typeName:"Change Analysis",preferedType:"Change Analysis",select:[],parentPIDs:[n]},events:{onSuccess:function(e){document.getElementsByClassName("moduleWrapper")[0];try{let t=a("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var i=e.result[0];i.isKindOfType="Change Analysis",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:i,View:"Impact Analysis"})}catch(e){console.log(e)}a("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil").filterView("activeIA"),t.TriggerCustomeUpdate="false"},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new e).CreateNew(o)}}}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant",[],function(){"use strict";var e={_KEY:"xchange-app",_VIEWS_PREFERENCES:"xchange-views-preferences",_MY_CHANGE_ORDERS:"xchange-my-change-orders",_RECENTLY_OPENED:"xchange-recently-opened",_CHANGE_ORDERS_DETAILS:"xchange-change-orders-details",_CHANGE_REQUESTS_DETAILS:"xchange-change-requests-details",_CHANGE_ACTIONS_DETAILS:"xchange-change-actions-details",_LIST_VIEW:"xchange-list-view",_TAB:"tab",_OBJECTIDs:"objectIDs",_COTAB:"cotab",_CRTAB:"crtab",_FILTERVIEW:"filterview",_MODEL:"model",_ID_CARD:"id-card",_ORCHESTRATION_LEVEL1:"orchestration-level1",_ORCHESTRATION_LEVEL2:"orchestration-level2",_ORCHESTRATION_LEVEL3:"orchestration-level3",_LAST_ROUTE:"last-route",_FILTERS:"filters",_SELECTIONS:"selections",_DATE_FORMAT:"%m/%d/%Y , %I:%M:%S %p"};return e}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMemberFilterView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"teamfilter",tagName:"div",className:"chg-member-view",setup:function(){this.template='                                                <div class="'+this.getClassNames("-role-filter")+'">                                                    <table class="filter-table table">                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByName+'</td>                                                            <td>                                                                <div class="filter-input">                                                                    <input type="text" placeholder="'+t.CHG_Member_SearchMembers_PlaceHolder+'" class="form-control form-control-root filtertext">                                                                    <div class="clear-filter fonticon fonticon-cancel-circled"></div>                                                                </div>                                                            </td>                                                        </tr>                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByResponsibilities+'</td>                                                            <td class="chg-member-view-filter toggle-primary">                                                                <div class="toggle-container toggle-filter-view">                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="allToggle" class="roleFilter" checked>                                                                        <label class="control-label" for="allToggle" style="color: gray;">'+t.CHG_Member_Filter_All+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="assigneeToggle" class="roleFilter">                                                                        <label class="control-label" for="assigneeToggle" style="color: gray;">'+t.CHG_Member_Filter_Assignees+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="revMemToggle" class="roleFilter">                                                                        <label class="control-label" for="revMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Approvers+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="followMemToggle" class="roleFilter">                                                                        <label class="control-label" for="followMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Followers+"</label>                                                                    </div>                                                                </div>                                                            </td>                                                        </tr>                                                    </table>                                                </div>",this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view-role-filter",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"keyup .filtertext":function(e){var t=e.target.value,i=this.container.getElement(".clear-filter");t.length>0?i.setStyle("visibility","visible"):i.setStyle("visibility","hidden"),this.dispatchEvent("memberFilterKeyUp",arguments)},"click .clear-filter":function(e){this.container.getElement(".clear-filter").setStyle("visibility","hidden");var t=this.container.getElement(".filtertext");if(t){t.value=""}this.dispatchEvent("memberFilterKeyUp",{target:{value:""}})},"focus .filtertext":function(){var e=document.getElementsByClassName("searchfiler-input-container");e.addClassName("highlighted-border"),e.removeClassName("border-without-focus")},"click .roleFilter":function(){this.dispatchEvent("memberRoleFilter",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/attachment/ChgAttachmentfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","DS/ENOChgServices/scripts/services/ChgDataService","UWA/Class/Model","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgDataProcess","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","DS/PlatformAPI/PlatformAPI","require"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"attachment-mainContainer"}))},updateFacet:function(){var e=this;o.mask(this.elements.container),require(["DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView"],function(t){var i=e.getModel(),a=i.get("objectId");1!=i.isMergedModel()&&n.getObjectTypeInformation(a).then(function(i){if("Change Order"==i)n.getChangeOrderUserAccess(a).then(function(n){var a=n.data[0].dataelements;if(a=r.processAccessBitCO(a),e.elements&&e.elements.container){var s=e.getModel();if(!s)return!1;e.elements.container.setContent("");var l={id:s.get("objectId"),target:e.elements.container,parentType:i};t.create(l,"false"==a.AddReferential),o.unmask(e.elements.container)}});else if("Change Request"==i)n.getChangeRequestUserAccess(a).then(function(n){var a=n.data[0].dataelements;if(e.elements&&e.elements.container){var r=e.getModel();if(!r)return!1;e.elements.container.setContent("");var s={id:r.get("objectId"),target:e.elements.container,parentType:i};t.create(s,"false"==a.AddReferential),o.unmask(e.elements.container)}});else if("Change Action"==i){c("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").getUserAccess("pid:"+a).then(function(n){var a=n.userAccess;if(e.elements&&e.elements.container){var r=e.getModel();if(!r)return!1;e.elements.container.setContent("");var s={id:r.get("objectId"),target:e.elements.container,parentType:i};t.create(s,"false"==a.AddReferential),o.unmask(e.elements.container)}})}else""==i&&n.getImpactAnalysisUserAccess(a).then(function(n){var a=n.data[0].dataelements;if(e.elements&&e.elements.container){var r=e.getModel();if(!r)return!1;e.elements.container.setContent("");var s={id:r.get("objectId"),target:e.elements.container,parentType:i};t.create(s,"false"==a.ManageAttachments),o.unmask(e.elements.container)}})})})},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersFeaturesUtil",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i){"use strict";return{showRMBMenuOnGrid:function(e,t){return new Promise(function(n,a){var o="false",r={},s=i("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersFeaturesUtil"),l=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),c=l[0].options.grid.roles;r.currentObjType=l[0].options.grid.type;var d=0;l.length>1&&(o="true"),c.indexOf("contributor")>=0?(r.contributor="DISCONNECT",d++):r.contributor="CONNECT",c.indexOf("approver")>=0?(r.approver="DISCONNECT",d++):r.approver="CONNECT",c.indexOf("follower")>=0?(r.follower="DISCONNECT",d++):r.follower="CONNECT";let u,g=c.indexOf("owner")>=0;0==g&&1==d&&(r.showConfirmation=!0),"false"==o&&(u=i("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"));let p=[];var h=t.cellInfos.nodeModel.options.grid.id,m=t.cellInfos.nodeModel.options.grid.type,C=t.cellInfos.nodeModel.options.grid.name,v=t.cellInfos.nodeModel.options.grid.displayType;"Group"==m&&(m="foaf:Group",C=t.cellInfos.nodeModel.options.grid.fullName,v=t.cellInfos.nodeModel.options.grid.type);var f={objectId:h,objectType:m,displayName:C,displayType:v,facetName:"dependency"};[].push(f);var b=i("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").openWith(f),w=[];w.push(b),Promise.all(w).then(function(i){if("Person"==r.currentObjType){"true"==u.addContributorAccessBit&&p.push(s.getContributorMenu(e,t,r));let i=u.ChgMembersTreeModel.getChildren();u.isRouteTempleteAttached=!1;for(var a=0;a<i.length;a++){"Route Template"==i[a].options.grid.type&&(u.isRouteTempleteAttached=!0)}u.isRouteTempleteAttached||"true"!=u.addReviewerAccessBit||p.push(s.getReviewerMenu(e,t,r)),"true"==u.addFollowerAccessBit&&p.push(s.getFollowerMenu(e,t,r))}"true"==u.addFollowerAccessBit&&0==g&&p.push(s.getDeleteMenu(e,t,r)),i[0]&&p.push(i[0]),n(p)})})},getContributorMenu:function(e,i,n){var a={type:"CheckItem",title:t.CHG_Member_Menu_Assignees,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"],function(e){console.log("contributor : "+n.contributor),n.role="contributor",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.contributor&&(a.state="selected"),a},getReviewerMenu:function(e,i,n){var a={type:"CheckItem",title:t.CHG_Member_Menu_Approvers,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"],function(e){console.log("approver : "+n.approver),n.role="approver",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.approver&&(a.state="selected"),a},getFollowerMenu:function(e,i,n){var a={type:"CheckItem",title:t.CHG_Member_Menu_Follower,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"],function(e){console.log("follower : "+n.follower),n.role="follower",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.follower&&(a.state="selected"),a},getDeleteMenu:function(e,i,n){return{type:"PushItem",title:t.CHG_Member_Menu_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"],function(e){console.log("remove "),n.role=[],"DISCONNECT"==n.follower&&n.role.push("follower"),"DISCONNECT"==n.approver&&n.role.push("approver"),"DISCONNECT"==n.contributor&&n.role.push("contributor"),n.showConfirmation=!0,e.updatePersonRole(i.cellInfos,n)})}}}}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t){let i=Object.create(null);return i.createData={menu:[{type:"PushItem",title:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_OrchestrateChangeActions,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"_OrchestrateChangeActions"},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_OrchestrateChangeActions},{type:"PushItem",title:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_ChangeAction,state:"disabled",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"addExistingChangeAction"},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_ChangeAction}]},i.viewData={menu:[{type:"CheckItem",title:t.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"changeView"},tooltip:t.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:t.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemTileViewLayout",func:"changeView"},tooltip:t.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(i){const n="true"===i.accessBits.AddImpactedItems,a="true"===i.accessBits.RemoveImpactedItems,o="true"===i.accessBits.ManageImplementingChanges;let r={entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_AddImpactedItem,position:"far",visibleFlag:n,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"addExistingHandler"}}},{id:"changeAssessment",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"component",fontIconFamily:1},tooltip:t.CHG_GOV_ImpactBasis_Toolbar_ChangeAssessment,position:"far",disabled:!0,visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"changeAssessmentHandler"}}},{id:"massUpdate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},disabled:!0,tooltip:"Mass Update",position:"far",visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"massUpdateHandler"}}},{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"change-action",fontIconFamily:1},value:this.createData},position:"far",disabled:!1,visibleFlag:o},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:t.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",visibleFlag:a,disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]};return e.getGlobalVariable().is3DSpace&&(r.entries=r.entries.filter(e=>"changeAssessment"!=e.id)),r},i}),define("DS/ENOChgGovernanceUX/scripts/util/DocumentUtils",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/DocumentManagement/DocumentManagement"],function(e,t){"use strict";return{init:function(){},preview:function(e){this._loadCommands(e,"Preview")},edit:function(e){this._loadCommands(e,"Edit")},undoEdit:function(e){this._loadCommands(e,"UndoEdit")},update:function(e){this._loadCommands(e,"Update")},download:function(e){this._loadCommands(e,"Download")},_loadCommands:function(t,i){var n=this;require(["DS/DocumentCommands/ENOXDocumentCommands","DS/DocumentCommands/DocumentCommandsV2","DS/DocumentManagement/DocumentManagement","DS/CoreEvents/ModelEvents"],function(a,o,r,s){let l=e.getGlobalVariable();var c=decodeURIComponent(l.getSecurityContext()),d=l.tenant,u=l.get3DSpaceURL(),g={},p=t;if("Download"===i)r.getDocuments(p,{tenant:d,securityContext:c,tenantUrl:u,onComplete:function(e){if(e.success){if(!Array.isArray(e.data))return;var t=new s;t.subscribe({event:"docv2-show-notification"},function(e){console.log("Error message to be displayed:"+e)}),new o(g={fetchSecurityContext:function(){return decodeURIComponent(l.getSecurityContext())},getSelectedNodes:function(){return e.data},getDocumentFromNodeModel:function(e){return e},platformUrls:{"3DSpace":u},events:t}).commands[i].execute()}},onFailure:function(e){console.log(e)}});else{g={document:{id:p,contextId:c,serviceId:"3DSpace",envId:d,index:1,data:t.data,type:"Document"},platformUrls:{"3DSpace":u},onComplete:function(e){console.log("success"),"Update"===e.action&&"attachments"===t.from&&t.menu.dispatchEvent("request:updateFile",{item:t.selected,lock:!0})}};var h=new a;h.init(g),n.cmds=h.render(),n.cmds[i].handler()}})},getDocuments:function(i){let n=e.getGlobalVariable();var a=decodeURIComponent(n.getSecurityContext()),o=n.tenant,r=n.get3DSpaceURL();return UWA.is(i,"array")?new Promise(function(e,n){t.getDocuments(i,{getVersions:!1,additionalURLParams:"$fields=isDocumentType",tenantUrl:r,tenant:o,securityContext:a,onComplete:function(t){e(t.data)},onFailure:n})}):Promise.reject()}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o){var r={onCompleteCallback:function(e){console.log("................................");var t=i.processChangeActionInContext(e).processData;console.log(t),require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],function(e){e.addNodesInLayout(t)})},onFailureCallback:function(){console.log("ERROR : FAILED CREATE CA")},createNewChange:function(){e.prototype.execute(r.onCompleteCallback)},createNewChangeOrderInContext:function(e){let t=e.parentID;console.log("launchCreateChangeOrderDialog ............................");let i={context:{service:"3DSpace",tenant:n.getGlobalVariable().tenant,header:{SecurityContext:n.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ORDER_FORM,type:"Change Order",silentMode:!1,overlay:!0,options:{typeName:"Change Order",preferedType:"Change Order",select:[],parentPIDs:[t]},events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Order"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)})},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new a).CreateNew(i)},createNewChangeActionInContext:function(e){let t=e.parentID;console.log("createNewChangeActionInContext ............................");let i={context:{service:"3DSpace",tenant:n.getGlobalVariable().tenant,header:{SecurityContext:n.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:"Change Action",select:[],parentPIDs:[t]},events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Action"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)})},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new a).CreateNew(i)}};return r}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/applicability/ChgCRApplicabilityfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"applicability-CR-container"}))},updateFacet:function(){var e=UWA.createElement("div",{html:r.CHG_GOV_Empty_DataGrid_PlaceHolder});document.getElementById("applicability-CR-container").setContent(""),e.inject(this.elements.container)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_Toolbar_AddIssue,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_Toolbar_RemoveIssue,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/ChgCADataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,a,o,r,s,l){"use strict";var c=s.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",c)},loadIndexedChangeActions:function(e,t){var a=e,o=new n;e.prepareUpdate();for(var r=0;r<t.length;r++){var s=this.createCustomNameField(t[r]);t[r].co_name=s;var l=this.createCustomSeverity(t[r]);t[r].sev=l;var c=this.createCustomChangeCoordinatorField(t[r]);t[r].co_Coordinator=c;var d=this.createCustomOwnerField(t[r]);t[r].co_Owner=d;for(var u=this.getStatusBarIcons(t[r]),g=this.statusbarIconsTooltips(t[r]),p=this.getSubLevel(t[r]),h=this.getDescription(t[r]),m=this.createCustomTooltip(t[r]),C=!1,v=a.getChildren(),f=0;f<v.length;f++){v[f].options.grid.id==t[r].id&&(C=!0)}if(!C){var b=i.createTreeNodeDataModel(o,{label:t[r].title,subLabel:p,description:h,grid:t[r],icons:[t[r].iconURL],thumbnail:t[r].thumbnail,statusbarIcons:u,statusbarIconsTooltips:g,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(b)}}e.pushUpdate()},loadChangeActionData:function(e,t){var o=e;let r=new n;e.prepareUpdate();for(let n=0;n<t.length;n++){let d=this.createCustomNameField(t[n],"NonIndex");t[n].co_name=d;let u=this.createCustomSeverity(t[n]);t[n].sev=u;let g=this.createCustomChangeCoordinatorField(t[n]);t[n].co_Coordinator=g;let p=this.createCustomOwnerField(t[n]);t[n].co_Owner=p;let h=this.getStatusBarIcons(t[n],"NonIndex"),m=this.statusbarIconsTooltips(t[n],"NonIndex"),C=this.getSubLevel(t[n]),v=this.getDescription(t[n]),f=this.createCustomTooltip(t[n]);for(var s=!1,l=(a.getGlobalVariable().existingCRIds,s=!1,o.getChildren()),c=0;c<l.length;c++){l[c].options.grid.id==t[n].id&&(s=!0)}if(!s){let a=i.createTreeNodeDataModel(r,{label:t[n].title,subLabel:C,description:v,grid:t[n],icons:[t[n].iconURL],thumbnail:t[n].thumbnail,statusbarIcons:h,statusbarIconsTooltips:m,customTooltip:f,contextualMenu:["Copy1","Move1"]});e.addChild(a)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"caSummaryNotEmpty"}),e.unselectAll();let a=new n,o=this.createCustomNameField(t[0]);t[0].co_name=o;let r=this.createCustomSeverity(t[0]);t[0].sev=r;let s=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=s;let l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;let c=this.getStatusBarIcons(t[0]),d=this.statusbarIconsTooltips(t[0]),u=this.getSubLevel(t[0]),g=this.getDescription(t[0]),p=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(a,{label:t[0].title,subLabel:u,description:g,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:c,statusbarIconsTooltips:d,customTooltip:p});e.getXSO().add(h),e.addChild(h,0)},createCustomNameField:function(e,t){let i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);let n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){let e=new UWA.Element("div",{class:"gridIconContainer",title:o.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(e),e.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:o.CHG_TOOLTIP_NEW_REQUEST});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){let t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){let i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",o=a.getGlobalVariable().computeSwymUrl(n),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:o});else{let t=r.getAvatarDetails(e.changeCoordinatorFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(i);let l=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),l.inject(t)}return t.outerHTML},createCustomSeverity:function(e){let t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);let a=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),a.inject(i),i.outerHTML},createCustomMaturity:function(e){let t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");let i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){let i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){let i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(o.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(o.CHG_TOOLTIP_NEW_ACTION),i},createCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){let t="";return t=e.name+" | "+e.ownerFullName},getDescription:function(e){let t="";return t=e.maturityNLS},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddRelatedScope,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveRelatedScope,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/components/decisionView/ChgDecisionView",["DS/ENXDecisionMgmt/View/Facets/DecisionTab","DS/ENXDecisionMgmt/View/RightSlideIn/DecisionPropPanelView","DS/ENXDecisionMgmt/Controller/DecisionBootstrap","DS/Core/ModelEvents","DS/UIKIT/Mask","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,a,o,r,s){"use strict";return{createDecisionView:function(n){let l=n.target;null!=widget.decisionEvent&&(widget.decisionEvent.unsubscribe("decision-create-click"),widget.decisionEvent.unsubscribe("decision-preview-click"),widget.decisionEvent.unsubscribe("decision-create-close-click"),widget.decisionEvent.unsubscribe("decision-preview-close-click"));let c=s.getGlobalVariable(),d=c.tenant,u=c.get3DSpaceURL(),g=c.swymURL,p=c.getSecurityContext(),h={id:n.id,securityContext:p,tenant:d};e.init(h,l).then(function(e){i.set3DSpaceURL(u),i.setSwymUrl(g),i.setCollabSpaceTenant(p,d);let n,s,c=UWA.createElement("div",{id:"chg-Decision-container",styles:{height:"540px","min-width":"540px"}}),h=new t(c);widget.decisionEvent.subscribe("decision-create-click",function(e){h.init(e,"decisionCreate"),n=new r,s=new o({titleBarVisibleFlag:!1,closeButtonFlag:!1,resizableFlag:!0,modalFlag:!0,content:c,immersiveFrame:n}),n.inject(widget.body)}),widget.decisionEvent.subscribe("decision-preview-click",function(e){h.init(e,"decision"),n=new r,s=new o({titleBarVisibleFlag:!1,closeButtonFlag:!1,resizableFlag:!0,modalFlag:!0,content:c,immersiveFrame:n}),n.inject(widget.body)}),widget.decisionEvent.subscribe("decision-preview-close-click",function(e){null!=s&&(s.visibleFlag=!1,s.destroy()),null!=n&&n.destroy()}),widget.decisionEvent.subscribe("decision-create-close-click",function(e){null!=s&&(s.visibleFlag=!1,s.destroy()),null!=n&&n.destroy()}),a.unmask(l)},function(e){reject(e)})}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/dependency/ChgCRDependencyfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"dependency-CR-container"}))},updateFacet:function(){var e=UWA.createElement("div",{html:r.CHG_GOV_Empty_DataGrid_PlaceHolder});document.getElementById("dependency-CR-container").setContent(""),e.inject(this.elements.container)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/dependency/ChgDependencyfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDataService","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,a,o,r,s){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"dependency-mainContainer"}))},updateFacet:function(){var e=this;a.mask(this.elements.container),require(["DS/ENOChangeActionUX/scripts/Views/CADependenciesGridView"],function(t){var i=e.getModel(),n=i.get("objectId");1!=i.isMergedModel()&&(o.publish("load-dependency"+widget.id,"pid:"+n),o.subscribe("dependency:update:View"+widget.id,function(i){if(e.elements&&e.elements.container){if(null!=document.getElementById("co-dependency"))document.getElementById("co-dependency").destroy();var n=UWA.createElement("div",{id:"co-dependency"}),s=e.getModel();if(!s)return!1;var l=s.get("objectId"),c="pid:"+l,d={};d.id=c,d.widgetId=widget.id,d.widgetTitle=widget.title,r.getObjectTypeInformation(l).then(function(i){if("Change Action"==i)r.getChangeActionUserAccess(l).then(function(i){d.showFlowdown=i.data[0].FlowdownFrom;var r=new t(d);r.container=n,r.render(),n.inject(e.elements.container),a.unmask(e.elements.container),o.unsubscribe("dependency:update:View"+widget.id)});else{d.showFlowdown=!1;var s=new t(d);s.container=n,s.render(),n.inject(e.elements.container),a.unmask(e.elements.container),o.unsubscribe("dependency:update:View"+widget.id)}})}}))})},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig",["UWA/Class","DS/TreeModel/BaseFilter"],function(e,t){"use strict";return e.extend({init:function(){this.trigramNameFilter=t.inherit({isDataFiltered:function(e){var t=e.options.name,i=e.options.identifier;return this.filterModel&&this.filterModel.text&&t&&i?!(-1!==t.toLowerCase().indexOf(this.filterModel.text.toLowerCase())||-1!==i.toLowerCase().indexOf(this.filterModel.text.toLowerCase())):!this.filterModel||""!==this.filterModel.text},isEmpty:function(){return void 0===this.filterModel.text}})},getTrigramNameFilter:function(){return UWA.clone(this.trigramNameFilter)}})}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper",["DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_ChangeOwnerCmd","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t,i,n){return{launchTransferDialog:function(e){this.enableTransferCommand(e)},enableTransferCommand:function(t){var i={_selectedItems:[],getSelectedNodes:function(){return this._selectedItems},addSelection:function(e,t){this._selectedItems=[];var i=this;UWA.is(e,"array")?e.forEach(function(e){i._selectedItems.push(e)}):i._selectedItems.push(e)},getReference:function(e){return getID()},getParent:function(e){return e.getParent()},getType:function(e){return getType()},getName:function(e){return getLabel()}},n=[];for(let e=0;e<t.length;e++){var a=UWA.extend(t[e],{getID:function(){return t[e].id},getLabel:function(){return t[e].name},getOwner:function(){return t[e].owner},getType:function(){return t[e].type},getDisplayName:function(){return t[e].name},object:{revision:"-"}});n.push(a)}i.addSelection(n),new e({context:i,ID:"ActionBar_ChangeOwner"}).begin()}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRAddMemberView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"chg-add-member",tagName:"div",className:"chg-add-member",setup:function(){this.template='                                                <div class="'+this.getClassNames("-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-body")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table class="add-member-table table">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-change-coordinator")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Change_Coordinator+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-change-coordinator-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-change-coordinator-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search change-coordinator-field-search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-assignee")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Assignee+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-assignee-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-assignee-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search assignee-field-search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-approver")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Approver+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-approver-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-approver-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search approver-field-search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-informed-user")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Follower+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-informed-user-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-informed-user-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search informed-user-field-search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-button")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t</div>                                                </div>',this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"click .change-coordinator-field-search":function(){this.dispatchEvent("searchChangeCoordinator",arguments)},"click .assignee-field-search":function(){this.dispatchEvent("searchAssignee",arguments)},"click .approver-field-search":function(){this.dispatchEvent("searchApprover",arguments)},"click .informed-user-field-search":function(){this.dispatchEvent("searchInformedUser",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationFeatureUtil",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService"],function(e,t){"use strict";return{createCustomColumn:function(i){let n=this;return new Promise(function(i,a){let o=e.getGlobalVariable().changeActionSubTypes,r=[...e.getGlobalVariable().changeOrderSubTypes,...o];t.getCombinedClassList(r).then(function(e){t.getPropertyForClassGrid(e).then(function(e){let a=t.makeCombinedColumnList(e),o=n.filterColumn(a);i(o)})})})},filterColumn:function(e){let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project"];for(let t of n)e.delete(t);return e.forEach((e,n,a)=>{let o=t.createColumnDefination(e,n);i.push(o)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:function(e,i){return e.nodeModel.getAttributeValue(t)}}}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/util/ChgCRIssueGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require"],function(e,t,i,n,a,o,r){"use strict";var s={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const a=[];let o=!1;const l=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();l.length>1&&(o=!0);const c=l.map(e=>e.options.grid.id),d=(l.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),r("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),u={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"},g=d.openWith(u);o?(a.push(n.createPropertyPushItem(c)),a.push(s.getRelationalExplorerMenu(c)),a.push(s.getMaturityMenu(e)),a.push(s.getTransferMenu(e)),t(a)):g.then(i=>{i&&a.push(i),a.push(s.getMaturityMenu(e)),a.push(s.getTransferMenu(e)),t(a)})})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getMaturityMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){var n=e.cellInfos.nodeModel.options.grid;new i({context:n,ID:"MaturityHdr"}).executeAsync({physicalid:n["@id"]||n.id})}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return s}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationCreateChange",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a){var o={onCompleteCallback:function(e){console.log("................................");var i=t.processChangeActionInContext(e).processData;console.log(i),require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],function(e){e.addNodesInLayout(i)})},onFailureCallback:function(){console.log("ERROR : FAILED CREATE CA")},createNewChange:function(){e.prototype.execute(o.onCompleteCallback)},createNewChangeOrderInContext:function(e){let t=e.parentID;console.log("launchCreateChangeOrderDialog ............................");let o={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:a.CHG_NEW_CHANGE_ORDER_FORM,type:"Change Order",silentMode:!1,overlay:!0,options:{typeName:"Change Order",preferedType:"Change Order",select:[],parentPIDs:[t]},events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Order"};require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)})},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new n).CreateNew(o)},createNewChangeActionInContext:function(e){let t=widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action";let o=e.parentID,r={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:a.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:t,select:[],parentPIDs:[o]},events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Action"};require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)})},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new n).CreateNew(r)}};return o}),define("DS/ENOChgGovernanceUX/scripts/components/applicabilityView/ChgApplicabilityView",["UWA/Class/View","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i){"use strict";return e.extend({container:"",setup:function(){},build:function(){UWA.is(this.container)&&this.getBody().inject(this.container)},getBody:function(){var e=UWA.createElement("div",{id:"applicability-body"}),t=new(this._createView_Applicability());return t.container=e,t.model=this.model,t.render(),e},_createView_Applicability:function(){return e.extend({tagName:"div",className:"generic-detail6",render:function(){var e=this.container,i=new UWA.Element("div");i.setAttributes({id:"FacetDivForApplicabilityContext"}),i.setStyles({height:"100%"}),e.addContent(i);var n,a=model.get("objectId");n=t.getGlobalVariable().isNative?"Native":t.getGlobalVariable().is3DSpace?"3DSpace":"Dashboard",require(["DS/CfgEvolutionUX/CfgEvolutionLayoutFactory"],function(e){var o={mode:"Applicability",objectid:a,parent:i,environment:n};o.tenant=t.getGlobalVariable().tenant;e.create(o);"3DSpace"==n&&(enoviaServerFilterWidget.fixForSearchInOpener=!0)})}})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_Toolbar_AddIssue,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_Toolbar_RemoveIssue,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/issue/ChgCRIssueDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,a,o,r,s,l,c,d,u){"use strict";var g=u.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});let p=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",g)},loadIssueData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName;""==e.maturityNLS&&(e.maturityNLS=e.stateNLS);let a=e.maturityNLS;var o=this.getCustomTooltip(e);return new i({label:e.title,subLabel:n,description:a,grid:e,customTooltip:o,icons:[e.icon],thumbnail:e.thumbnail,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.parentCRId;var o=e[0].id,r={resolvedBy:[]};r.physicalId=o,r.resolvedBy.push({physicalId:a});let c=document.getElementById("outer-issue-grid-div");"undefined"!=c&&null!=c&&d.mask(c),s.updateExistingIssue(o,r).then(function(e){s.getIssueDetails(o).then(function(n){let a=n.body;l.processedChangeRequestNewIssueList(a).then(function(n){p.prototype.addNodesInLayoutModel(t.treeDocument,n),i(e)}),d.unmask(c)})},function(e){d.unmask(c),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.parentCRId;var r=e[0].id,l={resolvedBy:[]};l.physicalId=r,l.resolvedBy.push({physicalId:a});let u=document.getElementById("outer-issue-grid-div");"undefined"!=u&&null!=u&&d.mask(u),s.removeExistingIssue(r,l).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);c.success(o.CHG_GOV_Issue_Remove_Success),d.unmask(u)},function(e){d.unmask(u),n()})})},addNodesInLayoutModel:function(e,t){let i=p.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,a;n=e,a=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;a(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return p}),define("DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesServices",["UWA/Core","UWA/Class","DS/PlatformAPI/PlatformAPI","DS/EditPropWidget/models/EditPropModel","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,a){"use strict";return t.singleton({init:function(e){},getSecurityContext:function(){return{SecurityContext:a.getGlobalVariable().mySecurityContext}},getpropOptions:function(e){var t=this,i=[e.FACET_PROPERTIES];return{typeOfDisplay:e.ALL,selectionType:e.NO_SELECTION,readOnly:!1,extraNotif:!0,editMode:!1,facets:i,context:{getSecurityContext:function(){return t.getSecurityContext()}}}},getPropModel:function(e){var t=[];if(e instanceof Array)for(var o=0;o<e.length;o++){var r=new n({metatype:e[o].metatype,objectId:e[o].physicalId,source:a.getGlobalVariable().serviceName,tenant:a.getGlobalVariable().tenant});r.addEvent("onSave",function(e){i.publish("CO-Properties-Update",this)}),t.push(r)}return t}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRRelatedScopeGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require"],function(e,t,i,n,a,o,r){"use strict";var s={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const a=[];let o=!1;const l=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();l.length>1&&(o=!0);const c=l.map(e=>e.options.grid.id),d=(l.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),r("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),u={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"},g=d.openWith(u);o?(a.push(n.createPropertyPushItem(c)),a.push(s.getRelationalExplorerMenu(c)),a.push(s.getMaturityMenu(e)),a.push(s.getTransferMenu(e)),t(a)):(a.push(n.createPropertyPushItem(c)),a.push(s.getRelationalExplorerMenu(c)),g.then(i=>{i&&a.push(i),a.push(s.getMaturityMenu(e)),a.push(s.getTransferMenu(e)),t(a)}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getMaturityMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){e.cellInfos.nodeModel.options.grid;for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],o=[],r=0;r<n.length;r++)a.push(n[r].options.grid),o.push({physicalid:n[r].options.grid["@id"]||n[r].options.grid.id});new i({context:a,ID:"MaturityHdr"}).executeAsync(o)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return s}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){var t=Object.create(null);return t.toolbar=null,t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_AddMember,position:"far",category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAAddMemberLayout",func:"launchAddMemberPanel"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Remove,position:"far",category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout",func:"removeHandler"}}},{id:"filter",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"filter",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Filter,position:"far",category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMemberFilterLayout",func:"launchFilterMemberPanel"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderMenuSubscriber",["DS/ENOChgServices/scripts/components/ChgCommonDailog","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI","DS/UIKIT/SuperModal","DS/ENOChgServices/scripts/services/ChgNativeInitService"],function(e,t,i,n,a,o,r,s){return{init:function(e){this._modelForIdCard=e,this._subscribeToModelEvents()},_subscribeToModelEvents:function(){var i=this;i.modelEvents=i._modelForIdCard.get("modelEvents"),i.modelEvents.subscribe({event:"chg-idcard-dropdown-menu-action"},function(n){if(console.log("in model event subscribe: chg-idcard-dropdown-menu-action"),n.id){var a={};switch(n.id){case"chgHold":a={chgPhysicalId:i._modelForIdCard.id,chgType:i._modelForIdCard.get("isKindOfType"),btnId:n.id,boxTitle:n.text,subTitle:t.CHG_CO_Hold_SubTitle,txtPlaceHolder:t.CHG_CO_Hold_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};break;case"chgResume":a={chgPhysicalId:i._modelForIdCard.id,chgType:i._modelForIdCard.get("isKindOfType"),btnId:n.id,boxTitle:n.text,subTitle:t.CHG_CO_Resume_SubTitle,txtPlaceHolder:t.CHG_CO_Resume_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};break;case"chgCancel":a={chgPhysicalId:i._modelForIdCard.id,chgType:i._modelForIdCard.get("isKindOfType"),btnId:n.id,boxTitle:n.text,subTitle:t.CHG_CO_Cancel_SubTitle,txtPlaceHolder:t.CHG_CO_Cancel_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};break;case"chgCAWorkUnder":let e={btnId:n.id,chgPhysicalId:i._modelForIdCard.id};DoneCallback(e);break;case"chgBOMSync":let o={btnId:n.id,chgPhysicalId:i._modelForIdCard.id};DoneCallback(o)}"chgCAWorkUnder"!=n.id&&"chgBOMSync"!=n.id&&e.launchInfoDailog(a)}}),DoneCallback=function(l){var c=l.btnId,d=l.chgType,u={};if(c){switch(c){case"chgHold":"ChangeOrder"==d?n.handleContextMenuClickHold(l).then(function(e){i._modelForIdCard.set("onHold",!0),u=a.processedChangeOrderPutOnHOld(e),o.publish("CO-AccessBit-Update",u),i.modelEvents.publish({event:"idcard-header-update",data:u})}):"ChangeRequest"==d?n.handleContextMenuClickHoldForCR(l).then(function(e){i._modelForIdCard.set("onHold",!0),u=a.processedChangeRequestPutOnHoldResumeCancel(e),o.publish("CO-AccessBit-Update",u),i.modelEvents.publish({event:"idcard-header-update",data:u})}):"ChangeAction"==d&&n.handleContextMenuClickHoldForCA(l).then(function(e){s.takeOffFromWorkUnder(),i._modelForIdCard.set("onHold",!0),u=a.processedChangeActionPutOnHoldResumeCancel(e),o.publish("CO-AccessBit-Update",u),i.modelEvents.publish({event:"idcard-header-update",data:u})});break;case"chgResume":"ChangeOrder"==d?n.handleContextMenuClickResume(l).then(function(e){i._modelForIdCard.set("onHold",!1),u=a.processedChangeOrderOnResume(e),o.publish("CO-AccessBit-Update",u),i.modelEvents.publish({event:"idcard-header-update",data:u})}):"ChangeRequest"==d?n.handleContextMenuClickResumeForCR(l).then(function(e){i._modelForIdCard.set("onHold",!1),u=a.processedChangeRequestPutOnHoldResumeCancel(e),o.publish("CO-AccessBit-Update",u),i.modelEvents.publish({event:"idcard-header-update",data:u})}):"ChangeAction"==d&&n.handleContextMenuClickResumeForCA(l).then(function(e){i._modelForIdCard.set("onHold",!1),u=a.processedChangeActionPutOnHoldResumeCancel(e),o.publish("CO-AccessBit-Update",u),i.modelEvents.publish({event:"idcard-header-update",data:u})});break;case"chgCancel":"ChangeOrder"==d?n.handleContextMenuClickCancel(l).then(function(e){i._modelForIdCard.set("onHold",!1),u=a.processedChangeOrderOnCancel(e),o.publish("CO-AccessBit-Update",u),i.modelEvents.publish({event:"idcard-header-update",data:u}),i.modelEvents.publish({event:"idcard-header-update-maturity",data:u})}):"ChangeRequest"==d?n.handleContextMenuClickCancelForCR(l).then(function(e){u=a.processedChangeRequestPutOnHoldResumeCancel(e),o.publish("CO-AccessBit-Update",u),i.modelEvents.publish({event:"idcard-header-update",data:u}),i.modelEvents.publish({event:"idcard-header-update-maturity",data:u})}):"ChangeAction"==d&&n.handleContextMenuClickCancelForCA(l).then(function(e){s.takeOffFromWorkUnder(),u=a.processedChangeActionPutOnHoldResumeCancel(e),o.publish("CO-AccessBit-Update",u),i.modelEvents.publish({event:"idcard-header-update",data:u}),i.modelEvents.publish({event:"idcard-header-update-maturity",data:u})});break;case"chgCAWorkUnder":console.log("Work under menu clicked...!"),n.handleContextMenuClickWorkUnder(l).then(function(e){o.publish("change-action-work-under",e)});break;case"chgBOMSync":n.handleContextMenuClickBOMSyncForCA(l).then(function(e){var i,n=new r({closable:!0,renderTo:widget.body}),a="";e&&"true"===e.OPERATION_STATUS?a=t.ECM_CA_EBOMSync_Successful:e&&"false"===e.OPERATION_STATUS&&(a=t.ECM_CA_EBOMSync_Failure),i="<p>\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--h6></h6--\x3e\t\t\t\t\t\t\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>"+a+"</li>\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t\t</p>",n.dialog({body:i,title:t.ECM_CA_Action_EBOMSync_CollabStatus,buttons:[{className:"primary",value:t.ECM_CA_Collab_Dialog_Done,action:function(e){e.hide()}}]})});break;default:console.log("Match not found")}"chgBOMSync"!=c&&e.closeDialog()}},CancelCallback=function(t){e.closeDialog(t)}}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesView",["DS/ENOChangeActionUX/scripts/Views/CANewProposedView","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgDataService","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n){"use strict";return{createProposedChangesView:function(a){var o={};o=UWA.merge(o,a),this._modelEvents=o.contextDetails._modelEvents,this.id=o.id;let r=o.contextDetails.title;var s="pid:"+o.id,l="";let c={id:s,name:o.contextDetails.name,title:r,description:o.contextDetails.description,severity:o.contextDetails.severity,maturity:o.contextDetails.maturity,invokedFrom:"gov",isSelected:o.isSelected},d=o.target,u=new new e._createView_TestProposed("div","test-proposed-facet",!0,c);u.container=d,i.getChangeActionUserAccess(o.id).then(function(e){l=e.data[0],l=t.processAccessBitCA(l),u.model={id:s,name:o.contextDetails.name,title:r,description:o.contextDetails.description,severity:o.contextDetails.severity,maturity:o.contextDetails.maturity,invokedFrom:"gov",isSelected:o.isSelected,get:function(e){return"userAccess"==e?l:"id"==e?s:"synopsis"===e?r:void 0},fetch:function(e){console.log("dummy fetch called...!"),n.publish("load-dependency"+widget.id,s),e.onComplete()}},d.addContent(u.render())})}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/decision/ChgCRDecisionfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"decision-CR-container"}))},updateFacet:function(){var e=UWA.createElement("div",{html:r.CHG_GOV_Empty_DataGrid_PlaceHolder});document.getElementById("decision-CR-container").setContent(""),e.inject(this.elements.container)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){var t=Object.create(null);return t.toolbar=null,t.sortingData={menu:[{type:"PushItem",title:e.CHG_GOV_DataGrid_Column_Severity,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"sortBySeverity"}},{type:"PushItem",title:e.CHG_GOV_DataGrid_Column_Maturity,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"sortByMaturity"}}]},t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCOTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveCO,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"filterView",argument:{filter:"activeCO"}},tooltip:e.CHG_Filter_ActiveCO_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveCO,action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"filterView",argument:{filter:"inactiveCO"}},tooltip:e.CHG_Filter_InactiveCO_Def}]},t.writetoolbarDefination=function(){return{entries:[{id:"filter",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"},{id:"sorting",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"sorting",fontIconFamily:1},value:this.sortingData},position:"far",tooltip:e.CHG_TOOLTIP_SORT,category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridContextualMenu",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgInfraService","require"],function(e,t,i,n,a,o,r,s,l,c,d,u){"use strict";let g={showRMBMenuOnGrid:function(e){return new Promise(function(t,n){let a=[],o=!1,r=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();r.length>1&&(o=!0);let s=r.map(e=>e.options.grid.id);a.push(i.createPropertyPushItem(s)),a.push(g.getRelationalExplorerMenu(e));const l=u("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),c=e.cellInfos.nodeModel.options.grid.id;let p={objectId:c,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"changeAction"},h=l.openWith(p),m=null;m=l.getUserAccess("pid:"+c);let C=[];o||(C.push(h),C.push(m)),Promise.all(C).then(i=>{if(i[0]&&a.push(i[0]),!o&&i[1]){let t=i[1].userAccess;"true"!=t.Promote&&"true"!=t.Demote||a.push(g.getMaturityMenu(e)),"true"==t.Transfer&&a.push(g.getTransferMenu(e))}a.push(d.getCopyLink(r)),t(a)})})},getTransferMenu:function(t){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){for(var i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getRelationalExplorerMenu:function(t){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){for(var i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++){var o=i[a].options.grid.id;n.push(o)}e.openRelationalExplorer(n)})}}}},getMaturityMenu:function(t){return{type:"PushItem",title:e.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(e){for(var i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],o=[],r=0;r<i.length;r++)a.push(i[r].options.grid),o.push({physicalid:i[r].options.grid["@id"]||i[r].options.grid.id});new n({context:a,ID:"MaturityHdr"}).executeAsync(o)}}}},makeCopyLinkObject:function(e){var i={protocol:"3DXContent",data:{items:[]}};return i.data.items.push({envId:t.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),i},showNotification:function(e,t,i,n,a,o,l){var c={level:e,title:t,subtitle:i,message:n,sticky:a,allowUnsafeHTML:l||!1};window.notifs||(window.notifs=r,s.setNotificationManager(window.notifs)),o?s.inject(o):s.elements.container.isInjected()||s.inject(),window.notifs.addNotif(c)}};return g}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgErrors","require"],function(e,t,i,n,a,o,r,s,l,c,d,u){"use strict";var g=c.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),p=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"crImpactAnalysis",useAsyncPreExpand:!0});return e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",g)},loadImpactAnalysisData:function(e,t){e.prepareUpdate();var n=this.createTreeDocumentNodeModel(t);e.addRoot(n),n.length>1&&"true"==a.getGlobalVariable().CHG_IA_COLUMN_ASSESSMENT&&"Cancelled"!=n[0].options.grid.maturity&&e.addRoot(new i({label:o.CHG_GOV_IA_LastColumn_label,grid:{isLastNode:!0,id:"ia_Total",title:o.CHG_GOV_IA_LastColumn_label}})),e.pushUpdate()},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;var n=this.createCustomNameField(e);e.ia_name=n;var o,r=e.name+" | "+e.ownerFullName,s=e.maturityNLS,l=this.getStatusBarIcons(e),c=this.statusbarIconsTooltips(e);o=a.getGlobalVariable().is3DSpace?UWA.String.escapeHTML(e.title):e.title;var d=this.getCustomTooltip(e);return new i({label:o,subLabel:r,description:s,grid:e,icons:[e.icon],thumbnail:e.thumbnail,contextualMenu:["dummy placeholder"],customTooltip:d,statusbarIcons:l,statusbarIconsTooltips:c,useAsyncPreExpand:!0})},getStatusBarIcons:function(e){var t=[];return"Cancelled"==e.maturity&&t.push("block"),t},statusbarIconsTooltips:function(e){var t=[];return"Cancelled"==e.maturity&&t.push(e.cancelComment),t},createCustomNameField:function(e){var t=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(t);var i=new UWA.Element("div",{class:"iconsDiv"});if("Cancelled"==e.maturity){var n=new UWA.Element("div",{class:"gridIconContainer",title:e.cancelComment});UWA.createElement("div",{class:"fonticon fonticon-block"}).inject(n),n.inject(i)}return i.inject(t),t.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{var l=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}s.inject(o);var c=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),c.inject(n),n.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var a=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),a.inject(i),i.outerHTML},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},updateNodeIndexed:function(e,t){console.log(t)},addNodeInModelFromId:function(e){const t=this;let n=!1;0==this.treeDocument.getChildren().length&&this.treeDocument._modelEvents.publish({event:"treeNotEmpty"});const r=this.contextDetails.id;s.getImpactAnalysisFromId(e).then(e=>{let s=l.processCRImpactAnalysis(e,r);var c=p.prototype.createTreeDocumentNodeModel(s);if(t.treeDocument.prepareUpdate(),0==t.treeDocument.getRoots().length)t.treeDocument.addRoot(c);else for(var u=c.length-1;u>=0;u--)t.treeDocument.addRoot(c[u],0);t.treeDocument.pushUpdate();for(let e of t.treeDocument.getAllDescendants())if("ia_Total"===e.options.grid.id){n=!0;break}!1===n&&"true"==a.getGlobalVariable().CHG_IA_COLUMN_ASSESSMENT&&"Cancelled"!=c[0].options.grid.maturity&&t.treeDocument.addRoot(new i({label:o.CHG_GOV_IA_LastColumn_label,grid:{isLastNode:!0,id:"ia_Total",title:o.CHG_GOV_IA_LastColumn_label}})),d.warn(o.CHG_CUSTOM_COLUMN_WARN_IA,!0)})},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,a;n=e,a=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;a(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return p}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgAddMemberView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"chg-add-member",tagName:"div",className:"chg-add-member",setup:function(){this.template='                                                <div class="'+this.getClassNames("-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-body")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table class="add-member-table table">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-change-coordinator")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Change_Coordinator+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-change-coordinator-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-change-coordinator-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search change-coordinator-field-search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-approver")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Approver+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-approver-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-approver-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search approver-field-search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-informed-user")+' " >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Follower+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-informed-user-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-informed-user-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search informed-user-field-search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-button")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t</div>                                                </div>',this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"click .change-coordinator-field-search":function(){this.dispatchEvent("searchChangeCoordinator",arguments)},"click .approver-field-search":function(){this.dispatchEvent("searchApprover",arguments)},"click .informed-user-field-search":function(){this.dispatchEvent("searchInformedUser",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/model/facets/changeOrchestration/ChgOrchestrationDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";var h=g.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"coOrchestration",useAsyncPreExpand:!0});return e.onPreExpand(function(e){var t=e.target.options.grid.id;console.log("call for children"+e.target),t&&s.getChangeOrchestration(t).then(function(t){l.processedChangeOrchestrationSummaryList(t).then(function(t){var i=m.prototype.createTreeDocumentNodeModel(t);if(e.target.hasChildren())for(var n=!1,a=e.target.getChildren(),o=0;o<i.length;o++){n=!1;for(var r=0;r<a.length;r++)if(a[r].options.grid.id==i[o].options.grid.id){n=!0;break}n||e.target.addChild(i[r])}else e.target.addChild(i);e.target.preExpandDone()})},function(e){return Promise.reject(e)})}),e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},loadChangeOrchestrationData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),a.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&u.isMasked(e)&&u.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomNameField(e);e.chgObjName=t;var n=this.createCustomSeverity(e);e.sev=n;var o=this.createCustomChangeCoordinatorField(e);e.chgObjCoordinator=o;var r=this.createCustomOwnerField(e);e.chgObjOwner=r;var s,l=e.name+" | "+e.ownerFullName,c=e.maturityNLS,d=this.getStatusBarIcons(e),u=this.statusbarIconsTooltips(e),g=this.getCustomTooltip(e);return s=a.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:s,subLabel:l,description:c,children:e.isKindOfChangeAction?null:[],grid:e,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],statusbarIcons:d,statusbarIconsTooltips:u,customTooltip:g,useAsyncPreExpand:!0})},createCustomNameField:function(e){var t=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(t);var i=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var n=new UWA.Element("div",{class:"gridIconContainer",title:o.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(n),n.inject(i)}return i.inject(t),t.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var a=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),a.inject(i),i.outerHTML},createCustomChangeCoordinatorField:function(e){var t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){var i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",o=a.getGlobalVariable().computeSwymUrl(n),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:o});else{var l=r.getAvatarDetails(e.changeCoordinatorFullName);(s=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}s.inject(i);var c=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),c.inject(t)}return t.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{var l=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}s.inject(o);var c=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),c.inject(n),n.outerHTML},getStatusBarIcons:function(e){var t=[];return"Low"==e.severity?t.push("level-low"):"Medium"==e.severity?t.push("level-medium"):"High"==e.severity&&t.push("level-high"),"TRUE"==e.ecm_change_on_hold&&t.push("pause"),t},statusbarIconsTooltips:function(e){var t=[];return t.push(e.severityNLS),"TRUE"==e.ecm_change_on_hold&&t.push(o.CHG_GOV_TOOLTIP_HOLD),t},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},updateNodeIndexed:function(e,t){console.log(t)},addNewChildren:function(e){var t=this;if(this.treeDocument.getSelectedNodes().length>1)d.error(o.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else{this.treeDocument.getSelectedNodes().length?this.treeDocument.getSelectedNodes()[0].options.grid.id:this.contextID;var i=document.getElementById("outer-orchestration-grid-div");"undefined"!=i&&null!=i&&u.mask(i),"Change Order"==e.type?s.getChangeOrderInfo(e.objectID).then(function(e){l.processedChangeOrchestrationSummaryList(e).then(function(e){m.prototype.addNodesInLayoutModel(t.treeDocument,e,!0),u.unmask(i)})},function(e){u.unmask(i)}):"Change Action"==e.type&&s.getNewCADetails(e.objectID).then(function(e){var t=l.processChangeActionInContext(e).processData;console.log(t),require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],function(e){e.addNodesInLayout(t),u.unmask(i)})},function(e){u.unmask(i)})}},addExistingChildren:function(e){var t,i=this;if(this.treeDocument.getSelectedNodes().length>1)d.error(o.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else{t=this.treeDocument.getSelectedNodes().length?this.treeDocument.getSelectedNodes()[0].options.grid.id:this.contextID;var n=document.getElementById("outer-orchestration-grid-div");"undefined"!=n&&null!=n&&u.mask(n),s.addExistingChangeOrchestration(t,e).then(function(e){l.processedChangeOrchestrationSummaryList(e).then(function(e){m.prototype.addNodesInLayoutModel(i.treeDocument,e),u.unmask(n)})},function(e){u.unmask(n)})}},addNodesInLayoutModel:function(e,t,i=!1){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var n,a,o=m.prototype.createTreeDocumentNodeModel(t);if(e.getSelectedNodes().length?(n=!1,a=e.getSelectedNodes()[0]):n=!0,n){if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(o);else for(var r=o.length-1;r>=0;r--)e.addRoot(o[r],0);if(e.pushUpdate(),i)try{let e=p("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var s=t[0];e.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:s,View:"Change Orchestration"})}catch(e){console.log(e)}}else if(null==a.getChildren())e.addRoot(o,0);else{if(a.prepareUpdate(),0==a.getChildren().length)a.addChild(o);else for(r=o.length-1;r>=0;r--)a.addChild(o[r],0);a.pushUpdate(),a.isExpanded()||a.expand()}},removeChildren:function(){var e=this,t=e.treeDocument.getSelectedNodes();if(t.length){var i,n,r=t[0].getParent().options.grid.id;void 0===r?(i=e.contextID,n=!0):(i=r,n=!1);var l=[];l.push({id:t[0].options.grid.id,type:t[0].options.grid.type});for(var c=1;c<t.length;c++){if(r!==t[c].getParent().options.grid.id){if(d.error(o.CHG_GOV_ChangeOrchestration_Toolbar_Invalid_Selection),a.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&u.isMasked(e)&&u.unmask(e)}return}l.push({id:t[c].options.grid.id,type:t[c].options.grid.type})}s.removeChangeOrchestration(i,l).then(function(i){if(n){for(var r=0;r<t.length;r++)e.treeDocument.removeRoot(t[r]);0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"})}else{var s=t[0].getParent();s.prepareUpdate();for(r=0;r<t.length;r++)s.removeChild(t[r]);s.pushUpdate()}if(a.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&u.isMasked(e)&&u.unmask(e)}d.success(o.CHG_GOV_ChangeOrchestration_Toolbar_Remove_Success)},function(e){if(a.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&u.isMasked(e)&&u.unmask(e)}})}else d.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,a;n=e,a=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;a(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return m}),define("DS/ENOChgGovernanceUX/scripts/model/facets/relatedScope/ChgRelatedScopeDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,a,o,r,s,l,c,d,u,g){"use strict";let p=g.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),h=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",p)},loadRelatedScopeData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.previewicon,a=e.name+" | "+e.ownerFullName,o=e.currentNLS;var r=this.getCustomTooltip(e);return new i({label:e.title,subLabel:a,description:o,grid:e,customTooltip:r,icons:[e.icon],thumbnail:n,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.parentCRId,o=document.getElementById("outer-relatedScope-grid-div");"undefined"!=o&&null!=o&&u.mask(o),s.updateExistingCORelatedScope(a,e).then(function(e){var n={contextid:a,length:e.data.length};d.publish("relatedScope:update",n);let r=[];e&&(r=e.data),h.prototype.addNodesInLayoutModel(t.treeDocument,r),i(e),u.unmask(o)},function(e){u.unmask(o),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.parentCRId,r=document.getElementById("outer-CO-relatedScope-grid-div");"undefined"!=r&&null!=r&&u.mask(r),s.removeExistingCORelatedScope(a,e).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);if(0==t.treeDocument.getAllDescendants().length){var s={contextid:a,length:t.treeDocument.getAllDescendants().length};d.publish("relatedScope:update",s)}c.success(o.CHG_GOV_relatedScope_Remove_Success),u.unmask(r)},function(e){u.unmask(r),n()})})},addNodesInLayoutModel:function(e,t){let i=h.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,a;n=e,a=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;a(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return h}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgServices/scripts/services/ChgDataService","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"flowdwon-CA-container"}))},updateFacet:function(){var e=this;o.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var n={id:t.get("objectId")};i.getObjectTypeInformation(n.id).then(function(t){if("Change Action"==t){let t=n.id;i.getChangeActionUserAccess(t).then(function(e){e.data[0].id,e.data[0]});var a=e.elements.container;let s=c("DS/ENOChangeActionUX/scripts/Views/CANewProposedView");s&&s.addProposedWithFlowdown({target:a});let l=()=>{a.empty(),s.addProposedWithFlowdown({target:a})};r.unsubscribe(`CA_Flowdown:${widget.id}`),r.subscribe(`CA_Flowdown:${widget.id}`,function(e){l()}),o.unmask(e.elements.container)}})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersFeaturesUtil",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i){"use strict";var n={showRMBMenuOnGrid:function(e,t){return new Promise(function(a,o){var r="false",s={},l=i("DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil"),c=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),d=c[0].options.grid.roles;s.currentObjType=c[0].options.grid.type;var u=0;c.length>1&&(r="true"),d.indexOf("Approver")>=0?(s.Approver="DISCONNECT",u++):s.Approver="CONNECT",d.indexOf("Coordinator")>=0?(s.Coordinator="DISCONNECT",u++):s.Coordinator="CONNECT",d.indexOf("Follower")>=0?(s.Follower="DISCONNECT",u++):s.Follower="CONNECT";var g=d.indexOf("Owner")>=0||d.indexOf("Originator")>=0;if(0==g&&1==u&&(s.showConfirmation=!0),"false"==r)var p=i("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout");var h=[],m=t.cellInfos.nodeModel.options.grid.id,C=t.cellInfos.nodeModel.options.grid.type,v=t.cellInfos.nodeModel.options.grid.name,f=t.cellInfos.nodeModel.options.grid.displayType;"Group"==C&&(C="foaf:Group",v=t.cellInfos.nodeModel.options.grid.fullName,f=t.cellInfos.nodeModel.options.grid.type);var b={objectId:m,objectType:C,displayName:v,displayType:f,facetName:"dependency"};[].push(b);var w=i("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").openWith(b),D=[];D.push(w),Promise.all(D).then(function(i){"Person"==s.currentObjType&&(1==p.setCoordinatorAccessBit&&(1!=l.isChangeCoordinatorConnected||1==l.isChangeCoordinatorConnected&&"DISCONNECT"==s.Coordinator)&&h.push(n.getChangeCoordinatorMenu(e,t,s)),1==p.ManageFollowersAccessBit&&h.push(n.getFollowerMenu(e,t,s))),"Group"==s.currentObjType&&1==p.ManageFollowersAccessBit&&h.push(n.getFollowerMenu(e,t,s)),1==p.setCoordinatorAccessBit&&0==g&&h.push(n.getDeleteMenu(e,t,s)),i[0]&&h.push(i[0]),a(h)})})},getChangeCoordinatorMenu:function(e,i,n){var a={type:"CheckItem",title:t.CHG_Member_Menu_Change_Coordinator,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout"],function(e){console.log("Coordinator : "+n.Coordinator),n.role="Coordinator",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Coordinator&&(a.state="selected"),a},getFollowerMenu:function(e,i,n){var a={type:"CheckItem",title:t.CHG_Member_Menu_Follower,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout"],function(e){console.log("Follower : "+n.Follower),n.role="Follower",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Follower&&(a.state="selected"),a},getDeleteMenu:function(e,i,n){return{type:"PushItem",title:t.CHG_Member_Menu_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout"],function(e){console.log("remove "),n.role=[],"DISCONNECT"==n.Follower&&n.role.push("Follower"),"DISCONNECT"==n.Approver&&n.role.push("Approver"),"DISCONNECT"==n.Coordinator&&n.role.push("Coordinator"),n.showConfirmation=!0,e.updatePersonRole(i.cellInfos,n)})}}}}};return n}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){var t=Object.create(null);return t.toolbar=null,t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_AddMember,position:"far",category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRAddMemberLayout",func:"launchAddMemberPanel"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Remove,position:"far",disabled:!0,category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout",func:"removeHandler"}}},{id:"filter",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"filter",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Filter,position:"far",category:"View",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMemberFilterLayout",func:"launchFilterMemberPanel"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete",["UWA/Core","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/UIKIT/Mask","require"],function(e,t,i,n,a,o,r){"use strict";return{deleteNodes:function(r,s,l,c){for(var d=n.CHG_GOV_Delete_Info_Content+"<br><br>",u=[],g=0;g<r.length;g++){var p=r[g];d+=e.String.escapeHTML(p.nodeTitle)+" ("+p.nodeName+")<br>";var h={physicalid:p.physicalid};u.push(h)}var m=[{label:n.CHG_GOV_OK_Button_Label,handler:function(){"undefined"!=s&&null!=s&&o.mask(s),t.deleteObjectStructure(u).then(function(e){if(console.log(e),e.results.length>0){for(var t=e.results,a=[],r=0;r<t.length;r++){var d=t[r].physicalid;a.push(d)}l(a,c),i.success(n.CHG_GOV_ChangeOrchestration_Toolbar_Delete_Success)}else i.warn(n.CHG_GOV_ChangeOrchestration_Toolbar_Delete_Failure);o.unmask(s)},function(e){return o.unmask(s),Promise.reject(e)}),a.closeDialog()},className:"primary"},{label:n.CHG_GOV_CANCEL_Button_Label,handler:function(){a.closeDialog()},className:"default"}],C={title:n.CHG_GOV_Delete_Info_Title,content:d,buttonArray:m};a.launchInfoDailog(C)}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/contributors/ChgCRContributorsDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r,s,l,c){"use strict";let d=e.extend({init:function(e,t){this.parentCRId=e,this.impactAnalysisId=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},loadContributor:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t="";e.icon,e.roleList;return"Person"==e.type?(t=this.getPersonImageDiv(e,!0)).addClassName("chg-member-profile-picture"):t=e.thumbnail,new i({label:e.personFullName,grid:e,icons:[e.icon],thumbnail:t})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.name+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=o.getAvatarDetails(e.personFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(r);let l=UWA.createElement("span",{class:"userName",html:e.personFullName});return r.inject(n),l.inject(n),n.outerHTML},getPersonImageDiv:function(e,t){var i="/api/user/getpicture/login/"+e.name+"/format/normal";i=a.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),r="";if(a.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{var s=o.getAvatarDetails(e.personFullName);r=UWA.createElement("div",{html:s.avatarStr}),1==t?(r.addClassName("chg-member-profile-picture"),r.addClassName("chg-team-profile-text")):r.addClassName("avatarIcon"),r.style.setProperty("background",s.avatarColor)}return r.inject(n),n},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.impactAnalysisId,o=t.parentCRId,l=document.getElementById("outer-contributor-grid-div");"undefined"!=l&&null!=l&&s.mask(l),r.updateExistingContributors(o,a,e).then(function(e){let n=[];e&&(n=e.data),d.prototype.addNodesInLayoutModel(t.treeDocument,n),i(e),s.unmask(l)},function(e){s.unmask(l),n(e)})})},addNodesInLayoutModel:function(e,t){let i=d.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate(),e.getRoots().length>0&&e._modelEvents.publish({event:"treeNotEmpty"})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.impactAnalysisId,o=t.parentCRId,d=document.getElementById("outer-contributor-grid-div");"undefined"!=d&&null!=d&&s.mask(d),r.updateExistingContributors(o,a,e).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);0==t.treeDocument.getRoots().length&&t.treeDocument._modelEvents.publish({event:"treeEmpty"}),l.success(c.CHG_Contributors_Toolbar_RemoveContributor_suceess),s.unmask(d)},function(e){s.unmask(d),n()})})}});return d}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCreateChangeAction",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require"],function(e,t,i,n,a){return{launchCreateChangeActionDialog:function(o){console.log("launchCreateChangeActionDialog ............................");let r=widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action",s={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:i.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:r,select:[]},events:{onSuccess:function(e){o&&(o.isClickProcessing=!1);var t=document.getElementsByClassName("moduleWrapper")[0];null==t&&"undefined"==t||n.mask(t);let i=e.result[0].identifier,r={};r.context=i,r.type="ChangeAction";let s=a("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),l=a("DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil");s.launchPropertyPanelContext(r),l.displayObjectInfoInsideIDcard(i,!0)},onFailure:function(e){o&&(o.isClickProcessing=!1),console.log("onFailure..............."+e)},onCancel:function(e){o&&(o.isClickProcessing=!1)}}};(new e).CreateNew(s)}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/TreeModel/BaseFilter","DS/UIKIT/Mask"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";let u=c.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),g=e.extend({init:function(e,t){this.parentCRId=e,this.impactAnalysisId=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"crImpactBasis",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",u)},loadImpactBasisData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName,o=e.currentNLS;var r,s=this.getCustomTooltip(e);return r=a.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:r,subLabel:n,description:o,grid:e,icons:[e.icon],thumbnail:e.previewicon,contextualMenu:["dummy placeholder"],useAsyncPreExpand:!0,customTooltip:s})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.impactAnalysisId,o=t.parentCRId,r=document.getElementById("outer-impactBasis-grid-div");"undefined"!=r&&null!=r&&d.mask(r),s.updateExistingImpactBasis(o,a,e).then(function(e){let n=[];e&&(n=e.data);let a=[];for(let e of n)e.reasonForChange="",a.push(e);g.prototype.addNodesInLayoutModel(t.treeDocument,a),i(e),d.unmask(r)},function(e){d.unmask(r),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.impactAnalysisId,r=t.parentCRId,c=document.getElementById("outer-impactBasis-grid-div");"undefined"!=c&&null!=c&&d.mask(c),s.updateExistingImpactBasis(r,a,e).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);l.success(o.CHG_GOV_ImpactBasis_Remove_Success),d.unmask(c)},function(e){d.unmask(c),n()})})},addNodesInLayoutModel:function(e,t){let i=g.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,a;n=e,a=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;a(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return g}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.toolbar=null,t.sortingData={menu:[{type:"PushItem",title:e.CHG_GOV_DataGrid_Column_Severity,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"sortBySeverity"}},{type:"PushItem",title:e.CHG_GOV_DataGrid_Column_Maturity,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"sortByMaturity"}}]},t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveCR,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"filterView",argument:{filter:"activeCR"}},tooltip:e.CHG_Filter_ActiveCR_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveCR,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"filterView",argument:{filter:"inactiveCR"}},tooltip:e.CHG_Filter_InactiveCR_Def}]},t.writetoolbarDefination=function(){return{entries:[{id:"filter",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"},{id:"sorting",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"sorting",fontIconFamily:1},value:this.sortingData},position:"far",tooltip:e.CHG_TOOLTIP_SORT,category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/view/facets/decision/ChgDecisionfacet",["UWA/Core","DS/ENOChgGovernanceUX/scripts/components/decisionView/ChgDecisionView","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r,s){"use strict";return i.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"DecisionContainer",class:"decisions-facet-container chg-decisions-facet-container"}))},updateFacet:function(){o.mask(this.elements.container);var e=this.getModel();if(!e||""==e.get("objectId"))return o.unmask(this.elements.container),!1;this.elements.container.setContent("");var i={id:e.get("objectId"),target:this.elements.container};t.createDecisionView(i)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",["UWA/Core","DS/Tweakers/TweakerBase","DS/Utilities/Dom","DS/Utilities/Utils","DS/Core/PointerEvents","DS/Utilities/KeyboardUtils","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovExpandInputTextBox"],function(e,t,i,n,a,o,r){"use strict";var s=t.inherit({name:"TweakerExpandInput",publishedProperties:{displayStyle:{defaultValue:"TextBox",type:"string"},value:{defaultValue:"",type:"string",advancedSetter:!0},valueType:{defaultValue:"string",type:"string"}},computeTweakerContentLength:function(){return this._getCurrentTouchMode()?19:14},_upgradeValue:function(e){return"1"===e||1===e||"true"===e||!0===e||"0"!==e&&0!==e&&"false"!==e&&!1!==e&&"undefined"}}),l=function(e,i){t.prototype.baseViewModule.call(this,e,i)};n.applyMixin(l,t.prototype.baseViewModule);var c=function(e,t){l.call(this,e,t)};return n.applyMixin(c,l),c.prototype.buildView=function(){var e=this._options.viewOptions||{};e.escapeHTML=this._tweaker.escapeHTML,e.touchMode=this._tweaker._getCurrentTouchMode(),e.disabled=this._tweaker.readOnly,e.selectAllOnFocus=!0,e.fireOnlyFromUIInteractionFlag=!0,e.autoCommitFlag=!0;var t=new r(e);this._view=t,this.setValue(this._tweaker.value)},c.prototype.handleEvents=function(){var e=this,t=this._tweaker,n=this._view;n.addEventListener("buttonclick",function(e){if(e.stopPropagation(),document.getElementsByClassName("toolbar-co-div")[0].getBoundingClientRect().width>500)n.createCAContainer.hasClassName("showBox")?(n.createCAContainer.removeClassName("openBox"),n.createCAContainer.removeClassName("showBox"),n.plusBtn.getContent().removeClassName("icon-blue")):(n.createCAContainer.addClassName("showBox"),setTimeout(function(){n.createCAContainer.addClassName("openBox")},20),n.lineEditor._myInput.focus(),n.plusBtn.getContent().addClassName("icon-blue"));else{n.plusBtn.getContent().removeClassName("icon-blue"),n.createCAContainer.style.display="none";var i={};i.top=t.getContent().getBoundingClientRect().bottom,i.left=t.getContent().getBoundingClientRect().right,i.zIndex=40003,document.body.addContent(n.getModalInputBox(i)),n.lineEditor._myInput.focus()}}),n&&t&&(i.addEventOnElement(t,n,"focus",function(e){e.stopPropagation()}),i.addEventOnElement(t,n,"blur",function(e){e.stopPropagation(),t.onPostEdit()}),i.addEventOnElement(t,n,"uncommittedChange",function(e){e.stopPropagation(),t.onPreEdit()}),i.addEventOnElement(t,n.dropdown,"click",function(e){e.stopPropagation(),n.createCAContainer.style.setProperty("display","none"),n.plusBtn.getContent().removeClassName("icon-blue"),n.createCAContainer.removeClassName("showBox")}),i.addEventOnElement(t,n.lineEditor,"keydown",function(e){e.stopPropagation(),e.keyCode===o.ESCAPE&&t.onCancelEdit(),e.keyCode===o.ENTER&&(n.value=n.lineEditor.value,t.keyDownEventCallback&&t.keyDownEventCallback(e,t,n.lineEditor),n.removeModalInputBox())}),i.addEventOnElement(t,n,"change",function(i){i.stopPropagation();var a=n.value,o=void 0;o=null==a?a:function(e,t){switch(e){case"integer":var i=parseInt(t,10);return isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"number":return i=parseFloat(t),isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"boolean":return null!==/true/i.exec(t)||"1"===t;case"string":return t?t.toString():"";case"object":return JSON.parse(t);default:return t}}(t.valueType,a),e.setTweakerValue(o)}))},c.prototype.setValue=function(e){var t,i,n=this._tweaker,a=this._view;a&&n&&(a.value=null==e?e:(t=n.valueType,"string"==typeof(i=e)?i:"object"===t?JSON.stringify(i):"integer"!==t&&"number"!==t||!(Number.isNan&&!0===Number.isNaN(i)||void 0!==isNaN&&!0===isNaN(i))?"integer"===t||"number"===t?i.toString():i:"NaN"))},s.prototype.baseViewModule=l,s.prototype.VIEW_MODULES={TextBox:{classObject:c},readOnly:{classObject:c}},s.prototype.registerViewModule=function(e,t){},s.prototype.registerkeyDownCallback=function(e){this.keyDownEventCallback=e},s}),define("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/LifecycleCmd/MaturityCmd","DS/Controls/ProgressBar","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C){"use strict";var v=Object.create(null);return v.getColumns=function(){return[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"co_name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",editableFlag:!1,filterId:"set",filterModel:[],compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.stateGrade&&"undefined"!=n.options.grid.stateGrade?i.options.grid.stateGrade==n.options.grid.stateGrade?0:i.options.grid.stateGrade<n.options.grid.stateGrade?-1:1:0}},{text:e.CHG_GOV_DataGrid_Column_Severity,dataIndex:"sev",editableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.severityGrade&&"undefined"!=n.options.grid.severityGrade?i.options.grid.severityGrade==n.options.grid.severityGrade?0:i.options.grid.severityGrade<n.options.grid.severityGrade?-1:1:0},getCellGroupingKey:function(e){return e.nodeModel.options.grid.severityNLS}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"co_Owner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}},{text:e.CHG_GOV_DataGrid_Column_ChangeCoordinator,dataIndex:"co_Coordinator",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,filterId:"stringRegexp",filterModel:"",allowUnsafeHTMLContent:!0,getCellGroupingKey:function(e){return e.nodeModel.options.grid.changeCoordinatorFullName}},{text:e.CHG_GOV_DataGrid_Column_CollabSpace,dataIndex:"collabspaceNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Organization,dataIndex:"organizationNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Applicability,dataIndex:"applicabilityNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:""}]},v.getRelationalExplorerMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){for(var t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<t.length;a++){var o=t[a].options.grid.id;n.push(o)}e.openRelationalExplorer(n)})}}}},v.getTransferMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){for(var t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<t.length;a++)n.push(t[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},v.getDeleteMenu=function(t,i,n,a){return{type:"PushItem",title:e.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){for(var e=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),t=[],r=0;r<e.length;r++){var s=e[r],l={physicalid:s.options.grid.id,nodeName:s.options.grid.name,nodeTitle:s.options.grid.title};t.push(l)}o.deleteNodes(t,n,a)}}}},v.getMaturityMenu=function(t){return{type:"PushItem",title:e.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(e){for(var i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=[],o=0;o<i.length;o++)n.push(i[o].options.grid),a.push({physicalid:i[o].options.grid["@id"]||i[o].options.grid.id});new l({context:n,ID:"MaturityHdr"}).executeAsync(a)}}}},v.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:i.getGlobalVariable().tenant,objectId:e.id,openLink:!0}),t},v.showNotification=function(e,t,i,n,a,o,r){var s={level:e,title:t,subtitle:i,message:n,sticky:a,allowUnsafeHTML:r||!1};window.notifs||(window.notifs=g,p.setNotificationManager(window.notifs)),o?p.inject(o):p.elements.container.isInjected()||p.inject(),window.notifs.addNotif(s)},v.changeView=function(i){if(widget.body.getDimensions().width<=n.MOBILE_CUTOFF?a.updateCASummaryViewMobile(i):a.updateCASummaryViewDesktop(i),"GridView"==i)this.currentView="Grid",(o=t.toolbar.getNodeModelByID("view"))&&"view-list"!=o.options.grid.semantics.icon.iconName&&o.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),o.options.grid.data.menu[0].state="selected",o.options.grid.data.menu[1].state="unselected",(r=document.querySelector(".toolbar-co-div .wux-ui-3ds-view-list"))&&r.addClassName("currentView"),(s=document.querySelector(".toolbar-co-div .wux-ui-3ds-view-small-tile"))&&s.removeClassName("currentView"),(l=document.querySelector(".cogridView"))&&(l.removeClassName("hideView"),l.removeClassName("nonVisible"),l.addClassName("showView")),(c=document.querySelector(".cotileView"))&&(c.removeClassName("showView"),c.addClassName("hideView"));else if("TileView"==i){var o,r,s,l,c;this.currentView="Tile",(o=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=o.options.grid.semantics.icon.iconName&&o.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),o.options.grid.data.menu[0].state="unselected",o.options.grid.data.menu[1].state="selected",(r=document.querySelector(".toolbar-co-div .wux-ui-3ds-view-list"))&&r.removeClassName("currentView"),(s=document.querySelector(".toolbar-co-div .wux-ui-3ds-view-small-tile"))&&s.addClassName("currentView"),(l=document.querySelector(".cogridView"))&&(l.removeClassName("showView"),l.addClassName("hideView")),(c=document.querySelector(".cotileView"))&&(c.removeClassName("hideView"),c.addClassName("showView"))}},v.createCustomSeverity=function(e,t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new UWA.Element("div",{}),a=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(a);var o=UWA.createElement("span",{html:t});return a.inject(n),o.inject(n),n.outerHTML},v.createCustomOwner=function(e,t){var n="/api/user/getpicture/login/"+t+"/format/normal",a=i.getGlobalVariable().computeSwymUrl(n),o=new UWA.Element("div",{class:"members"}),s=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:a});else{var c=r.getAvatarDetails(t);(l=UWA.createElement("div",{html:c.avatarStr,class:"avatarIcon"})).style.setProperty("background",c.avatarColor)}l.inject(s);var d=UWA.createElement("span",{class:"userName",html:t});return s.inject(o),d.inject(o),o.outerHTML},v.filterView=function(e){if("activeCO"==e)(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";else if("inactiveCO"==e){var i;(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected"}},v}),define("DS/ENOChgGovernanceUX/scripts/view/ChgInActiveCOFilterView",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil"],function(e,t){"use strict";return{filterView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout"],function(e){e.coGridView.coDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.filterView("inactiveCO")},100)})}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridViewToolbar"],function(e,t){"use strict";var i=Object.create(null);return i.getColumns=function(){return[{text:e.CHG_Member_DataGrid_Column_Name,dataIndex:"person_name",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.fullName}},{text:e.CHG_Member_DataGrid_Column_Role,dataIndex:"roleList"}]},i.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-member-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".membertileView"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-member-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".membertileView"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},i.makeUpdateMemberJson=function(e,t,i,n){for(var a={data:[]},o=0;o<t.length;o++){let i={updateAction:e,role:"contributor",user:t[o],list:""};a.data.push(i)}if(""!=i.person)if("string"!=typeof i.person)for(o=0;o<i.person.length;o++){let t={updateAction:e,role:"approver",user:i.person[o],list:""};a.data.push(t)}else a.data.push({updateAction:e,role:"approver",user:i.person,list:""});if(""!=i.routeTemplate&&a.data.push({updateAction:e,role:"approver",user:"",list:i.routeTemplate}),""!=n.person)if("string"!=typeof n.person)for(o=0;o<n.person.length;o++){var r={updateAction:e,role:"follower",user:n.person[o],list:""};a.data.push(r)}else a.data.push({updateAction:e,role:"follower",user:n.person,list:""});if(""!=n.userGroup)if("string"!=typeof n.userGroup)for(o=0;o<n.userGroup.length;o++){var s={updateAction:e,role:"follower",user:"",list:n.userGroup[o]};a.data.push(s)}else a.data.push({updateAction:e,role:"follower",user:"",list:n.userGroup});return a},i.getRoleNLSValue=function(t){let i="";switch(t){case"owner":i=e.CHG_Member_Role_Owner;break;case"originator":i=e.CHG_Member_Role_Originator;break;case"coordinator":i=e.CHG_Member_Role_ChangeCoordinator;break;case"contributor":i=e.CHG_Member_Role_Assignee;break;case"approver":i=e.CHG_Member_Role_Approver;break;case"follower":i=e.CHG_Member_Role_Follower;break;default:console.log("NLS is not defined for : "+t)}return i},i}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridViewToolbar"],function(e,t){"use strict";var i=Object.create(null);return i.getColumns=function(){return[{text:e.CHG_Member_DataGrid_Column_Name,dataIndex:"person_name",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.fullName}},{text:e.CHG_Member_DataGrid_Column_Role,dataIndex:"roleList"}]},i.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-member-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".membertileView"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-member-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".membertileView"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},i.makeUpdateMemberJson=function(e,t,i,n,a){var o={data:[]};if(""!=t&&o.data.push({updateAction:e,role:"Coordinator",user:t,list:""}),""!=i&&o.data.push({updateAction:e,role:"Approver",user:[],list:i}),""!=n.person)if("string"!=typeof n.person)for(var r=0;r<n.person.length;r++){var s={updateAction:e,role:"Follower",user:n.person[r],list:""};o.data.push(s)}else o.data.push({updateAction:e,role:"Follower",user:n.person,list:""});if(""!=n.userGroup)if("string"!=typeof n.userGroup)for(r=0;r<n.userGroup.length;r++){var l={updateAction:e,role:"Follower",user:"",list:n.userGroup[r]};o.data.push(l)}else o.data.push({updateAction:e,role:"Follower",user:"",list:n.userGroup});if(""!=a.person)if("string"!=typeof a.person)for(r=0;r<a.person.length;r++){s={updateAction:e,role:"Assignee",user:a.person[r],list:""};o.data.push(s)}else o.data.push({updateAction:e,role:"Assignee",user:a.person,list:""});if(""!=a.userGroup)if("string"!=typeof a.userGroup)for(r=0;r<a.userGroup.length;r++){l={updateAction:e,role:"Assignee",user:"",list:a.userGroup[r]};o.data.push(l)}else o.data.push({updateAction:e,role:"Assignee",user:"",list:a.userGroup});return o},i.getRoleNLSValue=function(t){let i="";switch(t){case"Owner":i=e.CHG_Member_Role_Owner;break;case"Originator":i=e.CHG_Member_Role_Originator;break;case"Coordinator":i=e.CHG_Member_Role_ChangeCoordinator;break;case"Assignee":i=e.CHG_Member_Role_Assignee;break;case"Approver":i=e.CHG_Member_Role_Approver;break;case"Follower":i=e.CHG_Member_Role_Follower;break;default:console.log("NLS is not defined for : "+t)}return i},i.removeRole=function(e,t){let i=","+t,n=", "+t,a=t+",",o=t+" ,";return e.includes(i)?e=e.replace(i,""):e.includes(n)?e=e.replace(n,""):e.includes(a)?e=e.replace(a,""):e.includes(o)&&(e=e.replace(o,"")),e},i}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridViewToolbar"],function(e,t){"use strict";var i=Object.create(null);return i.getColumns=function(){return[{text:e.CHG_Member_DataGrid_Column_Name,dataIndex:"person_name",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.fullName}},{text:e.CHG_Member_DataGrid_Column_Role,dataIndex:"roleList"}]},i.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-member-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".membertileView"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-member-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-member-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".membertileView"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},i.makeUpdateMemberJson=function(e,t,i,n){var a={data:[]};if(""!=t&&a.data.push({updateAction:e,dataelements:{role:"Coordinator",user:t,list:""}}),""!=i&&a.data.push({updateAction:e,dataelements:{role:"Approver",user:"",list:i}}),""!=n.person)if("string"!=typeof n.person)for(var o=0;o<n.person.length;o++){var r={updateAction:e,dataelements:{role:"Follower",user:n.person[o],list:""}};a.data.push(r)}else a.data.push({updateAction:e,dataelements:{role:"Follower",user:n.person,list:""}});if(""!=n.userGroup)if("string"!=typeof n.userGroup)for(o=0;o<n.userGroup.length;o++){var s={updateAction:e,dataelements:{role:"Follower",user:"",list:n.userGroup[o]}};a.data.push(s)}else a.data.push({updateAction:e,dataelements:{role:"Follower",user:"",list:n.userGroup}});return a},i}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager",["DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant"],function(e){"use strict";var t=function(){};return t._KEY=e._KEY,t._LAST_ROUTE=e._LAST_ROUTE,t._MY_CHANGE_ORDERS=e._MY_CHANGE_ORDERS,t._RECENTLY_OPENED=e._RECENTLY_OPENED,t.prototype.initWidgetViewPreferences=function(){if(!widget.getValue(t._KEY)){widget.setValue(t._KEY,JSON.stringify({"xchange-app":{model:{"id-card":{},"orchestration-level1":{},"orchestration-level2":{},"orchestration-level3":{}},"last-route":{},"xchange-views-preferences":{"info-panel":{"info-open":"","info-context":"","info-width":""},"xchange-my-change-orders":{"xchange-list-view":{view:"",filterview:"",sort:{},search:"",selections:[],filters:{},tagFilter:{}}},"xchange-change-orders-details":{tab:""},"xchange-change-requests-details":{tab:""},"xchange-change-actions-details":{tab:""},"xchange-recently-opened":{objectIDs:""}}}}))}},t.prototype.updateWidgetViewPreferences=function(e,i){if(this.isPath(e,!1)){var n=JSON.parse(widget.getValue(t._KEY)),a=JSON.parse(JSON.stringify(e));widget.setValue(t._KEY,JSON.stringify(this.recursiveSearch(n,a,i,!0)))}},t.prototype.recursiveSearch=function(e,t,i,n){return n&&2==t.length?e[t[0]][t[1]]=i:2==t.length?e[t[1]]=i:n?this.recursiveSearch(e[t[0]],t,i,!1):(t.shift(),this.recursiveSearch(e[t[0]],t,i,!1)),e},t.prototype.isPath=function(e,i){try{var n=widget.getValue(t._KEY);if(n){if(Array.isArray(e)){for(var a=JSON.parse(n),o=0;o<e.length;o++){if(void 0===a[e[o]]&&""!=a[e[o]])return console.log("xChangeWidgetPreferencesManager isPath() path doesn't exist"),!!i&&void 0;a=a[e[o]]}return!i||a}return console.log("xChangeWidgetPreferencesManager isPath() parameter 1 is not a Array"),!!i&&void 0}return console.log("xChangeWidgetPreferencesManager isPath() widgetPreferences not initialize"),!!i&&void 0}catch(e){return console.error(e),!!i&&void 0}},t.prototype.getValue=function(e){return this.isPath(e,!0)},t}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgPropertiesServices","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgInfraService","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C){"use strict";var v={showRMBMenuOnGrid:function(e,t,i){return new Promise(function(i,a){var o="false",r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();r.length>1&&(o="true");var s=[];const l=r.map(e=>e.options.grid.id);s.push(n.createPropertyPushItem(l)),s.push(v.getRelationalExplorerMenu(t)),s.push(m.getCopyLink(r));var c={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(c);var d=C("DS/ENOChgServices/scripts/services/ChgDataService"),u=C("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),g=C("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"),p=null,h=u.openWith(c),f=t.cellInfos.nodeModel.options.grid.isKindOfChangeAction,b=[],w=document.getElementById("outer-co-div");"false"==o&&b.push(h),"false"==o&&(p=1==f?u.getUserAccess("pid:"+t.cellInfos.nodeModel.options.grid.id):d.getChangeOrderUserAccess(t.cellInfos.nodeModel.options.grid.id),b.push(p)),Promise.all(b).then(function(n){n[0]&&s.push(n[0]),s.push(v.getMaturityMenu(t)),"false"==o&&1==f?(n[1]&&"true"==n[1].userAccess.Transfer&&s.push(v.getTransferMenu(t)),n[1]&&"true"==n[1].userAccess.Delete&&s.push(v.getDeleteMenu(e,t,w,g.removeDeletedNodesUsingIDs))):"false"==o?(n[1]&&"true"==n[1].data[0].dataelements.TransferOwnership&&s.push(v.getTransferMenu(t)),n[1]&&"true"==n[1].data[0].dataelements.Delete&&s.push(v.getDeleteMenu(e,t,w,g.removeDeletedNodesUsingIDs))):(s.push(v.getTransferMenu(t)),s.push(v.getDeleteMenu(e,t,w,g.removeDeletedNodesUsingIDs))),i(s)})})},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:a.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++){var o=i[a].options.grid.id;n.push(o)}t.openRelationalExplorer(n)})}}}},getTransferMenu:function(e){return{type:"PushItem",title:a.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getDeleteMenu:function(e,t,n,o){return{type:"PushItem",title:a.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){for(var a=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),r=[],s=0;s<a.length;s++){var l=a[s],c={physicalid:l.options.grid.id,nodeName:l.options.grid.name,nodeTitle:l.options.grid.title};r.push(c)}i.deleteNodes(r,n,o,e)}}}},getMaturityMenu:function(e){return{type:"PushItem",title:a.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){e.cellInfos.nodeModel.options.grid;for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=[],o=0;o<i.length;o++)n.push(i[o].options.grid),a.push({physicalid:i[o].options.grid["@id"]||i[o].options.grid.id});new s({context:n,ID:"MaturityHdr"}).executeAsync(a)}}}},makeCopyLinkObject:function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:r.getGlobalVariable().tenant,objectId:e.id,openLink:!0}),t},showNotification:function(e,t,i,n,a,o,r){var s={level:e,title:t,subtitle:i,message:n,sticky:a,allowUnsafeHTML:r||!1};window.notifs||(window.notifs=d,u.setNotificationManager(window.notifs)),o?u.inject(o):u.elements.container.isInjected()||u.inject(),window.notifs.addNotif(s)},createCustomColumn:function(e){let t=this;return new Promise(function(e,i){let n=r.getGlobalVariable().changeActionSubTypes,a=[...r.getGlobalVariable().changeOrderSubTypes,...n];h.getCombinedClassList(a).then(function(i){h.getPropertyForClassGrid(i).then(function(i){let n=h.makeCombinedColumnList(i),a=t.filterColumn(n);e(a)})})})},filterColumn:function(e){let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project"];for(let t of n)e.delete(t);return e.forEach((e,n,a)=>{let o=t.createColumnDefination(e,n);i.push(o)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:function(e,i){return e.nodeModel.getAttributeValue(t)}}}};return v}),define("DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel",["DS/Utilities/Utils","DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/constants/EditPropConstants","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesServices","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,a,o,r){"use strict";function s(){var e=a.getpropOptions(i);this._informationPanel=new t(e)}return s.prototype.start=function(e){if(this.setState(e.objectInfo),e.facets&&Array.isArray(e.facets)){this._informationPanel.addFacets(e.facets);var t=[];e.facets.includes(i.FACET_RELATIONS)||t.push(i.FACET_RELATIONS),t.length>0&&this._informationPanel.removeFacets(t)}if(this._informationPanel.initDatas(this.getPropertyModels()),e.container)this._informationPanel.elements.container.inject(e.container);else{var n=document.querySelectorAll(".gov-triptych-wrapper");let e=document.querySelector(".secondmainContainer-sidepanel");if(e||(e=new UWA.Element("div",{class:"secondmainContainer-sidepanel"})),n){if(n[1].children.length>0)for(var a=n[1].children,o=0;o<a.length;o++)a[0].destroy();this._informationPanel.elements.container.inject(n[1]),e.inject(n[1])}else this._informationPanel.elements.container.inject(widget.body),e.inject(widget.body)}this.reRender=function(){let e=void 0,t=this.getSate();Array.isArray(t)&&t.length>0&&UWA.is(t[0].facetSelect)&&(e=t[0].facetSelect),this._informationPanel.initDatas(this.getPropertyModels(),e),this._informationPanel.elements.container.onResize()}},s.prototype.setState=function(e,t){var i=this;if(this._currentSelection=Array.isArray(e)?e:[],0!=e.length){var n=e[0].type;o.addAllFacet(i._informationPanel,e),o.hideFacet(i._informationPanel),o.updateFacetOnSelection(n,i._currentSelection,i._informationPanel),"ChangeOrder"==n&&"false"==r.getGlobalVariable().isFullLicence&&this._informationPanel.setReadonlyStatus(!0),"ChangeAnalysis"===n?o.getUpdateIMpactAnalysisFacet(e).then(function(e){t&&i.reRender()}):t&&this.reRender()}else t&&this.reRender()},s.prototype.changeSequence=function(e){for(var t=0;t<this._informationPanel.elements.container._lFacets.length;t++){var i=this._informationPanel.elements.container._lFacets[t];if(i.facet.name===e){for(var n=t;n<this._informationPanel.elements.container._lFacets.length-1;n++)this._informationPanel.elements.container._lFacets[n]=this._informationPanel.elements.container._lFacets[n+1];this._informationPanel.elements.container._lFacets[this._informationPanel.elements.container._lFacets.length-1]=i}}},s.prototype.getSate=function(){return this._currentSelection},s.prototype.getPropertyModels=function(){return a.getPropModel(this.getSate())},s.prototype.resizePropertiesPanel=function(){this._informationPanel.onResize()},s}),define("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",["DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceSlideIn","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,a){"use strict";let o={slideinview:"",slideInContainer:"",parentContainer:"",modelEvents:null,setContainersForSlideIn:({contextDetails:t,infoPanelContainer:i,target:a,modelEvents:r})=>{o.slideInContainer=i,o.parentContainer=a;let s=UWA.createElement("div",{id:"emptyInitInfoPanel",styles:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},html:n.CHG_GOV_Empty_InfoPanel3DSpace_PlaceHolder});o.slideinview=new e(o.slideInContainer,o.parentContainer,s),o.slideinview.buildSlideIn(),o.modelEvents=r,r.subscribe({event:"update-property-panel-data"},function(e){if(e.context&&e.context.getTreeDocument()&&e.context.getTreeDocument().getSelectedNodes().length>0){o.slideinview.content="";let t=e.context.getTreeDocument().getSelectedNodes(),i=o.createJsonForInfoPanel(t);o.launchPropertyPanel(i)}else{let t={physicalId:e.PhysicalID,metatype:"businessobject",type:e.type,modelEvents:o.modelEvents},i=[];i.push(t),o.launchPropertyPanel(i)}}),r.publish({event:"update-property-panel-data",data:{PhysicalID:t.id,type:t.isKindOfType}})},createSlidein:()=>{o.slideinview.showSlideIn()},launchPropertyPanel:e=>{if(o.propertyCmp){a.getGlobalVariable().lastSelectedInfoType!=e[0].type&&(i.hideFacet(o.propertyCmp._informationPanel),a.getGlobalVariable().lastSelectedInfoType=e[0].type);var n=e;o.propertyCmp.setState(n,!0)}else{var r={objectInfo:e,container:o.slideInContainer.getElement("#slideInBody")},s=new t;s.start(r),o.propertyCmp=s,a.getGlobalVariable().lastSelectedInfoType=e[0].type}},createJsonForInfoPanel:function(e){let t=[];for(let i=0;i<e.length;i++){let n={physicalId:e[i].options.grid.id,metatype:"businessobject",type:e[i].options.grid.isKindOfType,modelEvents:o.modelEvents};t.push(n)}return t}};return o}),define("DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils"],function(e,t,i){"use strict";return{getDownloadMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(){i.download(e)}}}},getPreviewMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x fonticon-eye"},action:{callback:function(){i.preview(e)}}}}}}),define("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require"],function(e,t,i,n,a,o,r,s,l){"use strict";return{showRMBMenuOnGrid:function(e,t,o){return new Promise(function(c,d){var u="false",g=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const p=g.map(e=>e.options.grid.id);g.length>1&&(u="true");var h=[];h.push(n.createPropertyPushItem(p)),h.push(i.getRelationalExplorerMenu(e,t));var m={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(m);var C=l("DS/ENOChgServices/scripts/services/ChgDataService"),v=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),f=null,b=v.openWith(m),w=t.cellInfos.nodeModel.options.grid.isKindOfChangeAction,D=[],S=document.getElementById("outer-co-div");"false"==u&&(D.push(b),f=1==w?v.getUserAccess("pid:"+t.cellInfos.nodeModel.options.grid.id):C.getChangeOrderUserAccess(t.cellInfos.nodeModel.options.grid.id),D.push(f));let E=null;if(o){var O=l("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout");E=O.removeDeletedNodesUsingIDs}else{var y=l("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout");E=y.removeDataFromGrid}Promise.all(D).then(function(n){if(n[0]&&h.push(n[0]),"false"==u&&1==w){var o=n[1].userAccess;o=r.processAccessBitCO(o),(n[1]&&"true"==o.Promote||"true"==o.Demote)&&h.push(i.getMaturityMenu(t)),h.push(s.getCopyLink(g)),n[1]&&"true"==o.TransferOwnership&&h.push(i.getTransferMenu(e,t)),n[1]&&"true"==o.Delete&&h.push(i.getDeleteMenu(e,t,S,E))}else if("false"==u){o=n[1].data[0].dataelements;o=r.processAccessBitCO(o),(n[1]&&"true"==o.Promote||"true"==o.Demote)&&h.push(i.getMaturityMenu(t)),h.push(s.getCopyLink(g)),n[1]&&"true"==o.TransferOwnership&&h.push(i.getTransferMenu(e,t)),n[1]&&"true"==o.Delete&&h.push(i.getDeleteMenu(e,t,S,E))}else"true"==a.getGlobalVariable().isFullLicence&&h.push(i.getMaturityMenu(t)),h.push(s.getCopyLink(g)),h.push(i.getTransferMenu(e,t)),"true"==a.getGlobalVariable().isFullLicence&&h.push(i.getDeleteMenu(e,t,S,E));c(h)})})},createCustomColumn:function(e){let t=this;return new Promise(function(e,i){let n=a.getGlobalVariable().changeOrderSubTypes;o.getCombinedClassList(n).then(function(i){o.getPropertyForClassGrid(i).then(function(i){let n=o.makeCombinedColumnList(i),a=t.filterColumn(n);e(a)})})})},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:changeCoordinator","ds6w:organizationResponsible"];for(let t of n)e.delete(t);return e.forEach((e,n,a)=>{let o=t.createColumnDefination(e,n);i.push(o)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:r.getGetCellValueFunction(i,t)}}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"createChangeOrderInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"addExistingHandler"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting}]},n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){var a={entries:[{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"plus",fontIconFamily:1},value:this.createData},position:"far",category:"Create"},{id:"MergeCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"merge",fontIconFamily:1},tooltip:e.CHG_TOOLTIP_MERGE_CA,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"mergeChangeAction"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"removeHandler"}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"wrong",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Delete,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"deleteHandler"}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n);a.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return a},n}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"createChangeOrderInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeAction,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"createChangeActionInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeAction},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"addExistingHandler"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting}]},n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){var a={entries:[{id:"create",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"plus",fontIconFamily:1},value:this.createData},position:"far",category:"Create"},{id:"MergeCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"merge",fontIconFamily:1},tooltip:e.CHG_TOOLTIP_MERGE_CA,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"mergeChangeAction"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"removeHandler"}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"wrong",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Delete,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"deleteHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n);a.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return a},n}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveIA,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"filterActiveView"},tooltip:e.CHG_Filter_ActiveIA_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveIA,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"filterInActiveView"},tooltip:e.CHG_Filter_InactiveIA_Def}]},n.writetoolbarDefinition=function(n){let a=!0;a=!(!n.contextDetails.accessBits||"true"!=n.contextDetails.accessBits.ManageChangeAnalysis);var o={entries:[{id:"newImpactAnalysis",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_NewImpactAnalysis,position:"far",visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate",func:"launchCreateChangeIADialog",argument:{contextCRId:n.contextDetails.id}}}},{id:"duplicate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"copy",fontIconFamily:1},tooltip:e.CHG_GOV_Duplicate_ImpactAnalysis,position:"far",disabled:!0,visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"duplicateImpactAnalysis",argument:{contextCRId:n.contextDetails.id}}}},{id:"cancel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"block",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_CancelImpactAnalysis,position:"far",disabled:!0,visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"cancelHandler",argument:{contextCRId:n.contextDetails.id}}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"wrong",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Delete,position:"far",disabled:!0,visibleFlag:a,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"deleteHandler"}}},{id:"filter",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n);var r={id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1}},position:"far",tooltip:e.CHG_GOV_ImpactAnalysis_Information,action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}};o.entries.unshift(r),"ChangeAnalysis"==n.contextDetails.isKindOfType&&(o.entries=o.entries.filter(e=>"delete"!=e.id&&"newImpactAnalysis"!=e.id))}return o},n}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgInfraService","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C){"use strict";var v={columnMap:null,attrMap:[],showRMBMenuOnGrid:function(e,t,i){return new Promise(function(i,a){const o=[];let r=!1;const s=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();s.length>1&&(r=!0);const l=s.map(e=>e.options.grid.id),c=(s.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),C("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout")),d=C("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),u=C("DS/ENOChgServices/scripts/services/ChgDataService"),g=t.cellInfos.nodeModel.options.grid.id,p=t.cellInfos.nodeModel.options.grid.type,h=t.cellInfos.nodeModel.options.grid.name,f=t.cellInfos.nodeModel.options.grid.displayType,b=c.ChgCRImpactAnalysisDataGridModel.contextDetails.access.accessBits.ManageChangeAnalysis,w={objectId:g,objectType:p,displayName:h,displayType:f,facetName:"dependency"},D=d.openWith(w);if(r)o.push(n.createPropertyPushItem(l)),o.push(v.getRelationalExplorerMenu(l)),D.then(n=>{n&&o.push(n),o.push(v.getTransferMenu(t)),o.push(v.getMaturityMenu(t)),o.push(m.getCopyLink(s,e.options.contextDetails.id)),"true"==b&&o.push(v.getDeleteMenu(t,e.options.target,c.removeDeletedNodesUsingIDs)),i(o)});else{o.push(n.createPropertyPushItem(l)),o.push(v.getRelationalExplorerMenu(l));const a=[];a.push(D);const r=u.getImpactAnalysisUserAccess(t.cellInfos.nodeModel.options.grid.id);a.push(r),Promise.all(a).then(n=>{n[0]&&o.push(n[0]);const a=n[1].data[0].dataelements;"true"===a.TransferOwnership&&o.push(v.getTransferMenu(t)),"true"!==a.Promote&&"true"!==a.Demote||o.push(v.getMaturityMenu(t)),o.push(m.getCopyLink(s,e.options.contextDetails.id)),"true"==b&&o.push(v.getDeleteMenu(t,e.options.target,c.removeDeletedNodesUsingIDs)),i(o)})}})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getMaturityMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){e.cellInfos.nodeModel.options.grid;for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],o=[],r=0;r<n.length;r++)"ia_Total"!=n[r].options.grid.id&&(a.push(n[r].options.grid),o.push({physicalid:n[r].options.grid["@id"]||n[r].options.grid.id}));new i({context:a,ID:"MaturityHdr"}).executeAsync(o)}}}},makeCopyLinkObject:function(e,t){var i={protocol:"3DXContent",data:{items:[]}};return i.data.items.push({envId:a.getGlobalVariable().tenant,objectId:t,openLink:!0,IAid:e.options.grid.id,tabName:"crAssessment"}),i},showNotification:function(e,t,i,n,a,o,r){var s={level:e,title:t,subtitle:i,message:n,sticky:a,allowUnsafeHTML:r||!1};window.notifs||(window.notifs=u,g.setNotificationManager(window.notifs)),o?g.inject(o):g.elements.container.isInjected()||g.inject(),window.notifs.addNotif(s)},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}},getDeleteMenu:function(e,i,n,a){return{type:"PushItem",title:t.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){for(var t=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],r=0;r<t.length;r++){var s=t[r],c={physicalid:s.options.grid.id,nodeName:s.options.grid.name,nodeTitle:s.options.grid.title};o.push(c)}l.deleteNodes(o,i,n,a)}}}},createCustomColumn:function(){let e=this;return new Promise(function(t,i){let n=a.getGlobalVariable().changeAnalysisSubTypes;o.getCombinedClassList(n).then(function(i){o.getPropertyForClassGrid(i).then(function(i){let n=o.makeCombinedColumnList(i),a=e.filterColumn(n);e.columnMap=n,t(a)})})})},filterColumn:function(e){let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6wg:Default Change Analysis Metrics.Implementation Effort","ds6wg:Default Change Analysis Metrics.Benefit Impact","ds6wg:Default Change Analysis Metrics.Risk Impact","ds6wg:Default Change Analysis Metrics.Cost Impact","ds6wg:Default Change Analysis Metrics.Validation Effort"];for(let t of n)e.delete(t);return e.forEach((e,n,a)=>{let o=t.createColumnDefination(e,n);i.push(o)}),i},createColumnDefination:function(e,t){var i=this;let n=e.dataType.replace("http://www.w3.org/2001/XMLSchema#",""),a=new Map;return this.attrMap.push(a),{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:n,range:e.range,getCellTooltip:function(){return{shortHelp:"my custo help",updateModel:!1}},getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){let n=e.nodeModel.getBrothers(),a=i.checkAssessmentType(t);if(n=n.filter(e=>"ia_Total"!=e.options.grid.id&&"Cancelled"!=e.options.grid.maturity),"boolean"==a){return i.booleanAggregation(n,t)}if("integer"==a||"real"==a||"double"==a){return i.sumAvgAggregation(n,t)}if("range"==a){return i.rangeAggregation(n,t)}return""}return e.nodeModel.getAttributeValue(t)},getCellTooltip:function(e){console.log(e),console.log("cellInfos...................")}}},checkAssessmentType:function(e){let t=[...v.columnMap.entries()].filter(([t,i])=>t==e),i=t[0][1].dataType,n=t[0][1].range,a=i.replace("http://www.w3.org/2001/XMLSchema#","");return n&&"integer"==a?"range":a},sumAvgAggregation:function(e,t){let i=0;for(var n=0;n<e.length;n++)""!=e[n].options.grid[""+t]&&(i+=parseFloat(e[n].options.grid[""+t]));let a=0;return`&#x2211; ${i} | x&#772; ${a=i/e.length} `},rangeAggregation:function(e,t){let i=0,n=0;for(var a=0;a<e.length;a++)""!=e[a].options.grid[""+t]&&(i+=parseInt(e[a].options.grid[""+t]));return n=Math.round(i/e.length)},booleanAggregation:function(e,t){let i="TRUE";for(var n=0;n<e.length;n++){let a=e[n].options.grid[""+t];if("TRUE"!=a)return"FALSE"==a&&(i="FALSE"),i}}};return v}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/util/ChgCRContributorsGridUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridViewToolbar"],function(e,t){"use strict";var i=Object.create(null);i.getColumns=function(){},i.changeView=function(n){if("GridView"==n);else if("TileView"==n){this.currentView="Tile";var a=t.toolbar.getNodeModelByID("view");a&&"view-small-tile"!=a.options.grid.semantics.icon.iconName&&a.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW});var o=document.querySelector(".toolbar-contributor-grid-div .wux-ui-3ds-view-small-tile");if(o){o.addClassName("currentView");var r=document.querySelector(".contributortileView");r&&(r.removeClassName("hideView"),r.addClassName("showView"))}}return i}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ImpactBasis_Toolbar_OrchestrateImpactAnalysis,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"_orchestrateImpactAnalysis"},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_OrchestrateImpactAnalysis},{type:"PushItem",title:e.CHG_GOV_AffactedItem_Toolbar_Add_Existing_ImpactAnalysis,state:"disabled",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"addExistingImpactAnalysisInContext"},tooltip:e.CHG_GOV_AffactedItem_Toolbar_Add_Existing_ImpactAnalysis}]},n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){var a={entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_AffectedItems_Toolbar_AddExisting,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"addExistingHandler"}}},{id:"changeAssessment",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"component",fontIconFamily:1},disabled:!0,tooltip:e.CHG_GOV_ImpactBasis_Toolbar_ChangeAssessment,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"changeAssessmentHandler"}}},{id:"massUpdate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},disabled:!0,tooltip:e.CHG_GOV_AffectedItems_Toolbar_MassUpdate,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"massUpdateHandler"}}},{id:"moveToCR",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"exchange wux-ui-3ds",fontIconFamily:1},disabled:!0,tooltip:e.CHG_GOV_AffactedItem_Toolbar_Move_AffactedItem_To_CR,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"moveAffactedItemToOtherCR"}}},{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"change-request-chart-line-bar wux-ui-3ds",fontIconFamily:1},value:this.createData},position:"far",disabled:!1},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n),a.entries=a.entries.filter(e=>"changeAssessment"!=e.id);a.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return a},n}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";var a=Object.create(null);return a.getColumns=function(){var t=[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"chgObjName",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",editableFlag:!1,filterId:"set",filterModel:[],compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.stateGrade&&"undefined"!=n.options.grid.stateGrade?i.options.grid.stateGrade==n.options.grid.stateGrade?0:i.options.grid.stateGrade<n.options.grid.stateGrade?-1:1:0}},{text:e.CHG_GOV_DataGrid_Column_Severity,dataIndex:"sev",editableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.severityGrade&&"undefined"!=n.options.grid.severityGrade?i.options.grid.severityGrade==n.options.grid.severityGrade?0:i.options.grid.severityGrade<n.options.grid.severityGrade?-1:1:0},getCellGroupingKey:function(e){return e.nodeModel.options.grid.severity}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}},{text:e.CHG_GOV_DataGrid_Column_ChangeCoordinator,dataIndex:"chgObjCoordinator",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.changeCoordinatorFullName}},{text:e.CHG_GOV_DataGrid_Column_CollabSpace,dataIndex:"collabspaceNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Organization,dataIndex:"organizationNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]}];return i.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.data.grid.title}),t},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-orchestration-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-orchestration-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-orchestration-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".orchestrationtileView"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-orchestration-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-orchestration-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-orchestration-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".orchestrationtileView"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},a.createCustomSeverity=function(e,t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new UWA.Element("div",{}),a=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(a);var o=UWA.createElement("span",{html:t});return a.inject(n),o.inject(n),n.outerHTML},a.createCustomOwner=function(e,t){var a="/api/user/getpicture/login/"+t+"/format/normal",o=i.getGlobalVariable().computeSwymUrl(a),r=new UWA.Element("div",{class:"members"}),s=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:o});else{var c=n.getAvatarDetails(t);(l=UWA.createElement("div",{html:c.avatarStr,class:"avatarIcon"})).style.setProperty("background",c.avatarColor)}l.inject(s);var d=UWA.createElement("span",{class:"userName",html:t});return s.inject(r),d.inject(r),r.outerHTML},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";var a=Object.create(null);return a.getColumns=function(){var t=[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"chgObjName",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",editableFlag:!1,filterId:"set",filterModel:[],compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.stateGrade&&"undefined"!=n.options.grid.stateGrade?i.options.grid.stateGrade==n.options.grid.stateGrade?0:i.options.grid.stateGrade<n.options.grid.stateGrade?-1:1:0}},{text:e.CHG_GOV_DataGrid_Column_Severity,dataIndex:"sev",editableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.severityGrade&&"undefined"!=n.options.grid.severityGrade?i.options.grid.severityGrade==n.options.grid.severityGrade?0:i.options.grid.severityGrade<n.options.grid.severityGrade?-1:1:0},getCellGroupingKey:function(e){return e.nodeModel.options.grid.severity}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}},{text:e.CHG_GOV_DataGrid_Column_ChangeCoordinator,dataIndex:"chgObjCoordinator",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.changeCoordinatorFullName}},{text:e.CHG_GOV_DataGrid_Column_CollabSpace,dataIndex:"collabspaceNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Organization,dataIndex:"organizationNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]}];return i.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.data.grid.title}),t},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-orchestration-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-orchestration-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-orchestration-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".orchestrationtileView"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-orchestration-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-orchestration-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-orchestration-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".orchestrationtileView"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},a.createCustomSeverity=function(e,t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new UWA.Element("div",{}),a=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(a);var o=UWA.createElement("span",{html:t});return a.inject(n),o.inject(n),n.outerHTML},a.createCustomOwner=function(e,t){var a="/api/user/getpicture/login/"+t+"/format/normal",o=i.getGlobalVariable().computeSwymUrl(a),r=new UWA.Element("div",{class:"members"}),s=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:o});else{var c=n.getAvatarDetails(t);(l=UWA.createElement("div",{html:c.avatarStr,class:"avatarIcon"})).style.setProperty("background",c.avatarColor)}l.inject(s);var d=UWA.createElement("span",{class:"userName",html:t});return s.inject(r),d.inject(r),r.outerHTML},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";var a=Object.create(null);return a.getColumns=function(){var t=[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id}},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"ia_name",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellGroupingKey:function(e){return e.nodeModel.options.grid.Name},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellValue:function(e){if(e.nodeModel){return e.nodeModel.getAttributeValue("maturityNLS")}},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id}},{text:e.CHG_GOV_DataGrid_Column_ImpactBasis,dataIndex:"countImpactBasis",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id},getCellValue:function(e){return e.nodeModel.getAttributeValue("isLastNode"),e.nodeModel.getAttributeValue("countImpactBasis")},setCellValue:function(e,t){}},{text:e.CHG_GOV_DataGrid_Column_ImpactedItem,dataIndex:"countImpactedItems",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id},getCellValue:function(e){return e.nodeModel.getAttributeValue("isLastNode"),e.nodeModel.getAttributeValue("countImpactedItems")}},{text:e.CHG_GOV_DataGrid_Column_Attachment,dataIndex:"countAttachment",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id},getCellValue:function(e){return e.nodeModel.getAttributeValue("isLastNode"),e.nodeModel.getAttributeValue("countAttachment")}}];i.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.data.grid.title});let n=[{dataIndex:"attribute",text:e.CHG_IA_COLUMN_GROUP_ATTRIBURES,children:[{text:e.CHG_GOV_DataGrid_Column_Benefit_Impact,dataIndex:"benefitImpact",editableFlag:!1,typeRepresentation:"integer",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getBrothers();t=t.filter(e=>"false"!=e.options.grid.benefitImpactValid&&"Cancelled"!=e.options.grid.maturity);let n=0,a=0;for(var i=0;i<t.length;i++)n+=t[i].options.grid.benefitImpact;return a=Math.round(n/t.length)}return e.nodeModel.getAttributeValue("benefitImpact")}},{text:e.CHG_GOV_DataGrid_Column_Cost_Impact,dataIndex:"costImpact",editableFlag:!1,typeRepresentation:"integer",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getBrothers();t=t.filter(e=>"false"!=e.options.grid.costImpactValid&&"Cancelled"!=e.options.grid.maturity);let n=0,a=0;for(var i=0;i<t.length;i++)n+=t[i].options.grid.costImpact;return a=Math.round(n/t.length)}return e.nodeModel.getAttributeValue("costImpact")}},{text:e.CHG_GOV_DataGrid_Column_Validation_Effort,dataIndex:"validationEffort",editableFlag:!1,typeRepresentation:"string",allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getBrothers();t=t.filter(e=>"false"!=e.options.grid.validationEffortValid&&"Cancelled"!=e.options.grid.maturity);var i=0;let a=0;for(var n=0;n<t.length;n++)i+=parseFloat(t[n].options.grid.validationEffort);return`&#x2211;  ${i} | x&#772; ${a=i/t.length} `}return e.nodeModel.getAttributeValue("validationEffort")}},{text:e.CHG_GOV_DataGrid_Column_Risk_Impact,dataIndex:"riskImpact",editableFlag:!1,typeRepresentation:"integer",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getBrothers();t=t.filter(e=>"false"!=e.options.grid.riskImpactValid&&"Cancelled"!=e.options.grid.maturity);let n=0,a=0;for(var i=0;i<t.length;i++)n+=t[i].options.grid.riskImpact;return a=Math.round(n/t.length)}return e.nodeModel.getAttributeValue("riskImpact")}},{text:e.CHG_GOV_DataGrid_Column_Implementation_Effort,dataIndex:"implementationEffort",editableFlag:!1,typeRepresentation:"string",allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,a){return"ia_Total"!=i.options.grid.id},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getBrothers();t=t.filter(e=>"false"!=e.options.grid.implementationEffortValid&&"Cancelled"!=e.options.grid.maturity);var i=0;let a=0;for(var n=0;n<t.length;n++)i+=parseFloat(t[n].options.grid.implementationEffort);return`&#x2211; ${i} |  x&#772; ${a=i/t.length}`}return e.nodeModel.getAttributeValue("implementationEffort")}}]}];return"true"==i.getGlobalVariable().ECMEnableDefaultChangeAnalysis&&(t=[...t,...n]),t},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-impactAnalysis-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-impactAnalysis-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-impactAnalysis-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".impactAnalysisTileView"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-impactAnalysis-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-impactAnalysis-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-impactAnalysis-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".impactAnalysisTileView"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},a.createCustomOwner=function(e,t){var a="/api/user/getpicture/login/"+t+"/format/normal",o=i.getGlobalVariable().computeSwymUrl(a),r=new UWA.Element("div",{class:"members"}),s=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:o});else{var c=n.getAvatarDetails(t);(l=UWA.createElement("div",{html:c.avatarStr,class:"avatarIcon"})).style.setProperty("background",c.avatarColor)}l.inject(s);var d=UWA.createElement("span",{class:"userName",html:t});return s.inject(r),d.inject(r),r.outerHTML},a.filterView=function(e,i){if("activeIA"==e)this.currentFilterView="activeIA",t.toolbar.updateNodeModel("newImpactAnalysis",{disabled:!1}),(n=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",setTimeout(function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],function(e){e.ChgCRImpactAnalysisTreeModel.empty();e.refreshGrid(null,null,null,{filterView:"activeIA"})})},100);else if("inactiveIA"==e){this.currentFilterView="inactiveIA";var n=t.toolbar.getNodeModelByID("filter");t.toolbar.updateNodeModel("newImpactAnalysis",{disabled:!0}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",setTimeout(function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],function(e){e.ChgCRImpactAnalysisTreeModel.empty();e.refreshGrid(null,null,null,{filterView:"inactiveIA"})})},100)}},a.filterInactiveIAView=function(){that.filterView("inactiveIA")},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAcontextGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";let a=Object.create(null);return a.getColumns=function(){return[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Type,dataIndex:"typeNLS",editableFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"currentNLS",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellGroupingKey:function(e){return e.nodeModel.options.grid.currentNLS}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}}]},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-context-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-context-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-context-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".content-context-tile-div"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-context-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-context-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-context-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".content-context-tile-div"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRrelatedScopeGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";let a=Object.create(null);return a.getColumns=function(){return[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150},{text:e.CHG_GOV_DataGrid_Column_Type,dataIndex:"typeNLS",editableFlag:!1,visibleFlag:!1},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Revision,dataIndex:"revision",editableFlag:!1},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"currentNLS",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,getCellGroupingKey:function(e){return e.nodeModel.options.grid.currentNLS}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}}]},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-relatedScope-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-relatedScope-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-relatedScope-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".content-relatedScope-tile-div"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-relatedScope-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-relatedScope-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-relatedScope-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".content-relatedScope-tile-div"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/components/welcomePanel/ChgGovWelcomePanelWrapper",["DS/Core/PointerEvents","DS/Utilities/TouchUtils","DS/ENOXWelcomePanel/js/ENOXWelcomePanel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,a,o,r){"use strict";var s=function(){};return s.prototype.init=function(e,t,a){this._applicationChannel=e;var s=[];0==r.getGlobalVariable().isNative&&(s.push({id:n.PATH_RECENTY_OPENED,text:o.CHG_GOV_Welcome_Activity_Recent,fonticon:"clock",className:"action-new",tooltip:o.CHG_GOV_Welcome_Activity_Recent,category:"View"}),s.push({id:n.PATH_OPEN_CHANGE_ORDER,text:o.CHG_GOV_Welcome_Activity_Open_Change_Orders,fonticon:"open",className:"action-new",isNotHighlightable:!0,tooltip:o.CHG_GOV_Welcome_Activity_Open_Change_Orders,category:"View"}),s.push({id:n.PATH_MY_CHANGE_REQUESTS,text:o.CHG_GOV_Welcome_Activity_My_Change_Requests,fonticon:"change-request",className:"action-new",tooltip:o.CHG_GOV_Welcome_Activity_My_Change_Requests,category:"View"}),s.push({id:n.PATH_MY_CHANGE_ORDERS,text:o.CHG_GOV_Welcome_Activity_My_Change_Orders,fonticon:"change-order",className:"action-new",tooltip:o.CHG_GOV_Welcome_Activity_My_Change_Orders,category:"View"})),s.push({id:n.PATH_MY_CHANGE_ACTIONS,text:o.CHG_GOV_Welcome_Activity_My_Change_Actions,fonticon:"change-action",className:"action-new",tooltip:o.CHG_GOV_Welcome_Activity_My_Change_Actions,category:"View"});var l=[];0==r.getGlobalVariable().isNative&&(l.push({id:n.PATH_NEW_CHANGE_REQUEST,text:o.CHG_GOV_Welcome_Activity_New_Change_Request,fonticon:"change-request-add",className:"action-new",isNotHighlightable:!0,tooltip:o.CHG_GOV_Welcome_Activity_New_Change_Request,category:"View"}),"true"==r.getGlobalVariable().isFullLicence&&0==r.getGlobalVariable().isNative&&l.push({id:n.PATH_NEW_CHANGE_ORDER,text:o.CHG_GOV_Welcome_Activity_New_Change_Order,fonticon:"change-order-add",className:"action-new",isNotHighlightable:!0,tooltip:o.CHG_GOV_Welcome_Activity_New_Change_Order,category:"View"})),l.push({id:n.PATH_NEW_CHANGE_ACTION,text:o.CHG_GOV_Welcome_Activity_New_Change_Action,fonticon:"change-action-add",className:"action-new",isNotHighlightable:!0,tooltip:o.CHG_GOV_Welcome_Activity_New_Change_Action,category:"View"});var c=[{id:"appHeader",title:o.CHG_GOV_Welcome_Activity_AppHeader,actions:[{id:"appInfo",text:o.CHG_GOV_Welcome_Activity_AppIntro,fonticon:"dummy",className:"chg-welcome-panel-appInfo"}]},{id:"quick_access",title:o.CHG_GOV_Welcome_Activity_QuickAccess,actions:s},{id:"start_activities",title:o.CHG_GOV_Welcome_Activity_StartActivities,actions:l}];"ENOWCHA_AP"==widget.getValue("appId")&&(c[0].title=o.CHG_EXE_Welcome_Activity_AppHeader),new i({collapsed:!1,title:"chgGov",notifications:[],activities:c,parentContainer:a,modelEvents:e}).render(),this._subscribeToEvents()},s.prototype._subscribeToEvents=function(){var i=this;this._applicationChannel.subscribe({event:"welcome-panel-action-selected"},function(i){if(i&&"home"===i.id?a.navigate(n.ROUTE_LANDING_PAGE):i&&i.id===n.PATH_MY_CHANGE_ORDERS?a.navigate(n.ROUTE_MY_CHANGE_ORDERS,{data:"from welcomepanel"}):i&&i.id===n.PATH_RECENTY_OPENED?a.navigate(n.ROUTE_RECENTY_OPENED,{data:"from welcomepanel"}):i&&i.id===n.PATH_MY_CHANGE_REQUESTS?a.navigate(n.ROUTE_MY_CHANGE_REQUESTS,{data:"from welcomepanel"}):i&&i.id===n.PATH_MY_CHANGE_ACTIONS&&a.navigate(n.ROUTE_MY_CHANGE_ACTIONS,{data:"from welcomepanel"}),t.getTouchMode()){var o=new MouseEvent(e.POINTERDOWN,{bubbles:!1});document.dispatchEvent(o)}}),this._applicationChannel.subscribe({event:"welcome-panel-select-action"},function(e){e&&e.id===n.PATH_MY_CHANGE_ORDERS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_CHANGE_ORDERS,label:o.CHG_GOV_Welcome_Activity_My_Change_Orders}}):e&&e.id===n.PATH_RECENTY_OPENED?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_RECENTY_OPENED,label:o.CHG_GOV_Welcome_Activity_Recent}}):e&&e.id===n.PATH_MY_CHANGE_REQUESTS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_CHANGE_REQUESTS,label:o.CHG_GOV_Welcome_Activity_My_Change_Requests}}):e&&e.id===n.PATH_MY_CHANGE_ACTIONS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_CHANGE_ACTIONS,label:o.CHG_GOV_Welcome_Activity_My_Change_Actions}}):e&&(e.id,n.PATH_CO_IDCard)})},s}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/util/ChgCRContributorsGridUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("contributorEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("contributorEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/model/recents/ChgCORecentsTreeModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields","require"],function(e,t,i,n,a,o,r,s,l){"use strict";return e.extend({init:function(){},setModelEvents:function(e){this._modelEvents=e},getModelEvents:function(){return this._modelEvents},createTreeDocument:function(e){var i=new n;return this.setModelEvents(e),new t({dataModelSet:i})},loadRecentChangeOrderData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=s.createCustomNameField(e);e.chgObjName=t;var n=s.createCustomSeverity(e);e.sev=n;var a=s.createCustomChangeCoordinatorField(e);e.chgObjCoordinator=a;var o=s.createCustomOwnerField(e);e.chgObjOwner=o;var r=e.name+" | "+e.ownerFullName,l=e.maturityNLS,c=s.getStatusBarIcons(e),d=s.statusbarIconsTooltips(e),u=s.getCustomTooltip(e);return new i({label:e.title,subLabel:r,description:l,children:e.isKindOfChangeAction?null:[],grid:e,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],statusbarIcons:c,statusbarIconsTooltips:d,customTooltip:u,useAsyncPreExpand:!0})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";let a=Object.create(null);return a.getColumns=function(){return[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Type,dataIndex:"type",editableFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[],getCellGroupingKey:function(e){return e.nodeModel.options.grid.type}},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellGroupingKey:function(e){return e.nodeModel.options.grid.maturityNLS}},{text:e.CHG_GOV_DataGrid_Column_Severity,dataIndex:"severityNLS",editableFlag:!1,filterId:"set",filterModel:[],getCellGroupingKey:function(e){return e.nodeModel.options.grid.severityNLS}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}}]},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-CA-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-CA-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-CA-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".content-CA-tile-div"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-CA-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-CA-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-CA-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".content-CA-tile-div"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";let a=Object.create(null);return a.getColumns=function(){return[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150},{text:e.CHG_GOV_DataGrid_Column_Type,dataIndex:"typeNLS",editableFlag:!1,visibleFlag:!1},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Revision,dataIndex:"revision",editableFlag:!1},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"currentNLS",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,getCellGroupingKey:function(e){return e.nodeModel.options.grid.currentNLS}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}}]},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-CO-relatedScope-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-CO-relatedScope-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-CO-relatedScope-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".content-CO-relatedScope-tile-div"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-CO-relatedScope-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-CO-relatedScope-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-CO-relatedScope-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".content-CO-relatedScope-tile-div"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";let a=Object.create(null);return a.getColumns=function(t){let n=!1;void 0!==t&&"true"===t.AddImpactBasis&&"true"===t.RemoveImpactBasis&&(n=!0);let a=[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Type,dataIndex:"typeNLS",editableFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Revision,dataIndex:"revision",editableFlag:!1,filterId:"set",filterModel:[]},{text:e.Chg_GOV_Reason_For_Change,dataIndex:"reasonForChange",editableFlag:n,typeRepresentation:"editor",massUpdateAllowedFlag:!0,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"currentNLS",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellGroupingKey:function(e){return e.nodeModel.options.grid.currentNLS}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}}];return i.getGlobalVariable().is3DSpace&&(a[0].allowUnsafeHTMLContent=!0,a[0].getCellGroupingKey=function(e){return e.nodeModel.options.data.grid.title}),a},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-impactBasis-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-impactBasis-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-impactBasis-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".content-impactBasis-tile-div"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-impactBasis-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-impactBasis-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-impactBasis-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".content-impactBasis-tile-div"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsContextualMenu",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C){"use strict";var v={showRMBMenuOnGrid:function(e,t,i){return new Promise(function(n,a){var r=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const s=r.map(e=>e.options.grid.id);var l=!1;r.length>1&&(l=!0);var c=[];c.push(o.createPropertyPushItem(s)),c.push(v.getRelationalExplorerMenu(e));var d=C("DS/ENOChgServices/scripts/services/ChgDataService"),u=C("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),g={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"},f=u.openWith(g),b=null,w=[];w.push(f),l||("ChangeRequest"==r[0].options.grid.isKindOfType?(b=d.getChangeRequestUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(b)):"ChangeOrder"==r[0].options.grid.isKindOfType?(b=d.getChangeOrderUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(b)):(b=d.getChangeActionUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(b))),Promise.all(w).then(function(a){if(a[0]&&c.push(a[0]),l)"true"==p.getGlobalVariable().isFullLicence&&c.push(v.getMaturityMenu(e)),c.push(m.getCopyLink(r)),c.push(v.getTransferMenu(e)),"true"==p.getGlobalVariable().isFullLicence&&(c.push(v.getMaturityMenu(e)),c.push(v.getDeleteMenu(e,t,i)));else{if("ChangeOrder"==r[0].options.grid.isKindOfType){var o=a[1].data[0].dataelements;o=h.processAccessBitCO(o),(a[1]&&"true"==o.Promote||"true"==o.Demote)&&c.push(v.getMaturityMenu(e)),c.push(m.getCopyLink(r)),a[1]&&"true"==o.TransferOwnership&&c.push(v.getTransferMenu(e)),"true"==o.Delete&&c.push(v.getDeleteMenu(e,t,i))}"ChangeRequest"==r[0].options.grid.isKindOfType&&(c.push(v.getMaturityMenu(e)),c.push(m.getCopyLink(r)),a[1]&&"true"==a[1].data[0].dataelements.TransferOwnership&&c.push(v.getTransferMenu(e)),"true"==a[1].data[0].dataelements.Delete&&c.push(v.getDeleteMenu(e,t,i))),"ChangeAction"==r[0].options.grid.isKindOfType&&(c.push(v.getMaturityMenu(e)),c.push(m.getCopyLink(r)),a[1]&&a[1].data[0]&&("true"==a[1].data[0].Transfer&&c.push(v.getTransferMenu(e)),"true"==a[1].data[0].Delete&&c.push(v.getDeleteMenu(e,t,i))))}n(c)})})},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:r.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++){var o=i[a].options.grid.id;n.push(o)}t.openRelationalExplorer(n)})}}}},getTransferMenu:function(e){return{type:"PushItem",title:r.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getDeleteMenu:function(e,t,i){return{type:"PushItem",title:r.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){for(var a=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],r=0;r<a.length;r++){var s=a[r],l={physicalid:s.options.grid.id,nodeName:s.options.grid.name,nodeTitle:s.options.grid.title};o.push(l)}n.deleteNodes(o,t,i)}}}},getMaturityMenu:function(e){return{type:"PushItem",title:r.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=[],r=0;r<i.length;r++)n.push(i[r].options.grid),o.push({physicalid:i[r].options.grid["@id"]||i[r].options.grid.id});new a({context:n,ID:"MaturityHdr"}).executeAsync(o)}}}},makeCopyLinkObject:function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:p.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},showNotification:function(e,t,i,n,a,o,r){var s={level:e,title:t,subtitle:i,message:n,sticky:a,allowUnsafeHTML:r||!1};window.notifs||(window.notifs=c,d.setNotificationManager(window.notifs)),o?d.inject(o):d.elements.container.isInjected()||d.inject(),window.notifs.addNotif(s)}};return v}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i){"use strict";var n=Object.create(null);return n.getColumns=function(){var t=[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Type,dataIndex:"typeNLS",editableFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Revision,dataIndex:"revision",editableFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",editableFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_CollabSpace,dataIndex:"collabspaceNLS",editableFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Organization,dataIndex:"organizationNLS",editableFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.Chg_GOV_Reason_For_Change,dataIndex:"reasonForChange",editableFlag:!0,typeRepresentation:"editor",massUpdateAllowedFlag:!0,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_ImpactAnalysis,dataIndex:"countImpactAnalysis",editableFlag:!1,typeRepresentation:"url",filterId:"number",filterModel:"",getCellValue:function(e){if(e.nodeModel){return{label:e.nodeModel.getAttributeValue("countImpactAnalysis")}}}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,visibleFlag:!0,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellValue:function(e){return e.nodeModel.options.grid.ownerFullName}}];return i.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.data.grid.title}),t},n.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-affectedItems-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-affectedItems-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-affectedItems-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".affectedItemsTileView"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-affectedItems-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-affectedItems-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-affectedItems-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".affectedItemsTileView"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},n}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/util/ChgCRIssueGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";let a=Object.create(null);return a.getColumns=function(){return[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Type,dataIndex:"typeNLS",editableFlag:!1,visibleFlag:!0,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellGroupingKey:function(e){return e.nodeModel.options.grid.maturityNLS}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}}]},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-issue-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-issue-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-issue-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".content-issue-tile-div"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-issue-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-issue-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-issue-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".content-issue-tile-div"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";let a=Object.create(null);return a.getColumns=function(){return[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Type,dataIndex:"typeNLS",editableFlag:!1,visibleFlag:!0,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellGroupingKey:function(e){return e.nodeModel.options.grid.maturityNLS}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}}]},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-CO-issue-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-CO-issue-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-CO-issue-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".content-CO-issue-tile-div"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==i){var n,a,o,r,s;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-CO-issue-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-CO-issue-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-CO-issue-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".content-CO-issue-tile-div"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridContextualMenu"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.relatedScopeDataGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),l.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").removeClassName("minified-header-height"))})},render:function(){try{let e=this.processColumns(),t=this,l={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:s.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return c.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){o.readyDragContent(e,t)},onDragStartCell:function(e,t){o.readyDragContent(e,t)}};l=UWA.merge(l,this.options);let d={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.relatedScopeDataGridView=new i(l),this.relatedScopeDataGridView.cellSelection="none",this.tileView=new n(d),t.relatedScopeDataGridView.getTreeDocument().getXSO().onAdd(function(e){let i;t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"co-related-scope-object-selection-update",data:{count:i}})}),t.relatedScopeDataGridView.getTreeDocument().getXSO().onRemove(function(e){t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"co-related-scope-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})});let u={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=u;let g={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.relatedScopeDataGridView.getTypeRepresentationFactory().registerTypeRepresentations(g),a.toolbar=this.relatedScopeDataGridView.setToolbar(a.writetoolbarDefinition()),this.toolbar=a.toolbar,this.relatedScopeDataGridView.addEventListener("allCellsRendered",function(){t.relatedScopeDataGridView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+t.relatedScopeDataGridView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),document.getElementById("outer-CO-relatedScope-grid-div")&&document.getElementById("outer-CO-relatedScope-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-CO-relatedScope-grid-div",class:"outer-CO-relatedScope-grid-div"});let p=UWA.createElement("div",{class:"toolbar-relatedScope-grid-div"});this.toolbar.inject(p);let h=UWA.createElement("div",{class:"content-CO-relatedScope-grid-div expanded-header-height"}),m=UWA.createElement("div",{styles:{height:"100%"},class:"content-CO-relatedScope-tile-div relatedScopeTileView expanded-header-height"}),C=UWA.createElement("div",{class:"hideView",id:"COrelatedScopeEmptyTileViewDiv"});UWA.createElement("div",{html:s.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(C),this.relatedScopeDataGridView.inject(h),this.tileView.inject(m),C.inject(m),this.chgGridViewContainer.addContent(p),this.chgGridViewContainer.addContent(h),this.chgGridViewContainer.addContent(m)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.relatedScopeDataGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridContextualMenu","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.CAGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),d.unsubscribe("idcard-header-minified"),d.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-CA-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-CA-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").removeClassName("minified-header-height"))})},render:function(){let e=this.processColumns(),t=this,s={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRChangeActionGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return r.showRMBMenuOnGrid(e);t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t}};s=UWA.merge(s,this.options);let d={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.CAGridView=new n(s),this.CAGridView.cellSelection="none",this.tileView=new a(d);var u={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return r.showRMBMenuOnGrid(e)}};this.tileView.onContextualEvent=u,t.CAGridView.getTreeDocument().getXSO().onAdd(function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-CA-object-selection-update",data:{count:i}})}),t.CAGridView.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-CA-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})});this.CAGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),o.toolbar=this.CAGridView.setToolbar(o.writetoolbarDefinition(this.options)),this.toolbar=o.toolbar,this.CAGridView.buildStatusBar([{type:l.STATUS.NB_ITEMS},{type:l.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:l.STATUS.NB_ITEMS},{type:l.STATUS.NB_SELECTED_ROWS}]),document.getElementById("outer-CA-grid-div")&&document.getElementById("outer-CA-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-CA-grid-div",class:"outer-CA-grid-div"});let g=UWA.createElement("div",{class:"toolbar-CA-grid-div"});this.toolbar.inject(g);let p=UWA.createElement("div",{class:"content-CA-grid-div expanded-header-height"}),h=UWA.createElement("div",{styles:{height:"100%"},class:"content-CA-tile-div IssueTileView expanded-header-height"}),m=UWA.createElement("div",{class:"hideView",id:"changeActionEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(m),this.CAGridView.inject(p),this.tileView.inject(h),this.CAGridView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),m.inject(h),this.chgGridViewContainer.addContent(g),this.chgGridViewContainer.addContent(p),this.chgGridViewContainer.addContent(h),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)},onItemClick:function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount){t.nodeModel.select(!0);let e=t.nodeModel.getPath().length;this._modelEvents.publish({event:"IA-CA-Facet-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid,pathlength:e},context:t.nodeModel})}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.CAGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAAddMemberLayout",["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAAddMemberView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m){"use strict";var C={createAddMemberPanel:function(t){C.teamlayoutModel=t.model,C.id=t.id,new e({events:{searchAssignee:function(e){if(C.searchCategoty="Assignee",s.getGlobalVariable().isNative){let e="CHG_Add_Member",t={categoryId:"assignee",reviewerType:r.reviewerType.typeOfReviewer},i=JSON.stringify(t);l.DispatchEventToWin(e,i)}else{let e=n.activateSearch("Person","Contributors");n.search(m.CHG_Add_Member_Assignee,"Person",C.OnSearchComplete,"Contributors",e,void 0,"assignee")}},searchApprover:function(e){if(C.searchCategoty="Approver",s.getGlobalVariable().isNative){let e="CHG_Add_Member",t={categoryId:"reviewer",reviewerType:r.reviewerType.typeOfReviewer},i=JSON.stringify(t);l.DispatchEventToWin(e,i)}else{let e=n.activateSearch("Person","Contributors");n.search(m.CHG_Add_Member_Approver,"Person",C.OnSearchComplete,"Contributors",e,void 0,"reviewer")}},searchInformedUser:function(e){if(C.searchCategoty="Informed User",s.getGlobalVariable().isNative){let e="CHG_Add_Member",t={categoryId:"follower",reviewerType:r.reviewerType.typeOfReviewer},i=JSON.stringify(t);l.DispatchEventToWin(e,i)}else{var t=n.activateSearch("Person","Contributors");n.search(m.CHG_Add_Member_Follower,"Person",C.OnSearchComplete,"Contributors",t,void 0,"follower")}}}}).render().inject(t.target);var a=t.target.querySelector(".chg-add-member-assignee-field"),o=t.target.querySelector(".chg-add-member-approver-field"),c=t.target.querySelector(".chg-add-member-informed-user-field"),p=t.target.querySelector(".chg-add-member-button"),v=t.target.querySelector(".chg-add-member-assignee-field-container"),f=t.target.querySelector(".chg-add-member-approver-field-container"),b=t.target.querySelector(".chg-add-member-informed-user");i.makeDroppable(v,C.ExecuteDropForAssigneeField),i.makeDroppable(f,C.ExecuteDropForApproverField),i.makeDroppable(b,C.ExecuteDropForInformedUserField),C.myButtonPrimary=new d({label:m.CHG_Add_Member_Add,emphasize:"primary",disabled:!0}).inject(p);var w=new d({label:m.CHG_Add_Member_Cancel,emphasize:"secondary"}).inject(p);C.modelForApprover=new g,C.modelForFollower=new g,C.modelForAssignee=new g,C.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new h).getTrigramNameFilter()),C.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new h).getTrigramNameFilter()),C.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new h).getTrigramNameFilter()),C.autoCompleteAssignee=new u({elementsTree:C.modelForAssignee,placeholder:m.CHG_Add_Member_Type_To_Search,customFilterMessage:m.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){C.modelForAssignee.setFilterModel({value:{filterId:"trigramNameFilter_Assignee",filterModel:{text:e}}})}}).inject(a),C.autoCompleteApprover=new u({elementsTree:C.modelForApprover,placeholder:m.CHG_Add_Member_Type_To_Search,customFilterMessage:m.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){this.selectedItems&&this.selectedItems.length>0?"Route Template"===this.selectedItems[0].options.type?C.filterApproverAutoCompleteByType(this.selectedItems[0].options.type,e,!0):"Person"===this.selectedItems[0].options.type&&C.filterApproverAutoCompleteByType(this.selectedItems[0].options.type,e,!1):C.modelForApprover.setFilterModel({value:{filterId:"trigramNameFilter_Approver",filterModel:{text:e}}})}}).inject(o),C.autoCompleteFollower=new u({elementsTree:C.modelForFollower,placeholder:m.CHG_Add_Member_Type_To_Search,customFilterMessage:m.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){C.modelForFollower.setFilterModel({value:{filterId:"trigramNameFilter_Follower",filterModel:{text:e}}})}}).inject(c),C.myButtonPrimary.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque");let a=[],o={person:[],userGroup:[]},r={person:[],routeTemplate:""};if(null!=C.autoCompleteAssignee.selectedItems)for(var s=0;s<C.autoCompleteAssignee.selectedItems.length;s++){let e=C.autoCompleteAssignee.selectedItems[s].options;"Person"==e.type&&a.push(e.identifier)}if(null!=C.autoCompleteApprover.selectedItems)for(s=0;s<C.autoCompleteApprover.selectedItems.length;s++){let e=C.autoCompleteApprover.selectedItems[s].options;"Person"==e.type?r.person.push(e.identifier):"Route Template"==e.type&&(r.routeTemplate=e.id)}if(null!=C.autoCompleteFollower.selectedItems)for(s=0;s<C.autoCompleteFollower.selectedItems.length;s++){let e=C.autoCompleteFollower.selectedItems[s].options;"Person"==e.type?o.person.push(e.identifier):"Group"==e.type&&o.userGroup.push(e.id)}(r.person.length>0||""!=r.routeTemplate||o.person.length>0||o.userGroup.length>0||a.length>0)&&(C.autoCompleteAssignee.selectedItems=C.autoCompleteApprover.selectedItems=C.autoCompleteFollower.selectedItems=void 0,C.addmember(a,r,o))}),w.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque")})},launchAddMemberPanel:function(){var e=document.querySelector(".addmemberView"),t=document.querySelector(".memberfilterView"),i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView"),a=document.querySelector(".chg-add-member-approver"),o=document.querySelector(".chg-add-member-assignee");t.hide(),i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque"),a.classList.remove("teamview-opaque"),o.classList.remove("teamview-opaque"),"block"==e.style.display?e.hide():(e.show(),i.addClassName("teamview-opaque"),n.addClassName("teamview-opaque"),"Route Template"==r.reviewerType.typeOfReviewer&&a.classList.add("teamview-opaque"),C.updateAutoCompleteModel(),C.addChangeEventListener(),C.myButtonPrimary.disabled=!0)},updateAutoCompleteModel:function(e){var t=s.getGlobalVariable().contextUser;let i={},n=C.teamlayoutModel.getChildren();for(let e=0;e<n.length;e++){let t=n[e].options.grid;i[t.id]=t.roleList,"Route Template"==t.type&&console.log("set RT value true..!")}var a={categoryId:"assignee",contextUser:t},o={categoryId:"reviewer",contextUser:t},l={categoryId:"follower",contextUser:t};C.modelForAssignee.empty(),C.modelForApprover.empty(),C.modelForFollower.empty(),r.getListMember(a).then(function(e){C.modelForAssignee.prepareUpdate();for(var t=0;t<e.length;t++){let n=e[t].id;if(i.hasOwnProperty(n)&&(e[t].name=e[t].name+" ("+i[n]+")",1==i[n].contains(m.CHG_Member_Role_Assignee)))continue;let a=new p({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});C.modelForAssignee.addRoot(a)}C.modelForAssignee.pushUpdate()}),r.getListMember(o).then(function(e){C.modelForApprover.prepareUpdate();for(var t=0;t<e.length;t++){let n=e[t].id;if(i.hasOwnProperty(n)&&(e[t].name=e[t].name+" ("+i[n]+")",1==i[n].contains(m.CHG_Member_Role_Approver)))continue;let a=new p({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,grid:{type:e[t].type,name:e[t].name},type:e[t].type,id:e[t].id});C.modelForApprover.addRoot(a)}C.modelForApprover.pushUpdate()}),r.getListMember(l).then(function(e){C.modelForFollower.prepareUpdate();for(var t=0;t<e.length;t++){let n=e[t].id;if(i.hasOwnProperty(n)&&(e[t].name=e[t].name+" ("+i[n]+")",1==i[n].contains(m.CHG_Member_Role_Follower)))continue;let a=new p({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});C.modelForFollower.addRoot(a)}C.modelForFollower.pushUpdate()})},addmember:function(e,i,n){var s=C.id,l=t.makeUpdateMemberJson("CONNECT",e,i,n);a.updateChangeActionMembers(s,l).then(function(e){var i=o.processedChangeActionMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"],function(e){for(var n=e.ChgMembersTreeModel.getChildren(),a=[],o=0;o<i.length;o++){var s=i[o];if("approver"==s.role){if("Route Template"==s.type){a.push(s),r.reviewerType.typeOfReviewer="Route Template";continue}"Person"==s.type&&(r.reviewerType.typeOfReviewer="Person")}"Coordinator"==s.role&&(t.isChangeCoordinatorConnected=!0);for(var l=s.id,c=!1,d=0;d<n.length;d++)if(l==n[d].options.grid.id){c=!0;break}if(1==c){e.ChgMembersTreeModel.prepareUpdate();let i=s.role;n[d].options.description=n[d].options.grid.roleList+=", "+t.getRoleNLSValue(i),n[d].options.grid.role+=","+i,n[d].options.grid.roles.push(i),e.ChgMembersTreeModel.pushUpdate()}else a.push(s)}a.length>0&&e.addNodesInLayout(a)})})},ExecuteDropForApproverField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Approver")},ExecuteDropForAssigneeField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Assignee")},ExecuteDropForInformedUserField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Informed User")},ExecuteDropForAddMemberPanel:function(e,t){if(e&&e.data&&e.data.items){var i=e.data.items;if(UWA.is(i)&UWA.is(i.length)&&i.length>0){for(var a=[],s=[],l=[],d=0;d<i.length;d++)i[d].objectId&&(null==i[d].serviceId||"3DSpace"==i[d].serviceId||i[d].serviceId.indexOf("3dspace")>-1?i[d].objectId.indexOf("pid:")>-1?a.push(i[d].objectId.replace("pid:","")):a.push(i[d].objectId):"3DSwym"==i[d].serviceId&&"pno:Person"==i[d].objectType&&(s.push(i[d].objectId.replace("iam:","")),l.push(i[d].displayName)));0==a.length&&0==s.length||n.getAdditionObjectInfo(a).then(function(e){var i=[];if("Approver"===t){let t=[...a.map(t=>e.additionObjectInfo[t].type),...(C.autoCompleteApprover.selectedItems||[]).map(e=>e.options.type)];if(t.filter(e=>"Route Template"===e).length>1)return c.error(m.ECM_CA_ROUTE_TEMPLATE_ALREADY_CONNECTED);if(t.length>1&&t.includes("Route Template")&&t.includes("Person"))return c.error(m.ECM_CA_PERSON_ROUTE_MIXED_ERROR_1)}for(var n=0;n<a.length;n++){var d=null,u=e.additionObjectInfo[a[n]];if("Approver"!==t||!u.type||"Route Template"!==u.type&&"Person"!=u.type)if("Assignee"===t&&u.type&&"Person"==u.type){var g=new p({label:u.fullName,value:u.objectName,name:u.fullName,type:u.type,id:u.pid,identifier:u.objectName});i.push(g),C.autoCompleteAssignee.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteAssignee,i),C.autoCompleteAssignee._applySelectedItems()}else{if("Informed User"!==t||!u.type||"Person"!==u.type&&"Group"!==u.type)return void console.log("NLS.ECM_ERR_NO_PERSON_NO_ROUTETEMPLATE");{let e="";"Person"===u.type?e=new p({label:u.fullName,value:u.objectName,name:u.fullName,type:u.type,id:u.pid,identifier:u.objectName}):"Group"===u.type&&(e=new p({label:u.objectTitle,value:u.objectName,name:u.objectTitle,type:u.type,id:u.pid})),i.push(e),C.autoCompleteFollower.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteFollower,i),C.autoCompleteFollower._applySelectedItems()}}else{let e=r.reviewerType.typeOfReviewer;if("Route Template"===u.type)"Person"!=e?(d=new p({label:u.objectName,value:u.objectName,name:u.objectName,type:u.type,id:u.pid,identifier:u.objectName}),i.push(d)):console.log("show erroe message...!");else if("Person"==u.type)if("Route Template"!=e){var h=new p({label:u.fullName,value:u.objectName,name:u.fullName,type:u.type,id:u.pid,identifier:u.objectName});i.push(h)}else console.log("show erroe message...!");C.autoCompleteApprover.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteApprover,i),C.autoCompleteApprover._applySelectedItems()}}for(n=0;n<s.length;n++){d=null;"Assignee"===t?(d=new p({label:l[n],value:s[n],name:l[n],identifier:s[n],type:"Person",id:s[n]}),i.push(d),C.autoCompleteAssignee.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteAssignee,i),C.autoCompleteAssignee._applySelectedItems()):"Approver"===t?(d=new p({label:l[n],value:s[n],name:l[n],identifier:s[n],type:"Person",id:s[n]}),i.push(d),C.autoCompleteApprover.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteApprover,i),C.autoCompleteApprover._applySelectedItems()):"Informed User"===t&&(d=new p({label:l[n],value:s[n],name:l[n],identifier:s[n],type:"Person",id:s[n]}),i.push(d),C.autoCompleteFollower.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteFollower,i),C.autoCompleteFollower._applySelectedItems())}},function(e){return console.log("Failed in getting person id"),Promise.reject(e)})}else console.log("NLS.ECM_CA_Drop_Not_Supported")}else console.log("NLS.ECM_CA_Drop_Not_Supported")},OnSearchComplete:function(e){var t=[];if(s.getGlobalVariable().isNative){let t=e.split("~"),n=[];for(var i=0;i<t.length;i++)n.push(t[i]);let a=[];for(let e=0;e<t.length;e++)a.push(n[e].split(","));e=a}for(var n=0;n<e.length;n++)t.push({objectId:e[n][0],identifier:e[n][1],objectType:e[n][2],displayType:e[n][3],displayName:e[n][5],serviceId:e[n][7]});var a={data:{}};a.data.items=t,C.ExecuteDropForAddMemberPanel(a,C.searchCategoty)},addChangeEventListener:function(){C.autoCompleteApprover.addEventListener("change",function(){var e=C.autoCompleteApprover.selectedItems,t=e.length;if(0===t&&(C.myButtonPrimary.disabled=!0),t>0&&(C.myButtonPrimary.disabled=!1),t>0){var i=e[t-1];C.autoCompleteApprover.elementsTree.getChildren().findIndex(function(e){if(e.options.name==i.options.name)return!0})<0&&(C.autoCompleteApprover._selectionChips.removeChip(i.options.label),C.autoCompleteApprover.selectedItems.pop(),C.autoCompleteApprover.value.pop())}1==t?"Route Template"==i.options.type?(C.filterApproverAutoCompleteByType("Route Template","",!0),C.autoCompleteApprover._hidePopup()):"Person"==i.options.type&&C.filterApproverAutoCompleteByType("Person","",!1):0==t&&(C.filterApproverAutoCompleteByType("Both","",!1),C.autoCompleteApprover.elements.popup&&1==C.autoCompleteApprover.elements.popup.visibleFlag&&(C.autoCompleteApprover._hidePopup(),C.autoCompleteApprover._showPopup()))}),C.autoCompleteAssignee.addEventListener("change",function(){var e=C.autoCompleteAssignee.selectedItems.length;0==e&&(C.myButtonPrimary.disabled=!0),e>0&&(C.myButtonPrimary.disabled=!1)}),C.autoCompleteFollower.addEventListener("change",function(){var e=C.autoCompleteFollower.selectedItems.length;0==e&&(C.myButtonPrimary.disabled=!0),e>0&&(C.myButtonPrimary.disabled=!1)})},filterApproverAutoCompleteByType:function(e,t,i){var n=[];"Both"==e?(n.push("Route Template"),n.push("Person")):n.push(e),!0===i?"Route Template"===e&&C.modelForApprover.setFilterModel({type:{filterId:"set",filterModel:[null]}}):C.modelForApprover.setFilterModel({type:{filterId:"set",filterModel:n},value:{filterId:"trigramNameFilter_Approver",filterModel:{text:t}}})}};return C}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/members/ChgCRMembersDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";var h=e.extend({init:function(e){this.contextID=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({useAsyncPreExpand:!0,id:"crMembers"});return this.setTreeDocument(e),e},loadChangeRequestMembersData:function(e,t){a.isRouteTemplateConnected=!1,a.isChangeCoordinatorConnected=!1,e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate();let n=document.getElementById("crMembers");n&&g.isMasked(n)&&g.unmask(n)},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomPersonNameField(e);e.person_name=t,e.roleList="";for(var n=0;n<e.roles.length;n++){var o=e.roles[n],r=a.getRoleNLSValue(o);e.roleList+=r,n!=e.roles.length-1&&(e.roleList+=", ")}e.roles.indexOf("Approver")>=0&&(a.isRouteTemplateConnected=!0),e.roles.indexOf("Coordinator")>=0&&(a.isChangeCoordinatorConnected=!0);var s="",l=[e.icon],c=e.roleList;"Person"==e.type?(s=this.getPersonImageDiv(e,!0)).addClassName("chg-member-profile-picture"):s=e.thumbnail;return new i({label:e.fullName,subLabel:"",description:c,grid:e,icons:l,thumbnail:s,contextualMenu:["Copy1","Move1"]})},createCustomPersonNameField:function(e){var t=new UWA.Element("div",{class:"members"}),i="";(i="Person"==e.type?this.getPersonImageDiv(e):this.getRouteTemplateImageDiv(e)).addClassName("assignee");var n=UWA.createElement("span",{class:"userName",html:e.fullName});return i.inject(t),n.inject(t),t.outerHTML},getPersonImageDiv:function(e,t){var i="/api/user/getpicture/login/"+e.userId+"/format/normal";i=o.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),a="";if(o.getGlobalVariable().isSwymInstalled)a=UWA.createElement("img",{class:"userIcon",src:i});else{var r=s.getAvatarDetails(e.fullName);a=UWA.createElement("div",{html:r.avatarStr}),1==t?(a.addClassName("chg-member-profile-picture"),a.addClassName("chg-team-profile-text")):a.addClassName("avatarIcon"),a.style.setProperty("background",r.avatarColor)}return a.inject(n),n},getRouteTemplateImageDiv:function(e){var t=new UWA.Element("div",{});return UWA.createElement("img",{class:"memberIcon",src:e.icon}).inject(t),t},addNodesInLayoutModel:function(e,t){var i=h.prototype.createTreeDocumentNodeModel(t);e.prepareUpdate(),e.addRoot(i),e.pushUpdate()},removeChildren:function(){var e=this,t=e.contextID,i=e.treeDocument.getSelectedNodes();if(0!=i.length){for(var n="",o="",s={person:[],userGroup:[]},c={person:[],userGroup:[]},d=0;d<i.length;d++){let e=i[d].options.grid;var p=e.role;if(p.includes("Owner")||p.includes("Originator")){let e=document.getElementById("crMembers");e&&g.isMasked(e)&&g.unmask(e),u.warn(r.CHG_Warn_Member_Remove_Owner_Originator)}else p.includes("Coordinator")&&(n=e.userId,a.isChangeCoordinatorConnected=!1),p.includes("Approver")&&(o=e.id,a.isRouteTemplateConnected=!1),p.includes("Follower")&&("Person"==e.type?s.person.push(e.userId):"Group"==e.type&&s.userGroup.push(e.id)),p.includes("Assignee")&&("Person"==e.type?c.person.push(e.userId):"Group"==e.type&&c.userGroup.push(e.id))}if(""!=o||c.person.length>0||c.userGroup.length>0||s.person.length>0||s.userGroup.length>0||""!=n){var h=a.makeUpdateMemberJson("DISCONNECT",n,o,s,c);l.updateChangeRequestMembers(t,h).then(function(t){for(var n=0;n<i.length;n++){var a=i[n].options.grid.role;a.includes("Owner")||a.includes("Originator")||e.treeDocument.removeRoot(i[n])}let o=document.getElementById("crMembers");o&&g.isMasked(o)&&g.unmask(o)},function(e){let t=document.getElementById("crMembers");t&&g.isMasked(t)&&g.unmask(t)})}}}});return h}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRrelatedScopeGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("relatedScopeEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("relatedScopeEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsTileViewLayout","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","DS/Tweakers/GeneratedToolbar","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";return e.extend({init:function(e){this._parent(e);this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),this.subscribeToModelEvents(e.treeDocument),0==e.treeDocument.getRoots().length?e.treeDocument._modelEvents.publish({event:"treeEmpty"}):e.treeDocument._modelEvents.publish({event:"treeNotEmpty"})},render:function(){try{var e={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.tileView=new a(e);try{new d}catch(e){console.log(e)}var t=g.prototype.createTreeDocument(o.writetoolbarDefinition(this.options)),i=new g({items:t,direction:"horizontal"});o.toolbar=i,this.toolbar=o.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates({expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}}),this.toolbar.typeRepresentationFactory.registerTypeRepresentations({expandInput:{stdTemplate:"expandInputtemplate"}});var n=this;this.tileView.buildStatusBar([{type:l.STATUS.NB_ITEMS},{type:l.STATUS.NB_SELECTED_ROWS}]),this.tileView.getTreeDocument().getXSO().onAdd(function(e){let t;e.getTreeDocument()&&(t=e.getTreeDocument().getSelectedNodes().length),n._modelEvents.publish({event:"cr-impact-analysis-contributor-object-selection-update",data:{count:t}})}),this.tileView.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length&&n._modelEvents.publish({event:"cr-impact-analysis-contributor-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}),document.getElementById("outer-contributor-grid-div")&&document.getElementById("outer-contributor-grid-div").destroy(),this.membersDatagridView=UWA.createElement("div",{id:"outer-contributor-grid-div",class:"outer-contributor-grid-div",styles:{width:"100%",height:"100%",display:"block"}});var r=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-contributor-grid-div"});this.toolbar.inject(r);var s=UWA.createElement("div",{class:"content-contributor-tile-div contributortileView"}),u=UWA.createElement("div",{class:"hideView",id:"contributorEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Contributors_DataGrid_PlaceHolder}).inject(u),this.tileView.inject(s),this.membersDatagridView.addContent(r),u.inject(s),s.inject(this.membersDatagridView)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"treeEmpty"},function(e){r.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){r.hideEmptyView()})},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],function(e){e.modelEvents.publish({event:"remove_aggregation_row_datagrid",data:{treeDocument:e.treeDocument}}),e.chgCRImpactAnalysisView.chgGridView.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.changeView("TileView")},100)})},showEmptyView:function(){var e=document.getElementById("impactAnalysisEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("impactAnalysisEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/util/ChgCRContributorsGridUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/contributors/ChgCRContributorsDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";var u={createMembersView:function(t,i){i=i[0];var a=this,r={};(r=UWA.merge(r,i)).target=t,this.ChgCRContributorsDataGridModel=new n(r.grid.parentCRId,r.grid.id),this.modelEvents=r.modelEvents,this.subscribeToModelEvents(r.treeDocument),r.treeDocument=this.ChgCRContributorsDataGridModel.createTreeDocument();o.getImpactAnalysisFacet(r.grid.id,"contributors").then(i=>{this.ChgCRContributorsDataGridModel.loadContributor(r.treeDocument,i.data[0].contributors),this.ChgCRContributorTreeModel=r.treeDocument,d.makeDroppable(r.target,a.dropHandler),this.treeDocument=r.treeDocument;var n=new e(r);this.membersDataGridView=n,s.unmask(t)})},subscribeToModelEvents:function(e){this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-contributor-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-contributor-object-selection-update"},function(e){u.handleObjectSelectionUpdate(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){var t={data:{}};t.data.items=e;var i=[];a.getObjectAdditionalInfo(t).then(function(e){for(var t=0;t<e.length;t++)i.push({id:e[t].pid,name:e[t].objectName,updateAction:"CONNECT"});u.ChgCRContributorsDataGridModel.addExistingChildren(i).then(function(e){u.modelEvents.publish({event:"update-contributor",data:{operation:"CONNECT",context:e.data}})},function(e){})},function(e){console.log("Failed in getting response")})},addExistingHandler:function(){if(c.getGlobalVariable().is3DSpace){const t="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=Person&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+t,850,630);var e=function(i){if(i.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(t)>-1){let t=JSON.parse(localStorage.searchedObjectDetails);delete t.uniqueKey,u.OnSearchComplete(Object.values(t)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",e)}else console.log("inside EVENT")};window.addEventListener("storage",e)}else{let e=u.ChgCRContributorsDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingIAAssignee",extendedQuery:u.createExcludeListForSearch(e)};const i=a.activateSearch();a.search(l.CHG_Contributors_Toolbar_AddContributor,"Person",u.OnSearchComplete,"Contributors",i,void 0,void 0,t)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++){var n={id:e[i][0],name:e[i][1],updateAction:"CONNECT"};t.push(n)}t.length&&u.ChgCRContributorsDataGridModel.addExistingChildren(t).then(function(e){u.modelEvents.publish({event:"update-contributor",data:{operation:"CONNECT",context:e.data}})},function(e){})},removeHandler:function(){console.log("deleting nodeModel");const e=u.treeDocument.getSelectedNodes();if(e.length>0){let i=[];for(var t=0;t<e.length;t++)i.push({id:e[t].options.grid.id,name:e[t].options.grid.name,updateAction:"DISCONNECT"});u.ChgCRContributorsDataGridModel.removeExistingChildren(i).then(function(e){u.modelEvents.publish({event:"update-contributor",data:{operation:"DISCONNECT",context:e}})},function(e){})}else r.error(l.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){0===e.count?u.membersDataGridView.toolbar.updateNodeModel("remove",{disabled:!0}):u.membersDataGridView.toolbar.updateNodeModel("remove",{disabled:!1})},changeView:function(e){i.changeView("GridView")}};return u}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAcontextGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("contextEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("contextEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("impactBasisEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("impactBasisEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/model/facets/members/ChgMembersDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";var h=e.extend({init:function(e){this.contextID=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"coMembers",useAsyncPreExpand:!0});return this.setTreeDocument(e),e},loadChangeOrderMembersData:function(e,t){e.prepareUpdate(),a.isRouteTemplateConnected=!1,a.isChangeCoordinatorConnected=!1;var i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate();let n=document.getElementById("coMembers");n&&g.isMasked(n)&&g.unmask(n)},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomPersonNameField(e);e.person_name=t,e.roleList="";for(var n=0;n<e.roles.length;n++){var o="";switch(e.roles[n]){case"Owner":o=r.CHG_Member_Role_Owner;break;case"Originator":o=r.CHG_Member_Role_Originator;break;case"Coordinator":o=r.CHG_Member_Role_ChangeCoordinator;break;case"Approver":o=r.CHG_Member_Role_Approver;break;case"Follower":o=r.CHG_Member_Role_Follower}e.roleList+=o,n!=e.roles.length-1&&(e.roleList+=", ")}e.roles.indexOf("Approver")>=0&&(a.isRouteTemplateConnected=!0),e.roles.indexOf("Coordinator")>=0&&(a.isChangeCoordinatorConnected=!0);var s="",l=[e.icon],c=e.roleList;"Person"==e.type?(s=this.getPersonImageDiv(e,!0)).addClassName("chg-member-profile-picture"):s=e.thumbnail;return new i({label:e.fullName,subLabel:"",description:c,grid:e,icons:l,thumbnail:s,contextualMenu:["Copy1","Move1"]})},createCustomPersonNameField:function(e){var t=new UWA.Element("div",{class:"members"}),i="";(i="Person"==e.type?this.getPersonImageDiv(e):this.getRouteTemplateImageDiv(e)).addClassName("assignee");var n=UWA.createElement("span",{class:"userName",html:e.fullName});return i.inject(t),n.inject(t),t.outerHTML},getPersonImageDiv:function(e,t){var i="/api/user/getpicture/login/"+e.userId+"/format/normal";i=o.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),a="";if(o.getGlobalVariable().isSwymInstalled)a=UWA.createElement("img",{class:"userIcon",src:i});else{var r=s.getAvatarDetails(e.fullName);a=UWA.createElement("div",{html:r.avatarStr}),1==t?(a.addClassName("chg-member-profile-picture"),a.addClassName("chg-team-profile-text")):a.addClassName("avatarIcon"),a.style.setProperty("background",r.avatarColor)}return a.inject(n),n},getRouteTemplateImageDiv:function(e){var t=new UWA.Element("div",{});return UWA.createElement("img",{class:"memberIcon",src:e.icon}).inject(t),t},addNodesInLayoutModel:function(e,t){var i=h.prototype.createTreeDocumentNodeModel(t);e.prepareUpdate(),e.addRoot(i),e.pushUpdate()},removeChildren:function(){var e=this,t=e.contextID,i=e.treeDocument.getSelectedNodes();if(0!=i.length){for(var n="",o="",s={person:[],userGroup:[]},c=0;c<i.length;c++){let e=i[c].options.grid;var d=e.roleList;if(d.indexOf("Owner")>=0||d.indexOf("Originator")>=0){let e=document.getElementById("coMembers");e&&g.isMasked(e)&&g.unmask(e),u.warn(r.CHG_Warn_Member_Remove_Owner_Originator)}else d.indexOf("Coordinator")>=0&&(n=e.userId,a.isChangeCoordinatorConnected=!1),d.indexOf("Approver")>=0&&(o=e.id,a.isRouteTemplateConnected=!1),d.indexOf("Informed User")>=0&&("Person"==e.type?s.person.push(e.userId):"Group"==e.type&&s.userGroup.push(e.id))}if(""!=o||s.person.length>0||s.userGroup.length>0||""!=n){var p=a.makeUpdateMemberJson("DISCONNECT",n,o,s);l.updateChangeOrderMembers(t,p).then(function(t){for(var n=0;n<i.length;n++){var a=i[n].options.grid.roleList;a.indexOf("Owner")>=0||a.indexOf("Originator")>=0||e.treeDocument.removeRoot(i[n])}let o=document.getElementById("coMembers");o&&g.isMasked(o)&&g.unmask(o)},function(e){let t=document.getElementById("coMembers");t&&g.isMasked(t)&&g.unmask(t)})}}}});return h}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require"],function(e,t,i,n,a,o,r,s,l){"use strict";var c={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const a=[];let o=!1;const d=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();d.length>1&&(o=!0);const u=d.map(e=>e.options.grid.id),g=(d.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),p=e.cellInfos.nodeModel.options.grid.id,h=e.cellInfos.nodeModel.options.grid.type,m=e.cellInfos.nodeModel.options.grid.name,C=e.cellInfos.nodeModel.options.grid.displayType,v={objectId:p,objectType:h,displayName:m,displayType:C,facetName:"dependency"},f=g.openWith(v);if(o){a.push(n.createPropertyPushItem(u)),a.push(c.getRelationalExplorerMenu(u)),a.push(c.getMaturityMenu(e)),a.push(c.getTransferMenu(e));var b=[];b.push(p),r.getDocuments(b).then(function(e){"TRUE"===e[0].dataelements.isDocumentType&&(a.push(s.getDownloadMenu(b)),a.push(s.getPreviewMenu(b))),t(a)})}else a.push(n.createPropertyPushItem(u)),a.push(c.getRelationalExplorerMenu(u)),f.then(i=>{i&&a.push(i),a.push(c.getMaturityMenu(e)),a.push(c.getTransferMenu(e));var n=[];n.push(p),r.getDocuments(n).then(function(e){"TRUE"===e[0].dataelements.isDocumentType&&(a.push(s.getDownloadMenu(n)),a.push(s.getPreviewMenu(n))),t(a)})})})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getMaturityMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){e.cellInfos.nodeModel.options.grid;for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],o=[],r=0;r<n.length;r++)a.push(n[r].options.grid),o.push({physicalid:n[r].options.grid["@id"]||n[r].options.grid.id});new i({context:a,ID:"MaturityHdr"}).executeAsync(o)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return c}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require"],function(e,t,i,n,a,o,r,s,l){"use strict";var c={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const a=[];let o=!1;const d=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();d.length>1&&(o=!0);const u=d.map(e=>e.options.grid.id),g=(d.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),p=e.cellInfos.nodeModel.options.grid.id,h=e.cellInfos.nodeModel.options.grid.type,m=e.cellInfos.nodeModel.options.grid.name,C=e.cellInfos.nodeModel.options.grid.displayType,v={objectId:p,objectType:h,displayName:m,displayType:C,facetName:"dependency"},f=g.openWith(v);if(o){a.push(n.createPropertyPushItem(u)),a.push(c.getRelationalExplorerMenu(u)),a.push(c.getMaturityMenu(e)),a.push(c.getTransferMenu(e));var b=[];b.push(p),r.getDocuments(b).then(function(e){"TRUE"===e[0].dataelements.isDocumentType&&(a.push(s.getDownloadMenu(b)),a.push(s.getPreviewMenu(b))),t(a)})}else a.push(n.createPropertyPushItem(u)),a.push(c.getRelationalExplorerMenu(u)),f.then(i=>{i&&a.push(i),a.push(c.getMaturityMenu(e)),a.push(c.getTransferMenu(e));var n=[];n.push(p),r.getDocuments(n).then(function(e){"TRUE"===e[0].dataelements.isDocumentType&&(a.push(s.getDownloadMenu(n)),a.push(s.getPreviewMenu(n))),t(a)})})})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getMaturityMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],o=[],r=0;r<n.length;r++)a.push(n[r].options.grid),o.push({physicalid:n[r].options.grid["@id"]||n[r].options.grid.id});new i({context:a,ID:"MaturityHdr"}).executeAsync(o)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return c}),define("DS/ENOChgGovernanceUX/scripts/components/applicationTopBar/ChgGovApplicationTopBarWrapper",["DS/ENOXPageToolBar/js/PageToolBar","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOXBreadcrumb/js/Breadcrumb","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s){"use strict";var l=function(){};return l.prototype.init=function(a,r,s){this.xModelRouter=r,this._applicationChannel=a,this._isReadyToNavigate=!0,this._breadcrumbLink=[];var l={withInformationButton:!0,withWelcomePanelButton:!0,modelEvents:this._applicationChannel,parentContainer:s},c=new e(l);c.render().inject(s);var d=c.getBodyContent();this._tileContent=UWA.createElement("div",{styles:{display:"none",padding:"6px 0",fontSize:"14px"},html:o.CHG_GOV_Welcome_Activity_Recent}),this._tileContent.inject(d),this._title={id:t.ROUTE_HOME,label:"Home"},this._breadcrumb=new i({rootID:"home",toolTip:!0,toolTipText:o.CHG_GOV_LABEL_HOME,rootIcon:"home",modelEvents:this._applicationChannel}),this._breadcrumb.render().inject(d),this._pathModel=[n._KEY,n._VIEWS_PREFERENCES],this._subscribeToEvents()},l.prototype._subscribeToEvents=function(){var e=this;this._applicationChannel.subscribe({event:"welcome-panel-collapse"},function(){e._applicationChannel.publish({event:"triptych-set-size",data:{size:t.LEFT_PANEL_SIZE_COLLAPSED,side:"left"}}),e._applicationChannel.publish({event:"triptych-show-panel",data:"left"})}),this._applicationChannel.subscribe({event:"welcome-panel-expand"},function(){e._applicationChannel.publish({event:"triptych-set-size",data:{size:t.LEFT_PANEL_SIZE_EXPANDED,side:"left"}}),e._applicationChannel.publish({event:"triptych-show-panel",data:"left"})}),this._applicationChannel.subscribe({event:"information-panel-close"},function(){e._applicationChannel.publish({event:"triptych-hide-panel",data:"right"})}),this._applicationChannel.subscribe({event:"triptych-hide-panel"},function(e){"right"==e&&s.publish(`PropHeaderDeActivated:${widget.id}`)}),this._applicationChannel.subscribe({event:"information-panel-open"},function(){e._applicationChannel.publish({event:"triptych-show-panel",data:"right"}),e._applicationChannel.publish({event:"information-panel-visible",data:null})}),this._applicationChannel.subscribe({event:"triptych-panel-hidden"},function(t){"right"===t&&e._applicationChannel.publish({event:"information-panel-hidden",data:null})}),this._applicationChannel.subscribe({event:"breadcrumb-hide"},function(){e._breadcrumb.hide()}),this._applicationChannel.subscribe({event:"topbar-show-title"},function(t){t&&(e._title.id=t.id,e._title.label=t.label,e._tileContent.setContent(t.label)),e._breadcrumb.hide(),e._tileContent.show()}),this._applicationChannel.subscribe({event:"topbar-hide-title"},function(){e._tileContent.hide(),e._breadcrumb.show()}),this._applicationChannel.subscribe({event:"update-ready-to-navigation-flag"},function(t){e._isReadyToNavigate=t}),this._applicationChannel.subscribe({event:"breadcrumb-link-added"},function(i){var n=e._breadcrumb.collection.findWhere({linkID:i.linkID});if(n._attributes.linkID!==t.ROUTE_CO_DETAILS){var a=e._breadcrumbLink.filter(function(e){return e.linkID===n._attributes.linkID}).length>0;n&&!a&&(e._breadcrumbLink.push(n._attributes),console.log("Last link added in Breadcrumb List"))}}),this._applicationChannel.subscribe({event:"breadcrumb-link-removed"},function(t){var i=e._breadcrumbLink.find(function(e){if(e.linkID===t.linkID)return e});if(console.log("Link remove"),i&&e._breadcrumbLink){e._breadcrumbLink.indexOf(i);e._breadcrumbLink=e._breadcrumbLink.splice(i,1),console.log("Link removed from Breadcrumb List")}}),this._applicationChannel.subscribe({event:"breadcrumb-reseted"},function(t){if(!e._isReadyToNavigate){var i=0;for(i=0;i<e._breadcrumbLink.length;i++)e._applicationChannel.publish({event:"breadcrumb-add-link",data:e._breadcrumbLink[i]}),e._breadcrumbLink.shift()}}),this._applicationChannel.subscribe({event:"breadcrumb-link-clicked"},function(i){if(e._applicationChannel.publish({event:"triptych-hide-panel",data:"right"}),e._isReadyToNavigate){if("home"===(r=i.linkID.replace(/-/g,"."))){var n=e._title.id||t.ROUTE_HOME;e._breadcrumbLink=[],e.xModelRouter.navigate(n,{})}else{var a=null,o=0;for(o=0;o<e._breadcrumb.collection.length;o+=1)if(e._breadcrumb.collection.at(o).id===i.linkID){a=e._breadcrumb.collection.at(o).get("additionalData");break}!1,e._breadcrumbLink.pop(),a?e.xModelRouter.navigate(r,a):e.xModelRouter.navigate(r)}}else{var r;if("home"!=(r=i.linkID.replace(/-/g,"."))){var s=e._breadcrumbLink[e._breadcrumbLink.length-1];s.linkID!=i.linkID&&e._applicationChannel.publish({event:"breadcrumb-add-link",data:s})}e._applicationChannel.publish({event:"warning-dialog-create",data:i})}})},l}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/util/ChgCRIssueGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("issueEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("issueEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridContextualMenu","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),c.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").removeClassName("minified-header-height"))})},render:function(){let e=this.processColumns(),t=this,c={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:s.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){o.readyDragContent(e,t)},onDragStartCell:function(e,t){o.readyDragContent(e,t)}};c=UWA.merge(c,this.options);let d={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag","statusbarIcons"]};this.chgGridView=new i(c),this.chgGridView.cellSelection="none",this.tileView=new n(d);let u={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=u;this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),a.toolbar=this.chgGridView.setToolbar(a.writetoolbarDefinition(this.options.accessBits)),this.toolbar=a.toolbar,this.chgGridView.buildStatusBar([{type:r.STATUS.NB_ITEMS},{type:r.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:r.STATUS.NB_ITEMS},{type:r.STATUS.NB_SELECTED_ROWS}]),this.chgGridView.getTreeDocument().getXSO().onAdd(function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-impact-analysis-basis-object-selection-update",data:{count:i}})}),this.chgGridView.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-impact-analysis-basis-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}),document.getElementById("outer-impactBasis-grid-div")&&document.getElementById("outer-impactBasis-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-impactBasis-grid-div",class:"outer-impactBasis-grid-div"});let g=UWA.createElement("div",{class:"toolbar-impactBasis-grid-div"});this.toolbar.inject(g);let p=UWA.createElement("div",{class:"content-impactBasis-grid-div expanded-header-height"}),h=UWA.createElement("div",{styles:{height:"100%"},class:"content-impactBasis-tile-div ImpactBasisTileView expanded-header-height"}),m=UWA.createElement("div",{class:"hideView",id:"impactBasisEmptyTileViewDiv"});UWA.createElement("div",{html:s.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(m),this.chgGridView.inject(p),this.tileView.inject(h),m.inject(h),this.chgGridViewContainer.addContent(g),this.chgGridViewContainer.addContent(p),this.chgGridViewContainer.addContent(h),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require"],function(e,t,i,n,a,o,r,s,l){"use strict";var c={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const a=[];let o=!1;const d=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();d.length>1&&(o=!0);const u=d.map(e=>e.options.grid.id),g=(d.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),p=e.cellInfos.nodeModel.options.grid.id,h=e.cellInfos.nodeModel.options.grid.type,m=e.cellInfos.nodeModel.options.grid.name,C=e.cellInfos.nodeModel.options.grid.displayType,v={objectId:p,objectType:h,displayName:m,displayType:C,facetName:"dependency"},f=g.openWith(v);if(o){a.push(n.createPropertyPushItem(u)),a.push(c.getRelationalExplorerMenu(u)),a.push(c.getMaturityMenu(e)),a.push(c.getTransferMenu(e));var b=[];b.push(p),r.getDocuments(b).then(function(e){"TRUE"===e[0].dataelements.isDocumentType&&(a.push(s.getDownloadMenu(b)),a.push(s.getPreviewMenu(b))),t(a)})}else a.push(n.createPropertyPushItem(u)),a.push(c.getRelationalExplorerMenu(u)),f.then(i=>{i&&a.push(i),a.push(c.getMaturityMenu(e)),a.push(c.getTransferMenu(e));var n=[];n.push(p),r.getDocuments(n).then(function(e){"TRUE"===e[0].dataelements.isDocumentType&&(a.push(s.getDownloadMenu(n)),a.push(s.getPreviewMenu(n))),t(a)})})})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getMaturityMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],o=[],r=0;r<n.length;r++)a.push(n[r].options.grid),o.push({physicalid:n[r].options.grid["@id"]||n[r].options.grid.id});new i({context:a,ID:"MaturityHdr"}).executeAsync(o)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return c}),define("DS/ENOChgGovernanceUX/scripts/components/triptych/ChgGovTriptychWrapper",["DS/ENOXTriptych/js/ENOXTriptych","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i){"use strict";var n=function(){};return n.prototype.init=function(i,n,a,o,r){this._left=document.createElement("div"),this._left.classList.add("gov-triptych-wrapper"),this._main=document.createElement("div"),this._main.classList.add("gov-triptych-wrapper"),this._right=document.createElement("div"),this._right.classList.add("gov-triptych-wrapper"),this._applicationChannel=i,this._triptych=new e;var s=widget.body.offsetWidth<550?"close":"open",l={left:{resizable:!1,originalSize:t.LEFT_PANEL_SIZE_EXPANDED,originalState:s,overMobile:!0,withClose:!1},right:{resizable:!0,minWidth:250,originalSize:400,originalState:"close",overMobile:!0},borderLeft:!0,container:n,withtransition:!0,modelEvents:this._applicationChannel};this._triptych.init(l,this._left,this._main,this._right)},n.prototype.inject=function(e){this._triptych.inject(e)},n.prototype._getTriptych=function(){return this._triptych},n.prototype.getLeftPanelContainer=function(){return this._left},n.prototype.getLeftPanelContainerTriptych=function(){return this._triptych._leftPanelContent},n.prototype.getRightPanelContainer=function(){return this._right},n.prototype.getMainPanelContainer=function(){return this._main},n}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAContextContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","require"],function(e,t,i,n,a,o,r,s){"use strict";var l={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const o=[];let c=!1;const d=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();d.length>1&&(c=!0);const u=d.map(e=>e.options.grid.id),g=(d.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),s("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),p=e.cellInfos.nodeModel.options.grid.id,h=e.cellInfos.nodeModel.options.grid.type,m=e.cellInfos.nodeModel.options.grid.name,C=e.cellInfos.nodeModel.options.grid.displayType,v={objectId:p,objectType:h,displayName:m,displayType:C,facetName:"dependency"},f=g.openWith(v);if(c){o.push(n.createPropertyPushItem(u)),o.push(l.getRelationalExplorerMenu(u)),a.getGlobalVariable().isNative&&(o.push(g.getExploreMenu(that,e)),o.push(g.getExploreWithMenu(that,e)),o.push(g.getOpenMenu(that,e)),o.push(g.getOpenWithNativeMenu(that,e))),o.push(l.getMaturityMenu(e)),o.push(l.getTransferMenu(e));var b=[];b.push(p),r.getDocuments(b).then(function(e){"TRUE"===e[0].dataelements.isDocumentType&&(o.push(l.getDownloadMenu(b)),o.push(l.getPreviewMenu(b))),t(o)})}else o.push(n.createPropertyPushItem(u)),o.push(l.getRelationalExplorerMenu(u)),f.then(i=>{a.getGlobalVariable().isNative&&(o.push(g.getExploreMenu(that,e)),o.push(g.getExploreWithMenu(that,e)),o.push(g.getOpenMenu(that,e)),o.push(g.getOpenWithNativeMenu(that,e))),i&&o.push(i),o.push(l.getMaturityMenu(e)),o.push(l.getTransferMenu(e));var n=[];n.push(p),r.getDocuments(n).then(function(e){"TRUE"===e[0].dataelements.isDocumentType&&(o.push(l.getDownloadMenu(n)),o.push(l.getPreviewMenu(n))),t(o)})})})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=0;a<i.length;a++)n.push(i[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getMaturityMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],o=[],r=0;r<n.length;r++)a.push(n[r].options.grid),o.push({physicalid:n[r].options.grid["@id"]||n[r].options.grid.id});new i({context:a,ID:"MaturityHdr"}).executeAsync(o)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}},getDeleteMenu:function(e){t.CHG_CA_Context_Remove},getDownloadMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(){r.download(e)}}}},getPreviewMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x fonticon-eye"},action:{callback:function(){r.preview(e)}}}}};return l}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRRelatedScopeGridContextualMenu"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.relatedScopeDataGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),l.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").removeClassName("minified-header-height"))})},render:function(){try{let e=this.processColumns(),t=this,l={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:s.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return c.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){o.readyDragContent(e,t)},onDragStartCell:function(e,t){o.readyDragContent(e,t)}};l=UWA.merge(l,this.options);let d={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.relatedScopeDataGridView=new i(l),this.relatedScopeDataGridView.cellSelection="none",this.tileView=new n(d),t.relatedScopeDataGridView.getTreeDocument().getXSO().onAdd(function(e){let i;console.log("Node Model Value: \n",e.getTreeDocument()),t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-related-scope-object-selection-update",data:{count:i}})}),t.relatedScopeDataGridView.getTreeDocument().getXSO().onRemove(function(e){t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-related-scope-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})});let u={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=u;let g={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.relatedScopeDataGridView.getTypeRepresentationFactory().registerTypeRepresentations(g),a.toolbar=this.relatedScopeDataGridView.setToolbar(a.writetoolbarDefinition()),this.toolbar=a.toolbar,this.relatedScopeDataGridView.addEventListener("allCellsRendered",function(){t.relatedScopeDataGridView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+t.relatedScopeDataGridView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),document.getElementById("outer-relatedScope-grid-div")&&document.getElementById("outer-relatedScope-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-relatedScope-grid-div",class:"outer-relatedScope-grid-div"});let p=UWA.createElement("div",{class:"toolbar-relatedScope-grid-div"});this.toolbar.inject(p);let h=UWA.createElement("div",{class:"content-relatedScope-grid-div expanded-header-height"}),m=UWA.createElement("div",{styles:{height:"100%"},class:"content-relatedScope-tile-div relatedScopeTileView expanded-header-height"}),C=UWA.createElement("div",{class:"hideView",id:"relatedScopeEmptyTileViewDiv"});UWA.createElement("div",{html:s.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(C),this.relatedScopeDataGridView.inject(h),this.tileView.inject(m),C.inject(m),this.chgGridViewContainer.addContent(p),this.chgGridViewContainer.addContent(h),this.chgGridViewContainer.addContent(m)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.relatedScopeDataGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAContextContextualMenu","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.contextDataGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),c.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-context-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-context-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").removeClassName("minified-header-height"))})},render:function(){try{let t=this.processColumns(),c=this,d={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:s.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){o.readyDragContent(e,t)},onDragStartCell:function(e,t){o.readyDragContent(e,t)}};d=UWA.merge(d,this.options);let u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.contextDataGridView=new i(d),this.contextDataGridView.cellSelection="none",this.tileView=new n(u);var e={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=e;let g={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.contextDataGridView.getTypeRepresentationFactory().registerTypeRepresentations(g),a.toolbar=this.contextDataGridView.setToolbar(a.writetoolbarDefinition()),this.toolbar=a.toolbar,this.contextDataGridView.addEventListener("allCellsRendered",function(){c.contextDataGridView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+c.contextDataGridView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+c.contextDataGridView.getTreeDocument().getSelectedNodes().length}}]),c.tileView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+c.tileView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+c.tileView.getTreeDocument().getSelectedNodes().length}}])}),c.contextDataGridView.getTreeDocument().getXSO().onAdd(function(e){c.contextDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+c.contextDataGridView.getTreeDocument().getSelectedNodes().length}}),c.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+c.contextDataGridView.getTreeDocument().getSelectedNodes().length}})}),c.contextDataGridView.getTreeDocument().getXSO().onRemove(function(e){c.contextDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),c.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})}),document.getElementById("outer-context-grid-div")&&document.getElementById("outer-context-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-context-grid-div",class:"outer-context-grid-div"});let p=UWA.createElement("div",{class:"toolbar-context-grid-div"});this.toolbar.inject(p);let h=UWA.createElement("div",{class:"content-context-grid-div expanded-header-height"}),m=UWA.createElement("div",{styles:{height:"100%"},class:"content-context-tile-div contextTileView expanded-header-height"}),C=UWA.createElement("div",{class:"hideView",id:"contextEmptyTileViewDiv"});UWA.createElement("div",{html:s.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(C),this.contextDataGridView.inject(h),this.tileView.inject(m),C.inject(m),this.chgGridViewContainer.addContent(p),this.chgGridViewContainer.addContent(h),this.chgGridViewContainer.addContent(m)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.contextDataGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("COrelatedScopeEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("COrelatedScopeEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/util/ChgCRIssueGridContextualMenu"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.issueGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),l.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-issue-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-issue-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-issue-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-issue-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-issue-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-issue-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-issue-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-issue-tile-div").removeClassName("minified-header-height"))})},render:function(){try{let e=this.processColumns(),t=this,l={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:s.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return c.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){o.readyDragContent(e,t)},onDragStartCell:function(e,t){o.readyDragContent(e,t)}};l=UWA.merge(l,this.options);let d={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.issueGridView=new i(l),this.issueGridView.cellSelection="none",this.tileView=new n(d),t.issueGridView.getTreeDocument().getXSO().onAdd(function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-issue-object-selection-update",data:{count:i}})}),t.issueGridView.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-issue-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})});let u={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=u;let g={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.issueGridView.getTypeRepresentationFactory().registerTypeRepresentations(g),a.toolbar=this.issueGridView.setToolbar(a.writetoolbarDefinition()),this.toolbar=a.toolbar,this.issueGridView.buildStatusBar([{type:r.STATUS.NB_ITEMS},{type:r.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:r.STATUS.NB_ITEMS},{type:r.STATUS.NB_SELECTED_ROWS}]),document.getElementById("outer-issue-grid-div")&&document.getElementById("outer-issue-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-issue-grid-div",class:"outer-issue-grid-div"});let p=UWA.createElement("div",{class:"toolbar-issue-grid-div"});this.toolbar.inject(p);let h=UWA.createElement("div",{class:"content-issue-grid-div expanded-header-height"}),m=UWA.createElement("div",{styles:{height:"100%"},class:"content-issue-tile-div IssueTileView expanded-header-height"}),C=UWA.createElement("div",{class:"hideView",id:"issueEmptyTileViewDiv"});UWA.createElement("div",{html:s.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(C),this.issueGridView.inject(h),this.tileView.inject(m),C.inject(m),this.chgGridViewContainer.addContent(p),this.chgGridViewContainer.addContent(h),this.chgGridViewContainer.addContent(m)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.issueGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/components/zApplicationFrame/ChgGovzApplicationFrame",["DS/CoreEvents/ModelEvents","DS/Core/Core","DS/ENOChgGovernanceUX/scripts/components/triptych/ChgGovTriptychWrapper","DS/ENOChgGovernanceUX/scripts/components/applicationTopBar/ChgGovApplicationTopBarWrapper","DS/ENOChgGovernanceUX/scripts/components/welcomePanel/ChgGovWelcomePanelWrapper","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/UIKIT/UIKIT.css","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,a,o,r,s,l){"use strict";var c=function(){};return c.prototype._init=function(e,t,i,n){this._applicationChannel=e,this._router=t,this._leftContent=i,this._middleContent=n,this._pathModel=[o._KEY,o._VIEWS_PREFERENCES],this._initDom()},c.prototype._initDom=function(){var e=document.querySelector("#zPlaneid");e&&e.destroy(),this._content=UWA.createElement("div",{id:"zPlaneid"}),this._content.classList.add("z-panel"),this._topbar=UWA.createElement("div",{id:"ztoolbar",styles:{}}),this._topbar.classList.add("z-topbar"),this._mainContainer=document.createElement("div"),this._mainContainer.classList.add("z-content"),this._content.appendChild(this._mainContainer),this._pageToolBarComponent=new n,this._pageToolBarComponent.init(this._applicationChannel,this._router,this._topbar),this._triptychWrapper=new i,this._triptychWrapper.init(this._applicationChannel,this._mainContainer),this._middleContainer=document.createElement("div"),this._middleContainer.classList.add("z-content-wrapper"),this._middleContainer.appendChild(this._topbar),this._applicationContent=document.createElement("div"),this._applicationContent.classList.add("cogov-content-wrapper"),this._middleContainer.appendChild(this._applicationContent),this._middleContent&&this._middleContent._container&&this._applicationContent.appendChild(this._middleContent._container),this._applicationChannel.publish({event:"triptych-set-content",data:{side:"middle",content:this._middleContainer}}),this._subscribeEvents();this.__mobileBreakpoint=this._triptychWrapper._triptych.__mobileBreakpoint},c.prototype._subscribeEvents=function(){var e=this;this._listSubscription=[],(e=this)._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-show-panel"},function(t){e._content.clientWidth<e.__mobileBreakpoint&&(e._topbar.classList.add("hide"),e._mainContainer.classList.add("full-height"))})),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-panel-hide-started"},function(t){e._content.clientWidth<e.__mobileBreakpoint&&(e._topbar.classList.remove("hide"),e._mainContainer.classList.remove("full-height")),e._applicationChannel.publish({event:"model-conflict-panel-closed"});var i=document.querySelector("#taskViewPanelClose");i&&i.click();var n=document.querySelectorAll(".gov-triptych-wrapper");e.infoDialog=n;var a=n[1].childNodes;if("right"===t)for(var o=0;o<a.length;o++){var r=a[o].getAttribute("name");UWA.is(r)&&"EditProp_MasterContain"===r?a[o].style.display="block":a[o].style.display="none"}})),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-entering-mobile"},function(){e._topbar.classList.remove("hide"),e._mainContainer.classList.remove("full-height"),e._applicationChannel.publish({event:"triptych-hide-panel",data:"left"})})),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-resized"},function(e){if("right"===e.side)e.width})),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-leaving-mobile"},function(){e._topbar.classList.remove("hide"),e._mainContainer.classList.remove("full-height")})),e._listSubscription.push(e._applicationChannel.subscribe({event:"welcome-panel-action-selected"},function(t){e._content.clientWidth<e.__mobileBreakpoint&&e._applicationChannel.publish({event:"triptych-hide-panel",data:"left"})})),s.unsubscribe(`PropHeaderActivated:${widget.id}`),s.subscribe(`PropHeaderActivated:${widget.id}`,function(t){if(console.log(`PropHeaderActivated:${widget.id}`),console.log(t.currentFacet),"true"==l.getGlobalVariable().slidePanelTagger);else{e.infoDialog[1].classList.add("taggerSectionActivate"),l.getGlobalVariable().slidePanelTagger="true",["social","properties","relations","CO_Applicability","CO_Attachment"].includes(t.currentFacet)?"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.ChgCRlayoutModel),t._cleanBIFilterProxy()}):"IA_ImpactBasis"==t.currentFacet?s.publish(`crImpactBasis:${widget.id}`):"IA_ImpactItem"==t.currentFacet?s.publish(`IA_ImpactItem:${widget.id}`):"CR_Issue"==t.currentFacet?s.publish(`CR_Issue:${widget.id}`):"CO_Issue"==t.currentFacet?s.publish(`CO_Issue:${widget.id}`):"CR_RelatedScope"==t.currentFacet?s.publish(`CR_RelatedScope:${widget.id}`):"CO_RelatedScope"==t.currentFacet&&s.publish(`CO_RelatedScope:${widget.id}`)}}),s.unsubscribe(`CO_Applicability:${widget.id}`),s.subscribe(`CO_Applicability:${widget.id}`,function(t){e.doCleanProxy()}),s.unsubscribe(`properties:${widget.id}`),s.subscribe(`properties:${widget.id}`,function(t){e.doCleanProxy()}),s.unsubscribe(`CO_Attachment:${widget.id}`),s.subscribe(`CO_Attachment:${widget.id}`,function(t){e.doCleanProxy()}),s.unsubscribe(`relations:${widget.id}`),s.subscribe(`relations:${widget.id}`,function(t){e.doCleanProxy()}),s.unsubscribe(`social:${widget.id}`),s.subscribe(`social:${widget.id}`,function(t){e.doCleanProxy()}),s.unsubscribe(`PropHeaderDeActivated:${widget.id}`),s.subscribe(`PropHeaderDeActivated:${widget.id}`,function(){console.log(`PropHeaderActivated:${widget.id}`),e.infoDialog[1].classList.remove("taggerSectionActivate"),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/PlatformAPI/PlatformAPI"],function(t,i,n,a){t._initializationPromiseBIFilter||t.initializeBIFilter(e.ChgCRlayoutModel),t._cleanBIFilterProxy();let o=n.getRouteInfo();if(o.name.includes("CRDetails")){let t=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_REQUESTS_DETAILS],o=n.getTab(t),r=e.getPublishKeyForCRTab(o);a.publish(`${r}:${widget.id}`,{})}else if(o.name.includes("CODetails")){let t=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_ORDERS_DETAILS],o=n.getTab(t),r=e.getPublishKeyForCOTab(o);a.publish(`${r}:${widget.id}`,{})}}),l.getGlobalVariable().slidePanelTagger="false"})},c.prototype.inject=function(e){e.appendChild(this._content)},c.prototype.destroy=function(){this._content=null},c.prototype.getPublishKeyForCRTab=function(e){let t="";return t="crAssessment"==e?"crImpactAnalysis":e},c.prototype.getPublishKeyForCOTab=function(e){let t="";return t="ChangeOrchestration"==e?"coOrchestration":e},c.prototype.doCleanProxy=function(){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.ChgCRlayoutModel),e._cleanBIFilterProxy()})},c}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRAddMemberLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRAddMemberView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";var m={createAddMemberPanel:function(t){m.teamlayoutModel=t.model,m.id=t.id,new e({events:{searchChangeCoordinator:function(e){m.searchCategoty="Change Coordinator";var t=n.activateSearch("Person","TransferOwnership");n.search(p.CHG_Add_Member_Change_Coordinator,"Person",m.OnSearchComplete,"Contributors",t,void 0,void 0)},searchAssignee:function(e){m.searchCategoty="Assignee";let t=m.teamlayoutModel.getAllDescendants(),i={condition:"addExistingAssignee",extendedQuery:m.createExcludeListForSearch(t,m.searchCategoty)};var a=n.activateSearch("Person","AddCRAssignee");n.search(p.CHG_Add_Member_Assignee,"Person",m.OnSearchComplete,"AddCRAssignee",a,void 0,"assignee",i)},searchApprover:function(e){m.searchCategoty="Approver";var t=n.activateSearch("Person","TransferOwnership");n.search(p.CHG_Add_Member_Approver,"Route Template",m.OnSearchComplete,"Contributors",t,void 0,void 0)},searchInformedUser:function(e){m.searchCategoty="Follower";let t=m.teamlayoutModel.getAllDescendants(),i={condition:"addExistingFollower",extendedQuery:m.createExcludeListForSearch(t,m.searchCategoty)};var a=n.activateSearch("Person","AddCRFollower");n.search(p.CHG_Add_Member_Follower,"Person",m.OnSearchComplete,"AddCRFollower",a,void 0,"informedUser",i)}}}).render().inject(t.target);var a=t.target.querySelector(".chg-add-member-change-coordinator-field"),o=t.target.querySelector(".chg-add-member-assignee-field"),r=t.target.querySelector(".chg-add-member-approver-field"),s=t.target.querySelector(".chg-add-member-informed-user-field"),u=t.target.querySelector(".chg-add-member-button"),h=t.target.querySelector(".chg-add-member-change-coordinator-field-container"),C=t.target.querySelector(".chg-add-member-approver-field-container"),v=t.target.querySelector(".chg-add-member-informed-user"),f=t.target.querySelector(".chg-add-member-assignee");i.makeDroppable(h,m.ExecuteDropForChangeCoordinatorField),i.makeDroppable(C,m.ExecuteDropForApproverField),i.makeDroppable(v,m.ExecuteDropForInformedUserField),i.makeDroppable(f,m.ExecuteDropForAssigneeField),m.myButtonPrimary=new l({label:p.CHG_Add_Member_Add,emphasize:"primary"}).inject(u);var b=new l({label:p.CHG_Add_Member_Cancel,emphasize:"secondary"}).inject(u);m.modelForChangeCoordinator=new d,m.modelForAssignee=new d,m.modelForApprover=new d,m.modelForFollower=new d,m.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new g).getTrigramNameFilter()),m.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new g).getTrigramNameFilter()),m.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new g).getTrigramNameFilter()),m.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new g).getTrigramNameFilter()),m.autoCompleteChangeCoordinator=new c({elementsTree:m.modelForChangeCoordinator,placeholder:p.CHG_Add_Member_Type_To_Search,customFilterMessage:p.CHG_No_Search_found,multiSearchMode:!1,filterCB:function(e){m.modelForChangeCoordinator.setFilterModel({value:{filterId:"trigramNameFilter_CCO",filterModel:{text:e}}})}}).inject(a),m.autoCompleteAssignee=new c({elementsTree:m.modelForAssignee,placeholder:p.CHG_Add_Member_Type_To_Search,customFilterMessage:p.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){m.modelForAssignee.setFilterModel({value:{filterId:"trigramNameFilter_Assignee",filterModel:{text:e}}})}}).inject(o),m.autoCompleteApprover=new c({elementsTree:m.modelForApprover,placeholder:p.CHG_Add_Member_Type_To_Search,customFilterMessage:p.CHG_No_Search_found,multiSearchMode:!1,filterCB:function(e){m.modelForApprover.setFilterModel({value:{filterId:"trigramNameFilter_Approver",filterModel:{text:e}}})}}).inject(r),m.autoCompleteFollower=new c({elementsTree:m.modelForFollower,placeholder:p.CHG_Add_Member_Type_To_Search,customFilterMessage:p.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){m.modelForFollower.setFilterModel({value:{filterId:"trigramNameFilter_Follower",filterModel:{text:e}}})}}).inject(s),m.myButtonPrimary.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque");var a=null!=m.autoCompleteChangeCoordinator.selectedItems?m.autoCompleteChangeCoordinator.selectedItems.options.identifier:"",o={person:[],userGroup:[]};if(null!=m.autoCompleteAssignee.selectedItems)for(var r=0;r<m.autoCompleteAssignee.selectedItems.length;r++){let e=m.autoCompleteAssignee.selectedItems[r].options;"Person"==e.type?o.person.push(e.identifier):"Group"==e.type&&o.userGroup.push(e.id)}var s=null!=m.autoCompleteApprover.selectedItems?m.autoCompleteApprover.selectedItems.options.id:"",l={person:[],userGroup:[]};if(null!=m.autoCompleteFollower.selectedItems)for(r=0;r<m.autoCompleteFollower.selectedItems.length;r++){let e=m.autoCompleteFollower.selectedItems[r].options;"Person"==e.type?l.person.push(e.identifier):"Group"==e.type&&l.userGroup.push(e.id)}(""!=s||o.person.length>0||o.userGroup.length>0||l.person.length>0||l.userGroup.length>0||""!=a)&&(m.autoCompleteChangeCoordinator.selectedItems=m.autoCompleteApprover.selectedItems=m.autoCompleteAssignee.selectedItems=m.autoCompleteFollower.selectedItems=void 0,m.addmember(a,s,l,o))}),b.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque")})},launchAddMemberPanel:function(){var e=document.querySelector(".addmemberView"),i=document.querySelector(".memberfilterView"),n=document.querySelector(".content-member-grid-div"),a=document.querySelector(".membertileView"),o=document.querySelector(".chg-add-member-approver"),r=document.querySelector(".chg-add-member-change-coordinator");i.hide(),n.removeClassName("teamview-opaque"),a.removeClassName("teamview-opaque"),o.classList.remove("teamview-opaque"),r.classList.remove("teamview-opaque"),"block"==e.style.display?e.hide():(e.show(),n.addClassName("teamview-opaque"),a.addClassName("teamview-opaque"),1==t.isRouteTemplateConnected&&o.classList.add("teamview-opaque"),1==t.isChangeCoordinatorConnected&&r.classList.add("teamview-opaque"),m.updateAutoCompleteModel(),m.addChangeEventListener(),m.myButtonPrimary.disabled=!0)},updateAutoCompleteModel:function(e){var t=s.getGlobalVariable().contextUser;let i={},n=m.teamlayoutModel.getChildren();for(let e=0;e<n.length;e++){let t=n[e].options.grid;i[t.id]=t.role}var a={categoryId:"changeCordinator",contextUser:t},o={categoryId:"approver",contextUser:t},l={categoryId:"follower",contextUser:t};m.modelForChangeCoordinator.empty(),m.modelForAssignee.empty(),m.modelForApprover.empty(),m.modelForFollower.empty(),r.getListCOMember(a).then(function(e){m.modelForChangeCoordinator.prepareUpdate();for(var t=0;t<e.length;t++){var i=new u({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});m.modelForChangeCoordinator.addRoot(i)}m.modelForChangeCoordinator.pushUpdate()}),r.getListCOMember(o).then(function(e){m.modelForApprover.prepareUpdate();for(var t=0;t<e.length;t++){var i=new u({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});m.modelForApprover.addRoot(i)}m.modelForApprover.pushUpdate()}),r.getListCOMember(l).then(function(e){m.modelForAssignee.prepareUpdate(),m.modelForFollower.prepareUpdate();for(var t=0;t<e.length;t++){let a=e[t].id;if(!i.hasOwnProperty(a)||1!=i[a].contains("Follower")){var n=new u({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});m.modelForFollower.addRoot(n)}}for(var a=0;a<e.length;a++){let t=e[a].id;if(!i.hasOwnProperty(t)||1!=i[t].contains("Assignee")){var o=new u({label:e[a].name,value:e[a].value,name:e[a].name,identifier:e[a].identifier,type:e[a].type,id:e[a].id});m.modelForAssignee.addRoot(o)}}m.modelForFollower.pushUpdate(),m.modelForAssignee.pushUpdate()})},addmember:function(e,i,n,r){var s=m.id,l=t.makeUpdateMemberJson("CONNECT",e,i,n,r);a.updateChangeRequestMembers(s,l).then(function(e){var i=o.processedChangeRequestMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){for(var n=e.ChgCRMembersTreeModel.getChildren(),a=[],o=0;o<i.length;o++){var r=i[o];if("Route Template"!=r.type){"Coordinator"==r.role&&(t.isChangeCoordinatorConnected=!0);for(var s=r.id,l=!1,c=0;c<n.length;c++)if(s==n[c].options.grid.id){l=!0;break}if(1==l){e.ChgCRMembersTreeModel.prepareUpdate();var d=n[c].options.description,u=", "+t.getRoleNLSValue(r.role),g=n[c].options.grid.role,p=", "+r.role;n[c].options.description=n[c].options.grid.roleList=d.concat(u),n[c].options.grid.role=g.concat(p),n[c].options.grid.roles.push(r.role),e.ChgCRMembersTreeModel.pushUpdate()}else a.push(r)}else a.push(r),t.isRouteTemplateConnected=!0}a.length>0&&e.addNodesInLayout(a)})})},ExecuteDropForApproverField:function(e){var t={data:{}};t.data.items=e,m.ExecuteDropForAddMemberPanel(t,"Approver")},ExecuteDropForChangeCoordinatorField:function(e){var t={data:{}};t.data.items=e,m.ExecuteDropForAddMemberPanel(t,"Change Coordinator")},ExecuteDropForInformedUserField:function(e){var t={data:{}};t.data.items=e,m.ExecuteDropForAddMemberPanel(t,"Follower")},ExecuteDropForAssigneeField:function(e){var t={data:{}};t.data.items=e,m.ExecuteDropForAddMemberPanel(t,"Assignee")},ExecuteDropForAddMemberPanel:function(e,t){if(e&&e.data&&e.data.items){var i=e.data.items;if(UWA.is(i)&&UWA.is(i.length)&&i.length>0){var a=[],r=[];let e=[];for(var s=[],l=0;l<i.length;l++)if(i[l].objectId){var c=i[l].serviceId.toLowerCase();"3dspace"==c||c.includes("3dspace")?a.push(i[l].objectId):"3dswym"==c&&"pno:Person"==i[l].objectType?(r.push(i[l].objectId.replace("iam:","")),s.push(i[l].displayName)):c.includes("usersgroup")&&e.push(i[l])}if(0!=a.length||0!=r.length||0!=e.length){var d=[];0!=a.length&&n.getAdditionObjectInfo(a).then(function(e){for(var i=0;i<a.length;i++){var n=null,r=e.additionObjectInfo[a[i]];if("Approver"===t&&r.type&&"Route Template"===r.type)n=new u({label:r.objectName,value:r.objectName,name:r.objectName,type:r.type,id:r.pid}),d.push(n),m.autoCompleteApprover.selectedItems=d,m.autoCompleteApprover._applySelectedItems();else if("Change Coordinator"===t&&r.type&&"Person"===r.type){var s=new u({label:r.fullName,value:r.objectName,name:r.fullName,type:r.type,id:r.pid,identifier:r.objectName});d.push(s),m.autoCompleteChangeCoordinator.selectedItems=d,m.autoCompleteChangeCoordinator._applySelectedItems()}else if("Follower"!==t||!r.type||"Person"!==r.type&&"Group"!==r.type){if("Assignee"!==t||!r.type||"Person"!==r.type&&"Group"!==r.type)return void console.log("NLS.ECM_ERR_NO_PERSON_NO_ROUTETEMPLATE");{let e="";"Person"===r.type?e=new u({label:r.fullName,value:r.objectName,name:r.fullName,type:r.type,id:r.pid,identifier:r.objectName}):"Group"===r.type&&(e=new u({label:r.objectTitle,value:r.objectName,name:r.objectTitle,type:r.type,id:r.pid})),d.push(e),m.autoCompleteAssignee.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,m.autoCompleteAssignee,d),m.autoCompleteAssignee._applySelectedItems()}}else{let e="";"Person"===r.type?e=new u({label:r.fullName,value:r.objectName,name:r.fullName,type:r.type,id:r.pid,identifier:r.objectName}):"Group"===r.type&&(e=new u({label:r.objectTitle,value:r.objectName,name:r.objectTitle,type:r.type,id:r.pid})),d.push(e),m.autoCompleteFollower.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,m.autoCompleteFollower,d),m.autoCompleteFollower._applySelectedItems()}}},function(e){return console.log("Failed in getting person id"),Promise.reject(e)});for(var g=0;g<r.length;g++){var C=null;"Change Coordinator"===t?(C=new u({label:s[g],value:r[g],name:s[g],identifier:r[g],type:"Person",id:r[g]}),d.push(C),m.autoCompleteChangeCoordinator.selectedItems=d,m.autoCompleteChangeCoordinator._applySelectedItems()):"Follower"===t?(C=new u({label:s[g],value:r[g],name:s[g],identifier:r[g],type:"Person",id:r[g]}),d.push(C),m.autoCompleteFollower.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,m.autoCompleteFollower,d),m.autoCompleteFollower._applySelectedItems()):"Assignee"===t&&(C=new u({label:s[g],value:r[g],name:s[g],identifier:r[g],type:"Person",id:r[g]}),d.push(C),m.autoCompleteAssignee.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,m.autoCompleteAssignee,d),m.autoCompleteAssignee._applySelectedItems())}for(let i=0;i<e.length;i++){C=null;C=new u({label:e[i].displayName,value:e[i].objectId,name:e[i].displayName,type:e[i].objectType,id:e[i].objectId}),d.push(C),"Assignee"===t?(m.autoCompleteAssignee.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,m.autoCompleteAssignee,d),m.autoCompleteAssignee._applySelectedItems()):"Follower"===t&&(m.autoCompleteFollower.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,m.autoCompleteFollower,d),m.autoCompleteFollower._applySelectedItems())}}else h.error(p.ECM_CA_Drop_Not_Supported)}}else console.log("NLS.ECM_CA_Drop_Not_Supported")},createExcludeListForSearch:function(e,t){let i="";for(let n of e)n.options.grid.role.includes(t)&&(i=i+"NOT (physicalid:"+n.options.grid.id+") ");return i},addChangeEventListener:function(){m.autoCompleteApprover.addEventListener("change",function(){var e=m.autoCompleteApprover.selectedItems;if(null==e&&(m.myButtonPrimary.disabled=!0),null!=e&&(m.myButtonPrimary.disabled=!1),selectedChipCount>0){var t=e[selectedChipCount-1];m.autoCompleteApprover.elementsTree.getChildren().findIndex(function(e){if(e.options.name==t.options.name)return!0})<0&&(m.autoCompleteApprover._selectionChips.removeChip(t.options.label),m.autoCompleteApprover.selectedItems.pop(),m.autoCompleteApprover.value.pop())}if(1==selectedChipCount)if("Route Template"==t.options.type){var i=t.options.grid.name;m.filterOutAutocompleteModel("Route Template",i),m.autoCompleteApprover._hidePopup()}else"Person"==t.options.type&&m.filterOutAutocompleteModel("Person");else 0==selectedChipCount&&(m.filterOutAutocompleteModel("Both"),m.autoCompleteApprover.elements.popup&&1==m.autoCompleteApprover.elements.popup.visibleFlag&&(m.autoCompleteApprover._hidePopup(),m.autoCompleteApprover._showPopup()))}),m.autoCompleteChangeCoordinator.addEventListener("change",function(){var e=m.autoCompleteChangeCoordinator.selectedItems;null==e&&(m.myButtonPrimary.disabled=!0),null!=e&&(m.myButtonPrimary.disabled=!1)}),m.autoCompleteAssignee.addEventListener("change",function(){var e=m.autoCompleteAssignee.selectedItems.length;0===e&&(m.myButtonPrimary.disabled=!0),e>0&&(m.myButtonPrimary.disabled=!1)}),m.autoCompleteFollower.addEventListener("change",function(){var e=m.autoCompleteFollower.selectedItems.length;0===e&&(m.myButtonPrimary.disabled=!0),e>0&&(m.myButtonPrimary.disabled=!1)})},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++)t.push({objectId:e[i][0],identifier:e[i][1],objectType:e[i][2],displayType:e[i][3],displayName:e[i][5],serviceId:e[i][7]});var n={data:{}};n.data.items=t,m.ExecuteDropForAddMemberPanel(n,m.searchCategoty)}};return m}),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionAutoComplete",["UWA/Core","DS/WUXAutoComplete/AutoComplete","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/model/changeAction/group/ChgChangeGroupModel","DS/ENOChgServices/scripts/services/ChgDataService","i18n!DS/ENOChangeActionUX/assets/nls/ChangeAction","require"],function(e,t,i,n,a,o,r,s){"use strict";return{selection:null,myAutoComplete:null,autoCompleteModel:null,selectedItemsValue:[],loadAutoComplete:function(e,t){var i=this;if(i.autoCompleteModel=(new a).createTreeDocument(),i.createAutoComplete(i.autoCompleteModel),this.myAutoComplete.inject(e),t){var n=(new a).createNode(t.title,t.id);this.myAutoComplete.value=t.title,i.autoCompleteModel.addRoot(n,0),n.select()}window.myAutoComplete=this.myAutoComplete,o.getListOfGroups().then(function(e){var n=e;(new a).loadData(i.autoCompleteModel,n,t)},function(e){return Promise.reject(e)})},createAutoComplete:function(e,i){var n=this;n.selection=null,this.myAutoComplete=new t({multiSearchMode:!1,elementsTree:e,placeholder:r.ECM_CA_AUTOCOMPLETE_PLACEHOLDER,customFilterMessage:r.ECM_CA_OPTIONS_PLACEHOLDER}),this.myAutoComplete.addEventListener("change",function(e){var t=null;if(e.dsModel.selectedItems)t=e.dsModel.selectedItems.options;n.selection=t})},getSelection:function(){return this.selection}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("changeActionEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("changeActionEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionCreateGroup",["UWA/Core","DS/ENOChgServices/scripts/components/ChgCommonSelectDailog","DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionAutoComplete","DS/ENOChgServices/scripts/services/ChgDataService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","require"],function(e,t,i,n,a,o,r,s){"use strict";return{createGroup:function(e){var s=null,l=[{label:a.CHG_Button_Done,handler:function(){var s=i.getSelection();if(null!=s&&null!=s&&""!=s.label){null!=(g=document.getElementById("outer-ca-div"))&&null!=g&&r.mask(g);var l=s.label,c=s.value;if("createGroupFromIdCard"==e.facetName){var d="";let t="pid:"+e.model.id,i=e.model._attributes.attributes.find(e=>"Group"==e.name);i.valueActual&&(d=i.valueActual);var u={title:l,changeactions:[t],oldGroupId:d,availbleGroupId:c};""==d&&-1==c.indexOf("pid:")?n.createGroupForChangeAction(u).then(function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,o.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)}):""==l||null==l?n.removeGroupFromCA(u).then(function(t){let i=e.model.id,n={id:""};n.title=a.CHG_Header_Unassigned,o.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)}):""!=l&&""!=d&&-1==c.indexOf("pid:")?n.removeGroupFromCA(u).then(function(t){n.createGroupForChangeAction(u).then(function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,o.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)}):""!=l&&""!=d&&c.indexOf("pid:")>-1?d!=c?n.removeGroupFromCA(u).then(function(t){n.updateGroupToAddCA(u).then(function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,o.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)}):(g=document.getElementById("outer-ca-div"))&&r.unmask(g):""!=l&&""==d&&c.indexOf("pid:")>-1&&n.updateGroupToAddCA(u).then(function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,o.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)})}else if("createGroupFromSummary"==e.facetName)if(d=e.oldGroupId,u={title:l,changeactions:e.ChangeActionList,oldGroupId:d,availbleGroupId:c},""==d&&c.indexOf("pid:")>-1)n.updateGroupToAddCA(u).then(function(e){u.groupId=e.id,o.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)});else if(""==l||null==l)n.removeGroupFromCA(u).then(function(e){o.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)});else if(""==d&&-1==c.indexOf("pid:"))n.createGroupForChangeAction(u).then(function(e){u.groupId=e.id,o.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)});else if(""!=d&&c.indexOf("pid:")>-1){var g;d!=c?n.removeGroupFromCA(u).then(function(e){n.updateGroupToAddCA(u).then(function(e){u.groupId=e.id,o.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)}):(g=document.getElementById("outer-ca-div"))&&r.unmask(g)}else""!=l&&""!=d&&-1==c.indexOf("pid:")&&n.removeGroupFromCA(u).then(function(e){n.createGroupForChangeAction(u).then(function(e){u.groupId=e.id,o.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)});t.closeDialog()}else{let i=e.model._attributes.attributes.find(e=>"Group"==e.name);if("createGroupFromIdCard"==e.facetName&&i.valueActual){let r="";i.valueActual&&(r=i.valueActual),u={title:l,changeactions:["pid:"+e.model.id],oldGroupId:r},n.removeGroupFromCA(u).then(function(t){let i=e.model.id,n={id:""};n.title=a.CHG_Header_Unassigned,o.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)}),t.closeDialog()}else"createGroupFromSummary"==e.facetName&&e.oldGroupId&&(d=e.oldGroupId,u={title:l,changeactions:e.ChangeActionList,oldGroupId:d},n.removeGroupFromCA(u).then(function(e){o.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)}),t.closeDialog())}},className:"primary"},{label:a.CHG_Button_Cancel,handler:function(){t.closeDialog()},className:"default"}],c={title:a.CHG_GROUP_DIALOG_TITLE,content:"<div id='caAutoCDivPop'></div>",buttonArray:l,target:widget.body};t.launchInfoDailog(c);var d=document.querySelector("#caAutoCDivPop");if("createGroupFromIdCard"==e.facetName){s=void 0;let t=e.model._attributes.attributes.find(e=>"Group"==e.name);t.valueActual&&(s={id:t.valueActual,title:t.valueDisplay})}else if("createGroupFromSummary"==e.facetName){s=void 0;""!=e.oldGroupId&&(s={id:e.oldGroupId,title:e.oldGroupTitle})}i.loadAutoComplete(d,s)}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("COissueEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("COissueEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMemberFilterLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMemberFilterView"],function(e){"use strict";var t={createMemberFilter:function(i){t.teamlayoutModel=i.model,new e({events:{memberFilterKeyUp:function(e){t.enteredText=e.target.value;var i={filteringMode:"name",text:t.enteredText};t.filterCollectionAndUpdateUI(i)},memberRoleFilter:function(e){var i={filteringMode:"role",text:t.enteredText?t.enteredText:"",reviewInclude:!1,followInclude:!1,assigneeInclude:!1},n=document.getElementById("allToggle"),a=document.getElementById("revMemToggle");a&&a.checked&&(i.reviewInclude=!0);var o=document.getElementById("followMemToggle");o&&o.checked&&(i.followInclude=!0);var r=document.getElementById("assigneeToggle");r&&r.checked&&(i.assigneeInclude=!0),0==i.reviewInclude&&0==i.followInclude&&0==i.assigneeInclude||1==i.reviewInclude&&1==i.followInclude&&1==i.assigneeInclude||"allToggle"==e.target.id&&1==n.checked?(i.allInclude=!0,n.checked=!0,a.checked=!1,o.checked=!1,r.checked=!1):(i.allInclude=!1,n.checked=!1),t.filterCollectionAndUpdateUI(i)}}}).render().inject(i.target)},filterCollectionAndUpdateUI:function(e){var i=e.text;t.teamlayoutModel.setFilterModel({fullName:{filterId:"stringRegexp",filterModel:{condition1:{type:"contains",filter:i}}},role:{filterId:"stringRegexp"}});var n=t.teamlayoutModel.getFilterManager().getFilters().role,a={};0==e.allInclude&&(1==e.reviewInclude&&(a.condition1={type:"contains",filter:"Approver"}),1==e.assigneeInclude&&(a.hasOwnProperty("condition1")?(a.operator="or",a.condition2={type:"contains",filter:"Assignee"}):a.condition1={type:"contains",filter:"Assignee"}),1==e.followInclude&&(a.hasOwnProperty("condition1")?(a.operator="or",a.condition2={type:"contains",filter:"Follower"}):a.condition1={type:"contains",filter:"Follower"}),n.filterModel=a)},launchFilterMemberPanel:function(){var e=document.querySelector(".addmemberView"),t=document.querySelector(".memberfilterView"),i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");e.hide(),i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque"),"block"==t.style.display?t.hide():t.show()}};return t}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovLocalStorage",["DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant"],function(e){"use strict";var t={init:function(e){var n;(t._LOCALSTORAGE_USER_ID=e,window.localStorage.getItem(t._LOCALSTORAGE_KEY))?((n=JSON.parse(window.localStorage.getItem(t._LOCALSTORAGE_KEY)))[t._LOCALSTORAGE_KEY].hasOwnProperty(t._LOCALSTORAGE_USER_ID)?n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]=Object.assign(i,n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]):n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]=i,window.localStorage.setItem(t._LOCALSTORAGE_KEY,JSON.stringify(n))):((n={})[t._LOCALSTORAGE_KEY]={},n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]=i,window.localStorage.setItem(t._LOCALSTORAGE_KEY,JSON.stringify(n)))},destroy:function(){window.localStorage.removeItem(t._LOCALSTORAGE_KEY)},isPath:function(e,i){try{if(window.localStorage.getItem(t._LOCALSTORAGE_KEY)){if(Array.isArray(e)){for(var n=JSON.parse(window.localStorage.getItem(t._LOCALSTORAGE_KEY)),a=0;a<e.length;a++){if(!n[e[a]]&&""!=n[e[a]])return console.log("ChgGovLocalStorage getItem() path doesn't exist"),!!i&&void 0;n=n[e[a]]}return!i||n}return console.log("ChgGovLocalStorage getItem() argument is not a Array"),!!i&&void 0}return console.log("ChgGovLocalStorage getItem() LocalStorage not initialize"),!!i&&void 0}catch(e){return console.error(e),!!i&&void 0}},getValue:function(e){return this.isPath(e,!0)},setValue:function(e,i){if(this.isPath(e,!1)){var n=JSON.parse(window.localStorage.getItem(t._LOCALSTORAGE_KEY)),a=JSON.parse(JSON.stringify(e));window.localStorage.setItem(t._LOCALSTORAGE_KEY,JSON.stringify(this.recursiveSearch(n,a,i,!0)))}},recursiveSearch:function(e,t,i,n){return 2==t.length?e[t[1]]=i:n?this.recursiveSearch(e[t[0]],t,i,!1):(t.shift(),this.recursiveSearch(e[t[0]],t,i,!1)),e}};t._LOCALSTORAGE_KEY=e._KEY,t._LOCALSTORAGE_VIEWS_PREFERENCES=e._VIEWS_PREFERENCES,t._LOCALSTORAGE_MY_CHANGE_ORDERS=e._MY_CHANGE_ORDERS,t._LOCALSTORAGE_CHANGE_ORDERS_DETAILS=e._CHANGE_ORDERS_DETAILS,t._LOCALSTORAGE_RECENTLY_OPENED=e._RECENTLY_OPENED;var i={"xchange-views-preferences":{"info-panel":{"info-open":"","info-context":"","info-width":""},"xchange-my-change-orders":{"xchange-list-view":{view:"",filterview:"",sort:{},search:"",selections:[],filters:{},tagFilter:{}}},"xchange-change-orders-details":{tab:""},"xchange-change-requests-details":{tab:""},"xchange-change-actions-details":{tab:""},"xchange-recently-opened":{objectIDs:""}}};return t}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager",["UWA/Class","DS/ENOChgGovernanceUX/scripts/util/ChgGovLocalStorage","DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,a){"use strict";return e.singleton({init:function(){var e=a.getGlobalVariable();this.contextUser=e.contextUser},initialize:function(e,n,a){this._withLocalStorage=e,this._withWidgetPreferences=n,this._withUserPreferences=a,e&&t.init(this.contextUser),n&&i.prototype.initWidgetViewPreferences()},setUserId:function(e){this.userID=e},isWidgetPreferencePath:function(e){return!!this._withWidgetPreferences&&i.prototype.isPath(e,!1)},updatePreference:function(e,n){this._withWidgetPreferences&&i.prototype.updateWidgetViewPreferences(e,n),this._withLocalStorage&&(e.splice(1,0,this.userID),t.setValue(e,n)),this._withUserPreferences},updateTab:function(e,t){this.updatePreference(e.concat([n._TAB]),t)},updateFilter:function(e,t){this.updatePreference(e.concat([n._LIST_VIEW,n._FILTERVIEW]),t)},updateRecents:function(e,t){this.updatePreference(e.concat([n._OBJECTIDs]),t)},getPreference:function(e){return console.log("XChangeApplicationPreferencesLanager -getPreference : "+e),this._withWidgetPreferences&&null!=this.getWidgetPreferenceValue(e)&&this.getWidgetPreferenceValue(e)?this.getWidgetPreferenceValue(e):this._withLocalStorage?(e.splice(1,0,this.userID),this.getLocalStorageValue(e)):void 0},getTab:function(e){return this.getPreference(e.concat([n._TAB]))},getFilter:function(e){return this.getPreference(e.concat([n._LIST_VIEW,n._FILTERVIEW]))},getRecents:function(e){return this.getPreference(e.concat([n._OBJECTIDs]))},setRouteInfo:function(e){if(this._withWidgetPreferences){var t=[n._KEY,n._LAST_ROUTE],a={name:e&&e.name?e.name:void 0,params:e&&e.params?e.params:void 0};i.prototype.updateWidgetViewPreferences(t,a),console.log(JSON.parse(widget.getValue("xchange-app"))),console.log("")}},getRouteInfo:function(){if(this._withWidgetPreferences){var e=[n._KEY,n._LAST_ROUTE];return this.getWidgetPreferenceValue(e)}return{name:void 0,params:{}}},getLocalStorageValue:function(e){return t.getValue(e)},getWidgetPreferenceValue:function(e){return i.prototype.getValue(e)}})}),define("DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/UIKIT/Mask","require","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f,b,w,D,S){"use strict";var E=Object.create(null);return E.getColumns=function(){return[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"co_name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",editableFlag:!1,filterId:"set",filterModel:[],compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.stateGrade&&"undefined"!=n.options.grid.stateGrade?i.options.grid.stateGrade==n.options.grid.stateGrade?0:i.options.grid.stateGrade<n.options.grid.stateGrade?-1:1:0}},{text:e.CHG_GOV_DataGrid_Column_Severity,dataIndex:"sev",editableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.severityGrade&&"undefined"!=n.options.grid.severityGrade?i.options.grid.severityGrade==n.options.grid.severityGrade?0:i.options.grid.severityGrade<n.options.grid.severityGrade?-1:1:0},getCellGroupingKey:function(e){return e.nodeModel.options.grid.severityNLS}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"co_Owner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}},{text:e.CHG_GOV_DataGrid_Column_ChangeCoordinator,dataIndex:"co_Coordinator",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!0,filterId:"stringRegexp",filterModel:"",allowUnsafeHTMLContent:!0,getCellGroupingKey:function(e){return e.nodeModel.options.grid.changeCoordinatorFullName}},{text:e.CHG_GOV_DataGrid_Column_CollabSpace,dataIndex:"collabspaceNLS",editableFlag:!1,filterId:"set",filterModel:[],alwaysVisibleFlag:!1,visibleFlag:!1},{text:e.CHG_GOV_DataGrid_Column_Organization,dataIndex:"organizationNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Applicability,dataIndex:"applicabilityNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:""}]},E.getMaturityMenu=function(t){return{type:"PushItem",title:e.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(e){for(var i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=[],o=0;o<i.length;o++)n.push(i[o].options.grid),a.push({physicalid:i[o].options.grid["@id"]||i[o].options.grid.id});new h({context:n,ID:"MaturityHdr"}).executeAsync(a)}}}},E.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:i.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},E.showNotification=function(e,t,i,n,a,o,r){var s={level:e,title:t,subtitle:i,message:n,sticky:a,allowUnsafeHTML:r||!1};window.notifs||(window.notifs=v,f.setNotificationManager(window.notifs)),o?f.inject(o):f.elements.container.isInjected()||f.inject(),window.notifs.addNotif(s)},E.getRelationalExplorerMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<t.length;e++){let i=t[e].options.grid.id;n.push(i)}e.openRelationalExplorer(n)})}}}},E.getTransferMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<t.length;e++)n.push(t[e].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},E.getDeleteMenu=function(t,i,n){return{type:"PushItem",title:e.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){let e=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),t=[];for(let i=0;i<e.length;i++){let n=e[i],a={physicalid:n.options.grid.id,nodeName:n.options.grid.name,nodeTitle:n.options.grid.title};t.push(a)}let a=require("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout");o.deleteNodes(t,n,a.removeDataFromGrid)}}}},E.changeView=function(i){if(widget.body.getDimensions().width<=n.MOBILE_CUTOFF?a.updateCASummaryViewMobile(i):a.updateCASummaryViewDesktop(i),"GridView"==i){this.currentView="Grid";let i=t.toolbar.getNodeModelByID("view");i&&"view-list"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),i.options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";let n=document.querySelector(".toolbar-cr-div .wux-ui-3ds-view-list");n&&n.addClassName("currentView");let a=document.querySelector(".toolbar-co-div .wux-ui-3ds-view-small-tile");a&&a.removeClassName("currentView");let o=document.querySelector(".crgridView");o&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView"));let r=document.querySelector(".crtileView");r&&(r.removeClassName("showView"),r.addClassName("hideView"))}else if("TileView"==i){this.currentView="Tile";let i=t.toolbar.getNodeModelByID("view");i&&"view-small-tile"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),i.options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected";let n=document.querySelector(".toolbar-co-div .wux-ui-3ds-view-list");n&&n.removeClassName("currentView");let a=document.querySelector(".toolbar-cr-div .wux-ui-3ds-view-small-tile");a&&a.addClassName("currentView");let o=document.querySelector(".crgridView");o&&(o.removeClassName("showView"),o.addClassName("hideView"));let r=document.querySelector(".crtileView");r&&(r.removeClassName("hideView"),r.addClassName("showView"))}},E.createCustomSeverity=function(e,t){let i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let n=new UWA.Element("div",{}),a=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(a);let o=UWA.createElement("span",{html:t});return a.inject(n),o.inject(n),n.outerHTML},E.createCustomOwner=function(e,t){let n="/api/user/getpicture/login/"+t+"/format/normal",a=i.getGlobalVariable().computeSwymUrl(n),o=new UWA.Element("div",{class:"members"}),s=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:a});else{let e=r.getAvatarDetails(t);(l=UWA.createElement("div",{html:e.avatarStr,class:"avatarIcon"})).style.setProperty("background",e.avatarColor)}l.inject(s);let c=UWA.createElement("span",{class:"userName",html:t});return s.inject(o),c.inject(o),o.outerHTML},E.createHeaderFieldsJSON=function(t){return new Promise(function(i,n){let a={"ds6w:project":[t.model.collabspace],"ds6w:organizationResponsible":[t.model.organization]};g.getNLSValuesPromise(a).then(function(n){let a=n["ds6w:organizationResponsible"][t.model.organization],o=n["ds6w:project"][t.model.collabspace],r={id:t.model.id,name:t.model.name,revision:t.model.revision,type:t.model.type,title:t.model.title,thumbnail:t.model.thumbnail,iconURL:t.model.iconURL,minified:!1,onHold:t.model.onHold,isKindOfType:t.model.isKindOfType,attributes:{layout:[["maturity","owner","collabSpace"],["Applicability","Attachments","RelatedScope"],["orgnaization"]],mapping:{owner:{fieldNLS:e.CHG_GOV_DataGrid_Column_Owner,valueActual:t.model.owner,valueDisplay:t.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},collabSpace:{fieldNLS:e.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:t.model.collabspace,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},maturity:{fieldNLS:e.CHG_GOV_DataGrid_Column_Maturity,valueActual:t.model.maturity,valueDisplay:t.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},orgnaization:{fieldNLS:e.CHG_GOV_DataGrid_Column_Organization,valueActual:t.model.organization,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},Applicability:{fieldNLS:e.CHG_GOV_Header_Applicability,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Attachments:{fieldNLS:e.CHG_GOV_Header_Attachments,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0},RelatedScope:{fieldNLS:e.CHG_GOV_Header_RelatedScope,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0}}},freeSpaces:[{type:"text",data:t.model.description}],menuItems:[{id:"chgHold",text:e.CHG_GOV_Header_Menu_Hold,fonticon:"fonticon fonticon-pause",accessBit:"Hold"},{id:"chgResume",text:e.CHG_GOV_Header_Menu_Resume,fonticon:"fonticon fonticon-resume",accessBit:"Resume"},{id:"chgCancel",text:e.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"}]};i(r)})})},E.getCRTabs=function(e,t,i){this._pathRequestsDetails=[l._KEY,l._VIEWS_PREFERENCES,l._CHANGE_REQUESTS_DETAILS];var n=s.getTab(this._pathRequestsDetails);let a="crAffectedItems";a=""==n?"crAffectedItems":n,console.log(n);let o=this.getCRMembersTab(e,t,a),r=this.getCRAssessmentTab(e,t,a,i);return[this.getCRAffectedItemsTab(e,t,a,i),r,this.getCRChangeOrchestrationTab(e,t,a,i),o,this.getCRApprovalsTab(e,t,a)]},E.getCRAssessmentTab=((t,i,n,a)=>{let o=!1;return"crAssessment"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Assessment,isSelected:o,index:1,value:"crAssessment",content:t.createCRAssessmentTab(i,a),icon:{iconName:"change-request-chart-line-bar",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getCRAffectedItemsTab=((t,i,n,a)=>{let o=!1;return"crAffectedItems"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_AffectedItems,isSelected:o,value:"crAffectedItems",index:0,content:t.createCRAffectedItemsTab(i,a),icon:{iconName:"change-request-attention",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getCRApprovalsTab=((t,i,n)=>{let a=!1;return"crApprovals"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_Approvals,isSelected:a,value:"crApprovals",index:4,content:t.createCRApprovalsTab(i,n),icon:{iconName:"status-ok",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getCRMembersTab=((t,i,n)=>{let a=!1;return"crMembers"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_Members,isSelected:a,value:"crMembers",index:3,content:t.createCRMembersTab(i),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getCRChangeOrchestrationTab=((t,i,n,a)=>{let o=!1;return"crOrchestration"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_ChangeOrchestration,isSelected:o,value:"crChangeOrchestration",index:2,content:t.createCROrchestrationTab(i,a),icon:{iconName:"flow-tree-ordered",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.displayObjectInfoInsideIDcard=function(e,t=!1){var i=this;c.getChangeRequestInfo(e).then(function(e){d.processedCRSummaryList(e).then(function(a){var o={model:a[0]};i.createHeaderFieldsJSON(o).then(function(i){var o={model:i};if(t)try{let t=S("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");(i=a[0]).dueDate=e.data[0].dueDate,i.isKindOfType="Change Request",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:i})}catch(e){console.log(e)}u.navigate(n.ROUTE_CR_DETAILS,{id:i.id,name:i.name,title:i.title,nodeModel:o,mode:"outsideCall"},{reload:!0})})})},function(e){var t=document.getElementsByClassName("moduleWrapper")[0];return t&&D.isMasked(t)&&D.unmask(t),Promise.reject(e)})},E.getChangeRequestModelForIDCard=function(e){return new Promise(function(t,i){c.getChangeRequestInfo(e).then(function(e){d.processedCRSummaryList(e).then(function(e){var i={model:e[0]};t(i)})})})},E.filterView=function(e){if("activeCR"==e)(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";else if("inactiveCR"==e){var i;(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected"}},E}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgInActiveCRFilterView",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil"],function(e,t){"use strict";return{filterView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout"],function(e){e.crGridView.crDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.filterView("inactiveCR")},100)})}}}),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil",["DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/PlatformAPI/PlatformAPI","DS/ENOChangeActionUX/scripts/CAPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/UIKIT/Dropdown","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/LifecycleCmd/MaturityCmd","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f,b,w,D,S){"use strict";var E=Object.create(null);return E.getColumns=function(){return[{text:m.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:m.CHG_GOV_DataGrid_Column_Name,dataIndex:"co_name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:m.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",editableFlag:!1,filterId:"set",filterModel:[],compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.stateGrade&&"undefined"!=n.options.grid.stateGrade?i.options.grid.stateGrade==n.options.grid.stateGrade?0:i.options.grid.stateGrade<n.options.grid.stateGrade?-1:1:0}},{text:m.CHG_GOV_DataGrid_Column_Severity,dataIndex:"sev",editableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",compareFunction:function(e,t,i,n,a){return"undefined"!=i.options.grid.severityGrade&&"undefined"!=n.options.grid.severityGrade?i.options.grid.severityGrade==n.options.grid.severityGrade?0:i.options.grid.severityGrade<n.options.grid.severityGrade?-1:1:0},getCellGroupingKey:function(e){return e.nodeModel.options.grid.severityNLS}},{text:m.CHG_GOV_DataGrid_Column_Owner,dataIndex:"co_Owner",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}},{text:m.CHG_GOV_DataGrid_Column_CollabSpace,dataIndex:"collabspaceNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:m.CHG_GOV_DataGrid_Column_Organization,dataIndex:"organizationNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:m.CHG_GOV_DataGrid_Column_Applicability,dataIndex:"applicabilityNLS",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:""}]},E.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:s.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},E.showNotification=function(e,t,i,n,a,o,r){var s={level:e,title:t,subtitle:i,message:n,sticky:a,allowUnsafeHTML:r||!1};window.notifs||(window.notifs=b,w.setNotificationManager(window.notifs)),o?w.inject(o):w.elements.container.isInjected()||w.inject(),window.notifs.addNotif(s)},E.createHeaderFieldsJSON=function(e){return new Promise(function(t,i){let a={"ds6w:project":[e.model.collabspace],"ds6w:organizationResponsible":[e.model.organization]};n.getNLSValuesPromise(a).then(function(i){let n=i["ds6w:organizationResponsible"][e.model.organization],a=i["ds6w:project"][e.model.collabspace],o=["orgnaization","Flowdown"];var r={id:e.model.id,name:e.model.name,revision:e.model.revision,type:e.model.type,title:e.model.title,thumbnail:e.model.thumbnail,iconURL:e.model.iconURL,minified:!1,onHold:e.model.onHold,isKindOfType:e.model.isKindOfType,attributes:{layout:[["maturity","owner","collabSpace"],["Applicability","Dependency","Attachments"]],mapping:{owner:{fieldNLS:m.CHG_GOV_DataGrid_Column_Owner,valueActual:e.model.owner,valueDisplay:e.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"Transfer"},collabSpace:{fieldNLS:m.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:e.model.collabspace,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"Transfer"},maturity:{fieldNLS:m.CHG_GOV_DataGrid_Column_Maturity,valueActual:e.model.maturity,valueDisplay:e.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},orgnaization:{fieldNLS:m.CHG_GOV_DataGrid_Column_Organization,valueActual:e.model.organization,valueDisplay:n,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"Transfer"},Applicability:{fieldNLS:m.CHG_GOV_Header_Applicability,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Dependency:{fieldNLS:m.CHG_GOV_Header_Dependency,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Attachments:{fieldNLS:m.CHG_GOV_Header_Attachments,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Flowdown:{fieldNLS:m.CHG_GOV_Header_Flowdown,valueActual:"Unassigned",valueDisplay:"Unassigned",showLoader:!0,displayWhenMinified:!0,editable:!0},Group:{fieldNLS:m.CHG_GOV_Header_Group,valueActual:void 0,valueDisplay:"Unassigned",showLoader:!0,displayWhenMinified:!0,accessBit:"AddToGroup"}}},freeSpaces:[{type:"text",data:e.model.description}],menuItems:[{id:"chgBOMSync",text:m.ECM_CA_EBOM_Sync_Action,fonticon:"fonticon fonticon-change-action-sync",accessBit:"Synchronization"},{id:"chgHold",text:m.CHG_GOV_Header_Menu_Hold,fonticon:"fonticon fonticon-pause",accessBit:"Hold"},{id:"chgResume",text:m.CHG_GOV_Header_Menu_Resume,fonticon:"fonticon fonticon-resume",accessBit:"Resume"},{id:"chgCancel",text:m.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"}]};"true"==s.getGlobalVariable().CHG_CHANGE_GROUP&&o.push("Group"),r.attributes.layout.push(o);let l={id:"chgCAWorkUnder",text:m.CHG_GOV_Header_Menu_WorkUnder,fonticon:"fonticon fonticon-hardhat",accessBit:"WorkUnder"};(s.getGlobalVariable().isNative||s.getGlobalVariable().isPoweredBy)&&(r.menuItems.push(l),p.unsubscribe("change-action-work-under"),p.subscribe("change-action-work-under",function(e){E.publishEventToWebnWinForWorkUnder(e)})),t(r)})})},E.getMaturityMenu=function(e){return{type:"PushItem",title:m.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],a=[],o=0;o<i.length;o++)n.push(i[o].options.grid),a.push({physicalid:i[o].options.grid["@id"]||i[o].options.grid.id});new D({context:n,ID:"MaturityHdr"}).executeAsync(a)}}}},E.publishEventToWebnWinForWorkUnder=function(e){let t=e.changeaction;if(t&&t.editability)if("allowed"===t.editability.work_under){let e="Work_Under",n="TRUE";if(s.getGlobalVariable().isPoweredBy){var i=t.attributes.find(e=>"attribute_Synopsis"===e.name);let e=i&&i.value?i.value:"",n=t.name,a=t.description,o=t.id;if(t.attributes){let i=t.attributes;UWA.is(i)&&i.forEach(function(t){"attribute_Synopsis"===t.name&&(e=t.value)})}let r={operation:"Work_Under",operationVersion:"1.0",content:{id:o.replace("pid:",""),name:n,title:e,description:a}};p.publish("webinwin:web:notification",JSON.stringify(r))}else c.DispatchEventToWin(e,n)}else r.error(m.CHG_GOV_Action_WorkUnder_Forbidden)},E.getTabs=function(e,t){this._pathChangeActionsDetails=[u._KEY,u._VIEWS_PREFERENCES,u._CHANGE_ACTIONS_DETAILS];var i=g.getTab(this._pathChangeActionsDetails);let n="ProposedChange";n=null==i||""==i?"ProposedChange":i,console.log(i);let a=this.getProposedChangeTab(e,t,n),o=this.getRealizedChangeTab(e,t,n);return[this.getMembersTab(e,t,n),a,o,this.getApprovalsTab(e,t,n)]},E.getMembersTab=((e,t,i)=>{let n=!1;return"Members"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_Members,isSelected:n,value:"caMembers",index:0,content:e.createMembersTab(t),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getProposedChangeTab=((e,t,i)=>{let n=!1;return"ProposedChange"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_ProposedChanges,isSelected:n,index:1,value:"caProposedChange",content:e.createProposedChangeTab(t),icon:{iconName:"change-action-proposed",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getRealizedChangeTab=((e,t,i)=>{let n=!1;return"RealizedChange"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_RealizedChanges,isSelected:n,index:2,value:"caRealizedChange",content:e.createRealizedChangeTab(t),icon:{iconName:"change-action-realized",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getApprovalsTab=((e,t,i)=>{let n=!1;return"Approvals"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_Approvals,isSelected:n,value:"caApprovals",index:3,content:e.createApprovalsTab(t,i),icon:{iconName:"status-ok",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.displayObjectInfoInsideIDcard=function(t,n=!1){var r=this;a.getChangeActionInfo(t).then(function(e){var t=o.processChangeActionDetails(e);let a={model:t[0]};r.createHeaderFieldsJSON(a).then(function(e){var a={model:e};if(n)try{let i=S("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");(e=t[0]).isKindOfType="Change Action",i.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:e})}catch(e){console.log(e)}(i.navigate(d.ROUTE_CA_DETAILS,{id:e.id,name:e.name,title:e.title,nodeModel:a,mode:"outsideCall"},{reload:!0}),s.getGlobalVariable().isNative)&&(window.history.replaceState("",e.title,s.getGlobalVariable().nativeURL),"true"!=s.getGlobalVariable().CHG_NATIVE_BREADCRUMB&&i.getDependency("applicationChannel").publish({event:"breadcrumb-hide"}))})},function(t){var i=document.getElementsByClassName("moduleWrapper")[0];i&&e.isMasked(i)&&e.unmask(i)})},E.getChangeActionModelForIDCard=function(e){return new Promise(function(t,i){a.getChangeActionInfo(e).then(function(e){var i={model:o.processChangeActionDetails(e)[0]};t(i)})})},E.changeView=function(e){if(widget.body.getDimensions().width<=d.MOBILE_CUTOFF?h.updateCASummaryViewMobile(e):h.updateCASummaryViewDesktop(e),"GridView"==e){this.currentView="Grid";let e=t.toolbar.getNodeModelByID("view");e&&"view-list"!=e.options.grid.semantics.icon.iconName&&e.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:m.CHG_TOOLTIP_GRID_VIEW}),e.options.grid.data.menu[0].state="selected",e.options.grid.data.menu[1].state="unselected";let i=document.querySelector(".toolbar-ca-div .wux-ui-3ds-view-list");i&&i.addClassName("currentView");let n=document.querySelector(".toolbar-co-div .wux-ui-3ds-view-small-tile");n&&n.removeClassName("currentView");let a=document.querySelector(".cagridView");a&&(a.removeClassName("hideView"),a.removeClassName("nonVisible"),a.addClassName("showView"));let o=document.querySelector(".catileView");o&&(o.removeClassName("showView"),o.addClassName("hideView"))}else if("TileView"==e){this.currentView="Tile";let e=t.toolbar.getNodeModelByID("view");e&&"view-small-tile"!=e.options.grid.semantics.icon.iconName&&e.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:m.CHG_TOOLTIP_TILE_VIEW}),e.options.grid.data.menu[0].state="unselected",e.options.grid.data.menu[1].state="selected";let i=document.querySelector(".toolbar-co-div .wux-ui-3ds-view-list");i&&i.removeClassName("currentView");let n=document.querySelector(".toolbar-ca-div .wux-ui-3ds-view-small-tile");n&&n.addClassName("currentView");let a=document.querySelector(".cagridView");a&&(a.removeClassName("showView"),a.addClassName("hideView"));let o=document.querySelector(".catileView");o&&(o.removeClassName("hideView"),o.addClassName("showView"))}},E.getDeleteMenu=function(e,t,i){return{type:"PushItem",title:m.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){let e=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let t=0;t<e.length;t++){let i=e[t],a={physicalid:i.options.grid.id,nodeName:i.options.grid.name,nodeTitle:i.options.grid.title};n.push(a)}let a=require("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout");l.deleteNodes(n,i,a.removeDataFromGrid)}}}},E.getTransferMenu=function(e,t){return{type:"PushItem",title:m.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){let i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<i.length;e++)n.push(i[e].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},E.getRelationalExplorerMenu=function(e,t){return{type:"PushItem",title:m.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){let i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<i.length;e++){let t=i[e].options.grid.id;n.push(t)}e.openRelationalExplorer(n)})}}}},E.createCustomOwner=function(e,t){let i="/api/user/getpicture/login/"+t+"/format/normal",n=s.getGlobalVariable().computeSwymUrl(i),a=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),r="";if(s.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:n});else{let e=ChgMembersServices.getAvatarDetails(t);(r=UWA.createElement("div",{html:e.avatarStr,class:"avatarIcon"})).style.setProperty("background",e.avatarColor)}r.inject(o);let l=UWA.createElement("span",{class:"userName",html:t});return o.inject(a),l.inject(a),a.outerHTML},E.filterView=function(e){if("activeCA"==e)(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";else if("inactiveCA"==e){var i;(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected"}},E}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgInActiveCAFilterView",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil"],function(e,t){"use strict";return{filterView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout"],function(e){e.caGridView.caDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.filterView("inactiveCA")},100)})}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar","DS/Controls/Popup","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/Menu/ContextualMenu","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/Handlebars/Handlebars4","text!DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridProposedCAPopoverTemplate.html"],function(e,t,i,n,a,o,r,s,l,c){"use strict";let d=Object.create(null);return d.getColumns=function(i){let n=!0;i&&"false"===i.AddImpactedItems&&"false"===i.RemoveImpactedItems&&(n=!1);let a=[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Type,dataIndex:"typeNLS",editableFlag:!1,visibleFlag:!1,filterId:"set",filterModel:[]},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"name",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}},{text:e.CHG_GOV_DataGrid_Column_Revision,dataIndex:"revision",editableFlag:!1,filterId:"set",filterModel:[]},{text:e.Chg_GOV_Reason_For_Change,dataIndex:"reasonForChange",editableFlag:n,typeRepresentation:"editor",massUpdateAllowedFlag:!0,filterId:"stringRegexp",filterModel:""},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"currentNLS",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellGroupingKey:function(e){return e.nodeModel.options.grid.currentNLS}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"chgObjOwner",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}},{text:e.CHG_GOV_DataGrid_Column_ProposedCA,dataIndex:"proposedChangeAction",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!0,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellGroupingKey:function(e){let t=e.nodeModel.options.grid.proposedChangeActionsData;if(!t)return"";switch(t.length){case 0:return"none";case 1:return t[0].title;default:return t.length}}},{text:e.CHG_COUMN_IMPACT,dataIndex:"impact",editableFlag:n,typeRepresentation:"impact",editionPolicy:"EditionOnOver",massUpdateAllowedFlag:!0,filterId:"set",filterModel:[]}];return t.getGlobalVariable().is3DSpace&&(a[0].allowUnsafeHTMLContent=!0,a[0].getCellGroupingKey=function(e){return e.nodeModel.options.data.grid.title}),a},d.changeView=function(t){if("GridView"==t)this.currentView="Grid",(i=n.toolbar.getNodeModelByID("view"))&&"view-list"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),i.options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected",(a=document.querySelector(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-list"))&&a.addClassName("currentView"),(o=document.querySelector(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-small-tile"))&&o.removeClassName("currentView"),(r=document.querySelector(".content-impactedItem-grid-div"))&&(r.removeClassName("hideView"),r.removeClassName("nonVisible"),r.addClassName("showView")),(s=document.querySelector(".content-impactedItem-tile-div"))&&(s.removeClassName("showView"),s.addClassName("hideView"));else if("TileView"==t){var i,a,o,r,s;this.currentView="Tile",(i=n.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),i.options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected",(a=document.querySelector(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-list"))&&a.removeClassName("currentView"),(o=document.querySelector(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-small-tile"))&&o.addClassName("currentView"),(r=document.querySelector(".content-impactedItem-grid-div"))&&(r.removeClassName("showView"),r.addClassName("hideView")),(s=document.querySelector(".content-impactedItem-tile-div"))&&(s.removeClassName("hideView"),s.addClassName("showView"))}},d.getProposedColumnBasedOnData=function(e){if(e.length>1){let t=new UWA.createElement("a",{class:"proposedChangeActionsCount"});return t.innerText=e.length,t.outerHTML}if(1==e.length){var t=UWA.createElement("div",{class:"proposedChangeActionField"}),i=UWA.createElement("span",{class:"proposedChangeActionTitle",html:" "+e[0].title+" ("+e[0].name+")"}),n=e[0].icon;return UWA.createElement("img",{src:n}).inject(t),i.inject(t),t.outerHTML}},d.getRMBProposedChangeColumn=function(t){return new Promise((i,n)=>{let a=[],o=[],r=null;t.forEach(e=>{o.push(e.id),r={objectId:e.id,objectType:e.type,displayName:e.name,displayType:e.typeNLS,facetName:"impactedItem"}}),a.push({type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){s.openRelationalExplorer(o)}}}),s.openWith(r).then(e=>{a.push(e),i(a)})})},d.getPopupProposedChangeColumn=function(e,t){let i=d.getPopupContentProposedChangeColumn(t.options.grid.proposedChangeActionsData);var n=new a({target:e,trigger:"click",constraint:widget.body,className:"wux-controls-abstract wux-controls-popup impactedItemProposedChangePopup"});n.setBody(i),t.options.grid.proposedChangeActionsData.forEach((e,t)=>{r.addEventListener(n.elements.container.getElementsByClassName("impactedItem-proposedChange-popup-table-tr")[t],{callback:function(e){if(e.data.listener.getAttribute("data-changeId")){let t=[],i={id:e.data.listener.getAttribute("data-changeId"),type:e.data.listener.getAttribute("data-changeType"),name:e.data.listener.getAttribute("data-changeName"),typeNLS:e.data.listener.getAttribute("data-changeTypeNLS")};return t.push(i),d.getRMBProposedChangeColumn(t).then(function(e){return e})}return[]}})})},d.getPopupContentProposedChangeColumn=function(t){return l.compile(c)({changes:t,heading:e.CHG_GOV_DataGrid_Column_ProposedCA_Popup_Heading})},d}),define("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgInfraService","DS/UIKIT/Mask","require","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,a,o,r,s,l,c,d,u){"use strict";var g=Object.create(null);return g.getTabs=function(e,t){this._pathChangeOrdersDetails=[l._KEY,l._VIEWS_PREFERENCES,l._CHANGE_ORDERS_DETAILS];var i=s.getTab(this._pathChangeOrdersDetails);let n="ChangeOrchestration";return n=""==i?"ChangeOrchestration":i,console.log(i),[this.getChangeOrchestrationTab(e,t,n),this.getMembersTab(e,t,n),this.getApprovalsTab(e,t,n)]},g.createHeaderFieldsJSON=function(t){return new Promise(function(i,n){let a={"ds6w:project":[t.model.collabspace],"ds6w:organizationResponsible":[t.model.organization]};c.getNLSValuesPromise(a).then(function(n){let a=n["ds6w:organizationResponsible"][t.model.organization],o=n["ds6w:project"][t.model.collabspace];var r={id:t.model.id,name:t.model.name,revision:t.model.revision,type:t.model.type,title:t.model.title,thumbnail:t.model.thumbnail,iconURL:t.model.iconURL,minified:!1,onHold:t.model.onHold,isKindOfType:t.model.isKindOfType,attributes:{layout:[["maturity","owner","collabSpace"],["Applicability","Dependency","Attachments"],["orgnaization","RelatedScope"]],mapping:{owner:{fieldNLS:e.CHG_GOV_DataGrid_Column_Owner,valueActual:t.model.owner,valueDisplay:t.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},collabSpace:{fieldNLS:e.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:t.model.collabspace,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},maturity:{fieldNLS:e.CHG_GOV_DataGrid_Column_Maturity,valueActual:t.model.maturity,valueDisplay:t.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},orgnaization:{fieldNLS:e.CHG_GOV_DataGrid_Column_Organization,valueActual:t.model.organization,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},Applicability:{fieldNLS:e.CHG_GOV_Header_Applicability,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Dependency:{fieldNLS:e.CHG_GOV_Header_Dependency,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Attachments:{fieldNLS:e.CHG_GOV_Header_Attachments,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},RelatedScope:{fieldNLS:e.CHG_GOV_Header_RelatedScope,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0}}},freeSpaces:[{type:"text",data:t.model.description}],menuItems:[{id:"chgHold",text:e.CHG_GOV_Header_Menu_Hold,fonticon:"fonticon fonticon-pause",accessBit:"Hold"},{id:"chgResume",text:e.CHG_GOV_Header_Menu_Resume,fonticon:"fonticon fonticon-resume",accessBit:"Resume"},{id:"chgCancel",text:e.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"}]};i(r)})})},g.displayObjectInfoInsideIDcard=function(e,t=!1){var o=this;n.getChangeOrderInfo(e).then(function(e){var n=a.processedChangeOrderDetail(e);if(t)try{let t=u("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var s=e.data[0].dataelements;s.type=e.data[0].type,s.isKindOfType="Change Order",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:s})}catch(e){console.log(e)}var l={model:n[0]};o.createHeaderFieldsJSON(l).then(function(e){var t={model:e};i.navigate(r.ROUTE_CO_DETAILS,{id:e.id,name:e.name,title:e.title,nodeModel:t,mode:"outsideCall"},{reload:!0})})},function(e){var t=document.getElementsByClassName("moduleWrapper")[0];return t&&d.isMasked(t)&&d.unmask(t),Promise.reject(e)})},g.getChangeOrderModelForIDCard=function(e){return new Promise(function(t,i){n.getChangeOrderInfo(e).then(function(e){var i={model:a.processedChangeOrderDetail(e)[0]};t(i)})})},g.getChangeOrchestrationTab=((t,i,n)=>{let a=!1;return"ChangeOrchestration"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_ChangeOrchestration,isSelected:a,index:0,value:"coOrchestration",content:t.createOrchestrationTab(i),icon:{iconName:"flow-tree-ordered",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),g.getMembersTab=((t,i,n)=>{let a=!1;return"Members"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_Members,isSelected:a,value:"coMembers",index:1,content:t.createMembersTab(i),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),g.getApprovalsTab=((t,i,n)=>{let a=!1;return"Approvals"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_Approvals,isSelected:a,value:"coApprovals",index:2,content:t.createApprovalsTab(i,n),icon:{iconName:"status-ok",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),g}),define("DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder",["DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil","DS/ENOChgServices/scripts/components/ChgCommonCreateDialog","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENONewWidget/ENONewLauncher","require","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,a,o,r,s,l,c){var d={onCompleteCallback:function(e){let t=e.data[0].id,o={};o.context=t,o.type="ChangeOrder",c("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").launchPropertyPanelContext(o),s.getGlobalVariable().existingCOIds.push(t),a.displayObjectInfoInsideIDcard(t),n.publish("load-dependency"+widget.id,"pid:"+t);var r=document.getElementById("outer-co-div");i.unmask(r)},onFailureCallback:function(){var e=document.getElementById("outer-co-div");i.unmask(e),console.log("ERROR : FAILED CREATE CO")},createChangeOrder:function(e){let t={context:{service:"3DSpace",tenant:s.getGlobalVariable().tenant,header:{SecurityContext:s.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_NEW_CHANGE_ORDER_FORM,type:"Change Order",silentMode:!1,overlay:!0,options:{typeName:"Change Order",preferedType:"Change Order",select:[]},events:{onSuccess:function(t){e&&(e.isClickProcessing=!1);var n=document.getElementsByClassName("moduleWrapper")[0];null==n&&"undefined"==n||i.mask(n);let a=t.result[0].identifier,o={};o.context=a,o.type="ChangeOrder";let r=c("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),s=c("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil");r.launchPropertyPanelContext(o),s.displayObjectInfoInsideIDcard(a,!0)},onFailure:function(t){console.log("onFailure..............."+t),e&&(e.isClickProcessing=!1)},onCancel:function(t){e&&(e.isClickProcessing=!1)}}};(new l).CreateNew(t)},processChangeOrder:function(e){var i=e.titleText,n={data:[{dataelements:{description:e.DescText,policy:"Fast track Change",title:i}}]};t.createChangeOrder(JSON.stringify(n),d.onCompleteCallback,d.onFailureCallback)},createBlankChangeOrder:function(e,n,a){var o=a.value;if(void 0!==window.__karma__&&(o="ODT_CA"),null!=o&&""!=o.trim()){var r=document.getElementById("outer-co-div");null==r&&"undefined"==r||i.mask(r);var s={data:[{dataelements:{description:o,policy:"Fast track Change",title:o}}]};t.createChangeOrder(JSON.stringify(s),d.onCompleteCallback,d.onFailureCallback)}a.value=""}};return d}),define("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";return e.extend({init:function(e){this._parent(e),this._modelEvents=null,"undefined"!=e&&"undefined"!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.coDatagridView=""},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){var e=this.processColumns(),t=this,h={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:"",identifier:"chgCOSummaryGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(t,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){o.readyDragContent(e,t)},onDragStartCell:function(e,t){o.readyDragContent(e,t)}};h=UWA.merge(h,this.options),this.coDatagrid=new n(h),this.coDatagrid.cellSelection="none",this.coDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,t){e.map(e=>{if(e.identifier==t){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCOList=e}}})},this.coDatagrid.onDelayedModelDataRequest=function(e){let i=t.coDatagrid.getCustomViewsManager().getCustomViews(),n=t.coDatagrid.getCustomViewsManager()._currentCustomViewIdentifier;i.map(e=>{if(e.identifier==n){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCOList=e}}});var a=e.collectionView;let o=[],r=[],s=["applicabilityNLS","organizationNLS","collabspaceNLS","co_Coordinator","co_Owner","sev","maturityNLS","co_name"],l=p.getGlobalVariable().customeViewCOList,c=[];if(l.forEach(function(e){s.includes(e)||c.push(e)}),-1!=e.endNodeIndex&&-1!=e.startNodeIndex){for(let t=e.startNodeIndex;t<=e.endNodeIndex;t++){o.push(a.model[t].options.grid.id),r.push(a.model[t]);for(let e=0;e<c.length;e++)a.model[t].setAttribute(c[e],void 0)}var d=o.filter(e=>!!e);d.length>0&&g.updateAsynAttributeColumn(c,d,r)}},this.coTilesView=new u({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){o.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});var m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.coTilesView.onContextualEvent=m;var C={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:s.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:s.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},v={expandInput:{stdTemplate:"expandInputtemplate"}},f={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new c}catch(e){console.log(e)}this.coDatagrid.getTypeRepresentationFactory().registerTypeTemplates(f),this.coDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(v),this.coDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(C),this.coDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}}),a.toolbar=this.coDatagrid.setToolbar(a.writetoolbarDefination()),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(f),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(v),(t=this).toolbar.addEventListener("onReady",function(e){var i=t.toolbar.getNodeModelByID("addNewBlankCAId");i&&i._associatedView.registerkeyDownCallback(d.createBlankChangeOrder)}),this.coDatagrid.addEventListener("allCellsRendered",function(){t.coDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+t.coDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+t.coDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.coTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+t.coTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+t.coTilesView.getTreeDocument().getSelectedNodes().length}}])}),t.coDatagrid.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),t.coDatagrid.getTreeDocument().getXSO().onAdd(function(e){t.coDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+t.coDatagrid.getTreeDocument().getSelectedNodes().length}}),t.coTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+t.coDatagrid.getTreeDocument().getSelectedNodes().length}}),t._modelEvents.publish({event:"co-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})}),t.coDatagrid.getTreeDocument().getXSO().onRemove(function(e){t.coDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.coTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?t._modelEvents.publish({event:"co-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):t._modelEvents.publish({event:"co-DataGrid-on-unselect",data:{model:e,context:e},context:e})}),t.coTilesView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount&&(i.nodeModel.select(!0),t._modelEvents.publish({event:"co-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}))},this.coDatagridView=UWA.createElement("div",{id:"outer-co-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-co-div"});var b=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-co-div"});this.toolbar.inject(b);var w=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 76px)",position:"relative"},class:"content-co-div cogridView showView"}),D=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 76px)",position:"relative"},class:"cotileView hideView"}),S=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:s.CHG_GOV_DataGrid_PlaceHolder}).inject(S),this.coDatagrid.inject(w),this.coTilesView.inject(D),S.inject(D),this.coDatagridView.addContent(b),this.coDatagridView.addContent(w),this.coDatagridView.addContent(D),this.coDatagridView.inject(this.options.target),this.coDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.subscribe({event:"co-DataGrid-on-search"},function(e){var i=e.query;i&&t.coDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(i)||e.options.grid.name.contains(i)?e.isVisible()||!e.options.grid.title.contains(i)&&!e.options.grid.name.contains(i)||e.show():e.hide()})}),this._modelEvents.subscribe({event:"co-DataGrid-on-reset-search"},function(e){t.coDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})})}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.coDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){h("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout").loadingViewPreference()}}})}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber",["DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderDataGridView"],function(e,t){"use strict";var i={globalRegisterationObj:{},addObserver:function(e,t,n){if(i.globalRegisterationObj[t]){for(var a=!1,o=0;o<i.globalRegisterationObj[t].length;o++)if(i.globalRegisterationObj[t][o].observerID==e){i.globalRegisterationObj[t][o].callback=n,a=!0;break}a||i.globalRegisterationObj[t].push({observerID:e,callback:n})}else i.globalRegisterationObj[t]=[],i.globalRegisterationObj[t].push({observerID:e,callback:n})},removeObserver:function(e,t){for(var n=0;n<i.globalRegisterationObj[e].length;n++)i.globalRegisterationObj[e][n].observerID==t&&i.globalRegisterationObj[e].splice(n,1)},notify(e,t){for(var n=i.globalRegisterationObj[e],a=0;a<n.length;a++)try{n[a].callback(t)}catch(e){console.log(e)}}};return e.subscribe("CO-Properties-Update",function(e){i.notify("CO-Properties-Update",e)}),e.subscribe("ENOLC_MOVE_CMD_UPDATE",function(e){console.log("globally new transfer data "+e),i.notify("ENOLC_MOVE_CMD_UPDATE",e)}),e.subscribe("CA-Group-Update",function(e){console.log("Firing notification for CA Group Update "+e),i.notify("CA-Group-Update",e)}),e.subscribe("CO-AccessBit-Update",function(e){i.notify("CO-AccessBit-Update",e)}),e.subscribe("Chg-Gov-Recents-PendingIndexed-DeletedIds",function(e){i.notify("Chg-Gov-Recents-PendingIndexed-DeletedIds",e)}),e.subscribe("Chg-Gov-Recents-RecentlyOpened-DeletedIds",function(e){i.notify("Chg-Gov-Recents-RecentlyOpened-DeletedIds",e)}),e.subscribe("ENORIPE-InApp-"+widget.id+"ChgCRImpactedItemDataGridLayout/onOK",function(e){i.notify("ENORIPE-InApp-"+widget.id+"ChgCRImpactedItemDataGridLayout/onOK",e)}),e.subscribe("ENORIPE-InApp-"+widget.id+"ChgCRAffectedItemsDataGridLayout/onOK",function(e){i.notify("ENORIPE-InApp-"+widget.id+"ChgCRAffectedItemsDataGridLayout/onOK",e)}),e.subscribe("Lifecycle.Modification",function(e){i.notify("Lifecycle.Modification",e)}),e.subscribe("Attachment-AccessBit-Update",function(e){i.notify("Attachment-AccessBit-Update",e)}),e.subscribe("co-update-attachment-complete",function(e){i.notify("co-update-attachment-complete",e)}),e.subscribe("update-impact-anlysis-grid",function(e){i.notify("update-impact-anlysis-grid",e)}),e.subscribe("CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",function(e){i.notify("CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",e)}),e.subscribe("Change-Maturity-Update",function(e){i.notify("Change-Maturity-Update",e)}),i}),define("DS/ENOChgGovernanceUX/scripts/view/recents/pendingIndexed/ChgPendingIndexedView",["UWA/Class/View","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/model/recents/ChgCORecentsTreeModel","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Core/PointerEvents","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsContextualMenu","DS/CoreEvents/ModelEvents","DS/Controls/Button","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m){"use strict";var C=e.extend({init:function(e){console.log("init ChgPendingIndexedView"),this._parent(e),this._modelEvents=new c,this.subscribeToModelEvents(),this.globalSubscribeForPendingIndexedView(),this.render(e)},subscribeToModelEvents:function(e){this._modelEvents.subscribe({event:"pendingIndexedTreeEmpty"},function(e){C.prototype.pendingIndexedTreeEmpty()}),this._modelEvents.subscribe({event:"pendingIndexedTreeNotEmpty"},function(e){C.prototype.pendingIndexedTreeNotEmpty()})},render:function(e){var a=this;e.treeDocument=(new n).createTreeDocument(this._modelEvents),C.prototype.ChgCORecentsTreeModel=e.treeDocument,a.createPendingIndexedView(e),t.getTimestamp().then(function(o){var r=i.processTimestampData(o);t.getConfiguredChangeOrderList({indexed:!1,simplifiedJSON:!0,timestamp:r}).then(function(t){var o=i.processChangeOrderRecentList(t);o.length>0?((new n).loadRecentChangeOrderData(e.treeDocument,o),a._modelEvents.publish({event:"pendingIndexedTreeNotEmpty"})):a._modelEvents.publish({event:"pendingIndexedTreeEmpty"})})}),C.prototype.ChgCORecentsTreeModel.getXSO().onAdd(function(t){e._applicationChannel.publish({event:"load-info-panel-chg-recents",data:{context:t}})}),C.prototype.ChgCORecentsTreeModel.getXSO().onRemove(function(t){e._applicationChannel.publish({event:"load-info-panel-chg-recents",data:{context:t}})})},createPendingIndexedView:function(e){var t=this;e.target.innerHTML="<b>"+s.CHG_GOV_Recents_Pending_Indexed_Heading+"</b>";var i={model:e.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.tileView=new a(i);var n=e.target,o=UWA.createElement("div",{id:"pendingIndexedCOEmptyTileViewDiv",class:"hideViewPendingIndexedCO"}),c=UWA.createElement("div",{id:"pendingIndexedCOPopulatedTileViewDiv",class:"hideViewPendingIndexedCO"}),d=UWA.createElement("div",{class:"pendingIndexedCOEmptyTileViewText"}),p=s.CHG_GOV_Recents_Pending_Indexed_Empty_View;d.inject(o),d.innerText=p,this.tileView.inject(c),c.inject(n),o.inject(n);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel){var i=document.getElementsByClassName("secondROChildDiv")[0];return l.showRMBMenuOnGrid(e,i,t.removeDeletedNodesUsingIDsAdaptor).then(function(e){return e})}}};this.tileView.onContextualEvent=h,this.tileView.addEventListener(r.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount){var i={};i.model=t.nodeModel.options.grid,g.navigate(u.ROUTE_CO_DETAILS,{id:i.model.id,name:i.model.name,title:i.model.title,nodeModel:i}),m.publish("load-dependency"+widget.id,"pid:"+i.model.id)}}},removeDeletedNodesUsingIDsAdaptor:function(e){var t=e;e.deletedIDs&&(t=e.deletedIDs),e.source||m.publish("Chg-Gov-Recents-PendingIndexed-DeletedIds",{source:"ChgPendingIndexedView",deletedIDs:t}),C.prototype.removeDeletedNodesUsingIDs(t)},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];C.prototype.ChgCORecentsTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==C.prototype.ChgCORecentsTreeModel.getChildren().length&&C.prototype.pendingIndexedTreeEmpty()},handleMoveUpdate:function(e){console.log("inside handleMoveUpdate");for(var t=C.prototype.ChgCORecentsTreeModel.getAllDescendants(),i=e.data.paths,n=0;n<t.length;n++)for(var a=0;a<i.length;a++)if(i[a]==t[n].options.grid.id){var o,r,s,l,c,d,u,g=t[n].options.grid.id;if(r=(o=e.data.attributes[g]).newCollabSpace,s=o.newOrganization,l=o.newOwnerFullName,(c=o.newOwnerId)&&l){d=t[n].options.grid.name+" | "+l;var p={title:t[n].options.grid.title,name:t[n].options.grid.name,severityNLS:t[n].options.grid.severityNLS,ownerFullName:l,maturityNLS:t[n].options.grid.maturityNLS};u=h.getCustomTooltip(p),t[n].options.grid.owner=c,t[n].options.grid.ownerFullName=l,t[n].updateOptions({grid:t[n].options.grid,customTooltip:u,subLabel:d})}s&&(t[n].options.grid.organization=s,t[n].updateOptions({grid:t[n].options.grid})),r&&(t[n].options.grid.collabspace=r,t[n].updateOptions({grid:t[n].options.grid}))}},handlePropertiesUpdate:function(e){console.log("inside handlePropertiesUpdate");for(var t=C.prototype.ChgCORecentsTreeModel.getAllDescendants(),i=e.objectId,n=0;n<t.length;n++){if(t[n].options.grid.id==i){var a=e.Title.value,o=e.name.value,r=e.description.value,s=e.owner.value,l=e.owner.valueDB,c=e.Severity.valueDB,d=e.Severity.value,u=t[n].options.grid.ecm_change_on_hold,g=o+" | "+s,p={};p.name=o,p.title=a,p.ecm_change_on_hold=u,p.severity=c,p.severityNLS=d,p.owner=l,p.ownerFullName=s,p.maturityNLS=t[n].options.grid.maturityNLS;var m=h.createCustomSeverity(p),v=h.getStatusBarIcons(p),f=h.statusbarIconsTooltips(p),b=h.getCustomTooltip(p);t[n].options.grid.title=a,t[n].options.grid.description=r,t[n].options.grid.ownerFullName=s,t[n].options.grid.owner=l,t[n].options.grid.severity=c,t[n].options.grid.sev=m,t[n].options.grid.severityNLS=d,t[n].updateOptions({label:e.Title.value,grid:t[n].options.grid,customTooltip:b,statusbarIcons:v,statusbarIconsTooltips:f,subLabel:g})}}},globalSubscribeForPendingIndexedView:function(){p.addObserver("ChgPendingIndexedView","ENOLC_MOVE_CMD_UPDATE",this.handleMoveUpdate),p.addObserver("ChgPendingIndexedView","CO-Properties-Update",this.handlePropertiesUpdate),p.addObserver("ChgPendingIndexedView","Chg-Gov-Recents-RecentlyOpened-DeletedIds",this.removeDeletedNodesUsingIDsAdaptor)},pendingIndexedTreeEmpty:function(){var e=document.getElementById("pendingIndexedCOEmptyTileViewDiv");e&&e.removeClassName("hideViewPendingIndexedCO");var t=document.getElementById("pendingIndexedCOPopulatedTileViewDiv");t&&t.addClassName("hideViewPendingIndexedCO")},pendingIndexedTreeNotEmpty:function(){var e=document.getElementById("pendingIndexedCOEmptyTileViewDiv");e&&e.addClassName("hideViewPendingIndexedCO");var t=document.getElementById("pendingIndexedCOPopulatedTileViewDiv");t&&t.removeClassName("hideViewPendingIndexedCO")}});return C}),define("DS/ENOChgGovernanceUX/scripts/view/facets/approvals/ChgGovApprovalsView",["DS/ENORouteMgmt/Views/RightPanelInfoView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgRouter5/scripts/ChgRouter","require","DS/ENORouteMgmt/Commands/RouteTaskView","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";var u={createApprovalsView:function(c){this.id=c.id,this.target=c.target;var d=document.getElementsByClassName("outerContainerTabDiv")[0];"undefined"!=d&&null!=d&&s.mask(d);var g=UWA.createElement("div",{id:"chg-Task-container",styles:{height:"inherit"}});let p=l.getGlobalVariable().tenant,h=l.getGlobalVariable().getSecurityContext();t.getRouteBasedOnContentId(c.id).then(function(l){var d=u.checkResponse(l.data),m=c.target;if(d){var C=i.getDependency("xChangeApp"),v=i.getDependency("applicationChannel"),f=C.infoPanel.childNodes,b={id:d.id,renderType:"container",tenant:p,securityContext:h},w=document.getElementById("viewTaskContainerExternal"),D=document.getElementById("InitiateTaskPropertiesBody"),S=document.getElementById("approvalViewDiv");null!=w&&w.remove(),null!=S&&S.remove(),null!=D&&D.remove(),a.init(b,m);let r=new e(g);widget.routeMgmtMediator.subscribe("route-task-open-click-view-mode",function(e){r.init(e,"taskActionMode");for(var t=0;t<f.length;t++){var i=f[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?(f[t].empty(),g.inject(f[t]),f[t].style.display="block"):f[t].style.display="none"}v.publish({event:"triptych-show-panel",data:"right"}),v.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-open-click-edit-mode",function(e){r.init(e,"taskEditMode"),f[1].empty(),g.inject(f[t]);for(var t=0;t<f.length;t++){var i=f[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?f[t].style.display="block":f[t].style.display="none"}v.publish({event:"triptych-show-panel",data:"right"}),v.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-close-click-view-mode",function(e){}),widget.routeMgmtMediator.subscribe("route-task-close-click-edit-mode",function(e){}),widget.routeMgmtMediator.subscribe("task-action-on-save",function(e){var i=e.model.taskActionButton,a=c.id;"Approve"!==i&&"Reject"!==i&&"Abstain"!==i||(t.getChangeOrderUserAccess(a).then(function(e){var t={id:e.data[0].id,type:e.data[0].type,accessBits:e.data[0].dataelements};o.publish("CO-AccessBit-Update",t),o.publish("idcard-header-update",t),o.publish("idcard-header-update-maturity"),n("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}),v.publish({event:"information-panel-close",data:null}))});var E=document.getElementsByClassName("outerContainerTabDiv")[0];s.unmask(E)}else{null!=(w=document.getElementById("viewTaskContainerExternal"))&&w.remove();var O=document.getElementById("tileViewDiv");null!=O&&O.remove();var y=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"}),_=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:r.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(_),_.inject(y),y.inject(m);E=document.getElementsByClassName("outerContainerTabDiv")[0];s.unmask(E)}},function(e){return Promise.reject(e)})},checkResponse:function(e){let t,i,n=function(e,t){var i=new Date(e.dataelements.modified),n=new Date(t.dataelements.modified);return i.getTime()>n.getTime()?e:t};for(var a=0;a<e.length;a++){let o=e[a];if("Started"==o.dataelements.routeStatus)return o;if("Not Started"==o.dataelements.routeStatus)return o;"Stopped"==o.dataelements.routeStatus?t=null==t?o:n(t,o):"Finished"==o.dataelements.routeStatus&&(i=null==i?o:n(i,o))}return null!=t?t:i},globalSubscribeForGovApprovalsView:function(){d.addObserver("ChgGovApprovalsView","Change-Maturity-Update",u.handleMaturityUpdate)},clearTags:function(){c._cleanBIFilterProxy()},handleMaturityUpdate:function(e){if(console.log("handle maturity"),e.id===u.id){let e={};e.id=u.id,e.target=u.target,u.createApprovalsView(e)}}};return u.globalSubscribeForGovApprovalsView(),u}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m){"use strict";let C={createImpactBasisView:function(t,a,o){var r=this;a=a[0];let s={};this.contextId=a.physicalId,(s=UWA.merge(s,a)).target=t,s.columns=i.getColumns(a.accessBits),this.ChgCRImpactBasisDataGridModel=new n(s.grid.parentCRId,s.grid.id),this.modelEvents=s.modelEvents,c.makeDroppable(s.target,r.dropHandler),this.treeDocument=s.treeDocument=this.ChgCRImpactBasisDataGridModel.createTreeDocument(),r.ChgCRImpactBasisTreeModel=s.treeDocument,r.ChgCRImpactBasisDataGridModel.registerCustomFilter(),this.subscribeToModelEvents(s.treeDocument),this.options=s;d.getImpactAnalysisFacet(s.grid.id,"impactBasis").then(i=>{r.ChgCRImpactBasisDataGridModel.loadImpactBasisData(s.treeDocument,i.data[0].impactBasis),this.chgCRIImpactBasisView=new e(s);var n=u.getDefaultFilter(s.columns);s.treeDocument.setFilterModel(n),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgCRImpactBasisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgCRImpactBasisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgCRImpactBasisTreeModel)}),0==s.treeDocument.getChildren().length?s.treeDocument._modelEvents.publish({event:"treeEmpty"}):s.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),h.unmask(t),C.changeView(),this.chgCRIImpactBasisView.chgGridView.addEventListener("postEdit",function(e,t){C.updateReasonForChangeValue(t)})})},updateReasonForChangeValue:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.id,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),d.updateImpactBasisReasonForChangeValue(i,C.contextId).then(e=>{console.log("updated on backend")})}},massUpdateHandler:function(){C.chgCRIImpactBasisView.chgGridView.showModelMassUpdateDialog();let e=C.ChgCRImpactBasisDataGridModel.treeDocument.addEventListener("modelUpdate",function(t){let i=t.parent._options.children,n=[];for(let e of i){let t={id:e.options.grid.id,reasonForChange:e.options.grid.reasonForChange};n.push(t)}d.updateImpactBasisReasonForChangeValue(n,C.contextId).then(e=>{console.log("updated on backend")}),e&&C.ChgCRImpactBasisDataGridModel.treeDocument.removeEventListener(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);C.ChgCRImpactBasisDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType,updateAction:"CONNECT"});C.ChgCRImpactBasisDataGridModel.addExistingChildren(t).then(function(e){C.modelEvents.publish({event:"update-impact-basis",data:{operation:"CONNECT",context:e.data}})},function(e){})},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),p.unsubscribe(`crImpactBasis:${widget.id}`),p.subscribe(`crImpactBasis:${widget.id}`,function(){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRImpactBasisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRImpactBasisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRImpactBasisTreeModel)})}),p.unsubscribe(`IA_ImpactBasis:${widget.id}`),p.subscribe(`IA_ImpactBasis:${widget.id}`,function(e){console.log("facetswitch....."),console.log(e),require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRImpactBasisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRImpactBasisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRImpactBasisTreeModel)})}),p.unsubscribe(`${e.options.id} of ${widget.id}`),p.subscribe(`${e.options.id} of ${widget.id}`,function(t){C.ChgCRImpactBasisDataGridModel.filterView(t,e)}),p.unsubscribe(`${e.options.id} colorize ${widget.id}`),p.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){C.ChgCRImpactBasisDataGridModel.enableColorizeView(t,e)}),p.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),p.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){C.ChgCRImpactBasisDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-basis-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-basis-object-selection-update"},function(e){C.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){let e=C.ChgCRImpactBasisDataGridModel.treeDocument.getAllDescendants(),t=C.createExcludeListForSearch(e),i=C.ChgCRImpactBasisDataGridModel.parentCRId;const n=s.activateSearch();l.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow()),d.getCRAffectedItems(i,!1).then(function(e){let i=C.createIncludeListForSearch(e).filter(e=>!t.includes(e)),o={condition:"addExistingImpactBasis",extendedQuery:C.createFinalIncludeListFrSearch(i)};s.search(a.CHG_GOV_ImpactBasis_Toolbar_AddImpactBasis,l.getGlobalVariable().proposedSearchType,C.OnSearchComplete,"impactBasis",n,void 0,void 0,o)},function(e){return Promise.reject(e)})},createIncludeListForSearch:function(e){let t=e.data,i=[];for(let e of t)i.push(e.id);return i},createExcludeListForSearch:function(e){let t=[];for(let i of e)t.push(i.options.grid.id);return t},createFinalIncludeListFrSearch:function(e){let t="(";for(let i=0;i<e.length;i++)t=t+"physicalid:"+e[i],i!=e.length-1&&(t+=" OR ");return t+=")"},OnSearchComplete:function(e){let i=[];for(var n=0;n<e.length;n++)i.push({id:e[n][0],type:e[n][2],updateAction:"CONNECT"});i.length&&(t.hideEmptyView(),C.ChgCRImpactBasisDataGridModel.addExistingChildren(i).then(function(e){C.modelEvents.publish({event:"update-impact-basis",data:{operation:"CONNECT",context:e.data}})},function(e){}))},removeHandler:function(){const e=C.treeDocument.getSelectedNodes();if(e.length>0){let i=[];for(var t=0;t<e.length;t++)i.push({id:e[t].options.grid.id,type:e[t].options.grid.type,updateAction:"DISCONNECT"});C.ChgCRImpactBasisDataGridModel.removeExistingChildren(i).then(function(e){C.modelEvents.publish({event:"update-impact-basis",data:{operation:"DISCONNECT",context:e}})},function(e){})}else o.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects);let i={ImpactAnalysis:C.ChgCRImpactBasisDataGridModel.impactAnalysisId,selectedAnalysisBasis:C.ChgCRImpactBasisDataGridModel.treeDocument.getSelectedNodes()};C.modelEvents.publish({event:"remove_AnalysisBasis_count_AI_grid",data:i})},addImpactedItemHandler:function(){const e=C.treeDocument.getSelectedNodes();if(e.length>0){let t=[];e.forEach(e=>t.push({id:e.options.grid.id,type:e.options.grid.type,updateAction:"CONNECT"}));const i=C.ChgCRImpactBasisDataGridModel.impactAnalysisId,n=C.ChgCRImpactBasisDataGridModel.parentCRId;d.updateExistingImpactItem(n,i,t).then(function(t){o.success(a.CHG_GOV_ImpactBasis_Add_ImpactedItems_Success);let i=m("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout");if(i.ChgCRImpacedItemDataGridModel&&i.ChgCRImpacedItemDataGridModel.impactAnalysisId==C.ChgCRImpactBasisDataGridModel.impactAnalysisId){let e=[];t&&(e=t.data),i.ChgCRImpacedItemDataGridModel.addNodesInLayoutModel(i.ChgCRImpacedItemDataGridModel.treeDocument,e)}C.modelEvents.publish({event:"update-impact-items",data:{operation:"CONNECT",context:e}})})}else o.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){0===e.count?(C.chgCRIImpactBasisView.toolbar.updateNodeModel("remove",{disabled:!0}),C.chgCRIImpactBasisView.toolbar.updateNodeModel("addImpactedItem",{disabled:!0}),C.chgCRIImpactBasisView.toolbar.updateNodeModel("massUpdate",{disabled:!0})):(C.chgCRIImpactBasisView.toolbar.updateNodeModel("remove",{disabled:!1}),C.chgCRIImpactBasisView.toolbar.updateNodeModel("addImpactedItem",{disabled:!1}),C.chgCRIImpactBasisView.toolbar.updateNodeModel("massUpdate",{disabled:!1}))}};return C}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView",["DS/ENORouteMgmt/Views/RightPanelInfoView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgRouter5/scripts/ChgRouter","require","DS/ENORouteMgmt/Commands/RouteTaskView","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";var u={createApprovalsView:function(c){this.id=c.id,this.target=c.target;var d=document.getElementsByClassName("outerContainerTabDiv")[0];"undefined"!=d&&null!=d&&s.mask(d);var g=UWA.createElement("div",{id:"chg-Task-container"});let p=l.getGlobalVariable().tenant,h=l.getGlobalVariable().getSecurityContext();t.getRouteBasedOnContentId(c.id).then(function(l){var d=u.checkResponse(l.data),m=c.target;if(d){var C=i.getDependency("xChangeApp"),v=i.getDependency("applicationChannel"),f=C.infoPanel.childNodes,b={id:d.id,renderType:"container",tenant:p,securityContext:h},w=document.getElementById("viewTaskContainerExternal"),D=document.getElementById("InitiateTaskPropertiesBody"),S=document.getElementById("approvalViewDiv");null!=w&&w.remove(),null!=S&&S.remove(),null!=D&&D.remove(),a.init(b,m);let r=new e(g);widget.routeMgmtMediator.subscribe("route-task-open-click-view-mode",function(e){r.init(e,"taskActionMode");for(var t=0;t<f.length;t++){var i=f[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?(f[t].empty(),g.inject(f[t]),f[t].style.display="block"):f[t].style.display="none"}v.publish({event:"triptych-show-panel",data:"right"}),v.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-open-click-edit-mode",function(e){r.init(e,"taskEditMode"),f[1].empty(),g.inject(f[1]);for(var t=0;t<f.length;t++){var i=f[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?f[t].style.display="block":f[t].style.display="none"}v.publish({event:"triptych-show-panel",data:"right"}),v.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-close-click-view-mode",function(e){}),widget.routeMgmtMediator.subscribe("route-task-close-click-edit-mode",function(e){}),widget.routeMgmtMediator.subscribe("task-action-on-save",function(e){var i=e.model.taskActionButton,a=c.id;"Approve"==i?t.getChangeRequestUserAccess(a).then(function(e){var t={id:e.data[0].id,type:e.data[0].type,accessBits:e.data[0].dataelements};o.publish("CO-AccessBit-Update",t),o.publish("idcard-header-update",t),o.publish("idcard-header-update-maturity"),v.publish({event:"information-panel-close",data:null}),n("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()}):"Reject"==i&&(v.publish({event:"information-panel-close",data:null}),o.publish("idcard-header-update-maturity"))});var E=document.getElementsByClassName("outerContainerTabDiv")[0];s.unmask(E)}else{null!=(w=document.getElementById("viewTaskContainerExternal"))&&w.remove();var O=document.getElementById("tileViewDiv");null!=O&&O.remove();var y=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"}),_=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:r.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(_),_.inject(y),y.inject(m);E=document.getElementsByClassName("outerContainerTabDiv")[0];s.unmask(E)}},function(e){return Promise.reject(e)})},checkResponse:function(e){let t,i,n=function(e,t){var i=new Date(e.dataelements.modified),n=new Date(t.dataelements.modified);return i.getTime()>n.getTime()?e:t};for(var a=0;a<e.length;a++){let o=e[a];if("Started"==o.dataelements.routeStatus)return o;if("Not Started"==o.dataelements.routeStatus)return o;"Stopped"==o.dataelements.routeStatus?t=null==t?o:n(t,o):"Finished"==o.dataelements.routeStatus&&(i=null==i?o:n(i,o))}return null!=t?t:i},clearTags:function(){c._cleanBIFilterProxy()},globalSubscribeForGovCRApprovalsView:function(){d.addObserver("ChgGovCRApprovalsView","Change-Maturity-Update",u.handleMaturityUpdate)},handleMaturityUpdate:function(e){if(console.log("handle maturity"),e.id===u.id){let e={};e.id=u.id,e.target=u.target,u.createApprovalsView(e)}}};return u.globalSubscribeForGovCRApprovalsView(),u}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/approvals/ChgCAApprovalsView",["DS/ENORouteMgmt/Views/RightPanelInfoView","DS/ENORouteMgmt/Views/Form/TaskViewUtil","DS/ENORouteMgmt/Views/Loader/ChangeTaskAssigneeChooser","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgRouter5/scripts/ChgRouter","require","DS/ENORouteMgmt/Commands/RouteTaskView","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";let h,m,C,v;var f={createApprovalsView:function(t){this.id=t.id,this.target=t.target;var i=document.getElementsByClassName("outerContainerTabDiv")[0];"undefined"!=i&&null!=i&&c.mask(i);var u=UWA.createElement("div",{id:"chg-Task-container",styles:{height:"inherit"}});let p=d.getGlobalVariable().tenant,b=d.getGlobalVariable().getSecurityContext();n.getRouteBasedOnContentId(t.id).then(function(i){var w=f.checkResponse(i.data),D=t.target;if(w){var S=a.getDependency("xChangeApp"),E=a.getDependency("applicationChannel"),O=S.infoPanel.childNodes,y={id:w.id,renderType:"container",tenant:p,securityContext:b},_=document.getElementById("viewTaskContainerExternal"),G=document.getElementById("InitiateTaskPropertiesBody"),I=document.getElementById("approvalViewDiv");null!=_&&_.remove(),null!=I&&I.remove(),null!=G&&G.remove(),r.init(y,D);let i=new e(u);widget.routeMgmtMediator.subscribe("route-task-open-click-view-mode",function(e){i.init(e,"taskActionMode");for(var t=0;t<O.length;t++){var n=O[t].className;UWA.is(n)&&"secondmainContainer-sidepanel"===n?(O[t].empty(),u.inject(O[t]),O[t].style.display="block"):O[t].style.display="none"}E.publish({event:"triptych-show-panel",data:"right"}),E.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-open-click-edit-mode",function(e){i.init(e,"taskEditMode");for(var t=0;t<O.length;t++){var n=O[t].className;UWA.is(n)&&"secondmainContainer-sidepanel"===n?(O[t].empty(),u.inject(O[t]),O[t].style.display="block"):O[t].style.display="none"}E.publish({event:"triptych-show-panel",data:"right"}),E.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-close-click-view-mode",function(e){}),widget.routeMgmtMediator.subscribe("route-task-close-click-edit-mode",function(e){}),widget.routeMgmtMediator.subscribe("task-action-on-save",function(e){var i=e.model.taskActionButton,r=t.id;if("Approve"===i||"Reject"===i||"Abstain"===i){n.getChangeActionUserAccess(r).then(function(e){var t={id:e.data[0].id,type:e.data[0].type,accessBits:e.data[0]};s.publish("CO-AccessBit-Update",t),s.publish("idcard-header-update",t),s.publish("idcard-header-update-maturity"),o("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()});let e=a.getDependency("applicationChannel");e.publish({event:"triptych-hide-panel",data:"right"}),e.publish({event:"information-panel-close",data:null})}}),widget.routeMgmtMediator.subscribe("launch-task-assignee-search",function(e){if(console.log("launch-task-assignee-search Event"),d.getGlobalVariable().isNative){h=e.taskProperties,m=e.taskGraphModel,v=e.invokeFrom,C=e.routeInfo;g.DispatchEventToWin("CHG_Search_Task_Assignee","Task_Assignee")}});var N=document.getElementsByClassName("outerContainerTabDiv")[0];c.unmask(N)}else{null!=(_=document.getElementById("viewTaskContainerExternal"))&&_.remove();var T=document.getElementById("tileViewDiv");null!=T&&T.remove();var A=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"}),V=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:l.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(V),V.inject(A),A.inject(D);N=document.getElementsByClassName("outerContainerTabDiv")[0];c.unmask(N)}},function(e){return Promise.reject(e)})},checkResponse:function(e){let t,i,n=function(e,t){var i=new Date(e.dataelements.modified),n=new Date(t.dataelements.modified);return i.getTime()>n.getTime()?e:t};for(var a=0;a<e.length;a++){let o=e[a];if("Started"==o.dataelements.routeStatus)return o;if("Not Started"==o.dataelements.routeStatus)return o;"Stopped"==o.dataelements.routeStatus?t=null==t?o:n(t,o):"Finished"==o.dataelements.routeStatus&&(i=null==i?o:n(i,o))}return null!=t?t:i},clearTags:function(){u._cleanBIFilterProxy()},globalSubscribeForGovCAApprovalsView:function(){p.addObserver("ChgCAApprovalsView","Change-Maturity-Update",f.handleMaturityUpdate)},handleMaturityUpdate:function(e){if(console.log("handle maturity"),e.id===f.id){let e={};e.id=f.id,e.target=f.target,f.createApprovalsView(e)}},OnSearchComplete:function(e){let a=e.split(","),o=[];o.push(a[0]),n.getObjectInfo(o,["name","type","identifier","label","title"]).then(function(e){let n=e[0],a=[],o={};o="Person"==n.type?{id:n.id,"ds6w:label":n.dataelements.fullname,"ds6w:identifier":n.dataelements.name,"ds6w:type_value":n.type,"ds6w:type":n.type}:{id:n.id,"ds6w:label":n.dataelements.title,"ds6w:identifier":n.dataelements.name,"ds6w:type_value":n.type,"ds6w:type":n.type},a.push(o),"form"==v?t.populateAssigneeField(h,m,C,a):"dialog"==v&&i.populateAssigneeField(h,a)})}};return f.globalSubscribeForGovCAApprovalsView(),f}),define("DS/ENOChgGovernanceUX/scripts/router/ChgGovRouterConfig",["DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,a,o){return{initialize:function(){e.initialize(t.ROUTE_HOME,t.PATH_HOME),[{name:t.ROUTE_RECENTY_OPENED,path:"/"+t.PATH_RECENTY_OPENED},{name:t.ROUTE_MY_CHANGE_ORDERS,path:"/"+t.PATH_MY_CHANGE_ORDERS},{name:t.ROUTE_MY_CHANGE_ACTIONS,path:"/"+t.PATH_MY_CHANGE_ACTIONS},{name:t.ROUTE_CO_INFO,path:"/"+t.PATH_CO_INFO},{name:t.ROUTE_CO_DETAILS,path:"/"+t.PATH_CO_DETAILS},{name:t.ROUTE_MY_CHANGE_REQUESTS,path:"/"+t.PATH_MY_CHANGE_REQUESTS},{name:t.ROUTE_CR_INFO,path:"/"+t.PATH_CR_INFO},{name:t.ROUTE_CR_DETAILS,path:"/"+t.PATH_CR_DETAILS},{name:t.ROUTE_CA_INFO,path:"/"+t.PATH_CA_INFO},{name:t.ROUTE_CA_DETAILS,path:"/"+t.PATH_CA_DETAILS},{name:t.ROUTE_CR_ORCHESTRATION_LEVEL1,path:"/"+t.PATH_CR_ORCHESTRATION_LEVEL1},{name:t.ROUTE_CR_ORCHESTRATION_LEVEL2,path:"/"+t.PATH_CR_ORCHESTRATION_LEVEL2},{name:t.ROUTE_CR_ORCHESTRATION_LEVEL3,path:"/"+t.PATH_CR_ORCHESTRATION_LEVEL3},{name:t.ROUTE_CO_ORCHESTRATION_LEVEL1,path:"/"+t.PATH_CO_ORCHESTRATION_LEVEL1},{name:t.ROUTE_CO_ORCHESTRATION_LEVEL2,path:"/"+t.PATH_CO_ORCHESTRATION_LEVEL2},{name:t.ROUTE_CO_ORCHESTRATION_LEVEL3,path:"/"+t.PATH_CO_ORCHESTRATION_LEVEL3}].forEach(function(t){e.addRoute(t)});var n={};for(var r in n[t.ROUTE_HOME]={activate:function(){if(1==o.getGlobalVariable().isNative){var i={name:t.ROUTE_MY_CHANGE_ACTIONS,params:{}};a.setRouteInfo(i);var n=e.getDependency("xChangeApp");(r=e.getDependency("applicationChannel")).publish({event:"information-panel-close",data:null}),r.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_CHANGE_ACTIONS}}),n.clearContent(),n._initChangeActionContent(),n.initializePropertyPanelwithEmptyData()}else{n=e.getDependency("xChangeApp");var r=e.getDependency("applicationChannel");i={name:t.ROUTE_RECENTY_OPENED,params:{}};a.setRouteInfo(i),r.publish({event:"welcome-panel-select-action",data:{id:t.PATH_RECENTY_OPENED}}),n._initRecentContent(),n.initializePropertyPanelwithEmptyData()}},deactivate:function(){var t=e.getDependency("xChangeApp");e.getDependency("applicationChannel");t.clearContent(),data.params.isRefresh||a.setRouteInfo({name:null})}},n[t.ROUTE_RECENTY_OPENED]={activate:function(i){var n={name:t.ROUTE_RECENTY_OPENED,params:{}};a.setRouteInfo(n);var o=e.getDependency("xChangeApp");e.getDependency("applicationChannel").publish({event:"welcome-panel-select-action",data:{id:t.PATH_RECENTY_OPENED}}),o.clearContent(),o._initRecentContent(),o.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||a.setRouteInfo({name:null})}},n[t.ROUTE_MY_CHANGE_ORDERS]={activate:function(i){applicationChannelLocal=e.getDependency("applicationChannel");var n=e.getDependency("xChangeApp");e.getDependency("applicationChannel").publish({event:"information-panel-close",data:null}),n.clearContent(),n.loadingMyChangeOrders(),n.initializePropertyPanelwithEmptyData();var o={name:t.ROUTE_MY_CHANGE_ORDERS};a.setRouteInfo(o)},deactivate:function(){e.getDependency("xChangeApp"),e.getDependency("applicationChannel")}},n[t.ROUTE_MY_CHANGE_ACTIONS]={activate:function(i){var n={name:t.ROUTE_MY_CHANGE_ACTIONS,params:{}};a.setRouteInfo(n);var o=e.getDependency("xChangeApp"),r=e.getDependency("applicationChannel");r.publish({event:"information-panel-close",data:null}),r.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_CHANGE_ACTIONS}}),o.clearContent(),o._initChangeActionContent(),o.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||a.setRouteInfo({name:null})}},n[t.ROUTE_MY_CHANGE_REQUESTS]={activate:function(i){var n={name:t.ROUTE_MY_CHANGE_REQUESTS,params:{}};a.setRouteInfo(n);var o=e.getDependency("xChangeApp"),r=e.getDependency("applicationChannel");r.publish({event:"information-panel-close",data:null}),r.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_CHANGE_REQUESTS}}),o.clearContent(),o._initChangeRequestContent(),o.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||a.setRouteInfo({name:null})}},n[t.ROUTE_CO_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),a=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_CO_INFO;var o,r=(o={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,s={linkID:t.ROUTE_CO_DETAILS,linkText:r,additionalData:o};a.publish({event:"breadcrumb-add-link",data:s})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_CO_DETAILS]={activate:function(n){var o=e.getDependency("xChangeApp"),r=e.getDependency("applicationChannel");let s={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(o.deactivateWP(n.params.isRefresh),o.clearContent(),o.showIDCard(n.params.nodeModel,n.params.mode),s.id=n.params.id,s.name=n.params.name):(s.id=n.params.nodeModel.rootNode.id,s.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];a.updatePreference(l,s);var c,d={name:t.ROUTE_CO_DETAILS};c={id:s.id,name:s.name,version:"1",modelName:s.name},d.params={changeOrderId:c.id,changeOrderName:c.name,changeOrderVersion:c.version,changeOrderName:c.modelName},a.setRouteInfo(d);var u=c.name,g={linkID:t.ROUTE_CO_DETAILS,linkText:u,additionalData:c};r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL2}),r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL1}),r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL2}),r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL1}),r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_DETAILS}),r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_INFO}),r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),r.publish({event:"breadcrumb-add-link",data:g})},deactivate:function(e){}},n[t.ROUTE_CR_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),a=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_CR_INFO;var o,r=(o={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,s={linkID:t.ROUTE_CR_DETAILS,linkText:r,additionalData:o};a.publish({event:"breadcrumb-add-link",data:s})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_CR_DETAILS]={activate:function(n){var o=e.getDependency("xChangeApp"),r=e.getDependency("applicationChannel");let s={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(o.deactivateWP(n.params.isRefresh),o.clearContent(),o.showIDCard(n.params.nodeModel,n.params.mode),s.id=n.params.id,s.name=n.params.name):(s.id=n.params.nodeModel.rootNode.id,s.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];a.updatePreference(l,s);var c,d={name:t.ROUTE_CR_DETAILS};c={id:s.id,name:s.name,version:"1",modelName:s.name},d.params={changeRequestId:c.id,changeRequestName:c.name,changeRequestVersion:c.version,changeRequestName:c.modelName},a.setRouteInfo(d);var u={linkID:t.ROUTE_CR_DETAILS,linkText:s.name,additionalData:c};r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),r.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(e){}},n[t.ROUTE_CA_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),a=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_CA_INFO;var o,r=(o={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,s={linkID:t.ROUTE_CA_DETAILS,linkText:r,additionalData:o};a.publish({event:"breadcrumb-add-link",data:s})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_CA_DETAILS]={activate:function(i){var n=e.getDependency("xChangeApp"),o=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh),n.clearContent(),n.showIDCard(i.params.nodeModel,i.params.mode);var r,s={name:t.ROUTE_CA_DETAILS};r={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},s.params={changeRequestId:r.id,changeRequestName:r.name,changeRequestVersion:r.version,changeRequestName:r.modelName},a.setRouteInfo(s);var l=r.name,c={linkID:t.ROUTE_CA_INFO,linkText:l,additionalData:r};o.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_DETAILS}),o.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_INFO}),o.publish({event:"breadcrumb-add-link",data:c})},deactivate:function(e){}},n[t.ROUTE_CR_ORCHESTRATION_LEVEL1]={activate:function(n){var o=e.getDependency("xChangeApp"),r=e.getDependency("applicationChannel");let s=n.params.nodeModel.level1Node;n.params.nodeModel.level1Node.name?s.name=n.params.nodeModel.level1Node.name:s.name=n.params.name,"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level&&(o.clearContent(),o.openIDCard(s.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL1];a.updatePreference(l,s);var c,d={name:t.ROUTE_CR_ORCHESTRATION_LEVEL1};c={id:s.id,name:s.name,version:"1",modelName:s.name},d.params={changeOrderId:c.id,changeOrderName:c.name,changeOrderVersion:c.version,changeOrderName:c.modelName},a.setRouteInfo(d);var u=c.name,g={linkID:t.ROUTE_CR_ORCHESTRATION_LEVEL1,linkText:u,additionalData:c};r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL1}),r.publish({event:"breadcrumb-add-link",data:g})},deactivate:function(i){if(i.name==t.ROUTE_CR_DETAILS){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,o={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},o.params={changeRequestId:n.id,changeRequestName:n.name,changeRequestVersion:n.version,changeRequestName:n.modelName},a.setRouteInfo(o)}}},n[t.ROUTE_CR_ORCHESTRATION_LEVEL2]={activate:function(n){var o=e.getDependency("xChangeApp"),r=e.getDependency("applicationChannel");let s=n.params.nodeModel.level2Node;n.params.nodeModel.level2Node.name?s.name=n.params.nodeModel.level2Node.name:s.name=n.params.name,o.deactivateWP(n.params.isRefresh),"level3"!=n.params.nodeModel.level&&(o.clearContent(),o.openIDCard(s.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL2];a.updatePreference(l,s);var c,d={name:t.ROUTE_CR_ORCHESTRATION_LEVEL2};c={id:s.id,name:s.name,version:"1",modelName:s.name},d.params={changeOrderId:c.id,changeOrderName:c.name,changeOrderVersion:c.version,changeOrderName:c.modelName},a.setRouteInfo(d);var u=c.name,g={linkID:t.ROUTE_CR_ORCHESTRATION_LEVEL2,linkText:u,additionalData:c};r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL2}),r.publish({event:"breadcrumb-add-link",data:g})},deactivate:function(i){if(i.name==t.ROUTE_CR_ORCHESTRATION_LEVEL1){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,o={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},o.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},a.setRouteInfo(o)}}},n[t.ROUTE_CR_ORCHESTRATION_LEVEL3]={activate:function(n){var o=e.getDependency("xChangeApp"),r=e.getDependency("applicationChannel");let s=n.params.nodeModel.level3Node;n.params.nodeModel.level3Node.name?s.name=n.params.nodeModel.level3Node.name:s.name=n.params.name,o.deactivateWP(n.params.isRefresh),o.clearContent(),o.openIDCard(s.id);let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL3];a.updatePreference(l,s);var c,d={name:t.ROUTE_CR_ORCHESTRATION_LEVEL3};c={id:s.id,name:s.name,version:"1",modelName:s.name},d.params={changeOrderId:c.id,changeOrderName:c.name,changeOrderVersion:c.version,changeOrderName:c.modelName},a.setRouteInfo(d);var u=c.name,g={linkID:t.ROUTE_CR_ORCHESTRATION_LEVEL3,linkText:u,additionalData:c};r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL3}),r.publish({event:"breadcrumb-add-link",data:g})},deactivate:function(i){if(i.name==t.ROUTE_CR_ORCHESTRATION_LEVEL2){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,o={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},o.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},a.setRouteInfo(o)}}},n[t.ROUTE_CO_ORCHESTRATION_LEVEL1]={activate:function(n){var o=e.getDependency("xChangeApp"),r=e.getDependency("applicationChannel");let s=n.params.nodeModel.level1Node;n.params.nodeModel.level1Node.name?s.name=n.params.nodeModel.level1Node.name:s.name=n.params.name,"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level&&(o.clearContent(),o.openIDCard(s.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL1];a.updatePreference(l,s);var c,d={name:t.ROUTE_CO_ORCHESTRATION_LEVEL1};c={id:s.id,name:s.name,version:"1",modelName:s.name},d.params={changeOrderId:c.id,changeOrderName:c.name,changeOrderVersion:c.version,changeOrderName:c.modelName},a.setRouteInfo(d);var u=c.name,g={linkID:t.ROUTE_CO_ORCHESTRATION_LEVEL1,linkText:u,additionalData:c};r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL1}),r.publish({event:"breadcrumb-add-link",data:g})},deactivate:function(i){if(i.name==t.ROUTE_CO_DETAILS){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,o={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},o.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},a.setRouteInfo(o)}}},n[t.ROUTE_CO_ORCHESTRATION_LEVEL2]={activate:function(n){var o=e.getDependency("xChangeApp"),r=e.getDependency("applicationChannel");let s=n.params.nodeModel.level2Node;n.params.nodeModel.level2Node.name?s.name=n.params.nodeModel.level2Node.name:s.name=n.params.name,o.deactivateWP(n.params.isRefresh),"level3"!=n.params.nodeModel.level&&(o.clearContent(),o.openIDCard(s.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL2];a.updatePreference(l,s);var c,d={name:t.ROUTE_CO_ORCHESTRATION_LEVEL2};c={id:s.id,name:s.name,version:"1",modelName:s.name},d.params={changeOrderId:c.id,changeOrderName:c.name,changeOrderVersion:c.version,changeOrderName:c.modelName},a.setRouteInfo(d);var u=c.name,g={linkID:t.ROUTE_CO_ORCHESTRATION_LEVEL2,linkText:u,additionalData:c};r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL2}),r.publish({event:"breadcrumb-add-link",data:g})},deactivate:function(i){if(i.name==t.ROUTE_CO_ORCHESTRATION_LEVEL1){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,o={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},o.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},a.setRouteInfo(o)}}},n[t.ROUTE_CO_ORCHESTRATION_LEVEL3]={activate:function(n){var o=e.getDependency("xChangeApp"),r=e.getDependency("applicationChannel");let s=n.params.nodeModel.level3Node;n.params.nodeModel.level3Node.name?s.name=n.params.nodeModel.level3Node.name:s.name=n.params.name,o.deactivateWP(n.params.isRefresh),o.clearContent(),o.openIDCard(s.id);let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL3];a.updatePreference(l,s);var c,d={name:t.ROUTE_CO_ORCHESTRATION_LEVEL3};c={id:s.id,name:s.name,version:"1",modelName:s.name},d.params={changeOrderId:c.id,changeOrderName:c.name,changeOrderVersion:c.version,changeOrderName:c.modelName},a.setRouteInfo(d);var u=c.name,g={linkID:t.ROUTE_CO_ORCHESTRATION_LEVEL3,linkText:u,additionalData:c};r.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL3}),r.publish({event:"breadcrumb-add-link",data:g})},deactivate:function(i){if(i.name==t.ROUTE_CO_ORCHESTRATION_LEVEL2){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,o={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},o.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},a.setRouteInfo(o)}}},n)n.hasOwnProperty(r)&&e.addRouteMethods(r,n[r])}}}),define("DS/ENOChgGovernanceUX/scripts/view/recents/recentlyOpened/ChgRecentlyOpenedView",["UWA/Class/View","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/model/recents/ChgCORecentsTreeModel","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Core/PointerEvents","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsContextualMenu","DS/CoreEvents/ModelEvents","DS/Controls/Button","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgInfraService","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v){"use strict";var f=e.extend({init:function(e){console.log("init ChgRecentlyOpenedView"),this._parent(e),this._modelEvents=new c,this.subscribeToModelEvents(),this.render(e)},subscribeToModelEvents:function(e){this._modelEvents.subscribe({event:"recentlyOpenedTreeEmpty"},function(e){f.prototype.recentlyOpenedTreeEmpty()}),this._modelEvents.subscribe({event:"recentlyOpenedTreeNotEmpty"},function(e){f.prototype.recentlyOpenedTreeNotEmpty()})},render:function(e){var a=this;e.treeDocument=(new n).createTreeDocument(this._modelEvents),f.prototype.ChgCORecentsTreeModel=e.treeDocument,a.createRecentlyOpenedView(e);let o=v("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").getRecents();if(null!=o&&""!=o){let v=JSON.parse(o);var r,s,l,c=[],d=[],u=[],g=[],p=[],h=[],m=[],C=[],b=[],w=[];if(v.forEach(function(e,t){var i=JSON.parse(e);"ChangeOrder"==i.type?(C.push(i),r=i.type):"ChangeRequest"==i.type?(b.push(i),s=i.type):"ChangeAction"==i.type&&(w.push(i),l=i.type)}),C.length>0){var D=[];C.forEach(function(e,t){D.push(e.id)});var S=D.join(","),E=t.getChangeOrderInfo(S,!0);c.push(E)}if(b.length>0){D=[];b.forEach(function(e,t){D.push(e.id)});S=D.join(",");var O=t.getChangeRequestInfo(S);c.push(O)}if(w.length>0){D=[];w.forEach(function(e,t){D.push(e.id)});S=D.join(",");var y=t.getChangeActionInfo(S);c.push(y)}Promise.all(c).then(function(t){if(C.length>0){var o=t[0];if(C.length>o.data.length){!0;for(var c=0;c<o.data.length;c++)d.push(JSON.stringify({id:o.data[c].id,type:r}))}o.data.length?(p=i.processChangeOrderRecentList(o,r),a._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):a._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}if(b.length>0){var v=t[1];if(0==C.length&&(v=t[0]),b.length>v.data.length){!0;for(c=0;c<v.data.length;c++)u.push(JSON.stringify({id:v.data[c].id,type:s}))}v.data.length?(h=i.processChangeOrderRecentList(v,s),a._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):a._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}if(w.length>0){var f=t[2];if(0!=C.length&&0!=b.length||(f=t[1]),0==C.length&&0==b.length&&(f=t[0]),w.length>f.data.length){!0;for(c=0;c<f.data.length;c++)g.push(JSON.stringify({id:f.data[c].id,type:l}))}f.data.length?(m=i.processChangeOrderRecentList(f,l),a._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):b.length>0&&C.length>0&&0==v.data.length&&0==o.data.length&&a._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}return(new n).loadRecentChangeOrderData(e.treeDocument,p.concat(h,m)),require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(a.ChgCORecentsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:a.ChgCORecentsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,a.ChgCORecentsTreeModel)}),t},function(e){console.log("co/cr Ids Info failure")}).then(function(e){})}else a._modelEvents.publish({event:"recentlyOpenedTreeEmpty"});f.prototype.ChgCORecentsTreeModel.getXSO().onAdd(function(t){e._applicationChannel.publish({event:"load-info-panel-chg-recents",data:{context:t}})}),f.prototype.ChgCORecentsTreeModel.getXSO().onRemove(function(t){0==t.getTreeDocument().getSelectedNodes().length?e._applicationChannel.publish({event:"recent-DataGrid-on-unselect-all",data:{model:t.options.grid,context:t,type:t.options.grid.isKindOfType,load:!1},context:t}):e._applicationChannel.publish({event:"load-info-panel-chg-recents",data:{context:t}})})},createRecentlyOpenedView:function(e){var t=this,i={model:e.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],useDragAndDrop:!0,onDragStartCell:function(e,t){C.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}};this.tileView=new a(i);var n=e.target,o=UWA.createElement("div",{id:"recentlyOpenedCOEmptyTileViewDiv",class:"hideViewRecentlyOpenedCO"}),c=UWA.createElement("div",{id:"recentlyOpenedCOPopulatedTileViewDiv",class:"hideViewRecentlyOpenedCO"}),d=UWA.createElement("div",{class:"recentlyOpenedCOEmptyTileViewText"}),p=s.CHG_GOV_Recents_Recently_Opened_Empty_View;d.inject(o),d.innerText=p,this.tileView.inject(c),c.inject(n),o.inject(n);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel){var i=document.getElementsByClassName("firstROChildDiv")[0];return l.showRMBMenuOnGrid(e,i,t.removeDeletedNodesUsingIDsAdaptor).then(function(e){return e})}}};this.tileView.onContextualEvent=h,this.tileView.addEventListener(r.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount){var i={};let e;i.model=t.nodeModel.options.grid,e="ChangeRequest"==i.model.isKindOfType?u.ROUTE_CR_DETAILS:"ChangeAction"==i.model.isKindOfType?u.ROUTE_CA_DETAILS:u.ROUTE_CO_DETAILS,g.navigate(e,{id:i.model.id,name:i.model.name,title:i.model.title,nodeModel:i}),m.publish("load-dependency"+widget.id,"pid:"+i.model.id)}}},startWithNewCOHandler:function(e,t){console.log("inside startWithNewCOHandler")},removeDeletedNodesUsingIDsAdaptor:function(e){var t=e;e.deletedIDs&&(t=e.deletedIDs),e.source||m.publish("Chg-Gov-Recents-RecentlyOpened-DeletedIds",{source:"ChgRecentlyOpenedView",deletedIDs:t}),f.prototype.removeDeletedNodesUsingIDs(t)},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];f.prototype.ChgCORecentsTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==f.prototype.ChgCORecentsTreeModel.getChildren().length&&f.prototype.recentlyOpenedTreeEmpty()},handleMoveUpdate:function(e){console.log("inside handleMoveUpdate");for(var t=f.prototype.ChgCORecentsTreeModel.getAllDescendants(),i=e.data.paths,n=0;n<t.length;n++)for(var a=0;a<i.length;a++)if(i[a]==t[n].options.grid.id){var o,r,s,l,c,d,u,g=t[n].options.grid.id;if(r=(o=e.data.attributes[g]).newCollabSpace,s=o.newOrganization,l=o.newOwnerFullName,(c=o.newOwnerId)&&l){d=t[n].options.grid.name+" | "+l;var p={title:t[n].options.grid.title,name:t[n].options.grid.name,severityNLS:t[n].options.grid.severityNLS,ownerFullName:l,maturityNLS:t[n].options.grid.maturityNLS};u=h.getCustomTooltip(p),t[n].options.grid.owner=c,t[n].options.grid.ownerFullName=l,t[n].updateOptions({grid:t[n].options.grid,customTooltip:u,subLabel:d})}s&&(t[n].options.grid.organization=s,t[n].updateOptions({grid:t[n].options.grid})),r&&(t[n].options.grid.collabspace=r,t[n].updateOptions({grid:t[n].options.grid}))}},handlePropertiesUpdate:function(e){console.log("inside handlePropertiesUpdate");for(var t=f.prototype.ChgCORecentsTreeModel.getAllDescendants(),i=e.objectId,n=0;n<t.length;n++){if(t[n].options.grid.id==i){var a=e.Title.value,o=e.name.value,r=e.description.value,s=e.owner.value,l=e.owner.valueDB,c=e.Severity.valueDB,d=e.Severity.value,u=t[n].options.grid.ecm_change_on_hold,g=o+" | "+s,p={};p.name=o,p.title=a,p.ecm_change_on_hold=u,p.severity=c,p.severityNLS=d,p.owner=l,p.ownerFullName=s,p.maturityNLS=t[n].options.grid.maturityNLS;var m=h.createCustomSeverity(p),C=h.getStatusBarIcons(p),v=h.statusbarIconsTooltips(p),b=h.getCustomTooltip(p);t[n].options.grid.title=a,t[n].options.grid.description=r,t[n].options.grid.ownerFullName=s,t[n].options.grid.owner=l,t[n].options.grid.severity=c,t[n].options.grid.sev=m,t[n].options.grid.severityNLS=d,t[n].updateOptions({label:e.Title.value,grid:t[n].options.grid,customTooltip:b,statusbarIcons:C,statusbarIconsTooltips:v,subLabel:g})}}},globalSubscribeForRecentlyOpenedView:function(){p.addObserver("ChgRecentlyOpenedView","ENOLC_MOVE_CMD_UPDATE",this.handleMoveUpdate),p.addObserver("ChgRecentlyOpenedView","CO-Properties-Update",this.handlePropertiesUpdate),p.addObserver("ChgRecentlyOpenedView","Chg-Gov-Recents-PendingIndexed-DeletedIds",this.removeDeletedNodesUsingIDsAdaptor)},recentlyOpenedTreeEmpty:function(){var e=document.getElementById("recentlyOpenedCOEmptyTileViewDiv");e&&e.removeClassName("hideViewRecentlyOpenedCO");var t=document.getElementById("recentlyOpenedCOPopulatedTileViewDiv");t&&t.addClassName("hideViewRecentlyOpenedCO")},recentlyOpenedTreeNotEmpty:function(){var e=document.getElementById("recentlyOpenedCOEmptyTileViewDiv");e&&e.addClassName("hideViewRecentlyOpenedCO");var t=document.getElementById("recentlyOpenedCOPopulatedTileViewDiv");t&&t.removeClassName("hideViewRecentlyOpenedCO")}});return f}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridContextualMenu","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.issueGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),c.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-CO-issue-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-CO-issue-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-tile-div").removeClassName("minified-header-height"))})},render:function(){try{let e=this.processColumns(),t=this,c={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:s.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCOIssueGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){o.readyDragContent(e,t)},onDragStartCell:function(e,t){o.readyDragContent(e,t)}};c=UWA.merge(c,this.options);let d={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.issueGridView=new i(c),this.issueGridView.cellSelection="none",this.tileView=new n(d),t.issueGridView.getTreeDocument().getXSO().onAdd(function(e){let i;t.issueGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+t.issueGridView.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+t.issueGridView.getTreeDocument().getSelectedNodes().length}}),e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"co-issue-object-selection-update",data:{count:i}})}),t.issueGridView.getTreeDocument().getXSO().onRemove(function(e){t.issueGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"co-issue-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})});let u={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=u;let g={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.issueGridView.getTypeRepresentationFactory().registerTypeRepresentations(g),a.toolbar=this.issueGridView.setToolbar(a.writetoolbarDefinition()),this.toolbar=a.toolbar,this.issueGridView.addEventListener("allCellsRendered",function(){t.issueGridView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+t.issueGridView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+t.issueGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),document.getElementById("outer-CO-issue-grid-div")&&document.getElementById("outer-CO-issue-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-CO-issue-grid-div",class:"outer-CO-issue-grid-div"});let p=UWA.createElement("div",{class:"toolbar-CO-issue-grid-div"});this.toolbar.inject(p);let h=UWA.createElement("div",{class:"content-CO-issue-grid-div expanded-header-height"}),m=UWA.createElement("div",{styles:{height:"100%"},class:"content-CO-issue-tile-div IssueTileView expanded-header-height"}),C=UWA.createElement("div",{class:"hideView",id:"COissueEmptyTileViewDiv"});UWA.createElement("div",{html:s.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(C),this.issueGridView.inject(h),this.tileView.inject(m),C.inject(m),this.chgGridViewContainer.addContent(p),this.chgGridViewContainer.addContent(h),this.chgGridViewContainer.addContent(m)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.issueGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridContextualMenu","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";return e.extend({init:function(e){this._parent(e);var i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),g.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").removeClassName("minified-header-height"))})},render:function(){try{var e=this.processColumns(),t={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"chgCRAffectedItemsGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return d.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){r.readyDragContent(e,t)}};t=UWA.merge(t,this.options);var l={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag","statusbarIcons"]};this.chgGridView=new n(t),this.chgGridView.cellSelection="none";let v=this.chgGridView;this._modelEvents.publish({event:"hideEmpty-datagrid",data:v}),this.tileView=new a(l);var u={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return d.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=u;this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),o.toolbar=this.chgGridView.setToolbar(o.writetoolbarDefinition(this.options)),this.toolbar=o.toolbar;var g=this;this.chgGridView.addEventListener("allCellsRendered",function(){g.chgGridView.buildStatusBar([{type:s.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+g.chgGridView.getTreeDocument().getAllDescendants().length}},{type:s.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+g.chgGridView.getTreeDocument().getSelectedNodes().length}}]),g.tileView.buildStatusBar([{type:s.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+g.tileView.getTreeDocument().getAllDescendants().length}},{type:s.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+g.tileView.getTreeDocument().getSelectedNodes().length}}])}),g.chgGridView.addEventListener(i.POINTERHIT,function(e,t){g.onItemClick(e,t)}),g.chgGridView.getTreeDocument().getXSO().onAdd(function(e){let t,i;g.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),g.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),e.getTreeDocument()?(i=e.getTreeDocument().getSelectedNodes().length,t=e):(i=g.chgGridView.getTreeDocument().getSelectedNodes().length,t=g.chgGridView),g.onSelectionChange(g._modelEvents,t,g.id,g.options.contextDetails.isKindOfType,"onAdd")}),g.chgGridView.getTreeDocument().getXSO().onRemove(function(e){g.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),g.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),g.onSelectionChange(g._modelEvents,e,g.id,g.options.contextDetails.isKindOfType,"onRemove")}),g.tileView.addEventListener(i.POINTERHIT,function(e,t){g.onItemClick(e,t)}),this.onItemClick=function(e,t){t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount&&(console.log("AffectedItem_OnItemClcik"),t.nodeModel.select(!0),g._modelEvents.publish({event:"update-property-panel-data",data:{context:t.nodeModel}}),g._modelEvents.publish({event:"AffectedItem-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel}))},this.chgGridViewContainer=UWA.createElement("div",{id:"outer-affectedItems-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-affectedItems-grid-div"});var p=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-affectedItems-grid-div"});this.toolbar.inject(p);var h=UWA.createElement("div",{class:"content-affectedItems-grid-div expanded-header-height"}),m=UWA.createElement("div",{class:"content-affectedItems-tile-div affectedItemsTileView expanded-header-height"}),C=UWA.createElement("div",{class:"hideView",id:"affectedItemsEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(C),this.chgGridView.inject(h),this.tileView.inject(m),C.inject(m),this.chgGridViewContainer.addContent(p),this.chgGridViewContainer.addContent(h),this.chgGridViewContainer.addContent(m)}catch(e){}},onSelectionChange:function(e,t,i,n,a){e.publish({event:"update-property-panel-data",data:{context:t,PhysicalID:i,type:n,action:a}}),e.publish({event:"cr-affected-item-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/util/ChgIDCardHeaderEventsUtility",["UWA/Class","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDependencyServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChangeActionUX/scripts/Models/CADependencyModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r){var s=e.singleton({init:function(){this._platformEventsSubscribed=!1,s.subscribeToEvents(),this.dependencyModel=new o,a.addObserver("ChgIDCardHeaderEventsUtility","CO-AccessBit-Update",this.handleAccessBitUpdate)},handleAccessBitUpdate:function(e){s.isChangeAction=!1,e.id==s.id&&("ChangeAction"==e.type?(s.isChangeAction=!0,s.showAttachementDataForCA(s.id),s.publishEvents(s.id),s.showApplicabilityDataForCA(s.id),s.showChangeGroupDataForCA(s.id)):s.showAttachementData(s.id),"ChangeRequest"==e.type&&(s.showRelatedScopeCR(s.id),s.showApplicabilityData(s.id)),"ChangeOrder"==e.type&&(s.showRelatedScopeCO(s.id),s.showApplicabilityData(s.id),s.showChangeRequestData(s.id),s.publishEvents(s.id)))},setId:function(e){this.id=e},getId:function(){return this.id},attachmentCount:0,isChangeAction:!1,updateAttachmentCount:function(){this.Count,this.getCount=function(){return this.Count||0},this.setCount=function(e,t){t?s.attachmentCount--:s.attachmentCount++}},publishEvents:function(e){t.publish("load-dependency"+widget.id,"pid:"+e)},subscribeToEvents:function(){this._platformEventsSubscribed||(t.subscribe("dependency:data:ready"+widget.id,function(e){if(e==s.id&&i.changeActionDependenciesLoaded){var n="No",a=r.CHG_GOV_VALUE_NO;i.changeActionDependencyModel.get("upstreamDependencyObjects").dependencyLinks.length+i.changeActionDependencyModel.get("downstreamDependencyObjects").dependencyLinks.length>0&&(n="Yes",a=r.CHG_GOV_VALUE_YES);var o={};if(o.attributes={Dependency:{valueActual:n,valueDisplay:a,showLoader:!1}},1==s.isChangeAction){let e=i.changeActionDependencyModel.get("flowdownDependencyCount")?i.changeActionDependencyModel.get("flowdownDependencyCount"):0;o.attributes.Flowdown={valueActual:e,valueDisplay:e,showLoader:!1}}t.publish("idcard-header-update",o)}}),t.subscribe("applicability:update:notification",function(e){var i=JSON.parse(e);if(i.content.id==s.id){var n="No",a=r.CHG_GOV_VALUE_NO,o="",l=i.content.applicability_DisplayValue;""!=l&&(n="Yes",a=r.CHG_GOV_VALUE_YES,o=l,{title:r.CHG_GOV_APPLICABILITY_EXPRESSION,shortHelp:l});var c={};c.attributes={Applicability:{valueActual:n,valueDisplay:a,showLoader:!1,valueTooltip:o}},t.publish("idcard-header-update",c)}}),t.subscribe("ca-IDCard-on-change-group",function(e){if(console.log(e),e.id==s.id){let n=e.group.title,a=e.group.id;var i={};i.attributes={Group:{valueActual:a,valueDisplay:n,showLoader:!1}},t.publish("idcard-header-update",i)}}),t.subscribe("co-update-attachment-complete",function(e){if(e.id==s.id){s.updateAttachmentCount();var i="0",n="0";null!=e.referentials.attached?(s.setCount(e.referentials.attached.length),i=s.attachmentCount,n=s.attachmentCount):null!=e.referentials.detached&&(s.setCount(e.referentials.detached.length,!0),0==s.attachmentCount?(i="No",n=r.CHG_GOV_VALUE_NO):(i=s.attachmentCount,n=s.attachmentCount));var a={};a.attributes={Attachments:{valueActual:i,valueDisplay:n,showLoader:!1}},t.publish("idcard-header-update",a)}}),t.subscribe("relatedScope:update",function(e){if(e.contextid==s.id){var i="No",n=r.CHG_GOV_VALUE_NO;e.length>0?(i="Yes",n=r.CHG_GOV_VALUE_YES):(i="No",n=r.CHG_GOV_VALUE_NO);var a={};a.attributes={RelatedScope:{valueActual:i,valueDisplay:n,showLoader:!1,valueTooltip:""}},t.publish("idcard-header-update",a)}}),this._platformEventsSubscribed=!0)},showApplicabilityData:function(e){var i="No",a=r.CHG_GOV_VALUE_NO,o=r.CHG_GOV_VALUE_NO;n.getApplicabilityData(e).then(function(e){if(e.applicability){var n=!1;if(""===e.applicability.xml)n=!0;else if(""!=e.applicability.xml){var s=(new DOMParser).parseFromString(e.applicability.xml,"text/xml").getElementsByTagName("Expression");if(s.length>0){for(var l=[],c=s[0].getElementsByTagName("Context"),d=0;d<c.length;d++){var u=c[d];if(u){var g=u.textContent;"false"===g&&l.push(g)}}c.length===l.length&&(n=!0)}}n||(console.log("............................"),console.log(n),i="Yes",e.applicability.display.includes("###")?(a=r.CHG_GOV_Header_Unknown,o=r.CHG_GOV_Tooltip_Unkown):(a=r.CHG_GOV_VALUE_YES,o=e.applicability.display,{title:r.CHG_GOV_APPLICABILITY_EXPRESSION,shortHelp:o}));var p={};p.attributes={Applicability:{valueActual:i,valueDisplay:a,showLoader:!1,valueTooltip:o}},t.publish("idcard-header-update",p)}},function(e){var n={};return n.attributes={Applicability:{valueActual:i,valueDisplay:r.CHG_GOV_Header_Unknown,showLoader:!1,valueTooltip:r.CHG_GOV_Tooltip_Unkown}},t.publish("idcard-header-update",n),Promise.reject(e)})},showApplicabilityDataForCA:function(e){var i="No",a=r.CHG_GOV_VALUE_NO,o=r.CHG_GOV_VALUE_NO;n.getApplicabilityDataForCA(e).then(function(e){if(e.changeaction&&e.changeaction.applicability){let h=e.changeaction.applicability;var n=!1;if(""===h.expressionXML)n=!0;else if(""!=h.expressionXML){var s=(new DOMParser).parseFromString(h.expressionXML,"text/xml").getElementsByTagName("Expression");if(s.length>0){for(var l=[],c=s[0].getElementsByTagName("Context"),d=0;d<c.length;d++){var u=c[d];if(u){var g=u.textContent;"false"===g&&l.push(g)}}c.length===l.length&&(n=!0)}}n||(i="Yes",a=r.CHG_GOV_VALUE_YES,o=h.expressionTXT,{title:r.CHG_GOV_APPLICABILITY_EXPRESSION,shortHelp:o});var p={};p.attributes={Applicability:{valueActual:i,valueDisplay:a,showLoader:!1,valueTooltip:o}},t.publish("idcard-header-update",p)}},function(e){return Promise.reject(e)})},showChangeRequestData:function(e){var i="Unassigned",a=r.CHG_GOV_VALUE_UNASSIGNED;n.getCOChangeRequestData(e).then(function(e){e.data&&e.data[0]&&e.data[0].dataelements&&e.data[0].dataelements.title&&(i=e.data[0].dataelements.title,a=e.data[0].dataelements.title);var n={};n.attributes={Governing_Change_Request:{valueActual:i,valueDisplay:a,showLoader:!1}},t.publish("idcard-header-update",n)},function(e){return Promise.reject(e)})},showAttachementDataForCA:function(e){s.showAttachementData(e,"Related Item")},showAttachementData:function(e,i){let a="No",o=r.CHG_GOV_VALUE_NO;n.getAttachementData(e,i).then(function(e){e.data&&0!=e.data.length&&(a=e.data.length,o=e.data.length,s.attachmentCount=e.data.length);var i={};i.attributes={Attachments:{valueActual:a,valueDisplay:o,showLoader:!1,displayWhenMinified:!0}},t.publish("idcard-header-update",i)},function(e){return Promise.reject(e)})},showRelatedScopeCR:function(e){let i="No",a=r.CHG_GOV_VALUE_NO;n.getCRRelatedScope(e).then(function(e){e.data&&0!=e.data.length&&(i="Yes",a=r.CHG_GOV_VALUE_YES);var n={};n.attributes={RelatedScope:{valueActual:i,valueDisplay:a,showLoader:!1,displayWhenMinified:!0}},t.publish("idcard-header-update",n)},function(e){return Promise.reject(e)})},showRelatedScopeCO:function(e){let i="No",a=r.CHG_GOV_VALUE_NO;n.getCORelatedScope(e).then(function(e){e.data&&0!=e.data.length&&(i="Yes",a=r.CHG_GOV_VALUE_YES);var n={};n.attributes={RelatedScope:{valueActual:i,valueDisplay:a,showLoader:!1,displayWhenMinified:!0}},t.publish("idcard-header-update",n)},function(e){return Promise.reject(e)})},showChangeGroupDataForCA:function(e){let i=void 0,a=r.CHG_GOV_VALUE_UNASSIGNED,o=r.CHG_GOV_VALUE_UNASSIGNED;var s={};n.getChangeGroupData(e).then(function(e){e.changeaction&&e.changeaction.group?(i=e.changeaction.group.id,a=e.changeaction.group.title,n.getChangeActionForGroup(i).then(function(e){var n=r.Group_CA_Tooltip_Info;n+="\n";for(var l=e.changeactions,c=0;c<l.length;c++){n+=l[c].title+" ("+l[c].name+")",c!=l.length-1&&(n+="\n")}o=n,s.attributes={Group:{valueActual:i,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,valueTooltip:o}},t.publish("idcard-header-update",s)},function(e){return Promise.reject(e)})):(s.attributes={Group:{valueActual:i,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,valueTooltip:o}},t.publish("idcard-header-update",s))},function(e){return Promise.reject(e)})},makePropertyViewVisible:function(e){for(var t=e.childNodes,i=0;i<t.length;i++){var n=t[i].getAttribute("name");UWA.is(n)&&"EditProp_MasterContain"===n?t[i].style.display="block":t[i].style.display="none"}}});return s}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/util/ChgCRIssueGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/issue/ChgCRIssueDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";let h={createIssueView:function(t,a,o){var r=this;let s={};this.chgCRIssueView="",(s=UWA.merge(s,a)).target=t,s.columns=i.getColumns(),this.ChgCRIssueDataGridModel=new n(s.id),this.modelEvents=s.modelEvents,r.treeDocument=s.treeDocument=r.ChgCRIssueDataGridModel.createTreeDocument(),r.ChgCRIssueTreeModel=s.treeDocument,g.makeDroppable(s.target,r.dropHandler),r.ChgCRIssueDataGridModel.registerCustomFilter(),this.subscribeToModelEvents(s.treeDocument),d.getCRIssue(a.id).then(function(t){console.log("ImpactAnalysis list: "+t);var i=u.processedChangeRequestIssueList(t,a.id);r.chgCRIssueDataGridModel=new n(a.id),r.chgCRIssueDataGridModel.loadIssueData(s.treeDocument,i),r.chgCRIssueView=new e(s);var o=u.getDefaultFilter(s.columns);s.treeDocument.setFilterModel(o),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgCRIssueTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgCRIssueTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgCRIssueTreeModel)}),0==s.treeDocument.getChildren().length?s.treeDocument._modelEvents.publish({event:"treeEmpty"}):s.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),h.changeView()},function(e){return Promise.reject(e)})},dropHandler(e){console.log("dropHandler called"+e);h.ChgCRIssueDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType,updateAction:"CONNECT"});h.ChgCRIssueDataGridModel.addExistingChildren(t)},changeView:function(e){i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),p.unsubscribe(`CR_Issue:${widget.id}`),p.subscribe(`CR_Issue:${widget.id}`,function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRIssueTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRIssueTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRIssueTreeModel)})}),p.unsubscribe(`${e.options.id} of ${widget.id}`),p.subscribe(`${e.options.id} of ${widget.id}`,function(t){h.ChgCRIssueDataGridModel.filterView(t,e)}),p.unsubscribe(`${e.options.id} colorize ${widget.id}`),p.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){h.ChgCRIssueDataGridModel.enableColorizeView(t,e)}),p.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),p.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){h.ChgCRIssueDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-issue-object-selection-update")]||this.modelEvents.subscribe({event:"cr-issue-object-selection-update"},function(e){h.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){let e=h.ChgCRIssueDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingIssue",extendedQuery:h.createExcludeListForSearch(e)};if(l.getGlobalVariable().is3DSpace){const t="wdg_"+(new Date).getTime();var i="../common/emxFullSearch.jsp?field=TYPES=Issue&txtExcludeOIDs="+e.map(e=>e.options.grid.id).toString()+"&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+t;showChooser(i,850,630);var n=function(e){if(e.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(t)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,h.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",n)}else console.log("inside EVENT")};window.addEventListener("storage",n)}else{const e=s.activateSearch("","Issue");s.search(a.CHG_GOV_Issue,"Issue",h.OnSearchComplete,"Issue",e,void 0,void 0,t)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){let i=[];for(var n=0;n<e.length;n++)i.push({id:e[n][0]});i.length&&(t.hideEmptyView(),h.ChgCRIssueDataGridModel.addExistingChildren(i))},removeHandler:function(){const e=h.treeDocument.getSelectedNodes();if(e.length>0){let n=[];for(var i=0;i<e.length;i++)n.push({id:e[i].options.grid.id});h.ChgCRIssueDataGridModel.removeExistingChildren(n).then(function(e){0==h.treeDocument.getAllDescendants().length&&t.showEmptyView()},function(e){})}else o.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){0===e.count?h.chgCRIssueView.toolbar.updateNodeModel("remove",{disabled:!0}):h.chgCRIssueView.toolbar.updateNodeModel("remove",{disabled:!1})}};return h}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssuefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgServices/scripts/services/ChgDataService","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,a,o,r,s,l){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"issue-CR-container"}))},updateFacet:function(){var e=this;o.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var n={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};i.getObjectTypeInformation(n.id).then(function(t){if("Change Request"==t){var i=e.elements.container;r.createIssueView(i,n)}o.unmask(e.elements.container)})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil"],function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout"],function(e){e.crGridView.crDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.changeView("TileView")},100)})},showEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate","DS/UIKIT/Mask","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f,b,w){"use strict";var D={createAffectedItemsView:function(t,a){var s=this;this.contextId=t.id;var l={};l=UWA.merge(l,t),g.makeDroppable(l.target,s.dropHandler),l.modelEvents=a,this.modelEvents=a,l.columns=i.getColumns(),this.ChgCRAffectedItemsDataGridModel=new n(l.id,l.contextDetails),this.treeDocument=l.treeDocument=this.ChgCRAffectedItemsDataGridModel.createTreeDocument(),this.ChgCRAffectedItemsDataGridModel.registerCustomFilter(),s.ChgCRAffectedItemsTreeModel=l.treeDocument,this.subscribeToModelEvents(l.treeDocument),this.chgCRAffectedItemsView=new e(l),b.mask(l.target);let c=this.chgCRAffectedItemsView.chgGridView;o.getCRAffectedItems(t.id,!0).then(function(e){console.log("AffectedItems list: "+e),r.processCRAffectedItems(e).then(function(e){if(s.chgCRAffectedItemsDataGridModel=new n(t.id),0==e.length){if(m.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&b.isMasked(e)&&b.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&b.isMasked(e)&&b.unmask(e)}s.modelEvents.publish({event:"showEmpty-datagrid",data:c})}s.chgCRAffectedItemsDataGridModel.loadAffectedItemsData(l.treeDocument,e);var i=r.getDefaultFilter(l.columns);l.treeDocument.setFilterModel(i),l.isSelected&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(s.ChgCRAffectedItemsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:s.ChgCRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,s.ChgCRAffectedItemsTreeModel)}),0==l.treeDocument.getChildren().length?l.treeDocument._modelEvents.publish({event:"treeEmpty"}):l.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),D.changeView()})},function(e){if(m.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&b.isMasked(e)&&b.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&b.isMasked(e)&&b.unmask(e)}return Promise.reject(e)}),this.chgCRAffectedItemsView.chgGridView.addEventListener("postEdit",function(e,t){D.updateReasonForChangeValue(t)})},dropHandler(e){D.ChgCRAffectedItemsDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType,updateAction:"CONNECT"});let n=D.treeDocument.getAllDescendants().map(e=>e.options.grid.id),a=e.map(e=>e.objectId);var o=[],r=0;for(let e=0;e<a.length;e++)for(let t=0;t<n.length;t++)a[e]==n[t]&&(o[r]=e,r++);o.length>0&&l.warn(s.CHG_GOV_NODE_PRESENT_WARN_AFFECTED_ITEM,!0);for(let e=0;e<o.length;e++)t.splice(o[e]-e,1);t.length>0&&D.ChgCRAffectedItemsDataGridModel.addExistingChildren(t)},changeView:function(e){i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){t.hideEmptyView()}),v.unsubscribe(`crAffectedItems:${widget.id}`),v.subscribe(`crAffectedItems:${widget.id}`,function(){"false"==m.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRAffectedItemsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRAffectedItemsTreeModel)})}),v.unsubscribe(`${e.options.id} of ${widget.id}`),v.subscribe(`${e.options.id} of ${widget.id}`,function(e){D.ChgCRAffectedItemsDataGridModel.filterView(e)}),v.unsubscribe(`${e.options.id} colorize ${widget.id}`),v.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){D.ChgCRAffectedItemsDataGridModel.enableColorizeView(e)}),v.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),v.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){D.ChgCRAffectedItemsDataGridModel.disableColorizeView(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("AffectedItem-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"AffectedItem-DataGrid-on-dblclick"},function(e){if(m.getGlobalVariable().is3DSpace){w("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else D.modelEvents.publish({event:"information-panel-open",data:null})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("remove_AnalysisBasis_count_AI_grid")]||this.modelEvents.subscribe({event:"remove_AnalysisBasis_count_AI_grid"},function(e){D.updateImpactAnalysisCountOnGrid(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-affected-item-object-selection-update")]||this.modelEvents.subscribe({event:"cr-affected-item-object-selection-update"},function(e){D.handleObjectSelectionUpdate(e)})},massUpdateHandler:function(){D.chgCRAffectedItemsView.chgGridView.showModelMassUpdateDialog();let e=D.ChgCRAffectedItemsDataGridModel.treeDocument.addEventListener("modelUpdate",function(t){let i=t.parent._options.children,n=[];for(let e of i){let t={id:e.options.grid.id,reasonForChange:e.options.grid.reasonForChange};null!=t.reasonForChange?n.push(t):(t.reasonForChange="",n.push(t))}n.length>0&&o.updateAIReasonForChangeValue(n,D.contextId).then(e=>{console.log("updated on backend")}),e&&D.ChgCRAffectedItemsDataGridModel.treeDocument.removeEventListener(e)})},updateReasonForChangeValue:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.id,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),o.updateAIReasonForChangeValue(i,D.contextId).then(e=>{console.log("updated on backend")})}},newImpactAnalysisHandler:function(){console.log("newImpactAnalysisHandler cr affecteditems!")},updateImpactAnalysisCountOnGrid:function(e){let t=D.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants();for(let i of e.selectedAnalysisBasis)for(let e of t)if(i.options.grid.id==e.options.grid.id){let t=e.options.grid.countImpactAnalysis-1;e.updateOptions({grid:{countImpactAnalysis:t}})}},addExistingHandler:function(){console.log("addExistingHandler cr affecteditems!");let e=D.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingAffectedItem",extendedQuery:D.createExcludeListForSearch(e)};if(m.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();var i="../common/emxFullSearch.jsp?field=TYPES="+m.getGlobalVariable().proposedSearchType+"&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e;showChooser(i,850,630);var n=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,D.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",n)}else console.log("inside EVENT")};window.addEventListener("storage",n)}else{var o=a.activateSearch();a.search(s.CHG_GOV_AffectedItems_AddExisting_Search_Header,m.getGlobalVariable().proposedSearchType,D.OnSearchComplete,"changeAffectedItems",o,void 0,void 0,t)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][0],updateAction:"CONNECT"});t.length&&D.ChgCRAffectedItemsDataGridModel.addExistingChildren(t)},OnSearchCompleteIA:function(e){console.log(e);const t=[];let i=D.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();for(let e of i)t.push(e.options.grid.id);const n=[];for(let[t]of e)n.push(t);let a=[];for(let e of n){let i={id:e,affectedItemIds:t,updateAction:"CONNECT"};a.push(i)}0!=n.length&&0!=t.length&&o.connecteIAwithAffactedItem(a).then(function(e){!0===e.success&&l.success(s.CHG_GOV_Affected_Item_Objects_Processed_Success);let t=0;for(let{id:i}of e.data)t++;let i=D.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();for(let e of i){let i=e.options.grid.countImpactAnalysis+t;e.updateOptions({grid:{countImpactAnalysis:i}})}t=0,D.modelEvents.publish({event:"update_AnalysisBasis_count_IA_grid",data:e.data})})},removeHandler:function(){if(console.log("removeHandler!"),0!=D.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes().length)if(m.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&b.mask(e)}else{let e=document.getElementById("crAffectedItems");e&&b.mask(e)}D.ChgCRAffectedItemsDataGridModel.removeChildren()},globalSubscribeForCOOrchestrationView:function(){h.addObserver("ChgCRAffectedItemsDataGridLayout","CO-AccessBit-Update",D.handleAccessBitUpdate),h.addObserver("ChgCRAffectedItemsDataGridLayout","CO-Properties-Update",D.handlePropertiesUpdateForAffectedItem)},handlePropertiesUpdateForAffectedItem:function(e){var t=D.ChgCRAffectedItemsTreeModel,i=t.getAllDescendants(),n="";if(t)for(var a=e.objectId,o=0;o<i.length;o++){i[o].options.grid.id==a&&(e&&e["PLMEntity.V_Name"]?n=e["PLMEntity.V_Name"].value:e&&e.Synopsis?n=e.Synopsis.value:e&&!e.Title?n=e.label:e&&e.Title&&(n=e.Title.value),m.getGlobalVariable().is3DSpace?i[o].options.label='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+a+"\"'>"+n+"</a>":i[o].options.label=n,i[o].options.grid.title=n,i[o].updateOptions({label:i[o].options.label,grid:{title:i[o].options.grid.title}}))}},_orchestrateImpactAnalysis:function(){let e=[],t=[],i=D.contextId,n=D.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants().length,a=D.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();for(let e of a)t.push(e.options.grid.id);let r={orchestrateItemIds:t,dispatchMethodKind:"ORGANIZATIONANDCOLLABSPACE"};e.push(r),0!=n?o.orchestrateImpactAnalysis(e,i).then(function(e){if(!0===e.success){w("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh(),l.success(s.CHG_GOV_AffectedItems_OrchestrateImpactAnalysis_Success)}}):l.error(s.CHG_GOV_AffectedItems_OrchestrateImpactAnalysis_Error)},_createImpactAnalysisInContext:function(){},addExistingImpactAnalysisInContext:function(){let e=o.getCRImpactAnalysis(D.contextId),t=D.contextId;console.log(t),e.then(function(e){var i=r.processCRImpactAnalysis(e,D.contextId);let n=[];for(const e of i)"In Work"===e.maturity&&n.push(e.id);let o={condition:"addExistingImpactAnalysis",extendedQuery:D.createFinalIncludeListFrSearch(n)};if(m.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=type_ChangeAnalysis&includeOIDprogram=enoECMChangeRequestUX:getConnectedImpactAnalysis&objectid="+t+"&table=AEFGeneralSearchResults&selection=single&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var s=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,D.OnSearchCompleteIA(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",s)}else console.log("inside EVENT")};window.addEventListener("storage",s)}var l=a.activateSearch("impact analysis","IA_ImpactAnalysis");a.search("Add Existing",m.getGlobalVariable().proposedSearchType,D.OnSearchCompleteIA,"addExistingImpactAnalysis",l,void 0,void 0,o)},function(e){return Promise.reject(e)})},moveAffactedItemToOtherCR:function(){let e={condition:"addExistingCROrchestration",extendedQuery:'AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND ( current: "Prepare" OR current: "In Work") AND (NOT physicalid:"'+D.contextId+'")'};if(m.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=type_ChangeRequest:ECM_CHANGE_ON_HOLD!=TRUE:CURRENT=policy_RequestForChange.state_Prepare,policy_RequestForChange.state_InWork&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var t=function(i){if(i.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,D.OnSearchCompleteCR(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",t)}else console.log("inside EVENT")};window.addEventListener("storage",t)}else{var i=a.activateSearch("","Change Request");a.search("Add Existing","Change Request",D.OnSearchCompleteCR,"changeOrchestration",i,void 0,void 0,e)}},OnSearchCompleteCR:function(e){let t=[],i="";console.log(e);let n=D.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();for(let e of n)t.push(e.options.grid.id);for(let[t]of e)i=t;let a=[],r={toId:i,affectedItemIds:t};a.push(r),a[0].toId==D.contextId?l.warn(s.CHG_GOV_ChangeRequest_AffectedItems_Same_CR_Warning,!0):(console.log("CHGCRAffactedItem Moce IA to CR"+a),o.moveAffactedItemToOtherCR(a,D.contextId).then(function(e){!0===e.success&&l.success(s.CHG_GOV_Affected_Item_Objects_Processed_Success);for(var t=D.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes(),i=0;i<t.length;i++)D.ChgCRAffectedItemsDataGridModel.treeDocument.removeRoot(t[i])}))},createFinalIncludeListFrSearch:function(e){let t="(";for(let i=0;i<e.length;i++)t=t+"physicalid:"+e[i],i!=e.length-1&&(t+=" OR ");return t+=")"},changeEditibility:function(e){let t=D.chgCRAffectedItemsView.options.columns;for(let i of t)if("reasonForChange"===i.dataIndex){i.editableFlag=e;break}},handleAccessBitUpdate:function(e){e.id==D.contextId&&(console.log("ChgCRAffectedItemsDataGridLayout handleAccessBitUpdate"+e),"false"==e.accessBits.ManageAffectedItem?(D.accessBit=!1,D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!1}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{visibleFlag:!1}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("create",{visibleFlag:!1}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!1}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("moveToCR",{visibleFlag:!1}),D.changeEditibility(!1)):(D.accessBit=!0,D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!0}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{visibleFlag:!0}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("create",{visibleFlag:!0}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!0}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("moveToCR",{visibleFlag:!0}),D.changeEditibility(!0)),"false"==e.accessBits.ManageChangeAnalysis?D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("create",{visibleFlag:!1}):D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("create",{visibleFlag:!0}))},handleObjectSelectionUpdate:function(e){0===e.count?(D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{disabled:!0}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{disabled:!0}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("massUpdate",{disabled:!0}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("moveToCR",{disabled:!0}),D.chgCRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="disabled"):(D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{disabled:!1}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{disabled:!1}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("massUpdate",{disabled:!1}),D.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("moveToCR",{disabled:!1}),D.chgCRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="enabled")},changeAssessmentHandler:function(){const e=D.treeDocument.getSelectedNodes();if(e&&e.length>0){let t=[];e.forEach(e=>{t.push(e.options.grid.id)});const i=widget.id+"ChgCRAffectedItemsDataGridLayout";a.launchAppInAppMode(i,t,"ENORIPE_AP")}else l.error(s.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleForMaturityUpdate:function(e){let t=JSON.parse(e),i=D.treeDocument.getSelectedNodes();if(i&&i.length){for(const e of t.Refresh.modified)e.maturity=e.policy+"."+e.state;t&&t.Refresh&&Array.isArray(t.Refresh.modified)&&r.getNLSForProcessedList("CRAffectedItems",t.Refresh.modified).then(function(){for(const e of t.Refresh.modified)for(const t of i)e.physicalid===t.options.grid.id&&t.updateOptions({grid:{maturity:e.state,maturityNLS:e.maturityNLS}})})}},globalSubscribeForAffectedItemsBasisView:function(){h.addObserver("ChgCRAffectedItemsDataGridLayout","ENORIPE-InApp-"+widget.id+"ChgCRAffectedItemsDataGridLayout/onOK",D.handleChangeAssessmentOK),h.addObserver("ChgCRAffectedItemsDataGridLayout","CO-AccessBit-Update",D.handleAccessBitUpdate),h.addObserver("ChgCRAffectedItemsDataGridLayout","CO-Properties-Update",D.handlePropertiesUpdateForAffectedItem),h.addObserver("ChgCRAffectedItemsDataGridLayout","Lifecycle.Modification",D.handleForMaturityUpdate)},handleChangeAssessmentOK:function(e){if(e.length){for(let t=0;t<e.length;t++)e[t].updateAction="CONNECT";D.ChgCRAffectedItemsDataGridModel.addExistingChildren(e)}}};return D.globalSubscribeForAffectedItemsBasisView(),D}),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/facets/members/ChgCAMembersDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";var h=e.extend({init:function(e){this.contextID=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({useAsyncPreExpand:!0});return this.setTreeDocument(e),e},loadChangeActionMembersData:function(e,t){e.prepareUpdate(),s.reviewerType.typeOfReviewer="",a.isChangeCoordinatorConnected=!1;var i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate();let n=document.getElementById("caMembers");n&&g.isMasked(n)&&g.unmask(n)},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomPersonNameField(e);e.person_name=t,e.roleList="";for(var n=0;n<e.roles.length;n++){var o=e.roles[n],r=a.getRoleNLSValue(o);e.roleList+=r,n!=e.roles.length-1&&(e.roleList+=", ")}e.roles.indexOf("approver")>=0&&(s.reviewerType.typeOfReviewer=e.type),e.roles.indexOf("coordinator")>=0&&(a.isChangeCoordinatorConnected=!0);var l="",c=[e.icon],d=e.roleList;"Person"==e.type?(l=this.getPersonImageDiv(e,!0)).addClassName("chg-member-profile-picture"):l=e.thumbnail;return new i({label:e.fullName,subLabel:"",description:d,grid:e,icons:c,thumbnail:l,contextualMenu:["Copy1","Move1"]})},createCustomPersonNameField:function(e){var t=new UWA.Element("div",{class:"members"}),i="";(i="Person"==e.type?this.getPersonImageDiv(e):this.getRouteTemplateImageDiv(e)).addClassName("assignee");var n=UWA.createElement("span",{class:"userName",html:e.fullName});return i.inject(t),n.inject(t),t.outerHTML},getPersonImageDiv:function(e,t){var i="/api/user/getpicture/login/"+e.userId+"/format/normal";i=o.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),a="";if(o.getGlobalVariable().isSwymInstalled)a=UWA.createElement("img",{class:"userIcon",src:i});else{var r=s.getAvatarDetails(e.fullName);a=UWA.createElement("div",{html:r.avatarStr}),1==t?(a.addClassName("chg-member-profile-picture"),a.addClassName("chg-team-profile-text")):a.addClassName("avatarIcon"),a.style.setProperty("background",r.avatarColor)}return a.inject(n),n},getRouteTemplateImageDiv:function(e){var t=new UWA.Element("div",{});return UWA.createElement("img",{class:"memberIcon",src:e.icon}).inject(t),t},addNodesInLayoutModel:function(e,t){var i=h.prototype.createTreeDocumentNodeModel(t);e.prepareUpdate(),e.addRoot(i),e.pushUpdate()},removeChildren:function(){var e=this,t=e.contextID,i=e.treeDocument.getSelectedNodes();if(0!=i.length){for(var n=[],o={person:[],routeTemplate:""},c={person:[],userGroup:[]},d=0;d<i.length;d++){let e=i[d].options.grid,t=e.role;if(t.indexOf("owner")>=0||t.indexOf("originator")>=0){let e=document.getElementById("caMembers");e&&g.isMasked(e)&&g.unmask(e),u.warn(r.CHG_Warn_Member_Remove_Owner_Originator)}else t.indexOf("contributor")>=0&&(n.push(e.userId),a.isChangeCoordinatorConnected=!1),t.indexOf("approver")>=0&&("Person"==e.type?o.person.push(e.userId):"Route Template"==e.type&&(o.routeTemplate=e.id)),t.indexOf("follower")>=0&&("Person"==e.type?c.person.push(e.userId):"Group"==e.type&&c.userGroup.push(e.id))}if(o.person.length>0||""!=o.routeTemplate||c.person.length>0||c.userGroup.length>0||n.length>0){var p=a.makeUpdateMemberJson("DISCONNECT",n,o,c);l.updateChangeActionMembers(t,p).then(function(t){for(var n=0;n<i.length;n++){var a=i[n].options.grid.role;a.indexOf("owner")>=0||a.indexOf("originator")>=0||e.treeDocument.removeRoot(i[n])}if(""!=o.routeTemplate)s.reviewerType.typeOfReviewer="";else if(o.person.length>0){let t=e.treeDocument.getChildren(),i=!1;for(var r=0;r<t.length;r++){if(t[r].options.grid.role.indexOf("approver")>=0){i=!0;break}}0==i&&(s.reviewerType.typeOfReviewer="")}let l=document.getElementById("caMembers");l&&g.isMasked(l)&&g.unmask(l)},function(e){let t=document.getElementById("caMembers");t&&g.isMasked(t)&&g.unmask(t)})}}}});return h}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";return e.extend({init:function(e){this._parent(e);var i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgOrchestrationGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgOrchestrationGridView.inject(this.options.target),this.chgOrchestrationGridView.setStyle("width",this.options.target.offsetWidth)),u.subscribe("idcard-header-minified",function(e){e.value?(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("minified-header-height")):(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("minified-header-height"))})},render:function(){try{var e=this.processColumns(),t=this,d={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"chgOrchestrationGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return c.showRMBMenuOnGrid(t,e,!0).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){r.readyDragContent(e,t)}};d=UWA.merge(d,this.options);var u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.chgOrchestrationGrid=new n(d),this.chgOrchestrationGrid.cellSelection="none",this.chgOrchestrationGrid.getCustomViewsManager().onCustomViewsSave=function(e,t){e.map(e=>{if(e.identifier==t){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCOList=e}}})},this.chgOrchestrationGrid.onDelayedModelDataRequest=function(e){let i=t.chgOrchestrationGrid.getCustomViewsManager().getCustomViews(),n=t.chgOrchestrationGrid.getCustomViewsManager()._currentCustomViewIdentifier;i.map(e=>{if(e.identifier==n){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCOList=e}}});var a=e.collectionView;let o=[],r=[],s=p.getGlobalVariable().customeViewCOList;if(-1!=e.endNodeIndex&&-1!=e.startNodeIndex){for(let t=e.startNodeIndex;t<=e.endNodeIndex;t++){o.push(a.model[t].options.grid.id),r.push(a.model[t]);for(let e=0;e<s.length;e++)a.model[t].setAttribute(s[e],void 0)}g.updateAsynAttributeColumn(s,o,r)}};let b=this.chgOrchestrationGrid;this._modelEvents.publish({event:"hideEmpty-datagrid",data:b}),this.tileView=new a(u);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(t,e,!0).then(function(e){return e})}};this.tileView.onContextualEvent=h;this.chgOrchestrationGrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),o.toolbar=this.chgOrchestrationGrid.setToolbar(o.writetoolbarDefinition(this.options)),this.toolbar=o.toolbar;t=this;this.chgOrchestrationGrid.addEventListener("allCellsRendered",function(){t.chgOrchestrationGrid.buildStatusBar([{type:s.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+t.chgOrchestrationGrid.getTreeDocument().getAllDescendants().length}},{type:s.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+t.chgOrchestrationGrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:s.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:s.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.chgOrchestrationGrid.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),t.chgOrchestrationGrid.getTreeDocument().getXSO().onAdd(function(e){t.chgOrchestrationGrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+t.chgOrchestrationGrid.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+t.chgOrchestrationGrid.getTreeDocument().getSelectedNodes().length}}),t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,"onAdd")}),t.chgOrchestrationGrid.getTreeDocument().getXSO().onRemove(function(e){t.chgOrchestrationGrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,"onRemove")}),t.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount){console.log("COOrchestration_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}});let e=i.nodeModel.getPath().length,n={},a={};e>1&&(n.id=i.nodeModel.getParent().options.grid.id,n.title=i.nodeModel.getParent().options.grid.title,n.name=i.nodeModel.getParent().options.grid.name),e>2&&(a.id=i.nodeModel.getParent().getParent().options.grid.id,a.title=i.nodeModel.getParent().getParent().options.grid.title,a.name=i.nodeModel.getParent().getParent().options.grid.name),t._modelEvents.publish({event:"COOrchestration-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid,pathlength:e,parentModel:n,gradParentModel:a},context:i.nodeModel})}},this.chgOrchestrationGridView=UWA.createElement("div",{id:"outer-orchestration-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-orchestration-grid-div"});var m=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-orchestration-grid-div"});this.toolbar.inject(m);var C=UWA.createElement("div",{class:"content-orchestration-grid-div expanded-header-height"}),v=UWA.createElement("div",{class:"content-orchestration-tile-div orchestrationtileView expanded-header-height"}),f=UWA.createElement("div",{class:"hideView",id:"orchestrationEmptyTileViewDiv"});UWA.createElement("div",{html:l.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(f),this.chgOrchestrationGrid.inject(C),this.tileView.inject(v),f.inject(v),this.chgOrchestrationGridView.addContent(m),this.chgOrchestrationGridView.addContent(C),this.chgOrchestrationGridView.addContent(v)}catch(e){}},onSelectionChange:function(e,t,i,n,a){e.publish({event:"update-property-panel-data",data:{context:t,PhysicalID:i,type:n,action:a}}),e.publish({event:"co-orchestration-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgOrchestrationGrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridView","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/facets/changeOrchestration/ChgOrchestrationDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationCreateChange","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationFeatureUtil","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f,b,w,D,S,E){"use strict";var O={contextId:null,treeDocument:null,accessBit:null,createChangeOrchestrationView:function(t,a){var s=this;s.contextId=t.id,s.contextDetails=t.contextDetails,s.target=t.target;var l=t.contextDetails.access,c={};c=UWA.merge(c,t),g.makeDroppable(c.target,s.dropHandler),c.modelEvents=a,this.modelEvents=a,c.columns=i.getColumns(),s.ChgOrchestrationDataGridModel=new n(c.id,c.contextDetails),b.mask(c.target),S.createCustomColumn().then(function(i){f.getGlobalVariable().customeViewCOList=[],c.columns=[...c.columns,...i],s.treeDocument=c.treeDocument=s.ChgOrchestrationDataGridModel.createTreeDocument(),s.ChgOrchestrationDataGridModel.registerCustomFilter(),s.subscribeToModelEvents(c.treeDocument),s.ChgOrchestrationTreeModel=c.treeDocument;var a=new e(c);s.orchestrationGridView=a;let d=s.orchestrationGridView.chgOrchestrationGrid._customViewsManager.getCustomViews()[0].columnsVisibleFlag;if(null!=d&&null!=d){let e=Object.keys(d);f.getGlobalVariable().customeViewCOList=e}let u=s.orchestrationGridView.chgOrchestrationGrid;D.publish("CO-AccessBit-Update",l),o.getChangeOrchestration(t.id).then(function(e){r.processedChangeOrchestrationSummaryList(e).then(function(e){if(s.chgOrchestrationDataGridModel=new n(t.id),0==e.length){if(f.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&b.isMasked(e)&&b.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&b.isMasked(e)&&b.unmask(e)}s.modelEvents.publish({event:"showEmpty-datagrid",data:u})}s.chgOrchestrationDataGridModel.loadChangeOrchestrationData(c.treeDocument,e);var i=r.getDefaultFilter(c.columns);c.treeDocument.setFilterModel(i),c.isSelected&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(s.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:s.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,s.ChgOrchestrationTreeModel)}),0==c.treeDocument.getChildren().length?c.treeDocument._modelEvents.publish({event:"treeEmpty"}):c.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),O.changeView()})},function(e){if(f.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&b.isMasked(e)&&b.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&b.isMasked(e)&&b.unmask(e)}return Promise.reject(e)})})},dropHandler(e){console.log("dropHandler called"+e);var t=O.ChgOrchestrationDataGridModel.treeDocument,i=f.getGlobalVariable().subTypes;O.draggedObj=[];for(let t of e)i.includes(t.objectType)||O.draggedObj.push(t.objectId);if(t.getSelectedNodes().length>1)l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else if(1==t.getSelectedNodes().length&&t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{var n=[];let i=[];for(var a=0;a<e.length;a++)O.draggedObj.includes(e[a].objectId)||i.push(e[a]);for(a=0;a<i.length;a++)n.push({id:i[a].objectId,type:i[a].objectType});if(0!=n.length||0!=O.draggedObj.length){var r,c,d=[{label:s.CHG_GOV_OK_Button_Label,handler:function(){if(n.length&&O.ChgOrchestrationDataGridModel.addExistingChildren(n),O.draggedObj.length){let e=[],i="",n={orchestrateItemIds:O.draggedObj,dispatchMethodKind:"ORGANIZATIONANDCOLLABSPACE"};e.push(n),i=0===t.getSelectedNodes().length?O.ChgOrchestrationDataGridModel.contextDetails.id:t.getSelectedNodes()[0].options.grid.id,o.orchestrateChangeOrder(e,i).then(function(e){!0===e.success&&(0===t.getSelectedNodes().length?E("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh():t.getSelectedNodes()[0].expand())})}p.closeDialog()},className:"primary"},{label:s.CHG_GOV_CANCEL_Button_Label,handler:function(){p.closeDialog()},className:"default"}];0===t.getSelectedNodes().length?(r=O.ChgOrchestrationDataGridModel.contextDetails.name,c=O.ChgOrchestrationDataGridModel.contextDetails.title):(r=t.getSelectedNodes()[0].options.grid.name,c=t.getSelectedNodes()[0].options.grid.title);var u=s.CHG_GOV_ChangeOrchestration_Drop_Content+c+"("+r+")<br>"+s.CHG_GOV_ChangeOrchestration_Drop_Confirmation,g={title:s.CHG_GOV_ChangeOrchestration_Drop_Info_Title,content:u,buttonArray:d};p.launchInfoDailog(g)}}},refreshLayout:function(e){var t=this.ChgOrchestrationTreeModel;(new n).updateNodeIndexed(t,e)},addNodesInLayout:function(e){O.ChgOrchestrationDataGridModel.addNodesInLayoutModel(this.ChgOrchestrationTreeModel,e,!0)},refreshGrid:function(e,t,i,n){},changeView:function(e){i.changeView("GridView")},mergeChangeAction:function(){var e=O.treeDocument.getSelectedNodes();O.treeDocument.unselectAll();const t=[];for(let i of e)t.push(i.options.grid.id);let i=[],n={changeActionIds:t};i.push(n),o.mergeChangeAction(i).then(function(t){o.getNewCADetails(t.data[0].id).then(function(t){var i=r.processChangeActionInContext(t).processData;O.addNodesInLayout(i);for(let t of e)t.updateOptions({grid:{maturityNLS:"Canceled"}})})})},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){t.hideEmptyView()}),D.unsubscribe(`${e.options.id}:${widget.id}`),D.subscribe(`${e.options.id}:${widget.id}`,function(){"false"==f.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgOrchestrationTreeModel)})}),D.unsubscribe(`${e.options.id} of ${widget.id}`),D.subscribe(`${e.options.id} of ${widget.id}`,function(t){O.chgOrchestrationDataGridModel.filterView(t,e)}),D.unsubscribe(`${e.options.id} colorize ${widget.id}`),D.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){O.chgOrchestrationDataGridModel.enableColorizeView(t,e)}),D.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),D.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){O.chgOrchestrationDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("COOrchestration-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"COOrchestration-DataGrid-on-dblclick"},function(e){if(f.getGlobalVariable().is3DSpace){E("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else if("ChangeOrder"==e.model.isKindOfType||"ChangeRequest"==e.model.isKindOfType||"ChangeAction"==e.model.isKindOfType){let t,i={level:"root"},n=!1,a=C.getRouter().getState().name;a.includes(m.ROUTE_CO_DETAILS)?a==m.ROUTE_CO_DETAILS?1==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL1,i.level1Node={id:e.model.id,title:e.model.title},i.level="level1"):2==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level1Node=e.parentModel,i.level="level2"):3==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level1Node=e.gradParentModel,i.level="level3"):n=!0:a==m.ROUTE_CO_ORCHESTRATION_LEVEL1?1==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level="level2"):2==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level="level3"):n=!0:a==m.ROUTE_CO_ORCHESTRATION_LEVEL2&&(1==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level="level3"):n=!0):a.includes(m.ROUTE_CR_DETAILS)&&(a==m.ROUTE_CR_ORCHESTRATION_LEVEL1?1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level="level2"):2==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level="level3"):n=!0:a==m.ROUTE_CR_ORCHESTRATION_LEVEL2&&(1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level="level3"):n=!0)),1!=n&&a!=m.ROUTE_CO_ORCHESTRATION_LEVEL3&&a!=m.ROUTE_CR_ORCHESTRATION_LEVEL3||(t=m.ROUTE_CO_DETAILS,i=e),C.navigate(t,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:i})}else O.modelEvents.publish({event:"information-panel-open",data:null})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("co-orchestration-object-selection-update")]||this.modelEvents.subscribe({event:"co-orchestration-object-selection-update"},function(e){O.handleObjectSelectionUpdate(e)})},createChangeActionInContext:function(){let e=O.ChgOrchestrationTreeModel;if(e.getSelectedNodes().length)if(e.getSelectedNodes().length>1||e.getSelectedNodes()[0].options.grid.isKindOfChangeAction)e.getSelectedNodes().length>1?l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let t={parentID:e.getSelectedNodes()[0].options.grid.id};c.createNewChangeActionInContext(t)}else{let e={parentID:O.contextId};c.createNewChangeActionInContext(e)}},createChangeOrderInContext:function(){let e=O.ChgOrchestrationTreeModel;if(e.getSelectedNodes().length)if(e.getSelectedNodes().length>1||e.getSelectedNodes()[0].options.grid.isKindOfChangeAction)e.getSelectedNodes().length>1?l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let t={parentID:e.getSelectedNodes()[0].options.grid.id};c.createNewChangeOrderInContext(t)}else{let e={parentID:O.contextId};c.createNewChangeOrderInContext(e)}},addExistingHandler:function(){let e={condition:"addExistingOrchestration",extendedQuery:'AND (NOT ecm_95_ca_95_has_95_governing_95_co:"TRUE") AND ( NOT ecm_95_co_95_has_95_governing_95_co:"TRUE") AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND (NOT current:"On Hold" AND NOT current:"Cancelled") NOT (physicalid:'+O.contextId+")"};var t=O.ChgOrchestrationTreeModel;if(0===t.getSelectedNodes().length||1===t.getSelectedNodes().length&&!t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)if(f.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();var i=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,O.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",i)}else console.log("inside EVENT")};window.addEventListener("storage",i),showChooser("../common/emxFullSearch.jsp?field=TYPES=Change Action,Change Order&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630)}else{var n=a.activateSearch();a.search("Add Existing","Change Action, Change Order",O.OnSearchComplete,"changeOrchestration",n,void 0,void 0,e)}else t.getSelectedNodes().length&&t.getSelectedNodes().length>1?l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed)},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][0],type:e[i][2]});t.length&&O.ChgOrchestrationDataGridModel.addExistingChildren(t)},removeHandler:function(){if(0!=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes().length)if(f.getGlobalVariable().is3DSpace){let e=document.getElementById("coOrchestrationFullViewContainer");e&&b.mask(e)}else{let e=document.getElementById("coOrchestration");e&&b.mask(e)}O.ChgOrchestrationDataGridModel.removeChildren()},deleteHandler:function(){var e=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();if(e.length){for(var t=[],i=0;i<e.length;i++){var n=e[i],a={physicalid:n.options.grid.id,nodeName:n.options.grid.name,nodeTitle:n.options.grid.title};t.push(a)}var o=document.getElementById("outer-orchestration-grid-div");u.deleteNodes(t,o,O.removeDeletedNodesUsingIDs)}},globalSubscribeForCOOrchestrationView:function(){h.addObserver("ChgOrchestrationDataGridLayout","ENOLC_MOVE_CMD_UPDATE",O.handleCOOrchestrationViewTransfer),h.addObserver("ChgOrchestrationDataGridLayout","CO-AccessBit-Update",O.handleAccessBitUpdate),h.addObserver("ChgOrchestrationDataGridLayout","CO-Properties-Update",O.handlePropertiesUpdate)},handlePropertiesUpdate:function(e){for(var t=O.ChgOrchestrationTreeModel.getAllDescendants(),n=e.objectId,a=e.type.value,o=[],r=[],s="",l=0;l<t.length;l++){if(t[l].options.grid.id==n){var c=e.name.value;t[l].options.grid.maturityNLS;if("Change Action"==a?e&&e.Synopsis&&(s=e.Synopsis.value,t[l].options.grid.title=s,f.getGlobalVariable().is3DSpace?t[l].options.label='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+n+"\"'>"+s+"</a>":t[l].options.label=s):e&&e.Title&&(s=e.Title.value,t[l].options.grid.title=s,f.getGlobalVariable().is3DSpace?t[l].options.label='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+n+"\"'>"+s+"</a>":t[l].options.label=s),e&&e.owner){var d=e.owner.value;t[l].options.grid.owner=d;var u=e.owner.value}if(e&&e.Severity){var g=e.Severity.value;t[l].options.grid.severity=g;var p=e.Severity.valueDB;t[l].options.grid.severityNLS=p}"Low"==g?o.push("level-low"):"Medium"==g?o.push("level-medium"):"High"==g&&o.push("level-high"),"true"==t[l].options.grid.onHold&&o.push("pause"),r.push(g);var h={};h.name=c,h.title=s,h.severity=g,h.severityNLS=p,h.ownerFullName=u,h.maturityNLS=t[l].options.grid.maturityNLS;var m=O.ChgOrchestrationDataGridModel.getCustomTooltip(h),C=c+" | "+u,v=e.owner.valueDB,b=i.createCustomSeverity(p,g),w=i.createCustomOwner(v,d);t[l].updateOptions({label:t[l].options.label,grid:{title:t[l].options.grid.title,owner:t[l].options.grid.owner,severity:t[l].options.grid.severity,sev:b,chgObjOwner:w},statusbarIcons:o,statusbarIconsTooltips:r,customTooltip:m,subLabel:C})}}},handleCOOrchestrationViewTransfer:function(e){var t,n,a=O.ChgOrchestrationTreeModel.getAllDescendants(),o=[];Object.keys(e.data.attributes).forEach(function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,o.push(i.id)});for(var r=0;r<o.length;r++){t=o[r];for(var s=0;s<a.length;s++){if(a[s].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName){var l=t.newOwnerId;a[s].options.grid.owner=l;var c=t.newOwnerFullName}if(t.newOrganization){var d=t.newOrganization;a[s].options.grid.orgnaizationNLS=d}if(t.newCollabSpace){var u=t.newCollabSpace;a[s].options.grid.collabspaceNLS=u}""==t.newOwnerId?(l=a[s].options.grid.owner,c=a[s].options.grid.ownerFullName,n=i.createCustomOwner(l,c)):n=i.createCustomOwner(l,c);var g=a[s].options.grid.name,p={};p.name=g,p.title=a[s].options.grid.title,p.severity=a[s].options.grid.severity,p.severityNLS=a[s].options.grid.severityNLS,p.ownerFullName=c,p.maturityNLS=a[s].options.grid.maturityNLS;var h=O.ChgOrchestrationDataGridModel.getCustomTooltip(p),m=g+" | "+c;a[s].updateOptions({label:a[s].options.grid.title,grid:{collabspaceNLS:a[s].options.grid.collabspaceNLS,organizationNLS:a[s].options.grid.organizationNLS,owner:a[s].options.grid.ownerFullName,chgObjOwner:n},customTooltip:h,subLabel:m})}}}},handleAccessBitUpdate:function(e){e.id==O.contextId&&("false"==e.accessBits.ManageGovernedChanges?(O.accessBit=!1,O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("create",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!1})):(O.accessBit=!0,O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("create",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!0})))},handleObjectSelectionUpdate:function(e){e.count>1?O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{disabled:!1}):O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{disabled:!0}),0===e.count?(O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{disabled:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{disabled:!0})):(O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{disabled:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{disabled:!1}))},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];O.ChgOrchestrationTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==O.ChgOrchestrationTreeModel.getChildren().length&&O.ChgOrchestrationTreeModel._modelEvents.publish({event:"treeEmpty"})}};return O.globalSubscribeForCOOrchestrationView(),O}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridContextualMenu","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgImpactAnalysisServices","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m){"use strict";return e.extend({init:function(e){this._parent(e);var i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),u.unsubscribe("idcard-header-minified"),u.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").removeClassName("minified-header-height"))})},render:function(){var e=this.processColumns(),t=this,d={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactAnalysisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1&&"ia_Total"!=e.cellInfos.nodeModel.options.grid.id)return l.showRMBMenuOnGrid(t,e,!0).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){r.readyDragContent(e,t)}};d=UWA.merge(d,this.options);var u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};(this.chgGridView=new n(d),this.chgGridView.cellSelection="none","true"==g.getGlobalVariable().CHG_IA_CUSTOM_VIEW)&&(this.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,t){e.map(e=>{if(e.identifier==t){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);g.getGlobalVariable().customeViewIAList=e}}})},this.chgGridView.onDelayedModelDataRequest=function(e){let i=t.chgGridView.getCustomViewsManager().getCustomViews(),n=t.chgGridView.getCustomViewsManager()._currentCustomViewIdentifier;i.map(e=>{if(e.identifier==n){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);g.getGlobalVariable().customeViewIAList=e}}});var a=e.collectionView;let o=[],r=[],s=g.getGlobalVariable().customeViewIAList;if(-1!=e.endNodeIndex&&-1!=e.startNodeIndex){for(let t=e.startNodeIndex;t<=e.endNodeIndex;t++){o.push(a.model[t].options.grid.id),r.push(a.model[t]);for(let e=0;e<s.length;e++)a.model[t].setAttribute(s[e],void 0)}h.updateAsynAttributeColumn(s,o,r)}});this.tileView=new a(u);var p={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(t,e,!0).then(function(e){return e})}};this.tileView.onContextualEvent=p;this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}});this.options.contextDetails.id;o.toolbar=this.chgGridView.setToolbar(o.writetoolbarDefinition(this.options)),this.toolbar=o.toolbar;t=this;this.chgGridView.addEventListener("allCellsRendered",function(){t.chgGridView.buildStatusBar([{type:s.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.chgGridView.getTreeDocument().getAllDescendants().length}},{type:s.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.chgGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:s.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:s.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.chgGridView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),t.chgGridView.getTreeDocument().getXSO().onAdd(function(e){t.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,"onAdd")}),t.chgGridView.getTreeDocument().getXSO().onRemove(function(e){t.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,"onRemove")}),t.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){i&&i.nodeModel&&i.nodeModel.options.grid&&"ia_Total"!=i.nodeModel.options.grid.id&&2==e.multipleHitCount&&(i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}}),t._modelEvents.publish({event:"IA-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}))},this.chgGridViewContainer=UWA.createElement("div",{id:"outer-impactAnalysis-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-impactAnalysis-grid-div"});var m=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-impactAnalysis-grid-div"});this.toolbar.inject(m);var C=UWA.createElement("div",{class:"content-impactAnalysis-grid-div expanded-header-height"}),v=UWA.createElement("div",{class:"content-impactAnalysis-tile-div affectedItemsTileView expanded-header-height"}),f=UWA.createElement("div",{class:"hideView",id:"impactAnalysisEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(f),this.chgGridView.inject(C),this.tileView.inject(v),f.inject(v),this.chgGridViewContainer.addContent(m),this.chgGridViewContainer.addContent(C),this.chgGridViewContainer.addContent(v),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)},onSelectionChange:function(e,t,i,n,a){e.publish({event:"update-property-panel-data",data:{context:t,PhysicalID:i,type:n,action:a}}),e.publish({event:"cr-impact-analysis-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeAction/ChgChangeActionDataGridModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgImpactAnalysisOnCreateCA","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f){"use strict";let b={createCAView:function(t,a){var o=this;let r={};this.ChgChangeActionView="",(r=UWA.merge(r,a)).target=t,r.columns=i.getColumns(),this.ChgChangeActionDataGridModel=new n(r.id),this.copyOption=a,this.modelEvents=r.modelEvents,this.treeDocument=r.treeDocument=this.ChgChangeActionDataGridModel.createTreeDocument(),this.subscribeToModelEvents(r.treeDocument),u.getConnectedCA(a.id).then(function(i){var s=g.processedCAList(i,a.id);o.ChgChangeActionDataGridModel=new n(a.id),o.ChgChangeActionDataGridModel.loadCAData(r.treeDocument,s),o.ChgChangeActionView=new e(r);var l=g.getDefaultFilter(r.columns);r.treeDocument.setFilterModel(l),0==r.treeDocument.getChildren().length?r.treeDocument._modelEvents.publish({event:"treeEmpty"}):r.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),b.changeView(),C.unmask(t)},function(e){return Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("IA-CA-Facet-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"IA-CA-Facet-DataGrid-on-dblclick"},function(e){if("ChangeAction"==e.model.isKindOfType){let t;t=f.ROUTE_CR_ORCHESTRATION_LEVEL1,v.navigate(t,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:{level:"level1",model:e.model,level1Node:{id:e.model.id,title:e.model.title}}})}}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-CA-object-selection-update")]||this.modelEvents.subscribe({event:"cr-CA-object-selection-update"},function(e){b.handleObjectSelectionUpdate(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("CA-Creation-Update")]||this.modelEvents.subscribe({event:"CA-Creation-Update"},function(e){b.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"Add"}})})},AddNewChangeAction:function(){b.ChgChangeActionDataGridModel;let e={parentID:b.ChgChangeActionView.id};a.createNewChangeActionInContext(e)},addNodesInLayout:function(e){b.ChgChangeActionDataGridModel.addNodesInLayoutModel(this.treeDocument,e)},removeHandler:function(){console.log("deleteHandler!");var e=b.treeDocument.getSelectedNodes();if(e.length){for(var t=[],i=0;i<e.length;i++){var n=e[i],a={physicalid:n.options.grid.id,nodeName:n.options.grid.name,nodeTitle:n.options.grid.title};t.push(a)}var o=document.getElementById("outer-CA-grid-div");p.deleteNodes(t,o,b.removeDeletedNodesUsingIDs)}},removeDeletedNodesUsingIDs:function(e){b.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"delete"}});for(var t=0;t<e.length;t++){var i=e[t];b.treeDocument.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==b.treeDocument.getChildren().length&&b.treeDocument._modelEvents.publish({event:"treeEmpty"})},handleObjectSelectionUpdate:function(e){0===e.count?b.ChgChangeActionView.toolbar.updateNodeModel("remove",{disabled:!0}):b.ChgChangeActionView.toolbar.updateNodeModel("remove",{disabled:!1})}};return b}),define("DS/ENOChgGovernanceUX/scripts/components/tab/ChgGovernanceTab",["UWA/Core","DS/CoreEvents/ModelEvents","DS/Controls/Tab","DS/Controls/Button","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/view/facets/approvals/ChgGovApprovalsView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/approvals/ChgCAApprovalsView","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";return{createGovTab:function(e,t){var n=new i({displayStyle:"strip"});n.addEventListener("tabButtonClick",function(e){this._pathChangeOrdersDetails=[r._KEY,r._VIEWS_PREFERENCES,r._CHANGE_ORDERS_DETAILS],"coOrchestration"==e.options.value?(o.updateTab(this._pathChangeOrdersDetails,"ChangeOrchestration"),d.publish(`coOrchestration:${widget.id}`,{})):"coMembers"==e.options.value?(o.updateTab(this._pathChangeOrdersDetails,"Members"),d.publish(`coMembers:${widget.id}`,{})):"coApprovals"==e.options.value?(o.updateTab(this._pathChangeOrdersDetails,"Approvals"),s.clearTags()):(o.updateTab(this._pathChangeOrdersDetails,"ChangeOrchestration"),d.publish(`coOrchestration:${widget.id}`,{}))}),n.addEventListener("tabButtonClick",function(e){this._pathChangeRequestsDetails=[r._KEY,r._VIEWS_PREFERENCES,r._CHANGE_REQUESTS_DETAILS],"crChangeOrchestration"==e.options.value?(o.updateTab(this._pathChangeRequestsDetails,"crOrchestration"),d.publish(`crOrchestration:${widget.id}`,{})):"crMembers"==e.options.value?(o.updateTab(this._pathChangeRequestsDetails,"crMembers"),d.publish(`crMembers:${widget.id}`,{})):"crAffectedItems"==e.options.value?(o.updateTab(this._pathChangeRequestsDetails,"crAffectedItems"),d.publish(`crAffectedItems:${widget.id}`,{})):"crAssessment"==e.options.value?(o.updateTab(this._pathChangeRequestsDetails,"crAssessment"),d.publish(`crImpactAnalysis:${widget.id}`,{})):"crApprovals"==e.options.value?(o.updateTab(this._pathChangeRequestsDetails,"crApprovals"),l.clearTags()):o.updateTab(this._pathChangeRequestsDetails,"crOrchestration")}),n.addEventListener("tabButtonClick",function(e){this._pathChangeActionsDetails=[r._KEY,r._VIEWS_PREFERENCES,r._CHANGE_ACTIONS_DETAILS],"caProposedChange"==e.options.value?(o.updateTab(this._pathChangeActionsDetails,"ProposedChange"),d.publish(`caProposedChanges:${widget.id}`,{})):"caRealizedChange"==e.options.value?(o.updateTab(this._pathChangeActionsDetails,"RealizedChange"),d.publish(`caRealizedChanges:${widget.id}`,{})):"caMembers"==e.options.value?o.updateTab(this._pathChangeActionsDetails,"Members"):"caApprovals"==e.options.value?(o.updateTab(this._pathChangeActionsDetails,"Approvals"),c.clearTags()):o.updateTab(this._pathChangeActionsDetails,"ProposedChange")}),t.tabs.forEach(function(e){n.add(e)}),n.inject(e)}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCATileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil"],function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout"],function(e){e.caGridView.caDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.changeView("TileView")},100)})},showEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeView","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/facets/relatedScope/ChgRelatedScopeDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";let h={createRelatedScopeView:function(t,a){var o=this;let r={};this.chgCRImpactBasisView="",(r=UWA.merge(r,a)).target=t,r.columns=i.getColumns(),this.ChgRelatedScopeDataGridModel=new n(r.id),this.modelEvents=r.modelEvents,o.treeDocument=r.treeDocument=o.ChgRelatedScopeDataGridModel.createTreeDocument(),o.ChgRelatedScopeTreeModel=r.treeDocument,o.ChgRelatedScopeDataGridModel.registerCustomFilter(),g.makeDroppable(r.target,o.dropHandler),this.subscribeToModelEvents(r.treeDocument),d.getCORelatedScope(a.id).then(function(t){var i=u.processedChangeRequestRelatedScope(t,a.id);o.chgRelatedScopeDataGridModel=new n(a.id),o.chgRelatedScopeDataGridModel.loadRelatedScopeData(r.treeDocument,i),o.chgCORelatedScopeView=new e(r),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(o.ChgRelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:o.ChgRelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,o.ChgRelatedScopeTreeModel)}),0==r.treeDocument.getChildren().length?r.treeDocument._modelEvents.publish({event:"treeEmpty"}):r.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),h.updateViewBasedOnAccessBit(),h.changeView()},function(e){return Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);h.ChgRelatedScopeDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType,updateAction:"CONNECT"});h.ChgRelatedScopeDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),p.unsubscribe(`CO_RelatedScope:${widget.id}`),p.subscribe(`CO_RelatedScope:${widget.id}`,function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgRelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgRelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgRelatedScopeTreeModel)})}),p.unsubscribe(`${e.options.id} of ${widget.id}`),p.subscribe(`${e.options.id} of ${widget.id}`,function(t){h.ChgRelatedScopeDataGridModel.filterView(t,e)}),p.unsubscribe(`${e.options.id} colorize ${widget.id}`),p.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){h.ChgRelatedScopeDataGridModel.enableColorizeView(t,e)}),p.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),p.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){h.ChgRelatedScopeDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("co-related-scope-object-selection-update")]||this.modelEvents.subscribe({event:"co-related-scope-object-selection-update"},function(e){h.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){let e=h.ChgRelatedScopeDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingRelatedScope",extendedQuery:h.createExcludeListForSearch(e)},i="Program,Project Space,Model,Products,VPMReference,RFLVPMLogicalReference";if(l.getGlobalVariable().is3DSpace){const t="wdg_"+(new Date).getTime();var n="../common/emxFullSearch.jsp?field=TYPES="+i+"&txtExcludeOIDs="+e.map(e=>e.options.grid.id).toString()+"&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+t;showChooser(n,850,630);var o=function(e){if(e.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(t)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,h.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",o)}else console.log("inside EVENT")};window.addEventListener("storage",o)}else{const e=s.activateSearch();s.search(a.CHG_GOV_RelatedScope,i,h.OnSearchComplete,"relatedScope",e,void 0,void 0,t)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){let i=[];for(var n=0;n<e.length;n++)i.push({id:e[n][0],type:e[n][2],updateAction:"CONNECT"});i.length&&(t.hideEmptyView(),h.ChgRelatedScopeDataGridModel.addExistingChildren(i))},removeHandler:function(){const e=h.treeDocument.getSelectedNodes();if(e.length>0){let n=[];for(var i=0;i<e.length;i++)n.push({id:e[i].options.grid.id,type:e[i].options.grid.type,updateAction:"DISCONNECT"});h.ChgRelatedScopeDataGridModel.removeExistingChildren(n).then(function(e){0==h.treeDocument.getAllDescendants().length&&t.showEmptyView()},function(e){})}else o.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},globalSubscribeForCORelatedScopeView:function(){r.addObserver("ChgCOrelatedScopeDataGridLayout","CO-AccessBit-Update",h.handleAccessBitUpdate)},handleAccessBitUpdate:function(e){"false"==e.accessBits.ManageReportedAgainst?(h.accessBit=!1,h.updateViewBasedOnAccessBit()):(h.accessBit=!0,h.updateViewBasedOnAccessBit())},updateViewBasedOnAccessBit:function(){0==h.accessBit?(h.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!1}),h.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1})):(h.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!0}),h.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}))},handleObjectSelectionUpdate:function(e){0===e.count?h.chgCORelatedScopeView.toolbar.updateNodeModel("remove",{disabled:!0}):h.chgCORelatedScopeView.toolbar.updateNodeModel("remove",{disabled:!1})}};return h.globalSubscribeForCORelatedScopeView(),h}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataService","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"relatedScope-container"}))},updateFacet:function(){var e=this;a.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var i={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};r.getObjectTypeInformation(i.id).then(function(t){if("Change Order"==t)if(o.accessBit){var n=e.elements.container;o.createRelatedScopeView(n,i),a.unmask(e.elements.container)}else r.getChangeOrderUserAccess(i.id).then(function(t){var n=t.data[0].dataelements;n=c.processAccessBitCO(n),o.accessBit="true"==n.ManageReportedAgainst;var r=e.elements.container;o.createRelatedScopeView(r,i),a.unmask(e.elements.container)})})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Class/Events","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e,t,i,n,a,o,r,s,l){"use strict";var c={create:function(e,t){var i=this;i.id=e.id;for(var n=r.getGlobalVariable(),a=n.referentialsSearchForbiddenType.split(","),o=(n.referentialsSearchType.split(","),n.tenantMappings),s=[],l=0;l<o.length;l++)n.tenant==o[l].platformId&&(s=o[l]);var c={parentObject:{parentId:e.id},connectorOptions:{fetchSecurityContext:function(){return n.getSecurityContext()},platformUrls:s},supportedTypes:{excludedTypes:a,includedTypes:["*"]}};"Change Action"==e.parentType&&(c.parentObject.relationName="Related Item"),c.readonly=t,require(["DS/ENOXAttachmentsUX/AttachmentsPane"],function(t){i.attachmentsPane=new t(c),i.modelEvents=i.attachmentsPane.modelEvents,i.subscribeToEvents(),i.attachmentsPane.inject(e.target)})},subscribeToEvents:function(){var e=this;e.modelEvents.subscribe({event:"attach-attachment-complete"},function(t){console.log("attached.....!");var i=t.document.dataelements;i.id=t.document.id;var n={attached:[]};n.attached.push(i);t={id:e.id,referentials:n,operation:"CONNECT"};o.publish("co-update-attachment-complete",t)}),e.modelEvents.subscribe({event:"upload-attachment-complete"},function(t){console.log("uploaded.....!");var i={};let n=t.parentObject.parentId;e.id=n,i.attached=[];for(var a=0;a<t.documents.length;a++){var r=t.documents[a].dataelements;r.id=t.documents[a].id,i.attached.push(r)}t={id:e.id,referentials:i,operation:"CONNECT"};o.publish("co-update-attachment-complete",t)}),e.modelEvents.subscribe({event:"detach-attachment-complete"},function(t){console.log("detached.....!");var i=t.id,n={detached:[]};n.detached.push(i);t={id:e.id,referentials:n,operation:"DISCONNECT"};o.publish("co-update-attachment-complete",t)}),r.getGlobalVariable().is3DSpace&&e.modelEvents.subscribe({event:"context-menu-requested"},function(t){if(console.log("context-menu-requested.....!"),t.contextMenu.getItem("Relations")){t.contextMenu.removeItem("Relations");var i={type:"PushItem",title:"Relations",text:"Relations",id:"Relations",fonticon:"object-related",handler:function(t){var i=e.attachmentsPane.getSelection();l.openRelationalExplorer(i)}};t.contextMenu.addItem(i)}}),r.getGlobalVariable().is3DSpace&&e.modelEvents.subscribe({event:"user-clicks-attach"},function(t){const i="wdg_"+(new Date).getTime();var n="../common/emxFullSearch.jsp?field=TYPES!="+r.getGlobalVariable().referentialsSearchForbiddenType+"&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+i;showChooser(n,850,630);var a=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(i)>-1){let t=JSON.parse(localStorage.searchedObjectDetails);delete t.uniqueKey;let i=[];Object.values(t).forEach(e=>{i.push(e[0])}),e.attachmentsPane.attachAttachments(i),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",a)}else console.log("inside EVENT")};window.addEventListener("storage",a)}),r.getGlobalVariable().isNative&&(e.modelEvents.subscribe({event:"user-clicks-attach"},function(e){s.DispatchEventToWin("CHG_Add_Attachment","Attachment")}),e.modelEvents.subscribe({event:"context-menu-requested"},function(e){var t=e.data[0].id;c.contextMenu=e.contextMenu,s.DispatchEventToWin("Referential_ContextMenu",t)}))},OnSearchComplete:function(e){for(var t=e.split(","),i=[],n=0;n<t.length;n++)i.push(t[n]);c.attachmentsPane.attachAttachments(i)},DisplayContextMenu:function(e){console.log("ChgAttachmentView: DisplayContextMenu.....!");for(var t=0;t<e.length;t++)c.contextMenu.addItem(e[t])}};return c}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("impactedItemEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("impactedItemEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAttributeSubscriber",["DS/LifecycleCmd/MaturityCmd","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_ChangeOwnerCmd","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_TransferOwnershipCmd","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_ChangeCSCmd","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChangeActionUX/scripts/Views/CADependenciesGridView","UWA/Core","DS/ENOChgGovernanceUX/scripts/components/applicabilityView/ChgApplicabilityView","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView","DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionCreateGroup","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgNativeInitService","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C){var v={init:function(e){this._maturityInEdit=!1,this._modelForIdCard=e,this._subscribeToPlatformEvents(),this._subscribeToModelEvents(),this.attachmentView=u},_subscribeToPlatformEvents:function(){var e=this;v.platformEventsSubscribed||(o.subscribe("ENOLC_MOVE_CMD_UPDATE",function(t){console.log("new transfer data"+t);var i,n,a,r,s,l=t.data.paths,c=e._modelForIdCard.id;l.indexOf(c)>-1&&(i=t.data.attributes[c],n=i.newCollabSpace,a=i.newOrganization,r=i.newOwnerFullName,s=i.newOwnerId);var d={};let u={};d.attributes={},s&&r&&(d.attributes.owner={valueActual:s,valueDisplay:r}),a&&(d.attributes.orgnaization={valueActual:a,valueDisplay:a},u["ds6w:organizationResponsible"]=[a]),n&&(d.attributes.collabSpace={valueActual:n,valueDisplay:n},u["ds6w:project"]=[n]);var g,m=[];if("ChangeOrder"==e._modelForIdCard.get("isKindOfType")?g=p.getChangeOrderUserAccess(c):"ChangeRequest"==e._modelForIdCard.get("isKindOfType")?g=p.getChangeRequestUserAccess(c):"ChangeAction"==e._modelForIdCard.get("isKindOfType")&&(g=p.getChangeActionUserAccess(c)),m.push(g),n||a){var C=h.getNLSValuesPromise(u);m.push(C)}Promise.all(m).then(function(t){var i={id:t[0].data[0].id,type:t[0].data[0].type,accessBits:t[0].data[0].dataelements};if(n){let e=t[1]["ds6w:project"][n];d.attributes.collabSpace.valueDisplay=e}if(a){let e=t[1]["ds6w:organizationResponsible"][a];d.attributes.orgnaization.valueDisplay=e}o.publish("CO-AccessBit-Update",i),d=UWA.merge(d,i),e.modelEvents.publish({event:"idcard-header-update",data:d})})}),o.subscribe("CO-Properties-Update",function(t){if(e._modelForIdCard.id===t.objectId){var i={};let n=e._modelForIdCard.get("isKindOfType");i.id=e._modelForIdCard.id,i.attributes={},t.owner.valueDB!=e._modelForIdCard.get("owner")&&(i.attributes.owner={valueActual:t.owner.valueDB,valueDisplay:t.owner.value}),"ChangeAction"==n?t.Synopsis.value!=e._modelForIdCard.get("title")&&(i.title=t.Synopsis.value):t.Title.value!=e._modelForIdCard.get("title")&&(i.title=t.Title.value),t.description.value!=e._modelForIdCard.get("freezones")[0]&&(i.freezones=[t.description.value]),e.modelEvents.publish({event:"idcard-header-update",data:i})}})),v.platformEventsSubscribed=!0},_subscribeToModelEvents:function(){var e=this;e.modelEvents=e._modelForIdCard.get("modelEvents");var t=d.getDependency("xChangeApp");e.modelEvents.subscribe({event:"idcard-attributes-clicked"},function(i){if(console.log("idcard-attributes-clicked: modelEvents"),UWA.is(i.index,"number")){var n=e._modelForIdCard.get("attributes"),a=n[i.index].command;if(void 0!==n[i.index].editable&&n[i.index].editable)switch(a){case"owner":e.handleChangeOwner(e._modelForIdCard);break;case"collabSpace":e.handleChangeCollabSpace(e._modelForIdCard);break;case"orgnaization":e.handleChangeOrganization(e._modelForIdCard);break;case"maturity":break;case"Applicability":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"Applicability"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"Dependency":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"Dependency"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"Attachments":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"Attachment"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"RelatedScope":let r={context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType")};"ChangeRequest"==e._modelForIdCard.get("isKindOfType")?r.facetSelect="CR_RelatedScope":r.facetSelect="CO_RelatedScope",t._applicationChannel.publish({event:"update-property-panel-contextdata",data:r}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"Flowdown":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"CA_Flowdown"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"Group":e.handleGroupCreate(e._modelForIdCard);break;default:var o={};o.id=e._modelForIdCard.id,n[i.index].callback(o)}}}),e.modelEvents.subscribe({event:"maturity-updated"},function(t){console.log("maturity-updated: modelEvents"+t);var i=e._modelForIdCard.id;if("Change Order"==e._modelForIdCard.get("type"))p.getChangeOrderUserAccess(i).then(function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0].dataelements};o.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update",data:i}),C("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()});else if("Change Request"==e._modelForIdCard.get("type"))p.getChangeRequestUserAccess(i).then(function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0].dataelements};o.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update",data:i}),C("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()});else if("Change Action"==e._modelForIdCard.get("type")){p.getChangeActionUserAccess(i).then(function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0]};o.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update",data:i}),C("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()});var n=t.valueActual;if(c.getGlobalVariable().isNative){n&&""!=n&&["Approved","Complete","Prepare","Cancelled","In Approval"].indexOf(n)>0&&m.takeOffFromWorkUnder()}}})},handleChangeOwner:function(e){var t=this.getTransferObject(e);new i({context:t,ID:"ActionBar_ChangeOwner"}).begin()},handleChangeCollabSpace:function(e){var i=this.getTransferObject(e);new t({context:i,ID:"ActionBar_ChangeCS"}).begin()},handleChangeOrganization:function(e){var i=this.getTransferObject(e);new t({context:i,ID:"ActionBar_ChangeOrg"}).begin()},handleGroupCreate:function(e){console.log("Usr group clicked...!");let t={facetName:"createGroupFromIdCard",model:e};g.createGroup(t)},handleChangeMaturity:function(t){var i=this.getTransferObject(t);new e({context:i,ID:"MaturityHeader"}).executeAsync({physicalid:t.id}).then(function(){console.log("Maturity Updated!!!")},function(){console.log("Maturity Update failed!!!")})},getTransferObject:function(e){var t={_selectedItems:[],getSelectedNodes:function(){return this._selectedItems},addSelection:function(e,t){this._selectedItems=[];var i=this;UWA.is(e,"array")?e.forEach(function(e){i._selectedItems.push(e)}):i._selectedItems.push(e)},getReference:function(e){return getID()},getParent:function(e){return e.getParent()},getType:function(e){return getType()},getName:function(e){return getLabel()}},i=UWA.extend(e,{getID:function(){return e.get("id")},getLabel:function(){return e.get("name")},getOwner:function(){return e.get("owner")},getType:function(){return e.get("type")},getDisplayName:function(){return e.get("name")},object:{revision:e.get("version")}});return t.addSelection(i),t},handleChangedependency:function(e){var t=d.getDependency("xChangeApp"),i=d.getDependency("applicationChannel"),n=t.infoPanel,o=new UWA.Element("div",{id:"dependency-mainContainer"}),s=UWA.createElement("div",{id:"co-dependency"}),l=new UWA.Element("div",{class:"dependency-header",title:a.CHG_GOV_CO_DEPENDENCY_VIEW});UWA.createElement("h5",{text:a.CHG_GOV_CO_DEPENDENCY_VIEW}).inject(l),l.inject(o),s.inject(o);var c={facetName:"dependency",PhysicalID:this._modelForIdCard.id,model:e}.PhysicalID;c="pid:"+c;var u={};u.id=c,u.widgetId=widget.id,u.widgetTitle=widget.title,u.showFlowdown=!1;var g=new r(u);g.container=s,this.facetView=g;for(var p=n.childNodes,h=0;h<p.length;h++){var m=p[h].className;UWA.is(m)&&"secondmainContainer-sidepanel"===m?p[h].style.display="block":p[h].style.display="none"}g.render(),p[1].empty(),o.inject(p[1]),i.publish({event:"triptych-show-panel",data:"right"}),i.publish({event:"information-panel-visible",data:null})},handleChangeApplicability:function(e){var t=d.getDependency("xChangeApp"),i=d.getDependency("applicationChannel"),n=t.infoPanel;new l({model:e,container:n}).build(),i.publish({event:"triptych-show-panel",data:"right"}),i.publish({event:"information-panel-visible",data:null})},handleChangeAttachments:function(e){var t=d.getDependency("xChangeApp"),i=d.getDependency("applicationChannel"),n=t.infoPanel.childNodes,o=new UWA.Element("div",{id:"attachment-mainContainer"}),r=new UWA.Element("div",{class:"attachment-header",title:a.CHG_GOV_Header_Attachments});UWA.createElement("h5",{text:a.CHG_GOV_Header_Attachments}).inject(r),r.inject(o);for(var s=0;s<n.length;s++){var l=n[s].className;UWA.is(l)&&"secondmainContainer-sidepanel"===l?n[s].style.display="block":n[s].style.display="none"}var c={id:this._modelForIdCard.id,target:o};this.attachmentView.create(c);n[1].empty(),o.inject(n[1]),i.publish({event:"triptych-show-panel",data:"right"}),i.publish({event:"information-panel-visible",data:null})}};return v}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";return e.extend({init:function(e){this._parent(e);var i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgOrchestrationGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgOrchestrationGridView.inject(this.options.target),this.chgOrchestrationGridView.setStyle("width",this.options.target.offsetWidth)),u.subscribe("idcard-header-minified",function(e){e.value?(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("minified-header-height")):(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("minified-header-height"))})},render:function(){try{var e=this.processColumns(),t=this,d={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"chgCROrchestrationGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(t,e,t.options.target).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){r.readyDragContent(e,t)}};d=UWA.merge(d,this.options);var u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.chgOrchestrationGrid=new n(d),this.chgOrchestrationGrid.cellSelection="none",this.chgOrchestrationGrid.getCustomViewsManager().onCustomViewsSave=function(e,t){e.map(e=>{if(e.identifier==t){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCOList=e}}})},this.chgOrchestrationGrid.onDelayedModelDataRequest=function(e){let i=t.chgOrchestrationGrid.getCustomViewsManager().getCustomViews(),n=t.chgOrchestrationGrid.getCustomViewsManager()._currentCustomViewIdentifier;i.map(e=>{if(e.identifier==n){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCOList=e}}});var a=e.collectionView;let o=[],r=[],s=p.getGlobalVariable().customeViewCOList;if(-1!=e.endNodeIndex&&-1!=e.startNodeIndex){for(let t=e.startNodeIndex;t<=e.endNodeIndex;t++){o.push(a.model[t].options.grid.id),r.push(a.model[t]);for(let e=0;e<s.length;e++)a.model[t].setAttribute(s[e],void 0)}g.updateAsynAttributeColumn(s,o,r)}};let b=this.chgOrchestrationGrid;this._modelEvents.publish({event:"hideEmpty-datagrid",data:b}),this.tileView=new a(u);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(t,e,!0).then(function(e){return e})}};this.tileView.onContextualEvent=h;this.chgOrchestrationGrid.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),o.toolbar=this.chgOrchestrationGrid.setToolbar(o.writetoolbarDefinition(this.options)),this.toolbar=o.toolbar;t=this;this.chgOrchestrationGrid.addEventListener("allCellsRendered",function(){t.chgOrchestrationGrid.buildStatusBar([{type:s.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.chgOrchestrationGrid.getTreeDocument().getAllDescendants().length}},{type:s.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.chgOrchestrationGrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:s.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:s.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.chgOrchestrationGrid.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),t.chgOrchestrationGrid.getTreeDocument().getXSO().onAdd(function(e){t.chgOrchestrationGrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,"onAdd")}),t.chgOrchestrationGrid.getTreeDocument().getXSO().onRemove(function(e){t.chgOrchestrationGrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,"onRemove")}),t.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount){console.log("CROrchestration_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}});let e=i.nodeModel.getPath().length,n={},a={};e>1&&(n.id=i.nodeModel.getParent().options.grid.id,n.title=i.nodeModel.getParent().options.grid.title,n.name=i.nodeModel.getParent().options.grid.name),e>2&&(a.id=i.nodeModel.getParent().getParent().options.grid.id,a.title=i.nodeModel.getParent().getParent().options.grid.title,a.name=i.nodeModel.getParent().getParent().options.grid.name),t._modelEvents.publish({event:"CROrchestration-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid,pathlength:e,parentModel:n,gradParentModel:a},context:i.nodeModel})}},this.chgOrchestrationGridView=UWA.createElement("div",{id:"outer-orchestration-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-orchestration-grid-div"});var m=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-orchestration-grid-div"});this.toolbar.inject(m);var C=UWA.createElement("div",{class:"content-orchestration-grid-div expanded-header-height"}),v=UWA.createElement("div",{class:"content-orchestration-tile-div orchestrationtileView expanded-header-height"}),f=UWA.createElement("div",{class:"hideView",id:"orchestrationEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(f),this.chgOrchestrationGrid.inject(C),this.tileView.inject(v),f.inject(v),this.chgOrchestrationGridView.addContent(m),this.chgOrchestrationGridView.addContent(C),this.chgOrchestrationGridView.addContent(v)}catch(e){}},onSelectionChange:function(e,t,i,n,a){e.publish({event:"update-property-panel-data",data:{context:t,PhysicalID:i,type:n,action:a}}),e.publish({event:"cr-orchestration-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgOrchestrationGrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAdaptor",["UWA/Class","UWA/Class/Model","DS/CoreEvents/ModelEvents","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/view/ChgIDCardHeaderBuilder","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAttributeSubscriber","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderMenuSubscriber","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChangeIDCard","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l){return{createIDCardHeader:function(e,t,i){var r=this.prepareIdCardData(t,i);this._idCardHeaderBuilder=new n({model:r}),a.init(r),o.init(r),e.empty(),e.setAttribute("draggable","true"),e.setAttribute("droppable","true");var s=this.prepareDragData(t),l=r.get("smallIcon"),c=new Image;c.src=l,this._idCardHeaderBuilder.render().inject(e),this._idCardHeaderBuilder.attachResizeSensor(),e.addEventListener("dragstart",function(e){console.log("inside drag"+s),e.dataTransfer.setData("Text",s),e.dataTransfer.setDragImage(c,0,0),e.dataTransfer.effectAllowed="copy"})},prepareDragData:function(e){var t={protocol:"3DXContent",version:"1.1",source:widget.getValue("appId"),widgetId:widget.id,data:{items:[]}},i=[],n={envId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",serviceId:"3DSpace",objectId:e.id,objectType:e.type,displayName:e.name,displayTitle:e.title};return i.push(n),t.data.items=i,JSON.stringify(t)},prepareIdCardData:function(e,n){var a=this;if(null!=e&&void 0!==e.attributes){for(var o,r=[],l=e.attributes,c=[],d=l.layout,u=0;u<d.length;u++){var g=d[u];c.push(g.length);for(var p=0;p<g.length;p++){var h=g[p],m=l.mapping[h];if(m){var C=m.showLoader?"":m.valueDisplay,v=m.showLoader?"":m.valueActual,f=m.showLoader?s.loading:"maturity"===h||m.showCustomTooltip?"":m.valueTitle?m.valueTitle:m.valueDisplay,b=m.displayWhenMinified,w=m.editable,D=m.accessBit;r.push({name:m.fieldNLS,valueDisplay:C,valueActual:v,valueTooltip:f,displayWhenMinified:b,showLoader:m.showLoader,editable:w,command:h,accessBit:D}),"maturity"===h&&(o={valueDisplay:C,valueActual:v,editable:w})}}}a.modelEventForIdCard=new i;var S=l.mapping.owner.valueActual?l.mapping.owner.valueActual:"",E=e.id?e.id:"",O=e.name?e.name:"",y=e.type?e.type:"",_=e.title?e.title:e.name,G=e.revision?e.revision:"",I=e.thumbnail?e.thumbnail:"",N=e.iconURL?e.iconURL:"",T=!!e.minified&&e.minified,A="true"==e.onHold,V=e.isKindOfType?e.isKindOfType:"",M="";e.freeSpaces[0]&&e.freeSpaces[0].data&&(M=e.freeSpaces[0].data);var R={items:e.menuItems,hiddenItems:[],events:{onClick:function(e,t){console.log("Publish idcard-dropdown-menu-action : "+t.id),a.modelEventForIdCard.publish({event:"chg-idcard-dropdown-menu-action",data:t})}}},U={id:E,withToggleMinifiedButton:!0,withActionsButton:!0,minified:T,type:y,title:_,owner:S,version:G,currentState:o,thumbnail:I,smallIcon:N,modelEvents:a.modelEventForIdCard,dropdown:R,freezones:[M],attributes:r,attributesLayout:c,onHold:A,accessBits:n.accessBits,name:O,isKindOfType:V};return a.updateDataBasedOnAccessBit(U,n.accessBits),new t(U)}console.log("[ChgIDCardHeaderAdaptor:prepareIdCardData] Error!!! Incorrect/null data!!!")},updateDataBasedOnAccessBit:function(e,t){var i=[],n=[];e.dropdown.items.forEach(function(e,a){"true"==t[e.accessBit]?i.push(e):n.push(e)}),e.dropdown.items=i,e.dropdown.hiddenItems=n,e.attributes.forEach(function(e,i){var n=e.accessBit;n&&("false"==t[n]&&(e.editable=!1))})}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu","DS/UIKIT/Mask","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f,b,w,D,S,E){"use strict";var O={contextId:null,treeDocument:null,accessBit:null,contextDetails:null,createChangeOrchestrationView:function(t,a){var s=this;s.contextId=t.id,s.copyOptions=t,s.contextDetails=t.contextDetails;var l=t.contextDetails.access,c={};c=UWA.merge(c,t),g.makeDroppable(c.target,s.dropHandler),c.modelEvents=a,this.modelEvents=a,c.columns=i.getColumns(),s.ChgOrchestrationDataGridModel=new n(c.id,c.contextDetails),S.mask(c.target),D.createCustomColumn().then(function(i){f.getGlobalVariable().customeViewCOList=[],c.columns=[...c.columns,...i],s.treeDocument=c.treeDocument=s.ChgOrchestrationDataGridModel.createTreeDocument(),s.ChgCOlayoutModel=c.treeDocument,s.ChgOrchestrationDataGridModel.registerCustomFilter(),s.subscribeToModelEvents(c.treeDocument),s.ChgOrchestrationTreeModel=c.treeDocument,s.orchestrationGridView=new e(c);let a=s.orchestrationGridView.chgOrchestrationGrid._customViewsManager.getCustomViews()[0].columnsVisibleFlag;if(null!=a&&null!=a){let e=Object.keys(a);f.getGlobalVariable().customeViewCOList=e}let d=s.orchestrationGridView.chgOrchestrationGrid;w.publish("CO-AccessBit-Update",l),o.getCRChangeOrchestration(t.id).then(function(e){console.log("Orchestration list: "+e),r.processCRChangeOrchestration(e).then(function(e){if(s.chgOrchestrationDataGridModel=new n(t.id),0==e.length){if(f.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&S.isMasked(e)&&S.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&S.isMasked(e)&&S.unmask(e)}s.modelEvents.publish({event:"showEmpty-datagrid",data:d})}s.chgOrchestrationDataGridModel.loadChangeOrchestrationData(c.treeDocument,e);var i=r.getDefaultFilter(c.columns);c.treeDocument.setFilterModel(i),c.isSelected&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(s.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:s.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,s.ChgOrchestrationTreeModel)}),0==c.treeDocument.getChildren().length?c.treeDocument._modelEvents.publish({event:"treeEmpty"}):c.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),O.changeView()})},function(e){if(f.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&S.isMasked(e)&&S.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&S.isMasked(e)&&S.unmask(e)}return Promise.reject(e)})})},dropHandler(e){console.log("dropHandler called"+e);var t=O.ChgOrchestrationDataGridModel.treeDocument,i=[],n="";var a=f.getGlobalVariable().changeActionSubTypes,o=f.getGlobalVariable().subTypes;if(1==a.length){for(var r=0;r<e.length;r++)if(o.includes(e[r].objectType)&&a[0]["Change Action"].includes(e[r].objectType))return void l.error(s.CHG_CA_ADD_VIA_IA_ERROR)}else{for(let{label:e}of a)i.push(e);for(r=0;r<e.length;r++)if(o.includes(e[r].objectType)&&i.includes(e[r].objectType))return void l.error(s.CHG_CA_ADD_VIA_IA_ERROR)}for(r=0;r<e.length;r++)o.includes(e[r].objectType)||i.includes(e[r].objectType)||(n=n+e[r].displayName+",");if(""!=n)return n+=s.CHG_IMPLEMENTING_CHNAGE_ERROR,void l.error(n);if(t.getSelectedNodes().length>1)l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else if(1==t.getSelectedNodes().length&&t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{var c=[];for(r=0;r<e.length;r++)c.push({id:e[r].objectId,type:e[r].objectType});if(c.length){var d,u,g=[{label:s.CHG_GOV_OK_Button_Label,handler:function(){O.ChgOrchestrationDataGridModel.addExistingChildren(c),p.closeDialog()},className:"primary"},{label:s.CHG_GOV_CANCEL_Button_Label,handler:function(){p.closeDialog()},className:"default"}];0===t.getSelectedNodes().length?(d=O.ChgOrchestrationDataGridModel.contextDetails.name,u=O.ChgOrchestrationDataGridModel.contextDetails.title):(d=t.getSelectedNodes()[0].options.grid.name,u=t.getSelectedNodes()[0].options.grid.title);var h=s.CHG_GOV_ChangeOrchestration_Drop_Content+u+"("+d+")<br>"+s.CHG_GOV_ChangeOrchestration_Drop_Confirmation,m={title:s.CHG_GOV_ChangeOrchestration_Drop_Info_Title,content:h,buttonArray:g};p.launchInfoDailog(m)}}},refreshLayout:function(e){this.ChgOrchestrationTreeModel;(new n).updateNodeIndexed(ChgCROrchestrationTreeModel,e)},addNodesInLayout:function(e){O.ChgOrchestrationDataGridModel.addNodesInLayoutModel(this.ChgOrchestrationTreeModel,e)},refreshGrid:function(e,t,i,n){},changeView:function(e){i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),w.unsubscribe(`crOrchestration:${widget.id}`),w.subscribe(`crOrchestration:${widget.id}`,function(){"false"==f.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgOrchestrationTreeModel)})}),w.unsubscribe(`${e.options.id} of ${widget.id}`),w.subscribe(`${e.options.id} of ${widget.id}`,function(t){O.chgOrchestrationDataGridModel.filterView(t,e)}),w.unsubscribe(`${e.options.id} colorize ${widget.id}`),w.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){O.chgOrchestrationDataGridModel.enableColorizeView(t,e)}),w.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),w.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){O.chgOrchestrationDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("CROrchestration-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"CROrchestration-DataGrid-on-dblclick"},function(e){if(f.getGlobalVariable().is3DSpace){E("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else if("ChangeOrder"==e.model.isKindOfType||"ChangeRequest"==e.model.isKindOfType||"ChangeAction"==e.model.isKindOfType){let t,i={level:""},n=!1,a=C.getRouter().getState().name;a==m.ROUTE_CR_DETAILS?1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL1,i.level1Node={id:e.model.id,title:e.model.title},i.level="level1"):2==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level1Node=e.parentModel,i.level="level2"):3==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level1Node=e.gradParentModel,i.level="level3"):(n=!0,i.rootNode=e.model,i.level="root"):a==m.ROUTE_CR_ORCHESTRATION_LEVEL1&&(1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level="level2"):n=!0),1!=n&&a!=m.ROUTE_CR_ORCHESTRATION_LEVEL2||(t=m.ROUTE_CO_DETAILS,i.level="root"),C.navigate(t,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:i})}else O.modelEvents.publish({event:"information-panel-open",data:null})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-orchestration-object-selection-update")]||this.modelEvents.subscribe({event:"cr-orchestration-object-selection-update"},function(e){O.handleObjectSelectionUpdate(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-orchestration-grid-update-CA-Creation")]||this.modelEvents.subscribe({event:"cr-orchestration-grid-update-CA-Creation"},function(e){let t={contextDetails:O.contextDetails,id:O.contextId},i=O.orchestrationGridView.chgOrchestrationGrid;O.action=e.action,o.getCRChangeOrchestration(t.id).then(function(e){let a=[];r.processCRChangeOrchestration(e).then(function(e){if(O.chgOrchestrationDataGridModel=new n(t.id,t.contextDetails),0==e.length){if(f.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&S.isMasked(e)&&S.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&S.isMasked(e)&&S.unmask(e)}O.modelEvents.publish({event:"showEmpty-datagrid",data:i})}let o=O.treeDocument.getAllDescendants(),r=!1;if("Add"===O.action)for(let t of e){for(let e of o){if(t.id===e.options.grid.id){r=!0;break}r=!1}!1===r&&a.push(t)}else if("delete"===O.action){let t=!1;for(let i of o){for(let n of e){if(n.id===i.options.grid.id){t=!0;break}t=!1}!1===t&&O.treeDocument.removeRoot(i)}}O.chgOrchestrationDataGridModel.loadChangeOrchestrationData(O.treeDocument,a),0==O.treeDocument.getChildren().length?O.treeDocument._modelEvents.publish({event:"treeEmpty"}):O.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),O.changeView()})},function(e){return Promise.reject(e)})})},createChangeActionInContext:function(){let e=O.ChgOrchestrationTreeModel;if(e.getSelectedNodes().length)if(e.getSelectedNodes().length>1||e.getSelectedNodes()[0].options.grid.isKindOfChangeAction)e.getSelectedNodes().length>1?l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let t={parentID:e.getSelectedNodes()[0].options.grid.id};c.createNewChangeActionInContext(t)}else{let e={parentID:O.contextId};c.createNewChangeActionInContext(e)}},createChangeOrderInContext:function(){let e=O.ChgOrchestrationTreeModel;if(e.getSelectedNodes().length)if(e.getSelectedNodes().length>1||e.getSelectedNodes()[0].options.grid.isKindOfChangeAction)e.getSelectedNodes().length>1?l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let t={parentID:e.getSelectedNodes()[0].options.grid.id};c.createNewChangeOrderInContext(t)}else{let e={parentID:O.contextId};c.createNewChangeOrderInContext(e)}},addExistingHandler:function(){O.contextId;let e={condition:"addExistingCROrchestration",extendedQuery:'AND (NOT ecm_95_ca_95_is_95_implementing_95_cr:"TRUE") AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND (NOT current:"On Hold" AND NOT current:"Cancelled" AND current:"Prepare")'};var t=O.ChgOrchestrationTreeModel;if(0===t.getSelectedNodes().length||1===t.getSelectedNodes().length&&!t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)if(f.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=Change Order:ECM_CHANGE_ON_HOLD!=TRUE:CURRENT!=policy_Cancelled.state_Cancelled:CURRENT=policy_FasttrackChange.state_Prepare&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var i=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,O.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",i)}else console.log("inside EVENT")};window.addEventListener("storage",i)}else{var n=a.activateSearch();a.search("Add Existing","Change Order",O.OnSearchComplete,"changeOrchestration",n,void 0,void 0,e)}else t.getSelectedNodes().length&&t.getSelectedNodes().length>1?l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(s.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed)},OnSearchComplete:function(e){var t=f.getGlobalVariable().changeActionSubTypes,i=[],n=f.getGlobalVariable().subTypes;if(1==t.length){for(var a=0;a<e.length;a++)if(n.includes(e[a][2])&&t[0]["Change Action"].includes(e[a][2]))return void l.error(s.CHG_CA_ADD_VIA_IA_ERROR)}else{for(let{label:e}of t)i.push(e);for(a=0;a<e.length;a++)if(n.includes(e[a][2])&&i.includes(e[a][2]))return void l.error(s.CHG_CA_ADD_VIA_IA_ERROR)}var o=[];for(a=0;a<e.length;a++)o.push({id:e[a][0],type:e[a][2]});o.length&&O.ChgOrchestrationDataGridModel.addExistingChildren(o)},removeHandler:function(){if(console.log("removeHandler!"),0!=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes().length)if(f.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&S.mask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&S.mask(e)}O.ChgOrchestrationDataGridModel.removeChildren()},deleteHandler:function(){console.log("deleteHandler!");var e=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();if(e.length){for(var t=[],i=0;i<e.length;i++){var n=e[i],a={physicalid:n.options.grid.id,nodeName:n.options.grid.name,nodeTitle:n.options.grid.title};t.push(a)}var o=document.getElementById("outer-orchestration-grid-div");u.deleteNodes(t,o,O.removeDeletedNodesUsingIDs)}},mergeChangeAction:function(){var e=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();const t=[];for(let i of e)t.push(i.options.grid.id);let i=[],n={changeActionIds:t};i.push(n),o.mergeChangeAction(i).then(function(e){o.getNewCADetails(e.data[0].id).then(function(e){var t=r.processChangeActionInContext(e).processData;O.addNodesInLayout(t);var i=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();for(let e of i)e.updateOptions({grid:{maturityNLS:"Canceled"}})})})},globalSubscribeForCOOrchestrationView:function(){h.addObserver("ChgCROrchestrationDataGridLayout","CO-AccessBit-Update",O.handleAccessBitUpdate),h.addObserver("ChgCROrchestrationDataGridLayout","CO-Properties-Update",O.handlePropertiesUpdate),h.addObserver("ChgCROrchestrationDataGridLayout","ENOLC_MOVE_CMD_UPDATE",O.handleCROrchestrationViewTransfer)},handleCROrchestrationViewTransfer:function(e){var t,n,a=O.ChgOrchestrationTreeModel.getAllDescendants(),o=[];Object.keys(e.data.attributes).forEach(function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,o.push(i.id)});for(var r=0;r<o.length;r++){t=o[r];for(var s=0;s<a.length;s++){if(a[s].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName){var l=t.newOwnerId;a[s].options.grid.owner=l,a[s].options.grid.ownerFullName=t.newOwnerFullName;var c=t.newOwnerFullName}if(t.newOrganization){var d=t.newOrganization;a[s].options.grid.orgnaizationNLS=d}if(t.newCollabSpace){var u=t.newCollabSpace;a[s].options.grid.collabspaceNLS=u}""==t.newOwnerId?(l=a[s].options.grid.owner,c=a[s].options.grid.ownerFullName,n=i.createCustomOwner(l,c)):n=i.createCustomOwner(l,c);var g=a[s].options.grid.name,p={};p.name=g,p.title=a[s].options.grid.title,p.severity=a[s].options.grid.severity,p.severityNLS=a[s].options.grid.severityNLS,p.ownerFullName=c,p.maturityNLS=a[s].options.grid.maturityNLS;var h=O.ChgOrchestrationDataGridModel.getCustomTooltip(p),m=g+" | "+c;a[s].updateOptions({label:a[s].options.grid.title,grid:{collabspaceNLS:a[s].options.grid.collabspaceNLS,organizationNLS:a[s].options.grid.organizationNLS,owner:a[s].options.grid.ownerFullName,chgObjOwner:n},customTooltip:h,subLabel:m})}}}},handlePropertiesUpdate:function(e){var t=O.ChgOrchestrationTreeModel;if(t)for(var n=t.getAllDescendants(),a=e.objectId,o=e.type.value,r=0;r<n.length;r++){if(n[r].options.grid.id==a){if("Change Action"==o){if(e&&e.Synopsis){var s=e.Synopsis.value;n[r].options.grid.title=s,f.getGlobalVariable().is3DSpace?n[r].options.label='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+a+"\"'>"+s+"</a>":n[r].options.label=s}}else if(e&&e.Title){s=e.Title.value;n[r].options.grid.title=s,f.getGlobalVariable().is3DSpace?n[r].options.label='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+a+"\"'>"+s+"</a>":n[r].options.label=s}if(e&&e.owner){var l=e.owner.value;n[r].options.grid.owner=l}if(e&&e.Severity){var c=e.Severity.value;n[r].options.grid.Severity=c}var d=e.Severity.valueDB,u=i.createCustomSeverity(d,c);n[r].updateOptions({label:n[r].options.label,grid:{title:n[r].options.grid.title,owner:n[r].options.grid.owner,severity:n[r].options.grid.Severity,sev:u}})}}},handleAccessBitUpdate:function(e){e.id==O.contextId&&("false"==e.accessBits.ManageImplementingChanges?(O.accessBit=!1,O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("create",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!1})):(O.accessBit=!0,O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("create",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!0})))},handleObjectSelectionUpdate:function(e){e.count>1?O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{disabled:!1}):O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{disabled:!0}),0===e.count?(O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{disabled:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{disabled:!0})):(O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{disabled:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{disabled:!1}))},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];O.ChgOrchestrationTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==O.ChgOrchestrationTreeModel.getChildren().length&&O.ChgOrchestrationTreeModel._modelEvents.publish({event:"treeEmpty"})}};return O.globalSubscribeForCOOrchestrationView(),O}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueView","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/facets/issue/ChgIssueDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m){"use strict";let C={createIssueView:function(t,a,o){var r=this;let s={};this.chgCRImpactBasisView="",(s=UWA.merge(s,a)).target=t,s.columns=i.getColumns(),this.ChgIssueDataGridModel=new n(s.id),this.modelEvents=s.modelEvents,r.treeDocument=s.treeDocument=r.ChgIssueDataGridModel.createTreeDocument(),r.ChgIssueTreeModel=s.treeDocument,g.makeDroppable(s.target,r.dropHandler),r.ChgIssueDataGridModel.registerCustomFilter(),this.subscribeToModelEvents(s.treeDocument),d.getIssue(a).then(function(t){console.log("ImpactAnalysis list: "+t);var i=u.processedChangeRequestIssueList(t,a.id);r.chgIssueDataGridModel=new n(a.id),r.chgIssueDataGridModel.loadIssueData(s.treeDocument,i),r.chgIssueView=new e(s);var o=u.getDefaultFilter(s.columns);s.treeDocument.setFilterModel(o),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgIssueTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgIssueTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgIssueTreeModel)}),0==s.treeDocument.getChildren().length?s.treeDocument._modelEvents.publish({event:"treeEmpty"}):s.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),C.changeView()},function(e){return Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);C.ChgIssueDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType,updateAction:"CONNECT"});C.ChgIssueDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),m.unsubscribe(`CO_Issue:${widget.id}`),m.subscribe(`CO_Issue:${widget.id}`,function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgIssueTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgIssueTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgIssueTreeModel)})}),m.unsubscribe(`${e.options.id} of ${widget.id}`),m.subscribe(`${e.options.id} of ${widget.id}`,function(t){C.ChgIssueDataGridModel.filterView(t,e)}),m.unsubscribe(`${e.options.id} colorize ${widget.id}`),m.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){C.ChgIssueDataGridModel.enableColorizeView(t,e)}),m.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){C.ChgIssueDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("co-issue-object-selection-update")]||this.modelEvents.subscribe({event:"co-issue-object-selection-update"},function(e){C.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){let e=C.ChgIssueDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingIssue",extendedQuery:C.createExcludeListForSearch(e)};if(l.getGlobalVariable().isNative){let e="CHG_Add_Existing_Issue";JSON.stringify(t);h.DispatchEventToWin(e,"")}else if(l.getGlobalVariable().is3DSpace){const t="wdg_"+(new Date).getTime();var i="../common/emxFullSearch.jsp?field=TYPES=Issue&txtExcludeOIDs="+e.map(e=>e.options.grid.id).toString()+"&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+t;showChooser(i,850,630);var n=function(e){if(e.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(t)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,C.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",n)}else console.log("inside EVENT")};window.addEventListener("storage",n)}else{const e=s.activateSearch("","Issue");s.search(a.CHG_GOV_Issue,"Issue",C.OnSearchComplete,"Issue",e,void 0,void 0,t)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){if(l.getGlobalVariable().isNative){for(var i=e.split(","),n=[],a=0;a<i.length;a++)n.push({id:i[a]});n.length&&(t.hideEmptyView(),C.ChgIssueDataGridModel.addExistingChildren(n))}else{let i=[];for(a=0;a<e.length;a++)i.push({id:e[a][0]});i.length&&(t.hideEmptyView(),C.ChgIssueDataGridModel.addExistingChildren(i))}},removeHandler:function(){const e=C.treeDocument.getSelectedNodes();if(e.length>0){let n=[];for(var i=0;i<e.length;i++)n.push({id:e[i].options.grid.id});C.ChgIssueDataGridModel.removeExistingChildren(n).then(function(e){0==C.treeDocument.getAllDescendants().length&&t.showEmptyView()},function(e){})}else o.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){0===e.count?C.chgIssueView.toolbar.updateNodeModel("remove",{disabled:!0}):C.chgIssueView.toolbar.updateNodeModel("remove",{disabled:!1})}};return C}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssuefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataService","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r,s,l){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"issue-CO-container"}))},updateFacet:function(){var e=this;a.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var i={id:t.get("objectId"),type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};r.getObjectTypeInformation(i.id).then(function(t){if("Change Request"==t||"Change Order"==t||"Change Action"==t){"Change Action"==t?i.type="ChangeAction":"Change Order"==t?i.type="ChangeOrder":"Change Request"==t&&(i.type="ChangeRequest");var n=e.elements.container;o.createIssueView(n,i)}a.unmask(e.elements.container)})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridContextualMenu","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),d.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").removeClassName("minified-header-height"))})},render:function(){try{let e=this.processColumns(),t=this,d={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:s.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactedItemGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return"proposedChangeAction"===e.collectionView.columns[e.cellInfos.columnID].dataIndex&&e.cellInfos.nodeModel.options.grid.proposedChangeActionsData&&1==e.cellInfos.nodeModel.options.grid.proposedChangeActionsData.length?l.getRMBProposedChangeColumn(e.cellInfos.nodeModel.options.grid.proposedChangeActionsData).then(e=>e):c.showRMBMenuOnGrid(e);e.cellInfos.rowID<0&&(t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1}))}return t},onDragStartRowHeader:function(e,t){o.readyDragContent(e,t)},onDragStartCell:function(e,t){o.readyDragContent(e,t)}};d=UWA.merge(d,this.options);let u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag","statusbarIcons"]};this.chgGridView=new i(d),this.chgGridView.addEventListener("click",function(e,t){void 0!==t&&-1!==t.rowID&&("proposedChangeAction"===e.dsModel.layout.getDataIndexFromColumnIndex(t.columnID)&&t.nodeModel.options.grid.proposedChangeActionsData&&t.nodeModel.options.grid.proposedChangeActionsData.length>1&&l.getPopupProposedChangeColumn(e.target,t.nodeModel))}),this.chgGridView.cellSelection="none",this.tileView=new n(u);let g={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=g;let p={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}},h={impact:{stdTemplate:"enumCombo",semantics:{possibleValues:{impactedKey:s.CHG_Impacted_Value,notImpactedKey:s.CHG_NotImpacted_Value},valueType:"enumValueToProperty"}}};this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations(p),this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations(h),a.toolbar=this.chgGridView.setToolbar(a.writetoolbarDefinition(this.options)),this.toolbar=a.toolbar,this.chgGridView.buildStatusBar([{type:r.STATUS.NB_ITEMS},{type:r.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:r.STATUS.NB_ITEMS},{type:r.STATUS.NB_SELECTED_ROWS}]),t.chgGridView.getTreeDocument().getXSO().onAdd(function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-impact-analysis-impactedItem-object-selection-update",data:{count:i}})}),t.chgGridView.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-impact-analysis-impactedItem-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}),document.getElementById("outer-impactedItem-grid-div")&&document.getElementById("outer-impactedItem-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-impactedItem-grid-div",class:"outer-impactedItem-grid-div"});let m=UWA.createElement("div",{class:"toolbar-impactedItem-grid-div"});this.toolbar.inject(m);let C=UWA.createElement("div",{class:"content-impactedItem-grid-div expanded-header-height"}),v=UWA.createElement("div",{styles:{height:"100%"},class:"content-impactedItem-tile-div ImpactedItemTileView expanded-header-height"}),f=UWA.createElement("div",{class:"hideView",id:"impactedItemEmptyTileViewDiv"});UWA.createElement("div",{html:s.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(f),this.chgGridView.inject(C),this.tileView.inject(v),f.inject(v),this.chgGridViewContainer.addContent(m),this.chgGridViewContainer.addContent(C),this.chgGridViewContainer.addContent(v)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMemberFilterLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMemberFilterView"],function(e){"use strict";var t={createMemberFilter:function(i){t.teamlayoutModel=i.model,new e({events:{memberFilterKeyUp:function(e){t.enteredText=e.target.value;var i={filteringMode:"name",text:t.enteredText};t.filterCollectionAndUpdateUI(i)},memberRoleFilter:function(e){var i={filteringMode:"role",text:t.enteredText?t.enteredText:"",originatorInclude:!1,reviewInclude:!1,followInclude:!1},n=document.getElementById("allToggle"),a=document.getElementById("originatorToggle");a&&a.checked&&(i.originatorInclude=!0);var o=document.getElementById("revMemToggle");o&&o.checked&&(i.reviewInclude=!0);var r=document.getElementById("followMemToggle");r&&r.checked&&(i.followInclude=!0),0==i.originatorInclude&&0==i.reviewInclude&&0==i.followInclude||1==i.originatorInclude&&1==i.reviewInclude&&1==i.followInclude||"allToggle"==e.target.id&&1==n.checked?(i.allInclude=!0,n.checked=!0,a.checked=!1,o.checked=!1,r.checked=!1):(i.allInclude=!1,n.checked=!1),t.filterCollectionAndUpdateUI(i)}}}).render().inject(i.target)},filterCollectionAndUpdateUI:function(e){var i=e.text;t.teamlayoutModel.setFilterModel({fullName:{filterId:"stringRegexp",filterModel:{condition1:{type:"contains",filter:i}}},role:{filterId:"stringRegexp"}});var n=t.teamlayoutModel.getFilterManager().getFilters().role,a={};0==e.allInclude&&(1==e.originatorInclude&&(a.condition1={type:"contains",filter:"Originator"}),1==e.reviewInclude&&(a.hasOwnProperty("condition1")?(a.operator="or",a.condition2={type:"contains",filter:"Approver"}):a.condition1={type:"contains",filter:"Approver"}),1==e.followInclude&&(a.hasOwnProperty("condition1")?(a.operator="or",a.condition2={type:"contains",filter:"follower"}):a.condition1={type:"contains",filter:"follower"}),n.filterModel=a)},launchFilterMemberPanel:function(){var e=document.querySelector(".addmemberView"),t=document.querySelector(".memberfilterView"),i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");e.hide(),i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque"),"block"==t.style.display?t.hide():t.show()}};return t}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgAddMemberLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgAddMemberView","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";var h={createAddMemberPanel:function(t){h.teamlayoutModel=t.model,h.id=t.id,new e({events:{searchChangeCoordinator:function(e){h.searchCategoty="Change Coordinator";var t=n.activateSearch("Person","TransferOwnership");n.search(p.CHG_Add_Member_Change_Coordinator,"Person",h.OnSearchComplete,"Contributors",t,void 0,void 0)},searchApprover:function(e){h.searchCategoty="Approver";var t=n.activateSearch("Person","TransferOwnership");n.search(p.CHG_Add_Member_Approver,"Route Template",h.OnSearchComplete,"Contributors",t,void 0,void 0)},searchInformedUser:function(e){h.searchCategoty="Informed User";var t=n.activateSearch("Person","TransferOwnership");n.search(p.CHG_Add_Member_Follower,"Person",h.OnSearchComplete,"Contributors",t,void 0,"informedUser")}}}).render().inject(t.target);var a=t.target.querySelector(".chg-add-member-change-coordinator-field"),o=t.target.querySelector(".chg-add-member-approver-field"),r=t.target.querySelector(".chg-add-member-informed-user-field"),s=t.target.querySelector(".chg-add-member-button"),u=t.target.querySelector(".chg-add-member-change-coordinator-field-container"),m=t.target.querySelector(".chg-add-member-approver-field-container"),C=t.target.querySelector(".chg-add-member-informed-user");i.makeDroppable(u,h.ExecuteDropForChangeCoordinatorField),i.makeDroppable(m,h.ExecuteDropForApproverField),i.makeDroppable(C,h.ExecuteDropForInformedUserField),h.myButtonPrimary=new l({label:p.CHG_Add_Member_Add,emphasize:"primary"}).inject(s);var v=new l({label:p.CHG_Add_Member_Cancel,emphasize:"secondary"}).inject(s);h.modelForChangeCoordinator=new d,h.modelForApprover=new d,h.modelForFollower=new d,h.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new g).getTrigramNameFilter()),h.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new g).getTrigramNameFilter()),h.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new g).getTrigramNameFilter()),h.autoCompleteChangeCoordinator=new c({elementsTree:h.modelForChangeCoordinator,placeholder:p.CHG_Add_Member_Type_To_Search,customFilterMessage:p.CHG_No_Search_found,multiSearchMode:!1,filterCB:function(e){h.modelForChangeCoordinator.setFilterModel({value:{filterId:"trigramNameFilter_CCO",filterModel:{text:e}}})}}).inject(a),h.autoCompleteApprover=new c({elementsTree:h.modelForApprover,placeholder:p.CHG_Add_Member_Type_To_Search,customFilterMessage:p.CHG_No_Search_found,multiSearchMode:!1,filterCB:function(e){h.modelForApprover.setFilterModel({value:{filterId:"trigramNameFilter_Approver",filterModel:{text:e}}})}}).inject(o),h.autoCompleteFollower=new c({elementsTree:h.modelForFollower,placeholder:p.CHG_Add_Member_Type_To_Search,customFilterMessage:p.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){h.modelForFollower.setFilterModel({value:{filterId:"trigramNameFilter_Follower",filterModel:{text:e}}})}}).inject(r),h.myButtonPrimary.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque");var a=null!=h.autoCompleteChangeCoordinator.selectedItems?h.autoCompleteChangeCoordinator.selectedItems.options.identifier:"",o=null!=h.autoCompleteApprover.selectedItems?h.autoCompleteApprover.selectedItems.options.id:"",r={person:[],userGroup:[]};if(null!=h.autoCompleteFollower.selectedItems)for(var s=0;s<h.autoCompleteFollower.selectedItems.length;s++){let e=h.autoCompleteFollower.selectedItems[s].options;"Person"==e.type?r.person.push(e.identifier):"Group"==e.type&&r.userGroup.push(e.id)}(""!=o||r.person.length>0||r.userGroup.length>0||""!=a)&&(h.autoCompleteChangeCoordinator.selectedItems=h.autoCompleteApprover.selectedItems=h.autoCompleteFollower.selectedItems=void 0,h.addmember(a,o,r))}),v.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque")})},launchAddMemberPanel:function(){var e=document.querySelector(".addmemberView"),i=document.querySelector(".memberfilterView"),n=document.querySelector(".content-member-grid-div"),a=document.querySelector(".membertileView"),o=document.querySelector(".chg-add-member-approver"),r=document.querySelector(".chg-add-member-change-coordinator");i.hide(),n.removeClassName("teamview-opaque"),a.removeClassName("teamview-opaque"),o.classList.remove("teamview-opaque"),r.classList.remove("teamview-opaque"),"block"==e.style.display?e.hide():(e.show(),n.addClassName("teamview-opaque"),a.addClassName("teamview-opaque"),1==t.isRouteTemplateConnected&&o.classList.add("teamview-opaque"),1==t.isChangeCoordinatorConnected&&r.classList.add("teamview-opaque"),h.updateAutoCompleteModel(),h.addChangeEventListener(),h.myButtonPrimary.disabled=!0)},updateAutoCompleteModel:function(e){var t=s.getGlobalVariable().contextUser;let i={},n=h.teamlayoutModel.getChildren();for(let e=0;e<n.length;e++){let t=n[e].options.grid;i[t.id]=t.role}var a={categoryId:"changeCordinator",contextUser:t},o={categoryId:"approver",contextUser:t},l={categoryId:"follower",contextUser:t};h.modelForChangeCoordinator.empty(),h.modelForApprover.empty(),h.modelForFollower.empty(),r.getListCOMember(a).then(function(e){h.modelForChangeCoordinator.prepareUpdate();for(var t=0;t<e.length;t++){var i=new u({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});h.modelForChangeCoordinator.addRoot(i)}h.modelForChangeCoordinator.pushUpdate()}),r.getListCOMember(o).then(function(e){h.modelForApprover.prepareUpdate();for(var t=0;t<e.length;t++){var i=new u({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});h.modelForApprover.addRoot(i)}h.modelForApprover.pushUpdate()}),r.getListCOMember(l).then(function(e){h.modelForFollower.prepareUpdate();for(var t=0;t<e.length;t++){let a=e[t].id;if(!i.hasOwnProperty(a)||1!=i[a].contains("Follower")){var n=new u({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});h.modelForFollower.addRoot(n)}}h.modelForFollower.pushUpdate()})},addmember:function(e,i,n){var r=h.id,s=t.makeUpdateMemberJson("CONNECT",e,i,n);a.updateChangeOrderMembers(r,s).then(function(e){var i=o.processedChangeOrderMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout"],function(e){for(var n=e.ChgMembersTreeModel.getChildren(),a=[],o=0;o<i.length;o++){var r=i[o];if("Route Template"!=r.type){"Coordinator"==r.role&&(t.isChangeCoordinatorConnected=!0);for(var s=r.id,l=!1,c=0;c<n.length;c++)if(s==n[c].options.grid.id){l=!0;break}if(1==l){e.ChgMembersTreeModel.prepareUpdate();var d=n[c].options.description;var u=", "+("Coordinator"==r.role?p.CHG_Member_Role_ChangeCoordinator:p.CHG_Member_Role_Follower),g=n[c].options.grid.role,h=", "+r.role;n[c].options.description=n[c].options.grid.roleList=d.concat(u),n[c].options.grid.role=g.concat(h),n[c].options.grid.roles.push(r.role),e.ChgMembersTreeModel.pushUpdate()}else a.push(r)}else a.push(r),t.isRouteTemplateConnected=!0}a.length>0&&e.addNodesInLayout(a)})})},ExecuteDropForApproverField:function(e){var t={data:{}};t.data.items=e,h.ExecuteDropForAddMemberPanel(t,"Approver")},ExecuteDropForChangeCoordinatorField:function(e){var t={data:{}};t.data.items=e,h.ExecuteDropForAddMemberPanel(t,"Change Coordinator")},ExecuteDropForInformedUserField:function(e){var t={data:{}};t.data.items=e,h.ExecuteDropForAddMemberPanel(t,"Informed User")},ExecuteDropForAddMemberPanel:function(e,t){if(e&&e.data&&e.data.items){var i=e.data.items;if(UWA.is(i)&UWA.is(i.length)&&i.length>0){for(var a=[],r=[],s=[],l=0;l<i.length;l++)if(i[l].objectId){var c=i[l].serviceId.toLowerCase();"3dspace"==c||c.includes("3dspace")?a.push(i[l].objectId):"3dswym"==c&&"pno:Person"==i[l].objectType&&(r.push(i[l].objectId.replace("iam:","")),s.push(i[l].displayName))}0==a.length&&0==r.length||n.getAdditionObjectInfo(a).then(function(e){for(var i=[],n=0;n<a.length;n++){var l=null,c=e.additionObjectInfo[a[n]];if("Approver"===t&&c.type&&"Route Template"===c.type)l=new u({label:c.objectName,value:c.objectName,name:c.objectName,type:c.type,id:c.pid,identifier:c.objectName}),i.push(l),h.autoCompleteApprover.selectedItems=i,h.autoCompleteApprover._applySelectedItems();else if("Change Coordinator"===t&&c.type&&"Person"==c.type){var d=new u({label:c.fullName,value:c.objectName,name:c.fullName,type:c.type,id:c.pid,identifier:c.objectName});i.push(d),h.autoCompleteChangeCoordinator.selectedItems=i,h.autoCompleteChangeCoordinator._applySelectedItems()}else{if("Informed User"!==t||!c.type||"Person"!==c.type&&"Group"!==c.type)return void console.log("NLS.ECM_ERR_NO_PERSON_NO_ROUTETEMPLATE");{let e="";"Person"===c.type?e=new u({label:c.fullName,value:c.objectName,name:c.fullName,type:c.type,id:c.pid,identifier:c.objectName}):"Group"===c.type&&(e=new u({label:c.objectTitle,value:c.objectName,name:c.objectTitle,type:c.type,id:c.pid})),i.push(e),h.autoCompleteFollower.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,h.autoCompleteFollower,i),h.autoCompleteFollower._applySelectedItems()}}}for(n=0;n<r.length;n++){l=null;"Change Coordinator"===t?(l=new u({label:s[n],value:r[n],name:s[n],identifier:r[n],type:"Person",id:r[n]}),i.push(l),h.autoCompleteChangeCoordinator.selectedItems=i,h.autoCompleteChangeCoordinator._applySelectedItems()):"Informed User"===t&&(l=new u({label:s[n],value:r[n],name:s[n],identifier:r[n],type:"Person",id:r[n]}),i.push(l),h.autoCompleteFollower.selectedItems=o.searchFromModelAndUniqAndAdd(e=>e.options.id,h.autoCompleteFollower,i),h.autoCompleteFollower._applySelectedItems())}})}else console.log("NLS.ECM_CA_Drop_Not_Supported")}else console.log("NLS.ECM_CA_Drop_Not_Supported")},addChangeEventListener:function(){h.autoCompleteApprover.addEventListener("change",function(){var e=h.autoCompleteApprover.selectedItems;if(null==e&&(h.myButtonPrimary.disabled=!0),null!=e&&(h.myButtonPrimary.disabled=!1),selectedChipCount>0){var t=e[selectedChipCount-1];h.autoCompleteApprover.elementsTree.getChildren().findIndex(function(e){if(e.options.name==t.options.name)return!0})<0&&(h.autoCompleteApprover._selectionChips.removeChip(t.options.label),h.autoCompleteApprover.selectedItems.pop(),h.autoCompleteApprover.value.pop())}if(1==selectedChipCount)if("Route Template"==t.options.type){var i=t.options.grid.name;h.filterOutAutocompleteModel("Route Template",i),h.autoCompleteApprover._hidePopup()}else"Person"==t.options.type&&ChgCAAddMemberLayout.filterOutAutocompleteModel("Person");else 0==selectedChipCount&&(h.filterOutAutocompleteModel("Both"),h.autoCompleteApprover.elements.popup&&1==h.autoCompleteApprover.elements.popup.visibleFlag&&(h.autoCompleteApprover._hidePopup(),h.autoCompleteApprover._showPopup()))}),h.autoCompleteChangeCoordinator.addEventListener("change",function(){var e=h.autoCompleteChangeCoordinator.selectedItems;null==e&&(h.myButtonPrimary.disabled=!0),null!=e&&(h.myButtonPrimary.disabled=!1)}),h.autoCompleteFollower.addEventListener("change",function(){var e=h.autoCompleteFollower.selectedItems.length;0===e&&(h.myButtonPrimary.disabled=!0),e>0&&(h.myButtonPrimary.disabled=!1)})},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++)t.push({objectId:e[i][0],identifier:e[i][1],objectType:e[i][2],displayType:e[i][3],displayName:e[i][5],serviceId:e[i][7]});var n={data:{}};n.data.items=t,h.ExecuteDropForAddMemberPanel(n,h.searchCategoty)}};return h}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovInit",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Class/Events","DS/ENOChangeActionUX/scripts/Services/ChgChangeActionServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){return t.extend(i,n,{init:function(e){r.initialize(),this._options=e,console.log(e),this.initPreference()},loadInfraForGovWidget:function(){return that=this,new Promise(function(e,t){a.PopulatePreferences().then(function(t){that.populateChgGovPreferences().then(function(t){l.getCSRFToken().then(function(t){a.getExpressionValue().then(function(t){l.iaSubTypesFetched().then(function(t){d.coSubTypesFetched().then(function(t){d.crSubTypesFetched().then(function(t){d.iaSubTypesFetched().then(function(t){l.caSubTypesFetched().then(function(t){e()})})})})})})})})})})},loadGovWidget:function(e){let t=o.getGlobalVariable().contextUser,i=widget.getValue("X3DContentId")?JSON.parse(widget.getValue("X3DContentId")):null;if(s.getUserFullName(t).then(function(e){let t=o.getGlobalVariable().contextUser,i=e.userDisplayName.userInfo[t].userDisplayName;o.getGlobalVariable().contextUserFullName=i}),null!==i||1==o.getGlobalVariable().isNative){let t=null;if(UWA.is(i)){let e=i.data;if(null!==e&&e.items.length>0){let i=e.items[e.items.length-1];t=i.objectId}}else 1==o.getGlobalVariable().isNative&&(t=this._options.information.pid);UWA.is(t)&&c.getObjectTypeInformation(t).then(function(i){if("Change Order"==i){e({type:"IDCard",extData:{parentType:"Change Order",objectId:t}})}else if("Change Request"==i){e({type:"IDCard",extData:{parentType:"Change Request",objectId:t}})}else if("Change Action"==i){e({type:"IDCard",extData:{parentType:"Change Action",objectId:t}})}else{p.error(g.CHG_Notice_ObjectNotAccesible),e({type:"COLoadSummary",options:{}})}},function(e){return console.log("widget initilization failed"),Promise.reject(e)})}else{e({type:"COLoadSummary",options:{}})}require(["DS/MSFDocumentManagement/WidgetIntegration"],function(e){widget.MSFDocumentClient&&(widget.MSFDocumentClient=e,widget.MSFDocumentClient.ConnectWidgetWithMSF())})},initPreference:function(){var e=o.getGlobalVariable().contextUser;u.setUserId(e),u.initialize(!0,!0,!1)},populateChgGovPreferences:function(){var e=this;return new Promise(function(t,i){var n=[],a=e.populateRecentlyOpenedPreferences();n.push(a),Promise.all(n).then(function(e){t("success")})})},populateRecentlyOpenedPreferences:function(){var e={name:"recentlyOpenedCount",type:"list",label:g.CHG_GOV_Preferences_Recently_Opened,options:[],defaultValue:"5"};return new Promise(function(t,i){e.options.push({value:"1",label:"1"}),e.options.push({value:"2",label:"2"}),e.options.push({value:"3",label:"3"}),e.options.push({value:"4",label:"4"}),e.options.push({value:"5",label:"5"});var n={};widget.addPreference(e),n.NamePreference=e,t(n)})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMemberFilterLayout",["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMemberFilterView"],function(e){"use strict";var t={createMemberFilter:function(i){t.teamlayoutModel=i.model,new e({events:{memberFilterKeyUp:function(e){t.enteredText=e.target.value;var i={filteringMode:"name",text:t.enteredText};t.filterCollectionAndUpdateUI(i)},memberRoleFilter:function(e){var i={filteringMode:"role",text:t.enteredText?t.enteredText:"",contributorInclude:!1,reviewInclude:!1,followInclude:!1},n=document.getElementById("allToggle"),a=document.getElementById("contributorToggle");a&&a.checked&&(i.contributorInclude=!0);var o=document.getElementById("revMemToggle");o&&o.checked&&(i.reviewInclude=!0);var r=document.getElementById("followMemToggle");r&&r.checked&&(i.followInclude=!0),0==i.contributorInclude&&0==i.reviewInclude&&0==i.followInclude||1==i.contributorInclude&&1==i.reviewInclude&&1==i.followInclude||"allToggle"==e.target.id&&1==n.checked?(i.allInclude=!0,n.checked=!0,a.checked=!1,o.checked=!1,r.checked=!1):(i.allInclude=!1,n.checked=!1),t.filterCollectionAndUpdateUI(i)}}}).render().inject(i.target)},filterCollectionAndUpdateUI:function(e){var i=e.text;t.teamlayoutModel.setFilterModel({fullName:{filterId:"stringRegexp",filterModel:{condition1:{type:"contains",filter:i}}},role:{filterId:"stringRegexp"}});var n=t.teamlayoutModel.getFilterManager().getFilters().role,a={};0==e.allInclude&&(1==e.contributorInclude&&(a.condition1={type:"contains",filter:"contributor"}),1==e.reviewInclude&&(a.hasOwnProperty("condition1")?(a.operator="or",a.condition2={type:"contains",filter:"approver"}):a.condition1={type:"contains",filter:"approver"}),1==e.followInclude&&(a.hasOwnProperty("condition1")?(a.operator="or",a.condition2={type:"contains",filter:"follower"}):a.condition1={type:"contains",filter:"follower"}),n.filterModel=a)},launchFilterMemberPanel:function(){var e=document.querySelector(".addmemberView"),t=document.querySelector(".memberfilterView"),i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");e.hide(),i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque"),"block"==t.style.display?t.hide():t.show()}};return t}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMemberFilterLayout","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgAddMemberLayout","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersFeaturesUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";return e.extend({init:function(e){this._parent(e);var t=this;this._modelEvents=null,this._modelEvents=e.contextDetails._modelEvents,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),p.subscribe("idcard-header-minified",function(e){e.value?(t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").addClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("minified-header-height")):(t.membersDatagridView.getElement(".content-member-grid-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("minified-header-height"))})},render:function(){try{var e=this.processColumns(),t=this,p={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder,identifier:"width",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(t,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){c.readyDragContent(e,t)},onDragStartCell:function(e,t){c.readyDragContent(e,t)}};p=UWA.merge(p,this.options);var h={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.membersDatagrid=new n(p),this.membersDatagrid.rowSelection="single",this.membersDatagrid.cellSelection="none";let _=this.membersDatagrid;this._modelEvents.publish({event:"hideEmpty-datagrid",data:_}),this.tileView=new a(h);var m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.tileView.onContextualEvent=m;var C={expandInput:{stdTemplate:"expandInputtemplate"}},v={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new g}catch(e){console.log(e)}this.membersDatagrid.getTypeRepresentationFactory().registerTypeTemplates(v),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(C),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),o.toolbar=this.membersDatagrid.setToolbar(o.writetoolbarDefinition()),this.toolbar=o.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(v),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(C);t=this;this.membersDatagrid.addEventListener("allCellsRendered",function(){t.membersDatagrid.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.membersDatagrid.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.membersDatagrid.getTreeDocument().getXSO().onAdd(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}));if(e.getTreeDocument()){const i=e.getTreeDocument().getSelectedNodes().length;t._modelEvents.publish({event:"co-members-object-selection-update",data:{count:i}})}}),t.membersDatagrid.getTreeDocument().getXSO().onRemove(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}));0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"co-members-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}),t.membersDatagrid.addEventListener(i.POINTERHIT,function(e,i){console.log(">>>>>>>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),t.onItemClick(e,i)}),this.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount&&(console.log("ca-DataGrid-on-dblclick"),i.nodeModel.select(!0),t._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}))},this.membersDatagridView=UWA.createElement("div",{id:"outer-member-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-member-grid-div"});var f=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-member-grid-div"});this.toolbar.inject(f);var b=UWA.createElement("div",{class:"content-member-grid-div expanded-header-height"}),w=UWA.createElement("div",{class:"content-member-tile-div membertileView expanded-header-height"}),D=UWA.createElement("div",{styles:{position:"relative"},class:"content-member-filter-div memberfilterView hideView"}),S=UWA.createElement("div",{styles:{position:"relative"},class:"content-add-member-div addmemberView hideView"}),E=UWA.createElement("div",{class:"hideView",id:"memberEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(E);var O={target:D,model:this.options.treeDocument},y={id:this.options.contextDetails.id,target:S,model:this.options.treeDocument};r.createMemberFilter(O),s.createAddMemberPanel(y),this.membersDatagrid.inject(b),this.tileView.inject(w),E.inject(w),this.membersDatagridView.addContent(f),this.membersDatagridView.addContent(D),this.membersDatagridView.addContent(S),this.membersDatagridView.addContent(b),this.membersDatagridView.addContent(w)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMemberFilterLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAAddMemberLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersFeaturesUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";return e.extend({init:function(e){this._parent(e);var t=this;this._modelEvents=null,this._modelEvents=e.contextDetails._modelEvents,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),p.subscribe("idcard-header-minified",function(e){e.value?(t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").addClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("minified-header-height")):(t.membersDatagridView.getElement(".content-member-grid-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("minified-header-height"))})},render:function(){try{var e=this.processColumns(),t=this,p={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder,identifier:"width",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(t,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){c.readyDragContent(e,t)},onDragStartCell:function(e,t){c.readyDragContent(e,t)}};p=UWA.merge(p,this.options);var h={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.membersDatagrid=new n(p),this.membersDatagrid.rowSelection="single",this.membersDatagrid.cellSelection="none";let _=this.membersDatagrid;this._modelEvents.publish({event:"hideEmpty-datagrid",data:_}),this.tileView=new a(h);var m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.tileView.onContextualEvent=m;var C={expandInput:{stdTemplate:"expandInputtemplate"}},v={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new g}catch(e){console.log(e)}this.membersDatagrid.getTypeRepresentationFactory().registerTypeTemplates(v),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(C),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),o.toolbar=this.membersDatagrid.setToolbar(o.writetoolbarDefinition()),this.toolbar=o.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(v),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(C);t=this;this.membersDatagrid.addEventListener("allCellsRendered",function(){t.membersDatagrid.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.membersDatagrid.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.membersDatagrid.getTreeDocument().getXSO().onAdd(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}))}),t.membersDatagrid.getTreeDocument().getXSO().onRemove(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}))}),t.membersDatagrid.addEventListener(i.POINTERHIT,function(e,i){console.log(">>>>>>>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),t.onItemClick(e,i)}),this.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount&&(console.log("ca-DataGrid-on-dblclick"),i.nodeModel.select(!0),t._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}))},this.membersDatagridView=UWA.createElement("div",{id:"outer-member-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-member-grid-div"});var f=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-member-grid-div"});this.toolbar.inject(f);var b=UWA.createElement("div",{class:"content-member-grid-div expanded-header-height"}),w=UWA.createElement("div",{class:"content-member-tile-div membertileView expanded-header-height"}),D=UWA.createElement("div",{styles:{position:"relative"},class:"content-member-filter-div memberfilterView hideView"}),S=UWA.createElement("div",{styles:{position:"relative"},class:"content-add-member-div addmemberView hideView"}),E=UWA.createElement("div",{class:"hideView",id:"memberEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(E);var O={target:D,model:this.options.treeDocument},y={id:this.options.contextDetails.id,target:S,model:this.options.treeDocument};r.createMemberFilter(O),s.createAddMemberPanel(y),this.membersDatagrid.inject(b),this.tileView.inject(w),E.inject(w),this.membersDatagridView.addContent(f),this.membersDatagridView.addContent(D),this.membersDatagridView.addContent(S),this.membersDatagridView.addContent(b),this.membersDatagridView.addContent(w)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridView","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil","DS/ENOChgGovernanceUX/scripts/model/facets/members/ChgMembersDataGridModel","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";var m={createMembersView:function(a){var o=this,l={};l=UWA.merge(l,a),this._modelEvents=l.contextDetails._modelEvents,o.id=l.id,l.columns=i.getColumns(),o.ChgMembersDataGridModel=new n(a.id),l.treeDocument=o.ChgMembersDataGridModel.createTreeDocument(),o.subscribeToModelEvents(l.treeDocument),o.ChgMembersTreeModel=l.treeDocument;var c=new e(l);o.membersDataGridView=c,g.mask(l.target);let d=o.membersDataGridView.membersDatagrid;r.getChangeOrderMembers(a.id).then(function(e){console.log("Orchestration list: "+e);var i=s.processedChangeOrderMemberList(e);if(0==i.length){let e=document.getElementById("coMembers");e&&g.isMasked(e)&&g.unmask(e),o._modelEvents.publish({event:"showEmpty-datagrid",data:d})}o.ChgMembersDataGridModel.loadChangeOrderMembersData(l.treeDocument,i),0==l.treeDocument.getChildren().length?t.showEmptyView():t.hideEmptyView(),t.changeView()},function(e){let t=document.getElementById("coMembers");return t&&g.isMasked(t)&&g.unmask(t),Promise.reject(e)})},subscribeToModelEvents:function(e){var t=this;this._modelEvents._pubsub.topics[this._modelEvents._formatEvent("co-members-object-selection-update")]||this._modelEvents.subscribe({event:"co-members-object-selection-update"},function(e){m.handleObjectSelectionUpdate(e)}),p.unsubscribe(`${e.options.id}:${widget.id}`),p.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgMembersTreeModel),e._cleanBIFilterProxy()})})},changeView:function(e){i.changeView("GridView")},addNodesInLayout:function(e){m.ChgMembersDataGridModel.addNodesInLayoutModel(this.ChgMembersTreeModel,e)},removeHandler:function(){if(0!=m.ChgMembersDataGridModel.treeDocument.getSelectedNodes().length){let e=document.getElementById("coMembers");e&&g.mask(e)}m.ChgMembersDataGridModel.removeChildren()},updatePersonRole:function(e,t){if(console.log("updatePersonRole"),0==m.ChgMembersTreeModel.getSelectedNodes().length);else{var n="",a={person:[],userGroup:[]},o="",r=t.role,s=Array.isArray(r)?t[r[0]]:t[r];if("Route Template"==t.currentObjType||"Group"==t.currentObjType)var l=m.ChgMembersTreeModel.getSelectedNodes()[0].options.grid.id;if("Person"==t.currentObjType)var c=m.ChgMembersTreeModel.getSelectedNodes()[0].options.grid.userId;r.indexOf("Coordinator")>=0&&(n=c),r.indexOf("Follower")>=0&&("Person"==t.currentObjType?a.person.push(c):"Group"==t.currentObjType&&a.userGroup.push(l)),r.indexOf("Approver")>=0&&(o=l);var d=i.makeUpdateMemberJson(s,n,o,a);"DISCONNECT"==s&&1==t.showConfirmation?m.showConfirmationDialog(d):m.updateCOPeople(d,!1,r)}},showConfirmationDialog:function(e){var t=new c({}),i=document.getElementById("outer-member-grid-div");t.inject(i),new d({immersiveFrame:t,title:h.CHG_Member_Remove_Title,content:h.CHG_Member_Remove_Message,activeFlag:!1,modelFlag:!0,width:500,buttons:{No:new u({onClick:function(e){t.destroy()}}),Yes:new u({onClick:function(i){t.destroy(),m.updateCOPeople(e,!0)}})}}).addEventListener("close",function(e){t&&t.destroy()})},updateCOPeople:function(e,t,n){if(""!=e){var a=m.id;r.updateChangeOrderMembers(a,e).then(function(e){var a=m.ChgMembersTreeModel,o=a.getSelectedNodes()[0];if(1==t)"Coordinator"==o.options.grid.role&&(i.isChangeCoordinatorConnected=!1),"Approver"==o.options.grid.role&&(i.isRouteTemplateConnected=!1),o.remove();else if(""!=n&&1==e.success){a.prepareUpdate();var r=o.options.grid.role,s=o.options.description,l=","+n,c="Coordinator"==n?h.CHG_Member_Role_ChangeCoordinator:h.CHG_Member_Role_Follower;if(c=", "+c,e.data.length>0){var d=s.concat(c);o.options.description=d,o.setAttribute("roleList",d),o.options.grid.role=r.concat(l),o.options.grid.roles.push(n),"Coordinator"==n&&(i.isChangeCoordinatorConnected=!0)}else{d=s.replace(c,"");o.setAttribute("roleList",d),o.options.description=d,o.options.grid.role=r.replace(l,"");var u=o.options.grid.roles.filter(function(e,t,i){return e!=n});o.options.grid.roles=u,"Coordinator"==n&&(i.isChangeCoordinatorConnected=!1)}a.pushUpdate()}})}},globalSubscribeForCOMemberView:function(){a.addObserver("ChgMembersDataGridLayout","CO-AccessBit-Update",m.handleAccessBitUpdate)},handleAccessBitUpdate:function(e){e.id==m.id&&(console.log("ChgMembersDataGridLayout handleAccessBitUpdate: "+e.accessBits),"false"==e.accessBits.SetCoordinator?m.setCoordinatorAccessBit=!1:m.setCoordinatorAccessBit=!0,"false"==e.accessBits.ManageFollowers?m.ManageFollowersAccessBit=!1:m.ManageFollowersAccessBit=!0,"false"==e.accessBits.ManageRouteTemplates?m.manageApproverAccessBit=!1:m.manageApproverAccessBit=!0,m.setCoordinatorAccessBit||m.manageApproverAccessBit?(m.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{visibleFlag:!0}),m.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{visibleFlag:!0})):(m.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{visibleFlag:!1}),m.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1})))},handleObjectSelectionUpdate:function(e){0===e.count?m.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{disabled:!0}):m.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{disabled:!1})}};return m.globalSubscribeForCOMemberView(),m}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil","DS/ENOChgGovernanceUX/scripts/model/changeAction/facets/members/ChgCAMembersDataGridModel","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/UIKIT/Mask","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";var m={createMembersView:function(a){var o=this,r={};r=UWA.merge(r,a),this._modelEvents=r.contextDetails._modelEvents,o.id=r.id,r.columns=i.getColumns(),o.ChgCAMembersDataGridModel=new n(a.id),r.treeDocument=o.ChgCAMembersDataGridModel.createTreeDocument(),o.ChgMembersTreeModel=r.treeDocument;var c=new e(r);o.membersDataGridView=c,p.mask(r.target);let d=o.membersDataGridView.membersDatagrid;s.getChangeActionMembers(a.id).then(function(e){console.log("Member list: "+e);let i=l.processedChangeActionMemberList(e);if(0==i.length){let e=document.getElementById("caMembers");e&&p.isMasked(e)&&p.unmask(e),o._modelEvents.publish({event:"showEmpty-datagrid",data:d})}o.ChgCAMembersDataGridModel.loadChangeActionMembersData(r.treeDocument,i),0==r.treeDocument.getChildren().length?t.showEmptyView():t.hideEmptyView(),t.changeView()},function(e){let t=document.getElementById("caMembers");return t&&p.isMasked(t)&&p.unmask(t),Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},addNodesInLayout:function(e){m.ChgCAMembersDataGridModel.addNodesInLayoutModel(this.ChgMembersTreeModel,e)},removeHandler:function(){if(0!=m.ChgCAMembersDataGridModel.treeDocument.getSelectedNodes().length){let e=document.getElementById("caMembers");e&&p.mask(e)}m.ChgCAMembersDataGridModel.removeChildren()},updatePersonRole:function(e,t){if(console.log("updatePersonRole"),0==m.ChgMembersTreeModel.getSelectedNodes().length);else{let e=[],n={person:[],userGroup:[]},a={person:[],routeTemplate:""},o=t.role,r=Array.isArray(o)?t[o[0]]:t[o],s="",l="";"Route Template"!=t.currentObjType&&"Group"!=t.currentObjType||(s=m.ChgMembersTreeModel.getSelectedNodes()[0].options.grid.id),"Person"==t.currentObjType&&(l=m.ChgMembersTreeModel.getSelectedNodes()[0].options.grid.userId),o.indexOf("contributor")>=0&&e.push(l),o.indexOf("follower")>=0&&("Person"==t.currentObjType?n.person.push(l):"Group"==t.currentObjType&&n.userGroup.push(s)),o.indexOf("approver")>=0&&("Person"==t.currentObjType?a.person.push(l):"Route Template"==t.currentObjType&&(a.routeTemplate=s));let c=i.makeUpdateMemberJson(r,e,a,n);"DISCONNECT"==r&&1==t.showConfirmation?m.showConfirmationDialog(c):m.updateCAPeople(c,!1,o)}},showConfirmationDialog:function(e){var t=new d({}),i=document.getElementById("outer-member-grid-div");t.inject(i),new u({immersiveFrame:t,title:h.CHG_Member_Remove_Title,content:h.CHG_Member_Remove_Message,activeFlag:!1,modelFlag:!0,width:500,buttons:{No:new g({onClick:function(e){t.destroy()}}),Yes:new g({onClick:function(i){t.destroy(),m.updateCAPeople(e,!0)}})}}).addEventListener("close",function(e){t&&t.destroy()})},updateCAPeople:function(e,t,n){if(""!=e){let a=m.id;s.updateChangeActionMembers(a,e).then(function(e){let a=m.ChgMembersTreeModel,o=a.getSelectedNodes()[0];if(1==t){if("Coordinator"==o.options.grid.role&&(i.isChangeCoordinatorConnected=!1),"approver"==o.options.grid.role&&("Route Template"==o.options.grid.type&&(r.reviewerType.typeOfReviewer=""),"Person"==o.options.grid.type)){let e=a.getChildren(),t=!1,i=0;for(var s=0;s<e.length;s++){if(e[s].options.grid.role.indexOf("approver")>=0&&2==++i){t=!0;break}}0==t&&(r.reviewerType.typeOfReviewer="")}o.remove()}else if(""!=n&&1==e.success){a.prepareUpdate();let t=o.options.grid.role,l=o.options.description,c=","+n,d=i.getRoleNLSValue(n);if(d=", "+d,e.data.length>0){let e=l.concat(d);o.options.description=e,o.setAttribute("roleList",e),o.options.grid.role=t.concat(c),o.options.grid.roles.push(n),"approver"==n&&(r.reviewerType.typeOfReviewer="Person")}else{let e=l.replace(d,"");o.setAttribute("roleList",e),o.options.description=e,o.options.grid.role=t.replace(c,"");let i=o.options.grid.roles.filter(function(e,t,i){return e!=n});if(o.options.grid.roles=i,"approver"==n){let e=a.getChildren(),t=!1;for(s=0;s<e.length;s++){if(e[s].options.grid.role.indexOf("approver")>=0){t=!0;break}}0==t&&(r.reviewerType.typeOfReviewer="")}}a.pushUpdate()}})}},globalSubscribeForCOMemberView:function(){a.addObserver("ChgCAMembersDataGridLayout","CO-AccessBit-Update",m.handleAccessBitUpdate)},handleAccessBitUpdate:function(e){e.id==m.id&&(m.addContributorAccessBit=e.accessBits.AddContributor,m.addFollowerAccessBit=e.accessBits.AddFollower,m.addReviewerAccessBit=e.accessBits.AddReviewer,"false"==m.addReviewerAccessBit&&"false"==m.addFollowerAccessBit&&"false"==m.addContributorAccessBit?(m.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{disabled:!0}),m.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{disabled:!0})):(m.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{disabled:!1}),m.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{disabled:!1})))}};return m.globalSubscribeForCOMemberView(),m}),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil",["UWA/Core","DS/CoreEvents/ModelEvents","DS/Controls/Button","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/approvals/ChgCAApprovalsView","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";return{showRMBMenuOnGrid:function(e,t){return new Promise(function(i,n){let o="false",r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const s=r.map(e=>e.options.grid.id);r.length>1&&(o="true");let l=[];l.push(u.createPropertyPushItem(s)),l.push(a.getRelationalExplorerMenu(e,t));let c={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(c);let d=h("DS/ENOChgServices/scripts/services/ChgDataService"),g=null,m=h("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").openWith(c),C=[],v=document.getElementById("outer-co-div");C.push(m),"false"==o&&(g=d.getChangeActionUserAccess(t.cellInfos.nodeModel.options.grid.id),C.push(g)),Promise.all(C).then(function(n){n[0]&&l.push(n[0]),l.push(a.getMaturityMenu(t)),l.push(p.getCopyLink(r)),"false"==o?(n[1]&&"true"==n[1].data[0].Transfer&&l.push(a.getTransferMenu(e,t)),"true"==n[1].data[0].Delete&&l.push(a.getDeleteMenu(e,t,v))):(l.push(a.getTransferMenu(e,t)),l.push(a.getDeleteMenu(e,t,v))),i(l)})})},createMembersTab:function(t){let i=e.createElement("div");return i.classList.add("chg-member-container"),t.target=i,o.createMembersView(t),i},createProposedChangeTab:function(t){let i=e.createElement("div");return i.classList.add("chg-proposed-container"),t.target=i,r.createProposedChangesView(t),i},createRealizedChangeTab:function(t){let i=e.createElement("div");return i.classList.add("chg-realized-container"),t.target=i,s.createRealizedChangesView(t),i},createApprovalsTab:function(t,i){let n=e.createElement("div"),a=e.createElement("div");a.classList.add("chg-Approval-container");let o=e.createElement("div",{id:"chg-Task-container"});return n.appendChild(a),t.target=a,t.taskContainer=o,l.createApprovalsView(t),a},createCustomColumn:function(e){let t=this;return new Promise(function(e,i){let n=c.getGlobalVariable().changeActionSubTypes;d.getCombinedClassList(n).then(function(i){d.getPropertyForClassGrid(i).then(function(i){let n=d.makeCombinedColumnList(i),a=t.filterColumn(n);e(a)})})})},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:organizationResponsible"];for(let t of n)e.delete(t);return e.forEach((e,n,a)=>{let o=t.createColumnDefination(e,n);i.push(o)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:g.getGetCellValueFunction(i,t)}}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAcontextGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeAction/facets/context/ChgCAcontextDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";let h={createContextView:function(t,a){var o=this;let r={};(r=UWA.merge(r,a)).target=t,r.columns=i.getColumns(),this.ChgCAcontextDataGridModel=new n(r.id),this.id=r.id,this.modelEvents=r.modelEvents,this.treeDocument=r.treeDocument=this.ChgCAcontextDataGridModel.createTreeDocument(),this.subscribeToModelEvents(r.treeDocument),p.makeDroppable(r.target,o.dropHandler),d.getCAContext(a.id).then(function(t){var i=u.processedChangeActionContext(t,a.id);o.chgCAcontextDataGridModel=new n(a.id),o.chgCAcontextDataGridModel.loadContextData(r.treeDocument,i),o.contextView=new e(r);var s=u.getDefaultFilter(r.columns);r.treeDocument.setFilterModel(s),0==r.treeDocument.getChildren().length?r.treeDocument._modelEvents.publish({event:"treeEmpty"}):r.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),h.changeView()},function(e){return Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);h.ChgCAcontextDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType,updateAction:"CONNECT"});h.ChgCAcontextDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()})},addExistingHandler:function(){let e=h.ChgCAcontextDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingContexts",extendedQuery:h.createExcludeListForSearch(e)},i=l.getGlobalVariable().contextSearchType;if(l.getGlobalVariable().is3DSpace){const t="wdg_"+(new Date).getTime();var n="../common/emxFullSearch.jsp?field=TYPES="+i+"&txtExcludeOIDs="+e.map(e=>e.options.grid.id).toString()+"&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+t;showChooser(n,850,630);var o=function(e){if(e.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(t)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,h.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",o)}else console.log("inside EVENT")};window.addEventListener("storage",o)}else if(l.getGlobalVariable().isNative){g.DispatchEventToWin("CHG_Add_Context","CHG_Add_Context")}else{const e=s.activateSearch();s.search(a.CHG_GOV_AddExistingContext,i,h.OnSearchComplete,"contexts",e,void 0,void 0,t)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){if(l.getGlobalVariable().isNative){let t=e.split("~"),a=[];for(var i=0;i<t.length;i++)a.push(t[i]);let o=[];for(var n=0;n<t.length;n++)o.push(a[n].split(","));e=o}let a=[];for(i=0;i<e.length;i++)a.push({id:e[i][0],type:e[i][2],updateAction:"CONNECT"});a.length&&(t.hideEmptyView(),h.ChgCAcontextDataGridModel.addExistingChildren(a))},globalSubscribeForCAContextView:function(){r.addObserver("ChgCAcontextDataGridLayout","CO-AccessBit-Update",h.handleAccessBitUpdate)},handleAccessBitUpdate:function(e){"false"==e.accessBits.AddContext?(h.accessBit=!1,h.contextView.contextDataGridView.getToolbar().updateNodeModel("add",{disabled:!0}),h.contextView.contextDataGridView.getToolbar().updateNodeModel("remove",{disabled:!0})):(h.accessBit=!0,h.contextView.contextDataGridView.getToolbar().updateNodeModel("add",{disabled:!1}),h.contextView.contextDataGridView.getToolbar().updateNodeModel("remove",{disabled:!1}))},removeHandler:function(){const e=h.treeDocument.getSelectedNodes();if(e.length>0){let n=[];for(var i=0;i<e.length;i++)n.push({id:e[i].options.grid.id,type:e[i].options.grid.type,updateAction:"DISCONNECT"});h.ChgCAcontextDataGridModel.removeExistingChildren(n).then(function(e){0==h.treeDocument.getAllDescendants().length&&t.showEmptyView()},function(e){})}else o.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)}};return h.globalSubscribeForCAContextView(),h}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgServices/scripts/services/ChgDataService","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"context-CA-container"}))},updateFacet:function(){var e=this;o.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var n={id:t.get("objectId")};i.getObjectTypeInformation(n.id).then(function(t){if("Change Action"==t){let t=n.id;i.getChangeActionUserAccess(t).then(function(e){e.data[0].id,e.data[0]});var a=e.elements.container;c.createContextView(a,n),o.unmask(e.elements.container)}})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgChangeActionDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";return e.extend({init:function(e){this._parent(e),this._modelEvents=null,"undefined"!=e&&"undefined"!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.caDatagridView=""},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){let t=this.processColumns(),h=this;var e={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:"",identifier:"chgCASummaryGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(h,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){o.readyDragContent(e,t)},onDragStartCell:function(e,t){o.readyDragContent(e,t)}};e=UWA.merge(e,this.options),this.caDatagrid=new n(e),this.caDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,t){e.map(e=>{if(e.identifier==t){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCAList=e}}})},this.caDatagrid.onDelayedModelDataRequest=function(e){let t=h.caDatagrid.getCustomViewsManager().getCustomViews(),i=h.caDatagrid.getCustomViewsManager()._currentCustomViewIdentifier;t.map(e=>{if(e.identifier==i){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCAList=e}}});var n=e.collectionView;let a=[],o=[],r=["applicabilityNLS","organizationNLS","collabspaceNLS","co_Owner","sev","maturityNLS","co_name"],s=p.getGlobalVariable().customeViewCAList,l=[];if(s.forEach(function(e){r.includes(e)||l.push(e)}),-1!=e.endNodeIndex&&-1!=e.startNodeIndex){for(let t=e.startNodeIndex;t<=e.endNodeIndex;t++){a.push(n.model[t].options.grid.id),o.push(n.model[t]);for(let e=0;e<l.length;e++)n.model[t].setAttribute(l[e],void 0)}var c=a.filter(e=>!!e);c.length>0&&g.updateAsynAttributeColumn(l,c,o)}},this.caTilesView=new u({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){o.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});let m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(h,e).then(function(e){return e})}};this.caTilesView.onContextualEvent=m;let C={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:s.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:s.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},v={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}},f={expandInput:{stdTemplate:"expandInputtemplate"}},b={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new c}catch(e){console.log(e)}this.caDatagrid.getTypeRepresentationFactory().registerTypeTemplates(b),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(f),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(C),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(v),a.toolbar=this.caDatagrid.setToolbar(a.writetoolbarDefination()),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(b),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(f),h.toolbar.addEventListener("onReady",function(e){let t=h.toolbar.getNodeModelByID("addNewBlankCAId");t&&t._associatedView.registerkeyDownCallback(d.createBlankChangeOrder)}),this.caDatagrid.addEventListener("allCellsRendered",function(){h.caDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+h.caDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+h.caDatagrid.getTreeDocument().getSelectedNodes().length}}]),h.caTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+h.caTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+h.caTilesView.getTreeDocument().getSelectedNodes().length}}])}),h.caDatagrid.addEventListener(i.POINTERHIT,function(e,t){h.onItemClick(e,t)}),h.caDatagrid.getTreeDocument().getXSO().onAdd(function(e){h.caDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+h.caDatagrid.getTreeDocument().getSelectedNodes().length}}),h.caTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+h.caDatagrid.getTreeDocument().getSelectedNodes().length}}),h._modelEvents.publish({event:"ca-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})}),h.caDatagrid.getTreeDocument().getXSO().onRemove(function(e){h.caDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),h.caTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?h._modelEvents.publish({event:"ca-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):h._modelEvents.publish({event:"ca-DataGrid-on-unselect",data:{model:e,context:e},context:e})}),h.caTilesView.addEventListener(i.POINTERHIT,function(e,t){h.onItemClick(e,t)}),this.onItemClick=function(e,t){t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount&&(t.nodeModel.select(!0),h._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel}))},this.caDatagridView=UWA.createElement("div",{id:"outer-ca-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-ca-div"});let w=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-ca-div"});this.toolbar.inject(w);let D=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 76px)",position:"relative"},class:"content-ca-div cagridView showView"}),S=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 76px)",position:"relative"},class:"catileView hideView"}),E=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:s.CHG_GOV_DataGrid_PlaceHolder_NoChgAction}).inject(E),this.caDatagrid.inject(D),this.caTilesView.inject(S),E.inject(S),this.caDatagridView.addContent(w),this.caDatagridView.addContent(D),this.caDatagridView.addContent(S),this.caDatagridView.inject(this.options.target),this.caDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.subscribe({event:"ca-DataGrid-on-search"},function(e){var t=e.query;t&&h.caDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(t)||e.options.grid.name.contains(t)?e.isVisible()||!e.options.grid.title.contains(t)&&!e.options.grid.name.contains(t)||e.show():e.hide()})}),this._modelEvents.subscribe({event:"ca-DataGrid-on-reset-search"},function(e){h.caDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})})}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.caDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRrelatedScopeGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";let h={createRelatedScopeView:function(t,a){var o=this;let r={};(r=UWA.merge(r,a)).target=t,r.columns=i.getColumns(),this.ChgCRrelatedScopeDataGridModel=new n(r.id),this.id=r.id,this.modelEvents=r.modelEvents,o.treeDocument=r.treeDocument=o.ChgCRrelatedScopeDataGridModel.createTreeDocument(),o.ChgCRrelatedScopeTreeModel=r.treeDocument,o.ChgCRrelatedScopeDataGridModel.registerCustomFilter(),this.subscribeToModelEvents(r.treeDocument),g.makeDroppable(r.target,o.dropHandler),d.getCRRelatedScope(a.id).then(function(t){var i=u.processedChangeRequestRelatedScope(t,a.id);o.chgCRrelatedScopeDataGridModel=new n(a.id),o.chgCRrelatedScopeDataGridModel.loadRelatedScopeData(r.treeDocument,i),o.relatedScopeView=new e(r),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(o.ChgCRrelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:o.ChgCRrelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,o.ChgCRrelatedScopeTreeModel)}),0==r.treeDocument.getChildren().length?r.treeDocument._modelEvents.publish({event:"treeEmpty"}):r.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),h.updateViewBasedOnAccessBit(),h.changeView()},function(e){return Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);h.ChgCRrelatedScopeDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType,updateAction:"CONNECT"});h.ChgCRrelatedScopeDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),p.unsubscribe(`CR_RelatedScope:${widget.id}`),p.subscribe(`CR_RelatedScope:${widget.id}`,function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRrelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRrelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRrelatedScopeTreeModel)})}),p.unsubscribe(`${e.options.id} of ${widget.id}`),p.subscribe(`${e.options.id} of ${widget.id}`,function(t){h.ChgCRrelatedScopeDataGridModel.filterView(t,e)}),p.unsubscribe(`${e.options.id} colorize ${widget.id}`),p.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){h.ChgCRrelatedScopeDataGridModel.enableColorizeView(t,e)}),p.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),p.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){h.ChgCRrelatedScopeDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-related-scope-object-selection-update")]||this.modelEvents.subscribe({event:"cr-related-scope-object-selection-update"},function(e){h.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){let e=h.ChgCRrelatedScopeDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingRelatedScope",extendedQuery:h.createExcludeListForSearch(e)},i="Program,Project Space,Model,Products,VPMReference,RFLVPMLogicalReference";if(l.getGlobalVariable().is3DSpace){const t="wdg_"+(new Date).getTime();var n="../common/emxFullSearch.jsp?field=TYPES="+i+"&txtExcludeOIDs="+e.map(e=>e.options.grid.id).toString()+"&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+t;showChooser(n,850,630);var o=function(e){if(e.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(t)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,h.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",o)}else console.log("inside EVENT")};window.addEventListener("storage",o)}else{const e=s.activateSearch();s.search(a.CHG_GOV_RelatedScope,i,h.OnSearchComplete,"relatedScope",e,void 0,void 0,t)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){let i=[];for(var n=0;n<e.length;n++)i.push({id:e[n][0],type:e[n][2],updateAction:"CONNECT"});i.length&&(t.hideEmptyView(),h.ChgCRrelatedScopeDataGridModel.addExistingChildren(i))},globalSubscribeForCRRelatedScopeView:function(){r.addObserver("ChgCRrelatedScopeDataGridLayout","CO-AccessBit-Update",h.handleAccessBitUpdate)},handleAccessBitUpdate:function(e){"false"==e.accessBits.ManageReportedAgainst?(h.accessBit=!1,h.updateViewBasedOnAccessBit()):(h.accessBit=!0,h.updateViewBasedOnAccessBit())},updateViewBasedOnAccessBit:function(){0==h.accessBit?(h.relatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("add",{visibleFlag:!1}),h.relatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1})):(h.relatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("add",{visibleFlag:!0}),h.relatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}))},removeHandler:function(){const e=h.treeDocument.getSelectedNodes();if(e.length>0){let n=[];for(var i=0;i<e.length;i++)n.push({id:e[i].options.grid.id,type:e[i].options.grid.type,updateAction:"DISCONNECT"});h.ChgCRrelatedScopeDataGridModel.removeExistingChildren(n).then(function(e){0==h.treeDocument.getAllDescendants().length&&t.showEmptyView()},function(e){})}else o.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){0===e.count?h.relatedScopeView.toolbar.updateNodeModel("remove",{disabled:!0}):h.relatedScopeView.toolbar.updateNodeModel("remove",{disabled:!1})}};return h.globalSubscribeForCRRelatedScopeView(),h}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRRelatedScopefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgServices/scripts/services/ChgDataService","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout"],function(e,t,i,n,a,o,r,s,l,c){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"relatedScope-CR-container"}))},updateFacet:function(){var e=this;o.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var n={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};i.getObjectTypeInformation(n.id).then(function(t){if("Change Request"==t)if(c.accessBit){var a=e.elements.container;c.createRelatedScopeView(a,n),o.unmask(e.elements.container)}else i.getChangeRequestUserAccess(n.id).then(function(t){var i=t.data[0].dataelements;c.accessBit="true"==i.ManageReportedAgainst;var a=e.elements.container;c.createRelatedScopeView(a,n),o.unmask(e.elements.container)})})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",["UWA/Class","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgChangeActionDataGridView","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/model/changeAction/ChgCADataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCATileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/Controls/ProgressBar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgErrors","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f,b,w){"use strict";let D={loadRealTimeCADataPromise:function(e){return new Promise(function(t,i){a.getTimestamp().then(function(n){var r=o.processTimestampData(n);a.getConfiguredChangeActionList({indexed:!1,simplifiedJSON:!0,timestamp:r,filter:e}).then(function(e){o.processedCASummaryList(e).then(function(i){t({realTimeData:e,processedCAList:i})})},function(e){i(e)})},function(e){i(e)})})},loadIndexedCADataPromise:function(e){return new Promise(function(t,i){a.getConfiguredChangeActionList(e).then(function(e){o.processedCASummaryList(e).then(function(i){t({CASummaryList:e,processedCAList:i})},function(e){i(e)})},function(e){i(e)})})},postProcessing:function(){0==this.treeDocument.getChildren().length?this.treeDocument._modelEvents.publish({event:"caSummaryEmpty"}):this.treeDocument._modelEvents.publish({event:"caSummaryNotEmpty"}),this.caGridView.caDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}],this.caGridView.reapplySortModel(),this.globalSubscribeCOSummaryUpdateFromPropertyPanel(),this.globalSubscribeForTransferFromCOSummaryView(),this.globalSubscribeForCAGroupCreation()},updateTagger:function(){var e=this;u.getGlobalVariable().isNative&&"false"==u.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.treeDocument),t._cleanBIFilterProxy();let i={data:{roots:e.treeDocument.getAllDescendants()}};t.cleanPathTag(),t._onSetPathTags(i,e.treeDocument)})},createChangeActionView:function(e){var a=this;this._pathChangeActionSummary=[p._KEY,p._VIEWS_PREFERENCES,p._LIST_VIEW,p._FILTERVIEW];var r=g.getFilter(this._pathChangeActionSummary),s={};s=UWA.merge(s,e),this.options=s,s.target&&(s.target.empty(),f.mask(s.target)),s.columns=i.getColumns(),a.ChgCADataGridModel=new n,C.createCustomColumn().then(async function(e){u.getGlobalVariable().customeViewCAList=[],s.columns=[...s.columns,...e],a.treeDocument=s.treeDocument=a.ChgCADataGridModel.createTreeDocument(),a.ChgCAlayoutModel=a.treeDocument,a.ChgCADataGridModel.registerCustomFilter();var i=o.getDefaultFilter(s.columns);s.treeDocument.setFilterModel(i),a.caGridView=new t(s),await a.caGridView.render(),a.subscribeToModelEvents(a.treeDocument);var n=a.caGridView.caDatagrid.getCustomViewsManager().getCurrentCustomView();n&&n.columnsVisibleFlag&&(u.getGlobalVariable().customeViewCAList=Object.keys(n.columnsVisibleFlag));var l="";"inactive"===r?l="inactiveCA":(l="activeCA",g.updateFilter(a._pathChangeActionSummary,"activeCA")),a.updateGrid(l)})},changeView:function(){i.changeView("GridView")},refreshLayout:function(e){let t=this.ChgCAlayoutModel;this.ChgCADataGridModel.updateNodeIndexed(t,e),this.caGridView.caDatagrid.ensureNodeModelVisible(this.ChgCAlayoutModel.getChildren()[0],!1)},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.caGridView.caDatagrid.placeholder=v.CHG_GOV_DataGrid_PlaceHolder_FetchChgAction},updateGrid:async function(e){var t=this;if(t.preUpdateProcessing(),t.options.target&&f.mask(t.options.target),"inactiveCA"!=e){var i=await t.loadRealTimeCADataPromise(e);t.ChgCADataGridModel.loadChangeActionData(t.treeDocument,i.processedCAList)}t.params.filter=e,t.loadIndexedCADataPromise(t.params).then(async function(e){t.ChgCADataGridModel.loadIndexedChangeActions(t.treeDocument,e.processedCAList),t.currentPage=parseInt(e.CASummaryList.summary["Current Page"]),t.totalPages=parseInt(e.CASummaryList.summary["Total Pages"]),t.options.target&&f.unmask(t.options.target),t.caGridView.caDatagrid.placeholder=v.CHG_GOV_DataGrid_PlaceHolder_NoChgAction,t.currentPage<t.totalPages?(t.updateTagger(),t.caGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.caGridView.caDatagrid.onInfiniteScroll(async function(e){t.getNextPageChangeActions("DGV")}),t.caGridView.caTilesView.onInfiniteScroll(async function(e){t.getNextPageChangeActions("RTV")})):(t.updateTagger(),t.caGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())})},getNextPageChangeActions:async function(e){if(this.currentPage<this.totalPages){this.options.target&&f.mask(this.options.target),this.params.pageNumber++,this.currentPage++;let t=await this.loadIndexedCADataPromise(this.params);this.ChgCADataGridModel.loadIndexedChangeActions(this.treeDocument,t.processedCAList),this.updateTagger(),this.caGridView.setListnersOnToolbar(),this.loadingViewPreference(),this.postProcessing(),"DGV"===e?this.caGridView.caDatagrid.infiniteScrollProcessDone():this.caGridView.caTilesView.infiniteScrollProcessDone(),this.options.target&&f.unmask(this.options.target)}},removeDataFromGrid:function(e,t){D.ChgCAlayoutModel.getChildren();for(let t=0;t<e.length;t++){let i=e[t];D.ChgCAlayoutModel.search({shouldStop:function(e){return e.options.grid.id===i&&(D.removingNode(e),!0)}}),0==D.ChgCAlayoutModel.getChildren().length&&D.ChgCAlayoutModel._modelEvents.publish({event:"caSummaryEmpty"})}},removingNode:function(e){this.ChgCAlayoutModel.removeRoot(e)},sortBySeverity:function(){r.sortingData.menu[1].fonticon.content=r.sortingData.menu[1].fonticon.content.replace(" icon-blue","");let e=ChgCRDataGridLayout.caGridView,t=r.toolbar.getNodeModelByID("sorting");r.sortingData.menu[0].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(r.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.caDatagrid.sortModel=[{dataIndex:"sev",sort:"asc"}]):(r.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.caDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:r.sortingData}})},sortByMaturity:function(){r.sortingData.menu[0].fonticon.content=r.sortingData.menu[0].fonticon.content.replace(" icon-blue","");let e=D.caGridView,t=r.toolbar.getNodeModelByID("sorting");r.sortingData.menu[1].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(r.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.caDatagrid.sortModel=[{dataIndex:"maturityNLS",sort:"asc"}]):(r.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.caDatagrid.sortModel=[{dataIndex:"maturityNLS",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:r.sortingData}})},globalSubscribeCOSummaryUpdateFromPropertyPanel:function(){c.addObserver("ChgCADataGridLayout","CO-Properties-Update",this.handleForUpdatingFromPropertyPanel)},globalSubscribeForTransferFromCOSummaryView:function(){c.addObserver("ChgCADataGridLayout","ENOLC_MOVE_CMD_UPDATE",this.handleForCOSummaryTransfer)},globalSubscribeForCAGroupCreation:function(){c.addObserver("ChgCADataGridLayout","CA-Group-Update",this.handleForUpdatingGroup)},handleForUpdatingGroup:function(e){for(var t=D.ChgCAlayoutModel.getAllDescendants(),i=0;i<e.changeactions.length;i++)for(var n=e.changeactions[i].replace("pid:",""),a=0;a<t.length;a++)if(t[a].options.grid.id==n){var o=D.createCustoTooltipForGivenNode(t[a],e);t[a].updateOptions({grid:{"ds6w:changeActionGroup":e.title},customTooltip:o})}var r=document.getElementById("outer-ca-div");r&&f.unmask(r)},createDescForGivenNode:function(e,t){var i="",n="-";null!=e.options.grid.dueDate&&null!=e.options.grid.dueDate&&(n=e.options.grid.dueDate);i=e.options.grid.maturity;return"-"!=n&&(i=i+" | "+n),""!=t.title&&(i=i+" | "+t.title),i},createCustoTooltipForGivenNode:function(e,t){var i="-";null!=e.options.grid.dueDate&&null!=e.options.grid.dueDate&&(i=e.options.grid.dueDate);var n=v.CHG_GOV_DataGrid_Column_Title+": "+e.options.grid.title+"\n"+v.CHG_GOV_DataGrid_Column_Name+": "+e.options.grid.name+"\n"+v.CHG_GOV_DataGrid_Column_Severity+": "+e.options.grid.severity+"\n"+v.CHG_GOV_DataGrid_Column_Owner+": "+e.options.grid.owner+"\n"+v.CHG_GOV_DataGrid_Column_Maturity+": "+e.options.grid.maturity;return"-"!=i&&(n=n+"\n"+v.CHG_GOV_DataGrid_Column_DueDate+": "+i),""!=t.title&&(n=n+"\n"+v.CHG_GOV_DataGrid_Column_Group+": "+t.title),n},handleForUpdatingFromPropertyPanel:function(e){let t=D.ChgCAlayoutModel.getAllDescendants(),a=e.objectId,o=e.type.value;var r=[],s=[];let l="",c="",d="",u="";for(let C=0;C<t.length;C++){if(t[C].options.grid.id==a){if("Change Action"==o?e&&e.Synopsis&&(d=e.Synopsis.value,t[C].options.grid.title=d):e&&e.Title&&(d=e.Title.value,t[C].options.grid.title=d),e&&e.owner){u=t[C].options.grid.name,c=e.owner.value,t[C].options.grid.owner=c;var g=e.owner.value}e&&e.Severity&&(l=e.Severity.value,t[C].options.grid.severity=l);let a=e.Severity.valueDB,v=e.owner.valueDB,f=ChgChangeRequestUtil.createCustomSeverity(a,l),b=i.createCustomOwner(v,c);t[C].options.grid.stateGrade;"Low"==l?r.push("level-low"):"Medium"==l?r.push("level-medium"):"High"==l&&r.push("level-high"),"true"==t[C].options.grid.onHold&&r.push("pause"),s.push(l);var p={};p.name=u,p.title=d,p.severity=l,p.severityNLS=a,p.ownerFullName=g,p.maturityNLS=t[C].options.grid.maturityNLS;var h=n.prototype.createCustomTooltip(p),m=u+" | "+g;t[C].updateOptions({label:t[C].options.grid.title,grid:{title:t[C].options.grid.title,owner:t[C].options.grid.owner,severity:t[C].options.grid.Severity,sev:f,co_Owner:b},statusbarIcons:r,statusbarIconsTooltips:s,customTooltip:h,subLabel:m})}}},handleForCOSummaryTransfer:function(e){let t,a=D.ChgCAlayoutModel.getAllDescendants(),o=[],r="",s="";Object.keys(e.data.attributes).forEach(function(t){let i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,o.push(i.id)});for(let e=0;e<o.length;e++){t=o[e];for(let e=0;e<a.length;e++){if(a[e].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName&&(s=a[e].options.grid.name,r=t.newOwnerId,a[e].options.grid.owner=r,a[e].options.grid.ownerFullName=t.newOwnerFullName),t.newOrganization){let i=t.newOrganization;a[e].options.grid.orgnaizationNLS=i}if(t.newCollabSpace){let i=t.newCollabSpace;a[e].options.grid.collabspaceNLS=i}let o=t.newOwnerFullName,u=i.createCustomOwner(r,o);var l={};l.name=s,l.title=a[e].options.grid.title,l.severity=a[e].options.grid.severity,l.severityNLS=a[e].options.grid.severityNLS,l.ownerFullName=o,l.maturityNLS=a[e].options.grid.maturityNLS;var c=s+" | "+o,d=n.prototype.createCustomTooltip(l);a[e].updateOptions({grid:{collabspaceNLS:a[e].options.grid.collabspaceNLS,organizationNLS:a[e].options.grid.organizationNLS,owner:a[e].options.grid.owner,ownerFullName:a[e].options.grid.ownerFullName,co_Owner:u},customTooltip:d,subLabel:c})}}}},loadingViewPreference:function(){let e=w("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=s.MOBILE_CUTOFF){let t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(ChgCRTileViewLayout.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{let t=e.getCASummaryViewDesktop();void 0===t||"GridView"===t?this.changeView():l.changeView()}},filterView:function(e){i.filterView(e.filter),D.updateGrid(e.filter)},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"caSummaryEmpty"},function(e){l.showEmptyView(),D.caGridView.caDatagrid.placeholder=v.CHG_GOV_DataGrid_PlaceHolder_NoChgAction}),e._modelEvents.subscribe({event:"caSummaryNotEmpty"},function(e){l.hideEmptyView()}),m.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.treeDocument),e._cleanBIFilterProxy();let t={data:{roots:that.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,that.treeDocument)})}),m.subscribe(`${e.options.id} of ${widget.id}`,function(e){D.ChgCADataGridModel.filterView(e)}),m.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){D.ChgCADataGridModel.enableColorizeView(e)}),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){D.ChgCADataGridModel.disableColorizeView(e)})},assignGroupToCAs:function(){var e=D.ChgCAlayoutModel.getSelectedNodes(),t=[];if(e.length>0)if(D.CheckGroupCreateCondition(e)){for(var i=0;i<e.length;i++){var n="pid:"+e[i].options.grid.id;t.push(n)}var a=e[0].options.grid.groupId,o={facetName:"createGroupFromSummary",ChangeActionList:t,oldGroupId:a=""==a||null==a?"":a.indexOf("pid:")>-1?a:"pid:"+a,oldGroupTitle:e[0].options.grid.group};require(["DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionCreateGroup"],function(e){e.createGroup(o)})}else b.error(v.CHG_GROUP_MULTI_CREATE_WARN);else b.error(v.CHG_GROUP_CREATE_WARN)},CheckGroupCreateCondition:function(e){for(var t=!0,i=e[0].options.grid.groupId,n=1;n<e.length;n++){if(i!=e[n].options.grid.groupId){t=!1;break}}return t}};return D}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactedItem/ChgCRImpacedItemDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,a,o,r,s,l,c,d,u){"use strict";var g=u.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});let p=e.extend({init:function(e,t){this.parentCRId=e,this.impactAnalysisId=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"IA_ImpactItem",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",g)},loadImpactedItem:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){e[i].impactedItem&&"IMPACTED"!=e[i].impactedItem?e[i].impact="notImpactedKey":e[i].impact="impactedKey";let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName,o=e.currentNLS;var r,s=this.getCustomTooltip(e);return r=a.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:r,subLabel:n,description:o,grid:e,icons:[e.icon],thumbnail:e.previewicon,contextualMenu:["dummy placeholder"],useAsyncPreExpand:!0,customTooltip:s})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=a.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),s="";if(a.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(s=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}s.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.impactAnalysisId,o=t.parentCRId,r=document.getElementById("outer-impactedItem-grid-div");"undefined"!=r&&null!=r&&d.mask(r),s.updateExistingImpactItem(o,a,e).then(function(e){let n=[];e&&(n=e.data);let a=[];for(let e of n)e.reasonForChange="",e.impactedItem="IMPACTED",a.push(e);t.addNodesInLayoutModel(t.treeDocument,a),i(e),d.unmask(r)},function(e){d.unmask(r),n(e)})})},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});let i=p.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate();let n=[];i.forEach(e=>n.push({id:e.options.grid.id})),this.addCAInfoForImpactedItems(n)},removeChildren:function(e){let t=this;return new Promise(function(i,n){let a=t.impactAnalysisId,r=t.parentCRId,l=t.treeDocument.getSelectedNodes();l.length?s.updateExistingImpactItem(r,a,e).then(function(e){for(let e=0;e<l.length;e++)t.treeDocument.removeRoot(l[e]);0==t.treeDocument.getChildren().length&&t.treeDocument._modelEvents.publish({event:"treeEmpty"}),i(l),c.success(o.CHG_GOV_ImpactItem_Remove_Success)},function(e){d.unmask(outerDiv),n()}):c.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)})},addCAInfoForImpactedItems:function(e){var t=this;s.getCAInfoImpactedItems(e).then(e=>{t.mergeProposedCA(e.data)},e=>{})},mergeProposedCA:function(e){let t=this.getTreeDocument().getAllDescendants();for(let i=0;i<e.length;i++)for(let n=0;n<t.length;n++)if(e[i].id==t[n].options.grid.id){let a=l.getProposedColumnBasedOnData(e[i].proposedChangeActions);t[n].updateOptions({grid:{proposedChangeActionsData:e[i].proposedChangeActions,proposedChangeAction:a}})}},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,a;n=e,a=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;a(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return p}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMemberFilterLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRAddMemberLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersFeaturesUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";return e.extend({init:function(e){this._parent(e);var t=this;this._modelEvents=e.contextDetails._modelEvents,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),p.subscribe("idcard-header-minified",function(e){e.value?(t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").addClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("minified-header-height")):(t.membersDatagridView.getElement(".content-member-grid-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("minified-header-height"))})},render:function(){try{var e=this.processColumns(),t=this,p={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"width",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(t,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){c.readyDragContent(e,t)},onDragStartCell:function(e,t){c.readyDragContent(e,t)}};p=UWA.merge(p,this.options);var h={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.membersDatagrid=new n(p),this.membersDatagrid.rowSelection="single",this.membersDatagrid.cellSelection="none";let _=this.membersDatagrid;this._modelEvents.publish({event:"hideEmpty-datagrid",data:_}),this.tileView=new a(h);var m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.tileView.onContextualEvent=m;var C={expandInput:{stdTemplate:"expandInputtemplate"}},v={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new g}catch(e){console.log(e)}this.membersDatagrid.getTypeRepresentationFactory().registerTypeTemplates(v),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(C),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),o.toolbar=this.membersDatagrid.setToolbar(o.writetoolbarDefinition()),this.toolbar=o.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(v),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(C);t=this;this.membersDatagrid.addEventListener("allCellsRendered",function(){t.membersDatagrid.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.membersDatagrid.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.membersDatagrid.getTreeDocument().getXSO().onAdd(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}));if(e.getTreeDocument()){const i=e.getTreeDocument().getSelectedNodes().length;t._modelEvents.publish({event:"cr-members-object-selection-update",data:{count:i}})}}),t.membersDatagrid.getTreeDocument().getXSO().onRemove(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}));0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-members-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}),t.membersDatagrid.addEventListener(i.POINTERHIT,function(e,i){console.log(">>>>>>>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),t.onItemClick(e,i)}),this.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount&&(console.log("ca-DataGrid-on-dblclick"),i.nodeModel.select(!0),t._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}))},this.membersDatagridView=UWA.createElement("div",{id:"outer-member-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-member-grid-div"});var f=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-member-grid-div"});this.toolbar.inject(f);var b=UWA.createElement("div",{class:"content-member-grid-div expanded-header-height"}),w=UWA.createElement("div",{class:"content-member-tile-div membertileView expanded-header-height"}),D=UWA.createElement("div",{styles:{position:"relative"},class:"content-member-filter-div memberfilterView hideView"}),S=UWA.createElement("div",{styles:{position:"relative"},class:"content-add-member-div addmemberView hideView"}),E=UWA.createElement("div",{class:"hideView",id:"memberEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(E);var O={target:D,model:this.options.treeDocument},y={id:this.options.contextDetails.id,target:S,model:this.options.treeDocument};r.createMemberFilter(O),s.createAddMemberPanel(y),this.membersDatagrid.inject(b),this.tileView.inject(w),E.inject(w),this.membersDatagridView.addContent(f),this.membersDatagridView.addContent(D),this.membersDatagridView.addContent(S),this.membersDatagridView.addContent(b),this.membersDatagridView.addContent(w)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/ChgCOTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil"],function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout"],function(e){e.coGridView.coDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.changeView("TileView")},100)})},showEmptyView:function(){var e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/members/ChgCRMembersDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/CoreEvents/ModelEvents","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m){"use strict";var C={createMembersView:function(a){var o=this,l={};l=UWA.merge(l,a),this._modelEvents=l.contextDetails._modelEvents,o.id=l.id,l.columns=i.getColumns(),o.ChgCRMembersDataGridModel=new n(a.id),l.treeDocument=o.ChgCRMembersDataGridModel.createTreeDocument(),o.subscribeToModelEvents(l.treeDocument),o.ChgCRMembersTreeModel=l.treeDocument;var c=new e(l);o.membersDataGridView=c,p.mask(l.target);let d=o.membersDataGridView.membersDatagrid;r.getChangeRequestMembers(a.id).then(function(e){console.log("Change Request Memeber list: "+e);var i=s.processedChangeRequestMemberList(e);if(0==i.length){let e=document.getElementById("crMembers");e&&p.isMasked(e)&&p.unmask(e),o._modelEvents.publish({event:"showEmpty-datagrid",data:d})}o.ChgCRMembersDataGridModel.loadChangeRequestMembersData(l.treeDocument,i),0==l.treeDocument.getChildren().length?t.showEmptyView():t.hideEmptyView(),t.changeView()},function(e){let t=document.getElementById("crMembers");return t&&p.isMasked(t)&&p.unmask(t),Promise.reject(e)})},subscribeToModelEvents:function(e){var t=this;this._modelEvents._pubsub.topics[this._modelEvents._formatEvent("cr-members-object-selection-update")]||this._modelEvents.subscribe({event:"cr-members-object-selection-update"},function(e){C.handleObjectSelectionUpdate(e)}),h.unsubscribe(`${e.options.id}:${widget.id}`),h.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgMembersTreeModel),e._cleanBIFilterProxy()})})},changeView:function(e){i.changeView("GridView")},addNodesInLayout:function(e){C.ChgCRMembersDataGridModel.addNodesInLayoutModel(this.ChgCRMembersTreeModel,e)},removeHandler:function(){if(0!=C.ChgCRMembersDataGridModel.treeDocument.getSelectedNodes().length){let e=document.getElementById("crMembers");e&&p.mask(e)}C.ChgCRMembersDataGridModel.removeChildren()},updatePersonRole:function(e,t){if(console.log("updatePersonRole"),0==C.ChgCRMembersTreeModel.getSelectedNodes().length);else{var n="",a={person:[],userGroup:[]},o={person:[],userGroup:[]},r="",s=t.role,l=Array.isArray(s)?t[s[0]]:t[s];if("Route Template"==t.currentObjType||"Group"==t.currentObjType)var c=C.ChgCRMembersTreeModel.getSelectedNodes()[0].options.grid.id;if("Person"==t.currentObjType)var d=C.ChgCRMembersTreeModel.getSelectedNodes()[0].options.grid.userId;s.indexOf("Coordinator")>=0&&(n=d),s.indexOf("Follower")>=0&&("Person"==t.currentObjType?a.person.push(d):"Group"==t.currentObjType&&a.userGroup.push(c)),s.indexOf("Assignee")>=0&&("Person"==t.currentObjType?o.person.push(d):"Group"==t.currentObjType&&o.userGroup.push(c)),s.indexOf("Approver")>=0&&(r=c);var u=i.makeUpdateMemberJson(l,n,r,a,o);"DISCONNECT"==l&&1==t.showConfirmation?C.showConfirmationDialog(u):C.updateCRPeople(u,!1,s)}},showConfirmationDialog:function(e){var t=new c({}),i=document.getElementById("outer-member-grid-div");t.inject(i),new d({immersiveFrame:t,title:m.CHG_Member_Remove_Title,content:m.CHG_Member_Remove_Message,activeFlag:!1,modelFlag:!0,width:500,buttons:{No:new u({onClick:function(e){t.destroy()}}),Yes:new u({onClick:function(i){t.destroy(),C.updateCRPeople(e,!0)}})}}).addEventListener("close",function(e){t&&t.destroy()})},updateCRPeople:function(e,t,n){if(""!=e){var a=C.id;r.updateChangeRequestMembers(a,e).then(function(e){var a=C.ChgCRMembersTreeModel,o=a.getSelectedNodes()[0];if(1==t)"Coordinator"==o.options.grid.role&&(i.isChangeCoordinatorConnected=!1),"Approver"==o.options.grid.role&&(i.isRouteTemplateConnected=!1),o.remove();else if(""!=n&&1==e.success){a.prepareUpdate();var r=o.options.grid.role,s=o.options.description,l=i.getRoleNLSValue(n);if(e.data.length>0){let e=","+n,t=", "+l;var c=s.concat(t);o.options.description=c,o.setAttribute("roleList",c),o.options.grid.role=r.concat(e),o.options.grid.roles.push(n),"Coordinator"==n&&(i.isChangeCoordinatorConnected=!0)}else{c=i.removeRole(s,l);o.setAttribute("roleList",c),o.options.description=c,o.options.grid.role=i.removeRole(r,n);var d=o.options.grid.roles.filter(function(e,t,i){return e!=n});o.options.grid.roles=d,"Coordinator"==n&&(i.isChangeCoordinatorConnected=!1)}a.pushUpdate()}})}},refreshLayout:function(e){var t=this.ChgCRMembersTreeModel;(new n).updateNodeIndexed(t,e)},changeView:function(e){i.changeView("GridView")},globalSubscribeForCRMemberView:function(){o.addObserver("ChgCRMembersDataGridLayout","CO-AccessBit-Update",C.handleAccessBitUpdate),o.addObserver("ChgCRMembersDataGridLayout","ENOLC_MOVE_CMD_UPDATE",C.handleTransferownership)},handleTransferownership:function(e){e.data.attributes.hasOwnProperty(C.id)&&r.getChangeRequestMembers(C.id).then(function(e){C.ChgCRMembersTreeModel.empty();var t=s.processedChangeRequestMemberList(e);C.ChgCRMembersDataGridModel.loadChangeRequestMembersData(C.ChgCRMembersTreeModel,t)})},handleAccessBitUpdate:function(e){e.id==C.id&&(console.log("ChgMembersDataGridLayout handleAccessBitUpdate: "+e.accessBits),"false"==e.accessBits.SetCoordinator?C.setCoordinatorAccessBit=!1:C.setCoordinatorAccessBit=!0,"false"==e.accessBits.ManageRouteTemplates?C.manageApproverAccessBit=!1:C.manageApproverAccessBit=!0,"false"==e.accessBits.ManageFollowers?C.manageFollowersAccessBit=!1:C.manageFollowersAccessBit=!0,C.setCoordinatorAccessBit||C.manageApproverAccessBit||C.manageFollowersAccessBit?(C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{visibleFlag:!0}),C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{visibleFlag:!0})):(C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{visibleFlag:!1}),C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1})))},handleObjectSelectionUpdate:function(e){0===e.count?C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{disabled:!0}):C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{disabled:!1})}};return C.globalSubscribeForCRMemberView(),C}),define("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderDataGridView","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil","DS/ENOChgGovernanceUX/scripts/model/ChgCODataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/ProgressBar","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/ChgCOTileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f){"use strict";var b={loadRealTimeCODataPromise:function(e){return new Promise(function(t,i){n.getTimestamp().then(function(o){var r=a.processTimestampData(o);n.getConfiguredChangeOrderList({indexed:!1,simplifiedJSON:!0,timestamp:r,filter:e}).then(function(e){a.processedCOSummaryList(e).then(function(i){t({realTimeData:e,processedCOList:i})})},function(e){i(e)})},function(e){i(e)})})},loadIndexedCODataPromise:function(e){return new Promise(function(t,i){n.getConfiguredChangeOrderList(e).then(function(e){a.processedCOSummaryList(e).then(function(i){t({COSummaryList:e,processedCOList:i})},function(e){i(e)})},function(e){i(e)})})},postProcessing:function(){0==this.treeDocument.getChildren().length?this.treeDocument._modelEvents.publish({event:"coSummaryEmpty"}):this.treeDocument._modelEvents.publish({event:"coSummaryNotEmpty"}),this.coGridView.coDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}],this.coGridView.reapplySortModel(),this.globalSubscribeCOSummary()},updateTagger:function(){var e=this;"false"==o.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.treeDocument),t._cleanBIFilterProxy();let i={data:{roots:e.treeDocument.getAllDescendants()}};t.cleanPathTag(),t._onSetPathTags(i,e.treeDocument)})},createChangeOrderView:function(n){var s=this;this._pathChangeOrdersSummary=[p._KEY,p._VIEWS_PREFERENCES,p._LIST_VIEW,p._FILTERVIEW];let l=h.getFilter(this._pathChangeOrdersSummary);var c={};c=UWA.merge(c,n),this.options=c,c.target&&(c.target.empty(),r.mask(c.target)),c.columns=t.getColumns(),s.ChgCODataGridModel=new i,v.createCustomColumn().then(async function(t){o.getGlobalVariable().customeViewCOList=[],c.columns=[...c.columns,...t],s.treeDocument=c.treeDocument=s.ChgCODataGridModel.createTreeDocument(),s.ChgCOlayoutModel=s.treeDocument,s.ChgCODataGridModel.registerCustomFilter();var i=a.getDefaultFilter(c.columns);c.treeDocument.setFilterModel(i),s.coGridView=new e(c),await s.coGridView.render(),s.subscribeToModelEvents(s.treeDocument);var n=s.coGridView.coDatagrid.getCustomViewsManager().getCurrentCustomView();n&&n.columnsVisibleFlag&&(o.getGlobalVariable().customeViewCOList=Object.keys(n.columnsVisibleFlag));var r="";"inactive"===l?r="inactiveCO":(r="activeCO",h.updateFilter(s._pathChangeOrdersSummary,"activeCO")),s.updateGrid(r)})},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.coGridView.coDatagrid.placeholder=l.CHG_GOV_DataGrid_PlaceHolder_FetchChgOrder,this.updateTagger()},updateGrid:async function(e){var t=this;if(t.preUpdateProcessing(),t.options.target&&r.mask(t.options.target),"inactiveCO"!=e){var i=await t.loadRealTimeCODataPromise(e);t.ChgCODataGridModel.loadChangeOrderData(t.treeDocument,i.processedCOList)}t.params.filter=e,t.loadIndexedCODataPromise(t.params).then(async function(e){t.ChgCODataGridModel.loadIndexedChangeOrders(t.treeDocument,e.processedCOList),t.currentPage=parseInt(e.COSummaryList.summary["Current Page"]),t.totalPages=parseInt(e.COSummaryList.summary["Total Pages"]),t.options.target&&r.unmask(t.options.target),t.coGridView.coDatagrid.placeholder=l.CHG_GOV_DataGrid_PlaceHolder_NoChgOrder,t.currentPage<t.totalPages?(t.updateTagger(),t.coGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.coGridView.coDatagrid.onInfiniteScroll(function(e){t.getNextPageChangeOrders("DGV")}),t.coGridView.coTilesView.onInfiniteScroll(function(e){t.getNextPageChangeOrders("RTV")})):(t.updateTagger(),t.coGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())})},getNextPageChangeOrders:async function(e){if(this.currentPage<this.totalPages){this.options.target&&r.mask(this.options.target),this.params.pageNumber++,this.currentPage++;let t=await this.loadIndexedCODataPromise(this.params);this.ChgCODataGridModel.loadIndexedChangeOrders(this.treeDocument,t.processedCOList),this.updateTagger(),this.coGridView.setListnersOnToolbar(),this.loadingViewPreference(),this.postProcessing(),"DGV"===e?this.coGridView.coDatagrid.infiniteScrollProcessDone():this.coGridView.coTilesView.infiniteScrollProcessDone(),this.options.target&&r.unmask(this.options.target)}},changeView:function(){t.changeView("GridView")},refreshLayout:function(e){var t=this.ChgCOlayoutModel;(new i).updateNodeIndexed(t,e),this.coGridView.coDatagrid.ensureNodeModelVisible(this.ChgCOlayoutModel.getChildren()[0],!1)},removeDataFromGrid:function(e,t){b.ChgCOlayoutModel.getChildren();for(var i=0;i<e.length;i++){var n=e[i];b.ChgCOlayoutModel.search({shouldStop:function(e){return e.options.grid.id===n&&(b.removingNode(e),!0)}}),0==b.ChgCOlayoutModel.getChildren().length&&b.ChgCOlayoutModel._modelEvents.publish({event:"coSummaryEmpty"})}},removingNode:function(e){this.ChgCOlayoutModel.removeRoot(e)},sortBySeverity:function(){s.sortingData.menu[1].fonticon.content=s.sortingData.menu[1].fonticon.content.replace(" icon-blue","");var e=b.coGridView,t=s.toolbar.getNodeModelByID("sorting");s.sortingData.menu[0].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(s.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.coDatagrid.sortModel=[{dataIndex:"sev",sort:"asc"}]):(s.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.coDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:s.sortingData}})},sortByMaturity:function(){s.sortingData.menu[0].fonticon.content=s.sortingData.menu[0].fonticon.content.replace(" icon-blue","");var e=b.coGridView,t=s.toolbar.getNodeModelByID("sorting");s.sortingData.menu[1].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(s.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.coDatagrid.sortModel=[{dataIndex:"maturityNLS",sort:"asc"}]):(s.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.coDatagrid.sortModel=[{dataIndex:"maturityNLS",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:s.sortingData}})},globalSubscribeCOSummary:function(){g.addObserver("ChgCODataGridLayout","ENOLC_MOVE_CMD_UPDATE",b.handleForCOSummaryTransfer),g.addObserver("ChgCODataGridLayout","CO-Properties-Update",b.handleForUpdatingFromPropertyPanel)},handleForUpdatingFromPropertyPanel:function(e){for(var n=b.ChgCOlayoutModel.getAllDescendants(),a=e.objectId,o=e.type.value,r=[],s=[],l=0;l<n.length;l++){if(n[l].options.grid.id==a){var c=e.name.value;if("Change Action"==o){if(e&&e.Synopsis){var d=e.Synopsis.value;n[l].options.grid.title=d}}else if(e&&e.Title){d=e.Title.value;n[l].options.grid.title=d}if(e&&e.owner){var u=e.owner.value;n[l].options.grid.owner=u;var g=e.owner.value}if(e&&e.Severity){var p=e.Severity.value;n[l].options.grid.severity=p}var h=e.Severity.valueDB,m=e.owner.valueDB,C=t.createCustomSeverity(h,p),v=t.createCustomOwner(m,u);n[l].options.grid.stateGrade;"Low"==p?r.push("level-low"):"Medium"==p?r.push("level-medium"):"High"==p&&r.push("level-high"),"true"==n[l].options.grid.onHold&&r.push("pause"),s.push(p);var f={};f.name=c,f.title=d,f.severity=p,f.severityNLS=h,f.ownerFullName=g,f.maturityNLS=n[l].options.grid.maturityNLS;var w=i.prototype.createCustomTooltip(f),D=c+" | "+g;n[l].updateOptions({label:n[l].options.grid.title,grid:{title:n[l].options.grid.title,owner:n[l].options.grid.owner,severity:n[l].options.grid.severity,sev:C,co_Owner:v},statusbarIcons:r,statusbarIconsTooltips:s,customTooltip:w,subLabel:D})}}},handleForCOSummaryTransfer:function(e){var n,a,o=b.ChgCOlayoutModel.getAllDescendants(),r=[];Object.keys(e.data.attributes).forEach(function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,r.push(i.id)});for(var s=0;s<r.length;s++){n=r[s];for(var l=0;l<o.length;l++){if(o[l].options.grid.id==n.id){var c=o[l].options.grid.name;if(n.newOwnerId&&n.newOwnerFullName){var d=n.newOwnerId;o[l].options.grid.owner=d;var u=n.newOwnerFullName;o[l].options.grid.ownerFullName=u}if(n.newOrganization){var g=n.newOrganization;o[l].options.grid.orgnaizationNLS=g}if(n.newCollabSpace){var p=n.newCollabSpace;o[l].options.grid.collabspaceNLS=p}""==n.newOwnerId?(d=o[l].options.grid.owner,u=o[l].options.grid.ownerFullName,a=t.createCustomOwner(d,u)):a=t.createCustomOwner(d,u);var h={};h.name=c,h.title=o[l].options.grid.title,h.severity=o[l].options.grid.severity,h.severityNLS=o[l].options.grid.severityNLS,h.ownerFullName=u,h.maturityNLS=o[l].options.grid.maturityNLS;var m=c+" | "+u,C=i.prototype.createCustomTooltip(h);o[l].updateOptions({grid:{collabspaceNLS:o[l].options.grid.collabspaceNLS,organizationNLS:o[l].options.grid.organizationNLS,owner:o[l].options.grid.owner,ownerFullName:o[l].options.grid.ownerFullName,co_Owner:a},customTooltip:C,subLabel:m})}}}},loadingViewPreference:function(){var e=f("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=d.MOBILE_CUTOFF){var t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(u.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{var i=e.getCASummaryViewDesktop();void 0===i||"GridView"===i?this.changeView():u.changeView()}},filterView:function(e){t.filterView(e.filter),b.updateGrid(e.filter)},subscribeToModelEvents:function(e){let t=this;e._modelEvents.subscribe({event:"coSummaryEmpty"},function(e){u.showEmptyView(),b.coGridView.coDatagrid.placeholder=l.CHG_GOV_DataGrid_PlaceHolder_NoChgOrder}),e._modelEvents.subscribe({event:"coSummaryNotEmpty"},function(e){u.hideEmptyView()}),C.unsubscribe(`${e.options.id}:${widget.id}`),C.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.treeDocument),e._cleanBIFilterProxy();let i={data:{roots:t.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(i,t.treeDocument)})}),C.unsubscribe(`${e.options.id} of ${widget.id}`),C.subscribe(`${e.options.id} of ${widget.id}`,function(e){b.ChgCODataGridModel.filterView(e)}),C.unsubscribe(`${e.options.id} colorize ${widget.id}`),C.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){b.ChgCODataGridModel.enableColorizeView(e)}),C.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),C.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){b.ChgCODataGridModel.disableColorizeView(e)})}};return b.globalSubscribeCOSummary(),b}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,a,o,r){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"impactBasis-mainContainer"}))},onTabClickAction:function(e){console.log("action tab clicked.............")},updateFacet:function(){if(1==this.getModel().isMergedModel())return;this.elements.container.empty(),o.mask(this.elements.container);let e=n.getSelectedNodes();e.length&&(this.options.data[0].grid=e[0].options.grid,this.options.data[0].physicalId=e[0].options.grid.id,this.options.data[0].type=e[0].options.grid.type,this.options.data[0].accessBits=e[0].options.accessBits,a.getGlobalVariable().IAAccessBitsData&&a.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&a.getGlobalVariable().IAAccessBitsData.iaID===e[0].options.grid.id&&(this.options.data[0].accessBits=a.getGlobalVariable().IAAccessBitsData.accessBits),i.createImpactBasisView(this.elements.container,this.options.data))},switchFacet:function(e){console.log("_switchFacet.......................")},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataService","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,a,o,r,s){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"changeAction-mainContainer"}))},updateFacet:function(){var e=this,t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;this.elements.container.empty(),o.mask(this.elements.container);var s={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};a.getObjectTypeInformation(s.id).then(function(t){if("Change Action"==t||""==t){var a=e.elements.container;let t=n.getSelectedNodes();s.accessBits=t[0].options.accessBits,r.getGlobalVariable().IAAccessBitsData&&r.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&r.getGlobalVariable().IAAccessBitsData.iaID===t[0].options.grid.id&&(s.accessBits=r.getGlobalVariable().IAAccessBitsData.accessBits),i.createCAView(a,s)}else o.unmask(e.elements.container)})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/components/ChgCommonDailog","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridContextualMenu","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgImpactAnalysisServices","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar","DS/UIKIT/Mask","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f,b,w,D,S,E,O,y,_,G,I){"use strict";var N={createImpactAnalysisView:function(t,a){var s=this;this.contextId=t.id,this.copyOption=t,this.contextDetails=t.contextDetails;var l=t.contextDetails.access,c={};if((c=UWA.merge(c,t)).modelEvents=a,this.modelEvents=a,c.columns=i.getColumns(),this.ChgCRImpactAnalysisDataGridModel=new n(c.id,c.contextDetails),"true"==h.getGlobalVariable().CHG_IA_CUSTOM_VIEW)b.createCustomColumn().then(function(i){c.columns=[...c.columns,...i],s.treeDocument=c.treeDocument=s.ChgCRImpactAnalysisDataGridModel.createTreeDocument(),s.ChgCRImpactAnalysisTreeModel=c.treeDocument,s.ChgCRImpactAnalysisDataGridModel.registerCustomFilter(),s.subscribeToModelEvents(c.treeDocument),s.chgCRImpactAnalysisView=new e(c);let a,d=s.chgCRImpactAnalysisView.chgGridView._customViewsManager.getCustomViews()[0].columnsVisibleFlag;if(h.getGlobalVariable().customeViewIAList=[],null!=d&&null!=d){let e=Object.keys(d);h.getGlobalVariable().customeViewIAList=e}(a="ChangeAnalysis"==c.contextDetails.isKindOfType?o.getImpactAnalysisFromId(t.id):o.getCRImpactAnalysis(t.id)).then(function(e){var i=r.processCRImpactAnalysis(e,t.id);s.chgCRImpactAnalysisDataGridModel=new n(t.id),s.chgCRImpactAnalysisDataGridModel.loadImpactAnalysisData(c.treeDocument,i);var a=r.getDefaultFilter(c.columns);c.treeDocument.setFilterModel(a),S.publish("CO-AccessBit-Update",l),c.isSelected&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(s.ChgCRImpactAnalysisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:s.ChgCRImpactAnalysisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,s.ChgCRImpactAnalysisTreeModel)}),0==c.treeDocument.getChildren().length?c.treeDocument._modelEvents.publish({event:"treeEmpty"}):c.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),N.changeView();let o="",d=widget.getValue("X3DContentId")?JSON.parse(widget.getValue("X3DContentId")):null;if(console.log(d),null!=d){let e=[y._KEY,y._VIEWS_PREFERENCES,y._CHANGE_REQUESTS_DETAILS];o=O.getTab(e);let t=N.treeDocument.getAllDescendants();if("crAssessment"==o)for(let e=0;e<t.length;e++){if(t[e].options.grid.id==d.data.items[0].IAid){N.treeDocument.getAllDescendants()[e].select(),N.modelEvents.publish({event:"triptych-show-panel",data:"right"}),N.modelEvents.publish({event:"information-panel-visible",data:null});break}}}},function(e){return Promise.reject(e)})});else{let i;this.ChgCRImpactAnalysisDataGridModel=new n(c.id,c.contextDetails),this.treeDocument=c.treeDocument=this.ChgCRImpactAnalysisDataGridModel.createTreeDocument(),s.ChgCRImpactAnalysisTreeModel=c.treeDocument,s.ChgCRImpactAnalysisDataGridModel.registerCustomFilter(),h.getGlobalVariable().customeViewIAList=[],this.subscribeToModelEvents(c.treeDocument),this.chgCRImpactAnalysisView=new e(c),(i="ChangeAnalysis"==c.contextDetails.isKindOfType?o.getImpactAnalysisFromId(t.id):o.getCRImpactAnalysis(t.id)).then(function(e){var i=r.processCRImpactAnalysis(e,t.id);s.chgCRImpactAnalysisDataGridModel=new n(t.id),s.chgCRImpactAnalysisDataGridModel.loadImpactAnalysisData(c.treeDocument,i),S.publish("CO-AccessBit-Update",l),"false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(s.ChgCRImpactAnalysisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:s.ChgCRImpactAnalysisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,s.ChgCRImpactAnalysisTreeModel)}),0==c.treeDocument.getChildren().length?c.treeDocument._modelEvents.publish({event:"treeEmpty"}):c.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),N.changeView();let a="",o=widget.getValue("X3DContentId")?JSON.parse(widget.getValue("X3DContentId")):null;if(console.log(o),null!=o){let e=[y._KEY,y._VIEWS_PREFERENCES,y._CHANGE_REQUESTS_DETAILS];a=O.getTab(e);let t=N.treeDocument.getAllDescendants();if("crAssessment"==a)for(let e=0;e<t.length;e++){if(t[e].options.grid.id==o.data.items[0].IAid){N.treeDocument.getAllDescendants()[e].select(),N.modelEvents.publish({event:"triptych-show-panel",data:"right"}),N.modelEvents.publish({event:"information-panel-visible",data:null});break}}}},function(e){return Promise.reject(e)})}},refreshGrid:function(e){let t=this,n=_.toolbar.getNodeModelByID("filter");n.options.grid.semantics.label;"selected"==n.options.grid.data.menu[0].state?(e={filterView:"activeIA"},N.inactiveCA=!1):(e={filterView:"inactiveIA"},N.inactiveCA=!0);let a=this.ChgCRImpactAnalysisDataGridModel.contextID;o.getCRImpactAnalysis(a,e).then(function(e){var n=r.processCRImpactAnalysis(e,a);t.chgCRImpactAnalysisDataGridModel.loadImpactAnalysisData(N.ChgCRImpactAnalysisTreeModel,n),h.getGlobalVariable().is3DSpace||"false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgCRImpactAnalysisTreeModel),e._cleanBIFilterProxy();let n=t.ChgCRImpactAnalysisTreeModel.getAllDescendants();if(1==n.length){let e="";if(1==N.treeDocument.getAllDescendants().length){e=!0;for(let t of N.treeDocument.getAllDescendants())if("ia_Total"===t.options.grid.id){e=!1;break}}let t=N.inactiveCA;!0!==e||t||N.modelEvents.publish({event:"add_aggregation_row_datagrid",data:{treeDocument:N.treeDocument}})}i.changeView("GridView");let a={data:{roots:n}};e.cleanPathTag(),e._onSetPathTags(a,t.ChgCRImpactAnalysisTreeModel)})},function(e){return Promise.reject(e)})},changeView:function(e){let t="";if(0!=N.treeDocument.getAllDescendants().length){t=!0;for(let e of N.treeDocument.getAllDescendants())if("ia_Total"===e.options.grid.id){t=!1;break}}let n=N.inactiveCA;!0!==t||n||N.modelEvents.publish({event:"add_aggregation_row_datagrid",data:{treeDocument:N.treeDocument}}),i.changeView("GridView")},subscribeToModelEvents:function(e){let i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){t.hideEmptyView()}),S.unsubscribe(`crImpactAnalysis:${widget.id}`),S.subscribe(`crImpactAnalysis:${widget.id}`,function(){"false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRImpactAnalysisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRImpactAnalysisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRImpactAnalysisTreeModel)})}),S.unsubscribe(`${e.options.id} of ${widget.id}`),S.subscribe(`${e.options.id} of ${widget.id}`,function(t){N.chgCRImpactAnalysisDataGridModel.filterView(t,e)}),S.unsubscribe(`${e.options.id} colorize ${widget.id}`),S.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){N.chgCRImpactAnalysisDataGridModel.enableColorizeView(t,e)}),S.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),S.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){N.chgCRImpactAnalysisDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-object-selection-update"},function(e){N.handleObjectSelectionUpdate(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update_AnalysisBasis_count_IA_grid")]||this.modelEvents.subscribe({event:"update_AnalysisBasis_count_IA_grid"},function(e){N.updateAnalysisBasisCountOnGrid(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update-impact-basis")]||this.modelEvents.subscribe({event:"update-impact-basis"},function(e){if("CONNECT"==e.operation){let t=N.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactBasis+e.context.length;t.updateOptions({grid:{countImpactBasis:i}})}if("DISCONNECT"==e.operation){let t=N.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactBasis-e.context.length;t.updateOptions({grid:{countImpactBasis:i}}),0==v.treeDocument.getChildren().length&&v.treeDocument._modelEvents.publish({event:"treeEmpty"})}}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update-impact-items")]||this.modelEvents.subscribe({event:"update-impact-items"},function(e){if("CONNECT"==e.operation){let t=N.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactedItems+e.context.length;t.updateOptions({grid:{countImpactedItems:i}})}if("DISCONNECT"==e.operation){let t=N.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactedItems-e.context.length;t.updateOptions({grid:{countImpactedItems:i}}),0==f.treeDocument.getChildren().length&&f.treeDocument._modelEvents.publish({event:"treeEmpty"})}}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update-contributor")]||this.modelEvents.subscribe({event:"update-contributor"},function(e){if("CONNECT"==e.operation){let t=N.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countContributors+e.context.length;t.updateOptions({grid:{countContributors:i}})}if("DISCONNECT"==e.operation){let t=N.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countContributors-e.context.length;t.updateOptions({grid:{countContributors:i}})}}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("IA-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"IA-DataGrid-on-dblclick"},function(e){if(h.getGlobalVariable().is3DSpace){I("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else N.modelEvents.publish({event:"information-panel-open",data:null})})},newImpactAnalysisHandler:function(){console.log("newImpactAnalysisHandler cr ImpactAnalysis!")},updateAnalysisBasisCountOnGrid:function(e){for(let t of e){let e=N.ChgCRImpactAnalysisDataGridModel.treeDocument.getAllDescendants();for(let i of e)if(i.options.grid.id===t.id){let e=i.options.grid.countImpactBasis+t.affectedItemIds.length;i.updateOptions({grid:{countImpactBasis:e}}),e=0;break}}},duplicateImpactAnalysis:function({contextCRId:e}){let t=[],i={id:N.treeDocument.getSelectedNodes()[0].options.grid.id};t.push(i),o.duplicateImpactAnalysis(e,t).then(function(e){""!=e.data[0].id&&N.ChgCRImpactAnalysisDataGridModel.addNodeInModelFromId(e.data[0].id)})},cancelHandler:function({contextCRId:e}){let t={chgPhysicalId:e,boxTitle:s.CHG_GOV_ImpactAnalysis_Toolbar_CancelImpactAnalysis,subTitle:s.CHG_CO_Cancel_SubTitle,txtPlaceHolder:s.CHG_CO_Cancel_PlaceHolder,DoneCallback:function(t){let i=N.treeDocument.getSelectedNodes(),n={data:[]};for(let e=0;e<i.length;e++)n.data.push({id:i[e].options.grid.id,reason:t.userComment});o.cancelRelatedImpactAnalysis(e,n).then(function(e){for(let t=0;t<e.data.length;t++)for(let a=0;a<i.length;a++)if(e.data[t].id==i[a].options.grid.id){i[a].options.grid.maturity=e.data[t].current,i[a].options.grid.maturityNLS=e.data[t].currentNLS,i[a].options.grid.name=e.data[t].name,i[a].options.grid.cancelComment=n.data[0].reason;let o={maturity:i[a].options.grid.maturity,cancelComment:i[a].options.grid.cancelComment,name:i[a].options.grid.name},r=N.createCustomNameField(o);i[a].updateOptions({grid:{maturity:i[a].options.grid.maturity,maturityNLS:i[a].options.grid.maturityNLS,ia_name:r,cancelComment:i[a].options.grid.cancelComment,pushCancelIcon:!0}})}l.success(s.CHG_CANCEL_NOTICE),I("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil").filterView("activeIA")}),C.closeDialog()},CancelCallback:function(){C.closeDialog()}};C.launchInfoDailog(t)},createCustomNameField:function(e){var t=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(t);var i=new UWA.Element("div",{class:"iconsDiv"});if("Cancelled"==e.maturity){var n=new UWA.Element("div",{class:"gridIconContainer",title:e.cancelComment});UWA.createElement("div",{class:"fonticon fonticon-block"}).inject(n),n.inject(i)}return i.inject(t),t.outerHTML},deleteHandler:function(){const e=N.treeDocument.getSelectedNodes().filter(e=>"ia_Total"!=e.options.grid.id);if(e.length>0){for(var t=[],i=0;i<e.length;i++){var n=e[i],a={physicalid:n.options.grid.id,nodeName:n.options.grid.name,nodeTitle:n.options.grid.title};t.push(a)}var o=document.getElementById("outer-impactAnalysis-grid-div");d.deleteNodes(t,o,N.removeDeletedNodesUsingIDs)}else l.error(s.CHG_SELECT_IA_FOR_DELETE)},globalSubscribeForCRImpactAnalysisView:function(){p.addObserver("ChgCRImpactAnalysisDataGridLayout","CO-AccessBit-Update",N.handleAccessBitUpdate),p.addObserver("ChgCRImpactAnalysisDataGridLayout","ENOLC_MOVE_CMD_UPDATE",N.handleForImpactAnalysisTransfer),p.addObserver("ChgCRImpactAnalysisDataGridLayout","Lifecycle.Modification",N.handleForMaturityUpdate),p.addObserver("ChgCRImpactAnalysisDataGridLayout","CO-Properties-Update",N.handlePropertiesUpdateForImpactAnalysis),p.addObserver("ChgCRImpactAnalysisDataGridLayout","co-update-attachment-complete",N.handleForAttachmentCount),p.addObserver("ChgCRImpactAnalysisDataGridLayout","update-impact-anlysis-grid",N.handleForUpdateImpactAnlysisGrid),p.addObserver("ChgCRImpactAnalysisDataGridLayout","CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",N.handleForAccessBitUpdateImpactAnalysis)},handlePropertiesUpdateForImpactAnalysis:function(e){var t=N.ChgCRImpactAnalysisTreeModel;let i=b.attrMap;var n=t.getAllDescendants();if(t){for(var a=e.objectId,o=0;o<n.length;o++){if(n[o].options.grid.id==a){if(e&&e.Title){let t=e.Title.value,a=parseInt(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Benefit Impact"].value),r=parseInt(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Cost Impact"].value),s=parseFloat(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Validation Effort"].value),l=parseInt(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Risk Impact"].value),c=parseFloat(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Implementation Effort"].value);n[o].options.grid.title=t,n[o].options.grid.benefitImpact=a,n[o].options.grid.costImpact=r,n[o].options.grid.validationEffort=s,n[o].options.grid.riskImpact=l,n[o].options.grid.implementationEffort=c,n[o].options.label=t,i.forEach(t=>{t.forEach((t,i,a)=>{if(e[t]&&t==e[t]._identifier){let a=i;n[o].updateOptions({label:n[o].options.label,grid:{[a]:e[t].value}})}})})}n[o].updateOptions({label:n[o].options.label,grid:{title:n[o].options.grid.title,benefitImpact:n[o].options.grid.benefitImpact,costImpact:n[o].options.grid.costImpact,validationEffort:n[o].options.grid.validationEffort,riskImpact:n[o].options.grid.riskImpact,implementationEffort:n[o].options.grid.implementationEffort}})}}n[n.length-1].updateOptions()}},handleForAttachmentCount:function(e){if("CONNECT"==e.operation){let t=N.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countAttachment+e.referentials.attached.length;t.updateOptions({grid:{countAttachment:i}})}if("DISCONNECT"==e.operation){let t=N.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countAttachment-e.referentials.detached.length;t.updateOptions({grid:{countAttachment:i}})}},handleForImpactAnalysisTransfer:function(e){var t,n,a=N.ChgCRImpactAnalysisTreeModel.getAllDescendants(),o=[];Object.keys(e.data.attributes).forEach(function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,o.push(i.id)});for(var r=0;r<o.length;r++){t=o[r];for(var s=0;s<a.length;s++){if(a[s].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName){var l=t.newOwnerId;a[s].options.grid.owner=l,a[s].options.grid.ownerFullName=t.newOwnerFullName;var c=t.newOwnerFullName}if(t.newOrganization){var d=t.newOrganization;a[s].options.grid.orgnaization=d}if(t.newCollabSpace){var u=t.newCollabSpace;a[s].options.grid.collabspace=u}""==t.newOwnerId?(l=a[s].options.grid.owner,c=a[s].options.grid.ownerFullName,n=i.createCustomOwner(l,c)):n=i.createCustomOwner(l,c);var g=a[s].options.grid.name,p={};p.name=g,p.title=a[s].options.grid.title,p.severity=a[s].options.grid.severity,p.severityNLS=a[s].options.grid.severityNLS,p.ownerFullName=c,p.maturityNLS=a[s].options.grid.maturityNLS;var h=N.ChgCRImpactAnalysisDataGridModel.getCustomTooltip(p),m=g+" | "+c;a[s].updateOptions({label:a[s].options.grid.title,grid:{collabspace:a[s].options.grid.collabspace,organization:a[s].options.grid.organization,owner:a[s].options.grid.ownerFullName,chgObjOwner:n},customTooltip:h,subLabel:m})}}}},handleForMaturityUpdate:function(e){let t=JSON.parse(e),i=N.getSelectedNodes();if(i&&i.length&&t&&t.Refresh&&Array.isArray(t.Refresh.modified)){i.length>=1&&t.Refresh.modified.length>=1&&N.modelEvents.publish({event:"update-property-panel-data",data:{context:i[0]}});for(let e=0;e<t.Refresh.modified.length;e++)t.Refresh.modified[e].maturity=t.Refresh.modified[e].policy+"."+t.Refresh.modified[e].state;r.getNLSForProcessedList("CRImpactAnalysisMaturity",t.Refresh.modified).then(function(){t.Refresh.modified.forEach(function(e){i.forEach(function(t){e.physicalid==t.options.grid.id&&t.updateOptions({grid:{maturity:e.state,maturityNLS:e.maturityNLS}})})})})}},handleForUpdateImpactAnlysisGrid:function(e){N.ChgCRImpactAnalysisDataGridModel.addNodeInModelFromId(e.selectedObjID)},handleAccessBitUpdate:function(e){e.id==N.contextId&&("false"==e.accessBits.ManageChangeAnalysis?(N.accessBit=!1,N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!1}),N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("newImpactAnalysis",{visibleFlag:!1}),N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("delete",{visibleFlag:!1}),N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{visibleFlag:!1})):(N.accessBit=!0,N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!0}),N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("newImpactAnalysis",{visibleFlag:!0}),N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("delete",{visibleFlag:!0}),N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{visibleFlag:!0})))},handleForAccessBitUpdateImpactAnalysis:function(e){N.getSelectedNodes()&&N.getSelectedNodes()[0].options.grid.id==e.id&&(N.getSelectedNodes()[0].options.accessBits=e.accessBits)},handleObjectSelectionUpdate:function(e){1===e.count?1==N.inactiveCA?N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{disabled:!0}):N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{disabled:!1}):N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{disabled:!0}),0===e.count?(N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("delete",{disabled:!0}),N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{disabled:!0})):(N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("delete",{disabled:!1}),N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{disabled:!1})),null!=N.inactiveCA&&1==N.inactiveCA?N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{disabled:!0}):e.count>0&&N.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{disabled:!1})},removeDeletedNodesUsingIDs:function(e){h.getGlobalVariable().deletionData={wid:widget.id,deletedIDs:e,nav:"CR_IA"},e.length+1===N.treeDocument.getAllDescendants().length&&N.modelEvents.publish({event:"remove_aggregation_row_datagrid",data:{treeDocument:N.treeDocument}});for(var t=0;t<e.length;t++){var i=e[t];N.treeDocument.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==N.treeDocument.getChildren().length&&N.treeDocument._modelEvents.publish({event:"treeEmpty"})},getSelectedNodes:function(){return N.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()},filterActiveView:function(){console.log("calling filter view..."),i.filterView("activeIA")},filterInActiveView:function(){console.log("calling filter view..."),i.filterView("inactiveIA")}};return N.globalSubscribeForCRImpactAnalysisView(),N}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgContributorfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,a,o,r){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"contributor-mainContainer",styles:{width:"100%",height:"100%",display:"block"}}))},updateFacet:function(){if(this.elements.container.empty(),a.mask(this.elements.container),1==model.isMergedModel())return;let e=n.getSelectedNodes();e.length&&(this.options.data[0].grid=e[0].options.grid,this.options.data[0].accessBits=e[0].options.accessBits,o.getGlobalVariable().IAAccessBitsData&&o.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&o.getGlobalVariable().IAAccessBitsData.iaID===e[0].options.grid.id&&(this.options.data[0].accessBits=o.getGlobalVariable().IAAccessBitsData.accessBits),i.createMembersView(this.elements.container,this.options.data))},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p){"use strict";return{showRMBMenuOnGrid:function(e,t){return new Promise(function(n,a){let o="false",r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const s=r.map(e=>e.options.grid.id);r.length>1&&(o="true");let c=[];c.push(l.createPropertyPushItem(s)),c.push(i.getRelationalExplorerMenu(e,t));let d={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(d);let u=p("DS/ENOChgServices/scripts/services/ChgDataService"),h=null,m=p("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").openWith(d),C=[],v=document.getElementById("outer-co-div");C.push(m),"false"==o&&(h=u.getChangeRequestUserAccess(t.cellInfos.nodeModel.options.grid.id),C.push(h)),Promise.all(C).then(function(a){a[0]&&c.push(a[0]),c.push(i.getMaturityMenu(t)),c.push(g.getCopyLink(r)),"false"==o?(a[1]&&"true"==a[1].data[0].dataelements.TransferOwnership&&c.push(i.getTransferMenu(e,t)),"true"==a[1].data[0].dataelements.Delete&&c.push(i.getDeleteMenu(e,t,v))):(c.push(i.getTransferMenu(e,t)),c.push(i.getDeleteMenu(e,t,v))),n(c)})})},createCRAssessmentTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-assessment-container"),t.target=n,r.createImpactAnalysisView(t,i),n},createCRAffectedItemsTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-affectedItems-container"),t.target=n,o.createAffectedItemsView(t,i),n},createCROrchestrationTab:function(t,i){let a=e.createElement("div");return a.classList.add("chg-orchestration-container"),t.target=a,n.createChangeOrchestrationView(t,i),a},createCRMembersTab:function(t){let i=e.createElement("div");return i.classList.add("chg-member-container"),t.target=i,a.createMembersView(t),i},createCRApprovalsTab:function(t,i){let n=e.createElement("div"),a=e.createElement("div");a.classList.add("chg-Approval-container");let o=e.createElement("div",{id:"chg-Task-container"});return n.appendChild(a),t.target=a,t.taskContainer=o,s.createApprovalsView(t),a},createCustomColumn:function(e){let t=this;return new Promise(function(e,i){let n=c.getGlobalVariable().changeRequestSubTypes;d.getCombinedClassList(n).then(function(i){d.getPropertyForClassGrid(i).then(function(i){let n=d.makeCombinedColumnList(i),a=t.filterColumn(n);e(a)})})})},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:organizationResponsible"];for(let t of n)e.delete(t);return e.forEach((e,n,a)=>{let o=t.createColumnDefination(e,n);i.push(o)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:u.getGetCellValueFunction(i,t)}}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactedItem/ChgCRImpacedItemDataGridModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","UWA/Core","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v){"use strict";let f={createImpactedItemView:function(t,a,s,l){var p=this;let m={};a.modelEvents?(m.modelEvents=a.modelEvents,a=a[0]):a=a[0],this.contextId=a.physicalId,m=UWA.merge(m,a),this.modelEvents=m.modelEvents,m.target=t,m.columns=i.getColumns(a.accessBits),this.impactAnalysisSelectedNodes=s,this.ChgCRImpacedItemDataGridModel=new n(m.grid.parentCRId,m.physicalId),d.makeDroppable(m.target,p.dropHandler),p.treeDocument=m.treeDocument=p.ChgCRImpacedItemDataGridModel.createTreeDocument(),p.ChgImpacedItemTreeModel=m.treeDocument,p.ChgCRImpacedItemDataGridModel.registerCustomFilter(),this.subscribeToModelEvents(m.treeDocument);u.getImpactAnalysisFacet(m.grid.id,"impactedItems").then(i=>{this.ChgCRImpacedItemDataGridModel.loadImpactedItem(m.treeDocument,i.data[0].impactedItems),this.chgCRImpactedItemView=new e(m);var n=g.getDefaultFilter(m.columns);if(m.treeDocument.setFilterModel(n),"true"==c.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(p.ChgImpacedItemTreeModel),e._cleanBIFilterProxy();let t={data:{roots:p.ChgImpacedItemTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,p.ChgImpacedItemTreeModel)}),0==m.treeDocument.getChildren().length)m.treeDocument._modelEvents.publish({event:"treeEmpty"});else{m.treeDocument._modelEvents.publish({event:"treeNotEmpty"});let e=i.data[0].impactedItems.map(e=>({id:e.id}));this.ChgCRImpacedItemDataGridModel.addCAInfoForImpactedItems(e)}f.changeView(),h.unmask(t),!0===l&&r.message(o.CHG_Orchestration_complete),f.chgCRImpactedItemView.chgGridView.addEventListener("postEdit",function(e,t){f.updateReasonForChangeValue(t),f.updateStatusOfImpactedItem(t)});let a=document.querySelector("#impactItem-mainContainer");a&&h.isMasked(a)&&h.unmask(a)})},updateReasonForChangeValue:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.id,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),u.updateImpactItemReasonForChangeValue(i,f.contextId).then(e=>{console.log("updated on backend")})}},updateStatusOfImpactedItem:function(e){if(e.nodeModel){let t="";t="impactedKey"==e.nodeModel.options.grid.impact?"IMPACTED":"NOTIMPACTED";let i={id:e.nodeModel.options.grid.id,impactedItem:t},n=[];n.push(i),u.updateStatusOfImpactedItem(n,f.contextId).then(e=>{console.log("updated on backend")})}},addNewChangeAction:function(){},massUpdateHandler:function(){f.chgCRImpactedItemView.chgGridView.showModelMassUpdateDialog();let e=f.ChgCRImpacedItemDataGridModel.treeDocument.addEventListener("modelUpdate",function(t,i){let n=t.parent._options.children,a=[];for(let e of n){let t={id:e.options.grid.id,reasonForChange:e.options.grid.reasonForChange};a.push(t)}u.updateImpactItemReasonForChangeValue(a,f.contextId).then(e=>{console.log("updated on backend")});let o=[];for(let e of n){let t="";t="impactedKey"==e.options.grid.impact?"IMPACTED":"NOTIMPACTED";let i={id:e.options.grid.id,impactedItem:t};o.push(i)}u.updateStatusOfImpactedItem(o,f.contextId).then(e=>{console.log("updated on backend")}),e&&f.ChgCRImpacedItemDataGridModel.treeDocument.removeEventListener(e)})},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),p.unsubscribe(`IA_ImpactItem:${widget.id}`),p.subscribe(`IA_ImpactItem:${widget.id}`,function(e){"true"==c.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgImpacedItemTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgImpacedItemTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgImpacedItemTreeModel)})}),p.unsubscribe(`${e.options.id} of ${widget.id}`),p.subscribe(`${e.options.id} of ${widget.id}`,function(t){f.ChgCRImpacedItemDataGridModel.filterView(t,e)}),p.unsubscribe(`${e.options.id} colorize ${widget.id}`),p.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){f.ChgCRImpacedItemDataGridModel.enableColorizeView(t,e)}),p.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),p.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){f.ChgCRImpacedItemDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-impactedItem-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-impactedItem-object-selection-update"},function(e){f.handleObjectSelectionUpdate(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);f.ChgCRImpacedItemDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType,updateAction:"CONNECT"});let n=f.treeDocument.getAllDescendants().map(e=>e.options.grid.id),a=e.map(e=>e.objectId);var s=[],l=0;for(let e=0;e<a.length;e++)for(let t=0;t<n.length;t++)a[e]==n[t]&&(s[l]=e,l++);s.length>0&&r.warn(o.CHG_GOV_NODE_PRESENT_WARN_IMPACTED_ITEM,!0);for(let e=0;e<s.length;e++)t.splice(s[e]-e,1);t.length>0&&f.ChgCRImpacedItemDataGridModel.addExistingChildren(t).then(function(e){f.modelEvents.publish({event:"update-impact-items",data:{operation:"CONNECT",context:e.data}})},function(e){})},addExistingHandler:function(){let e=f.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingImpactedItems",extendedQuery:f.createExcludeListForSearch(e)};if(c.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();var i="../common/emxFullSearch.jsp?field=TYPES="+c.getGlobalVariable().proposedSearchType+"&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e;showChooser(i,850,630);var n=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,f.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",n)}else console.log("inside EVENT")};window.addEventListener("storage",n)}else{var a=l.activateSearch();l.search(o.CHG_GOV_ImpactBasis_Toolbar_AddImpactedItem,"",f.OnSearchComplete,"impactBasis",a,void 0,void 0,t)}},addExistingChangeAction:function(){if(c.getGlobalVariable().is3DSpace){const t="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=type_ChangeAction:CURRENT=policy_ChangeAction.state_Prepare:ECM_CHANGE_ON_HOLD!=TRUE&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+t,850,630);var e=function(i){if(i.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(t)>-1){let t=JSON.parse(localStorage.searchedObjectDetails);delete t.uniqueKey,console.log(t),f.OnSearchCompleteCA(Object.values(t)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",e)}else console.log("inside EVENT")};window.addEventListener("storage",e)}else{let e={condition:"addExistingCROrchestration",extendedQuery:'current:"Prepare" AND (NOT flattenedtaxonomies:"interfaces/Change On Hold")'};var t=l.activateSearch("","Change Action");l.search(o.CHG_GOV_Affected_Item_AddExisting_CA,"Change Action",f.OnSearchCompleteCA,"addExistingChangeAction",t,void 0,void 0,e)}},_OrchestrateChangeActions:function(){let e=[],t=[],i=f.ChgCRImpacedItemDataGridModel.impactAnalysisId,n=f.ChgCRImpacedItemDataGridModel.treeDocument.getSelectedNodes();for(let e of n)t.push(e.options.grid.id);let a={orchestrateItemIds:t,dispatchMethodKind:"ORGANIZATIONANDCOLLABSPACE",dispatchType:widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action"};e.push(a),u.orchestrateChangeAction(e,i).then(function(e){if(null!=e.data[0].relelements&&0!=Object.keys(e.data[0].relelements).length){let e,t={grid:f.impactAnalysisSelectedNodes[0].options.grid,physicalId:f.impactAnalysisSelectedNodes[0].options.grid.id,type:f.impactAnalysisSelectedNodes[0].options.grid.type,accessBits:f.impactAnalysisSelectedNodes[0].options.accessBits},i=[];i.push(t),document.querySelector("#impactItem-mainContainer")&&((e=document.querySelector("#impactItem-mainContainer")).empty(),h.mask(e)),i.modelEvents=f.modelEvents,f.createImpactedItemView(e,i,f.impactAnalysisSelectedNodes,!0),f.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"Add"}})}else r.error(o.CHG_Alredy_Orchestrate)})},createFinalIncludeListFrSearch:function(e){let t="(";for(let i=0;i<e.length;i++)t=t+"physicalid:"+e[i],i!=e.length-1&&(t+=" OR ");return t+=")"},createExcludeListForSearch:function(e){let t=[];for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchCompleteCA:function(e){const t=[];let n=f.ChgCRImpacedItemDataGridModel.treeDocument.getSelectedNodes();for(let e of n)t.push(e.options.grid.id);const a=[];for(let[t]of e)a.push(t);let o=[];for(let e of a){let i={id:e,proposedIds:t,updateAction:"CONNECT"};o.push(i)}let s=f.ChgCRImpacedItemDataGridModel.impactAnalysisId;0!=a.length&&0!=t.length&&u.connecteCAwithImpactedItem(o,s).then(function(e){let a=e.data[0].connectedProposedIds;if(0!=e.data[0].errorReport.length){var o=e.data[0].errorReport,s=[];for(var l in o)s+=o[l]+"<br/>";r.warn(s,"false")}s=[];let c=e.data;for(let e of c){e.id;let o=e.proposedIds,r=g.processChangeAction(e);for(let e of o)if(t.includes(e))for(let t of n)if(0!=a.length&&a.includes(t.options.grid.id)&&t.options.grid.id==e){t.options.grid.proposedChangeActionsData.push(r);let e=i.getProposedColumnBasedOnData(t.options.grid.proposedChangeActionsData);t.updateOptions({grid:{proposedChangeAction:e}})}}})},OnSearchComplete:function(e){for(var i=[],n=0;n<e.length;n++)i.push({id:e[n][0],type:e[n][2],updateAction:"CONNECT"});i.length&&(t.hideEmptyView(),f.ChgCRImpacedItemDataGridModel.addExistingChildren(i).then(function(e){f.modelEvents.publish({event:"update-impact-items",data:{operation:"CONNECT",context:e.data}})},function(e){}))},removeHandler:function(){const e=f.treeDocument.getSelectedNodes();for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].options.grid.id,type:e[i].options.grid.type,updateAction:"DISCONNECT"});f.ChgCRImpacedItemDataGridModel.removeChildren(t).then(function(e){f.modelEvents.publish({event:"update-impact-items",data:{operation:"DISCONNECT",context:e}})},function(e){})},removeDeletedNodesUsingIDs:function(e){for(let t=0;t<e.length;t++){let i=e[t];f.treeDocument.search({shouldStop:function(e){if(e.options.grid.id===i){return e.getParent().removeChild(e),!0}return!1}})}0==f.treeDocument.getChildren().length&&f.treeDocument._modelEvents.publish({event:"treeEmpty"})},changeAssessmentHandler:function(){const e=f.treeDocument.getSelectedNodes();if(e&&e.length>0){let t=[];e.forEach(e=>{t.push(e.options.grid.id)});const i=widget.id+"ChgCRImpactedItemDataGridLayout";l.launchAppInAppMode(i,t,"ENORIPE_AP")}else r.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleChangeAssessmentOK:function(e){if(e.length){for(let t=0;t<e.length;t++)e[t].updateAction="CONNECT";f.ChgCRImpacedItemDataGridModel.addExistingChildren(e)}},handleObjectSelectionUpdate:function(e){0===e.count?(f.chgCRImpactedItemView.toolbar.updateNodeModel("remove",{disabled:!0}),f.chgCRImpactedItemView.toolbar.updateNodeModel("changeAssessment",{disabled:!0}),f.chgCRImpactedItemView.toolbar.updateNodeModel("massUpdate",{disabled:!0}),f.chgCRImpactedItemView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="disabled"):(f.chgCRImpactedItemView.toolbar.updateNodeModel("remove",{disabled:!1}),f.chgCRImpactedItemView.toolbar.updateNodeModel("changeAssessment",{disabled:!1}),f.chgCRImpactedItemView.toolbar.updateNodeModel("massUpdate",{disabled:!1}),f.chgCRImpactedItemView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="enabled")},globalSubscribeForImpactedItemView:function(){s.addObserver("ChgCRImpactedItemDataGridLayout","ENORIPE-InApp-"+widget.id+"ChgCRImpactedItemDataGridLayout/onOK",f.handleChangeAssessmentOK)}};return f.globalSubscribeForImpactedItemView(),f}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgImpactedItemfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","DS/ENOChgServices/scripts/services/ChgDataService","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,a,o,r,s,l,c,d){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"impactItem-mainContainer"}))},updateFacet:function(){let e;this.elements.container.empty(),o.mask(this.elements.container);let t=c.getSelectedNodes();2==t.length&&("Aggregation"==t[0]._options.label?e=0:"Aggregation"==t[1]._options.label&&(e=1),1==e&&t.splice(1,1),0==e&&t.splice(0,1)),t.length&&1==t.length&&"ChangeAnalysis"==d.getGlobalVariable().lastSelectedInfoType&&(this.options.data[0].grid=t[0].options.grid,this.options.data[0].physicalId=t[0].options.grid.id,this.options.data[0].type=t[0].options.grid.type,this.options.data[0].accessBits=t[0].options.accessBits,d.getGlobalVariable().IAAccessBitsData&&d.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&d.getGlobalVariable().IAAccessBitsData.iaID===t[0].options.grid.id&&(this.options.data[0].accessBits=d.getGlobalVariable().IAAccessBitsData.accessBits),l.createImpactedItemView(this.elements.container,this.options.data,t))},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgChangeRequestDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h){"use strict";return e.extend({init:function(e){this._parent(e),this._modelEvents=null,"undefined"!=e&&"undefined"!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.crDatagridView=""},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){let t=this.processColumns(),h=this;var e={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:"",identifier:"chgCRSummaryGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(h,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){o.readyDragContent(e,t)},onDragStartCell:function(e,t){o.readyDragContent(e,t)}};e=UWA.merge(e,this.options),this.crDatagrid=new n(e),this.crDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,t){e.map(e=>{if(e.identifier==t){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCRList=e}}})},this.crDatagrid.onDelayedModelDataRequest=function(e){let t=h.crDatagrid.getCustomViewsManager().getCustomViews(),i=h.crDatagrid.getCustomViewsManager()._currentCustomViewIdentifier;t.map(e=>{if(e.identifier==i){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCRList=e}}});var n=e.collectionView;let a=[],o=[],r=["applicabilityNLS","organizationNLS","collabspaceNLS","co_Coordinator","co_Owner","sev","maturityNLS","co_name"],s=p.getGlobalVariable().customeViewCRList,l=[];if(s.forEach(function(e){r.includes(e)||l.push(e)}),-1!=e.endNodeIndex&&-1!=e.startNodeIndex){for(let t=e.startNodeIndex;t<=e.endNodeIndex;t++){a.push(n.model[t].options.grid.id),o.push(n.model[t]);for(let e=0;e<l.length;e++)n.model[t].setAttribute(l[e],void 0)}var c=a.filter(e=>!!e);c.length>0&&g.updateAsynAttributeColumn(l,c,o)}},this.crTilesView=new u({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){o.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});let m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(h,e).then(function(e){return e})}};this.crTilesView.onContextualEvent=m;let C={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:s.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:s.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},v={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}},f={expandInput:{stdTemplate:"expandInputtemplate"}},b={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new c}catch(e){console.log(e)}this.crDatagrid.getTypeRepresentationFactory().registerTypeTemplates(b),this.crDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(f),this.crDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(C),this.crDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(v),a.toolbar=this.crDatagrid.setToolbar(a.writetoolbarDefination()),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(b),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(f),h.toolbar.addEventListener("onReady",function(e){let t=h.toolbar.getNodeModelByID("addNewBlankCAId");t&&t._associatedView.registerkeyDownCallback(d.createBlankChangeOrder)}),this.crDatagrid.addEventListener("allCellsRendered",function(){h.crDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+h.crDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+h.crDatagrid.getTreeDocument().getSelectedNodes().length}}]),h.crTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_TotalItems+h.crTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:s.CHG_GOV_StatusBar_SelectedItems+h.crTilesView.getTreeDocument().getSelectedNodes().length}}])}),h.crDatagrid.addEventListener(i.POINTERHIT,function(e,t){h.onItemClick(e,t)}),h.crDatagrid.getTreeDocument().getXSO().onAdd(function(e){h.crDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+h.crDatagrid.getTreeDocument().getSelectedNodes().length}}),h.crTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+h.crDatagrid.getTreeDocument().getSelectedNodes().length}}),h._modelEvents.publish({event:"cr-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})}),h.crDatagrid.getTreeDocument().getXSO().onRemove(function(e){h.crDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),h.crTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:s.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?h._modelEvents.publish({event:"cr-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):h._modelEvents.publish({event:"cr-DataGrid-on-unselect",data:{model:e,context:e},context:e})}),h.crTilesView.addEventListener(i.POINTERHIT,function(e,t){h.onItemClick(e,t)}),this.onItemClick=function(e,t){t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount&&(t.nodeModel.select(!0),h._modelEvents.publish({event:"cr-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel}))},this.crDatagridView=UWA.createElement("div",{id:"outer-cr-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-cr-div"});let w=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-cr-div"});this.toolbar.inject(w);let D=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 76px)",position:"relative"},class:"content-cr-div crgridView showView"}),S=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 76px)",position:"relative"},class:"crtileView hideView"}),E=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:s.CHG_GOV_DataGrid_PlaceHolder_ChgRequest}).inject(E),this.crDatagrid.inject(D),this.crTilesView.inject(S),E.inject(S),this.crDatagridView.addContent(w),this.crDatagridView.addContent(D),this.crDatagridView.addContent(S),this.crDatagridView.inject(this.options.target),this.crDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.subscribe({event:"cr-DataGrid-on-search"},function(e){var t=e.query;t&&h.crDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(t)||e.options.grid.name.contains(t)?e.isVisible()||!e.options.grid.title.contains(t)&&!e.options.grid.name.contains(t)||e.show():e.hide()})}),this._modelEvents.subscribe({event:"cr-DataGrid-on-reset-search"},function(e){h.crDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})})}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.crDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgChangeRequestDataGridView","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/ChgCRDataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/Controls/ProgressBar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f){"use strict";let b={loadRealTimeCRDataPromise:function(e){return new Promise(function(t,i){n.getTimestamp().then(function(o){var r=a.processTimestampData(o);n.getConfiguredChangeRequestList({indexed:!1,simplifiedJSON:!0,timestamp:r,filter:e}).then(function(e){a.processedCRSummaryList(e).then(function(i){t({realTimeData:e,processedCRList:i})})},function(e){i(e)})},function(e){i(e)})})},loadIndexedCRDataPromise:function(e){return new Promise(function(t,i){n.getConfiguredChangeRequestList(e).then(function(e){a.processedCRSummaryList(e).then(function(i){t({CRSummaryList:e,processedCRList:i})},function(e){i(e)})},function(e){i(e)})})},postProcessing:function(){0==this.treeDocument.getChildren().length?this.treeDocument._modelEvents.publish({event:"crSummaryEmpty"}):this.treeDocument._modelEvents.publish({event:"crSummaryNotEmpty"}),this.crGridView.crDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}],this.crGridView.reapplySortModel(),this.globalSubscribeCOSummaryUpdateFromPropertyPanel(),this.globalSubscribeForTransferFromCOSummaryView()},updateTagger:function(){var e=this;"false"==d.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.treeDocument),t._cleanBIFilterProxy();let i={data:{roots:e.treeDocument.getAllDescendants()}};t.cleanPathTag(),t._onSetPathTags(i,e.treeDocument)})},createChangeRequestView:function(n){var o=this;this._pathChangeRequestSummary=[g._KEY,g._VIEWS_PREFERENCES,g._LIST_VIEW,g._FILTERVIEW];var r=u.getFilter(this._pathChangeRequestSummary),s={};s=UWA.merge(s,n),this.options=s,s.target&&(s.target.empty(),C.mask(s.target)),s.columns=t.getColumns(),o.ChgCRDataGridModel=new i,v.createCustomColumn().then(async function(t){d.getGlobalVariable().customeViewCRList=[],s.columns=[...s.columns,...t],o.treeDocument=s.treeDocument=o.ChgCRDataGridModel.createTreeDocument(),o.ChgCRlayoutModel=o.treeDocument,o.ChgCRDataGridModel.registerCustomFilter();var i=a.getDefaultFilter(s.columns);s.treeDocument.setFilterModel(i),o.crGridView=new e(s),await o.crGridView.render(),o.subscribeToModelEvents(o.treeDocument);var n=o.crGridView.crDatagrid.getCustomViewsManager().getCurrentCustomView();n&&n.columnsVisibleFlag&&(d.getGlobalVariable().customeViewCRList=Object.keys(n.columnsVisibleFlag));var l="";"inactive"===r?l="inactiveCR":(l="activeCR",u.updateFilter(o._pathChangeRequestSummary,"activeCR")),o.updateGrid(l)})},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.crGridView.crDatagrid.placeholder=h.CHG_GOV_DataGrid_PlaceHolder_FetchChgRequest,this.updateTagger()},updateGrid:async function(e){var t=this;if(t.preUpdateProcessing(),t.options.target&&C.mask(t.options.target),"inactiveCR"!=e){var i=await t.loadRealTimeCRDataPromise(e);t.ChgCRDataGridModel.loadChangeRequestData(t.treeDocument,i.processedCRList)}t.params.filter=e,t.loadIndexedCRDataPromise(t.params).then(async function(e){t.ChgCRDataGridModel.loadIndexedChangeRequests(t.treeDocument,e.processedCRList),t.currentPage=parseInt(e.CRSummaryList.summary["Current Page"]),t.totalPages=parseInt(e.CRSummaryList.summary["Total Pages"]),t.options.target&&C.unmask(t.options.target),t.crGridView.crDatagrid.placeholder=h.CHG_GOV_DataGrid_PlaceHolder_NoChgRequest,t.currentPage<t.totalPages?(t.updateTagger(),t.crGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.crGridView.crDatagrid.onInfiniteScroll(async function(e){t.getNextPageChangeRequests("DGV")}),t.crGridView.crTilesView.onInfiniteScroll(async function(e){t.getNextPageChangeRequests("RTV")})):(t.updateTagger(),t.crGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())})},getNextPageChangeRequests:async function(e){if(this.currentPage<this.totalPages){this.options.target&&C.mask(this.options.target),this.params.pageNumber++,this.currentPage++;let t=await this.loadIndexedCRDataPromise(this.params);this.ChgCRDataGridModel.loadIndexedChangeRequests(this.treeDocument,t.processedCRList),this.updateTagger(),this.crGridView.setListnersOnToolbar(),this.loadingViewPreference(),this.postProcessing(),"DGV"===e?this.crGridView.crDatagrid.infiniteScrollProcessDone():this.crGridView.crTilesView.infiniteScrollProcessDone(),this.options.target&&C.unmask(this.options.target)}},changeView:function(){t.changeView("GridView")},refreshLayout:function(e){let t=this.ChgCRlayoutModel;(new i).updateNodeIndexed(t,e),this.crGridView.crDatagrid.ensureNodeModelVisible(this.ChgCRlayoutModel.getChildren()[0],!1)},removeDataFromGrid:function(e,t){b.ChgCRlayoutModel.getChildren();for(let t=0;t<e.length;t++){let i=e[t];b.ChgCRlayoutModel.search({shouldStop:function(e){return e.options.grid.id===i&&(b.removingNode(e),!0)}}),0==b.ChgCRlayoutModel.getChildren().length&&b.ChgCRlayoutModel._modelEvents.publish({event:"crSummaryEmpty"})}},removingNode:function(e){this.ChgCRlayoutModel.removeRoot(e)},sortBySeverity:function(){o.sortingData.menu[1].fonticon.content=o.sortingData.menu[1].fonticon.content.replace(" icon-blue","");let e=b.crGridView,t=o.toolbar.getNodeModelByID("sorting");o.sortingData.menu[0].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(o.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.crDatagrid.sortModel=[{dataIndex:"sev",sort:"asc"}]):(o.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.crDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:o.sortingData}})},sortByMaturity:function(){o.sortingData.menu[0].fonticon.content=o.sortingData.menu[0].fonticon.content.replace(" icon-blue","");let e=b.crGridView,t=o.toolbar.getNodeModelByID("sorting");o.sortingData.menu[1].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(o.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.crDatagrid.sortModel=[{dataIndex:"maturityNLS",sort:"asc"}]):(o.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.crDatagrid.sortModel=[{dataIndex:"maturityNLS",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:o.sortingData}})},globalSubscribeCOSummaryUpdateFromPropertyPanel:function(){l.addObserver("ChgCRDataGridLayout","CO-Properties-Update",this.handleForUpdatingFromPropertyPanel)},globalSubscribeForTransferFromCOSummaryView:function(){l.addObserver("ChgCRDataGridLayout","ENOLC_MOVE_CMD_UPDATE",this.handleForCOSummaryTransfer)},handleForUpdatingFromPropertyPanel:function(e){let n=b.ChgCRlayoutModel.getAllDescendants(),a=e.objectId,o=e.type.value;var r=[],s=[];let l="",c="",d="",u="";for(let C=0;C<n.length;C++){if(n[C].options.grid.id==a){if("Change Action"==o?e&&e.Synopsis&&(d=e.Synopsis.value,n[C].options.grid.title=d):e&&e.Title&&(d=e.Title.value,n[C].options.grid.title=d),e&&e.owner){u=n[C].options.grid.name,c=e.owner.value,n[C].options.grid.owner=c;var g=e.owner.value}e&&e.Severity&&(l=e.Severity.value,n[C].options.grid.severity=l);let a=e.Severity.valueDB,v=e.owner.valueDB,f=t.createCustomSeverity(a,l),b=t.createCustomOwner(v,c);n[C].options.grid.stateGrade;"Low"==l?r.push("level-low"):"Medium"==l?r.push("level-medium"):"High"==l&&r.push("level-high"),"true"==n[C].options.grid.onHold&&r.push("pause"),s.push(l);var p={};p.name=u,p.title=d,p.severity=l,p.severityNLS=a,p.ownerFullName=g,p.maturityNLS=n[C].options.grid.maturityNLS;var h=i.prototype.createCustomTooltip(p),m=u+" | "+g;n[C].updateOptions({label:n[C].options.grid.title,grid:{title:n[C].options.grid.title,owner:n[C].options.grid.owner,severity:n[C].options.grid.Severity,sev:f,co_Owner:b},statusbarIcons:r,statusbarIconsTooltips:s,customTooltip:h,subLabel:m})}}},handleForCOSummaryTransfer:function(e){let n,a=b.ChgCRlayoutModel.getAllDescendants(),o=[],r="",s="";Object.keys(e.data.attributes).forEach(function(t){let i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,o.push(i.id)});for(let e=0;e<o.length;e++){n=o[e];for(let e=0;e<a.length;e++){if(a[e].options.grid.id==n.id){if(n.newOwnerId&&n.newOwnerFullName&&(s=a[e].options.grid.name,r=n.newOwnerId,a[e].options.grid.owner=r,a[e].options.grid.ownerFullName=n.newOwnerFullName),n.newOrganization){let t=n.newOrganization;a[e].options.grid.orgnaizationNLS=t}if(n.newCollabSpace){let t=n.newCollabSpace;a[e].options.grid.collabspaceNLS=t}let o=n.newOwnerFullName,u=t.createCustomOwner(r,o);var l={};l.name=s,l.title=a[e].options.grid.title,l.severity=a[e].options.grid.severity,l.severityNLS=a[e].options.grid.severityNLS,l.ownerFullName=o,l.maturityNLS=a[e].options.grid.maturityNLS;var c=s+" | "+o,d=i.prototype.createCustomTooltip(l);a[e].updateOptions({grid:{collabspaceNLS:a[e].options.grid.collabspaceNLS,organizationNLS:a[e].options.grid.organizationNLS,owner:a[e].options.grid.owner,ownerFullName:a[e].options.grid.ownerFullName,co_Owner:u},customTooltip:d,subLabel:c})}}}},loadingViewPreference:function(){let e=f("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=r.MOBILE_CUTOFF){let t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(s.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{let t=e.getCASummaryViewDesktop();void 0===t||"GridView"===t?this.changeView():s.changeView()}},filterView:function(e){t.filterView(e.filter),b.updateGrid(e.filter)},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"crSummaryEmpty"},function(e){s.showEmptyView(),b.crGridView.crDatagrid.placeholder=h.CHG_GOV_DataGrid_PlaceHolder_NoChgRequest}),e._modelEvents.subscribe({event:"crSummaryNotEmpty"},function(e){s.hideEmptyView()}),m.unsubscribe(`${e.options.id}:${widget.id}`),m.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.treeDocument),e._cleanBIFilterProxy();let t={data:{roots:that.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,that.treeDocument)})}),m.unsubscribe(`${e.options.id} of ${widget.id}`),m.subscribe(`${e.options.id} of ${widget.id}`,function(e){b.ChgCRDataGridModel.filterView(e)}),m.unsubscribe(`${e.options.id} colorize ${widget.id}`),m.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){b.ChgCRDataGridModel.enableColorizeView(e)}),m.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){b.ChgCRDataGridModel.disableColorizeView(e)})}};return b}),define("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome",["UWA/Core","DS/CoreEvents/ModelEvents","DS/ENOChgGovernanceUX/scripts/components/zApplicationFrame/ChgGovzApplicationFrame","DS/ENOChgGovernanceUX/scripts/components/welcomePanel/ChgGovWelcomePanelWrapper","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalVariable","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/components/tab/ChgGovernanceTab","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAdaptor","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout","DS/ENOChgGovernanceUX/scripts/util/ChgIDCardHeaderEventsUtility","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/router/ChgGovRouterConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgGovernanceUX/scripts/view/recents/recentlyOpened/ChgRecentlyOpenedView","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/ChgGovInit","DS/ENOChgGovernanceUX/scripts/view/facets/approvals/ChgGovApprovalsView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCreateChangeRequest","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCreateChangeAction","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout","DS/UIKIT/Mask","DS/TreeModel/TreeNodeModel","require"],function(e,t,i,n,a,o,r,s,l,c,d,u,g,p,h,m,C,v,f,b,w,D,S,E,O,y,_,G,I,N,T,A,V,M,R,U,x,F,L,P,H,B,k){"use strict";var W={initHome:function(t){this._welcomePanelComponent=new n,this._applicationContainer=document.createElement("div"),e.extendElement(this._applicationContainer),widget.body.setContent(this._applicationContainer),o.getImmersiveFrame().inject(this._applicationContainer),this._zApplicationFrame=new i,this._zApplicationFrame._init(this._applicationChannel,C,this._welcomePanelComponent),o.getImmersiveFrame().setContentInBackgroundLayer(this._zApplicationFrame),this.infoPanel=this._zApplicationFrame._triptychWrapper.getRightPanelContainer(),this._welcomePanelComponent.init(this._applicationChannel,C,this._zApplicationFrame._triptychWrapper.getLeftPanelContainerTriptych()),C.start("/home")},init:function(e,i){m.init();v.initialize();var n={name:"appChannelModleEvent"};this._applicationChannel=new t(n),this._subscribeToEvents(),C.setDependency("applicationChannel",this._applicationChannel),C.setDependency("xChangeApp",this),this.initHome(i),this.updateCRTab()},updateCRTab:function(){let e=widget.getValue("X3DContentId")?JSON.parse(widget.getValue("X3DContentId")):null;console.log(e),null!=e&&"crAssessment"===e.data.items[0].tabName&&(this._pathChangeRequestsDetails=[L._KEY,L._VIEWS_PREFERENCES,L._CHANGE_REQUESTS_DETAILS],this.contentX3D=e,f.updateTab(this._pathChangeRequestsDetails,"crAssessment"),r.publish(`crImpactAnalysis:${widget.id}`,{}))},openWithIDCard:function(e,t){this.init(e,t);var i={};let n=t.extData.objectId;i.context=n,"Change Order"==t.extData.parentType?(W.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(n)):"Change Request"==t.extData.parentType?(W.launchPropertyPanelContext(i),T.displayObjectInfoInsideIDcard(n)):"Change Action"==t.extData.parentType&&(W.launchPropertyPanelContext(i),M.displayObjectInfoInsideIDcard(n))},clearContent:function(){if(this.govContainer&&this.govContainer.hasChildNodes())if(void 0!==window.__karma__){var e=this.govContainer.childNodes;for(let t=0;t<e.length;t++)e[t].remove()}else this.govContainer.innerHTML=""},loadingMyChangeOrders:function(){var t=this;this._applicationChannel;this._applicationChannel.publish({event:"triptych-set-size",data:{side:"left",size:l.LEFT_PANEL_SIZE_EXPANDED}}),this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:l.PATH_MY_CHANGE_ORDERS}}),this._container=e.createElement("div"),this._container.classList.add("changeorder-landingpage"),C.setDependency("landingpage",this._container);this._zApplicationFrame._triptychWrapper.getMainPanelContainer();b.makeDroppable(this._container,function(e){let t=e[0].objectId;var i={};i.context=t,1==e.length?w.getObjectTypeInformation(t).then(function(e){"Change Order"==e?(W.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(t)):"Change Request"==e?"true"===U.getGlobalVariable().CHG_CHANGE_REQUEST&&(W.launchPropertyPanelContext(i),T.displayObjectInfoInsideIDcard(t)):""==e&&S.warn(a.CHG_GOV_Block_NotSupported_Drop)}):S.warn(a.CHG_GOV_Block_Multi_Drop)}),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(this._container);var i={};i.modelEvents=this._applicationChannel,i.target=this._container,s.createChangeOrderView(i),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("co-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"co-DataGrid-on-dblclick"},function(e){g.displayObjectInfoInsideIDcard(e.model.id)});var n=this._applicationChannel;widget.addEvents({onSearch:function(e){n.publish({event:"co-DataGrid-on-search",data:{query:e},context:t})},onResetSearch:function(e){n.publish({event:"co-DataGrid-on-reset-search",data:{query:e},context:t})}}),this._applicationChannel.subscribe({event:"co-DataGrid-on-click"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e);var i={[e.model.id]:{id:e.model.id,name:e.model.name,title:e.model.title,type:e.model.type}},n={metadata:{appId:widget.id,appName:widget.getValue("appId"),timestamp:Math.floor(Date.now())},data:{paths:[e.model.id],attributes:i},version:"1.0"};r.publish("DS/Object/select",n)}),this._applicationChannel.subscribe({event:"co-DataGrid-on-unselect"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e)}),this._applicationChannel.subscribe({event:"co-DataGrid-on-unselect-all"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e)})},_initRecentContent:function(){var t=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:l.PATH_RECENTY_OPENED}}),this._applicationChannel.publish({event:"triptych-set-size",data:{side:"left",size:l.LEFT_PANEL_SIZE_EXPANDED}}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("load-info-panel-chg-recents")]||this._applicationChannel.subscribe({event:"load-info-panel-chg-recents"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e)}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("recent-DataGrid-on-unselect-all")]||this._applicationChannel.subscribe({event:"recent-DataGrid-on-unselect-all"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e)}),e.createElement("div").classList.add("outerRecentlyOpenedDiv");var i=e.createElement("div");i.classList.add("firstROChildDiv"),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i);var n={};n.target=i,n._applicationChannel=this._applicationChannel,new O(n).globalSubscribeForRecentlyOpenedView()},_initChangeRequestContent:function(){var t=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:l.PATH_MY_CHANGE_REQUESTS}});var i=e.createElement("div");i.classList.add("outerMYCRDiv");var n=e.createElement("div");n.classList.add("mainMyCRDiv");var o={};o.target=n,o.modelEvents=this._applicationChannel,n.inject(i),b.makeDroppable(i,function(e){let t=e[0].objectId;var i={};i.context=t,1==e.length?w.getObjectTypeInformation(t).then(function(e){"Change Order"==e?(W.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(t)):"Change Request"==e?"true"===U.getGlobalVariable().CHG_CHANGE_REQUEST&&(W.launchPropertyPanelContext(i),T.displayObjectInfoInsideIDcard(t)):""==e&&S.warn(a.CHG_GOV_Block_NotSupported_Drop)}):S.warn(a.CHG_GOV_Block_Multi_Drop)}),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i),N.createChangeRequestView(o);var s=this._applicationChannel;this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("cr-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"cr-DataGrid-on-dblclick"},function(e){C.navigate(l.ROUTE_CR_DETAILS,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:e})}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("cr-DataGrid-on-click")]||this._applicationChannel.subscribe({event:"cr-DataGrid-on-click"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e);var i={[e.model.id]:{id:e.model.id,name:e.model.name,title:e.model.title,type:e.model.type}},n={metadata:{appId:widget.id,appName:widget.getValue("appId"),timestamp:Math.floor(Date.now())},data:{paths:[e.model.id],attributes:i},version:"1.0"};r.publish("DS/Object/select",n)}),this._applicationChannel.subscribe({event:"cr-DataGrid-on-unselect"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e)}),this._applicationChannel.subscribe({event:"cr-DataGrid-on-unselect-all"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e)}),widget.addEvents({onSearch:function(e){s.publish({event:"cr-DataGrid-on-search",data:{query:e},context:t})},onResetSearch:function(e){s.publish({event:"cr-DataGrid-on-reset-search",data:{query:e},context:t})}})},_initChangeActionContent:function(){var t=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:l.PATH_MY_CHANGE_ACTIONS}});var i=e.createElement("div");i.classList.add("outerMYCADiv");var n=e.createElement("div");n.classList.add("mainMyCADiv");var o={};o.target=n,o.modelEvents=this._applicationChannel,n.inject(i),b.makeDroppable(i,function(e){let t=e[0].objectId;var i={};i.context=t,1==e.length?w.getObjectTypeInformation(t).then(function(e){"Change Order"==e?(W.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(t)):"Change Request"==e?"true"===U.getGlobalVariable().CHG_CHANGE_REQUEST&&(W.launchPropertyPanelContext(i),T.displayObjectInfoInsideIDcard(t)):""==e&&S.warn(a.CHG_GOV_Block_NotSupported_Drop)}):S.warn(a.CHG_GOV_Block_Multi_Drop)}),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i),P.createChangeActionView(o);var s=this._applicationChannel;this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("ca-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"ca-DataGrid-on-dblclick"},function(e){C.navigate(l.ROUTE_CA_DETAILS,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:e})}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("ca-DataGrid-on-click")]||this._applicationChannel.subscribe({event:"ca-DataGrid-on-click"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e);var i={[e.model.id]:{id:e.model.id,name:e.model.name,title:e.model.title,type:e.model.type}},n={metadata:{appId:widget.id,appName:widget.getValue("appId"),timestamp:Math.floor(Date.now())},data:{paths:[e.model.id],attributes:i},version:"1.0"};r.publish("DS/Object/select",n)}),this._applicationChannel.subscribe({event:"ca-DataGrid-on-unselect"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e)}),this._applicationChannel.subscribe({event:"ca-DataGrid-on-unselect-all"},function(e){e.context.getTreeDocument()&&t.launchPropertyPanel(e)}),widget.addEvents({onSearch:function(e){s.publish({event:"ca-DataGrid-on-search",data:{query:e},context:t})},onResetSearch:function(e){s.publish({event:"ca-DataGrid-on-reset-search",data:{query:e},context:t})}})},_initWelcomePanel:function(){this._welcomePanelComponent.init(this._applicationChannel,C,this._zApplicationFrame._triptychWrapper.getLeftPanelContainer())},_initWelcomePanelDeactivate:function(){this._welcomePanelComponent.init(this._applicationChannel,C,this._zApplicationFrame._triptychWrapper.getLeftPanelContainerTriptych())},reactivateWP:function(e){if(e||1!=this._isWPActivated){widget.body.offsetWidth>l.MOBILE_BREAKPOINT&&this._applicationChannel.publish({event:"triptych-show-panel",data:"left"}),this._applicationChannel.publish({event:"show-welcomepanel-icon"}),this._applicationChannel.publish({event:"topbar-show-title"});var t=this;this._tokenSub=this._applicationChannel.subscribe({event:"resizing-triptych-container"},function(e){e<l.MOBILE_BREAKPOINT?t._applicationChannel.publish({event:"triptych-hide-panel",data:"left"}):t._applicationChannel.publish({event:"triptych-show-panel",data:"left"})}),this._isWPActivated=!0}},deactivateWP:function(e){e||0!=this._isWPActivated?(this._applicationChannel.publish({event:"triptych-hide-panel",data:"left"}),this._applicationChannel.publish({event:"hide-welcomepanel-icon"}),this._applicationChannel.publish({event:"topbar-hide-title"}),this._tokenSub&&this._applicationChannel.unsubscribe(this._tokenSub),this._isWPActivated=!1):this._applicationChannel.publish({event:"topbar-hide-title"})},showIDCard:function(e,t){let i={},n=k("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome");"ChangeOrder"==e.model.isKindOfType?(i.context=e.model.id,i.type="ChangeOrder",n.launchPropertyPanelContext(i),this.buildIDCardViewForCO(e,t)):"ChangeRequest"==e.model.isKindOfType?(i.context=e.model.id,i.type="ChangeRequest",n.launchPropertyPanelContext(i),this.buildIDCardViewForCR(e,t)):"ChangeAction"==e.model.isKindOfType?(i.context=e.model.id,i.type="ChangeAction",n.launchPropertyPanelContext(i),this.buildIDCardViewForCA(e,t)):this.buildIDCardViewForCO(e,t)},buildIDCardViewForCO:function(t,i){var n=this;w.getChangeOrderUserAccess(t.model.id).then(function(a){var o=a.data[0].id,s=(a.data[0].type,a.data[0].dataelements);s=D.processAccessBitCO(s);var l={id:o,type:t.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",l);var u=document.getElementsByClassName("moduleWrapper")[0];u&&H.isMasked(u)&&H.unmask(u);let p=e.createElement("div");if(p.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(p),p){p.setContent("");var h=e.createElement("div");h.classList.add("outerContainerDiv"),h.inject(p);var C=e.createElement("div");C.classList.add("outerContainerHeaderDiv"),C.inject(h),C.innerHTML="<h1>Change Order Header</h1>";var v=e.createElement("div");if(v.classList.add("outerContainerTabDiv"),v.inject(h),"outsideCall"==i){var f=t.model;d.createIDCardHeader(C,f,l)}else g.createHeaderFieldsJSON(t).then(function(e){d.createIDCardHeader(C,e,l)});var b={};b.id=t.model.id,b.contextDetails={id:b.id,name:t.model.name,title:t.model.title,isKindOfType:t.model.isKindOfType,_modelEvents:n._applicationChannel,access:l};var w=g.getTabs(n,b);b.tabs=w,c.createGovTab(v,b);var S=t.model.id;m.setId(S);var E={};E.id=t.model.id,E.type=t.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(E))}})},updatingRecent:function(e){this._pathRecents=[L._KEY,L._VIEWS_PREFERENCES,L._RECENTLY_OPENED],f.updateRecents(this._pathRecents,e)},getRecents:function(){this._pathRecents=[L._KEY,L._VIEWS_PREFERENCES,L._RECENTLY_OPENED];var e=f.getRecents(this._pathRecents);return e&&(e=(e=JSON.parse(e)).slice(-2*parseInt(widget.getPreference("recentlyOpenedCount").value),5),e=JSON.stringify(e)),e},addRecentItemsIdsInPreference:function(e){let t=this,i=[],n=t.getRecents();if(""==n)i.push(e),t.updatingRecent(JSON.stringify(i));else{let i=JSON.parse(n),a=t.checkExistingIdAndRemoved(i,e);a.unshift(e),t.updatingRecent(JSON.stringify(a))}},checkExistingIdAndRemoved:function(e,t){var i=e.indexOf(t);return i>=0&&e.splice(i,1),e},buildIDCardViewForCR:function(t,i){var n=this;w.getChangeRequestUserAccess(t.model.id).then(function(a){var o=t.model.id,s=(a.data[0].type,a.data[0].dataelements);s=D.processAccessBitCR(s);var l={id:o,type:t.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",l);var u=document.getElementsByClassName("moduleWrapper")[0];u&&H.isMasked(u)&&H.unmask(u);let g=e.createElement("div");if(g.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(g),g){g.setContent("");var p=e.createElement("div");p.classList.add("outerContainerDiv"),p.inject(g);var h=e.createElement("div");h.classList.add("outerContainerHeaderDiv"),h.inject(p),h.innerHTML="<h1>Change Order Header</h1>";var C=e.createElement("div");if(C.classList.add("outerContainerTabDiv"),C.inject(p),"outsideCall"==i){var v=t.model;d.createIDCardHeader(h,v,l)}else T.createHeaderFieldsJSON(t).then(function(e){d.createIDCardHeader(h,e,l)});var f={};f.id=t.model.id,f.contextDetails={id:f.id,name:t.model.name,title:t.model.title,isKindOfType:t.model.isKindOfType,_modelEvents:n._applicationChannel,access:l};var b=T.getCRTabs(A,f,n._applicationChannel);f.tabs=b,c.createGovTab(C,f);var w=t.model.id;m.setId(w);var S={};S.id=t.model.id,S.type=t.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(S))}})},buildIDCardViewForCA:function(t,i){var n=this;w.getChangeActionUserAccess(t.model.id).then(function(a){let o=a.data[0].id,s=a.data[0];s=D.processAccessBitCA(s);var l={id:o,type:t.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",l);var u=document.getElementsByClassName("moduleWrapper")[0];u&&H.isMasked(u)&&H.unmask(u);let g=e.createElement("div");if(g.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(g),g){g.setContent("");var p=e.createElement("div");p.classList.add("outerContainerDiv"),p.inject(g);var h=e.createElement("div");h.classList.add("outerContainerHeaderDiv"),h.inject(p),h.innerHTML="<h1>Change Action Header</h1>";var C=e.createElement("div");if(C.classList.add("outerContainerTabDiv"),C.inject(p),"outsideCall"==i){var v=t.model;d.createIDCardHeader(h,v,l)}else M.createHeaderFieldsJSON(t).then(function(e){d.createIDCardHeader(h,e,l)});var f={};f.id=t.model.id,f.contextDetails={id:f.id,name:t.model.name,title:t.model.title,description:t.model.description,severity:t.model.severity,maturity:t.model.maturity,isKindOfType:t.model.isKindOfType,_modelEvents:n._applicationChannel};var b=M.getTabs(R,f,n._applicationChannel);f.tabs=b,c.createGovTab(C,f);var w=t.model.id;m.setId(w);var S={};S.id=t.model.id,S.type=t.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(S))}})},createOrchestrationTab:function(t){var i=e.createElement("div");return i.classList.add("chg-orchestration-container"),t.target=i,p.createChangeOrchestrationView(t,this._applicationChannel),i},createMembersTab:function(t){var i=e.createElement("div");return i.classList.add("chg-member-container"),t.target=i,h.createMembersView(t),i},createApprovalsTab:function(t,i){let n=e.createElement("div"),a=e.createElement("div");a.classList.add("chg-Approval-container");let o=e.createElement("div",{id:"chg-Task-container"});return n.appendChild(a),t.target=a,t.taskContainer=o,G.createApprovalsView(t),a},launchPropertyPanelContext:function(e){var t=[],i={physicalId:e.context,metatype:"businessobject",type:e.type,modelEvents:this._applicationChannel,facetSelect:e.facetSelect};if(U.getGlobalVariable().lastSelectedInfoType!=e.type&&(U.getGlobalVariable().lastSelectedInfoType=e.type),t.push(i),this.propertyCmp){var n=t;this.propertyCmp.setState(n,!0)}else{var a={objectInfo:t},o=new u;o.start(a),this.propertyCmp=o}m.makePropertyViewVisible(this.infoPanel)},launchPropertyPanel:function(e){const t=e.context.getTreeDocument().getSelectedNodes().filter(e=>"ia_Total"!=e.options.grid.id);var i=[];if(t.length>0)i=this.createJsonForInfoPanel(t),U.getGlobalVariable().lastSelectedInfoType!=i[0].type&&(U.getGlobalVariable().lastSelectedInfoType=i[0].type);else{if(1!==e.context.getTreeDocument()._updateCnt)return;var n={physicalId:e.PhysicalID,metatype:"businessobject",type:e.type,modelEvents:this._applicationChannel};U.getGlobalVariable().lastSelectedInfoType=e.type,i.push(n)}if(this.propertyCmp)this.propertyCmp.setState(i,!0);else{var a={objectInfo:i},o=new u;o.start(a),this.propertyCmp=o}m.makePropertyViewVisible(this.infoPanel)},initializePropertyPanelwithEmptyData:function(){var e=[],t={objectInfo:e},i=new u;i.start(t),this.propertyCmp=i;var n=e;this.propertyCmp.setState(n,!0),m.makePropertyViewVisible(this.infoPanel)},createJsonForInfoPanel:function(e){var t=[];for(let i=0;i<e.length;i++){let n={physicalId:e[i].options.grid.id,metatype:"businessobject",type:e[i].options.grid.isKindOfType,grid:e[i].options.grid,modelEvents:this._applicationChannel};t.push(n)}return t},_subscribeToEvents:function(){var t=this;this._applicationChannel.subscribe({event:"welcome-panel-action-selected"},function(e){t.postActionClickFlags&&t.postActionClickFlags.isClickProcessing||(t.postActionClickFlags={isClickProcessing:!1},e&&e.id===l.PATH_NEW_CHANGE_REQUEST?(I.launchCreateChangeRequestDialog(t.postActionClickFlags),t.postActionClickFlags.isClickProcessing=!0):e&&e.id===l.PATH_NEW_CHANGE_ORDER?(console.log("...........  open create dailog for CO creation...................."),x.createChangeOrder(t.postActionClickFlags),t.postActionClickFlags.isClickProcessing=!0):e&&e.id===l.PATH_OPEN_CHANGE_ORDER?t.openChangeOrderFromActivity():e&&e.id===l.PATH_NEW_CHANGE_ACTION&&(console.log("...........  open create dailog for CA creation...................."),V.launchCreateChangeActionDialog(t.postActionClickFlags),t.postActionClickFlags.isClickProcessing=!0))}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("update-property-panel-data")]||this._applicationChannel.subscribe({event:"update-property-panel-data"},function(e){if(e.context.getTreeDocument()){if(U.getGlobalVariable().deletionData&&U.getGlobalVariable().deletionData.wid==widget.id&&"CR_IA"==U.getGlobalVariable().deletionData.nav&&U.getGlobalVariable().deletionData.deletedIDs.includes(e.context.options.grid.id))return;t.launchPropertyPanel(e)}}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("update-property-panel-contextdata")]||this._applicationChannel.subscribe({event:"update-property-panel-contextdata"},function(e){e.context&&"string"==typeof e.context&&t.launchPropertyPanelContext(e)}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("hideEmpty-datagrid")]||this._applicationChannel.subscribe({event:"hideEmpty-datagrid"},function(e){e.elements.poolContainerSync.getChildren()[1].empty()}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("showEmpty-datagrid")]||this._applicationChannel.subscribe({event:"showEmpty-datagrid"},function(t){var i=e.createElement("div",{html:a.CHG_GOV_Empty_DataGrid_PlaceHolder});null!=t.elements.poolContainerSync.getChildren()[1]&&""==t.elements.poolContainerSync.getChildren()[1].innerHTML&&t.elements.poolContainerSync.getChildren()[1].appendChild(i)}),this._applicationChannel.subscribe({event:"triptych-leaving-mobile"},function(e){0!=t._isWPActivated&&t._applicationChannel.publish({event:"triptych-show-panel",data:"left"})}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("add_aggregation_row_datagrid")]||this._applicationChannel.subscribe({event:"add_aggregation_row_datagrid"},function(e){"true"==U.getGlobalVariable().CHG_IA_COLUMN_ASSESSMENT&&e.treeDocument.addRoot(new B({label:a.CHG_GOV_IA_LastColumn_label,grid:{isLastNode:!0,id:"ia_Total",title:a.CHG_GOV_IA_LastColumn_label}}))}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("remove_aggregation_row_datagrid")]||this._applicationChannel.subscribe({event:"remove_aggregation_row_datagrid"},function(e){const t=e.treeDocument.getAllDescendants().filter(e=>"ia_Total"===e.options.grid.id);e.treeDocument.removeRoot(t[0])})},openChangeOrderFromActivity:function(){let e=E.activateSearch("Change Order"),t="Change Order";"true"===U.getGlobalVariable().CHG_CHANGE_REQUEST&&(t+=",Change Request"),t+=",Change Action",E.search(a.CHG_GOV_Welcome_Activity_Open_Change_Orders,t,this.OnSearchComplete,"changeorderopen",e)},OnSearchComplete:function(e){let t=e[0][0];if(1==e.length){let i={};i.context=e[0][0],w.getObjectTypeInformation(t).then(function(e){"Change Order"==e?(W.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(t)):"Change Request"==e?"true"===U.getGlobalVariable().CHG_CHANGE_REQUEST&&(W.launchPropertyPanelContext(i),T.displayObjectInfoInsideIDcard(t)):"Change Action"==e&&(W.launchPropertyPanelContext(i),M.displayObjectInfoInsideIDcard(t))})}},openIDCard:function(e,t){w.getObjectTypeInformation(e).then(function(t){"Change Order"==t?g.getChangeOrderModelForIDCard(e).then(function(e){W.showIDCard(e)}):"Change Request"==t?"true"===U.getGlobalVariable().CHG_CHANGE_REQUEST&&T.getChangeRequestModelForIDCard(e).then(function(e){W.showIDCard(e)}):"Change Action"==t&&M.getChangeActionModelForIDCard(e).then(function(e){W.showIDCard(e)})})},onRefresh:function(){y.setInfraValue().then(function(e){new _({type:"ChangeOrder",information:e}).loadInfraForGovWidget().then(function(e){var t=f.getRouteInfo();if(t&&t.name==l.ROUTE_MY_CHANGE_ORDERS)C.navigate(l.ROUTE_MY_CHANGE_ORDERS,{isRefresh:!0},{reload:!0});else if(t&&t.name==l.ROUTE_CO_DETAILS)g.displayObjectInfoInsideIDcard(t.params.changeOrderId);else if(t&&t.name==l.ROUTE_CR_DETAILS)T.displayObjectInfoInsideIDcard(t.params.changeRequestId);else if(t&&t.name==l.ROUTE_CA_DETAILS)M.displayObjectInfoInsideIDcard(t.params.changeRequestId);else if(t&&t.name==l.ROUTE_MY_CHANGE_REQUESTS)C.navigate(l.ROUTE_MY_CHANGE_REQUESTS,{isRefresh:!0},{reload:!0});else if(t&&t.name==l.ROUTE_MY_CHANGE_ACTIONS)C.navigate(l.ROUTE_MY_CHANGE_ACTIONS,{isRefresh:!0},{reload:!0});else if(t&&(t.name.includes(l.ROUTE_CR_ORCHESTRATION_LEVEL1)||t.name.includes(l.ROUTE_CO_ORCHESTRATION_LEVEL1))){let e=[L._KEY,L._MODEL],i=f.getPreference(e),n={};n.rootNode=i[L._ID_CARD],n.level1Node=i[L._ORCHESTRATION_LEVEL1],n.level="level1",(t.name.includes(l.ROUTE_CR_ORCHESTRATION_LEVEL2)||t.name.includes(l.ROUTE_CO_ORCHESTRATION_LEVEL2))&&(n.level2Node=i[L._ORCHESTRATION_LEVEL2],n.level="level2"),(t.name.includes(l.ROUTE_CR_ORCHESTRATION_LEVEL3)||t.name.includes(l.ROUTE_CO_ORCHESTRATION_LEVEL3))&&(n.level3Node=i[L._ORCHESTRATION_LEVEL3],n.level="level3");let a=t.name;C.navigate(a,{id:t.params.changeOrderId,name:t.params.changeOrderName,title:t.params.changeOrderTitle,nodeModel:n},{reload:!0})}else C.navigate(l.ROUTE_RECENTY_OPENED,{},{reload:!0})})})}};return W});