define("DS/DELPPWModelPlugins/DatabasePlugin/DatabasePlugin",["UWA/Core","UWA/Promise","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWNavigationServices/NavigateUtil","DS/DELPPWDicoServices/DicoUtils","DS/DELPPWModelServices/ModelUtils","DS/DELPPWModelServices/BehaviorUtil","DS/DELPPWNavigationServices/SwitchDBModeManager","DS/DELPPWResourceServices/ResourceUtils"],function(e,t,n,o,i,r,s,u,c){"use strict";return function(a){var l,d=[];return l=function e(t,o){var i,r,s;if(o.id!==t.id){for(i=n.getParentInstancesFromCollection(o.id),s=0;s<i.length;s++)if(r=i[s],e(t,n.getAggregatingReferenceModelFromInstance(r)))return!0;return!1}return!0},{name:"DatabasePlugin",onStart:function(){var t=this;n.setReferenceCollectionEvents({onAdd:function(e,t,n){a.getMediator().notify("addReference",[e,t,n])},onChange:function(e,t,n){a.getMediator().notify("changeReference",[e,t,n])},"onChange:sortIndex":function(e,t,n){a.getMediator().notify("changeSortIndex",[e,t,n])},onRemove:function(e,o,i){var r,s=t.getInstancesFromCollection(e.id),u=t.getParentInstancesFromCollection(e.id);for(r=0;r<u.length;r++)t.removeInstance(u[r]);for(r=0;r<s.length;r++)t.removeInstance(s[r]);n.getImpactedConnections(e.id).forEach(function(e){t.removeConnection(e.id)}),a.getMediator().notify("removeReference",[e,o,i])}}),n.setConnectionsCollectionEvents({onAdd:function(e,t,n){a.getMediator().notify("addConnection",[e,t,n])},onChange:function(e,t,n){a.getMediator().notify("changeConnection",[e,t,n])},onRemove:function(e,t,n){a.getMediator().notify("removeConnection",[e,t,n])}}),n.setInstanceCollectionEvents({onAdd:function(e,t,n){a.getMediator().notify("addInstance",[e,t,n])},onChange:function(e,t,n){a.getMediator().notify("changeInstance",[e,t,n])},onRemove:function(o,i,r){var s,u=n.getImpactedConnections(null,o.id);if(e.is(u))for(s=0;s<u.length;s++)t.removeConnection(u[s].id);a.getMediator().notify("removeInstance",[o,i,r])}}),d.push(a.addExternalListener("reset",t.resetAll))},onStop:function(){var e,t;for(n.removeCollectionEvents(),e=0,t=d.length;e<t;e++)a.removeExternalListener(d[e]);d=[]},findSomeConnection:function(e,t){return n.findSomeConnection(e,t)},findConnections:function(e){return n.findConnections(e)},getAllChildrenFromCollection:function(e){var t={referencesPID:[e],instancesPID:[]};return n.expandOnBackbone(e,t),t},getInstancesFromCollection:function(e){return n.getInstancesFromCollection(e)},getParentInstancesFromCollection:function(e){return n.getParentInstancesFromCollection(e)},getReference:function(e){return n.getReferenceFromCollection(e)},getReferencesFromArray:function(e){return n.getReferencesArrayFromCollection(e)},getReferenceModelFromInstance:function(e){return n.getReferenceModelFromInstance(e)},getAggregatingReferenceModelFromInstance:function(e){return n.getAggregatingReferenceModelFromInstance(e)},getReferenceModel:function(t){var n=null,o=this.getReference(t),i=null,r=null;return e.is(o)||(n=this.getInstance(t),e.is(n)?o=this.getReferenceModelFromInstance(n):a.getLogger().debug("Failed to get reference model. No instance or reference model found for PID: "+t)),s.isMdlAccessTestEnabled()&&(e.is(n)&&(a.getLogger().debug("Manipulated instance is: "),i=n.pick("PID","PLM_ExternalID","V_TreeOrder","isAggregatedBy","isInstanceOf"),a.getLogger().debug(JSON.stringify(i,null,4))),e.is(o)&&(a.getLogger().debug("Manipulated reference is: "),r=o.pick("PID","type","V_Name","V_description"),a.getLogger().debug(JSON.stringify(r,null,4)))),o},getReferenceIdFromInstance:function(t){var n,o=null;return n=this.getInstance(t),e.is(n)?o=n.get("isInstanceOf"):a.getLogger().debug("Failed to get reference Id. No instance model found for PID: "+t),o},isReference:function(e){return n.isReference(e)},isInstance:function(e){return n.isInstance(e)},getInstance:function(e){return n.getInstanceFromCollection(e)},getConnection:function(e){return n.getConnectionFromCollection(e)},createReference:function(e,t){return n.createRef(e,t)},addReference:function(e,t){return n.addRef(e,t)},fetchRefList:function(e,t){return n.fetchRefList(e,t)},fetchAttributes:function(e,t){n.fetch(e,t)},fetchReferences:function(e,t){n.fetchReferences(e,t)},fetchRoot:function(e,t){o.fetchRoot(e,t)},fetchMultiplePromise:function(e,t){return o.fetchMultiplePromise(e,t)},getProductScopedLinksFromIndex:function(e,t,n){o.getProductScopedLinksFromIndex(e,t,n)},navigateScopesFromIndex:function(e,t,n){o.navigateScopesFromIndex(e,t,n)},navigateScopesFromDB:function(e,t,n){n.onComplete=t,o.getProductScopedLinksFromDB(e,n)},navigateOnIndex:function(e,t,n){o.navigateOnIndex.navigateOnIndex(e,t,n)},getReferenceFromInstance:function(e,t,n){o.navigateOnIndex.getReferenceFromInstance(e,t,n)},updateReference:function(t,o){return o.isFacet=!!e.is(a.getConfig().isFacet)&&a.getConfig().isFacet,n.updateRef(t,o)},updateReferences:function(e,t){return n.updateRefs(e,t)},deleteReference:function(e,t){return n.deleteRef(e,t)},removeReference:function(e,t){n.removeRef(e,t)},createInstance:function(e,t){return n.createInst(e,t)},addInstance:function(e,t){return n.addInst(e,t)},fetchInstance:function(e,t){return n.fetchInst(e,t)},updateInstance:function(e,t){return n.updateInst(e,t)},updateInstances:function(e,t){return n.updateInsts(e,t)},deleteInstance:function(e,t){return n.deleteInst(e,t)},removeInstance:function(e,t){n.removeInstance(e,t)},removeConnection:function(e,t){n.removeConnection(e,t)},createConnection:function(e,t){return n.createConn(e,t)},addConnection:function(e,t){return n.addConn(e,t)},updateConnection:function(e,t){return n.updateConn(e,t)},deleteConnection:function(e,t){return n.deleteConn(e,t)},needToQueryForConnections:function(e){return n.needToQueryForConnections(null,e)},needToQueryForChildren:function(e){return n.needToQueryForChildren(e)},findMissingLinkedObjects:function(t,n,i){o.findMissingLinkedObjects(t,function(t){e.is(n,"function")&&n.call(null,t)},i)},getImpacted:function(t,o,i){var r,s,u,c,a,l,d=[],f=[],g=[],m=[],p=this.getInstance(t),P={};if(i=i||{},e.is(i.relationTypes)?P.relationTypes=i.relationTypes:(e.is(i.excludeRelationTypes)&&(P.excludeRelationTypes=i.excludeRelationTypes),e.is(i.excludeTimeConstraintType)&&(P.excludeTimeConstraintType=i.excludeTimeConstraintType)),e.is(p)?(s=this.getReferenceModelFromInstance(p),u=e.is(i.onlyInstanceRelations)&&i.onlyInstanceRelations?null:s.id,g=n.getImpactedConnections(u,p.id,P),m=[s.id,p.id]):(P.isRefRefOnly=!0,g=n.getImpactedConnections(t,null,P),m=[t]),d=g,e.is(o)&&!0===o){for(r=0;r<g.length;r++)c=g[r].get("from"),a=g[r].get("to"),l=e.is(c,"array")?c[c.length-1]:c,m.indexOf(l)>-1?f.push(a):f.push(c);d=f}return d},getConnectionsByModel:function(t,n,r){var s,u=e.is(t)?t.get("PPRTYPE"):e.is(n)?n.get("PPRTYPE"):null;r=r||{},s={forceDBMode:!!e.is(r.forceDBMode)&&r.forceDBMode,relationTypes:"array"===e.typeOf(r.relationTypes)?r.relationTypes:i.getAllConfiguredRelations(u,"read"),isRefRefOnly:!!e.is(r.isRefRefOnly)&&r.isRefRefOnly,silentMode:!!e.is(r.silentMode)&&r.silentMode,onComplete:e.is(r.onComplete)?r.onComplete:null,onFailure:e.is(r.onFailure)?r.onFailure:null},o.getConnectionsByModel(t,n,s)},getAltSubContextProductPromise:function(e,t){return o.getAltSubContextProductPromise(e,t)},getMultipleAltSubContextProductsPromise:function(e){return o.getMultipleAltSubContextProductsPromise(e)},getAlternateEnggItemPromise:function(e){return o.getAlternateEnggItemPromise(e)},getEngAlternatesFromBLPromise:function(e){return o.getEngAlternatesFromBLPromise(e).then(function(e){const{altSubInfosResult:n,someErrorOccured:o}=e;return o&&a.getLogger().warn("DatabasePlugin",c.getNLSValue("AltSub.BL.SomeError")),t.resolve(n)})},getAlternateEnggItemInfoPromise:function(t,n){var i=a.getService("ConfigService"),r=null;return e.is(i)&&(r=i.getUserId()),o.getAlternateEnggItemInfoPromise(t,n,r)},getMfgItemsFromDesignAlternatesPromise:function(e,t,n){return o.getMfgItemsFromDesignAlternatesPromise(e,t,n)},fetchInstancesAndTheirReferences:function(e,t){return o.fetchInstancesAndTheirReferences(e,t)},addToCollections:function(e){n.addToCollections(e)},parseServerObjects:function(t,o){var i,r,s=o.stackedObjects?o.stackedObjects:{stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},u={referencePIDs:[],instancePIDs:[]},c=!e.is(o.silentOpt,"boolean")||o.silentOpt,a=this.getConnectionParser();e.is(t.instancesAndReferences)&&t.instancesAndReferences.forEach(function(e){i=e.attributesValue,Object.prototype.hasOwnProperty.call(i,"isInstanceOf")?(u.instancePIDs.push(i.PID),s.stackedInstances.push(i)):(u.referencePIDs.push(i.PID),s.stackedReferences.push(i))}),e.is(t.deletedObjects)&&t.deletedObjects.forEach(function(e){s.deletedObjects.push(e)}),e.is(t.connections)&&t.connections.forEach(function(e){a.parse(e,s)}),r=e.merge(s,{silentMode:c,onComplete:function(){e.is(o.onComplete)&&o.onComplete(u)}}),n.addToCollections(r)},getDocuments:function(t){var n,o;if(e.is(t)&&e.is(t.documents,"object")&&Object.keys(t.documents).length>0&&(o=a.getPlugins("DocumentPlugin"),e.is(o)&&(o=o.instance,e.is(t.documents,"object")))){const i=new Set;for(n in t.documents)Object.prototype.hasOwnProperty.call(t.documents,n)&&t.documents[n].forEach(e=>{i.add(e.PID)});o.getDocumentInfo([...i],{onComplete:function(i){var r,s=[];for(r=0;r<i.data.length;r++){const e=i.data[r];o.addDocument(e,{silent:!0})}for(n in t.documents)Object.prototype.hasOwnProperty.call(t.documents,n)&&e.is(t.documents[n])&&t.documents[n].length>0&&(s.push(n),t.documents[n].forEach(function(e){o.addDocumentConnection(n,e.PID,e.type,{silent:!0})}));a.getMediator().notify("addDocumentConnections",[s])}})}},getConnectionsFromServer:function(t,n,i){var r=i||{},s=this,u={noTimeout:!0};a.getMediator().notify("startProgress",u),o.getConnectionsFromServer(t,function(t){e.is(n,"function")&&n.call(null,t),s.getDocuments(t),a.getMediator().notify("stopProgress",u)},r)},getDescendantsFromServer:function(t,n,i){var r=i||{},s=this;o.getDescendantsFromServer(t,function(t){var o=e.is(r.context)?r.context:null;e.is(n,"function")&&n.call(o,t),s.getDocuments(t)},r)},getInverseConnectionsFromServer:function(e,t){o.getInverseConnectionsFromServer(e,t)},resetAll:function(){n.reset(),a.getMediator().notify("refreshAll")},resetCollections:function(e){n.reset(e)},setSelectPredicate:function(e,t){o.setSelectPredicate(e,t)},getConnectionParser:function(){return o.getConnectionParser()},getNavigateOnIndex:function(){return r.getNavigateOnIndex()},isNavigateOnDemand:function(){return r.isNavigateOnDemand()},isAuthoringMode:function(){var e=!0;return r.getNavigateOnDatabasePreference()||(e=u.isDbMode()),e},isInstancePossible:function(t,n){var o,i,s,u=!0;return e.is(n,"string")?i=n:(o=n,i=n.get("type")),-1===this.getValidChildTypes(t).indexOf(i)?u=!1:t&&o&&(l(o,t)?u=!1:"RESOURCE"!==(s=o.get("PPRTYPE"))&&"PRODUCT"!==s||(u=r.isMGALicenseAvailable()||r.isRMELicenseAvailable())),u},getValidChildTypes:function(t){var n,o,r,s=this,u=[],c=0,a=0;return e.is(t)&&(n=t.get("type"),u=i.getValidChildTypes(n),this.isOperation(t)&&(o=t.get("PID"),this.getInstancesFromCollection(o).every(function(e){return s.isOperation(e)?(c++,r="WORKINSTRUCTION"):s.isWorkInstruction(e)&&(a++,r="OPERATION"),!0}),(c>0||a>0||this.needToQueryForChildren(t))&&(u=u.filter(function(e){return!(i.getPPRType(e)===r)})))),u},getPPRType:function(t){var n,o=t;return e.is(t,"string")?o=this.getReferenceModel(t):e.is(t)&&t.isInstance()&&(o=this.getReference(t.get("isInstanceOf"))),e.is(o)&&(n=o.get("PPRTYPE"),e.is(n)||(n=i.getPPRType(o.get("type")))),n},isSystem:function(t){return!(!e.is(t)||"SYSTEM"!==this.getPPRType(t))},isOperation:function(t){return!(!e.is(t)||"OPERATION"!==this.getPPRType(t))},isWorkInstruction:function(t){return!(!e.is(t)||"WORKINSTRUCTION"!==this.getPPRType(t))},isProcess:function(t){return!(!e.is(t)||"PROCESS"!==this.getPPRType(t))},isResource:function(t){return!(!e.is(t)||"RESOURCE"!==this.getPPRType(t))},getWhereUsedReferences:function(e,t){o.getWhereUsedReferences(e,t)},getFilteredInstancesFromCollection:function(e,t){return n.getFilteredInstancesFromCollection(e,t)},removeFilterFromCollection:function(e,t){n.removeFilterFromCollection(e,t)},getExecuteByBlockPromise:function(e){return r.getExecuteByBlockPromise(e)},transformToRIROccurrencePath:function(e){return n.transformToRIROccurrencePath(e)},transformRIRToAbsolutePath:function(e){return n.transformRIRToAbsolutePath(e)},isValidPID:function(t){var n=!1;return e.is(t,"string")&&t.length>0&&(n=!0),n},getLastElement:function(t){var n=null;return e.is(t,"array")&&(n=t.length>0?t[t.length-1]:null),n},getLastElementInstanceInfoPID:function(t,n){var o,i=null,r=null;return o=this.getLastElement(t),this.isValidPID(o)&&(i=this.getInstance(o),e.is(i)&&(r=i.get(n),this.isValidPID(r)||(r=null))),r},arrayCompare:function(t,n){var o,i;if(!e.is(t,"array")||!e.is(n,"array"))return!1;if(t.length!==n.length)return!1;for(o=0,i=t.length;o<i;o++)if(t[o]instanceof Array&&n[o]instanceof Array){if(!this.arrayCompare(t[o],n[o]))return!1}else if(t[o]!==n[o])return!1;return!0},groupingBy:function(e,t,n){var o=new Map;return e.forEach(function(e){var i=t(e),r=n(e);o.has(i)?o.set(i,o.get(i).concat(r)):o.set(i,[].concat(r))}),o},hasConnection:function(e){return n.hasConnection(e)},traverseInstanceModels:function(e,t){n.traverseInstanceModels(e,t)},syncMaturity:function(e,t,o,i,r){n.syncMaturity(e,t,o,i,r)},getCurrentStates:function(e,t,o){n.getCurrentStates(e,t,o)},getSequencingMode:function(e,t){n.getSequencingMode(e,t)},setSequencingMode:function(e,t,o){n.setSequencingMode(e,t,o)},manageLinearProductFlowsOnCreateInstance:function(e){n.manageLinearProductFlowsOnCreateInstance(e)},manageLinearProductFlowsOnCreateInstancePID:function(e){n.manageLinearProductFlowsOnCreateInstance(n.getInstanceFromCollection(e))},manageLinearProductFlowsOnDeleteInstance:function(e){n.manageLinearProductFlowsOnDeleteInstance(e)},manageLinearProductFlowsOnDeleteInstancePID:function(e){n.manageLinearProductFlowsOnDeleteInstance(n.getInstanceFromCollection(e))},detachExtn:function(e,t){n.detachExtn(e,t)}}}}),define("DS/DELPPWModelPlugins/DicoPlugin",["UWA/Core","DS/DELPPWDicoServices/DicoUtils"],function(e,t){"use strict";return function(n){var o={},i={};return{name:"DicoPlugin",getAttributeProperties:function(){return o},getMagnitudePreferences:function(){return i},getAttributeInfo:function(e,n){return t.getAttributeInfo(e,n)},getTypeInfo:function(e){return t.getTypeInfo(e)},getTypeMaskInfo:function(e){return t.getTypeMaskInfo(e)},getTypeExtnInfo:function(e){return t.getTypeExtnInfo(e)},getPPRType:function(e){return t.getPPRType(e)},getTypeHierarchy:function(e){return t.getTypeHierarchy(e)},getParentTypes:function(e){return t.getParentTypes(e)},getReadOnlyTypes:function(){return t.getReadOnlyTypes()},isAKindOf:function(e,n){return t.isAKindOf(e,n)},getConfiguredRelations:function(e,n,o){return t.getConfiguredRelations(e,n,o)},getConfiguredCustomRelations:function(e,n,o){return t.getConfiguredCustomRelations(e,n,o)},isRelationTypeConfigured:function(e,n,o,i){var r;return r=t.getPossibleRelations(n,o,i),Array.isArray(r)&&r.indexOf(e)>-1},getPossibleRelations:function(e,n,o){return t.getPossibleRelations(e,n,o)},getPossibleRelationTypes:function(e,o,i,r){var s=e.get("type"),u=o.get("type");if(s&&u)return t.getPossibleRelations(s,u,"write");n.getLogger().debug(" No PPRTypes on models")},isReferencesHasReadOnlyType:function(t,n){let o=!1,i=null,r=n||{};const s=this,u=function(e){let t=i.has(e);return t||(t=s.getParentTypes(e).some(function(e){return i.has(e)})),t};if(Array.isArray(r.excludeReferenceTypes)&&r.excludeReferenceTypes.length>0?(i=new Set(this.getReadOnlyTypes()),r.excludeReferenceTypes.forEach(function(e){i.delete(e)})):i=this.getReadOnlyTypes(),e.is(t,"string"))o=u(t);else if(e.is(t,"object")){const e=t.get("type");o=u(e)}else Array.isArray(t)&&(o=t.some(function(t){if(e.is(t)){const e=t.get("type");return u(e)}return!1}));return o},isLinkPossible:function(e,t,n,o){var i=this.getPossibleRelationTypes(e,t,n,o),r=this.getPossibleRelationTypes(t,e,o,n);return i.length>0||r.length>0},isEntityInstance:function(e){return t.isEntityInstance(e)},isReparentPossible:function(e){var n=t.getAcceptedPPRTypesForActions();return null===n||n.REPARENT.PPRType.includes(e)},isReorderPossible:function(e){var n=t.getAcceptedPPRTypesForActions();return null===n||n.REORDER.PPRType.includes(e)},getAcceptedBaseTypesForActions:function(){return t.getAcceptedBaseTypesForActions()},isAutoCreateScopeOnHOP:function(){return t.isAutoCreateScopeOnHOP()}}}}),define("DS/DELPPWModelPlugins/BI/MfgProcessBIPlugin",["UWA/Core","DS/DELPPWModelServices/MfgProcessBIUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWDicoServices/DicoUtils"],function(e,t,n,o){"use strict";return function(i){var r="BIPlugin",s=!1,u=[],c=function(o){var u,c,a,l,d,f,g,m={noTimeout:!0},p=i.getPlugins("RootsPlugin"),P=function(t){var n,o={};return p?t.forEach(function(t){n=p.getRootFilter(t),e.is(n)?1===n.filters.length&&1===Object.keys(n.filters[0]).length&&e.is(n.filters[0].config_filter)?o[t]=n.filters[0].config_filter:(o[t]="",i.getLogger().debug(r,"IncompatibleFilter for rootPID : "+t)):o[t]=""}):i.getLogger().debug(r,"Roots Plugin unavailble"),o};!1!==s&&(d=i.getLogger().log(r,n.getNLSValue("BI.LogMessage"))),t.resetBIModelCollection(),g=!1,p?(f=(p=p.instance).getRoots(r),e.is(f,"array")&&f.length>=2&&(u=f[0],c=f[1],e.is(c,"array")&&c.length>0&&e.is(u,"array")&&u.length>0?g=!0:i.getLogger().warn(r,n.getNLSValue("BI.Computation.NoItemsOrSystems"),d))):i.getLogger().debug(r,"Roots Plugin unavailble"),g?(i.getMediator().notify("startProgress",m),a=P(u),l=P(c),t.fetchBIComputation({rootItems:u,itemConfigFilter:a,rootSystems:c,sysConfigFilter:l,onFailure:function(){i.getMediator().notify("stopProgress",m),i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),i.getLogger().warn(r,n.getNLSValue("BI.Computation.Failure"),d)}},function(){var u=t.getMfgItemAssignmentStatus(),c=t.getSystemUpdateStatus();i.getMediator().notify("stopProgress",m),e.is(o,"function")&&o(),!1!==s&&(i.getLogger().info(r,n.getNLSValue("BI.Computation.Success"),d),i.getMediator().notify("updateBIStatus",{ItemAssignmentStatus:u,SystemUpdateStatus:c}))})):i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1})},a=function(e){!0===e.state?(s=!0,c()):(s=!1,t.isBIComputed()&&t.resetBIModelCollection())},l=function(n){var s,u,c,a=!1;if(u=function(t){var n=t.get("type");return e.is(n,"string")?"ProcessImplementLink"===n||"ProcessImplementLinkOcc"===n:(i.getLogger().debug(r,"Connection type is not defined"),!1)},c=function(t){var n;return n=t.get("type"),e.is(n,"string")?!("PROCESS"!==o.getPPRType(n)||!t.hasChanged("V_NeedDedicatedSystem")):(i.getLogger().debug(r,"Connection type is not defined"),!1)},t.isBIComputed())for(n=e.is(n,"array")?n:[n],s=0;s<n.length&&(n[s].isConnection()&&(a=u(n[s])),n[s].isReference()&&(a=c(n[s])),!a);s++);return a},d=function(e){l(e)&&c()},f=function(t){var n,o,s,u=!1;for(t=Array.isArray(t)?t:[t],n=0;n<t.length;n++)if(s=(o=t[n]).get("type"),e.is(s,"string")){if("ProcessImplementLinkOcc"===s&&o.hasChanged("ImplementLinkUsageFamily.V_ImplLinkUsage")){u=!0;break}}else i.getLogger().debug(r,"Connection type is not defined");u&&c()},g=function(e){l(e)&&c()},m=function(n){var s,u,a,l=!1;if(e.is(n)&&t.isBIComputed()){for(n=e.is(n,"array")?n:[n],s=0;s<n.length;s++)if(u=n[s].get("type"),e.is(u,"string")){if(a=o.getPPRType(u),["PROCESS","SYSTEM","OPERATION"].includes(a)){l=!0;break}}else i.getLogger().debug(r,"Model type is not defined");l&&c()}};return t.init({core:i}),{name:"MfgProcessBIPlugin",onStart:function(){t.setBIModelEvents({onReset:function(e,t,n){i.getMediator().notify("resetBIModel",[e,t,n],{sourceModuleId:r})}}),u.push(i.addExternalListener("BIEssentialsCmd",a)),u.push(i.addExternalListener("changeReference",g)),u.push(i.addExternalListener("addConnection",d)),u.push(i.addExternalListener("changeConnection",f)),u.push(i.addExternalListener("removeConnection",d)),u.push(i.addExternalListener("hideRootNode",m))},onStop:function(){var e,n;for(t.removeBIModelEvents(),e=0,n=u.length;e<n;e++)i.removeExternalListener(u[e]);u=[]},computeBI:function(){c()},getBICmdState:function(){return s},resetBIModelCollection:function(){return t.resetBIModelCollection()},getBrokenMfgProcessStatus:function(e,n){t.isBIComputed()?t.getBrokenMfgProcessStatus(e,n):c(function(){t.getBrokenMfgProcessStatus(e,n)})}}}}),define("DS/DELPPWModelPlugins/AttributePlugin",["UWA/Core","DS/DELPPWDicoServices/DicoUtils","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWModelServices/ModelUtils"],function(e,t,n,o,i){"use strict";return function(){var r,s,u,c,a,l,d,f,g,m,p,P,C,h,I,y,v,D,S,b,R,M,L,E,F,A,T,O,x,N,B,U,k,V,W=/(\d+)\/(\d+)\/(\d+)@\d+:\d+:\d+:\w+/;return r=function(t){var n="";return e.is(t)&&(n=e.is(t.Type)?t.Type:""),n},U=function(e){var t,n,o,i,r,s,u,c,a,l;return e?(t=e.split("@"),n=e,t.length>1&&(i=(o=t[0].split("/"))[0],r=o[1]-1,s=o[2],c=(u=t[1].split(":"))[0],a=u[1],l=u[2],(n=new Date).setUTCHours(c),n.setUTCMinutes(a),n.setUTCSeconds(l),n.setUTCFullYear(i),n.setUTCDate(1),n.setUTCMonth(r),n.setUTCDate(s)),n):null},k=function(t){var n,o="";return"NULL"===t?o="":(W.test(t)&&(t=U(t).toUTCString()),n=e.is(t,"number")?t:Date.parse(t),isNaN(n)||(o=new Date(n))),o},s=function(e){return"Boolean"===r(e)},u=function(e){return"Double"===r(e)},c=function(e){return"Integer"===r(e)},a=function(e){return"Date"===r(e)},l=function(e){return"String"===r(e)},d=function(t,n,o){var i=!1;return e.is(t)&&(e.is(t.Protection)&&(i=3===t.Protection?-1===["V_ContQuantity","V_SequencingMode","V_OverlapQty"].indexOf(t.Name):8===t.Protection?-1===["V_RefQuantity","V_UseCase","V_WIPQuantityRatio","V_ScrapQuantityRatio","V_LossQuantity","V_IsConstQuantity"].indexOf(t.Name):1!==t.Protection&&2!==t.Protection),o||(i|=!0===t.isReadOnly||e.is(t.UIAccess)&&"ReadOnly"===t.UIAccess)),e.is(n)&&(i|=!0===n.readOnly||!1===n.visible),i},f=function(t){var n=!0;return e.is(t)&&(n=t.visible),n},m=function(t){return e.is(t)&&e.is(t.MultiValuated)&&"Yes"===t.MultiValuated},g=function(e){return a(e)&&m(e)},p=function(t){return e.is(t.MultiLine)&&"Yes"===t.MultiLine},P=function(t,n){var o=!1;return o=e.is(t)&&e.is(t.HasRangeDefined)&&"Yes"===t.HasRangeDefined,e.is(n)&&Array.isArray(n.authorizedValues)&&(o=o||n.authorizedValues.length>0),o},C=function(t){return e.is(t.Magnitude)&&""!==t.Magnitude&&!P(t)},h=function(t,n,o){var i;if(e.is(n)&&Array.isArray(n.authorizedValues)&&n.authorizedValues.length>0){for(i=0;i<n.authorizedValues.length;i++)if(n.authorizedValues[i].NLS===o)return i;return 1}for(i=0;i<t.AuthorizedValues.length;i++)if(I(t,i)===o)return i},I=function(e,t){return a(e)?N(1e3*e.AuthorizedValues[t].NLS):e.AuthorizedValues[t].NLS},y=function(e,t){return t<0?null:e.AuthorizedValues[t].Name},v=function(t,n){var o,i=[];if(e.is(n)&&Array.isArray(n.authorizedValues)&&n.authorizedValues.length>0){for(o=0;o<n.authorizedValues.length;o++)i.push(n.authorizedValues[o].NLS);return i}for(o=0;o<t.AuthorizedValues.length;o++)i.push(I(t,o));return i},D=function(t,n,o){var i;if(e.is(n)&&Array.isArray(n.authorizedValues)&&n.authorizedValues.length>0){for(i=0;i<n.authorizedValues.length;i++)if(n.authorizedValues[i]===o)return c(t)?i+1:n.authorizedValues[i];return 1}for(i=0;i<t.AuthorizedValues.length;i++)if(I(t,i)===o)return c(t)?Number.isInteger(parseInt(t.AuthorizedValues[i].Name))?t.AuthorizedValues[i].Name:(i+1).toString():t.AuthorizedValues[i].Name;return o},S=function(t,n){var o=[];return Array.isArray(n)?(P(t)&&e.is(t.AuthorizedValues,"array")&&n.forEach(function(n){t.AuthorizedValues.some(function(t){return!(!e.is(t.Name,"string")||n!==t.Name||(o.push(t.NLS),0))})}),o):o},b=function(t){return e.is(t.DefaultValue)?t.DefaultValue:""},R=function(e){return C(e)?e.Magnitude:""},M=function(e){return e.FullName},L=function(t){return e.is(t.MaxLength)?t.MaxLength:0},E=function(e){var t;return c(e)?"^[-+]?([0-9]+)$":u(e)?"^([+-]?([1-9][0-9]*)|(0))([.,][0-9]+)?":(t=L(e))<=0?null:"^.{0,"+t+"}$"},F=function(t){var n="";return e.is(t)&&(n=e.is(t.NLS)?t.NLS:t.Name),n},A=function(t,n){return!!e.is(t)&&Object.prototype.hasOwnProperty.call(t._attributes,n)},T=function(t){return"array"!==e.typeOf(t)&&(t=e.is(t)&&t.length>0&&"NULL"!==t&&"null"!==t?t.split(i.getPrefSeparator()):[]),t},O=function(t){var n,o,r=[];if(Array.isArray(t))for(n=0;n<t.length;n++)o=B(t[n]),e.is(o)&&r.push(o);else if(e.is(t)&&t.length>0&&"NULL"!==t&&"null"!==t)for(t=t.split(i.getPrefSeparator()),n=0;n<t.length;n++)o=B(t[n]),e.is(o)&&r.push(o);return r},x=function(t,n,o){var r="",s=T(t),u=widget.lang,c=i.getPrefSeparator(),a=e.is(n,"string")&&"Double"===n,l=e.is(n,"string")&&"Integer"===n,d=!e.is(o,"boolean")||o,f=l?1:2;return e.is(s,"array")&&s.forEach(function(e,t){var n=null;t>0&&(r+=c),(l||a)&&d?(n=l?parseInt(e):parseFloat(e),isNaN(n)||(n=n.toLocaleString(u,{minimumSignificantDigits:f,maximumSignificantDigits:21}),r+=n)):r+=e}),r},N=function(e,t,n){var o=widget.lang,i=k(e);return isNaN(i)||""===i?"":!0===t?i.toLocaleString(o,n):i.toLocaleDateString(o,n)},B=function(e){return k(e)},V=function(n,o){var i,r,s=!1;return e.is(n)&&(i="string"===e.typeOf(n)?n:n.get("type"),r=t.getTypeExtnInfo(i),Array.isArray(r)&&r.length>0&&-1!==o.indexOf(".")&&-1!==r.indexOf(o.split(".")[0])&&(s=!0)),s},{name:"AttributePlugin",getNodeAndColumnInfos:function(o,i){var r,s,u,c,a,l,d,f,g,m={};if(c=this.getAttributeInfoFromColumn(i),o&&(s="instance"===c.objType?o.getInstancePID():o.getReferencePID()),m.attributeName=c.attributeName,m.dataIndex=c.dataIndex,m.instOrRef=c.objType,"instance"===c.objType?m.objectToBeModified=n.getInstanceFromCollection(s):m.objectToBeModified=n.getReferenceFromCollection(s),e.is(m.objectToBeModified)&&e.is(i)&&e.is(i.dicoType,"array")&&i.dicoType.length>0)for(d=i.dicoType.length,f=i.dicoType,g=0;g<d;g++)if(l=f[g]+"."+c.dataIndex,e.is(m.objectToBeModified.get(l))){c.attributeName=c.dataIndex=l;break}return m.attributeName=c.attributeName,m.dataIndex=c.dataIndex,m.instOrRef=c.objType,m.attributeInfo=t.getAttributeInfo(c.attributeName),e.is(m.attributeInfo)||(e.is(m.objectToBeModified)?(u=m.objectToBeModified.get("type"),r=e.is(u,"string")?m.objectToBeModified.get("type")+"."+c.dataIndex:c.dataIndex):r=c.dataIndex,m.attributeInfo=t.getAttributeInfo(r),e.is(m.attributeInfo)||(m.attributeInfo={})),e.is(m.objectToBeModified)?(m.attributeDef={},a=t.getTypeMaskInfo(m.objectToBeModified.get("type")),e.is(a)&&e.is(Object.prototype.hasOwnProperty.call(a,c.dataIndex))&&(m.attributeDef=a[c.dataIndex])):m.attributeDef={},m.attributeNLSTitle=F(m.attributeInfo),m},getAttributeInfoFromColumn:function(t){var n,o={};return e.is(t)&&e.is(t.dataIndex)&&("tree"===t.dataIndex?(o.dataIndex=t.label,o.objType=t.labelIsOnRef?"reference":"instance",o.attributeName=e.is(t.dicoType)?t.dicoType+"."+o.dataIndex:o.dataIndex):e.is(t.dicoType,"array")&&t.dicoType.length>0?(n=t.dataIndex.split("."),o.objType=n[n.length-1],o.dataIndex=n[0]):1===(n=t.dataIndex.split(".")).length?(o.dataIndex=n[0],o.attributeName=e.is(t.text)?t.text:e.is(t.dicoType)?t.dicoType+"."+o.dataIndex:o.dataIndex):(o.objType=n[n.length-1],2===n.length?(o.dataIndex=n[0],o.attributeName=e.is(t.dicoType)?t.dicoType+"."+o.dataIndex:o.dataIndex):3===n.length&&(o.dataIndex=n[0]+"."+n[1],o.attributeName=o.dataIndex))),o},getColumnDisplayValue:function(n){var i=this.getAttributeInfoFromColumn(n),r=t.getAttributeInfo(i.attributeName);return e.is(r)?this.getNLS(r):e.is(i.attributeName)?"MANAGESTEPOPERATIONSUI"===n.displayType?i.attributeName:o.getNLSValue("Column."+i.attributeName):o.getNLSValue("Column."+i.dataIndex)},getObjectAndAttributeInfos:function(n){var o,i=this,r=[],s=function(n){var o=t.getAttributeInfo(n.name,null),s={attributeName:n.name,dataIndex:n.name.indexOf(".")>-1?n.name.split(".")[1]:n.name,attributeNLSTitle:i.getNLS(o),attributeInfo:o,readOnly:!(!e.is(n.readOnly)||!0!==n.readOnly),mandatory:!(!e.is(n.mandatory)||!0!==n.mandatory)};r.push(s)};if("array"!==e.typeOf(n))s(n);else for(o=0;o<n.length;o++)s(n[o]);return r},isBoolean:function(e){return s(e)},isDouble:function(e){return u(e)},isInteger:function(e){return c(e)},isDate:function(e){return a(e)},isString:function(e){return l(e)},getFormattedDate:function(e,t,n){return N(e,t,n)},getDate:function(e){return B(e)},isReadOnly:function(e,t,n){return d(e,t,n)},isVisible:function(e){return f(e)},isMultiValuated:function(e){return m(e)},isMultiDate:function(e){return g(e)},isMultiLine:function(e){return p(e)},hasRangeDefined:function(e,t){return P(e,t)},hasMagnitude:function(e){return C(e)},getAuthorizedValueIndex:function(e,t,n){return h(e,t,n)},getAuthorizedValueNLS:function(e,t){return I(e,t)},getAuthorizedValueDB:function(e,t){return y(e,t)},getAuthorizedValuesNLSList:function(e,t){return v(e,t)},getAuthorizedValue:function(e,t,n){return D(e,t,n)},getAuthorizedNLSvalues:function(e,t,n){return S(e,t)},getDefaultValue:function(e){return b(e)},getMagnitude:function(e){return R(e)},getFullName:function(e){return M(e)},getMaxLength:function(e){return L(e)},getPattern:function(e){return E(e)},getNLS:function(e){return F(e)},getType:function(e){return r(e)},doesAttributeExist:function(e,t){return A(e,t)},getValueAsArray:function(e,t){return T(e)},getValueAsDateArray:function(e){return O(e)},getValueAsString:function(e,t,n){return x(e,t,n)},getNLSForUnit:function(t){var n="";return e.is(t)&&C(t)&&e.is(t.ManipulationUnit,"string")&&(n=0!==t.ManipulationUnit.length?o.getNLSForUnit(t.Magnitude,t.ManipulationUnit):o.getNLSForUnit(t.Magnitude)),n},getMagnitudeValue:function(t,n,o){return C(n)&&(t=e.is(t,"array")?x(t,r(n),o):"NULL"===t?"":t),t},convertDateToStandard:function(t){var n,o,i,r,s,u,c,a=widget.lang;return t?(n=e.is(t,"date")?e.clone(t):new Date,o=t.getUTCFullYear(),(i=t.getUTCMonth()+1)<10&&(i="0"+i),(r=t.getUTCDate())<10&&(r="0"+r),(s=t.getUTCHours())<10&&(s="0"+s),(u=t.getUTCMinutes())<10&&(u="0"+u),(c=t.getUTCSeconds())<10&&(c="0"+c),n.setYear(o),n.setMonth(t.getMonth()),n.setDate(r),n.setHours(s),n.setMinutes(u),n.setSeconds(c),{value:t.toLocaleString(a),valueDB:o+"/"+i+"/"+r+"@"+s+":"+u+":"+c+":GMT"}):{value:"",valueDB:""}},getConnectionTypeWithMBOM:function(e){var t;return n.connections._models.forEach(function(n){n.id.contains(e)&&(t=n.id.split("|")[0])}),t},getDimensions:function(){return o.getDimensions()},getDimension:function(e){return o.getDimension(e)},addAttributeInfo:function(e,n){return t.addAttributeInfo(e,n)},isAttrApplicableForType:function(e,t){return V(e,t)}}}}),define("DS/DELPPWModelPlugins/DocumentPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DocumentManagement/DocumentManagement","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWDicoServices/DicoUtils","DS/DELPPWModelServices/ModelUtils"],function(e,t,n,o,i,r){"use strict";return function(s){var u,c,a,l,d,f,g,m,p,P,C,h,I,y,v=s.getLogger(),D=[],S={},b=s.getConfig().resource.documemntColumnConfigXML,R="dsmfg/private/V0/MfgElement/document";return u=function(){var e=t.get3DSpaceServiceName(),n=t.getServiceUrl(e);return n=n.endsWith("/")?n.substring(0,n.length-1):n,{securityContext:t.getSecurityContext(),csrf:{name:"ENO_CSRF_TOKEN",value:t.getCSRFToken(e)},tenantUrl:n,tenant:t.getPlatformID({serviceId:e})}},c=function(o,i){r.isStandAlone()?(e.merge(i,{url:R,method:"GET",data:o}),t.webServiceRequest(i)):n.getDocuments(o,i)},a=function(o,i,s){r.isStandAlone()?(e.merge(s,{url:"dsmfg/private/V0/invoke/createDocuments",method:"POST",data:o}),t.webServiceRequest(s)):e.is(o.id)?n.addFileToDocument(o,s):n.createDocument(o,s)},l=function(o,i,s){r.isStandAlone()?(e.merge(s,{url:"dsmfg/private/V0/invoke/modifyFile",method:"POST",data:o}),t.webServiceRequest(s)):n.modifyDocument(o,s)},d=function(o,i,s){r.isStandAlone()?(e.merge(s,{url:"dsmfg/private/V0/invoke/fetchDocuments",method:"POST",data:o}),t.webServiceRequest(s)):n.downloadDocument(o,i,!1,s)},f=function(o,i,s){r.isStandAlone()?(e.merge(s,{url:"dsmfg/private/V0/invoke/deleteFile",method:"POST",data:{docId:o,fileID:i}}),t.webServiceRequest(s)):n.deleteFile(o,i,s)},m=function(o,i){r.isStandAlone()?(e.merge(i,{url:"dsmfg/private/V0/invoke/fetchDocuments",method:"POST",data:o}),t.webServiceRequest(i)):n.downloadDocuments(o,i)},p=function(o,i){r.isStandAlone()?(e.merge(i,{url:"dsmfg/private/V0/invoke/deleteDocuments",method:"DELETE",data:o}),t.webServiceRequest(i)):n.deleteDocument(o,i)},y=function(n){e.is(b)?t.getXMLValues(b,function(t){var o,i,r,s;if(e.is(t.DisplayAttributeDescriptionList))for(o=t.DisplayAttributeDescriptionList,o=e.is(o.Document,"array")?o.Document:[o.Document],i=0;i<o.length;i++)r=e.is(o[i].Attribute,"array")?o[i].Attribute:[o[i].Attribute],s=[],r.forEach(function(e){s.push(e.name)}),S[o[i].coloumnName]=s;n()},function(){v.debug("DocumentsColumnMappingXML couldn't be fetched'"),n()}):(v.debug("DocumentsColumnMappingXML is not available"),n())},I=function(n,o){t.webServiceRequest({url:"dsmfg/private/V0/MfgElement/document/policyNames",method:"GET",data:null,onComplete:function(t){e.is(t,"array")?(g=t,e.is(n,"function")&&n(g)):e.is(o,"function")&&o("Document Policies are not recieved from server")},onFailure:function(t){v.debug("!!! WS call 'dsmfg/private/V0/MfgElement/document/policyNames' in DocumentPlugin._fetchDocumentsPolicies() failed"),e.is(o,"function")&&o(t)},onTimeout:function(t){v.debug("!!! WS call 'dsmfg/private/V0/MfgElement/document/policyNames' in DocumentPlugin._fetchDocumentsPolicies() timed out"),e.is(o,"function")&&o(t)}})},h=function(t){new e.Promise.all([new Promise(y)]).then(function(){v.debug("DocumentPlugin initialized!"),t()},function(e){v.debug("Failed to load DocumentPlugin Plugin. Error Description:"+e),t()})},C=function(){g=void 0},P=function(e){var t=new(s.getPlugins("UXComponentsPlugin").instance.getComponent("Element"))("a"),n=e+"&attachment=true";"download"in t||(t.target="_blank"),t.setAttributes({download:!0,href:n}),t.click()},{name:"DocumentPlugin",onStart:function(e){h(e),o.setDocumentCollectionEvents({"onChange:relateddata":function(e,t,n){s.getMediator().notify("changeDocument",[e,t,n])}}),D.push(s.addExternalListener("endEdit",C))},onStop:function(){var e,t;for(o.removeDocumentCollectionEvents(),e=0,t=D.length;e<t;e++)s.removeExternalListener(D[e]);D=[],g=void 0},getDocumentTypes:function(){return i.getDocumentTypes()},getDocumentsPolicies:function(t){t=t||{},e.is(g,"array")?e.is(t.onComplete,"function")&&t.onComplete(g):I(t.onComplete,t.onFailure)},getAttributesConfiguredOnDocumentColumn:function(t){var n;return e.is(t)&&e.is(S)&&(n=S[t]),n},isDocConnection:function(e){return"PLMDocConnection"===e.get("type")},hasDocuments:function(e){return this.getDocumentConnections(e).length>0},getConnectedDocuments:function(e){var t=[];return o.getImpactedConnections(e,null,{relationTypes:["PLMDocConnection","Reference Document","SpecificationDocument"]}).forEach(function(e){t.push(e.get("to"))}),t},getConnectedDocumentPIDs:function(e){let t=[];return o.getImpactedConnections(e,null,{relationTypes:["PLMDocConnection","Reference Document","SpecificationDocument"]}).forEach(function(e){t.push(e.get("PID"))}),t},addDocument:function(e,t){return o.addDocument(e,t)},getDocument:function(e){return o.getDocument(e)},removeDocument:function(e){return o.removeDocument(e)},addDocumentConnection:function(t,n,i,r){const s=e.is(i)?i:"PLMDocConnection";return o.addConn({PID:s+"|"+t+"|"+n,from:t,to:n,type:"PLMDocConnection"},r)},getDocumentConnections:function(e){var t=o.isReference(e)?e:o.getInstanceFromCollection(e).get("isInstanceOf");return o.findConnections({from:t,type:"PLMDocConnection"})},getDocumentConnectionsByDocID:function(e){return o.findConnections({to:e,type:"PLMDocConnection"})},removeDocumentConnections:function(e){var t=this;t.getConnectedDocumentPIDs(e).forEach(function(n){const[o,,i]=n.split("|");t.removeDocumentConnection(e,i,o)})},removeDocumentConnection:function(t,n,i,r){const s=e.is(i)?i:"PLMDocConnection";return o.removeConnection(s+"|"+t+"|"+n,r)},getDocumentID:function(n,o){var i;o=o||{},i=e.merge({url:R+"?irpcPID="+n,method:"GET",onComplete:function(t){v.debug("Get document information is succeeded."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){v.debug("Get document information is failed due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),t.webServiceRequest(i)},linkWithDocumentID:function(n,o,i){var r,s={pid:n,myDocumentPID:o,isVPLMControlled:"true"};i=i||{},r=e.merge({url:R,method:"POST",data:e.Json.encode(s),onComplete:function(t){v.debug("Linking document with IRPC is succeeded."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){v.debug("Linking document with IRPC is failed due to :  "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),t.webServiceRequest(r)},deleteLink:function(n,o,i){var r,s={pid:n,myDocumentPID:o};i=i||{},r=e.merge({url:R,method:"DELETE",data:e.Json.encode(s),onComplete:function(t){v.debug("Delete link between IRPC and Document is succeeded."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){v.debug("Delete link between IRPC and Document is failed due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),t.webServiceRequest(r)},getDocumentInfo:function(n,o){var i,r=function(t){v.debug("Get document inforation is succeeded."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)};o=o||{},i=e.merge(u(),o),i=e.merge({securityContext:t.getSecurityContext(),onComplete:r,onFailure:function(t){v.debug("Get document inforation is failed due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},i),Array.isArray(n)||(n=[n]),n.length>0?c(n,i):r({data:[]})},attachFile:function(t,n,o){var i;(t=t||{}).fileInfo=n,o=o||{},i=e.merge(u(),o),i=e.merge({onComplete:function(t){v.debug("File successfully created."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){v.debug("Unable to attach file due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},i),a(t,0,i)},modifyFile:function(n,o,i){var r;(n=n||{}).fileInfo=o,i=i||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){v.debug("File successfully modifed."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){v.debug("Unable to modify file due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),l(n,0,r)},fetchFileURL:function(n,o,i){var r;i=i||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){v.debug("File URL successfully fetched.."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){v.debug("Unble to fetch File URL due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),d(n,o,r)},downloadFile:function(n,o,i){var r;i=i||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){P(t),v.debug("Files successfully downloaded.."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){v.debug("Unble to download files due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),d(n,o,r)},removeFile:function(n,o,i){var r;i=i||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){v.debug("File successfully modifed."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){v.debug("Unable to modify file due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),f(n,o,r)},downloadDocuments:function(n,o){var i,r,s;o=o||{},n=e.is(n,"array")?n:[n],i=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){for(r=0;r<t.length;r++)s=t[r].downloadUrl,P(s);v.debug("Files successfully downloaded.."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){v.debug("Unble to download files due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),m(n,i)},deleteDocument:function(n,o){var i;o=o||{},i=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){v.debug("Document successfully deleted.."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){v.debug("unable to delete document due to"+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),p(n,i)}}}}),define("DS/DELPPWModelPlugins/InterWidgetComPlugin",["UWA/Core"],function(e){"use strict";return function(t){var n,o="InterWidgetComPlugin",i=t.getLogger(),r=null,s=t.getConfig().widgetLinkOpts;return n=function(t){const n=parent.require;window.__karma__?(i.debug(o,"We are in karma test environment, thus preventing the use of WidgetLink."),t()):n(["DS/WidgetLink/WidgetLink"],function(n){e.is(n)&&(s=s||{},(r=n.get(widget)).setLinkability(s)),t()},function(){i.debug(o,'ERROR couldnt fetch "DS/WidgetLink/WidgetLink"'),t()})},{name:o,onStart:function(e){n(e)},onStop:function(){},getComLink:function(){return r},addEventListener:function(t,n){var r=this.getComLink();e.is(r)&&e.is(t,"string")&&e.is(n,"function")?r.addEventListener(t,n):i.debug(o,"ERROR couldnt addEventListener to widgetLink")},subscribeEvent:function(t,n){var r=this.getComLink();e.is(r)&&e.is(t,"string")&&e.is(n,"function")?r.subscribe(t,n):i.debug(o,"ERROR couldnt subscribeEvent from widgetLink")},publishEvent:function(t,n){var r=this.getComLink();e.is(r)&&e.is(t,"string")?r.publish(t,n):i.debug(o,"ERROR couldnt publishEvent to widgetLink")},isWidgetLinked:function(t){var n,o,i=!1;return n=this.getComLink(),e.is(n)&&(o=n.getLinked())&&o.length>0&&(i=o.some(e=>e.appId===t)),i}}}}),define("DS/DELPPWModelPlugins/BI/BIPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWModelServices/BIUtils","DS/DELPPWResourceServices/ResourceUtils"],function(e,t,n,o){"use strict";return function(t){var i="BIPlugin",r=!1,s=[],u=function(){var s,u={noTimeout:!0},c=function(e){return Array.isArray(e)&&e.length>0};!1!==r&&(s=t.getLogger().log(i,o.getNLSValue("BI.LogMessage"))),n.resetBIModelCollection();const{rootProducts:a,rootProcesses:l}=function(){let n=null,o=null,r=t.getPlugins("RootsPlugin");if(e.is(r)){const e=(r=r.instance).getRoots(i);2===e.length&&(n=e[0],o=e[1])}else t.getLogger().debug(i,"Roots Plugin unavailble");return{rootProducts:n,rootProcesses:o}}();if(function(e,t){return c(e)&&c(t)}(a,l)){let c=t.getPlugins("RootsPlugin");if(e.is(c)){const d=(c=c.instance).getCompatibleConfigurationFilters(l),f=c.getCompatibleConfigurationFilters(a);e.is(d)&&e.is(f)?(t.getMediator().notify("startProgress",u),n.fetchBIComputation({rootEBOM:a,rootMBOM:l,rootMBOMConfigFilter:d,rootEBOMConfigFilter:f,onFailure:function(){t.getMediator().notify("stopProgress",u),t.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),t.getLogger().warn(i,o.getNLSValue("BI.Computation.Failure"),s)}},function(){var e=n.getProductAssignmentStatus(),c=n.getMfgItemUpdateStatus();t.getMediator().notify("stopProgress",u),!1!==r&&(t.getLogger().info(i,o.getNLSValue("BI.Computation.Success"),s),t.getMediator().notify("updateBIStatus",{ProductStatus:e,ProcessStatus:c}))})):t.getLogger().warn(i,o.getNLSValue("BI.Computation.IncompatibleFilter"))}else t.getLogger().debug(i,"Roots Plugin unavailble")}else t.getLogger().warn(i,o.getNLSValue("BI.Computation.NoMBOMorEBOM"),s)},c=function(e){!0===e.state?(r=!0,u()):(r=!1,n.isBIComputed()&&n.resetBIModelCollection())};return n.init({core:t}),{name:"BIPlugin",onStart:function(){n.setBIModelEvents({onAdd:function(e,n,o){t.getMediator().notify("addBIModel",[e,n,o])},onChange:function(e,n,o){t.getMediator().notify("changeBIModel",[e,n,o])},onReset:function(e,n,o){t.getMediator().notify("resetBIModel",[e,n,o],{sourceModuleId:i})}}),s.push(t.addExternalListener("BIEssentialsCmd",c))},onStop:function(){var e,o;for(n.removeBIModelEvents(),e=0,o=s.length;e<o;e++)t.removeExternalListener(s[e]);s=[]},computeBI:function(){u()},getBrokenMfgItemStatus:function(t,o){n.getBrokenMfgItemStatus({rootEBOM:t.rootEBOM,rootMBOM:t.rootMBOM,rootMBOMConfigFilter:t.rootMBOMConfigFilter,rootEBOMConfigFilter:t.rootEBOMConfigFilter,areRootsBroken:!!e.is(t.areRootsBroken,"boolean")&&t.areRootsBroken,prefix:t.prefix,forceBIComputation:!!e.is(t.forceBIComputation,"boolean")&&t.forceBIComputation},o)},getPhantomNodeItems:function(){return n.getPhantomNodeItems()},getBIModel:function(e){return n.getBIModel(e)},getBICmdState:function(){return r},resetBIModelCollection:function(){return n.resetBIModelCollection()},clearPseudoBIStatus:function(){n.clearPseudoBIStatus()},isBIComputed:function(){return n.isBIComputed()},fetchBIComputation:function(e,t){n.fetchBIComputation(e,t)},getProductStatus:function(e,t){return n.getProductStatus(e,t)},getProcessStatus:function(e,t){return n.getProcessStatus(e,t)},getBIModelCollection:function(){return n.getBIModelCollection()}}}}),define("DS/DELPPWModelPlugins/MfgProcess/MfgProcessPlugin",["UWA/Core","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWNavigationServices/NavigateUtil"],function(e,t,n,o){"use strict";return function(i){return{name:"MfgProcessPlugin",webserviceAndProcessing:function(r,s,u){var c,a,l=[],d={instancesAndReferences:[],connections:[]},f=JSON.parse(s),g=function(t,n){e.is(u)&&e.is(u.onFailure)&&u.onFailure(n)};f.rootMfgItemID&&(c=f.rootMfgItemID),n.webServiceRequest({url:e.is(u.appenedURL)?"dsmfg/private/V0/invoke/MfgProcess/BI/"+u.appenedURL:"dsmfg/private/V0/invoke/MfgProcess/BI",method:r,logMessage:e.is(u.logMessage)?u.logMessage:null,headers:n.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:s,context:this,onFailure:g,onTimeout:g,onCancel:g,onComplete:function(n){var r={stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[],deletedConnections:[]},s=[],f=[],g=null,m=!1,p=o.getConnectionParser();!function(n){e.is(n.revisedObjects)&&n.revisedObjects.forEach(function(e){e.revisedFrom===c&&(g=e.revisedTo),s.push(e.revisedTo)}),n.instancesAndReferences.forEach(function(e){var t=e.attributesValue;t.hasOwnProperty("isInstanceOf")?(e.queriedForConnections=!0,r.stackedInstances.push(e)):(-1===s.indexOf(t.PID)&&(e.queriedForConnections=!0,e.queriedForDocuments=!0),f.push(t.PID),r.stackedReferences.push(e))}),n.connections.forEach(function(t){p.parse(t,r),d.connections.push(t),e.is(t["from.attributesValue"])&&t["from.attributesValue"].PID===c&&(m=!0)}),e.is(n.reusedReferences)&&(l=n.reusedReferences.filter(function(n){var o=e.is(t.getReferenceFromCollection(n)),i=-1!==f.indexOf(n);return!(o||i)})),r.deletedObjects=r.deletedObjects.concat(n.deletedObjects),r.deletedConnections=r.deletedConnections.concat(n.deletedConnections),r.stackedInstances.forEach(function(e){"PROCESS"===e.attributesValue.PPRTYPE&&d.instancesAndReferences.push(e.attributesValue)}),i.getMediator().notify("createMfgItemStructure",d)}(n),0!==r.deletedObjects.length||0!==r.stackedReferences.length||0!==r.stackedInstances.length||0!==r.stackedConnections.length||0!==r.deletedConnections.length||null!==g?(a=function(){var o=[];r.onComplete=function(){o.length>0&&i.getMediator().notify("removeInstance",[o]),e.is(u)&&e.is(u.onComplete)&&u.onComplete(c,g,n,m)},e.is(r.deletedObjects)&&r.deletedObjects.forEach(function(n){var i=t.getInstanceFromCollection(n);e.is(i)&&o.push(i)}),t.addToCollections(r)},e.is(l,"array")&&l.length>0?o.getDescendantsFromServer(l,a,{expandLevel:0,silentMode:!0}):a()):e.is(u)&&e.is(u.onComplete)&&u.onComplete(null,null,n)}})}}}}),define("DS/DELPPWModelPlugins/MfgItem/MfgItemPlugin",["UWA/Core","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWNavigationServices/NavigateUtil"],function(e,t,n,o){"use strict";return function(i){return{name:"MfgItemPlugin",webserviceAndProcessing:function(r,s,u){var c,a,l=[],d={instancesAndReferences:[],connections:[]},f=JSON.parse(s),g=function(t,n){e.is(u)&&e.is(u.onFailure)&&u.onFailure(n)};f.rootMfgItemID&&(c=f.rootMfgItemID),n.webServiceRequest({url:e.is(u.appenedURL)?"dsmfg/private/V0/invoke/MfgItem/"+u.appenedURL:"dsmfg/private/V0/invoke/MfgItem",method:r,logMessage:e.is(u.logMessage)?u.logMessage:null,headers:n.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:s,context:this,onFailure:g,onTimeout:g,onCancel:g,onComplete:function(n){var r,s={stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},f=[],g=[],m=null,p=!1,P=o.getConnectionParser(),C=function(n){e.is(n.revisedObjects)&&n.revisedObjects.forEach(function(e){e.revisedFrom===c&&(m=e.revisedTo),f.push(e.revisedTo)}),n.instancesAndReferences.forEach(function(e){var t=e.attributesValue;t.hasOwnProperty("isInstanceOf")?(e.queriedForConnections=!0,s.stackedInstances.push(e)):(-1===f.indexOf(t.PID)&&(e.queriedForConnections=!0,e.queriedForDocuments=!0),g.push(t.PID),s.stackedReferences.push(e))}),n.connections.forEach(function(t){P.parse(t,s),d.connections.push(t),e.is(t["from.attributesValue"])&&t["from.attributesValue"].PID===c&&(p=!0)}),e.is(n.reusedReferences)&&(l=n.reusedReferences.filter(function(n){var o=e.is(t.getReferenceFromCollection(n)),i=-1!==g.indexOf(n);return!(o||i)})),s.deletedObjects=s.deletedObjects.concat(n.deletedObjects);const o=s.stackedInstances.reduce(function(e,t){return"PROCESS"===t.attributesValue.PPRTYPE&&e.push(t.attributesValue),e},[]);d.instancesAndReferences=d.instancesAndReferences.concat(o),i.getMediator().notify("createManufacturingItemStructure",d)};"RerouteMfgItem"===u.appenedURL?(r=n.succeeded,Object.keys(r).forEach(function(e){var t=r[e];Object.keys(t).forEach(function(e){C(t[e])})})):C(n),0!==s.deletedObjects.length||0!==s.stackedReferences.length||0!==s.stackedInstances.length||0!==s.stackedConnections.length||null!==m?(a=function(){var o=[];e.is(s.deletedObjects)&&s.deletedObjects.forEach(function(n){var i=t.getInstanceFromCollection(n);e.is(i)&&o.push(i)}),s.onComplete=function(){o.length>0&&i.getMediator().notify("removeInstance",[o]),e.is(u)&&e.is(u.onComplete)&&u.onComplete(c,m,n,p)},t.addToCollections(s)},e.is(l,"array")&&l.length>0?o.getDescendantsFromServer(l,a,{expandLevel:0,silentMode:!0}):a()):e.is(u)&&e.is(u.onComplete)&&u.onComplete(null,null,n)}})}}}}),define("DS/DELPPWModelPlugins/ChangeActionPlugin",["DS/DELPPWWebServices/WebserviceUtils","DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext"],function(e,t){"use strict";return function(n){return{name:"ChangeActionPlugin",onStart:function(){},onStop:function(){},getAuthoringContextPID:function(){var e=t.get();return UWA.is(e)&&UWA.is(e.change.id)?e.change.id:null},getAuthoringContextHdr:function(){var e=t.get();return UWA.is(e)&&UWA.is(e.AuthoringContextHeader)?e.AuthoringContextHeader:{}},setCAAndGetDetails:function(o){var i={context:1};return t.set({version:"1.0",change:{id:o}}),new UWA.Promise(function(t,r){e.webServiceRequest({url:"modeler/change/changeaction/pid:"+o,method:"GET",header:e.getHeaders({isJsonOnly:!0}),data:i,onComplete:function(e){var o=[];n.getLogger().debug(self.name,"Change action set completed: %s",e),(UWA.is(e)&&UWA.is(e.changeaction)&&UWA.is(e.changeaction.context,"array")?e.changeaction.context:[]).forEach(function(e){var t=UWA.is(e)&&UWA.is(e.id,"string")?e.id.split(":"):[];2===t.length&&"pid"===t[0]&&0!==t[1].length&&o.push(t[1])}),t(o)},onFailure:r,onTimeout:r})})}}}}),define("DS/DELPPWModelPlugins/Graph/EGraphPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWModelServices/EGraphUtils"],function(e,t,n){"use strict";return function(e){return{name:"EGraphPlugin",onStart:function(){e.getLogger().debug("EGraphPlugin - onStart")},getEGraphDataToDisplay:function(e){return n.getEGraphData(e)},setLinkDisplayStatus:function(e,t){n.setLinkDisplayStatus(e,t)},getCreatableTypesOfLink:function(){return n.getCreatableTypesOfLink()},getProductFlowDataToDisplay:function(e,t){return n.getProductFlowData(e,t)},isProductFlowDataLooped:function(e){return n.isProductFlowLooped(e)},getType:function(e){return n.getType(e)},getProductFlowGraphInstance:function(e,t){return n.getProductFlowGraphInstance(e,t)}}}}),define("DS/DELPPWModelPlugins/ResourcePlugin/WebServicePlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils"],function(e,t){"use strict";return function(n){var o="WebServicePlugin";return{name:o,onStart:function(){},getXMLValues:function(i,r,s){var u=null;return e.is(i,"string")&&i.length>0?u=t.getXMLValues(i,r,s):(n.getLogger().debug(o,"Invalid XML path (ixmlKey)"),e.is(s,"function")),u},webServiceRequest:function(e){t.webServiceRequest(e)},getSecurityContext:function(){return t.getSecurityContext()},get3DSpaceUrl:function(){return t.get3DSpaceUrl()},getTenant:function(){return t.getTenant()},getHeaders:function(e){return t.getHeaders(e)},get3DSpaceServiceName:function(){return t.get3DSpaceServiceName()},getPlatformID:function(e){return t.getPlatformID(e)}}}}),define("DS/DELPPWModelPlugins/ResourcePlugin/ResourcePlugin",["UWA/Core","DS/DELPPWResourceServices/ResourceUtils"],function(e,t){"use strict";return function(e){return{name:"ResourcePlugin",getNLSForUnit:function(e,n){return t.getNLSForUnit(e,n)},addCATNlsFile:function(e){t.addCATNlsFile(e)},addNls:function(e){t.addNls(e)},addNlsJSON:function(e){t.addNlsJSON(e)},getNLSValue:function(e,n,o,i){return t.getNLSValue(e,n,o,i)},addIconsFromCATRsc:function(e,n){t.addIconsFromCATRsc(e,n)},addIcons:function(e,n){t.addIcons(e,n)},getIconURLFromKey:function(e,n,o){return t.getIconURLFromKey(e,n,o)},getIconElem:function(e,n){return t.getIconElem(e,n)}}}});