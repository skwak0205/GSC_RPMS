define("DS/DELPPWModelBehaviors/InterWidgetComBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["InterWidgetComPlugin"],creator:function(e,t,n){e.getLogger();return{listenTo:function(){return{}},onStart:function(){},onStop:function(){},addEventListener:function(e,t){n.addEventListener(e,t)},subscribeEvent:function(e,t){n.subscribeEvent(e,t)},publishEvent:function(e,t){n.publishEvent(e,t)},isWidgetLinked:function(e){return n.isWidgetLinked(e)}}}}}),define("DS/DELPPWModelBehaviors/MfgProcessBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["MfgProcessPlugin","ResourcePlugin","BIPlugin","DatabasePlugin","ImplementPlugin","DicoPlugin"],creator:function(t,n,o,i,r,a,s,c){var l,u;t.getLogger();return l=function(t){var n,o,i,r=[];return Array.isArray(t)?(n=t[t.length-1],o=a.getReferenceModel(n),0===(r=s.getScopeLinks(o.get("PID"))).length&&(i=s.findInstanceWhoseParentIsScoped(t),e.is(i,"object")&&(r=i.scopeLinks))):r=s.getScopeLinks(t),r},u=function(e){var t=[];return e.forEach(function(e){var n=e.get("to");t.push(n)}),t},{webservice:function(t,s,c,l){var u,f,g,d,m={noTimeout:!0},p=!1,P={silentMode:!0,updateItem:!0};n.notify("startProgress",m),e.is(c)&&e.is(c.logMessage)&&(f=n.log(c.logMessage)),(s=s||{}).product&&(s.product.referencePID,s.product.OccPath),s.mfgItem&&(s.mfgItem.referencePID,s.mfgItem.instancePID),d=function(t){var o,i,r=[];t.instancesAndReferences.forEach(function(t){o=t.attributesValue,e.is(o.isInstanceOf)&&(i=a.getInstance(o.PID),n.notify("addInstance",[i,P]))}),t.connections.forEach(function(e){r.push(a.getConnection(e.PID))}),r.length>0&&n.notify("addConnection",[r])},"rerouteLink"===t&&(u="POST",g=e.Json.encode(c),(c=e.merge(c,{appenedURL:"ExecuteSuggestedActions"})).onComplete=function(t,o,i){d(i),e.is(l)&&l(i),p&&n.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!0}),n.notify("stopProgress",m)}),c.onFailure=function(t){var o=c.logMessage+" "+i.getNLSValue("failed");e.is(t)&&(o=o+". "+t.message),n.warn(o,f),n.notify("stopProgress",m),e.is(l)&&l(),p&&n.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!0})},(p=r.getBICmdState())&&n.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),o.webserviceAndProcessing(u,g,c)},isInstPossible:function(t){var n,o,i,r,a,f,g=t.parent,d=t.child,m=e.is(t.targetAbsPath)?t.targetAbsPath:null,p=!0;return e.is(m)&&c.isAKindOf(d,"DELLmiHeaderOperationReference")&&(n=Array.isArray(m)&&m.length>0?m:g.get("PID"),o=d.get("PID"),r=s.getPartialScopeLinks(o),Array.isArray(r)&&r.length>0&&(p=!1,i=l(n),r.length===i.length&&(a=u(i),f=u(r),p=a.every(function(e){return f.indexOf(e)>=0})))),p},getBrokenMfgProcessStatus:function(e,t){r.getBrokenMfgProcessStatus(e,t)}}}}}),define("DS/DELPPWModelBehaviors/ResourceBehavior",[],function(){"use strict";return{plugins:["ResourcePlugin"],creator:function(e,t,n){return{onStart:function(){},onStop:function(){},getNLSValue:function(e,t,o,i){return n.getNLSValue(e,t,o,i)},getNLSForUnit:function(e,t){return n.getNLSForUnit(e,t)},getIconURLFromKey:function(e,t,o){return n.getIconURLFromKey(e,t,o)},getIconElem:function(e,t){return n.getIconElem(e,t)}}}}}),define("DS/DELPPWModelBehaviors/SpecifyScopeIntentDialog",["UWA/Core"],function(e){"use strict";return function(t,n){const o=function(o,i,r){const a=[n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.message.line1"),n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.message.line2")].map(e=>`<p>${e}</p>`).join("");let s=e.createElement("div",{class:"specifyScopeIntent-container",html:a}),c=e.createElement("div",{class:"specifyScopeIntent-content-container"});s.inject(c),"function"!=typeof i?function(o,i,r){let a=t.create("Dialog",{title:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Title"),domId:"specifyScopeIntentDialog",identifier:"specifyScopeIntentDialog",content:o,minHeight:150,minWidth:400,modalFlag:!0,resizableFlag:!0,customButtonsDefinition:[{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Cancel"),emphasize:"primary",onClick:function(){e.is(i,"function")&&i(),a.close()}},{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Fabrication"),emphasize:"secondary",onClick:function(){e.is(r,"function")&&r(),a.close()}}]});a.close=function(){this.destroy()}}(c,o,r):"function"!=typeof r?function(o,i,r){let a=t.create("Dialog",{title:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Title"),domId:"specifyScopeIntentDialog",identifier:"specifyScopeIntentDialog",content:o,minHeight:150,minWidth:400,modalFlag:!0,resizableFlag:!0,customButtonsDefinition:[{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Cancel"),emphasize:"primary",onClick:function(){e.is(i,"function")&&i(),a.close()}},{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Assembly"),emphasize:"secondary",onClick:function(){e.is(r,"function")&&r(),a.close()}}]});a.close=function(){this.destroy()}}(c,o,i):function(o,i,r,a){let s=t.create("Dialog",{title:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Title"),domId:"specifyScopeIntentDialog",identifier:"specifyScopeIntentDialog",content:o,minHeight:150,minWidth:400,modalFlag:!0,resizableFlag:!0,customButtonsDefinition:[{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Cancel"),emphasize:"primary",onClick:function(){e.is(i,"function")&&i(),s.close()}},{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Assembly"),emphasize:"secondary",onClick:function(){e.is(r,"function")&&r(),s.close()}},{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Fabrication"),emphasize:"secondary",onClick:function(){e.is(a,"function")&&a(),s.close()}}]});s.close=function(){this.destroy()}}(c,o,i,r)};return{show:function(e,t,n){o(e,t,n)}}}}),define("DS/DELPPWModelBehaviors/UserDefProceduresBehaviour",["UWA/Core"],function(e){"use strict";return{plugins:["WebServicePlugin","DatabasePlugin","RootsPlugin","PlatformPlugin","ResourcePlugin"],creator:function(t,n,o,i,r,a,s){var c,l={ProcDisplayName:s.getNLSValue("UserDefExploreBehavior.DefaultBehavior.ProcDisplayName"),ProcID:"default",ProcShortDescription:s.getNLSValue("UserDefExploreBehavior.DefaultBehavior.ProcShortDescription")},u=!!e.is(a.isLoadOOTBProcedures())&&a.isLoadOOTBProcedures(),f=[],g=new Set,d=null;return{isLoadOOTBProcedures:function(){return a.isLoadOOTBProcedures()},getAllProcedures:function(t){var r=function(e){var t,n;return c=[],g.clear(),e.forEach(function(e){e.forEach(function(e){t=i.getPPRType(e.id),n=i.transformToRIROccurrencePath(e.path).length>0?i.transformToRIROccurrencePath(e.path):[e.id],f.push(e.id),c.push({type:t,path:n}),t="OPERATION"===t?"SYSTEM":t,g.add(t)})}),g}(t);return new e.Promise(function(t){var i,a;e.is(d)?t({procs:d,selectedPPRTypes:r}):(i={url:"delmcb/api/UDOWebServices/GetProcedureList",method:"GET",onFailure:function(e){n.debug("GetProcedureList Failed "+e),t({procs:[],selectedPPRTypes:r})},onComplete:function(o){a=e.is(o)&&e.is(o.Scenarios)?o.Scenarios:[],d=u?a:a.filter(function(e){return"Custo"===e.ProcCategory}),n.debug("GetProcedureList succeeded"),t({procs:d,selectedPPRTypes:r})}},o.webServiceRequest(i))})},filterApplicableProcedures:function(t,i){var r,a=t.procs,s=t.selectedPPRTypes,c=[];e.is(a)&&a.length>0&&!e.is(a[0].supportedPPRType)&&(c=a.map(function(t){return new e.Promise(function(e,i){var r;r={url:"delmcb/api/UDOWebServices/GetProcedureDetails",method:"POST",data:JSON.stringify({ProcID:t.ProcID}),onFailure:function(e){n.debug(e),i(e)},onComplete:function(o){switch(o.ProcNodeType){case"EBOM":t.supportedPPRType="PRODUCT";break;case"MBOM":t.supportedPPRType="PROCESS";break;case"Workplan":case"System":t.supportedPPRType="SYSTEM";break;case"Resource":t.supportedPPRType="RESOURCE";break;case"Any":t.supportedPPRType="ALL";break;default:n.debug("Unsupported procedure in MGA")}e()}},o.webServiceRequest(r)})})),e.Promise.allSettled(c).then(function(e){var t=0;e.forEach(function(e){"rejected"===e.state&&t++}),0===t?(r=function(e){var t=[];return 1===e.size&&null!==d?t=d.filter(function(t){return t.supportedPPRType===Array.from(e)[0]||"ALL"===t.supportedPPRType}):console.error("Objects of different PPR types are selected or Procedures are not available."),t.unshift(l),t}(s),i(r)):t===e.length?(n.debug("GetProcedureDetails failed"),i([l])):(n.debug("GetProcedureDetails partially failed"),i([l]))})},executeProcedure:function(t,a,l){var u,g,d,m,p={},P=l||{},S=function(e,t){var o,i;return i={workplan:{path:[],rootPID:"",configId:""},process:{path:[],rootPID:"",configId:""},product:{path:[],rootPID:"",configId:""},resource:{path:[],rootPID:"",configId:""}},o=function(e,t){i[e].path.push({pids:t}),i[e].rootPID=t[0],i[e].configId=r.getCompatibleConfigurationFilters([t[0]])[t[0]]},c.forEach(function(e){switch(e.type){case"PROCESS":o("process",e.path);break;case"PRODUCT":o("product",e.path);break;case"RESOURCE":o("resource",e.path);break;case"SYSTEM":case"OPERATION":o("workplan",e.path);break;default:n.debug("Invalid Type")}}),'<execute xmlns="http://www.3ds.com/xmql/query"><function>'+e+"</function><version>"+t+'</version><params><param name="SEL_WK_PL">{"modelerName":"workplan","occurrences":'+JSON.stringify(i.workplan.path)+'}</param><param name="SEL_PRCS">{"modelerName":"process","occurrences":'+JSON.stringify(i.process.path)+'}</param><param name="SEL_PRD">{"modelerName":"product","occurrences":'+JSON.stringify(i.product.path)+'}</param><param name="SEL_RSC">{"modelerName":"resource","occurrences":'+JSON.stringify(i.resource.path)+'}</param><param name="SEL_PROD_SYS">{"modelerName":"productionSystem","occurrences":'+JSON.stringify(i.workplan.path)+'}</param><param name="SEL_CPBL_RSC">{"modelerName":"resource","occurrences":'+JSON.stringify(i.resource.path)+'}</param><param name="PRD">{"modelerName":"product","occurrences":'+JSON.stringify(i.product.path)+'}</param><param name="PROD_SYS">{"modelerName":"productionSystem","occurrences":'+JSON.stringify(i.workplan.path)+'}</param><param name="WK_PL">{"modelerName":"workplan","occurrences":'+JSON.stringify(i.workplan.path)+'}</param><param name="RSC">{"modelerName":"resource","occurrences":'+JSON.stringify(i.resource.path)+'}</param><param name="PRCS">{"modelerName":"process","occurrences":'+JSON.stringify(i.process.path)+'}</param><param name="CPBL_RSC">{"modelerName":"capableResource","occurrences":'+JSON.stringify(i.resource.path)+'}</param><param name="ConfigurationsVal">[{"filters":[{"compiledForm":"","configuration":'+JSON.stringify(i.product.configId)+',"rootId":'+JSON.stringify(i.product.rootPID)+',"volume":""}],"modelerName":"product"},{"filters":[{"compiledForm":"","configuration":'+JSON.stringify(i.process.configId)+',"rootId":'+JSON.stringify(i.process.rootPID)+',"volume":""}],"modelerName":"process"},{"filters":[{"compiledForm":"","configuration":'+JSON.stringify(i.workplan.configId)+',"rootId":'+JSON.stringify(i.workplan.rootPID)+',"volume":""}],"modelerName":"workplan"},{"filters":[{"compiledForm":"","configuration":'+JSON.stringify(i.workplan.configId)+',"rootId":'+JSON.stringify(i.workplan.rootPID)+',"volume":""}],"modelerName":"productionSystem"},{"filters":[{"compiledForm":"","configuration":'+JSON.stringify(i.resource.configId)+',"rootId":'+JSON.stringify(i.resource.rootPID)+',"volume":""}],"modelerName":"resource"},{"filters":[{"compiledForm":"","configuration":'+JSON.stringify(i.resource.configId)+',"rootId":'+JSON.stringify(i.resource.rootPID)+',"volume":""}],"modelerName":"capableResource"}]</param></params></execute>'}(t,a);n.notify("startProgress",p),d=function(t){var o=[],r=[],a=e.is(t.xmql_response.footer["global error"])?t.xmql_response.footer["global error"]:null,s=t.xmql_response.body.result;e.is(s)&&null===a?(s.forEach(function(e){Object.keys(e).length>0&&e.output.occurrences.forEach(function(e){r.push(e.pids),e.pids.forEach(function(e){-1===o.indexOf(e)&&o.push(e)})})}),u=function(e){var t,a,s,c,l=[],u=[],g=[],d=[];c=function(){n.notify("addOccurrece",[r]),s.length>0&&n.notify("selectNodes",[s])},f.forEach(e=>{t=i.getPPRType(e),-1===u.indexOf(t)&&u.push(t),i.getImpacted(e,!0,{excludeRelationTypes:["LinearProductFlowCnx"]}).forEach(function(e){e=Array.isArray(e)?e:[e],-1!==o.indexOf(e[e.length-1])&&l.push(e[e.length-1])})}),f=[],P.selectConnectedObjects&&(s=[],l.forEach(e=>{u.includes(i.getPPRType(e))||s.push(e)})),e.instancesAndReferences.forEach(e=>{g.push(e.id)}),(a=o.filter(e=>!g.includes(e))).length>0?(a.forEach(e=>{i.isInstance(e)||d.push(e)}),d.length>0?i.fetchInstancesAndTheirReferences(d,{onComplete:function(e){c()},silentMode:"true"}):c()):c(),n.notify("stopProgress",p)},g=function(){n.debug("Fetching getDescendantsFromServer for user defined procedure failed.")},i.getDescendantsFromServer(o,u,{onFailure:g,silentMode:!0,expandLevel:0})):(n.notify("stopProgress",p),a=(a=JSON.parse(a).MESSAGE).substr(a.lastIndexOf(":")+1),n.warn(a))},m=function(){n.notify("stopProgress",p),n.warn(s.getNLSValue("UserDefExploreBehavior.ExecuteProc.Failure"))},o.webServiceRequest({url:o.get3DSpaceUrl()+"i3dx/services/xmql",method:"POST",data:S,headers:{Accept:"application/json","Content-Type":"application/xml"},onComplete:d,onFailure:m,onTimeout:m,onCancel:m})}}}}}),define("DS/DELPPWModelBehaviors/LinkBehavior",["UWA/Core","UWA/Promise"],function(e,t){"use strict";return{plugins:["DatabasePlugin","DicoPlugin","WebServicePlugin","AttributePlugin","ResourcePlugin","ImplementPlugin","SelectionPlugin","PlatformPlugin"],creator:function(n,o,i,r,a,s,c,l,u,f){const g=l.getScopeLinkType(),d=l.getImplementLinkType(),m="DELLmiProductionSystemOutputCnxToMBOM",p="MfgProcessAlternate",P="HistorizationLinkRefRef";var S,h,L,C,I,y,D,v,R;return S=function(t,n,i,r){i=i||{},e.is(n,"string")&&o.info(n,r),o.notify("stopProgress",t),e.is(i.onComplete,"function")&&i.onComplete.call(null,n)},h=function(t,n,i,r,a){r=r||{},e.is(i,"string")&&(n+="\n"+i),e.is(n,"string")&&(o.warn(n,a),o.debug(n)),o.notify("stopProgress",t),e.is(r.onFailure,"function")&&r.onFailure.call(null,n)},L=function(t){return new e.Promise(function(n){var r=[],a=function(t){var n,o;-1===r.indexOf(t)&&(n=i.getInstance(t),o=t,e.is(n)&&(o=n.get("isInstanceOf"),i.needToQueryForConnections(t)&&r.push(t)),-1===r.indexOf(o)&&i.needToQueryForConnections(o)&&r.push(o))};i.isNavigateOnDemand()||n({impactedList:[],relationsLoaded:!0}),(e.is(t)?t:u.getModuleSelections(o.getId())).forEach(function(e){a(e.id),Array.isArray(e.path)&&e.path.forEach(function(e){a(e)})}),r.length>0?i.getConnectionsFromServer(r,function(t){e.is(t)&&Array.isArray(t.connections)&&t.connections.length>0&&o.notify("addConnection",[t.connections]),n({impactedList:r,result:t,relationsLoaded:!0})}):n({impactedList:r,relationsLoaded:!0})})},C=function(e){return L(e).then(function(e){var t=e.impactedList;t.length>0&&(o.notify("refreshImpacted",{impactedChildren:[],impactedObjects:t}),o.getBehavior("RefreshBehavior").onRefreshSelected({impactedChildren:[],impactedObjects:t}))})},I=function(t){var n,o,a,s,l,u=!0,f={};return e.is(t.fromSideRefPID)&&e.is(t.toSideRefPID)?(n=t.fromSideRefPID,o=t.toSideRefPID,a=i.getReference(n),s=i.getReference(o)):(u=!1,l=c.getNLSValue("LinkBehavior.canCreateOutputLinkError.InsufficentInfo")),u&&(r.isAKindOf(s,"Provide")||r.isAKindOf(a,"DELLmiHeaderWorkPlanReference")||r.isAKindOf(a,"DELLmiQtyControlProcessReference")?(u=!1,l=c.getNLSValue("LinkBehavior.canCreateOutputLinkError.ObjectTypeDoesntSupport")):i.hasConnection({from:n,to:o,type:m})&&(u=!1,l=c.getNLSValue("LinkBehavior.canCreateOutputLinkError.LinkAlreadyExists"))),f={canCreateLink:u},u?f.data=e.merge({type:m,IDFrom:t.fromSideRefPID,IDTo:t.toSideRefPID,displayText:c.getNLSValue(m,null,"CreateLink"),buttonIdentifier:c.getNLSValue(m,null,"CreateLink")},e.clone(t)):f.errorMessage=l,f},y=function(t){var n,o,a,s,l,u=!0,f={};return e.is(t.fromSideRefPID)&&e.is(t.toSideRefPID)?(o=t.fromSideRefPID,a=t.toSideRefPID,s=i.getReference(o),l=i.getReference(a)):(u=!1,n=c.getNLSValue("LinkBehavior.canCreateOriginateLinkError.InsufficentInfo")),u&&(i.hasConnection({from:o,to:a,type:P})||i.hasConnection({from:a,to:o,type:P})?(u=!1,n=c.getNLSValue("LinkBehavior.canCreateOriginateLinkError.LinkAlreadyExists")):(r.isAKindOf(s,"DELLmiHeaderWorkPlanReference")||r.isAKindOf(l,"DELLmiHeaderWorkPlanReference"))&&(u=!1,n=c.getNLSValue("LinkBehavior.canCreateOriginateLinkError.ObjectTypeDoesntSupport"))),f={canCreateLink:u},u?f.data=e.merge({type:P,IDFrom:o,IDTo:a,displayText:c.getNLSValue(P,null,"CreateLink"),buttonIdentifier:c.getNLSValue(P,null,"CreateLink")},e.clone(t)):f.errorMessage=n,f},D=function(t){var n,o,r,a=!0,s={};return e.is(t.fromSideRefPID)&&e.is(t.toSideRefPID)?(n=t.fromSideRefPID,o=t.toSideRefPID,(i.hasConnection({from:n,to:o,type:p})||i.hasConnection({from:o,to:n,type:p}))&&(a=!1,r=c.getNLSValue("LinkBehavior.canCreateAlternateLinkError.LinkAlreadyExists"))):(a=!1,r=c.getNLSValue("LinkBehavior.canCreateAlternateLinkError.InsufficentInfo")),s={canCreateLink:a},a?s.data=e.merge({type:p,IDFrom:n,IDTo:o,displayText:c.getNLSValue(p,null,"CreateLink"),buttonIdentifier:c.getNLSValue(p,null,"CreateLink")},e.clone(t)):s.errorMessage=r,s},v=function(t,n){var i,r=o.getBehavior("ImplementBehavior"),a=o.getBehavior("ProductFlowLinkBehavior"),s=o.getBehavior("CapableResourceLinkBehaviour"),c="",l="";switch(e.is(r)&&(c=r.getScopeLinkType(),l=r.getImplementLinkType()),e.is(t.type)?t.type:n){case c:i=r.canCreateScopeLink(t);break;case l:i=r.canCreateImplementLink(t);break;case"ResultingProductLink":i=r.canCreateResultingProductLink(t);break;case m:i=I(t);break;case p:i=D(t);break;case P:i=y(t);break;case"DELAsmProcessCanUseCnx":i=s.canCreatePrimaryCapableRscLink(t);break;case"SecondaryCandidateResourceLink":i=s.canCreateSecondaryCapableRscLink(t);break;case"DELLmiTimeConstraintCnx":case"DELLmiMaterialPathCnxCust":i=a.canCreateProductFlowLink(t,n);break;default:i={canCreateLink:!1}}return i},R=function(n,r){var a,s,c,l,u=o.getBehavior("ImplementBehavior"),f=o.getBehavior("ProductFlowLinkBehavior"),g=o.getBehavior("CapableResourceLinkBehaviour");return new t(function(t,o){var S=function(e){t(e)},h=function(e){o(e)};switch(n.type){case d:u.createImplementLink(n,r,S,h);break;case"DELAsmProcessCanUseCnx":case"SecondaryCandidateResourceLink":g.createConnection(n,r,S,h);break;case"DELLmiTimeConstraintCnx":case"DELLmiMaterialPathCnxCust":f.createProductFlowLink(n,r,S,h);break;case P:case p:case"ResultingProductLink":case m:default:s={linkType:n.type,target:n.IDFrom,source:n.IDTo},c=function(){e.is(S,"function")&&S(s)},l=function(){e.is(h,"function")&&h(s)},(a=v(n)).canCreateLink?(r=r||{},i.createConnection({IDFrom:n.IDFrom,IDTo:n.IDTo,type:n.type},e.merge({onFailure:l,onTimeout:l,onCancel:l,onComplete:c},r))):(s.errorMessage=a.errorMessage,l())}})},{listenTo:function(){return{LoadRelations:function(e){var t;return Array.isArray(e)&&(t=e),C(t)}}},onStart:function(){},onStop:function(){},getPossibleRelationTypes:function(t){var n=e.is(t.fromSideRefPID)?i.getReference(t.fromSideRefPID):null,a=e.is(t.toSideRefPID)?i.getReference(t.toSideRefPID):null,s=e.is(n)?n.get("type"):null,c=e.is(a)?a.get("type"):null,l={};return e.is(s)&&e.is(c)?(r.getPossibleRelations(s,c,"write").forEach(function(n){var o={};(o=v(t,n)).canCreateLink&&(delete o.canCreateLink,o.data=e.is(o.data,"array")?o.data:[o.data],l[n]=o)}),l):(o.debug("No Types on models"),[])},getPossiblePartialScopeLinkOnHeaderOperation:function(e){return o.getBehavior("ImplementBehavior").getPossiblePartialScopeLinkOnHeaderOperation(e)},isLinkPossible:function(e,t,n,o){return r.isLinkPossible(e,t,n,o)},webServiceRequest:function(e){a.webServiceRequest(e)},getConnection:function(e){return i.getConnection(e)},isExploreWebAppEnabled:function(){return!f.isCloud()},createConnectionsByType:function(e,t){var n=o.getBehavior("ImplementBehavior"),i=n.getScopeLinkType(),r=e.linkType,a=e.linksData;switch(r){case i:n.createScopeLink(a,t);break;default:this.createConnection(a,t)}},createConnection:function(n,r){var a,s={},l=[];e.is(n)&&e.is(n,"array")&&(o.notify("startProgress",s),a=o.log(c.getNLSValue("CreateLink.LogMessage")),l=n.map(function(e){return R(e,r)}),t.allSettled(l).then(function(t){var n=0,l={},u={},f={success:l,failed:u};t.forEach(function(t){var i,r;"rejected"===t.state?(n++,r=u,i=t.reason,e.is(i.errorMessage,"string")&&o.debug(i.linkType+" creation failed :  "+i.errorMessage)):(r=l,i=t.value),e.is(r[i.linkType])||(r[i.linkType]={}),e.is(r[i.linkType][i.target])||(r[i.linkType][i.target]=[]),r[i.linkType][i.target].push(i.source)}),Object.keys(f).forEach(function(e){var t="success"===e,n=t?"CreateLink.Success":"CreateLink.Failure",r=f[e];Object.keys(r).forEach(function(e){var s=r[e];Object.keys(s).forEach(function(r){var l,u=s[r],f=[],g=i.getReferenceModel(r).get("V_Name");u.forEach(function(e){var t=i.getReferenceModel(e);f.push(t.get("V_Name"))}),l=c.getNLSValue(n,{linkType:c.getNLSValue(e),target:g,source:f.join(", ")}),t?o.info(l,a):(o.warn(l,a),o.debug(l))})})}),0===n?S(s,null,r,a):h(s,null,null,r,a)}))},createHOPMfgItemPartialScopeLink:function(e){var t,n={},i=c.getNLSValue("ImplementBehavior.CreateMGAPartialScopeLink.LogMessage");o.notify("startProgress",n),t=o.log(i),l.createHOPMfgItemPartialScopeLink(e,{onSuccess:function(e){S(n,e,null,t)},onFailure:function(e){h(n,e,null,null,t)}})},canDeleteRelation:function(t){var n,o,a,s,c,l,u=!1;return n=this.getConnection(t),e.is(n)&&("CapableResourcesStructureLink"===(o=n.getAttribute("type"))?u=!1:"SecondaryCandidateResourceLink"===o?u=!0:"DELLmiMaterialPathCnxCust"===o?u=!0:(a=n.getAttribute("from"),s=i.getReferenceModel(a).get("type"),c=n.getAttribute("to"),l=i.getReferenceModel(c).get("type"),u=r.isRelationTypeConfigured(o,s,l,"write"))),u},deleteConnection:function(t,n){var r,a,s,u,f={},m=i.getConnection(t),p=m.getAttribute("type"),P=c.getNLSValue(p);n=n||{},o.notify("startProgress",f),s=o.log(c.getNLSValue("DeleteLink.LogMessage",{linkType:P})),r={onComplete:function(t,i){var r={};S(f,c.getNLSValue("DeleteLink.Success",{linkType:P}),n,s),e.is(t.preferred)&&(r.linkPID=t.preferred,r.state=!0,o.notify("updatePreferredLink",r)),e.is(i)?o.notify("deleteLink",[i.deletedConnections]):o.notify("deleteLink",m.toJSON())},onFailure:u=function(e,t){h(f,c.getNLSValue("DeleteLink.Failure",{linkType:P}),t,n,s)},onTimeout:u,onCancel:u},a=e.extend({},n),r=e.extend(a,r),g===p?l.deleteScopeLink(t,r):d===p?l.deleteImplementLink(t,r):i.deleteConnection(t,r)},addConnection:function(e,t){return i.addConnection(e,t)},updateLinkAttributes:function(e,t,n){var r,a,l,u,f,g=[],d={},m={},p={};for(t=t||{},n=n||{},r=0;r<t.length;r++)f=s.hasRangeDefined(t[r].attributeInfo,t[r].attributeDef)&&s.isInteger(t[r].attributeInfo),u=t[r].objectToBeModified.get(t[r].dataIndex),l=t[r].newValue,f&&(u=s.getAuthorizedValueIndex(t[r].attributeInfo,t[r].attributeDef,u)),s.isDate(t[r].attributeInfo)&&(u=new Date(u).getTime()/1e3),u!==l&&(t[r].previousValue=u,g.push(t[r]));if(0!==g.length){for(r=0;r<g.length;r++)d[g[r].attributeName]=g[r].newValue;a={data:d,onFailure:function(e){for(r=0;r<g.length;r++)e.set(g[r].dataIndex,g[r].previousValue);h(p,c.getNLSValue("AttributeUtil.SaveFailed"),e,n)},onComplete:function(){S(p,c.getNLSValue("AttributeUtil.SaveSucceeded"),n),o.notify("editLinkAttributes",m),o.notify("refreshImpacted")},logMessage:c.getNLSValue("AttributeUtil.EditAttributesLogMessage")},o.notify("startProgress",p),i.updateConnection(e,a)}},getConnectionsByModel:function(e,t,n){i.getConnectionsByModel(e,t,n)},getImpactedConnections:function(e,t,n){return i.getImpacted(e,t,n)},getConnectedObjects:function(t,n,r){var a,s,c,l,u=o.getBehavior("ImplementBehavior"),f=o.getBehavior("CapableResourceLinkBehaviour"),g=[];return a=i.getInstance(t),e.is(a)?(s=t,c=i.getReferenceModelFromInstance(a),l=c.get("PID")):(c=i.getReference(t),l=t),i.getImpacted(t,!1,r).forEach(function(e){var t,o=e.get("type"),i=e.get("from"),r=e.get("to");switch(o){case"ProcessImplementLink":case"PartialProcessImplementLink":case"ProcessImplementLinkOcc":g=g.concat(u.getConnectedObjects(l,s,n,e));break;case"CapableResourcesStructureLink":case"DELAsmProcessCanUseCnx":case"SecondaryCandidateResourceLink":g=g.concat(f.getConnectedObjects(l,s,n,e));break;case m:case p:case P:t=i===l?r:i,g.push(t);break;case"ProductImplementLink":case"ProductImplementLinkOcc":case"ResultingProductLink":case"DELLmiTimeConstraintCnx":case"DELLmiMaterialPathCnxCust":break;default:console.log("Invalid Type")}}),g},getXMLValues:function(e,t,n){return a.getXMLValues(e,t,n)},getRelations:function(t){return L(t).then(function(t){var n=t.result;return{isRelationsLoaded:t.relationsLoaded,connections:e.is(n)?n.connections:[]}})},areRelationsLoaded:function(t){var n=!0;return t=Array.isArray(t)?t:[t],i.isNavigateOnDemand()&&(n=t.some(function(t){var n,o,r,a=i.getReferenceModel(t),s=a.get("PID")===t;return e.is(a)&&(s||(r=t),o=i.getInstance(r),n=e.is(o)?a.getAdditionalInfo("queriedForConnections")&&o.getAdditionalInfo("queriedForConnections"):a.getAdditionalInfo("queriedForConnections")),n})),n},hasConnection:function(e){return i.hasConnection(e)},getLinkInfo:function(t){var n,i=o.getBehavior("ProductFlowLinkBehavior"),r={NLS:null,type:null,subType:null,iconName:null,interface:null};return e.is(t)&&("DELLmiTimeConstraintCnx"===(n=t.get("type"))&&e.is(i)?r=i.getLinkInfo(t):(r.NLS=c.getNLSValue(n),r.type=n,r.iconName=n)),r},getSecondaryRscLinksFromPrimaryLink:function(e){var t;return t=e.get("PID"),i.getImpacted(t,!1,{relationTypes:["SecondaryCandidateResourceLink"]})},cloneSecondaryCapableRscLinkWithFromAttr:function(t){var n=this.getConnection(t.get("from"));return e.is(n)&&(t=t.clone()).set("from",n.get("from")),t},getSecondaryResourceLinksInfo:function(t){var n,o=this,r=[],a=i.getConnection(t),s=this.getSecondaryRscLinksFromPrimaryLink(a);return n=function(t){var n=t.get("PID"),o=t.get("type"),r=t.get("V_IsPreferred"),a=t.get("from"),s=t.get("to"),c=i.getReference(a),l=i.getReference(s),u=e.is(c)?c.get("type"):null,f=e.is(l)?l.get("type"):null,g=e.is(c)?c.get("V_Name"):null,d=e.is(l)?l.get("V_Name"):null,m=e.is(t.get("ResourceUsage"))?t.get("ResourceUsage"):null,p=e.is(m)?i.getInstance(m):null;return{connPID:n,isPreferred:"DELAsmProcessCanUseCnx"===o?r:"",fromPID:a,toPID:s,fromType:u,toType:f,fromName:g,toName:d,resourceUsage:e.is(p)?p.get("PLM_ExternalID"):"",resourceUsagePID:m}},s.forEach(function(e){var t=o.cloneSecondaryCapableRscLinkWithFromAttr(e);r.push(n(t))}),r}}}}}),define("DS/DELPPWModelBehaviors/DuplicateAdvBehavior/DuplicateAdvUI",["UWA/Core"],function(e){"use strict";return function(t,n,o){var i,r,a,s,c,l,u,f=n.getComponent("Element"),g=n.getComponent("Dialog"),d=n.getComponent("Button"),m=n.getComponent("LineEditor"),p=n.getComponent("Toggle");return c=function(n){(i=new g({domId:"DuplicateAdvCmd-Dialog",identifier:"DuplicateAdvCmd-Dialog",immersiveFrame:t.getImmersiveFrame(),modalFlag:!0,visibleFlag:!1,minWidth:"500",minHeight:"500",resizableFlag:!0,snappableFlag:!1,title:o.getNLSValue("DuplicateAdvCmd.Header"),content:s,buttons:{Ok:new d({className:"ok primary",label:o.getNLSValue("DuplicateAdvCmd.OK"),emphasize:"primary",onClick:function(){var t=u();i.close(),e.is(n,"function")&&n(t)}}),Cancel:new d({className:"cancel",label:o.getNLSValue("DuplicateAdvCmd.CANCEL"),onClick:function(){i.close()}})}})).close=function(){this.destroy(),s=null,r=null,a=null},i.show()},l=function(e,t){var n,i,c,l,u;for(n in s=new f("div",{class:"DuplicateAdvCmd-Content"}),i=new f("div",{class:"DuplicateAdvCmd-prefixOptionContainer"}),c=new f("div",{class:"DuplicateAdvCmd-linkOptionsContainer"}),e.isDisplayed&&(new f("div",{class:"DuplicateAdvCmd-prefixLabelContainer",text:o.getNLSValue("DuplicateAdvCmd.Prefix")}).inject(i),(r=new m({placeholder:o.getNLSValue("DuplicateAdvCmd.Prefix"),value:e.defaultValue})).inject(i)),a={},t)Object.prototype.hasOwnProperty.call(t,n)&&(l=t[n]).isDisplayed&&((u=new p({label:o.getNLSValue("DuplicateAdvCmd."+n),checkFlag:l.defaultValue})).inject(c),a[n]=u);i.inject(s),c.inject(s)},u=function(){var t,n={};if(e.is(r)&&(n.Prefix=r.value),e.is(a))for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(n[t]=a[t].checkFlag);return n},{name:"DuplicateAdvUI",showUI:function(t,n){return e.is(i)&&i.close(),l(t.prefixOption,t.linkOptions),c(n),i}}}}),define("DS/DELPPWModelBehaviors/CapableResourceLinkBehaviour",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin","DicoPlugin","ResourcePlugin"],creator:function(t,n,o,i,r){var a,s,c,l,u;return l=function(t,o,i,r){i=i||{},n.info(o,r),n.notify("stopProgress",t),e.is(i.onComplete,"function")&&i.onComplete.call(null,o)},u=function(t,o,i,r,a){r=r||{},e.is(i,"string")&&(o+="\n"+i),n.warn(o,a),n.debug(o),n.notify("stopProgress",t),e.is(r.onFailure,"function")&&r.onFailure.call(null,o)},a=function(t){var n=t.get("PID"),i=t.get("type"),r=t.get("V_IsPreferred"),a=t.get("from"),s=t.get("to"),c=o.getReference(a),l=o.getReference(s),u=e.is(c)?c.get("type"):null,f=e.is(l)?l.get("type"):null,g=e.is(c)?c.get("V_Name"):null,d=e.is(l)?l.get("V_Name"):null,m=e.is(t.get("ResourceUsage"))?t.get("ResourceUsage"):null,p=e.is(m)?o.getInstance(m):null;return{connPID:n,isPreferred:"DELAsmProcessCanUseCnx"===i?r:"",fromPID:a,toPID:s,fromType:u,toType:f,fromName:g,toName:d,resourceUsage:e.is(p)?p.get("PLM_ExternalID"):"",resourceUsagePID:m}},s=function(e){var t=[];return o.getImpacted(e,!1,{relationTypes:["DELAsmProcessCanUseCnx"]}).forEach(function(e){t.push(a(e))}),t},c=function(t,n,i){var r,a,s,c,l,u,f,g,d=!1;return r=e.is(i)?o.getInstance(i):null,a=e.is(r)?r.get("isAggregatedBy"):null,s=o.getReference(t),c=e.is(a)?o.getReference(a):null,l=o.getReference(n),u=s.get("PPRTYPE"),f=e.is(c)?c.get("PPRTYPE"):null,g=l.get("PPRTYPE"),"OPERATION"===u&&"SYSTEM"===f&&"RESOURCE"===g&&(d=!0),d},{listenTo:function(){},onStart:function(){},onStop:function(){},checkType:function(e,t){return o.getReference(e).get("PPRTYPE")===t},checkParentType:function(e,t){var n=o.getInstance(e).get("isAggregatedBy");return o.getReference(n).get("PPRTYPE")===t},getCapableRscStructureLinkOfAncestor:function(e){var t,n,i=[],r={relationTypes:["CapableResourcesStructureLink"]};for(t=e.length-2;t>=0&&1!==(i=o.getImpacted(e[t],!1,r)).length;t--);return e.length>0&&1!==i.length&&(n=o.getInstance(e[0]).get("isAggregatedBy"),i=o.getImpacted(n,!1,r)),1===i.length?i[0]:null},canCreatePrimaryCapableRscLink:function(t){var n,a,s,l,u,f,g,d,m,p,P="DELAsmProcessCanUseCnx",S=!0,h={};return n=t.fromSideRefPID,a=t.toSideRefPID,s=t.fromSideInstPID,l=t.toSideInstPID,u=t.fromSideAbsPath,f=t.toSideRootRefPID,m=o.getReferenceModel(n),i.isAKindOf(m,"DELLmiHeaderWorkPlanReference")?(S=!1,p=r.getNLSValue("CapableResourceLinkBehaviour.canCreatePrimaryCapableRscLinkError.ProcessIsHeaderWP")):o.hasConnection({from:n,to:a,type:"DELAsmProcessCanUseCnx"})&&(S=!1,p=r.getNLSValue("CapableResourceLinkBehaviour.canCreatePrimaryCapableRscLinkError.LinkAlreadyExists")),h={canCreateLink:S},S?(h.data=e.merge({type:P,displayText:r.getNLSValue(P,null,"CreateLink"),buttonIdentifier:r.getNLSValue(P,null,"CreateLink")},e.clone(t)),c(n,a,s)&&(g=this.getCapableRscStructureLinkOfAncestor(u),d=e.is(g)?g.get("to"):null,h.data.connectionParams={resourceAreaID:d,rscInstPID:e.is(d)&&d===f?l:null,operationRIRPath:e.is(d)?o.transformToRIROccurrencePath(u).toString():null,isPreferredPossible:!0})):h.errorMessage=p,h},canCreateSecondaryCapableRscLink:function(t){var n,i,l,u,f,g,d,m="SecondaryCandidateResourceLink",p=[],P={};return P={canCreateLink:!1,data:[]},n=t.fromSideRefPID,i=t.toSideRefPID,l=t.fromSideInstPID,u=t.fromSideAbsPath,c(n,i,l)?(f=this.getCapableRscStructureLinkOfAncestor(u),g=e.is(f)?f.get("to"):null,e.is(t.connectionParams)&&e.is(t.connectionParams.primaryResourceLinkPID)?(d=o.getConnection(t.connectionParams.primaryResourceLinkPID),p.push(a(d))):p=s(l),p.forEach(function(n){if(i!==n.toPID){let i=e.merge({type:m,displayText:r.getNLSValue(m,{primaryResource:n.toName},"CreateLink"),connectionParams:{resourceAreaID:g,operationRIRPath:e.is(g)?o.transformToRIROccurrencePath(u).toString():null,primaryResourceLinkPID:n.connPID},buttonIdentifier:n.connPID},e.clone(t));P.data.push(i),P.canCreateLink||(P.canCreateLink=!0)}})):P.errorMessage=r.getNLSValue("CapableResourceLinkBehaviour.canCreateSecondaryCapableRscLinkError.NotAcceptedPPRType"),P},canCreateCapableResourcesStructureLink:function(e){var t,n=!0;return t=o.getReferenceModel(e),(i.isAKindOf(t,"DELLmiWorkPlanSystemReference")||i.isAKindOf(t,"DELLmiQtyControlProcessReference "))&&o.getImpacted(e,!0,{relationTypes:["CapableResourcesStructureLink"]}).length>0&&(n=!1),n},createConnection:function(t,i,a,s){var c,l,u,f,g,d,m,p;switch(i=i||{},u=(t=t||{}).fromSideRefPID,f=t.toSideRefPID,g=t.type,d={linkType:g,target:u,source:f},m=function(t,i){var r;e.is(i.instancesAndReferences,"array")&&i.instancesAndReferences.length>0&&o.addInstance(i.instancesAndReferences[0]),"DELAsmProcessCanUseCnx"!==t.get("type")&&"SecondaryCandidateResourceLink"!==t.get("type")||(r={linkPID:t.get("PID")},n.notify("updateResourceUsage",r)),e.is(a,"function")&&a(d)},p=function(){e.is(s,"function")&&s(d)},t.type){case"DELAsmProcessCanUseCnx":l=this.canCreatePrimaryCapableRscLink(t);break;case"SecondaryCandidateResourceLink":l=this.canCreateSecondaryCapableRscLink(t),Array.isArray(l.data)&&l.data.length>=1&&(l.data=l.data[0]);break;default:l={canCreateLink:!1,errorMessage:r.getNLSValue("CapableResourceLinkBehaviour.createConnectionError.InvalidInputs")}}l.canCreateLink?(i=i||{},c={onFailure:p,onTimeout:p,onCancel:p,onComplete:m},o.createConnection({IDFrom:u,IDTo:f,type:g,connectionParams:l.data.connectionParams},e.merge(c,i))):(d.errorMessage=l.errorMessage,p())},createCapableResourceStructureLink:function(t,i){var a,s,c,f={},g="CapableResourcesStructureLink",d=function(e,t,n){return r.getNLSValue(e,{linkType:g,target:t,source:n})};return i=i||{},s={onFailure:function(){var e=o.getReferenceModel(t).get("V_Name");u(f,d("CreateLink.CapableResourcesStructureLink.Failure",e,null),null,i,c)},onComplete:function(e){var t=o.getReferenceModel(e.get("from")),n=o.getReferenceModel(e.get("to")),r=t.get("V_Name"),a=n.get("V_Name");l(f,d("CreateLink.Success",r,a),i,c)}},a={type:g,IDFrom:t},n.notify("startProgress",f),c=n.log(r.getNLSValue("CreateLink.LogMessage")),o.createConnection(a,e.merge(s,i))},packConnInfo:function(e){return a(e)},getPrimaryResourceLinksInfo:function(e){return s(e)},getConnectedObjects:function(t,i,r,a){var s=[];return e.is(a)&&(a=Array.isArray(a)?a:[a]).forEach(function(i){var r,a,c,l,u,f=i.get("type"),g=i.get("PID"),d=i.get("from"),m=i.get("to");switch(f){case"CapableResourcesStructureLink":u=d===t?m:d,s.push(u);break;case"DELAsmProcessCanUseCnx":r=d,a=m,c=i.get("ResourceUsage"),u=r===t?e.is(c)?c:a:r,s.push(u),o.getImpacted(g,!1,{relationTypes:["SecondaryCandidateResourceLink"]}).forEach(function(t){var n=t.get("to"),o=t.get("ResourceUsage");s.push(e.is(o)?o:n)});break;case"SecondaryCandidateResourceLink":l=o.getConnection(d),e.is(l)&&(r=l.get("from"),s.push(r),a=l.get("to"),c=l.get("ResourceUsage"),s.push(e.is(c)?c:a));break;default:n.debug("Invalid Type")}}),s}}}}}),define("DS/DELPPWModelBehaviors/DocumentBehavior",[],function(){"use strict";return{plugins:["DocumentPlugin","ResourcePlugin","DicoPlugin","PlatformPlugin"],creator:function(e,t,n,o,i,r){var a,s;return a=function(e,n,o){o=o||{},t.info(n),t.notify("stopProgress",e),UWA.is(o.onComplete,"function")&&o.onComplete.call(null,n)},s=function(e,n,o,i){i=i||{},UWA.is(o)&&UWA.is(o.message,"string")&&(n+="\n"+o.message),t.warn(n),t.notify("stopProgress",e),UWA.is(i.onFailure,"function")&&i.onFailure.call(null,n)},{listenTo:function(){return{}},onStart:function(){},onStop:function(){},getDocumentTypes:function(){return n.getDocumentTypes()},getDocumentsPolicies:function(e){n.getDocumentsPolicies({onComplete:function(t){e(t)},onFailure:function(){t.warn(o.getNLSValue("Document.FetchDocPolicyFailed"))}})},getDocument:function(e){return n.getDocument(e)},isDocConnection:function(e){return n.isDocConnection(e)},addDocumentConnection:function(e,t,o,i){return n.addDocumentConnection(e,t,o,i)},addDocument:function(e,t){return n.addDocument(e,t)},uploadDocument:function(e,i,r){var c,l=this,u=r.shift(),f={},g={};t.notify("startProgress",f),c=function(c){var u=c[0],d={id:u};n.linkWithDocumentID(e,u,{onComplete:function(){n.addDocumentConnection(e,u),l.attachFile(d,r,{silent:!0,onComplete:function(){a(f,o.getNLSValue("Document.UploadDocSucceeded",{document:i.title}))},onFailure:function(){s(f,o.getNLSValue("Document.UploadDocPartialSuccess",{document:i.title}))}}),t.notify("attachDocument",g)},onFailure:function(e){n.deleteDocument(u),s(f,o.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(UWA.result(e,"message"))}))}})},l.attachFile(i,u,{silent:!0,onComplete:c,onFailure:function(e){s(f,o.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(UWA.result(e,"message"))}))}})},attachDocuments:function(e,r){var c={},l={};t.notify("startProgress",c),n.getDocumentInfo(r,{onComplete:function(r){var u,f,g;for(u=0;u<r.data.length;u++)f=r.data[u],g={onComplete:function(){n.addDocument(this),n.addDocumentConnection(e,this.id),a(c,o.getNLSValue("Document.UploadDocSucceeded",{document:this.dataelements.title})),t.notify("attachDocument",l)}.bind(f),onFailure:function(e){s(c,o.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(UWA.result(e,"message"))}))}},"DOCUMENT"!==i.getPPRType(f.type)?t.warn(o.getNLSValue("Document.SelectionNotSupported",{type:f.type})):n.linkWithDocumentID(e,f.id,g)},onFailure:function(e){s(c,o.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(UWA.result(e,"message"))}))}})},fetchDocuments:function(e,o){n.getDocumentID(e,{onComplete:function(i){if(Array.isArray(i)&&i.length>0){const r=new Set;i.forEach(e=>{r.add(e.PID)}),n.getDocumentInfo([...r],{onComplete:function(r){var a,s=[];for(n.getConnectedDocumentPIDs(e).forEach(function(t){const[o,,i]=t.split("|");n.removeDocumentConnection(e,i,o,{silent:!0})}),a=0;a<r.data.length;a++){const e=r.data[a];s.push(n.addDocument(e))}i.forEach(t=>{n.addDocumentConnection(e,t.PID,t.type,{silent:!0})}),t.notify("addDocumentConnections",[[e]]),o(s)},onFailure:function(){o()}})}},onFailure:function(){o()}})},downloadDocument:function(e){var i=n.getDocument(e),r={};t.notify("startProgress",r),n.downloadDocuments(e,{onComplete:function(){a(r,o.getNLSValue("Document.DownloadDocSucceeded",{document:i.get("dataelements").title}))},onFailure:function(e){s(r,o.getNLSValue("Document.DownloadDocFailed",{document:i.get("dataelements").title,message:UWA.Json.encode(UWA.result(e,"message"))}))}})},deleteDocument:function(e,i){var r=n.getDocument(i),c={};t.notify("startProgress",c),n.deleteLink(e,i,{onComplete:function(){n.removeDocumentConnection(e,i),0===n.getDocumentConnectionsByDocID(i).length&&n.removeDocument(i),a(c,o.getNLSValue("Document.DeleteDocLinkSucceeded",{document:r.get("dataelements").title}))},onFailure:function(e){s(c,o.getNLSValue("Document.DeleteDocLinkFailed",{document:r.get("dataelements").title,message:UWA.Json.encode(UWA.result(e,"message"))}))}})},attachFile:function(i,r,c){var l,u,f,g=[],d={};if(c=c||{},r=UWA.is(r,"array")?r:[r],UWA.is(c.silent,"boolean")&&c.silent||t.notify("startProgress",d),!UWA.is(i.id)&&r.length>1)return e.getLogger().debug("if documentID is not provided only one file can be added"),void(UWA.is(c.onFailure)&&c.onFailure());for(l=0;l<r.length;l++)f=r[l],u=new Promise(function(e,t){n.attachFile(this.docInfo,this.fileInfo,{onComplete:function(t){var o;UWA.is(i.id)?(o=n.getDocument(i.id)).addFile(t.data[0].relateddata.files[0]):o=n.addDocument(t.data[0]),e(o.id)},onFailure:function(e){t(e)}})}.bind({docInfo:i,fileInfo:f})),g.push(u);Promise.all(g).then(function(e){UWA.is(c.silent,"boolean")&&c.silent?UWA.is(c.onComplete)&&c.onComplete(e):a(d,o.getNLSValue("Document.AttachFileSuccess"))},function(e){UWA.is(c.silent,"boolean")&&c.silent?UWA.is(c.onFailure)&&c.onFailure(e):s(d,o.getNLSValue("Document.AttachFileFailed")+UWA.Json.encode(UWA.result(e,"error")))})},downloadFile:function(e,i,r){var c={};t.notify("startProgress",c),n.downloadFile(e,i,{onComplete:function(){a(c,o.getNLSValue("Document.DownloadFileSucceeded",{file:r}))},onFailure:function(e){s(c,o.getNLSValue("Document.DownloadFileFailed",{file:r,message:UWA.Json.encode(e)}))}})},modifyFile:function(e,i,r){var c={};t.notify("startProgress",c),n.modifyFile(e,i,{onComplete:function(i){n.getDocument(e.id).modifyFile(i.data[0].relateddata.files[0]),a(c,o.getNLSValue("Document.ModifyFileSucceeded",{file:r})),t.notify("editDocument",{})},onFailure:function(e){s(c,o.getNLSValue("Document.ModifyFileFailed",{file:r,message:UWA.Json.encode(e)}))}})},removeFile:function(e,i){var r={};t.notify("startProgress",r),n.removeFile(e,i,{onComplete:function(){n.getDocument(e).removeFile(i),a(r,o.getNLSValue("Document.RemoveFileSuccess"))},onFailure:function(e){s(r,o.getNLSValue("Document.RemoveFileFailure")+UWA.Json.encode(e))}})},viewFile:function(e,t,i){n.fetchFileURL(e,t,{onComplete:function(e){window.open(e,o.getNLSValue("Document.ViewFile",{title:i}),"fullscreen=no")}})},getFileCommands:function(){return r.isCloud()?{document:{authoring:["Download","Update","Delete"],nonAuthoring:["Download"]},file:{authoring:["DownloadFile","ModifyFile","RemoveFile","ViewFile"],nonAuthoring:["DownloadFile","ViewFile"]}}:{document:{authoring:["Download","Update","Delete","Explore"],nonAuthoring:["Download","Explore"]},file:{authoring:["DownloadFile","ModifyFile","RemoveFile","ViewFile"],nonAuthoring:["DownloadFile","ViewFile"]}}},removeDocumentConnection:function(e,t,o,i){return n.removeDocumentConnection(e,t,o,i)},getConnectedDocumentPIDs:function(e){return n.getConnectedDocumentPIDs(e)}}}}}),define("DS/DELPPWModelBehaviors/ProductFlowLinkBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin","DicoPlugin","WebServicePlugin","ResourcePlugin","AttributePlugin"],creator:function(t,n,o,i,r,a,s){var c,l,u,f,g,d,m=["DELLmiTimeConstraintCnx","DELLmiMaterialPathCnxCust","LinearProductFlowCnx"],p={DELLmiTimeConstraintAlternative:"Alternative",DELLmiTimeConstraintFailed:"Failed",DELLmiTimeConstraintScrapped:"Scrapped"},P=!1,S=["DELLmiTimeConstraintCategoryAbstractCusto.flowType","DELLmiTimeConstraintAlternative.V_ExecutionReturnCode","DELLmiTimeConstraintFailed.V_ExecutionReturnCode","DELLmiTimeConstraintScrapped.V_ExecutionReturnCode","DELLmiTimeConstraintCategoryAbstract.V_ExecutionReturnCode","DELLmiTCOverlapQtyCusto.isOverlapExist","DELLmiTCOverlapQtyCusto.overlapMagnitude"];return d=function(e){var t,n,o=e.get("flowType");return"NULL"!==o&&(t=i.getAttributeInfo("flowType"),(n=s.getAuthorizedValueIndex(t,null,o))&&(o=s.getAuthorizedValueDB(t,n))),o},l=function(t,n){var i,r,a;return a=t[t.length-1],!(!o.getImpacted(a,!1,{relationTypes:m}).some(function(o){return e.equals(o.get("from"),t)&&e.equals(o.get("to"),n)})&&(i=!1,(r=function(n){var a,s,c,l,u=n[n.length-1],f=o.getImpacted(u,!1,{relationTypes:m});for(c=0;c<f.length&&(a=f[c],l=d(a),!0!==i);c++){if("DELLmiTimeConstraintFailed"===l){i=!1;break}if(e.equals(a.get("from"),n)){if(e.equals(a.get("to"),t)){i=!0;break}s=a.get("to"),r(s)}}})(n),!i))},c=function(t,n){var i,r,a,s,c,l,u={},f={},g=!1;if(e.is(t,"array")&&e.is(n,"array")){for(i=t.length-1;i>=0;i--){for(a=t[i],r=o.getInstance(a).get("isAggregatedBy"),s=n.length-1;s>=0;s--)if(c=n[s],e.is(f[c])?l=f[c]:(l=o.getInstance(c).get("isAggregatedBy"),f[c]=l),r===l&&a!==c){g=!0;break}if(g)break}u.fromPath=t.slice(i),u.toPath=n.slice(s)}return u},u=function(t,n){var o,r={Name:n,Type:"String",Protection:2,MultiValuated:"No",HasRangeDefined:"No",DefaultValue:"",MaxLength:256,Magnitude:"",ManipulationUnit:"",MultiLine:"No",UIAccess:"",HasDefault:"Yes"};switch(n){case"flowType":(o=e.clone(r)).NLS=a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory"),o.AuthorizedValues=[{Name:"",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Good")},{Name:"DELLmiTimeConstraintFailed",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Failed")},{Name:"DELLmiTimeConstraintAlternative",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Alternative")},{Name:"DELLmiTimeConstraintScrapped",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Scrapped")}],o.HasRangeDefined="Yes",o.DefaultValue="";break;case"V_ExecutionReturnCode":switch(o=i.getAttributeInfo(n),(o=e.is(o)?e.clone(o):e.clone(r)).FullName=t+"."+n,o.HasRangeDefined="Yes",o.AuthorizedValues=[],t){case"DELLmiTimeConstraintFailed":o.AuthorizedValues=[{Name:"RCFail203",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.203")},{Name:"RCFail204",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.204")}],o.DefaultValue="RCFail203";break;case"DELLmiTimeConstraintAlternative":o.AuthorizedValues=[{Name:"RCAlter201",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.201")},{Name:"RCAlter202",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.202")}],o.DefaultValue="RCAlter201";break;case"DELLmiTimeConstraintScrapped":o.AuthorizedValues=[{Name:"RCScrap205",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.205")},{Name:"RCScrap206",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.206")}];break;case"DELLmiTimeConstraintCategoryAbstract":o.AuthorizedValues=[{Name:"RCAlter201",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.201")},{Name:"RCAlter202",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.202")},{Name:"RCFail203",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.203")},{Name:"RCFail204",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.204")},{Name:"RCScrap205",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.205")},{Name:"RCScrap206",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.206")}],o.DefaultValue="RCScrap205"}break;case"isOverlapExist":(o=e.clone(r)).DefaultValue="false",o.Type="Boolean",o.NLS=a.getNLSValue("DELLmiTimeConstraintCnx.Overlap");break;case"overlapMagnitude":(o=e.clone(r)).NLS=a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude"),o.AuthorizedValues=[{Name:"DELLmiTCOverlapQty_Weight",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Weight")},{Name:"DELLmiTCOverlapQty_Volume",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Volume")},{Name:"DELLmiTCOverlapQty_Length",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Length")},{Name:"DELLmiTCOverlapQty_Area",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Area")},{Name:"DELLmiTCOverlapQty_Each",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Each")}],o.HasRangeDefined="Yes",o.DefaultValue="DELLmiTCOverlapQty_Each"}return o},f=function(){var e={},t={};S.forEach(function(n){var o,i;o=n.split("."),i=u(o[0],o[1]),t[n]=i.NLS,e[n]=i}),a.addNlsJSON(t),s.addAttributeInfo(e),P=!0},g=function(t){var n,o,r,a=t.get("flowType");return e.is(a)&&""!==a&&(p[a]?n=a:(o=i.getAttributeInfo(S[0]),r=s.getAuthorizedValueIndex(o,null,a),e.is(r)&&(n=s.getAuthorizedValueDB(o,r)))),n},{listenTo:function(){},onStart:function(){P||f()},onStop:function(){},canCreateProductFlowLink:function(t,n){var r,s,u,f,g,d,m,p,P=!0,S={};return d=function(){var t=!1,n=f.toString(),o=g.toString();return f.length>0&&g.length>0&&0!==n.indexOf(o)&&0!==o.indexOf(n)&&(r=c(f,g),t=e.is(r)&&Array.isArray(r.fromPath)&&r.fromPath.length>0&&Array.isArray(r.toPath)&&r.toPath.length>0),t},m=function(){var t,n,a=!1;return e.is(r)&&Array.isArray(r.fromPath)&&r.fromPath.length>0&&(n=o.getInstance(r.fromPath[0]),e.is(n)&&(t=o.getReference(n.get("isAggregatedBy")),a=i.isAKindOf(t,"DELLmiHeaderWorkPlanReference"))),a},p=function(){var e;return e=o.getInstance(f[f.length-1]),"Linear"===o.getReference(e.get("isAggregatedBy")).get("V_SequencingMode")},t=t||{},e.is(t.fromSideAbsPath)&&e.is(t.toSideAbsPath)?(f=t.fromSideAbsPath,g=t.toSideAbsPath,s=a.getNLSValue(n),d()?m()?(P=!1,u=a.getNLSValue("ProductFlowLinkBehavior.canCreateProductFlowLinkError.CommonParentIsHeaderWP",{linkType:s})):p()?(P=!1,u=a.getNLSValue("ProductFlowLinkBehavior.canCreateProductFlowLinkError.ParentisInLinearSeqMode",{linkType:s})):l(r.fromPath,r.toPath)&&(P=!1,u=a.getNLSValue("ProductFlowLinkBehavior.canCreateProductFlowLinkError.ExistOrLoop",{linkType:s})):(P=!1,u=a.getNLSValue("ProductFlowLinkBehavior.canCreateProductFlowLinkError.NoCommonParent",{linkType:s}))):(P=!1,u=a.getNLSValue("ProductFlowLinkBehavior.canCreateProductFlowLinkError.InsufficentInfo")),S={canCreateLink:P},P?S.data=e.merge({type:n,fromSideOccPath:e.is(r,"object")?r.fromPath:null,toSideOccPath:e.is(r,"object")?r.toPath:null,displayText:e.is(s)?s:null,buttonIdentifier:e.is(s)?s:null},e.clone(t)):S.errorMessage=u,S},createProductFlowLink:function(t,n,i,r){var a,s,c,l,u=function(){e.is(r,"function")&&r(l)};n=n||{},s=(t=t||{}).fromSideOccPath[t.fromSideOccPath.length-1],c=t.toSideOccPath[t.toSideOccPath.length-1],l={linkType:t.type,target:s,source:c},(a=this.canCreateProductFlowLink(t,t.type)).canCreateLink?o.createConnection({IDFrom:t.fromSideOccPath.toString(),IDTo:t.toSideOccPath.toString(),type:t.type},e.merge({onFailure:u,onTimeout:u,onCancel:u,onComplete:function(){e.is(i,"function")&&i(l)}},n)):(l.errorMessage=a.errorMessage,u())},getProductFlowRelationTypes:function(){return m},getProductFlowRelationTypeByTypes:function(e,t){var n,o=i.getPossibleRelations(e,t,"write");return(n=o.indexOf(m[0]))>-1?o[n]:void 0},getLinkInfo:function(t){var n,o,r,c,l,u,f,d={NLS:null,type:null,subType:null,iconName:null,flowType:null};return n=t.get("type"),r=i.getAttributeInfo("DELLmiTimeConstraintCnx.V_DependencyType"),"TRUE"===t.get("V_MaterialNeed")?(o=n+"_ProductFlow",u=g(t),e.is(u)&&(f=p[u])):(c=t.get("V_DependencyType"),l=s.getAuthorizedValueIndex(r,null,c),o=n+"_"+s.getAuthorizedValueDB(r,l)),d.NLS=a.getNLSValue(o),d.type=n,d.subType=o,d.iconName=o,d.flowType=f,d}}}}}),define("DS/DELPPWModelBehaviors/DataCollectWKIBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DicoPlugin","DatabasePlugin","WebServicePlugin","AttributePlugin","ResourcePlugin"],creator:function(t,n,o,i,r,a,s){var c,l,u=!1,f="PLMSpecifyHowToCollectDataCnx_Custo";return c={attributesToFetch:[{type:"PLMEntity",attributes:["PLM_ExternalID","V_description"]},{type:"BusinessType",attributes:["organization","project","reservedby","originated","modified"]},{type:"PLMSpecifyHowToCollectDataCnx",attributes:["V_DCLabel","V_DCMode","V_DCNbSameMeasurement"]},{type:"DELExtTargetValuesInteger",attributes:["V_MaxValue","V_MinValue","V_PossibleValues"]},{type:"DELExtControlLimitsInteger",attributes:["V_MaxControlValue","V_MinControlValue"]},{type:"DELExtTargetValuesText",attributes:["V_PossibleValues"]}],customDCAttributes:["V_DCRichText","V_DCType","V_DCMagnitude","V_DCUnit","V_MinValue","V_MinValue_Inclusive","V_MinControlValue","V_MinControlValue_Inclusive","V_MaxValue","V_MaxValue_Inclusive","V_MaxControlValue","V_MaxControlValue_Inclusive","V_Value","V_DCTimeStampFormat","V_DCRequirementLink","V_DCFormula","V_DCResourceLink","V_PossibleValues"]},l=function(e){var t,n=f+"."+e;switch(t={Name:e,NLS:s.getNLSValue(n),Type:"String",Protection:2,MultiValuated:"No",HasRangeDefined:"No",DefaultValue:"",MaxLength:256,Magnitude:"",ManipulationUnit:"",MultiLine:"No",UIAccess:"",HasDefault:"Yes"},e){case"V_DCType":t.AuthorizedValues=[{Name:"Real",NLS:s.getNLSValue("DCType.Real")},{Name:"Integer",NLS:s.getNLSValue("DCType.Integer")},{Name:"Text",NLS:s.getNLSValue("DCType.Text")},{Name:"Boolean",NLS:s.getNLSValue("DCType.Boolean")},{Name:"TimeStamp",NLS:s.getNLSValue("DCType.TimeStamp")}],t.HasRangeDefined="Yes",t.DefaultValue="Real";break;case"V_DCUnit":t.HasRangeDefined="Yes",t.AuthorizedValues=[];break;case"V_DCTimeStampFormat":t.AuthorizedValues=[{Name:"hh:mm:ss",NLS:s.getNLSValue("DCRow.TimeStamp.Format.HHMMSS")},{Name:"hh:mm",NLS:s.getNLSValue("DCRow.TimeStamp.Format.HHMM")},{Name:"YYYY:MM:DD",NLS:s.getNLSValue("DCRow.TimeStamp.Format.YYYYMMDD")}],t.HasRangeDefined="Yes",t.DefaultValue="hh:mm:ss";break;case"V_PossibleValues":t.AuthorizedValues=[{Name:"TRUE,FALSE",NLS:s.getNLSValue("DCRow.Boolean.PossibleValues.TrueFalse")},{Name:"YES,NO",NLS:s.getNLSValue("DCRow.Boolean.PossibleValues.YesNo")},{Name:"1,0",NLS:s.getNLSValue("DCRow.Boolean.PossibleValues.OneZero")}],t.DefaultValue="TRUE,FALSE";break;case"V_DCFormula":t.MultiLine="Yes"}return t},{listenTo:function(){return{moveDataCollectRow:this.moveDataCollectRow}},onStart:function(){u=!1},onStop:function(){u=!1},fetchDataCollectAttrInfos:function(t){var o,i,g;g=function(){u=!0,e.is(t,"function")&&t()},u?g():(i=function(e){var t={},n={};c.customDCAttributes.forEach(function(e){var o=f+"."+e,i=l(e);n[o]=i.NLS,t[o]=i}),s.addNlsJSON(n),a.addAttributeInfo(t),e()},o=[new Promise(function(t,o){var i={},l=e.clone(c.attributesToFetch);n.notify("startProgress",i),r.webServiceRequest({url:"dictionary/properties",method:"POST",onComplete:function(e){var o={},r={};e.forEach(function(e){e.info.forEach(function(t){var n=e.type+"."+t.Name;r[n]=t.NLS,o[n]=t})}),s.addNlsJSON(r),a.addAttributeInfo(o),n.notify("stopProgress",i),t()},onFailure:function(){n.notify("stopProgress",i),o()},onTimeout:function(){n.notify("stopProgress",i),o()},data:e.Json.encode(l)})}),new Promise(i)],Promise.all(o).then(g,g))},isDataCollectPlan:function(e){return o.isAKindOf(e,"DELWkiDataCollectPlanReference")},isDataCollectCheckList:function(e){return o.isAKindOf(e,"DELWkiDataCollectChecklistReference")},isDataCollectRow:function(e){return o.isAKindOf(e,"PLMSpecifyHowToCollectDataCnx")},getDataCollectRows:function(t,o){var a,s={};n.notify("startProgress",s),a={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRows?dataCollectPID="+t,method:"GET",context:this,onComplete:function(t){e.is(t)&&e.is(t.rows)&&i.addToCollections({stackedReferences:t.rows,onComplete:function(t){e.is(o)&&e.is(o.onComplete)&&o.onComplete(t.instancesAndReferences),n.notify("stopProgress",s)}})},onFailure:function(){e.is(o)&&e.is(o.onFailure)&&o.onFailure(),n.notify("stopProgress",s)}},r.webServiceRequest(a)},getNodeOptions:function(t){var o,i,r,a,c,l,u,f,g={},d=n.getPreferenceValue("separator"),m=t.toJSON(),p=["V_DCMode","V_DCRichText","V_DCLabel","V_DCNbSameMeasurement","V_DCUnit","V_MinValue","V_MinControlValue","V_MaxValue","V_MaxControlValue","V_DCTimeStampFormat","PLM_ExternalID","V_description","organization","project","reservedby","originated","modified","V_TreeOrder"],P=["V_MinValue_Inclusive","V_MinControlValue_Inclusive","V_MaxValue_Inclusive","V_MaxControlValue_Inclusive"],S={referencePID:t.get("PID"),grid:g};for(i in m)Object.prototype.hasOwnProperty.call(m,i)&&(o=i.contains(".")?i.split(".")[1]:i,p.includes(o)?g[o]="NULL"!==m[i]?m[i]:"":"V_Value"===o?g.V_Value=m[i]:"V_PossibleValues"===o&&e.is(m[i],"array")?g.V_Value=m[i].join(d):"V_DCFormula"===o?(r=m[i],e.is(r)&&(a=r.match("(?<=<FormulaAsDisplayed>)(.*)(?=</FormulaAsDisplayed>)"),Array.isArray(a)&&(g.V_DCFormula=a[0]))):P.includes(o)?"Excluded"===m[i]?g[o]=!1:"Included"===m[i]?g[o]=!0:g[o]="NotSet":"V_DCType"===o?(u="DCType."+m[i],g.V_DCType={iconPath:s.getIconURLFromKey(u),label:s.getNLSValue(u)}):"V_DCMagnitude"===o?(l=m[i],g.V_DCMagnitude={iconPath:s.getIconURLFromKey("DCMagnitude."+l),label:s.getNLSValue(l)}):"V_DCRequirementLink"===o?(c=m[i],g[o]={iconPath:s.getIconURLFromKey("DCLink.Rquirement"),label:c.ReqName+" "+c.ReqRevision}):"V_DCResourceLink"===o&&(g[o]={iconPath:s.getIconURLFromKey(o),label:g[o]}));return e.is(l)&&Object.prototype.hasOwnProperty.call(g,"V_DCUnit")&&(g.V_DCUnit=s.getNLSForUnit(l,g.V_DCUnit)),P.forEach(function(e){Object.prototype.hasOwnProperty.call(g,e)||(f=e.replace("_Inclusive",""),delete g[f])}),S},deleteDataCollectRow:function(t,o,a){var s,c,l={};n.notify("startProgress",l),s={dataCollectPID:t,dataCollectRowPID:o},c={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow",method:"DELETE",context:this,data:e.Json.encode(s),onComplete:function(t){e.is(t)&&e.is(t.deletedObjects)&&(i.removeReference(t.deletedObjects[0]),e.is(a)&&e.is(a.onComplete)&&a.onComplete(t.deletedObjects[0])),n.notify("stopProgress",l)},onFailure:function(){e.is(a)&&e.is(a.onFailure)&&a.onFailure(),n.notify("stopProgress",l)}},r.webServiceRequest(c)},fetchDataCollectRow:function(t,o,a){var c,l={};e.is(t)&&e.is(o)&&(n.notify("startProgress",l),c={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow?dataCollectPID="+t+"&dataCollectRowPID="+o,method:"GET",onComplete:function(t){e.is(t)&&i.addToCollections({stackedReferences:[t],silentMode:!1,onComplete:function(){n.notify("stopProgress",l),e.is(a)&&e.is(a.onComplete)&&a.onComplete()}})},onFailure:function(){n.notify("stopProgress",l),n.warn(s.getNLSValue("DataCollectMgmtDialog.RetrieveDataFailure")),e.is(a)&&e.is(a.onFailure)&&a.onFailure()}},r.webServiceRequest(c))},getObjectAndAttributeInfos:function(e){return a.getObjectAndAttributeInfos(e)},getDimensions:function(){return a.getDimensions()},convertValuesBetweenUnits:function(t){var o={};return n.notify("startProgress",o),new Promise(function(i,a){var c={Dimension:t.dimension,UnitFrom:t.fromUnit,UnitTo:t.toUnit,Value:t.valuesToConvert.join(";")},l=function(){n.notify("stopProgress",o),n.warn(s.getNLSValue("DataCollectMgmtDialog.ConvertUnitFailure")),a()};r.webServiceRequest({url:"dictionary/dimensions/convertValue",method:"POST",onComplete:function(e){n.notify("stopProgress",o),i(e)},onFailure:l,onTimeout:l,data:e.Json.encode(c)})})},updateDataCollectRow:function(t,o,a,c){var l,u,f={};e.is(t)&&e.is(o)&&e.is(a)&&(l={dataCollectPID:t,dataCollectRowPID:o,dataCollectRowAttrs:a},n.notify("startProgress",f),u={data:e.Json.encode(l),url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow",method:"PUT",onComplete:function(t){e.is(t)&&i.addToCollections({stackedReferences:[t],silentMode:!1,onComplete:function(){n.notify("stopProgress",f),n.info(s.getNLSValue("DataCollectMgmtDialog.UpdateSuccess")),e.is(c)&&e.is(c.onComplete)&&c.onComplete()}})},onFailure:function(){n.notify("stopProgress",f),n.warn(s.getNLSValue("DataCollectMgmtDialog.UpdateFailure")),e.is(c)&&e.is(c.onFailure)&&c.onFailure()}},r.webServiceRequest(u))},moveDataCollectRow:function(t,o,a,c){var l,u,f={};e.is(t)&&e.is(o)&&e.is(a)&&(l={dataCollectPID:t,dataCollectRowPID:o,newIndex:a},n.notify("startProgress",f),u={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow/Move",method:"POST",context:this,data:e.Json.encode(l),onComplete:function(t){e.is(t)&&Array.isArray(t.rows)&&i.addToCollections({stackedReferences:t.rows,silentMode:!1,onComplete:function(){n.notify("stopProgress",f),e.is(c)&&e.is(c.onComplete)&&c.onComplete()}})},onFailure:function(){n.notify("stopProgress",f),n.warn(s.getNLSValue("WUXDataCollectRowDragDrop.ReorderFailure")),e.is(c)&&e.is(c.onFailure)&&c.onFailure()}},r.webServiceRequest(u))},createDataCollectRow:function(t,o,a){var c,l,u={};e.is(t)&&e.is(o)&&(c={dataCollectPID:t,dataCollectRowAttrs:o},n.notify("startProgress",u),l={data:e.Json.encode(c),url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow",method:"POST",onComplete:function(t){e.is(t)&&i.addToCollections({stackedReferences:[t],silentMode:!1,onComplete:function(){n.notify("stopProgress",u),n.info(s.getNLSValue("DataCollectMgmtDialog.CreateSuccess")),e.is(a)&&e.is(a.onComplete)&&a.onComplete()}})},onFailure:function(){n.notify("stopProgress",u),n.warn(s.getNLSValue("DataCollectMgmtDialog.CreateFailure")),e.is(a)&&e.is(a.onFailure)&&a.onFailure()}},r.webServiceRequest(l))}}}}}),define("DS/DELPPWModelBehaviors/MfgItemBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["MfgItemPlugin","ResourcePlugin","BIPlugin","DatabasePlugin"],creator:function(t,n,o,i,r,a){return{webservice:function(t,s,c,l){var u,f,g,d,m,p,P,S,h,L,C,I,y,D,v={noTimeout:!0},R={},V={silentMode:!0,updateItem:!0};n.notify("startProgress",v),e.is(c)&&e.is(c.logMessage)&&(f=n.log(c.logMessage)),(s=s||{}).product&&(d=s.product.referencePID,P=s.product.OccPath),s.mfgItem&&(m=s.mfgItem.referencePID,S=s.mfgItem.instancePID),L=function(t){e.is(p)&&n.notify(p,R),e.is(t)?e.is(t.succeeded)&&Object.keys(t.succeeded).length>0&&r.getBICmdState()&&r.computeBI():(n.info(c.logMessage+" "+i.getNLSValue("completed"),f),r.getBICmdState()&&r.computeBI()),n.notify("stopProgress",v)},h=function(t){var o,i,r=[];t.instancesAndReferences.forEach(function(t){o=t.attributesValue,e.is(o.isInstanceOf)&&(i=a.getInstance(o.PID),e.is(i)&&n.notify("addInstance",[i,V]))}),t.connections.forEach(function(e){r.push(a.getConnection(e.PID))}),r.length>0&&n.notify("addConnection",[r])},"Create"===t?(u="POST",p="createMfgItemStructure",g=e.Json.encode({rootProductID:d,productOccPath:Array.isArray(P)?P.join(","):"",rootMfgItemID:m,mfgInstanceID:e.is(S)?S:"",scopeCreation:c.scopeCreation,prefix:c.prefix,computeResultReport:!!e.is(c.computeResultReport)&&c.computeResultReport}),c.onComplete=function(t,o,i){C=a.getReference(t),n.notify("addReference",[C,"",V]),e.is(l)&&l(i),L()}):"Update"===t?(p="updateMfgItemStructure ",u="PUT",D=e.is(s.product.productConfigFilter)?s.product.productConfigFilter:"",y=e.is(s.mfgItem.processConfigFilter)?s.mfgItem.processConfigFilter:"",g=e.Json.encode({mbomUpdateMode:"mbomPull",rootProductID:d,rootMfgItemID:m,backgroundJobflag:c.backgroundJobFlag,scopeCreation:c.scopeCreation,prefix:c.prefix,engConfigFilter:D,mfgConfigFilter:y,updateIntermediateScopedAssemblies:c.updateIntermediateScopedAssemblies,computeResultReport:!0}),c.onComplete=function(t,o,r,s){if(!e.is(t)){const e=r.resultReport,t=Object.values(e);let o=[];for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)"Failed"===t[e][n].Status&&o.push(t[e][n].ErrorMessage);return o.length>0?(n.warn(i.getNLSValue("Info.PartialUpdate.Title"),f),o.forEach(function(e){n.log(e,f)})):n.info(i.getNLSValue("Info.NoUpdate.Title"),f),void n.notify("stopProgress",v)}e.is(o)?(C=a.getReference(o),n.notify("addReference",[C,"",V])):e.is(s)&&s?(I=a.getReference(d),n.notify("addReference",[I,"",V]),h(r)):h(r),L()}):"rerouteScopeLink"!==t&&"rerouteLink"!==t||(u="POST",g=e.Json.encode(c),(c=e.merge(c,{appenedURL:"RerouteMfgItem"})).onComplete=function(t,n,o){var i,r;i=o.succeeded,(r=Object.keys(i)).length>0&&(p="RerouteMfgItem",r.forEach(function(e){var t=i[e];Object.keys(t).forEach(function(e){h(t[e])})})),e.is(l)&&l(o),L(o)}),c.onFailure=function(t){if(e.is(c.logMessage)){let o=c.logMessage+" "+i.getNLSValue("failed");e.is(t)&&(o=o+". "+t.message),n.warn(o,f)}n.notify("stopProgress",v),e.is(l)&&l()},o.webserviceAndProcessing(u,g,c)},getBrokenMfgItemStatus:function(e,t){r.getBrokenMfgItemStatus(e,t)},getPhantomNodeItems:function(){return r.getPhantomNodeItems()},getBIModel:function(e){return r.getBIModel(e)}}}}}),define("DS/DELPPWModelBehaviors/ModelBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","AttributePlugin","WebServicePlugin","DicoPlugin","BIPlugin"],creator:function(t,n,o,i,r,a,s,c){var l,u,f,g,d,m;return g=function(t,o,i,r,a){var s=i||{};!0===(!e.is(s.popupMessage)||s.popupMessage)?n.info(o,r):n.log(o,r),n.notify("stopProgress",t),e.is(s.onComplete,"function")&&s.onComplete.call(null,o,i,a)},d=function(t,o,i,r,a,s){var c=r||{},l=!e.is(c.popupMessage)||c.popupMessage;e.is(i)&&e.is(i.message,"string")&&(o+="\n"+i.message),!0===l?n.warn(o,a):n.log(o,a),n.notify("stopProgress",t),e.is(c.onFailure,"function")&&c.onFailure.call(null,o,s)},l=function(t,r,a,s,c,l){var u,f,m,p,P,S,h=i.getNLSValue("DeleteObject.Success"),L=i.getNLSValue("DeleteObject.Failure"),C=i.getNLSValue("DeleteObject.PatialFailure"),I=[],y=t?"Instance":"Reference",D={};if(l=!!e.is(l)&&l,u=function(e,t){P=i.getNLSValue(y,{objectLabel:e.get(s)},"Delete","Success"),n.log(P,p),e.isInstance()&&(m=o.getReferenceModelFromInstance(e)),t(m)},f=function(t,o,r){P=i.getNLSValue(y,{objectLabel:t.get(s)},"Delete","Failure"),e.is(r)&&e.is(r.message,"string")&&(P+="\n"+r.message),n.log(P,p),o()},e.is(r,"array")&&r.length>0){if(n.notify("startProgress",D),p=n.log(i.getNLSValue("DeleteObject.LogMessage")),S=o[t?"deleteInstance":"deleteReference"],!e.is(S,"function"))return void n.debug("delete function not found on database plugin.");r.forEach(function(o){I.push(new Promise(function(i,r){S(o.id,{deep:!!e.is(c)&&c,onComplete:function(){u(o,i),t&&n.notify("deleteInstance",o.toJSON())},onFailure:function(e,t){f(o,r,t)}})}))}),Promise.allSettled(I).then(function(o){var i=!1,r=0,s=0,c=[];for(r=0;r<o.length;r++)"rejected"!==o[r].state?e.is(o[r].value)&&c.push(o[r].value):s++;0===s?(g(D,h,a,p),i=!0):s===o.length?d(D,L,null,a,p):(d(D,C,null,a,p),i=!0),i&&t&&l&&n.notify("addToAuxiliaryView",[c,{askAddToAuxConfirmation:!l}])})}},m=function(t){var i,r=t.parent,a=t.child,c=n.getBehavior("MfgProcessBehavior");return(i=o.isInstancePossible(r,a))&&s.isAKindOf(a,"DELLmiHeaderOperationReference")&&e.is(c)&&(i=c.isInstPossible(t)),i},u=function(t,r){var a,s,c,l={},u={},f=!1;return r=r||{},e.is(r.securityContextOverride,"string")&&(c=r.securityContextOverride,delete r.securityContextOverride),e.is(r.silent,"boolean")&&(f=r.silent,delete r.silent),e.is(t)?e.is(t.V_Type)&&e.is(t.type)?(a=n.log(i.getNLSValue("ModelBehavior.CreateReference.LogMessage",{title:t.V_Name,type:t.type})),n.notify("startProgress",l),s=o.createReference(t,{onComplete:function(t){var o={transactionUUID:e.is(r.transactionUUID,"string")&&r.transactionUUID.length>0?r.transactionUUID:null,referenceAttrs:t.toJSON(),instanceAttrs:null};r.newRef=t,g(l,i.getNLSValue("ModelBehavior.CreateReference.Success",{name:t.get("PLM_ExternalID")}),r,a,o),n.notify("createReference",u)},onFailure:function(t,n){var o={transactionUUID:e.is(r.transactionUUID,"string")&&r.transactionUUID.length>0?r.transactionUUID:null,referenceAttrs:null,instanceAttrs:null};d(l,i.getNLSValue("ModelBehavior.CreateReference.Failure"),n,r,a,o)},securityContextOverride:c,silent:f})):n.debug("Type is required to create reference",s):n.debug("data is empty to addReference"),s},f=function(t,r){var a,s,c={},l={},u=!0;r=r||{},e.is(r.securityContextOverride,"string")&&(s=r.securityContextOverride,delete r.securityContextOverride),e.is(t)?e.is(t.isAggregatedBy)?(e.is(t.isInstanceOf)&&(l={parent:o.getReference(t.isAggregatedBy),child:o.getReference(t.isInstanceOf)},u=m(l)),u?(n.notify("startProgress",c),a=n.log(i.getNLSValue("ModelBehavior.CreateInstance.LogMessage")),o.createInstance(t,{onComplete:function(t){var s=o.getReferenceModelFromInstance(t),l={transactionUUID:e.is(r.transactionUUID,"string")&&r.transactionUUID.length>0?r.transactionUUID:null,referenceAttrs:e.is(s)?s.toJSON():null,instanceAttrs:e.is(t)?t.toJSON():null};r.newInst=t,g(c,i.getNLSValue("ModelBehavior.CreateInstance.Success",{name:t.get("PLM_ExternalID")}),r,a,l),n.notify("createInstance",t.toJSON())},onFailure:function(t,n){var o={transactionUUID:e.is(r.transactionUUID,"string")&&r.transactionUUID.length>0?r.transactionUUID:null,referenceAttrs:null,instanceAttrs:null};d(c,i.getNLSValue("ModelBehavior.CreateInstance.Failure"),n,r,a,o)},securityContextOverride:s})):n.debug("Instance object cannot be created between two selected Types")):n.debug("isAggregatedBy required to create instance"):n.debug("data is empty to createInstance")},{onStart:function(){},onStop:function(){},moveInstance:function(t){var r,s,l,u=t||{},f=null,m=null,p={},P=widget.getBool("oneDelmiaAggregationMode"),S=i.getNLSValue("ModelBehavior.ReparentInstances"),h=i.getNLSValue("ModelBehavior.ReparentInstances.Success"),L=i.getNLSValue("ModelBehavior.ReparentInstances.Failure");r=function(t){var i,r={formerParentsPIDArray:f.formerInstancesParentPIDs,movedInstPIDArray:f.instancesPIDsToReparent,newParentPID:f.newParentPID,newInstPIDArray:[]},a=[],s={stackedObjects:{stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},silentOpt:!0,onComplete:function(t){var i,s=n.getPreferenceValue("refreshBIOnAuthoring");for(i of(s=!!e.is(s,"boolean")&&s,r.newInstPIDArray=t.instancePIDs.slice(),r.newInstPIDArray))o.manageLinearProductFlowsOnCreateInstancePID(i);n.notify("reparentInstances",r),a.length>0&&n.notify("removeInstance",[a]),s&&c.getBICmdState()&&c.computeBI(),g(p,h,u,m),n.notify("reparentEnd",f.newParentPID)}};for(i of f.instancesPIDsToReparent)o.manageLinearProductFlowsOnDeleteInstancePID(i);e.is(t.deletedObjects)&&t.deletedObjects.forEach(function(t){var n=o.getInstance(t);e.is(n)&&a.push(n)}),o.parseServerObjects(t,s)},s=function(e,t){u.popupMessage=!0,n.notify("reparentEnd",f.newParentPID),d(p,L,t,u,m)},m=n.log(S),n.notify("startProgress",p),f={oneDelmiaAggregationMode:P,instancesPIDsToReparent:e.is(u.instancesPIDsToReparent)?u.instancesPIDsToReparent:[],formerInstancesParentPIDs:e.is(u.formerInstancesParentPIDs)?u.formerInstancesParentPIDs:[],newParentPID:e.is(u.newParentPID)?u.newParentPID:"",newParentInstancesOrder:e.is(u.newParentInstancesOrder)?u.newParentInstancesOrder:[]},l={url:"dsmfg/private/V0/invoke/reparent",method:"POST",headers:a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),onComplete:r,onFailure:s,data:e.Json.encode(f)},n.notify("reparentBegin",f.newParentPID),n.debug("Reparent instance ("+f.instancesPIDsToReparent.reduce(function(e,t,n){return e+(0===n?"":", ")+t+"#"+o.getInstance(t).get("PLM_ExternalID")},"")+"), formerly under reference ("+f.formerInstancesParentPIDs.reduce(function(e,t,n){return e+(0===n?"":", ")+t+"#"+o.getReference(t).get("V_Name")},"")+"), under new reference ("+f.newParentPID+"#"+o.getReference(f.newParentPID).get("V_Name")+")"),a.webServiceRequest(l)},moveMultipleInstances:function(t,o,r){var a=this;return new Promise(function(n,o){var i=e.merge({onComplete:n,onFailure:o,popupMessage:!1},t);a.moveInstance(i)}).then(function(){var e=i.getNLSValue("ModelBehavior.MoveInstances.Success",{instanceLabel:r,newParentLabel:o});return n.info(e),Promise.resolve(e)})},createRefOrInst:function(t,o,i){var r,a={};if(i=i||{},e.is(t)){for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r]);e.is(o,"string")?(a.isAggregatedBy=o,s.isAKindOf(a.type,"DELLmiHeaderOperationReference")&&(a.isAutoCreateScopeOnHOP=s.isAutoCreateScopeOnHOP()),f(a,i)):u(a,i)}else n.debug("createRefOrInst: No data to insert")},createMultipleInstances:function(e,t,r){var a;return a=e.map(function(e){return function(e){return new Promise(function(t,i){const r=o.getReference(e.referencePID);f({isAggregatedBy:e.targetReferencePID,isInstanceOf:e.referencePID,skipScopeCheck:n.getPreferenceValue("skipVaidationIfScopedCheck")&&s.isAKindOf(r,"Provide")},{onComplete:t,onFailure:i,popupMessage:!1})})}(e)}),Promise.all(a).then(function(){var e=i.getNLSValue("ModelBehavior.CreateInstances.Success",{instanciatedReference:r,referenceName:t});return n.info(e),Promise.resolve(e)}).catch(function(e){return n.warn(e),Promise.reject(e)})},insertInstance:function(e,t){var r,a,c,l=n.getBehavior("MfgProcessBehavior");c={relationTypes:[n.getBehavior("ImplementBehavior").getPartialScopeLinkType()],onComplete:function(){var r=e.isAggregatedBy,s={parent:o.getReference(r),child:a,targetAbsPath:t};l.isInstPossible(s)?f(e):n.warn(i.getNLSValue("ModelBehavior.InsertInstance.HOP.Error",{refName:e.V_Name}))}},s.isAKindOf(e.type,"DELLmiHeaderOperationReference")?(r=e.isInstanceOf,a=o.getReference(r),o.getConnectionsByModel(a,null,c)):f(e)},deleteReference:function(t,r){var a,s,c,u=n.getBehavior("UXFactoryBehavior"),f=i.getNLSValue("Delete.Confirmation.Title");if(e.is(u)){if(r=r||{},e.is(t,"array")&&t.length>0){for(s=i.getNLSValue("DeleteReference.Confirmation.Message"),a=0;a<t.length;a++)if(o.getInstancesFromCollection(t[a].id).length>0){c=i.getNLSValue("Confirmation.DeleteWholeStructure");break}e.is(c)?u.showConfirmation(f,s,{attributes:["V_Name"],models:t},function(n,o,i){e.is(n)&&n&&l(!1,t,r,"V_Name",i)},{check:c}):u.showConfirmation(f,s,{attributes:["V_Name"],models:t},function(n){e.is(n)&&n&&l(!1,t,r,"V_Name",!1)})}}else n.debug("uxFactoryBehavior is not available.")},deleteInstance:function(t,o){var r,a,s,c=n.getBehavior("UXFactoryBehavior"),u=i.getNLSValue("Confirmation.addRefToAuxViewPostDelete");e.is(c)?(o=o||{},r=!e.is(o.askDeleteConfirmation)||o.askDeleteConfirmation,e.is(t,"array")&&t.length>0&&(r?(e.is(o.isDetachInstance)&&o.isDetachInstance?(s=i.getNLSValue("Detach.Confirmation.Title"),a=i.getNLSValue("DetachInstance.Confirmation.Message")):(s=i.getNLSValue("Delete.Confirmation.Title"),a=i.getNLSValue("DeleteInstance.Confirmation.Message")),c.showConfirmation(s,a,{attributes:["PLM_ExternalID"],models:t},function(n,i,r){e.is(n)&&n&&l(!0,t,o,"PLM_ExternalID",!1,r)},{check:u})):l(!0,t,o,"PLM_ExternalID"))):n.debug("uxFactoryBehavior is not available.")},fetchRoot:function(e,t){return o.fetchRoot(e,t)},fetchInstancesAndTheirReferences:function(e,t){return o.fetchInstancesAndTheirReferences(e,t)},isNavigateOnDemand:function(){return o.isNavigateOnDemand()},fetchInstance:function(e,t){return o.fetchInstance(e,t)},getReference:function(e){return o.getReference(e)},removeReference:function(e,t){o.removeReference(e,t)},getInstance:function(e){return o.getInstance(e)},getReferenceModelFromInstance:function(e){return o.getReferenceModelFromInstance(e)},getAggregatingReferenceModelFromInstance:function(e){return o.getAggregatingReferenceModelFromInstance(e)},getReferenceIdFromInstance:function(e){return o.getReferenceIdFromInstance(e)},getReferenceId:function(e){var t=e;return this.isInstance(e)&&(t=o.getReferenceIdFromInstance(e)),t},getInstancesFromCollection:function(e){return o.getInstancesFromCollection(e)},needToQueryForConnections:function(e){return o.needToQueryForConnections(e)},needToQueryForChildren:function(e){return o.needToQueryForChildren(e)},getDescendantsFromServer:function(e,t,n){o.getDescendantsFromServer(e,t,n)},getConnectionsFromServer:function(e,t,n){o.getConnectionsFromServer(e,t,n)},getAllChildrenFromCollection:function(e){return o.getAllChildrenFromCollection(e)},getImpactedConnections:function(t,n,i){var r,a=[];return e.is(t,"array")&&t.forEach(function(t){r=o.getImpacted(t,n,i),e.is(r)&&e.is(r,"array")&&r.length>0&&(a=a.concat(r))}),a},getReferenceModel:function(e){return o.getReferenceModel(e)},isReference:function(t){return e.is(this.getReference(t))},isInstance:function(t){return e.is(this.getInstance(t))},updateModelAttribute:function(t,a,s,c){var l,u,f,m,p,P,S,h,L,C,I,y,D,v,R,V,N,A,b,k,T,F,E,O,M=this,w=[],B=function(t){var n=t,o=function(t){return e.is(t,"string")?r.getFormattedDate(t):r.getFormattedDate(1e3*t)};return r.isDate(D)?n=Array.isArray(t)?t.map(function(e){return o(e)}):o(t):C&&!S&&(n=r.getValueAsString(t,r.getType(D))),n};e.is(a,"array")&&(a=a[0]),a=a||{},c=c||{},e.is(a.instOrRef)&&e.is(a.dataIndex)&&e.is(a.attributeInfo)&&e.is(a.objectToBeModified)&&e.is(a.attributeName)?(R=a.attributeName,D=a.attributeInfo,v=e.is(a.attributeDef)?a.attributeDef:{},p=r.getNLS(D),V=a.objectToBeModified,y=a.dataIndex,P="instance"===a.instOrRef,S=r.hasRangeDefined(D,v),h=r.isString(D),L=r.isInteger(D),C=r.isDouble(D),I=r.isMultiValuated(D),m=V.get(y),e.is(m)&&"NULL"!==m||(m=""),S&&!I&&(h||L||C)&&(m=r.getAuthorizedValue(D,v,m)),A=function(e,t,o,r){var a,s=B(o),c=n.getBehavior("UXFactoryBehavior"),l=c.getComponent("Button"),u=c.createElement("div",{class:"confirmation-dialog-content-container",html:"<p>"+i.getNLSValue("UpdateAttributeUI.Text",{prevValue:s})+"</p>"});(a=c.create("Dialog",{title:i.getNLSValue("UpdateAttributeUI.Header",{attributeName:p}),domId:"EditAttributeUI-Dialog",content:u,resizableFlag:!0,modalFlag:!0,buttons:{No:new l({onClick:function(){o===t&&N(e,r,o),a.close()}}),Yes:new l({disabled:!1,onClick:function(){N(e,t,o),a.close()}})}})).close=function(){this.destroy(),a=null}},b=function(t){var o=!1,a=s;return e.is(t)&&(f=t.get(y),S&&!I&&(h||L)&&(f=r.getAuthorizedValue(D,v,f)),r.isDate(D)&&!r.isMultiValuated(D)?(f=(f=new Date(f).getTime()/1e3).toString(),a=s=a.toString()):C&&r.hasMagnitude(D)&&!I&&(f=parseFloat(f),a=parseFloat(a),s=a.toString()),f!==a&&(r.doesAttributeExist(t,y)||r.isAttrApplicableForType(t,y)?o=!0:n.warn(i.getNLSValue("TableView.AvailabilityFailure",{key:p})))),o},e.is(t,"array")?t.forEach(function(e){l=P?M.getInstance(e):M.getReference(e),b(l)&&w.push(l.get("PID"))}):b(V)&&w.push(V.id),0!==w.length&&(1===w.length?(N=function(t,a,s){var l,f={previous:{}},m={},S={};f[R]=a,l=P?M.getInstance(t):M.getReference(t),r.doesAttributeExist(l,y)&&(f.previous[R]=s),u={data:f,onFailure:function(e,t){d(S,i.getNLSValue("TableView.SingleUpdateFailure",{key:p,value:B(a)}),t,c)},onComplete:function(o,r){var l=o.get(y);e.is(r)&&e.is(r.isInSync)&&!r.isInSync?(d(S,i.getNLSValue("TableView.UpdateWarning",{key:p})),A(t,a,l,s)):e.is(o._changed.modified)?(g(S,i.getNLSValue("TableView.SingleUpdateSuccess",{key:p,value:B(l)}),c),e.is(c.onSuccess)&&c.onSuccess(),n.notify("editAttribute",m)):d(S,i.getNLSValue("TableView.SingleUpdateFailure",{key:p,value:B(a)}),r,c)},logMessage:i.getNLSValue("TableView.SingleUpdateLogMessage")},n.notify("startProgress",S),!0===P?o.updateInstance(t,u):o.updateReference(t,u)})(w[0],s,m):w.length>1&&(T=s,E={},O={},(F={keyValues:{},pids:k=w}).keyValues[R]=T,u={data:F,onFailure:function(e){d(O,i.getNLSValue("TableView.MassUpdateFailure",{key:p,value:B(T)}),e,c)},onComplete:function(e){e.length!==k.length?d(O,i.getNLSValue("TableView.UpdateWarning",{key:p})):(g(O,i.getNLSValue("TableView.MassUpdateSuccess",{key:p,value:B(T)}),c),n.notify("editAttribute",E))},logMessage:i.getNLSValue("TableView.MassUpdateLogMessage")},n.notify("startProgress",O),!0===P?o.updateInstances(y,u):o.updateReferences(y,u)))):n.debug("Required attribute information is missing to update the model attribute")},getValidChildTypes:function(e){return o.getValidChildTypes(e)},isInstancePossible:function(e){return m(e)},isMovePossible:function(t,n){var i,r=!1;return o.isWorkInstruction(n)?r=!1:n&&n.get("isAggregatedBy")!==t.id&&(i=this.getReferenceModelFromInstance(n).get("PPRTYPE"),e.is(i)&&(r=s.isReparentPossible(i))),r},isAKindOf:function(e,t){return s.isAKindOf(e,t)},getTypeHierarchy:function(e){return s.getTypeHierarchy(e)},getPPRType:function(e){return o.getPPRType(e)},getPPRTypeFromType:function(e){return s.getPPRType(e)},getParentTypes:function(e){return s.getParentTypes(e)},getReadOnlyTypes:function(){return s.getReadOnlyTypes()},isReferencesHasReadOnlyType:function(e){return s.isReferencesHasReadOnlyType(e)},getMajorRevisions:function(t,r,s){var c,l,u,f=o.getReferenceModel(t).get("V_Name");l=function(e,t,o){n.debug("jsonData: "+e+" error:"+t+" options: "+o),c=i.getNLSValue("Error.GetMajorRevisionFailure.Title",{objectName:f}),s(c)},u=function(e){r(e)},a.webServiceRequest({url:"dsmfg/private/V0/invoke/getMajorRevisions",method:"POST",data:e.Json.encode({pid:t}),onFailure:l,onTimeout:l,onCancel:l,onComplete:u})},isReadOnly:function(t,o,r,s){var c,l,u;l=function(e,t,o){n.debug("jsonData: "+e+" error:"+t+" options: "+o),s()},u=function(t){e.is(t.isReadOnly)&&t.isReadOnly&&(c=i.getNLSValue("Error.ObjNotInReadWrite.Title",{objectName:o})),r(c)},a.webServiceRequest({url:"dsmfg/private/V0/invoke/isReadOnly",method:"GET",data:{pid:t},onFailure:l,onTimeout:l,onCancel:l,onComplete:u})},isLatestRevision:function(t,o,r,s){var c,l,u;l=function(e,t,o){n.debug("jsonData: "+e+" error:"+t+" options: "+o),s()},u=function(t){e.is(t.isLatestRevision)&&!t.isLatestRevision&&(c=i.getNLSValue("Error.ObjNotLatestRevision.Title",{objectName:o})),r(c)},a.webServiceRequest({url:"dsmfg/private/V0/invoke/isLatestRevision",method:"GET",data:{pid:t},onFailure:l,onTimeout:l,onCancel:l,onComplete:u})},getWhereUsedReferences:function(e,t){o.getWhereUsedReferences(e,t)},getTenant:function(){return a.getTenant()},getSecurityContext:function(){return a.getSecurityContext()},get3DSpaceUrl:function(){return a.get3DSpaceUrl()},isEntityInstance:function(e){return s.isEntityInstance(e)},getAcceptedBaseTypesForCreation:function(){var t=[],n=s.getAcceptedBaseTypesForActions();return e.is(n)&&e.is(n.CREATION,"array")&&(t=n.CREATION),t},getFilteredInstancesFromCollection:function(e,t){return o.getFilteredInstancesFromCollection(e,t)},transformToRIROccurrencePath:function(e){return o.transformToRIROccurrencePath(e)},transformRIRToAbsolutePath:function(e){return o.transformRIRToAbsolutePath(e)}}}}}),define("DS/DELPPWModelBehaviors/DuplicateAdvBehavior/DuplicateAdvBehavior",["UWA/Core","DS/DELPPWModelBehaviors/DuplicateAdvBehavior/DuplicateAdvUI"],function(e,t){"use strict";return{plugins:["WebServicePlugin","UXComponentsPlugin","ResourcePlugin","DatabasePlugin"],creator:function(n,o,i,r,a,s){var c,l;return l=function(t,n){var r,c,l,u={},f={};o.notify("startProgress",u),r=o.log(a.getNLSValue("DuplicateAdvCmd.LogMessage")),t.instAndRefIDs=[],n.forEach(function(e){var n,o;n=s.getReferenceModel(e.id),o=s.getAllChildrenFromCollection(n.get("PID")),t.instAndRefIDs=t.instAndRefIDs.concat(o.referencesPID),t.instAndRefIDs=t.instAndRefIDs.concat(o.instancesPID)}),c=function(t){var n=[],i=[],c=s.getConnectionParser(),g={silentMode:!0,stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:function(){var t=o.getBehavior("WUXNodeModelBehavior");e.is(t)&&(g.stackedInstances.forEach(function(e){s.manageLinearProductFlowsOnCreateInstance(s.getInstance(e.attributesValue.PID))}),n.forEach(function(e){-1===i.indexOf(e)&&t.addNode(s.getReferenceModel(e),{withLinksResolved:!1})})),o.notify("stopProgress",u),o.info(a.getNLSValue("DuplicateAdvCmd.Success"),r),o.notify("DuplicateAdv",f)}};e.is(t)&&e.is(t.instancesAndReferences)&&e.is(t.connections)?(t.instancesAndReferences.forEach(function(e){var t=e.attributesValue;Object.prototype.hasOwnProperty.call(t,"isInstanceOf")?(e.queriedForConnections=!0,g.stackedInstances.push(e),i.push(t.isInstanceOf)):(e.queriedForChildren=!0,e.queriedForConnections=!0,g.stackedReferences.push(e),n.push(t.PID))}),t.connections.forEach(function(e){c.parse(e,g)}),s.addToCollections(g)):l()},l=function(){o.notify("stopProgress",u),o.warn(a.getNLSValue("DuplicateAdvCmd.Failure"),r)},i.webServiceRequest({url:"dsmfg/private/V0/invoke/advancedClone",method:"POST",data:e.Json.encode(t),onComplete:c,onFailure:l,onTimeout:l,onCancel:l})},{listenTo:function(){return{DuplicateAdvCmd:this.executeDuplicateAdvCmd}},onStart:function(){var t=n.getConfig();if(!(e.is(t)&&e.is(t.resource)&&e.is(t.resource.duplicateAdvancedPreferencesXML)))throw new Error(o.getId()+": DuplicateAdvBehavior initialization failed");c=t.resource.duplicateAdvancedPreferencesXML},onStop:function(){},executeDuplicateAdvCmd:function(){var s,u,f,g,d,m,p,P,S=a.getNLSValue(o.getId()),h=o.getBehavior("WUXNodeModelBehavior");if(e.is(h))if((P=h.getSelectedNodesInfo()).length>0)if(f=i.getXMLValues(c),e.is(f)&&e.is(f.Config)){for(u in m=f.convert("Config.Preferences.DuplicateAdvanced.LinkOption","name"),d=f.Config.Preferences.DuplicateAdvanced.PrefixOption,g=f.Config.Preferences.DuplicateAdvanced.showOptionPanel,(s={}).Prefix=d.defaultValue,m)Object.prototype.hasOwnProperty.call(m,u)&&(s[u]=m[u].defaultValue);g?(p=r.getComponent("WUXFrameWindowsManager").getFrameWindow(n.getConfig().appContext),new t(p,r,a).showUI({prefixOption:d,linkOptions:m},function(t){l(e.merge(t,s),P)})):l(s,P)}else o.warn(a.getNLSValue("DuplicateAdvCmd.PreferencesXMLNotConfigured"));else console.log(a.getNLSValue("DuplicateAdvCmd.NoSelection",{view:S}));else o.debug("WUXNodeModelBehavior is not available so cannot execute DuplicateAdvCmd")}}}}}),define("DS/DELPPWModelBehaviors/ImplementBehavior",["UWA/Core","UWA/Class/Promise","DS/DELPPWModelBehaviors/SpecifyScopeIntentDialog"],function(e,t,n){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","ImplementPlugin","MfgItemPlugin","DicoPlugin","WebServicePlugin"],creator:function(o,i,r,a,s,c,l,u){var f,g,d,m,p,P,S,h,L,C,I,y,D,v=function(t,n,o,r){var s=e.is(t)?a.getNLSValue(t):n;i.info(s,o),r&&r(s)},R=function(t,n,o,r,s){var c=e.is(t)?a.getNLSValue(t):o;e.is(n,"string")&&n.length>0&&(c=n),i.warn(c,r),s&&s(c)};return f=function(t,n,s,l,u){var f,g,d={},m={};f=e.Json.encode({selectedHigherProductID:t,selectedMfgItemID:n,rootMfgItemID:n,reviseMfgItem:s}),(l=e.merge(l,{appenedURL:"ReconnectScopeLink"})).onComplete=function(e,t,n){var s,c;n.connections.length>0&&(s=r.getConnection(n.connections[0].PID),o.getMediator().notify("addConnection",[s])),n.instancesAndReferences.length>0&&(c=n.instancesAndReferences[0].attributesValue.PID,i.notify("addProductOrPart",{pid:c})),i.info(l.logMessage+" "+a.getNLSValue("completed"),g),i.notify("stopProgress",d),i.notify("reconnectScope",m),u(e,t)},l.onFailure=function(e,t){i.warn(l.logMessage+" "+a.getNLSValue("failed"),g),i.notify("stopProgress",d),u(e,t)},l.onTimeout=function(e,t){i.warn(l.logMessage+" "+a.getNLSValue("timeout"),g),i.notify("stopProgress",d),u(e,t)},i.notify("startProgress",d),e.is(l)&&e.is(l.logMessage)&&(g=i.log(l.logMessage)),c.webserviceAndProcessing("POST",f,l)},g=function(e,t){var n={fromSideRefPID:e,toSideRefPID:t};return s.canCreateScopeLink(n)},d=function(t,n,o,c,l,u){var f,d,m,p,P={},S=a.getNLSValue("ImplementBehavior.CreateScope.LogMessage"),L=a.getNLSValue("ImplementBehavior.CreateScope.Success"),C=a.getNLSValue("ImplementBehavior.CreateScope.Failed"),I=i.log(S),y=function(e,t){R(e,t,C,I,u)};return!1===g(t,n)?(f=r.getReferenceModel(t),void y(null,m=a.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:f.get("V_Name")}))):(e.is(o,"array")&&o.length>0||e.is(c,"array")&&c.length>0)&&(p=s.hasCrossScope(t,n,o,c),e.is(p)&&p.hasCrossScope)?(p.isParentCrossScope?m=a.getNLSValue("ImplementBehavior.Validation.ParentCrossScopeExists",{implementingRef:p.implementingName,implementedRef:p.implementedName}):p.isChildCrossScope&&(m=a.getNLSValue("ImplementBehavior.Validation.ChildCrossScopeExists",{implementingRef:p.implementingName,implementedRef:p.implementedName})),void y(null,m)):void((d=h(o)).hasImplementLink?y(null,m=a.getNLSValue("ImplementBehavior.Validation.ImplLinkExists",{obj1:d.implementingName,obj2:d.implementedName})):s.createScopeLink(t,n,{onComplete:function(e){v(e,L,I,l),i.notify("createLink",P)},onFailure:y}))},P=function(t,n,o,c){var u,f,g,d,m,p,P,S,L=[],C=a.getNLSValue("ImplementBehavior.CreateScope.LogMessage"),I=a.getNLSValue("ImplementBehavior.CreateScope.Success"),y=a.getNLSValue("ImplementBehavior.CreateScope.Failed"),V=i.log(C),N=function(e,t){v(e,I,V,o),t.connections.forEach(function(e){L.push(e.toJSON())}),i.notify("createImplementLink",L)},A=function(e,t){R(e,t,y,V,c)};if(e.is(t,"array")&&t.length>0&&e.is(n,"array")&&n.length>0){if(f=t[t.length-1],u=r.getReferenceIdFromInstance(f),d=r.getReferenceIdFromInstance(n[n.length-1]),g=r.getReferenceModel(u),!0===s.isScoped(u))return void A(null,P=a.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:g.get("V_Name")}));if(!0===s.isPartialScoped(u))return void A(null,P=a.getNLSValue("ImplementBehavior.Validation.PartialScopeLinkExists",{objectName:g.get("V_Name")}));if(S=s.hasCrossScope(u,d,t,n),e.is(S)&&S.hasCrossScope)S.isParentCrossScope?P=a.getNLSValue("ImplementBehavior.Validation.ParentCrossScopeExists",{implementingRef:S.implementingName,implementedRef:S.implementedName}):S.isChildCrossScope&&(P=a.getNLSValue("ImplementBehavior.Validation.ChildCrossScopeExists",{implementingRef:S.implementingName,implementedRef:S.implementedName})),A(null,P);else if(s.validateIfScoped(t,n))"ProcessImplementLinkOcc"===s.getImplementLinkType()?s.createScopeLink(u,d,{onComplete:N,onFailure:A}):(p=h(t,n)).hasImplementLink?p.withSameProduct?s.createScopeLink(u,d,{onComplete:N,onFailure:A}):A(null,P=a.getNLSValue("ImplementBehavior.Validation.ImplLinkExists",{obj1:p.implementingName,obj2:p.implementedName})):(m=D(t,n),s.createScopeAndImplementLink(u,f,d,m,{onComplete:N,onFailure:A}));else{if(i.getPreferenceValue("skipVaidationIfScopedCheck")&&l.isAKindOf(g,"Provide"))return void s.createScopeLink(u,d,{onComplete:N,onFailure:A});A(null,P=a.getNLSValue("ImplementBehavior.Validation.ScopeNotValid"))}}else i.debug("Input parameters are invalid."),A()},h=function(t,n){var o,i,a,c,l,u,f=!1,g=!1,d=null,m=null;return o=e.is(t,"array")&&t.length>0?s.getImplLinksOfImplementing(t):null,e.is(o,"array")&&o.length>0&&(f=!0,e.is(n)&&(g=o.some(function(t){return e.equals(t.get("to"),n)})),c=(u=o[0]).getAttribute("from"),l=r.getReferenceModel(c),e.is(l)&&(m=l.get("V_Name")),i=u.getAttribute("to"),a=r.getReferenceModel(i),e.is(a)&&(d=a.get("V_Name"))),{hasImplementLink:f,withSameProduct:g,implementingName:m,implementedName:d}},p=function(e,t,n,o,r,c){var l=a.getNLSValue("ImplementBehavior.Consumption.LogMessage"),u=a.getNLSValue("ImplementBehavior.Consumption.Success"),f=a.getNLSValue("ImplementBehavior.Consumption.Failed"),g=i.log(l);s.createScopeAndImplementLink(e,t,n,o,{onComplete:function(){v(null,u,g,r)},onFailure:function(e,t){R(null,t,f,g,c)}})},m=function(t,n,o,r,c,l){var u=a.getNLSValue("ImplementBehavior.Consumption.LogMessage"),f=a.getNLSValue("ImplementBehavior.Consumption.Success"),g=a.getNLSValue("ImplementBehavior.Consumption.Failed"),d=i.log(u),m={instancesAndReferences:[],connections:[]};s.consumeImplementedItems(t,n,o,r,{computeResultReport:!0,onComplete:function(t,n,o){var r;e.is(n)?(v(t,f,d,c),n.connections.forEach(function(e){m.connections.push(e.toJSON())}),n.instancesAndReferences.forEach(function(e){m.instancesAndReferences.push(e.toJSON())}),i.notify("createStructure",m)):R(t,null,g,d,l),e.is(o)&&e.is(o.resultReport)?(r=i.getBehavior("UXFactoryBehavior"),e.is(r)?r.create("MfgItemCreateReportUI",{title:a.getNLSValue("MfgItemConsumeReportUI.Dialog.Title"),report:o.resultReport,mode:"erroronly_report"}):i.debug("Result report is avialable in response, but uxFactoryBehavior is not avialable")):i.debug("Result report is not avialable in response")},onFailure:function(e,t){R(e,t,g,d,l)}})},S=function(n,o,i,a){var c,l,u;return e.is(n,"array")&&n.length>0&&s.isUnderScope(n)&&e.is(i,"array")&&i.length>0?(l=n,u=i,c=new t(function(e,t){P(l,u,e,t)})):c=function(e,n,o,i){return new t(function(t,a){var s=r.isReference(e)?e:r.getReferenceIdFromInstance(e),c=r.isReference(n)?n:r.getReferenceIdFromInstance(n);d(s,c,o,i,t,a)})}(o,a,n,i),c},I=function(n,o,i){var r,a,s,c;return e.is(n,"array")&&n.length>0&&(a=n,s=o,c=i,r=new t(function(e,t){y(a,s,c,e,t)})),r},y=function(t,n,o,c,l){var u,f,g,d,m,p,P,S,h=null,C=[],I=a.getNLSValue("ImplementBehavior.CreateScope.LogMessage"),y=a.getNLSValue("ImplementBehavior.CreateScope.Success"),V=a.getNLSValue("ImplementBehavior.CreateScope.Failed"),N=i.log(I),A=function(e,t){R(e,t,V,N,l)},b=i.getBehavior("UXFactoryBehavior"),k="CREATE_PARTIALSCOPE"===o,T="STRETCH_PARTIALSCOPE"===o,F="DELETE_PARTIALSCOPE"===o,E="SWITCH_TO_FULLSCOPE"===o;if(m={onComplete:function(e,t){v(e,y,N,c),t.connections.forEach(function(e){C.push(e.toJSON())}),i.notify("createImplementLink",C)},onFailure:A,cmdAction:o},e.is(t,"array")&&t.length>0){if(f=t[t.length-1],u=r.getReferenceIdFromInstance(f),g=r.getReferenceModel(u),!0===s.isScoped(u))return void A(null,a.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:g.get("V_Name")}));if(k&&!0===s.isPartialScoped(u))return void A(null,a.getNLSValue("ImplementBehavior.Validation.PartialScopeLinkExists",{objectName:g.get("V_Name")}));if(T&&!1===s.isPartialScoped(u))return void A(null,a.getNLSValue("ImplementBehavior.Validation.NoPartialScopeLinkExists",{objectName:g.get("V_Name")}));if(e.is(n)&&e.is(n,"array")&&n.length>0){if(d=r.getReferenceIdFromInstance(n[n.length-1]),T){const e=s.getPartialScopeLinks(u)[0].get("to");if(d===e)return void A(null,a.getNLSValue("ImplementBehavior.Validation.StretchPartialScopeToSamePrd"))}}else{d=s.getPartialScopeLinks(u)[0].get("to");const e=L(t);n=e}if(S=function(){if(E)m.isSwitchToPartialScopeLink=E;else if(T){m.isStretchPartialScopeLink=T;const t=n[n.length-1];if(Array.isArray(P)){let n=P.indexOf(t);for(n+=1;n<P.length;n++)p=e.is(p)?p+","+P[n]:P[n]}m.targetPrdOccPath=p,m.targetProductID=d,d=s.getPartialScopeLinks(u)[0].get("to")}else if(F){if(m.isDeletePartialScopeLink=F,Array.isArray(P))for(let t=0;t<P.length;t++)p=e.is(p)?p+","+P[t]:P[t];m.targetPrdOccPath=p}F||(h=D(t,n)),s.manageScopeAndImplementLink(u,f,d,h,m)},P=L(t),k)m.isCreatePartialScopeLink=k,S();else if(null===P){if(!F)return void A(null,T?a.getNLSValue("ImplementBehavior.Validation.StretchPartialScopeImplBroken"):a.getNLSValue("ImplementBehavior.Validation.SwtichPartialScopeImplBroken"));b.showConfirmation(a.getNLSValue("Confirmation.AreYouSure"),a.getNLSValue("Confirmation.DeletePartialScopeImplBroken"),null,function(t){e.is(t,"boolean")&&t?S():l()})}else S()}else i.debug("Input parameters are invalid."),A()},D=function(t,n){const o=s.getPathToScope(n),i=((t,n)=>{let o=null;const i=s.isUnderPartialScope(t);return e.is(i)&&i&&(o=s.getPathToPartialScope(n)),o})(t,n);let r=o;return Array.isArray(i)&&Array.isArray(o)?r=((...e)=>{let t=e[0];const n=e.length;for(let o=1;o<n;o++)e[o].length<t.length&&(t=e[o]);return t})(i,o):Array.isArray(i)&&(r=i),r},L=function(t){var n,o,i,a,c,l=function(t){var n,o=!1;return n=r.getReferenceModel(t),e.is(n)&&"PROCESS"===n.get("PPRTYPE")&&(o=!0),o};if(Array.isArray(t)){if(0===(n=t).length)return null;if(!l(n[n.length-1]))return null;if(!s.isPartialScoped(n))return null;if(s.isUnderPartialScope(n)){c=[],i=n.slice(0);do{if(!s.isPartialScoped(i))break;if(a=s.getImplLinksOfImplementing(i),!e.is(a)||a.length>1||0===a.length){c=null;break}c=a[0].get("to").concat(c),i=C(i)}while(Array.isArray(i))}else if(a=s.getImplLinksOfImplementing(n),e.is(a)){if(1!==a.length)return null;c=a[0].get("to")}else c=[]}else c=l(o=t)&&s.isScoped(o)?[]:null;return c},C=function(t){var n,o,i,r=null;return Array.isArray(t)&&t.length>0&&(i=s.findInstanceWhoseParentIsPartialScoped(t),e.is(i)&&(0===i.absPathIndex?o=i.instanceModel.get("isAggregatedBy"):n=t.slice(0,i.absPathIndex))),e.is(n)?r=n:e.is(o)&&(r=o),r},{PartialScopeAction:{CREATE_PARTIALSCOPE:"CREATE_PARTIALSCOPE",STRETCH_PARTIALSCOPE:"STRETCH_PARTIALSCOPE",SWITCH_TO_FULLSCOPE:"SWITCH_TO_FULLSCOPE",DELETE_PARTIALSCOPE:"DELETE_PARTIALSCOPE"},isScoped:function(e){return s.isScoped(e)},isPartialScoped:function(e){return s.isPartialScoped(e)},isUnderScope:function(e){return s.isUnderScope(e)},isResultingLinked:function(e){return s.isResultingLinked(e)},canCreateImplementLink:function(e){return s.canCreateImplementLink(e)},isImplementLinkPossible:function(e,t){return s.isImplementLinkPossible(e,t)},canCreateScopeLink:function(e){return s.canCreateScopeLink(e,!0)},getPossiblePartialScopeLinkOnHeaderOperation:function(e){return s.getPossiblePartialScopeLinkOnHeaderOperation(e)},canCreateResultingProductLink:function(e){return s.canCreateResultingProductLink(e)},getScopeLinkType:function(){return s.getScopeLinkType()},getPartialScopeLinkType:function(){return s.getPartialScopeLinkType()},getResultingProductLinkType:function(){return s.getResultingProductLinkType()},getImplementLinkType:function(){return s.getImplementLinkType()},getScopeLinksOfImplementing:function(e){return s.getScopeLinksOfImplementing(e)},getScopeLinksOfImplemented:function(e){return s.getScopeLinksOfImplemented(e)},getImplLinksOfImplementing:function(e){return s.getImplLinksOfImplementing(e)},getImplLinksOfImplemented:function(e){return s.getImplLinksOfImplemented(e)},getScopedParent:function(e){return s.getScopedParent(e)},getPathToScope:function(e){return s.getPathToScope(e)},findInstanceWhoseParentIsScoped:function(e){return s.findInstanceWhoseParentIsScoped(e)},createEngMadeFromItem:function(t,n){var o=n.get("PID");const r=a.getNLSValue("ImplementBehavior.createEngMadeFromItem.LogMessage"),c=a.getNLSValue("ImplementBehavior.createEngMadeFromItem.Success"),u=a.getNLSValue("ImplementBehavior.createEngMadeFromItem.Failed"),f=a.getNLSValue("ImplementBehavior.createEngMadeFromItem.NotSupportedType.Failed"),g=i.log(r);l.isAKindOf(n.get("type"),"CreateMaterial")||l.isAKindOf(n.get("type"),"ElementaryEndItem")?s.createEngMadeFromItem(t,o).then(t=>{if(e.is(t)){if(e.is(t.instancesAndReferences,"array")){const e=[];t.instancesAndReferences.forEach(t=>{t.isInstance()&&e.push(t)}),i.notify("addInstance",e)}e.is(t.connections,"array")&&i.notify("addConnection",[t.connections]),i.info(c,g)}}).catch(()=>{i.warn(u,g)}):i.warn(f,g)},consumeImplementedItems:function(o){var c,u,f,g,d={},P=new n(i.getBehavior("UXFactoryBehavior"),a);return e.is(o,"array")&&o.length>0?(i.notify("startProgress",d),c=t.allSettled((u=[],f=[],g=function(t,n,o,c){const l=a.getNLSValue("ImplementBehavior.Consumption.LogMessage"),u=a.getNLSValue("ImplementBehavior.Consumption.Success"),f=a.getNLSValue("ImplementBehavior.Consumption.Failed"),g=i.log(l),d=r.getReferenceModel(n.referencePID);s.consumeReferenceWithScopeLink(t,n.referencePID,n.targetReferencePID,"",{"PLMEntity.V_Name":d.get("V_Name"),"PLMEntity.V_description":"",V_Type:"DELAsmAssemblyModelDisciplines/Provide",type:"Provide"}).then(t=>{if(e.is(t)){if(e.is(t.instancesAndReferences,"array")){const e=[];t.instancesAndReferences.forEach(t=>{t.isInstance()&&e.push(t)}),i.notify("addInstance",e)}e.is(t.connections,"array")&&i.notify("addConnection",[t.connections]),i.info(u,g)}o()}).catch(()=>{i.warn(f,g),c()})},o.forEach(function(n,a){var c=new t(function(t,c){var u=null,d=null,h=e.is(n.targetInstancePIDsArray)&&n.targetInstancePIDsArray.length>0?n.targetInstancePIDsArray:n.targetReferencePID;if(s.validateIfScoped(h,n.instancePIDsArray))u=D(n.instancePIDsArray,n.instancePIDsArray),d=r.getReference(n.targetReferencePID),l.isAKindOf(d,"Provide")?p(n.targetReferencePID,n.targetInstancePID,n.referencePID,u,t,c):(f.push(u),a===o.length-1?m(n.rootReferencePID,f,n.targetRootReferencePID,n.targetReferencePID,t,c):t());else{const o=()=>S(n.targetInstancePIDsArray,n.targetReferencePID,n.instancePIDsArray,n.referencePID);if(i.getPreferenceValue("skipVaidationIfScopedCheck")){let i=!1;if(e.is(n.targetInstancePIDsArray,"array")&&n.targetInstancePIDsArray.length>0)i=s.isUnderScope(n.targetInstancePIDsArray);else{const t=s.getScopeLinks(n.targetRootReferencePID);i=e.is(t,"array")&&t.length>0}i?P.show(function(){t()},function(){g("ManufacturingAssembly",n,t,c)},function(){g("ManufacturingMadeFrom",n,t,c)}):o().then(t,c)}else o().then(t,c)}});u.push(c)}),u)).then(function(){i.notify("stopProgress",d)})):(i.debug("Input parameters are invalid."),c=t.reject("ImplementBehavior.Validation.InvalidInput")),c},createScopeLink:function(n){var o,a={},s=[];return e.is(n,"array")&&n.length>0?(i.notify("startProgress",a),s=n.map(function(t){var n;return n=function(){var e;e=t.implementingAbsPath,t.implementingAbsPath=t.implementedAbsPath,t.implementedAbsPath=e,e=t.implementingPID,t.implementingPID=t.implementedPID,t.implementedPID=e},e.is(t.type)&&t.type.contains("inverse")&&(n(),t.type=t.type.replace("_inverse","")),S(t.implementingAbsPath,t.implementingPID,t.implementedAbsPath,t.implementedPID,t.isPartialScope)}),o=t.allSettled(s).then(function(){var o,s=u.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),c=[],f=r.isReference(n[0].implementingPID)?n[0].implementingPID:r.getReferenceIdFromInstance(n[0].implementingPID),g=r.isReference(n[0].implementedPID)?n[0].implementedPID:r.getReferenceIdFromInstance(n[0].implementedPID);o=r.getReferenceModel(f),r.getCurrentStates([g],s,function(n){e.is(n)&&"RELEASED"===n.get(g)&&l.isAKindOf(o.get("type"),"Provide")?((widget.getValue("isReleaseMaturitySynced")||i.getPreferenceValue("isReleaseSyncXENEnabled")&&widget.getValue("fromXen"))&&c.push(new t(function(e,t){r.syncMaturity([o],s,widget.getValue("isChangeRequiredSynced")||i.getPreferenceValue("isReleaseSyncXENEnabled")&&widget.getValue("fromXen"),e,t)})),t.all(c).then(function(){var e=[];e.onComplete=function(){i.notify("changeReference",o),i.notify("stopProgress",a)},e.onFailure=function(){i.notify("changeReference",o),i.notify("stopProgress",a)},e.forceDBMode=!0,r.fetchRoot(o.get("PID"),e)})):i.notify("stopProgress",a)})})):(i.debug("Input parameters are invalid."),o=t.reject("ImplementBehavior.Validation.InvalidInput")),o},createImplementLink:function(t,n,o,c){var l,u,f,g,d=a.getNLSValue("ImplementBehavior.Validation.ScopeNotValid"),m=function(t,n){var o=e.is(t)?a.getNLSValue(t):null;e.is(n)&&(o=n),u.errorMessage=o,c(u)};u={linkType:t.type,target:r.getReferenceModel(t.implementingAbsPath[t.implementingAbsPath.length-1]).get("PID"),source:r.getReferenceModel(t.implementedAbsPath[t.implementedAbsPath.length-1]).get("PID")},e.is(t.fromSideAbsPath)&&e.is(t.fromSideAbsPath)||(t.fromSideAbsPath=t.implementingAbsPath,t.toSideAbsPath=t.implementedAbsPath),s.canCreateImplementLink(t).canCreateLink?(f=(l=s.getPathsToScope(t.implementingAbsPath,t.implementedAbsPath)).implementingPathToScope,g=l.implementedPathToScope,e.is(f)&&e.is(g)?s.createImplementLink(f,g,{connectionParams:t.connectionParams,onComplete:function(e,t){i.notify("createImplementLink",t.toJSON()),o(u)},onFailure:m}):m(null,d)):m(null,d)},deleteScopeLink:function(n){var o,r,c={},l=[],u=e.is(n,"array")?n:[n],f=a.getNLSValue(this.getScopeLinkType()),g=a.getNLSValue("DeleteLink.LogMessage",{linkType:f}),d=a.getNLSValue("DeleteLink.Success",{linkType:f}),m=a.getNLSValue("DeleteLink.Failure",{linkType:f});return u.length>0?(i.notify("startProgress",c),u.forEach(function(n){r=s.getScopeLinksOfImplementing(n),e.is(r)&&r.length>0&&(l=r.map(function(e){return new t(function(t,n){!function(e,t,n){var o=i.log(g);s.deleteScopeLink(e,{onComplete:function(e,n){v(e,d,o,t),i.notify("deleteLink",[n.deletedConnections])},onFailure:function(e,t){R(e,t,m,o,n)}})}(e.get("PID"),t,n)})}))}),o=t.allSettled(l).then(function(){i.notify("stopProgress",c)})):(i.debug("Unable to delete scope links as input parameters are invalid."),o=t.reject("ImplementBehavior.Validation.InvalidInput")),o},reconnectScope:function(e,t,n,o){f(e,t,!1,n,o)},reviseAndReconnectScope:function(e,t,n,o){f(e,t,!0,n,o)},prereqChecksForReconnectScope:function(e,t,n,o,r){var a=i.getBehavior("ModelBehavior");"ReconnectScope"===e?a.isReadOnly(t,n,o,r):"ReviseAndReconnectScope"===e&&a.isLatestRevision(t,n,o,r)},isImplementLinkValidForOccPath:function(e,t,n){return s.isImplementLinkValidForOccPath(e,t,n)},getRolesForTargrtObject:function(e){return s.getRolesForTargrtObject(e)},getRoleFromModelOrComputed:function(e){return s.getRoleFromModelOrComputed(e)},managePartialScopeLink:function(n){let o,r={};return e.is(n,"object")?(i.notify("startProgress",r),o=I(n.implementingAbsPath,n.implementedAbsPath,n.cmdAction).then(()=>{i.notify("stopProgress",r)}).catch(e=>{i.notify("stopProgress",r)})):(i.debug("Input parameters are invalid."),o=t.reject("ImplementBehavior.Validation.InvalidInput")),o},updateDataMaterializationLinkUsage:function(n,o,i){return new t(function(t,r){var a={rpConnectionPID:n,newValue:o},s={url:"dsmfg/private/V0/invoke/updateDataMaterializationLinkUsage",method:"POST",data:e.Json.encode(a),context:self,onComplete:function(e){t(e)},onFailure:function(t){e.is(i.onFailure,"function")&&i.onFailure(t),r()}};u.webServiceRequest(s)})},getConnectedObjects:function(t,n,o,i){var r=[];return e.is(s.getConnectedObjects)&&(r=s.getConnectedObjects(t,n,o,i)),r}}}}}),define("DS/DELPPWModelBehaviors/AssignProductBehavior",["UWA/Core","DS/DELPPWModelBehaviors/SpecifyScopeIntentDialog"],function(e,t){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","WebServicePlugin","ImplementPlugin","AttributePlugin","DicoPlugin"],creator:function(n,o,i,r,a,s,c,l){var u,f,g,d,m,p;return u=function(t,n,r,s,c){var l,u,f,g,d=0,m=0,p={instancesAndReferences:[],connections:[]},P=a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0});c=c||{},e.is(c.securityContextOverride,"string")&&(P.SecurityContext=c.securityContextOverride),f=function(t,n){e.is(c.onFailure,"function")&&c.onFailure(n)},u=function(t){var r=i.getConnectionParser(),a={stackedReferences:[],stackedInstances:[],stackedConnections:[]},s={queriedForConnections:!0},l={queriedForChildren:!0,queriedForConnections:!0,queriedForDocuments:!1};e.is(t)&&(e.is(t.instancesAndReferences)&&t.instancesAndReferences.forEach(function(t){var n,o,i=t.attributesValue;Object.prototype.hasOwnProperty.call(i,"isInstanceOf")?(n=e.merge(i,s),a.stackedInstances.push(n),e.is(t["to.attributesValue"])&&(o=e.merge(t["to.attributesValue"],l),a.stackedReferences.push(o))):(o=e.merge(i,l),a.stackedReferences.push(o))}),e.is(t.connections)&&t.connections.forEach(function(e){r.parse(e,a)}),a.onComplete=function(i){var r=[];(!e.is(i.instancesAndReferences)||i.connections.length<2/*!UWA.is(scopeConnModel) || !UWA.is(implConnModel)*/)&&o.debug("Instance or scope or implement model is empty for instance PID:"+t.instancesAndReferences[0].attributesValue.PID),i.instancesAndReferences.forEach(function(e){e.isInstance()&&r.push(e)}),o.notify("addInstance",r),i.instancesAndReferences.forEach(function(e){"PROCESS"===e.toJSON().PPRTYPE&&p.instancesAndReferences.push(e.toJSON())}),i.connections.forEach(function(e){p.connections.push(e.toJSON())}),o.notify("addConnection",[i.connections]),m++,n.length===m&&(e.is(c.onComplete,"function")&&c.onComplete(i),o.notify("assignProduct",p))},i.addToCollections(a))},g={processID:t},n.forEach(function(t){var n=e.clone(g),o=e.clone(s[d]);l=i.getReferenceModel(t),n.productPath=e.Json.encode(r[d]),n.productRefPID=l.get("PID"),n.type=o.V_Type,n.attributes=o,Object.prototype.hasOwnProperty.call(o,"PLMEntity.V_Name")||(o["PLMEntity.V_Name"]=l.get("V_Name")),a.webServiceRequest({url:"dsmfg/private/V0/invoke/assignproduct",method:"POST",headers:P,context:this,data:e.Json.encode(n),onComplete:u,onFailure:f,onTimeout:f,onCancel:f}),d++},this)},f=function(t,n,o,i){return new Promise(function(r,s){var c,l=a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),u=i||{};e.is(u.securityContextOverride,"string")&&(l.SecurityContext=u.securityContextOverride),c={productID:n,processType:o.V_Type,processData:o},a.webServiceRequest({url:t,method:"POST",headers:l,data:e.Json.encode(c),onFailure:function(e,t){s(t)},onTimeout:s,onComplete:r})})},g=function(t,n,r,a,s,c){var l=function(t){return new Promise(function(n,o){var r=i.getConnectionParser(),a={silentMode:!0,stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:function(e){n(e)}};e.is(t)&&e.is(t.instancesAndReferences)&&e.is(t.connections)?(a.stackedReferences=t.instancesAndReferences.map(function(t){return e.merge(t,{queriedForChildren:!0,queriedForConnections:!0,queriedForDocuments:!0})}),t.connections.forEach(function(e){r.parse(e,a)}),i.addToCollections(a)):o()})};return new Promise(function(u,g){var d=[],m={};Array.isArray(t)&&Array.isArray(n)&&(o.notify("startProgress",m),d=t.map(function(t,o){return new Promise(function(u,g){var d=e.clone(n[o]),m=i.getReferenceModel(t),p=m.get("V_Name"),P=m.get("PID");e.is(d["PLMEntity.V_Name"])||(d["PLMEntity.V_Name"]=p),f(r,P,d,c).then(l).then(function(e){a(e,d,p),u(e)}).catch(function(e){s(p,e),g()})})}),Promise.allSettled(d).then(function(e){var t,n=function(e){return e.value};t=e.some(function(e){return"rejected"===e.state})?e.filter(function(e){return"fulfilled"===e.state}).map(n):e.map(n),o.notify("stopProgress",m),t.length>0?u(t):g()}).catch(function(){o.notify("stopProgress",m),g()}))})},d=function(t,n,i,a){var s;a=a||{},o.notify("stopProgress",n),s=r.getNLSValue("AssignProdBehavior.ErrorLinkCreation.Title"),o.warn(s,t),o.debug("AssignProdBehavior.ErrorLinkCreation.Title. ERROR during product assign: "+i),e.is(a.onFailure,"function")&&a.onFailure(s,i)},m=function(e,t,n,i,a,s){o.info(r.getNLSValue(n,{processName:i["PLMEntity.V_Name"],productName:a}),s),o.notify(e,t)},p=function(t,n,s,c,u,f,g){var d=t.instancesAndReferences[2],p=t.instancesAndReferences[0].get("PID"),P=a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0});e.is(f.securityContextOverride,"string")&&(P.SecurityContext=f.securityContextOverride),i.getCurrentStates([p],P,function(t){var a=[],f=widget.getValue("fromXen"),S="createMfgItemAndResultingProduct"===u?"createMfgItemAndResultingProductLink.Success":"createMfgItemAndScope"===u?"CreateMfgItemAndScope.Success":"";e.is(t)&&"RELEASED"===t.get(p)&&l.isAKindOf(d.get("type"),"Provide")?((widget.getValue("isReleaseMaturitySynced")||!0===f&&o.getPreferenceValue("isReleaseSyncXENEnabled"))&&a.push(new Promise(function(e,t){i.syncMaturity([d],P,widget.getValue("isChangeRequiredSynced")||f&&o.getPreferenceValue("isReleaseSyncXENEnabled"),e,t)})),Promise.all(a).then(function(t){var a=[];a.onComplete=function(t){e.is(t,"array")&&(t=t[0]),d.set("current",t.get("current")),o.notify("addReference",d),m(u,c,S,n,s,g)},a.onFailure=function(){d.set("current",t.results[0].maturityState),o.notify("addReference",d),o.warn(r.getNLSValue("MaturitySync.UIChangeFailed")),o.notify(u,c)},a.forceDBMode=!0,i.fetchRoot(d.get("PID"),a)}).catch(function(){o.warn(r.getNLSValue("MaturitySync.changeStateFailed")),o.notify("addReference",d),m(u,c,S,n,s,g)})):(o.notify("addReference",d),m(u,c,S,n,s,g))})},{unassignProduct:function(t,n){var i,a,c,l=[],u=[],f=[],g={};i={onComplete:function(){o.notify("stopProgress",g),e.is(n)&&e.is(n.onComplete)?n.onComplete():o.info(r.getNLSValue("UnassignProduct.DeleteSuccess"))},onFailure:function(t){o.notify("stopProgress",g),e.is(n)&&e.is(n.onFailure)?n.onFailure():o.warn(t)}},e.is(n)&&(i=e.merge(i,n)),e.is(t,"array")&&0!==t.length&&(o.notify("startProgress",g),t.forEach(function(t){l.push(new Promise(function(n,o){a=s.getImplLinksOfImplementing(t),e.is(a)&&a.length>0&&(a.forEach(function(e){var t=e.get("PID");f.push(new Promise(function(e,n){s.deleteImplementLink(t,{onComplete:e,onFailure:n})}))}),Promise.allSettled(f).then(function(){c=s.getScopeLinksOfImplementing(t),e.is(c)&&c.length>0&&c.forEach(function(e){var t=e.get("PID");u.push(new Promise(function(e,n){s.deleteScopeLink(t,{onComplete:e,onFailure:n})}))}),Promise.allSettled(u).then(function(){n()},function(){o()})},function(){o()}))}))}),Promise.allSettled(l).then(function(){i.onComplete()},function(e){var t=0,n=0;for(t=0;t<e.length;t++)"rejected"===e[t].state&&n++;n===e.length?i.onFailure(r.getNLSValue("UnassignProduct.DeleteFailure")):i.onFailure(r.getNLSValue("UnassignProduct.PatialFailure"))}))},assignProduct:function(n){var a,c,f,g,m,p,P,S,h,L,C,I,y,D,v,R,V,N,A=[],b=[],k=[],T=[],F=[],E=[],O=[],M={},w={},B=new t(o.getBehavior("UXFactoryBehavior"),r);let U;if(I=function(t,n,i,a){const c=r.getNLSValue("ImplementBehavior.Consumption.LogMessage"),l=r.getNLSValue("ImplementBehavior.Consumption.Success"),u=r.getNLSValue("ImplementBehavior.Consumption.Failed"),f=o.log(c);s.consumeReferenceWithScopeLink(t,n.prodPID,n.mfgPID,n.mfgInstPID,{}).then(t=>{if(e.is(t)){if(e.is(t.instancesAndReferences,"array")){const e=[];t.instancesAndReferences.forEach(t=>{t.isInstance()&&e.push(t)}),o.notify("addInstance",e)}e.is(t.connections,"array")&&o.notify("addConnection",[t.connections]),o.info(l,f)}i()}).catch(()=>{o.warn(u,f),a()})},y=function(){o.info(r.getNLSValue("Success.ProductAssigned.Title",{mfgItem:C}),h),o.notify("stopProgress",M),e.is(n.onComplete,"function")&&n.onComplete()},D=function(e,t){d(h,M,t,n)},e.is(n)&&(v=n.securityContextOverride,f=n.mbomReferenceId,a=n.mbomInstanceId,c=n.bodyInstanceIds,P=n.bodyAbsolutePaths,m=n.mbomAbsolutePaths[0],S=n.isInstancePossible,g=e.is(n.newMfgAttributes)?n.newMfgAttributes:{V_Type:"DELAsmAssemblyModelDisciplines/Provide"}),e.is(m,"array")&&m.length>0)U=s.isUnderScope(m);else{const t=s.getScopeLinks(f);U=e.is(t,"array")&&t.length>0,m=f}for(p=0;p<P.length;p++)if(s.validateIfScoped(m,P[p]))b.push(P[p]),k.push(c[p]),T.push(g[p]);else{if(!o.getPreferenceValue("skipVaidationIfScopedCheck")||!U)return void o.warn(r.getNLSValue("AssignProdBehavior.NotScoped.Title"));F.push(P[p]),E.push(c[p]),O.push(g[p])}e.is(f,"array")&&f.length>0&&(f=f[0]),o.notify("startProgress",M),L=i.getReferenceModel(f),C=e.is(L)?L.get("V_Name"):"";const x=[];if(F.length>0)for(p=0;p<F.length;p++){const e={prodPID:i.getReferenceModel(E[p]).get("PID"),mfgPID:f,mfgInstPID:a},t=function(){Promise.resolve()},n=function(){I("ManufacturingAssembly",e,Promise.resolve,Promise.reject)},s=function(){I("ManufacturingMadeFrom",e,Promise.resolve,Promise.reject)};if(l.isAKindOf(L.get("type"),"CreateAssembly")||l.isAKindOf(L.get("type"),"CreateKit"))B.show(t,n,"");else{if(!(l.isAKindOf(L.get("type"),"CreateMaterial")||l.isAKindOf(L.get("type"),"ElementaryEndItem")||l.isAKindOf(L.get("type"),"Provide")))return void o.warn(r.getNLSValue("AssignProdBehavior.DiffEBOM.NotSupportedType"));B.show(t,n,s)}}if(0!==b.length){for(p=0;p<b.length;p++)A.push(s.getPathToScope(b[p]));h=o.log(r.getNLSValue("ProductAssign.LogMessage",{mfgItem:C})),w.securityContextOverride=v,w.onComplete=(()=>{x.length>0?Promise.all(x).then(y).catch(D):y()}),w.onFailure=((e,t)=>{x.length>0?Promise.all(x).then(()=>D(0,t)).catch(()=>D(0,t)):D(0,t)}),!0===S?u(f,k,A,T,w):(V=i.getReferenceIdFromInstance(a),R=A[0],N=i.getReferenceIdFromInstance(R[R.length-1]),s.createScopeAndImplementLink(V,a,N,R,w))}else Promise.all(x).then(y).catch(D)},createMfgItemAndScopeLink:function(t,n,i,s){var c,l=s||{},u=e.is(l.onComplete,"function")?l.onComplete:null,f=e.is(l.onFailure,"function")?l.onFailure:null;c=o.log(i),g(t,n,"dsmfg/private/V0/invoke/createMfgItemAndScope",function(t,n,i){var r={},s=t.instancesAndReferences[2],u=a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0});e.is(l.securityContextOverride,"string")&&(u.SecurityContext=l.securityContextOverride),e.is(t)&&Array.isArray(t.instancesAndReferences)?p(t,n,i,r,"createMfgItemAndResultingProduct",l,c):(o.notify("addReference",s),m("createMfgItemAndScope",r,"CreateMfgItemAndScope.Success",n,i,c))},function(t,n){e.is(n)&&e.is(n.message,"string")&&n.message.length>0?o.warn(r.getNLSValue("CreateMfgItemAndScope.FailureWithMessage",{productName:t,message:n.message}),c):o.warn(r.getNLSValue("CreateMfgItemAndScope.Failure",{productName:t}),c)},l).then(function(t){var n=t.map(function(e){return{toObject:e.instancesAndReferences[0],fromObject:e.instancesAndReferences[1],createdObject:e.instancesAndReferences[2]}});e.is(u,"function")&&u(n)}).catch(function(){e.is(f,"function")&&f()})},createMfgItemAndResultingProductLink:function(t,n,i,a){var s,c=a||{},l=e.is(c.onComplete,"function")?c.onComplete:null,u=e.is(c.onFailure,"function")?c.onFailure:null;s=o.log(i),g(t,n,"dsmfg/private/V0/invoke/createMfgItemAndResultingProduct",function(t,n,o){var i={};e.is(t)&&Array.isArray(t.instancesAndReferences)?p(t,n,o,i,"createMfgItemAndResultingProduct","ResultingProduct",c):m("createMfgItemAndResultingProduct",i,"createMfgItemAndResultingProductLink.Success",n,o,s)},function(t,n){e.is(n)&&e.is(n.message,"string")&&n.message.length>0?o.warn(r.getNLSValue("createMfgItemAndResultingProductLink.FailureWithMessage",{productName:t,message:n.message}),s):o.warn(r.getNLSValue("createMfgItemAndResultingProductLink.Failure",{productName:t}),s)},c).then(function(t){var n=t.map(function(e){return{toObject:e.instancesAndReferences[0],fromObject:e.instancesAndReferences[1],createdObject:e.instancesAndReferences[2]}});e.is(l,"function")&&l(n)}).catch(function(){e.is(u,"function")&&u()})}}}}});