define("DS/ENOProjectMgmtModels/Utils/StorageDataUtil",["UWA/Class","UWA/Storage","UWA/Storage/Adapter/Object"],function(e,t,i){"use strict";let s=e.extend({storage:void 0,init:function(){this.storage=new t({adapter:"Object",database:"ENOProjectMgmtWidgetStorage"})},clear:function(){let e=this,t=this.storage.getAll();if(t)for(let i in t)e.remove(i)},safeStore:function(e,t){try{let i=this.storage.safeStore(t);this.storage.set(e,i)}catch(e){console.error(e)}},set:function(e,t){try{this.storage.set(e,t)}catch(e){console.error(e)}},remove:function(e){try{this.storage.remove(e)}catch(e){console.error(e)}},get:function(e){return this.storage.get(e)},getSafeStoreData:function(e){return this.storage.safeResurrect(this.storage.get(e))}});return s._instance=s._instance||new s,s._instance}),define("DS/ENOProjectMgmtModels/Models/AppSettings",["UWA/Class/Model"],function(e){"use strict";let t=e.extend({_uwaClassName:"AppSettings",setup:function(){let e={params:"",url:"",myAppsUrl:"",showSpace:"",objectId:"",widgetId:"",widgetName:"",taggerContextId:"auto",appName:"",tenant:"",space:null,rows:null,preferences:{},language:"",timezone:"",user:"",isStandaloneWidget:!1,contextInfo:void 0};this.set(e)},setSelectedViewName:function(e){this._selectedFilter=e},getSelectedViewName:function(){return this._selectedFilter},setFilterSearchString:function(e){this._filterSearchString=e},getFilterSearchString:function(){return this._filterSearchString},getContextInfo:function(){let e=this.get("tenant"),t=widget.getValue(e);return t&&t.context},getContextId:function(){let e=this.getContextInfo();return e&&e.id},isValidCollabspace:function(){return this.get("collabspace")}});return t._instance=t._instance||new t,t._instance}),define("DS/ENOProjectMgmtModels/Models/RelatedData",["UWA/Class/Model"],function(e){"use strict";return e.extend({_uwaClassName:"RelatedData"})}),define("DS/ENOProjectMgmtModels/Models/CSRFDataModel",["UWA/Class/Model"],function(e){"use strict";return e.extend({_uwaClassName:"CSRFDataModel",tokenName:"ENO_CSRF_TOKEN",csrfValue:"",setCSRF:function(e){this.csrfValue=e},getCSRF:function(){let e={};return e.name=this.tokenName,e.value=this.csrfValue,e}})}),define("DS/ENOProjectMgmtModels/Models/SecurityContext",["UWA/Class/Model"],function(e){"use strict";return e.extend({_uwaClassName:"SecurityContext"})}),define("DS/ENOProjectMgmtModels/Models/RequestData",["UWA/Class/Model"],function(e){"use strict";return e.extend({_uwaClassName:"RequestData",csrf:void 0,data:[],dataObject:void 0})}),define("DS/ENOProjectMgmtModels/Models/FieldsDefinition",["UWA/Class/Model"],function(e){"use strict";let t=e.extend({_uwaClassName:"FieldsDefinition",setFieldsDefinition:function(e,t){this.set(e,t)},setFieldTaggerMap:function(){this.set("fieldTaggerMap",{"_tag_implicit_ds6w:what/ds6w:heatMap":"probability.impact","_tag_implicit_ds6w:why/ds6w:fulfills/ds6w:severity":"rpnValue","_tag_implicit_ds6w:what/ds6w:status/ds6w:reserved":"Not Reserved","_tag_implicit_ds6w:when/ds6w:isLastRevision":"TRUE","_tag_implicit_ds6w:what/ds6w:type":"Risk","_tag_implicit_ds6w:who/ds6w:lastModifiedBy":""})},getFieldsDefinition:function(e){return this.get(e)},getFieldTaggerMap:function(){return this.get("fieldTaggerMap")},getFieldDefinitionColumn:function(e,t,i){let s=i||this.getFieldsDefinition(e);if(s)return s.fieldDefinitionColumns||(s.fieldDefinitionColumns={},s.fieldCompositionServiceColumns={},s.fieldServiceColumns={},s.forEach&&s.forEach(e=>{if("field"===e.itemType){if(e.range){let t={};e.range.item.forEach(function(e){t[e.value]=e}),e.fieldDefinitionRangeItem=t}e.sixw&&(this.getFieldTaggerMap()[e.sixw]=e.name),s.fieldDefinitionColumns[e.name]=e}else if("service"===e.itemType&&"dpm.basicFields"===e.name)e.items.forEach(t=>{if(t.range){let e={};t.range.item.forEach(function(t){e[t.value]=t}),t.fieldDefinitionRangeItem=e}t.sixw&&(this.getFieldTaggerMap()[e.sixw]=e.name),s.fieldDefinitionColumns[t.name]=t});else if("service"===e.itemType&&"dpm.accessFields"===e.name)e.items.forEach(t=>{if(t.range){let e={};t.range.item.forEach(function(t){e[t.value]=t}),t.fieldDefinitionRangeItem=e}t.sixw&&(this.getFieldTaggerMap()[e.sixw]=e.name),s.fieldDefinitionColumns[t.name]=t});else if("service"===e.itemType){if(s.fieldDefinitionColumns[e.name]=e,e.items.length>0){let t=s.fieldServiceColumns[e.name]={};e.items.forEach(i=>{if(i.range){let e={};i.range.item.forEach(function(t){e[t.value]=t}),i.fieldDefinitionRangeItem=e}i.sixw&&(this.getFieldTaggerMap()[i.sixw]=e.name+"."+i.name),t[i.name]=i})}}else"composition-service"===e.itemType&&(s.fieldCompositionServiceColumns[e.name]=e,e.items.length>0&&(e.sixw&&(this.getFieldTaggerMap()[e.sixw]=e.name),s.fieldCompositionServiceColumns[e.name]=e))})),s.fieldDefinitionColumns[t]},getFieldServiceColumn:function(e,t,i){let s=this.getFieldsDefinition(e);if(s)return s.fieldServiceColumns[t]?s.fieldServiceColumns[t][i]:void 0},getFieldCompositionServiceColumnn:function(e,t){let i=this.getFieldsDefinition(e);if(i)return i.fieldCompositionServiceColumns[t]},getFieldRangeItems:function(e,t){let i=this.getFieldDefinitionColumn(e,t);return i&&i.range&&i.range.item},getFieldRangeItemActualValue:function(e,t,i){let s=this.getFieldRangeItems(e,t);return s&&s[i]&&s[i].value},getFieldRangeItemObject:function(e,t,i){return this.getFieldDefinitionColumn(e,t).fieldDefinitionRangeItem[i]}});return t._instance=t._instance||new t,t._instance}),define("DS/ENOProjectMgmtModels/Constants/Constants",["UWA/Core","DS/ENOProjectMgmtModels/Models/AppSettings"],function(e,t){"use strict";let i={ACCEPT_APPLICATION_JSON:"application/json",COMTENT_TYPE_FORM_URL_ENCODED:"application/x-www-form-urlencoded",CHARSET_UTF8:"charset=utf-8",APP_NAME:"3DSpace",GET:"GET",POST:"POST",PUT:"PUT",PATCH:"PATCH",DELETE:"DELETE",CONTENT_TYPE:"Content-Type",PASSPORT:"passport",RESOURCES:"/resources/",APPLICATIONS:{RISK:"risks",OPPORTUNITY:"opportunities",LIBRARIES:"dslib",LIBRARY:"dslib:Library",CLASSFIEDITEM:"dslib:ClassifiedItem",CLASS:"dslib:Class",PROJECT:"projects",EXPERIMENT:"experiments",BASELINE:"baselines",TASK:"tasks",CONTEXT_INFO:"RiskContextInfo",MATRIX_CONFIGURATION:"riskconfigurations",ASSESSMENT:"assessments",WORK_CALENDARS:"workcalendars"},TYPENAMES:{RISK:"Risk",OPPORTUNITY:"Opportunity",TASK:"Task",PROJECT:"Project",PROGRAM:"Program",PRJECTSPACE:"ProjectSpace",XPROJECT:"dsplan:xProject",MATRIX_CONFIGURATION:"RiskMatrixConfiguration",ASSESSMENT:"Assessment",EXPERIMENT:"Experiment",PROJECTBASELINE:"Project Baseline"},RISK:"Risk",PARAMS:{DEBUG:"&$debug=",TYPE:"&$type=",OWNED:"&owned=",ASSIGNED:"&assigned=",ORGANIZATION:"&organization=",CONTEXTID:"&contextId=",COMPLETED:"&completed=",FORCE:"&force=",FIELDS:"&$fields=",INCLUDE:"&$include=",DEFINITION:"&$definition=",SUBPROJECTRISKS:"&subprojectRisks=",SUB_PROJECT_OPPORTUNITIES:"&subprojectOpportunities=",MASK:"&$mask=",DEPTH:"&$depth=",SERVICE:"&$serviceId=",NONPUBLICRESOURCE:"&$nonPublicResource=",TOP:"&$top=",RMCTYPE:"&rmcType="},UPDATE_ACTION:{NONE:"NONE",CREATE:"CREATE",DELETE:"DELETE",MODIFY:"MODIFY",CONNECT:"CONNECT",DISCONNECT:"DISCONNECT"},CONTEXT_ATTR:"context",IMPACT_ATTR:"impact",PROBABILITY_ATTR:"probability",COMMENTS_ATTR:"comments",RPN_ATTR:"rpnValue",RESOLVED_BY_ATTR:"resolvedBy",AFFECTED_ITEMS_ATTR:"affectedItems",ASSOCIATED_RISKS_ATTR:"associatedRisks",CAN_EDIT_ATTR:"canEdit",CREATE_DATA:"riskCreateAccess",MODIFY_DATA:"modifyAccess",DELETE_DATA:"deleteAccess",CAN_DELETE_DATA:"canDelete",FROM_CONNECT_DATA:"fromConnectAccess",TO_CONNECT_DATA:"toConnectAccess",PROMOTE_DATA:"promoteAccess",DEMOTE_DATA:"demoteAccess",IS_SIMPLE_TASK:"isSimpleTask",CLASS_BASE_URL:"resources/v1/modeler/dslib/dslib:Class",CSRF_TOKEN:"ENO_CSRF_TOKEN",COMPLETE_STATE:"Complete",CAN_RMC_CONNECT:"RMCConnectAccess",CAN_CHANGE_OWNER:"changeOwnerAccess",XPLAN_SOURCE:"3dplan",SPACE_SOURCE:"3DSpace",PROJECT_LABEL:"dsxplan:label",PROJECT_TYPE:"dsplan:projectType",CAN_READ_ACCESS:"readAccess",NO_ACCESS:"No Access",DEBUG:"false",OBJECT_TYPE:"objectType",XPROJECT_COLLAB_SPACE:"dsplan:hasCollaborativeSpace",ALL_ITEMS:"all",STATE_ATTR:"state",ESTIMATED_BENEFIT_ATTR:"estimatedBenefit",ESTIMATED_BENEFIT_UNIT_ATTR:"estimatedBenefitInputUnit",PROJECT_CONSTANTS:{EXPERIMENTS:"experiments",BASELINES:"baselines",OWNER_INFO:"ownerInfo",CALENDAR:"calendar",WORK_CALENDAR:"Work Calendar"},PROJECT_GANTT_HAS_CHILDREN_ATTR:"hasExperimentOrBaseline"};return i["6WURL_V2"]=i.RESOURCES+"v2/e6w/service/",i["6WURL_V3"]=i.RESOURCES+"v3/e6w/service/",i[i.XPLAN_SOURCE]="/v1"+i.RESOURCES,i._getDefaultParams=function(){return"?tenant="+t.get("tenant")},i.getDefaultHeaders=function(){let i=t.get("collabspace"),s={"Accept-Language":t.get("language")};return i&&e.extend(s,{SecurityContext:i}),s},i.getUrl=function(){return t.get("3DSpace")},i.getXPlanUrl=function(){return t.get("3dplan")},i.getSearchUrl=function(){return i.getUrl()+i["6WURL_V3"]+"PersonSearch"+i._getDefaultParams()+"&"},i.getObjectSearchUrl=function(){return i.getUrl()+i["6WURL_V3"]+"ObjectSearch"+i._getDefaultParams()},i.getObjectInfoUrl=function(e){return i.getUrl()+i["6WURL_V3"]+"ObjectInfo/"+e+i._getDefaultParams()},i.getContextInfoUrl=function(e){return i.getUrl()+i["6WURL_V3"]+"RiskContextInfo/"+e+i._getDefaultParams()},i.getObjectInfoUrlForXPlan=function(e){return i.getXPlanUrl()+i[i.XPLAN_SOURCE]+e+"?$mask=dsplan:MVMask.WorkPackage.Basic"},i.getTaggerUrl=function(){return i.getUrl()+i["6WURL_V2"]+"Tags"+i._getDefaultParams()+"&$simpleJSON=true"},i.getSecurityContextUrl=function(){return i.getUrl()+i.RESOURCES+"bps/cspaces"+i._getDefaultParams()+"&$simpleJSON=true"},i._getResourcesUrl=function(e){return e?i.getUrl()+"/resources/":i.getUrl()+"/resources/v1/modeler/"},i.getAppUrl=function(e,t,s){let n;return n=t?i._getResourcesUrl()+e+"/"+t+i._getDefaultParams():i._getResourcesUrl()+e+i._getDefaultParams(),s||(n+="&$simpleJSON=true"),n},i.getXProjectImageURL=function(){return t.get("3dplan")+"/common/images/T_dsxplan_xProject.png"},i}),define("DS/ENOProjectMgmtModels/Utils/SearchUtil",["UWA/Core","UWA/Class/Events","DS/E6WCommonUI/Search","DS/ENOProjectMgmtModels/Models/AppSettings"],function(e,t,i,s){"use strict";let n=t.extend({pictureAPIConfig:{pictureAPIPrefix:"/api/user/getpicture/login/",pictureAPISuffixMini:"/format/mini",pictureAPISuffixNormal:"/format/normal"},userPictureURL:function(e,t,i){let n="";if(!i||"Group"!==i.type&&"Group Proxy"!==i.type){if(e){let i=this.pictureAPIConfig.pictureAPISuffixMini,r=s.get("3DSwym");"normal"===t&&(i=this.pictureAPIConfig.pictureAPISuffixNormal),n=r?r+this.pictureAPIConfig.pictureAPIPrefix+e+i:require.toUrl("DS/ENOProjectMgmtCommonComponents/assets/images/defaultProfile.png")}}else n=i.imageUrl;return n},computeSourceParameters:function(t){let s=i.computeSourceParameters.apply(this,arguments);if(t.specificSourceParameter){let i=Object.keys(t.specificSourceParameter),n=i.length;for(let r=0;r<n;r++){let n=i[r];e.merge(s[n],t.specificSourceParameter[n])}}return s}});return n.implement(i),n.prototype}),define("DS/ENOProjectMgmtModels/Models/NoAccessModel",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/ENOProjectMgmtModels/Constants/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,s,n){"use strict";return i.extend({_uwaClassName:"NoAccessModel",idAttribute:"physicalId",init:function(i,r){let o="noAccessModelId_"+t.getUUID(),l=e.extend(i||{},{name:s.NO_ACCESS,title:n.NO_ACCESS,image:require.toUrl("DS/ENOProjectMgmtCommonComponents/assets/images/NoAccess.png")});this._parent(l,r),this.set("physicalId",o)},canReadAccess:function(){return!1},dataForRendering:function(){return{title:this.get("title"),image:this.get("image")}},sync:Function.prototype,convertToRequestData:Function.prototype})}),define("DS/ENOProjectMgmtModels/Models/RequestDataForClassification",["DS/ENOProjectMgmtModels/Models/RequestData"],function(e){"use strict";return e.extend({_uwaClassName:"RequestDataForClassification",toJSON:function(){return JSON.stringify(this.get("dataObject")||this.get("data"))}})}),define("DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel",["UWA/Core","UWA/Utils","UWA/Class/Model","DS/WAFData/WAFData","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/RequestData","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtModels/Models/NoAccessModel","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Models/RequestDataForClassification","DS/ENOProjectMgmtModels/Utils/SearchUtil","DS/ENOProjectMgmtModels/Utils/StorageDataUtil","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],function(e,t,i,s,n,r,o,l,a,c,d,u,g,f){"use strict";let h=i.extend({_uwaClassName:"ENOProjectMgmtBaseModel",init:function(){this._parent.apply(this,arguments),this.listenTo(this,"onDestroy",this.destroyModelFromCollection)},getUrl:function(){return this.url},getClassificationUrl:function(e){let t=void 0;return e.mask&&(t=e.classifiedItemId?g.getAppUrl(g.APPLICATIONS.LIBRARIES,g.APPLICATIONS.CLASSFIEDITEM+(e.operation?"/"+e.operation:"")):g.getAppUrl(g.APPLICATIONS.LIBRARIES,g.APPLICATIONS.CLASSFIEDITEM+"/"+this.get("id")+(e.operation?"/"+e.operation:"")),t+=g.PARAMS.MASK+e.mask),t},parse:function(t,i){if(!t)return;let s,n=this,r=!i.idList&&i.method;if(t.csrf&&(o.prototype.setCSRF(t.csrf.value),delete t.csrf),this._setFieldDefinition(t),t.data&&t.data.length>0&&!0===t.success&&200===t.statusCode)this.unset("canEdit"),delete t.success,delete t.statusCode,s=t.data[0],t=t.data;else if(t.member&&t.member.length>0){if(t.member[0].ChildClasses||t.member[0].ParentClassification||t.member[0].ClassificationAttributes||t.member[0].ClassAttributes||"dslib:ClassifiedItemBaseMask"===i.mask)s=t.member[0];else if("dslib:ReverseClassificationMask"===i.mask)return}else s=t;for(let t in s)if(t===s.csrf)o.prototype.setCSRF(s.csrf.value),delete s.csrf;else{if(s.member&&s.member.length>0)return s.member;{let o,l;if(i.fieldDefinition?(l=i.fieldDefinitionSource,o=a.getFieldServiceColumn(l,i.fieldDefinition.name,t)):n.getFieldDefinitionSource&&a.getFieldDefinitionColumn(n.getFieldDefinitionSource(),t)?(l=n.getFieldDefinitionSource(),o=a.getFieldDefinitionColumn(l,t)):n.getFieldDefinitionSource&&a.getFieldCompositionServiceColumnn(n.getFieldDefinitionSource(),t)&&(l=n.getFieldDefinitionSource(),o=a.getFieldCompositionServiceColumnn(n.getFieldDefinitionSource(),t)),o)if("service"===o.itemType&&"subTypesInfo"!==t){let a,c={parse:!0,add:!0,remove:!1,merge:!0,parentId:s.id,url:this.getUrl(void 0,{id:s.id}),fieldDefinition:o,fieldDefinitionSource:l,silent:!0};a=this.get(t),e.is(s[t],"object")&&(s[t]=[s[t]]),!i.refresh&&a&&a.resetOperationFlags?(!r&&a.reset(),a.resetOperationFlags(),a.set(s[t],c),s[t]=a):s[t]=s[t].length>0?n.createRelatedDataItems("history"===t?s[t][0].history:s[t],c):n.createRelatedDataItems()}else"UTC"===o.format&&s[t]&&(s[t]=f.getFormattedDate(s[t]));else if("ChildClasses"===t||"ParentClassification"===t||"ClassificationAttributes"===t||"ClassAttributes"===t){let e={parse:!0,add:!0,remove:!1,merge:!0,parentId:s.id,fetchSource:g.APPLICATIONS.LIBRARIES,subType:g.APPLICATIONS.CLASS,silent:!0};s[t].member?"ClassAttributes"==t&&s[t].member?s[t]=s[t].member:s[t]=n.createRelatedDataItems(s[t]&&s[t].member,e):"ClassAttributes"!==t&&(s[t]=n.createRelatedDataItems(s[t]&&s[t],e))}else if("children"===t&&s.children.length>0){l=i.fieldDefinitionSource,o=a.getFieldDefinitionColumn(l,"tasks");let e={parse:!0,add:!0,remove:!1,merge:!0,parentId:s.id,url:this.getUrl(void 0,{id:s.id}),fieldDefinition:o,fieldDefinitionSource:l,silent:!0};s.tasks=n.createRelatedDataItems(s.children,e)}else"ClassID"!==t||s.id?"cestamp"===t&&(s[t]=s[t]):s.id=s[t]}}return s},createRelatedDataItems:function(e,t){return new(require("DS/ENOProjectMgmtModels/Collections/RelatedDataItems"))(e,t)},convertToClassificationRequestData:function(e,t,i){let s=this,r=new c;if(i.method=g.POST,i.headers[g.CSRF_TOKEN]||(i.headers[g.CSRF_TOKEN]=o.prototype.getCSRF().value,i.headers["DS-API-Version"]="1.0"),"modify"!==i.operation){let e={ClassID:this.get("id"),["add"===i.operation?"ObjectsToClassify":"ObjectsToDeclassify"]:[{identifier:i.classifiedItemId,source:n.get("3DSpace"),type:i.type,relativePath:i.relativePath}]};return r.set("dataObject",e),r}{let e=this.get("ClassificationAttributes"),t={},i=[{referencedObject:{source:"https://3dexperience.com/3DSpace",type:"dslib:ClassifiedItem",identifier:this.get("id"),relativePath:"resources/v1/modeler/dslib/dslib:ClassifiedItem/"+this.get("id")},attributes:t}],n={};if(e&&e.forEach(e=>{let i=e.get("Attributes");if(e.isAttributesNew)e.isAttributesNew=!1,i&&i.forEach(i=>{let r=i.name.split(" ").join("");n[r]||e.get(r)===i.value||s._setAttributeValueForResponse(t,e.get(r),i.name)});else{let r=e.changedAttributes();for(let e in r){let o=s.existsInOriginalList(i,e);o&&!n[e]&&(n[e]=!0,s._setAttributeValueForResponse(t,r[e],o))}}}),Object.keys(t).length>0)return t.cestamp=this.get("cestamp"),r.set("data",i),r}},_setAttributeValueForResponse:function(t,i,s){let n=this;if(e.is(i,"array")){let e=[];i.forEach(t=>{e.push(n._getAttributeValueBaseOnType(t))}),t[s]=e}else t[s]=n._getAttributeValueBaseOnType(i)},_setFieldDefinition:function(e){if(e.definitions&&e.definitions.length){if(this.getFieldDefinitionSource()===g.APPLICATIONS.RISK){let t=e.definitions.find(e=>e.name===g.APPLICATIONS.RISK);a.setFieldsDefinition(this.getFieldDefinitionSource(),t.items)}else if(this.getFieldDefinitionSource()===g.APPLICATIONS.OPPORTUNITY){let t=e.definitions.find(e=>e.name===g.APPLICATIONS.OPPORTUNITY);a.setFieldsDefinition(this.getFieldDefinitionSource(),t.items)}else a.setFieldsDefinition(this.getFieldDefinitionSource(),e.definitions);delete e.definitions}},_getAttributeValueBaseOnType:function(t){return"boolean"===e.typeOf(t)?"TRUE"===t||t:"date"===e.typeOf(t)?this.convertDateToResponseForClassification(t):t},existsInOriginalList:function(e,t){let i=!1;return e.forEach(e=>{if(e.name.split(" ").join("")===t)return i=e.name,!0}),i},convertToRequestData:function(e,t,i){i=i||{};let s=this,n=new r,l=[],c={},d=this.get("id"),u=this.get("type"),f=this.get("tempId"),h=this.serviceId;if(d&&(c.id=d),u&&(c.type=u),f&&(c.tempId=f),h&&(c.serviceId=h),c.updateAction=g.UPDATE_ACTION.NONE,"create"===e?i.fieldDefinition?c.updateAction=g.UPDATE_ACTION.CONNECT:c.updateAction=g.UPDATE_ACTION.CREATE:"update"===e||"patch"===e?i.fieldDefinition?!this.isNew()&&this.id||(c.updateAction=g.UPDATE_ACTION.CONNECT):c.updateAction=g.UPDATE_ACTION.MODIFY:i.fieldDefinition?c.updateAction=g.UPDATE_ACTION.DISCONNECT:c.updateAction=g.UPDATE_ACTION.DELETE,"delete"!==e){let t,n,r=this.previousAttributes(),o=this.changedAttributes();this.keys().forEach(function(l){if("canEdit"!==l&&(i.fieldDefinition?(n=i.fieldDefinitionSource,t=a.getFieldServiceColumn(n,i.fieldDefinition.name,l)):(n=s.getFieldDefinitionSource(),(t=a.getFieldDefinitionColumn(s.getFieldDefinitionSource(),l))||(t=a.getFieldCompositionServiceColumnn(s.getFieldDefinitionSource(),l))),i.ignoreFieldDefinitions||t))if("service"===t.itemType){i.fieldDefinition=t,i.fieldDefinitionSource=n,i.key=l;let r=s.get(l);if(r&&r.convertRelatedDataToRequestData){let t=r.convertRelatedDataToRequestData(e,c,i);i.fieldDefinition&&delete i.fieldDefinition,t&&c.updateAction===g.UPDATE_ACTION.NONE&&(c.updateAction=g.UPDATE_ACTION.MODIFY)}else delete i.fieldDefinition}else o&&void 0!==o[l]&&null!==o[l]?(void 0!==r[l]?c[l]=o[l]:c[l]=s.get(l),"UTC"===t.format&&(c[l]=s.convertDateToResponse(c[l]))):"create"===e&&(c[l]=s.get(l),"uom"===t.format&&(c[l]=a.getFieldRangeItemActualValue(s.getFieldDefinitionSource(),l,s.get(l))))})}if(l.push(c),n.set("data",l),n.set("csrf",o.prototype.getCSRF()),t)return c;let S=!1;return n.get("data").forEach(e=>{Object.keys(n.get("data")[0]).length>3&&(S=!0)}),S||"delete"===e?n:void 0},sync:function(e,t,i){if(i&&i.noServer)return i&&i.onComplete&&("delete"===e&&this.dispatchEvent("onDestroy"),i.onComplete()),{cancel:Function.prototype};if(i.proxy=g.PASSPORT,i.ajax=s.authenticatedRequest,i.headers=g.getDefaultHeaders(),"read"===e){let s;if(i.model=t,i.url=this.getUrl(e,i),!i.refresh&&t.get("id")&&(s=u.get(i.storageKey||t.get("id"))),!s)return i.headers[g.CONTENT_TYPE]?(i.method=g.POST,i.data=this.convertToRequestData(e,void 0,i),this._parent(e,t,i)):this._parent(e,t,i);i.onComplete(s)}else{if("create"===e){let t;return i.url=this.getUrl(e,i),i.wait=!0,i.method=g.POST,i.headers[g.CONTENT_TYPE]||(i.headers[g.CONTENT_TYPE]=g.ACCEPT_APPLICATION_JSON),t=i.classifiedItemId&&i.operation?this.convertToClassificationRequestData(e,void 0,i):this.convertToRequestData(e,void 0,i),this._parent("update",t,i)}if("update"===e||"patch"===e){let t;if(i.url=this.getUrl(e,i),i.wait=!0,i.method=g.PUT,i.headers[g.CONTENT_TYPE]||(i.headers[g.CONTENT_TYPE]=g.ACCEPT_APPLICATION_JSON),t=i.classifiedItemId&&i.operation?this.convertToClassificationRequestData(e,void 0,i):this.convertToRequestData(e,void 0,i))return this._parent("update",t,i);i.onComplete&&i.onComplete()}else if("delete"===e){i.url=this.getUrl(e,i),i.wait=!0,i.method=g.PUT,i.headers[g.CONTENT_TYPE]||(i.headers[g.CONTENT_TYPE]=g.ACCEPT_APPLICATION_JSON);let t=this.convertToRequestData(e,void 0,i);return this._parent("update",t,i)}}},setTempId:function(){this.set("tempId",t.getUUID())},dataForRendering:function(){let e=this.toJSON();return this.convertToJSON(e)},convertToJSON:function(t){let i=Object.keys(t),s=i.length;for(let n=0;n<s;n++){let s=i[n],r=t[s];if(r instanceof e.Class.Collection){let e=[],i=r.length;if(i)for(let t=0;t<i;t++)e.push(r.at(t).dataForRendering());t[s]=e}}return t.name=t.path||t.name||t.title,t.physicalId=t.id,t.canEdit=this.get("canEdit"),t},convertDateToResponse:function(t){return(t=new Date(t))&&"Invalid Date"!==t.toString()&&e.Date.strftime(t,"%Y-%m-%dT%T."+t.getMilliseconds())||""},convertDateToResponseForClassification:function(t){return t&&"Invalid Date"!==t.toString()&&e.Date.strftime(t,"%Y/%m/%d@12:%M:%S:GMT")||""},canCreate:function(){return"TRUE"===this.get(g.CREATE_DATA)},isSimpleTask:function(){return"TRUE"===this.get(g.IS_SIMPLE_TASK)},getOwnerUrl:function(){let e=this.get("owner"),t=this.get("ownerName");if(e||t)return d.userPictureURL(e||t,"normal")},getTransferObject:function(e){let t=this.get("type"),i=this.get("name"),s=this.get("physicalId")||this.id,r=this.serviceId||g.SPACE_SOURCE,o=n.get("3DSwym");"Person"===t&&o&&(t="pno:Person",s="iam:"+i,r="3DSwym");let l={objectId:s,objectType:t,serviceId:r,image:this.get("image"),objectType_Internal:t,displayName:this.title,displayType:f.translateType(t),source:window.widget.getValue("appId")||"X3DCSMA_AP",envId:n.get("tenant")||window.widget.getValue("x3dPlatformId")};return e=f.concatTransferObject(l,e)},getTransferObjectsForRelatedData:function(t){let i,s=this.get(t);return s&&s instanceof e.Class.Collection&&s.forEach(function(e){i=e.getTransferObject(i)}),i},isPersonType:function(){let e=this.get("type");return"Person"===e||"pno:Person"===e},get:function(e){switch(e){case"canEdit":return this.isNew()||this.canModify();case"image":return this.get("thumbnail")||this._parent.apply(this,arguments)}return this._parent.apply(this,arguments)},getImage:function(e,i){return i=i||this.serviceId,e&&!t.isAbsoluteUrl(e)&&i===g.XPLAN_SOURCE?n.get(g.XPLAN_SOURCE)+e:e},getCollabSpace:function(){let e=this.getContextModel();return e&&e.get("project")},getFieldDefinitionSource:function(){return this._fieldDefinitionSource},isComplete:function(e){return(e=e||this.state)===g.COMPLETE_STATE},canEdit:function(){return this.get("canEdit")},canModify:function(){return"TRUE"===this.get(g.MODIFY_DATA)},canReadAccess:function(){return"TRUE"===this.get(g.CAN_READ_ACCESS)},canDelete:function(){return"TRUE"===this.get(g.DELETE_DATA)},canPromote:function(){return"TRUE"===this.get(g.PROMOTE_DATA)},canDemote:function(){return"TRUE"===this.get(g.DEMOTE_DATA)},canFromConnect:function(){return"TRUE"===this.get(g.FROM_CONNECT_DATA)},canToConnect:function(){return"TRUE"===this.get(g.TO_CONNECT_DATA)},canRMCConnect:function(e){return"TRUE"===(e=e||this.get(g.CAN_RMC_CONNECT))},canChangeOwner:function(){return"TRUE"===this.get(g.CAN_CHANGE_OWNER)},getModelAccessMap:function(){return{canModify:this.canModify(),canDelete:this.canDelete(),canDemote:this.canDemote(),canPromote:this.canPromote(),canToConnect:this.canToConnect(),canFromConnect:this.canFromConnect(),canChangeOwner:this.canChangeOwner()}},getMaturityStates:function(){let e=a.get(this._fieldDefinitionSource),t=e&&f.findObject(e,"name","state");return t&&t.range.item||[]},getCESStamp:function(){return this.get("cestamp")},resetChangedAttrs:function(){this._changed={}},getContextModel:function(){let e=this.get(g.CONTEXT_ATTR);return e&&e.length&&e.at(0)},iterateRelatedItemsForViewAccess:function(e,t){let i,s,n;return t&&t.length?t.forEach((e,r)=>{(s=e.get("name"))!==g.NO_ACCESS&&((n=e.canReadAccess()||this.isNew()&&e.canCreate())||(t.remove(e),t.add(new l,{at:r}),i=!0))}):e===g.CONTEXT_ATTR&&(t.add(new l),i=!0),i&&t.resetOperationFlags(),t},isSpaceObject:function(){return this.serviceId===g.SPACE_SOURCE||this.serviceId===g.SPACE_SOURCE.toLowerCase()},isXPlanObject:function(){return this.serviceId===g.XPLAN_SOURCE},destroyModelFromCollection:function(){u.remove(this.id),this.collection&&this.collection.remove(this.id)},getModelForRelations:function(){return new i({source:g.SPACE_SOURCE,tenant:n.get("tenant"),objectId:this.id})},hasChildren:function(){return"TRUE"===this.get(this.HAS_CHILDREN_ATTR)},getModelConstructorBasedOnType:function(e){return f.getModelConstructorBasedOnType(e)},getChildRelationsNames:Function.prototype});return Object.defineProperty(h.prototype,"title",{get:function(){return this.get("title")||this.get("name")||""}}),Object.defineProperty(h.prototype,"type",{get:function(){return this.get("type")||this.get("objectType")}}),Object.defineProperty(h.prototype,"state",{get:function(){return this.get("state")}}),Object.defineProperty(h.prototype,"serviceId",{get:function(){return this.get("serviceId")||g.SPACE_SOURCE}}),h}),define("DS/ENOProjectMgmtModels/Models/Calendar",["UWA/Core","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel"],function(e,t,i,s){"use strict";return s.extend({_uwaClassName:"Calendar",_fieldDefinitionSource:t.APPLICATIONS.WORK_CALENDARS,getUrl:function(e,i){let s=this.get("relativePath");return this.isNew()||!s?this.getCalendarUrl(void 0,e,i):(this.url=t.getUrl()+s+"?",i&&(i.type&&(this.url+=t.PARAMS.TYPE+i.type),i.debug&&(this.url+=t.PARAMS.DEBUG+i.debug),i.fields&&(this.url+=t.PARAMS.FIELDS+i.fields),i.include&&(this.url+=t.PARAMS.INCLUDE+i.include),i.force&&(this.url+=t.PARAMS.FORCE+i.force)),this.url)},getCalendarUrl:function(e,s,n){e?(this.url+="/"+e,this.url=t.getAppUrl(t.APPLICATIONS.WORK_CALENDARS,e)):this.url=t.getAppUrl(t.APPLICATIONS.WORK_CALENDARS),n&&(n.type&&(this.url+=t.PARAMS.TYPE+n.type),n.debug&&(this.url+=t.PARAMS.DEBUG+n.debug),n.owned&&(this.url+=t.PARAMS.OWNED+n.owned),n.fields&&(this.url+=t.PARAMS.FIELDS+n.fields),n.include&&(this.url+=t.PARAMS.INCLUDE+n.include),n.force&&(this.url+=t.PARAMS.FORCE+n.force));let r=i.getFieldsDefinition(this.getFieldDefinitionSource());return r&&r.fieldDefinitionColumns||(this.url+=t.PARAMS.DEFINITION+"true"),this.url},parse:function(t,i){i.url&&(this.url=i.url),e.is(t,"string")&&(t=JSON.parse(t)),(t=this._parent(t,i)).hasfiles="Document"===t.type;let s=t.image,n=this.id||t.id;return t.id=n,t.physicalId=n,s&&(t.image=this.getImage(s,t.serviceId)),t}})}),define("DS/ENOProjectMgmtModels/Models/RelatedDataItem",["UWA/Core","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return t.extend({_uwaClassName:"RelatedDataItem",idAttribute:"id",setup:function(e,t){t&&t.fetchSource===i.APPLICATIONS.LIBRARIES&&(this.url=i.getAppUrl(t.fetchSource,t.subType+"/"+this.get("id")),this.set("typeicon",{iconName:"library-class"})),this._parent.apply(arguments)},getUrl:function(e,t){if(t){let e=this.get("id");"RiskContextInfo"===t.fetchSource||"ContextInfo"===t.fetchSource?this.url=i.getContextInfoUrl(e):"ObjectInfo"===t.fetchSource?this.url=i.getObjectInfoUrl(e):t.fetchSource===i.APPLICATIONS.LIBRARIES?this.url=i.getAppUrl(t.fetchSource,t.subType+"/"+e,!0):t.classifiedItemId&&t.operation&&("add"===t.operation?this.url=i.getAppUrl(i.APPLICATIONS.LIBRARIES,i.APPLICATIONS.CLASSFIEDITEM,!0):this.url=i.getAppUrl(i.APPLICATIONS.LIBRARIES,i.APPLICATIONS.CLASSFIEDITEM+"/remove",!0),this.url+=i.PARAMS.NONPUBLICRESOURCE+"true"),this.addParams(t)}return this.url},addParams:function(e){e.classifiedItemId||e.operation||!e||e.fetchSource===i.APPLICATIONS.LIBRARIES||("true"===i.DEBUG&&(this.url+=i.PARAMS.DEBUG+i.DEBUG),e.owned&&(this.url+=i.PARAMS.OWNED+e.owned),e.fields&&(this.url+=i.PARAMS.FIELDS+e.fields),e.include?this.url+=i.PARAMS.INCLUDE+e.include:this.url+=i.PARAMS.INCLUDE+"none",e.definition&&(this.url+=i.PARAMS.DEFINITION+e.definition),e.rmcType===i.TYPENAMES.OPPORTUNITY&&(this.url+=i.PARAMS.RMCTYPE+i.TYPENAMES.OPPORTUNITY)),e.mask&&(this.url+=i.PARAMS.MASK+e.mask),e.depth&&(this.url+=i.PARAMS.DEPTH+e.depth)},toJSON:function(){let e=this._parent.apply(this,arguments),t=this.get("image");return t&&(e.image=t),e},parse:function(t,i){i.url&&(this.url=i.url),e.is(t,"string")&&(t=JSON.parse(t)),(t=this._parent(t,i)).hasfiles="Document"===t.type;let s=t.image,n=this.id||t.id;return t.id=n,t.physicalId=n,s&&(t.image=this.getImage(s,t.serviceId)),t},createRelatedDataItems:function(e,t){return this.collection&&new this.collection.__proto__.constructor(e,t)},isNew:function(){return!this.get("id")}})}),define("DS/ENOProjectMgmtModels/Models/Person",["UWA/Core","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Utils/SearchUtil","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return t.extend({idAttribute:"id",_uwaClassName:"Person",setup:function(){this.get("type")||this.set("type","Person")},getUrl:function(e,t){if(t){let e=t.model;if("3DSwym"===(e&&e.serviceId))return s.getSearchUrl()+"searchStr="+e.id;t.isSearch?this.url=s.getSearchUrl()+t.term+"*":"ObjectInfo"===t.fetchSource&&(this.url=s.getObjectInfoUrl(this.get("id"))),"true"===s.DEBUG&&(this.url+=s.PARAMS.DEBUG+s.DEBUG),t.owned&&(this.url+=s.PARAMS.OWNED+t.owned),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include?this.url+=s.PARAMS.INCLUDE+t.include:this.url+=s.PARAMS.INCLUDE+"none",t.definition&&(this.url+=s.PARAMS.DEFINITION+t.definition)}return this.url},parse:function(t){return t=this._parent.apply(this,arguments),e.is(t,"array")&&(t=t[0]),t.image=i.userPictureURL(t.name,"normal"),t.fullName=t.firstname+" "+t.lastname,t.physicalId=t.id,t.hasfiles="Document"===t.type,t},isNew:function(){return!this.get("id")},getFullName:function(){let e=this.get("firstname"),t=this.get("lastname");return e&&t&&e+" "+t},get:function(e){switch(e){case"fullname":case"fullName":case"title":return this.getFullName()}return this._parent.apply(this,arguments)}})}),define("DS/ENOProjectMgmtModels/Utils/DataUtils",["UWA/Core","UWA/Utils","UWA/Class/Events","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/Models/DropValidator","DS/ENOProjectMgmtModels/Models/Person","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/RelatedDataItem","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Utils/StorageDataUtil","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,s,n,r,o,l,a,c,d){"use strict";var u=new Intl.DateTimeFormat(window.widget&&window.widget.lang,{weekday:"short",year:"numeric",month:"short",day:"numeric"});let g={objectMap:{},getObjectForAdding:function(i,s){let n,r=e.clone(s||{},!1),o={id:f.removeBracketLongURI(i||t.getUUID())},l=r.attrs,a=r.fetchOptions,u=r.sourceInfo,g=r.modelConstructor;l&&e.merge(o,l);let h=new g(o,u);if(a){let e=a.onComplete,t=a.onFailure;a.onComplete=function(){c.set(h.id,h),f.objectMap[h.id]=h,"Person"===(n=h.get("type"))&&c.set(h.get("name"),h),e&&e.apply(this,arguments)},a.onFailure=function(e,i){let s=f.getErrorMessage(e,i);f.dispatchEvent("showNotification",[{message:s||d.FAILED_TO_RETRIEVE_OR_ACCESS},"error"]),t&&t.apply(this,arguments)},h.fetch(a)}return h},getModelConstructorBasedOnType:function(e){return"Person"===e||"pno:Person"===e?r:l},getDetailedObject:function(e,t){let i;if(t){let s=t.length;for(let n=0;n<s;n++){let s=t[n];if(s.id===e){i=s;break}}}return i},getObjectDataFromDropData:function(e){let t=e.objectId,i=e.objectType,s=e.serviceId;"3DSwym"===s&&"pno:Person"===i&&(t=t.split(":")[1],i=i.split(":")[1]);let n={id:t,physicalId:t,name:e.displayName,title:e.title||e.displayName,serviceId:s,tenant:e.envId,image:e.image||e.displayPreview,type:i,path:e.path};return"Person"===i&&(n.name=t),n},getObjectDataFromFedSearchOrTypeAheadData:function(e){let t=e.id,i=e["ds6w:type_value"]||e["ds6w:type"]||e.type;"3DSwym"===e.serviceId&&"pno:Person"===i&&(t=t.split(":")[1],i=i.split(":")[1]);let s=e.label||e["ds6w:label"]||e.name,n={id:t,physicalId:t,name:s,title:e.title||s,serviceId:e.serviceId||e.sourceId||"3DSpace",tenant:o.get("tenant"),image:e.image||e.preview_url||e.type_icon_url,type:i,path:e.path};return"Person"===i&&(n.name=e.login||t),n},getObjectDataFromDropSearchOrTypeAhead:function(e){let t,i=e.dropObj,s=e.detailedObject;return i?t=this.getObjectDataFromDropData(i):s&&(t=this.getObjectDataFromFedSearchOrTypeAheadData(s)),t},getIntlDateFormat:function(e){let t=e;return"Invalid Date"!==(e=new Date(e)).toString()&&(t={actualValue:e,displayValue:isNaN(e.getTime())?t:u.format(e)}),t},getFormattedDate:function(e){return new Date(e)},validateModificationsPending:function(t,i){let s=e.clone(t||{},!1),n=s.isReload,r=s.parentView,o=s.yesEventFunc,l=s.noEventFunc,a="deleteButton"!==(i&&i.dsModel&&i.dsModel.domId)&&f.isGridViewSelectedAndGetCurrentModel(r);if(a&&!n&&a.saving)f.dispatchEvent("showNotification",[{message:d.SAVE_IN_PROCESS},"warning"]),l&&l.apply(CustomAlert,arguments);else if(a&&a.modificationsPending){let t=a.get("title"),i=n&&d.SAVE_CONFIRM_MSG||d.CANCEL_CONFIRM_MSG,r=(n?d.UN_SAVED_CHANGES:d.CANCEL_CHANGES)+' "'+t+'"';e.extend(s,{title:r,message:i,yesLabel:d.YES,noLabel:d.NO}),arguments[0]=s,f.dispatchEvent("showConfirmDialog",arguments)}else{let e=Array.prototype.slice.call(arguments,1);o&&o.apply(void 0,e)}},isGridViewSelectedAndGetCurrentModel:function(e){return f.isGridViewSelected()&&e&&e.getSelectedCurrentModel()},isGridViewSelected:function(){return"gridView"===o.getSelectedViewName()},getLoggedInUserFullName:function(){return o.get("firstName")+" "+o.get("lastName")},isLoggedInUserSelected:function(e){return e&&e.get("name")===o.get("user")},getPersonObjectInfo:function(t,i){let s=e.clone(i||{},!1).fetchOptions;s=e.clone(s||{},!1);let n=e.merge(s,{fetchSource:"ObjectInfo"});return f.getObjectForAdding(t,{attrs:{type:"Person",serviceId:"3DSwym"},fetchOptions:n,modelConstructor:r})},isSelfAssigned:function(t){let i=t.get("assignees");if(t instanceof e.Class.Model){let e=c.get(t.id);e&&(i=e.assignees)}return Boolean(i&&i.length&&f.findObject(i,"name",o.get("user")))},validateDroppedObjects:function(e,t,i){let s=e&&e.length;if(s){let r,o;for(var n=0;n<s;n++)if(r=e[n],o=f.validateDroppedObject(r,t))return f.dispatchEvent("showNotification",[{message:o},"error"]),i&&i(),o}},validateDroppedObject:function(e,t){return n.validateDroppedObject(e,t)},alreadyHasObjectInRelatedData:function(e,t){t=f.removeBracketLongURI(t);let i=e&&e.length&&e._alreadyHasObjectInRelatedData(t);if(i){let e=i.getTransferObject();return e&&e.data.items[0]}},getObjectById:function(e){return f.objectMap[e]},removeBracketLongURI:function(t){return t&&e.is(t,"string")&&t.startsWith("<")&&t.endsWith(">")&&(t=t.substr(1,t.length-2)),t},concatTransferObject:function(t,i){let s=e.clone(t||{},!1);return s.serviceId=s.serviceId||"3DSpace",i&&i.data?i.data.items.push(s):i={protocol:"3DXContent",version:"1.0",source:s.source,data:{items:[s]}},i},findIndex:function(e,t,i){return(e=e&&e.length&&(e.findIndex?e:e.toArray()))&&e.findIndex(e=>e[t]===i)},findObject:function(e,t,i){return e&&e.length&&e.find(function(e){return(e[t]||e.get&&e.get(t))===i})},filterObjects:function(t,i,s){return t&&t.length&&t.filter(function(t){let n=t[i]||t.get&&t.get(i);return e.is(s,"array")?-1!==s.indexOf(n):n===s})},getAttributeValues:function(e,t){return e&&e.length&&e.map(function(e){return e[t]||e.get(t)})},cloneJSONObject:function(e){return e&&JSON.parse(JSON.stringify(e))},getRangeValueFromFieldDefinition:function(e,t,i){return a.getFieldDefinitionColumn(i,e).fieldDefinitionRangeItem[t]},getErrorMessage:function(t,i){return e.is(t,"string")&&(t=f.parseJSONString(t)),e.is(i,"string")&&(i=f.parseJSONString(i)),i&&i.internalError||i&&i.error||i&&i.message||i&&i.msg||t&&t.error||t&&t.err&&t.err.message||t&&t.err||t&&t.message||i||d.ERROR},parseJSONString:function(e){let t;try{t=JSON.parse(e)}catch(i){t=e||d.ERROR,console.log(i)}return t},getDragDataKey:function(){return this.isIE()||this.isEdge()?"text":"text/searchitems"},getSeverityItem:function(e){let t=e.riskLevel;return{severityIndex:e.severityIndex,backgroundColor:e.backgroundColor,textColor:e.textColor,actualValue:t,displayValue:t+"-"+(e.nls[widget.lang]||e.name)}},getNLS:function(e,t,i){let s=((i=i?i+"_":"")+t).toUpperCase().replace(" ","_");return e&&e.get(s)}};e.merge(g,s),g.properties=Object.keys(g);let f=(g=i.extend(g))._instance||new g;return f}),define("DS/ENOProjectMgmtModels/Models/SaveModels",["UWA/Core","UWA/Utils","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Models/RequestData","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel"],function(e,t,i,s,n,r,o){"use strict";return o.extend({_uwaClassName:"SaveModels",getUrl:function(e,t){return this.url=n.getAppUrl(n.APPLICATIONS.RISK),t&&(t.type&&(this.url+=n.PARAMS.TYPE+t.type),t.debug&&(this.url+=n.PARAMS.DEBUG+t.debug),t.owned&&(this.url+=n.PARAMS.OWNED+t.owned),t.fields&&(this.url+=n.PARAMS.FIELDS+t.fields),t.include&&(this.url+=n.PARAMS.INCLUDE+t.include),t.force&&(this.url+=n.PARAMS.FORCE+t.force)),this.url},convertToRequestData:function(e){let t;if("create"===e){t=new s;let e,n,o,l=[],a=this.get("selectedNodes"),c=this.get("massUpdateModel");if(a&&a.length&&a.forEach(t=>{(o=t.options.data.model).set(c.changedAttributes()),(n=o.convertToRequestData("update"))&&(e=n.get("data"))&&e.length&&e.forEach(e=>{delete e.contextId,l.push(e)})}),!l.length){let e=i.setHelper.apply(this,arguments).options;return void(e.onComplete&&e.onComplete.apply(this,arguments))}t.set("data",l),t.set("csrf",r.prototype.getCSRF())}return t},parse:function(e,t){let i,s,n=this,r=e&&e.data;return r&&r.length&&r.forEach(e=>{i=n.getSelectedNodesById(e.id),(s=i&&i.options.data.model)&&s.parse(e,t)}),e},getSelectedNodesById:function(e){let t=this.get("selectedNodes");return t&&t.length&&t.find(function(t){return t._options.id===e})}})}),define("DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection",["UWA/Core","UWA/Utils","UWA/Class/Collection","DS/WAFData/WAFData","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/RequestData","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtModels/Models/FieldsDefinition"],function(e,t,i,s,n,r,o,l,a){"use strict";return i.extend({_uwaClassName:"ENOProjectMgmtBaseCollection",setup:function(e){return this.resetOperationFlags(),this.listenTo(this,{onError:this.removeModelFromCollection}),e&&e.isRelatedData&&this.listenTo(this,{onAdd:this.relatedDataAdded,onRemove:this.relatedDataRemoved}),this._parent.apply(this)},sync:function(e,t,i){if(i.proxy=r.PASSPORT,i.ajax=s.authenticatedRequest,i.headers=r.getDefaultHeaders(),"read"===e)return i.url=this.getUrl(e,i),Object.assign({ajax:s.authenticatedRequest},i),i.headers[r.CONTENT_TYPE]?(i.method=r.POST,i.data=this.convertToRequestData(e,void 0,i),this._parent(e,t,i)):this._parent(e,t,i)},convertToRequestData:function(e,t,i){return"$ids="+i.idList},parse:function(e){let t,i=e.csrf&&e.csrf.value;return i&&l.prototype.setCSRF(i),e.definitions&&e.definitions.length&&a.setFieldsDefinition(this.getFieldDefinitionSource(),e.definitions),e.data&&e.data.length>0?t=e.data[0].history?e.data[0].history:e.data:e.cspaces&&e.cspaces.length>0?t=e.cspaces:e.member?t=e.member:e.length>0&&(t=e),t},getFieldDefinitionSource:function(){return this._fieldDefinitionSource},relatedDataAdded:function(e,t,i){i||(i={}),this._alreadyHasObjectInRelatedData(e.id,this.relatedDataToDelete)?(i.ignoreAddref||this.relatedDataToAdd.push(e),this._removeModelFromArray(this.relatedDataToDelete,e)):i.ignoreAddref||this.relatedDataToAdd.push(e)},relatedDataRemoved:function(e,t,i){this._alreadyHasObjectInRelatedData(e.id,this.relatedDataToAdd)?this._removeModelFromArray(this.relatedDataToAdd,e):i.ignoreAddref||this.relatedDataToDelete.push(e)},_removeModelFromArray:function(e,t){for(let i=0;i<=e.length;i++)if(e[i].get("id")===t.get("id")){e.splice(i,1);break}},_alreadyHasObjectInRelatedData:function(t,i){return(i=i||this).length&&i.find(i=>e.equals(i.id,t)||i.get("physicalId")===t||i.get("name")===t||i.get("tempId")===t||"iam:"+i.get("name")===t)},convertRelatedDataToRequestData:function(e,t,i){let s=!1,n=[];return this._processRelatedData(e,n,i),n.length>0&&(t[i.key]=n,s=!0),s},_processRelatedData:function(e,t,i){let s,n=this;this.forEach(function(o){s=n.relatedDataToAdd.includes(o)?"create":e;let l=o.convertToRequestData(s,!0,i);l&&l.updateAction!==r.UPDATE_ACTION.NONE&&(o.isXPlanObject()&&delete l.image,t.push(l))}),this.relatedDataToDelete&&this.relatedDataToDelete.forEach(function(e){t.push(e.convertToRequestData("delete",!0,i))})},resetOperationFlags:function(){this.relatedDataToDelete=[],this.relatedDataToAdd=[]},removeAll:function(){if(this.length){let e=this._models;this.reset(),this.relatedDataToDelete=e}},removeModelFromCollection:function(e){if(e&&e.isNew&&e.isNew()){let t=this._alreadyHasObjectInRelatedData(e.id||e.get("tempId"),this);this.remove(t)}}})}),define("DS/ENOProjectMgmtModels/Collections/Persons",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Utils/SearchUtil","DS/ENOProjectMgmtModels/Models/Person","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";let n=e.extend({_uwaClassName:"Persons",model:i,getUrl:function(e,t){if(t&&t.isSearch)return s.getSearchUrl()+t.searchParams+"*"}});return n.typeAheadCallback=function(e,i,s,r){let o="*",l=e.excludeSearchTypes;l&&(o="*  NOT "+t.buildSearchTypeQuery(l,{source:e.searchSource}));let a,c="searchStr="+encodeURIComponent(i)+o;c+="&typeStr="+(a=e&&e.searchTypes?encodeURIComponent(e.searchTypes):"person"===e.type?"Person":"*"),r.isSearch=!0,r.searchParams=c;let d=new n;r.onComplete=function(){let e=[];d.forEach(function(i){let s=i.get("type"),n=i.get("name")||"",r=i.getFullName(),o=i.get("title")||n,l=i.get("image")||t.userPictureURL(n)||"";e.push({value:i.id,label:r||o,name:r,image:l,icon:l,login:n,sourceId:"3DSpace",rowObject:i,"ds6w:type":s})}),d.reset(),s(e,r)},d.fetch(r)},n}),define("DS/ENOProjectMgmtModels/Collections/SecurityContexts",["UWA/Class/Collection","UWA/Class/Model","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/SecurityContext","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s,n){"use strict";return i.extend({_uwaClassName:"SecurityContexts",model:s,getUrl:function(e,t){return n.getSecurityContextUrl()},isAllOrgAreSame:function(){let e,t,i,s,n,r=!0;return this.length>0&&3===(i=(t=this.at(0).get("displayName")).split(".")).length&&(e=i[1]),this.forEach(t=>{if(s=t.get("displayName"),n=s.split("."),!e||e!==n[1])return r=!1}),r},getSortedPreferences:function(){let i,s={},n="",r=0,o=new e([],{comparator:"label"}),l=this.isAllOrgAreSame();return this.forEach(function(e){let s=(i=e.get("displayName")).split(".");3===s.length&&(i=s[2]+" ● ",l||(i+=s[1]+" ● "),i+=s[0]);let a=new t;a.set("label",i),a.set("value",e.get("name")),o.push(a),(e.get("defaultValue")||0===r)&&(n=e.get("name")),r++}),o.sort(),s.list=o.toJSON(),s.defaultValue=n,s}})}),define("DS/ENOProjectMgmtModels/Collections/RelatedDataItems",["UWA/Core","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/NoAccessModel","DS/ENOProjectMgmtModels/Models/RelatedDataItem","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection"],function(e,t,i,s,n,r){"use strict";return r.extend({_uwaClassName:"RelatedDataItems",model:n,setup:function(){return this._parent({isRelatedData:!0})},getUrl:function(e,t){let s=t.sourceType||i.APPLICATIONS.RISK;return this.url=i.getAppUrl(s,t&&t.id?t.id+"/"+t.relatedSource:void 0),this.url},_prepareModel:function(e){return e.type?this.model=this.model.prototype.getModelConstructorBasedOnType(e.type):e.name===i.NO_ACCESS&&(this.model=s),this._parent.apply(this,arguments)}})}),define("DS/ENOProjectMgmtModels/Models/Task",["DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Collections/RelatedDataItems","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return e.extend({_uwaClassName:"Task",_fieldDefinitionSource:i.APPLICATIONS.TASK,getUrl:function(e,t){return t||(t={}),this.isNew()?this.getTASKUrl(void 0,e,t):t.mask?this.getClassificationUrl(t):("delete"===e&&(t.force=!0),this.getTASKUrl(this.get("id"),e,t))},getTASKUrl:function(e,t,s){return e?(this.url+="/"+e,this.url=i.getAppUrl(i.APPLICATIONS.TASK,e)):this.url=i.getAppUrl(i.APPLICATIONS.TASK),s&&(s.type&&(this.url+=i.PARAMS.TYPE+s.type),s.debug&&(this.url+=i.PARAMS.DEBUG+s.debug),s.owned&&(this.url+=i.PARAMS.OWNED+s.owned),s.fields&&(this.url+=i.PARAMS.FIELDS+s.fields),s.include&&(this.url+=i.PARAMS.INCLUDE+s.include),s.force&&(this.url+=i.PARAMS.FORCE+s.force)),this.url},createRelatedDataItems:function(e,i){return new t(e,i)},canEdit:function(){return"TRUE"===this.get("modifyAccess")},isComplete:function(){let e=this.get("state");return Boolean("Complete"===e||this.completed)}})}),define("DS/ENOProjectMgmtModels/Models/RskOpp",["UWA/Core","DS/ENOProjectMgmtModels/Collections/RelatedDataItems","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtCommonComponents/collection/MatrixConfigCollection"],function(e,t,i,s,n,r,o){"use strict";return s.extend({_uwaClassName:"RskOpp",idAttribute:"id",setup:function(){let e=i.get("context");if(e&&this.isNew()){let i=new t;i.add(e),this.set("context",i)}},getUrl:function(e,t){return t||(t={}),this.isNew()?this.getApplicationUrl(void 0,e,t):t.mask?this.getClassificationUrl(t):("delete"===e&&(t.force=!0),this.getApplicationUrl(this.get("id"),e,t))},getApplicationUrl:function(e,t,i){let s=this.getAppUrlType();return this.url=e?r.getAppUrl(s,e):r.getAppUrl(s),i&&(i.type&&(this.url+=r.PARAMS.TYPE+i.type),"true"===r.DEBUG&&(this.url+=r.PARAMS.DEBUG+r.DEBUG),i.owned&&(this.url+=r.PARAMS.OWNED+i.owned),i.fields&&(this.url+=r.PARAMS.FIELDS+i.fields),i.include&&(this.url+=r.PARAMS.INCLUDE+i.include),i.force&&(this.url+=r.PARAMS.FORCE+i.force)),this.url},createRelatedDataItems:function(e,i){return new t(e,i)},getActionsAttrsAccessMap:function(){let t=this.getModelAccessMap();return e.merge(t,{isComplete:this.isComplete()})},isValidConfiguration:function(){return"TRUE"===this.get("validConfiguration")},hasContextViewAccess:function(e){let t=(e=e||this.get("context"))&&e.length&&e.at(0);return t&&t.canReadAccess()},getRMCActualId:function(){let e=this.get("rmcActual");return e&&e.length&&(e.at(0)||e[0]).id},getMatrixConfig:function(){let e=this.getRMCActualId();return e&&this.getMatrixConfigById(e)},getMatrixConfigById:function(e){return e&&o.getMatrixConfigDefinition(e)},getMatrixCellInfo:function(e,t,i){return o.getMatrixCellInfo(e,t,i)},getSeverityInfo:function(e,t,i){let s;if(e){let r=e.get("matrix").severity,o=this.getMatrixCellInfo(e,t,i);s=o&&n.findObject(r,"riskLevel",o.riskLevel)}return s},getRiskSeverityInfo:function(){let e=this.getMatrixConfig(),t=this.get("impact"),i=this.get("probability");return this.getSeverityInfo(e,t,i)},getSeverityLevel:function(){let e=this.getRiskSeverityInfo(),t=e&&n.getSeverityItem(e);return t&&t.displayValue},getMappedValue:function(){let e,t=this.get("impact"),i=this.get("probability"),s=o._defaultConfiguration,r=s&&s.get("matrix"),l=r&&r.severity,a=this.getMatrixConfig(),c=a&&this.getMatrixCellInfo(a,t,i);if(c&&l){let t;t=c.defaultCellId?o.getMatrixCellInfoBasedOnKey(s,"cellId",c.defaultCellId):this.getMatrixCellInfo(s,c.Xvalue,c.Yvalue);let i=n.findObject(l,"riskLevel",t.riskLevel),r=i&&n.getSeverityItem(i);t&&r&&(e={matrixXY:t.Xvalue+t.Yvalue,mappedMatrixXY:t.Xvalue+" * "+t.Yvalue,mappedSeverity:r.displayValue,severityItem:r},this.set({mappedMatrixXY:e.mappedMatrixXY,mappedSeverity:e.mappedSeverity}))}return e},set:function(){let t=n.setHelper.apply(this,arguments),i=e.clone(t.attrs||{},!1);if(i&&i.hasOwnProperty(r.CONTEXT_ATTR)){let e=i[r.CONTEXT_ATTR];e&&(i[r.CONTEXT_ATTR]=this.iterateRelatedItemsForViewAccess(r.CONTEXT_ATTR,e))}return this._parent.apply(this,arguments)},get:function(e){let t=this._parent.apply(this,arguments);switch(e){case"canEdit":t&&!this.isNew()&&(t=this.canRMCConnect()||!this.hasContextViewAccess()&&this.isValidConfiguration());break;case"image":t=t||this.get("typeicon")}return t}})}),define("DS/ENOProjectMgmtModels/Models/Library",["DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Collections/RelatedDataItems","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return e.extend({_uwaClassName:"Library",idAttribute:"id",setup:function(){!this.get("type")&&this.set("type","Library"),this.set("typeicon",{iconName:"library"})},getUrl:function(e,t){return t||(t={}),this.isNew()?this.getSubTypeUrl(void 0,e,t.subType||i.APPLICATIONS.LIBRARY,t):("delete"===e&&(t.force=!0),this.getSubTypeUrl(this.get("id"),e,t.subType||i.APPLICATIONS.LIBRARY,t))},getSubTypeUrl:function(e,t,s,n){return this.url,this.url=e?i.getAppUrl(i.APPLICATIONS.LIBRARIES,s+"/"+e):i.getAppUrl(i.APPLICATIONS.LIBRARIES,s),n&&(n.mask&&(this.url+=i.PARAMS.MASK+n.mask),n.depth&&(this.url+=i.PARAMS.DEPTH+n.depth)),this.url},parse:function(e){return!(e=this._parent.apply(this,arguments)).name||e.title&&""!==e.title||(e.title=e.name),e},createRelatedDataItems:function(e,i){return new t(e,i)},canModify:function(){return"TRUE"===this.get(i.MODIFY_DATA)},canDelete:function(){return"TRUE"===this.get(i.DELETE_DATA)},canPromote:function(){return"TRUE"===this.get(i.PROMOTE_DATA)},canDemote:function(){return"TRUE"===this.get(i.DEMOTE_DATA)},canFromConnect:function(){return"TRUE"===this.get(i.FROM_CONNECT_DATA)},canToConnect:function(){return"TRUE"===this.get(i.TO_CONNECT_DATA)}})}),define("DS/ENOProjectMgmtModels/Collections/Libraries",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Library","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return e.extend({_uwaClassName:"Libraries",model:t,getUrl:function(e,t){return this.url=i.getAppUrl(i.APPLICATIONS.LIBRARIES,i.APPLICATIONS.LIBRARY+"/search"),t.top&&(this.url+=i.PARAMS.TOP+t.top),this.url}})}),define("DS/ENOProjectMgmtModels/Models/SearchObject",["DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel"],function(e){"use strict";return e.extend({})}),define("DS/ENOProjectMgmtModels/Models/Risk",["DS/ENOProjectMgmtModels/Models/RskOpp","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t){"use strict";return e.extend({_uwaClassName:"Risk",_fieldDefinitionSource:t.APPLICATIONS.RISK,_sourceType:t.APPLICATIONS.RISK,setup:function(){!this.get("type")&&this.set("type",t.TYPENAMES.RISK),this._parent.apply(this,arguments)},getAppUrlType:function(){return t.APPLICATIONS.RISK}})}),define("DS/ENOProjectMgmtModels/Models/Opportunity",["DS/ENOProjectMgmtCommonComponents/utils/CommonUtils","DS/ENOProjectMgmtModels/Models/RskOpp","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/FieldsDefinition"],function(e,t,i,s){"use strict";return t.extend({_uwaClassName:"Opportunity",_fieldDefinitionSource:i.APPLICATIONS.OPPORTUNITY,_sourceType:i.APPLICATIONS.OPPORTUNITY,setup:function(){!this.get("type")&&this.set("type",i.TYPENAMES.OPPORTUNITY),this.isNew()&&this.setDefaultUOMValues(),this._parent.apply(this,arguments)},getAppUrlType:function(){return i.APPLICATIONS.OPPORTUNITY},setDefaultUOMValues:function(){if(!this.get(i.ESTIMATED_BENEFIT_ATTR)&&this.set(i.ESTIMATED_BENEFIT_ATTR,"0"),!this.get(i.ESTIMATED_BENEFIT_UNIT_ATTR)){let e=this.getUOMInputIndex();-1!==e&&this.set(i.ESTIMATED_BENEFIT_UNIT_ATTR,e)}},getUOMInputIndex:function(t){if(!isNaN(t))return t;let n;t?n="value":(n="default",t=!0);let r=s.getFieldRangeItems(this.getFieldDefinitionSource(),i.ESTIMATED_BENEFIT_UNIT_ATTR);return r&&e.findIndex(r,n,t)}})}),define("DS/ENOProjectMgmtModels/Models/MatrixConfiguration",["UWA/Core","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Collections/RelatedDataItems","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtCommonComponents/utils/CommonUtils"],function(e,t,i,s,n){"use strict";return s.extend({_uwaClassName:"MatrixConfiguration",_fieldDefinitionSource:t.APPLICATIONS.MATRIX_CONFIGURATION,getUrl:function(e,t){return t||(t={}),this.isNew()?this.getMatrixConfigurationUrl(void 0,e,t):("delete"===e&&(t.force=!0),this.getMatrixConfigurationUrl(this.get("id"),e,t))},getMatrixConfigurationUrl:function(e,i,s){return e?(this.url+="/"+e,this.url=t.getAppUrl(t.APPLICATIONS.MATRIX_CONFIGURATION,e)):this.url=t.getAppUrl(t.APPLICATIONS.MATRIX_CONFIGURATION),s&&(s.type&&(this.url+=t.PARAMS.TYPE+s.type),"true"===t.DEBUG&&(this.url+=t.PARAMS.DEBUG+t.DEBUG),s.fields&&(this.url+=t.PARAMS.FIELDS+s.fields),s.include&&(this.url+=t.PARAMS.INCLUDE+s.include),s.force&&(this.url+=t.PARAMS.FORCE+s.force)),this.get("rmcType")===t.TYPENAMES.OPPORTUNITY&&(this.url+=t.PARAMS.RMCTYPE+t.TYPENAMES.OPPORTUNITY),this.url},createRelatedDataItems:function(e,t){return new i(e,t)},set:function(){let t=n.setHelper.apply(this,arguments),i=e.clone(t.attrs||{},!1);if(i&&i.hasOwnProperty("configuredItems")){let e=i.configuredItems;e&&(i.configuredItems=this.iterateRelatedItemsForViewAccess("configuredItems",e))}return this._parent.apply(this,arguments)},get:function(e){switch(e){case"canEdit":return this.isNew()||this.canModify()}return this._parent.apply(this,arguments)}})}),define("DS/ENOProjectMgmtModels/Collections/MatrixConfigurations",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/MatrixConfiguration","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return e.extend({_uwaClassName:"MatrixConfigurations",_fieldDefinitionSource:i.APPLICATIONS.MATRIX_CONFIGURATION,model:t,getUrl:function(e,t){return t.contextId?this.url=i.getAppUrl(i.APPLICATIONS.MATRIX_CONFIGURATION,t.contextId):this.url=i.getAppUrl(i.APPLICATIONS.MATRIX_CONFIGURATION),"true"===i.DEBUG&&(this.url+=i.PARAMS.DEBUG+i.DEBUG),t.fields&&(this.url+=i.PARAMS.FIELDS+t.fields),t.include&&(this.url+=i.PARAMS.INCLUDE+t.include),t.rmcType===i.TYPENAMES.OPPORTUNITY&&(this.url+=i.PARAMS.RMCTYPE+i.TYPENAMES.OPPORTUNITY),this.url+=i.PARAMS.DEFINITION+"true",this.url}})}),define("DS/ENOProjectMgmtModels/Collections/Risks",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Risk","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return e.extend({_uwaClassName:"Risks",_fieldDefinitionSource:s.APPLICATIONS.RISK,model:t,getUrl:function(e,t){this.url=s.getAppUrl(s.APPLICATIONS.RISK),this.url+=s.PARAMS.TYPE+s.TYPENAMES.RISK,t.contextId&&(this.url+=s.PARAMS.CONTEXTID+t.contextId),t.completed&&(this.url+=s.PARAMS.COMPLETED+t.completed),t.filter&&("owned"===t.filter?this.url+=s.PARAMS.OWNED+"true":"assigned"===t.filter?this.url+=s.PARAMS.ASSIGNED+"true":"organization"===t.filter&&(this.url+=s.PARAMS.ORGANIZATION+"true")),"true"===s.DEBUG&&(this.url+=s.PARAMS.DEBUG+s.DEBUG),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include),t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED);let n=i.getFieldsDefinition(this.getFieldDefinitionSource());return n&&n.fieldDefinitionColumns||(this.url+=s.PARAMS.DEFINITION+"true"),this.url}})}),define("DS/ENOProjectMgmtModels/Collections/Opportunites",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Opportunity","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return e.extend({_uwaClassName:"Opportunites",_fieldDefinitionSource:s.APPLICATIONS.OPPORTUNITY,model:t,getUrl:function(e,t){this.url=s.getAppUrl(s.APPLICATIONS.OPPORTUNITY),this.url+=s.PARAMS.TYPE+s.TYPENAMES.OPPORTUNITY,t.contextId&&(this.url+=s.PARAMS.CONTEXTID+t.contextId),t.completed&&(this.url+=s.PARAMS.COMPLETED+t.completed),t.filter&&("owned"===t.filter?this.url+=s.PARAMS.OWNED+"true":"assigned"===t.filter?this.url+=s.PARAMS.ASSIGNED+"true":"organization"===t.filter&&(this.url+=s.PARAMS.ORGANIZATION+"true")),"true"===s.DEBUG&&(this.url+=s.PARAMS.DEBUG+s.DEBUG),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include),t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED);let n=i.getFieldsDefinition(this.getFieldDefinitionSource());return n&&n.fieldDefinitionColumns||(this.url+=s.PARAMS.DEFINITION+"true"),this.url},convertToRequestData:function(e,t,i){return"$ids="+i.idList}})}),define("DS/ENOProjectMgmtModels/Models/Assessment",["UWA/Core","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Collections/RelatedDataItems"],function(e,t,i,s,n){"use strict";return t.extend({_uwaClassName:"Assessment",_fieldDefinitionSource:i.APPLICATIONS.ASSESSMENT,_sourceType:i.APPLICATIONS.ASSESSMENT,getUrl:function(e,t){return t||(t={}),this.isNew()?this.getApplicationUrl(void 0,e,t):t.mask?this.getClassificationUrl(t):("delete"===e&&(t.force=!0),this.getApplicationUrl(this.get("id"),e,t))},getApplicationUrl:function(e,t,s){return e?(this.url+="/"+e,this.url=i.getAppUrl(i.APPLICATIONS.ASSESSMENT,e)):this.url=i.getAppUrl(i.APPLICATIONS.ASSESSMENT),s&&(s.type&&(this.url+=i.PARAMS.TYPE+s.type),"true"===i.DEBUG&&(this.url+=i.PARAMS.DEBUG+i.DEBUG),s.owned&&(this.url+=i.PARAMS.OWNED+s.owned),s.fields&&(this.url+=i.PARAMS.FIELDS+s.fields),s.include&&(this.url+=i.PARAMS.INCLUDE+s.include),s.force&&(this.url+=i.PARAMS.FORCE+s.force)),this.url},createRelatedDataItems:function(e,t){return new n(e,t)}})}),define("DS/ENOProjectMgmtModels/Collections/Assessments",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Assessment","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return e.extend({_uwaClassName:"Assessments",_fieldDefinitionSource:s.APPLICATIONS.ASSESSMENT,model:t,getUrl:function(e,t){this.url=s.getAppUrl(s.APPLICATIONS.ASSESSMENT),this.url+=s.PARAMS.TYPE+s.TYPENAMES.ASSESSMENT,t.contextId&&(this.url+=s.PARAMS.CONTEXTID+t.contextId),t.completed&&(this.url+=s.PARAMS.COMPLETED+t.completed),t.filter&&("owned"===t.filter?this.url+=s.PARAMS.OWNED+"true":"assigned"===t.filter?this.url+=s.PARAMS.ASSIGNED+"true":"organization"===t.filter&&(this.url+=s.PARAMS.ORGANIZATION+"true")),"true"===s.DEBUG&&(this.url+=s.PARAMS.DEBUG+s.DEBUG),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include),t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED);let n=i.getFieldsDefinition(this.getFieldDefinitionSource());return n&&n.fieldDefinitionColumns||(this.url+=s.PARAMS.DEFINITION+"true"),this.url},convertToRequestData:function(e,t,i){return"$ids="+i.idList}})}),define("DS/ENOProjectMgmtModels/Models/BaseContext",["UWA/Core","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Collections/Risks","DS/ENOProjectMgmtModels/Collections/Opportunites","DS/ENOProjectMgmtModels/Models/CSRFDataModel","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s,n,r){"use strict";return t.extend({_uwaClassName:"BaseContext",idAttribute:"id",setup:function(t,i){let s=e.clone(i||{},!1);this._fetchSource=s.fetchSource,this._sourceType=s.sourceType,this._fieldDefinitionSource=s.fieldDefinitionSource;let n=this.get(r.OBJECT_TYPE);return n&&this.set("type",n),this._parent.apply(this,arguments)},getUrl:function(e,t){t.fetchSource===r.APPLICATIONS.CONTEXT_INFO?(this.url=r.getContextInfoUrl(this.id),this._sourceType===r.APPLICATIONS.OPPORTUNITY&&(this.url+=r.PARAMS.RMCTYPE+r.TYPENAMES.OPPORTUNITY)):t.fetchSource===r.APPLICATIONS.PROJECT?(this.url+="/"+this.id,this.url=r.getAppUrl(r.APPLICATIONS.PROJECT,this.id)):this.url=r.getObjectInfoUrl(this.id),"true"===r.DEBUG&&(this.url+=r.PARAMS.DEBUG+r.DEBUG),t.completed&&(this.url+=r.PARAMS.COMPLETED+t.completed),t.filter&&("owned"===t.filter?this.url+=r.PARAMS.OWNED+"true":"assigned"===t.filter&&(this.url+=r.PARAMS.ASSIGNED+"true")),t.subFilter&&"subprojectrisks"===t.subFilter?this.url+=r.PARAMS.SUBPROJECTRISKS+"true":t.subFilter&&"subprojectopportunities"===t.subFilter&&(this.url+=r.PARAMS.SUB_PROJECT_OPPORTUNITIES+"true"),t.fields&&(this.url+=r.PARAMS.FIELDS+t.fields),t.include&&(this.url+=r.PARAMS.INCLUDE+t.include),t.definition&&(this.url+=r.PARAMS.DEFINITION+t.definition);let i=this.serviceId;i&&(this.url+=r.PARAMS.SERVICE+i);let s=this.get("type");return s&&(this.url+=r.PARAMS.TYPE+s),this.url},dataForRendering:function(){let e=this._parent.apply(this,arguments),t=this.get("image");return t&&(e.image=t),e},parse:function(e){e=this._parent.apply(this,arguments),this._sourceType===r.APPLICATIONS.RISK?e.risks=new i(e.risks,{parse:!0,add:!0,remove:!0,merge:!0}):this._sourceType===r.APPLICATIONS.OPPORTUNITY&&(e.opportunities=new s(e.opportunities,{parse:!0,add:!0,remove:!0,merge:!0}));let t=e.image,n=this.id||e.id;return e.id=n,e.physicalId=n,t&&(e.image=this.getImage(t,e.serviceId)),e},canCreate:function(){return"TRUE"===this.get(r.CREATE_DATA)},isSimpleTask:function(){return"TRUE"===this.get(r.IS_SIMPLE_TASK)},isProgramContext:function(){return"Program"===this.get("type")}})}),define("DS/ENOProjectMgmtModels/Models/BaseContextScope",["UWA/Core","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Models/BaseContext","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Collections/RelatedDataItems"],function(e,t,i,s,n,r){"use strict";return i.extend({_uwaClassName:"BaseContextScope",collection:void 0,setup:function(){this.collection=new r,this._parent.apply(this,arguments)},add:function(e,i,r){if(e===n.CONTEXT_ATTR){let n=s.getContextId(),o=s.get("isComponent");(n!==i||r&&r.hasOwnProperty("showLoadSpinner")||o)&&t.validateModificationsPending({parentView:r.homeView,yesEventFunc:this.handleAddContext.bind(this,e,i,r)},r)}},remove:function(e,i,s){return e===n.CONTEXT_ATTR&&t.validateModificationsPending({parentView:s.parentView,yesEventFunc:this.handleRemoveContext.bind(this,e,s)},s),this._parent.apply(this,arguments)},set:function(t,i,r){if(t===n.CONTEXT_ATTR){let n=e.clone(r||{},!1),o=n.config,l=s.get("isComponent");o&&o.singleObjectOnly&&this.collection.length&&(this.collection.reset(),this.collection.resetOperationFlags()),i&&i instanceof e.Class.Model&&(this.collection.add(i),l?s.set(t,i):this.setContextCache(i),n.callback=function(){n.homeView.contextView&&n.homeView.contextView.container.click()},this.dispatchEvent("onAdd",[n])),arguments[1]=this.collection}return this._parent.apply(this,arguments)},get:function(e){switch(e){case"canEdit":return!0}return this._parent.apply(this,arguments)},handleAddContext:function(s,n,r){let o=e.clone(r||{},!1);o.detailedObject=t.getDetailedObject(n,o.detailedObjects);let l=t.getObjectDataFromDropSearchOrTypeAhead(o),a=l.id,c=t.getObjectForAdding(a,{attrs:l,modelConstructor:o.modelConstructor||i,sourceInfo:o.homeView._contextSourceInfo});this.set(s,c,o)},handleRemoveContext:function(e,t){t.config.singleObjectOnly&&this.collection.length&&(this.collection.reset(),this.collection.resetOperationFlags()),this.set(e,this.collection,t),this.dispatchEvent("onChange:"+e,[this,this.collection,t]),this.setContextCache(),this.dispatchEvent("onRemove",t)},setContextCache:function(e){let t,i=s.get("tenant");e&&(t={id:e.id,type:e.get("type"),name:e.title,serviceId:e.serviceId},e.unset("risks")),i&&widget.setValue(i,{context:t}),s.set(n.CONTEXT_ATTR,e)},getConnectedRMC:function(){let e,t=this.getContextModel();if(t){let i=t.get("configuration");e=i&&i.length&&i[0]}return e}})}),define("DS/ENOProjectMgmtModels/Models/Tag",["UWA/Core","DS/ENOProjectMgmtModels/Utils/DataUtils","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel"],function(e,t,i,s){"use strict";return s.extend({_uwaClassName:"Tag",updateTagger:function(e,t,s,n){let r=i.getFieldTaggerMap();r&&this._updateTaggerBasedFieldMap(t,r,s,n),e.updateTagData(this)},_updateTaggerBasedFieldMap:function(e,i,s,n){let r=this;for(let o in i){let l,a={};if(i[o].includes&&i[o].includes(".")){let[t,c]=i[o].split(".");if(o.contains("heatMap"))if(n){let i=r._setFieldValue(t,e,s),n=r._setFieldValue(c,e,s);l=n&&i&&n+" * "+i}else{let t=e.getMappedValue();l=t&&t.mappedMatrixXY}else{let i=e.get(t);i&&i.length>0?i.forEach(function(e,t){let i=r._setFieldValue(c,e,s,n);i&&(a[t]=i)}):this.unset(o)}}else l=o.contains("reserved")||o.contains("type")||o.contains("isLastRevision")?i[o]:o.contains("lastModifiedBy")?t.getLoggedInUserFullName():r._setFieldValue(i[o],e,s,n);l&&(a[0]=l),Object.keys(a).length&&this._setTaggerValue(this,o,a)}},_setFieldValue:function(t,s,n,r){let o=i.getFieldDefinitionColumn(n,t);if(o&&o.range){let e=s.get(t),i=o.fieldDefinitionRangeItem[e];return i&&"state"===t?i.display||e:i&&i.value||e}if("originated"===t||"modified"===t){let i=s.get(t);return i&&e.Date.strftime(i,"%Y/%m/%d")}if("rpnValue"===t){if(r)return s.getSeverityLevel();let e=s&&s.getMappedValue();return e&&e.mappedSeverity}return s.get(t)},_setTaggerValue:function(e,t,i){if((i=Object.values(i)).length)if(e.get(t)){(e.get(t).length&&e.get(t).length>0?e.get(t):[]).length>0&&e.set(t,i)}else e.set(t,i);else e.unset(t)},updateSeverityTag:function(e,t){this._updateTaggerBasedFieldMap(e,{"_tag_implicit_ds6w:why/ds6w:fulfills/ds6w:severity":"rpnValue"},"",t)},updateMatrixTag:function(e,t){this._updateTaggerBasedFieldMap(e,t,"")}})}),define("DS/ENOProjectMgmtModels/Collections/Tags",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Tag","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i){"use strict";return e.extend({_uwaClassName:"Tags",model:t,getUrl:function(e,t){return t.headers[i.CONTENT_TYPE]=i.COMTENT_TYPE_FORM_URL_ENCODED+";"+i.CHARSET_UTF8,this.url=i.getTaggerUrl(),this.url},convertToRequestData:function(e,t,i){return"idList="+i.idList}})}),define("DS/ENOProjectMgmtModels/Utils/FederatedSearch",["UWA/Core","UWA/Class/Events","DS/WAFData/WAFData","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtModels/Constants/Constants","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,s,n,r){"use strict";let o={_buildRequestData:function(e){let t=e.sources||[],i=s.get("3DSpace")&&s.get("user")||s.get("dsUserLogin");return{label:e.label||"3dplan-"+i+"-"+Date.now(),locale:e.locale||"en",with_synthesis:e.withSynthesis||Boolean(t&&-1!==t.indexOf("swym")),with_synthesis_attribute:e.withSynthesisAttribute||Boolean(t&&-1!==t.indexOf("swym")),select_predicate:e.selectPredicateArray,order_field:"relevance",refine:e.refine,select_file:["icon","thumbnail_2d"],nresults:e.numResults||10,start:0,tenant:s.get("tenant"),query:e.query,source:e.sources,specific_source_parameter:e.specific_source_parameter}},_buildRequest:function(e){let t={method:"POST",type:"json",headers:{"Content-Type":"application/json"}};return t.data=JSON.stringify(this._buildRequestData(e)),t.onComplete=e.onComplete,t.onFailure=e.onFailure,t},escapeTwoByteChars:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/（/g,"\\（")).replace(/）/g,"\\）")).replace(/［/g,"\\［")).replace(/］/g,"\\］")).replace(/｛/g,"\\｛")).replace(/｝/g,"\\｝")).replace(/｟/g,"\\｟")).replace(/｠/g,"\\｠")).replace(/〖/g,"\\〖")).replace(/〗/g,"\\〗")).replace(/【/g,"\\【")).replace(/】/g,"\\】")).replace(/〚/g,"\\〚")).replace(/〛/g,"\\〛")).replace(/ー/g,"\\ー")).replace(/\u3000/g," ")},sendRequest:function(e){let t=s.get("3DSearch")+"/search";return i.authenticatedRequest(t,this._buildRequest(e))},filterSearchSources:function(e){o._validFederatedSearchSources=o._validFederatedSearchSources||{};let t=e.slice(),n=s.get("3DSearch");return o._validFederatedSearchSources[n]?t=e.filter(function(e){return-1!==o._validFederatedSearchSources[n].indexOf(e)}):n&&!o._gettingSources&&(o._gettingSources=!0,i.authenticatedRequest(n+"/search/source",{onComplete:function(e){delete o._gettingSources,o._validFederatedSearchSources[n]=e&&JSON.parse(e).source},onFailure:function(){delete o._gettingSources}})),t},computeTypeAheadEntryBasedOnFedSearchResult:function(e){let t=e.attributes,i=t.length,s={};for(let e=0;e<i;e++){let i=t[e],n=i.value;switch(i.name){case"resourceid":s.value=n;break;case"preview_url":case"type_icon_url":n&&-1===n.indexOf("iconLargeDefault")&&(s.image=n);break;case"ds6w:type":case"ds6w:what/ds6w:type":s["ds6w:type"]=n;break;case"ds6w:label":s.label=n;break;case"sourceid":s.sourceId=n}}return s},hasLoadedFederatedSearchSources:function(){return o._validFederatedSearchSources},getFederatedQueryCriteria:function(t){let i,s=e.clone(t||{},!1),n=s.criteria;if("person"===s.fieldType){if(1!==n.length)throw new Error(r.INVALID_SEARCH_CRITERIA_PERSON);i=0===n[0].length?"":"personOrGroup:("+n[0]+")"}else i=n.length>1?"("+n.join(" OR ")+")":0===n.length||0===n[0].length?"":n[0];return i}};return o.eventDispatcher=new t,o.QUERY_MAX_LENGTH=8192,o.REQUEST_DELAY=100,o}),define("DS/ENOProjectMgmtModels/Collections/SearchObjects",["UWA/Core","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Utils/FederatedSearch","DS/ENOProjectMgmtModels/Utils/SearchUtil","DS/ENOProjectMgmtModels/Models/SearchObject","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/AppSettings","DS/ENOProjectMgmtCommonComponents/components/CustomAlert","i18n!DS/ENOProjectMgmtCommonComponents/assets/nls/ENOProjectMgmtCommonComponents"],function(e,t,i,s,n,r,o,l,a){"use strict";let c=t.extend({_uwaClassName:"SearchObjects",model:n,getUrl:function(e,t){if(t&&t.isSearch)return r.getObjectSearchUrl()+t.searchParams}});return c.typeAheadCallback=function(t,n,r,c){n=i.escapeTwoByteChars(n);let d,u=i.filterSearchSources(t.searchSource);return d=window.widget.getValue("oldSearch")?"("+n+"* OR "+n+")":i.getFederatedQueryCriteria({criteria:[n],fieldType:t.type}),i.sendRequest({selectPredicateArray:["ds6w:label","ds6w:type","ds6w:type_value","type_icon_url","preview_url"],sources:u,query:d,locale:o.get("language"),specific_source_parameter:s.computeSourceParameters(t),withSynthesisAttribute:Boolean(u&&-1!==u.indexOf("swym")),onComplete:function(t){let s=(e.is(t,"string")?JSON.parse(t):t).results,n=[];if(s){let e=s.length;for(let t=0;t<e;t++){let e=s[t],r=i.computeTypeAheadEntryBasedOnFedSearchResult(e);n.push(r)}}r(n,c)},onFailure:function(e,i){let s;c.model.dispatchEvent("onChange:"+t.name);let n=i.error;(s="FS_INVALID_QUERY__NOT_AUTHORIZED_QUERY__WILDCARD"===n.errorCode?a.FS_INVALID_QUERY__NOT_AUTHORIZED_QUERY__WILDCARD:n.errorMessage||"")&&l.buildNotification({message:s},"error")}})},c}),define("DS/ENOProjectMgmtModels/Collections/Calendars",["DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection","DS/ENOProjectMgmtModels/Models/Calendar","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants"],function(e,t,i,s){"use strict";return e.extend({_uwaClassName:"Calendars",_fieldDefinitionSource:s.APPLICATIONS.WORK_CALENDARS,model:t,getUrl:function(e,t){this.url=s.getAppUrl(s.APPLICATIONS.WORK_CALENDARS),this.url+=s.PARAMS.TYPE+s.TYPENAMES.WORK_CALENDARS,t.debug&&(this.url+=s.PARAMS.DEBUG+t.debug),t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include),t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED);let n=i.getFieldsDefinition(this.getFieldDefinitionSource());return n&&n.fieldDefinitionColumns||(this.url+=s.PARAMS.DEFINITION+"true"),this.url}})}),define("DS/ENOProjectMgmtModels/Models/Project",["UWA/Core","UWA/Promise","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Models/Calendar","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Models/ENOProjectMgmtBaseModel","DS/ENOProjectMgmtModels/Collections/Calendars"],function(e,t,i,s,n,r,o){"use strict";let l=["baselines","experiments"];return r.extend({_uwaClassName:"Project",HAS_CHILDREN_ATTR:i.PROJECT_GANTT_HAS_CHILDREN_ATTR,_fieldDefinitionSource:i.APPLICATIONS.PROJECT,getChildRelationsNames:function(){let e=this.get("type");if(e!==i.TYPENAMES.EXPERIMENT&&e!==i.TYPENAMES.PROJECTBASELINE)return l},getUrl:function(e,t){return t||(t={}),this.isNew()?this.getProjectUrl(void 0,e,t):t.mask?this.getClassificationUrl(t):("delete"===e&&(t.force=!0),this.getProjectUrl(this.get("id"),e,t))},getProjectUrl:function(e,t,s){let r=this.get("type");if(r!==i.TYPENAMES.EXPERIMENT||"delete"!==t&&"create"!==t){if(r!==i.TYPENAMES.PROJECTBASELINE||"delete"!==t&&"create"!==t)e?(this.url+="/"+e,this.url=i.getAppUrl(i.APPLICATIONS.PROJECT,e)):this.url=i.getAppUrl(i.APPLICATIONS.PROJECT);else if("delete"===t)this.url=i.getAppUrl(i.APPLICATIONS.PROJECT,"baselines");else if("create"===t){let e=this.get("parentId");e&&(this.url=i.getAppUrl(i.APPLICATIONS.PROJECT,e+"/baselines"))}}else if("delete"===t)this.url=i.getAppUrl(i.APPLICATIONS.PROJECT,"experiments");else if("create"===t){let e=this.get("parentId");e&&(this.url=i.getAppUrl(i.APPLICATIONS.PROJECT,e+"/experiments"))}s&&(s.type&&(this.url+=i.PARAMS.TYPE+s.type),s.debug&&(this.url+=i.PARAMS.DEBUG+s.debug),s.owned&&(this.url+=i.PARAMS.OWNED+s.owned),s.fields&&(this.url+=i.PARAMS.FIELDS+s.fields),s.include&&(this.url+=i.PARAMS.INCLUDE+s.include),s.force&&(this.url+=i.PARAMS.FORCE+s.force));let o=n.getFieldsDefinition(this.getFieldDefinitionSource());return o&&o.fieldDefinitionColumns||(this.url+=i.PARAMS.DEFINITION+"true"),this.url},convertToRequestData:function(e,t,s){var n=this._parent(e,t,s);return"create"===e&&n._attributes.data&&n._attributes.data.length>0&&n.get("data").forEach(e=>{e.updateAction===i.UPDATE_ACTION.CREATE&&e.calendar&&e.calendar.length>1&&e.calendar.forEach(e=>{e.Default="false"})}),n},createRelatedDataItems:function(t,s){let n,r=e.clone(s||{},!1),l=r.fieldDefinition||r.config;switch(l&&l.name){case i.PROJECT_CONSTANTS.BASELINES:case i.PROJECT_CONSTANTS.EXPERIMENTS:n=this.collection&&new this.collection.constructor(t,s);break;case i.PROJECT_CONSTANTS.CALENDAR:n=new o(t,s);break;default:n=this._parent.apply(this,arguments)}return n},isProgramContext:function(){return!1},getActionsAttrsAccessMap:function(){let t=this.getModelAccessMap();return e.merge(t,{isComplete:this.isComplete()})},parse:function(e){let t=this._parent.apply(this,arguments);return t.title=t.title||t.name,t},canDelete:function(){return"TRUE"===this.get(i.CAN_DELETE_DATA)},getModelConstructorBasedOnType:function(e,t){return e===i.PROJECT_CONSTANTS.WORK_CALENDAR?s:this._parent.apply(this,arguments)}})}),define("DS/ENOProjectMgmtModels/Collections/Projects",["DS/ENOProjectMgmtModels/Models/Project","DS/ENOProjectMgmtModels/Models/Calendar","DS/ENOProjectMgmtModels/Models/FieldsDefinition","DS/ENOProjectMgmtModels/Constants/Constants","DS/ENOProjectMgmtModels/Collections/ENOProjectMgmtBaseCollection"],function(e,t,i,s,n){"use strict";return n.extend({_uwaClassName:"Projects",_fieldDefinitionSource:s.APPLICATIONS.PROJECT,model:e,getUrl:function(e,t){this.url=s.getAppUrl(s.APPLICATIONS.PROJECT),this.url+=s.PARAMS.TYPE+s.TYPENAMES.PROJECT,t.completed&&(this.url+=s.PARAMS.COMPLETED+t.completed),t.filter&&("owned"===t.filter?this.url+=s.PARAMS.OWNED+"true":"assigned"===t.filter&&(this.url+=s.PARAMS.ASSIGNED+"true")),t.debug&&(this.url+=s.PARAMS.DEBUG+t.debug),this.url+="&level=10",this.url+="&excludeSubtypes=Experiment",t.fields&&(this.url+=s.PARAMS.FIELDS+t.fields),t.include&&(this.url+=s.PARAMS.INCLUDE+t.include),t.idList&&(t.headers[s.CONTENT_TYPE]=s.COMTENT_TYPE_FORM_URL_ENCODED);let n=i.getFieldsDefinition(this.getFieldDefinitionSource());return n&&n.fieldDefinitionColumns||(this.url+=s.PARAMS.DEFINITION+"true"),this.url},convertToRequestData:function(e,t,i){return"$ids="+i.idList}})});