define("DS/Logger/Logger",["module","DS/WebappsUtils/Console"],function(e,n){"use strict";var t="ROOT",r=function(){},o=["debug","log","info","warn","error"],s=new Function("return this")(),a=e.config().logPrefix||s.dsLogPrefix||"",i=e.config().logStacks,g=e.config().loggerConfig,l=null,p="function"==typeof WeakMap?new WeakMap:{get:function(e){return new d(e)},set:r,has:r},c={},f={log:r,info:r,warn:r,error:r,debug:r,levels:{ALL:10,DEBUG:23,LOG:31,INFO:42,WARN:51,ERROR:64,OFF:100}};function u(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function d(e){this.name=e?""+(("function"==typeof e.loggerName?e.loggerName():e.loggerName)||e.id||e.name||(e.prototype?e.prototype.name:null)||e):t;var n=function(e){for(var n=l[e],r=e;!n&&r;)n=l[r],r=r.substring(0,Math.max(r.lastIndexOf("/"),r.lastIndexOf(".")));return n=n||l[t]}(this.name).level.toUpperCase();if(!f.levels[n])throw new Error("Unsupported level :"+n);this.level=f.levels[n]}return f.setEnabled=function(e){o.forEach(function(t){f[t]=e?n[t]:r})},f.getLogger=function(e){return-1!==["object","function"].indexOf(u(e))?(p.has(e)||p.set(e,new d(e)),p.get(e)):new d(e)},f.addAppender=function(e,n){n&&n.append&&(c[e]=n)},d.prototype.setLevel=function(e){if("string"!==u(e)||!f.levels[e.toUpperCase()])throw new Error("Unsupported level :"+e);this.level=f.levels[e.toUpperCase()]},o.forEach(function(e){d.prototype[e]=function(){if(!(this.level>f.levels[e.toUpperCase()])){var n=Array.prototype.slice.call(arguments),t={timestamp:+new Date,type:e,origin:a,name:this.name,messageArgs:n,stack:null};for(var r in n.length>1&&"error"===u(n[n.length-1])&&"stack"in n[n.length-1]?t.stack=n[n.length-1]:i&&(t.stack=(new Error).stack),c)c.hasOwnProperty(r)&&c[r].append(t)}}}),f.addAppender("console",{append:function(e){var n,t=(e.origin?e.origin+": ":"")+(e.name?e.name+": ":"");switch(n="string"===u(e.messageArgs[0])?["%s"+e.messageArgs[0],t].concat(e.messageArgs.slice(1)):[t].concat(e.messageArgs),e.stack&&n.push(e.messageArgs),e.type){case"info":f.info.apply(f.info,n);break;case"warn":f.warn.apply(f.warn,n);break;case"error":f.error.apply(f.error,n);break;case"debug":f.debug.apply(f.debug,n);break;case"log":default:f.log.apply(f.log,n)}}}),function(){var n;try{n=s.sessionStorage&&s.sessionStorage.getItem&&JSON.parse(s.sessionStorage.getItem(e.id+".loggerConfig"))}catch(e){}(l=n||g||{})[t]=l[t]||{level:"LOG"}}(),f.setEnabled(!e.config().disableLog),f}),define("DS/Logger/Appenders/GelfHttp",["module"],function(e){"use strict";var n={debug:7,log:6,info:5,warn:4,error:3};return{append:function(t){var r=function(){try{return JSON.stringify(t.messageArgs)}catch(e){return"failed to serialize message: "+e.message}}(),o={version:"1.1",host:"wp-"+(t.origin||"unknown"),short_message:r,full_message:t.stack,timestamp:t.timestamp/1e3,level:n[t.type],_loggerName:t.name};try{var s=new XMLHttpRequest;s.open("POST",e.config().logUrl,!0),s.setRequestHeader("Content-type","text/plain"),s.send(JSON.stringify(o))}catch(e){}}}}),define("DS/Logger/Appenders/Quake",["module"],function(e){"use strict";var n=function(){},t={append:n,toggle:n};if("undefined"!=typeof document){var r=document.createElement("pre");r.setAttribute("style","z-index:1042; position:fixed; top:0; left:0; right:0; bottom: 50%; background:rgba(0, 0, 0, 0.7); color: #fff; display:none;"),document.body.appendChild(r),t.append=function(n){var t,o,s,a,i,g;-1!==(e.config().loggedLevels||["warn","error","info"]).indexOf(n.type)&&(r.innerHTML+='<span class="'+n.type+'">'+(t=n.timestamp,o=new Date(t),s=o.getHours(),a=o.getMinutes(),i=o.getSeconds(),g=o.getMilliseconds(),(s<10?"0":"")+s+":"+(a<10?"0":"")+a+":"+(i<10?"0":"")+i+"."+(g<100?g<10?"00":"0":"")+g)+" ["+n.type.toUpperCase()+"] "+n.name+": "+function(e){try{var n=JSON.stringify(e);return n.substring(1,n.length-1)}catch(n){return e+" (failed to serialize arguments)"}}(n.messageArgs)+(n.stack?"<br />"+n.stack:"")+"</span>\n")},t.toggle=function(){r.style.display="none"===r.style.display?"block":"none"}}return t});