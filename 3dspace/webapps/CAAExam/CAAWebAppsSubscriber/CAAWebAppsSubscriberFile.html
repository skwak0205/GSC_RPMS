<?xml version="1.0" encoding="utf-8"?> 
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
 <html xmlns="http://www.w3.org/1999/xhtml" xmlns:widget="http://www.netvibes.com/ns/"> 
 <!-- Copyright 2014 , Dassault Systemes. All rights reserved. -->
<head>   
    
    <title>Subscriber Widget App</title>
	
	<!-- Application Metas Start -->
	
    <meta name="description" content="CAA Web Apps basic use case  pub/sub" />
    <meta name="keywords" content="CAA Use Case" />
   	
	<!-- Application Metas End -->
	
	
	<!-- Application JS Start -->
    <script >   
            /* global widget,require */	
			require(['DS/PlatformAPI/PlatformAPI'] , 
			    function (PlatformAPI) {
				'use strict';
              
				var myWidget = {
						
					//onLoad: event triggered when the widget is launched  
					//--------------------------------------------------
					onLoad: function() {				
						var html = "<div >" +
						            "<label class='myLblType' >The text from another widget:</label> "  +
									"<input class='myInputType' type='text' />" + 
									"</div>";
						
						widget.body.innerHTML=html ;
						
						PlatformAPI.subscribe('CAA.CAAWebAppsPublisher', myWidget.onPublishText ) ;  
						
					},
					
					onPublishText : function( data ) {	
						var theInput = widget.body.querySelector('.myInputType');
						theInput.value = data.text ;
					}
					
				};
     			//
                //---------				
				widget.addEvent('onLoad',  myWidget.onLoad);
		});
    </script>
	<!-- Application JS End -->
</head>
<body>
</body>
</html>
