define("DS/WebToWinInfra/WebToWinCom",["UWA/Core","UWA/Utils/InterCom","UWA/Json"],function(e,t,i){return{_WebToWinCom_server:null,_created_socket:[],createSocket:function(e){if(UWA.is(this._WebToWinCom_server)||this._init(e),UWA.is(e.socket_id)){if(-1!==this._created_socket.indexOf(e.socket_id))throw new Error("WebToWinCom: socket with id "+e.socket_id+" already created");var i=new t.Socket(e.socket_id,{dispacthRetryInterval:0});return i.subscribeServer("WebToWinComServer"),this._created_socket.push(e.socket_id),i}throw new Error("WebToWinCom: socket_id not found")},deleteSocket:function(e){var t=this._created_socket.indexOf(e);-1!==t&&this._created_socket.splice(t,1)},_init:function(e){this._WebToWinCom_server=new t.Server("WebToWinComServer",{isPublic:!1})},createJSONArrayModif:function(e,t){var r=[];return t.forEach(function(t){ObjId=t.physicalid;var i=t.attributes;r.push({action:e,objectId:{physicalid:ObjId,attributes:i}})}),'{ "objects_name": '+i.encode(r)+"}"},createJSONArrayArg:function(e,t){var i={action:e,Args:[]};return t.forEach(function(e){ArgName=e.argname,ArgValue=e.argvalue,i.Args.push({Name:ArgName,Value:ArgValue})}),JSON.stringify(i)},createJSONArrayAction:function(e,t){var i={action:e,objectIds:[]};return t.forEach(function(e){ObjId=e.physicalid,i.objectIds.push(ObjId)}),JSON.stringify(i)},createJSONArrayMessage:function(e,t){var i={action:e,severity:t.severity,ID:t.ID,message:t.message};return JSON.stringify(i)},parseContextualMenu:function(e){if(e.actions.length>0){var t=e.actions,i=[],r=0,o=t.length;for(r=0;r<o;r++)i[r]=this._getActionsForOneObject(t[r],t[r].actions,"")}return i},_getActionsForOneObject:function(e,t,i){var r=[],o=0,n=t.length;for(o=0;o<n;o++)r[o]=this._getOneActionForOneObject(e,t[o],i),console.log(r);return r},_getOneActionForOneObject:function(e,t,i){var r;if(UWA.is(t.items))r={text:t.title,fonticon:t.icon},void 0!==t.id&&null!==t.id&&(r.actionId=t.id),r.items=this._getActionsForOneObject(e,t.items,t.title);else{r={text:t.title,icon:t.image,multisel:t.multisel,sourcejs:t.sourcejs};t.availabilityMode;r.availabilityMode=t.availabilityMode,void 0!==t.id&&(r.actionId=t.id,r.data=t.id),void 0!==t.accelerator&&(r.accelerator=t.accelerator),UWA.is(t.disabled)&&(r.disabled=t.disabled),UWA.is(i)&&(r.menu=i)}return r}}});