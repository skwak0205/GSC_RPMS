define("DS/Form/FormUtils",["require","exports","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel"],function(t,e,o,n){"use strict";var i="globalFormInformation";function r(t,e){e&&t.addRoot(new n({grid:{id:i,context:"stdTemplate",readOnly:!0,data:e.text,semantics:{emphasize:e.emphasize,icon:l(e)}}}),0)}function l(t){if(t)return t.icon?t.icon:a[t.emphasize]}var a={info:"info",warning:"attention",error:"error",success:"check"};return function(){function t(){}return t.createFormModelFromJSArray=function(t,e){var i=new o;return function t(e,o){if(Array.isArray(o))for(var i=0;i<o.length;i++){var r=o[i],l=new n({label:r.label,grid:{id:r.id,context:r.context,typeRepresentation:r.typeRepresentation,semantics:r.semantics,data:r.value,readOnly:r.readOnly,style:r.style}});e.addChild(l),r.children&&t(l,r.children),r.collapseFlag||l.expand()}else console.warn("Children in the form model should be an array")}(i._getTrueRoot(),t),r(i,e&&e.globalInformation),i},t.updateGlobalInformation=function(t,e){var o=t.getRoots()[0];t.prepareUpdate(),o.getAttributeValue("id")===i?e?(o.setAttribute("data",e?e.text:void 0),o.setAttribute("semantics",{emphasize:e?e.emphasize:void 0,icon:l(e)})):(o.remove(),o.destroy()):r(t,e),t.pushUpdate()},t}()});var __extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();define("DS/Form/FormCollectionViewLayout",["require","exports","DS/CollectionView/layouts/CollectionViewListLayout"],function(t,e,o){"use strict";return function(t){function e(e){return e||(e={}),e.getRowHeightFunction=function(t){var e=this.collectionView.model[t];return this.isSectionAt(t)?30:"stdTemplate"===e.getAttributeValue("context")?60:this.rowMaxHeight},t.call(this,e)||this}return __extends(e,t),e.prototype.isSectionAt=function(t){var e=!1;if(t<this.collectionView.model.length){var o=this.collectionView.model[t];o&&o.hasChildren()&&o.isRoot()&&(e=!0)}return e},e.prototype._invalidate=function(e){var o=this.rowMaxHeight;switch(this.getLayoutDensity()){case"compact":this.rowMaxHeight=52;break;case"large":this.rowMaxHeight=30}this.rowMaxHeight!==o?(e||(e={}),e.updateCellContent=!0,e.updateCellLayout=!0,this._resetComputedRows()):e&&(e.updateCellContent||e.FormInformationDefinition)&&this._resetComputedRows(),t.prototype._invalidate.call(this,e)},e.prototype.getLayoutDensity=function(){if(this.collectionView){var t,e=this.collectionView.getViewportDimensions(),o={compact:0,large:450};for(var n in o){if(!(e.width>=o[n]))break;t=n}return t}return"large"},e.prototype.getLayoutStylesForCellAt=function(e){var o=t.prototype.getLayoutStylesForCellAt.call(this,e);delete o.lineHeight;var n=this.collectionView.model[e];if(n){var i=n.getNodeDepth();i>0&&(o.paddingLeft=20*i+"px")}return o},e}(o)});__extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();define("DS/Form/FormCollectionView",["require","exports","DS/Core/WebUXComponents","DS/Utilities/Dom","UWA/Core","DS/Utilities/WUXUWAUtils","DS/CollectionView/CollectionView","DS/Form/FormCollectionViewLayout","DS/Tweakers/TypeRepresentationFactory","DS/Handlebars/Handlebars","text!DS/Form/assets/templates/formField.htm","text!DS/Form/assets/templates/formSection.htm"],function(t,e,o,n,i,r,l,a,s,c,u,p){"use strict";var d={FIELD:c.compile(u),SECTION:c.compile(p)},h=new s,m=function(t){function e(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var n;return e[0].showBackgroundFlag=!1,e[0].layout=new a({rowMaxHeight:36,columnMaxWidth:"100%",layoutMargins:{marginTop:5,marginBottom:5,marginLeft:5,marginRight:5}}),n=t.apply(this,e)||this,r.extendingClassFlag,n}return __extends(e,t),Object.defineProperty(e,"publishedProperties",{get:function(){return{treeDocument:{defaultValue:void 0,type:"DS/TreeModel/TreeDocument",category:"Appearance"},readOnly:{defaultValue:!1,type:"Boolean",category:"Appearance"}}},enumerable:!1,configurable:!0}),e.prototype.buildView=function(){t.prototype.buildView.call(this),this.elements.container.addClassName("wux-layouts-formcollectionview")},e.prototype._applyProperties=function(e){t.prototype._applyProperties.call(this,e),this.isDirty("treeDocument")&&this._applyTreeDocument(e.treeDocument),this.isDirty("readOnly")&&this._applyReadOnly(e.readOnly)},e.prototype._applyTreeDocument=function(t){if(this.treeDocument){var e=this;this.treeDocument.flattenTreeDocument({onUpdate:function(t){e.model!==t.flattenedTreeDocument?e.model=t.flattenedTreeDocument:e.invalidateLayout({freePool:!0})}})}},e.prototype._applyReadOnly=function(t){this.layout.isValid()&&this.invalidateLayout({freePool:!0})},e.prototype.initialize=function(){t.prototype.initialize.call(this),this._manageCellRequests()},e.prototype.handleEvents=function(){t.prototype.handleEvents.call(this);var e=this;n.addEventOnElement(this,this,"click",function(t,o){if(o&&o.cellModel){var n=o.cellModel;e.layout.isSectionAt(o.cellID)&&"expander"===n.getAttributeValue("style")&&(n.isExpanded()?n.collapse():n.expand())}}),n.addEventOnElement(this,this,"change",function(t,o){if(e._isCurrentlyCalledFromUIInteraction()&&o&&o.nodeModel&&o.cellView){var n=o.cellView.getReusableContent();if(n){var i=n.querySelector(".field-tweaker").children[0].dsModel;e.setModelAt(o.cellID,i.value)}}})},e.prototype.setModelAt=function(t,e){var o=this.getNodeModelAt(t);o&&o.setAttribute("data",e)},e.prototype._manageCellRequests=function(){var t=this;t.onCellRequest(function(e){var o=e.cellModel;if(o){var r=o.options.grid;if(o.hasChildren()){e.cellView.setReusableContent(null);var l=o.isExpanded()?"expanded":"collapsed";c=d.SECTION({label:o.getLabel(),state:l,style:o.getAttributeValue("style")});n.setContent(e.cellView.getContent(),c,!0)}else{var a=t.layout.getLayoutDensity(),s=o.getLabel(),c=d.FIELD({label:s,size:a,labelVisibility:!!s}),u=!!t.readOnly||!!r.readOnly&&r.readOnly,p=i.clone(r.semantics);t.disabled&&(p.disabled=!0),h.generateView(r.data,{typePath:r.typeRepresentation,semantics:p,touchMode:this._getCurrentTouchMode(),context:r.context?r.context:"inlinedTemplate",readOnly:u,onViewCreated:function(t){if(void 0!==t){n.setContent(e.cellView.getContent(),c,!0),e.cellView.setReusableContent(e.cellView.getContent().children[0]);var o=e.cellView.getContent().querySelector(".field-tweaker");o&&n.setContent(o,t.getContent())}}})}}})},e}(l);return o.addClass(m,"formCollectionView"),m});__extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();define("DS/Form/Form",["require","exports","DS/Form/FormCollectionView","DS/Form/FormUtils","DS/Core/WebUXComponents","DS/Controls/Abstract","DS/Controls/Button","DS/Utilities/WUXUWAUtils"],function(t,e,o,n,i,r,l,a){"use strict";var s=function(t){function e(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var n=t.apply(this,e)||this;return a.extendingClassFlag,n}return __extends(e,t),Object.defineProperty(e,"publishedProperties",{get:function(){return{model:{defaultValue:void 0,type:"Array<Object>",category:"Appearance"},buttons:{defaultValue:void 0,type:"Array<Object> | Object",category:"Appearance"},readOnly:{defaultValue:!1,type:"Boolean",category:"Appearance"},globalInformation:{defaultValue:void 0,type:"Object",category:"Appearance"}}},enumerable:!1,configurable:!0}),e.prototype.buildView=function(){t.prototype.buildView.call(this),this.elements.container.addClassName("wux-layouts-form"),this.elements._formCollectionViewcontainer=document.createElement("div"),this.elements._formCollectionViewcontainer.classList.add("wux-form-formCollectionViewContainer"),this.elements.container.appendChild(this.elements._formCollectionViewcontainer),this.elements._formCollectionView=new o({treeDocument:this._getFormCollectionView(),readOnly:this.readOnly}),this.elements._formCollectionView.inject(this.elements._formCollectionViewcontainer)},e.prototype._getFormCollectionView=function(){return this.elements._formCollectionView},e.prototype._getTreeDocument=function(){return this._treeDocument?this._treeDocument:n.createFormModelFromJSArray(this.model,{globalInformation:this.globalInformation})},e.prototype._applyProperties=function(e){t.prototype._applyProperties.call(this,e),this.isDirty("model")&&this._applyModel(e.model),this.isDirty("buttons")&&this._applyButtons(e.buttons),this.isDirty("readOnly")&&this._applyReadOnly(e.readOnly),this.isDirty("globalInformation")&&this._applyGlobalInformation(e.globalInformation)},e.prototype._applyModel=function(t){this._treeDocument&&(this._treeDocument.destroy(),this._treeDocument=void 0),this._treeDocument=this._getTreeDocument();var e=this._getFormCollectionView();e&&(e.treeDocument=this._treeDocument)},e.prototype._applyButtons=function(t){if(Array.isArray(this.buttons)){this.elements._bottomArea||(this.elements._bottomArea=document.createElement("div"),this.elements._bottomArea.classList.add("wux-form-bottomArea"),this.getContent().appendChild(this.elements._bottomArea));var e=this.elements._bottomArea.children;this._validationButton=void 0,this._escapeButton=void 0;for(var o=0;o<this.buttons.length;o++){var n=e.length>o?e[o].dsModel:void 0,i=this.buttons[o];n=u(i,{button:n,parentElement:this.elements._bottomArea});var r=i.role;r&&r&window.WUXCustomButtonRoleEnum.Validate?this._validationButton=n:r&&r&window.WUXCustomButtonRoleEnum.Escape&&(this._escapeButton=n)}c(this.elements._bottomArea,this.buttons.length)}else c(this.elements._bottomArea,0),this.buttons&&(this._validationButton=this.buttons.ValidationButton,this._escapeButton=this.buttons.EscapeButton)},e.prototype._applyReadOnly=function(t){this._getFormCollectionView().readOnly=this.readOnly},e.prototype._applyGlobalInformation=function(t){n.updateGlobalInformation(this._treeDocument,this.globalInformation)},e}(r);function c(t,e){if(t){var o=t.children;if(o.length>e)for(var n=e;n<o.length;n++)o[n].dsModel.remove(),o[n].dsModel.destroy()}}function u(t,e){var o=e&&e.button?e.button:void 0;return o?o.setProperties(t):(o=new l(t),e&&e.parentElement&&o.inject(e.parentElement)),o}return i.addClass(s,"form"),s});