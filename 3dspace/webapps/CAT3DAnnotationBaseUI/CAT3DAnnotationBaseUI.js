/*!  Copyright 2016 Dassault Systemes. All rights reserved. */
define("DS/CAT3DAnnotationBaseUI/CAT3DAnnotationExpander",["UWA/Core","DS/Controls/Expander","css!DS/CAT3DAnnotationBaseUI/CAT3DAnnotationBaseUI.css"],function(e,t){"use strict";return t.extend({init:function(e){this._parent(e),this.displayTitle=void 0===e.displayTitle||e.displayTitle},_applyHeader:function(){for(;this.elements.headerContainer.firstChild;)this.elements.headerContainer.removeChild(this.elements.headerContainer.firstChild);var t=void 0!==this._endOffset&&parseFloat(this._endOffset)>50?parseFloat(this._endOffset):50;this.elements.headerContainer.setStyles({width:"calc(100% - "+t+"px)"});var n=e.createElement("h5",{class:"headerTitle"}).inject(this.elements.headerContainer);this.displayTitle&&(n.title=this.header),n.setStyles({"font-weight":"normal","word-wrap":"break-word","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis",width:"calc(100% - 7px)"}),n.innerHTML=this.header}})}),define("DS/CAT3DAnnotationBaseUI/CAT3DAnnotAttrBrowserListItem",["UWA/Class","DS/Tree/TreeNodeModel"],function(e,t){"use strict";return e.extend({init:function(e){var n=e||{};this._parent(n);var i,a,l,s,r,o,c=this,d=!1,h=!1,g=!1,u=n.children||[],p=0,m="rgb(54, 142, 196)";this.getIDPath=function(){return n.idPath},this.setActiveState=function(e){var t;if(i&&e!==i.isSelected()){if(g=!1,h=!0,e)n.pickParent&&c.getParent().setActiveState(!0),c.getParent()&&c.getParent().lock(),i.select(),c.setDisplayFlag(!0);else{if(!n.pickParent)for(t=0;t<u.length;t++)u[t].getPickParent()&&u[t].setActiveState(!1);i.unselect()}h=!1}},this.getActiveState=function(){return!!i&&i.isSelected()},this.expandOrCollapse=function(e){if(i){var t=i.getPath();if(t&&t.length)for(var n=0;n<t.length-1;n++)e&&!t[n].isExpanded()?t[n].expand():!e&&t[n].isExpanded()&&t[n].collapse()}},this.getPickParent=function(){return n.pickParent},this.getChildren=function(){return u},this.increaseNumberOfDisplayedChildren=function(){p++,l&&l.increaseNumberOfDisplayedChildren(),p===o&&n.isRootNode&&(m="rgb(87, 184, 71)",u.forEach(function(e){e.changeDisplayColor(m)}),c.setDisplayFlag(!0))},this.changeDisplayColor=function(e){m!==e&&(m=e,d&&i&&i.updateOptions({color:m}),u.forEach(function(t){t.changeDisplayColor(e)}))},this.setDisplayFlag=function(e){if(e!==d){if(d=e,n.pickParent)l&&l.setDisplayFlag(d);else{for(var t=0;t<u.length;t++)u[t].getPickParent()&&u[t].setDisplayFlag(d);d&&c.increaseNumberOfDisplayedChildren(),d&&n.onDisplayHistoryFlagChangeCB&&n.onDisplayHistoryFlagChangeCB(c)}i&&i.updateOptions({color:d?m:void 0})}},this.resetDisplayHistory=function(){"rgb(54, 142, 196)"!==m&&(m="rgb(54, 142, 196)"),c.setDisplayFlag(!1),p=0,u.forEach(function(e){e.resetDisplayHistory()})},this.getDisplayFlag=function(){return d},this.setRootParentNode=function(e){a=e,i&&(i.parentNode=a);for(var t=0;t<u.length;t++)u[t].setRootParentNode(e)},this.lock=function(){g=!0,l&&l.lock()},this.setParent=function(e){l=e},this.getParent=function(){return l},this.getContent=function(){return i},this.getNbChildren=function(){if(c.getPickParent())return 0;for(var e=n.isRootNode?0:1,t=0;t<u.length;t++)e+=u[t].getNbChildren();return e},this.initialize=function(){o=n.isRootNode?0:1;for(var e=0;e<u.length;e++)u[e].initialize(),o+=u[e].getNbChildren();n.activeState?(h=!0,c.setActiveState(!0),h=!1):n.displayFlag&&c.setDisplayFlag(!0),n.isRootNode&&p===o&&(m="rgb(87, 184, 71)",u.forEach(function(e){e.changeDisplayColor(m)}),c.setDisplayFlag(!0))},this.getBackgroundColorDefinition=function(e){return n.color&&e===n.color.colID?n.color.color:null},this.doNotExport=function(){for(var e=0;e<u.length;e++)if(u[e].getPickParent()&&u[e].getContent().isVisible())return!0;return!1},this.clear=function(){i&&(s&&i.removeEventListener(s),r&&i.removeEventListener(r),u.forEach(function(e){e.clear()}),r=s=i=null,h=!1,g=!1,p=0,u.length=0)};var f={};if(n.attributes&&n.attributes.length)for(var C=0;C<n.attributes.length;C++)f[n.attributes[C].colID]=n.attributes[C].value;n.type&&(f.type=n.type),this.originalColID=n.originalColID,!1!==n.createTreeModelNode&&((i=new t({label:n.name,icons:n.icon?[n.icon.replace(" ","\\ ")]:void 0,grid:f})).setDisplayFlag=this.setDisplayFlag,i.getDisplayFlag=this.getDisplayFlag,i.getActiveState=this.getActiveState,i.getIDPath=this.getIDPath,i.getParentAttrItem=this.getParent,i.featureUuid=n.uuid,i.originalColID=n.originalColID,i.getBackgroundColorDefinition=this.getBackgroundColorDefinition,i.doNotExport=this.doNotExport,n.callback&&(s=i.onSelect(function(){h||g||(c.getParent()&&(c.getPickParent()&&c.getParent().getContent()&&c.getParent().getContent().select(),c.getParent().lock()),c.setDisplayFlag(!0),n.callback(c)),g=!1}),r=i.onUnselect(function(){h||g||n.callback(c)})));for(var v=0;v<u.length;v++)u[v].setParent(c),i&&i.addChild(u[v].getContent())}})}),define("DS/CAT3DAnnotationBaseUI/CAT3DAnnotationBaseUI",[],function(){}),define("DS/CAT3DAnnotationBaseUI/CAT3DAnnotationFilterTolFilterItem",["UWA/Core","UWA/Class","DS/Controls/Toggle","DS/Controls/Button","DS/Controls/LineEditor","DS/Controls/ComboBox","DS/VisuEvents/EventsManager","i18n!DS/CAT3DAnnotationBaseUI/assets/nls/CAT3DAnnotationBaseUI","css!DS/CAT3DAnnotationBaseUI/CAT3DAnnotationBaseUI.css"],function(e,t,n,i,a,l,s,r){"use strict";return t.extend({init:function(t){var o=0,c="infEqual",d=0,h="infEqual";this.setCheckFlag=function(e){p=e,C.checkFlag=p,b.disabled=!p,A.disabled=!p,x.disabled=!p,D.disabled=!p,y.disabled=!p,p&&"equal"===A.currentValue&&(x.disabled=!0,D.disabled=!0),p&&!m.hasClassName("AnnotFilterSectionActive")?(m.addClassName("AnnotFilterSectionActive"),g()||(b.value=0,A.currentValue="infEqual",x.value=0,D.currentValue="infEqual")):!p&&m.hasClassName("AnnotFilterSectionActive")&&m.removeClassName("AnnotFilterSectionActive")},this.update=function(){},this.getContent=function(){return m},this.getFormulaComponents=function(){return{leftValue:o,leftOperand:c,rightValue:d,rightOperand:h}},this.clear=function(){s.removeEvent(m,"onPrimaryPointerClick",E)};var g=function(){return null!=o&&null!=c||!1,null!=d&&null!=h||!1,"equal"===c||("infEqual"===c&&"infEqual"===h?o<=d:o<d)},u=this;this.name=t.name;var p=t.checkFlag,m=e.createElement("div",{id:this.name+"_div",class:"AnnotFilterListItem AnnotFilterTolListItem"});m.ondragstart=function(){return!1};var f=e.createElement("div",{class:"AnnotFilterTolLineDiv"}).inject(m);f.setStyles({"margin-top":"2px",display:"flex","align-items":"baseline"});var C=new n({type:"checkbox",checkFlag:!1}).inject(f);C.addEventListener("buttonclick",function(){C.checkFlag=p});var v=e.createElement("p",{id:this.name+"_sectionPar",class:"AnnotFilterListItemText"}).inject(f);v.innerHTML=r.ValueLbl;var y=new i({label:r.ApplyLbl,emphasize:"primary",onClick:function(e){e.stopPropagation(),g()&&t.callback({checkFlag:p,formulaComponents:u.getFormulaComponents()})}});y.inject(f),f=e.createElement("div",{class:"AnnotFilterTolLineDiv"}).inject(m);var F=e.createElement("p",{id:this.name+"_sectionPar",class:"AnnotFilterListItemText"}).inject(f);F.innerHTML=r.MinLbl;var A=new l({elementsList:[{labelItem:">=",valueItem:"infEqual"},{labelItem:">",valueItem:"inf"},{labelItem:"=",valueItem:"equal"}],selectedIndex:0,enableSearchFlag:!1,actionOnClickFlag:!1}).inject(f);A.addEventListener("change",function(){"equal"===(c=A.currentValue)?(D.disabled=!0,x.disabled=!0):(D.disabled=!1,x.disabled=!1),y.disabled=!g()});var b=new a({placeholder:"0",disabled:!1,selectAllOnFocus:!0,autoCommitFlag:!0,pattern:"^[0-9]*.?[0-9]*$"}).inject(f);b.addEventListener("change",function(){o=parseFloat(b.value)||0,y.disabled=!g()}),f=e.createElement("div",{class:"AnnotFilterTolLineDiv"}).inject(m);var k=e.createElement("p",{id:this.name+"_sectionPar",class:"AnnotFilterListItemText"}).inject(f);k.innerHTML=r.MaxLbl;var D=new l({elementsList:[{labelItem:"<=",valueItem:"infEqual"},{labelItem:"<",valueItem:"inf"}],selectedIndex:0,enableSearchFlag:!1,actionOnClickFlag:!1}).inject(f);D.addEventListener("change",function(){h=D.currentValue,y.disabled=!g()});var x=new a({placeholder:"0",disabled:!1,selectAllOnFocus:!0,autoCommitFlag:!0,pattern:"^[0-9]*.?[0-9]*$"}).inject(f);x.addEventListener("change",function(){d=parseFloat(x.value)||0,y.disabled=!g()}),t.formulaComponents&&(b.value=t.formulaComponents.leftValue,A.currentValue=t.formulaComponents.leftOperand,x.value=t.formulaComponents.rightValue,D.currentValue=t.formulaComponents.rightOperand,"equal"===A.currentValue&&setTimeout(function(){x.disabled=!0,D.disabled=!0},0)),t.className&&m.addClassName(t.className),C.elements.container.setStyles({display:"inline-block","min-height":"0px",position:"relative",left:"3px"}),v.setStyles({width:"calc(100% - 100px)"}),y.elements.container.setStyles({float:"right","margin-right":"5px","margin-top":"2px",height:"100%"}),b.elements.container.setStyles({display:"inline"}),b.elements.container.childNodes[0].setStyles({width:"calc(100% - 120px)","margin-left":"3px"}),x.elements.container.setStyles({display:"inline"}),x.elements.container.childNodes[0].setStyles({width:"calc(100% - 120px)","margin-left":"3px"}),F.setStyles({"vertical-align":"middle",width:"30px"}),k.setStyles({"vertical-align":"middle",width:"30px"}),this.setCheckFlag(t.checkFlag);var E=function(e){if(p&&e.from[0].view===v)u.setCheckFlag(!p),t.callback({checkFlag:p,formulaComponents:u.getFormulaComponents()});else{var n=e.from[0].view;setTimeout(function(){n!==C.elements.checkSign&&n!==v||(u.setCheckFlag(!p),t.callback({checkFlag:p,formulaComponents:u.getFormulaComponents()}))},0)}};s.addEvent(m,"onPrimaryPointerClick",E)}})}),define("DS/CAT3DAnnotationBaseUI/CAT3DAnnotationBrowserSection",["UWA/Class","UWA/Core","DS/CAT3DAnnotationBaseUI/CAT3DAnnotationExpander","DS/VisuEvents/EventsManager","css!DS/CAT3DAnnotationBaseUI/CAT3DAnnotationBaseUI.css"],function(e,t,n,i){"use strict";var a={},l=n.extend({init:function(e){if(this._parent(e),this.header=e.name,this.style="simple",this.body=t.createElement("div",{class:"BrowserAnnotThumbsWrapper"}),e.childrenContainer)e.childrenContainer.getContent().inject(this.body);else for(var n=0;n<e.children.length;n++)e.children[n].view.getContent().inject(this.body);var l=t.createElement("div",{class:"BrowserAnnotSectionShadingCol"});l.setStyle("background-color","rgba(255, 255, 255, 0)"),this.elements.header.appendChild(l),this.icon=e.icon,e.displayInfoButton&&this.elements.header.childNodes[2].setStyle("width","calc(100% - 65px)"),this.getContent=function(){return this.elements.container},this.setShadingColor=function(e){l.setStyle("background-color",e?"rgb(87, 184, 71)":"rgba(255, 255, 255, 0)")},this.clear=function(){this.cbPreference&&i.removeEvent(this.elements.header,"onPrimaryPointerUpUnique",this.cbPreference)},!0===a[this.header]||void 0===a[this.header]?this.expand():this.close()},buildView:function(){if(this._parent(),!this.cbPreference){var e=this;this.cbPreference=function(){var t=a[e.header];a[e.header]=!0!==t&&void 0!==t},i.addEvent(this.elements.header,"onPrimaryPointerUpUnique",this.cbPreference)}}});return e.extend({init:function(e){this._parent(e);var n,i=null,a=null,s=null,r=null,o=null;if(e.displayInExpanders)i=new l(e),a=i.getContent();else{a=t.createElement("div",{class:"BrowserAnnotThumbsMainContainer"}),s=t.createElement("div",{class:"BrowserAnnotThumbsTitleDiv"}).inject(a),(n=t.createElement("div",{class:"BrowserAnnotSectionShadingCol"}).inject(s)).setStyle("background-color","rgba(255, 255, 255, 0)"),t.createElement("img",{class:"BrowserAnnotThumbsIcon",src:e.icon}).inject(s),(r=t.createElement("p",{class:"BrowserAnnotThumbsTitle"}).inject(s)).setStyle("width","calc(100% - 25px)"),r.textContent=e.name;var c=t.createElement("div",{class:"BrowserAnnotThumbsWrapper"}).inject(a);if(e.childrenContainer)e.childrenContainer.getContent().inject(c);else for(var d=0;d<e.children.length;d++)e.children[d].view.getContent().inject(c)}if(e.displayInfoButton){var h=e.displayInExpanders?a.getChildren()[0].getChildren()[0]:s;o=t.createElement("p",{class:"BrowserAnnotThumbsInfoIcon wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-info"}).inject(h),h===s?(r.setStyle("width","calc(100% - 40px)"),o.setStyles({"padding-bottom":"3px",display:"inline - block",overflow:"hidden"})):o.setStyle("margin","0"),o.addEventListener("click",function(t){t.stopPropagation(),e.onInfoButtonClick(e.id)})}this.getContent=function(){return a},this.updateShadingColor=function(){var t,n=!0;for(t=0;t<e.children.length;t++)if(!e.children[t].view.getDisplayFlag()){n=!1;break}if(n&&e.children)for(t=0;t<e.children.length;t++)e.children[t].view.setDisplayFlag(!0,!0);this.setShadingColor(n)},this.setShadingColor=function(e){i?i.setShadingColor(e):n.setStyles({"background-color":e?"rgb(87, 184, 71)":"rgba(255, 255, 255, 0)",top:"7px",left:"3px"})},this.clear=function(){i&&i.clear()},this.updateShadingColor()}})}),define("DS/CAT3DAnnotationBaseUI/CAT3DAnnotationFilterListItem",["UWA/Core","UWA/Class","DS/CAT3DAnnotationBaseUI/CAT3DAnnotationExpander","DS/Controls/Toggle","DS/Utilities/TouchUtils","DS/VisuEvents/EventsManager","i18n!DS/CAT3DAnnotationBaseUI/assets/nls/CAT3DAnnotationBaseUI","css!DS/CAT3DAnnotationBaseUI/CAT3DAnnotationBaseUI.css"],function(e,t,n,i,a,l,s){"use strict";var r={},o=n.extend({publishedProperties:{noSelectAll:{defaultValue:!1,type:Boolean},name:{defaultValue:"",type:String},children:{defaultValue:null,type:Array},callback:{defaultValue:null,type:Object},checkFlag:{defaultValue:!1,type:Boolean},type:{defaultValue:"checkbox",type:String},displayTitle:{defaultValue:!0,type:Boolean},expandingPreference:{defaultValue:!1,type:Boolean}},init:function(t){var n,o,c,d=t||{},h=this;this._endOffset=55,this.callback=d.callback,this._checkFlag=d.checkFlag,this.name=d.name,this._type=d.type,this._expandFlag=!1,this._expandingPref=d.expandingPreference,this._parent(d);var g=function(e,t){var i;if(t){var a=[];for(i=0;i<d.children.length;i++)d.children[i].isDisplayed()&&a.push(d.children[i]);for(i=0;i<a.length;i++)a[i].setCheckFlag(e,!1,!0)}n.checkFlag=e,n.checkFlag&&!o.hasClassName("AnnotFilterSectionActive")?o.addClassName("AnnotFilterSectionActive"):!n.checkFlag&&o.hasClassName("AnnotFilterSectionActive")&&o.removeClassName("AnnotFilterSectionActive")};if(this.body=e.createElement("div",{class:"AnnotFilterListItemGroup"}),d.children.length>1&&!d.noSelectAll){o=e.createElement("div",{id:this.name+"_SelectAll_div",class:"AnnotFilterListItem AnnotFilterListItemOdd"});for(var u=!0,p=0;p<d.children.length;p++)d.children[p].getCheckFlag()||(u=!1);(n=new i({type:"checkbox",checkFlag:u}).inject(o)).elements.container.setStyles({display:"inline-block","margin-left":"4px","margin-top":a.getTouchMode()?"8px":"5px","margin-bottom":a.getTouchMode()?"8px":"5px"}),c=function(){g(!n.checkFlag,!0)};var m=e.createElement("div",{class:"AnnotFilterSectionBody"});a.getTouchMode()&&m.addClassName("touchMode");var f=e.createElement("p",{class:"AnnotFilterListItemText"}).inject(m);f.setStyle("margin-left","5px"),f.innerHTML=s.SelectAllLbl,o.appendChild(m),this.body.appendChild(o),g(n.checkFlag,!1)}d.children.forEach(function(e){h.body.appendChild(e.getContent())}),c&&(n.addEventListener("buttonclick",c),l.addEvent(o,"onPrimaryPointerClick",c)),this.setCheckFlag=function(e,t){this._checkFlag=e,this._checkFlag||!this.expandedFlag||t||this.setExpandedFlag(!this.expandedFlag)},this.getExpandedFlag=function(){return this.expandedFlag},this.setExpandedFlag=function(e){this.expandedFlag=e,this.expandedFlag?this.expand():this.close(),r[this._expandingPref]=this.expandedFlag},this.update=function(){for(var e=!0,t=0;t<d.children.length;t++)d.children[t].getCheckFlag()||(e=!1);"checkbox"===h._type&&(h._checkFlag=e),n&&g(e)},this.clear=function(){o&&c&&l.removeEvent(o,"onPrimaryPointerClick",c),l.removeEvent(this.elements.header,"onPrimaryPointerClick",this.headerCB)}},buildView:function(){this._parent();var e=this;setTimeout(function(){!0===r[e._expandingPref]?("radio"===e._type&&e._checkFlag||"radio"!==e._type)&&e.expand():(r[e._expandingPref]=!1,e.close())},0),this.headerCB||(this.headerCB=function(){e.callback&&!e._checkFlag&&(e.setCheckFlag(!e._checkFlag),e.callback({name:e.name,checkFlag:e._checkFlag})),e._expandingPref&&(r[e._expandingPref]=!e.expandedFlag)},l.addEvent(this.elements.header,"onPrimaryPointerClick",this.headerCB))}});return t.extend({init:function(t){var n=t||{};this.name=n.name,this._parent(t);var s,r,c,d,h,g,u,p,m,f=this,C=n.checkFlag,v=!0;(this.setCheckFlag=function(e,t,i){C=e,s&&s.setCheckFlag(e,t),h.checkFlag=C,C&&!r.hasClassName("AnnotFilterSectionActive")?r.addClassName("AnnotFilterSectionActive"):!C&&r.hasClassName("AnnotFilterSectionActive")&&r.removeClassName("AnnotFilterSectionActive"),i&&n.callback({name:n.name,json:n.json,idPath:n.idPath,checkFlag:C})},this.getCheckFlag=function(){return C},this.setEnableFlag=function(e){r&&r.setStyles({"pointer-events":e?"":"none",opacity:e?1:.3})},this.setDisplayFlag=function(e){d&&v&&(v=!1,r.hasClassName("AnnotFilterListItemOdd")&&r.removeClassName("AnnotFilterListItemOdd"),r.removeChild(c),r.appendChild(d)),r&&(r.hidden=!e)},this.setNbElems=function(e){p&&(p.innerHTML=e.toString())},this.setExpandedFlag=function(e){if(s)return s.setExpandedFlag(e)},this.getExpandedFlag=function(){if(s)return s.getExpandedFlag()},this.update=function(e){var t;if(s&&s.update(),n.children&&n.children.length){var i=0,a=0;for(t=0;t<n.children.length;t++)n.children[t].isDisplayed()&&(n.children[t].setIsOdd(a%2==1),a++),n.children[t].update(),i+=n.children[t].getDisplayedElements();if(p){var l=0;for(t=0;t<n.children.length;t++)l+=n.children[t].getCheckedElements();p.innerHTML=l.toString()}if("checkbox"===n.type){var o=!0;for(t=0;t<n.children.length;t++)if(!1===n.children[t].getCheckFlag()&&n.children[t].isDisplayed()){o=!1;break}this.setCheckFlag(o,!0)}0!==i?f.setDisplayFlag(!0):e?d&&!v&&(v=!0,r.addClassName("AnnotFilterListItemOdd"),r.removeChild(d),r.appendChild(c)):f.setDisplayFlag(!1)}},this.getDisplayedElements=function(){var e=0;if(n.children)for(var t=0;t<n.children.length;t++)e+=n.children[t].getDisplayedElements();else"checkbox"===n.type&&this.isDisplayed()&&e++;return e},this.getCheckedElements=function(){var e=0;if(n.children)for(var t=0;t<n.children.length;t++)e+=n.children[t].getCheckedElements();else"checkbox"===n.type&&C&&this.isDisplayed()&&e++;return e},this.getChildrenItems=function(){return n.children&&n.children.length?n.children:[]},this.getContent=function(){return r},this.isDisplayed=function(){if(r)return!r.hidden},this.setIsOdd=function(e){s||(e&&r.hasClassName("AnnotFilterListItemEven")&&r.removeClassName("AnnotFilterListItemEven"),!e&&r.hasClassName("AnnotFilterListItemOdd")&&r.removeClassName("AnnotFilterListItemOdd"),r.addClassName(e?"AnnotFilterListItemOdd":"AnnotFilterListItemEven"))},this.addBottomSeparator=function(){var t=e.createElement("div",{class:"AnnotFilterListItemSeparator"});r.appendChild(t)},this.clear=function(){if(n.children)for(var e=0;e<n.children.length;e++)n.children[e].clear();s&&s.clear(),r&&u&&l.removeEvent(r,"onPrimaryPointerClick",u)},r=e.createElement("div",{id:n.id+"_div",class:"AnnotFilterListItem"}),!0!==n.displayTitle&&void 0!==n.displayTitle||r.setAttribute("title",n.header),n.className&&r.addClassName(n.className),n.isOdd&&r.addClassName("AnnotFilterListItemOdd"),u=function(){v&&(f.setCheckFlag(!C),n.callback({name:n.name,idPath:n.idPath,checkFlag:C}))},c=e.createElement("div",{class:"AnnotFilterSectionBody"}),a.getTouchMode()&&c.addClassName("touchMode"),n.icon)&&e.createElement("div",{class:"AnnotFilterListItemIcon"}).inject(c).setStyle("background-image",'url("'+n.icon+'")');if(n.header){var y=e.createElement("p",{class:"AnnotFilterListItemText"}).inject(c);y.innerHTML=n.header;var F=n.icon&&n.displayNbElems?"calc(80% - 50px)":n.icon?"calc(100% - 50px)":n.displayNbElems?"calc(80% - 10px)":"calc(100% - 10px)";y.setStyles({width:F})}if(n.children&&n.children.length){v=!1;var A=0;for(m=0;m<n.children.length;m++)n.children[m].isDisplayed()&&(n.children[m].setIsOdd(A%2==1),A++);"radio"===n.type?(h=new i({type:n.type,checkFlag:!1}).inject(r),g=function(){C||(f.setCheckFlag(!0),n.callback({name:n.name,checkFlag:!0}))},s=new o({name:this.name,header:n.header,children:n.children,checkFlag:C,callback:n.callback,noSelectAll:n.noSelectAll,displayTitle:!1,type:n.type,expandingPreference:n.expandingPreference}),d=e.createElement("div",{class:"AnnotFilterDivExpander"}),a.getTouchMode()&&d.addClassName("touchMode"),d.appendChild(s.elements.container),r.appendChild(d)):(h=new i({type:n.type,checkFlag:!1}).inject(r),g=function(){var e=h.checkFlag;for(m=0;m<n.children.length;m++)n.children[m].isDisplayed()&&n.children[m].setCheckFlag(e,!1,!0);if(e&&p){var t=0;for(m=0;m<n.children.length;m++)n.children[m].isDisplayed()&&t++;p.innerHTML=t.toString()}else p&&(p.innerHTML="0")},s=new o({name:this.name,header:n.header,children:n.children,noSelectAll:n.noSelectAll,displayTitle:!1,expandingPreference:n.expandingPreference}),d=e.createElement("div",{class:"AnnotFilterDivExpander"}),a.getTouchMode()&&d.addClassName("touchMode"),d.appendChild(s.elements.container),r.appendChild(d))}else h=new i({type:n.type,checkFlag:!1}).inject(r),g=function(){setTimeout(function(){h.checkFlag=C,(C&&"radio"===n.type||"checkbox"===n.type)&&n.callback({name:n.name,idPath:n.idPath,checkFlag:C})},0)},r.appendChild(c);if(h.elements.container.setStyles({"vertical-align":"top",display:"inline-block","margin-left":"4px","margin-top":a.getTouchMode()?"8px":"5px","margin-bottom":a.getTouchMode()?"8px":"5px"}),n.displayNbElems){p=e.createElement("p");var b=0;if(s)for(p.addClassName("AnnotFilterExpanderNbElems"),s.elements.header.appendChild(p),m=0;m<n.children.length;m++)b+=n.children[m].getCheckedElements();else p.addClassName("AnnotFilterNbElems"),n.nbElems&&(b=n.nbElems),c.appendChild(p);p.innerHTML=b.toString()}v&&f.setIsOdd(!0),r&&u&&l.addEvent(r,"onPrimaryPointerClick",u),h&&g&&h.addEventListener("buttonclick",g),null!=C&&this.setCheckFlag(C),void 0!==n.isDisplayed&&this.setDisplayFlag(n.isDisplayed)}})});