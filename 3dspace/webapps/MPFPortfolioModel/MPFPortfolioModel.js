define("DS/MPFPortfolioModel/PlaygroundPublicDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError","DS/MPFUrl/UrlUtils"],function(t,e,r){"use strict";return t.extend({init:function(t){this._parent(t,"/software-products/public/portfolios/playground")},buildPath:function(t){return this.resourcePath},urlGet:function(t,e){var o;return o=this._parent(t,e),e||(e={}),e.periodicity&&(o=new r(o).addParameter("rev_type",e.periodicity).getUrl()),o},urlPatch:e.emit,urlPost:e.emit,urlPut:e.emit,urlDelete:e.emit})}),define("DS/MPFPortfolioModel/PlaygroundDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError","DS/MPFUrl/UrlUtils"],function(t,e,r){"use strict";return t.extend({init:function(t){this._parent(t,"/software-products/portfolios/playground")},buildPath:function(t){return this.resourcePath},urlGet:function(t,e){var o;return o=this._parent(t,e),e||(e={}),e.periodicity&&(o=new r(o).addParameter("rev_type",e.periodicity).getUrl()),e.token&&(o=new r(o).addParameter("token",e.token).getUrl()),o},urlPatch:e.emit,urlPost:e.emit,urlPut:e.emit,urlDelete:e.emit})}),define("DS/MPFPortfolioModel/LicensingHelper",[],()=>{"use strict";const t=Object.freeze({TOK:"TOK",CB:"CB"});return{LicensingSchemes:t,isCredit:function(e){return e===t.TOK||e===t.CB}}}),define("DS/MPFPortfolioModel/ProductDependenciesDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError","DS/MPFUrl/UrlUtils"],(t,e,r,o)=>{"use strict";return e.extend({init(t){this._parent(t,"/software-products/product-dependencies")},buildPath(e){let r=this.resourcePath;return t.is(e)&&t.is(e.productTrigram)&&(r+="/"+e.productTrigram),r},urlGet(t,e){let r=this._parent(t,e);return e.country&&(r=new o(r).addParameter("country",e.country).getUrl()),r},urlPost:r.emit,urlPatch:r.emit,urlPut:r.emit,urlDelete:r.emit})}),define("DS/MPFPortfolioModel/ByNameDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError","DS/MPFUrl/UrlUtils"],(t,e,r,o)=>{"use strict";return e.extend({init(t){this._parent(t,"/software-products/offers/by-name")},buildPath(e){let r=this.resourcePath;return t.is(e)&&t.is(e.searchName)&&(r+="/"+e.searchName),r},urlGet(t,e={}){let r=this._parent(t,e);return e.country&&(r=new o(r).addParameter("country",e.country).getUrl()),r},urlPatch:r.emit,urlPost:r.emit,urlPut:r.emit,urlDelete:r.emit})}),define("DS/MPFPortfolioModel/ByTrigramDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError","DS/MPFUrl/UrlUtils"],function(t,e,r,o){"use strict";return e.extend({init:function(t){this._parent(t,"/software-products/offers/by-trigram/v1")},buildPath:function(e){var r=this.resourcePath;return t.is(e)&&t.is(e.productTrigram)&&(r+="/"+e.productTrigram),r},urlGet:function(t,e){var r;return r=this._parent(t,e),e||(e={}),e.onlineInstanceId&&(r=new o(r).addParameter("online-instance",e.onlineInstanceId).getUrl()),e.token&&(r=new o(r).addParameter("token",e.token).getUrl()),r},urlPatch:r.emit,urlPost:r.emit,urlPut:r.emit,urlDelete:r.emit})}),define("DS/MPFPortfolioModel/PromotionsDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError","DS/MPFUrl/UrlUtils"],function(t,e,r){"use strict";return t.extend({init:function(t){this._parent(t,"/software-products/promotions")},buildPath:function(t){return this.resourcePath},urlGet:function(t,e){var o;return o=this._parent(t,e),e||(e={}),e.promotion&&"enterprise"!==e.promotion&&(o=new r(o).addParameter("promotion",e.promotion).getUrl()),e.legalEntityId&&(o=new r(o).addParameter("legal_entity_id",e.legalEntityId).getUrl()),e.periodicity&&(o=new r(o).addParameter("rev_type",e.periodicity).getUrl()),e.portfolioId&&"all"!==e.portfolioId&&(o=new r(o).addParameter("portfolio_id",e.portfolioId).getUrl()),o},urlPatch:e.emit,urlPost:e.emit,urlPut:e.emit,urlDelete:e.emit})}),define("DS/MPFPortfolioModel/ProductDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError"],function(t,e,r){"use strict";return e.extend({init:function(t){this._parent(t,"/software-products/product")},buildPath:function(e){var r=this.resourcePath;return t.is(e)&&t.is(e.productTrigram)&&(r+="/"+e.productTrigram),r},urlPatch:r.emit,urlPut:r.emit})}),define("DS/MPFPortfolioModel/ByTrigramV2DataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError","DS/MPFUrl/UrlUtils"],(t,e,r,o)=>{"use strict";return e.extend({init(t){this._parent(t,"/software-products/offers/by-trigram/v2")},buildPath(e){let r=this.resourcePath;return t.is(e)&&t.is(e.productTrigram)&&(r+="/"+e.productTrigram),r},urlGet(t,e={}){let r=this._parent(t,e);return e.country&&(r=new o(r).addParameter("country",e.country).getUrl()),r},urlPatch:r.emit,urlPost:r.emit,urlPut:r.emit,urlDelete:r.emit})}),define("DS/MPFPortfolioModel/MidmarketDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError","DS/MPFUrl/UrlUtils"],function(t,e,r){"use strict";return t.extend({init:function(t){this._parent(t,"/software-products/promotions/midmarket")},buildPath:function(t){return this.resourcePath},urlGet:function(t,e){var o;return o=this._parent(t,e),e||(e={}),e.legalEntityId&&(o=new r(o).addParameter("legal_entity_id",e.legalEntityId).getUrl()),e.promotion&&(o=new r(o).addParameter("promotion",e.promotion).getUrl()),e.periodicity&&(o=new r(o).addParameter("rev_type",e.periodicity).getUrl()),o},urlPatch:e.emit,urlPost:e.emit,urlPut:e.emit,urlDelete:e.emit})}),define("DS/MPFPortfolioModel/PortfolioDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError","DS/MPFUrl/UrlUtils"],function(t,e,r){"use strict";return t.extend({init:function(t){this._parent(t,"/software-products/portfolios")},urlGet:function(t,e){var o;return o=this._parent(t,e),e||(e={}),e.legalEntityId&&(o=new r(o).addParameter("legal_entity_id",e.legalEntityId).getUrl()),e.portfolioId&&"all"!==e.portfolioId&&(o=new r(o).addParameter("portfolio_id",e.portfolioId).getUrl()),e.periodicity&&(o=new r(o).addParameter("rev_type",e.periodicity).getUrl()),o},urlPost:e.emit,urlPut:e.emit,urlPatch:e.emit,urlDelete:e.emit})}),define("DS/MPFPortfolioModel/PortfolioHelper",["UWA/Core","DS/MPFUtils/MPFUtils","DS/MPFConnector/MarketplaceConnector","DS/MPFServices/MarketplaceServices","DS/MPFPortfolioModel/ProductDataProxy","DS/MPFPortfolioModel/PortfolioModel","DS/MPFCompassPlatformServices/CompassPlatformServices","DS/MPFTracker/Dimension","DS/MPFTracker/CloudType"],(t,e,r,o,i,n,s,a,P)=>{"use strict";const l=["IYW","IXW","IYI","IXI","IYR","IWR"],d={isAuthorizedToBuy:t=>r.fetchPromise({service:o.CLICK_AND_BUY}).then(e=>{const r=new i(e),o=new n({},{dataProxy:r}),s=Array.isArray(t)?d.findTrigramInArray(t):t;return o.productTrigram=d.isEdu(s)?d.addProductSuffix(s):s,o.fetchPromise()}).then(t=>t.isBuyable()),isRenewableOffer(t){return!(this.isEduOffer(t)||!1===t.isRenewable())},isMakerOffer(t){if(t.isBundleOffer()){const e=t.getMidMarketPromotionProducts();return e&&Object.keys(e).some(t=>d.isMaker(t))}{const e=t.getProductTrigram();return d.isMaker(e)}},isMaker:t=>(t||(t=""),t.endsWith("-MC")),isEduOffer(t){if(t.isBundleOffer()){const e=t.getMidMarketPromotionProducts();return e&&Object.keys(e).some(t=>d.isEdu(t))}{const e=t.getProductTrigram();return d.isEdu(e)}},isEdu:t=>(t||(t=""),l.some(e=>0===t.indexOf(e))),getOfferCloudType(t){let e;return e=this.isMakerOffer(t)?P.MAKERS:this.isEduOffer(t)?P.EDU:P.OTHER},addProductSuffix(t){let e=t;return e=d.isEdu(t)?t.endsWith("-AC")?t:t+"-AC":t.endsWith("-OC")?t:t+"-OC"},findTrigramInArray(r){const o=e.findInArray(r,t=>t.toUpperCase().endsWith("-OC")),i=e.findInArray(r,t=>!d.isEdu(t));let n;return n=o||(t.is(i)?i:r[0])},getPortfolioRoleFromCompass:t=>new Promise((e,r)=>{try{s.getPortolioRole(t,t=>{e(t)})}catch(t){r(t)}}),addTrackerInformation(t,e){t.addDimension(a.ROLES,e.getProductsAsString()).addDimension(a.CLOUD_TYPE,this.getOfferCloudType(e)).addDimension(a.LICENSING_SCHEME,e.getLicensingScheme()).addDimension(a.OFFER_IDS,e.id)}};return d}),define("DS/MPFPortfolioModel/PortfolioModel",["DS/MPFModel/MPFModel","DS/MPFPortfolioModel/PortfolioHelper","DS/MPFPortfolioModel/LicensingHelper"],(t,e,r)=>{"use strict";const o=Object.freeze({AVAILIBILITY:"availability",BRAND:"brand",COUNTRY:"country",CURRENCY:"currency",PRICE_LIST:"pricelist",PRODUCT_NAME:"product_name",PRODUCT_DISPLAY_NAME:"productDisplayName",SOLUTION_NAME:"solution_name",PORTFOLIO_NAME:"portfolio_name",LIST_PRICE:"list_price",REV_TYPE:"rev_type",SKU_ID:"sku_id",LICENSOR_ID:"licensor_id",PRODUCT_TRIGRAM:"product_trigram",PRODUCT_NUMBER:"product_number",LICENSING_SCHEME:"licensingScheme",LICENSING:"licensing",MARKETING_IMAGE:"marketingImage",DISCOUNT_PRICE:"discountPrice",PERCENTAGE_DISCOUNT:"percentageDiscount",COMPANY_ID:"companyID",DISCOUNT_TO_DISPLAY:"discountToDisplay",BUYABLE:"buyable",PRODUCTS:"products",DESCRIPTION:"description",DISPLAY_PRICE:"displayPrice",IS_MIDMARKET_PROMOTION:"isMidMarketPromotion",MIDMARKET_PROMOTION_NAME:"name",MIDMARKET_PROMOTION_PRICE:"price",MIDMARKET_PROMOTION_PRODUCTS:"products",MIDMARKET_PROMOTION_ID:"promotion_id",BUNDLE_OFFER:"bundleOffer",SOFTWARE_OFFER_DETAILS:"SODetailed",IS_RENEWABLE:"renewable",OFFER_DETAILS:"offerDetails",WHO_IS_ELIGIBLE:"who"}),i=Object.freeze({YSC:"YSC",QSC:"QSC",QRC:"QRC",MSC:"MSC"}),n=Object.freeze({[i.YSC]:12,[i.QSC]:3,[i.QRC]:3,[i.MSC]:1}),s=t.extend({setup(t,e){this._parent(t,e),this._type="PortfolioModel"},parse:t=>t,getCurrency(){return this.getCurrencies().currency},getPricelistCurrency(){return this.getPriceList()[0].currency},getPricelistPrice(){return this.getPriceList()[0].price},getPrice(){return parseFloat(this.getListedPrice())/n[this.getRevType()]},getMonthlyDiscountPrice(){return parseFloat(this.getDiscountPrice())/n[this.getRevType()]},getMonthlyMidMarketPrice(){return parseFloat(this.getMidMarketPromotionPrice())/n[this.getRevType()]},getId(){return this.id},getCurrencies(){return this.get(o.CURRENCY)},getCompanyId(){return this.get(o.COMPANY_ID)},getLicensingScheme(){return this.get("licensing_scheme")||this.get(o.LICENSING_SCHEME)},getPriceList(){return this.get(o.PRICE_LIST)},getRevType(){return this.get(o.REV_TYPE)||this.get("revType")},getPortfolioName(){return this.get(o.PORTFOLIO_NAME)},getListedPrice(){return this.get(o.LIST_PRICE)||this.get("listPrice")},getDiscountPrice(){return this.get(o.DISCOUNT_PRICE)},getProductName(){return this.get(o.PRODUCT_NAME)||this.get("productName")},getProductDisplayName(){return this.get(o.PRODUCT_DISPLAY_NAME)},getSkuId(){return this.get(o.SKU_ID)||this.get("skuId")},getLicensorId(){return this.get(o.LICENSOR_ID)||this.get("licensorId")},getProductTrigram(){return this.get("productTrigram")||this.get(o.PRODUCT_TRIGRAM)},getProductNumber(){return this.get(o.PRODUCT_NUMBER)},getDiscountToDisplay(){return this.get(o.DISCOUNT_TO_DISPLAY)},getMarketingImage(){return this.get(o.MARKETING_IMAGE)},getPercentageDiscount(){return this.get(o.PERCENTAGE_DISCOUNT)},isMidMarketPromotion(){return!0===this.get(o.IS_MIDMARKET_PROMOTION)},getMidMarketPromotionName(){return this.get(o.MIDMARKET_PROMOTION_NAME)},getMidMarketPromotionPrice(){return this.get(o.MIDMARKET_PROMOTION_PRICE)},getMidMarketPromotionProducts(){return this.get(o.MIDMARKET_PROMOTION_PRODUCTS)},getMidMarketPromotionId(){return this.get(o.MIDMARKET_PROMOTION_ID)},getProducts(){return this.get(o.PRODUCTS)},getDescription(){return this.get(o.DESCRIPTION)},isDisplayingPrice(){return this.get(o.DISPLAY_PRICE)},isBuyable(){return this.get(o.BUYABLE)},getLicensing(){return this.get(o.LICENSING)},isBundleOffer(){return!0===this.get(o.BUNDLE_OFFER)},isCreditOffer(){const t=this.getLicensing();return r.isCredit(t)},getProductsAsString(){let t=this.getProductTrigram();if(!t){const e=this.getProducts()||{};t=Object.keys(e).join(",")}return t},getSoftwareOfferDetails(){return this.get(o.SOFTWARE_OFFER_DETAILS)},isRenewable(){return this.get(o.IS_RENEWABLE)}});return s.Fields=o,s.RevTypes=i,s.NumberMonths=n,s.Licensings=r.LicensingSchemes,s}),define("DS/MPFPortfolioModel/PortfolioCollection",["UWA/Core","DS/MPFModel/MPFCollection","DS/MPFPortfolioModel/PortfolioModel"],(t,e,r)=>{"use strict";return e.extend({model:r,parse(e){let o;if("object"===t.typeOf(e)){if(this.totalRecords=e.totalRecords,o=t.is(e.listPortfolio)?e.listPortfolio:[],t.is(e.promotions)&&Array.isArray(e.promotions)){const t=e.promotions.map(function(t){return t[r.Fields.IS_MIDMARKET_PROMOTION]=!0,t});o=o.concat(t)}}else o=e;return o},constainsOnlyBundles(){return this.every(t=>t.isBundleOffer())}})}),define("DS/MPFPortfolioModel/PortfolioPackModel",["UWA/Core","DS/MPFModel/MPFModel","DS/MPFPortfolioModel/PortfolioCollection","DS/MPFDataProxy/NoDataProxy","DS/MPFError/NotImplementedError","DS/MPFPortfolioModel/PortfolioHelper"],(t,e,r,o,i,n)=>{"use strict";const s=Object.freeze({OFFERS:"offers",DISPLAY_NAME:"displayName",ORIGIN:"origin",LICENSOR_ID:"licensorId"}),a=Object.freeze({OE:"OE",MP:"MP"}),P=e.extend({setup(t,e){this._parent(t,e),this._type="PortfolioPackModel"},parse(e){const i=e;return t.is(i.offers)&&Array.isArray(i.offers)&&(i.offers=new r(i.offers,{dataProxy:o.getInstance(),parse:!0})),e},getOffers(){return this.get(s.OFFERS)},getDisplayName(){return this.get(s.DISPLAY_NAME)},getLicensorId(){return this.get(s.LICENSOR_ID)},isBundle(){return this.get(s.ORIGIN)===a.MP},constainsOnlyBundleOffers(){return this.getOffers().constainsOnlyBundles()},fetchBundleItemsInfo(){const t=Object.keys(this.getOffers().first().getProducts());return Promise.all(t.map(t=>n.getPortfolioRoleFromCompass(t.split("-")[0]))).then(t=>t.reduce((t,e)=>(t[e.acronym]=e,t),{}))}});return P.Fields=s,P.Origin=a,P}),define("DS/MPFPortfolioModel/PortfolioPackCollection",["UWA/Core","DS/MPFModel/MPFCollection","DS/MPFPortfolioModel/PortfolioPackModel"],function(t,e,r){"use strict";return e.extend({model:r,getStandardOffer(){return this.find(t=>!t.isBundle())},hasBundles(){const e=this.find(t=>t.isBundle());return t.is(e)},getBundles(){return this.filter(t=>t.isBundle())},getBundleByName(t){return this.getBundles().find(e=>{return e.getDisplayName().toLowerCase().replace(/(-)|(\s+)/g,"")===decodeURIComponent(t).toLowerCase().replace(/(-)|(\s+)/g,"")})},constainsOnlyBundleOffers(){return this.every(t=>t.constainsOnlyBundleOffers())}})}),define("DS/MPFPortfolioModel/PortfolioFactory",["DS/MPFModelFactory/Factory","DS/MPFPortfolioModel/PortfolioModel","DS/MPFPortfolioModel/PortfolioCollection","DS/MPFPortfolioModel/PortfolioPackModel","DS/MPFPortfolioModel/PortfolioPackCollection","DS/MPFPortfolioModel/PortfolioDataProxy","DS/MPFPortfolioModel/PromotionsDataProxy","DS/MPFPortfolioModel/MidmarketDataProxy","DS/MPFPortfolioModel/PlaygroundDataProxy","DS/MPFPortfolioModel/PlaygroundPublicDataProxy","DS/MPFPortfolioModel/ByTrigramDataProxy","DS/MPFPortfolioModel/ByTrigramV2DataProxy","DS/MPFPortfolioModel/ByNameDataProxy","DS/MPFPortfolioModel/ProductDataProxy","DS/MPFPortfolioModel/ProductDependenciesDataProxy"],(t,e,r,o,i,n,s,a,P,l,d,u,c,M,D)=>{"use strict";const f=Object.freeze({PORTFOLIO:"portfolio",PROMOTIONS:"promotions",MIDMARKET:"midmarket",PLAYGROUND:"playground",PLAYGROUND_PUBLIC:"playgroundPublic",BY_TRIGRAM:"byTrigram",BY_TRIGRAM_V2:"byTrigramV2",BY_NAME:"byName",PRODUCT:"product",PRODUCT_DEPENDENCIES:"productDependencies"}),I=t.extend({createModel(t,r,o){return this._parent(e,t,r,o)},createCollection(t,e,o){return this._parent(r,t,e,o)},createPackCollection(t,e,r={}){return r.dataProxy=this.getDataProxy(t),new i(e,r)},getDataProxy(t){let e;return t===f.PORTFOLIO?(this.dataProxies[f.PORTFOLIO]||(this.dataProxies[f.PORTFOLIO]=new n(this.connector)),e=this.dataProxies[f.PORTFOLIO]):t===f.PROMOTIONS?(this.dataProxies[f.PROMOTIONS]||(this.dataProxies[f.PROMOTIONS]=new s(this.connector)),e=this.dataProxies[f.PROMOTIONS]):t===f.MIDMARKET?(this.dataProxies[f.MIDMARKET]||(this.dataProxies[f.MIDMARKET]=new a(this.connector)),e=this.dataProxies[f.MIDMARKET]):t===f.PLAYGROUND?(this.dataProxies[f.PLAYGROUND]||(this.dataProxies[f.PLAYGROUND]=new P(this.connector)),e=this.dataProxies[f.PLAYGROUND]):t===f.PLAYGROUND_PUBLIC?(this.dataProxies[f.PLAYGROUND_PUBLIC]||(this.dataProxies[f.PLAYGROUND_PUBLIC]=new l(this.connector)),e=this.dataProxies[f.PLAYGROUND_PUBLIC]):t===f.BY_TRIGRAM?(this.dataProxies[f.BY_TRIGRAM]||(this.dataProxies[f.BY_TRIGRAM]=new d(this.connector)),e=this.dataProxies[f.BY_TRIGRAM]):t===f.BY_TRIGRAM_V2?(this.dataProxies[f.BY_TRIGRAM_V2]||(this.dataProxies[f.BY_TRIGRAM_V2]=new u(this.connector)),e=this.dataProxies[f.BY_TRIGRAM_V2]):t===f.PRODUCT?(this.dataProxies[f.PRODUCT]||(this.dataProxies[f.PRODUCT]=new M(this.connector)),e=this.dataProxies[f.PRODUCT]):t===f.PRODUCT_DEPENDENCIES?(this.dataProxies[f.PRODUCT_DEPENDENCIES]||(this.dataProxies[f.PRODUCT_DEPENDENCIES]=new D(this.connector)),e=this.dataProxies[f.PRODUCT_DEPENDENCIES]):t===f.BY_NAME&&(this.dataProxies[f.BY_NAME]||(this.dataProxies[f.BY_NAME]=new c(this.connector)),e=this.dataProxies[f.BY_NAME]),e}});return I.Types=f,I});