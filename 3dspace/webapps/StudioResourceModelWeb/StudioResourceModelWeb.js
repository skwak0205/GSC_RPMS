define("DS/StudioResourceModelWeb/interfaces/CATI3DXPictureResourceAsset",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DXPictureResourceAsset",required:{getPicture:function(){},getPictureSizeInPixel:function(){},_updatePicture:function(){}},optional:{}})}),define("DS/StudioResourceModelWeb/extensions/CATE3DXKeyframerResourceAsset",["UWA/Core","UWA/Class","UWA/Class/Listener","UWA/Class/Events"],function(e,t,s,i){"use strict";return t.extend(s,i,{init:function(){},Build:function(){this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"ASSET_CHANGED",()=>{this._clearKey(),this.dispatchEvent("KEY_CHANGED")})},Dispose:function(){this._clearKey()},_clearKey:function(){delete this._key,delete this._keyPromise},getKey:function(){return"true"!==localStorage.getItem("EWS_AuthoringV2")?e.Promise.resolve(this.QueryInterface("CATI3DXAssetHolder")._getLinkDescription()):this._key?e.Promise.resolve(this._key):this._keyPromise?this._keyPromise:(this._keyPromise=this.QueryInterface("CATI3DXAssetHolder")._resolveAsset().then(t=>"string"!=typeof t?e.Promise.reject(new Error("Asset is not a string")):(this._key=t,delete this._keyPromise,this._key)).catch(t=>(delete this._keyPromise,e.Promise.reject(t))),this._keyPromise)}})}),define("DS/StudioResourceModelWeb/extensions/CATE3DXPictureResourceAsset",["UWA/Core","UWA/Class","UWA/Class/Listener","UWA/Class/Events","DS/CAT3DExpModel/CAT3DXModel"],function(e,t,s,i,r){"use strict";return t.extend(s,i,{init:function(){},Build:function(){this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"ASSET_CHANGED",()=>{this._clearPicture(),this.dispatchEvent("PICTURE_CHANGED")})},Dispose:function(){this._clearPicture()},_clearPicture:function(){delete this._picture,this._pictureBlobURL&&(URL.revokeObjectURL(this._pictureBlobURL),delete this._pictureBlobURL),delete this._picturePromise},getPicture:function(){if(this._picture)return e.Promise.resolve(this._picture);if(this._picturePromise)return this._picturePromise;if("true"!==localStorage.getItem("EWS_AuthoringV2")){var t=r.getFactory();return t.RetrieveAssetFromBinaryResource?(this._picturePromise=t.RetrieveAssetFromBinaryResource(r._getDataFromExpObject(this.GetObject())).then(e=>(this._pictureBlobURL=URL.createObjectURL(e),this._picture=new Image,this._picture.src=this._pictureBlobURL,delete this._picturePromise,this._picture)).catch(e=>{this._picturePromise.reject(e),delete this._picturePromise}),this._picturePromise):e.Promise.reject(new Error("this extension must be use with Factory CSI only"))}return this._picturePromise=this.QueryInterface("CATI3DXAssetHolder")._resolveAsset().then(t=>t instanceof Blob?(this._pictureBlobURL=URL.createObjectURL(t),this._picture=new Image,this._picture.src=this._pictureBlobURL,delete this._picturePromise,this._picture):e.Promise.reject(new Error("Asset is not a binary object"))).catch(t=>(delete this._picturePromise,e.Promise.reject(t))),this._picturePromise},getPictureSizeInPixel:function(){return this.getPicture().then(function(e){return{w:e.width,h:e.height}})},_updatePicture:function(e){this._clearPicture(),this._pictureBlobURL=e,this._picture=new Image,this._picture.src=this._pictureBlobURL}})}),define("DS/StudioResourceModelWeb/extensions/CATE3DXSoundResourceAsset",["UWA/Core","UWA/Class","UWA/Class/Listener","UWA/Class/Events","DS/CAT3DExpModel/CAT3DXModel"],function(e,t,s,i,r){"use strict";return t.extend(s,i,{init:function(){},Build:function(){this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"ASSET_CHANGED",()=>{this._clearSound(),this.dispatchEvent("SOUND_CHANGED")})},Dispose:function(){this._clearSound()},_clearSound:function(){delete this._sound,this._soundBlobURL&&(URL.revokeObjectURL(this._soundBlobURL),delete this._soundBlobURL),delete this._soundPromise},getSound:function(){if(this._sound)return e.Promise.resolve(this._sound);if(this._soundPromise)return this._soundPromise;if("true"!==localStorage.getItem("EWS_AuthoringV2")){var t=r.getFactory();return t.RetrieveAssetFromBinaryResource?(this._soundPromise=t.RetrieveAssetFromBinaryResource(r._getDataFromExpObject(this.GetObject())).then(e=>(this._soundBlobURL=URL.createObjectURL(e),this._sound=new Audio(this._soundBlobURL),delete this._soundPromise,this._sound)).catch(e=>{this._soundPromise.reject(e),delete this._soundPromise}),this._soundPromise):e.Promise.reject(new Error("this extension must be use with Factory CSI only"))}return this._soundPromise=this.QueryInterface("CATI3DXAssetHolder")._resolveAsset().then(t=>t instanceof Blob?(this._soundBlobURL=URL.createObjectURL(t),this._sound=new Audio(this._soundBlobURL),delete this._soundPromise,this._sound):e.Promise.reject(new Error("Asset is not a binary object"))).catch(t=>(delete this._soundPromise,e.Promise.reject(t))),this._soundPromise},_updateSound:function(e){this._clearSound(),this._soundBlobURL=e,this._sound=new Audio(this._soundBlobURL)}})}),define("DS/StudioResourceModelWeb/interfaces/CATI3DXKeyframerResourceAsset",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DXKeyframerResourceAsset",required:{getKey:function(){}},optional:{}})}),define("DS/StudioResourceModelWeb/interfaces/CATI3DXSoundResourceAsset",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DXSoundResourceAsset",required:{getSound:function(){},_updateSound:function(){}},optional:{}})}),define("DS/StudioResourceModelWeb/extensions/CATE3DXURLResourceAsset",["UWA/Core","UWA/Class","UWA/Class/Listener","UWA/Class/Events"],function(e,t,s,i){"use strict";return t.extend(s,i,{init:function(){},Build:function(){this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"ASSET_CHANGED",()=>{this._clearUrl(),this.dispatchEvent("URL_CHANGED")})},Dispose:function(){this._clearUrl()},_clearUrl:function(){delete this._url,delete this._urlPromise},getURL:function(){return"true"!==localStorage.getItem("EWS_AuthoringV2")?e.Promise.resolve(this.QueryInterface("CATI3DXAssetHolder")._getLinkDescription()):this._url?e.Promise.resolve(this._url):this._urlPromise?this._urlPromise:(this._urlPromise=this.QueryInterface("CATI3DXAssetHolder")._resolveAsset().then(t=>"string"!=typeof t?e.Promise.reject(new Error("Asset is not a string")):(this._url=t,delete this._urlPromise,this._url)).catch(t=>(delete this._urlPromise,e.Promise.reject(t))),this._urlPromise)}})}),define("DS/StudioResourceModelWeb/interfaces/CATI3DXURLResourceAsset",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DXURLResourceAsset",required:{getURL:function(){}},optional:{}})}),define("DS/StudioResourceModelWeb/extensions/CATE3DXURLResourceAssetHolder",["UWA/Core","DS/CAT3DExpModel/extensions/CATE3DXAssetHolder"],function(e,t){"use strict";return console.warn("DS/StudioResourceModelWeb/extensions/CATE3DXURLResourceAssetHolder Deprecated"),t.extend({_resolveAssetV1:function(){return e.Promise.resolve(this._getLinkDescription())}})});