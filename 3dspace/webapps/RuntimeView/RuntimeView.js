define("DS/RuntimeView/Abstract",["UWA/Core","UWA/Event","UWA/Class","DS/WebappsUtils/WebappsUtils","DS/CoreEvents/ModelEvents","UWA/Data"],function(e,s,t,r,i){"use strict";var o=!1,n={en:"",fr:"French",de:"German",ja:"Japanese",zh:"Simplified_Chinese",es:"Spanish",ko:"Korean",ru:"Russian",it:"Italian","pt-BR":"Portuguese_Brazil","zh-TW":"Traditional_Chinese",pl:"Polish",cs:"Czech"};function u(e,s){s=s.split(".");for(var t=/(.+)\[(\d+)\]/,r=0;r<s.length;r++){var i=t.exec(s[r]);i?e=e[i[1]][parseInt(i[2],10)]:e&&(e=e[s[r]])}return e}function a(){var e=window.location.href.split("?")[0].split("/");return e[e.length-2]}function l(s){return s='{"'+(s=(s=(s=(s=(s=s.replace(/<meta charset="UTF-8"\/>/g,"")).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")).replace(/(\r\n|\r|\n|\u0085|\u000C|\u2028|\u2029)/g,"")).replace(/\s+(?=([^"]*"[^"]*")*[^"]*$)/g,"")).replace(/=+(?=([^"]*"[^"]*")*[^"]*$)/g,'":').replace(/";/g,'","')).substring(0,s.length-2)+"}",function(e){var s,t,r,i={};for(var o in e){s=i;for(var n=(t=o.split(".")).pop();t.length;)s=s[r=t.shift()]=s[r]||{};s[n]=e[o]}return i}(e.Json.decode(s))}var c=t.extend({defaultOptions:{resourceKey:null},init:function(s,t){this.options=e.extend(this.defaultOptions,s),this._parent(s),this._manager=t,this._resourceKey=this.options.resourceKey},getKey:function(e){if(this._resourceKey){var s=e.key,t=this._resourceKey.split("/")[1]+"."+e.key,r=this._manager._getKeyValue({resourceKey:this._resourceKey,key:s});if(r||(r=this._manager._getKeyValue({resourceKey:this._resourceKey,key:t})),r)return r.value}else console.warn("[ResourceManager]","ERROR","fileName option has not been defined")},getIcon:function(e){if(this._resourceKey){var s=this._resourceKey+"."+e.key+".Icon."+e.size,t=this._resourceKey.split("/")[1]+"."+e.key+".Icon."+e.size,i=this._manager._getKeyValue({resourceKey:this._resourceKey,key:s});if(i||(i=this._manager._getKeyValue({resourceKey:this._resourceKey,key:t})),i)return r.getWebappsBaseUrl()+i.module+"/assets/icons/32/"+i.value}else console.warn("[ResourceManager]","ERROR","fileName option has not been defined")},getTitle:function(e){if(this._resourceKey){var s=this._resourceKey+"."+e.key+".Title",t=this._resourceKey.split("/")[1]+"."+e.key+".Title",r=this._manager._getKeyValue({resourceKey:this._resourceKey,key:s});if(r||(r=this._manager._getKeyValue({resourceKey:this._resourceKey,key:t})),r)return r.value}else console.warn("[ResourceManager]","ERROR","fileName option has not been defined")}});return t.extend({defaultOptions:{},AFR_DIR:"assets/afr/",NLS_DIR:"assets/catnls/",RSC_DIR:"assets/catrsc/",ICO_32_DIR:"assets/icons/32/",DEFAULT_LANGUAGE:"",init:function(e){this._parent(e),this._modelEvents=new i,this._listOfResources=[],this._timeoutAjax=[]},onResourceLoaded:function(e,s){var t=this;if(void 0===e&&(e={}),e.resourceFile)if(1===e.resourceFile.split("/").length&&(e.resourceFile=a()+"/"+e.resourceFile),t._listOfResources[e.resourceFile]){var r=new c({resourceKey:e.resourceFile},t);s.call(r)}else this._modelEvents.subscribe({event:"RESOURCE_LOADED"},function(r,i){if(e.resourceFile===r.resourceKey){t._modelEvents.unsubscribe(i);var o=new c({resourceKey:r.resourceKey},t);s.call(o)}})},_registerResource:function(s){var t=this;s.module=s.module||a(),s.language=s.language||this.DEFAULT_LANGUAGE,s.resourceConverter=s.resourceConverter||l;var i=s;if(i.resourceFile){var u,f,d=i.resourceFile,h=i.resourceFile.split("/");if(2!==h.length?console.error("[ResourceManager]","ERROR","Invalid resourceFile: "+i.resourceFile,'Did you provide the module name in value of ResourceFile attribute in the CATCommandHeader inside your D-AFr (xml) file ? E.g. ResourceFile="MyModule/MyResourceFileNameWithoutExtension"'):(u=h[0],f=h[1]),t._listOfResources[d])setTimeout(function(){t._modelEvents.publish({context:t,event:"RESOURCE_LOADED",data:{resourceKey:d}})},0);else if(u){var R="";let a=void 0===s.isFallbackRequired||s.isFallbackRequired,l=!1,h="";s.language&&""!==s.language&&""!==n[s.language]&&void 0!==n[s.language]&&(R=n[s.language]+"/",a&&(l=!0));var g=r.getWebappsBaseUrl()+u+"/"+i.resourceDir+R+f+i.fileExtension;l&&(h=r.getWebappsBaseUrl()+u+"/"+i.resourceDir+f+i.fileExtension);var p="Ajax";function _(e){t._listOfResources[d]||(o&&console.log("register resource",d+i.fileExtension,t._listOfResources),t._listOfResources[d]=t.options.resourceConverter(e),t._listOfResources[d]["@module"]=u);var s=new c({resourceKey:d},t);t._modelEvents.publish({context:s,event:"RESOURCE_LOADED",data:{resourceKey:d}})}"../"!==r.getWebappsBaseUrl()&&(p="Data"),this._timeoutAjax[d]&&window.clearTimeout(this._timeoutAjax[d]),this._timeoutAjax[d]=setTimeout(function(){e[p].request(g,{async:!0,onComplete:_,onFailure:function(s){console.warn("Error loading file: ",g,"\n",'Did you provide the module name in value of ResourceFile attribute in the CATCommandHeader inside your D-AFr (xml) file ? E.g. ResourceFile="MyModule/MyResourceFileNameWithoutExtension"'),l?e[p].request(h,{async:!0,onComplete:_,onFailure:function(){console.warn("Error loading file (using fallback): ",h),t._modelEvents.publish({context:t,event:"RESOURCE_LOADED",data:{resourceKey:d}})}}):t._modelEvents.publish({context:t,event:"RESOURCE_LOADED",data:{resourceKey:d}})}})},50)}else console.error("No module defined!",i)}},getKeyValue:function(e){console.warn("DEPRECATED","Please do not use this method anymore. Look at WUXForDev.tst/RuntimeViewDemo.mweb to see the right way to consume rtv resources.");var s=e.split(".")[0],t=u(this._listOfResources[s],e);if(o&&console.log(e,"--\x3e",t),this._listOfResources[s])return{module:this._listOfResources[s]["@module"],value:t}},_getKeyValue:function(e){var s=u(this._listOfResources[e.resourceKey],e.key);if(o&&console.log(e.key,"--\x3e",s),s&&this._listOfResources[e.resourceKey])return{module:this._listOfResources[e.resourceKey]["@module"],value:s}}})}),define("DS/RuntimeView/RSCManager",["UWA/Core","UWA/Event","DS/RuntimeView/Abstract","DS/WebappsUtils/WebappsUtils"],function(e,s,t,r){"use strict";var i=t.singleton({defaultOptions:{module:null,fileName:null,resourceDir:"assets/catrsc/",fileExtension:".CATRsc",onComplete:null},init:function(){this._parent()},loadResource:function(s){this.options=e.extend(this.defaultOptions,s),this._registerResource(this.options)}});return e.namespace("WUX/RuntimeView/RSCManager",i)}),define("DS/RuntimeView/NLSManager",["UWA/Core","UWA/Event","DS/RuntimeView/Abstract"],function(e,s,t){"use strict";var r=t.singleton({defaultOptions:{fileName:null,resourceDir:"assets/catnls/",fileExtension:".CATNls"},init:function(){this._parent()},loadResource:function(s){this.options=e.extend(this.defaultOptions,s),this._registerResource(this.options)}});return e.namespace("WUX/RuntimeView/NLSManager",r)}),define("DS/RuntimeView/FileManager",["UWA/Core","UWA/Event","DS/RuntimeView/Abstract"],function(e,s,t){"use strict";return t.extend({defaultOptions:{fileName:null},init:function(){this._parent(),console.warn("Deprecated","RuntimeView/FileManager","Please use UWA.Ajax.request or UWA.Data.request")},loadFile:function(e){console.warn("Deprecated","RuntimeView/FileManager.loadFile()","Please use UWA.Ajax.request or UWA.Data.request")}})});