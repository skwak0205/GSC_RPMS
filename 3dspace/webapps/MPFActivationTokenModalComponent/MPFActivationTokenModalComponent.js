define("DS/MPFActivationTokenModalComponent/ActivationTokenModal",["UWA/Core","UWA/String","UWA/Class/View","DS/UIKIT/Input/Button","DS/UIKIT/Input/Text","DS/UIKIT/Spinner","DS/UIKIT/Alert","i18n!DS/MPFActivationTokenModalComponent/assets/nls/ActivationTokenModalComponent"],function(e,t,s,n,i,a,o,r){"use strict";return s.extend({className:"mpf-token-input",setup:function(e){e||(e={}),this._parent(e),this.codeInput=new i({placeholder:r.get("enterCode"),multiline:!1,maxlength:12,id:"token",events:{onKeyDown:this._checkStateButton.bind(this)}}),this.button=new n({value:r.get("verify"),className:"verify",disabled:"true",events:{onClick:this._onClick.bind(this)}}),this.alert=new o({closable:!1,visible:!0,maximumVisibleMessages:1})},render:function(){var t;return t=e.createElement("form",{html:[this.codeInput,this.button,this.alert]}),this.container.setContent(t),this.dispatchEvent("onRender"),this},_onClick:function(){var e,t=this;(e=new a).inject(document.getElement(".mpf-token-input button.verify"),"after"),e.show(),setTimeout(function(){e.hide(),"000000000000"===t.codeInput.getValue()?t._displayAlreadyRegistratedMessage():t.isCodeOK()?(t._displayValidationMessage(),t.codeInput.disable(),t.dispatchEvent("validated")):t._displayErrorMessage()},2e3)},_displayValidationMessage:function(){var e=this.alert.getMessages();e.length>0&&this.alert.remove(e[0]),this.alert.add({className:"success",message:r.get("tokenSuccess")})},isCodeOK:function(){return this.codeInput.getValue().test(/[a-zA-Z0-9]{12}/)},_checkStateButton:function(){this.codeInput.getValue().length>0?this.button.enable():this.button.disable()},_displayErrorMessage:function(){var e=this.alert.getMessages();e.length>0&&this.alert.remove(e[0]),this.alert.add({className:"error",message:r.get("tokenError")})},_displayAlreadyRegistratedMessage:function(){var e=this.alert.getMessages();e.length>0&&this.alert.remove(e[0]),this.alert.add({className:"error",message:r.get("tokenAlreaydyUsed")})}})});