define("DS/MPFCurrencySelectComponent/CurrencySelectComponent",["UWA/Core","DS/MPFView/FieldSelectInputV2","DS/MPFServices/ObjectService","DS/MPFShopModel/ShopModel","DS/MPFView/ValidationResultBuilder","i18n!DS/MPFCurrencySelectComponent/assets/nls/MPFCurrencySelectComponent"],function(e,t,i,r,s,l){"use strict";return t.extend({setup:function(e){e||(e={}),i.requiredOfPrototype(this.model,r,"this.model must be a ShopModel"),e.placeholder=l.get("selectCurrency"),e.fieldName=r.Fields.CURRENCIES,e.fieldLabel=l.get("currency"),e.required=!0,e.dynamicValidation=!0,e.readOnly=!0===e.readOnly||this.model.getState()===r.States.SUBMITTED,e.selectableOptions=this._getCurrencies(),this._parent(e)},validate:function(t){t||(t={});var i,r,d,n,o=this,u=new s,a={};return this._removeErrorMessage(),this.required&&""===this.getValue().trim()&&u.addError(this.fieldName,l.get("currencyRequired")),u.isValid&&(a[this.fieldName]=[this.getValue()],d=(r=Array.isArray(this.model.getSupportedCurrencies())&&this.model.getSupportedCurrencies().length>0)&&this.model.getSupportedCurrencies()[0]!==this.getValue(),r&&!d||this.model.set(a,{silent:this.silent}),i=this.model.validate(this.model.pick(this.fieldName)),e.is(i)&&i.filter(function(e){return e.fieldName===o.fieldName}).forEach(function(e){u.addError(o.fieldName,e.message)})),(n=u.build()).isValid||this._displayErrorMessage(n),n},_getCurrencies:function(){var t,i,r;return(t=e.is(this.model.getSupportedCurrencies())&&this.model.getSupportedCurrencies().length>0)&&(i=this.model.getSupportedCurrencies()[0]),r=[{value:"EUR",selected:!!t&&"EUR"===i},{value:"USD",selected:!!t&&"USD"===i},{value:"GBP",selected:!!t&&"GBP"===i}],this.model.isInternal()&&r.push({value:"AED",selected:!!t&&"AED"===i}),r}})});