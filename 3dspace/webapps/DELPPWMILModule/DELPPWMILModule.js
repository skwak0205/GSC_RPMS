define("DS/DELPPWMILModule/ManageInconsistentLinksBaseUI",["UWA/Core"],function(e){"use strict";return function(t,n,o,a,i,l){var s,r,c,u={className:""},d=null;return s=function(s){var p,g,f=n.create("Element","div",{class:"mil-panel-container"}),I=n.create("Element","div",{class:"mil-tree-container"}).inject(f),m=n.getComponent("Button"),L=s.manageInconsistentLinksCmdId;c=e.is(s.cleanup,"function")?s.cleanup:null,p=a.getWUXNodeModel(),o.loadDocument(p),o.getContent().inject(I),g={shouldBeSelected:function(t){const n=t.options.milStatus;let o=!0;return e.is(n)&&(o="success"!==n),o}},e.extend(p.options,g),(d=n.create("Dialog",{identifier:"MIL-UI",domId:"MILUI-dialog",title:i.getNLSValue("ManageInconsistentLinksUI.PanelTitle"),resizableFlag:!0,visibleFlag:!1,modalFlag:!0,content:f,height:315,width:600,snappableFlag:!1,buttons:{Ok:new m({disabled:!0,label:i.getNLSValue("MIL.PanelApplyButton"),emphasize:"primary",onClick:function(){e.is(u.onApplyCallBack,"function")&&u.onApplyCallBack()}}),Cancel:new m({onClick:function(){d.close()}})}})).close=function(){l.getBICmdState()||l.resetBIModelCollection(),e.is(L)?t.notify("toggleCmdCheckHeaderState",{cmdName:L,cmdState:!1}):r()}},r=function(){d.hide()},{buildSkeleton:function(t){u=e.extend(u,t),s(u)},destroy:function(t){e.is(t,"boolean")&&t?e.is(c,"function")&&c():this.isActive()&&r(),e.is(a)&&a.emptyNodeModel(),e.is(d)&&(d.destroy(),d=null)},isActive:function(){return!!e.is(d)&&d.visibleFlag},loadUI:function(){e.is(d)&&!1===d.visibleFlag&&d.show()},setApplyButtonState:function(){var e=!1;a.getSelectedNodesInfo().length>0&&(e=!0),d.buttons.Ok.disabled=!e}}}}),define("DS/DELPPWMILModule/MFNChangeImpactMgmtUI",["UWA/Core","DS/DELPPWMILModule/ManageInconsistentLinksBaseUI"],function(e,t){"use strict";const n=function(t,n){const o=n||null;let a=new Map;return(...n)=>{const i=e.is(o,"function")?o(...n):n[0];let l;return a.has(i)?l=a.get(i):(l=t(...n),a.set(i,l)),l}},o=function(e){return Array.isArray(e)&&e.length>1},a=function(e,t=null){const n=e.length;return n>0?e[n-1]:t},i=function(e,t=null){return e.length>0?e[0]:t},l=function(e,t){return e.add(t)},s=function(e,t){let n=new Set(e);for(const e of t)n.add(e);return n},r=(...e)=>t=>e.reduce((e,t)=>t(e),t),c=(e=>t=>t.split(e))(","),u=r(c,a),d=r(c,i),p=e=>(...t)=>t.join(e),g=p(" "),f=p(","),I=function(e){let t,n=new Map;return{from(e){return t=e,this},addDefaultOption(){return n.set(t.value,{labelItem:t.label,valueItem:t.value,tooltipItem:t.tooltip}),this},addReplaceByBranchOption(){return n.set(e.Replace_By_NewBranch.value,{labelItem:e.Replace_By_NewBranch.label,valueItem:e.Replace_By_NewBranch.value,tooltipItem:e.Replace_By_NewBranch.tooltip}),this},addReplaceByNewOption(){return n.set(e.Replace_By_New.value,{labelItem:e.Replace_By_New.label,valueItem:e.Replace_By_New.value,tooltipItem:e.Replace_By_New.tooltip}),this},addDeleteOption(){return n.set(e.Delete.value,{labelItem:e.Delete.label,valueItem:e.Delete.value,tooltipItem:e.Delete.tooltip}),this},addMadeFromUseCaseAssembly(){n.set(e.MadeFrom_UseCase_Att_Add_ManufacturingAssembly.value,{labelItem:e.MadeFrom_UseCase_Att_Add_ManufacturingAssembly.label,valueItem:e.MadeFrom_UseCase_Att_Add_ManufacturingAssembly.value,tooltipItem:e.MadeFrom_UseCase_Att_Add_ManufacturingAssembly.tooltip})},addMadeFromUseCaseFabrication(){return n.set(e.MadeFrom_UseCase_Att_Add.value,{labelItem:e.Delete.label,valueItem:e.Delete.value,tooltipItem:e.Delete.tooltip}),this},addRerouteOption(){return n.set(e.Reroute_ImplementAndScopeLink.value,{labelItem:e.Reroute_ImplementAndScopeLink.label,valueItem:e.Reroute_ImplementAndScopeLink.value,tooltipItem:e.Reroute_ImplementAndScopeLink.tooltip}),this},addReplaceByNewRevisionOption(){return n.set(e.Replace_By_NewRev.value,{labelItem:e.Replace_By_NewRev.label,valueItem:e.Replace_By_NewRev.value,tooltipItem:e.Replace_By_NewRev.tooltip}),this},addEvolveInstanceOption(){return n.set(e.Evolve_Instance.value,{labelItem:e.Evolve_Instance.label,valueItem:e.Evolve_Instance.value,tooltipItem:e.Evolve_Instance.tooltip}),this},addRerouteOnlyOption(){return n.set(e.Reroute_ImplementLink.value,{labelItem:e.Reroute_ImplementLink.label,valueItem:e.Reroute_ImplementLink.value,tooltipItem:e.Reroute_ImplementLink.tooltip}),this},addAdditionalOptions(){switch(t){case e.Replace_By_NewRev:this.addReplaceByNewOption().addReplaceByBranchOption().addRerouteOption().addDeleteOption().addEvolveInstanceOption();break;case e.Replace_By_NewBranch:this.addReplaceByNewRevisionOption().addReplaceByNewOption().addRerouteOption().addDeleteOption().addEvolveInstanceOption();break;case e.Replace_By_New:this.addReplaceByNewRevisionOption().addReplaceByBranchOption().addRerouteOption().addDeleteOption().addEvolveInstanceOption();break;case e.Replace_By_Existing:case e.Reroute_ImplementAndScopeLink:this.addReplaceByNewRevisionOption().addReplaceByNewOption().addReplaceByBranchOption().addRerouteOption().addDeleteOption().addEvolveInstanceOption();break;case e.Reroute_ImplementLink:this.addReplaceByNewRevisionOption().addReplaceByNewOption().addReplaceByBranchOption().addDeleteOption().addEvolveInstanceOption();break;case e.Evolve_Instance:this.addReplaceByNewRevisionOption().addReplaceByNewOption().addReplaceByBranchOption().addDeleteOption().addRerouteOnlyOption();break;case e.MadeFrom_UseCase_Att_Add:this.addMadeFromUseCaseAssembly()}return this},addIgnoreOption(){return n.set(e.Ignore.value,{labelItem:e.Ignore.label,valueItem:e.Ignore.value}),this},removeOptions(e){for(const t of e)n.delete(t);return this},toArray:()=>Array.from(n.values())}};return function(p,m,L,h,M,v,_,b,P,R){let S,y,N,k=null,A=null;const O={Reroute_ScopeLink:{label:_.getNLSValue("MIL.Reroute.ScopeLink"),value:1,tooltip:_.getNLSValue("MIL.ToolTip.RerouteScope"),getLabel:function(){return this.tooltip}},Reroute_ImplementAndScopeLink:{label:_.getNLSValue("MIL.Reroute.ImplementAndScopeLink"),value:2,tooltip:_.getNLSValue("MIL.ToolTip.Reroute"),getLabel:function(){return this.tooltip}},Reroute_ImplementLink:{label:_.getNLSValue("MIL.Reroute.ImplementLink"),value:3,tooltip:_.getNLSValue("MIL.ToolTip.RerouteImplement"),getLabel:function(){return this.tooltip}},Replace_By_Existing:{label:_.getNLSValue("MIL.ReplaceByExisting"),value:5,tooltip:_.getNLSValue("MIL.ToolTip.ReplaceByExisting"),getLabel:function(){return this.tooltip}},Delete:{label:_.getNLSValue("MIL.Delete"),value:6,tooltip:_.getNLSValue("MIL.ToolTip.Delete"),getLabel:function(){return this.tooltip}},Ignore:{label:_.getNLSValue("MIL.Ignore"),value:7,getLabel:function(){return this.label}},Ambiguous:{label:_.getNLSValue("MIL.Ambiguous"),value:8,getLabel:function(){return this.label}},Replace_By_NewRev:{label:_.getNLSValue("MIL.ReplaceByNewRevision"),value:9,tooltip:_.getNLSValue("MIL.ToolTip.ReplaceByNewRev"),getLabel:function(){return this.tooltip}},Replace_By_New:{label:_.getNLSValue("MIL.ReplaceByNew"),value:10,tooltip:_.getNLSValue("MIL.ToolTip.ReplaceByNew"),getLabel:function(){return this.tooltip}},Replace_By_NewBranch:{label:_.getNLSValue("MIL.ReplaceByNewBranch"),value:11,tooltip:_.getNLSValue("MIL.ToolTip.ReplaceByNewBranch"),getLabel:function(){return this.tooltip}},Evolve_Instance:{label:_.getNLSValue("MIL.EvolveInstance"),value:12,tooltip:_.getNLSValue("MIL.ToolTip.EvolveInstance"),getLabel:function(){return this.tooltip}},MadeFrom_UseCase_Att_Add:{label:_.getNLSValue("MIL.MadeFrom_UseCase_Att_Add.ManufacturingMadeFrom"),value:13,tooltip:_.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.ManufacturingMadeFrom"),getLabel:function(){return this.tooltip}},MadeFrom_UseCase_Att_Add_ManufacturingAssembly:{label:_.getNLSValue("MIL.MadeFrom_UseCase_Att_Add.ManufacturingAssembly"),value:14,tooltip:_.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.ManufacturingAssembly"),getLabel:function(){return this.tooltip}},MadeFrom_UseCase_Att_Remove:{label:_.getNLSValue("MIL.MadeFrom_UseCase_Att_Remove"),value:15,tooltip:_.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Remove"),getLabel:function(){return this.tooltip}}},B="ReplaceByNewRev",w="ReplaceByExisting",D="ReplaceByNew",U="ReplaceByNewBranch",E="RerouteIL",C="ReconnectSLnIL",V="ReconnectSL",F="Delete",T="EvolveInstance",x="ManufacturingMadeFrom",j="ManufacturingAssembly",W="RemoveUseCase",z=function(t,n){let o=g(t.get("V_Name"),t.get("revision"));return e.is(n)&&(o+="("+n.get("PLM_ExternalID")+")"),o},X=e=>!v.isReference(e),K=e=>!v.isInstance(e),G=function(e){e.data.nodeModel.select()},H=function(t){return e.is(t.options.unselectEventToken)},q=function(e){return e.options.grid.MIL_suggestion},J=t=>n=>{let o=!1;const a=q(n);return e.is(a)&&(o=a.value===t),o},Q=function(t){let n=!1;if(function(t){let n=!1;const o=(e=>e.options.defaultMILSuggestionValue)(t);return e.is(o)&&(n=J(o)(t)),n}(t)){const o=q(t);e.is(o)&&(n=[O.Replace_By_NewRev,O.Replace_By_NewBranch,O.Reroute_ScopeLink].some(e=>e.value===o.value))}return n},Y=function(e){if(!H(e)){e.isSelected()||e.select();const t=e.onUnselect(G);e.options.unselectEventToken=t}},Z=function(e){H(e)&&(e.removeEventListener(e.options.unselectEventToken),e.options.unselectEventToken=null)},$=function(e){return e.getAttributeValue("cellInfo")},ee=function(e){return d(e)},te=function(t,n){const o=(e,t)=>({invalidNodes:e,errorMessage:t}),a=t=>{let n=null;const a=t.filter(t=>((e=>"partiallyExpanded"===e.getState())(t)||(e=>"collapsed"===e.getState())(t))&&function(t){let n=!1;return(t=>{let n=!1;const o=$(t);return e.is(o)&&(n=o.isLeaf),n})(t)||(n=Q(t)),n}(t));if(a.length>0){const e=_.getNLSValue("MIL.expandNeeded");n=o(a,e)}return n},i=t=>{let n=null;const a=t.filter(t=>(t=>{let n=!1;const o=q(t);if(o.value!==O.Delete.value&&o.value!==O.MadeFrom_UseCase_Att_Remove.value&&o.value!==O.MadeFrom_UseCase_Att_Add.value&&o.value!==O.MadeFrom_UseCase_Att_Add_ManufacturingAssembly.value){const o=$(t);if(e.is(o)){const t=o.candidateId;n=!e.is(t)}}return n})(t));if(a.length>0){const e=_.getNLSValue("MIL.candidateNeeded");n=o(a,e)}return n},l=(t=>{let n=a(t);return e.is(n)||(n=i(t)),n})(t),s=e.is(l);return s&&m.showWithMessage("",l.errorMessage,{messages:l.invalidNodes.map(e=>e.getLabel()),token:n}),!s},ne=function(t){return e.owns(t,"isRef")&&!0===t.isRef},oe=function(t){return e.owns(t,"isLeaf")&&!0===t.isLeaf},ae=e=>o(e),ie=function(t){const o=J(O.Ignore.value),l=n(t=>{let n={};if(!o(t)){const o=$(t);if(e.is(o)){let i,s=e.clone(o.inconsistentObject);if(ae(o.candidateEntries)){const{candidatePathStr:t,candidateProductRefId:n}=(t=>{let n={candidatePathStr:null,candidateProductRefId:null};if(e.owns(t,"candidateOccPath")&&Array.isArray(t.candidateOccPath)){const o=t.candidateOccPath;if(n.candidatePathStr=o.join(","),ne(t.inconsistentObject))n.candidateProductRefId=a(o);else{const t=v.getInstance(a(o));e.is(t)&&(n.candidateProductRefId=t.get("isInstanceOf"))}}return n})(o);e.is(t)&&e.is(n)&&(s.candidatePaths=[t],e.owns(s,"candidateProduct")&&(s.candidateProduct=n))}if(s=((e,t)=>{let n=e;switch(t){case O.Replace_By_Existing.value:n.MbomUpdateAction=w,Array.isArray(n.candidateScopedMfgItem)&&1===n.candidateScopedMfgItem.length&&(n.referecePID=n.candidateScopedMfgItem[0]);break;case O.Reroute_ImplementLink.value:n.MbomUpdateAction=E;break;case O.Evolve_Instance.value:n.MbomUpdateAction=T,n.referecePID=n.isInstanceOf;break;case O.Reroute_ImplementAndScopeLink.value:n.MbomUpdateAction=C,n.referecePID=n.isInstanceOf;break;case O.Replace_By_New.value:n.MbomUpdateAction=D,n.referecePID=n.isInstanceOf;break;case O.Replace_By_NewBranch.value:n.MbomUpdateAction=U,n.referecePID=n.isInstanceOf;break;case O.Delete.value:n.MbomUpdateAction=F;break;case O.Replace_By_NewRev.value:n.MbomUpdateAction=B,n.referecePID=n.isInstanceOf;break;case O.Reroute_ScopeLink.value:n.MbomUpdateAction=V;break;case O.MadeFrom_UseCase_Att_Add.value:n.MbomUpdateAction="ManufacturingMadeFrom";break;case O.MadeFrom_UseCase_Att_Add_ManufacturingAssembly.value:n.MbomUpdateAction="ManufacturingAssembly";break;case O.MadeFrom_UseCase_Att_Remove.value:n.MbomUpdateAction="RemoveUseCase"}return n})(s,o.action),e.owns(s,"aggregatedByPath")&&(s.rootMfgItemPID=ee(s.aggregatedByPath)),s.MbomUpdateAction===V?s.referecePID=s.id:(s.instancePID=u(s.id),s.mfgOccPathPIDs=s.id),s.brokenMfgPID=o.mbomId,n[i=s.MbomUpdateAction!==F&&s.MbomUpdateAction!==x&&s.MbomUpdateAction!==j&&s.MbomUpdateAction!==W?f(s.candidatePaths):s.id]=s,t.hasChildren()){let e={};for(const n of t.getChildren(!0)){const t=l(n);e={...e,...t}}n[i].children=e}}}return n}),s=(t,n)=>{let o={...t};const a=(t=>Object.values(t).reduce((t,n)=>(e.owns(n,"children")&&(t=t.concat(n.children)),t),[]))(n);return a.length>0&&a.forEach(e=>{Object.keys(e).forEach(e=>{delete o[e]})}),o={...o,...n}},r=n(n=>{let o=t.filter(e=>e.isRoot()).find(e=>e.getReferencePID()===n);return e.is(o)||(o=null),o}),c=t=>{let n=null;if((t=>e.is(r(t)))(t)){const o=r(t),{candidateId:a}=(t=>{let n={candidateId:null,candidateOccPath:null};const o=$(t);return e.is(o)&&(n.candidateId=o.candidateId,n.candidateOccPath=o.candidateOccPath),n})(o);n=a}else n=function(e){let t=null;const n=R.getScopeLinksOfImplementing(e);return 1===n.length&&(t=i(n).get("to")),t}(t);let o="";return e.is(n)&&e.owns(N,n)&&(o=N[n]),o},d=(t,n)=>{let o;if(e.owns(n,"engConfigFilter")&&e.owns(n,"mfgConfigFilter"))o=n;else{const a=(t=>e.owns(y,t)?y[t]:"")(t),i=c(t);o={...n,engConfigFilter:i,mfgConfigFilter:a}}return o},p=new Set(t),g=t.filter(e=>e.getParents().every(e=>!p.has(e))).reduce((e,t)=>{const n=l(t);return e=s(e,n)},{});var I;return I=g,Object.entries(I).reduce((t,[n,o])=>{const a=(e=>{let t;return t=e.MbomUpdateAction===V?e.brokenMfgPID:e.rootMfgItemPID})(o),i={brokenMfgItems:{[n]:o}};if(e.owns(t,a)){const e=t[a];t[a]={...e,brokenMfgItems:{...e.brokenMfgItems,...i.brokenMfgItems}}}else t[a]=i;return t[a]=d(a,t[a]),t},{})},le=function(){const t=(t,n)=>t.filter(t=>{let o=!1;const a=$(t);return e.is(a)&&(o=n(a)),o}),n=h.getSelectedNodes();if(n.length>0){const o=_.getNLSValue("MIL.LogMessage"),a=p.log(o);te(n,a)?(t=>new Promise((n,o)=>{let a=!1;const i=t.filter(e=>H(e));if(i.length>0){const t=O.Ignore.value,l=i.filter(e=>q(e).value===t);if(l.length>0){a=!0;const t=_.getNLSValue("MIL.confirmIgnoreToLooseIL.Title"),i=_.getNLSValue("MIL.confirmIgnoreToLooseIL"),s=l.map(e=>v.getReference(e.getReferencePID()));m.showConfirmation(t,i,{attributes:["V_Name","revision"],models:s},function(t){e.is(t,"boolean")?n(t):o("Unknown value")})}}a||n(!0)}))(n).then(function(i){if(i){const i=n.filter(t=>e.is($(t)));(t=>new Promise((n,o)=>{M.webservice("rerouteLink",null,t,function(t){e.is(t)?n(t):o()})}))(ie(i)).then(function(n){h.prepareUpdate();const l=n.succeeded;if(e.is(l)){const e=Object.values(l);if(e.length>0){const n=e.reduce((e,t)=>{const n=Object.keys(t).map(e=>u(e));return s(e,new Set(n))},new Set),o=t(i,e=>n.has(e.mbomId)),l=(e=>t=>{let n=t;const o=function(e){return e.getInstancePID()||e.getReferencePID()}(n);h.unSelectNode(o),n.options.grid.MIL_status=_.getNLSValue("MIL.Status.Success"),n.options.milStatus="success",n.updateOptions(n.options);const a=n.options.grid,i=_.getNLSValue("MIL.Message.Success",{suggestion:a.MIL_suggestion.label,mfg:n.getLabel()});p.log(i,e)})(a);o.forEach(l)}}const r=n.failed;e.is(r)&&Object.values(r).forEach(e=>{const n=Object.keys(e).reduce((e,t)=>{const n=u(t);return e.set(n,t)},new Map),o=t(i,e=>n.has(e.mbomId)),l=(e=>(t,n)=>{let o=t;o.options.grid.MIL_status=n,o.options.milStatus="fail",o.options.grid.cellInfo.inconsistentObject.MbomUpdateAction=null,o.updateOptions(o.options);const a=o.options.grid,i=_.getNLSValue("MIL.Message.Failure",{suggestion:a.MIL_suggestion.label,mfg:o.getLabel(),failureMsg:n});p.log(i,e)})(a);o.forEach(t=>{const o=$(t).mbomId,a=n.get(o),i=_.getNLSValue(e[a].message,null,"MIL","FailureMessage");l(t,i)})}),h.pushUpdate(),(t=>{let n=!1;return e.is(t.failed,"object")&&(n=Object.keys(t.failed).length>0),n})(n)?p.warn(_.getNLSValue("MIL.Failure"),a):p.info(_.getNLSValue("MIL.Success"),a),p.log(g(o,_.getNLSValue("completed")),a,"completed")}).catch(function(){p.log("rerouteLink webservice failed"),p.log(g(o,_.getNLSValue("failed")),a,"failed")})}else p.log(g(o,_.getNLSValue("failed")),a,"failed")}):p.log(g(o,_.getNLSValue("failed")),a,"failed")}},se=function(t,n){const o=t=>new Promise((o,a)=>{if(n.size>0){const i=t.filter(function(t){return!e.owns(t._attributes,"isInstanceOf")}).map(e=>e.get("PID"));if(i.length===n.size&&i.every(e=>n.has(e)))o();else{const e=new Set(i),t=function(e,t){const n=e.size<t.size;let o=new Set(e);for(const e of t)if(o.delete(e),n&&0===o.size)break;return o}(n,e);t.size>0?v.fetchRoot(Array.from(t),{forceDBMode:!0,silent:!0,onComplete:o,onFailure:a}):o()}}else o()});return(t=>new Promise((n,o)=>{t.length>0?v.fetchInstancesAndTheirReferences(t,{onComplete:function(t){e.owns(t,"instancesAndReferences")?n(t.instancesAndReferences):o("callbackResult.instancesAndReferences is not valid")},onFailure:o}):n([])}))(Array.from(t)).then(function(e){return o(e)})},re=function(t){const n=e.owns(t,"candidatePaths"),o=t.status;let a=null;if(n){const n=e.owns(t,"candidateScopedMfgItem");switch(t.status){case"ImplCandidatePrdOccWithScopeToOldRev":case"ImplCandPrdOccToOtherRev":a=n?O.Replace_By_Existing:O.Replace_By_NewRev;break;case"ImplCandidatePrdOccButNotCorrespondingScope":case"ImplCandPrdOccToDiffPrd":a=n?O.Replace_By_Existing:O.Replace_By_New;break;case"ImplCandidatePrdOccWithGoodScope":a=O.Reroute_ImplementLink;break;case"ImplCandPrdOccToSamePrdEvolveInstance":case"ImplCandidatePrdOccWithGoodScopeEvolveInstance":a=O.Evolve_Instance;break;case"ImplCandPrdOccToSamePrd":a=O.Reroute_ImplementAndScopeLink;break;case"ImplNoProductOccurence":a=O.Delete;break;case"ScopeToAncestorBranch":case"ScopeToOldRev":case"ScopeToNew":a=O.Reroute_ScopeLink;break;case"ImplCandPrdOccToAncestorBranch":case"ImplCandidatePrdOccWithScopeToAncestorBranch":a=n?O.Replace_By_Existing:O.Replace_By_NewBranch}}else a="MadeFrom_UseCase_Att_Add"===o?O.MadeFrom_UseCase_Att_Add:"MadeFrom_UseCase_Att_Remove"===o?O.MadeFrom_UseCase_Att_Remove:O.Delete;return a},ce=t=>n=>{let o=null;if(e.owns(n,"pointedPaths")){const e=u(n.pointedPaths);o=t(e)}return o},ue=ce(e=>v.getInstance(e)),de=ce(e=>v.getReference(e)),pe=function(e){return e.get("type")},ge=r(pe,_.getIconURLFromKey),fe=function(t,n){const a=t=>{let n={productName:null,iconURL:null};const o=de(t);return e.is(o)&&(n.productName=z(o,null),n.iconURL=ge(o)),n},l=(e,t)=>({productName:e,candidatePath:t}),s=t=>{const n=ne(t)?t=>{let n=null;const o=v.getReference(u(t));return e.is(o)&&(n=z(o,null)),l(n,t)}:t=>{let n=null;const o=v.getInstance(u(t));if(e.is(o)){const t=v.getReferenceModelFromInstance(o);e.is(t)&&(n=z(t,o))}return l(n,t)};let o=[];return Array.isArray(t.candidatePaths)&&(o=t.candidatePaths.map(e=>n(e))),o},r=e=>({labelItem:e.productName,valueItem:e.candidatePath.toString()}),d=e=>({candidateEntries:[(()=>({labelItem:_.getNLSValue("MIL.SelectCandidate"),valueItem:"#SELECT"}))(),...e],firstCandidateProduct:(()=>{const e=_.getNLSValue("MIL.SelectCandidate");return l(e,"#SELECT")})()}),p=(e,t)=>{const n=e=>({label:e.labelItem,value:e.valueItem,tooltip:e.labelItem,getLabel:function(){return this.label}});let o;if(e.length>0)o=n(r(t));else{const e=_.getNLSValue("MIL.RerouteNone");o=n({labelItem:e,valueItem:e})}return o},g=(t,n,o,a,i,l,s,r,d)=>{const g=e.is(n)?n:null,f=ge(t),I=(t=>{let n=null;return e.is(t)&&e.owns(t,"candidatePath")&&"#SELECT"!==t.candidatePath&&(n=t.candidatePath),n})(a);return{label:z(t,g),icons:[f],useAsyncPreExpand:!0,referencePID:t.get("PID"),referenceType:pe(t),instancePID:e.is(g)?g.get("PID"):null,mfgOccPathArr:e.is(g)?c(d.id):[],defaultMILSuggestionValue:s.value,milStatus:null,children:[],grid:{MIL_suggestion:s,MIL_rerouting:p(o,a),MIL_previous:e.owns(l,"productName")?l.productName:_.getNLSValue("MIL.PrevisionUnknown"),MIL_status:"",cellInfo:{mbomId:e.is(g)?g.get("PID"):t.get("PID"),candidateId:e.is(I)?u(I):null,candidateOccPath:e.is(I)?c(I):null,action:s.value,candidateEntries:i,suggestionToPerformEntries:r,PreviousProdIconUrl:e.owns(l,"iconURL")?l.iconURL:null,MfgItemIconUrl:f,inconsistentObject:e.clone(d),isLeaf:oe(d)}}}},f=n||{},m=Array.isArray(f.forbiddenSuggestions)?f.forbiddenSuggestions:[];let L;if(ne(t)){const n=v.getReference(t.id),o=a(t),l=s(t);let c=l.map(e=>r(e)),u=i(l,null),p=re(t);if(e.is(p)){let e=new I(O);e.from(p).addDefaultOption().addAdditionalOptions(),ae(l)&&({candidateEntries:c,firstCandidateProduct:u}=d(c)),e.addIgnoreOption(),L=g(n,null,l,u,c,o,p,e.toArray(),t)}}else{const n=u(t.id),l=v.getInstance(n),c=v.getReferenceModelFromInstance(l),p=(t=>{let n={productName:null,iconURL:null};const o=ue(t);if(e.is(o)){const t=v.getReferenceModelFromInstance(o);e.is(t)&&(n.productName=z(t,o),n.iconURL=ge(t))}else if(e.owns(t,"isInstanceOf")){const o=M.getBIModel(t.isInstanceOf);if(e.is(o)&&ne(o._attributes)){const e=o._attributes;n=a(e)}}return n})(t),f=s(t);let h=f.map(e=>r(e)),_=i(f,null),b=re(t);if(e.is(b)){let e=new I(O);e.from(b).addDefaultOption().addAdditionalOptions(),o(f)&&({candidateEntries:h,firstCandidateProduct:_}=d(h)),e.addIgnoreOption(),e.removeOptions(m),L=g(c,l,f,_,h,p,b,e.toArray(),t)}}return L},Ie=function(t,n,o,a){const l=e=>v.isReferencesHasReadOnlyType(e.referenceType),s=e=>o.some(t=>u(t.id)===e),r=(t,n=null)=>{let o=null;const a=h.getNodeModel(t);if(Array.isArray(a))if(1===a.length)o=i(a);else if(a.length>1)if(Array.isArray(n)){const t=a.find(t=>e.equals(t.options.mfgOccPathArr,n));e.is(t)&&(o=t)}else o=i(a);return o},d=(t,n=null)=>e.is(r(t,n));let p=a||{};if(!e.is(p.considerInstancesOnly,"boolean")||!p.considerInstancesOnly){const o=t.reduce((e,t)=>e.set(t.id,t),new Map),a=n.reduce((e,t)=>{const n=t.isInstanceOf;if(o.has(n)){const t=o.get(n);e.add(t)}return e},new Set);(a.size>0?t.filter(e=>!a.has(e)):t).forEach(t=>{const n=fe(t,p);if(e.is(n)&&function(e){let t,n=!1;const o=b.getRoots();return 2===o.length&&(t=o[1]),Array.isArray(t)&&(n=t.includes(e)),n}(n.referencePID)&&!l(n)){const e=(e=>h.addNodeModel(e))(n),o=oe(t)?"noChildren":"partiallyExpanded";h.updateNodeState(e,o)}})}(t=>t.map(t=>{const n=u(t.id),o=v.getInstance(n);let a=e.clone(t);return a.V_TreeOrder=o.get("V_TreeOrder"),a}).slice().sort((e,t)=>Number(e.V_TreeOrder)-Number(t.V_TreeOrder)))(n).forEach(t=>{if(e.owns(t,"aggregatedByPath")){const n=e.owns(t,"aggregatedByPathTillRoot")?t.aggregatedByPathTillRoot:t.aggregatedByPath,o=ee(n);let a=d(o)?r(o):(e=>{const t=v.getReference(e),n={label:z(t,null),icons:[ge(t)],useAsyncPreExpand:!0,referencePID:t.id,referenceType:pe(t),instancePID:null,mfgOccPathArr:[],defaultMILSuggestionValue:null,grid:{},children:[],milStatus:"success",cellInfo:{mbomId:null,candidateId:null,candidateOccPath:null,action:null,candidateEntries:null,suggestionToPerformEntries:null,PreviousProdIconUrl:null,MfgItemIconUrl:null,inconsistentObject:null}};return h.addNodeModel(n)})(o),i=!e.is(a.options.defaultMILSuggestionValue);const u=c(t.id),g=u.length>0?u.slice(0,u.length-1):u;if(g.length>0){const e=g.length;for(let t=0;t<e;t++){const e=g[t];if(!s(e)){const n=g.slice(0,t+1);d(e,n)&&(a=r(e,n))}}}let f=!1;if(i||t.status.startsWith("MadeFrom_UseCase_Att")&&(f=!0),e.is(a)&&!f){const n=fe(t,p);if(e.is(n)&&!l(n)){const e=((e,t)=>h.addNodeModel(t,e))(a,n),o=oe(t)?"noChildren":"partiallyExpanded";h.updateNodeState(e,o)}}}})},me=function(t,n,o){const a=t=>n=>{let o=[];const a=u(n.id);if(t(a)&&o.push(a),Array.isArray(n.candidatePaths)){const e=n.candidatePaths.map(e=>u(e)).filter(t);o=o.concat(e)}if(e.owns(n,"pointedPaths")){const e=u(n.pointedPaths);t(e)&&o.push(e)}return o},i=a(X),l=a(K);return new Promise((e,a)=>{if(Array.isArray(t)){const r=function(e,t){let n=new Map;n.set(!0,[]),n.set(!1,[]);for(const o of e){const e=t(o),a=o;n.set(e,n.get(e).concat(a))}return n}(t.map(e=>e._attributes),e=>ne(e)),c=r.get(!0),u=r.get(!1),d=c.reduce((e,t)=>{const n=i(t);return n.length>0&&(e=s(e,new Set(n))),e},new Set),p=u.reduce((e,t)=>{const n=l(t);return n.length>0&&(e=s(e,new Set(n))),e},new Set);se(p,d).then(function(){Ie(c,u,n,o),e()}).catch(function(e){a(e)})}else a("brokenMfgItems is not a valid array")})},Le=function(t,n){return new Promise((o,i)=>{const s=M.getPhantomNodeItems(),r=t.map(t=>(t=>{let n=null;if(ne(t)){if(e.owns(t,"pointedPaths")){const e=c(t.pointedPaths);n=a(e)}}else{const o=ue(t);e.is(o)&&(n=o.get("isInstanceOf"))}return n})(t._attributes)).filter(t=>e.is(t)).reduce(l,new Set);(e=>new Promise((t,n)=>{e.length>0?v.fetchRoot(e,{forceDBMode:!0,silent:!0,onComplete:t,onFailure:n}):t()}))(Array.from(r).filter(X)).then(function(){me(t,s,n).then(o,i)})})},he=function(e){let t=!1;return e.isRoot()||(t=H(e.getParent())),t},Me=function(e){return e.getBrothers().some(e=>H(e))},ve=function(t){let n=!1;return t.isRoot()&&(n=e.is(q(t))),n},_e=function(t){const n=(t,n,o)=>{t.preExpandDone(),t.pushUpdate(),e.is(o)&&""!==o&&h.updateNodeState(t,o),p.notify("stopProgress",n)},o=e=>e.options.grid.cellInfo.inconsistentObject,a=t=>new Promise(function(n,a){let i={};const l=t.getReferencePID(),s=(t=>{const n=o(t);let a=null;return a=e.owns(n,"candidateProduct")?n.candidateProduct:(e=>e.options.grid.cellInfo.candidateId)(t)})(t);if(e.is(l)&&e.is(s)){const r=o(t);let c={rootEBOM:[s],rootMBOM:[l],areRootsBroken:!0,rootMBOMConfigFilter:y,rootEBOMConfigFilter:N,forceBIComputation:!0};e.owns(r,"aggregatedByPath")&&(c.prefix={mfgAggByPath:r.aggregatedByPath,mfgOccPath:r.id,mfgInstanceLID:r.instanceLID}),p.notify("startProgress",i),M.getBrokenMfgItemStatus(c,function(e){Le(e,{considerInstancesOnly:!0}).then(function(){t.hasChildren()?(t.getChildren(!0).forEach(function(e){Y(e)}),Y(t)):(he(t)||Me(t))&&Y(t),p.notify("stopProgress",i),n()}).catch(function(e){p.notify("stopProgress",i),a(e)})})}else a()});if(e.is(t)&&e.owns(t,"data")&&e.owns(t.data,"nodeModel")){let e=t.data.nodeModel,o={};((e,t)=>{p.notify("startProgress",t),e.prepareUpdate()})(e,o),e.isRoot()||H(e)&&(he(e)||Me(e)||Z(e)),(e=>{let t=!1;return e.isRoot()&&!ve(e)||Q(e)&&(t=!0),t})(e)?a(e).then(function(){n(e,o)}).catch(function(){n(e,o)}):n(e,o)}},be=function(t){const n=e=>{e.hasChildren()&&(e.getAllDescendants(null,!0).forEach(e=>{Z(e),e.isSelected()&&e.unselect()}),e.removeChildren())};if(e.is(t)&&e.owns(t,"data")&&e.owns(t.data,"nodeModel")){let e=t.data.nodeModel;e.isRoot()?ve(e)&&(n(e),H(e)&&Z(e)):(n(e),H(e)&&(he(e)||Z(e))),(e=>Q(e))(e)&&h.updateNodeState(e,"partiallyExpanded")}},Pe=function(){const t=h.getSelectedNodes();Array.isArray(t)&&t.length>0&&t.forEach(e=>Z(e)),e.is(k)&&(h.removeEventListener(k),k=null),e.is(A)&&(h.removeEventListener(A),A=null),P.clearPseudoBIStatus()};return S=new t(p,m,L,h,_,P),e.extend(S,{init(t){const n=e=>Array.isArray(e)&&e.length>0;let o=t||{},a=h.getWUXNodeModel();h.removePreExpandListener(),k=a.onPreExpand(_e),A=a.onPostCollapse(be);const{rootProducts:i,rootProcesses:l}=function(){let e=null,t=null;const n=b.getRoots();return 2===n.length&&(e=n[0],t=n[1]),{rootProducts:e,rootProcesses:t}}();if(((e,t)=>n(e)&&n(t))(i,l)){const t=b.getCompatibleConfigurationFilters(l),n=b.getCompatibleConfigurationFilters(i);if(e.is(t)&&e.is(n)){y=t,N=n,this.buildSkeleton({manageInconsistentLinksCmdId:o.manageInconsistentLinksCmdId,onApplyCallBack:le,cleanup:Pe});let e={};p.notify("startProgress",e),M.getBrokenMfgItemStatus({rootEBOM:i,rootMBOM:l,rootMBOMConfigFilter:y,rootEBOMConfigFilter:N,forceBIComputation:!0},function(t){Le(t).then(function(){p.notify("stopProgress",e),p.notify("CIMLoaded")})})}else p.warn(_.getNLSValue("BI.Computation.IncompatibleFilter"))}}})}}),define("DS/DELPPWMILModule/MILModule",["UWA/Core","DS/DELPPWMILModule/MFNChangeImpactMgmtUI"],function(e,t){"use strict";return{behaviors:["UXFactoryBehavior","TreeListViewBehavior","WUXNodeModelBehavior","MfgItemBehavior","ModelBehavior","ResourceBehavior","RootsBehavior","BIBehavior","ImplementBehavior"],creator:function(e,n,o,a,i,l,s,r,c,u){var d=null,p=function(){d.setApplyButtonState()};return{name:"MILModule",listenTo:function(){return{select:p}},onStart:function(p){let g=p||{};(d=new t(e,n,o,a,i,l,s,r,c,u)).init(g),d.loadUI()},onStop:function(){d.destroy(!0),d=void 0}}}}}),define("DS/DELPPWMILModule/MILMfgProcessNItemUI",["UWA/Core","DS/DELPPWMILModule/ManageInconsistentLinksBaseUI"],function(e,t){"use strict";return function(n,o,a,i,l,s,r,c,u){var d,p,g,f,I,m,L,h,M,v,_,b=new t(n,o,a,i,r,u),P={className:""},R=[],S=[],y={},N=[];return p=function(){var e;return e=c.getRoots(),R=e[0],S=e[1],!(!R||Array.isArray(R)&&R.length<=0||!S||Array.isArray(S)&&S.length<=0)},g=function(){d={Reroute_ScopeLink:{label:r.getNLSValue("MIL.Reroute.ScopeLink"),value:1,tooltip:r.getNLSValue("MIL.ToolTip.RerouteScope"),getLabel:function(){return this.tooltip}},Reroute_ImplementLink:{label:r.getNLSValue("MIL.Reroute.ImplementLink"),value:2,tooltip:r.getNLSValue("MIL.ToolTip.RerouteImplement"),getLabel:function(){return this.tooltip}},Add_ImplementLink:{label:r.getNLSValue("MIL.Add.ImplementLink"),value:6,tooltip:r.getNLSValue("MIL.ToolTip.AddImplement"),getLabel:function(){return this.tooltip}},RemoveLink:{label:r.getNLSValue("MIL.RemoveLink"),value:3,tooltip:r.getNLSValue("MIL.ToolTip.RemoveLink"),getLabel:function(){return this.tooltip}},Delete:{label:r.getNLSValue("MIL.Delete"),value:4,tooltip:r.getNLSValue("MIL.ToolTip.Delete"),getLabel:function(){return this.tooltip}},Ignore:{label:r.getNLSValue("MIL.Ignore"),value:5,getLabel:function(){return this.label}}}},I=function(t,n){var o=[],a=[],l={labelItem:d.Reroute_ScopeLink.label,valueItem:d.Reroute_ScopeLink.value,tooltip:d.Reroute_ScopeLink.tooltip},c={labelItem:d.Reroute_ImplementLink.label,valueItem:d.Reroute_ImplementLink.value,tooltip:d.Reroute_ImplementLink.tooltip},u={labelItem:d.Add_ImplementLink.label,valueItem:d.Add_ImplementLink.value,tooltip:d.Add_ImplementLink.tooltip},p={labelItem:d.Delete.label,valueItem:d.Delete.value,tooltip:d.Delete.tooltip},g={labelItem:d.RemoveLink.label,valueItem:d.RemoveLink.value,tooltip:d.RemoveLink.tooltip},f={labelItem:d.Ignore.label,valueItem:d.Ignore.value};i.emptyNodeModel(),i.prepareUpdate(),Object.values(t).forEach(function(t){var n,o,a,c,u,p,g,I,m,h,M=[],v=[];t.candidates.length>0?(v.push(l,f),I=d.Reroute_ScopeLink,t.candidates.forEach(function(t){var n=s.getReference(t.candidateRefPID);a=e.is(n)?L(n,null):t.candidateRefPID,M.push({labelItem:a,valueItem:t.candidateRefPID,tooltip:a})})):(v.push(f),I=d.Ignore,a=r.getNLSValue("MIL.RerouteNone"),M.push({labelItem:a,valueItem:"",tooltip:a})),m=s.getReference(t.pointedRefPID),e.is(m)?(p=L(m,null),g=r.getIconURLFromKey(m.get("type"))):p=t.pointedRefPID,h=s.getReference(t.implementedRefPID),e.is(h)&&(c=L(h,null),u=r.getIconURLFromKey(h.get("type"))),n={MIL_suggestion:I,MIL_rerouting:M[0],MIL_previous:e.is(p)?p:r.getNLSValue("MIL.PrevisionUnknown"),MIL_manufactured:c,MIL_status:"",cellInfo:{suggestionToPerformEntries:v,candidateEntries:M,PreviousProdIconUrl:g,MfgItemIconUrl:u,action:I.value,mfgprocessId:t.implementedRefPID,pointedPaths:t.pointedRefPID}},o={referencePID:t.linkPID,linkPID:t.linkPID,linkInfos:t,linkType:"ScopeLink",grid:n,milStatus:null},i.addNodeModel(o)}),Object.values(n).forEach(function(t){var n,l,I,m,h,M,v,_,b,P,R,S,y,N,k,A,O,B,w,D,U,E,C,V=[],F=[],T=!0;if(k=(N=t.implementedOccPath.split(","))[N.length-1],A=s.getInstance(k),(C=!!e.is(t.isLinkBroken)&&t.isLinkBroken)||(D=t.pointedOccPath.split(","),U=s.getInstance(D[0]),e.is(U)&&(E=U.get("isAggregatedBy"))),t.candidates.length>0){if(F.push(c,g,p,f),b=d.Reroute_ImplementLink,B=s.getImpactedConnections([k],null,{relationTypes:["ProcessImplementLinkOcc"]}),w=[],B.forEach(function(e){w.push(e.get("to").toString())}),t.candidates.forEach(function(t){var n,o,a,i=t.candidateOccPath.split(","),l=i[i.length-1],r=s.getInstance(l);!C&&T&&(o=s.getInstance(i[0]),e.is(o)&&(a=o.get("isAggregatedBy")),E!==a&&(T=!1)),w.indexOf(t.candidateOccPath)>-1||(e.is(r)?(n=s.getReferenceModelFromInstance(r),m=L(n,r)):m=t.candidateOccPath,V.push({labelItem:m,valueItem:t.candidateOccPath,tooltip:m}))}),0===V.length)return;!C&&T&&(F.unshift(u),b=d.Add_ImplementLink)}else F.push(g,p,f),b=d.RemoveLink,m=r.getNLSValue("MIL.RerouteNone"),V.push({labelItem:m,valueItem:"",tooltip:m});R=(P=t.pointedOccPath.split(","))[P.length-1],S=s.getInstance(R),e.is(S)?(y=s.getReferenceModelFromInstance(S),v=L(y,S),_=r.getIconURLFromKey(y.get("type"))):v="",e.is(A)&&(O=s.getReferenceModelFromInstance(A),h=L(O,A),M=r.getIconURLFromKey(O.get("type"))),l={MIL_suggestion:b,MIL_rerouting:V[0],MIL_previous:e.is(v)?v:r.getNLSValue("MIL.PrevisionUnknown"),MIL_manufactured:h,MIL_role:e.is(t.role)?t.role:"",MIL_status:"",cellInfo:{suggestionToPerformEntries:F,candidateEntries:V,PreviousProdIconUrl:_,MfgItemIconUrl:M,action:b.value,mfgprocessId:k,mfgProcessOccPath:t.implementedOccPath,linkPID:t.linkPID,pointedPaths:t.pointedOccPath}},I={referencePID:t.linkPID,linkPID:t.linkPID,linkInfos:t,linkType:"OccOccIMplementLink",grid:l,milStatus:null},n=i.addNodeModel(I),b===d.Delete&&(o.push(n),a.push(t.linkPID))}),i.getAllDescendants().forEach(function(e){var t;-1===a.indexOf(e.options.linkPID)&&"OccOccIMplementLink"===e.options.linkType&&(t=e.options.linkInfos.implementedOccPath.split(","),o.some(function(n){var o,a=n.options.linkInfos.implementedOccPath.split(","),l=a[a.length-1],s=t.indexOf(l);return s>-1&&s<t.length?(e.options.grid.MIL_status=r.getNLSValue("MIL.Status.Ignore.ImpactedObjDelete",{objectTitle:n.options.grid.MIL_manufactured}),e.options.grid.MIL_suggestion=d.Ignore,e.options.milStatus="ignore",i.updateNode(e.options.linkPID,e.options),o=!0):o=!1,o}))}),i.pushUpdate()},m=function(t){var n=[],o=[],a={},i={},l=[];t.forEach(function(t){t.has("impactedScopes")&&t.get("impactedScopes").forEach(function(t){var o=s.getReference(t.implementedRefPID);e.is(o)&&(t.candidates.forEach(function(t){var o=s.getReference(t.candidateRefPID);e.is(o)||n.push(t.candidateRefPID)}),a[t.linkPID]=t)}),t.has("impactedOccOccImplementLinks")&&t.get("impactedOccOccImplementLinks").forEach(function(t){var n=t.implementedOccPath.split(","),a=n[n.length-1],l=s.getInstance(a);e.is(l)&&(t.candidates.forEach(function(t){var n=t.candidateOccPath.split(","),a=n[n.length-1],i=s.getInstance(a);e.is(i)||o.push(a)}),i[t.linkPID]=t)})}),n.length>0&&l.push(new Promise(function(e,t){s.fetchRoot(n,{silent:!0,onComplete:e,onFailure:t})})),o.length>0&&l.push(new Promise(function(e,t){s.fetchInstancesAndTheirReferences(o,{silent:!0,onComplete:e,onFailure:t})})),e.Promise.allSettled(l).then(function(){I(a,i)}).catch(function(){})},f=function(){var t,o,a=i.getSelectedNodes(),s=[],c=r.getNLSValue("MIL.LogMessage"),u="RerouteIL",p="AddIL",g="RerouteSL",f="Delete",I="RemoveLink";a.forEach(function(n){var o;switch((t=n.options.grid.cellInfo).action){case d.Reroute_ScopeLink.value:o=g;break;case d.RemoveLink.value:o=I;break;case d.Delete.value:o=f;break;case d.Reroute_ImplementLink.value:o=u;break;case d.Add_ImplementLink.value:o=p}e.is(o)&&"ignore"!==n.options.milStatus&&s.push({MfgProcessUpdateAction:o,mfgProcessOccPath:e.is(t.mfgProcessOccPath)?t.mfgProcessOccPath:t.mfgprocessId,pointedPaths:t.pointedPaths,candidatePaths:n.options.grid.MIL_rerouting.valueItem,role:n.options.grid.MIL_role,linkPID:n.options.linkPID})}),o=n.log(c),l.webservice("rerouteLink",null,s,function(e){var t,l;i.prepareUpdate(),t=e.succeeded,l=e.failed,a.forEach(function(e){var a,s,c=e.options.linkPID;t.indexOf(c)>-1?(e.options.grid.MIL_status=r.getNLSValue("MIL.Status.Success"),e.options.milStatus="success",i.unSelectNode(c),i.updateNode(c,e.options),a=r.getNLSValue("MIL.Message.Success",{suggestion:e.options.grid.MIL_suggestion.label,mfg:e.options.grid.MIL_manufactured}),n.log(a,o)):l.indexOf(c)>-1&&(e.options.milStatus="fail",i.updateNode(c,e.options),s=r.getNLSValue("MIL.Message.Failure",{suggestion:e.options.grid.MIL_suggestion.label,mfg:e.options.grid.MIL_manufactured}),n.log(s,o))}),i.pushUpdate(),l.length>0?n.warn(r.getNLSValue("MIL.Failure"),o):n.info(r.getNLSValue("MIL.Success"),o),n.log(c+" "+r.getNLSValue("completed"),o)})},L=function(t,n){var o=t.get("V_Name")+" "+t.get("revision");return e.is(n)&&(o=o+"("+n.get("PLM_ExternalID")+")"),o},h=function(t){var n,o,a=t.data.nodeModel;"MIL_suggestion"===t.data.changedAttribute&&e.is(a.options.linkInfos.implementedOccPath)&&(n=a.options.linkInfos.implementedOccPath.split(","),o=n[n.length-1],i.prepareUpdate(),t.data.nodeModel.getBrothers().forEach(function(n){var l,s=n.options.linkInfos.implementedOccPath.split(","),c=s.indexOf(o);c>-1&&c<s.length&&(t.data.changedAttributeValue.label===d.Delete.label&&null===n.options.milStatus?l="applyIgnore":"ignore"===n.options.milStatus&&(l="removeIgnore")),e.is(l)&&("applyIgnore"===l?(n.options.grid.MIL_status=r.getNLSValue("MIL.Status.Ignore.ImpactedObjDelete",{objectTitle:a.options.grid.MIL_manufactured}),n.options.grid.MIL_suggestion=d.Ignore,n.options.milStatus="ignore"):(n.options.grid.MIL_status="",n.options.milStatus=null),i.unSelectNode(n.options.linkPID),i.updateNode(n.options.linkPID,n.options))}),i.pushUpdate())},M=function(){N.push(i.addEventListener("attributeChanged",h))},v=function(){N.forEach(function(e){i.removeEventListener(e)})},_=b.destroy,e.extend(b,{init:function(t){(P=e.extend(P,t)).onApplyCallBack=f,p()&&(g(),this.buildSkeleton(P),n.notify("startProgress",y),l.getBrokenMfgProcessStatus({rootSystems:S,rootItems:R},function(e){m(e),M(),n.notify("stopProgress",y)}))},destroy:function(){_.call(this),v()}})}}),define("DS/DELPPWMILModule/MILMfgProcessNItemModule",["DS/DELPPWMILModule/MILMfgProcessNItemUI"],function(e){"use strict";return{behaviors:["UXFactoryBehavior","TreeListViewBehavior","WUXNodeModelBehavior","MfgProcessBehavior","ModelBehavior","ResourceBehavior","RootsBehavior","BIBehavior"],creator:function(t,n,o,a,i,l,s,r,c){var u=null,d=function(){u.setApplyButtonState()};return{name:"MILMfgProcessNItemModule",listenTo:function(){return{select:d}},onStart:function(d){(u=new e(t,n,o,a,i,l,s,r,c)).init(d),u.loadUI()},onStop:function(){u.destroy(),u=void 0}}}}});