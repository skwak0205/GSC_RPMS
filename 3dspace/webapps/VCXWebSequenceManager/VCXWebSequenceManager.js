define("DS/VCXWebSequenceManager/VCXScenarioSequence",["UWA/Class","DS/CoreEvents/Events"],function(e,n){"use strict";var t=e.extend({init:function(){this._listScenariosId=[],this._sequenceType=0,this._name=""},GetType:function(){return this.componentType},GetListScenariosId:function(){return this._listScenariosId},GetIndexOfScenario:function(e){return this._listScenariosId.indexOf(e)},FindScenario:function(e){return-1!==this._listScenariosId.indexOf(e)},PushScenario:function(e){this.FindScenario(e)||this._listScenariosId.push(e)},InsertScenarioAtIndex:function(e,n){this.FindScenario(e)||this._listScenariosId.splice(n,0,e)},InsertScenarioAfter:function(e,n){if(!this.FindScenario(e)){var t=this.GetIndexOfScenario(n);this._listScenariosId.splice(t+1,0,e)}},RemoveScenario:function(e){var n=this.GetIndexOfScenario(e);n>=0&&this._listScenariosId.splice(n,1)},GetPreviousScenarioId:function(e){var n="",t=this.GetIndexOfScenario(e);return t>0&&(t--,n=this._listScenariosId[t]),n},GetNextScenarioId:function(e){var n="",t=this.GetIndexOfScenario(e);return-1!==t&&t!==this._listScenariosId.length-1&&(t++,n=this._listScenariosId[t]),n},Clone:function(e){if(e){for(var n=this.GetListScenariosId(),t=0;t<n.length;t++)e._listScenariosId[t]=n[t];var i,r=this.QueryInterface("VCXIModifiable");r&&(i=r.GetProperties());var s=e.QueryInterface("VCXIModifiable");if(s&&i)for(var o in i._map)if(i._map.hasOwnProperty(o)){var c=i.GetProperty(o);s.OnChangeProperty(o,c.GetPropertyValue())}}},SetSequenceType:function(e){this._sequenceType=e},GetSequenceType:function(){return this._sequenceType},SetName:function(e){this._name!==e&&(this._name=e,n.publish({event:"VCX_SEQUENCE_NAME_CHANGED",data:this}))},GetName:function(){return this._name},MoveScenario:function(e,n){if(void 0!==n){var t=this.GetIndexOfScenario(e);t>=0&&t!==n&&this._listScenariosId.splice(n,0,this._listScenariosId.splice(t,1)[0])}else this.RemoveScenario(e),this.PushScenario(e)}});return Object.defineProperty(t.prototype,"componentType",{enumerable:!0,get:function(){return"VCXScenarioSequence"}}),t}),define("DS/VCXWebSequenceManager/VCXModifiableSequence",["DS/CoreEvents/Events","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebProperties/VCXPropertyValueEnum","DS/VCXWebProperties/VCXProperty","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyInfoEnum","DS/VCXWebProperties/VCXPropertySet","DS/VCXWebModifiables/VCXModifiable","i18n!DS/VCXWebSequenceManager/assets/nls/VCXWebSequenceManager"],function(e,n,t,i,r,s,o,c,u){"use strict";return c.extend({init:function(){this._parent(),this._name="",this._sequenceDescription="",this._scenarioSequence=null},OnChangeProperty:function(e,n){"Actor.Name"===e?this.GetObject().SetName(n.GetValue()):"Actor.Description"===e?this._sequenceDescription=n.GetValue():"Actor.Sequence.Type"===e?this.GetObject().SetSequenceType(n.GetValue()):this._parent(e,n)},GetProperty:function(e){var o=null;if("Actor.Name"===e)(c=new n).SetValue(this.GetObject().GetName()),o=new i(new r(e,r.EBehaviorType.Singleton,!0,u),c);else if("Actor.Description"===e){var c;(c=new n).SetValue(this._sequenceDescription),o=new i(new r(e,r.EBehaviorType.Singleton,!0,u),c)}else if("Actor.Sequence.Type"===e){var a=new t;a.SetValue(this.GetObject().GetSequenceType());var S=new s(e,r.EBehaviorType.Singleton,!0,u);S.SetMapChoiceEnum({0:"sequence.type.scenarios",1:"sequence.type.layers",2:"sequence.type.CAD"}),S.SetVisible(!1),o=new i(S,a)}else o=this._parent(e);return o},GetProperties:function(){var e=new o;return e.AddOrModifyProperty(this.GetProperty("Actor.Name")),e.AddOrModifyProperty(this.GetProperty("Actor.Description")),e.AddOrModifyProperty(this.GetProperty("Actor.Sequence.Type")),e}})}),define("DS/VCXWebSequenceManager/VCXModifiableSequenceManager",["DS/VCXWebModifiables/VCXModifiable","DS/VCXWebProperties/VCXPropertySet"],function(e,n){"use strict";return e.extend({init:function(){this._parent()},OnChangeProperty:function(e,n){return!0},GetProperty:function(e){return null},GetProperties:function(){return new n}})}),define("DS/VCXWebSequenceManager/VCXSequenceManager",["UWA/Class"],function(e){"use strict";var n=e.extend({initialize:function(){this._listSequences=[],this._maxIndex=0},unInitialize:function(){this._listSequences=[],this._maxIndex=0},postInitialize:function(){this._scenarioManager=this._experienceBase.getManager("VCXScenarioManager"),this._Factory=this._experienceBase.Factory},GetListSequences:function(){return this._listSequences},GetListSequencesFromType:function(e){for(var n=[],t=0;t<this._listSequences.length;t++){var i=this._listSequences[t];i.GetSequenceType()===e&&n.push(i)}return n},GetIndexOfSequence:function(e){return this._listSequences.indexOf(e)},GetSequenceFromId:function(e){for(var n=0;n<this._listSequences.length;n++){if(this._listSequences[n].GetID()===e)return this._listSequences[n]}},GetSequenceFromScenarioId:function(e){for(var n=null,t=0;t<this._listSequences.length;t++){var i=this._listSequences[t];if(i.FindScenario(e)){n=i;break}}return n},BuildSequenceFromListScenarios:function(e){var n=this._Factory.BuildComponent("VCXScenarioSequence"),t=this._scenarioManager.GetScenarios();if("smg"===e){for(var i in t){if(t.hasOwnProperty(i))"Animation smg"!==t[i].QueryInterface("VCXIModifiable").GetName()&&n.PushScenario(i)}this.PushSequence(n)}else{for(var i in t)t.hasOwnProperty(i)&&n.PushScenario(i);this.PushSequence(n)}return n},PushSequence:function(e){e.GetID()?this._listSequences.push(e):console.log("VCXSequenceManager::InsertSequenceAfter -> ID of sequence empty! you need to call CmdChangeComponent Before"),this._maxIndex++},RemoveSequence:function(e){var n=this.GetSequenceFromId(e);if(n){var t=this.GetIndexOfSequence(n);this._listSequences.splice(t,1)}},PushScenarioInSequence:function(e,n){var t=this.GetSequenceFromId(n);t||(t=this._listSequences[0]),t.PushScenario(e)},InsertScenarioAfter:function(e,n,t){this.GetSequenceFromId(n).InsertScenarioAfter(e,t)},InsertScenarioAtIndex:function(e,n,t){this.GetSequenceFromId(n).InsertScenarioAtIndex(e,t)},RemoveScenarioFromSequence:function(e){var n=this.GetSequenceFromScenarioId(e);n&&n.RemoveScenario(e)},GetPreviousScenarioId:function(e){var n="",t=this.GetSequenceFromScenarioId(e);return t&&(n=t.GetPreviousScenarioId(e)),n},GetNextScenarioId:function(e){var n="",t=this.GetSequenceFromScenarioId(e);return t&&(n=t.GetNextScenarioId(e)),n},GetPreviousSequence:function(e,n){var t=null,i=this.GetIndexOfSequence(e);if(i>0)if(n)for(i--;i>=0;i--){var r=this._listSequences[i];if(-1!=n.indexOf(r._sequenceType))return t=this._listSequences[i]}else i--,t=this._listSequences[i];return t},GetNextSequence:function(e,n){var t=null,i=this.GetIndexOfSequence(e);if(i<this._listSequences.length-1)if(n)for(i++;i<this._listSequences.length;i++){var r=this._listSequences[i];if(-1!=n.indexOf(r._sequenceType))return t=this._listSequences[i]}else i++,t=this._listSequences[i];return t},GetListScenariosInSequence:function(e){for(var n=[],t=this._scenarioManager.GetScenarios(),i=e.GetListScenariosId(),r=0;r<i.length;r++){var s=i[r];n[r]=t[s]}return n},InsertSequenceAfter:function(e,n){if(e.GetID()){var t=this.GetIndexOfSequence(n);this._listSequences.splice(t+1,0,e)}else console.log("VCXSequenceManager::InsertSequenceAfter -> ID of sequence empty! you need to call CmdChangeComponent Before");this._maxIndex++},MoveScenarioInSequence:function(e,n,t){var i=this.GetSequenceFromScenarioId(e);if(i.GetID()===n)i.MoveScenario(e,t);else{i.RemoveScenario(e);var r=this.GetSequenceFromId(n);void 0!==t?r.InsertScenarioAtIndex(e,t):r.PushScenario(e)}},GetCurrentSequenceID:function(){var e=this._experienceBase.getManager("VCXScenarioManager").GetCurrentScenario(),n=this.GetSequenceFromScenarioId(e);if(n)return n.GetID()}});return Object.defineProperty(n.prototype,"componentType",{enumerable:!0,get:function(){return"VCXSequenceManager"}}),n});