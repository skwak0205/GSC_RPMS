var __extends=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();define("DS/MapComponent/Map/GVMap",["require","exports","DS/ReactLoader/React","DS/SocialGlobeAPI/GlobeAPI"],function(e,t,o,r){"use strict";return function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.geoJson,o=e.cameraPosition,n=e.markers,i=e.markersSelected,a=e.onSelect,s=this.props.tms,c=s.url,p=s.extension,l=s.maxLvl;this._api=new r("gv-map",c,p,l,{}),t&&this._api.addGeoJson(t),o&&this.moveTo(o),n&&this.addMarkers(n),i&&this.selectMarkers(i),a&&this._api.setOnSelectCallback(a)},t.prototype.componentDidUpdate=function(e){var t=this.props,o=t.geoJson,r=t.cameraPosition,n=t.markers,i=t.markersSelected,a=t.onSelect;e.geoJson!==o&&this._api.addGeoJson(o),r&&e.cameraPosition!==r&&this.moveTo(r),n&&e.markers!==n&&this.updateMarkers(e.markers,n),i&&e.markersSelected!==i&&this.updateSelection(e.markersSelected,i),a&&e.onSelect!==a&&this._api.setOnSelectCallback(a)},t.prototype.updateSelection=function(e,t){console.log("updateSelection"),this._api.select(t)},t.prototype.selectMarkers=function(e){this._api.select(e)},t.prototype.updateMarkers=function(e,t){var o;if(e){var r=e.filter(function(e){return!t.includes(e)});o=t.filter(function(t){return!e.includes(t)}),this.removeMarkers(r)}this.addMarkers(null!=o?o:t)},t.prototype.addMarkers=function(e){var t=this;e.forEach(function(e){t._api.addMarker(e.lat,e.lon,e.title,e.description,e.options)})},t.prototype.removeMarkers=function(e){var t=this;e.forEach(function(e){t._api.removeMarker(e.title)})},t.prototype.moveTo=function(e){var t=e[0],o=e[1],r=e[2];if(void 0!==t){var n=void 0!==r?{zoomLevel:r}:null;this._api.moveCamera(t,o,n)}},t.prototype.render=function(){return o.createElement("div",{className:"gv-map",id:"gv-map",style:{height:"100%",width:"100%"}})},t}(o.Component)});