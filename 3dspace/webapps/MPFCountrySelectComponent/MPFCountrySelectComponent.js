define("DS/MPFCountrySelectComponent/CountrySelectComponent",["UWA/Core","UWA/Class/View","UWA/Element","DS/UIKIT/Input/Select","i18n!DS/MPFCountrySelectComponent/assets/nls/countrySelectComponent"],function(e,t,s,n,i){"use strict";return t.extend({className:"mpf-entry mpf-select mpf-country",domEvents:{change:"onChange"},setup:function(e){this._parent(e),this.preSetCountry=e.preSetCountry,this.readOnly=!0===e.readOnly,this.required=!0===e.required,this.select=null,this.countries=e.countries,this.fieldName=e.fieldName||"country"},render:function(e){return this.select&&this.select.destroy(),this.select=this._createSelect(),this.container.setContent([{tag:"label",html:[{tag:"span",class:"mpf-label",html:i.label+'&nbsp;<em class="mpf-required">*</em>'}]},this.select]),void 0!==e&&void 0!==e.invalid&&e.invalid&&this.select.elements.input.getParent().addClassName("mpf-addressInvalidField"),this},destroy:function(){this.stopListening(this.model),this.model=null,this._parent(),this.container=null},onChange:function(){var e;e=this.select.getValue()[0],this.model.set({country:e}),this.validate()},validate:function(){if(this._removeErrorMsg(),this.required){var t=this.model.validate(this.fieldName);return e.is(t)&&t.length>0?(this._showErrorMessage(t[0].message),!1):(this._removeErrorMsg(),!0)}},_removeErrorMsg:function(){this.select.elements.container.removeClassName("mpf-addressInvalidField");var e=this.container.getElement("p.mpf-addressSelectError");null!==e&&this.container.removeChild(e)},_showErrorMessage:function(t){this.select.elements.container.addClassName("mpf-addressInvalidField"),e.createElement("p",{class:"mpf-addressSelectError",text:t}).inject(this.container)},_createSelect:function(){var e,t;return e=[],t=this.model.get("country"),this.countries&&this.countries.forEach(function(s){var n,i;n={value:i=s.getIso3(),label:s.getName()},i===t&&(n.selected=!0),e.push(n)}),new n({disabled:this.readOnly,placeholder:i.get("placeholder"),name:this.fieldName,options:e})},getValue:function(){return this.select.getValue()},setValue:function(e){return this.select.setValue(e)},setDisabled:function(e){!1!==e?this.select&&this.select.disable():this.select.enable()}})});