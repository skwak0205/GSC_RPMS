define("DS/i3DXCompassSupport/Collection/i3DXCompassCollection",["UWA/Core","UWA/Class/Collection","DS/i3DXCompassCore/RequestOptions"],function(e,t,s){"use strict";var o=e.clone(s);return o.getOptionsUrl=function(e){var t=localStorage.getItem("addressCluster");if(!t){var s=e.substring(0,e.indexOf("/enovia"));return localStorage.setItem("addressCluster",s),e}return t+"/enovia"},o.options.backendPath="/resources/AppsMngtSupport/",t.extend(o)}),define("DS/i3DXCompassSupport/Model/i3DXCompassModel",["UWA/Core","UWA/Class/Model","DS/i3DXCompassCore/RequestOptions"],function(e,t,s){"use strict";var o=e.clone(s);return o.options.backendPath="/resources/AppsMngtSupport/",t.extend(o)}),define("DS/i3DXCompassSupport/Model/PlatformModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/PlatformManagement/Utils"],function(e,t,s){"use strict";return t.extend({url:"platform",getId:function(){return this.get("id")},canCrossCompany:function(){return this.get("crossCompany")},canCrossCompanyExtended:function(){return this.get("crossCompanyExtended")},getCrossCompanyRoles:function(){return this.get("crossCompanyRoles")||[]},isOnPremise:function(){var e=this.get("isOnPremise");return void 0===e&&this.get("id")&&(e=this.get("id").toLowerCase()==="OnPremise".toLowerCase()),e},hasError:function(){return s.isBetaModeActivated("subscription-error")||this.get("subscriptionError")},isPlatform:function(){return!0===this.get("platform")},isVPC:function(){return!0===this.get("vpc")}})}),define("DS/i3DXCompassSupport/View/ConfigurePlatform",["DS/PlatformManagement/Views/ConfigureMembersInvitations"],function(e){"use strict";return e.extend({getTemplate:function(){return this._createCrossCompanyTemplate()},_createCrossCompanyTemplate:function(){return{html:this.buildExpirationView()}}})}),define("DS/i3DXCompassSupport/Controls/Notif",["UWA/Core","DS/UIKIT/Alert"],function(e,t){"use strict";return{message:function(e,s){(!this.notifier||document.body.getElement&&!document.body.getElement(".notif"))&&(this.notifier=new t({closable:!0,visible:!0,autoHide:!0,hideDelay:3e3,className:"notif"}).inject(document.body,"top")),this.notifier.add({className:s,message:e})},success:function(e){this.message(e,"success")},alert:function(e){this.message(e,"error")},warn:function(e){this.message(e,"warning")},info:function(e){this.message(e,"info")}}}),define("DS/i3DXCompassSupport/View/CommunFunctions",["UWA/Core","DS/WAFData/WAFData","DS/UIKIT/Mask","UWA/Class/View","DS/UIKIT/Tooltip"],function(e,t,s,o,n){"use strict";return o.extend({_title:function(t,s,o){return{tag:"h5",class:"commun-title",html:[e.createElement("span",{class:"fonticon "+o,styles:{opacity:"1"}}),{tag:"span",text:e.i18n(t+" | "+s)}]}}})}),define("DS/i3DXCompassSupport/View/BroadcastFinalView",["DS/WAFData/WAFData","UWA/Core","UWA/Class/View","DS/UIKIT/Tooltip","DS/UIKIT/Popover","DS/UIKIT/Input/Toggle"],function(e,t,s,o,n,a){"use strict";return s.extend({tooltipInformationUser:null,tooltipInformationPlatform:null,tooltipRunBroadcast:null,failurePopover:null,refreshDonePopover:null,timeOutPopoverFail:null,timeOutPopoverDone:null,tooltipInformationUser0:null,tooltipInformationPlatform0:null,render:function(e,t){return this.container.setContent(this._createTemplate()),this},_createTemplate:function(){return[{class:"broadcast-view-first-search",html:[this.removeTooltip(),this.headerZone(),this.firstsearchZone(),{class:"broadcast-body-view",html:this.firstSearch()}]}]},isSuccesHeader:function(){if(void 0===this.model||0===this.model.code)return!0},headerZone:function(){return[{class:"broadcast-zone-global-top",html:{class:"broadcast-step",html:[{class:"broadcast-step-circle",html:{tag:"span",class:this.isSuccesHeader()?"circle-background-blue":" circle-background-blue grey",html:{tag:"p",class:"number-step",text:"1"}}},{tag:"div",class:this.isSuccesHeader()?"text-blue-step":"text-blue-step text-grey",text:"Fill in two fields"}]}}]},firstSearch:function(){return[{class:"broadcast-view-search",html:[{class:"broadcast-view-icon",html:[{tag:"span",class:"fonticon fonticon-sync globalView",html:{tag:"p",class:"start-broadcast",text:"Start a synchro"}}]},{class:"broadcast-view-search-comment",html:{tag:"span",class:"text-comment-search",text:"Please fill in the user and platform fields to start the broadcast."}}]}]},firstsearchZone:function(){return[{class:"broadcast-search-zone",html:[{class:"broadcast-search",html:[{tag:"input",type:"text",class:"form-control search-user-platform",placeholder:"Platform name ...",events:{keyup:function(e){var t=e.target.getParent().getElements("input.search-user-platform")[0],s=e.target.getParent().getElements("input.search-user-platform")[1],o=e.target.getParent().getParent().getChildren()[1].getChildren()[0];this.checkCharacters(e,t,s,o),13===e.keyCode&&(this.tooltipEmptyField(t,s,o),this.runBroadcast())}.bind(this),mouseover:function(e){null!==this.tooltipInformationPlatform0&&(this.tooltipInformationPlatform0.destroy(),this.tooltipInformationPlatform0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationPlatform0=new o({position:"bottom",target:e.target,body:'The platform name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show())}.bind(this)}},{tag:"span",class:"fonticon fonticon-monitor input"},{tag:"div",class:"search-and",text:"AND"},{tag:"input",type:"text",class:"form-control search-user-platform",placeholder:"User name ...",events:{keyup:function(e){var t=e.target.getParent().getElements("input.search-user-platform")[0],s=e.target.getParent().getElements("input.search-user-platform")[1],o=e.target.getParent().getParent().getChildren()[1].getChildren()[0];this.checkCharacters(e,t,s,o),13===e.keyCode&&(this.tooltipEmptyField(t,s,o),this.runBroadcast())}.bind(this),mouseover:function(e){null!==this.tooltipInformationUser0&&(this.tooltipInformationUser0.destroy(),this.tooltipInformationUser0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationUser0=new o({position:"bottom",target:e.target,body:'The user name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show())}.bind(this)}},{tag:"span",class:"fonticon fonticon-user inputBis"}]},{class:"run-broadcast-bis",html:{tag:"div",class:"square-run-broadcast-grey-second-time",html:{tag:"p",class:"text-run",text:"Synchro",events:{click:this.runBroadcast.bind(this)}}}}]}]},userIsEmpty:function(e){return""===e},platformIsEmpty:function(e){return""===e},checkCharacters:function(e,t,s,n){var a=/[/!|^|$|(|)|[|\]|}|{|?|+|*|/|\\|"|§]/,i=s.value.trim(),r=t.value.trim(),l=e.target,c=e.target.value.trim(),h=n.getElement("p.text-run"),m=e.key;null!==this.tooltipInformationPlatform&&(this.tooltipInformationPlatform.destroy(),this.tooltipInformationPlatform=null),null!==this.tooltipInformationUser&&(this.tooltipInformationUser.destroy(),this.tooltipInformationUser=null),null!==this.tooltipRunBroadcast&&(this.tooltipRunBroadcast.destroy(),this.tooltipRunBroadcast=null),"Enter"!==e.key&&(n.removeClassName("red"),h.removeClassName("red"),l===t?""===r?(t.placeholder="Platform name ...",t.removeClassName("search-user-platform-selected"),t.removeClassName("second-time"),l.removeClassName("input-not-validate"),n.removeClassName("blue"),h.removeClassName("white")):(l.addClassName("search-user-platform-selected"),a.test(c)||a.test(m)?(l.addClassName("input-not-validate"),this.tooltipInformationPlatform=new o({position:"bottom",target:l,body:'The platform name can not contain specials characters :  !, §, ^, $,(, ), [, ], }, {, ?, +, *, /, ", \\'}).show(),n.removeClassName("blue"),h.removeClassName("white")):(a.test(i)||""===i||(n.addClassName("blue"),h.addClassName("white")),l.addClassName("second-time"),l.removeClassName("input-not-validate"))):""===i?(s.placeholder="User name ...",s.removeClassName("search-user-platform-selected"),s.removeClassName("second-time"),l.removeClassName("input-not-validate"),n.removeClassName("blue"),h.removeClassName("white")):(l.addClassName("search-user-platform-selected"),a.test(c)||a.test(m)?(l.addClassName("input-not-validate"),this.tooltipInformationUser=new o({position:"bottom",target:l,body:'The user name can not contain specials characters :  !, §, ^, $,(, ), [, ], }, {, ?, +, *, /, ", \\'}).show(),l.addClassName("second-time"),n.removeClassName("blue"),h.removeClassName("white")):(a.test(r)||""===r||(n.addClassName("blue"),h.addClassName("white")),l.addClassName("second-time"),l.removeClassName("input-not-validate"))))},tooltipEmptyField:function(e,t,s){var n=s.getElement("p.text-run");null!==this.tooltipRunBroadcast&&(this.tooltipRunBroadcast.destroy(),this.tooltipRunBroadcast=null),""===e.value&&""===t.value?this.tooltipRunBroadcast=new o({position:"bottom",target:s,body:"You should define platform AND user."}).show():""!==e.value&&""!==t.value||(s.removeClassName("blue"),s.addClassName("red"),n.addClassName("red"),this.tooltipRunBroadcast=new o({position:"bottom",target:s,body:"You must define two fields"}).show())},runAgainBroadcast:function(e){"square-run-broadcast-grey-second-time blue"===e.className&&this.dispatchEvent("StartAgainBroadcast")},runBroadcast:function(){null!==this.getContent().getElement("div.square-run-broadcast-grey-second-time.blue")&&this.dispatchEvent("StartBroadcast")},runAgainBroadcastBis:function(e){e.target.getParent().hasClassName("square-run-broadcast-grey-second-time blue")&&this.dispatchEvent("StartAgainBroadcast")},searchAgainAfterClick:function(e){e.target.hasClassName("square-run-broadcast-grey-second-time blue")&&this.dispatchEvent("StartSearchTicket")},searchAgainAfterEnter:function(e){e.hasClassName("searching")&&this.dispatchEvent("SearchAgainTicket")},_searchZone:function(e,t){return[{class:"broadcast-search-zone",html:[{class:"broadcast-search",html:[{tag:"input",type:"text",class:this.platformIsEmpty(e)?"form-control search-user-platform":"form-control search-user-platform second-time",placeholder:"Platform name ...",value:e,events:{keyup:function(e){var t=e.target.getParent().getElements("input.search-user-platform")[0],s=e.target.getParent().getElements("input.search-user-platform")[1],o=e.target.getParent().getParent().getChildren()[1].getChildren()[0];this.checkCharacters(e,t,s,o),13===e.keyCode&&(this.tooltipEmptyField(t,s,o),this.runAgainBroadcast(o))}.bind(this),mouseover:function(e){null!==this.tooltipInformationPlatform0&&(this.tooltipInformationPlatform0.destroy(),this.tooltipInformationPlatform0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationPlatform0=new o({position:"bottom",target:e.target,body:'The platform name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show())}.bind(this)}},{tag:"span",class:"fonticon fonticon-monitor inputBis"},{tag:"div",class:"search-and-bis",text:"AND"},{tag:"input",type:"text",class:this.userIsEmpty(t)?"form-control search-user-platform":"form-control search-user-platform second-time",placeholder:"User name ...",value:t,events:{keyup:function(e){var t=e.target.getParent().getElements("input.search-user-platform")[0],s=e.target.getParent().getElements("input.search-user-platform")[1],o=e.target.getParent().getParent().getChildren()[1].getChildren()[0];this.checkCharacters(e,t,s,o),13===e.keyCode&&(this.tooltipEmptyField(t,s,o),this.runAgainBroadcast(o))}.bind(this),mouseover:function(e){null!==this.tooltipInformationUser0&&(this.tooltipInformationUser0.destroy(),this.tooltipInformationUser0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationUser0=new o({position:"bottom",target:e.target,body:'The user name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show())}.bind(this)}},{tag:"span",class:"fonticon fonticon-user inputBis"}]},{class:"run-broadcast-bis",html:{tag:"div",class:"square-run-broadcast-grey-second-time",html:{tag:"p",class:"text-run",text:"Synchro",events:{click:this.runAgainBroadcastBis.bind(this)}}}}]}]},isSuccess:function(e){return 0===e.code},synchroRAS:function(e){return"ok"===e.status},allRAS:function(e){return!0===this.isSuccess(e)&&!0===this.synchroRAS(e)},_headerZone1:function(e){var s=t.createElement("div",{class:"platform-name",text:e.platform+" ("+e.platformDisplayName+")"});return[{class:"broadcast-body-zone-header1",html:[this.isSuccess(this.model)?{class:"broadcast-body-zone-header1-small",html:[{tag:"div",class:"div-fonticon-monitor-user",html:{tag:"span",class:"fonticon fonticon-monitor"}},s,new o({position:"left",target:s,body:e.platform+" ("+e.platformDisplayName+")"})]}:{}]}]},_headerZone2:function(e){var s=t.createElement("div",{class:"user-name",text:this._EmailKeyAbsent()?e.user:e.email});return[{class:"broadcast-body-zone-header2",html:[this.isSuccess(this.model)?{class:"broadcast-body-zone-header2-small",html:[{tag:"div",class:"div-fonticon-monitor-user",html:{tag:"span",class:"fonticon fonticon-user"}},s,new o({position:"left",target:s,body:this._EmailKeyAbsent()?e.user:e.email})]}:{}]}]},refreshSynchro:function(e,t,s){var o,a=this;this.removeTooltip(),e.addClassName("rotation"),o=a.dispatchEvent("StartAgainBroadcast"),null!==this.refreshDonePopover&&(this.refreshDonePopover.destroy(),this.refreshDonePopover=null,clearTimeout(this.timeOutPopoverDone)),this.refreshDonePopover=void 0!==o?new n({position:"bottom",className:"popover bottom",target:e,body:"Refresh in progress."}).show():new n({position:"bottom",className:"popover bottom",target:e,body:"Error during refresh step."}).show(),this.timeOutPopoverDone=setTimeout(function(){a.refreshDonePopover.destroy(),a.refreshDonePopover=null},1e3)},boxBroadcast:function(e){return{class:"broadcast-header",html:this.isSuccess(this.model)?{tag:"span",class:this.allRAS(this.model)?"circle-background circle-green":"circle-background circle-red",html:{tag:"span",class:this.allRAS(this.model)?"fonticon fonticon-check":"fonticon fonticon-wrong"}}:{tag:"span",class:"circle-background circle-grey",html:{tag:"span",class:"fonticon fonticon-wrong grey"}}}},isPending:function(e){return!0===e.userPending},timingZone:function(e){return[this.isPending(this.model)?{class:"user-pending-zone",html:this._EmailKeyAbsent()?{tag:"span",class:"user-pending",text:"This user "+e.user+" is pending. The date of last synchronization : "+e.date}:{tag:"span",class:"user-pending",text:"This user with the email address : "+e.email+" is pending. The date of last synchronization : "+e.date}}:{class:"timing-zone",html:{tag:"span",class:this.synchroRAS(this.model)?"text-timing":"text-timing red",text:e.date}},{class:this.allRAS(this.model)?"synchro-user-zone color-green":"synchro-user-zone color-red",html:{tag:"p",class:"status-synchro",text:"Synchronization User :"+e.status.toUpperCase()}}]},caseError:function(e){var s=t.createElement("div",{class:"message-error-zone",text:e.message});return[{class:"timing-zone error",html:[s,new o({position:"right",target:s,body:e.message})]},{class:"advise-zone",html:[{tag:"span",class:"fonticon fonticon-info advice"},{tag:"span",class:"advice-text",text:this.recuperationErrorCode()}]}]},recuperationErrorCode:function(){var e=this.model.code;return 2===e?"Please enter another platform name.":4===e?"Please enter another user name.":"Please modify your input."},colorBorder:function(e){return 0===this.model.code?"ok"===this.model.status?"broadcast-body border-square-color-green":"broadcast-body border-square-color-red":"broadcast-body border-square-color-grey"},recuperationInformationsBroadcast:function(e){var s=t.createElement("span",{class:"fonticon fonticon-refresh",events:{mouseover:function(e){new o({position:"right",target:s,body:"Refresh Synchronization"}).show()}}});return{class:"broadcast-box",html:[this.boxBroadcast(this.model),{class:this.colorBorder(this.model),html:[{tag:"div",class:"refresh-zone",events:{click:function(t){var s=t.target;t.target.hasClassName("tooltip-body")&&(s=t.target.getParents()[1].getChildren()[0]),this.refreshSynchro(s,e.platform,e.user)}.bind(this)},html:[s]},this.isSuccess(this.model)?this.timingZone(this.model):this.caseError(this.model)]}]}},_failCallWs:function(e,t){return[{class:"broadcast-view-first-search",html:[this.removeTooltip(),this._searchZone(e,t),{class:"ticket-body-zone",html:[{class:"ticket-globalFail-header",html:{class:"ticket-globalFail-header-small",html:[{class:"big-message",tag:"div",text:"Oops, "},{class:"small-message",tag:"div",text:"We are sorry ... "}]}},{class:"ticket-globalFail-body",html:{class:"ticket-globalFail-body-small",html:[{tag:"span",class:"fonticon fonticon-comment"},{class:"ticket-globalFail-view-icons",html:{tag:"span",class:"fonticon fonticon-role"}}]}},{class:"ticket-globalFail-footer",html:{class:"message-global-error",text:"An unexpected error has occured ... Server is unavailable. Please try later."}}]}]}]},removeTooltip:function(){for(var e=widget.body.getParents()[2].getElements("div.tooltip.tooltip-root.in"),t=0;t<=e.length;t++)void 0!==e[t]&&e[t].remove()},_EmailKeyAbsent:function(){return void 0===this.model.email},_createTemplateBis:function(e,t){return[{class:"broadcast-view-first-search",html:[this.removeTooltip(),this.headerZone(),this._searchZone(e,t),{class:"broadcast-body-zone",html:[this._headerZone1(this.model),this._headerZone2(this.model),{class:"broadcast-body-zone-body",html:[this.recuperationInformationsBroadcast(this.model)]}]}]}]},_failView:function(e,t){return[{class:"broadcast-view-first-search",html:[this.removeTooltip(),this.headerZone(),this._searchZone(e,t),{class:"broadcast-body-zone",html:[{class:"broadcast-body-zone-header1",html:{tag:"div",class:"error-detected",text:"An error has occured "}},{class:"broadcast-body-zone-body",html:[this.recuperationInformationsBroadcast(this.model)]}]}]}]}})}),define("DS/i3DXCompassSupport/Collection/i3DXCompassCollectionV2",["UWA/Core","UWA/Class/Collection","DS/i3DXCompassCore/RequestOptions"],function(e,t,s){"use strict";var o=e.clone(s);return o.getOptionsUrl=function(e){var t=localStorage.getItem("addressCluster");if(!t){var s=e.substring(0,e.indexOf("/enovia"));return localStorage.setItem("addressCluster",s),e}return t+"/enovia"},t.extend(o)}),define("DS/i3DXCompassSupport/Collection/i3DXCompassCollectionProbe",["UWA/Core","DS/i3DXCompassCore/Collection/i3DXCompassCollection","DS/i3DXCompassCore/RequestOptions"],function(e,t,s){"use strict";var o=e.clone(s);return o.getOptionsUrl=function(e){var t=localStorage.getItem("addressCluster");if(!t){var s=e.substring(0,e.indexOf("/enovia"));return localStorage.setItem("addressCluster",s),e}return t+"/enovia"},t.extend(o)}),define("DS/i3DXCompassSupport/View/PingServiceView",["UWA/Core","UWA/Class/View","DS/UIKIT/Tooltip","DS/UIKIT/Popover"],function(e,t,s,o){"use strict";return t.extend({tagName:"div",className:"ping-view",failurePopover:null,refreshDonePopover:null,timeOutPopoverFail:null,timeOutPopoverDone:null,render:function(){return this.container.setContent(this._createTemplate()),this},refreshAction:function(e){var t=this.getContent().getElement("span.fonticon.fonticon-2x.fonticon-refresh");t.addClassName("rotation"),this.model.fetch({onComplete:function(){this.render();var e=this;null!==this.refreshDonePopover&&(this.refreshDonePopover.destroy(),this.refreshDonePopover=null,clearTimeout(this.timeOutPopoverDone)),this.refreshDonePopover=new o({position:"left",className:"popoverGreen",target:this.getContent().getElement(".refresh-zone"),body:"Refresh done."}).show(),this.timeOutPopoverDone=setTimeout(function(){e.refreshDonePopover.destroy(),e.refreshDonePopover=null},2e3)}.bind(this),onFailure:function(){var e=this;t.removeClassName("rotation"),null!==this.failurePopover&&(this.failurePopover.destroy(),this.failurePopover=null,clearTimeout(this.timeOutPopoverFail)),this.failurePopover=new o({position:"left",className:"popoverRed",target:this.getContent().getElement(".refresh-zone"),body:"Error during refresh."}).show(),this.timeOutPopoverFail=setTimeout(function(){e.failurePopover.destroy(),e.failurePopover=null},5e3),console.log("OnFailure case")}.bind(this)})},_createTemplate:function(){var t=e.createElement("span",{class:this.model.isIconeWarning()?"fonticon fonticon-1x fonticon-attention "+this.model.isGoodTiming():null}),o=e.createElement("p",{class:this.model.isSuccess()?"background-color-green":"background-color-red",text:this.model.get("name")});return[{class:"ping-body",html:[{class:"refresh-zone",html:{tag:"span",class:"fonticon fonticon-2x fonticon-refresh",events:{click:this.refreshAction.bind(this)}}},{class:"body-zone",html:[{class:"ping-header",html:[{tag:"span",class:this.model.isSuccess()?"circle-background green":"circle-background red",html:{tag:"span",class:this.model.isSuccess()?"fonticon fonticon-5x fonticon-check":"fonticon fonticon-5x fonticon-wrong"}}]},this.model.isSuccess()?[t,new s({position:"left",target:t,body:this.model.helpWarningTiming()}),{tag:"span",class:"timing "+this.model.isGoodTiming(),text:this.model.get("time")+"ms"}]:{tag:"div",class:"message",text:this.model.get("message")}]},{class:"ping-footer",html:[o,new s({position:"right",target:o,body:this.model.get("name")})]}]}]}})}),define("DS/i3DXCompassSupport/Modal/EditRole",["UWA/Core","UWA/Class/View","UWA/Controls/Abstract","DS/UIKIT/Tooltip","DS/UIKIT/Mask","DS/UIKIT/SuperModal","DS/UIKIT/Input/Toggle","DS/UIKIT/Input/Button","DS/UIKIT/Input/Text","DS/WAFData/WAFData","DS/i3DXCompassSupport/Controls/Notif","DS/UIKIT/Modal","DS/i3DXCompassCore/Csrf"],function(e,t,s,o,n,a,i,r,l,c,h,m,u){"use strict";var d=t.extend({tooltipTitleRole:null,tagName:"div",className:"facet-edit",render:function(){return this.container.setContent(this.createTemplate()),this},createTemplate:function(){var t=this,s=t.model.get("title");return t.model.get("trigram")&&""!==t.model.get("trigram")&&(s=s+" ("+t.model.get("trigram")+")"),[{html:[{tag:"h4",text:s=s+" - "+t.model.get("tenantId")}]},{html:[{class:"form-group",html:[{tag:"label",for:"onlineInstance"+this.cid,html:e.i18n("Online Instance")},new l({id:"onlineInstance"+this.cid,name:"onlineInstance",disabled:!0,attributes:{maxlength:45,events:{keyup:function(){t.getErrors("onlineInstance")}}},value:this.model.get("onlineInstance")||""})]},{class:"form-group",html:[new i({type:"switch",className:"primary",name:"assigned",value:t.model.get("assigned"),label:e.i18n("Assigned"),checked:t.model.get("assigned"),disabled:!0,events:{onClick:function(){t.getContent().getElement("[name=assigned]").value=this.isChecked()}}})]},{class:"form-group",html:[new i({type:"switch",className:"primary",name:"restricted",value:t.model.get("restricted"),label:e.i18n("Restricted"),checked:t.model.get("restricted"),disabled:!0,events:{onClick:function(){t.getContent().getElement("[name=restricted]").value=this.isChecked()}}})]}]}]},getValues:function(){var e=this.getContent();return{onlineInstance:e.getElement("[name=onlineInstance]").value,assigned:e.getElement("[name=assigned]").value,restricted:e.getElement("[name=restricted]").value}},removeError:function(){this.getParent(".form-group").removeClassName("has-error")},addError:function(){this.getParent(".form-group").addClassName("has-error")},getErrors:function(t){var s=this.getValues(),n="",a=[],i=this.getContent();return null!==this.tooltipTitleRole&&(this.tooltipTitleRole.destroy(),this.tooltipTitleRole=null),t&&"onlineInstance"!==t||(s.onlineInstance&&!this.containsMoreThan3CharactersExcludingWhiteSpace(s.onlineInstance)?n=e.i18n("Online Instance: Minimum 3 characters."):this.containsSpecialCharacter(s.onlineInstance)?n=e.i18n('Online Instance: can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'):this.removeError.call(i.getElement("[name=onlineInstance]")),""!==n&&(a.push(n),this.addError.call(i.getElement("[name=onlineInstance]")),this.tooltipTitleRole=new o({position:"bottom",target:i.getElement("[name=onlineInstance]"),body:n}).show())),a},containsMoreThan3CharactersExcludingWhiteSpace:function(e){return/\s*(?:\S\s*){3,}$/.test(e)},containsSpecialCharacter:function(e){return/[/!|^|$|(|)|[|\]|}|{|?|+|*|/|\\|"|§]/.test(e)},mask:function(){n.mask(this.elements.appsContent)},unmask:function(){n.unmask(this.elements.appsContent)}});return s.extend({content:null,modal:null,init:function(t){this.model=t.model,this._parent(t),this.modal=new m({closable:!0,className:"i3DXCompassSupport-members",header:e.i18n("Edit Role"),body:"",footer:this.createButtons(),events:{onHide:function(){this.destroy()}}}),this.elements.container=this.modal},show:function(){return this.view=new d({model:this.model}),this.modal.setBody(this.view.render()),this.modal.inject(document.body,"top").show(),this},showRemoveConfirmation:function(){var t=this,s=new a({closable:!1}),o=e.String.format(e.i18n("Are you sure you want to remove {0} ?"),t.model.get("title"));s.confirm(o,e.i18n("Confirmation"),function(e){e&&t.remove()})},createButtons:function(){var t=[],s=this;return t.push(new r({value:e.i18n("Remove"),className:"error",events:{onClick:this.showRemoveConfirmation.bind(this)}})),t.push(new r({className:"primary",value:e.i18n("Recompute CrossCo"),events:{onClick:this.recompute.bind(this)}})),t.push(new r({className:"default",value:e.i18n("Cancel"),events:{onClick:function(){s.modal.hide()}}})),t},hasChanges:function(){var e=this.view.getValues();return e.onlineInstance!==this.model.get("onlineInstance")||e.assigned!==this.booleanToString(this.model.get("assigned"))||e.restricted!==this.booleanToString(this.model.get("restricted"))},booleanToString:function(e){return e?"true":"false"},save:function(){var t=this,s=this.view.getValues(),o=this.view.getErrors();if(this.mask(),this.hasChanges())if(0===o.length){console.log(s);var n={params:{user:this.model.get("userId"),licenses:JSON.stringify([{id:t.model.get("uid"),licensed:"true"===s.assigned,restricted:"true"===s.restricted}]),platform:this.model.get("tenantId")},callbacks:{onComplete:function(s,o){t.unmask(),t.elements.container.hide(),h.success(e.String.format(e.i18n("{0} was successfully updated"),t.model.get("title"))),t.dispatchEvent("fetchRolesAgain")},onFailure:function(s,o){t.unmask(),t.elements.container.hide(),h.alert(e.String.format("Unable to save the changes on role {0}. {1}",t.model.get("title"),o.message))}}},a={method:"PUT",type:"json",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=utf-8","X-DS-CSRFTOKEN":u.getTokenCSRF()},data:n.params,onComplete:n.callbacks.onComplete,onFailure:n.callbacks.onFailure},i=localStorage.getItem("addressCluster")+"/enovia/resources/AppsMngt/licenses/user/";c.authenticatedRequest(i,a)}else this.unmask(),h.alert(o.join("<br />"));else this.unmask(),this.elements.container.hide(),h.warn("No changes have occured")},remove:function(){var t=this,s={params:{user:this.model.get("userId"),licenses:JSON.stringify([{id:t.model.get("uid"),licensed:t.model.get("assigned"),restricted:t.model.get("restricted")}])},callbacks:{onComplete:function(s,o){t.unmask(),t.elements.container.hide(),h.success(e.String.format(e.i18n("{0} was successfully removed"),t.model.get("title"))),t.dispatchEvent("fetchRolesAgain")},onFailure:function(s,o){t.unmask(),h.alert(e.String.format(e.i18n("Unable to remove {0}"),t.model.get("title")))}}},o={method:"DELETE",type:"json",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},data:s.params,onComplete:s.callbacks.onComplete,onFailure:s.callbacks.onFailure};this.mask();var n=localStorage.getItem("addressCluster")+"/enovia/resources/AppsMngtSupport/member/"+this.model.get("userId")+"/role/"+this.model.get("id");c.authenticatedRequest(n,o)},recompute:function(){var t=this,s={params:{user:this.model.get("userId")},callbacks:{onComplete:function(s,o){t.unmask(),t.elements.container.hide(),h.success(e.i18n(s.message)),t.dispatchEvent("fetchRolesAgain")},onFailure:function(s,o){t.unmask(),h.alert(e.i18n(o.message))}}},o={method:"PUT",type:"json",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=utf-8","X-DS-CSRFTOKEN":u.getTokenCSRF()},data:s.params,onComplete:s.callbacks.onComplete,onFailure:s.callbacks.onFailure};this.mask();var n=localStorage.getItem("addressCluster")+"/enovia/resources/AppsMngtSupport/member/recompute";c.authenticatedRequest(n,o)},getBody:function(){return this.modal.getBody()},mask:function(){this.loader||(n.mask(this.getBody()),this.loader=!0)},unmask:function(){this.loader&&n.unmask(this.getBody()),this.loader=null}})}),define("DS/i3DXCompassSupport/Collection/UsersInconsCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollectionProbe"],function(e,t){"use strict";return t.extend({url:"probe/usersInconsistencies?",parse:function(e){return e=JSON.parse(e)}})}),define("DS/i3DXCompassSupport/Collection/AllKoTicketCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollection"],function(e,t){"use strict";return t.extend({url:"status/v1/allTicketKo",parse:function(e){return e}})}),define("DS/i3DXCompassSupport/Model/ServiceModel",["UWA/Core","DS/i3DXCompassSupport/Model/i3DXCompassModel"],function(e,t){"use strict";return t.extend({isSuccess:function(){return 0===this.get("code")},timing:function(){var e=this.get("time");return"3DCompass Database"===this.get("name")||"3DCompass Licensing Service"===this.get("name")?e<50?0:e>100?2:1:e<150?0:e>250?2:1},isGoodTiming:function(){return["color-green","color-orange","color-red"][this.timing()]},isIconeWarning:function(){return 0!==this.timing()},helpWarningTiming:function(){return["","Ping time : Medium","Ping time : High"][this.timing()]}})}),define("DS/i3DXCompassSupport/Collection/SynchroUserCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollection"],function(e,t){"use strict";return t.extend({url:"status/v1/synchroUsers?",parse:function(e){return e}})}),define("DS/i3DXCompassSupport/View/TicketKoView",["UWA/Core","UWA/Class/View","DS/UIKIT/Tooltip","DS/UIKIT/Input/Toggle","DS/i3DXCompassSupport/View/CommunFunctions","DS/i3DXCompassSupport/Collection/AllKoTicketCollection"],function(e,t,s,o,n,a){"use strict";var i=window.location.origin.replace("ifwe","apps");return t.extend({tagName:"div",className:"ticket-view",tooltipSearch:null,tooltipInformationOtt:null,tooltipNumberField:null,tooltipInformationOtt0:null,render:function(e){return this.container.setContent(this._createTemplate(e)),this},_createTemplate:function(e){return[{class:"ticket-view-first-search",html:[this.removeTooltip(),this.headerZone(),this.firstsearchZone(),{class:"ticket-body-view",html:e?[this.displayAllKoTicket()]:[]}]}]},displayAllKoTicket:function(){var t=new a,s=new n,o=this;t.fetch({onComplete:function(t,n){var a=t.at(0),i={html:[s._title(e.i18n("KO Tenant Consumption"),n.count,"fonticon-link-off"),{class:"allTicket-View-Body-result",html:a.get("count")>0?a.get("data").map(function(e){return o.firstResult(e)}):o.firstSearch()}]};o.container.getElementsByClassName("ticket-body-view")[0].addContent(i)},onFailure:function(e,t){o.container.getElementsByClassName("ticket-body-view")[0].addContent(o.failViewAllTicket())}})},firstResult:function(t){var o=e.createElement("div",{class:"KoTenant-name",text:t.platform}),n=e.createElement("span",{class:"fonticon fonticon-search allTicket"});return[{class:"KoTenant",html:[o,new s({position:"bottom",target:o,body:t.platform}),{tag:"span",class:"circle-Ticket",html:[n,new s({position:"bottom",target:n,body:"More details"})],events:{click:function(e){var t=[e.target.getParent().getParent().getElementsByClassName("KoTenant-name")[0].getText()];this.dispatchEvent("StartSearchTicket",t)}.bind(this)}}]}]},firstSearch:function(){return[{class:"ticket-view-search",html:[{class:"ticket-view-search-icon",html:[{tag:"span",class:"fonticon fonticon-search globalView",html:{tag:"p",class:"start-search",text:"Start a search"}}]},{class:"ticket-view-search-comment",html:{tag:"span",class:"text-comment-search",text:"Please fill in the field to start searching for the ticket consumption."}}]}]},searchAgainAfterClick:function(e){e.target.hasClassName("searching")&&this.dispatchEvent("StartSearchTicket")},validateSearch:function(){null!==this.getContent().getElement("span.fonticon.fonticon-search.searching")&&this.dispatchEvent("StartSearchTicket")},firstsearchZone:function(){var t=e.createElement("span",{class:"fonticon fonticon-search",events:{click:this.searchAgainAfterClick.bind(this)}});return[{class:"ticket-first-search",html:[{class:"choice-ott-or-platform",html:[{tag:"input",type:"text",class:"form-control input-platform input-ott",placeholder:"Ott value OR platform name ...",events:{keyup:function(e){var t=this.container.getElements("input.form-control.input-platform.input-ott")[0],s=this.getContent().getElement("span.fonticon.fonticon-search");this.checkCharacters(e,t,s),13===e.keyCode&&this.validateSearch()}.bind(this),mouseover:function(e){null!==this.tooltipInformationOtt0&&(this.tooltipInformationOtt0.destroy(),this.tooltipInformationOtt0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationOtt0=new s({position:"bottom",target:e.target,body:'The field can not contain specials characters :  !, §, ^, $,(, ), [, ], }, {, ?, +, *, /, ", \\'}).show())}.bind(this)}},{tag:"span",class:"fonticon fonticon-monitor input"},t]}]}]},headerZone:function(){return[{class:"ticket-zone-global-top",html:{class:"ticket-step",html:[{class:"ticket-step-circle",html:{tag:"span",class:"circle-background-blue",html:{tag:"p",class:"number-step",text:"1"}}},{tag:"div",class:"text-blue-step",text:"Fill in the field"}]}}]},isSuccess:function(e){return 0===e.code},ottIsEmpty:function(e){return""===e},platformIsEmpty:function(e){return""===e},removeTooltip:function(){for(var e=widget.body.getParents()[2].getElements("div.tooltip.tooltip-root.in"),t=0;t<=e.length;t++)void 0!==e[t]&&e[t].remove()},checkCharacters:function(e,t,o){var n=/[/!|^|$|(|)|[|\]|}|{|?|+|*|/|\\|"|§]/,a=e.target,i=e.target.value,r=e.key;null!==this.tooltipInformationOtt&&(this.tooltipInformationOtt.destroy(),this.tooltipInformationOtt=null),null!==this.tooltipSearch&&(this.tooltipSearch.destroy(),this.tooltipSearch=null),"Enter"!==e.key&&(""===i?(a.removeClassName("selected"),o.removeClassName("dark-grey"),a.removeClassName("input-not-validate"),o.removeClassName("searching"),this.tooltipSearch=new s({position:"bottom",target:o,body:"You should define ott value or platform name"}).show()):(a.addClassName("selected"),n.test(i)||n.test(r)?(a.addClassName("input-not-validate"),this.tooltipInformationOtt=new s({position:"bottom",target:a,body:'The field can not contain specials characters :  !, §, ^, $,(, ), [, ], }, {, ?, +, *, /, ", \\'}).show(),o.removeClassName("searching")):(a.removeClassName("input-not-validate"),o.addClassName("searching"),o.addClassName("dark-grey"))))},_searchZone:function(e){return[{class:"ticket-search-zone",html:{class:"ticket-search",html:[{tag:"input",type:"text",class:"form-control search-ott-platform second-time",placeholder:"Ott value OR platform name ...",value:e,events:{keyup:function(e){var t=e.target.getParent().getElements("input.search-ott-platform")[0],s=e.target.getParent().getElement("span.fonticon.fonticon-search.second-time");this.checkCharacters(e,t,s),13===e.keyCode&&this.searchAgainAfterEnter(s)}.bind(this),mouseover:function(e){null!==this.tooltipInformationOtt0&&(this.tooltipInformationOtt0.destroy(),this.tooltipInformationOtt0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationOtt0=new s({position:"bottom",target:e.target,body:'The field can not contain specials characters :  !, §, ^, $,(, ), [, ], }, {, ?, +, *, /, ", \\'}).show())}.bind(this)}},{tag:"span",class:"fonticon fonticon-monitor inputBis"},{tag:"div",class:"div-fonticon-search",html:{tag:"span",class:"fonticon fonticon-search second-time",events:{click:this.searchAgain.bind(this)}}}]}}]},lengthService:function(e){var t="Service(s) Ko for the platform "+e.platform+" ("+e.platformDisplayName+") | ";return"N/A"===e.services?t+"0":t+e.services.length},_headerZoneBis:function(e){return[{class:"ticket-body-zone-header",html:[this.isSuccess(this.model)?{class:"ticket-body-zone-header-small",html:[{tag:"div",class:"div-fonticon-monitor",html:{tag:"span",class:"fonticon fonticon-monitor"}},{tag:"div",class:"platform-name",text:this.lengthService(e)}]}:{tag:"div",class:"error-detected",text:"An error has occured "}]}]},_headerZoneBis2:function(e){return[{class:"ticket-body-zone-header",html:{tag:"div",class:"error-detected",text:"An error has occured "}}]},iconsWithService:function(e){var t;switch(e.id){case"DRIVE":t="X3DDRIV_AP_AppIcon.png";break;case"NETVIBES":t="iconNETVIBES.png";break;case"SWYM":t="X3DMCTY_AP_AppIcon.png";break;case"SPACE":t="X3DCSMA_AP_AppIcon.png";break;default:t="3DExpPlatform_Default.png"}return i+"/enovia/widget/images/MyApps/"+t},searchAgain:function(e){e.target.hasClassName("fonticon fonticon-search second-time searching")&&this.dispatchEvent("SearchAgainTicket")},searchAgainAfterEnter:function(e){e.hasClassName("searching")&&this.dispatchEvent("SearchAgainTicket")},recuperationErrorCode:function(){return 2===this.model.code?"Please enter another ott value or platform name.":"Please modify your input."},NoServiceFailed:function(e){return{class:"ticket-body-zone-serviceko-body-small",html:[{class:"service-ko-boxBis noService",html:[{tag:"span",class:"circleGreen",html:{tag:"span",class:"fonticon fonticon-check noservice"}},{tag:"p",class:"message-noService-failed",text:"All Service are running properly."}]}]}},recuperationInfoService:function(e){return 0===e.services.length?this.NoServiceFailed(this.model):this.recuperationServiceKo(this.model)},recuperationServiceKo:function(t){var o=this;return{class:"ticket-body-zone-serviceko-body-small",html:t.services.map(function(t){var n=e.createElement("div",{class:"message-error-zone",text:t.message}),a=e.createElement("span",{class:"fonticon fonticon-lock"}),i=e.createElement("span",{class:"fonticon fonticon-lock-open"});return{class:"service-ko-box",html:[{class:"service-ko-header",html:[{tag:"span",class:"2"===t.syncBlocking?"circle-background circle-red":"circle-background circle-orange",html:"2"===t.syncBlocking?{html:[a,new s({position:"left",target:a,body:"This service blocks the general synchronization of the user's information near the different services of the 3DExperience platform."})]}:{html:[i,new s({position:"left",target:i,body:"This service does not block the general synchronization of the user's information on the 3DExperience platform."})]}}]},{class:"2"===t.syncBlocking?"service-ko-body border-square-color-red":"service-ko-body border-square-color-orange",html:[{class:"timing-zone",html:[{tag:"span",class:"fonticon fonticon-3ds-when"},{tag:"span",class:"text-timing",text:t.timing},{tag:"span",class:"text-timing ms",text:" ms"}]},n,new s({position:"right",target:n,body:t.message}),{class:"2"===t.syncBlocking?"name-service-zone synchrouser-background-color-red":"name-service-zone synchrouser-background-color-orange",html:[{tag:"img",class:"icon",id:"icon-service",src:o.iconsWithService(t)},{tag:"span",class:"name-of-service-ko",text:t.id}]}]}]}})}},_successFailView:function(t,o){var n=e.createElement("span",{class:"fonticon fonticon-lock-open-user"});return[{class:"ticket-view-first-search",html:[this.removeTooltip(),this._searchZone(t),{class:"ticket-body-zone",html:[this._headerZoneBis(this.model),{class:"ticket-body-zone-body",html:{class:"ticket-body-sucess-view",html:{class:"ticket-body-sucess",html:[{class:"ticket-body-sucess-header",html:[{tag:"span",class:this.isSuccess(this.model)?"circle-background green":"circle-background grey",html:{tag:"span",class:this.isSuccess(this.model)?"fonticon fonticon-check":"fonticon fonticon-wrong"}}]},{class:this.isSuccess(this.model)?"ticket-body-sucess-body border-color-green":"ticket-body-sucess-body border-color-grey",html:[this.isSuccess(this.model)?[{class:"user-locked-zone",html:[n,new s({position:"left",target:n,body:"No user locked on this platform"})]},{class:"message-zone",tag:"div",text:"The platform "+this.model.platform+" is not locked."}]:[{class:"user-locked-zone"},{class:"message-zone fail",tag:"div",text:this.model.message||"Impossible to recover the list of ko Tenant"},{class:"advise-zone",html:[{tag:"span",class:"fonticon fonticon-info advice"},{tag:"span",class:"advice-text",text:this.recuperationErrorCode()||"Launch a search or contact your referent."}]}]]}]}}}]}]}]},_failCallWs:function(e,t){return[{class:"ticket-view-first-search",html:[this.removeTooltip(),this._searchZone(e),{class:"ticket-body-zone",html:[{class:"ticket-globalFail-header",html:{class:"ticket-globalFail-header-small",html:[{class:"big-message",tag:"div",text:"Oops, "},{class:"small-message",tag:"div",text:"We are sorry ... "}]}},{class:"ticket-globalFail-body",html:{class:"ticket-globalFail-body-small",html:[{tag:"span",class:"fonticon fonticon-comment"},{class:"ticket-globalFail-view-icons",html:{tag:"span",class:"fonticon fonticon-role"}}]}},{class:"ticket-globalFail-footer",html:{class:"message-global-error",text:"An unexpected error has occured ... Server is unavailable. Please try later."}}]}]}]},_createTemplateBis:function(t){var o=e.createElement("span",{class:"fonticon fonticon-lock-user"}),n=e.createElement("div",{class:"user-name",text:this.model.user}),a=this.model.ticket,i=e.createElement("span",{class:"fonticon fonticon-info consoTicket"});return new s({position:"left",target:o,body:this.model.user+" locked on "+this.model.platform}),new s({position:"bottom",target:i,body:a.message}),[{class:"ticket-view-first-search",html:[this.removeTooltip(),this._searchZone(t),{class:"ticket-body-zone",html:[this._headerZoneBis(this.model),{class:"ticket-body-zone-body",html:[{class:"ticket-body-zone-user",html:{class:"ticket-body-zone-user-small",html:[{tag:"div",class:"div-fonticon-lock-user",html:[o]},n,new s({position:"left",target:n,body:this.model.user})]}},{class:"ticket-body-zone-serviceko-body",html:[this.recuperationInfoService(this.model)]}]},{class:"ko"===this.model.status?"ticket-body-zone-serviceko-footer red":"ticket-body-zone-serviceko-footer green",tag:"div",text:"Synchronization User :"+this.model.status.toLowerCase()},{class:"ticket-body-zone-consoTicket "+this.colorTicket(a),html:[{tag:"div",text:"Tenant Consumption :"+this.consumptionTicket(a)},{tag:"div",class:"div-fonticon-consoTicket-info",html:[i]}]}]}]}]},ticket:function(e){var t=e.status;return"CONSUMED"===t?0:"Not Found"===t?1:2},colorTicket:function(e){return["ticket-green","ticket-grey","ticket-red"][this.ticket(e)]},failViewAllTicket:function(){return[this._headerZoneBis2(),{class:"ticket-body-zone-body",html:{class:"ticket-body-sucess-view",html:{class:"ticket-body-sucess",html:[{class:"ticket-body-sucess-header",html:[{tag:"span",class:"circle-background grey",html:{tag:"span",class:"fonticon fonticon-wrong"}}]},{class:"ticket-body-sucess-body border-color-grey",html:[[{class:"user-locked-zone"},{class:"message-zone fail",tag:"div",text:"Impossible to recover the list of ko Tenant"}]]}]}}}]},consumptionTicket:function(e){var t=e.status;return"CONSUMED"===t?"ok":"Not Found"===t?"not found":"ko"}})}),define("DS/i3DXCompassSupport/Collection/ProbesCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollectionProbe"],function(e,t){"use strict";return t.extend({url:"probe/synchKO",parse:function(e){var t=0,s={count:0,data:[]};""!==e&&e.split(";").forEach(function(e){var o={platform:"",users:[]},n=e.split(":")[0],a=e.split(":")[1].split(",");o.platform=n,a.forEach(function(e){var s={id:e};t+=1,o.users.push(s)}),s.data.push(o)});return s.count=t,s}})}),define("DS/i3DXCompassSupport/Collection/StartupCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollection"],function(e,t){"use strict";return t.extend({url:"status/v1/statusStartup",parse:function(e){return e}})}),define("DS/i3DXCompassSupport/View/PingServicesView",["UWA/Core","UWA/Class/View","DS/UIKIT/Spinner","DS/i3DXCompassSupport/Model/ServiceModel","DS/i3DXCompassSupport/View/PingServiceView"],function(e,t,s,o,n){"use strict";return t.extend({tagName:"div",className:"i3DXCompassSupport-ping-service ping-view-wrapper",render:function(){return this.container.setContent(this._createTemplate()),this},_badAuthentification:function(){return this.container.setContent([{class:"bad-authentificate",html:[{class:"bad-authentificate-header",html:{tag:"div",class:"text-header",text:"Access denied"}},{class:"bad-authentificate-body",html:{tag:"span",class:"fonticon fonticon-user-key authentification"}},{class:"bad-authentificate-footer",html:{tag:"div",class:"text-footer",text:"You don’t have appropriate access rights. Therefore, you are not authorized to use this tool."}}]}])},_failView:function(){return this.container.setContent([{class:"ping-ws-failed",html:[{class:"ping-ws-failed-header",html:{tag:"span",class:"fonticon fonticon-alert"}},{class:"ping-ws-failed-body",html:[{tag:"p",class:"complete-fail",text:"We encounter an unexpected error."},{tag:"p",class:"complete-fail",text:"We apologize for the inconvenience. Please retry later."}]}]}])},_title:function(){return{class:"i3DXCompassSupport-ping-service-title",html:[{tag:"span",class:"state-services",text:"State of services"}]}},_createTemplate:function(){return[this._title(),this.collection.map(function(e){return new n({model:e}).render()})]}})}),define("DS/i3DXCompassSupport/View/MembersView",["UWA/Core","UWA/Class/View","UWA/Class/Model","DS/UIKIT/Mask","DS/UIKIT/SuperModal","DS/UIKIT/Tooltip","DS/UIKIT/DropdownMenu","DS/W3DXComponents/IdCard","DS/W3DXComponents/Views/Item/TileView","DS/WAFData/WAFData","DS/i3DXCompassSupport/Modal/EditRole","DS/i3DXCompassSupport/Controls/Notif"],function(e,t,s,o,n,a,i,r,l,c,h,m){"use strict";return t.extend({tooltipInformationUser:null,tooltipFieldEmpty:null,idCard:null,model:null,render:function(){return this.selectedFacet=0,this.container.setContent(this.createTemplate()),this},createTemplate:function(){return[{class:"members-view",html:[this.createSearchZone(),{class:"members-zone-global-body"}]}]},createSearchZone:function(){var t=e.createElement("span",{class:"fonticon fonticon-search",events:{click:this.runSearch.bind(this)}}),s=this;return new a({position:"top",target:t,body:e.i18n("Search")}),[{class:"members-search-zone",html:[{class:"members-search",html:[{tag:"input",type:"text",name:"search-user",class:"form-control search-user",placeholder:"User name or email ...",events:{keyup:function(e){0===s.getErrors("search-user").length?t.addClassName("fonticon-search-global-ok"):t.removeClassName("fonticon-search-global-ok"),this.addClassName("search-user-selected"),"Enter"===e.key&&s.runSearch()}}},t]}]}]},removeError:function(){this.getParent(".members-search").removeClassName("has-error")},addError:function(){this.getParent(".members-search").addClassName("has-error")},getErrors:function(t){var s=this.getValues(),o="",n=[],i=this.getContent();return null!==this.tooltipInformationUser&&(this.tooltipInformationUser.destroy(),this.tooltipInformationUser=null),t&&"search-user"!==t||(""===s.searchUser?o=e.i18n("Search is empty."):this.containsMoreThan3CharactersExcludingWhiteSpace(s.searchUser)?this.containsSpecialCharacter(s.searchUser)?o=e.i18n('Can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'):this.removeError.call(i.getElement("[name=search-user]")):o=e.i18n("Minimum 3 characters."),""!==o&&(n.push(o),this.addError.call(i.getElement("[name=search-user]")),this.tooltipInformationUser=new a({position:"bottom",target:i.getElement("[name=search-user]"),body:o}).show())),n},getValues:function(){return{searchUser:this.getContent().getElement("[name=search-user]").value}},containsMoreThan3CharactersExcludingWhiteSpace:function(e){return/\s*(?:\S\s*){3,}$/.test(e)},containsSpecialCharacter:function(e){return/[/!|^|$|(|)|[|\]|}|{|?|+|*|/|\\|"|§]/.test(e)},createViewSelectMember:function(e){var t,s,o,n=this;return{class:"pm-grid-container layout-grid",html:[e.map(function(e){return s=e.get("email"),t=e.get("firstname")&&e.get("lastname")?e.get("firstname")+" "+e.get("lastname")+" - "+e.get("id"):e.get("id"),o=e.get("countTenants"),{class:"tile-container grid",html:{class:"tile-sub-container tile-hover",html:[{class:"tile-body",html:[{class:"tile-title",html:t},{class:"tile-content",html:[{tag:"span",text:s}]},{class:"tile-subtitle",html:[{tag:"span",text:o+" tenants"}]}],events:{click:function(){n.model=e,n.setViewMemberContent(e)}}}]}}})]}},createViewMemberContent:function(e){var t=e.get("firstname")&&e.get("lastname")?e.get("firstname")+" "+e.get("lastname")+" - "+e.get("id"):e.get("id");return this.idCard=this.buildIdCard(e),[{class:"members-body-info",html:[{tag:"h5",class:"title",text:t},{tag:"a",class:"subtitle",text:e.get("email")}]},{class:"facets",html:this.idCard},{class:"members-body-content",html:""}]},setViewMemberContent:function(e){this.container.getElement("div.members-zone-global-body").setContent(this.createViewMemberContent(e)),this.idCard.selectFacet(this.selectedFacet)},setBodyContent:function(e){this.container.getElement(".members-body-content").setContent(e)},buildIdCard:function(t){var o=this;return new r({model:new s,actions:[],facets:function(){var s=[{text:e.i18n("Roles"),icon:"role",handler:function(){o.selectedFacet=0,o.getFacet(0,t)}}];return s.push({text:e.i18n("History"),icon:"clock",handler:function(){o.selectedFacet=1,o.getFacet(1,t)}}),s}})},getFacet:function(e,t){var s;switch(e){case 0:s=this.fetchAndShowRoles(t);break;case 1:s=this.fetchAndShowTableHistory(t)}return s},getRole:function(e){switch(e){case 0:return"Administrator";case 1:return"Member";default:return"External"}},getClassByRole:function(e){switch(e){case 0:return"color-indicator-admin";case 1:return"color-indicator-member";default:return"color-indicator-contractor"}},fetchAndShowRoles:function(e){var t=this;this.options.rolesCollection.setUrl(e.get("id")),o.mask(t.container),this.options.rolesCollection.fetch({onComplete:function(s,n){o.unmask(t.container),t.showContentRoles(t.createContentRoles(e,s))},onFailure:function(e,s){o.unmask(t.container),t.showContentRoles(t.createFailViewServer())}})},showContentRoles:function(e){this.setBodyContent({class:"members-view-roles",html:e})},createContentRoles:function(e,t){var o=[],n=this;return t.isEmpty()?n.createNoTenantView():(t.map(function(t){o.push([{tag:"h5",html:[{tag:"span",class:"fonticon fonticon-role"},{tag:"span",class:"title",text:t.get("tenantId")},{tag:"span",class:"title",text:" | "},{tag:"span",class:"title",text:t.get("roles").length},{tag:"span",class:"title",text:" | "},{tag:"span",class:"subtitle "+n.getClassByRole(t.get("role")),text:n.getRole(t.get("role"))},{tag:"span",class:"subtitle",text:t.get("active")?"":" (Pending)"}]},{class:"pm-grid-container layout-grid",html:[t.get("roles").map(function(o){return n.createTileRole(new s({tenantId:t.get("tenantId"),userId:e.get("id"),id:o.id,uid:o.uid,trigram:o.trigram,title:o.title,restricted:o.restricted,onlineInstance:o.onlineInstance,assigned:o.assigned,crossCompany:o.crossCompany}))}.bind(n))]}])}),o)},createNoTenantView:function(){return{class:"empty-ressources-view",html:{class:"small-message",text:"This user has 0 tenant"}}},showModalEdit:function(e){var t=this;return new h({model:e,events:{fetchRolesAgain:function(){t.fetchAndShowRoles(t.model)}}}).show()},showRemoveConfirmation:function(t){var s=this,o=new n({closable:!1}),a=e.String.format(e.i18n("Are you sure you want to remove {0} ?"),t.get("title"));o.confirm(a,e.i18n("Confirmation"),function(e){e&&s.remove(t)})},remove:function(t){var s=this,n={params:{user:t.get("userId"),licenses:JSON.stringify([{id:t.get("uid"),licensed:t.get("assigned"),restricted:t.get("restricted")}])},callbacks:{onComplete:function(n,a){o.unmask(s.container.getElement("div.members-zone-global-body")),m.success(e.String.format(e.i18n("{0} was successfully removed"),t.get("title"))),s.fetchAndShowRoles(s.model)},onFailure:function(n,a){o.unmask(s.container.getElement("div.members-zone-global-body")),m.alert(e.String.format(e.i18n("Unable to remove {0}"),t.get("title")))}}},a={method:"DELETE",type:"json",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},data:n.params,onComplete:n.callbacks.onComplete,onFailure:n.callbacks.onFailure},i=localStorage.getItem("addressCluster")+"/enovia/resources/AppsMngtSupport/member/"+t.get("userId")+"/role/"+t.get("id");c.authenticatedRequest(i,a)},createTileRole:function(t){var s=this,o=e.createElement("span",{class:"fonticon fonticon-2x fonticon-down-open"}),n=[];return!0===t.get("crossCompany")&&n.push({id:"edit",fonticon:"pencil",text:"Edit"}),n.push({id:"remove",fonticon:"trash",text:"Remove"}),new i({target:o,multiSelect:!1,items:n,events:{onClick:function(e,o){"edit"===o.id&&t.get("crossCompany")?s.showModalEdit(t):"remove"===o.id&&s.showRemoveConfirmation(t)}}}),{class:"tile-container grid with-actions",html:[{class:"tile-sub-container no-selectable",html:[{class:"tile-body",html:[{class:"tile-title",html:t.get("title")},t.get("crossCompany")?{class:"tile-content",html:[{tag:"span",text:"Assigned: "+t.get("assigned")},{tag:"span",text:" | Restricted: "+t.get("restricted")+" | "},{tag:"span",text:"Online Instance: "+t.get("onlineInstance")}]}:""]},{class:"tile-actions",html:{class:"actions-inline-container",html:{class:"action-container actions-inline-dotted",html:{class:"action-icon-wrapper",html:o}}}}]}]}},fetchAndShowTableHistory:function(e){var t=this;this.options.historyCollection.setUrl(e.get("id")),o.mask(this.container),this.options.historyCollection.fetch({onComplete:function(e,s){o.unmask(t.container),t.showContentHistory(t.createTableHistory(e))},onFailure:function(e,s){o.unmask(t.container),t.showContentHistory(t.createFailViewServer())}})},showContentHistory:function(e){this.setBodyContent({class:"members-view-history",html:e})},createTableHistory:function(e){return e.isEmpty()?this.createNoHistoryView():{tag:"table",class:"table table-hover",html:{tag:"tbody",html:e.map(function(e){return{tag:"tr",html:[{tag:"td",html:{tag:"span",text:e.get("date")}},{tag:"td",html:{tag:"span",text:e.get("message")}}]}})}}},createNoHistoryView:function(){return{class:"empty-ressources-view",html:{class:"small-message",text:"This user has no history"}}},createFailView:function(e){return"Please enter another user name or email",{class:"members-body-error-case",html:[[{tag:"div",class:"error-detected",text:"An error has occured "},{tag:"span",class:"circle-background-error-case-red",html:{tag:"span",class:"fonticon fonticon-wrong"}}],{html:[{tag:"p",class:"error-message-red",text:"The user "+e+" does not exist"},{class:"advice-zone",html:[{tag:"span",class:"fonticon fonticon-info advice"},{tag:"span",class:"advice-text",text:"Please enter another user name or email"}]}]}]}},showResults:function(e){var t;e.length>0?1===e.length?(this.model=e.first(),this.setViewMemberContent(this.model)):(t=this.createViewSelectMember(e),this.container.getElement("div.members-zone-global-body").setContent(t)):this.showFailResults()},createFailViewServer:function(){return{html:{class:"failView-zone",html:[{class:"failView-header",html:{class:"failView-header-small",html:[{class:"big-message",tag:"div",text:"Oops, "},{class:"small-message",tag:"div",text:"We are sorry ... "}]}},{class:"failView-body",html:{class:"failView-body-small",html:[{tag:"span",class:"fonticon fonticon-comment"},{class:"failView-view-icons",html:{tag:"span",class:"fonticon fonticon-role"}}]}},{class:"failView-footer",html:{class:"message-global-error",text:"An unexpected error has occured ... Server is unavailable. Please try later."}}]}}},showFailResults:function(){var e=this.container.getElement("input.search-user").value.trim(),t=this.createFailView(e);this.container.getElement("div.members-zone-global-body").setContent(t)},runSearch:function(){var e;e=this.container.getElement("input.search-user").value.trim(),0===this.getErrors().length&&(o.mask(this.container),this.fetchMembers(e))},fetchMembers:function(e){var t=this;this.collection.fetch({data:{query:e},onComplete:function(e,s){o.unmask(t.container),t.showResults(e)},onFailure:function(e,s){o.unmask(t.container),t.container.getElement("div.members-zone-global-body").setContent(t.createFailViewServer())}})}})}),define("DS/i3DXCompassSupport/View/StatisticsView",["UWA/Core","UWA/Class/View","UWA/Class/Model","DS/UIKIT/Mask","DS/UIKIT/SuperModal","DS/UIKIT/Tooltip","DS/UIKIT/DropdownMenu","DS/W3DXComponents/IdCard","DS/W3DXComponents/Views/Item/TileView","DS/i3DXCompassSupport/View/ConfigurePlatform","DS/WAFData/WAFData","DS/i3DXCompassSupport/Modal/EditRole","DS/i3DXCompassSupport/Controls/Notif","DS/PlatformManagement/Model/PlatformModel","DS/i3DXCompassSupport/Collection/i3DXCompassCollection","DS/PlatformManagement/Utils","DS/W3DXComponents/Views/Layout/ScrollView","DS/PlatformManagementGettingStarted/View/StatusView","DS/i3DXCompassSupport/Model/i3DXCompassModel","DS/i3DXCompassCore/CacheManager"],function(e,t,s,o,n,a,i,r,l,c,h,m,u,d,p,f,g,v,C,b){"use strict";var S=C.extend({url:"statistics"});return t.extend({tooltipInformationUser:null,tooltipFieldEmpty:null,idCard:null,model:null,render:function(){return this.container.setContent(this.createTemplate()),this},createTemplate:function(){return[{class:"stats-view",html:[this.createSearchZone(),{class:"stats-zone-global-body"}]}]},createSearchZone:function(){var e=[],t=new s({title:"Roles",icon:"role-key",data:[new s({title:"Total",count:0}),new s({title:"IFW",count:0}),new s({title:"IFW in cross company",count:0})]}),o=new s({title:"Users",icon:"users",data:[new s({title:"Total",count:0}),new s({title:"HasMember",count:0})]}),n=new s({title:"Platforms",icon:"presentation-slides",data:[new s({title:"Total",count:0}),new s({title:"Cross company activated",count:0})]}),a=new s({title:"Business Experiences",icon:"briefcase",data:[new s({title:"Total",count:0})]}),i=new s({title:"Applications",icon:"picture-animated",data:[new s({title:"Total",count:0})]}),r=new v({model:o}),l=new v({model:t}),c=new v({model:n}),h=new v({model:a}),m=new v({model:i});return e.push(r.render()),e.push(l.render()),e.push(h.render()),e.push(c.render()),e.push(m.render()),(new S).fetch({cacheTTL:b.LONG_LIFE_TIME,onFailure:function(e,t){console.log("Fail fetching global stats.")},onComplete:function(e){console.log(e),t.get("data")[0].set("count",e.get("rolesTotal")),t.get("data")[1].set("count",e.get("rolesIFW")),t.get("data")[2].set("count",e.get("rolesIFWCC")),o.get("data")[0].set("count",e.get("usersTotal")),o.get("data")[1].set("count",e.get("hasMembers")),n.get("data")[0].set("count",e.get("platformsTotal")),n.get("data")[1].set("count",e.get("platformsCC")),a.get("data")[0].set("count",e.get("beTotal")),i.get("data")[0].set("count",e.get("applicationsTotal")),r.render(),l.render(),h.render(),c.render(),m.render()}}),[{class:"stats-zone",html:[{tag:"span",class:"statistics",text:"Statistics"},{class:"status-boxs",html:e}]}]}})}),define("DS/i3DXCompassSupport/Collection/ServiceCollection",["UWA/Core","DS/i3DXCompassSupport/Model/ServiceModel","DS/i3DXCompassSupport/Collection/i3DXCompassCollection"],function(e,t,s){"use strict";return s.extend({url:"monitoring/v1/pingServices",model:t,parse:function(e){return e.data}})}),define("DS/i3DXCompassSupport/Collection/DeleteBOUsersInconsistencies",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollectionProbe"],function(e,t){"use strict";return t.extend({url:"probe/BoProbeUsersInconsistencies",parse:function(e){return e}})}),define("DS/i3DXCompassSupport/Collection/PlatformsCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollection"],function(e,t){"use strict";return t.extend({url:"platforms",parse:function(e){return e.data}})}),define("DS/i3DXCompassSupport/Collection/FetchBOUsersInconsistencies",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollectionProbe"],function(e,t){"use strict";return t.extend({url:"probe/fetchBOUI",parse:function(e){return"Refresh in progress"!==e.message&&(e=JSON.parse(e.message)),e}})}),define("DS/i3DXCompassSupport/Collection/BroadcastCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollection"],function(e,t){"use strict";return t.extend({url:"status/v1/broadcast?",parse:function(e){return e}})}),define("DS/i3DXCompassSupport/Collection/MembersCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollection"],function(e,t){"use strict";return t.extend({url:"member",parse:function(e){return e.data}})}),define("DS/i3DXCompassSupport/Collection/HistoryCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollection"],function(e,t){"use strict";return t.extend({url:"member",parse:function(e){return e.data},setUrl:function(t){var s;t&&(s=this.url.substring(0,this.url.indexOf("/member")),this.url=e.String.format("{0}/member/{1}/history",s,t))}})}),define("DS/i3DXCompassSupport/Collection/RolesCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollection"],function(e,t){"use strict";return t.extend({url:"member",parse:function(e){return e.data},setUrl:function(t){var s;t&&(s=this.url.substring(0,this.url.indexOf("/member")),this.url=e.String.format("{0}/member/{1}/role",s,t))}})}),define("DS/i3DXCompassSupport/Collection/TicketCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollection"],function(e,t){"use strict";return t.extend({url:"status/v1/serviceTicket?",parse:function(e){return e}})}),define("DS/i3DXCompassSupport/View/PlatformsView",["UWA/Core","UWA/Class/View","UWA/Class/Model","DS/UIKIT/Mask","DS/UIKIT/SuperModal","DS/UIKIT/Tooltip","DS/UIKIT/DropdownMenu","DS/W3DXComponents/IdCard","DS/W3DXComponents/Views/Item/TileView","DS/i3DXCompassSupport/View/ConfigurePlatform","DS/WAFData/WAFData","DS/i3DXCompassSupport/Modal/EditRole","DS/i3DXCompassSupport/Controls/Notif","DS/PlatformManagement/Model/PlatformModel","DS/i3DXCompassSupport/Collection/i3DXCompassCollection","DS/PlatformManagement/Utils","DS/W3DXComponents/Views/Layout/ScrollView"],function(e,t,s,o,n,a,i,r,l,c,h,m,u,d,p,f,g){"use strict";return t.extend({tooltipInformationUser:null,tooltipFieldEmpty:null,idCard:null,model:null,render:function(){return this.selectedFacet=0,this.container.setContent(this.createTemplate()),this},createTemplate:function(){return[{class:"platforms-view",html:[this.createSearchZone(),{class:"platforms-zone-global-body"}]}]},createSearchZone:function(){var t=e.createElement("span",{class:"fonticon fonticon-search",events:{click:this.runSearch.bind(this)}}),s=this;return new a({position:"top",target:t,body:e.i18n("Search")}),[{class:"platforms-search-zone",html:[{class:"platforms-search",html:[{tag:"input",type:"text",name:"search-platform",class:"form-control search-platform",placeholder:"Platform id or name ...",events:{keyup:function(e){0===s.getErrors("search-platform").length?t.addClassName("fonticon-search-global-ok"):t.removeClassName("fonticon-search-global-ok"),this.addClassName("search-platform-selected"),"Enter"===e.key&&s.runSearch()}}},t]}]}]},removeError:function(){this.getParent(".platforms-search").removeClassName("has-error")},addError:function(){this.getParent(".platforms-search").addClassName("has-error")},getErrors:function(t){var s=this.getValues(),o="",n=[],i=this.getContent();return null!==this.tooltipInformationUser&&(this.tooltipInformationUser.destroy(),this.tooltipInformationUser=null),t&&"search-platform"!==t||(""===s.searchUser?o=e.i18n("Search is empty."):this.containsMoreThan3CharactersExcludingWhiteSpace(s.searchUser)?this.containsSpecialCharacter(s.searchUser)?o=e.i18n('Can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'):this.removeError.call(i.getElement("[name=search-platform]")):o=e.i18n("Minimum 3 characters."),""!==o&&(n.push(o),this.addError.call(i.getElement("[name=search-platform]")),this.tooltipInformationUser=new a({position:"bottom",target:i.getElement("[name=search-platform]"),body:o}).show())),n},getValues:function(){return{searchUser:this.getContent().getElement("[name=search-platform]").value}},containsMoreThan3CharactersExcludingWhiteSpace:function(e){return/\s*(?:\S\s*){3,}$/.test(e)},containsSpecialCharacter:function(e){return/[/!|^|$|(|)|[|\]|}|{|?|+|*|/|\\|"|§]/.test(e)},createViewSelectPlatform:function(e){var t,s=this;return{class:"pm-grid-container layout-grid",html:[e.map(function(e){return t=e.id,{class:"tile-container grid",html:{class:"tile-sub-container tile-hover",html:[{class:"tile-body",html:[{class:"tile-title",html:e.name},{class:"tile-content",html:[{tag:"span",text:t}]}],events:{click:function(){s.model=e,s.setViewPlatformContent(e)}}}]}}})]}},createViewPlatformContent:function(e){var t,s;return s=e.id,t=e.name,this.idCard=this.buildIdCard(e),[{class:"platforms-body-info",html:[{tag:"h5",class:"title",text:t},{tag:"a",class:"subtitle",text:s}]},{class:"facets",html:this.idCard},{class:"platforms-body-content",html:""}]},setViewPlatformContent:function(e){this.container.getElement("div.platforms-zone-global-body").setContent(this.createViewPlatformContent(e)),this.idCard.selectFacet(this.selectedFacet)},setBodyContent:function(e){this.container.getElement(".platforms-body-content").setContent(e)},buildIdCard:function(t){var o=this;return new r({model:new s,actions:[],facets:function(){var s=[{text:e.i18n("Options"),icon:"cog",handler:function(){o.selectedFacet=0,o.getFacet(0,t)}}];return s.push({text:e.i18n(""),handler:function(){o.selectedFacet=1,o.getFacet(1,t)}}),s}})},getFacet:function(e,t){var s;switch(e){case 0:case 1:s=this.getPlatform(t)}return s},getPlatform:function(e){var t=this,s=e.id;this.options.optionsCollection.fetch({data:{id:s},onComplete:function(e,s){o.unmask(t.container),t.fetchAndShowOptions(e)}})},fetchAndShowOptions:function(e){console.log(e.first()),this.showContentOptions(new c({platform:e.first(),support:!0}).render())},showContentOptions:function(e){this.setBodyContent({class:"platforms-view-roles",html:e})},createFailView:function(e){return"Please enter another platform name",{class:"platforms-body-error-case",html:[[{tag:"div",class:"error-detected",text:"An error has occured "},{tag:"span",class:"circle-background-error-case-red",html:{tag:"span",class:"fonticon fonticon-wrong"}}],{html:[{tag:"p",class:"error-message-red",text:"The platform "+e+" does not exist"},{class:"advice-zone",html:[{tag:"span",class:"fonticon fonticon-info advice"},{tag:"span",class:"advice-text",text:"Please enter another platform name"}]}]}]}},showResults:function(e){var t;e.length>0?1===e.length?(this.model=e[0],this.setViewPlatformContent(this.model)):(t=this.createViewSelectPlatform(e),this.container.getElement("div.platforms-zone-global-body").setContent(t)):this.showFailResults()},createFailViewServer:function(){return{html:{class:"failView-zone",html:[{class:"failView-header",html:{class:"failView-header-small",html:[{class:"big-message",tag:"div",text:"Oops, "},{class:"small-message",tag:"div",text:"We are sorry ... "}]}},{class:"failView-body",html:{class:"failView-body-small",html:[{tag:"span",class:"fonticon fonticon-comment"},{class:"failView-view-icons",html:{tag:"span",class:"fonticon fonticon-role"}}]}},{class:"failView-footer",html:{class:"message-global-error",text:"An unexpected error has occured ... Server is unavailable. Please try later."}}]}}},showFailResults:function(){var e=this.container.getElement("input.search-platform").value.trim(),t=this.createFailView(e);this.container.getElement("div.platforms-zone-global-body").setContent(t)},runSearch:function(){var e;e=this.container.getElement("input.search-platform").value.trim(),0===this.getErrors().length&&(o.mask(this.container),this.fetchPlatforms(e))},fetchPlatforms:function(e){var t=this;this.collection.fetch({data:{query:e},onComplete:function(e,s){o.unmask(t.container),t.showResults(s)},onFailure:function(e,s){o.unmask(t.container),t.container.getElement("div.platforms-zone-global-body").setContent(t.createFailViewServer())}})}})}),define("DS/i3DXCompassSupport/Collection/PlatformsOptionsCollection",["UWA/Core","DS/i3DXCompassSupport/Collection/i3DXCompassCollectionV2","DS/i3DXCompassSupport/Model/PlatformModel"],function(e,t,s){"use strict";return t.extend({url:"platform",model:s,parse:function(e){return e},setUrl:function(t){var s;t&&(s=this.url.substring(0,this.url.indexOf("/platform")),this.url=e.String.format("{0}/platform/{1}",s,t))}})}),define("DS/i3DXCompassSupport/View/ProbesView",["UWA/Core","DS/WAFData/WAFData","DS/UIKIT/Mask","UWA/Class/View","DS/UIKIT/Tooltip","DS/3DXHighcharts/3DXHighcharts","DS/UIKIT/SuperModal","DS/PlatformManagement/Controls/PlatformNotify","DS/PlatformManagement/Utils","DS/i3DXCompassSupport/Collection/UsersInconsCollection","DS/i3DXCompassSupport/Collection/DeleteBOUsersInconsistencies","DS/i3DXCompassSupport/View/ProbesView"],function(e,t,s,o,n,a,i,r,l,c,h,m){"use strict";return o.extend({tagName:"div",className:"probes-view",graphView:null,probeUsersValue:null,tooltipRefresh:null,SelectedInAllSync:{nameUser:null,namePlatform:null},render:function(e){var t=0;e?(this.collection.at(0).get("data").map(function(e){t+=e.users.length}),this.probeUsersValue=!0):t=this.collection.at(0).get("count");return t>0?(this.container.setContent(this._createTemplate(t)),setTimeout(function(){this.graphView.reflow()}.bind(this),250)):this.container.setContent(this._viewNoResult(t)),this},refreshUsersInconsistencies:function(){return[{class:"refreshBOUI-zone",html:{tag:"span",class:"fonticon fonticon-sync",events:{mouseover:function(e){null!==this.tooltipRefresh&&(this.tooltipRefresh.destroy(),this.tooltipRefresh=null),this.tooltipRefresh=new n({position:"bottom",target:e.target,body:"Calculate the result of users inconsistencies probe. Warning : this action can take several minutes."}).show()}.bind(this),click:this._showRefreshConfirmation.bind(this)}}}]},_showRefreshConfirmation:function(){var o=new i({closable:!1}),n=function(){var e={method:"DELETE",type:"json",onComplete:function(e,t){new c([],{type:"text",headers:{Accept:"text/plain"}}).fetch({data:{json:!0},onComplete:function(e,t){var o;this.collection.set(JSON.parse(t)),o=this.render(!0),s.unmask(this.container),widget.body.getElementsByClassName("i3DXCompassSupport-probes-usersInconsistencies")[0].setContent(o)}.bind(this),onFailure:function(e,t){s.unmask(this.container.getChildren()[1]),r.alert("Impossible to refresh the users inconsistencies probe.")}.bind(this)})}.bind(this),onFailure:function(e,t){if(s.unmask(widget.body.getElementsByClassName("probe-synchro-title-children")[1]),r.alert("Impossible to delete the result of users inconsistencies probe."),4===t.code){var o=this.refreshView();widget.body.getElementsByClassName("i3DXCompassSupport-probes-usersInconsistencies")[0].setContent(o)}}.bind(this)},o=localStorage.getItem("addressCluster")+"/enovia/resources/AppsMngt/probe/BoProbeUsersInconsistencies";s.mask(widget.body.getElementsByClassName("probe-synchro-title-children")[1]),t.authenticatedRequest(o,e)}.bind(this);o.confirm("Are you sure you want to refresh the users Inconsistencies probe ? This operation can take many minutes.",e.i18n("Confirmation Refresh"),function(e){e&&n(),l.manageSupportOfMultiModal()})},_createTemplate:function(e){var t=this,s=[],o=this.collection.at(0).get("data").map(function(e){var o=[];return o.push(e.platform,e.users.length),s.push(o),t.bodyZone(e)});return[this._title(e),{tag:"div",class:"probe-synchro-title-children",html:[this.probeUsersValue?this.refreshUsersInconsistencies():null,this.diagram(s),o]}]},refreshView:function(){return this.probeUsersValue=!0,[this._title("In progress"),{tag:"div",class:"probe-synchro-title-children",html:[this.probeUsersValue?this.refreshUsersInconsistencies():null,{tag:"div",class:"probeUI-refresh",text:"The refresh of users inconsistencies probe is being refreshed. Please wait a few minutes. "}]}]},_viewNoResult:function(e){return[this._title(e),{tag:"div",class:"probe-synchro-title-children",html:[this.bodyZoneViewNoSynchKo(),this.probeUsersValue?this.refreshUsersInconsistencies():null]}]},_failView:function(){return[{class:"i3DXCompassSupport-probes",html:{class:"failView-zone",html:[{class:"failView-header",html:{class:"failView-header-small",html:[{class:"big-message",tag:"div",text:"Oops, "},{class:"small-message",tag:"div",text:"We are sorry ... "}]}},{class:"failView-body",html:{class:"failView-body-small",html:[{tag:"span",class:"fonticon fonticon-comment"},{class:"failView-view-icons",html:{tag:"span",class:"fonticon fonticon-role"}}]}},{class:"failView-footer",html:{class:"message-global-error",text:"An unexpected error has occured ... Server is unavailable. Please try later."}}]}}]},_title:function(t){var s=e.createElement("span",{class:"fonticon fonticon-down-dir",styles:{opacity:"1"}});return[{tag:"h5",class:this.probeUsersValue?"title UI":"title",html:[s,{tag:"span",text:this.probeUsersValue?e.i18n("Users Inconsistencies | "+t):e.i18n("Synchronization Ko | "+t)}],events:{click:function(){s.hasClassName("fonticon-down-dir")?(this.container.getElement(".probe-synchro-title-children").hide(),s.removeClassName("fonticon-down-dir").addClassName("fonticon-right-dir")):(this.container.getElement(".probe-synchro-title-children").show(),s.removeClassName("fonticon-right-dir").addClassName("fonticon-down-dir"))}.bind(this)}}]},diagram:function(t){var s=e.createElement("div",{class:"diagram-zone"});return this.graphView=new a.Chart({chart:{renderTo:s,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:this.probeUsersValue?"Users Inconsistencies Chart":"Synchro Ko Chart"},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},credits:{enabled:!1},exporting:{enabled:!1},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:[{name:"User",colorByPoint:!0,data:t}]}),s},bodyZoneViewNoSynchKo:function(){return[{class:"view-success",html:[{class:"view-success-top",html:[{tag:"span",class:"circle-background-green",html:{tag:"span",class:"fonticon fonticon-check"}}]},{class:"view-success-down",tag:"div",text:this.probeUsersValue?"No Users Inconsistencies":"No Synchronization KO"}]}]},bodyZone:function(e){var t=this,s={nameUser:"",namePlatform:""};return[{class:"probe-zone",html:[{class:"probe-top",html:[{tag:"div",class:"probe-top-info",html:[{tag:"span",class:"fonticon fonticon-monitor"},{tag:"div",class:"name-platform",text:e.platform,events:{click:function(e){s.namePlatform=e.target.getText(),this.dispatchEvent("clickOnPlatformAllSynckKo",s)}.bind(this)}},{tag:"span",class:"count-user-global",text:e.users.length}]},{tag:"div",class:"probe-top-triangle",html:{tag:"span",class:"triangle"}}]},{class:"probe-down",html:e.users.map(function(e){return t.viewUsers(e,s)})}]}]},doublon:function(e,t){return-1!==e.informations.duplicateUserRole.search(t.trim())?"doublon":"not-doublon"},lastRole:function(e,t){return e<t.split(",").length?" - ":""},viewUsers:function(t,s){var o,a=this,i=e.createElement("div",{class:"simple-circle2"}),r=0;return[{class:"user-zone",html:[{class:"username-zone",html:[{class:"user-circle-zone",html:[{tag:"div",class:"user-circle",html:{tag:"span",class:"fonticon fonticon-user"}}]},{tag:"div",class:"name-user",text:this.probeUsersValue?t.nameUser:t.id,events:{click:function(e){s.nameUser=e.target.getText(),this.dispatchEvent("clickOnPlatformAllSynckKo",s)}.bind(this)}}]},this.probeUsersValue?[{class:"message-zone",html:[{class:"msg-zone-container",text:t.informations.message},{tag:"div",class:"simple-circle"}]},t.informations.rolesForThisEmailAddress?{class:"role-zone",html:[{class:"role-zone-container",html:t.informations.rolesForThisEmailAddress.split(",").map(function(e){return r+=1,o=t.informations.rolesForThisEmailAddress,[{class:a.doublon(t,e),text:e+a.lastRole(r,o),events:{mouseover:function(e){e.target.hasClassName("doublon")&&new n({position:"bottom",target:e.target,body:"This role has a duplicate"}).show()}}}]})},i,new n({position:"bottom",target:i,body:"Role associated with this email adress"})]}:{}]:{}]}]}})}),define("DS/i3DXCompassSupport/View/SynchroUserKo",["UWA/Core","DS/UIKIT/Mask","UWA/Class/View","DS/UIKIT/Tooltip","DS/UIKIT/Input/Toggle","DS/i3DXCompassSupport/Collection/ProbesCollection","DS/i3DXCompassSupport/View/ProbesView","DS/W3DXComponents/Views/Layout/ScrollView","DS/i3DXCompassSupport/Collection/SynchroUserCollection"],function(e,t,s,o,n,a,i,r,l){"use strict";var c=window.location.origin.replace("ifwe","apps");return s.extend({tagName:"div",className:"synchro-user-view",tooltipFieldEmpty:null,tooltipInformationUser:null,tooltipInformationPlatform:null,tooltipInformationUser0:null,tooltipInformationPlatform0:null,adressCluster:null,render:function(){return this.container.setContent(this._createTemplate()),this},_createTemplate:function(){return[{class:"synchro-user-view-first-search",html:[this.removeTooltip(),this.headerZone(),this.firstsearchZone(),this.allSynchKo()]}]},allSynchKo:function(){var s=e.createElement("p",{text:"..."}),o=new a([],{type:"text",headers:{Accept:"text/plain"}}),n=new i({collection:o,events:{clickOnPlatformAllSynckKo:function(e){this.dispatchEvent("StartSearch",e)}.bind(this)}});t.mask(s),o.fetch({onComplete:function(e,o){var a={class:"i3DXCompassSupport-probes",html:n.render()};t.unmask(s),widget.body.getElement(".synchro-user-view").addContent(a)},onFailure:function(e,t){return 10}})},firstSearch:function(){return[{class:"synchro-user-view-search",html:[{class:"synchro-user-view-search-icon",html:[{tag:"span",class:"fonticon fonticon-search globalView",html:{tag:"p",class:"start-search",text:"Start a search"}}]},{class:"synchro-user-view-search-comment",html:{tag:"span",class:"text-comment-search",text:"Please fill in user and/or platform field to start the user synchronization."}}]}]},isFirstSearch:function(){return void 0===this.model},headerZone2:function(t){var s=e.createElement("div",{class:"text-blue-step1",text:"Fill in at least one field"}),n=e.createElement("div",{class:"text-blue-step2",text:this.userIsEmpty(t)?"Select the desired user":"Select the desired platform"});return[{class:"synchro-user-view-header",html:[{class:"header-step1",html:[{class:"header-step1-circle",html:[{tag:"div",class:"circle-step1 background-blue",html:this.isFirstSearch()?{tag:"div",class:"number-step1",text:"1"}:{tag:"span",class:"fonticon fonticon-check white"}}]},s,new o({position:"bottom",target:s,body:"Fill in at least one field"})]},{class:"header-line",html:{tag:"div",class:"line color-blue"}},{class:"header-step2",html:[{class:"header-step2-circle",html:[{tag:"div",class:"circle-step2 background-blue",html:this.isFirstSearch()?{tag:"div",class:"number-step2",text:"2"}:{tag:"span",class:"fonticon fonticon-check white"}}]},n,new o({position:"bottom",target:n,body:n.getText()})]}]}]},headerZone:function(){var t=e.createElement("div",{class:"text-blue-step1",text:"Fill in at least one field"}),s=e.createElement("div",{class:"text-blue-step2",text:"Select the desired user/platform"});return[{class:"synchro-user-view-header",html:[{class:"header-step1",html:[{class:"header-step1-circle",html:[{tag:"div",class:"circle-step1 background-blue",html:this.isFirstSearch()?{tag:"div",class:"number-step1",text:"1"}:{tag:"span",class:"fonticon fonticon-check white"}}]},t,new o({position:"bottom",target:t,body:"Fill in at least one field"})]},{class:"header-line",html:{tag:"div",class:"line color-blue"}},{class:"header-step2",html:[{class:"header-step2-circle",html:[{tag:"div",class:"circle-step2 background-blue",html:this.isFirstSearch()?{tag:"div",class:"number-step2",text:"2"}:{tag:"span",class:"fonticon fonticon-check white"}}]},s,new o({position:"bottom",target:s,body:s.getText()})]}]}]},searchZone:function(t,s){var n=e.createElement("span",{class:"fonticon fonticon-search",events:{click:this.search.bind(this)}}),a=this;return[{class:"search-body-zone-global",html:{class:"synchro-user-search-zone",html:[{html:[this.userIsEmpty(t)?{tag:"input",type:"text",class:"form-control search-user-platform",placeholder:"User name ...",events:{keyup:function(e){var t=e.target.getParent("div.synchro-user-search-zone").getElements("input.search-user-platform")[0],s=e.target.getParent("div.synchro-user-search-zone").getElements("input.search-user-platform")[1],o=e.target.getParent("div.synchro-user-search-zone").getElement("span.fonticon.fonticon-search");a.checkCharacters(e,t,s,o),13===e.keyCode&&this.searchAgainAfterError(o)}.bind(this),mouseover:function(e){null!==this.tooltipInformationUser0&&(this.tooltipInformationUser0.destroy(),this.tooltipInformationUser0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationUser0=new o({position:"bottom",target:e.target,body:'The user name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show())}.bind(this)}}:{tag:"input",type:"text",class:"form-control search-user-platform search-user-platform-selected",value:t,events:{keyup:function(e){var t=e.target.getParent("div.synchro-user-search-zone").getElements("input.search-user-platform")[0],s=e.target.getParent("div.synchro-user-search-zone").getElements("input.search-user-platform")[1],o=e.target.getParent("div.synchro-user-search-zone").getElement("span.fonticon.fonticon-search");a.checkCharacters(e,t,s,o),13===e.keyCode&&this.searchAgainAfterError(o)}.bind(this),mouseover:function(e){null!==this.tooltipInformationUser0&&(this.tooltipInformationUser0.destroy(),this.tooltipInformationUser0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationUser0=new o({position:"bottom",target:e.target,body:'The user name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show())}.bind(this)}}]},{tag:"span",class:"fonticon fonticon-user inputBis"},{tag:"div",class:"search-or",text:"OR"},{html:[this.platformIsEmpty(s)?{tag:"input",type:"text",class:"form-control search-user-platform",placeholder:"Platform name ...",events:{keyup:function(e){var t=e.target.getParent("div.synchro-user-search-zone").getElements("input.search-user-platform")[0],s=e.target.getParent("div.synchro-user-search-zone").getElements("input.search-user-platform")[1],o=e.target.getParent("div.synchro-user-search-zone").getElement("span.fonticon.fonticon-search");this.checkCharacters(e,t,s,o),13===e.keyCode&&this.searchAgainAfterError(o)}.bind(this),mouseover:function(e){null!==this.tooltipInformationPlatform0&&(this.tooltipInformationPlatform0.destroy(),this.tooltipInformationPlatform0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationPlatform0=new o({position:"bottom",target:e.target,body:'The platform name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show())}.bind(this)}}:{tag:"input",type:"text",class:"form-control search-user-platform search-user-platform-selected",value:s,events:{keyup:function(e){var t=e.target.getParent("div.synchro-user-search-zone").getElements("input.search-user-platform")[0],s=e.target.getParent("div.synchro-user-search-zone").getElements("input.search-user-platform")[1],o=e.target.getParent("div.synchro-user-search-zone").getElement("span.fonticon.fonticon-search");this.checkCharacters(e,t,s,o),13===e.keyCode&&this.searchAgainAfterError(o)}.bind(this),mouseover:function(e){null!==this.tooltipInformationPlatform0&&(this.tooltipInformationPlatform0.destroy(),this.tooltipInformationPlatform0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationPlatform0=new o({position:"bottom",target:e.target,body:'The platform name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show())}.bind(this)}}]},{tag:"span",class:"fonticon fonticon-monitor inputBis"},n]}}]},firstsearchZone:function(){var t=e.createElement("span",{class:"fonticon fonticon-search",events:{click:this.searchAgainAfterClick.bind(this)}});return[{class:"search-body-zone-global",html:{class:"synchro-user-search-zone",html:[{tag:"input",type:"text",class:"form-control search-user-platform",placeholder:"User name ...",events:{keyup:function(e){var t=this.container.getElements("input.search-user-platform")[0],s=this.container.getElements("input.search-user-platform")[1],o=this.getContent().getElement("span.fonticon.fonticon-search");this.checkCharacters(e,t,s,o),13===e.keyCode&&this.searchAgain()}.bind(this),mouseover:function(e){null!==this.tooltipInformationUser0&&(this.tooltipInformationUser0.destroy(),this.tooltipInformationUser0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationUser0=new o({position:"bottom",target:e.target,body:'The user name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show())}.bind(this)}},{tag:"span",class:"fonticon fonticon-user inputBis"},{tag:"div",class:"search-or",text:"OR"},{tag:"input",type:"text",class:"form-control search-user-platform",placeholder:"Platform name ...",events:{keyup:function(e){var t=this.container.getElements("input.search-user-platform")[0],s=this.container.getElements("input.search-user-platform")[1],o=this.getContent().getElement("span.fonticon.fonticon-search");this.checkCharacters(e,t,s,o),13===e.keyCode&&this.searchAgain()}.bind(this),mouseover:function(e){null!==this.tooltipInformationPlatform0&&(this.tooltipInformationPlatform0.destroy(),this.tooltipInformationPlatform0=null),e.target.hasClassName("input-not-validate")&&(this.tooltipInformationPlatform0=new o({position:"bottom",target:e.target,body:'The platform name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show())}.bind(this)}},{tag:"span",class:"fonticon fonticon-monitor inputBis"},t]}}]},userIsEmpty:function(e){return""===e},platformIsEmpty:function(e){return""===e},allInformationEnter:function(e,t){return""!==e&&""!==t},removeTooltip:function(){for(var e=widget.body.getParents()[2].getElements("div.tooltip.tooltip-root.in"),t=0;t<=e.length;t++)void 0!==e[t]&&e[t].remove()},_failGlobalView:function(e,t){return[this.removeTooltip(),{class:"synchro-user-view2",html:[this.searchZone(e,t),{class:"synchro-user-body-view-global-fail-view",html:[{class:"synchro-user-body-view-text",html:[{tag:"span",class:"text-big-sorry",text:"Oops,"},{tag:"span",class:"text-little-sorry",text:" We are sorry"}]},{class:"icon-global-fail-view",html:[{tag:"span",class:"fonticon fonticon-comment"},{class:"synchro-user-body-view-icons",html:{tag:"span",class:"fonticon fonticon-role"}}]},{class:"message-global-error",text:"An unexpected error has occured ... Server is unavailable. Please try later."}]}]}]},recuperationErrorCode:function(){var e=this.model.code;return 5===e?"Please enter another user name":2===e?"Please enter another platform name":"Please change user or platform name"},separatorLineCondition:function(e,t,s){return(""===t?this.model._attributes.data[0].users.length:this.model._attributes.data[0].platforms.length)>=2},recuperationServiceKo:function(t,s,n){var a=this,i=e.createElement("span",{class:"fonticon fonticon-monitor"}),r=e.createElement("span",{class:"fonticon fonticon-user"});return{class:"synchro-user-body-view-right-part",id:t.id,html:[{class:"user-zone",html:[this.allInformationEnter(s,n)?[i,new o({position:"bottom",target:i,body:n}),{tag:"div",class:"text-light-blue",text:n+" ("+t.platformDisplayName+")"}]:[this.platformIsEmpty(n)?[i,new o({position:"bottom",target:i,body:t.id}),{tag:"div",class:"text-light-blue",text:t.id+" ("+t.platformDisplayName+")"}]:[r,new o({position:"bottom",target:r,body:t.id}),{tag:"div",class:"text-light-blue",text:t.id}]]]},{class:"services-ko-zone",html:t.services.map(function(t){var s=e.createElement("div",{class:"message-error-zone",text:t.message});return[{class:"service-ko-box",html:[{class:"service-ko-header",html:[{tag:"span",class:"2"===t.syncBlocking?"circle-background circle-red":"circle-background circle-orange",html:{tag:"span",class:"2"===t.syncBlocking?"fonticon fonticon-lock":"fonticon fonticon-lock-open",events:{mouseover:function(e){e.target.hasClassName("fonticon-lock")?new o({position:"left",target:e.target,body:"This service blocks the general synchronization of the user's information near the different services of the 3DExperience platform."}).show():new o({position:"left",target:e.target,body:"This service does not block the general synchronization of the user's information on the 3DExperience platform."}).show()}.bind(this)}}}]},{class:"2"===t.syncBlocking?"service-ko-body border-square-color-red":"service-ko-body border-square-color-orange",html:[{class:"timing-zone",html:[{tag:"span",class:"fonticon fonticon-3ds-when"},{tag:"span",class:"text-timing",text:t.timing},{tag:"span",class:"text-timing ms",text:" ms"}]},s,new o({position:"right",target:s,body:t.message}),{class:"2"===t.syncBlocking?"name-service-zone synchrouser-background-color-red":"name-service-zone synchrouser-background-color-orange",html:[{tag:"img",class:"icon",src:a.iconsWithService(t)},{tag:"span",class:"name-of-service-ko",text:t.id}]}]}]}]})},{class:this.separatorLineCondition(t,s,n)?"separator-line":""}]}},isSuccess:function(){return 0===this.model.code},iconsWithService:function(e){var t;switch(e.id){case"RTC":case"TAGGER":case"COMMENT":t="3DExpPlatform_Default.png";break;case"DRIVE":t="X3DDRIV_AP_AppIcon.png";break;case"NETVIBES":t="iconNETVIBES.png";break;case"SWYM":t="X3DMCTY_AP_AppIcon.png";break;case"SPACE":t="X3DCSMA_AP_AppIcon.png";break;default:t="3DExpPlatform_Default.png"}return c+"/enovia/widget/images/MyApps/"+t},checkCharacters:function(e,t,s,n){var a=/[/!|^|$|(|)|[|\]|}|{|?|+|*|/|\\|"|§]/,i=t.value.trim(),r=s.value.trim(),l=e.target,c=e.target.value.trim(),h=e.key;null!==this.tooltipInformationUser&&(this.tooltipInformationUser.destroy(),this.tooltipInformationUser=null),null!==this.tooltipInformationPlatform&&(this.tooltipInformationPlatform.destroy(),this.tooltipInformationPlatform=null),"Enter"!==e.key&&(l===t?""===i?(t.placeholder="User name ...",t.removeClassName("search-user-platform-selected"),l.removeClassName("input-not-validate"),""===r||a.test(r)||(n.addClassName("fonticon-search-global-ok"),n.addClassName("dark-grey"))):(l.addClassName("search-user-platform-selected"),a.test(c)||a.test(h)?(l.addClassName("input-not-validate"),this.tooltipInformationUser=new o({position:"bottom",target:l,body:'The user name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show(),n.removeClassName("fonticon-search-global-ok"),n.removeClassName("dark-grey")):(a.test(r)||(n.addClassName("fonticon-search-global-ok"),n.addClassName("dark-grey")),l.removeClassName("input-not-validate"))):""===r?(s.placeholder="Platform name ...",s.removeClassName("search-user-platform-selected"),l.removeClassName("input-not-validate"),""===i||a.test(i)||(n.addClassName("fonticon-search-global-ok"),n.addClassName("dark-grey"))):(l.addClassName("search-user-platform-selected"),a.test(c)||a.test(h)?(l.addClassName("input-not-validate"),this.tooltipInformationPlatform=new o({position:"bottom",target:l,body:'The platform name can not contain specials characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, /, ", \\, §'}).show(),n.removeClassName("fonticon-search-global-ok"),n.removeClassName("dark-grey")):(a.test(i)||(n.addClassName("fonticon-search-global-ok"),n.addClassName("dark-grey")),l.addClassName("search-user-platform-selected"),l.removeClassName("input-not-validate")))),""===i&&""===r?(n.removeClassName("fonticon-search-global-ok"),n.removeClassName("dark-grey"),null!==this.tooltipFieldEmpty&&(this.tooltipFieldEmpty.destroy(),this.tooltipFieldEmpty=null),this.tooltipFieldEmpty=new o({position:"bottom",target:n,body:"You should define platform or user"}).show()):null!==this.tooltipFieldEmpty&&(this.tooltipFieldEmpty.destroy(),this.tooltipFieldEmpty=null)},headerZoneSuccessFail:function(t,s){var n=e.createElement("div",{class:this.isSuccess()?"text-blue-step1 green":"text-blue-step1 text-greyBis",text:"Fill in at least one field"}),a=e.createElement("div",{class:this.isSuccess()?"text-blue-step2 green":"text-blue-step2 text-greyBis",text:this.userIsEmpty(t)?"Select the desired user":"Select the desired platform"});return[{class:"synchro-user-view-header",html:[{class:"header-step1",html:[{class:"header-step1-circle",html:[{tag:"div",class:this.isSuccess()?"circle-step1 background-green":"circle-step1 background-grey",html:{tag:"div",class:"number-step1",text:"1"}}]},n,new o({position:"bottom",target:n,body:"Fill in at least one field"})]},{class:"header-line",html:{tag:"div",class:this.isSuccess()?"line color-green":"line color-grey"}},{class:"header-step2",html:[{class:"header-step2-circle",html:[{tag:"div",class:this.isSuccess()?"circle-step2 background-green":"circle-step2 background-grey",html:{tag:"div",class:"number-step2",text:"2"}}]},a,new o({position:"bottom",target:a,body:a.getText()})]}]}]},_failView:function(e,t){return[this.removeTooltip(),{class:"synchro-user-view2",html:[this.headerZoneSuccessFail(e,t),this.searchZone(e,t),{class:"synchro-user-body-view",html:[this.isSuccess()?{class:"synchro-user-body-view-header",html:[this.userIsEmpty(e)?{tag:"span",class:"fonticon fonticon-monitor global1"}:{tag:"span",class:"fonticon fonticon-user global1"},{tag:"span",class:"text-user-name",text:this.userIsEmpty(e)?t:e}]}:{},{class:"synchro-user-view-body-error-case",html:[this.isSuccess()?[{tag:"div",class:"no-problems-detected",text:"No problems detected"},{tag:"span",class:"circle-background-error-case-red background-color-green",html:{tag:"span",class:"fonticon fonticon-check successFonticon"}}]:[{tag:"div",class:"error-detected",text:"An error has occured "},{tag:"span",class:"circle-background-error-case-red",html:{tag:"span",class:"fonticon fonticon-wrong"}}],{html:this.isSuccess()?{tag:"p",class:"error-message-green",text:"All synchronizations are running properly."}:[{tag:"p",class:"error-message-red",text:this.model.message},{class:"advice-zone",html:[{tag:"span",class:"fonticon fonticon-info advice"},{tag:"span",class:"advice-text",text:this.recuperationErrorCode()}]}]}]}]}]}]},searchAgain:function(){null!==this.getContent().getElement("span.fonticon.fonticon-search.fonticon-search-global-ok")&&this.dispatchEvent("StartSearch")},searchAgainAfterError:function(e){e.hasClassName("fonticon fonticon-search fonticon-search-global-ok")&&this.dispatchEvent("SearchAgain")},searchAgainAfterClick:function(e){e.target.hasClassName("fonticon fonticon-search fonticon-search-global-ok")&&this.dispatchEvent("StartSearch")},keyJson:function(e,t){var s=this.model.get("data")[0].platforms,o=this.model.get("data")[0].users;return this.userIsEmpty(e)?o:s},zoomToggle:function(e){var t=e.target.getText();!0===e.target.getParent().lastChild.firstChild.checked&&document.getElementById(t).scrollIntoView()},displayInfoService:function(e,t,s,o){var n;if(!0===e.target.checked)n=this.recuperationServiceKo(t,s,o),null===document.getElementById(n.id)&&this.getElement("div.synchro-user-body-view-right-part-global").addContent(n);else{n=this.recuperationServiceKo(t,s,o);var a=document.getElementById(n.id);null!==a&&a.remove()}},render2:function(e,t,s){return this.container.setContent(this._createTemplate2(t,s)),this},search:function(e){e.target.hasClassName("fonticon fonticon-search fonticon-search-global-ok")&&this.dispatchEvent("SearchAgain")},_createTemplate2:function(e,t){var s=this;return[this.removeTooltip(),this.headerZone2(e),this.searchZone(e,t),{class:"synchro-user-body-view",html:[{class:"synchro-user-body-view-header",html:[{class:"fonticonanduserplatform",html:[this.allInformationEnter(e,t)?{html:[{tag:"span",class:"fonticon fonticon-user global"},{tag:"span",class:"text-user-name",text:"Service(s) Ko for the user "+this.model.get("data")[0].users}]}:[this.platformIsEmpty(t)?[{tag:"span",class:"fonticon fonticon-user global"},{tag:"span",class:"text-user-name",text:"Service(s) Ko for the user "+this.model.get("data")[0].users}]:[{tag:"span",class:"fonticon fonticon-monitor global"},{tag:"span",class:"text-platform-name",text:"Service(s) Ko for the platform "+this.model.get("data")[0].platforms+" ("+this.model.get("data")[0].platformDisplayName+")"}]]]}]},{class:"synchro-user-body-view-servicesko",html:[{class:"synchro-user-body-view-servicesko-left checked",html:[{class:"synchro-user-body-view-header2",html:[{class:"selectable-all-platforms-users",html:[{tag:"div",class:"text-toggle-all-search",text:this.userIsEmpty(e)?"All users |  "+this.model._attributes.data[0].users.length:"All platforms |  "+this.model._attributes.data[0].platforms.length},{tag:"div",class:"toggle toggle-switch toggle-sm",html:[{tag:"input",type:"checkbox",id:"select-all-platformsorusers",value:"allplatformsorusers",checked:!0,events:{click:function(e){var t,s=this.container.getElements("div.toggle.toggle-switch.toggle-switch-platform.toggle-sm").length,o=this.container.getElement("div.synchro-user-body-view-servicesko-left"),n=e.target.checked;if(o.toggleClassName("checked",n),!0===n)for(t=0;t<s;t++){var a=this.container.getElements("div.toggle.toggle-switch.toggle-switch-platform.toggle-sm")[t].getChildren()[0];!1===a.checked&&(a.checked=!0)}else for(t=0;t<s;t++){(a=this.container.getElements("div.toggle.toggle-switch.toggle-switch-platform.toggle-sm")[t].getChildren()[0]).checked=!1;var i=a.id,r=i.length,l=i.substring(14,r),c=document.getElementById(l);null!==c&&c.remove()}}.bind(this),change:function(o){this.keyJson(e,t).map(function(n){s.displayInfoService(o,n,e,t)})}.bind(this)}},{tag:"label",class:"control-label",for:"select-all-platformsorusers"}]}]}]},{class:"synchro-user-body-view-left-part",html:this.keyJson(e,t).map(function(n){return[{tag:"div",id:"container-scroll",class:"to scroll platform-or-user-selectable-unitary",html:[{tag:"div",class:"text-toggle-unitary-selectable",id:"text"+n.id,text:n.id,events:{click:function(e){s.zoomToggle(e)},mouseover:function(e){new o({position:"bottom",target:e.target,body:n.id}).show()}}},{tag:"div",class:"toggle toggle-switch toggle-switch-platform toggle-sm",html:[{tag:"input",type:"checkbox",id:"platformoruser"+n.id,value:"platform-or-user"+n.id,checked:!0,events:{change:function(o){s.displayInfoService(o,n,e,t);var a,i=s.container.getElement("div.synchro-user-body-view-servicesko-left"),r=s.container.getElement("input#select-all-platformsorusers"),l=s.container.getElements("div.toggle.toggle-switch.toggle-switch-platform.toggle-sm").length,c=0;if(!1===r.checked){var h=o.target.checked;i.toggleClassName("checked",h)}for(a=0;a<l;a++){!0===s.container.getElements("div.toggle.toggle-switch.toggle-switch-platform.toggle-sm")[a].getChildren()[0].checked&&(c+=1)}0===c&&i.removeClassName("checked")}}},{tag:"label",class:"control-label",for:"platformoruser"+n.id}]}]}]})}]},{tag:"div",class:"synchro-user-body-view-right-part-global",html:[this.keyJson(e,t).map(function(o){return[s.recuperationServiceKo(o,e,t)]})]}]}]}]}})}),define("DS/i3DXCompassSupport/View/StartupView",["UWA/Core","DS/WAFData/WAFData","DS/UIKIT/Mask","UWA/Class/View","DS/UIKIT/Tooltip","DS/i3DXCompassSupport/View/ProbesView"],function(e,t,s,o,n,a){"use strict";return o.extend({tagName:"div",className:"startup-view-probe",render:function(){var e=this.collection.at(0).get("countUserKo");return this.container.setContent(this._createTemplate(e)),this},_createTemplate:function(e){var t=this;return[this._title(e),{tag:"div",class:"list-user-startup",html:e>0?[this.collection.at(0).get("data").map(function(e){return t.displayUser(e)})]:this.NoStartupKO()}]},_title:function(t){return[{tag:"h5",class:"title",html:[e.createElement("span",{class:"fonticon fonticon-user-delete",styles:{opacity:"1"}}),{tag:"span",text:e.i18n("User with Startup KO today | "+t)}]}]},displayUser:function(e){var t=Object.keys(e).toString();return[{class:"user-zone-startup",html:[{tag:"div",class:"user-top",html:{tag:"div",class:"user-name-startup",text:t}},{tag:"div",class:"user-middle",html:[{tag:"div",class:"user-circle startup",html:{tag:"span",class:"fonticon fonticon-user startup"}}]},{tag:"div",class:"user-footer",html:[this.jsonByUser(e,t)]}]}]},jsonByUser:function(t,s){var o=[],a=this;return t[s].forEach(function(t){var s=e.createElement("div",{class:"message-error-startup",text:t.errorMessage}),i=[{tag:"div",class:"each-Json",html:[{tag:"span",class:a.startupOk(t)?"circle-background green":"circle-background red",html:{tag:"span",class:a.startupOk(t)?"fonticon fonticon-check startup":"fonticon fonticon-wrong startup"}},{class:"hour-startup",text:t.timestamp_hr},a.startupOk(t)?{}:[s,new n({position:"right",target:s,body:t.errorMessage})]]}];o.push(i)}),o},startupOk:function(e){return"ok"===e.startup},NoStartupKO:function(e){return[{class:"view-success",html:[{class:"view-success-top",html:[{tag:"span",class:"circle-background-green",html:{tag:"span",class:"fonticon fonticon-check"}}]},{class:"view-success-down",tag:"div",text:"No User with KO Startup"}]}]}})}),define("DS/i3DXCompassSupport/i3DXCompassSupport",["DS/WAFData/WAFData","UWA/Core","UWA/Class","UWA/Class/Model","DS/UIKIT/Mask","DS/UIKIT/Tooltip","DS/W3DXComponents/IdCard","DS/i3DXCompassSupport/View/PingServicesView","DS/i3DXCompassSupport/Collection/ServiceCollection","DS/i3DXCompassSupport/Collection/SynchroUserCollection","DS/W3DXComponents/Views/Layout/ScrollView","DS/i3DXCompassCore/RequestOptions","DS/i3DXCompassCore/Csrf","DS/i3DXCompassCore/Utils","DS/i3DXCompassSupport/View/SynchroUserKo","DS/i3DXCompassSupport/Collection/TicketCollection","DS/i3DXCompassSupport/View/TicketKoView","DS/i3DXCompassSupport/Collection/BroadcastCollection","DS/i3DXCompassSupport/View/BroadcastFinalView","DS/i3DXCompassSupport/View/ProbesView","DS/i3DXCompassSupport/Collection/UsersInconsCollection","DS/i3DXCompassSupport/Collection/FetchBOUsersInconsistencies","DS/i3DXCompassSupport/View/StartupView","DS/i3DXCompassSupport/Collection/StartupCollection","DS/i3DXCompassSupport/Collection/AllKoTicketCollection","DS/UIKIT/Input/Button","DS/i3DXCompassSupport/Collection/MembersCollection","DS/i3DXCompassSupport/Collection/RolesCollection","DS/i3DXCompassSupport/Collection/HistoryCollection","DS/i3DXCompassSupport/View/MembersView","DS/i3DXCompassSupport/View/PlatformsView","DS/i3DXCompassSupport/Collection/PlatformsCollection","DS/i3DXCompassSupport/Collection/PlatformsOptionsCollection","DS/i3DXCompassSupport/View/StatisticsView","css!DS/i3DXCompassSupport/i3DXCompassSupport","css!DS/PlatformManagementGettingStarted/PlatformManagementGettingStarted"],function(e,t,s,o,n,a,i,r,l,c,h,m,u,d,p,f,g,v,C,b,S,y,w,k,D,I,E,x,T,P,A,U,N,V){"use strict";return s.extend({cache:null,addressCluster:null,init:function(e){this.selectedFacet=0,this.widget=e.widget,this.invalidateCache(),this._initWidgetEvents()},invalidateCache:function(){this.cache=[]},_initWidgetEvents:function(){this.widget.addEvents({onLoad:this._onLoad.bind(this)})},buildIdCard:function(){var e=this;return new i({model:new o,actions:[],facets:function(){var s=[{text:t.i18n("Monitoring"),icon:"monitor",handler:function(){e.selectedFacet=0,e.getIdCardContent().setContent(e.getFacet(0))}}];return s.push({text:t.i18n("Users Synchronization"),icon:"users",handler:function(){e.selectedFacet=1;var t=e.getFacet(1);e.getIdCardContent().setContent(t)}}),s.push({text:t.i18n("Ticket"),icon:"user-key",handler:function(){e.selectedFacet=2,e.getIdCardContent().setContent(e.getFacet(2))}}),s.push({text:t.i18n("Broadcast"),icon:"user-alt",handler:function(){e.selectedFacet=3,e.getIdCardContent().setContent(e.getFacet(3))}}),s.push({text:t.i18n("Probes"),icon:"eye",handler:function(){e.selectedFacet=4,e.getIdCardContent().setContent(e.getFacet(4))}}),s.push({text:t.i18n("Startup"),icon:"route-start",handler:function(){e.selectedFacet=5,e.getIdCardContent().setContent(e.getFacet(5))}}),s.push({text:t.i18n("Members"),icon:"users",handler:function(){e.selectedFacet=6,e.getIdCardContent().setContent(e.getFacet(6))}}),s.push({text:t.i18n("Platforms"),icon:"presentation-slides",handler:function(){e.selectedFacet=7,e.getIdCardContent().setContent(e.getFacet(7))}}),s.push({text:t.i18n("Statistics"),icon:"chart-bar",handler:function(){e.selectedFacet=8,e.getIdCardContent().setContent(e.getFacet(8))}}),s}})},getIdCardContent:function(){return this.widget.body.getElement(".id-card-content")},_onLoad:function(){var e,s=this,o=this.widget.body,i=t.createElement("input",{type:"text",class:"form-control inputCluster",placeholder:"Cluster name ...",value:localStorage.addressCluster?localStorage.addressCluster:this.addressCluster}),r=this.buildIdCard(),l={class:"form-group input-group cluster",html:[i,{tag:"span",class:"input-group-btn",html:new I({value:"Save",className:"primary",events:{onClick:function(){var t=s.widget.getElement(".inputCluster").value.trim();"https://"!==t.substring(0,8)||/[!|^|$|(|)|[|\]|}|{|?|+|*|\\|"|§]/.test(t)?(i.setAttribute("style","border-color: red;"),e=new a({position:"bottom",target:i,body:"You must enter an url starting with 'https://' and excluding the following characters :  !, ^, $, (, ), [, ], }, {, ?, +, *, \", \\, §. "}).show()):(i.style.borderColor&&(i.removeAttribute("style"),e.remove()),localStorage.setItem("addressCluster",t),s.widget.dispatchEvent("onLoad"))}}})}]};d.setWidget(widget),d.setLang(widget.lang),u.getTokenCSRF(),n.unmask(o),this.invalidateCache(),this.widget.setBody(l),this.widget.body.addContent([r,{class:"id-card-content",html:""}]),r.selectFacet(this.selectedFacet),o.getElement(".id-card-content").setStyle("height","calc(100% - 95px)")},getFacet:function(s){var o,a,i,m,u,d,D,I,F,X,z,R=this.cache[s],W=this.widget.body,B=t.createElement("p",{text:"..."}),M=W.getParents()[2].getElements("div.tooltip")[0],_=W.getParents()[2].getElements("div.tooltip")[1];if(void 0!==M&&M.remove(),void 0!==_&&_.remove(),!t.is(R)){switch(s){case 0:o=new l,a=new r({collection:o,getScrollView:function(){return this.cache[0]}.bind(this)}),this.cache[0]={class:"i3DXCompassSupport-ping-service",html:[new h({useInfiniteScroll:!1,usePullToRefresh:!1,orientation:"vertical",view:a}).render()]},n.mask(B),this.widget.setTitle("Support App - ("+localStorage.getItem("addressCluster")+")"),W.getElement(".id-card-content").setContent(B),o.fetch({onComplete:function(){n.unmask(B),a.render()}.bind(this),onFailure:function(e,t){n.unmask(B),t.contains('return ResponseCode with value "401"')?this.widget.body.setContent(a._badAuthentification()):a._failView()}.bind(this)});break;case 1:i=new p({events:{StartSearch:function(e){var t,s,o=this,a=new c,i=this.getContent().getElements("input.form-control.search-user-platform");t=i[0].value.trim(),s=i[1].value.trim(),e&&(t=t||e.nameUser,s=s||e.namePlatform),a.fetch({data:{user:t,platform:s},onComplete:function(e,a){window.scrollTo(0,0),n.unmask(this.container),0===a.data.length?this.container.setContent(new p({model:a,events:{SearchAgain:function(){o.dispatchEvent("StartSearch")}}})._failView(t,s)):this.container.setContent(e._models.map(function(e){return new p({model:e,events:{SearchAgain:function(){o.dispatchEvent("StartSearch")}}}).render2(e,t,s)}))}.bind(this),onFailure:function(e,a){n.unmask(this.container),void 0===a.code?this.container.setContent(new p({model:a,events:{SearchAgain:function(){o.dispatchEvent("StartSearch")}}})._failGlobalView(t,s)):this.container.setContent(new p({model:a,events:{SearchAgain:function(){o.dispatchEvent("StartSearch")}}})._failView(t,s))}.bind(this)}),n.mask(this.container)}}});var O={class:"i3DXCompassSupport-synchro-user",html:new h({useInfiniteScroll:!1,usePullToRefresh:!1,orientation:"vertical",view:i}).render()};return n.mask(B),this.widget.setTitle("Support App - ("+localStorage.getItem("addressCluster")+")"),W.getElement(".id-card-content").setContent(B),n.unmask(B),O;case 2:m=new g({events:{StartSearchTicket:function(e){var t=this,s=new f,o=e||this.getContent().getElements("input")[0].value.trim();s.fetch({data:{ottOrPlatform:o},onComplete:function(e,s){n.unmask(this.container),0===s.locked?this.container.setContent(new g({model:s,events:{SearchAgainTicket:function(e){t.dispatchEvent("StartSearchTicket")}}})._successFailView(o)):this.container.setContent(new g({model:s,events:{SearchAgainTicket:function(e){t.dispatchEvent("StartSearchTicket")}}})._createTemplateBis(o))}.bind(this),onFailure:function(e,s){n.unmask(this.container),void 0===s.code?this.container.setContent(new g({model:s,events:{SearchAgainTicket:function(e){t.dispatchEvent("StartSearchTicket")}}})._failCallWs(o)):this.container.setContent(new g({model:s,events:{SearchAgainTicket:function(e){t.dispatchEvent("StartSearchTicket")}}})._successFailView(o))}.bind(this)}),n.mask(this.container)}}}).render(!0);var K={class:"i3DXCompassSupport-synchro-ticket",html:new h({useInfiniteScroll:!1,usePullToRefresh:!1,orientation:"vertical",view:m}).render()};return n.mask(B),this.widget.setTitle("Support App - ("+localStorage.getItem("addressCluster")+")"),W.getElement(".id-card-content").setContent(B),n.unmask(W),K;case 3:u=new C({events:{StartBroadcast:function(){var t=this,s=this.getContent().getElements("input")[0].value.trim(),o=this.getContent().getElements("input")[1].value.trim(),a=(new v,function(e,a){n.unmask(this.container);var i=new Date(e.date);e.date=i.toDateString()+" "+i.toTimeString().substring(0,8),this.container.setContent(new C({model:e,events:{StartAgainBroadcast:function(e){t.dispatchEvent("StartBroadcast")}}})._createTemplateBis(s,o))}.bind(this)),i=function(e,a){n.unmask(this.container),null===a?this.container.setContent(new C({model:a,events:{StartAgainBroadcast:function(e){t.dispatchEvent("StartBroadcast")}}})._failCallWs(s,o)):this.container.setContent(new C({model:a,events:{StartAgainBroadcast:function(e){t.dispatchEvent("StartBroadcast")}}})._failView(s,o))}.bind(this),r={method:"POST",type:"json",data:{platform:s,user:o},onComplete:a,onFailure:i},l=localStorage.getItem("addressCluster")+"/enovia/resources/AppsMngtSupport/status/v1/broadcast?";n.mask(this.container),e.authenticatedRequest(l,r)}}}).render();var Z={class:"i3DXCompassSupport-broadcast",html:new h({useInfiniteScroll:!1,usePullToRefresh:!1,orientation:"vertical",view:u}).render()};return n.mask(B),this.widget.setTitle("Support App - ("+localStorage.getItem("addressCluster")+")"),W.getElement(".id-card-content").setContent(B),n.unmask(W),Z;case 4:d=new y,D=new b({collection:d}),n.mask(B),this.widget.setTitle("Support App - ("+localStorage.getItem("addressCluster")+")"),W.getElement(".id-card-content").setContent(B);new h({useInfiniteScroll:!1,usePullToRefresh:!1,orientation:"vertical",view:D});d.fetch({onComplete:function(e,t){var s;s="Refresh in progress"===t.message?{class:"i3DXCompassSupport-probes-usersInconsistencies",html:D.refreshView()}:{class:"i3DXCompassSupport-probes-usersInconsistencies",html:D.render(!0)},W.getElement(".id-card-content").setContent(s),n.unmask(B)},onFailure:function(e,t){if(1===t.code){var s=new S([],{type:"text",headers:{Accept:"text/plain"}}),o=new b({collection:s});s.fetch({data:{json:!0},onComplete:function(e,t){var s={class:"i3DXCompassSupport-probes-usersInconsistencies",html:o.render(!0)};n.unmask(B),widget.body.getElementsByClassName("failView-zone")[0]||widget.body.getElement(".probes-view").addContent(s)},onFailure:function(e,t){n.unmask(B),widget.body.getElement(".id-card-content").addContent((void 0)._failView())}})}n.unmask(B)}});break;case 5:o=new k,I=new w({collection:o}),n.mask(B),this.widget.setTitle("Support App - ("+localStorage.getItem("addressCluster")+")"),W.getElement(".id-card-content").setContent(B);var $=new h({useInfiniteScroll:!1,usePullToRefresh:!1,orientation:"vertical",view:I}),q=this;o.fetch({onComplete:function(e,t){var s={class:"i3DXCompassSupport-startup",html:$.render()};n.unmask(B),console.log(widget.body.getElement(".id-card-content")),widget.body.getElement(".id-card-content").setContent(s),console.log(widget.body.getElement(".id-card-content"))},onFailure:function(e,t){5===q.selectedFacet&&(n.unmask(B),widget.body.getElement(".id-card-content").setContent(new b({})._failView()))}});break;case 6:o=new E;var L=new x,H=new T;return F=new P({collection:o,rolesCollection:L,historyCollection:H}),{class:"i3DXCompassSupport-members",html:new h({useInfiniteScroll:!1,usePullToRefresh:!1,orientation:"vertical",view:F}).render()};case 7:o=new U;var j=new N;return X=new A({collection:o,optionsCollection:j}),{class:"i3DXCompassSupport-platforms",html:new h({useInfiniteScroll:!1,usePullToRefresh:!1,orientation:"vertical",view:X}).render()};case 8:return z=new V,{class:"i3DXCompassSupport-stats getting-started",html:new h({useInfiniteScroll:!1,usePullToRefresh:!1,orientation:"vertical",view:z}).render()}}R=this.cache[s]}return R}})});