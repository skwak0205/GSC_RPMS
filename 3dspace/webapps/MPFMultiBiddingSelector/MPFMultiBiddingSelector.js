define("DS/MPFMultiBiddingSelector/CartSlot",["UWA/Class/View","DS/MPFView/EmptyView"],function(t,e){"use strict";return t.extend({className:"mpf-cart-slot",setup:function(t){this.tile=t.tile},render:function(){return this.container.setContent(this.tile.render()),this},destroy:function(){this._parent()}})}),define("DS/MPFMultiBiddingSelector/CartTile",["UWA/Core","UWA/Class/View","DS/MPFShopModel/ShopFactory","DS/MPFView/InitialsDot"],function(t,e,s,i){"use strict";return e.extend({className:"mpf-cart-tile",setup:function(t){this.cart=t.cart,this.shopFactory=t.shopFactory,this.shopLogo=this._createShopLogo(),this.shopName=this._createShopName(),this.removeButton=this._createRemoveButton()},render:function(){return this.container.setContent([this.shopLogo,this.shopName,this.removeButton]),this},fetchShopLogo:function(){var t;(t=this.shopFactory.createModel(s.Types.SHOP)).set("id",this.cart.getShopId()),t.fetchPromise().then(this._updateShopLogoImg.bind(this))},destroy:function(){this.cart=null,this._parent()},remove:function(){this.dispatchEvent("removeCart",{cart:this.cart})},_createShopLogo:function(){var e;return e=new i({title:this.cart.getShopName()}),t.createElement("div",{class:"mpf-shop-logo",html:[e]})},_updateShopLogoImg:function(e){var s,i;(i=e.getLogo())&&(s=t.createElement("img",{class:"mpf-shop-logo-img",src:i}),this.shopLogo.setContent(s))},_createShopName:function(){return t.createElement("p",{class:"mpf-shop-name",text:this.cart.getShopName()})},_createRemoveButton:function(){return t.createElement("div",{class:"mpf-shop-remove fonticon fonticon-close",events:{click:this.remove.bind(this)}})}})}),define("DS/MPFMultiBiddingSelector/MultiBiddingCommands",["UWA/Class/View","DS/UIKIT/Input/Button","i18n!DS/MPFMultiBiddingSelector/assets/nls/MultiBiddingSelector"],function(t,e,s){"use strict";return t.extend({className:"mpf-multi-bidding-commands",setup:function(t){this.nextButton=this._createNextButton()},render:function(){return this.container.setContent(this.nextButton),this},destroy:function(){this._parent()},onNext:function(){this.dispatchEvent("mpfNext")},_createNextButton:function(){return new e({className:"primary",icon:"chevron-right right",value:s.get("next"),events:{onClick:this.onNext.bind(this)}})}})}),define("DS/MPFMultiBiddingSelector/MultiBiddingCounter",["UWA/Core","UWA/Class/View","i18n!DS/MPFMultiBiddingSelector/assets/nls/MultiBiddingSelector"],function(t,e,s){"use strict";return e.extend({className:"mpf-multi-bidding-counter",setup:function(t){this.carts=t.carts,this.capacity=t.capacity,this.counter=this._createCounter(),this.listenTo(this.carts,"onAdd",this.update.bind(this)),this.listenTo(this.carts,"onRemove",this.update.bind(this))},render:function(){return this.container.setContent(this.counter),this},destroy:function(){this.stopListening(this.carts),this.carts=null,this._parent()},update:function(){this.counter.getElement(".mpf-number").setText(this.carts.length)},_createCounter:function(){return t.createElement("p",{class:"mpf-counter",html:[{tag:"span",text:s.get("selectedLabs"),class:"mpf-label"},{tag:"span",text:this.carts.length,class:"mpf-number"},{tag:"span",text:"/",class:"mpf-separator"},{tag:"span",text:this.capacity,class:"mpf-total"}]})}})}),define("DS/MPFMultiBiddingSelector/ShopTile",["UWA/Core","UWA/Class/View","DS/MPFView/InitialsDot"],function(t,e,s){"use strict";return e.extend({className:"mpf-shop-tile mpf-cart-tile",setup:function(t){this.shop=t.shop,this.shopLogo=this._createShopLogo(),this.shopName=this._createShopName(),this.removeButton=this._createRemoveButton()},render:function(){return this.container.setContent([this.shopLogo,this.shopName,this.removeButton]),this},remove:function(){this.dispatchEvent("removeTile",{shop:this.shop})},destroy:function(){this._parent()},_createShopName:function(){return t.createElement("p",{class:"mpf-shop-name",text:this.shop.getName()})},_createShopLogo:function(){var e,i;return e=(i=this.shop.getLogo())?t.createElement("img",{class:"mpf-shop-logo-img",src:i}):new s({title:this.shop.getName()}),t.createElement("div",{class:"mpf-shop-logo",html:[e]})},_createRemoveButton:function(){return t.createElement("div",{class:"mpf-shop-remove fonticon fonticon-close",events:{click:this.remove.bind(this)}})}})}),define("DS/MPFMultiBiddingSelector/CartSlots",["UWA/Core","UWA/Class/View","DS/MPFMultiBiddingSelector/CartSlot","DS/MPFMultiBiddingSelector/CartTile","DS/MPFView/EmptyView"],function(t,e,s,i,n){"use strict";return e.extend({className:"mpf-cart-slots",setup:function(t){this.capacity=t.capacity,this.carts=t.carts,this.shopFactory=t.shopFactory,this.slots=this._createSlots(),this.listenTo(this.carts,"onAdd",this.onAddCart.bind(this))},render:function(){var t;return t=this.slots.map(function(t){return t.render()}),this.container.setContent(t),this},destroy:function(){this.stopListening(this.carts),this.carts=null,this._parent()},onAddCart:function(){this.slots.forEach(function(t){this.stopListening(t)},this),this.slots=this._createSlots(),this.render(),this.slots[this.carts.size()-1].tile.fetchShopLogo()},onRemoveCart:function(t){this.carts.remove(t.cart),this.slots.forEach(function(t){this.stopListening(t)},this),this.slots=this._createSlots(),this.carts.forEach(function(t,e){this.slots[e].tile.fetchShopLogo()},this),this.render()},_createSlots:function(){var t,e,o,r=[];for(o=0;o<this.capacity;o++)(t=this.carts.at(o))?(e=new i({cart:t,shopFactory:this.shopFactory}),this.listenTo(e,"removeCart",this.onRemoveCart.bind(this))):e=new n,r.push(new s({tile:e}));return r}})}),define("DS/MPFMultiBiddingSelector/MultiBiddingSelector",["UWA/Class/View","DS/MPFMultiBiddingSelector/MultiBiddingCounter","DS/MPFMultiBiddingSelector/CartSlots","DS/MPFMultiBiddingSelector/MultiBiddingCommands","DS/MPFCartModel/CartCollection","DS/MPFCartModel/CartModel","DS/MPFServices/ObjectService","DS/MPFDataProxy/NoDataProxy","css!DS/MPFMultiBiddingSelector/MPFMultiBiddingSelector.css"],function(t,e,s,i,n,o,r,c){"use strict";return t.extend({className:"mpf-multi-bidding-selector",setup:function(t){this.shopFactory=t.shopFactory,this.carts=this._createCartCollection(),this.capacity=t.capacity||3,this.counter=this._createCounter(),this.cartSlots=this._createCartSlots(),this.commands=this._createCommands(),this.listenTo(this.commands,"mpfNext",this.onNext.bind(this))},render:function(){return this.container.setContent([this.counter.render(),this.cartSlots.render(),this.commands.render()]),this},addCart:function(t){var e;return r.requiredOfPrototype(t,o,"The cart parameter muste be a CartModel"),(e=this.carts.length<this.capacity)&&(this.carts.push(t),this.render()),e},onNext:function(){this.dispatchEvent("mpfNext",{carts:this.carts.toArray()})},destroy:function(){this.stopListening(this.commands),this.counter.destroy(),this.cartSlots.destroy(),this._parent()},_createCartCollection:function(){return new n([],{dataProxy:c.getInstance()})},_createCounter:function(){return new e({capacity:this.capacity,carts:this.carts})},_createCartSlots:function(){return new s({capacity:this.capacity,carts:this.carts,shopFactory:this.shopFactory})},_createCommands:function(){return new i}})}),define("DS/MPFMultiBiddingSelector/ShopSlots",["UWA/Class/View","DS/MPFMultiBiddingSelector/ShopTile","DS/MPFMultiBiddingSelector/CartSlot","DS/MPFView/EmptyView"],function(t,e,s,i){"use strict";return t.extend({className:"mpf-shop-slots mpf-cart-slots",setup:function(t){this.capacity=t.capacity,this.shops=t.shops,this.slots=[]},render:function(){var t;return this._createSlots(),t=this.slots.map(function(t){return t.render()}),this.container.setContent(t),this},onRemoveTile:function(t){this.shops.remove(t.shop),this.render()},destroy:function(){this._parent()},_createSlots:function(){this.slots.forEach(function(t){this.stopListening(t),t.destroy()},this),this.slots=[],this.slots=this.shops.map(function(t){var i;return i=new e({shop:t}),this.listenTo(i,"removeTile",this.onRemoveTile.bind(this)),new s({tile:i})},this),this.slots.length<this.capacity&&this.slots.push(new s({tile:new i}))}})}),define("DS/MPFMultiBiddingSelector/MultiBiddingShopSelector",["UWA/Class/View","DS/MPFShopModel/ShopCollection","DS/MPFShopModel/ShopFactory","DS/MPFMultiBiddingSelector/MultiBiddingCounter","DS/MPFMultiBiddingSelector/ShopSlots","DS/MPFMultiBiddingSelector/MultiBiddingCommands","DS/MPFDataProxy/NoDataProxy","css!DS/MPFMultiBiddingSelector/MPFMultiBiddingSelector.css"],function(t,e,s,i,n,o,r){"use strict";var c,h={NEXT:"mpfNext",REMOVE:"mpfRemove"};return(c=t.extend({className:"mpf-multi-bidding-shop-selector mpf-multi-bidding-selector mpf-collapsed",setup:function(t){this.shopFactory=t.shopFactory,this.shops=this._createShopCollection(),this.capacity=t.capacity||3,this.counter=this._createCounter(),this.shopSlots=this._createShopSlots(),this.commands=this._createCommands(),this._handleCollapsedView(),this.listenTo(this.commands,"mpfNext",this.onNext.bind(this)),this.listenTo(this.shops,"onRemove",this.onRemove.bind(this))},render:function(){return this.container.setContent([this.counter.render(),this.shopSlots.render(),this.commands.render()]),this},addShopId:function(t){var e;this.shops.length<this.capacity&&((e=this.shopFactory.createModel(s.Types.SHOP)).set("id",t),this.shops.add(e),e.fetchPromise({expand:[]}).then(this.render.bind(this)))},removeShopId:function(t){this.shops.remove(t)&&this.render()},onNext:function(){this.dispatchEvent(h.NEXT,{shops:this.shops.toArray()})},onRemove:function(t){this.dispatchEvent(h.REMOVE,{shopId:t.id})},destroy:function(){this.stopListening(this.commands),this.shops=null,this.counter.destroy(),this.shopSlots.destroy(),this.commands.destroy(),this._parent()},_createShopCollection:function(){return new e([],{dataProxy:r.getInstance()})},_createCounter:function(){return new i({capacity:this.capacity,carts:this.shops})},_createShopSlots:function(){return new n({capacity:this.capacity,shops:this.shops})},_createCommands:function(){return new o},_handleCollapsedView:function(){this.counter.delegateDOMEvents({click:this._toggleCollapsedView.bind(this)})},_toggleCollapsedView:function(){this.container.toggleClassName("mpf-collapsed")}})).Events=Object.freeze(h),c});