define("DS/TopFrame/Frame",["UWA/Core","UWA/Element","UWA/Class/Promise","UWA/Controls/Abstract","UWA/Controls/Drag","UWA/Utils/Client","UWA/String"],function(e,t,n,i,a,o,s){"use strict";var r="left",l="right",c="open",p="close";function d(e,t){var n,i,a,o,s=0;function r(){s=new Date,a=null,o=e.apply(n,i)}return function(){var l=new Date,c=t-(l-s);return n=this,i=arguments,c<=0?(clearTimeout(a),a=null,s=l,o=e.apply(n,i)):a||(a=setTimeout(r,c)),o}}function u(e){e&&Array.prototype.slice.call(arguments,1).forEach(function(t){t&&e.removeClassName(t)})}return i.extend({name:"frame",MAIN_PANEL:"main",LEFT_PANEL:r,RIGHT_PANEL:l,DEFAULT_PANEL_MODE:"DEFAULT",FULL_WIDTH_PANEL_MODE:"FULL_WIDTH",OPEN_PANEL_ACTION:c,CLOSE_PANEL_ACTION:p,_ANIM_TIME:300,_HANDLE_WIDTH:14,_MODES:{SINGLE:"singlePanel"},_UI_BREAKS:{SMALL:639,MEDIUM:1104,LARGE:1920},_dragControls:null,_content:null,_shownTags:null,_shownPanels:null,_isAnimating:!1,_sizeCache:null,_panels:null,_panelsDefault:{main:{mode:"DEFAULT",targetMode:""},left:{mode:"DEFAULT",targetMode:""},right:{mode:"DEFAULT",targetMode:""}},defaultOptions:{className:"",mode:"singlepanel",resizablePanels:{},swipeToClose:!1,pushMainContent:{left:!0,right:!0},pushBeforeResize:{left:!0,right:!0},smallScreenMainContent:null,useWindowResize:!0,useDragOverlay:!1,smallScreenPanelPriority:l,panelContentMinSize:300,mainContentMinSize:300},init:function(n,i){if(i||(i={}),!n)throw new Error("Missing content map.");this._parent(i),i=this.options,this._shownPanels={},this._shownTags={left:null,right:null},this._panels=e.clone(this._panelsDefault),this.elements=this._getFrame(e.extend(this.options,{name:this.name})),this._dragControls=this._initDrag(this.elements,{start:this._onDragStart,move:this._onDragMove,stop:this._onDragStop},i),this._content=this._addContent(n,this.elements),this._onResize=d(this._onResize.bind(this),350),i.renderTo&&(t.inject.call(this.elements.container,i.renderTo),this.elements.container=i.renderTo,this._initEvents(),this._onResize())},_getBreakpoint:function(e){var t=this._UI_BREAKS;return e.width<=t.SMALL?t.SMALL:e.width<=t.MEDIUM?t.MEDIUM:t.LARGE},_hasLayoutChange:function(e,t){var n=this._UI_BREAKS;return!(t<n.LARGE&&e<n.LARGE&&t>n.MEDIUM&&e>n.MEDIUM)},_onResize:function(){var n,i,a,o,s=this._sizeCache,d=t.getSize.call(this.elements.container),u=this._getBreakpoint(d),m=this.isPanelOpen(r),h=this.isPanelOpen(l),g=m&&this.isPanelFitted(r),f=h&&this.isPanelFitted(l),_=u<=this._UI_BREAKS.SMALL;s?d.width!==s.width&&(this._sizeCache=d,(this._hasLayoutChange(u,this._getBreakpoint(s))||g||f)&&(a={animate:!1,force:!0},_&&!this.options.addinMode?(o=(i=(n=this.options.smallScreenPanelPriority)===l?r:l)===l?h:m,(n===l?h:m)?(o&&this._doPanelAction(p,i,a),this._doPanelAction(c,n,a)):o&&this._doPanelAction(c,i,a)):(m&&this._doPanelAction(c,r,e.merge({fit:g},a)),h&&this._doPanelAction(c,l,e.merge({fit:f},a))))):this._sizeCache=d,u>this._UI_BREAKS.SMALL?(this._dragControls.rightPanel&&this._dragControls.rightPanel.detach(),this._dragControls.leftPanel&&this._dragControls.leftPanel.detach()):(this._dragControls.rightPanel&&this._dragControls.rightPanel.attach(),this._dragControls.leftPanel&&this._dragControls.leftPanel.attach())},_initDrag:function(e,t,n){n||(n={});var i=n.resizablePanels,s=Object.create(null),r=a.extend(t),l=o.Features.touchEvents&&!o.Features.pointerEvents,c=l?30:0;return i.left&&(s.left=new r({snap:c,element:e.leftHandle}),s.left._column="left",s.left._frame=this,s.left._dragInfo={},s.left._type="handle"),i.right&&(s.right=new r({snap:c,element:e.rightHandle,type:"handle"}),s.right._column="right",s.right._frame=this,s.right._dragInfo={},s.right._type="handle"),l&&n.swipeToClose&&(s.leftPanel=new r({snap:10,element:e.leftPanel}),s.rightPanel=new r({snap:10,element:e.rightPanel}),s.leftPanel._column="left",s.rightPanel._column="right",s.leftPanel._frame=s.rightPanel._frame=this,s.leftPanel._type=s.rightPanel._type="panel",s.leftPanel._dragInfo={},s.rightPanel._dragInfo={}),s},_getFrame:function(t){t||(t={});var n,i={},a=e.createElement,o=t.resizablePanels;return i.container=e.is(t.renderTo,"element")?document.createDocumentFragment():a("div",{class:t.name+(t.className?" "+t.className:"")}),i.leftPanel=a("div",{class:"column left"}).inject(i.container),i.main=a("div",{class:"main"}).inject(i.container),i.rightPanel=a("div",{class:"column right"}).inject(i.container),i.leftPanelCtn=a("div",{class:"column-ctn"}).inject(i.leftPanel),i.rightPanelCtn=a("div",{class:"column-ctn"}).inject(i.rightPanel),n='<span class="fonticon fonticon-menu-dot"></span>',o.left&&(i.leftHandle=a("div",{class:"handle",html:n}).inject(i.leftPanelCtn,"before"),i.leftPanel.addClassName("resizable")),o.right&&(i.rightHandle=a("div",{class:"handle",html:n}).inject(i.rightPanelCtn,"before"),i.rightPanel.addClassName("resizable")),i},_onDragStart:function(e){var n,i,a,o=this._frame,s=o.elements,c=s[this._column+"Panel"],p=t.getSize.call(s.container).width,u=this._column,m=u===r?l:r;"panel"===this._type?(i=p,n=-p):(i=u===r?0:p-o._HANDLE_WIDTH,n=u===r?o._HANDLE_WIDTH-p:0,o.isPanelOpen(m)&&(m===r?n+=o.elements.leftPanelCtn.getSize().width:n-=o.elements.rightPanelCtn.getSize().width),a=d(o._resizePanelContent.bind(o,u,s[u+"PanelCtn"],c,s.container),1e3)),this._dragInfo={draggedColumn:c,oppositeColumn:m,startPos:e,containerWidth:p,containerOffset:t.getPosition.call(s.container,document.body),minPosX:i,maxPosX:n,throttledResizeContent:a,draggedElXOffset:"panel"===this._type?0:t.getPosition.call(c,s.container).x}},_onDragMove:function(t,n){var i=this._dragInfo,a=this._frame,o=a.elements,s=i.draggedColumn,r=n.x+i.draggedElXOffset,l=i.minPosX,c=i.maxPosX,p=r>=l?Math.min(r,l):Math.max(r,c);a.options.useDragOverlay&&!this.overlay&&(this.overlay=e.createElement("div",{class:"frame-overlay"}),this.overlay.inject(o.container)),i.hasDraggingClass||(s.addClassName("dragging"),i.hasDraggingClass=!0),i.endPos=t,"panel"===this._type?a._setElementStyles(a.options.smallScreenMainContent,{left:p},{animate:!1}):(i.throttledResizeContent(),a._setElementStyles(s,{left:p,transform:"translateX(0)"},{animate:!1}))},_onDragStop:function(){var e,t,n,i=this._frame,a=this._dragInfo,o=this._column,s=a.draggedColumn,d=.3,m=.8;"panel"===this._type?o===r?a.startPos.x>a.endPos.x?i._doPanelAction(p,r):i._doPanelAction(c,r,{force:!0}):a.startPos.x>a.endPos.x?i._doPanelAction(c,l,{force:!0}):i._doPanelAction(p,l):(e=a.endPos.x/a.containerWidth,o===r?(i.isPanelOpen(a.oppositeColumn)&&(m=.6),t=e>=m?"right":e<=d?"left":void 0):(i.isPanelOpen(a.oppositeColumn)&&(d=.4),t=e<=d?"left":e>=m?"right":void 0),n=i.isPanelOpen(a.oppositeColumn)?{fit:!0}:{maximize:!0},"left"===t?(o===r?i._doPanelAction(p,r):i._doPanelAction(c,l,n)).then(function(){n.fit?a.throttledResizeContent():i._setElementStyles(i.elements[o+"PanelCtn"],{width:""})}):"right"===t?(o===r?i._doPanelAction(c,r,n):i._doPanelAction(p,l)).then(function(){n.fit?a.throttledResizeContent():i._setElementStyles(i.elements[o+"PanelCtn"],{width:""})}):(u(s,"maximized","fitted"),i.dispatchEvent("onPanelResize",{panel:o,tag:i._shownTags[o],position:"resized"}))),this.overlay&&(this.overlay.destroy(),this.overlay=null),s.removeClassName("dragging"),this._dragInfo={}},_resizePanelContent:function(n,i,a,o,s){s||(s={});var l=this,c=l.elements,p=l.options;function d(){var e=t.getPosition.call(a,o),p=t.getSize.call(o),d=t.getPosition.call(i,o),u=Math.floor(n===r?p.width-Math.abs(e.x):p.width-d.x),m={};l._setElementStyles(i,{width:Math.max(u,s.panelContentMinSize)},{useAnimationFrame:!1}),s.pushMainContent&&s.pushMainContent[n]&&(m["margin-"+n]=n===r?Math.max(u,s.mainContentMinSize):Math.min(p.width-s.mainContentMinSize,u),l._setElementStyles(c.main,m,{useAnimationFrame:!1}))}e.merge(s,{pushMainContent:p.pushMainContent,panelContentMinSize:p.panelContentMinSize,mainContentMinSize:p.mainContentMinSize}),window.requestAnimationFrame?window.requestAnimationFrame(d):d()},_addContent:function(n,i){var a=Object.create(null);function o(e,n){var i=Object.create(null),a=document.createDocumentFragment();for(var o in e)e.hasOwnProperty(o)&&(i[o]=s(e[o]),t.grab.call(a,i[o]));return n.grab(a),i}function s(n){var i=document.createDocumentFragment();return e.is(n,"element")?n:t.setContent.call(i,n)}return n.left&&(a.left=o(n.left,i.leftPanelCtn)),n.right&&(a.right=o(n.right,i.rightPanelCtn)),n.main&&(a.main=o(n.main,i.main)),a},extendPanelContent:function(e,t,n){var i,a={},o={},s=e+"PanelCtn";a[e]={},a[e][t]=n,o[s]=this.elements[s],i=this._addContent(a,o),Object.assign(this._content[e],i[e])},_doPanelAction:function(t,i,a){a||(a={});var o,s=this,d=s.elements,m=s.options,h=i===r,g=i===l,f=h?l:r,_=s.isPanelOpen(r),v=s.isPanelOpen(l),P=h?_:v,C=f===r?_:v,A=d[i+"Panel"],b=d[i+"PanelCtn"],w=d[f+"Panel"],S=a.tag,y=s.getPanelTargetMode(i),T={};function I(e,t,i,o){return function(){s._isAnimating=!1;var p,d=m.smallScreenMainContent,h="normal";return e===c?(p="pushed "+(t===r?l:r),i.addClassName("shown"),s._getBreakpoint(s._sizeCache)===s._UI_BREAKS.SMALL&&d?d.addClassName(p):s.elements.main.addClassName(p),a.maximize?(i.addClassName("maximized"),h="maximized"):i.removeClassName("maximized"),a.fit?(i.addClassName("fitted"),h="fitted"):i.removeClassName("fitted"),s.dispatchEvent("onPanelOpen",{panel:t,tag:s._shownTags[t],position:h})):(u(i,"shown","maximized","fitted"),d&&(d.removeClassName("maximized"),s.isPanelOpen(f)||u(d,"pushed",f)),u(s.elements.main,"pushed",f,"maximized"),s.dispatchEvent("onPanelClose",{panel:t,tag:s._shownTags[t],position:null})),s._applyPanelTargetMode(t),o&&o(),n.resolve()}}return a.force||a.maximize||a.minimize||a.fit||y||!s.isPanelOpen(i)||t!==c?(!C&&a.fit&&(a.maximize=!0,delete a.fit),"FULL_WIDTH"===y&&(h&&v&&s._doPanelAction(p,l),g&&_&&s._doPanelAction(p,r)),s._isAnimating=!0,t===c?(S&&s.showPanelContent(i,S),T.animate=!e.is(a.force),T.maximize=a.maximize,T.minimize=a.minimize,T.fit=a.fit,C&&("singlepanel"===s.options.mode||s._sizeCache.width<=s._UI_BREAKS.SMALL)?o=s._hidePanel(f,w).then(I(p,f,w)).then(s._showPanel.bind(s,i,A,T)).then(I(t,i,A,a.cb)):(a.fit&&C&&(w.hasClassName("maximized")||w.hasClassName("fitted"))&&(T.fit=a.fit=!1,window.requestAnimationFrame(s._doPanelAction.bind(s,c,f,{fit:!0}))),o=s._showPanel(i,A,T).then(function(){return T.fit?s._resizePanelContent(i,b,A,d.container,{pushMainContent:!1}):n.resolve()}).then(I(t,i,A,a.cb))),s._shownPanels[i]=!0):t===p&&P&&(o=s._hidePanel(i,A,T).then(I(t,i,A,a.cb)),s.isPanelOpen(f)&&s._sizeCache.width>s._UI_BREAKS.SMALL&&w.hasClassName("fitted")&&window.requestAnimationFrame(s._doPanelAction.bind(s,c,f,{maximize:!0})),s._shownPanels[i]=!1),o||(s._isAnimating=!1,o=n.resolve()),o):n.resolve()},_movePanel:function(e,i,a,o){o||(o={});var l,d,u,m,h,g,f,_,v,P=this,C=P.elements,A=P.options,b=P._getContainerSize().width<=P._UI_BREAKS.SMALL,w=e===c,S=b&&!!A.smallScreenMainContent;return w&&!b&&(o.maximize||o.fit)?(l=P.options.resizablePanels[i]||o.maximize,u=i===r?{left:f=o.maximize?"100%":t.getSize.call(C.container).width-C.rightPanelCtn.getSize().width+"px",transform:"translateX("+f+")"}:{left:"",transform:"translateX("+(f=o.maximize?"0":C.leftPanelCtn.getSize().width+"px")+")"},d=n.all([P._setElementStyles(a,u,o)]).then(function(){return n.all[(P._setElementStyles(a,{left:""},{animate:!1}),P._setElementStyles(C[i+"PanelCtn"],l?{width:""}:{},o))]})):(u=w?P._getPanelOpenedStyles(i,i,o):P._getPanelClosedStyles(i,i,o),m=w?P._getPanelOpenedStyles("main",i,o):P._getPanelClosedStyles("main",i,o),P._updateLeftPanelFullWidthMode(),_=A.pushBeforeResize&&A.pushBeforeResize[i]?{transform:m.transform}:{},A.resizablePanels[i]?(v={transform:u.transform},h={left:u.left}):(v=u,h={}),(g={transform:""})["margin"+s.capitalize(i)]=m["margin"+s.capitalize(i)],d=function(){var t;return S?(e===p&&(m.transform=""),t=n.all([P._setElementStyles(C.main,{transform:"",marginLeft:"",marginRight:""},o),P._setElementStyles(A.smallScreenMainContent,m,o),P._setElementStyles(a,{transform:""},{animate:!1})])):t=n.all([P._setElementStyles(a,v,o),P._setElementStyles(C.main,_,o),P._setElementStyles(A.smallScreenMainContent,{transform:""},{animate:!1})]),t}().then(function(){return n.all([P._setElementStyles(C.main,g,{animate:!1}),P._setElementStyles(a,h,{animate:!1}),P._setElementStyles(C[i+"PanelCtn"],{width:""},o),P._setElementStyles(A.smallScreenMainContent,{left:""},o)])})),d},_updateLeftPanelFullWidthMode:function(){var e=this.elements.leftPanelCtn.classList;"FULL_WIDTH"===(this.getPanelTargetMode(r)||this.getPanelMode(r))?e.add("full-screen"):e.remove("full-screen")},_getContainerSize:function(){return t.getSize.call(this.elements.container)},_showPanel:function(e,t,n){return this._movePanel(c,e,t,n)},_hidePanel:function(e,t,n){return this._movePanel(p,e,t,n)},_getPanelPosition:function(e,t){var n,i,a,o=this,s=o._UI_BREAKS;switch(n=o._getContainerSize().width,i="FULL_WIDTH"===(o.getPanelTargetMode(e)||o.getPanelMode(e))?{panel:0,main:"100%"}:function(){var e=o._getContainerSize().width,t=Math.round(.125*e+240);return e>=s.LARGE?{panel:e-480+"px",main:"480px"}:e>s.SMALL?{panel:e-t+"px",main:t+"px"}:{panel:0,main:"100%"}}(),e){case r:a="-"+i.panel;break;case l:a=i.panel;break;case"main":a={position:"left"===t?i.main:"-"+i.main,margin:n<=o._UI_BREAKS.SMALL?"":i.main}}return a},_getPanelOpenedStyles:function(e,t,n){var i,a=this.options,o={};function s(e){var t="";return Array.isArray(e)?e.forEach(function(e){t+="translateX("+e+") "}):t="translateX("+e+")",t}return"main"===e?(i=this._getPanelPosition("main",t,n),a.pushMainContent&&a.pushMainContent[t]&&(o[t===r?"marginLeft":"marginRight"]=i.margin),o.transform=s(i.position)):(o.left="",o.transform=s(this._getPanelPosition(e,t,n))),o},_getPanelClosedStyles:function(e,t){var n,i,a=this.elements,o={};return e===r?o.transform="":e===l?o.transform="":(i="margin"+s.capitalize(t),n=a[e].getStyle(i),o[i]="",o.transform="translateX("+(t===r?"-"+n:n)+")"),o.left="",o},_setElementStyles:function(i,a,o){if(o=e.extend({useAnimationFrame:!0,animate:!0},o||{}),i)return new n(function(n){function s(){var s;e.is(a.transform)&&o.animate?(a.transitionProperty=Object.keys(a).join(", "),a.transitionDuration="300ms",s=setTimeout(n,o.animDuration||400),function(e,n,i){t.addEvent.call(e,n,function(a){t.removeEvent.call(e,n),i(a)})}(i,"transitionEnd",function(){clearTimeout(s),i.setStyle("transitionDuration",""),i.setStyle("transitionProperty",""),n()}),i.setStyles(a)):(i.setStyle("transitionDuration",""),i.setStyle("transitionProperty",""),i.setStyles(a),n())}window.requestAnimationFrame&&o.useAnimationFrame?window.requestAnimationFrame(s):s()})},_initEvents:function(){this.options.useWindowResize?window.onresize=this._onResize.bind(this):t.addEvent.call(this.elements.container,"resize",this._onResize.bind(this))},_applyPanelTargetMode:function(e){var t=this._panels[e].targetMode;return!!t&&(this._panels[e].mode=t,!0)},onPostInject:function(e){e&&(this.elements.container=e,this._initEvents(),this._onResize())},isAnimating:function(){return this._isAnimating},isPanelOpen:function(e){return!!this._shownPanels[e]},isPanelFitted:function(e){if(e){return this.elements[e+"Panel"].hasClassName("fitted")}},isPanelMaximized:function(e){if(e){return this.elements[e+"Panel"].hasClassName("maximized")}},openPanel:function(e,t){return this._doPanelAction(c,e.toLowerCase(),t)},closePanel:function(e,t){return this._doPanelAction(p,e.toLowerCase(),t)},showPanelContent:function(e,t){var n,i,a=this.getShownTag(e),o=this._content[e],s=this._shownTags[e]&&this._shownTags[e]!==t;if(o){for(n in a&&t&&a!==t&&this.dispatchEvent("onPanelHide",{panel:e,tag:a}),this._content[e])o[n].hide();o[t]?(o[t].show(),this._shownTags[e]=t):(o[n].show(),this._shownTags[e]=n),s&&(i=this.isPanelFitted()?"fitted":this.isPanelMaximized()?"maximized":"normal",this.dispatchEvent("onPanelChange",{panel:e,tag:t,position:i}))}},movePanelContent:function(e,t,n){n||(n={});var i=this.elements,a=this._content,o=a[t===l?r:l];return!(!o[e]||o[e].getParent()===i[t+"PanelCtn"])&&(a[t][e]=o[e].remove(),a[t][e].inject(i[t+"PanelCtn"]),delete o[e],!0)},getShownTag:function(e){return this._shownTags[e]||null},getPanelMode:function(e){return this._panels[e].mode},getPanelTargetMode:function(e){var t=this.getPanelMode(e),n=this._panels[e].targetMode||"DEFAULT";return t!==n?n:""},setTargetPanelMode:function(e,t){this._panels[e].targetMode="FULL_WIDTH"===t?"FULL_WIDTH":"DEFAULT"},destroy:function(){for(var e in this._parent(),this._dragControls)this._dragControls.hasOwnProperty(e)&&this._dragControls[e].destroy&&this._dragControls[e].destroy()}})}),define("DS/TopFrame/LocalStorageManager",[],function(){"use strict";var e="TopFrame-";return{getLastLoadedxAppContentTopMenu:function(){return function(t){var n;try{n=window.localStorage.getItem(e+t)}catch(e){console.error("Fail to get item from key: "+t)}return n}("lastLoadedxAppContentTopMenu")||""},setLastLoadedxAppContentTopMenu:function(t){!function(t,n){try{window.localStorage.setItem(e+t,n)}catch(e){console.error("Fail to set item for key: "+t,n)}}("lastLoadedxAppContentTopMenu",t)}}}),define("DS/TopFrame/Utils",["UWA/Core"],function(e){"use strict";var t,n;return t=Array.prototype,n=function(){function e(e){if(null==e)throw new TypeError("assign cannot be called with null or undefined");return Object(e)}return Object.assign?Object.assign:function(t){var n,i,a,o,s,r=e(t);if(1===arguments.length)return r;for(n=1;n<arguments.length;n++)if(null!=(i=arguments[n]))for(a=e(i),o=Object.keys(a),s=0;s<o.length;s++)r[o[s]]=a[o[s]];return r}}(),{pick:function(i){var a,o,s;return o={},s=e.is,a=n.apply(null,t.concat.apply(t,t.slice.call(arguments,1)).map(function(e){var t;return s(e,"string")?(t={})[e]=e:s(e,"plain")&&(t=e),t})),Object.keys(a).forEach(function(e){var t,n;e in i&&null!=(t=i[e])&&""!==t&&(n=a[e],s(n,"string")&&(o[n]=i[e]))}),o},resolve:function(t,n,i){var a=t;return!1!==n.every(function(t){var n=e.is(a);return n&&(a=a[t]),n})&&void 0!==a||(a=i),a},always:function(e){return function(){return e}},getCurrentLanguage:function(){var t,n,i="swymlang",a=[];return t=null,n=document.cookie.split(";"),(a=n.filter(function(e){return e.toLowerCase().indexOf(i.toLowerCase())>=0})).length>0&&(t=a[0].split("=")[1]),t||window.dsLang||e.Utils.Client.Locale.lang}}}),define("DS/TopFrame/CompassAPI",["DS/i3DXCompass/i3DXCompass"],function(e){"use strict";return{appIds:{notification:"X3DNTFC_AP",messaging:"X3DIMSG_AP",partSupply:"X3DPSLY_AP",swym:"X3DWNEW_AP",x3PDrive:"X3PDRIV_AP",x3DSearch:"X3DSEAR_AP"},getAppInfo:function(t){return new Promise(function(n,i){var a=t.appId;if(!a)return i("Missing appId.");e.getAppInfo({appId:a,onComplete:function(e){e?n(e):i("No app info for: "+a)}})})}}}),define("DS/TopFrame/Views/Message",["UWA/Element","UWA/Class/View"],function(e,t){"use strict";return t.extend({className:"topframe-message-view",tagName:"div",_title:"",_content:"",_icon:"",setup:function(e){e=e||{};this._title=e.title||"",this._content=e.content||"",this._icon=e.icon||""},destroy:function(){this._parent.apply(this,arguments)},render:function(t){t=t||{};var n,i,a,o=this.container,s=this.elements;return t.className&&o.addClassName(t.className),n=s.title=new e("div",{class:"tf-msgview-title"}),i=s.content=new e("div",{class:"tf-msgview-content"}),a=s.icon=new e("div",{class:["tf-msgview-icon","fonticon"].join([" "])}),o.addContent([n,i,a]),this.setTitle(this._title).setContent(this._content).setIcon(this._icon),this},setTitle:function(e){e=e||"";return this._title=e,this.elements.title.setText(e),this.toggleDisplay({title:!!e}),this},setContent:function(e){e=e||"";return this._content=e,this.elements.content.setText(e),this.toggleDisplay({content:!!e}),this},setIcon:function(e){e=e||"";var t=this.elements.icon,n=this._icon;return this._icon=e,t.removeClassName(n),t.addClassName(e),this.toggleDisplay({icon:!!e}),this},toggleDisplay:function(e){var t=this;return Object.keys(e).forEach(function(n){var i=t.elements[n],a=e[n];i&&i.toggleClassName("tf-msgview-hide","boolean"==typeof a?!a:void 0)}),t}})}),define("DS/TopFrame/TopFrame",["UWA/Core","UWA/Event","UWA/Class","UWA/Class/Options","UWA/Class/Events","UWA/Element","UWA/Utils","UWA/String","UWA/Class/Promise","DS/TopFrame/Frame","DS/TopFrame/Utils","DS/TopFrame/CompassAPI","DS/TopFrame/LocalStorageManager","DS/Tenant/Tenant","DS/TopBar/TopBar","DS/TopBar/model/MainMenuBar","DS/TopBarProxy/TopBarProxy","DS/i3DXCompass/i3DXCompass","DS/TagNavigator/TagNavigator","DS/W3DLegal/W3DLegal","DS/WebappsUtils/WebappsUtils","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Tooltip","DS/GDPR/GDPR","i18n!DS/TopFrame/assets/nls/topFrame"],function(e,t,n,i,a,o,s,r,l,c,p,d,u,m,h,g,f,_,v,P,C,A,b,w,S,y){"use strict";var T,I,M="left",E="right",D={};function x(t){return t?t!==M||(e.log("Left panel currently not permitted."),!1):(e.log("Must specify a panel"),!1)}return D.content=!1,D.partSupply=!0,I={activateFederatedSearch:!0,activateSearch:!0,showCoachmark:!0,activateLegal:!0,activateAbout:!0,activateGDPR:!1,useTagger:!0,activateInstantMessaging:!0,helpMenu:{brandAbout:"",appNameAbout:"",numberAbout:"",getStartedUrl:"",communityUrl:"",supportPublicCloudUrl:"",topBarId:"helpMenu"},search:{ressources:{},userId:null,topBarId:"searchMenu",searchInputTarget:"input_search_div",searchContentTarget:"search-content",events:{}},onTenantChange:function(e){var t=e&&e.from,n=e&&e.to,i=Object.keys(e.from).find(t=>e.from[t]===window.location.origin),a=n&&i&&n[i];t.platformId!==n.platformId&&a&&location.replace(a)}},(T=n.singleton(a,i,{TOPBAR_HEIGHT:44,COMPASS_BREAKPOINT:959,XAPPS:{notification:{id:d.appIds.notification,tag:"notification",topMenuId:"notification",loadPromise:null,isLoaded:!1,content:null,widget:null},content:{id:d.appIds.x3PDrive,tag:"content",topMenuId:"content",loadPromise:null,isLoaded:!1,content:null,widget:null},social:{id:d.appIds.swym,tag:"social",topMenuId:"social",loadPromise:null,isLoaded:!1,content:null,widget:null},search:{id:d.appIds.x3DSearch,tag:"search",loadPromise:null,isLoaded:!1,content:null,widget:null},messaging:{id:d.appIds.messaging,tag:"messaging",loadPromise:null,isLoaded:!1,content:null,widget:null},make:{id:"Make",tag:"make",loadPromise:null,isLoaded:!1,content:null,widget:null},partSupply:{id:d.appIds.partSupply,tag:"partSupply",topMenuId:"content",loadPromise:null,isLoaded:!1,content:null,widget:null}},viewportHeight:0,resizeHandler:null,_externalApps:{},_frame:null,isInitialized:!1,_isTaggerVisible:!1,_isCompassVisible:!1,_isDataFilterPanelVisible:!1,_isDashboardMenuVisible:!1,_legalPromise:l.deferred(),_visibleApp:null,_currentSearchQuery:"",_passportUrl:"",_contentApps:{},uninitializedCalls:"throw",init:function(n){var i=this;i._parent(n),i.setOptions(n);var a,l,d,m,P=i.options,C=P.swymUrl||p.resolve(P,["startupParams","swym","0","url"],null),A=P.startupParams,b=window.location.href,T=(e.is(P.activateFederatedSearch)?P.activateFederatedSearch:I.activateFederatedSearch)||s.getQueryString(b,"universal_search"),D=e.is(P.activateSearch)?P.activateSearch:I.activateSearch,x=e.is(P.showCoachmark)?P.showCoachmark:I.showCoachmark,L=e.is(P.activateLegal)?P.activateLegal:I.activateLegal,U=e.is(P.activateAbout)?P.activateAbout:I.activateAbout,N=e.is(P.useTagger)?P.useTagger:I.useTagger,F=e.is(P.activateGDPR)?P.activateGDPR:I.activateGDPR,O=e.is(P.activateInstantMessaging)?P.activateInstantMessaging:I.activateInstantMessaging,z=e.is(P.onTenantChange,"function")?P.onTenantChange:I.onTenantChange,k=e.is(P.onCollabSpaceChange,"function")?P.onCollabSpaceChange:function(){},V=e.is(P.onCredentialsChange,"function")?P.onCredentialsChange:function(){},R=i._manageCompass.bind(i),B=i.XAPPS,W=P.dashboardSwitch;function j(){i.toggleTagger(!0)}function H(){i._isTaggerVisible&&i.toggleTagger(!1)}function X(e,t){var n=t.panel,a=h.view.children.rightMenuBar,o="on"+r.capitalize(n)+"Panel";"open"===e?o+="Opened":"close"===e?(o+="Closed",n===E&&a._onItemViewActivate(),n===M&&(i._isTaggerVisible=!1,i._isCompassVisible=!1,i._isDataFilterPanelVisible=!1,N&&v.toggle6WTaggerViewVisibility(!1),requestAnimationFrame(R))):o+="hide"===e?"Hidden":"Resized",this.dispatchEvent(o,[e,t.panel,t.tag])}P&&!1===N&&(v=void 0),i._tenantId=P.tenant,i._communityId=P.community,i._passportUrl=P.passportUrl,i.isPublicCloud=i._isPublicCloud(),i._initContentAppsAttribute(),i.toggleTagger=function(e){i._isTaggerVisible=void 0===e?!i._isTaggerVisible:e,i._isTaggerVisible&&(i._isCompassVisible&&_.hideAccordion(),i._isCompassVisible=!1),i._updateLeftPanel(),v&&v.toggle6WTaggerViewVisibility(i._isTaggerVisible)},i.helpMenuOptions=I.helpMenu,i.searchOptions=I.search,e.is(i.searchOptions,"object")&&(i.searchOptions.x3dPlatformId=i._tenantId),P.events&&(i.searchOptions.events={search:P.events.search,clearSearch:P.events.clearSearch}),P.userId&&(i.searchOptions.userId=P.userId),i.searchOptions.addinMode=P.addinMode,A&&(i.searchOptions.ressources=A),P.myAppsBaseUrl=P.myAppsBaseUrl||P.myAppsBaseURL,P.brandAbout&&(i.helpMenuOptions.brandAbout=P.brandAbout),P.appNameAbout&&(i.helpMenuOptions.appNameAbout=P.appNameAbout),P.numberAbout&&(i.helpMenuOptions.numberAbout=P.numberAbout),P.getStartedUrl&&(i.helpMenuOptions.getStartedUrl=P.getStartedUrl),P.communityUrl&&(i.helpMenuOptions.communityUrl=P.communityUrl),P.supportPublicCloudUrl&&(i.helpMenuOptions.supportPublicCloudUrl=P.supportPublicCloudUrl),P.searchParams&&(i.searchOptions.searchParams=P.searchParams),i.searchOptions.events.openTagger=j.bind(i),i.searchOptions.events.closeTagger=H.bind(i),i.searchOptions.events.setTaggerMode=function(e){v&&v.view&&e&&v.view.setTaggerMode(e)}.bind(i),function(){var t,n=(d=e.extend({userName:"",brand:"",appName:"",application:"",lang:"en",isShared:!1,useTagger:!0,picture:"",tenantId:P.hideTenantDisplay?"":i._tenantId,serviceName:P.serviceName,getAllTenants:P.getAllTenants,logoutMode:"private"!==P.logoutMode?"public":P.logoutMode,onUserContextClick:P.onUserContextClick,events:{menu:function(){i.appContainer.toggleClassName("right"),i.searchContentContainer.toggleClassName("right")},logo:function(){var e=o.getSize.call(document);i._isCompassVisible||P.lockedAppMode||(P.addinMode||!P.addinMode&&!P.lockedAppMode)&&e.width>i.COMPASS_BREAKPOINT||_.showAccordion(!0)}}},p.pick(P,"userName","appIcon","brand","appName","application","isShared","topMenus","useTagger","lang","events","signupAction","loginAction","signupUrl","loginUrl"),!0)).topMenus,a={};function r(e){var t=e.xAppTag;i.isPanelOpen(E)&&t===i.getPanelApp(E)?i.closePanel(E):i.openPanel(E,{tag:t})}if(Array.isArray(n)&&(n.forEach(function(e){a[e]=!0}),n=a),n&&(!0===n.notification&&(n.notification=function(){r({xAppTag:"notification"})}),!0===n.content&&i.getEnabledContentxAppTags().length&&(n.content=function(){var e,t=i._contentApps,n=u.getLastLoadedxAppContentTopMenu();(e=n&&t[n]?n:t.content?"content":i.getEnabledContentxAppTags()[0])?r({xAppTag:e}):console.error("No xApp to show in Content Right panel.")}),!0===n.social&&(n.social=function(){r({xAppTag:"social"})}),n.context=!0,d.topMenus=n),d.activateNewSearch=!!T,d.activateSearch=!!D,P.picture)d.picture=P.picture;else if(P.userId&&C&&(t=s.parseUrl(C)).authority){var l=t.protocol||"https",c=t.authority,m=t.directoryPath||"/",g=P.userId;d.picture=l+"://"+c+m+"api/user/getpicture/login/"+g}d.addinMode=P.addinMode,d.lockedAppMode=P.lockedAppMode,d.topFrameVue=P.topFrameVue,h.init(d)}(),D&&T&&require(["DS/SNSearchUX/SearchUX_TopBar"],function(e){e.init(i.searchOptions)}),O&&!P.lockedAppMode&&require(["DS/InstantMessaging/InstantMessaging"],function(t){t.init(e.extend({userId:null,topBarId:"instantMessagingMenu",appName:P.brand,userName:P.userName,passportUrl:i._getPassportUrl(),ressources:C?{swym:[{id:i._tenantId,displayName:i._tenantId,url:C}],instantMessaging:A?A.instantMessaging:null}:{}},p.pick(P,"xswym","realtime","userId",{startupParams:"ressources"})))}),this.myAppsCtn=e.createElement("div",{id:"my-apps-ct",class:"column-container"}),this.taggerCtn=e.createElement("div",{id:"tagger-ct",class:"column-container"}),this.dataFilterPanelCtn=e.createElement("div",{id:"data-filter-panel-ct",class:"column-container"}),this.searchContentContainer=o.create("div",{class:"search-content",id:"search-content"}),this.appContainer=o.create("div",{class:"app-content"}),W&&(this.dashboardMenuContainer=e.createElement("div",{id:"new-dashboard-menu",class:"column-container"}),require([["DS","Dashboard","NewDashboardMenu"].join("/")],function(e){e.init({container:i.dashboardMenuContainer,onClose:function(){i._isDashboardMenuVisible=!1,i._updateLeftPanel()},onOpen:function(){i._isCompassVisible=!1,i._isDataFilterPanelVisible=!1,i._isTaggerVisible=!1,i._isDashboardMenuVisible=!0,i._updateLeftPanel()}})}));var G={left:{myAppsCtn:this.myAppsCtn,taggerCtn:this.taggerCtn,dataFilterPanelCtn:this.dataFilterPanelCtn},main:{appContainer:this.appContainer,searchContentContainer:this.searchContentContainer},right:{}};W&&(G.left.dashboardMenuCtn=this.dashboardMenuContainer);var q=d.topMenus;q&&(G.right={loading:e.createElement("div",{class:"x-app spinner",text:y.loading}),error:e.createElement("div",{class:"x-app error",text:y.xAppError})},(q.notification||P.addinMode)&&(require(["DS/NotificationManager/notificationManager"],function(t){new t(e.extend({notifServer:"",topBarID:"notificationsMenu",swymServer:C,passportServer:"",login:""},p.pick(P,{passportUrl:"passportServer",userId:"login"},"notifServer")))}),G.right.notification=B.notification.content=e.createElement("div",{class:"x-app notification"})),q.social&&(G.right.social=B.social.content=e.createElement("div",{class:"x-app social"})),q.content&&(G.right.content=B.content.content=e.createElement("div",{class:"x-app content"}),G.right.partSupply=B.partSupply.content=e.createElement("div",{class:"x-app partSupply"}))),D&&T&&(G.right.search=B.search.content=e.createElement("div",{class:"x-app search"})),G.right.messaging=B.messaging.content=e.createElement("div",{class:"x-app messaging"}),G.right.make=B.make.content=e.createElement("div",{class:"x-app make"}),i.options.addinMode&&document.body.addClassName("addinmode"),i.options.lockedAppMode&&document.body.addClassName("lockedapp"),i._frame=l=new c(G,{mode:"doublepanel",renderTo:document.body,useDragOverlay:!0,smallScreenMainContent:document.body,addinMode:i.options.addinMode,pushMainContent:{right:!0},pushBeforeResize:{left:!0,right:!1},events:{onPanelOpen:X.bind(i,"open"),onPanelClose:X.bind(i,"close"),onPanelResize:X.bind(i,"resize"),onPanelHide:X.bind(i,"hide"),onPanelChange:i.options.onRightPanelChange||function(){}}}),function(){var n,i=this._frame.elements,a=i.rightPanelCtn,s=window.innerWidth||document.documentElement.clientWidth,r=s<=639;i&&(n=e.createElement("span",{class:"column-actions",html:'<span class="column-action fit fonticon fonticon-resize-full"></span><span class="column-action minimize fonticon fonticon-resize-small"></span><span class="column-action close fonticon fonticon-cancel"></span>'}).inject(a),new w({position:"bottom",target:n.getElement(".column-action.fit"),body:y.actionFit,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new w({position:"bottom",target:n.getElement(".column-action.minimize"),body:y.actionMinimize,allowedPositions:["bottom","bottom right"],offset:{x:0,y:0}}),new w({position:"bottom right",target:n.getElement(".column-action.close"),body:y.actionClose,allowedPositions:["bottom","bottom right"],offset:{x:r?s:0,y:0}}),n.addEvent("click",function(e){var n=this,i=t.getElement(e);function a(e){return o.hasClassName.call(i,e)}a("fonticon-cancel")?l.isPanelOpen(E)&&(l.closePanel(E),n._onRightPanelStateChange("closed")):a("fonticon-resize-full")?l.openPanel(E,{fit:!0}).then(function(){n._onRightPanelStateChange("fitted")}):a("fonticon-resize-small")&&l.openPanel(E,{minimize:!0}).then(function(){n._onRightPanelStateChange("minimized")})}.bind(this)))}.bind(i)(),this.getApplicationContainer=function(){return this.appContainer},L&&i._activateLegal(P),function(){if(v){var t=e.extend({disableAutoComplete:!0,taggerIconId:"btn_tag_nav",appsTarget:"tagger-ct",events:{onFilterChange:p.always(!1)},lang:"en",userId:null,x3dPlatformId:i._tenantId,isAuthenticated:i._isAuthenticated},p.pick(P,"myAppsBaseUrl","tagsServerUrl","onFilterChange","getContextIdFromWidgetId","displayFilteredState","getWidgetTitleFromWidgetId","lang","brand","tenant","userId"));A?t.startupParams=A:P.taggerService&&P.cStorageService&&i._tenantId?e.extend(t,p.pick(P,"taggerService","cStorageService","tenant")):P.tagsServerUrl&&(t.tagsServerUrl=P.tagsServerUrl,P.envId&&(t.tagsServerUrlParams={tenant:P.envId})),v.set6WTaggerOptions(t),v.create6WTaggerView(v.get6WTagger("default"),t.appsTarget,{onClose:function(){i._isTaggerVisible=!1,i._updateLeftPanel()},onOpen:function(){require([["DS","Dashboard","NewDashboardMenu"].join("/")],function(e){e.close()}),i._isCompassVisible=!1,i._isDataFilterPanelVisible=!1,i._isDashboardMenuVisible=!1,i._isTaggerVisible||(i._isTaggerVisible=!0,i._updateLeftPanel())},onFilterChange:t.events.onFilterChange,displayTaggerOnFocus:j.bind(i),hideTaggerOnFocus:H.bind(i)}),v.toggle6WTaggerViewVisibility(!1)}}(),_&&_.initialize(e.extend({version:P.compassVersion,defaultQuadrant:P.compassDefaultQuadrant,logoClassName:"topbar-logo",compassTarget:"compass_ctn",appsTarget:"my-apps-ct",closable:!0,enableWidgetDrag:null,closeOnLaunch:!1,launchOnSameDomain:p.always(!1),onOpen:function(){var e=i._frame;require([["DS","Dashboard","NewDashboardMenu"].join("/")],function(e){e.close()}),i._isDashboardMenuVisible=!1,i._isDataFilterPanelVisible=!1,i._isCompassVisible=!0,e.setTargetPanelMode(M,e.DEFAULT_PANEL_MODE),H(),i._updateLeftPanel()},onClose:function(){var e=i._frame;i._isCompassVisible=!1,e.setTargetPanelMode(M,e.DEFAULT_PANEL_MODE),i._updateLeftPanel()},setPanelMode:function(e){var t=i._frame;t.getPanelMode(M)!==e&&(t.setTargetPanelMode(M,e),i._updateLeftPanel())},getPanelMode:function(){return i._frame.getPanelMode(M)},lang:"en",myAppsBaseUrl:"",userId:null,passportUrl:i._getPassportUrl(),proxyTicketUrl:null,topBarId:"compassMenu",x3dPlatformId:i._tenantId,platform:i._tenantId},p.pick(P,"launchOnSameDomain","closeOnLaunch","enableWidgetDrag","userId","myAppsBaseUrl","proxyTicketUrl","lang","addinMode"))),require(["DS/ENOFrame3DXInfra/Frame3DXController"],function(e){e&&e.init({container:i.dataFilterPanelCtn,open:function(){require([["DS","Dashboard","NewDashboardMenu"].join("/")],function(e){e.close()}),i._isCompassVisible=!1,i._isDataFilterPanelVisible=!0,i._isDashboardMenuVisible=!1,i._isTaggerVisible=!1,H(),i._updateLeftPanel()},close:function(){i._isDataFilterPanelVisible=!1,i._updateLeftPanel()}})}),g.setStaticMenuProviders(["compassMenu","notificationsMenu",i.searchOptions.topBarId,"instantMessagingMenu",i.helpMenuOptions.topBarId]),m=function(t){require(["DS/Coachmark/Coachmark"],function(n){t.events=t.events||{},e.merge(t.events,{onDNSAChange:P.onCoachmarkDNSAChange}),n.init(t),e.is(t.callback,"Function")&&t.callback()})},x&&!P.lockedAppMode&&A&&A.showCoachmark&&m(e.extend({myAppsBaseURL:"",parentEltSelector:"body",forceDisplay:!1,lang:"en",dnsa:A?!A.showCoachmark:null,xappsMode:P.xappsMode||!1},p.pick(P,{myAppsBaseUrl:"myAppsBaseURL"},"lang"))),i.resizeHandler=i.resize.bind(this),i.resizeHandler(),h.addEvent({events:{search:function(e){i._onSearch(e.value||"")},clearSearch:function(){i._onSearch("")},tenant:z,collabSpace:k,credentials:V}}),a=new f({id:i.helpMenuOptions.topBarId}),x&&a.addContent({help:[{label:y.getStartedItem,onExecute:function(){m({myAppsBaseURL:i.helpMenuOptions.getStartedUrl,parentEltSelector:"#coachmark",forceDisplay:!0,lang:P.lang||"en",xappsMode:P.xappsMode||!1})}}]}),a.addContent({help:[{label:y.supportCommunitiesItem,submenu:[{label:"3DEXPERIENCE Platform",onExecute:function(){i._openUrlInBlankTab({url:i.helpMenuOptions.communityUrl||"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:4",modalTitle:y.supportCommunitiesItem,modalButton:"3DEXPERIENCE Platform"})}},{label:"Social & Collaboration",submenu:[{label:"ENOVIA",onExecute:function(){i._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:38",modalTitle:y.supportCommunitiesItem,modalButton:"ENOVIA"})}},{label:"3DEXCITE",onExecute:function(){i._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:g_fzYGr0Q6mHYxoVvGKnOw",modalTitle:y.supportCommunitiesItem,modalButton:"3DEXCITE"})}}]},{label:"3D Modeling",submenu:[{label:"CATIA",onExecute:function(){i._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:6",modalTitle:y.supportCommunitiesItem,modalButton:"CATIA"})}},{label:"BIOVIA",onExecute:function(){i._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:36",modalTitle:y.supportCommunitiesItem,modalButton:"BIOVIA"})}},{label:"GEOVIA",onExecute:function(){i._openUrlInBlankTab({url:"https://discuss.geoviasupport.com/",modalTitle:y.supportCommunitiesItem,modalButton:"GEOVIA"})}},{label:"SOLIDWORKS",onExecute:function(){i._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:yUw32GbYTEqKdgY7-jbZPg",modalTitle:y.supportCommunitiesItem,modalButton:"SOLIDWORKS"})}}]},{label:"Simulation",submenu:[{label:"3DVIA",onExecute:function(){i._openUrlInBlankTab({url:"https://www.3ds.com/products-services/3dvia/?wockw=3DVIA%20Home",modalTitle:y.supportCommunitiesItem,modalButton:"3DVIA"})}},{label:"SIMULIA",onExecute:function(){i._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:39",modalTitle:y.supportCommunitiesItem,modalButton:"SIMULIA"})}},{label:"DELMIA",onExecute:function(){i._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:26",modalTitle:y.supportCommunitiesItem,modalButton:"DELMIA"})}}]},{label:"Information Intelligence",submenu:[{label:"NETVIBES",onExecute:function(){i._openUrlInBlankTab({url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:34",modalTitle:y.supportCommunitiesItem,modalButton:"NETVIBES"})}}]}]}]}),U&&a.addContent({help:[{label:y.aboutItem,onExecute:function(){var e,t;(t=o.getElement.call(document.body,[".ds-coachmark"]))&&(e=t.getElement(".ds-coachmark-close"))&&e.triggerEvent("click"),i.openAboutDialog()}}]}),F&&a.addContent({profile:[{label:y.cookies,onExecute:function(){S.start()}}]}),i.isPublicCloud().then(function(e){e&&a.addContent({help:[{label:y.getSupportItem,onExecute:function(){i._openUrlInBlankTab({url:i.helpMenuOptions.supportPublicCloudUrl||"https://www.3ds.com/support/3dexperience-platform-on-cloud-support/",modalTitle:y.getSupportItem,modalButton:y.getSupportItem})}}]})}),require([["DS","PlatformAPI","PlatformAPI"].join("/")],function(e){e.subscribe("marketplace.make.sendContent",function(e){i.makeQueryParams=e||{},i.openPanel(E,{appId:"Make",tag:"make"})})}),i.isInitialized=!0,P.onEndInit&&P.onEndInit(),F&&S.init()},_openUrlInBlankTab:function(t){if(s.Client.Engine.safari)var n=new A({header:t.modalTitle,body:e.createElement("div",{styles:{"text-align":"center"},html:new b({value:t.modalButton,className:"primary",icon:"login",events:{onClick:function(){window.open(t.url,"_blank"),n.hide()}}})}),visible:!0,closable:!0,renderTo:document.body,events:{onHide:function(){n=null}}});else window.open(t.url,"_blank")},_loadModules:function(t){var n=[];return e.is(t,"string")?n[0]=t:n=t,new l(function(e,t){require(n,function(){e(Array.prototype.slice.call(arguments))},function(e){t("Error loading modules."+(e&&e.requireModules?e:""))})})},_instantiateApp:function(t,n,i){t=t||{};var a=this;return a.appPrefs=i||{},new l(function(i){a._loadModules(["DS/UWPClientCode/WidgetFactory","DS/TopFrame/Environment"]).then(function(o){var s=o[0],r=o[1],l=t.id,c=a._tenantId&&{x3dPlatformId:a._tenantId}||{},p=a._communityId&&{community:a._communityId}||{},d=e.merge(a.appPrefs,e.merge(c,p)),u=JSON.stringify(d),m={el:n,parent:!1,preview:!0,appId:l,data:u,header:!0};if(t.platforms&&a._tenantId&&t.platforms.forEach(function(e){e.id===a._tenantId&&(t.launchInfos=e.launchInfos,t.checksum=e.checksum||t.checksum,t.isolationLevel=e.isolationLevel||t.isolationLevel)}),!(t.checksum&&t.launchInfos||t.platforms&&t.platforms[0]&&t.platforms[0].checksum&&t.platforms[0].launchInfos))throw new Error("Could not get valid Config from MyApps for the App "+m.appId);m=e.extend(m,{widgetId:e.is(t.launchInfos)?t.launchInfos:t.platforms[0].launchInfos,isolationLevel:e.is(t.isolationLevel)?t.isolationLevel:t.platforms[0].isolationLevel,token:e.is(t.checksum)?t.checksum:t.platforms[0].checksum}),s.load(m,function(){i(m.widget)},r)})})},_showApp:function(t,n){var i=this,a=i._frame,o=i.XAPPS[t]||i._externalApps[t];return o&&o.content?(a._updateLeftPanelFullWidthMode(),"make"===t?(require([["DS","i3DXCompassPlatformServices","i3DXCompassPlatformServices"].join("/")],function(n){n.getPlatformServices({onComplete:function(n){var s=n&&n.filter(function(e){return e.mppresentation}),r=(s&&s[0]&&s[0].mppresentation||"https://make.3dexperience.3ds.com")+"/addin?"+function t(n,i){return Object.keys(n).map(function(a){var o=n[a];if("originalAsset"===a)return t(o,"originalAsset_");try{return e.is(o,"object")&&(o=JSON.stringify(o)),i+encodeURIComponent(a)+"="+encodeURIComponent(o)}catch(e){return i+encodeURIComponent(a)+"="+encodeURIComponent(o)}}).join("&")}(i.makeQueryParams,""),l=document.createElement("iframe");for(l.setAttribute("src",r),l.style.width="100%",l.style.height="100%",l.style.paddingTop="38px",l.style.border="none";o.content.firstChild;)o.content.removeChild(o.content.firstChild);o.content.appendChild(l),o.isLoaded=!0,a.showPanelContent(E,t)}})}),l.resolve()):o.isLoaded||o.loadPromise?(a.showPanelContent(E,t),o.loadPromise||l.resolve()):(a.showPanelContent(E,"loading"),o.loadPromise=d.getAppInfo({appId:o.id}).then(function(e){return a.showPanelContent(E,t),i._instantiateApp(e,o.content,n||{})}).then(function(e){o.isLoaded=!0,o.widget=e,a.showPanelContent(E,t)}).catch(function(e){console.error(e.stackTrace||e),o.loadPromise=null,a.showPanelContent(E,"error")}),o.loadPromise)):l.resolve()},_updateColumn:function(e,t){var n=this._frame;return console.warn("TopFrame#_updateColumn is @private and @deprecated method. Please use @public TopFrame#openPanel method instead."),e===M?(this._updateLeftPanel(),!0):e===E&&!n.isAnimating()&&(this._updateRightPanel({action:"toggle",xAppTag:t}),!0)},_updateLeftPanel:function(e){e=e||{};var t,n,i,a=this._frame,o=E;return this._isTaggerVisible||this._isCompassVisible||this._isDataFilterPanelVisible||this._isDashboardMenuVisible?(this._isTaggerVisible?a.showPanelContent(M,"taggerCtn"):this._isCompassVisible?a.showPanelContent(M,"myAppsCtn"):this._isDataFilterPanelVisible?a.showPanelContent(M,"dataFilterPanelCtn"):this._isDashboardMenuVisible&&a.showPanelContent(M,"dashboardMenuCtn"),n=!((t="boolean"==typeof e.fit?e.fit:this._shouldFitPanel(o))||!e.maximize),i=a.openPanel(M,{fit:t,maximize:n})):i=a.closePanel(M),i.then(this._manageCompass.bind(this))},_updateRightPanel:function(e){e=e||{};var t,n,i,a=this,o=a._frame,s=M,r=e.action||"toggle",c=e.xAppTag,p=c&&a.getxApp({tag:c}),d=e.xAppData;return o.isPanelOpen(E)?"close"===r||"toggle"===r&&c&&a._visibleApp===c?(a._visibleApp=null,i=o.closePanel(E).then(function(){a._deactivateActiveTopMenu(),a._onRightPanelStateChange("closed")})):(a._visibleApp=c,a._activateSelectedxAppTopMenu(p),i=a._showApp(c,d).then(function(){(o.isPanelFitted(E)||o.isPanelMaximized(E))&&a._onRightPanelStateChange("maximized")})):"close"===r?(a._visibleApp=null,i=l.resolve()):(a._visibleApp=c,a._activateSelectedxAppTopMenu(p),n=!((t="boolean"==typeof e.fit?e.fit:a._shouldFitPanel(s))||!e.maximize),i=o.openPanel(E,{tag:c,fit:t,maximize:n}).then(a._showApp.bind(a,c,d)).then(function(){(o.isPanelFitted(E)||o.isPanelMaximized(E))&&a._onRightPanelStateChange("maximized")})),i},_shouldFitPanel:function(e){var t=this._frame;return t.isPanelOpen(e)&&t.isPanelMaximized(e)},_manageCompass:function(){var e,t,n;function i(){clearTimeout(n),e.removeClassName("compass-force-show"),t.removeEvent("transitionEnd",i)}_&&(e=document.querySelector("#compass_ctn"),this._isCompassVisible?e&&e.addClassName("compass-force-show"):(_.hideAccordion(),e&&(t=e.getElement(".compass-base"))&&(t.addEvent("transitionEnd",i),n=setTimeout(i,350))))},_activateLegal:function(t){var n=this,i=t.startupParams||{},a=t.myAppsBaseUrl||"",o=t.legal&&e.is(t.legal,"array"),s={myAppsBaseUrl:a,renderFooter:!0,footerContainer:n.appContainer,onAccept:null,legal:i.legal,swym:i.swym,onFailure:null,onAboutClick:n.openAboutDialog.bind(n),legalTenantId:n._tenantId},r=p.pick(t,{onFailLegal:"onFailure",onAcceptLegal:"onAccept",myAppsBaseURL:"myAppsBaseUrl"},"renderFooter","legal");t=e.extend(s,r),n.isPublicCloud().then(function(i){o&&(t.legal=t.legal.filter(function(e){return e.id&&e.id===n._tenantId}),i&&t.legal.push({id:"3DS",displayName:"Dassault Systèmes",acceptedDP:!0,dp:"https://www.3ds.com/privacy-policy/",ressourceType:"url",footerDisplay:function(t){var n=!1;return e.is(t,"array")&&(n=t.some(function(e){return!0===e.footerDisplay})),n}(t.legal)})),P.init(t),n._legalPromise.resolve()}).catch(function(){})},_onSearch:function(e){var t=this._frame;this._currentSearchQuery=e||"",(t.isPanelMaximized(E)||t.isPanelFitted(E))&&this._propagateSearch(e)},_onRightPanelStateChange:function(e){var t=this,n=t.options||{};function i(e){var n=Object.assign({},t.XAPPS,t._externalApps),i=t._visibleApp,a=(n&&i&&n[i]||{}).widget,o=v.get6WTagger("RightPanelContext");o&&(e?a&&a.id&&o.setAsCurrent().focusOnCC(a.id):o.unfocusCC())}switch("closed"===e&&(t._visibleApp=null),e){case"maximized":case"fitted":i(!0),t._propagateSearch(),n.onRightPanelMaximize&&n.onRightPanelMaximize();break;case"minimized":case"closed":i(!1),t._propagateSearch(""),n.onRightPanelMinimize&&n.onRightPanelMinimize()}},_propagateSearch:function(t){var n,i,a=(e.Widgets||{}).instances||[];for(n=0;n<a.length;n++)"sidepanel"===(i=a[n].environment).name&&i.propagateSearch(e.is(t,"string")?t:this._currentSearchQuery)},_isAuthenticated:function(){return!!T.options.userId},_isPublicCloud:function(){var e=null,t=this.options.cloudType,n=this.options.isCloud,i=[],a=!1;return function(){var o=this;if(!o._isAuthenticated())return l.resolve(!1);if("boolean"==typeof e)return l.resolve(e);if(void 0===n&&void 0===t){if(a){var s=l.deferred(),r=s.promise;return i.push(s),r}return a=!0,new l(function(t,n){function s(e,t){i.forEach(function(n){n[e](t)}),i=[]}var r=o._getPassportUrl()+"/api/authenticated/user/fields";require([["DS","WAFData","WAFData"].join("/")],function(i){i.authenticatedRequest(r,{method:"GET",headers:{Accept:"application/json","Content-type":"application/json"},onComplete:function(n){try{e=!!JSON.parse(n).fields.dpp_consent}catch(t){e=!1}a=!1,s("resolve",e),t(e)},onFailure:function(e){window.console&&window.console.error(e),a=!1,s("reject",e),n(e)}})},function(e){window.console&&(window.console.error("WAFData can not be required ..."),window.console.error(e)),a=!1,s("reject",e),n(e)})})}return"true"===n&&"public"===t?(e=!0,l.resolve(e)):(e=!1,l.resolve(e))}},_getPassportUrl:function(){return this._passportUrl},activateLegal:function(){this._activateLegal(this.options)},openPanel:function(t,n){n||(n={});var i,a=this._frame,o=this.XAPPS,s=n.appId,r=n.tag,c=n.fit,p=!c&&n.maximize;if(!x(t))return l.reject();if(t===E){for(var d in o){if(o.hasOwnProperty(r))if(s===o[d].id||r===d){i=d;break}}if(!i&&s&&!((i=s)in this._externalApps)){var u=e.createElement("div",{class:"external-app "+i});this._externalApps[i]={id:i,content:u,isLoaded:!1,loadPromise:null,widget:null},a.extendPanelContent(E,i,u)}return i?this._updateRightPanel({action:"open",xAppTag:i,xAppData:n.data,fit:c,maximize:p}):(e.log("App does not exist in side panel."),l.reject())}return l.reject("Unknown panel: "+t)},closePanel:function(e){return x(e)?e===E?this._updateRightPanel({action:"close"}):l.reject("Unknown panel: "+e):l.reject()},isPanelOpen:function(e){return this._frame.isPanelOpen(e)},getPanelApp:function(e){if(x(e))return e===E?this._visibleApp:void console.error("Unknown panel: "+e)},minimizeSidePanel:function(){var e=this,t=e._frame;return t.isPanelMaximized(E)||t.isPanelFitted(E)?t.openPanel(E,{minimize:!0}).then(function(){e._onRightPanelStateChange("minimized")}):l.resolve()},initResizeEvent:function(){o.addEvent.call(window,"resize",this.resizeHandler)},removeResizeEvent:function(){o.removeEvent.call(window,"resize",this.resizeHandler)},resize:function(){var e=window.innerHeight||document.documentElement.clientHeight;e!==this.viewportHeight&&(this.appContainer.setStyle("height",e-this.TOPBAR_HEIGHT),this.viewportHeight=e)},openAboutDialog:function(){var t=this,n=e.createElement,i=null,a=n("div",{class:"template-cont"}),o=n("div",{class:"template-header"});function s(){require(["DS/Latency/SupportDialogBuilder"],function(e){e.build({container:i,tenantId:t._tenantId,buildDeploy:t.helpMenuOptions.numberAbout})})}function r(){var e;a.empty(),a.removeClassName("support"),a.removeClassName("mobile-pairing"),a.addClassName("about"),a.setStyle("padding","0px"),a.setStyle("height","auto"),i.getFooter().hide(),e=[t.helpMenuOptions.appNameAbout,t.helpMenuOptions.numberAbout].filter(function(e){return e}).join(" - "),n("img",{class:"info-img",src:C.getWebappsAssetUrl("TopFrame","images/about-empty.png"),alt:y.aboutItem}).inject(a),n("div",{html:t.helpMenuOptions.brandAbout,class:"message title"}).inject(a),n("div",{text:e,class:"message"}).inject(a),t._legalPromise.promise.then(function(){var e=P._legal;e.buildFooter({acceptedTou:e.acceptedTou,acceptedDp:e.acceptedDp,acceptedCookies:e.acceptedCookies}).inject(a)})}function l(){var n=t.options;require(["DS/MobilePairing/MobilePairing"],function(t){var a,o,s,r;t.buildMobilePairingDialog(i,e.extend(n,{myAppsBaseURL:(a=n.myAppsBaseUrl,o=n.tenant,s=o&&new RegExp("^https?://"+o+"-.*$","gi"),r=a,a&&s&&a.match(s)&&(r=a.replace(o.toLowerCase()+"-","")),r)}))})}i instanceof A?i.show():(i=new A({header:o,body:a,visible:!0,closable:!0,className:"ifwe-about-dialog",renderTo:document.body,events:{onHide:function(){i.destroy()}}}),function(){var t=e.createElement;function n(e,t,n,i){return{tag:"div",class:"about-tab-element "+e,html:[{tag:"span",class:"fonticon fonticon-"+t},{tag:"span",class:"title",text:n,title:n}],events:{mouseenter:function(){this.addClassName("bg-primary")},mouseleave:function(){this.hasClassName("selected")||this.removeClassName("bg-primary")},click:i}}}function i(e){var t=o.getElementsByClassName("about-tab-element selected");t[0].removeClassName("bg-primary"),t[0].removeClassName("selected"),this.addClassName("selected"),e()}t("h4",{text:y.aboutItem}).inject(o),t("div",{html:[n("aboutElement bg-primary selected","info",y.about,function(){i.call(this,r)}),n("supportElement","lifebuoy",y.support,function(){i.call(this,s)}),n("mobilePairing","component",y.mobilePairing,function(){i.call(this,l)})],class:"info-tab"}).inject(o)}(),r())},isTaggerVisible:function(){return this._isTaggerVisible},getxApp:function(e){var t,n=this.XAPPS;return e.tag?t=n[e.tag]:e.id&&(t=Object.values(n).find(function(t){return t.id===e.id})),t},getEnabledContentxAppTags:function(){var e=this,t=e._contentApps;return Object.keys(t).filter(function(n){return t[n]&&!!e.getxApp({tag:n})})},_activateTopMenu:function(e){var t=e.activate,n=h.view.children.rightMenuBar,i=n.subViews.find(e.findTopMenu);i&&(t?(n._onItemViewActivate(),i.activate()):i.deactivate())},_deactivateActiveTopMenu:function(){this._activateTopMenu({activate:!1,findTopMenu:function(e){return e.isActive()}})},_activateSelectedxAppTopMenu:function(e){e?this._activateTopMenu({activate:!0,findTopMenu:function(t){var n=t.model.id;return n===e.tag||n===e.topMenuId}}):this._deactivateActiveTopMenu()},_initContentAppsAttribute:function(){var e=this.options;if(!e.contentApps){var t=e.topMenus,n=!1;if(Array.isArray(t)?n=t.includes("content"):"object"==typeof t&&(n=!!t.content),n){var i={content:!0};e.contentApps=i,console.warn("You are using a deprecated TopFrame init options.\nPlease now specify the available apps in the Content right panel.\nPlease provide: options.contentApps = {} at least to use TopFrame default value.\nSee TopFrame#init `options.contentApps` documentation for more information.")}}this._contentApps=Object.assign({},D,e.contentApps||{})}})).LEFT_PANEL=M,T.RIGHT_PANEL=E,T.PROFILE_TOPMENU_ID="profile",T.ADD_TOPMENU_ID="add",T.SHARE_TOPMENU_ID="share",T.HOME_TOPMENU_ID="home",T.HELP_TOPMENU_ID="help",T.CONTENT_TOPMENU_ID="content",T.SOCIAL_TOPMENU_ID="social",T.NOTIFICATION_TOPMENU_ID="notification",T.NOTIFICATION_XAPP_TAG="notification",T.CONTENT_XAPP_TAG="content",T.SOCIAL_XAPP_TAG="social",T.SEARCH_XAPP_TAG="search",T.MESSAGING_XAPP_TAG="messaging",T.MAKE_XAPP_TAG="make",T.PARTSUPPLY_XAPP_TAG="partSupply",T}),define("TopFrame",["TopFrame/TopFrame"],function(e){"use strict";return e}),define("TopFrame/TopFrame",["DS/TopFrame/TopFrame"],function(e){"use strict";return e}),define("TopFrame",["TopFrame/TopFrame"],function(e){"use strict";return e}),define("TopFrame/TopFrame",["DS/TopFrame/TopFrame"],function(e){"use strict";return e}),define("DS/TopFrame/Components/AppSwitcherMenu",["UWA/Core","UWA/Class/View","DS/UIKIT/DropdownMenu","DS/TopFrame/CompassAPI"],function(e,t,n,i){"use strict";var a=function(){},o={};return t.extend({tagName:"div",className:"tf-app-switcher-menu-cmp",_events:{onItemClick:a,onMenuShow:a,onMenuHide:a,onSetActiveAppName:a},_menu:null,_appIds:[],_selectedAppId:"",_activeAppName:"",setup:function(e){this._appIds=e.appIds,this._selectedAppId=e.selectedAppId,this._events={},this._events.onItemClick=e.onItemClick||a,this._events.onMenuShow=e.onMenuShow||a,this._events.onMenuHide=e.onMenuHide||a,this._events.onSetActiveAppName=e.onSetActiveAppName||a},render:function(t){t=t||{};var i,a,o,s=this.container,r=this.elements;return i=r.activeAppName=e.createElement("div",{class:"active-app-name"}),a=r.openIcon=e.createElement("div",{class:"app-switcher-open-icon fonticon fonticon-down-open"}),s.addContent([i,a]),o={className:["tf-app-switcher-dd-menu",t.className||""].join(" "),renderTo:t.renderMenuTo||document.body,target:s,position:t.position||"bottom left",offset:t.offset||{x:0,y:0},items:[],contextual:!1,bound:!0,closeOnClick:!0,removeOnHide:!0,responsiveMode:!0,scrollMode:!0,events:{onClick:this._onItemClick.bind(this),onShow:this._onMenuShow.bind(this),onHide:this._onMenuHide.bind(this)}},this._menu=new n(o),this._fetchAppsInfo(),this},getActiveAppName:function(){return this._activeAppName},destroy:function(){this._menu&&this._menu.destroy(),this._menu=null,this._events=null,this._appIds=null,this._selectedAppId="",this._activeAppName="",this._parent.apply(this,arguments)},_fetchAppsInfo:function(){var e,t=this;return e=t._appIds.map(function(e){return i.getAppInfo({appId:e}).then(function(n){var i=e===t._selectedAppId;n=Object.assign(n,o[e]||{}),t._menu.addItem({id:e,name:e,text:n.title||"",className:["app-item","app-item-"+e].join(" "),icon:n.icon||"",selected:i}),i&&t._setActiveAppName(n.title||"")}).catch(function(e){console.error(e)})}),Promise.all(e)},_setActiveAppName:function(e){this._activeAppName=e,this.elements.activeAppName.setText(e),this._events.onSetActiveAppName.apply(this,arguments)},_onMenuShow:function(){this.container.addClassName("active"),this._events.onMenuShow.apply(this,arguments)},_onMenuHide:function(){this.container.removeClassName("active"),this._events.onMenuHide.apply(this,arguments)},_onItemClick:function(){this._events.onItemClick.apply(this,arguments)}})}),define("DS/TopFrame/Environment",["UWA/Core","UWA/Element","UWA/Environment","UWA/Storage","DS/TopFrame/TopFrame","DS/TopFrame/CompassAPI","DS/TopFrame/Components/AppSwitcherMenu","DS/TopFrame/LocalStorageManager","DS/TopFrame/Utils","DS/TopFrame/Views/Message","i18n!DS/TopFrame/assets/nls/topFrame"],function(e,t,n,i,a,o,s,r,l,c,p){"use strict";var d=n.extend({name:"boot",init:function(t){this.wp=e.merge({isVisible:!0},t),this.html={},this.Features={},this.view={},this.data=t&&t.data||{},this.options={defaultView:{type:"windowed"}},this.html.module=t.el,this.buildSkeleton(),this.dispatchInit(),this.showLoadingView()},loadWidget:function(t,n){var i,a,s=this,r=s.wp,l=r.widgetId;if(n=e.extend({onFailure:function(e){throw e},onTimeout:function(e){throw e},onComplete:function(){}},n),r.isolationLevel){if(s.loadEmbeddedWidget(l||t,n),i=s.embedded){if(r.appId===o.appIds.partSupply){a=setTimeout(function(){console.error("Load timeout for "+r.appId),s.showErrorView()},45e3)}i.addEvent("onLoad",function(){clearTimeout(a),s.hideLoadingView(),s.hideErrorView(),i.launched=!0,s.launched=!0}),i.addEvent("onRegisterWidget",function(){i.launched=!1,s.launched=!1})}s.dispatchEvent("onRegisterWidget")}else s.loadInlinedWidget(l||t,n),s.launched=!0,s.hideLoadingView(),s.hideErrorView();return s},loadInlinedWidget:function(e,t){var n=this.getWidget(),i=t.fetcher;return n.id=this.wp.id,i.title=this.wp.title,n.setStyle(i.style),delete t.fetcher.style,this._parent(e,t)},loadEmbeddedWidget:function(n,i){var a,o;return this.getWidget().id=this.wp.id,i.cache=this.wp.checksum,a={id:this.wp.id,appId:this.wp.appId,token:this.wp.token,lang:l.getCurrentLanguage(),displayEdit:!1,exposition:2===this.wp.isolationLevel?e.hosts.untrustedExposition:e.hosts.exposition,debugMe:e.debug?1:null},i.embedded=e.extend(i.embedded||{},a),this._parent(n,i),o=this.embedded.elements.iframe,t.setAttributes.call(o,{width:"",height:"",scrolling:"auto"}),t.setStyles.call(o,{width:"0",height:"0",minWidth:"100%",minHeight:"100%"}),this},buildSkeleton:function(){var t=this.wp,n=e.createElement,i=this.html;i.module.hasClassName("module")||(i.module=n("div",{class:"module"}).inject(i.module)),i.module.addClassName("wi-"+this.wp.id),i.wrapper=n("div",{class:"moduleWrapper"}).inject(i.module),t.isContainer?(i.body=i.wrapper,i.module.addClassName("moduleLayout")):i.body=n("div",{class:"moduleContent w-"+t.widgetId}).inject(i.wrapper)},setVisible:function(e,t){var n=this.wp,i=this.getWidget();(n.isVisible!==e||t)&&(n.isVisible=!!e,i.dispatchEvent(e?"onShow":"onHide"))},onRegisterWidget:function(){this.registered||this._parent()},propagateSearch:function(e){var t,n,i=this.wp,a=this.widget;if(i&&(t=i.children,a&&(e?a.dispatchEvent("onSearch",e):a.dispatchEvent("onResetSearch"),a.shouldPropagateSearch=!0,a.shouldPropagateSearchArg=e),i.isContainer&&(i.shouldPropagateSearch=!0,i.shouldPropagateSearchArg=e,void 0!==t)))for(n=t.length-1;n>=0;n--)t[n].widget&&t[n].widget.environment.propagateSearch(e)}}).extend({name:"sidepanel",init:function(){this.components={},this.overwriteTitle=!1,this._parent.apply(this,arguments),e.extend(this.options,{defaultView:{type:"sidepanel"}})},buildSkeleton:function(){var t=this.html,n=this.data,i=e.createElement;this._parent.apply(this,arguments),!1!==n.header&&(t.header=i("div",{class:"moduleHeader"}).inject(t.wrapper,"top"),t.headerLeft=i("div",{class:"moduleHeader__left"}).inject(t.header),t.headerMiddle=i("div",{class:"moduleHeader__middle"}).inject(t.header),t.title=i("div",{class:"moduleHeader__title"}).inject(t.headerMiddle)),n.title&&(this.onUpdateTitle(n.title),this.overwriteTitle=!0),this.buildAppSwitcher()},buildAppSwitcher:function(){var e,t,n=this,i=n.wp.appId,o=a.getxApp({id:i}),l=n.html,c=[],p=function(){};o&&(o.topMenuId===a.CONTENT_TOPMENU_ID&&(c=a.getEnabledContentxAppTags(),p=r.setLastLoadedxAppContentTopMenu),(e=c.map(function(e){return(a.getxApp({tag:e})||{}).id}).filter(function(e){return e})).length<2||(t=new s({selectedAppId:i,appIds:e,onItemClick:function(e,t){var n=t.id;if(i!==n){var o=(a.getxApp({id:n})||{}).tag||"";a.openPanel(a.RIGHT_PANEL,{tag:o}),p(o)}},onSetActiveAppName:function(){n.onUpdateTitle(n.wp.title)}}),n.components.appSwitcherMenu=t,t.render({offset:{x:0,y:-5}}).inject(l.headerLeft)))},onRegisterWidget:function(){this.registered||(this.data=new i({adapter:"Object",database:"preference"+this.wp.id}))},afterLoad:function(){var e,t;try{e=this.embedded&&this.embedded.elements.iframe.contentDocument}catch(e){}e&&(t=e.querySelector(".moduleContent"))&&t.classList.add("environment-"+this.name),this.onViewRequest(this.options.defaultView)},toggleFit:function(){this.view.next||this.onViewRequest({type:this.isFitted()?"windowed":"fitted"})},isFitted:function(){var e=this.view.current;return!!e&&"fitted"===e.event.type},onUpdateTitle:function(e){e=e||"";var t=this.html,n=this.components.appSwitcherMenu;if(this.overwriteTitle?e=this.wp.title:(e=e.trim(),this.wp.title=e),n){var i=n.getActiveAppName();e.includes(i)&&(e=e.replace(i,"").trim())}t.title&&(t.title.setText(e),t.title.offsetWidth<t.title.scrollWidth&&t.title.setAttribute("title",e))},onUpdatePreferences:function(){this._onUpdateValues&&this._onUpdateValues.apply(this,arguments),this._parent.apply(this,arguments)},onUpdateValue:function(){this._onUpdateValues&&this._onUpdateValues.apply(this,arguments),this._parent.apply(this,arguments)},showErrorView:function(e){e=e||{};var t=this.components;t.errorView&&t.errorView.destroy(),this.hideLoadingView();var n=new c({title:e.title||p.xAppErrorTitle,content:e.content||p.xAppErrorContent,icon:e.icon||"fonticon-offline"});n.render({className:"wi-error-msg-view"}).inject(this.html.module),t.errorView=n},hideErrorView:function(){var e=this.components.errorView;e&&e.hide()},showLoadingView:function(e){e=e||{};var t=this.components;t.loadingView&&t.loadingView.destroy();var n=new c({title:e.title||p.loading,content:e.content,icon:e.icon});n.render({className:"wi-loading-msg-view"}).inject(this.html.module),this.components.loadingView=n},hideLoadingView:function(){var e=this.components.loadingView;e&&e.hide()},destroy:function(){var e=this;Object.keys(e.components||{}).forEach(function(t){"function"==typeof t.destroy&&t.destroy(),delete e.components[t]}),e.components=null,e._parent.apply(e,arguments)}});return d.prototype.views.sidepanel=n.AbstractView.extend({enter:function(){this.dispatchEvent("onEnter")},onEnter:function(){}}),d});