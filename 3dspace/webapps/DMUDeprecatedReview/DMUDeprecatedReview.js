define("DS/DMUDeprecatedReview/DMUDeprecatedReview",["UWA/Class","UWA/Utils","DS/DMUBaseExperience/DMUFactory","DS/DMUPlayMarkup/DMUMarkup","DS/DMUPlaySlide/DMUSlide","DS/DMUBaseReview/DMUOccurrenceOverloader","DS/DMUBaseReview/DMULinksManager","DS/DMUBaseUIServices/DMUSlidePreferences","i18n!DS/DMUDeprecatedReview/assets/nls/DMUDeprecatedReview"],function(e,t,i,r,n,a,o,s,u){"use strict";return e.extend({init:function(e,l){var p,d,D=this,c={};this.importData=function(U,m,v){if(U&&m){(p=new r(e,l)).isImporting(!0),p.setAttributes([{name:"sName",value:U.Name}]);var g=!0,M=!0,b=s.getSlidePreferences({context:l.getFrameWindow()});b&&("boolean"==typeof b.displayNominal&&(g=b.displayNominal),"boolean"==typeof b.displayInWork&&(M=b.displayInWork)),g&&((d=new n(e,p)).importData({Name:u.NominalSlide,ImageURL:U.ImageURL,EnvironmentOverload:{targetId:"environment",state:U.ReviewEnvironment||l.getEnvironment().getEnvironmentInfo()}},m,p,!0,!0),d.setAttributes([{name:"sUuid",value:t.getUUID()}]),p.addSlide(d));var f,S,I,O=U.DMUObjects,y=[],h={};for(S=0;S<O.length;S++)if("Slide"===O[S].type){if(!M&&O[S].InWork)continue;(f=new n(e,p)).setAttributes([{name:"sUuid",value:t.getUUID()}]),f.importData(O[S],m,p,!0),p.addSlide(f),h[f.getAttribute("sID")]=O[S].ObjectOverloads}else"OccurrenceOverloader"===O[S].type?((f=new a(e,p)).setAttributes([{name:"sUuid",value:t.getUUID()}]),f.importData(O[S],m,p),p.addOccurrenceOverloader(f)):"ExternalLinks"===O[S].type?((f=new o(e,p)).importData(O[S],m,p),p.setAttribute("oLinksManager",f)):"Compare3D"===O[S].type?(O[S].PropertiesCompare&&O[S].PropertiesCompare.DMUObjects&&O[S].PropertiesCompare.DMUObjects.length&&(y=y.concat(O[S].PropertiesCompare.DMUObjects),O[S].PropertiesCompare.DMUObjects=[]),y.push(O[S])):y.push(O[S]);var w,P=p.getSlides(),C=function(e,r){var n=i.buildComponent(e.type,r,p);n&&n.importData&&("Section"===e.type&&e.PropertiesSection&&"OnlyContour"!==e.PropertiesSection.SectionRender&&(e.PropertiesSection.SectionCurvesVisible=!1),n.importData(e,m,p),w=t.getUUID(),n.setAttributes([{name:"sUuid",value:w}]),e.uuid&&(c[e.uuid]||(c[e.uuid]=[]),c[e.uuid].push(w)),v&&v.getValidation()&&n.setAttribute("bEditable",!1))};for(S=0;S<y.length;S++)for(I=0;I<P.length;I++){var A=h[P[I].getAttribute("sID")];if(A&&A.length>0)for(var k=0;k<A.length;k++)y[S].id===A[k].targetId&&C(y[S],P[I]);else y[S].type.includes("Compare")||C(y[S],P[I])}m.registerForPostImport(D)}},this.afterImport=function(){p&&(p.fireEvent("onDMUObjectInitialized",{dmuObject:p}),setTimeout(function(){p.isImporting(!1),p.fireEvent("onDMUMarkupLoaded",{dmuObject:p}),p=null},10)),d=null},this.getUUIDMappingTable=function(){return c},this.getMarkupContent=function(){return p}}})});