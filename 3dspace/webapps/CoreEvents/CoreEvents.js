define("DS/CoreEvents/ModelEvents",["UWA/Core","UWA/Class"],function(t,s){"use strict";function i(t,s){return t.length=0,t=null,s||(t=[]),t}return s.extend({defaultOptions:{parent:null,target:null,asyncPropagation:!1,callMode:"desc",debug:{delay:0}},init:function(s){this._parent(!1),this.options=t.extend(t.clone(this.defaultOptions),s),this._target=this.options.target,this._spyEvents=null,this._listOfParents=[],this.options.parent&&this._setParent(this.options.parent);var i=this;this._pubsub={ongoingtopics:{},topics:{},subUid:-1,publish:function(t,s,n){if(this._spyEvents&&(console.warn("!!!"),this._spyEvents.call(t,s,n)),!this.topics[s])return!1;var e=this.topics[s],o=e?e.length:0;if("desc"===i.options.callMode)for(;o--;)e[o]&&e[o].func&&e[o].func.call(t,n,e[o].token);else if("asc"===i.options.callMode){for(this.ongoingtopics[s]=[];e[0];){e[0].func.call(t,n,e[0].token);var u=e.shift();u&&this.ongoingtopics[s].push(u)}this.topics[s]=this.ongoingtopics[s],this.ongoingtopics[s]=[]}return this},subscribe:function(t,s){this.topics[t]||(this.topics[t]=[]);var i=(++this.subUid).toString();return this.topics[t].push({token:i,func:s}),i},unsubscribe:function(t){for(var s=0,i=this.ongoingtopics.length;s<i;s++)this.ongoingtopics[s]&&this.ongoingtopics[s].token===t&&(this.ongoingtopics.splice(s,1),i--);for(var n in this.topics)if(this.topics[n])for(s=0,i=this.topics[n].length;s<i;s++)this.topics[n][s]&&this.topics[n][s].token===t&&(this.topics[n].splice(s,1),i--);return this}}},_setParent:function(t){this._listOfParents=[],this._addParent(t)},_addParent:function(t){t instanceof Array?this._listOfParents=t:null!==t&&this._listOfParents.push(t)},_unsetParent:function(t){var s=this._listOfParents.indexOf(t);-1!==s&&this._listOfParents.splice(s,1)},_formatEvent:function(t){return("/"+t+"/").replace(/(\/+)/g,"/")},_canPublishEvent:function(){if(this.__disableEventsCounter)return!1;for(var t=this._listOfParents,s=0;s<t.length;s++)if(t[s]._canPublishEvent())return!0;return void 0===this.__disableEventsCounter||0===this.__disableEventsCounter},disableEvents:function(){void 0!==this.__disableEventsCounter?this.__disableEventsCounter++:this.__disableEventsCounter=1},enableEvents:function(){void 0!==this.__disableEventsCounter&&this.__disableEventsCounter--},publish:function(t){if(this._canPublishEvent()){var s={context:t.context,event:t.event,formattedEvent:void 0===t.formattedEvent?this._formatEvent(t.event):t.formattedEvent,data:t.data,options:t.options,propagate:void 0===t.propagate||t.propagate,target:void 0===t.target?this._target:t.target,parent:void 0===t.parent?this._target:t.parent},i=this;if(s.target){var n={event:s.event,formattedEvent:s.formattedEvent,parent:s.parent,target:s.target,data:s.data,options:t.options,propagate:s.propagate,stopPropagation:function(){n.propagate=!1}};if(i.options.debug&&i.options.debug.delay?setTimeout(function(){i._pubsub.publish(s.context,n.formattedEvent,n)},i.options.debug.delay):this._pubsub.publish(s.context,n.formattedEvent,n),n.propagate){var e=this._listOfParents;1===e.length?i._propagate(e[0],s):e.forEach(function(t){i._propagate(t,s)})}}else this._pubsub.publish(s.context,s.formattedEvent,s.data)}},_propagate:function(t,s){this.options.asyncPropagation?setTimeout(function(){t.publish(s)},0):t.publish(s)},subscribe:function(s,i){var n={event:null};t.extend(n,s);var e=this._formatEvent(n.event);return this._pubsub.subscribe(e,i)},unsubscribeAll:function(t){var s=this;if(t){var n=this._formatEvent(t.event);this._pubsub.topics[n]&&this._pubsub.topics[n].forEach(function(t){s._pubsub.unsubscribe(t.token)})}else for(var e in this._pubsub.topics)this._pubsub.topics[e]&&(this._pubsub.topics[e].forEach(function(t){s._pubsub.unsubscribe(t.token)}),i(this._pubsub.topics[e]))},destroy:function(){this.unsubscribeAll(),delete this._pubsub.topics,delete this._pubsub,delete this._target,i(this._listOfParents),delete this.options,delete this.defaultOptions},addEventListener:function(t,s){return this.subscribe({event:t},s)},subscribeOnce:function(t,s){var i=this,n=this.subscribe(t,function(t){i.unsubscribe(n),s.call(this,t)});return n},unsubscribe:function(t){this._pubsub&&this._pubsub.unsubscribe(t)},_beginSpyEvents:function(t){this._pubsub._spyEvents=t},_endSpyEvents:function(){this._pubsub._spyEvents=null}})}),define("DS/CoreEvents/Events",["UWA/Core","UWA/Event","UWA/Class/Events","UWA/Class"],function(t,s,i,n){"use strict";var e={topics:{},subUid:-1,publish:function(t,s){if(!this.topics[t])return!1;for(var i=this.topics[t],n=i?i.length:0;n--;)i[n]&&i[n].func&&i[n].func(s);return this},subscribe:function(t,s){this.topics[t]||(this.topics[t]=[]);var i=(++this.subUid).toString();return this.topics[t].push({token:i,func:s}),i},unsubscribe:function(t){for(var s in this.topics)if(this.topics[s])for(var i=0,n=this.topics[s].length;i<n;i++)this.topics[s][i]&&this.topics[s][i].token===t&&(this.topics[s].splice(i,1),n--);return this}},o=n.singleton({init:function(t){this._parent(!1)},_formatEvent:function(t){return t=("/"+t+"/").replace(/(\/+)/g,"/")},publish:function(s){var i={event:null,data:null,useFullInfos:!1};t.extend(i,s),i.event=this._formatEvent(i.event),i.useFullInfos?e.publish(i.event,i):e.publish(i.event,i.data)},subscribe:function(s,i,n){void 0===n&&(n=!1);var o={event:null};t.extend(o,s);var u=this._formatEvent(o.event);return e.subscribe(u,i)},subscribeOnce:function(t,s){var i=this,n=this.subscribe(t,function(t){i.unsubscribe(n),s.call(this,t)});return n},unsubscribe:function(t){e.unsubscribe(t)}});return t.namespace("WUX/Events",o)});