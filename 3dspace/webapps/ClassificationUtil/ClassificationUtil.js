define("DS/ClassificationUtil/ClassificationUtil",["UWA/Core","DS/WAFData/WAFData","DS/IPClassifyUtil/IPClassifyUtility","DS/IPClassifyUtil/service/IPClassifyUtilWebService"],function(i,e,s,t){"use strict";return{classificationAttributesPromise:function(i){var e=this;if(!UWA.is(i,"object"))throw new Error("Invalid inputs for ClassificationUtil.classificationAttributesPromise");return new Promise(function(t,a){s.initURLSAsync().then(function(){e.fetchClassificationAttributes({apiVersion:i.apiVersion,lang:i.lang,urlInitDone:!0,onComplete:function(i){t(i)},onFailure:function(i){a(i)}})})})},fetchClassificationAttributes:function(i){var e=this;if(!UWA.is(i,"object"))throw new Error("Invalid inputs for ClassificationUtil.fetchClassificationAttributes");var a=[];i.urlInitDone||a.push(s.initURLSAsync()),Promise.allSettled(a).then(function(){t.fetchClassPredicates({acceptLang:i.lang,onComplete:function(s){var t=UWA.is(s,"string")?JSON.parse(s):s;"R2019x"===i.apiVersion&&(t=e.convertToR421ClassProperties([t])),i.onComplete(t)},onFailure:function(e){if(e&&e.message&&-1!==e.message.indexOf('return ResponseCode with value "404"')){var s=[];s.push({classInfo:{curi:"ds6wg:ClassificationAttributes",uri:"http://www.3ds.com/vocabularies/ds6wg/ClassificationAttributes"},properties:[]}),i.onComplete(s)}else i.onFailure(e)}})})},convertToR421ClassProperties:function(i){if(!i)return i;var e=[];return i.forEach(function(i){i.classPredicates&&i.classPredicates.forEach(function(i){var s={classInfo:{},properties:[]};i.className&&(s.classInfo={curi:i.className,uri:"http://www.3ds.com/vocabularies/"+i.className.replace(":","/")}),i.vocabularyPredicateInfo&&i.vocabularyPredicateInfo.forEach(function(i){var e={curi:i.uri,uri:i.uri?"http://www.3ds.com/vocabularies/"+i.uri.replace(":","/"):"",label:i.nlsName,description:i.nlsName,dataType:i.range.dataTypes[0],dimension:i.dimension,manipulationUnit:i.manipulationUnit,originCuri:"ds6wg:"+i.name};i.rangeValues&&i.rangeValues.literalInfo&&(e.rangeValues=i.rangeValues.literalInfo),i.nature&&(e.nature=i.nature),i.selectable&&(e.selectable=i.selectable),i.userAccess&&(e.userAccess=i.userAccess),s.properties.push(e)}),e.push(s)})}),e}}});