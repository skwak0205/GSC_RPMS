define("DS/CommonReportingPanel/CommonWidgetMaximizeHandler",["UWA/Class","UWA/Controls/Abstract"],function(e,t){"use strict";return t.extend({init:function(){if(window&&window.parent&&window.parent.document&&window.frameElement){var e=window.frameElement.id.replace("frame","wi");this.widget=window.parent.document.querySelector("."+e),this.widget&&(this.btnContainer=this.widget.querySelector(".moduleHeader"))}this._observeButtons(),this.isMaximized=!1,this._updateHandlers()},maximize:function(){this._maximize();var e=this;return new UWA.Class.Promise(function(t,i){e._wait(function(){t(null)})})},restore:function(){this._restore();var e=this;return new UWA.Class.Promise(function(t,i){e._wait(function(){t(null)})})},destroy:function(){this.maximizedObserver&&(this.maximizedObserver.disconnect(),this.maximizedObserver=null)},_observeButtons:function(){if(this.btnContainer){var e=this;this.maximizedObserver=new MutationObserver(function(t){e._isWidgetMaximized()!==this.isMaximized&&(e._updateHandlers(),e.dispatchEvent("widget-maxmized-changed",e.isMaximized))}),this.maximizedObserver.observe(this.btnContainer,{attributes:!0})}},_isWidgetMaximized:function(){return!!this.btnContainer&&null!==this.btnContainer.querySelector(".fonticon-resize-small")},_updateHandlers:function(){if(this._maximize=function(){},this._restore=function(){},this._wait=function(e){e()},this.btnContainer){var e=this.btnContainer.querySelector(".fonticon-resize-full"),t=this.btnContainer.querySelector(".fonticon-resize-small"),i=this,n=function(e,t){if(e.gotEl||i.btnContainer.querySelector(e.cls)&&(e.gotEl=!0),e.gotNewW){if(1===e.gotNewW){var o;(o=i.widget.getBoundingClientRect().width)===e.oldW?e.gotNewW=2:e.oldW=o}}else(o=i.widget.getBoundingClientRect().width)!=e.oldW&&(e.gotNewW=1,e.oldW=o);e.gotEl&&e.gotNewW&&2===e.gotNewW?(i._updateHandlers(),t()):++e.cnt<30?setTimeout(n,100,e,t):t()},o=this.widget.getBoundingClientRect().width;e?(i.isMaximized=!1,this._maximize=function(){var e=i.btnContainer.querySelector(".fonticon-resize-full");e&&(e.click(),i.isMaximized=!0)},this._wait=n.bind(null,{oldW:o,cnt:0,cls:".fonticon-resize-small"})):t&&(i.isMaximized=!0,this._restore=function(){var e=i.btnContainer.querySelector(".fonticon-resize-small");e&&(e.click(),i.isMaximized=!1)},this._wait=n.bind(null,{oldW:o,cnt:0,cls:".fonticon-resize-full"}))}}})}),define("DS/CommonReportingPanel/CommonDlgMaximizeHandler",["UWA/Controls/Abstract","DS/CommonReportingPanel/CommonWidgetMaximizeHandler"],function(e,t){"use strict";return e.extend({init:function(e){var i=this;this.dialog=e,this.isUIVisible=!0,this.isMaximized=!1,this.widgetHandler=new t,this.widgetHandler.addEvent("widget-maxmized-changed",function(e){i._updateHeaderButtons(e),i.dispatchEvent("widget-maxmized-changed",e)}),this._insertMinMaxButtons()},destroy:function(){this.widgetHandler.destroy(),this.widgetHandler=null},isWidgetMaximized:function(){return this.widgetHandler.isMaximized},setUIVisibility:function(e){this.isUIVisible!==e&&(this.isUIVisible=e,this._updateHeaderButtons(this.isMaximized))},_insertMinMaxButtons:function(){var e=this.dialog.elements.header.querySelector(".floatingPanel_RightButtons");if(e){var t=this;this.maxBtn=UWA.createElement("span",{class:"right-actions fonticon fonticon-resize-full ",styles:{display:this.widgetHandler.isMaximized?"none":"inline-block"},events:{click:function(){t._maximize()},touchstart:function(){t._maximize()}}}).inject(e,"top"),this.restoreBtn=UWA.createElement("span",{class:"right-actions fonticon fonticon-resize-small ",styles:{display:this.widgetHandler.isMaximized?"inline-block":"none"},events:{click:function(){t._restore()},touchstart:function(){t._restore()}}}).inject(e,"top")}},_updateHeaderButtons:function(e){this.isMaximized=e,this.isUIVisible?e?(this.maxBtn.setStyle("display","none"),this.restoreBtn.setStyle("display","inline-block")):(this.maxBtn.setStyle("display","inline-block"),this.restoreBtn.setStyle("display","none")):(this.maxBtn.setStyle("display","none"),this.restoreBtn.setStyle("display","none"))},_maximize:function(e){this._updateHeaderButtons(!0),this.restoreRect=this.dialog.elements.container.getBoundingClientRect();var t=this;this.widgetHandler.maximize().then(function(){var i=t.dialog.elements.container.parentElement.getBoundingClientRect();t.dialog._changeWidth(i.width),t.dialog._changeHeight(i.height),t.dialog._resizeContainer(),t.dialog.isMaximized=!0,t.dialog.options.resizable&&!e&&(t.dialog._showResizeContainer(!1),t.oldResizeCB=t.dialog.__showResizeContainerCB,t.dialog.__showResizeContainerCB=function(){})})},_restore:function(){this._updateHeaderButtons(!0);var e=this;this.widgetHandler.restore().then(function(){e.restoreRect&&(e.dialog.isMaximized=!1,e.dialog.setNewSize({width:e.restoreRect.width,height:e.restoreRect.height}),e.dialog._changeLeft(e.restoreRect.left),e.dialog._changeTop(e.restoreRect.top),e.dialog.options.resizable&&(e.dialog.__showResizeContainerCB=e.oldResizeCB))})}})}),define("DS/CommonReportingPanel/CommonCommandDialog",["UWA/Controls/Abstract","UWA/Core","DS/ENOFloatingPanel/ENOFloatingPanel","DS/UIKIT/Input/Button","DS/CommonReportingPanel/CommonDlgMaximizeHandler","i18n!DS/CommonReportingPanel/assets/nls/CommonCommandDialog","DS/ENO6WPlugins/jQuery","css!DS/CommonReportingPanel/CommonReportingPanel"],function(e,t,i,n,o,s,a,l){"use strict";return e.extend({buttonStyle:{ok:1,okCancel:2,none:3,cancel:4},init:function(){this._dialog=null,this._okButton=null,this._cancelButton=null,this._closeButton=null},create:function(e,t,i){var n=t||{};this._onOkHandler=n.onOk||function(){},this._onCloseHandler=n.onClose||function(){},this._enableCmdFn=n.enableCmd||null,this._fnContext=i||this,this._OKBtnText=n.OKBtnText||s.okButton,n.onCloseOverride&&(n.events||(n.events={}),n.events.onClose=n.onCloseOverride);var a=this._createFooter(n.buttonStyle||this.buttonStyle.okCancel),l=void 0===n.overlay||n.overlay,r=this._createDialog(a,e,n.resizable||!1,n.maximizable||!1,n.closeButton,n.events||{},n.title,l,n.className||"",n.persistId);this.updateUI();var d=this;return n.powerMaximize&&(this.DlgMaximizeHandler=new o(r),this.DlgMaximizeHandler.addEvent("widget-maxmized-changed",function(e){d.dispatchEvent("widget-maxmized-changed",e)})),r},destroy:function(){this.DlgMaximizeHandler&&(this.DlgMaximizeHandler.destroy(),this.DlgMaximizeHandler=null),this._dialog&&(this._dialog.destroy(),this._dialog=null)},setTitle:function(e){this._dialog&&this._dialog.setTitle(e)},updateUI:function(){this._cancelButton&&this._cancelButton.setDisabled(!1),this._closeButton&&(this._closeButton.disabled=!1),this._okButton&&(this._okButton.isDisabled()&&(this._okButton.events=null),this._enableCmdFn?this._okButton.setDisabled(!this._enableCmdFn.apply(this._fnContext)):this._okButton.setDisabled(!1))},isWidgetMaximized:function(){return!!this.DlgMaximizeHandler&&this.DlgMaximizeHandler.isWidgetMaximized()},setPowermaximizeVisibility:function(e){this.DlgMaximizeHandler&&this.DlgMaximizeHandler.setUIVisibility(e)},maximize:function(e){this.DlgMaximizeHandler&&this.DlgMaximizeHandler._maximize(e)},restore:function(){this.DlgMaximizeHandler&&this.DlgMaximizeHandler._restore()},_onOk:function(){this._disableUI(),this._onOkHandler.apply(this._fnContext)},_onCancel:function(){this._disableUI(),this._onCloseHandler.apply(this._fnContext),this.destroy()},_disableUI:function(){this._okButton&&this._okButton.setDisabled(!0),this._cancelButton&&this._cancelButton.setDisabled(!0),this._closeButton&&(this._closeButton.disabled=!0)},_disableOK:function(){this._okButton&&this._okButton.setDisabled(!0)},_createFooter:function(e){if(e!==this.buttonStyle.none){var t=document.createElement("div");e===this.buttonStyle.ok?this._okButton=new n({value:this._OKBtnText,className:"primary"}):e===this.buttonStyle.cancel?this._cancelButton=new n({value:s.cancelButton,className:"default"}):(this._okButton=new n({value:this._OKBtnText,className:"primary"}),this._cancelButton=new n({value:s.cancelButton,className:"default"}));var i=this;return this._okButton&&(this._okButton.inject(t),this._okButton.addEvent("onClick",function(){i._onOk()})),this._cancelButton&&(this._cancelButton.inject(t),this._cancelButton.addEvent("onClick",function(){i._onCancel()})),t}},_decreaseAllzIndex:function(e){if(e&&""!==e)for(var t=a("."+e),i=0;i<t.length;i+=1){var n=a(t[i]).css("zIndex");a.isNumeric(n)&&a(t[i]).css("zIndex",n-=1)}},_setToTopzIndex:function(e){a(e).css("zIndex",40040)},_createDialog:function(e,t,n,o,s,a,l,r,d,c){var h=this;a.onClose||(a.onClose=function(){h._onCancel()}),this._decreaseAllzIndex(d),this._dialog=new i({className:"command_dialog "+d,title:l,footer:e,body:t,overlay:r,escapeToClose:s,closable:s,animate:!0,resizable:n,maximizable:o,autocenter:!0,visible:!0,events:a,limitParent:!0,persistId:c}),this._setToTopzIndex(this._dialog.elements.container);var u=this,g=function(){u._decreaseAllzIndex(d),u._setToTopzIndex(u._dialog.elements.container)};return this._dialog.elements.content.addEventListener("touchstart",g,!0),this._dialog.elements.content.addEventListener("mousedown",g,!0),this._dialog}})}),define("DS/CommonReportingPanel/CommonReportingPanel",["DS/Tree/TreeListView","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/CommonReportingPanel/CommonCommandDialog","DS/Tweakers/TypeRepresentationFactory","DS/Tweakers/GeneratedToolbar","i18n!DS/CommonReportingPanel/assets/nls/CommonReportingPanelNls","css!DS/CommonReportingPanel/CommonReportingPanel","text!DS/CommonReportingPanel/assets/CommonReportingToolbar.json","DS/ENOXTriptych/js/ENOXTriptych"],function(e,t,i,n,o,s,a,l,r,d){"use strict";var c,h,u,g,m,_,f,p,w,C,b,x=!0;return{launchReportingPanel:function(e,t,i){this.init(e,t)},init:function(e,t){var i=this;_=e,f=t,C=UWA.createElement("div",{class:"mainDiv_container"}),w=UWA.createElement("div",{class:"rightPanelDiv_container"}),c=UWA.createElement("div",{class:"centerPanelDiv_container"}),u=UWA.createElement("div",{class:"row",style:{"vertical-align":"center",float:"top",margin:"0px",border:"double",position:"relative"}}),(g=UWA.createElement("div",{class:"column",style:{"vertical-align":"left",float:"top",margin:"0px",border:"double",position:"relative"}})).innerHTML=a.TotalRecords+_.length;var o=new n,s=o.create(C,{className:"ReportingPanelComponent",closeButton:!0,title:a.ReportTitle,buttonStyle:o.buttonStyle.none,resizable:!0,persistId:"ReportDialogId",maximizable:!0,overlay:!1,onClose:function(){!function(){var e=s.getModalBodySize();e.height=s.getContainerHeight();var t="report_dlg_size";widget.getValue(t)||widget.addPreference({name:t,type:"hidden",defaultValue:"{}"});widget.setValue(t,JSON.stringify(e)),o.destroy()}()},events:{onResizeFloating:function(){}}},this);i.dialog=s,s.inject(widget.body);var l=widget.getValue("report_dlg_size");return null==l&&(l='{ "width":580, "height":280 }'),s.setNewSize(JSON.parse(l)),s.centerIt(),setTimeout(function(){s.setMinSize(280,220)},10),m=i.setTopToolbar(r),i.fillTreeDoc(_,f),i._displayData(),i},setTopToolbar:function(e){var t=JSON.parse(e),i=new o,n=s.prototype.createTreeDocument(t);return new s({items:n,direction:"horizontal",typeRepresentationFactory:i,context:this})},fillTreeDoc:function(n,o){for(var s,a=0,l=null,r=null,d=0,_=new t({useAsyncPreExpand:!0}),f=0;f<o.length;f++)if("Status"===o[f].dataIndex){l=o[f].text,a=f;break}for(f=0;f<o.length;f++)!0===o[f].isHidden&&d++;var w=100/(o.length-d)+"%";for(f=0;f<o.length;f++)(s=o[f]).width=w,s.isDraggable=!1,s.isEditable=!1,s.height=38;(s=o[o.length-1]).width="auto";var C=[];for(f=0;f<o.length;f++)C[f]=o[f].text;for(var z=0;z<n.length;z++){for(var v=n[z],y={},S=0;S<C.length;S++){var B=C[S],D=v[S];y[B]=D}var M=new i({label:" ",grid:y});_.addRoot(M)}"Status"===l&&(r={text:l,dataIndex:l,isSortable:!0,isDraggable:!1,isEditable:!1,alwaysOn:!0,width:55,onCellRequest:function(e){if(!e.isHeader){var t=e.cellModel.getCellContent();if("SUCCESS"===t.toUpperCase()){var i=UWA.createElement("div",{class:"syc-green-circle-symbol"}),n=UWA.createElement("div",{class:"syc-check-symbol"});e.cellView.getContent().appendChild(i),e.cellView.getContent().appendChild(n)}if("FAILED"===t.toUpperCase()){i=UWA.createElement("div",{class:"syc-red-circle-symbol"}),n=UWA.createElement("div",{class:"syc-cross-symbol"});e.cellView.getContent().appendChild(i),e.cellView.getContent().appendChild(n)}}}},o[a]=r),o.unshift({text:"Tree",dataIndex:"tree",isHidden:!0}),h=new e({class:"iterationsTreeListView",id:"iterationsTreeListViewId",enableListSelection:!0,resize:{columns:!0,rows:!0},selection:{nodes:!0,rowHeaders:!0,columnHeaders:!1,toggle:!0},headersDimensions:{width:150,height:24},columns:o,treeDocument:_}),window._treeView=h,g.inject(u),m.inject(u),h.inject(c),h.getManager().getNodesXSO().onChange(function(){var e=h.getManager(),t=e.getSelectedRows();if(t.length>0){var i=e.getTreeNodeModelFromRowID(t[0]);if(i.options.grid.ObjectStatus){if("true"===i.options.grid.ObjectStatus.toLowerCase()){x=!0;i.options.grid.ID;null!=b&&b.destroy()}else!0===p._isRightOpen?(x=!0,p._hidePanel(" "),console.log(x)):x=!1}else{i.options.grid.ID;null!=b&&b.destroy()}}}),c.getElement(".wux-tree-treelistview").setStyle("height","inherit"),c.getElement(".wux-datagrid").setStyle("height","inherit"),c.getElement(".wux-layouts-gridengine").setStyle("height","inherit"),c.getElement(".wux-layouts-gridengine").setStyle("min-height","150px")},_displayData:function(){(p=new d).init({left:{resizable:!0,originalSize:240,originalState:"close",overMobile:!0},right:{resizable:!0,originalState:"close",overMobile:!0,autoCloseFlag:!0},borderRight:!0,borderLeft:!0,withtransition:!0},null,c,w),u.inject(C),p.inject(C),p._container.getElementsByClassName("triptych-close-right fonticon fonticon-wrong")[0].hidden=!0},_displayProperties:function(e){var t=h.getDocument().getSelectedNodes();if(0!=t.length)if(!1===x&&(x=!0),t[0]._options.grid.ObjectStatus){if("true"===t[0]._options.grid.ObjectStatus.toLowerCase()){var i=t[0]._options.grid.ID;if(!0===x&&!1===p._isRightOpen){0===b.getChildren().length?(b=propertyView.buildSlideIn(i,e,p),p._showPanel(" ")):p._showPanel(" "),console.log(x),x=!1}else{if(!0===p._isRightOpen)document.getElementById("slideInPropertiesContent").destroy(),p._hidePanel(" ");x=!0}}}else{i=t[0]._options.grid.ID;if(!0===x&&!1===p._isRightOpen)b.getChildren().length,p._showPanel(" "),x=!1;else if(x=!0,!0===p._isRightOpen)document.getElementById("slideInPropertiesContent").destroy(),p._hidePanel(" ")}}}});