"undefined"==typeof define&&(define=function(e,t,r){ParametersIterator=r(ValueType,ValueTypeAPI),define=void 0}),define("DS/CSICommandBinder/CSIParametersIterator",["DS/CSICommandBinder/CSIValueType","DS/CSICommandBinder/CSIValueTypeAPI"],function(e,t){"use strict";var r=function(e){e&&(this.keys_=Object.keys(e),this.currentKey=this.keys_.length>0?0:void 0)};r.prototype.next=function(){if(this.keys_&&this.currentKey<this.keys_.length){var e=++this.currentKey;return e===this.keys_.length&&(delete this.keys_,delete this.currentKey),e}},r.prototype.getName=function(){if(this.keys_&&this.currentKey<this.keys_.length)return this.keys_[this.currentKey]},r.prototype.equal=function(e){return this.currentKey===e.currentKey};var i=function(e,t,i){this.parameters_=e,this.it_=new r(t?void 0:e.propertyMap_),this.stringValueWithType_=i};i.prototype.next=function(){return this.parsedParameters_=void 0,this.it_.next()},i.prototype.equal=function(e){return this.parameters_===e.parameters_&&this.it_.equal(e.it_)},i.prototype.getName=function(){return this.it_.getName()},i.prototype.getType=function(){var e=this.it_.getName();if(void 0!==e)return t.readValueTypeAsString(this.parameters_.propertyMap_[e])},i.prototype.isObject=function(){var e=this.it_.getName();if(e)return t.isObject(this.parameters_.propertyMap_[e])},i.prototype.isObjectArray=function(){var e=this.it_.getName();if(e)return t.isObjectArray(this.parameters_.propertyMap_[e])};var a=function(e){if(e.isObject()){if(!e.parsedParameters_){var t=e.it_.getName();if(t){var r=new e.parameters_.__proto__.constructor;r.fromBinary(e.parameters_.propertyMap_[t])&&(e.parsedParameters_=r)}}return e.parsedParameters_}};i.prototype.objectBegin=function(){var e=a(this);if(e)return new i(e,!1,this.stringValueWithType_)},i.prototype.objectEnd=function(){var e=a(this);if(e)return new i(e,!0,this.stringValueWithType_)},i.prototype.getObjectArraySize=function(){var e=this.it_.getName();if(e)return t.getObjectArraySize(this.parameters_.propertyMap_[e])};var n=function(e){if(e.isObjectArray()){if(!(e.parsedParameters_ instanceof Array)){var r=e.it_.getName();if(r){var i=t.readParametersArrayBinaries(e.parameters_.propertyMap_[r]),a=[];if(i instanceof Array)for(var n=0;n<i.length;++n){var s=new e.parameters_.__proto__.constructor;s.fromBinary(i[n])&&(a[n]=s)}e.parsedParameters_=a}}return e.parsedParameters_}};i.prototype.objectArrayBegin=function(e){var t=n(this);if(t instanceof Array&&e<t.length&&t[e])return new i(t[e],!1,this.stringValueWithType_)},i.prototype.objectArrayEnd=function(e){var t=n(this);if(t instanceof Array&&e<t.length&&t[e])return new i(t[e],!0,this.stringValueWithType_)};var s=function(e,r){if(e.isObject()){var i=a(e);if(i)return r?i[r]():i}else if(e.isObjectArray()){var s=n(e);if(s instanceof Array){for(var o=[],p=0;p<s.length;p++)if(r)if("toTypedObject"===r){var f={};f.type=s[p].typeName_,f.value=s[p][r](),o.push(f)}else o.push(s[p][r]());else o.push(s[p]());return o}}var u=e.it_.getName();if(u)return t.readValue(e.parameters_.propertyMap_[u])};return i.prototype.getTypedValue=function(){var t=s(this,"toTypedObject");if(t instanceof ArrayBuffer)return e.stringifyBufferFromBinary(t);if(void 0!==t.length&&t[0]instanceof ArrayBuffer){for(var r="[",i=0;i<t.length;++i){if(!(t[i]instanceof ArrayBuffer))return"Error: Unable to convert a buffers array to string";r+=e.stringifyBufferFromBinary(t[i]),i+1<t.length&&(r+=",")}return r+="]"}return t},i.prototype.getJSValue=function(){return s(this,"toJSObject")},i.prototype.getStringValue=function(){var t=s(this,"toTypedObject");if(t){if(t instanceof ArrayBuffer)return'"'+e.stringifyBufferFromBinary(t)+'"';var r=this.getType();return"string"===r?'"'+t+'"':JSON.stringify(t)}},i});