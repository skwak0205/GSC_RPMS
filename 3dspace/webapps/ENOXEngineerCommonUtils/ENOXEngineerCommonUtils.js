define("DS/ENOXEngineerCommonUtils/CancelablePromise",["UWA/Promise"],function(t){"use strict";var e=t;return e.prototype.cancelEmbeddedRequest=function(t){this.xEngEmbeddedRequest&&this.xEngEmbeddedRequest.cancel()},e}),define("DS/ENOXEngineerCommonUtils/xEngAlertManager",["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen"],function(t,e,n){"use strict";return{_notif_manager:null,init:function(n){null===this._notif_manager&&(this._notif_manager=t,e.setNotificationManager(this._notif_manager),e.setStackingPolicy(5),e.setRemoveStackOnFirstTimeoutFlag(!0),e.setFadeOutPolicy(2))},errorAlert:function(t,e){this._notif_manager||this.init(),this._notif_manager.addNotif({level:"error",title:e,message:t,sticky:!1})},sucessAlert:function(t){this._notif_manager||this.init(),this._notif_manager.addNotif({level:"success",message:t,sticky:!1})},notifyAlert:function(t){this._notif_manager||this.init(),this._notif_manager.addNotif({level:"info",message:t,sticky:!1})},warningAlert:function(t){this._notif_manager||this.init(),this._notif_manager.addNotif({level:"warning",message:t,sticky:!1})},customNotif:function(t){this._notif_manager||this.init(),this._notif_manager.addNotif(t)},errorNotif:function(t){this.customNotif({...t,level:"error",sticky:!1})},warningNotif:function(t){this.customNotif({...t,level:"warning",sticky:!1})}}}),define("DS/ENOXEngineerCommonUtils/XENModal",["DS/ENOFloatingPanel/ENOFloatingPanel","UWA/Core","i18n!DS/ENOXEngineerCommonUtils/assets/nls/XENCommonNls.json"],function(t,e,n){"use strict";function i(i){var o=this;this.options={title:"Dialog",persitId:i.persitId||"XEN_dialog",withFooter:!0},this.options=e.extend(this.options,i),this.options.events={onClose:function(){o.options.onClose&&o.options.onClose.apply(),o.destroy()},onHide:function(){o.options.onClose&&o.options.onClose.apply(),o.destroy()}},this.modal=function(e){return new t({className:e.className||"",closable:!0,title:e.title,body:"",footer:"",animate:!0,resizable:!0,autocenter:!0,visible:!0,limitParent:!0,overlay:!0,persistId:e.persitId||"XEN_dialog",events:e.events||{}})}(this.options),setTimeout(function(){var t=200,e=200;o.options.minSize&&(o.options.minSize.width&&(t=o.options.minSize.width),o.options.minSize.height&&(e=o.options.minSize.height)),o.modal&&o.modal.setMinSize(t,e)},10);var r=widget?widget.body:document.body;this.modal.inject(r),this.options.withFooter&&(this.options.customFooter?this.modal.setFooter(this.options.customFooter()):this.modal.setFooter("<button type='button' name='okButton' class='btn btn-primary'>"+n.get("eng.ui.button.ok")+"</button> <button type='button' name='cancelButton' class='btn btn-default'>"+n.get("eng.ui.button.cancel")+"</button>"),this._bindFooterEvent())}return i.prototype.isNotDestroyed=function(){return this.modal&&this.options},i.prototype.setNewSize=function(t){this.modal.setNewSize(t)},i.prototype.show=function(){this.modal.show()},i.prototype.dispose=function(){this.modal.hide()},i.prototype.injectBody=function(t){this.modal.setBody(t)},i.prototype.inject=function(t){this.modal.inject(t)},i.prototype.getBody=function(){return this.modal.getBody()},i.prototype.injectHeader=function(t){this.modal.setHeader(t)},i.prototype.injectFooter=function(t){this.modal.setFooter(t)},i.prototype._unbindFooterEvent=function(){},i.prototype._bindFooterEvent=function(){var t=this;this.modal.getFooter().getElements(".btn").forEach(function(e){"cancelButton"===e.name&&e.addEvent("click",function(){t.options.onClose&&t.options.onClose.apply(),t.destroy()}),"okButton"===e.name&&e.addEvent("click",function(){t.options.onValidate&&t.options.onValidate.apply(),t.destroy()})})},i.prototype.getContent=function(){return this.modal.getContent()},i.prototype.destroy=function(){this.options.relatedCommand&&"function"==typeof this.options.relatedCommand&&this.options.relatedCommand.end(),this.modal.destroy();for(var t=Object.keys(this),e=0;e<t.length;e++)this[t[e]]=void 0,delete this[t[e]]},i}),define("DS/ENOXEngineerCommonUtils/XENCommonConstants",[],function(){"use strict";return{SERVICE_3DSPACE_NAME:"3DSpace",SERVICE_3DCOMPASS_NAME:"3DCompass",SERVICE_3DSWYM_NAME:"3DSwym",SERVICE_3DSEARCH_NAME:"3DSearch",SERVICE_3DPASSPORT_NAME:"3DPassport",SERVICE_6WTAGS_NAME:"6WTags",SERVICE_COMMENT_NAME:"comment",SERVICE_3DNOTIFICATIONS_NAME:"3dnotifications",ERROR_TYPE_TIMEOUT:"Timeout"}}),define("DS/ENOXEngineerCommonUtils/XENMask",["UWA/Core","DS/Controls/Loader","i18n!DS/ENOXEngineerCommonUtils/assets/nls/XENCommonNls.json"],function(t,e,n){"use strict";return{mask:function(i,o){var r;this.isMasked(i)&&this.unmask(i),i.addClassName("masked"),r=t.createElement("div",{class:"mask"}),this.loader=new e({text:t.is(o,"string")?o:n.get("loading"),showButtonFlag:!1}),o=t.createElement("div",{class:"mask-wrapper",html:{tag:"div",class:"mask-content",html:[this.loader]}}).inject(r),this.loader.on(),r.inject(i)},unmask:function(t){var e=t.getElement(" > .mask");e&&(e.destroy(),this.loader&&(this.loader.off(),this.loader.destroy(),this.loader=null)),t.removeClassName("masked")},isMasked:function(t){return t.hasClassName("masked")}}}),define("DS/ENOXEngineerCommonUtils/PromiseUtils",["UWA/Promise","DS/ENOXEngineerCommonUtils/CancelablePromise"],function(t,e){"use strict";return{wrappedWithPromise:function(e){return new t(e)},wrappedWithCancellablePromise:function(t){return new e(t)},allSettled:function(e){return t.allSettled(e)},all:function(e){return t.all(e)}}}),define("DS/ENOXEngineerCommonUtils/XENPlatform3DXSettings",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/ENOXEngineerCommonUtils/PromiseUtils","DS/ENOXEngineerCommonUtils/XENCommonConstants","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext","DS/ENOXEngineerCommonUtils/xEngAlertManager","text!DS/ENOXEngineerCommonUtils/assets/config/commonConf.json"],function(t,e,n,i,o,r,s,a,c){"use strict";var l=JSON.parse(c);return{_isPlatformDataInitialized:!1,_platforms:null,_user:null,_discoveringPlatformPromise:null,getCommand:function(e){return t.is(e,"string")&&t.is(l.commands[e])?l.commands[e]:null},getLanguage:function(){return widget.lang&&widget.lang.length>1?widget.lang:"en"},_checkRoles:function(t){var e=this.getPlatformId();if(!Array.isArray(t)||!Array.isArray(this.roles))return!1;for(var n=0;n<t.length;n++)for(var i=0;i<this.roles.length;i++)if(this.roles[i].id===t[n]&&e&&this.roles[i].platforms&&-1!==this.roles[i].platforms.indexOf(e))return!0;return!1},isConfigRoleGranted:function(){return this._checkRoles(["CDN","CFG","CH2","CH5","CMM","COD","COX","CTP","DPM","EEW","GLR","MBO","PDA","PDM","QUM","REM","SAZ","SDZ","SMZ","SPJ","SPM","SPV","TRM","UWE","UWU","UXG","UWG","InternalDS"])},getWidgetId:function(){try{return widget&&widget.id?widget.id:"widget-odt"}catch(t){return"widget-odt"}},switchPlatformId:function(t){return!(!t||!t instanceof String)&&(widget.setValue("x3dPlatformId",t),this._platformId=t,a.sucessAlert(this.app.core.i18nManager.get("platform-changed")),!0)},setPlatformId:function(t){!t||!t instanceof String||(this._platformId=t)},getPlatformId:function(){if(this._platformId)return this._platformId;try{return widget&&(this._platformId=widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):this._getAlternativePlatformId()),this._platformId}catch(t){return"OnPremise"}},isTenantBasedService:function(t){return l.tenantBasedServices.indexOf(t)>=0},isCloud:function(){var t=!0;return"OnPremise"===this.getPlatformId()&&(t=!1),t},_getAlternativePlatformId:function(){return this._platforms.OnPremise?"OnPremise":this.isWebInWinEnvironment()?(this._platformId=this.getUrlParameter("tenant")||"OnPremise",this._platformId):null},bindCommandsToABackend:function(t){var e=this;return e.bindCommandPromise?e.bindCommandPromise:(e.bindCommandPromise=i.wrappedWithPromise(function(n,i){e.discoverRelated3DXPlatform().then(function(){if(!t)return n(!0);e.retrieveUserPreferredSC().then(function(){n(!0)}).catch(function(t){console.error(t),i(!1)})}).catch(function(){i(!1)})}),e.bindCommandPromise)},isRelatedPlatformSet:function(){return this._isPlatformDataInitialized},discoverRelated3DXPlatform:function(){var t=this;return t._discoveringPlatformPromise?t._discoveringPlatformPromise:(t._discoveringPlatformPromise=i.wrappedWithPromise(function(e,n){t.getAllPlatforms().then(function(){t.loadCurrentUserRoles().then(function(){t.retrieveCurrentUser().then(function(){t._isPlatformDataInitialized=!0,e(!0)},function(t){let e="Error retrieveCurrentUser "+t;console.log(e),n(e)})},function(t){let e="Error loadCurrentUserRoles "+t;console.log(e),n(e)})},function(t){let e="Error getAllPlatforms"+t;console.log(e),n(e)})}),t._discoveringPlatformPromise)},retrieveUserPreferredSC:function(){var t=this;return i.wrappedWithPromise(function(e,i){t.discoverRelated3DXPlatform().then(function(){var o=l&&l.commands?l.commands.getPreferredSC:null;if(!o)return i();if(t._preferredSC)return e(t._preferredSC);var r=t.getServiceURL(o.targetService)+o.url+"?tenant="+t.getPlatformId();n.authenticatedRequest(r,{method:"GET",type:"json",onComplete:function(n){if(n)return t._preferredSC=n.SecurityContext,e();i()},onFailure:function(){return i()}})}).catch(function(){i()})})},hasSecurityContext:function(){return this.getSecurityContext()},setDefaultSecurityContext:function(t){this._sc=t},getPreferredSC:function(){return this._preferredSC},getSecurityContext:function(){return this._sc?this._sc:this.getPreferredSC()},getSecurityToken:function(){return(this.getCurrentUser()||{}).id+"|ctx::"+this.getSecurityContext()+"|preferred"},securityContextPromise:null,getDefault3DSpaceUrl:function(){return this.getServiceURL(o.SERVICE_3DSPACE_NAME)},getDefault3DSearchUrl:function(){return this.getServiceURL(o.SERVICE_3DSEARCH_NAME)},get3DCompassUrl:function(){return this.getServiceURL(o.SERVICE_3DCOMPASS_NAME)},get6wTagURL:function(){return this.getServiceURL(o.SERVICE_6WTAGS_NAME)},getDefault3DSpaceURI:function(t){var e=this.getDefault3DSpaceUrl();return e.substring(0,e.indexOf("/"+o.SERVICE_3DSPACE_NAME))},getServiceURL:function(t,e){return e=e||this.getPlatformId(),this._platforms&&this._platforms[e]&&this._platforms[e][t]?this._platforms[e][t]:null},getAuthorizedChange:function(){return this.authorizedChange=s.get(),this.authorizedChange},isChangeAuthorized:function(){var t=this.getAuthorizedChangeId();return null!=t&&""!=t},getAuthorizedChangeId:function(){let t=this.getAuthorizedChange();return t&&t.change?t.change.id:null},getCurrentUser:function(){return this._user},getUserName:function(){var t=this._user;return t?t.firstName+" "+t.lastName:""},getCollabSpaceTitle:function(){var t="";const e=widget.getPreference("SC").options.filter(function(t){return t.value===widget.getValue("SC")});return Array.isArray(e)&&e.length>0&&(t=e[0].collabSpaceTitle),t},getWorkUnderHeaders:function(){return this.getAuthorizedChange(),this.authorizedChange&&this.authorizedChange.AuthoringContextHeader?Object.assign({},this.authorizedChange.AuthoringContextHeader):{}},getAppId:function(){try{return widget&&widget.getValue("x3dAppId")?widget.getValue("x3dAppId"):""}catch(t){return""}},getAllPlatforms:function(){var e=this;return i.wrappedWithPromise(function(n,i){r.getPlatformServices({onComplete:function(o){let s=[],a=[];o.length>0&&o[0].platformId&&(o.forEach(function(t){let e=t.platformId,n=t.displayName;s.push({platformId:e,value:e,label:n})}),e.configuredTenantList=s);var c=!1;if("undefined"!=typeof widget&&s&&s.length>1){var l=s[0].platformId;l&&-1===["OnPremise"].indexOf(l)&&(console.count("checkAppInfo"),c=!0)}c&&r.getAppInfo({appId:e.getAppId(),onComplete:function(t){var n=!(!t||!t.tenantAware)&&t.tenantAware;if(n){for(var i=0;i<t.platforms.length;i++)for(var o=0;o<s.length;o++)if(!n||s[o].platformId===t.platforms[i].id){a.push(s[o]);break}e.configuredTenantList=a}else e.configuredTenantList=s},onFailure:function(t){console.error("Cannot retrieve the App Info"),callback({success:!1})}});var u=function(e){if(t.is(e,"array")&&e.length>0){var n={};return e.forEach(function(t){n[t.platformId]=t}),n}return null}(o);if(null===u)return i("cannot retrieve platform data");e._platforms=u,n(u)},onFailure:i})})},retrieveCurrentUser:function(){var t=this;return i.wrappedWithPromise(function(e,n){if(t._user&&t._user.id)return e(t._user);r.getUser({onComplete:function(n){t._user={id:n.id,email:n.email,firstName:n.firstname,lastName:n.lastname},e(t._user)},onFailure:n})})},loadCurrentUserRoles:function(){var t=this;return i.wrappedWithPromise(function(e,n){r.getGrantedRoles(function(n){t.roles=n,e(n)})})},isNatifEnvironnement:function(){return"undefined"!=typeof dscef},isWebInWinEnvironment:function(){return this.isCatiaV6Environment()||this.isCatiaV5Environment()||this.isSolidworksEnvironment()},isBuildSecurityContext:function(){return this.isCatiaV6Environment()||1==this.getUrlParameter("BuildSecurityContextforCloud")||"true"==this.getUrlParameter("BuildSecurityContextforCloud")},isCatiaV6Environment:function(){return"catiav6"===this._getEnvironment()},isCatiaV5Environment:function(){return"catiav5"===this._getEnvironment()},isSolidworksEnvironment:function(){return"solidworks"===this._getEnvironment()},_getEnvironment:function(){return this.getUrlParameter("addinmode")},getUrlParameter:function(t){return this._getUrlParameters()[t]},_getUrlParameters:function(){if(!this.storedUrlParams){var t={},e=[window.top.location];window!==window.top&&e.push(window.location),e.forEach(function(e){e.search.substr(1).split("&").forEach(function(e){var n=e.split("=");n.length>1&&(t[n[0]]=n[1])})}),this.storedUrlParams=t}return this.storedUrlParams}}}),define("DS/ENOXEngineerCommonUtils/XENWebInWinHelper",["UWA/Core","UWA/Class","DS/WebToWinInfra/WebToWinCom","DS/ENOXEngineerCommonUtils/XENPlatform3DXSettings"],function(t,e,n,i){"use strict";return e.singleton({init:function(t){this._parent(t)},initializeSocket:function(){i.isWebInWinEnvironment()&&this.getSocket()},createWebInWinSocket:function(t){return n.createSocket({socket_id:t})},getSocket:function(){return this.socket?this.socket:(this.socket=this.createWebInWinSocket("xen_web_in_win"),this.socket)},closePanel:function(t){i.isWebInWinEnvironment()&&(1==t&&i.isCatiaV6Environment()?this.getSocket().dispatchEvent("onDispatchToWin",{notif_name:"errorThrown",notif_parameters:"errorThrown"},"xen_web_in_win"):this.getSocket().dispatchEvent("onDispatchToWin",{notif_name:"ClosePanel",notif_parameters:"ClosePanel"},"xen_web_in_win"))},notifyUpdatedEnterpriseItem:function(t){i.isWebInWinEnvironment()&&this.getSocket().dispatchEvent("onDispatchToWin",{notif_name:"engineering/setPartNumber",notif_parameters:JSON.stringify({action:"engineering/setPartNumber",Args:[{Name:"response",Value:t}]})},"xen_web_in_win")},commandViewReady:function(){i.isWebInWinEnvironment()&&this.getSocket().dispatchEvent("onDispatchToWin",{notif_name:"engineering/viewready",notif_parameters:JSON.stringify({action:"engineering/viewready",Args:[{Name:"status",Value:"up"}]})},"xen_web_in_win")}})}),define("DS/ENOXEngineerCommonUtils/XENTracker",["DS/Usage/TrackerAPI","DS/ENOXEngineerCommonUtils/XENPlatform3DXSettings"],function(t,e){const n=["XENG_UPDATE_WIDGET_TITLE"],i=["/cvservlet/multiexpand","/cvservlet/expand","/cvservlet/progressiveexpand/v2","/resources/enoauthoring/expand/v1"];return class{static trackCommandLaunched(t){n.some(e=>e===t)||this.trackPageEvent({eventCategory:"command",eventAction:t,eventLabel:t})}static trackQueryResponse(t,e,n){try{const o=t.split("?")[0];i.some(t=>t===o)&&this.trackPageEvent({eventCategory:"query_expand",eventAction:e,eventLabel:o,eventValue:n})}catch(t){return}}static trackPageEvent({eventCategory:n,eventAction:i,eventLabel:o,eventValue:r}){let s={eventCategory:n||null,eventAction:i||null,eventLabel:o||null,eventValue:r||null,appID:e.getAppId(),tenant:e.getPlatformId()};t.trackPageEvent(s)}}}),define("DS/ENOXEngineerCommonUtils/XENGenericHttpClient",["DS/ENOXEngineerCommonUtils/XENPlatform3DXSettings","DS/WAFData/WAFData","UWA/Json","DS/ENOXEngineerCommonUtils/PromiseUtils","DS/ENOXEngineerCommonUtils/XENCommonConstants","DS/ENOXEngineerCommonUtils/XENTracker"],function(t,e,n,i,o,r){"use strict";return{buildUrl:function(e){var n=t.getServiceURL(e.targetService);return t.isTenantBasedService(e.targetService)?n=this.decorateUrlWithTenant(n+e.url):n+=e.url,e.sc_tenant_in_url&&(n=this.decorateUrlWithSecuritycontext(n)),e.queryParameters&&(n=this.decorateUrlWithQueryParameters(n,e.queryParameters)),n},buildChangeHeaders:function(e){return Object.assign(e,t.getWorkUnderHeaders())},decorateUrlWithSecuritycontext:function(e){var n=t.getSecurityContext(),i=e||"";if(e&&n&&n.length>0){var o=i.indexOf("?");i=o>-1?i+"&SecurityContext="+encodeURIComponent("ctx::"+t.getSecurityContext()):i+"?SecurityContext="+encodeURIComponent("ctx::"+t.getSecurityContext())}return i},decorateUrlWithTenant:function(e){var n=e||"",i=n.indexOf("?");return n=i>-1?n+"&tenant="+t.getPlatformId():n+"?tenant="+t.getPlatformId()},decorateUrlWithQueryParameters:function(t,e){if("string"==typeof t&&Array.isArray(e)){t+=`&${e.join("&")}`}return t},decorateWithAddtionnaloptions:function(e,n){n.noSecurityContextNeeded||n.targetService!==o.SERVICE_3DSPACE_NAME||(e.headers.SecurityContext=encodeURIComponent("ctx::"+t.getSecurityContext()),e.headers.SecurityToken=encodeURIComponent(t.getSecurityToken()))},perform:function(s,a){var c=this,l=null,u=i.wrappedWithCancellablePromise(function(i,m){var d=null;!function(t){if(!(t&&t.url&&t.method&&t.type&&t.targetService))throw new Error("the request is not valid !!")}(s),d="file"===s.type||s.useFormData?a:!UWA.is(a)||n.isJson(a)||UWA.is(a,"string")?a:n.encode(a);var f={method:s.method,cache:s.cache||!1,type:s.type,data:d,headers:{}};"json"===s.type?f.headers={Accept:"application/json","Content-Type":"application/json","Accept-Language":t.getLanguage()}:"xml"===s.type?f.headers={Accept:"application/xml","Content-Type":"application/xml","Accept-Language":t.getLanguage()}:"octet-stream"===s.type?f.headers={"Content-Type":"application/json","Accept-Language":t.getLanguage()}:"file"===s.type?f.headers={Accept:"application/json","Accept-Language":t.getLanguage()}:"text"===s.type&&(f.headers={"Content-Type":"application/x-www-form-urlencoded","Accept-Language":t.getLanguage()}),s.timeout&&(f.timeout=s.timeout),s.customHeaders&&(f.headers=Object.assign(f.headers,s.customHeaders)),s.noContentType&&delete f.headers["Content-Type"],c.decorateWithAddtionnaloptions(f,s),!0===s.isChangeControlled&&(f.headers=c.buildChangeHeaders(f.headers));var g=c.buildUrl(s);const h=Date.now();var p=function(t,e){r.trackQueryResponse(s.url,"Failure");var n={error:t,response:e};u&&delete u.xEngEmbeddedRequest,l=null,m(n)};f.onComplete=function(t){const e=Date.now()-h;r.trackQueryResponse(s.url,"Complete",e),u&&delete u.xEngEmbeddedRequest,l=null,i(t)},f.onFailure=p,f.onCancel=p,f.onTimeout=function(t,e){r.trackQueryResponse(s.url,"Timeout");var n={error:t,response:e,type:o.ERROR_TYPE_TIMEOUT};u&&delete u.xEngEmbeddedRequest,l=null,m(n)},l=e.authenticatedRequest(g,f)});return u.xEngEmbeddedRequest={cancel:function(t){l&&l.cancel(),l&&l.xhr&&l.xhr.timeoutTimer&&clearTimeout(l.xhr.timeoutTimer)}},u}}}),define("DS/ENOXEngineerCommonUtils/XENCommandsAppContextProxy",["DS/ENOXEngineerCommonUtils/XENPlatform3DXSettings","DS/ENOXEngineerCommonUtils/XENGenericHttpClient","DS/ENOXEngineerCommonUtils/PromiseUtils"],function(t,e,n){"use strict";return{getAppContextPromise:function(t){return n.wrappedWithPromise(function(e,n){return t?t.options&&t.options.context?e(t.options.context):(t.options||(t.options={}),void require(["DS/PADUtils/PADContext"],function(n){t.options.context=n.get(),e(t.options.context)},function(t){n(t)})):n(null)})},loadCommandsSetting:function(){if(this.commandsSettingsPromise)return this.commandsSettingsPromise;return this.commandsSettingsPromise=n.wrappedWithPromise(function(n,i){t.bindCommandsToABackend(!0).then(function(){var o=t.getCommand("get_command_settings");e.perform(o).then(function(t){return"string"==typeof t&&(t=JSON.parse(t)),n(t)}).catch(function(t){i(t)})})}),this.commandsSettingsPromise}}});