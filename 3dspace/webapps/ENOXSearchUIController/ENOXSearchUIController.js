define("DS/ENOXSearchUIController/ObjectOpenSearchUtil",["UWA/Core","UWA/Utils/InterCom"],function(e,t){"use strict";return{initialize:function(){this.socketName="search_socket_"+(new Date).getTime(),this.socket=new t.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.listener=this.objectsSelected.bind(this),this.socket.addListener("Selected_Objects_search",this.listener);var e=this;return this.socket.addListener("onCloseTransient",function(){e.socket.dispatchEvent("UnregisterContext",{widget_id:widget.id})}),this},options:function(t,i,s,c,r,n,a,o,d){var h={};return h.title=t,h.mode=a?"default":"furtive",h.app_socket_id=this.socketName,h.widget_id=widget.id,h.default_with_precond=!e.is(d)||d,h.show_precond=!1,h.idcard_activated=o||!1,h.multiSel=!!e.is(r)&&r,h.role=s,h.tenant=widget.data.x3dPlatformId,h.default_search_criteria=c?"("+c+")":"",i?(h.precond="(",Array.isArray(i)||(i=i.split(",")),i.forEach(function(e,t){0!==t&&(h.precond+=" OR "),h.precond+='type:"'+e+'"'}),h.precond+=")",""!==n&&void 0!==n&&(h.precond+=n)):h.precond=n,h},destroy:function(){var e={};e.widget_id=widget.id,this.socket.dispatchEvent("unregisterSearchContext",e),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.disconnect(),delete this.socket},activate:function(e,t,i,s,c,r,n,a,o,d){var h=this.options(e,t,i,s,c,r,n,a,o);this.callback=d,this.socket.dispatchEvent("RegisterContext",h),this.socket.dispatchEvent("InContextSearch",h)},isAvailable:function(){return e.is(this.socket)},configureSearch:function(e){this.isAvailable()||this.initialize(e)},launchSearch:function(e){this.activate(e.title,e.allowedTypes,e.role||"",e.criteria,e.multiSel,e.excludeList,e.defaultMode,e.idcard_activated,e.default_with_precond,function(t){e.in_apps_callback(t)})},objectsSelected:function(e){var t,i,s=[];if(this.callback){for(t=0,i=e.length;t<i;t++)s.push(e[t]);this.callback(s)}}}});