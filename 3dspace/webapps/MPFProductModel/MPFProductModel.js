define("DS/MPFProductModel/ProductModel",["UWA/Core","DS/MPFModel/MPFModel","DS/MPFConnector/NoConnector","DS/MPFDataProxy/NoDataProxy","DS/MPFSubscriptionModel/SubscriptionModel","DS/MPFSubscriptionModel/SubscriptionCollection","DS/MPFSubscriptionModel/SubscriptionFactory","DS/MPFSubscriptionModel/UnsubscribeDataProxy"],(t,e,r,i,s,n,o,c)=>{"use strict";const u=Object.freeze({DISPLAY_NAME:"displayName",SUBSCRIPTIONS:"subscriptions",TOTAL_QUANTITY:"totalQuantity",PRODUCT_TRIGRAM:"productTrigram",MARKETING_URL:"marketingUrl",LICENSING_SCHEME:"licensing_scheme",PRODUCT_NUMBER:"product_number",LICENSOR_ID:"licensor_id",INCLUDED_PRODUCTS:"includedProducts",RENEWABLE:"renewable",IS_MARKETPLACE_OFFER:"isMarketplaceOffer",DESCRIPTION:"description",BUYABLE:"buyable"}),S=Object.freeze({YSC:"YSC",QSC:"QSC",QRC:"QRC",MSC:"MSC"}),a=e.extend({defaults(){const t={};return t[u.DISPLAY_NAME]=null,t[u.SUBSCRIPTIONS]=null,t[u.TOTAL_QUANTITY]=null,t[u.PRODUCT_TRIGRAM]=null,t[u.MARKETING_URL]=null,t},init(t,e={}){this.subscriptionFactory=e.subscriptionFactory,this._parent(t,e)},setup(t,e){this._parent(t,e),this._type="ProductModel"},parse(t){const e=t;return e.subscriptions=this._parseSubscriptions(t.subscriptions,t.offerId),e},_parseSubscriptions(e=[],r){let c;return t.is(r)&&e.forEach(t=>{t[s.Fields.OFFER_ID]=r}),c=this.subscriptionFactory?this.subscriptionFactory.createCollection(o.Types.UNSUBSCRIBE,e,{parse:!0}):new n(e,{parse:!0,dataProxy:i.getInstance()})},getDisplayName(){return this.get(u.DISPLAY_NAME)},getTotalQuantity(){return this.get(u.TOTAL_QUANTITY)},getSubscriptions(){return this.get(u.SUBSCRIPTIONS)},getProductTrigram(){return this.get(u.PRODUCT_TRIGRAM)},getProductNumber(){return this.get(u.PRODUCT_NUMBER)||this.get("productNumber")},getLicensingScheme(){return this.get(u.LICENSING_SCHEME)||this.get("licensingScheme")},getLicensorId(){return this.get(u.LICENSOR_ID)||this.get("licensorId")},getMarketingUrl(){return this.get(u.MARKETING_URL)},hasSubscriptionsForLicensingScheme(t){const e=this.getSubscriptions().find(e=>e.getLicensingScheme()===t);return e&&e.getActiveQuantity()>0},hasYearlySubscription(){return this.getSubscriptions().some(t=>t.getLicensingScheme()===S.YSC)},getYearlySubscription(){return this.getSubscriptions().find(t=>t.getLicensingScheme()===S.YSC)},hasQuarterlySubscription(){return this.getSubscriptions().some(t=>t.getLicensingScheme()!==S.YSC)},getQuarterlySubscription(){return this.getSubscriptions().find(t=>t.getLicensingScheme()!==S.YSC)},getIncludedProducts(){return this.get(u.INCLUDED_PRODUCTS)},getAvailableLicensingSchemes(){return Object.keys(this.getSubscriptions().groupBy(s.Fields.LICENSING_SCHEME))},isMarketplaceOffer(){return!0===this.get(u.IS_MARKETPLACE_OFFER)},isRenewable(){return!0===this.get(u.RENEWABLE)},isBuyable(){return!0===this.get(u.BUYABLE)},getDescription(){return this.get(u.DESCRIPTION)},isEdu(){return(this.getProductTrigram()||"").endsWith("-AC")}});return a.Fields=u,a.RevTypes=S,a}),define("DS/MPFProductModel/ProductCollection",["DS/MPFModel/MPFCollection","DS/MPFProductModel/ProductModel"],function(t,e){"use strict";return t.extend({model:e,setup:function(t,e){this.constraints=e.constraints||null,this.subscriptionFactory=e.subscriptionFactory,this._parent(t,e)}})}),define("DS/MPFProductModel/ProductFactory",["DS/MPFModelFactory/Factory","DS/MPFProductModel/ProductModel","DS/MPFProductModel/ProductCollection","DS/MPFDataProxy/NoDataProxy"],function(t,e,r,i){"use strict";const s={PRODUCT:"Product"},n=t.extend({init(t,e={}){this.subscriptionFactory=e.subscriptionFactory,this._parent(t,e)},createModel(t=s.PRODUCT,r,i){return this._parent(e,t,r,Object.assign({subscriptionFactory:this.subscriptionFactory},i))},createCollection(t=s.PRODUCT,e,i){return this._parent(r,t,e,Object.assign({subscriptionFactory:this.subscriptionFactory},i))},getDataProxy:()=>i.getInstance()});return n.Types=s,n});