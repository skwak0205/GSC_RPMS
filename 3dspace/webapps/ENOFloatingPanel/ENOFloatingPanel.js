define("DS/ENOFloatingPanel/ENOFloatingPanel-Webrecord",["DS/WebRecordEnabler/Adapter"],function(e){return{customReplay:function(t){if(e.TraceManager.info(t),delete t.target,delete t.DOMelem,"ENOFloatingPanel Interaction"===t.data.source){var i=null;"resize"===t.data.data.type?(i=document.querySelector(".EditPropPopup_Resize")).style.display="block":i=document.querySelector("[data-rec-id=FloatingPanelComponent-modalHeader");var n={x:"move"===t.data.data.type?i.getParent().getParent().getParent().getPosition().x:i.getPosition().x,y:"move"===t.data.data.type?i.getParent().getParent().getParent().getPosition().y:i.getPosition().y},s=document.createEvent("MouseEvents"),a=document.createEvent("MouseEvents"),o=document.createEvent("MouseEvents");return o.initEvent("mouseup",!0,!0),s.initMouseEvent("mousedown",!0,!0,window,1,n.x,n.y,n.x,n.y,!1,!1,!1,!1,0,null),a.initMouseEvent("mousemove",!0,!0,window,1,n.x+t.data.data.percentages.x*window.innerWidth,n.y+t.data.data.percentages.y*window.innerHeight,n.x+t.data.data.percentages.x*window.innerWidth,n.y+t.data.data.percentages.y*window.innerHeight,!1,!1,!1,!1,0,null),i.dispatchEvent(s),document.dispatchEvent(a),i.dispatchEvent(o),i.getParent().getParent().getParent().getPosition().x+i.getPosition().x!==n.x||i.getParent().getParent().getParent().getPosition().y+i.getPosition().x!==n.y}}}}),define("DS/ENOFloatingPanel/ENOFloatingPanel-RecordHelper",["DS/WebRecordEnabler/Adapter","DS/UIKIT/Modal"],function(e,t){"use strict";return{overrideMethods:function(i){var n={_lastAction:i._lastAction,_showResizeContainer:i._showResizeContainer,_firstActionOnHeaderMove:i._firstActionOnHeaderMove},s={source:"ENOFloatingPanel Interaction",data:{coordinates:{original:{},newCoordinates:{}},percentages:{},offsetPercentages:{},type:"resize"}};i._lastAction=function(t){"mouseup"===t.type&&(n._lastAction.apply(this,arguments),s.data.coordinates.newCoordinates.pageX=t.pageX,s.data.coordinates.newCoordinates.pageY=t.pageY,s.data.percentages.x=(s.data.coordinates.newCoordinates.pageX-s.data.coordinates.original.pageX)/window.innerWidth,s.data.percentages.y=(s.data.coordinates.newCoordinates.pageY-s.data.coordinates.original.pageY)/window.innerHeight,e.addCustomInteraction(this.elements.container,s,"DS/ENOFloatingPanel/ENOFloatingPanel-Webrecord",!1))},i._firstActionOnHeaderMove=function(e){n._firstActionOnHeaderMove.apply(this,arguments),s.data.coordinates.original.pageX=e.pageX,s.data.coordinates.original.pageY=e.pageY,s.data.offsetPercentages.x=(e.pageX-document.querySelector("[data-rec-id=FloatingPanelComponent-modalContainer").getPosition().x)/window.innerWidth,s.data.offsetPercentages.y=(e.pageY-document.querySelector("[data-rec-id=FloatingPanelComponent-modalContainer").getPosition().y)/window.innerHeight,s.data.type="move"},i._showResizeContainer=function(){n._showResizeContainer.apply(this,arguments),this.resizeContainer.show(),document.querySelector(".EditPropPopup_Resize").addEventListener("mousedown",function(){s.data.type="resize",s.data.coordinates.original.pageX=this.getParent().getParent().getParent().getPosition().x+this.getPosition().x,s.data.coordinates.original.pageY=this.getParent().getParent().getParent().getPosition().y+this.getPosition().y})};var a=t.extend(i);return e.register(a,"DS/ENOFloatingPanel/ENOFloatingPanel-Webrecord"),a}}}),define("DS/ENOFloatingPanel/ENOFloatingPanel",["UWA/Core","DS/WebappsUtils/WebappsUtils","DS/Utilities/TouchUtils","DS/W3DDComponents/Views/PinView","DS/WidgetServices/WidgetServices","DS/UIKIT/Modal","DS/UIKIT/Scroller",void 0!==window.DSWebRecord?"DS/ENOFloatingPanel/ENOFloatingPanel-RecordHelper":null,"css!DS/ENOFloatingPanel/ENOFloatingPanel.css","i18n!DS/ENOFloatingPanel/assets/nls/ENOFloatingPanel"],function(e,t,i,n,s,a,o,h,r,l){"use strict";var d=0;function c(){return!i.getTouchMode()}function g(e,t){var i=document.getElementsByClassName("ENOFloatingStyle"+e+"_js"),n=null;i&&i.length>0&&(n=i[0]),n||((n=document.createElement("style")).type="text/css",n.className="ENOFloatingStyle"+e+"_js",document.getElementsByTagName("head")[0].appendChild(n)),n.appendChild(document.createTextNode(t))}function u(e){var t=document.getElementsByClassName("ENOFloatingStyle"+e+"_js");t&&t.length>0&&t[0].parentNode.removeChild(t[0])}var m={defaultOptions:{className:" floatingPanelComponent",header:"",title:"",pinOptions:null,pinCallback:null,body:"",overlay:!1,closable:!1,hasSettings:!1,settingsCallback:null,animate:!1,resizable:!1,maximizable:!1,persistId:null,limitParent:!1,autocenter:!0,appNamePosition:1},launchPin:function(e){"function"==typeof this.options.pinCallback&&this.options.pinCallback.call(null,e.options),e.container.firstChild.click(),this._close()},init:function(e){var t=this;if(d++,this.floating_id=d,this.parentElement=s.getWidgetBody(),this.headerContainer=e.header,this.listOfTitleElement=[],!this.headerContainer){if(this.headerContainer=UWA.createElement("div",{class:"floatingPanel_Header"}),this.rightButtons=UWA.createElement("div",{class:"floatingPanel_RightButtons"}).inject(this.headerContainer),this.titleContainer=UWA.createElement("span",{class:"floatingPanel_title"}),this.titleContainer.inject(this.headerContainer),e.title&&this._fillTitleList(e.title,e),this.permanentTitle=UWA.createElement("span",{text:e.title}).inject(this.titleContainer),e.hasSettings&&UWA.createElement("span",{class:"right-actions  fonticon fonticon-cog ",title:l.get("EFP_Settings"),events:{click:function(){t._settings()},touchstart:function(){t._settings()}}}).inject(this.rightButtons),e.pinOptions){var i=new n(e.pinOptions);i.render(),UWA.createElement("span",{class:"right-actions  fonticon fonticon-publish ",title:l.get("EFP_PinWidget"),events:{click:function(){t.launchPin(i)},touchstart:function(){t.launchPin(i)}}}).inject(this.rightButtons)}!0===e.maximizable&&(this.minimizeButton=UWA.createElement("span",{class:"right-actions fonticon fonticon-resize-small",title:l.get("EFP_RestorePanel"),events:{click:function(){t._restore(),t.minimizeButton.setStyle("display","none"),t.maximizeButton.setStyle("display",t.origMaximizeStyle)},touchstart:function(){t._restore(),t.minimizeButton.setStyle("display","none"),t.maximizeButton.setStyle("display",t.origMaximizeStyle)}}}).inject(this.rightButtons),this.maximizeButton=UWA.createElement("span",{class:"right-actions fonticon fonticon-resize-full",title:l.get("EFP_MaximizePanel"),events:{click:function(){t.maximize()},touchstart:function(){t.maximize()}}}).inject(this.rightButtons)),!0===e.closable&&(e.closable=!1,UWA.createElement("span",{class:"right-actions  fonticon fonticon-cancel",title:l.get("EFP_ClosePanel"),events:{click:function(){t._close()},touchstart:function(){t._close()}}}).inject(this.rightButtons)),e.header=this.headerContainer}e.className=e.className?e.className:"",e&&(e.className+=this.defaultOptions.className),!0!==e.overlay&&(e.className+=" EFP_noOverlay"),!0!==e.animate&&(e.className+=" EFP_unanimated"),e.className+=" EFP_Number"+this.floating_id,this._parent(e),this._getSavedDimension(),this.initUI(),this._handleWidgetResize=function(){t._fixMaxWidthAndHeight(),t._resizeContainer(!1)},s.addWidgetResizeEvent(this._handleWidgetResize)},_fixMaxWidthAndHeight:function(){var e=this.elements.container,t=this.elements.header,i=t.getSize(),n=this.elements.body,s=this.parentElement.getSize(),a=this.elements.footer,o={width:0,height:0};a&&(o=a.getSize());var h=s.height-i.height-o.height-2;t.setAttribute("data-rec-id","FloatingPanelComponent-modalHeader"),n.setStyle("max-height",h+"px"),n.setStyle("max-width",s.width+"px"),n.setAttribute("data-rec-id","FloatingPanelComponent-modalBody"),e.setStyle("max-height",s.height+"px"),e.setStyle("max-width",s.width+"px"),e.setAttribute("data-rec-id","FloatingPanelComponent-modalContainer")},_changeWidth:function(e){this.__changeValue("width",e)},_changeHeight:function(e){this.__changeValue("height",e)},_changeTop:function(e){this.__changeValue("top",e)},_changeLeft:function(e){this.__changeValue("left",e)},__changeValue:function(e,t){var i="auto"===t;if(this.elements.container.setStyle(e,i?t:t+"px"),!i){var n={};n[e]=t,this._saveDimensionAndPosition(n)}},isDimensionSaved:function(){return this.dimensionSaved},getSavedDimensionFromId:function(e){var t=null;return e&&(t=localStorage.getItem("EFP_"+e)),this.dimensionSaved=!!t,t?JSON.parse(t):null},_getSavedDimension:function(){var e=null;return this.options.persistId&&(e=localStorage.getItem("EFP_"+this.options.persistId)),this.dimensionSaved=!!e,e?JSON.parse(e):null},_setSavedDimension:function(e){this.options.persistId&&localStorage.setItem("EFP_"+this.options.persistId,JSON.stringify(e))},_saveDimensionAndPosition:function(e){if(this.elements.container){var t=this._getSavedDimension();this._setSavedDimension(null),t=t||{},void 0!==e.width&&(t.width=e.width),void 0!==e.height&&(t.height=e.height),void 0!==e.top&&(t.top=e.top),void 0!==e.left&&(t.left=e.left),this._setSavedDimension(t)}},_fillTitleList:function(e,t){t||(t=this.options),this._removeTitleElements();var i=e,n=" - ".length,s=-1,a=UWA.createElement("span",{class:"titleElement_toHide floatingPanel_title"}).inject(this.headerContainer);for(this.listOfTitleElement.push(UWA.createElement("span",{text:i}).inject(a));(s=i.indexOf(" - "))>=0;){i=i.substring(s+n);a=UWA.createElement("span",{class:"titleElement_toHide floatingPanel_title"}).inject(this.headerContainer),this.listOfTitleElement.push(UWA.createElement("span",{text:i}).inject(a))}this.listOfTitleElement.length>t.appNamePosition&&this.listOfTitleElement.pop()},setTitle:function(e){this._fillTitleList(e),this._managerTitleContent()},_replaceTitle:function(e){this.permanentTitle.setText(e.getText())},_close:function(){this.dispatchEvent("onClose"),!this.options||this.options.events&&"function"==typeof this.options.events.onClose||this.destroy()},_settings:function(){"function"==typeof this.options.settingsCallback&&this.options.settingsCallback.call()},_maximize:function(){var e=this.parentElement.getSize(),t=e.height,i=e.width;this.setNewSize({width:i,height:t})},_restore:function(){if(this.lastResizeHeight>=0&&this.lastResizeWidth>=0){var e=this.lastResizeHeight,t=this.lastResizeWidth;this.setNewSize({width:t,height:e})}else this._setAutoWidthAndHeight()},initialClient:{x:0,y:0},dragging:!1,resizing:!1,_getCurrentClientPosition:function(e){return null!=e.changedTouches?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:{x:e.clientX,y:e.clientY}},setNewSizeWithDiff:function(e){this.previousHeight=-1,this.previousWidth=-1;var t=this.elements.container.getSize();null!=e.x?t.width+=e.x:t.width=null,null!=e.y?t.height+=e.y:t.height=null,this.setNewSize(t)},setNewBodySize:function(e){this.previousHeight=-1,this.previousWidth=-1;var t=this.elements.body;if(t){var i=t.getDimensions(),n=i.outerWidth-i.innerWidth,s=i.outerHeight-i.innerHeight;this._setAutoWidthAndHeight(),e.width&&t.setStyle("width",e.width+n+"px"),e.height&&t.setStyle("height",e.height+s+"px"),this._resizeContainer(!0)}},_setAutoWidthAndHeight:function(){var e=this.elements.body;this.elements.container;e.setStyle("height","auto"),e.setStyle("width","auto"),this._changeWidth("auto"),this._changeHeight("auto")},setNewSize:function(e){this.previousHeight=-1,this.previousWidth=-1;var t=this.elements.container;if(t){t.getSize();var i=this.parentElement.getSize();if(this._setAutoWidthAndHeight(),null!=e.width){var n=this._minWidth,s=e.width;null!=n&&n>s&&(s=n),s>i.width-15&&(s=i.width-15),this._changeWidth(s)}if(e.height){var a=this._minHeight,o=e.height;null!=a&&a>o&&(o=a),o>i.height-15&&(o=i.height-15),this._changeHeight(o)}this._resizeContainer(!1)}},getContainerHeight:function(){var e=0,t=this.elements.container.getSize();return t&&(e=t.height),e},_actionMove:function(e){var t=this._getCurrentClientPosition(e),i=this.elements.container;if(!0===this.dragging){if(t.x>0&&t.y>0){var n=this.parentElement.getSize(),s={x:t.x-this.initialClient.x+this.currentLeft,y:t.y-this.initialClient.y+this.currentTop},a=i.getSize(),o=a.width,h=a.height;!0!==this.options.limitParent&&(o=40,h=40);var r=n.width-o;s.x>r&&(s.x=r),s.x>=0&&s.x<=r&&this._changeLeft(s.x);var l=n.height-h;s.y>l&&(s.y=l),s.y>=0&&s.y<=l&&this._changeTop(s.y)}this.dispatchEvent("onMove")}if(!0===this.resizing&&t.x>0&&t.y>0){this.previousHeight=-1,this.previousWidth=-1;s={x:this.initialClient.x-t.x,y:this.initialClient.y-t.y},i.getSize();var d=this._minWidth,c=this._minHeight,g=this.parentElement.getSize(),u=this.initialSize.height-s.y;(null==c||c<u)&&t.y<g.height-15&&this._changeHeight(u);var m=this.initialSize.width-s.x;(null==d||d<m)&&t.x<g.width-15&&this._changeWidth(m),this.lastResizeHeight=u,this.lastResizeWidth=m,this._resizeContainer()}},_firstActionResize:function(e){e.preventDefault(),this.resizing=!0;var t=this.elements.container;this.initialSize=t.getSize(),this.initialClient=this._getCurrentClientPosition(e)},_firstActionOnHeaderMove:function(e){e.preventDefault(),this.dragging=!0;var t=this.elements.container;this.initialClient=this._getCurrentClientPosition(e);var i=t.getStyle("left");this.currentLeft=parseInt(i.replace("px",""));var n=t.getStyle("top");this.currentTop=parseInt(n.replace("px",""))},_lastAction:function(e){this.dragging=!1,this.resizing=!1},__showResizeContainerCB:function(e){this._showResizeContainer(!0)},_hideResizeContainerCB:function(e){this._showResizeContainer(!1)},_showResizeContainer:function(e){!0===e?this.resizeContainer.show():this.resizeContainer.hide()},centerIt:function(){var e=this.elements.container;if(e){var t=this.parentElement;this.parent&&(t=this.parent);var i=t.getSize(),n=e.getSize(),s=i.width/2-n.width/2,a=i.height/2-n.height/2;this._changeLeft(s),this._changeTop(a)}},setMinSize:function(e,t){if(e||(e=50),!t){var i=this.elements.header;t=(i?i.getSize():{height:0,width:0}).height}this._minWidth=e,this._minHeight=t},initUI:function(){var e=this;u(this.floating_id);var i=this.elements.container,n=(this.elements.body,this.elements.header),s=this.elements.content,a=this.elements.overlay;a&&a.addClassName("EFP_overlay");var o=t.getWebappsAssetUrl("EditPropPopup","icon_Resize.png"),h=UWA.createElement("div",{class:"EditPropPopup_Resize",attributes:{"data-rec-id":"resizeContainerFloatingPanel"},html:[{tag:"img",class:"PopUpResizeImage",src:o}]});!0===this.options.resizable&&h.inject(s).hide(),this.resizeContainer=h,this._handlerMove=function(t){e._actionMove(t)},this._handlerResizeShow=function(t){e.__showResizeContainerCB(t)},this._handlerResizeHide=function(t){e._hideResizeContainerCB(t)},this._handlerFirstActionResize=function(t){e._firstActionResize(t)},this._handlerFirstActionOnHeaderMove=function(t){e._firstActionOnHeaderMove(t)},this._handlerLastAction=function(t){e._lastAction(t)},this._handlerKeyUp=function(t){27==t.which&&e._close()},document.addEventListener("mousemove",this._handlerMove),document.addEventListener("touchmove",this._handlerMove),c()?(i.addEventListener("mouseenter",this._handlerResizeShow),i.addEventListener("mouseleave",this._handlerResizeHide)):this._handlerResizeShow(),h.addEventListener("mousedown",this._handlerFirstActionResize),h.addEventListener("touchstart",this._handlerFirstActionResize),n.addEventListener("mousedown",this._handlerFirstActionOnHeaderMove),n.addEventListener("touchstart",this._handlerFirstActionOnHeaderMove),document.addEventListener("mouseup",this._handlerLastAction),document.addEventListener("touchend",this._handlerLastAction),document.addEventListener("mouseleave",this._handlerLastAction),document.addEventListener("touchleave",this._handlerLastAction),setTimeout(function(){if(e.elements&&e.elements.container){!1!==e.options.escapeToClose&&UWA.extendElement(document).addEvent("keyup",e._handlerKeyUp);var t=(d=e.elements.container).className.replace(/(^ *| +)/g,"."),i=null;void 0!==e.options.minWidth?i=e.options.minWidth:(i=(i=d.getStyle("min-width")).replace("px",""),i=parseInt(i)),g(e.floating_id,t+" { min-width :0px !important }");var n=null;void 0!==e.options.minHeight?n=e.options.minHeight:(n=(n=d.getStyle("min-height")).replace("px",""),n=parseInt(n)),g(e.floating_id,t+" { min-height :0px !important }"),e.setMinSize(i,n),e._fixMaxWidthAndHeight();var s=d.getSize(),a=null,o=null;!0===e.options.resizable&&(a=s.height,o=s.width);var h=UWA.clone(e._getSavedDimension());e.setNewSize({width:o,height:a});var r=!0;if(h&&(void 0!==h.width&&e._changeWidth(h.width),void 0!==h.height&&e._changeHeight(h.height),void 0!==h.left&&e._changeLeft(h.left),void 0!==h.top&&e._changeTop(h.top),r=!h.left&&!h.top),!0===e.options.autocenter&&!0===r&&e.centerIt(),!0===e.options.maximizable){e.lastResizeHeight=a,e.lastResizeWidth=o;var l=e.parentElement,d=e.elements.container,c=l.getSize();s=d.getSize();e.origMinimizeStyle=e.minimizeButton.getStyle("display"),e.origMaximizeStyle=e.maximizeButton.getStyle("display");c.height>s.height+25&&c.width>s.width+25?e.minimizeButton.setStyle("display","none"):e.maximizeButton.setStyle("display","none")}e.onResize()}},0)},onResize:function(){this._resizeContainer(!this.options.resizable)},lockWidth:function(){var e=this.elements.container;if(e){var t=e.getSize();this._changeWidth(t.width)}},lastResizeHeight:-1,lastResizeWidth:-1,previousHeight:-1,previousWidth:-1,previousMaxWidth:null,previousMaxHeight:null,_resizeContainer:function(e){var t=this,i=this.elements.container,n=this.elements.footer,s=this.elements.body,a=this.parentElement.getSize(),o=this.elements.header.getSize();if(0===s.getSize().height||0===a.height||a.height<o.height)return;var h=i.getSize(),r=(h=i.getSize()).height,l=(h.width,{width:0,height:0});n&&(l=n.getSize());s.getSize();if(!1===e&&s.setStyle("width","100%"),t.options.resizable&&!0!==e){var d=r-o.height-l.height-2;s.setStyle("height",d+"px")}r<o.height&&i.setStyle("min-height",o.height+"px");var c=i.getPosition().y,g=i.getPosition().x,u=i.getSize(),m=u.width,p=u.height;!0!==this.options.limitParent&&(m=40,p=40),c>a.height-p&&this._changeTop(a.height-p),g>a.width-m&&this._changeLeft(a.width-m);this.listOfTitleElement.length,setTimeout(function(){t.dispatchEvent("onResizeFloating")},0)},getModalBodySize:function(){return this.elements.body.getDimensions()},_managerTitleContent:function(){var e=this,t=(this.elements.header,this.titleContainer.getSize()),i=this.listOfTitleElement.length;this.listOfTitleElement.every(function(n,s){var a=n.getSize();return!(a.width+25<=t.width||s===i-1)||(a.width,t.width,e._replaceTitle(n),!1)})},destroy:function(){var e=this.elements.container;if(e){var t=this.elements.header;document.removeEventListener("mousemove",this._handlerMove),document.removeEventListener("touchmove",this._handlerMove),c()&&(e.removeEventListener("mouseenter",this._handlerResizeShow),e.removeEventListener("mouseleave",this._handlerResizeHide)),!1!==this.options.escapeToClose&&UWA.extendElement(document).removeEvent("keyup",this._handlerKeyUp),this.resizeContainer.removeEventListener("mousedown",this._handlerFirstActionResize),this.resizeContainer.removeEventListener("touchstart",this._handlerFirstActionResize),t.removeEventListener("mousedown",this._handlerFirstActionOnHeaderMove),t.removeEventListener("touchstart",this._handlerFirstActionOnHeaderMove),document.removeEventListener("mouseup",this._handlerLastAction),document.removeEventListener("touchend",this._handlerLastAction),document.removeEventListener("mouseleave",this._handlerLastAction),document.removeEventListener("touchleave",this._handlerLastAction),s.removeWidgetResizeEvent(this._handleWidgetResize),this._removeTitleElements(),this.hide(),u(this.floating_id),this._parent()}},_removeTitleElements:function(){this.headerContainer.getElements(".titleElement_toHide").forEach(function(e){e.remove()}),this.listOfTitleElement=[]},maximize:function(){this._maximize(),this.maximizeButton.setStyle("display","none"),this.minimizeButton.setStyle("display",this.origMinimizeStyle)}};return h?h.overrideMethods(m):a.extend(m)});