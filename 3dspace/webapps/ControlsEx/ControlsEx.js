define("DS/ControlsEx/PathExplorer",["UWA/Core","DS/Controls/Abstract","DS/Utilities/Dom","DS/Controls/Breadcrumb","DS/Controls/Popup","DS/Menu/Menu","DS/DataGridView/DataGridView"],function(e,t,i,n,s,a,o){"use strict";var l=function(){var e=[],t=this.value;if(t){var i=t.getParents().reverse();i.push(t),e=i.map(function(e){var t=e.getIcons();return{label:e.getLabel(),icon:t&&t.length>0?t[0]:void 0,value:e}})}return e},r=function(){(function(){this.model&&(this.model.prepareUpdate(),this.model.collapseAll(),this.value&&this.value.getParents().reverse().forEach(function(e){e.expand()}),this.model.pushUpdate())}).call(this),function(){if(this._dataGridViewContainer)return this._dataGridView.treeDocument=this.model,void(this._dataGridViewContainer.style.height=this._dataGridView.model.length*this._dataGridView.layout.getRowHeightFromCellHeight()+1+"px");var t={treeDocument:this.model,columns:[{text:"",dataIndex:"tree",typeRepresentation:"string",autoSizePadding:5,minWidth:200}],rowSelection:"single",cellSelection:"none",selectionBehavior:{toggle:!1,unselectAllOnEmptyArea:!1,selectNodeModelOnCellSelection:!0},showAlternateBackgroundFlag:!1,treeNodeCellOptions:{buildLinks:!1,expanderStyle:"triangle",depthIncrement:10}};this._dataGridView=new o(t),this._dataGridViewContainer=new e.Element("div",{class:"wux-controls-pathexplorer-dgvcontainer",styles:{height:this._dataGridView.model.length*this._dataGridView.layout.getRowHeightFromCellHeight()+1}}),this._dataGridView.inject(this._dataGridViewContainer),this._dataGridView.layout.rowsHeader=!1,this._dataGridView.layout.columnsHeader=!1}.call(this),function(){if(!this.elements._popup){var e={target:this._burgerDiv,positionTarget:this.getContent(),position:"bottom",offset:{x:0,y:0},alignment:"near",constraint:"screen",className:"wux-controls-popup wux-controls-pathexplorer-popup",overlap:!1,trigger:"click"};this.elements._popup=new s(e),this.elements._popup.setBody(this._dataGridViewContainer);var t=this;i.addEventOnElement(this,this.elements._popup,"show",function(e){t._dataGridView.onReady(function(){var e=t._dataGridView.sizeColumnToFit(0,{computeAllRows:!0});t._dataGridViewContainer.style.width=e+"px"})}),i.addEventOnElement(this,this.elements._popup,"hide",function(e){}),this.elements._popup.visibleFlag=!0}}.call(this)},d=function(e){e&&(this._XSOEventListeners.forEach(function(t){e.getXSO().unsubscribe(t)}),this._XSOEventListeners=[],this._modelEventListeners.forEach(function(t){e.removeEventListener(t)}),this._modelEventListeners=[])};return t.inherit({name:"pathexplorer",publishedProperties:{model:{defaultValue:null,type:"DS/TreeModel/TreeDocument"},value:{defaultValue:null,type:"DS/TreeModel/TreeNodeModel"},useModelSelectionFlag:{defaultValue:!0,type:"boolean"},onBurgerClick:{defaultValue:function(){this.defaultOnBurgerClick()},type:"function"}},computeValueFromStrings:function(e){return this.model?this.model.computeNodeFromLabels(e):null},computeStringsFromValue:function(e){if(!e)return[];var t=e.getParents().reverse().map(function(e){return e.getLabel()});return t.push(e.getLabel()),t},defaultOnBurgerClick:function(){r.call(this)},displayHierarchicalModel:function(){this.defaultOnBurgerClick(),this.elements._popup.visibleFlag=!0},_preBuildView:function(){this._parent(),this.elements.container.addClassName("wux-controls-pathexplorer")},buildView:function(){this._parent(),this._burgerDiv=new e.Element("div",{class:"wux-controls-pathexplorer-burger wux-controls-pathexplorer-burger wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-home"}).inject(this.getContent()),this._breadcrumb=null,this._dataGridView=null,this._dataGridViewContainer=null,this._modelEventListeners=[],this._XSOEventListeners=[],this._updateValueInProgress=!1,this._valueEventListeners=[]},_postBuildView:function(){var e={mode:n.MODE.NAVIGATION,expandableSeparatorFlag:!0,value:l.call(this)};this._breadcrumb=new n(e),this._breadcrumb.inject(this.getContent()),this._breadcrumb.__customOverflowManagement__=!0,this._breadcrumb._applyDisplayStyle();var t=this;i.addEventOnElement(this,this._breadcrumb,"change",function(e){e.stopPropagation(),e&&e.dsModel&&(t.value=function(){return this._breadcrumb.selectedValues.length>0?this._breadcrumb.selectedValues[0].value:null}.call(t))}),i.addEventOnElement(this,this._breadcrumb,"separatorClick",function(e){e.options&&void 0!==e.options.index&&function(e){var t=this.value.getParents();t.unshift(this.value);var i=t[t.length-1-e].getChildren();if(!i)return;var n=this,s=i.map(function(e){var t=e.getIcons();return{title:e.getLabel(),icon:t&&t.length>0?t[0]:void 0,type:"PushItem",action:{callback:function(t){n.value=e}}}});let o=this._breadcrumb._listItems[e];let l,r;o.elements.container.hasAttribute("hidden")?(l=this._breadcrumb.lastHiddenItemExpandableSeparator.getBoundingClientRect(),r=this._breadcrumb.lastHiddenItemExpandableSeparator):(l=o.elements.separator.getBoundingClientRect(),r=o.elements.container),a.show(s,{position:{x:l.x-10,y:l.y+l.height+5}},{onShow:function(){r.setAttributeNode(document.createAttribute("is-displaying-children"))},onHide:function(){r.removeAttribute("is-displaying-children")}})}.call(t,e.options.index)})},_handleEvents:function(){var e=this;i.addEventOnElement(this,this._burgerDiv,"click",function(t){e.onBurgerClick&&e.onBurgerClick()})},destroy:function(){this._dataGridView&&(this._dataGridView.remove(),this._dataGridView.destroy()),d.call(this,this.model),this._parent()},_applyModel:function(e){if(e&&d.call(this,e),this.model){var t=this;if(this.useModelSelectionFlag){var i=this.model.getXSO(),n=function(e){if(!t._updateValueInProgress){var n=i.get();n.length>0?t.value=n[0]:t.value=null,t.elements._popup&&(t.elements._popup.visibleFlag=!1)}};this._XSOEventListeners.push(i.onPostAdd(n)),this._XSOEventListeners.push(i.onPostRemove(n))}this._modelEventListeners.push(this.model.addEventListener("removeChild",function(){t.value.getTreeDocument()!==t.model&&(t.value=null)}))}this._applyValue(this.value)},_applyValue:function(e){if(null!==e&&(this._valueEventListeners.forEach(function(t){e.removeEventListener(t)}),this._valueEventListeners=[]),this.model||null===e)if(null===this.value||this.value.getTreeDocument()===this.model){this._breadcrumb&&(this._breadcrumb.value=l.call(this)),this.useModelSelectionFlag&&(this._updateValueInProgress=!0,this.value?this.model.getXSO().unique(this.value):this.model&&this.model.getXSO().empty(),this._updateValueInProgress=!1);var t=this,i=function(){!t.value||t.value.hasChildren()?t.elements.container.removeAttribute("is-displaying-leaf"):t.elements.container.setAttributeNode(document.createAttribute("is-displaying-leaf"))};this.value&&(this._valueEventListeners.push(this.value.addEventListener("addChild",i)),this._valueEventListeners.push(this.value.addEventListener("removeChild",i))),i(),this.value!==e&&this.fire("change")}else null===e?this._properties.value.value=null:this.value=null;else this.value=null},_applyProperties:function(e){this._parent(e),this.isDirty("model")?this._applyModel(e.model):this.isDirty("value")&&this._applyValue(e.value)}})});var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/ControlsEx/IDCard",["require","exports","DS/Controls/Abstract","UWA/Core","DS/Core/WebUXComponents","DS/Utilities/Utils","DS/Tweakers/TweakerString","DS/Utilities/Dom","DS/Tweakers/GeneratedToolbar","DS/Controls/TooltipModel","DS/Tweakers/TypeRepresentationFactory","DS/Utilities/Dom","DS/Utilities/WUXUWAUtils","i18n!DS/ControlsEx/assets/nls/translation"],function(e,t,i,n,s,a,o,l,r,d,h,p,u,c){"use strict";function m(){var e=this._isIDCardReduced||!this.pictureSrc?"0px":this._isFoldedState?"40px":"160px",t=290,i=this._generatedToolbar&&this._generatedToolbar.isReady();i&&(t=this._generatedToolbar._toolbar.getPreferredSize()+2);var n=e+" 1fr "+(this._isToolbarReduced?this._getCurrentTouchMode()?"42px":"32px":t+"px");n!==this.elements.bannerSibling.getStyle("grid-template-columns")&&(this.elements.bannerSibling.setStyle("grid-template-columns",n),i&&this._generatedToolbar._toolbar.fire("dimensionsChanged"))}var g=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return u.extendingClassFlag,n}return __extends(t,e),t.prototype.init=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._idCardPrefKey="wux-controlsex-idcard",this._isFoldedState=!1,this._infoActivatedState=!1,e.prototype.init.apply(this,t)},Object.defineProperty(t,"publishedProperties",{get:function(){return{titleIcon:{defaultValue:null,type:"object"},titleText:{defaultValue:"",type:"string"},bannerSrc:{defaultValue:"",type:"string"},pictureSrc:{defaultValue:"",type:"string"},subTitle:{defaultValue:"",type:"string"},description:{defaultValue:"",type:"string"},badges:{defaultValue:[],type:"object[]"},status:{defaultValue:[],type:"object[]"},toolbarCommands:{defaultValue:[],type:"object[]"},isFoldedFlag:{defaultValue:!1,type:"boolean"},isFoldableFlag:{defaultValue:!0,type:"boolean",category:"Behavior"},identifier:{defaultValue:"",type:"string",readOnly:!0,category:"Behavior"},infoVisibleFlag:{defaultValue:!0,type:"boolean"},infoActivatedFlag:{defaultValue:!1,type:"boolean"}}},enumerable:!1,configurable:!0}),t.prototype.buildView=function(){this._buildLayout(),e.prototype.buildView.call(this)},t.prototype._buildLayout=function(){this.elements.container.addClassName("wux-controls-idcard"),this.elements.banner=new n.Element("div",{class:"wux-idcard-banner"}).inject(this.elements.container),this.elements.bannerImg=new n.Element("img",{class:"wux-idcard-bannerImg"}).inject(this.elements.banner),this.elements.bannerSibling=new n.Element("div",{class:"wux-idcard-bannerSibling"}).inject(this.elements.container),this.elements.picture=new n.Element("div",{class:"wux-idcard-picture"}).inject(this.elements.bannerSibling),this.elements.pictureImg=new n.Element("img",{class:"wux-idcard-pictureImg"}).inject(this.elements.picture),this.elements.title=new n.Element("div",{class:"wux-idcard-title"}).inject(this.elements.bannerSibling),this.elements.titleIcon=new n.Element("div",{class:"wux-idcard-title-icon"}).inject(this.elements.title),this.elements.titleText=new n.Element("div",{class:"wux-idcard-title-text"}).inject(this.elements.title),this.elements.toolbar=new n.Element("div",{class:"wux-idcard-toolbar"}).inject(this.elements.bannerSibling),this.elements.subTitle=new n.Element("div",{class:"wux-idcard-subTitle"}).inject(this.elements.bannerSibling),this.elements.description=new n.Element("div",{class:"wux-idcard-description"}).inject(this.elements.bannerSibling),this.elements.badges=new n.Element("div",{class:"wux-idcard-badges"}).inject(this.elements.bannerSibling)},t.prototype._postBuildView=function(){if(""!==this.identifier){var e=a.getDataFromLocalPreferences(this,this._idCardPrefKey,"is_folded_flag"),t=a.getDataFromLocalPreferences(this,this._idCardPrefKey,"info_activated");e&&(this.isFoldedFlag=e,this._isFoldedState=e),t&&(this.infoActivatedFlag=t,this._infoActivatedState=t)}this._generatedToolbar=function(){var e=this;(new h).registerTypeRepresentations({comboSelector:{stdTemplate:"comboSelector"}});var t={entries:[{id:"statusCombo",dataElements:{typeRepresentation:"comboSelector",possibleValues:this.status,position:"far",category:"1",visibleFlag:void 0!==this.status&&this.status.length>0}},{id:"info",dataElements:{typeRepresentation:"functionIcon",position:"far",category:"2",icon:{iconName:"info",fontIconFamily:1,className:e.infoActivatedFlag?"highlightInfo":""},tooltip:{shortHelp:c.information},value:function(){var t=!e.infoActivatedFlag;e._infoActivatedState=t,e.infoActivatedFlag=t,e.fire("infoClicked"),""!==e.identifier&&a.saveDataInLocalPreferences(e,e._idCardPrefKey,"info_activated",t)},visibleFlag:!!this.infoVisibleFlag}}]},i={id:"toolbarCommands",dataElements:{typeRepresentation:"chevronMenuIcon",value:{menu:a.createMenuModelFromCommands(e.toolbarCommands)},position:"far",category:"3"}};1!==e.toolbarCommands.length||e.toolbarCommands[0].children?0===e.toolbarCommands.length&&(i.dataElements.visibleFlag=!1,e.elements.bannerSibling.classList.add("hideChevron")):(i.dataElements.typeRepresentation="functionIcon",i.dataElements.value=e.toolbarCommands[0].value,i.dataElements.label=e.toolbarCommands[0].label,i.dataElements.icon=e.toolbarCommands[0].icon),t.entries.push(i),t.entries.push({id:"foldIcon",dataElements:{typeRepresentation:"functionIcon",position:"far",category:"4",icon:{iconName:e._isFoldedState?"unfold":"fold",fontIconFamily:1},value:function(){var t=!e._isFoldedState;e._isFoldedState=t,e.isFoldedFlag=t,e.fire("foldClicked"),e._generatedToolbar.updateNodeModel("foldIcon",{tooltip:{shortHelp:e._isFoldedState?c.expand:c.collapse}}),""!==e.identifier&&a.saveDataInLocalPreferences(e,e._idCardPrefKey,"is_folded_flag",t)},tooltip:{shortHelp:e._isFoldedState?c.expand:c.collapse},visibleFlag:!!this.isFoldableFlag}});var n=r.prototype.createTreeDocument(t);return new r({overflowManagement:"dropdown",direction:"horizontal",items:n})}.call(this).inject(this.elements.toolbar),p.addEventOnElement(this,this._generatedToolbar,"onReady",m.bind(this),{once:!0})},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("titleIcon")&&this._applyTitleIcon(t.titleIcon),this.isDirty("titleText")&&this._applyTitleText(t.titleText),this.isDirty("bannerSrc")&&this._applyBannerSrc(t.bannerSrc),this.isDirty("pictureSrc")&&this._applyPictureSrc(t.pictureSrc),this.isDirty("subTitle")&&this._applySubTitle(t.subTitle),this.isDirty("description")&&this._applyDescription(t.description),this.isDirty("badges")&&this._applyBadges(t.badges),this.isDirty("status")&&this._applyStatus(t.status),this.isDirty("toolbarCommands")&&this._applyToolbarCommands(t.toolbarCommands),this.isDirty("isFoldedFlag")&&this._applyIsFoldedFlag(t.isFoldedFlag),this.isDirty("infoVisibleFlag")&&this._applyInfoVisibleFlag(t.infoVisibleFlag),this.isDirty("isFoldableFlag")&&this._applyIsFoldableFlag(t.isFoldableFlag),this.isDirty("infoActivatedFlag")&&this._applyInfoActivatedFlag(t.infoActivatedFlag)},t.prototype._handleEvents=function(){p.addResizeObserver(this,this.elements.container,this._onIDCardResize)},t.prototype._applyTitleIcon=function(e){!this.titleIcon||0===Object.keys(this.titleIcon).length&&this.titleIcon.constructor===Object?this.elements.titleIcon.classList.add("displayNone"):(this.elements.titleIcon.classList.remove("displayNone"),l.generateIcon(this.titleIcon,{target:this.elements.titleIcon}))},t.prototype._applyTitleText=function(e){this.elements.titleText.innerText=this.titleText,this.elements.titleText.tooltipInfos=new d({longHelp:this.titleText})},t.prototype._applyBannerSrc=function(e){this.bannerSrc?(this.elements.banner.classList.remove("displayNone"),this.elements.bannerImg.src=this.bannerSrc):this.elements.banner.classList.add("displayNone")},t.prototype._applyPictureSrc=function(e){this.pictureSrc&&(this.elements.pictureImg.src=this.pictureSrc),m.call(this)},t.prototype._applySubTitle=function(e){this.subTitle?(this.elements.bannerSibling.classList.remove("emptySubTitle"),this.elements.subTitle.innerText=this.subTitle,this.elements.subTitle.tooltipInfos=new d({longHelp:this.subTitle})):this.elements.bannerSibling.classList.add("emptySubTitle")},t.prototype._applyDescription=function(e){this.elements.description.innerText=this.description,this.elements.description.tooltipInfos=new d({longHelp:this.description})},t.prototype._applyBadges=function(e){var t=this;this.badges&&0!==this.badges.length?(this.elements.bannerSibling.classList.remove("emptyBadges"),this.elements.badges.innerHTML="",this.badges.map(function(e){var i=new o({value:e.text?e.text:"",icon:e.icon?e.icon:"",displayStyle:"tag_readOnly",emphasize:e.emphasize?e.emphasize:"secondary"});t.elements.badges.appendChild(i.getContent())})):this.elements.bannerSibling.classList.add("emptyBadges")},t.prototype._applyStatus=function(e){this._generatedToolbar&&(this.status&&0!==this.status.length?(this._generatedToolbar.prepareUpdateView(),this._generatedToolbar.updateNodeModel("statusCombo",{visibleFlag:!0,possibleValues:this.status}),this._generatedToolbar.pushUpdateView(),this.elements.bannerSibling.classList.remove("hideStatus")):(this._generatedToolbar.prepareUpdateView(),this._generatedToolbar.updateNodeModel("statusCombo",{visibleFlag:!1}),this._generatedToolbar.pushUpdateView(),this.elements.bannerSibling.classList.add("hideStatus")))},t.prototype._applyToolbarCommands=function(e){this._generatedToolbar&&(this._generatedToolbar.prepareUpdateView(),this.toolbarCommands&&0!==this.toolbarCommands.length?1!==this.toolbarCommands.length||this.toolbarCommands[0].children?(this._generatedToolbar.updateNodeModel("toolbarCommands",{visibleFlag:!0,grid:{data:{menu:a.createMenuModelFromCommands(this.toolbarCommands)},typeRep:"chevronMenuIcon"},label:"",icon:void 0}),this.elements.bannerSibling.classList.remove("hideChevron")):(this._generatedToolbar.updateNodeModel("toolbarCommands",{visibleFlag:!0,grid:{data:this.toolbarCommands[0].value,typeRep:"functionIcon"},label:this.toolbarCommands[0].label,icon:this.toolbarCommands[0].icon}),this.elements.bannerSibling.classList.remove("hideChevron")):(this._generatedToolbar.updateNodeModel("toolbarCommands",{visibleFlag:!1}),this.elements.bannerSibling.classList.add("hideChevron")),this._generatedToolbar.pushUpdateView())},t.prototype._switchFoldMode=function(){this.isFoldedFlag?this.elements.container.classList.add("folded"):this.elements.container.classList.remove("folded")},t.prototype._applyIsFoldedFlag=function(e){this._isFoldedState=this.isFoldedFlag,this._generatedToolbar&&this._generatedToolbar.updateNodeModel("foldIcon",{icon:{iconName:this.isFoldedFlag?"unfold":"fold",fontIconFamily:1}}),this._switchFoldMode(),this.fire("dimensionsChanged")},t.prototype._applyInfoActivatedFlag=function(e){this._infoActivatedState=this.infoActivatedFlag,this._generatedToolbar&&this._generatedToolbar.updateNodeModel("info",{grid:{semantics:{icon:{iconName:"info",fontIconFamily:1,className:this.infoActivatedFlag?"highlightInfo":""}}}})},t.prototype._applyInfoVisibleFlag=function(e){this._generatedToolbar&&(this._generatedToolbar.prepareUpdateView(),this._generatedToolbar.updateNodeModel("info",{visibleFlag:this.infoVisibleFlag}),this._generatedToolbar.pushUpdateView()),this.infoVisibleFlag?this.elements.bannerSibling.classList.remove("hideInfo"):this.elements.bannerSibling.classList.add("hideInfo")},t.prototype._applyIsFoldableFlag=function(e){this._generatedToolbar&&(this._generatedToolbar.prepareUpdateView(),this._generatedToolbar.updateNodeModel("foldIcon",{visibleFlag:this.isFoldableFlag}),this._generatedToolbar.pushUpdateView())},t.prototype._onIDCardResize=function(){this.elements.container.offsetWidth<=625&&this.pictureSrc?this._isIDCardReduced=!0:this._isIDCardReduced=!1,this.elements.container.offsetWidth>=529?this._isToolbarReduced=!1:this.elements.container.offsetWidth<529&&this.pictureSrc&&(this._isToolbarReduced=!0),m.call(this)},t.prototype.destroy=function(){p.removeResizeObserver(this,this.elements.container,this._onIDCardResize),e.prototype.destroy.call(this)},t}(i);return s.addClass(g,"idCard"),g});__extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/ControlsEx/LoadingPanel",["require","exports","UWA/Core","UWA/Fx","DS/Controls/Abstract","DS/Controls/Button","DS/Core/WebUXComponents","DS/Controls/ModalContainer","DS/Controls/ProgressBar","DS/DataGridView/DataGridView","DS/DataGridView/DataGridViewLayout","DS/Utilities/WUXUWAUtils"],function(e,t,i,n,s,a,o,l,r,d,h,p){"use strict";var u="wux-controls-loading-panel",c=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return n.name="loadingPanel",n.markForRecordFlag=!0,p.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{shape:{defaultValue:"linear",type:"string",category:"Appearance"},displayStyle:{defaultValue:"normal",type:"string",category:"Appearance"},width:{defaultValue:"100%",type:"string",category:"Appearance"},emphasize:{defaultValue:"info",type:"string",category:"Appearance"},value:{defaultValue:void 0,type:"number",category:"Appearance"},info:{defaultValue:"",type:"object",category:"Appearance"},showButtonsFlag:{defaultValue:!1,type:"boolean",category:"Appearance"},modalFlag:{defaultValue:!1,type:"boolean",category:"Appearance"}}},enumerable:!1,configurable:!0}),t.prototype.on=function(){var e=this;(e._onCount++,e._onCount>1)||(e.show(),new n(e.elements.container,{duration:1e3,transition:"linear",events:{onStart:function(){},onComplete:function(){e.fire("loadingPanelOn")}}}).start({opacity:[0,1]}))},t.prototype.off=function(){var e=this;(e._onCount=e._onCount>0?e._onCount-1:0,e._onCount)||new n(e.elements.container,{duration:1e3,transition:"linear",events:{onStart:function(){},onComplete:function(){0===e._onCount&&(e.hide(),e.fire("loadingPanelOff"))}}}).start({opacity:[1,0]})},t.prototype.buildView=function(){this.elements.container.addClassName(u),this.hide(),this._onCount=0,this.elements._panel=new i.Element("div").inject(this.elements.container);var e=new i.Element("div",{class:u+"-first-row"}).inject(this.elements._panel);this.elements._progressBar=new r({shape:"linear",infiniteFlag:!0,height:60}).inject(e);var t=i.Element("div",{class:u+"-buttons"}).inject(e);this.elements._playButton=new a({showLabelFlag:!1,icon:{iconName:"play",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"2x"}}).inject(t),this.elements._playButton.hide(),this.elements._pauseButton=new a({showLabelFlag:!1,icon:{iconName:"pause",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"2x"}}).inject(t),this.elements._stopButton=new a({showLabelFlag:!1,icon:{iconName:"close",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"2x"}}).inject(t),this.elements._label=i.Element("div",{class:u+"-label"}).inject(this.elements._panel)},t.prototype.handleEvents=function(){var e=this;this.elements._playButton.addEventListener("buttonclick",function(t){e.elements._progressBar.emphasize=e.emphasize,e.elements._playButton.hide(),e.elements._pauseButton.show()}),this.elements._pauseButton.addEventListener("buttonclick",function(t){e.elements._progressBar.emphasize="pause",e.elements._playButton.show(),e.elements._pauseButton.hide()}),this.elements._stopButton.addEventListener("buttonclick",function(t){e._onCount=1,e.off()})},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("shape")&&this._applyShape(),this.isDirty("width")&&this._applyWidth(),this.isDirty("displayStyle")&&this._applyDisplayStyle(),this.isDirty("emphasize")&&this._applyEmphasize(),this.isDirty("value")&&this._applyValue(),this.isDirty("info")&&this._applyInfo(),this.isDirty("showButtonsFlag")&&this._applyShowButtonsFlag(),this.isDirty("modalFlag")&&this._applyModalFlag()},t.prototype._applyShape=function(){"linear"!==this.shape&&"circular"!==this.shape||(this.elements._progressBar.shape=this.shape),this._applyWidth(),this._applyDisplayStyle(),this._updateMainStyle()},t.prototype._applyWidth=function(){"linear"===this.shape?this.elements._panel.setStyle("width",this.width):"circular"===this.shape&&this.elements._panel.removeAttribute("style")},t.prototype._applyDisplayStyle=function(){"linear"===this.shape?this.elements._progressBar.displayStyle=this.displayStyle:this.elements._progressBar.displayStyle="normal"},t.prototype._applyEmphasize=function(){"info"!==this.emphasize&&"success"!==this.emphasize&&"warning"!==this.emphasize&&"high-attention"!==this.emphasize&&"pause"!==this.emphasize||(this.elements._progressBar.emphasize=this.emphasize)},t.prototype._applyValue=function(){"number"==typeof this.value&&this.value>=0&&this.value<=100?(this.elements._progressBar.infiniteFlag=!1,this.elements._progressBar.value=this.value,this.elements._progressBar.statusFlag=!0):(this.elements._progressBar.infiniteFlag=!0,this.elements._progressBar.statusFlag=!1),this._updateMainStyle()},t.prototype._applyInfo=function(){this.info||(this.info=""),"string"==typeof this.info?this.elements._label.textContent=this.info:(this.elements._tree||this._createTree(),this.elements._tree.treeDocument=this.info),this._updateMainStyle()},t.prototype._createTree=function(){var e=i.Element("div",{class:u+"-tree-container"}).inject(this.elements._panel);this.elements._tree=new d({treeDocument:void 0,columns:[{text:"Text",dataIndex:"tree",editableFlag:!1}],layout:new h({columnsHeader:!1,rowsHeader:!1}),treeNodeCellOptions:{expanderStyle:"triangle",buildLinks:!1,depthIncrement:0},showAlternateBackgroundFlag:!1}).inject(e)},t.prototype._applyShowButtonsFlag=function(){this._updateMainStyle()},t.prototype._applyModalFlag=function(e){this.modalFlag?(this.elements.container.addClassName("wux-controls-loading-panel-modal"),l.createModal(this.elements.container,this.elements._panel)):(l.removeModal(this.elements.container),this.elements.container.removeClassName("wux-controls-loading-panel-modal"),this.elements._panel.inject(this.elements.container))},t.prototype._updateMainStyle=function(){this.elements._panel.removeClassName(this._lastMainStyleClass);var e=u;e+="-"+this.shape,e+="string"==typeof this.info&&""!==this.info?"-label":"",e+="linear"===this.shape&&"string"!=typeof this.info?"-tree":"",e+=this.showButtonsFlag?"-buttons":"",e+=this._getCurrentTouchMode()?"-touch":"-desktop",this.elements._panel.addClassName(e),this._lastMainStyleClass=e},t}(s);return o.addClass(c,"loadingPanel"),c});