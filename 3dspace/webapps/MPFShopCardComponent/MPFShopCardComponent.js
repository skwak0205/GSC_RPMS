define("DS/MPFShopCardComponent/ShopCardHeader",["UWA/Core","UWA/Class/View","DS/MPFView/InitialsDot","DS/UIKIT/Tooltip","DS/MPFView/RatingStarsTile","DS/MPFServices/ObjectService","DS/MPFShopModel/ShopModel","WebappsUtils/WebappsUtils","i18n!DS/MPFShopCardComponent/assets/nls/ShopCardComponent","css!DS/MPFShopCardComponent/MPFShopCardComponent"],function(t,e,s,n,i,o,r,a,h){"use strict";return e.extend({className:"mpf-shopcard-header",setup:function(t){o.requiredOfPrototype(t.shop,r,"options.shop must be a ShopModel"),this.shop=t.shop,this.showRating=!0===t.showRating},render:function(){var e=t.createElement("div",{class:"logo-container",html:this._createLogo()}),s=t.createElement("div",{class:"infos-container",html:[{tag:"div",class:"mpf-row",html:[this._createNameTile(),this._createRatingOrIconTile()]},{tag:"div",class:"mpf-row",html:[this._createCountryTile(),this._createInfoBadge()]}]});return this.container.setContent([e,s]),this},destroy:function(){this.shop=null,t.is(this.nameTooltip)&&this.nameTooltip.destroy(),this._parent(),this.container=null},_createLogo:function(){return new s({title:this.shop.getName(),image:this.shop.getLogo()})},_createNameTile:function(){var e=t.createElement("div",{class:"shop-name-tile",text:this.shop.getName()});return this.nameTooltip=new n({target:e,body:this.shop.getName()}),e},_createCountryTile:function(){var e=this.shop.getCountry(),s=t.createElement("div",{class:"country-tile"});return e&&s.setContent([{tag:"span",html:this._createLocationIcon()},{tag:"span",class:"country-text",text:e}]),s},_createLocationIcon:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttributeNS(null,"viewBox","-1 -1 25 25"),t.setAttributeNS(null,"height","18"),t.setAttributeNS(null,"width","18");var e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d","M12 10c-1.104 0-2-.896-2-2s.896-2 2-2 2 .896 2 2-.896 2-2 2m0-5c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3m-7 2.602c0-3.517 3.271-6.602 7-6.602s7 3.085 7 6.602c0 3.455-2.563 7.543-7 14.527-4.489-7.073-7-11.072-7-14.527m7-7.602c-4.198 0-8 3.403-8 7.602 0 4.198 3.469 9.21 8 16.398 4.531-7.188 8-12.2 8-16.398 0-4.199-3.801-7.602-8-7.602"),t.appendChild(e),t},_createRatingOrIconTile:function(){return this.shop.isInternal()?this._createPrivateShopIcon():this.shop.hasExternalPricingCondition()?this._createExternalPricingIcon():this.showRating?this._createRatingTile():void 0},_createPrivateShopIcon:function(){return t.createElement("img",{class:"internal-icon-tile",src:a.getWebappsAssetUrl("MPFShopCardComponent","img/Small_Factory_Img.png")})},_createExternalPricingIcon:function(){return t.createElement("img",{class:"internal-icon-tile",src:a.getWebappsAssetUrl("MPFShopCardComponent","img/external_quotation_icon.png"),alt:"external quotation icon"})},_createRatingTile:function(){var e=this.shop.get(r.Fields.RATING),s=this.shop.get(r.Fields.NUMBER_RATINGS)||0;return t.createElement("div",{class:"rating-stars-tile",html:[new i({rating:e,starSize:"18px"}).render(),t.createElement("span",{class:"number-reviews",text:"("+s+" "+h.get("reviews")+")"})]})},_createInfoBadge:function(){var e=this.shop.hasAutomatedPricing();if(e=!0===e||"true"===e)return t.createElement("div",{class:"info-badge",text:h.get("directPurchase")})}})}),define("DS/MPFShopCardComponent/SmallShopCardComponent",["UWA/Core","UWA/Class/View","DS/MPFServices/ObjectService","DS/MPFShopModel/ShopModel","DS/MPFView/InitialsDot","DS/UIKIT/Input/Button","i18n!DS/MPFShopCardComponent/assets/nls/ShopCardComponent","css!DS/MPFShopCardComponent/MPFShopCardComponent"],function(t,e,s,n,i,o,r){"use strict";const a={MORE_INFORMATION_CLICKED:"onMoreInformationClicked",CUSTOM_BUTTON_CLICKED:"customButtonClicked"},h=e.extend({className:"mpf-small-shop-card",setup:function(e){e=e||{},this._parent(e),s.requiredOfPrototype(e.shop,n,"options.shopModel should be a ShopModel"),this.shop=e.shop,this.displayEMPIcon=!0===e.displayEMPIcon,this.isSelected=!0===e.isSelected,this.doesRouteToLabInfo=!1!==e.doesRouteToLabInfo,t.is(e.button)&&(this.button=this._createButton(e.button)),this.logo=this._createLogo(),this.moreInfoButton=this._createMoreInfoButton(),this.topContainer=this._createTopContainer(),this.bottomContainer=this._createBottomContainer()},render:function(){var e;return e=t.createElement("div",{class:"mpf-shop-content",html:[this.topContainer,this.bottomContainer]}),this.container.setContent([this.logo,e]),this.isSelected&&!this.container.hasClassName("selected")&&(this.container.addClassName("selected"),this.container.addContent(t.createElement("span",{class:"fonticon fonticon-check lab-selected"}))),this},setSelected:function(e){var s;this.isSelected=!1!==e,this.isSelected?this.container.addClassName("selected"):this.container.removeClassName("selected"),s=this.container.getElement("fonticon-check.lab-selected"),t.is(s)||this.container.addContent(t.createElement("span",{class:"fonticon fonticon-check lab-selected"}))},_createButton:function(e){return new o({className:"link",value:e.label,events:{onClick:()=>{this.dispatchEvent(a.CUSTOM_BUTTON_CLICKED,this),t.is(e.onClickCallback)&&"function"==typeof e.onClickCallback&&e.onClickCallback()}}})},_createMoreInfoButton:function(){var e=this;return t.createElement("a",{class:"mpf-link",target:"_blank",text:r.get("moreInformation"),events:{click:()=>{this.dispatchEvent(a.MORE_INFORMATION_CLICKED),window.open("/lab/"+e.shop.get("id")+window.location.search+"&explore=true","_blank")}}})},_createTopContainer:function(){var e,s;return e=t.createElement("span",{text:this.shop.getName()}),this.displayEMPIcon&&(s=this._getIcon()),t.createElement("div",{class:"mpf-small-shop-card-top",html:[e,s]})},_getIcon:function(){return this.shop.isInternal()?t.createElement("div",{class:"factory-icon"}):t.createElement("span",{class:"fonticon fonticon-check"})},_createBottomContainer:function(){return t.createElement("div",{class:"mpf-small-shop-card-bottom",html:[this.moreInfoButton,this.button]})},_createLogo:function(){return new i({title:this.shop.getName(),image:this.shop.getLogo()})},destroy:function(){this.shop=null,this.displayEMPIcon=null,this.isSelected=null,this.button=null,this.logo=null,this.moreInfoButton=null,this.topContainer=null,this.bottomContainer=null,this._parent(),this.container=null}});return h.Events=Object.freeze(a),h}),define("DS/MPFShopCardComponent/MultiBiddingShopCard",["UWA/Core","UWA/Class/View","UWA/Event","DS/MPFShopModel/ShopModel","DS/MPFShopCardComponent/ShopCardHeader","DS/MPFServices/ObjectService","DS/UIKIT/Input/Button","DS/MPFError/BadArgumentError","DS/UWPClientCode/Navigation","DS/MPFConnector/MarketplaceConnector","DS/MPFServices/MarketplaceServices","DS/MPFModelFactory/MPFFactoriesV2","DS/MPFShopModel/ShopFactory","i18n!DS/MPFShopCardComponent/assets/nls/ShopCardComponent","css!DS/MPFShopCardComponent/MPFShopCardComponent"],function(t,e,s,n,i,o,r,a,h,c,l,d,p,u){"use strict";var m={VIEW_MORE:"viewMoreClicked",BUY_NOW:"buyNowClicked",SELECTION_CHANGE:"selectionChanged"},f=e.extend({className:"mpf-shop-card",setup:function(s){if(o.requiredOfPrototype(s.shop,n,"options.shop should be a ShopModel"),!(Array.isArray(s.items)&&s.items.length>0))throw new a("options.items should be an array of instances of UWA/Class/View");for(var i=0;i<s.items.length;i++)o.requiredOfPrototype(s.items[i],e,"options.items should be an array containing only instances of UWA/Class/View");if(this.shop=s.shop,this.isSelected=!0===s.isSelected,this.hideRating=!0===s.hideRating,this.shopName=this.shop.get("shopName"),this.shopId=this.shop.get("id"),this.items=this._addItemSizeClassNames(s.items),!t.is(this.shopName,"string")||!t.is(this.shopId,"string"))throw new a("id and shopName of ShopModel must be strings.");this.isSelected&&this.container.addClassName("selected"),this.header=this._createHeader(),this.footer=this._createFooter(),this.selectionMark=this._createSelectionMark()},render:function(){for(var t=[],e=0;e<this.items.length;e++)t.push(this.items[e].render());return this.container.setContent([this.header.render(),{tag:"div",class:"mpf-card-body",html:t},this.footer,this.selectionMark]),this},destroy:function(){this.directPurchaseButton&&this.directPurchaseButton.removeEvents(),this.selectButton.removeEvents(),this.infoLink.removeEvents();for(var e=0;e<this.items.length;e++)t.is(this.items[e].destroy,"function")&&this.items[e].destroy();this.header.destroy(),this.shop=null,this._parent(),this.shopName=null,this.shopId=null,this.items=null,this.selectButton=null,this.infoLink=null,this.header=null,this.footer=null,this.container=null},_addItemSizeClassNames:function(e){for(var s=0;s<e.length;s++){var n,i=e[s];n=t.is(i.size)&&"big"===i.size?"mpf-card-body-element big-item":"mpf-card-body-element small-item",i.container.addClassName(n)}return e},_createHeader:function(){return new i({shop:this.shop,hideRating:this.hideRating})},_createFooter:function(){var e=t.createElement("div",{class:"mpf-card-footer"});this.infoLink=t.createElement("a",{class:"mpf-card-moreinfos-link",html:u.get("viewMore")}).inject(e),this.infoLink.addEvent("click",this.dispatchEvent.bind(this,m.VIEW_MORE,this.shop));var s=t.createElement("div",{class:"footer-button-container"}).inject(e);return this.shop.hasAutomatedPricing()&&(this.directPurchaseButton=new r({className:"direct-purchase-button",icon:"fonticon-shopping-cart",value:u.get("buyNow")}).inject(s),this.directPurchaseButton.addEvent("onClick",this.dispatchEvent.bind(this,m.BUY_NOW,this.shop))),this.selectButton=new r({className:"primary select-button",value:this.isSelected?u.get("deselect"):u.get("selectForQuote")}).inject(s),this.selectButton.addEvent("onClick",this._selectForQuote.bind(this)),e},_createSelectionMark:function(){return t.createElement("div",{class:"selection-mark",html:[{tag:"div",class:"blue-triangle"},{tag:"span",class:"fonticon fonticon-check"}]})},_selectForQuote:function(){this.isSelected=!this.isSelected,this.container.toggleClassName("selected"),this.isSelected?this.selectButton.setValue(u.get("deselect")):this.selectButton.setValue(u.get("selectForQuote")),this.dispatchEvent(m.SELECTION_CHANGE,[this.shop,{isSelected:this.isSelected}])}});return f.createShopCards=function(t){var e=t.service||l.MAKE,s=[];return c.fetchPromise({service:e}).then(function(t){return d.getInstance(t).getFactory(d.Types.SHOP)}).then(function(t){return t.createCollection(p.Types.PUBLIC_V8).fetchPromise()}).then(function(e){for(var n=0;n<e.size();n++){var i=t.serviceViewFactory();s.push(new f({shop:e.at(n),items:i}))}return s})},f.Events=Object.freeze(m),f}),define("DS/MPFShopCardComponent/ShopCardComponent",["UWA/Core","UWA/Class/View","UWA/Event","DS/MPFShopModel/ShopModel","DS/MPFShopCardComponent/ShopCardHeader","DS/MPFServices/ObjectService","DS/UIKIT/Input/Button","DS/MPFError/BadArgumentError","DS/UWPClientCode/Navigation","i18n!DS/MPFShopCardComponent/assets/nls/ShopCardComponent","css!DS/MPFShopCardComponent/MPFShopCardComponent"],function(t,e,s,n,i,o,r,a,h,c){"use strict";var l={VIEW_MORE:"viewMoreClicked",GET_A_QUOTE:"getAQuoteClicked"},d=e.extend({className:"mpf-shop-card",setup:function(s){if(o.requiredOfPrototype(s.shop,n,"options.shop should be a ShopModel"),!(Array.isArray(s.items)&&s.items.length>0))throw new a("options.items should be an array of instances of UWA/Class/View");for(var i=0;i<s.items.length;i++)o.requiredOfPrototype(s.items[i],e,"options.items should be an array containing only instances of UWA/Class/View");if(this.shop=s.shop,this.items=this._addItemSizeClassNames(s.items),this.showRating=!0===s.showRating,!t.is(this.shop.getName(),"string")||!t.is(this.shop.get("id"),"string"))throw new a("id and shopName of ShopModel must be strings.");this.header=this._createHeader(),this.footer=this._createFooter()},render:function(){for(var t=[],e=0;e<this.items.length;e++)t.push(this.items[e].render());return this.container.setContent([this.header.render(),{tag:"div",class:"mpf-card-body",html:t},this.footer]),this},destroy:function(){this.selectButton.removeEvents(),this.infoLink.removeEvents();for(var e=0;e<this.items.length;e++)t.is(this.items[e].destroy,"function")&&this.items[e].destroy();this.header.destroy(),this.shop=null,this._parent(),this.items=null,this.selectButton=null,this.infoLink=null,this.initialsDot=null,this.header=null,this.footer=null,this.container=null},_addItemSizeClassNames:function(e){for(var s=0;s<e.length;s++){var n,i=e[s];n=t.is(i.size)&&"big"===i.size?"mpf-card-body-element big-item":"mpf-card-body-element small-item",i.container.addClassName(n)}return e},_createHeader:function(){return new i({shop:this.shop,showRating:this.showRating,hasExternalPricingCondition:this.shop.hasExternalPricingCondition()})},_createFooter:function(){var e=t.createElement("div",{class:"mpf-card-footer"});this.infoLink=t.createElement("a",{class:"mpf-card-moreinfos-link",html:c.get("viewMore")}).inject(e);var s=t.createElement("div",{class:"footer-button-container"}).inject(e);return this.selectButton=new r({className:"primary select-button",value:c.get("getAQuote")}).inject(s),this.infoLink.addEvent("click",this.dispatchEvent.bind(this,l.VIEW_MORE,this.shop)),this.selectButton.addEvent("onClick",this.dispatchEvent.bind(this,l.GET_A_QUOTE,this.shop)),e}});return d.Events=Object.freeze(l),d});