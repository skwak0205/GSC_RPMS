define("DS/SwymUnifiedSearch/script/customization/actions/abstract-action",["UWA/Core","UWA/Class/Events"],function(e,t){"use strict";return t.extend({name:"",availableForTypes:function(){},getActionForObject:function(e){},executeAction:function(e){}})}),define("DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-community-members-facet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/SwymUICore/script/feature/core/user/collection/user-collection","DS/SwymUIComponents/script/feature/community/members/view/small-members-list-view","DS/UIKIT/Spinner","i18n!DS/SwymUnifiedSearch/assets/nls/properties-facet-factory","css!DS/SwymUnifiedSearch/SwymUnifiedSearch"],function(e,t,i,n,s,o){"use strict";return t.extend({_innerView:null,init:function(){this._parent.apply(this,arguments);var t=arguments[0],r=this;if(!this.elements.container){this.elements.container=e.createElement("div",{class:"member-list-wrapper",styles:{height:"100%","padding-top":"5px"},html:[e.createElement("div",{styles:{margin:"auto","text-align":"center",height:"40px"},html:new s({className:"msg-animation",visible:!0,animate:!0,spin:!0})})]});var a=new i([],{mode:"listmembers",order_by_last_member:!0,limit:5,displayTotalCount:!1,communityId:t.communityId});a.resetCollection(1,{serviceName:"filter",data:{with_synthesis:!1}}),a.addEvent("onSync",function(){r.membersView.render({target:r.elements.container,emptyTarget:!0})}),a.addEvent("onError",function(){r.elements.container.setText(o.NotAvailable)}),this.membersView=new n({collection:a})}},updateFacet:function(){},isActionAvailable:function(){return!1},onAction:function(){},destroyComponent:function(){this._innerView&&(this._innerView.destroy(),this._innerView=null),e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/SwymUnifiedSearch/script/bootstrap",["require","exports"],function(e,t){"use strict";var i=null,n={start:function(){void 0===window.ds&&(window.ds={env:void 0,swymTenant:null,swymIM:null,isMDE:null})},reformatEnvironmentList:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&Array.isArray(e[i])&&e[i].forEach(function(e){t[e.id]=t[e.id]||{sources:{}},t[e.id].sources[i]={displayName:e.displayName,url:e.url}});return t},getUserStartupParams:function(e,t){i?e&&e.call(this,i):window.require(["DS/SwymUICore/script/feature/core/config/bootstrap-model"],function(s){s.getInstance().getStartupTenantsInfo(function(t){t&&(i=n.reformatEnvironmentList(t)),e&&e.call(this,i)},function(){t&&t.apply(this,arguments)})})},getTenantUrlFromTenantId:function(e,t,i){n.getUserStartupParams(function(i){if(t){var s=i&&i[e];t.call(n,s&&s.sources.swym&&s.sources.swym.url||"")}},i)}};return n}),define("DS/SwymUnifiedSearch/script/customization/views/community-secondary-view",["DS/SwymUICore/script/lib/view/generic/swym-model-view","i18n!DS/SwymUnifiedSearch/assets/nls/community-secondary-view"],function(e,t){"use strict";return e.extend({name:"community-secondary-view",_createContent:function(){var e=this.model;return[{class:"community-data",html:t.get("creationDate")+" "+e.get("ds6w:created").split(" ")[0]},{class:"community-data",html:t.get("visibility")+" "+e.getVisibility()},{class:"community-data",html:t.get("role")+": "+e.getTranslatedRole()}]}})}),define("DS/SwymUnifiedSearch/script/customization",["UWA/Core","UWA/Class"],function(e,t){"use strict";return t.singleton({getActions:function(t){var i;e.is(t)&&e.is(t.models,"array")&&(i={actions:[],status:""},1===t.models.length?require(["DS/SwymUnifiedSearch/script/utils","i18n!DS/SwymUIComponents/assets/nls/feature/community/generic/skeleton-utils/content-idcard-options"],function(e,n){var s,o,r=t.data.applicativeInfo.clientAppInfo.identifier;i.status="success","3DDashboard"!==r&&"3DSpace"!==r||(s=(o=t.models[0]).get("ds6w:type_value"),e.ALL_SWYM_TYPES.indexOf(s)>=0&&i.actions.push({id:o.get("id"),actions:[{title:e.isUserType(o.get("ds6w:what/ds6w:type_value"))?n.OpenUserProfile:n.OpenInA3DSwymApp,icon:"level-down",id:"DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action",multisel:!1,sourcejs:"DS/SwymUnifiedSearch/script/customization"}]})),t.onComplete.call(void 0,i)}):(i.status="failure",t.onComplete.call(void 0,i)))},getFacets:function(e){var t=this;require(["DS/SwymUnifiedSearch/script/utils","i18n!DS/SwymUnifiedSearch/assets/nls/properties-facet-factory"],function(i,n){var s=[{text:n.Properties,name:e.constants.FACET_PROPERTIES,icon:"doc-log",expandedFlag:!0}];e.setFacets.call(void 0,[e.constants.FACET_PROPERTIES],s),i.fetchSearchResultData(e.model,{onComplete:function(i){t._addCtyMembersFacet(i,e)},onFailure:function(i){i.set("access",0),t._addCtyMembersFacet(i,e)}})})},_addCtyMembersFacet:function(e,t){require(["DS/SwymUICore/script/feature/community/community/model/community-model","i18n!DS/SwymUnifiedSearch/assets/nls/properties-facet-factory","css!SwymUIComponents/SwymUIComponents"],function(i,n){if(e instanceof i){var s={name:t.constants.FACET_SWYM_COMMUNITY_MEMBERS||"swym_community_members",text:n.Members,icon:"users",expandedFlag:!0},o={require:"DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-community-members-facet",options:{communityId:e.get("mid")},facet:s,alwaysVisible:!0,visible:!0,alwaysCalled:!1};t.addFacets([o])}})},executeAction:function(e){require(["DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(t){(new t).executeAction(e.actionsHelper.getModel({id:e.object_ids[0]}),e)})},getRenderPreview:function(e){require(["DS/SwymUnifiedSearch/script/swym-preview"],function(t){e.onComplete.call(void 0,new t)})},getDoubleClickAction:function(e){e.onComplete&&e.onComplete.call(void 0,{id:"uselessId",sourceJS:"DS/SwymUnifiedSearch/script/customization"})},getSubjectURI:function(e){var t,i,n=e&&e.subjects||[],s={};return n.forEach(function(e){(t=e.id)&&(i=t,t.startsWith("dsxplan:")?i="swym:wedo"+encodeURIComponent(":eoe:"+t):t.startsWith("uuid:")&&(i="swym:wedo"+encodeURIComponent(":eoe:<"+e.id+">"))),s[t]=i}),s}})}),define("DS/SwymUnifiedSearch/script/customization/editprop-ajax-requests/swym-ajax-requests",["DS/EditPropWidget/constants/EditPropConstants"],function(e){"use strict";return{getListOfAttributes:function(e){},checkFacetsVisibility:function(t){var i={};if(null!=t.facets&&t.facets.length>0)for(var n=0;n<t.facets.length;n++){var s=t.facets[n].name;"properties"===s?i[e.FACET_PROPERTIES]=!0:"social"===s?i[e.FACET_SWYMCOMMENTS]=!0:i[e.FACET_PROPERTIES]=!0}else i[e.FACET_PROPERTIES]=!0;t.onComplete.call(this,{id:t.model.get("objectId"),facets:i})}}}),define("DS/SwymUnifiedSearch/script/customization/views/conversation-primary-view",["DS/SwymUICore/script/lib/view/generic/swym-model-view"],function(e){"use strict";return e.extend({name:"conversation-primary-view",_createContent:function(){return[{class:"conversation-icon fonticon fonticon-chat"}]}})}),define("DS/SwymUnifiedSearch/script/utils",["require","exports","UWA/Core","UWA/Class/Model","DS/SwymUnifiedSearch/script/bootstrap","DS/SwymUICore/script/utils/utils"],function(e,t,i,n,s,o){"use strict";var r="pno:Person",a="swym:Community",c=["swym:Post","swym:Question","swym:WikitreePage","swym:Idea","swym:Picture","swym:AnimatedPicture","swym:Document","swym:Sound","swym:Video","swym:3dModel","swym:Drawing","swym:SimulationMedia"],m=["swym:Picture","swym:AnimatedPicture","swym:Document","swym:Sound","swym:Video","swym:3dModel","swym:Drawing","swym:SimulationMedia"],d=c.concat(["swym:Survey"]),u=[r,a].concat(d),l=!1,w={SWYM_USER_TYPE:r,SWYM_COMMUNITY_TYPE:a,SWYM_SURVEY_TYPE:"swym:Survey",SWYM_CONTENT_TYPES_EXCEPT_SURVEY:c,ALL_SWYM_TYPES:u,getTenantUrlFromTenantId:s.getTenantUrlFromTenantId,isCommunityContentTypeButNotSurvey:function(e){return c.indexOf(e)>=0},isCommunityType:function(e){return a===e},isSurveyType:function(e){return"swym:Survey"===e},isUserType:function(e){return r===e},isMediaType:function(e){return m.indexOf(e)>=0},getSwymModelFromSearchData:function(e,t){var n=this,s=t.onComplete,r=t.onFailure,a=i.clone(e,!1),c=o.extractDataFromSubject6wURI(a.resourceid||a.objectId||a.subject6wuri||a.id),m=e["ds6w:type_value"]||e["ds6w:type"];"swym:DirectMessage"===m&&(c.modelName="dm",c.exaleadType="Conversation"),"swym:WeDo"===m&&(c.modelName="wedo",c.extraAttrs&&c.extraAttrs.mid&&delete c.extraAttrs.mid),a._tenantId=c.tenantId,window.require(["DS/SwymUICore/script/lib/model/generic/swym-model","DS/SwymUICore/script/utils/utils"],function(t,o){window.require([t.getModuleNameFromModelName(c.modelName,c.modelAMDModuleRoot)],function(t){var o;return i.extend(a,c.extraAttrs),window.ds&&"3DSwym"===window.ds.env?(s.call(n,new t(a)),this):e.preview_url&&(o=e.preview_url.split("/api/")[0])?(s.call(n,new t(a,{autoPopulate:!1,urlRoot:o})),this):void r.call(n)})})},getSwymModelFromSearchModel:function(e,t){return this.getSwymModelFromSearchData(e.toJSON(),t)},fetchSwymModel:function(e,t){window.require(["DS/SwymUICore/script/utils/utils","DS/SwymUICore/script/feature/core/config/bootstrap-model"],function(i,n){var s=n.getInstance();s.getCSRFToken(e.get("_tenantId"))?e.fetch(t):(s.addEventOnce("onSync",function(){e.fetch(t)},this),s.initialize())})},fetchSearchResultData:function(e,t){var i=null;(void 0===window.ds||window.ds&&void 0===window.ds.env)&&(l||(i=e.get("preview_url").split("/api/")[0],o.initBaseUrl(i),l=!0)),w[e instanceof n?"getSwymModelFromSearchModel":"getSwymModelFromSearchData"](e,{onComplete:function(e){w.fetchSwymModel(e,t)}})},isBetaEnabled:function(){return!0}};return w}),define("DS/SwymUnifiedSearch/script/customization/views/community-primary-view",["DS/SwymUICore/script/lib/view/generic/swym-model-view","DS/SwymUIComponents/script/feature/community/content/view/media-thumbnail-view","DS/SwymUnifiedSearch/script/utils","i18n!DS/SwymUnifiedSearch/assets/nls/properties-facet-factory"],function(e,t,i,n){"use strict";return e.extend({name:"community-primary-view",setup:function(){this._parent()},_addPropertiesSection:function(){var e=this.model.get("owner");e.nickname?e.nickname:(e.first_name,e.last_name);return null},_addMembersSection:function(){return null},_createContent:function(){var e=this.model;return[{class:"description",html:e.get("description",{escapeHTML:!1})},{class:"logo no-community-rich-tooltip","data-content-type":"community","data-content-id":e.get("mid"),html:new t({model:this.model,imageRenderingOptions:{size:"l"}})},this._addPropertiesSection(),this._addMembersSection()]}})}),define("DS/SwymUnifiedSearch/script/properties-facet-factory",["UWA/Class","DS/SwymUICore/script/feature/community/community/model/community-model","DS/SwymUICore/script/feature/core/direct-message/model/direct-message-model","i18n!DS/SwymUnifiedSearch/assets/nls/properties-facet-factory","DS/SwymUnifiedSearch/script/utils","DS/SwymUICore/script/utils/utils","DS/SwymUICore/script/feature/core/user/model/user-model","DS/SwymUICore/script/lib/model/generic/swym-model"],function(e,t,i,n,s,o,r,a){"use strict";var c=null,m=null,d=function(e){e.id||(e.id=m++),c.push(e)},u=function(e){var t=e.getAssociated("author"),i=t.get("nickname")?t.get("nickname"):t.get("first_name")+" "+t.get("last_name");return c=[],m=1,d({id:"ds6w:type",title:n.Type,value:function(e){var t=null;switch(e){case"pno:Person":t=n.User;break;case"swym:Post":t=n.Post;break;case"swym:Survey":t=n.Survey;break;case"swym:Question":t=n.Question;break;case"swym:WikitreePage":t=n.Wiki;break;case"swym:Idea":t=n.Idea;break;case"swym:Picture":t=n.Picture;break;case"swym:AnimatedPicture":t=n.AnimatedPicture;break;case"swym:Document":t=n.Document;break;case"swym:Sound":t=n.Sound;break;case"swym:Video":t=n.Video;break;case"swym:3dModel":t=n.ThreeDModel;break;case"swym:Drawing":t=n.Drawing;break;default:t=n.SwymContent}return t}(e.get("ds6w:type_value"))}),d({id:"ds6w:label",title:n.Title,value:e.get("title")}),d({id:"ds6w:created",title:n.CreationDate,value:e.get("crdate").split(" ")[0]}),s.isMediaType(e.get("ds6w:type_value"))&&d({id:"ds6w:modified",title:n.ModificationDate,value:e.get("update").split(" ")[0]}),s.isSurveyType(e.get("ds6w:type_value"))&&(d({title:n.StartDate,value:e.get("update").split(" ")[0]}),d({title:n.EndDate,value:e.get("update").split(" ")[0]})),d({id:"ds6w:responsible",title:n.Owner,value:i}),s.isMediaType(e.get("ds6w:type_value"))&&d({title:n.Size,value:o.prettySize(e.get("size"))}),c};return e.singleton({generateProperties:function(e){return e instanceof i?function(e){return[{id:"ds6w:type",title:n.Type,value:n.Conversation},{id:"ds6w:created",title:n.CreationDate,value:e.get("creation_date").split(" ")[0]}]}(e):e instanceof t||!(e instanceof a)?function(e){var t=e.hasOwnProperty("getAssociated")?e.getAssociated("owner"):null,i=t&&t.get("nickname")?t.get("nickname"):e.get("ds6w:responsible"),s=e.get("crdate"),o=s?s.split(" ")[0]:e.get("ds6w:created_value").split("T")[0],r=e.get("title")?e.get("title"):e.get("ds6w:label");return[{id:"ds6w:type",title:n.Type,value:n.Community},{id:"ds6w:label",title:n.Title,value:r},{id:"ds6w:created",title:n.CreationDate,value:o},{id:"4",title:n.MainOwner,value:i},{id:"5",title:n.Visibility,value:e.getVisibility()},{id:"6",title:n.MyRole,value:e.getTranslatedRole()}]}(e):e instanceof r?null:u(e)}})}),define("DS/SwymUnifiedSearch/script/swym-preview",["DS/SNInfraUX/SearchPreviewContainer","DS/SwymUICore/script/feature/core/user/model/user-model","DS/SwymUnifiedSearch/script/utils","UWA/Promise","DS/SwymUICore/script/feature/core/user/model/currentuser-model"],function(e,t,i,n,s){"use strict";return e.extend({_swymModel:null,init:function(e){this._parent(e)},_addCurrentUserPromise:function(){var e=null;if(!s.getInstance().hasBeenFetched())return e=n.deferred(),s.getInstanceFetched(function(){e.resolve()}),e.promise},_initialize:function(e){var t=[],i=this._addCurrentUserPromise(),s=this._addGetSwymModelPromise(e);return i&&t.push(i),s&&t.push(s),n.all(t)},_addGetSwymModelPromise:function(e){var t=null;if(!e)throw new Error("in _getSwymModel, the searchModel must be set.");var s=this;if(!this._swymModel)return t=n.deferred(),i.fetchSearchResultData(e,{onComplete:function(i){if(s._swymModel=i,!i)throw new Error("No swym model could be created from the search model:",e);t.resolve(s._swymModel)},onFailure:function(e){"swym:Community"===e.get("ds6w:type_value")&&(s._swymModel=e,s._swymModel.set("access",0),t.resolve(s._swymModel))}}),t.promise},getPrimaryContent:function(e){var i=this;require(["DS/SwymUnifiedSearch/script/customization/views/swym-content-view"],function(n){i._initialize(e.searchmodel).then(function(){i._swymContentView=new n({model:i._swymModel}),e.onComplete.call(void 0,i._swymContentView),i._swymModel instanceof t&&e.onCusto.call(void 0,{informationUser:"hide"})})})},getSecondaryContent:function(e){var t=this;this._initialize(e.searchmodel).then(function(){require(["DS/SwymUnifiedSearch/script/properties-facet-factory"],function(i){var n=i.generateProperties(t._swymModel);n?e.onFailure.call(void 0,n):e.onComplete.call(void 0,n)})})},getAppIdForOpen:function(e){return e.onComplete&&e.onComplete.call(void 0,"USASWYM_AP"),"USASWYM_AP"},dispose:function(){this._swymContentView&&this._swymContentView.destroy(),this._swymSecondaryView&&this._swymSecondaryView.destroy()}})}),define("DS/SwymUnifiedSearch/script/customization/views/media-primary-view",["DS/SwymUICore/script/lib/view/generic/swym-model-view","DS/SwymUnifiedSearch/script/utils","DS/SwymUIComponents/script/utils/media-utils"],function(e,t,i){"use strict";return e.extend({name:"media-primary-view",_detailsView:null,_mediaUrl:null,_bodySize:null,setup:function(e){var t=this.model;this._bodySize=e.widget.getSize(),this._parent(),this._detailsView=this.addChildView("mediaDetailsView",{model:t,Class:"DS/SwymUIComponents/script/feature/community/media/view/media-details-view",showDownloadButton:!0})},_createContent:function(){var e=i.generateBestThumbnailForContentView(this._bodySize.width,null,this.model);return this._mediaUrl=e.url,[this._detailsView,{tag:"img",styles:{width:"100%"},src:this._mediaUrl}]}})}),define("DS/SwymUnifiedSearch/script/customization/views/swym-content-view",["UWA/Core","DS/SwymUICore/script/lib/view/generic/swym-view","DS/SwymUnifiedSearch/script/utils","DS/SwymUICore/script/feature/core/user/model/user-model"],function(e,t,i,n){"use strict";var s=function(){require(["DS/UWPClientControls/PlatformNotify","i18n!DS/SwymUnifiedSearch/assets/nls/messages"],function(e,t){e.error(t.ErrorFetchingDataFrom3Dswym)})};return t.extend({_swymModel:null,_isIframeLoaded:!1,name:"swym-content-view",_observer:null,_innerViewDefaultOptions:{addScroller:!1,showTitle:!1,showComments:!1,showStatus:!1,showLinks:!1,showToolbar:!1,prevent3DPlayInstantiation:!0},defaultOptions:{contentHtmlRootFolder:"/webapps",frameContentInitModule:""},_sendDataToIframe:function(){var e=this.getElement("iframe");!0===this._isIframeLoaded&&this._swymModel&&this._swymModel.urlRoot&&e.contentWindow.postMessage({parentWindowOrigin:window.location.origin,modelAttributes:this._swymModel.toJSON(),viewOptions:this._innerViewDefaultOptions,lang:window.dsLang,initModule:this.getOption("frameContentInitModule"),isBetaEnabled:!0},this._swymModel.urlRoot)},_onIframeLoad:function(){this._isIframeLoaded=!0,this._sendDataToIframe(),this.dispatchEvent("onIframeLoad",[this])},_resizeFrame:function(e){this.elements.iframe.setStyle("height",e+"px")},onInit:function(){this._onIframeLoad=this._onIframeLoad.bind(this),this._messageListener=this._messageListener.bind(this),window.addEventListener?window.addEventListener("message",this._messageListener,!1):window.attachEvent("onmessage",this._messageListener)},onRender:function(){var t=this;i.getSwymModelFromSearchModel(this.model,{onComplete:function(i){t._swymModel=i,t.elements.iframe=e.createElement("iframe",{class:"swym-content-iframe",styles:{border:"none",width:"100%","pointer-events":"none"},src:t._swymModel.urlRoot+t.getOption("contentHtmlRootFolder")+"/SwymUnifiedSearch/assets/html/content.html",events:{load:t._onIframeLoad}}).inject(t.container),i instanceof n&&(t.container.setStyle("height","100%"),t.elements.iframe.setStyle("height","100%"))},onFailure:s}),this.container.setStyles({overflow:"auto"})},_messageListener:function(e){var t=e.data;e.origin;t.swymContentHeight&&this._resizeFrame(t.swymContentHeight)},destroy:function(){return this._swymModel=null,window.removeEventListener?window.removeEventListener("message",this._messageListener,!1):window.detachEvent("onmessage",this._messageListener),this._parent.apply(this,arguments)}})}),define("DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action",["DS/SwymUnifiedSearch/script/utils","DS/SwymUnifiedSearch/script/customization/actions/abstract-action","DS/CefCommunication/CefCommunication","i18n!DS/SwymUIComponents/assets/nls/feature/community/generic/skeleton-utils/content-idcard-options"],function(e,t,i,n){"use strict";return t.extend({name:"DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action",availableForTypes:function(){return e.ALL_SWYM_TYPES},getActionForObject:function(){return window.ds&&"3DSwym"===window.ds.env||i.isAvailable()?[]:[{title:n.OpenInA3DSwymApp,icon:"level-down",id:"DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action",multisel:!1,callback:function(e){this.executeAction(e.model)}.bind(this)}]},executeAction:function(){require(["DS/i3DXCompassServices/i3DXCompassPubSub","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e,t){t.getGrantedRoles(t=>{let i=t.map(e=>e.id).includes("IFW")?"X3DMCTY_AP":"USASWYM_AP";e.publish("launchApp",{appId:i})})})}})}),define("DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-community-properties-facet",["UWA/Core","DS/EditPropWidget/facets/Properties/Properties","DS/EditPropWidget/facets/Properties/EditPropController","DS/EditPropWidget/constants/EditPropConstants","DS/CefCommunication/CefCommunication","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(e,t,i,n,s,o){"use strict";var r=new o;return i.extend({isActionAvailable:function(e){return e===n.ACTION_SWYM_VIEW_COMMUNITY_IN_3DSWYM&&!s.isAvailable()},onAction:function(e){var t=this.getModel();e===n.ACTION_SWYM_VIEW_COMMUNITY_IN_3DSWYM&&t&&r.executeAction(t)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/SwymUnifiedSearch/script/customization/actions/item-click-handler",["UWA/Class/Events","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(e,t){"use strict";return t.singleton({executeAction:function(e){var t;e&&window.ds&&"3DSwym"===window.ds.env&&(t=e.model||e.itemView&&e.itemView.model)&&this._parent.call(this,t,e)}})}),define("DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-content-facet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","DS/CefCommunication/CefCommunication","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(e,t,i,n,s){"use strict";var o=new s;return t.extend({_innerView:null,init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{styles:{height:"100%"}}))},updateFacet:function(){var e=this;require(["DS/SwymUnifiedSearch/script/customization/views/swym-content-view"],function(t){if(e.elements&&e.elements.container){var i=e._innerView,n=e.getModel();if(!n)return!1;e._innerView=new t({model:n}).render({target:e.elements.container,emptyTarget:!0}),i&&setTimeout(function(){i.destroy()},0)}})},isActionAvailable:function(e){return e===i.ACTION_SWYM_VIEW_CONTENT_IN_3DSWYM&&!n.isAvailable()},onAction:function(e){var t=this.getModel();e===i.ACTION_SWYM_VIEW_CONTENT_IN_3DSWYM&&t&&o.executeAction(t)},destroyComponent:function(){this._innerView&&(this._innerView.destroy(),this._innerView=null),e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-survey-properties-facet",["UWA/Core","DS/EditPropWidget/facets/Properties/Properties","DS/EditPropWidget/facets/Properties/EditPropController","DS/EditPropWidget/constants/EditPropConstants","DS/CefCommunication/CefCommunication","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(e,t,i,n,s,o){"use strict";var r=new o;return i.extend({isActionAvailable:function(e){return e===n.ACTION_SWYM_VIEW_SURVEY_IN_3DSWYM&&!s.isAvailable()},onAction:function(e){var t=this.getModel();e===n.ACTION_SWYM_VIEW_SURVEY_IN_3DSWYM&&t&&r.executeAction(t)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/SwymUnifiedSearch/script/customization/facets/edit-properties-facets/swym-user-properties-facet",["UWA/Core","DS/EditPropWidget/facets/Properties/Properties","DS/EditPropWidget/facets/Properties/EditPropController","DS/EditPropWidget/constants/EditPropConstants","DS/CefCommunication/CefCommunication","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action"],function(e,t,i,n,s,o){"use strict";var r=new o;return i.extend({isActionAvailable:function(e){return e===n.ACTION_SWYM_VIEW_USER_PROFILE&&!s.isAvailable()},onAction:function(e){var t=this.getModel();e===n.ACTION_SWYM_VIEW_USER_PROFILE&&t&&r.executeAction(t)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/SwymUnifiedSearch/script/customization/facets/abstract-facet",["UWA/Core","UWA/Class","DS/SwymUnifiedSearch/script/utils"],function(e,t,i){"use strict";return e.merge({facet_name:null,is_facet_avalailable:function(e){},facet_idcard:function(e){}},i)}),define("DS/SwymUnifiedSearch/script/customization/items/abstract-item",["UWA/Class","DS/SwymUnifiedSearch/script/bootstrap","DS/SwymUnifiedSearch/script/utils"],function(e,t,i){"use strict";return t.start(),e.extend(i,{name:null,modelName:null,image:function(){return(this.model||this).get("preview_url")},icon:function(){return(this.model||this).get("type_icon_url")}})}),define("DS/SwymUnifiedSearch/script/customization/facets/content-viewer-facet",["UWA/Core","DS/W3DXComponents/Skeleton","DS/SwymUnifiedSearch/script/utils","DS/SwymUnifiedSearch/script/customization/facets/abstract-facet"],function(e,t,i,n){"use strict";return e.merge({facet_name:"swym-content-viewer",is_facet_avalailable:function(e){var t=e&&e.get("ds6w:what/ds6w:type_value");return!!i.isCommunityContentTypeButNotSurvey(t)},facet_idcard:function(){return{handler:t.getRendererHandler("DS/SwymUnifiedSearch/script/customization/views/swym-content-view")}}},n)}),define("DS/SwymUnifiedSearch/script/customization/items/content-item",["UWA/Core","DS/SwymUnifiedSearch/script/utils","DS/SwymUnifiedSearch/script/customization/items/abstract-item","DS/SwymUnifiedSearch/script/customization/facets/content-viewer-facet","DS/SwymUnifiedSearch/script/customization/actions/open-in-3dswym-context-action","DS/CefCommunication/CefCommunication","i18n!DS/SwymUIComponents/assets/nls/feature/community/generic/skeleton-utils/content-idcard-options"],function(e,t,i,n,s,o,r){"use strict";return i.extend({names:t.SWYM_CONTENT_TYPES_EXCEPT_SURVEY,getIdCardOpts:function(i){return{thumbnail:null,banner:null,attributesMapping:{title:function(){return(this.get("ds6w:label")||this.get("title")||"").escapeHTML()},date:function(){return this.get("ds6w:modified")},ownerName:function(){return this.get("ds6w:who/ds6w:responsible")}},actions:function(){var e=this.model||this;return window.ds&&"3DSwym"===ds.env||o.isAvailable()?[]:[{text:t.isUserType(e.get("ds6w:what/ds6w:type_value"))?r.OpenUserProfile:r.OpenInA3DSwymApp,icon:"level-down",handler:function(e){(new s).executeAction(e.model)}}]},facetsLikeTabs:!1,facets:function(){return[e.merge({name:"description"},n.facet_idcard()),{name:"endorsements",text:r.Endorsements,icon:"thumbs-up",attribute:"ds6w:what/ds6w:social/ds6w:endorsements"},{name:"comments",text:r.Comments,icon:"comment",attribute:"ds6w:what/ds6w:social/ds6w:comments"}]}}},getEditPropertiesComponentFacets:function(e){var i=e&&e.get("ds6w:what/ds6w:type_value");if(i){if(this.SWYM_CONTENT_TYPES_EXCEPT_SURVEY(i))return["FACET_SWYM_CONTENT"];switch(i){case t.SWYM_USER_TYPE:return["FACET_SWYM_USER_PROPERTIES"];case t.SWYM_COMMUNITY_TYPE:return["FACET_SWYM_COMMUNITY_PROPERTIES"];case t.SWYM_SURVEY_TYPE:return["FACET_SWYM_SURVEY_PROPERTIES"]}}return!1}})});