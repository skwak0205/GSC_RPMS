define("DS/3DPlayDMUExperience/3DPlayDMUExperience",["DS/3DPlayExperienceModule/PlayExperience3D","DS/Visualization/ThreeJS_DS","DS/DMUReadPersistence/DMUReviewPersistenceServices","DS/DMUBaseUIControllers/DMUReviewContextInitializer","DS/DMUBaseUIServices/DMUSlidePreferences","DS/DMUBaseExperience/EXPImportServices","DS/DMUControls/EXPNotify","DS/DMUBaseExperience/DMUContextManager","DS/DMUBaseUIControllers/DMU2DSheetManager","DS/DMUBaseExperience/EXPManagerSet","DS/DMUPlaySlide/controllers/DMUSlideShowController","DS/ApplicationFrame/CommandsManager","DS/DMUBaseUIControllers/DMUSlidesController","DS/DMUBaseUIControllers/DMUCommentsController","DS/DMUReadPersistence/DMUWebServicesUtils","DS/DMUBaseUIControllers/DMUApplicativeContextManager","DS/CATWebUXPreferences/CATWebUXPreferencesManager","DS/CATWebUXPreferences/CATWebUXPreferencesUtils","DS/CATWebUXSelectionManager/CATWebUXSelectionManager","DS/CATWebUXComponents/CATWebUXUtils","DS/DMUMeasurable/DMUToolsSceneGraph","DS/DMUReadPersistence/DMULoadingContextController","i18n!DS/3DPlayDMUExperience/assets/nls/3DPlayDMUExperience"],function(e,t,n,r,o,i,a,l,c,s,d,D,p,m,u,g,C,f,w,M,y,P,V){"use strict";var S;return e.extend({init:function(e){var h,x,U,v,b,A,I,R,T,W,E,k,O=new n,F=!1,L=this,j=!0,_=!1,B=!1,X={},N="";let G=!1;function q(e){var t={lastCommand:[],currentCommand:null,defaultCommand:null},n=L.pad3DViewer.getCommandContext();n?D._commandsState[n]=t:D._commandsState=t,D.resetDefaultCommand(n),D._isCommandEnding=!1,D._ignoreCommandBeginWhileEndingCommand=!1,["_commands","_cmdCheckHeader"].forEach(function(e){var t=n&&D[e]?D[e][n]:D[e];t&&Object.keys(t).forEach(function(e){var n=t[e];n&&n._destroy&&n._destroy(),delete t[e]})});var r=L.pad3DViewer.getFrameWindow().getActionBar(),o=r.onActionBarReady(function(){r.removeCallback(o),setTimeout(e.actionBarReadyCb,500)});L.pad3DViewer.loadActionBar({file:e.file,module:e.module})}function H(e,t){var n=function(){if(L.pad3DViewer){var e,n=D.getCommandCheckHeader("WebDocumentBookmarksPanelCmdHdr",L.pad3DViewer.getCommandContext());if(n){let e=localStorage.getItem("DMUBookmarksPanelDisplayed");"true"!==e&&("false"===e||"Requirement"!==t&&"Requirement Specification"!==t)||n.setState(!0),x&&x.documentHasBookmarks()?n.enable():n.disable()}if((n=D.getCommand("WebDocumentRotatePagesLeftCmdHdr",L.pad3DViewer.getCommandContext()))&&(x&&"Document"===x.getDocumentType()?n.enable():n.disable()),(n=D.getCommand("WebDocumentRotatePagesRightCmdHdr",L.pad3DViewer.getCommandContext()))&&(x&&"Document"===x.getDocumentType()?n.enable():n.disable()),(n=D.getCommand("DMUNextCommentCmdHdr",L.pad3DViewer.getCommandContext()))&&(I&&I.hasComments()?n.enable():n.disable()),(n=D.getCommand("DMUPreviousCommentCmdHdr",L.pad3DViewer.getCommandContext()))&&(I&&I.hasComments()?n.enable():n.disable()),l.getReviewContext({context:L.pad3DViewer})&&l.getReviewContext({context:L.pad3DViewer}).getCurrentSessionMarkup()&&(e=l.getReviewContext({context:L.pad3DViewer}).getCurrentSessionMarkup()),e){var r=e.getSlides(),o=e.getAttribute("sCurrentSlideId"),i=p.giveDMUSlidesController({context:L.frmWindow});if(L.autoReframe=!1,i)if("string"==typeof o){for(var a=0;a<r.length;a++)if(r[a].getAttribute("sID")===o){i.setActiveSlide(r[a]);break}}else r.length&&i.setActiveSlide(r[0])}}};N!==e?("ITF"===e?q({file:"3DPlayDMUAndITFSection.xml",module:"3DPlayDMUExperience",actionBarReadyCb:n}):"Document"===e?q({file:"3DPlayDMUExperienceDocument.xml",module:"3DPlayDMUExperience",actionBarReadyCb:n}):"3D"===e?q({file:"3DPlayDMUExperience.xml",module:"3DPlayDMUExperience",actionBarReadyCb:n}):"2D"===e?q({file:"3DPlayDMUDrawingExperience.xml",module:"3DPlayDMUExperience",actionBarReadyCb:n}):"MSR"===e&&q({file:"3DPlayDMUMSRExperience.xml",module:"3DPlayDMUExperience",actionBarReadyCb:n}),N=e):n()}function J(e){v||(v=g.getDMUApplicativeContextManager({context:L.pad3DViewer})).initApplicativeContainer(e,{onReady:function(e){e&&e.length&&e.forEach(function(e){"POI"!==e.getApplicativeContainerID()&&e.setActiveState(!0)})}})}function K(){if(_&&B){var e;L.pad3DViewer.getRootBagPath().getChildrenPathes()[0]&&(e=y.getNodeType(L.pad3DViewer.getRootBagPath().getChildrenPathes()[0].getLastElement(!0)));var t=L.pad3DViewer.getApplicativeData().getLoadedItfData&&L.pad3DViewer.getApplicativeData().getLoadedItfData().data.length?"ITF":"Drawing"===e||"DIFLayout"===e||"DIFSheet"===e?"2D":"Document"===e||"Requirement"===e||"Requirement Specification"===e?"Document":"DesignSight"===e?"MSR":"3D";J(t),"Document"!==t||"DXF"!==U.getLoadMarkupCtxType()&&"DWG"!==U.getLoadMarkupCtxType()||(t="2D"),H(t),"Document"===t&&L.pad3DViewer.getViewpoint().setDefaultController(!0,"CATIA"),(E=w.getSelectionManager({context:L.pad3DViewer})).setActiveState(!0);let a=l.giveEventsController({viewer:L.pad3DViewer.getViewer()});if(W=C.getPreferenceManager({context:L.pad3DViewer.getFrameWindow()}))if(W.setUnitsPreferencesDisplayFlag(!0),W.setDisplayPreferencesDisplayFlag(!0),W.set3DSelectionPreferencesDisplayFlag(!0),W.set2DSelectionPreferencesDisplayFlag(!0),W.addPreferences([{nls:V.preferences.markupSectionTitle,id:"MarkupPreferences",type:"section",preferences:[{nls:V.preferences.SlideTitleDisplayLbl,id:"DMUDisplaySlideTitle",type:"checkbox",getValue:function(){return"true"===localStorage.getItem("DMUDisplaySlideTitle")},getDefaultValue:function(){return!1},setValue:function(e){e!==("true"===localStorage.getItem("DMUDisplaySlideTitle"))&&(localStorage.setItem("DMUDisplaySlideTitle",e?"true":"false"),a&&a.fireEvent("onDMUPreferencesChanged",{DMUDisplaySlideTitle:e}))}},{nls:V.preferences.compareSectionTitle,id:"ComparePreferences",type:"section",preferences:[{nls:V.preferences.firstProductColor,id:"DMUCompareFirstColor",type:"color",getValue:function(){return localStorage.getItem("DMUCompareFirstColor")?localStorage.getItem("DMUCompareFirstColor"):"#FF0000"},getDefaultValue:function(){return"#FF0000"},setValue:function(e){localStorage.setItem("DMUCompareFirstColor",e),a&&a.fireEvent("onDMUPreferencesChanged",{DMUCompareFirstColor:e})}},{nls:V.preferences.secondProductColor,id:"DMUCompareSecondColor",type:"color",getValue:function(){return localStorage.getItem("DMUCompareSecondColor")?localStorage.getItem("DMUCompareSecondColor"):"#00FF00"},getDefaultValue:function(){return"#00FF00"},setValue:function(e){localStorage.setItem("DMUCompareSecondColor",e),a&&a.fireEvent("onDMUPreferencesChanged",{DMUCompareSecondColor:e})}},{nls:V.preferences.compare3DCommonColor,id:"DMUCompare3DCommonColor",type:"color",getValue:function(){return localStorage.getItem("DMUCompare3DCommonColor")?localStorage.getItem("DMUCompare3DCommonColor"):"#D3D3D3"},getDefaultValue:function(){return"#D3D3D3"},setValue:function(e){localStorage.setItem("DMUCompare3DCommonColor",e),a&&a.fireEvent("onDMUPreferencesChanged",{DMUCompare3DCommonColor:e})}},{nls:V.preferences.compare2DCommonColor,id:"DMUCompare2DCommonColor",type:"color",getValue:function(){return localStorage.getItem("DMUCompare2DCommonColor")?localStorage.getItem("DMUCompare2DCommonColor"):"#000000"},getDefaultValue:function(){return"#000000"},setValue:function(e){localStorage.setItem("DMUCompare2DCommonColor",e),a&&a.fireEvent("onDMUPreferencesChanged",{DMUCompare2DCommonColor:e})}}]}]}]),W.setPreferredPreferenceContainersOrder(["MarkupPreferences","MeasurePreferences","SectionPreferences","ComparePreferences"]),X.CATWebUXPreferences_GravitationalEffects=W.subscribe("CATWebUXPreferences_GravitationalEffects",function(e){L.pad3DViewer&&L.pad3DViewer.getViewer()&&L.pad3DViewer.getViewer().currentViewpoint&&L.pad3DViewer.getViewer().currentViewpoint.control&&(L.pad3DViewer.getViewer().currentViewpoint.getControl().setRotationRolling(!e),L.pad3DViewer.getViewer().currentViewpoint.getControl().setRollingForTouchAvailable(!e))}),X.CATWebUXPreferences_ProjectionType=W.subscribe("CATWebUXPreferences_ProjectionType",function(e){L.pad3DViewer&&L.pad3DViewer.getViewer()&&L.pad3DViewer.getViewer().currentViewpoint&&L.pad3DViewer.getViewer().currentViewpoint.setProjectionType(e)}),X.CATWebUXPreferences_Select3DGeometry=W.subscribe("CATWebUXPreferences_Select3DGeometry",function(e){E&&!L.pad3DViewer.getViewer().get2DMode()&&E.setPicking(e?0:1)}),X.CATWebUXPreferences_Select2DGeometry=W.subscribe("CATWebUXPreferences_Select2DGeometry",function(e){E&&L.pad3DViewer.getViewer().get2DMode()&&E.setPicking(e?0:1)}),X.CATWebUXPreferences_SelectParentReferenceOr3DShape=W.subscribe("CATWebUXPreferences_SelectParentReferenceOr3DShape",function(e){E&&E.selectParentReference("select3DShape"!==e)}),L.pad3DViewer.getViewer().get2DMode()){var n=f.getPreference("CATWebUXPreferences_Select2DGeometry","boolean");E&&E.setPicking(n?0:1)}else{var r=f.getPreference("CATWebUXPreferences_GravitationalEffects","boolean");"boolean"==typeof r&&(L.pad3DViewer.getViewer().currentViewpoint.getControl().setRotationRolling(!r),L.pad3DViewer.getViewer().currentViewpoint.getControl().setRollingForTouchAvailable(!r));var o=f.getPreference("CATWebUXPreferences_ProjectionType","int");0!==o&&1!==o||L.pad3DViewer.getViewer().currentViewpoint.setProjectionType(o);var i=f.getPreference("CATWebUXPreferences_Select3DGeometry","boolean");E&&E.setPicking(i?0:1);let e=f.getPreference("CATWebUXPreferences_SelectParentReferenceOr3DShape","string");E&&E.selectParentReference("select3DShape"!==e)}}}function z(){if(!B){if(B=!0,l.getReviewContext({context:L.pad3DViewer})&&l.getReviewContext({context:L.pad3DViewer}).getCurrentSessionMarkup()){var e;L.pad3DViewer.getRootBagPath().getChildrenPathes()[0]&&(e=y.getNodeType(L.pad3DViewer.getRootBagPath().getChildrenPathes()[0].getLastElement(!0)));var t=L.pad3DViewer.getApplicativeData().getLoadedItfData&&L.pad3DViewer.getApplicativeData().getLoadedItfData().data.length?"ITF":"Drawing"===e||"DIFLayout"===e||"DIFSheet"===e?"2D":"Document"===e||"Requirement"===e||"Requirement Specification"===e?"Document":"DesignSight"===e?"MSR":"3D";if(U||(U=P.getLoadingContextController({context:L.pad3DViewer})),"DXF"!==U.getLoadMarkupCtxType()&&"DWG"!==U.getLoadMarkupCtxType()||(t="2D"),J(t),H(t,e),"Document"===t&&(L.pad3DViewer.getViewpoint().setDefaultController(!0,"CATIA"),x||(x=s.getManager({name:"DMU2DSheetManager",context:L.frmWindow})),I||(I=m.giveDMUCommentsController({context:L.frmWindow,commandContext:L.pad3DViewer.getCommandContext()})),!x.isADocumentDisplayed())){let n=l.giveEventsController({viewer:L.pad3DViewer.getViewer()}),r=n.addEvent("on2DDocumentLoadSuccess",()=>{n.removeEvent(r),H(t,e)})}A||(A=new d({context:L.pad3DViewer})).subscribe("onActiveStateModified",function(e){j=!e.state}),F||(o.setSlidePreferences({context:L.frmWindow,preferences:{displayNominal:!0}}),F=!0)}K()}}function Q(e){if(!_&&void 0!==e.reviewId){let t;(t="Markup"===e.reviewType?O.getDnDReviewAndJSONFile:O.getMarkupStream)({markupId:e.reviewId,markupType:e.reviewType,markupOwner:e.owner},function(t){var n,a={},c=null,s=null,D=function(){l.removeReviewContext({context:L.pad3DViewer});var n=r.createReviewContext({context:L.pad3DViewer}),a=new i({viewer:L.frmWindow.getViewer(),experience:n,appType:"3dPlay"});a.importDataModel(t.jsonObj,function(r){a.postImport(),n.setCurrentSessionMarkup(r[0].getMarkupContent?r[0].getMarkupContent():r[0]),n.setReadOnly(!0),n.refreshNode(),U||(U=P.getLoadingContextController({context:L.pad3DViewer})),n.setReviewCtxInformation({contextId:e.physicalid,contextType:U?U.getLoadMarkupCtxType():k,reviewId:t.reviewPid,reviewName:e.displayname,reviewType:t.reviewType,modifiable:t.modifiable,owner:t.owner,tempObjectInfo:U?U.getTempObjectInformations():void 0}),_=!0,o.setSlidePreferences({context:L.frmWindow,preferences:{panelTitle:e.displayname}}),K()})};t.jsonObj.Contexts?(e.refresh&&D(),U||(U=P.getLoadingContextController({context:L.pad3DViewer})),"Document"===e.dtype?(t.jsonObj.Contexts[0].documentVersionInfos&&(n=t.jsonObj.Contexts[0].documentVersionInfos),a.objectId=e.physicalid,a.objectType="Document",a.documentType=t.jsonObj.Contexts[0].documentType,a.fileId=n?n.fileId:"",a.cbOK=function(){D()},a.appInfo="X3DPLAW_AP",U.load({data:a})):(s=t.jsonObj.Contexts[0].listData,c=t.jsonObj.Contexts[0].loadingInfos,s&&0!==s.length?(a.objectId=s,a.objectType="PLMPIMMetricReference",a.loadMode=c,a.appInfo="X3DPLAW_AP",a.cbOK=function(){D()},U.load({data:a})):(a.objectId=e.physicalid,a.objectType="SIMItfSimulation",a.loadMode=c,a.appInfo="X3DPLAW_AP",a.cbOK=function(){D()},U.load({data:a})))):"Requirement"===e.dtype||"Requirement Specification"===e.dtype?(U||(U=P.getLoadingContextController({context:L.pad3DViewer})),a.objectId=e.physicalid,a.objectType=e.dtype,a.cbOK=function(){D()},a.appInfo="X3DPLAW_AP",U.load({data:a})):D();A||(A=new d({context:L.pad3DViewer})).subscribe("onActiveStateModified",function(e){j=!e.state}),F||(o.setSlidePreferences({context:L.frmWindow,preferences:{displayNominal:!0}}),F=!0)},function(){h&&h.destroy(),h=new a({body:L.frmWindow.getUIFrame(),type:"error",message:V.noMarkup})})}}S=null,this.internalLoad=function(e){if(l.removeReviewContext({context:L.pad3DViewer}),b=e?JSON.stringify(e):null,e){var t=e.asset.physicalid,n=e.asset.type;if(t){var r=function(){h&&h.destroy(),h=new a({body:L.frmWindow.getUIFrame(),type:"error",message:V.loadError})};let o;(o="Markup"===e.asset.type?O.getProductByMarkerId:O.getMarkupInfos)(e.asset,function(o){var i=e.asset;i.physicalid=o.MarkupContext.serviceID&&"r2vsurvey"===o.MarkupContext.serviceID?o.MarkupContext.contextId:o.MarkupContext.contexts[0].id,i.dtype=o.MarkupContext.serviceID&&"r2vsurvey"===o.MarkupContext.serviceID?"R2VFeatureState":o.MarkupContext.contexts[0].type,i.reviewId=t,i.reviewType=n,i.owner=o.owner,k=i.dtype;var a,l,d=function(){R||(R=L.pad3DViewer.subscribe({event:"onRootAdded"},function(e){var t;t={physicalid:e.id,dtype:y.getNodeType(e.path.getLastElement(!0)),onComplete:function(){G||(G=!0,L.onModelLoadingCompleted(),z(),Q(i))},onFailure:function(){G||(G=!0,L.onModelLoadingCompleted(),L.clearView(),r())}},x&&require(["DS/PADUtils/PADUtilsServices","DS/PADUtils/PADSettingsMgt"],function(e,n){e&&n&&x.load2DDocument({phyID:t.physicalid,serverUrl:e.get3DSpaceUrl(),securityContext:n.getSetting("pad_security_ctx"),dataType:t.dtype,is2DCompareActive:G,parentNode:L.pad3DViewer.getRootBagPath().getChildrenPathes()[L.pad3DViewer.getRootBagPath().getChildrenPathes().length-1].getLastElement(!0),onLoadingStarted:function(){G||L.onModelLoadingStarted(!0)},onComplete:t.onComplete,onFailure:t.onFailure})})})),T||(T=L.pad3DViewer.subscribe({event:"onRootRemoved"},function(e){x&&x.clean2DDocument(e)})),(x=s.getManager({name:"DMU2DSheetManager",context:L.frmWindow}))||(x=new c({ctxViewer:L.pad3DViewer}),s.addManager({name:"DMU2DSheetManager",context:L.frmWindow,manager:x})),L.pad3DViewer.addRoots({objects:[{path:[i.physicalid]}]})};a=i.dtype,l=function(e){e&&e.length&&-1!==e.indexOf("SIMItfSimulation")?Q(i):e&&e.length&&-1!==e.indexOf("DesignSight")?function(){U||(U=P.getLoadingContextController({context:L.pad3DViewer}));var e={};e.objectId=i.physicalid,e.objectType=i.dtype,U.load({data:e}),Q(i)}():e&&e.length&&(-1!==e.indexOf("Drawing")||-1!==e.indexOf("CATDrawing"))?d():-1!==e.indexOf("DIFLayout")||-1!==e.indexOf("DIFSheet")?function(){U||(U=P.getLoadingContextController({context:L.pad3DViewer}));var e={};e.objectId=i.physicalid,e.objectType=i.dtype,U.load({data:e}),Q(i)}():e&&e.length&&(e.includes("Document")||e.includes("Requirement")||e.includes("Requirement Specification"))?(R||(R=L.pad3DViewer.subscribe({event:"onRootAdded"},function(){z()})),(x=s.getManager({name:"DMU2DSheetManager",context:L.frmWindow}))||(x=new c({ctxViewer:L.pad3DViewer}),s.addManager({name:"DMU2DSheetManager",context:L.frmWindow,manager:x})),I||(I=m.getDMUCommentsController({context:L.frmWindow,commandContext:L.pad3DViewer.getCommandContext()})),Q(i)):e&&e.length&&-1!==e.indexOf("R2VFeatureState")?(R||(R=L.pad3DViewer.subscribe({event:"onRootAdded"},function(){L.onModelLoadingCompleted(),z(),Q(i)})),L.pad3DViewer.addR2Vs({objects:[{displayName:"r2vName",objectId:i.physicalid,objectType:"R2V_FeatureState",path:[{resourceid:i.physicalid,type:"R2V_FeatureState"}],serviceId:"r2vsurvey"}],reframe:!1,displayNotif:!0,dispatch:!0})):(R||(R=L.pad3DViewer.subscribe({event:"onRootAdded"},function(){L.onModelLoadingCompleted(),z(),Q(i)})),"ENOStrRefinementSpecification"===k?L.pad3DViewer.addFilter([{objectId:i.physicalid}]):L.pad3DViewer.addRoots({objects:[{path:[i.physicalid]}]}))},u.getParentTypes(a).then(function(e){l([a].concat(e))}).catch(function(){l([a])})},r)}}},this.internalClear=function(e){if(W){W.removePreferences(["MarkupPreferences"]);var t=Object.keys(X);for(let e=0;e<t.length;e++)W.unsubscribe(X[t[e]]);X={}}if(L.pad3DViewer&&R&&L.pad3DViewer.unsubscribe(R),R=null,L.pad3DViewer&&T&&L.pad3DViewer.unsubscribe(T),T=null,A&&(A.clean(),A=null),v&&g.unreferenceDMUApplicativeContextManager({context:L.pad3DViewer}),e){if(C.unreferencePreferenceManager({context:L.pad3DViewer.getFrameWindow()}),W=null,w.unreferenceSelectionManager({context:L.pad3DViewer}),E=null,l.removeReviewContext({context:L.pad3DViewer}),x&&x.clean2DDocument(),I&&I.cleanCommentsPanel(),m.unreferenceDMUCommentsController({context:L.frmWindow}),L.pad3DViewer.getRootBagPath().getChildrenPathes()[0]){var n=y.getNodeID(L.pad3DViewer.getRootBagPath().getChildrenPathes()[0].getLastElement(!0));L.pad3DViewer.getController().removeRoots({pids:[n]})}s.removeManager({name:"DMU2DSheetManager",context:L.frmWindow})}_=!1,B=!1,G=!1,x=I=v=null},this.internalDispose=function(e){b=null,L.frmWindow.getContextualUIManager().unregister("3DPlayDMUExperience"),o.removeSlidePreferences({context:L.frmWindow}),L.internalClear&&L.internalClear("ENOR3D_AP"!==e),O=null,F=!1},this.internalRefresh=function(){b&&(L.internalClear(!0),L.internalLoad(JSON.parse(b),!0))},this.internalPostCreate=function(){L.frmWindow.getContextualUIManager().register({subscriberId:"3DPlayDMUExperience",workbenchName:"3DPlayDMUExperience",context:L.pad3DViewer.getCommandContext(),cmdPrefix:"",fileName:"3DPlayDMUExperience.xml",module:"3DPlayDMUExperience",onContextualMenuReady:function(e,n){var r=[];if(j&&n&&n.XmousePosition){var o=new t.Vector2(n.XmousePosition,n.YmousePosition),i=L.frmWindow.getViewer().getMousePosition(o);0===L.frmWindow.getViewer().pick(i,"mesh",!0).path.length&&(M.isMobile()||(r=[{line:1,name:"DMU3DReviewDisplaySubMenu",resourceFile:"DMUBaseCommands/3DPlayPro",hdr_list:["VisuQMCommand"]}]),r=r.concat([{line:1,name:"DMU3DReviewAmbiencesSubMenu",resourceFile:"DMUBaseCommands/3DPlayPro",hdr_list:["VisuPureWhiteOCACmd","VisuWhiteMirrorOCACmd","VisuWhiteReviewOCACmd","VisuWhiteExperienceOCACmd","VisuStudioOCACmd","VisuDarkMirrorOCACmd","VisuDarkReviewOCACmd","VisuWhiteDesignOCACmd","VisuBlueDesignOCACmd","VisuDarkDesignOCACmd","VisuIndoorOCACmd","VisuCityOCACmd","VisuRoadOCACmd","VisuOutdoorOCACmd","VisuBasicOCACmd"]}]))}return{cmdList:r}}})},e.commandApplication=!1,e.workbenchs=e.workbenchs||[],e.options.pad3DViewer||e.workbenchs.push({name:"3DPlayDMUExperience",module:"3DPlayDMUExperience"}),this._parent(e),this.subscribe("ASSET/LOADINGFINISHED",z,!0)},clearView:function(){this.internalClear&&this.internalClear(!0),this._parent()},onPostCreate:function(){this.pad3DViewer.getViewer().setPrePicking({activated:!0,displayHL:!0}),window.widget.setMetas({helpPath:"3DPlayDMUExperience/assets/help"}),window.widget.dispatchEvent("onPlayExperienceReady",[{pad3DViewer:this.pad3DViewer}]),this.internalPostCreate&&this.internalPostCreate()},dispose:function(e){window.widget.setMetas({helpPath:void 0}),this.internalDispose&&this.internalDispose(S),S=null,this._parent(e)},refresh:function(){return this.internalRefresh&&this.internalRefresh(),!0},loadAsset:function(e){e&&e.asset&&e.asset.physicalid&&this.internalLoad&&(this.clearView(),this.internalLoad(e))},acceptSwitch:function(e){var t=!1;return e&&e.options&&e.options.id&&("ENOR3D_AP"!==(S=e.options.id)&&"CATC3D_AP"!==S&&"CATA3I_AP"!==S||(t=!0)),t}})});