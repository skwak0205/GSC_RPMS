define("DS/Animation/ANIM",[],function(){"use strict";var t={assert:function(t){if(!t)throw"ANIM.assert failed"},assertX:function(t,i){if(!t)throw"ANIM.assert failed:"+i},State:{RUNNING:0,STOPPED:1,PAUSED:2},Direction:{FORWARD:0,BACKWARD:1}};return t}),define("Animation/ANIM",["DS/Animation/ANIM","DS/DSMigration/DSMigration"],function(t,i){return i.deprecateModule("Animation/ANIM"),t}),define("DS/Animation/AnimationEngine",["DS/Animation/ANIM"],function(t){"use strict";var i=function(){if(i.prototype.instance)return i.prototype.instance;i.prototype.instance=this,this._animations=[]};return i.prototype._register=function(t){this._animations.push(t)},i.prototype._unregister=function(t){this._animations.splice(this._animations.indexOf(t),1)},i.prototype.step=function(i){for(var n=this._animations,e=[],o=[],r=0;r<n.length;++r){var a=n[r];a.direction()===t.Direction.FORWARD?a.setTime(a.time()+i):n.setTime(n.time()-i),(a.direction()===t.Direction.FORWARD&&a.time()===a.duration()||a.direction()===t.Direction.BACKWARD&&0===a.time())&&(a.loop()?o.push(a):e.push(a))}for(r=0;r<e.length;++r)e[r].stop();for(r=0;r<o.length;++r)o[r].start()},i}),define("Animation/AnimationEngine",["DS/Animation/AnimationEngine","DS/DSMigration/DSMigration"],function(t,i){return i.deprecateModule("Animation/AnimationEngine"),t}),define("DS/Animation/AbstractAnimation",["DS/Animation/ANIM","DS/Animation/AnimationEngine"],function(t,i){"use strict";var n=function(i){this._state=t.State.STOPPED,this._direction=t.Direction.FORWARD,this._loop=0,this._time=0,this._onStateChange=i,this._group=null};return n.prototype.state=function(){return this._state},n.prototype.direction=function(){return this._direction},n.prototype.setDirection=function(i){t.assert(null===this._group),this._direction=i,this._updateDirection(i)},n.prototype.loop=function(){return this._loop},n.prototype.setLoop=function(i){t.assert(null===this._group),this._loop=i},n.prototype.time=function(){return this._time},n.prototype.setTime=function(i){t.assert(null===this._group);var n=Math.max(0,Math.min(this.duration(),i));this._time=n,this._updateCurrentTime(n)},n.prototype.duration=function(){t.assert(!1)},n.prototype.group=function(){return this._group},n.prototype.isRunning=function(){return this._state===t.State.RUNNING},n.prototype.start=function(){(t.assert(null===this._group),this.rewind(),this._state!==t.State.RUNNING)&&((new i)._register(this),this._state=t.State.RUNNING,this._updateState(this._state))},n.prototype.pause=function(){(t.assert(null===this._group),this._state===t.State.RUNNING)&&((new i)._unregister(this),this._state=t.State.PAUSED,this._updateState(this._state))},n.prototype.resume=function(){(t.assert(null===this._group),this._state===t.State.PAUSED)&&((new i)._register(this),this._state=t.State.RUNNING,this._updateState(this._state))},n.prototype.stop=function(){(t.assert(null===this._group),this._state!==t.State.STOPPED)&&((new i)._unregister(this),this._state=t.State.STOPPED,this._updateState(this._state))},n.prototype.rewind=function(){this._direction===t.Direction.FORWARD?this.setTime(0):this.setTime(this.duration())},n.prototype._updateCurrentTime=function(){t.assert(!1)},n.prototype._updateState=function(t){this._onStateChange&&this._onStateChange(t)},n.prototype._updateDirection=function(){},n}),define("Animation/AbstractAnimation",["DS/Animation/AbstractAnimation","DS/DSMigration/DSMigration"],function(t,i){return i.deprecateModule("Animation/AbstractAnimation"),t}),define("DS/Animation/AnimationGroup",["DS/Animation/ANIM","DS/Animation/AbstractAnimation"],function(t,i){"use strict";var n=function(){i.call(this),this._children=[]};return(n.prototype=new i).duration=function(){for(var t=0,i=0;i<this._children.length;++i)t=Math.max(t,this._children[i].offset+this._children[i].animation.duration());return t},n.prototype.animationCount=function(){return this._children.length},n.prototype.animationAt=function(i){return t.assert(0<=i&&i<this.animationCount()),this._children[i].animation},n.prototype.indexOfAnimation=function(t){for(var i=0;i<this._children.length;++i)if(this._children[i].animation===t)return i;return-1},n.prototype.addAnimation=function(i,e){t.assert(e&&this.state()===t.State.STOPPED&&e.state()===t.State.STOPPED),t.assert(!(e instanceof n)||!e.isAncestorOf(this)),e._group&&e._group.removeAnimation(e),e.setDirection(this.direction()),e.setLoop(0),this._children.push({offset:i,animation:e}),e._group=this},n.prototype.removeAnimation=function(i){t.assert(i&&i._group===this&&this.state()===t.State.STOPPED);var n=this.indexOfAnimation(i);this._children.splice(n,1),i._group=null},n.prototype.moveAnimation=function(i,n){t.assert(i&&i._group===this&&this.state()===t.State.STOPPED);var e=this.indexOfAnimation(i);this._children[e].offset=n},n.prototype.clear=function(){t.assert(this.state()===t.State.STOPPED);for(var i=0;i<this._children.length;++i)this._children[i].animation._group=null;this._children=[]},n.prototype.isAncestorOf=function(t){for(;t;){if(t===this)return!0;t=t._group}return!1},n.prototype._updateCurrentTime=function(i){for(var n=t.State.STOPPED,e=0;e<this._children.length;++e){var o=this._children[e];o.animation._time=i-o.offset,o.animation._updateCurrentTime(o.animation._time),n=o.offset<this.time()&&this.time()<o.offset+o.animation.duration()?this.state():t.State.STOPPED,o.animation._state!==n&&(o.animation._state=n,o.animation._updateState(n))}},n.prototype._updateState=function(i){for(var n=t.State.STOPPED,e=0;e<this._children.length;++e){var o=this._children[e];n=o.offset<this.time()&&this.time()<o.offset+o.animation.duration()?this.state():t.State.STOPPED,o.animation._state!==n&&(o.animation._state=n,o.animation._updateState(n))}},n.prototype._updateDirection=function(t){for(var i=0;i<this._children.length;++i){var n=this._children[i];n.animation._direction=t,n.animation._updateDirection(t)}},n}),define("Animation/AnimationGroup",["DS/Animation/AnimationGroup","DS/DSMigration/DSMigration"],function(t,i){return i.deprecateModule("Animation/AnimationGroup"),t}),define("DS/Animation/PropertyAnimation",["DS/Animation/ANIM","DS/Animation/AbstractAnimation"],function(t,i){"use strict";var n=function(t,n,e,o){i.call(this,o),this._target=t,this._property=n,this._path=e};return(n.prototype=new i).target=function(){return this._target},n.prototype.setTarget=function(i){t.assert(this.state()===t.State.STOPPED),this._target=i},n.prototype.property=function(){return this._property},n.prototype.setProperty=function(i){t.assert(this.state()===t.State.STOPPED),this._property=i},n.prototype.path=function(){return this._path},n.prototype.setPath=function(i){t.assert(this.state()===t.State.STOPPED),this._path=i},n.prototype.duration=function(){return this._path.duration()},n.prototype._updateCurrentTime=function(t){this._target[this._property]instanceof Function?this._target[this._property](this._path.valueAt(t)):this._target[this._property]=this._path.valueAt(t)},n}),define("Animation/PropertyAnimation",["DS/Animation/PropertyAnimation","DS/DSMigration/DSMigration"],function(t,i){return i.deprecateModule("Animation/PropertyAnimation"),t}),define("DS/Animation/AnimationPath",["DS/Animation/ANIM"],function(t){"use strict";var i=function(i,n,e){this._startValue=i,this._endValue=n,this._duration=e,this._easingCurve=function(i){return t.assert(0<=i&&i<=1),i},this._interpolator=function(t,i,n){return i+(n-i)*t}};return i.prototype.startValue=function(){return this._startValue},i.prototype.setStartValue=function(t){this._startValue=t},i.prototype.endValue=function(){return this._endValue},i.prototype.setEndValue=function(t){this._endValue=t},i.prototype.duration=function(){return this._duration},i.prototype.setDuration=function(t){this._duration=t},i.prototype.easingCurve=function(){return this._easingCurve},i.prototype.setEasingCurve=function(t){this._easingCurve=t},i.prototype.interpolator=function(){return this._interpolator},i.prototype.setInterpolator=function(t){this._interpolator=t},i.prototype.valueAt=function(i){t.assert(0<=i&&i<=this._duration);var n=i/this._duration,e=this._easingCurve(n);return this._interpolator(e,this._startValue,this._endValue)},i}),define("Animation/AnimationPath",["DS/Animation/AnimationPath","DS/DSMigration/DSMigration"],function(t,i){return i.deprecateModule("Animation/AnimationPath"),t});