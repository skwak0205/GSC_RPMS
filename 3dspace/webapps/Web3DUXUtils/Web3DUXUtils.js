/*!  Copyright 2014 Dassault Systemes. All rights reserved. */
define("DS/Web3DUXUtils/Web3DUXArrow",["DS/Visualization/ThreeJS_DS","DS/Visualization/Node3D","DS/WebappsUtils/WebappsUtils","DS/SceneGraphNodes/BillBoardNode3D","DS/Mesh/MeshUtils","DS/SceneGraphNodes/FixedSizeNode3D","DS/Visualization/SceneGraphFactory"],function(e,i,t,a,r,n,l){"use strict";return i.extend({init:function(i){this._parent(i.name);var s=i.width,o=95*s/60,d=new n({name:"arrowFixedSizeNode3D",ratio:1}),c=t.getWebappsAssetUrl("Web3DUXUtils",""),h=new e.ImageUtils.loadTexture(c+"textures/I_Web3DUXArrow.png",void 0,null,null,!0);h.flipY=!1;var p=new e.MeshBasicMaterial({map:h,side:e.DoubleSide,transparent:!0,enableClipPlanes:!1});p.force=!0,p.depthTest=!1;var u={width:s,height:o,fill:!0,material:p,layerNb:1},D=l.createRectangleNode(u);D.setShadow(!1,!1),D.excludeFromCSO(!0),D.excludeFromHighlight(!0,!0),D.setPickable(r.NOPICKABLE),D.setMatrix((new e.Matrix4).rotateX(-.5*Math.PI).translate(new e.Vector3(-s/2,0,0))),u={axis:new e.Vector3(0,0,1),name:"Web3DUXArrowBillboardNode",type:"Cylindrical",viewpoint:i.viewer.currentViewpoint};var S=new a(u);S.add(D),d.add(S),this.add(d),this.setVisibilityInTree(!1),this.exludeFromBounding(!0),this.getScaledHeight=function(){return o*d.scaleFactor}}})});