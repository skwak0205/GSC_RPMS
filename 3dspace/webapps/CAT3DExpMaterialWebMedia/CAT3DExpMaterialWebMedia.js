define("DS/CAT3DExpMaterialWebMedia/extensions/CATE3DXMaterialAssetMedia",["UWA/Core","DS/CAT3DExpMaterialWeb/extensions/CATE3DXMaterialAsset","DS/VisuLoaders/ThreeDXLoader","DS/Visualization/Node3D"],function(e,t,r,i){"use strict";return t.extend({_getMaterialFromAsset:function(t){if(!(t instanceof Blob))return e.Promise.reject(new Error("Cant retrieve material asset for object "+this.GetObject().GetID()));var a=e.Promise.deferred(),o=e.Promise.deferred(),s=[a.promise,o.promise];let n;var d=URL.createObjectURL(t),l=new r;return l.setMode("3dxc"===this._getFileType(t)?"concat":"zipped"),l.load({url:d,destinationNode:new i,doneCallback:e=>{n=e.material,a.resolve()},onTexturesLoadedCallback:()=>{o.resolve()}}),e.Promise.allSettled(s).then(()=>(URL.revokeObjectURL(d),e.Promise.resolve(n)))},_getFileType:function(e){for(var t in this._typeExtMap)if(e.name.endsWith(t))return this._typeExtMap[t]},_typeExtMap:{".3dx":"3dx",".3dxc":"3dxc"}})});