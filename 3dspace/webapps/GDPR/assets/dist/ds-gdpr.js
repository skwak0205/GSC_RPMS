!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("DS",[],t):"object"==typeof exports?exports.DS=t():e.DS=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"gdpr",(function(){return r}));var o=n(1),r={get:o.get,save:o.save,isEmpty:o.isEmpty,getConsentCategories:o.getConsentCategories}},function(e,t,n){var o;void 0===(o=function(){"use strict";String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)});var e=["status","privacyVersion","consentCategories","blockedOnCategories","creationTimestamp"],t=["necessary","functional","advertising"],n={getTopDomain:function(){var e,t=window.location.hostname,n="";if(!/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g.test(t)&&"localhost"!==t){for(e=t.split(".");e.length>2;)e.shift();n=e.join(".")}return n},getCookie:function(e){var t,n,o=[];try{o=document.cookie.split("; ")}catch(e){}return(t=o.filter((function(t){return t.split("=")[0]===e}))).length&&(n=t[0].split("=")[1]),n},setCookie:function(e,t,n,o){var r=new Date,i=new Date(r.setMonth(r.getMonth()+o)),a=e+"="+t;n&&(a+="; domain="+n+"; path=/"),o&&(a+="; expires="+i.toUTCString()),document.cookie=a},getIndexFromRank:function(e){if(e=parseInt(e),Number.isInteger(e))return e-1;throw new Error("GDPR > Store : Cookie rank must be an integer")},getRankFromType:function(e){return t.findIndex((function(t){return t===e}))+1},decode:function(e,o){var r=o.includes("%2C")?o.split("%2C"):o;if("consentCategories"===e)if(o)if(Array.isArray(r))r=r.map((function(e){var o=n.getIndexFromRank(e);return t[o]}));else{var i=n.getIndexFromRank(o);r=i?[t[i]]:r}else r=[t[0]];return r},encode:function(t){var o=n.getModel(),r="";return o.consentCategories=t.map((function(e){return n.getRankFromType(e)})),e.forEach((function(e){r+=o[e]+"@"})),r=r.replaceAll(",","%2C")},getModel:function(){var t=n.getCookie("TC_PRIVACY"),o=t&&t.split("@")||[],r={status:0,privacyVersion:"001",consentCategories:[],blockedOnCategories:1,creationTimestamp:Date.now()};return o.forEach((function(t,o){var i=e[o];r[i]=n.decode(i,t)})),r},saveModel:function(e){var t,o=e.consents,r=e.domain||n.getTopDomain();Array.isArray(o)&&r&&(t=n.encode(o),n.setCookie("TC_PRIVACY",t,r,6))}};return{get:n.getModel,save:n.saveModel,isEmpty:function(){return!n.getCookie("TC_PRIVACY")},getConsentCategories:function(){return this.get().consentCategories}}}.call(t,n,t,e))||(e.exports=o)}])}));
