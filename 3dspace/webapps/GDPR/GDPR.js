define("DS/GDPR/Store",function(){"use strict";String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});var e=["status","privacyVersion","consentCategories","blockedOnCategories","creationTimestamp"],t=["necessary","functional","advertising"],n={getTopDomain:function(){var e,t=window.location.hostname,n="";if(!/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g.test(t)&&"localhost"!==t){for(e=t.split(".");e.length>2;)e.shift();n=e.join(".")}return n},getCookie:function(e){var t,n,o=[];try{o=document.cookie.split("; ")}catch(e){}return(t=o.filter(function(t){return t.split("=")[0]===e})).length&&(n=t[0].split("=")[1]),n},setCookie:function(e,t,n,o){var r=new Date,i=new Date(r.setMonth(r.getMonth()+o)),s=e+"="+t;n&&(s+="; domain="+n+"; path=/"),o&&(s+="; expires="+i.toUTCString()),document.cookie=s},getIndexFromRank:function(e){if(e=parseInt(e,10),Number.isInteger(e))return e-1;throw new Error("GDPR > Store : Cookie rank must be an integer")},getRankFromType:function(e){var n,o=0;for(n=t.length-1;n>=0;n--)if(t[n]===e){o=n+1;break}return o},decode:function(e,o){var r=o.includes("%2C")?o.split("%2C"):o;if("consentCategories"===e)if(o)if(Array.isArray(r))r=r.map(function(e){var o=n.getIndexFromRank(e);return t[o]});else{var i=n.getIndexFromRank(o);r=i?[t[i]]:r}else r=[t[0]];return r},encode:function(t){var o=n.getModel(),r="";return o.consentCategories=t.map(function(e){return n.getRankFromType(e)}),e.forEach(function(e){r+=o[e]+"@"}),r=r.replaceAll(",","%2C")},getModel:function(){var t=n.getCookie("TC_PRIVACY"),o=t&&t.split("@")||[],r={status:0,privacyVersion:"001",consentCategories:[],blockedOnCategories:1,creationTimestamp:Date.now()};return o.forEach(function(t,o){var i=e[o];r[i]=n.decode(i,t)}),r},saveModel:function(e){var t,o=e.consents,r=e.domain||n.getTopDomain();Array.isArray(o)&&r&&(t=n.encode(o),n.setCookie("TC_PRIVACY",t,r,6))}};return{get:n.getModel,save:n.saveModel,isEmpty:function(){return!n.getCookie("TC_PRIVACY")},getConsentCategories:function(){return this.get().consentCategories}}}),define("DS/GDPR/Modal",["UWA/Core","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/Handlebars/Handlebars","DS/GDPR/Store","text!DS/GDPR/assets/templates/read/content.html","text!DS/GDPR/assets/templates/update/content.html","i18n!DS/GDPR/assets/nls/GDPR","css!DS/GDPR/GDPR"],function(e,t,n,o,r,i,s,a){"use strict";var c,d,l;return d={replace:function(e,t){return e.replace(/\{([\w-]+)\}/g,function(e,n){return void 0!==t[n]?t[n]:""})}},c={read:function(){c._buildRead()},update:function(){c._buildUpdate()},close:function(){l.hide(),c.destroy()},destroy:function(){l&&(l.destroy(),l=null)},_build:function(e){var n;c.destroy(),(l=new t({className:["gdpr-modal",e.type].join(" "),closable:!1,escapeToClose:!1}).inject(document.body)).hide(),l.setHeader(e.header),l.setBody(e.body),(n=l.getFooter()).empty(),e.btns.forEach(function(e){e.inject(n)}),e.hideOverlay&&l.elements.overlay.classList.add("hide"),l.show()},_buildRead:function(){var t,s,l,u,p;c._build({type:"read",header:(s=e.createElement("div",{class:"title"}),l=e.createElement("h3",{class:"heading",text:a.readHeader}),u=e.createElement("span",{class:"fonticon fonticon-chevron-right"}),p=e.createElement("p",{class:"refuse",text:a.continueNecessaryCookie,events:{click:function(){r.save({consents:[]}),c.close()}}}),u.inject(p,"top"),p.inject(s,"top"),l.inject(s,"top"),s),body:o.compile(i)({content:a.readBodyContent,preferences:d.replace(a.readBodyPreferences,{privacyPolicyLink:"https://www.3ds.com/privacy-policy"})}),btns:(t=new n({value:a.managePreferences,events:{onClick:c.update}}),[new n({value:a.acceptAll,className:"primary",events:{onClick:function(){r.save({consents:["functional","advertising"]}),c.close()}}}),t]),hideOverlay:!0})},_buildUpdate:function(){var t;c._build({type:"update",header:"<h3>"+a.updateHeader+"</h3>",body:(t=r.get().consentCategories.reduce(function(e,t){return e[t]=!0,e},{}),o.compile(s)(e.merge(e.merge(t,{updateBodyNecessaryCookies:d.replace(a.updateBodyNecessaryCookies,{necessaryCookiesUsedLink:"https://www.3ds.com/cookies/#Brick-a3c64c4e-23b5-4dd6-a626-d6058ced87f9"}),updateBodyFunctionalCookies:d.replace(a.updateBodyFunctionalCookies,{functionalCookiesUsedLink:"https://3ds.com/cookies/#Brick-4775c9d2-985d-43ca-86fb-36c99f870abd"}),seeListCookiesUsage:d.replace(a.seeListCookiesUsage,{cookiesUsedLink:"https://www.3ds.com/cookies/#Brick-f079cc59-1afc-489b-8968-547ffdf5c234"})}),a))),btns:[new n({value:a.savePreferences,className:"primary",events:{onClick:function(){var e=l.getBody().getElements(".cookie:checked").map(function(e){return e.value});r.save({consents:e}),c.close()}}})],hideOverlay:!1})}}}),define("DS/GDPR/GDPR",["DS/GDPR/Modal","DS/GDPR/Store"],function(e,t){"use strict";return{init:function(){t.isEmpty()&&this.start()},start:function(){e.read()}}});