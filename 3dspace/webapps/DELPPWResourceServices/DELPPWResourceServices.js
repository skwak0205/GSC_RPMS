define("DS/DELPPWResourceServices/ResourceUtils",["UWA/Core","UWA/Class","UWA/Json","DS/DELPPWLoggerModel/LoggerUtils","DS/WebappsUtils/WebappsUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWModelServices/BehaviorUtil"],function(e,n,i,r,t,o,a){"use strict";var s,c,l,u,f=function(n,i){var r={};return e.is(i,"string")&&i.length>0&&e.is(n,"array")&&n.some(function(e){var n=!1;return e.Name===i&&(r=e,n=!0),n}),r},d=function(n){c?e.merge(c,n):c=n},g=function(n){var i;function r(n,i){return n.replace(/\{([\w-]+)\}/g,function(n,r){return e.is(i[r])?i[r]:""})}i=n,e.i18n(i),e.is(i.get)||Object.defineProperty(i,"get",{value:function(e){return this[e]||e},enumerable:!1}),i.replace||Object.defineProperty(i,"replace",{value:r,enumerable:!1}),d(i)},h=function(n,r){var t;if(n=e.is(n,"string")?i.decode(n):n,s||(s={}),e.is(r))for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t],r&&(s[t].ModuleName=r));else s=e.merge(s,n)},m=function(n,i){var r,t;return r=f(l,n),t=e.is(i,"string")&&i.length>0?i:r.MKSUnit,f(r.Units,t)};return n.singleton({name:"ResourceUtils",uninitializedCalls:"throw",init:function(n){if(n=n||{},this.options=n,!e.is(this.options.iconCatalogPath)||!e.is(this.options.nlsFilePath))throw new Error("iconCatalogPath or nlsFilePath options not defined")},setup:function(n,t){var o=this;require(["text!"+o.options.iconCatalogPath,"i18n!"+o.options.nlsFilePath],function(t,a){var s=i.decode(t);e.is(s.requireFolderPath)&&e.is(s.localIcons)&&e.is(s.requireModule)||r.debug(o.name,"requireFolderPath or localIcons or requireModule information has not been defined"),u=s.requireFolderPath+"/",h(s.localIcons,s.requireModule),d(a),n()},function(){t()})},addDimensions:function(n){e.is(n,"array")&&(l=n)},getDimensions:function(){return l},getDimension:function(e){return f(l,e)},addCATNlsFile:function(e){var n,i,r=(n=e.replace(/\n|\r/g,"").split(";"),i={},n.forEach(function(e){var n,r,t;""!==e&&e.indexOf("=")>0&&(r=(n=e.split("="))[0],t=n[1].replace(/"|.png/g,""),i[r]=t)}),i);g(r)},addNls:function(e){d(e)},addNlsJSON:function(e){g(e)},getNLSValue:function(n,i,t,o){var s,l,u;if(n){if(!e.is(c))return void r.debug(this.name,"Nls Library could not be undefined");u=n,t&&(u=t+"."+u),o&&(u=u+"."+o),(l=c.get(u))!==u?(s=i?c.replace(l,i):l,a.isNLSTestEnabled()&&(s="**NLS_OK**"+s)):s=n}else u="Wrong NLS key";return s||u},addIcons:function(e,n){h(e,n)},addIconsFromCATRsc:function(n,i){!function(n,i){var r=n.replace(/\n|\r/g,"").split(";"),t={};s||(s={}),r.forEach(function(e){var n,r,o;""!==e&&e.indexOf("=")>0&&(r=(n=e.split("="))[0].replace(/(\.Icon\.Normal)$/,""),o=n[1].replace(/"|.png/g,""),t[r]={IconName:o,ModuleName:i})}),s=e.merge(s,t)}(n,i)},getIconURLFromKey:function(n,i,a){var c,l="I_DELQuestionMark",f=o.get3DSpaceUrl()+"common/images/";if(s){if(i&&(n=i+"."+n),a&&(n=n+"."+a),c=s[n]){if(c.IconName?l=c.IconName:e.is(c.parent)&&e.is(s[c.parent])&&(l=e.is(s[c.parent].IconName)?s[c.parent].IconName:l),c.ModuleName)f=t.getWebappsAssetUrl(c.ModuleName,u);else if(e.is(c.sharedIconPath))f=o.get3DSpaceUrl()+c.sharedIconPath;else if(e.is(c.inheritanceChain,"array")&&c.inheritanceChain.length>0)for(n of c.inheritanceChain.length>1?c.inheritanceChain.slice().reverse():c.inheritanceChain)if(c=s[n],e.is(c.IconName)){if(e.is(c.ModuleName)){f=t.getWebappsAssetUrl(c.ModuleName,u),l=c.IconName;break}if(e.is(c.sharedIconPath)){f=o.get3DSpaceUrl()+c.sharedIconPath,l=c.IconName;break}}}else r.debug(this.name,"Icon: %s could not be found",n);return f+l+".png"}r.debug(this.name,"Icon Library is not defined")},getIconNames:function(){var e,n,i=[];if(s)for(e in s)(n=s[e])&&n.IconName&&i.push(n.IconName);else r.debug(this.name,"Icon Library is not defined");return i},setSharedIconPath:function(e){var n,i;if(s)for(n in i=s[n],s)(i=s[n])&&i.IconName&&(i.sharedIconPath=e[i.IconName]);else r.debug(this.name,"Icon Library is not defined")},getIconElem:function(n,i){return i=i||"icon",e.createElement("img",{src:this.getIconURLFromKey(n),class:i})},getNLSForUnit:function(n,i){var r,t="";return"Ratio"===n?t="%":(r=m(n,i),e.is(r)&&e.is(r.NLSName,"string")&&(t=r.NLSName)),t},getLabelForUnit:function(n,i){var r,t="";return r=m(n,i),e.is(r)&&e.is(r.label,"string")&&(t=r.label),t}})});