define("DS/ViewSettings/ViewModeStreamer",["UWA/Core","UWA/Class"],function(e,t){"use strict";return t.singleton({init:function(){},stream:function(e,t){},unstream:function(e){return localStorage.getItem(e)}})}),define("DS/ViewSettings/ViewModeController",["UWA/Core","UWA/Class","DS/Visualization/ThreeJS_DS"],function(e,t,i){"use strict";return t.extend({init:function(e){this._webGLV6Viewer=e,this.propertiesPair=this.propertiesKeyValuePair()},_getViewpoint:function(){return this._webGLV6Viewer.currentViewpoint},validateAttribute:function(e,t){var i=!1;switch(e){case"Preset":this._webGLV6Viewer.getVisuShadingMode()!==t&&(i=!0);break;case"Shading":this._webGLV6Viewer.getVisuShadingFaceMode()!==t&&(i=!0);break;case"Edges":this._webGLV6Viewer.getVisuShadingEdgeMode()!==t&&(i=!0);break;case"Material":this._webGLV6Viewer.getMaterialMode()!==t&&(i=!0);break;case"Appearance":this._webGLV6Viewer.getVisuAppearanceMode()!==t&&(i=!0);break;case"Outline":this._webGLV6Viewer._getVisuOutlineMode()!==t&&(i=!0);break;case"Points":this._webGLV6Viewer.getPointsFilter()!==t&&(i=!0);break;case"Axis":this._webGLV6Viewer.getAxisFilter()!==t&&(i=!0);break;case"Planes":this._webGLV6Viewer.getPlanesFilter()!==t&&(i=!0);break;case"Wires":this._webGLV6Viewer.getLinesFilter()!==t&&(i=!0);break;case"Vertices":this._webGLV6Viewer.getVerticesFilter()!==t&&(i=!0);break;case"Ambience":this._webGLV6Viewer.getVisuEnv()!==t&&(i=!0);break;case"Perspective":this._getViewpoint().getProjectionType()!==t&&(i=!0)}return i},setAttributeOnViewer:function(e,t){if(this.validateAttribute(e,t)){switch(e){case"Preset":this._webGLV6Viewer.setVisuShadingMode(t);break;case"Shading":this._webGLV6Viewer.setVisuShadingFaceMode(t);break;case"Edges":this._webGLV6Viewer.setVisuShadingEdgeMode(t);break;case"Material":this._webGLV6Viewer.setMaterialMode(t);break;case"Appearance":this._webGLV6Viewer.setVisuAppearanceMode(i.DefaultAppearanceMode[t]);break;case"Outline":this._webGLV6Viewer._setVisuOutlineMode(t);break;case"Points":this._webGLV6Viewer.setPointsFilter(t);break;case"Axis":this._webGLV6Viewer.setAxisOnlyFilter(t);break;case"Planes":this._webGLV6Viewer.setPlanesFilter(t);break;case"Wires":this._webGLV6Viewer.setLinesFilter(t);break;case"Vertices":this._webGLV6Viewer.setVerticesFilter(t);break;case"Ambience":this._webGLV6Viewer.setVisuEnvOCA(t)}this._webGLV6Viewer.render()}},setAttributeOnViewpoint:function(e,t){"Perspective"==e&&this._getViewpoint().setProjectionType(t?0:1),this._webGLV6Viewer.render()},getAppliedSettings:function(){var e={};for(var t in this.propertiesPair)if(this.propertiesPair.hasOwnProperty(t))switch(t){case"Preset":e[t]=this._webGLV6Viewer.getVisuShadingMode();break;case"Shading":e[t]=this._webGLV6Viewer.getVisuShadingFaceMode();break;case"Edges":e[t]=this._webGLV6Viewer.getVisuShadingEdgeMode();break;case"Material":e[t]=this._webGLV6Viewer.getMaterialMode();break;case"Appearance":e[t]=this._webGLV6Viewer.getVisuAppearanceMode();break;case"Outline":e[t]=this._webGLV6Viewer._getVisuOutlineMode();break;case"Points":e[t]=this._webGLV6Viewer.getPointsFilter();break;case"Axis":e[t]=this._webGLV6Viewer.getAxisFilter();break;case"Planes":e[t]=this._webGLV6Viewer.getPlanesFilter();break;case"Wires":e[t]=this._webGLV6Viewer.getLinesFilter();break;case"Vertices":e[t]=this._webGLV6Viewer.getVerticesFilter();break;case"Ambience":e[t]=this._webGLV6Viewer.getVisuEnv();break;case"Perspective":e[t]=!this._getViewpoint().getProjectionType()}return e},propertiesKeyValuePair:function(){return{Model:"ModelExpanderVS",Preset:"Preset",Shading:"visuShadingMode",Edges:"Edges",Material:"materialMode",Appearance:"Appearance",Outline:"Outline",Visibility:"VisibilityExpanderVS",Points:"pointsState",Axis:"axisState",Planes:"Planes",Wires:"linesState",Vertices:"verticesState",Scene:"SceneExpanderVS",Ambience:"visuEnv",Perspective:"projectionMode"}}})}),define("DS/ViewSettings/ViewSettingsPanel",["UWA/Core","DS/WebappsUtils/WebappsUtils","DS/RuntimeView/NLSManager","DS/Windows/Panel","DS/Controls/ComboBox","DS/Controls/Toggle","DS/Controls/Expander","DS/Controls/Button","DS/Controls/TooltipModel","DS/ViewerCommands/ViewerCommandsHelper","DS/ViewSettings/ViewModeController","i18n!DS/ViewSettings/assets/nls/translation","css!DS/ViewerCommands/assets/css/VisWebUXControls.css"],function(e,t,i,n,s,a,r,o,l,d,c,p){"use strict";var h=function(e){this.options=e,this.options.initCB=this.options.initCB||function(e){},this.options.closeCB=this.options.closeCB||function(e){},this.VMController=null,this.init()};return h.prototype.init=function(){this._webGLV6Viewer=this.options.viewer,this._immersiveFrame=this.options.immersiveFrame,this._initializing=!0,this.tokens=[],this.VMController=new c(this._webGLV6Viewer),this.VMProperties=this.buildProperties(),i.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang"),i.loadResource({resourceFile:"ViewSettings/ViewSettings"});var e=this;i.onResourceLoaded({resourceFile:"ViewSettings/ViewSettings",language:widget.lang?widget.lang:widget.getValue("lang")},function(){e.mbdResources=this}),this.buildDialog(),this.initUI(),this._initializing=!1},h.prototype.buildDialog=function(){var e=this,i=t.getWebappsBaseUrl(),s=UWA.createElement("div",{class:"visu-control-inline-container"}),a=new UWA.Element("h5",{class:"visu-panel-header",text:p.HeaderLabel});e.buildViewContent().inject(s),e.ViewAppearanceSettings=new n({icon:{iconPath:i+"ViewerCommands/assets/icons/32/I_ViewApperanceSetting20.png",iconSize:{width:"20px",height:"20px"}},immersiveFrame:e._immersiveFrame,content:s,header:a,width:"285",resizableFlag:!1,position:{offsetX:400,offsetY:50,of:e._immersiveFrame.getFreeZone()},identifier:"WebVisuViewAppearancePanel-"+e._immersiveFrame.identifier,allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea}),e.options.initCB(this),e.ViewAppearanceSettings.addEventListener("close",function(){e.tokens.forEach(t=>e._webGLV6Viewer.unsubscribe(t)),e.options.closeCB(e)})},h.prototype.buildProperties=function(){return{Model:{id:"Model"},Preset:{id:"Preset"},Shading:{id:"Shading"},Edges:{id:"Edges"},Material:{id:"Material"},Appearance:{id:"Appearance"},Outline:{id:"Outline"},Visibility:{id:"Visibility"},Points:{id:"Points"},Axis:{id:"Axis"},Planes:{id:"Planes"},Wires:{id:"Wires"},Vertices:{id:"Vertices"},Scene:{id:"Scene"},Ambience:{id:"Ambience"},Perspective:{id:"Perspective"}}},h.prototype.buildViewContent=function(){var e=UWA.createElement("div",{class:"wux-container"});return e.setStyles({width:"100%",margin:"0"}),this.buildModelView().inject(e),this.buildVisibilityView().inject(e),this.buildSceneView().inject(e),e},h.prototype.buildModelView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",width:"100%"});var i=new UWA.Element("div",{class:"wux-container"});i.setStyles({position:"relative",width:"100%"});var n=new r({header:p.Model,body:i,style:"simple",expandedFlag:!0}).inject(t);return n.elements.headerArrow.setStyles({width:"20px",textAlign:"left"}),n.getContent().id="ModelExpander",i.getParent().setStyles({padding:"0px"}),e.buildPresetsView().inject(i),e.buildShadingView().inject(i),e.buildEdgesView().inject(i),e.buildMaterialsView().inject(i),e.buildDefaultAppearanceView().inject(i),e.buildOutlineView().inject(i),t},h.prototype.buildPresetsView=function(){var e=this,i=t.getWebappsBaseUrl(),n=new UWA.Element("div",{class:"wux-container"});n.setStyles({position:"relative",width:"100%"});new UWA.Element("span",{class:"visu-rowtitle",text:p.Presets}).inject(n);var s=new UWA.Element("div",{class:"visu-button-group"}).inject(n),a=new l({shortHelp:p.PresetElements.ShadingPreset.ShortHelp}),r=new l({shortHelp:p.PresetElements.ShadingWithSharpEdgesPreset.ShortHelp}),d=new l({shortHelp:p.PresetElements.ShadingWithEdgesHiddenEdgesPreset.ShortHelp}),c=new l({shortHelp:p.PresetElements.ShadingWithSharpSmoothEdgesPreset.ShortHelp}),h=new l({shortHelp:p.PresetElements.ShadingWithMaterialPreset.ShortHelp}),g=new l({shortHelp:p.PresetElements.WireframePreset.ShortHelp}),u=new o({disabled:!1,icon:i+"ViewerCommands/assets/icons/32/I_Shading.png",tooltipInfos:a}).inject(s);u.getContent().setStyles({padding:"0px",minWidth:"32px"}),u.getContent().id="ShadingButton";var V=new o({disabled:!1,icon:i+"ViewerCommands/assets/icons/32/I_ShadingWithEdgesWithoutSmoothEdges.png",tooltipInfos:r}).inject(s);V.getContent().setStyles({padding:"0px",minWidth:"22px"}),V.getContent().id="ShadingWithSharpEdgesButton";var w=new o({disabled:!1,icon:i+"ViewerCommands/assets/icons/32/I_ShadingWithEdgesAndHiddenEdges.png",tooltipInfos:d}).inject(s);w.getContent().setStyles({padding:"0px",minWidth:"22px"}),w.getContent().id="ShadingWithEdgesHiddenEdgesButton";var b=new o({disabled:!1,icon:i+"ViewerCommands/assets/icons/32/I_ShadingWithAllEdges.png",tooltipInfos:c}).inject(s);b.getContent().setStyles({padding:"0px",minWidth:"22px"}),b.getContent().id="ShadingWithSharpSmoothEdgesButton";var m=new o({disabled:!1,icon:i+"ViewerCommands/assets/icons/32/I_ShadingWithTexture.png",tooltipInfos:h}).inject(s);m.getContent().setStyles({padding:"0px",minWidth:"22px"}),m.getContent().id="ShadingWithMaterialButton";var S=new o({disabled:!1,icon:i+"ViewerCommands/assets/icons/32/I_Wireframe.png",tooltipInfos:g}).inject(s);if(S.getContent().setStyles({padding:"0px",minWidth:"22px"}),S.getContent().id="WireframeButton",e.VMProperties.Preset={},e.VMProperties.Preset.Shading=u,e.VMProperties.Preset.ShadingEdgesNoSmoothEdges=V,e.VMProperties.Preset.ShadingEdgesHiddenEdges=w,e.VMProperties.Preset.ShadingEdges=b,e.VMProperties.Preset.ShadingMaterial=m,e.VMProperties.Preset.Wireframe=S,e.addEventListenerPreset("Shading",u),e.addEventListenerPreset("ShadingEdgesNoSmoothEdges",V),e.addEventListenerPreset("ShadingEdgesHiddenEdges",w),e.addEventListenerPreset("ShadingEdges",b),e.addEventListenerPreset("ShadingMaterial",m),e.addEventListenerPreset("Wireframe",S),e._webGLV6Viewer._viewPanelController._viewModePanelUIParams.useShadingIllustration){var v=new l({shortHelp:p.PresetElements.ShadingIllustrationPreset.ShortHelp}),E=new o({disabled:!1,icon:i+"ViewerCommands/assets/icons/32/I_ShadingIllustration.png",tooltipInfos:v}).inject(s);E.getContent().setStyles({padding:"0px",minWidth:"22px"}),e.VMProperties.Preset.ShadingIllustration=E,e.addEventListenerPreset("ShadingIllustration",E)}return this.tokens.push(this._webGLV6Viewer.onVisuShadingModeChange(this.onAttributeChange.bind(this,"VisuShadingMode"))),n},h.prototype.buildShadingView=function(){var e=this,i=t.getWebappsBaseUrl();e.shadingContainer=new UWA.Element("div",{class:"wux-container"}),e.shadingContainer.setStyles({position:"relative",width:"100%",display:"block"});new UWA.Element("span",{class:"visu-rowtitle",text:p.Shading.Label}).inject(e.shadingContainer);var n=[{label:p.ShadingElements.Shaded.Label,value:"Shaded",icon:i+"ViewerCommands/assets/icons/32/small/I_Shadeddisplay20.png",description:p.ShadingElements.Shaded.ShortHelp},{label:p.ShadingElements.Wireframe.Label,value:"Wireframe",icon:i+"ViewerCommands/assets/icons/32/small/I_Wireframedisplay20.png",description:p.ShadingElements.Wireframe.ShortHelp}];e._webGLV6Viewer._viewPanelController._viewModePanelUIParams.useShadingIllustration&&n.push({label:p.ShadingElements.Illustration.Label,value:"Illustration",icon:i+"ViewerCommands/assets/icons/32/small/I_ShadingIllustration20.png",description:p.ShadingElements.Illustration.ShortHelp});var a=new s({elementsList:n,selectedIndex:0,enableSearchFlag:!1}).inject(e.shadingContainer);a.getContent().style.width="100%",a.getContent().setStyles({margin:"5px 0px 5px 0px"}),a.getContent().id="ShadingCombo",a.tooltipInfos=new l({shortHelp:p.Shading.ShortHelp}),e.VMProperties.Shading.Combo=a,e.addEventListenerComboBox("Shading",a);return this.tokens.push(this._webGLV6Viewer.onVisuShadingFaceModeChange(this.onAttributeChange.bind(this,"VisuShadingFaceMode"))),e.shadingContainer},h.prototype.buildEdgesView=function(){var e=this,i=t.getWebappsBaseUrl();e.edgesContainer=new UWA.Element("div",{class:"wux-container"}),e.edgesContainer.setStyles({position:"relative",width:"100%",display:"block"});new UWA.Element("span",{class:"visu-rowtitle",text:p.Edges.Label}).inject(e.edgesContainer);var n=new s({elementsList:[{label:p.EdgesElements.NoEdges.Label,value:"NoEdges",icon:i+"ViewerCommands/assets/icons/32/small/I_ShadedNoEdgesdisplay20.png",description:p.EdgesElements.NoEdges.ShortHelp},{label:p.EdgesElements.WithEdges.Label,value:"WithEdges",icon:i+"ViewerCommands/assets/icons/32/small/I_ShadedVisibleEdgesdisplay20.png",description:p.EdgesElements.WithEdges.ShortHelp},{label:p.EdgesElements.WithEdgesHiddenEdges.Label,value:"WithEdgesHiddenEdges",icon:i+"ViewerCommands/assets/icons/32/small/I_ShadedAllEdgesdisplay20.png",description:p.EdgesElements.WithEdgesHiddenEdges.ShortHelp},{label:p.EdgesElements.WithEdgesNoSmoothEdges.Label,value:"WithEdgesNoSmoothEdges",icon:i+"ViewerCommands/assets/icons/32/small/I_ShadedSharpEdgesdisplay20.png",description:p.EdgesElements.WithEdgesNoSmoothEdges.ShortHelp}],selectedIndex:1,enableSearchFlag:!1}).inject(e.edgesContainer);n.getContent().style.width="100%",n.getContent().setStyles({margin:"5px 0px 5px 0px"}),n.getContent().id="EdgesCombo",n.tooltipInfos=new l({shortHelp:p.Edges.ShortHelp}),e.VMProperties.Edges.Combo=n,e.addEventListenerComboBox("Edges",n);return this.tokens.push(this._webGLV6Viewer.onVisuShadingEdgeModeChange(this.onAttributeChange.bind(this,"VisuShadingEdgeMode"))),e.edgesContainer},h.prototype.buildMaterialsView=function(){var e=this;e.materialContainer=new UWA.Element("div",{class:"wux-container"}),e.materialContainer.setStyles({position:"relative",width:"100%",display:"block"});var t=new a({type:"switch",label:p.Materials.Label,checkFlag:!1}).inject(e.materialContainer);t.getContent().style.width="100%",t.getContent().setStyles({margin:"5px 0px 5px 0px"}),t.getContent().id="MaterialToggle",t.tooltipInfos=new l({shortHelp:p.Materials.ShortHelp}),e.VMProperties.Material.Toggle=t,e.addEventListenerToggle("Material",t);return this.tokens.push(this._webGLV6Viewer.onMaterialModeChange(this.onAttributeChange.bind(this,"MaterialMode"))),e.materialContainer},h.prototype.buildDefaultAppearanceView=function(){var e=this,i=t.getWebappsBaseUrl();e.appearanceContainer=new UWA.Element("div",{class:"wux-container"}),e.appearanceContainer.setStyles({position:"relative",width:"100%",display:"block"});new UWA.Element("span",{class:"visu-rowtitle",text:p.Appearance.Label}).inject(e.appearanceContainer);var n=new s({elementsList:[{label:p.AppearanceElements.Basic.Label,value:"BASIC",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_Basic.png",description:p.AppearanceElements.Basic.ShortHelp},{label:p.AppearanceElements.GasLook.Label,value:"GASLOOK",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_GASLook.png",description:p.AppearanceElements.GasLook.ShortHelp},{label:p.AppearanceElements.Clay.Label,value:"CLAY",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_Clay.png",description:p.AppearanceElements.Clay.ShortHelp},{label:p.AppearanceElements.Plaster.Label,value:"WHITE_MAT_PLASTER",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_WhiteMatPlaster.png",description:p.AppearanceElements.Plaster.ShortHelp},{label:p.AppearanceElements.GreyPlastic.Label,value:"GREY_SHINY_PLASTIC",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_GreyShinyPlastic.png",description:p.AppearanceElements.GreyPlastic.ShortHelp},{label:p.AppearanceElements.CastAluminum.Label,value:"CAST_ALUMINUM",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_CastAluminum.png",description:p.AppearanceElements.CastAluminum.ShortHelp},{label:p.AppearanceElements.MachinedAluminum.Label,value:"MACHINED_ALUMINUM",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_MachinedAluminum.png",description:p.AppearanceElements.MachinedAluminum.ShortHelp},{label:p.AppearanceElements.CastSteel.Label,value:"CAST_STEEL",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_CastSteel.png",description:p.AppearanceElements.CastSteel.ShortHelp},{label:p.AppearanceElements.BrushedSteel.Label,value:"BRUSHED_STEEL",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_BrushedSteel.png",description:p.AppearanceElements.BrushedSteel.ShortHelp},{label:p.AppearanceElements.MachinedSteel.Label,value:"MACHINED_STAINLESS_STEEL",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_MachinedStainlessSteel.png",description:p.AppearanceElements.MachinedSteel.ShortHelp},{label:p.AppearanceElements.Copper.Label,value:"COPPER",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_Copper.png",description:p.AppearanceElements.Copper.ShortHelp},{label:p.AppearanceElements.Brass.Label,value:"BRASS",icon:i+"ViewerCommands/assets/icons/32/normal/I_ViewModePanel_Face_Brass.png",description:p.AppearanceElements.Brass.ShortHelp}],selectedIndex:0,enableSearchFlag:!1}).inject(e.appearanceContainer);n.getContent().style.width="100%",n.getContent().setStyles({margin:"5px 0px 5px 0px"}),n.getContent().id="AppearanceCombo",n.tooltipInfos=new l({shortHelp:p.Appearance.ShortHelp}),e.VMProperties.Appearance.Combo=n,e.addEventListenerComboBox("Appearance",n);return this.tokens.push(this._webGLV6Viewer.onVisuAppearanceModeChange(this.onAttributeChange.bind(this,"VisuAppearanceMode"))),e.appearanceContainer},h.prototype.buildOutlineView=function(){var e=new UWA.Element("div",{class:"wux-container"});e.setStyles({position:"relative",width:"100%"});var t=new a({type:"switch",label:p.Outline.Label,checkFlag:!1}).inject(e);t.getContent().style.width="100%",t.getContent().setStyles({margin:"5px 0px 5px 0px"}),this._webGLV6Viewer._viewPanelController._viewModePanelUIParams.useOutline||t.getContent().setStyles({display:"none"}),t.getContent().id="OutlineToggle",t.tooltipInfos=new l({shortHelp:p.Outline.ShortHelp}),this.VMProperties.Outline.Toggle=t,this.addEventListenerToggle("Outline",t);return this.tokens.push(this._webGLV6Viewer._onVisuOutlineModeChange(this.onAttributeChange.bind(this,"VisuOutlineMode"))),e},h.prototype.buildVisibilityView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",width:"100%"});var i=new UWA.Element("div",{class:"wux-container"});i.setStyles({position:"relative",width:"100%"});var n=new r({header:p.Visibility,body:i,style:"simple",expandedFlag:!0}).inject(t);return n.elements.headerArrow.setStyles({width:"20px",textAlign:"left"}),n.getContent().id="VisibilityExpander",i.getParent().setStyles({padding:"0px"}),e.buildPointsView().inject(i),e.buildAxisView().inject(i),e.buildPlanesView().inject(i),e.buildWiresView().inject(i),e.buildVerticesView().inject(i),t},h.prototype.buildPointsView=function(){var e=new UWA.Element("div",{class:"wux-container"});e.setStyles({position:"relative",width:"100%"});var t=new a({type:"switch",label:p.Points.Label,checkFlag:!1}).inject(e);t.getContent().style.width="100%",t.getContent().setStyles({margin:"5px 0px 5px 0px"}),t.getContent().id="PointsToggle",t.tooltipInfos=new l({shortHelp:p.Points.ShortHelp}),this.VMProperties.Points.Toggle=t,this.addEventListenerToggle("Points",t);return this.tokens.push(this._webGLV6Viewer.onPointsFilterChange(this.onAttributeChange.bind(this,"PointsFilterMode"))),e},h.prototype.buildAxisView=function(){var e=new UWA.Element("div",{class:"wux-container"});e.setStyles({position:"relative",width:"100%"});var t=new a({type:"switch",label:p.Axis.Label,checkFlag:!1}).inject(e);t.getContent().style.width="100%",t.getContent().setStyles({margin:"5px 0px 5px 0px"}),t.getContent().id="AxisToggle",t.tooltipInfos=new l({shortHelp:p.Axis.ShortHelp}),this.VMProperties.Axis.Toggle=t,this.addEventListenerToggle("Axis",t);return this.tokens.push(this._webGLV6Viewer.onAxisFilterChange(this.onAttributeChange.bind(this,"AxisFilterMode"))),e},h.prototype.buildPlanesView=function(){var e=new UWA.Element("div",{class:"wux-container"});e.setStyles({position:"relative",width:"100%"});var t=new a({type:"switch",label:p.Planes.Label,checkFlag:!1}).inject(e);t.getContent().style.width="100%",t.getContent().setStyles({margin:"5px 0px 5px 0px"}),t.getContent().id="PlanesToggle",t.tooltipInfos=new l({shortHelp:p.Planes.ShortHelp}),this.VMProperties.Planes.Toggle=t,this.addEventListenerToggle("Planes",t);return this.tokens.push(this._webGLV6Viewer.onPlanesFilterChange(this.onAttributeChange.bind(this,"RefPlaneFilterMode"))),e},h.prototype.buildWiresView=function(){var e=new UWA.Element("div",{class:"wux-container"});e.setStyles({position:"relative",width:"100%"});var t=new a({type:"switch",label:p.Wires.Label,checkFlag:!0}).inject(e);t.getContent().style.width="100%",t.getContent().setStyles({margin:"5px 0px 5px 0px"}),t.getContent().id="WiresToggle",t.tooltipInfos=new l({shortHelp:p.Wires.ShortHelp}),this.VMProperties.Wires.Toggle=t,this.addEventListenerToggle("Wires",t);return this.tokens.push(this._webGLV6Viewer.onLinesFilterChange(this.onAttributeChange.bind(this,"LinesFilterMode"))),e},h.prototype.buildVerticesView=function(){var e=this;e.verticesContainer=new UWA.Element("div",{class:"wux-container"}),e.verticesContainer.setStyles({position:"relative",width:"100%"});var t=new a({type:"switch",label:p.Vertices.Label,checkFlag:!0}).inject(e.verticesContainer);t.getContent().style.width="100%",t.getContent().setStyles({margin:"5px 0px 5px 0px"}),t.getContent().id="VerticesToggle",t.tooltipInfos=new l({shortHelp:p.Vertices.ShortHelp}),e.VMProperties.Vertices.Toggle=t,e.addEventListenerToggle("Vertices",t);return this.tokens.push(this._webGLV6Viewer.onVerticesFilterChange(this.onAttributeChange.bind(this,"VerticesFilterMode"))),e.verticesContainer},h.prototype.buildSceneView=function(){var e=new UWA.Element("div",{class:"wux-container"});e.setStyles({position:"relative",width:"100%"});var t=new UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",width:"100%"});var i=new r({header:p.Scene,body:t,style:"simple",expandedFlag:!0}).inject(e);return i.elements.headerArrow.setStyles({width:"20px",textAlign:"left"}),i.getContent().id="SceneExpander",t.getParent().setStyles({padding:"0px"}),this.buildAmbienceView().inject(t),this.buildPerspectiveView().inject(t),e},h.prototype.buildAmbienceView=function(){var e=t.getWebappsBaseUrl(),i=new UWA.Element("div",{class:"wux-container"});i.setStyles({position:"relative",width:"100%"});new UWA.Element("span",{class:"visu-rowtitle",text:p.Ambience.Label}).inject(i);var n=new s({elementsList:[{label:p.AmbienceElements.PureWhite.Label,value:"PureWhiteOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_PureWhiteVisuEnv.png",description:p.AmbienceElements.PureWhite.ShortHelp},{label:p.AmbienceElements.WhiteMirror.Label,value:"WhiteMirrorOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_WhiteMirrorVisuEnv.png",description:p.AmbienceElements.WhiteMirror.ShortHelp},{label:p.AmbienceElements.WhiteReview.Label,value:"WhiteReviewOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_WhiteReviewVisuEnv.png",description:p.AmbienceElements.WhiteReview.ShortHelp},{label:p.AmbienceElements.WhiteExperience.Label,value:"WhiteExperienceOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_NeoPureWhiteVisuEnv.png",description:p.AmbienceElements.WhiteExperience.ShortHelp},{label:p.AmbienceElements.Studio.Label,value:"StudioOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_StudioVisuEnv.png",description:p.AmbienceElements.Studio.ShortHelp},{label:p.AmbienceElements.DarkMirror.Label,value:"DarkMirrorOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_DarkMirrorVisuEnv.png",description:p.AmbienceElements.DarkMirror.ShortHelp},{label:p.AmbienceElements.DarkReview.Label,value:"DarkReviewOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_DarkReviewVisuEnv.png",description:p.AmbienceElements.DarkReview.ShortHelp},{label:p.AmbienceElements.WhiteDesign.Label,value:"WhiteDesignOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_WhiteDesignVisuEnv.png",description:p.AmbienceElements.WhiteDesign.ShortHelp},{label:p.AmbienceElements.BlueDesign.Label,value:"BlueDesignOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_BlueDesignVisuEnv.png",description:p.AmbienceElements.BlueDesign.ShortHelp},{label:p.AmbienceElements.DarkDesign.Label,value:"DarkDesignOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_DarkDesignVisuEnv.png",description:p.AmbienceElements.DarkDesign.ShortHelp},{label:p.AmbienceElements.Indoor.Label,value:"IndoorOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_IndoorVisuEnv.png",description:p.AmbienceElements.Indoor.ShortHelp},{label:p.AmbienceElements.City.Label,value:"CityOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_CityVisuEnv.png",description:p.AmbienceElements.City.ShortHelp},{label:p.AmbienceElements.Road.Label,value:"RoadOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_RoadVisuEnv.png",description:p.AmbienceElements.Road.ShortHelp},{label:p.AmbienceElements.Outdoor.Label,value:"OutdoorOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_OutdoorVisuEnv.png",description:p.AmbienceElements.Outdoor.ShortHelp},{label:p.AmbienceElements.Basic.Label,value:"BasicOCA",icon:e+"ViewerCommands/assets/icons/32/normal/I_BasicVisuEnv.png",description:p.AmbienceElements.Basic.ShortHelp}],selectedIndex:14,enableSearchFlag:!1}).inject(i);n.getContent().style.width="100%",n.getContent().setStyles({margin:"5px 0px 5px 0px"}),n.getContent().id="AmbienceCombo",n.tooltipInfos=new l({shortHelp:p.Ambience.ShortHelp}),this.VMProperties.Ambience.Combo=n,this.addEventListenerComboBox("Ambience",n);return this.tokens.push(this._webGLV6Viewer.onVisuEnvChange(this.onAttributeChange.bind(this,"VisuEnv"))),i},h.prototype.buildPerspectiveView=function(){var e=new UWA.Element("div",{class:"wux-container"});e.setStyles({position:"relative",width:"100%"});var t=new a({type:"switch",label:p.Perspective.Label,checkFlag:!0}).inject(e);t.getContent().style.width="100%",t.getContent().setStyles({margin:"5px 0px 5px 0px"}),t.getContent().id="PerspectiveToggle",t.tooltipInfos=new l({shortHelp:p.Perspective.ShortHelp}),this.VMProperties.Perspective.Toggle=t,this.addEventListenerToggle("Perspective",t);return this.tokens.push(this._webGLV6Viewer.onProjectionTypeChange(this.onAttributeChange.bind(this,"ProjectionType"))),this._webGLV6Viewer.get2DMode()&&e.hide(),e},h.prototype.addEventListenerPreset=function(e,t){var i=this;t.addEventListener("buttonclick",function(){for(var n in i.VMProperties.Preset)!0===i.VMProperties.Preset[n].checkFlag&&(i.VMProperties.Preset[n].checkFlag=!1);t.checkFlag=!0,i._initializing||i.VMController.setAttributeOnViewer("Preset",e)})},h.prototype.addEventListenerComboBox=function(e,t){var i=this;t.addEventListener("change",function(){if("Ambience"==e)var n=t.currentValue,s=n.indexOf("OCA"),a=n.substring(0,s);else a=t.currentValue;i._initializing||i.VMController.setAttributeOnViewer(e,a)})},h.prototype.addEventListenerToggle=function(e,t){var i=this;t.addEventListener("change",function(){var n=t.checkFlag;i._initializing||("Perspective"==e?i.VMController.setAttributeOnViewpoint(e,n):i.VMController.setAttributeOnViewer(e,n))})},h.prototype.onAttributeChange=function(t,i){var n=this;if(!e.is(i))return!1;if(null===i.value)return!1;switch(t){case"VisuShadingMode":n.VMProperties.Preset[i.value]!==i.value&&n.updateUI("Preset",i.value);break;case"VisuShadingFaceMode":n.VMProperties.Shading.Combo.currentValue!==i.value?n.updateUI("Shading",i.value):n.HideShowAttribute(i.value);break;case"VisuShadingEdgeMode":n.VMProperties.Edges.Combo.currentValue!==i.value&&n.updateUI("Edges",i.value);break;case"MaterialMode":n.VMProperties.Material.Toggle.checkFlag!==i.value&&n.updateUI("Material",i.value);break;case"VisuAppearanceMode":n.VMProperties.Appearance.Combo.currentValue!==i.value&&n.updateUI("Appearance",i.value);break;case"VisuOutlineMode":n.VMProperties.Outline.Toggle.checkFlag!==i.value&&n.updateUI("Outline",i.value);break;case"PointsFilterMode":n.VMProperties.Points.Toggle.checkFlag!==i.state&&n.updateUI("Points",i.state);break;case"AxisFilterMode":n.VMProperties.Axis.Toggle.checkFlag!==i.state&&n.updateUI("Axis",i.state);break;case"RefPlaneFilterMode":n.VMProperties.Planes.Toggle.checkFlag!==i.state&&n.updateUI("Planes",i.state);break;case"LinesFilterMode":n.VMProperties.Wires.Toggle.checkFlag!==i.state?n.updateUI("Wires",i.state):n.HideShowVertices(i.state);break;case"VerticesFilterMode":n.VMProperties.Vertices.Toggle.checkFlag!==i.state&&n.updateUI("Vertices",i.state);break;case"VisuEnv":var s=i.value;s.includes("OCA")&&n.VMProperties.Ambience.Combo.currentValue!==s&&n.updateUI("Ambience",s);break;case"ProjectionType":n.VMProperties.Perspective.Toggle.checkFlag!==!i.state&&n.updateUI("Perspective",!i.state)}},h.prototype.updateUI=function(t,i){var n=this;if(!e.is(t))return!1;var s=n.VMProperties[t];if(!e.is(s))return!1;switch(t){case"Preset":if("default"!==i)if(n.VMProperties[t][i]){for(var a in n.VMProperties.Preset)n.VMProperties.Preset[a].checkFlag=!1;n.VMProperties[t][i].checkFlag=!0}else for(var a in n.VMProperties.Preset)n.VMProperties.Preset[a].checkFlag=!1;break;case"Shading":n.VMProperties[t].Combo.currentValue!==i&&(n.VMProperties[t].Combo.currentValue=i,n.HideShowAttribute(i));break;case"Edges":n.VMProperties[t].Combo.currentValue!==i&&(n.VMProperties[t].Combo.currentValue=i);break;case"Material":n.VMProperties[t].Toggle.checkFlag!==i&&(n.VMProperties[t].Toggle.checkFlag=i);break;case"Appearance":n.VMProperties[t].Combo.currentValue!==i&&(n.VMProperties[t].Combo.currentValue=i);break;case"Outline":case"Points":case"Axis":case"Planes":n.VMProperties[t].Toggle.checkFlag!==i&&(n.VMProperties[t].Toggle.checkFlag=i);break;case"Wires":n.VMProperties[t].Toggle.checkFlag!==i&&(n.VMProperties[t].Toggle.checkFlag=i,n.HideShowVertices(i));break;case"Vertices":n.VMProperties[t].Toggle.checkFlag!==i&&(n.VMProperties[t].Toggle.checkFlag=i);break;case"Ambience":n.VMProperties[t].Combo.currentValue!==i&&(n.VMProperties[t].Combo.currentValue=i);break;case"Perspective":n.VMProperties[t].Toggle.checkFlag!==i&&(n.VMProperties[t].Toggle.checkFlag=i)}},h.prototype.initUI=function(){for(var e in this.schema=this.VMController.getAppliedSettings(),this.schema)this.updateUI(e,this.schema[e])},h.prototype.HideShowAttribute=function(e){var t=this;"Wireframe"===e||"Illustration"===e?(t.edgesContainer.setStyles({display:"none"}),t.materialContainer.setStyles({display:"none"}),t.appearanceContainer.setStyles({display:"none"})):(t.edgesContainer.setStyles({display:"block"}),t.materialContainer.setStyles({display:"block"}),t.appearanceContainer.setStyles({display:"block"}))},h.prototype.HideShowVertices=function(e){!0===e?this.verticesContainer.setStyles({display:"block"}):!1===e&&this.verticesContainer.setStyles({display:"none"})},h});