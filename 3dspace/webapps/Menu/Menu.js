define("DS/Menu/Menu",["DS/WebRecordEnabler/Adapter","DS/Core/PointerEvents","DS/Utilities/TouchUtils","DS/Utilities/Dom","DS/Utilities/Utils","DS/Controls/TooltipModel","css!DS/Menu/assets/css/Menu.css"],function(t,e,i,n,o,s){"use strict";var u=document.createElement("div");u.innerHTML=['<div class="wux-menu">','<div class="wux-menu-parent">','<div class="wux-menu-parent-up wux-menu-push wux-ui-3ds wux-ui-3ds-chevron-left"></div>','<div class="wux-menu-parent-title"></div>',"</div>",'<div class="wux-menu-scroll-up wux-ui-3ds wux-ui-3ds-chevron-up wux-menu-scroll-disabled"></div>','<div class="wux-menu-scrollable">','<div class="wux-menu-container">','<div class="wux-menu-column wux-menu-column-left"></div>','<div class="wux-menu-column wux-menu-column-icon"></div>','<div class="wux-menu-column wux-menu-column-title"></div>','<div class="wux-menu-column wux-menu-column-accelerator"></div>','<div class="wux-menu-column wux-menu-column-submenu"></div>',"</div>","</div>",'<div class="wux-menu-scroll-down wux-ui-3ds wux-ui-3ds-chevron-down"></div>',"</div>",'<div class="wux-menu-cell"></div>','<div class="wux-menu-overlap"></div>','<div class="wux-menu-overlap-submenu"></div>','<div class="wux-menu-collection-item"></div>'].join("");var a=u.querySelector(".wux-menu"),r=u.querySelector(".wux-menu-cell"),c=u.querySelector(".wux-menu-overlap"),d=(u.querySelector(".wux-menu-overlap-submenu"),u.querySelector(".wux-menu-collection-item")),l={},h=[],m=-1,f=-1,p=-1,w=-1,v=50,g=void 0,x=void 0,b=-1,y=-1,E=0,_=0,S=0,I=!1;const L=2;var M=0,T=[],C=function(t,e){this.content=t,this.menu_uid=e,this.previous_uid=-1,this.next_uid=-1,this.submenu_uid=-1,this.cells=[],this.uid=T.push(this)-1},R=function(t,e,i,n,o,s){this.parent=t,this.parentRecId=i,this.parentTitle=n,this.content=o,this.config=s,this.parent_item_uid=e?e.uid:-1,this.first_uid=-1,this.focus_uid=-1,this.uid=h.push(this)-1};function N(){var e=void 0;return(t.isRecording()||t.isReplaying())&&((e=document.getElementById("menu_record"))||((e=document.createElement("div")).setAttribute("id","menu_record"),e.setAttribute("data-rec-id","menu_record"),e.style.display="none",document.body.appendChild(e),t.register(e,"DS/MenuRec/MenuRec"))),e}function O(t,e,i){if(t.tooltip)if("string"==typeof t.tooltip){let i=new s({shortHelp:t.tooltip});e.tooltipInfos=i}else"object"==typeof t.tooltip&&(e.tooltipInfos=new s(t.tooltip));else t.title&&i&&(e.tooltipInfos=new s({getAllInformationCB:()=>{if(n.computeStringWidth(t.title,12,"Arial",!1,!1)>i.offsetWidth)return{model:{shortHelp:t.title}}}}))}function D(t){var e=T[t].cells,i=e.length>1||e[0].classList.contains("wux-menu-collection-item")?e[0]:T[T[t].previous_uid].cells[0],n=e[e.length-1],o=i.getBoundingClientRect(),s=n.getBoundingClientRect(),u=null!==i.previousElementSibling?o.height-i.clientHeight:0,a={};return a.top=o.top-u,a.right=s.right,a.bottom=o.bottom,a.left=o.left,a.width=s.right-o.left,a.height=o.height+u,a}function U(t){return t?t.dataset&&void 0!==t.dataset.wuxMenuUid?Number(t.dataset.wuxMenuUid):U(t.parentNode):-1}function A(t){if(t>=0)return h[T[t].menu_uid]}function k(t){var e=t.target.dataset.wuxMenuItemUid;if(e>=0){var i=A(e);i&&(i.setHoverState(h[T[e].menu_uid].focus_uid,!1),i.setHoverState(e,!0)),w=e}else w=-1;-1!=(f=U(t.target))&&(p=f)}function H(t){var e=t.target.dataset.wuxMenuItemUid;if(e>=0){var i=A(e);i&&i.setHoverState(e,!1)}}function B(t){t.clientX==b&&t.clientY==y||(b=t.clientX,y=t.clientY,-1==U(t.target)?void 0===x&&(x=window.setTimeout(j,v)):void 0!==x&&(window.clearTimeout(x),x=void 0),void 0!==g&&(window.clearTimeout(g),g=void 0),g=window.setTimeout(X,v))}function q(t){if(e.isTouchEvent(t)&&(k(t),t.target.style.cursor="pointer"),t.touches&&1===t.touches.length){var i=(new Date).getTime(),n=i-E,o=Math.abs(_-t.touches[0].clientX),s=Math.abs(S-t.touches[0].clientY);o<10&&s<10&&n<500&&t.preventDefault(),_=t.touches[0].clientX,S=t.touches[0].clientY,E=i}-1==U(t.target)&&l.hide()}function P(t){if(0===t.button||e.isTouchEvent(t)){var i=t.target.dataset.wuxMenuItemUid;if(i>=0){var n=T[i];if(n)if(-1!=n.submenu_uid){for(var o=m;o!=n.menu_uid;)h[o].hide(),o=h[o].parent.uid;var s={};s.parentItemRect=D(i),h[n.submenu_uid].show(s)}else V(n)}else t.target.classList.contains("wux-menu-scroll-up")?z({deltaY:-20,target:t.target}):t.target.classList.contains("wux-menu-scroll-down")?z({deltaY:20,target:t.target}):t.target.classList.contains("wux-menu-parent-up")&&-1!=m&&h[m].hide();const e=t.target.dataset.wuxDynamicMenuItemUid;if(e>=0){const i=T[e];let n,o={};i&&(n=h[i.menu_uid]),n&&(o=n.config);const s={};s.info={target:t.target},s.data={event:t,target:t.target,targetPosition:{x:t.offsetX,y:t.offsetY},windowPosition:{x:t.clientX,y:t.clientY}};const u=i.content.submenu(s);if(u){const t=new C(u,n.uid);t.previous_uid=i.uid,T[i.uid].next_uid=t.uid;const s=new R(n,t,i.content.recId,i.content.title,u,o);s.buildView(),t&&(t.submenu_uid=s.uid);const a={};a.parentItemRect=D(e),h[s.uid].show(a)}}}}function F(t){-1!=m&&h[m].onKeyDown(t.keyCode||t.location)}function W(t){t.stopPropagation(),t.preventDefault()}function V(e){var i=N();if(t.isRecording()&&i){var n=e.content.recId;if(n)for(var s=h[e.menu_uid];s.uid>0;){if(!s.parentRecId){t.TraceManager.error('Menu item "'+s.parentTitle+"\" doesn't have a record identifier, this is not compatible with WebRecord"),n=void 0;break}n=s.parentRecId+"/"+n,s=s.parent}else t.TraceManager.error('Menu item "'+e.content.title+"\" doesn't have a record identifier, this is not compatible with WebRecord");n&&t.addCustomInteraction(i,{recVersion:1,recType:"MenuAction",recIdPath:n},"DS/MenuRec/MenuRec",{checkVisibility:!1})}let u;if(e){const t=A(e.uid);t&&t.config&&(u=t.config.doNotHideOnAction)}u||l.hide(),e&&e.content&&e.content.action&&(e.content.action.callback?e.content.action.callback.call(e.content.action.this,{context:e.content.action.context}):e.content.action.func&&o.attachSimpleCallback(e.content.action.module,e.content.action.func,e.content.action.argument,e.content.action.context))}function Y(t){l.hide()}function z(t){for(var e=t.target;e&&e.dataset&&void 0===e.dataset.wuxMenuUid;)e=e.parentNode;if(e&&e.dataset){var i=e.dataset.wuxMenuUid;if(i>=0){var n=h[i];if(n&&n.view&&n.view.classList.contains("wux-menu-with-scroll")){var o=n.view.querySelector(".wux-menu-scroll-up"),s=n.view.querySelector(".wux-menu-scrollable"),u=n.view.querySelector(".wux-menu-scroll-down"),a=n.view.querySelector(".wux-menu-container"),r=s.getBoundingClientRect(),c=a.getBoundingClientRect();c.height,r.height;if(t.deltaY>0){var d=c.top-r.top-20;r.height-d>=c.height&&(d=r.height-c.height,u.classList.add("wux-menu-scroll-disabled")),a.style.top=d+"px",o.classList.remove("wux-menu-scroll-disabled")}else{(d=c.top-r.top+20)>=0&&(d=0,o.classList.add("wux-menu-scroll-disabled")),a.style.top=d+"px",u.classList.remove("wux-menu-scroll-disabled")}}}}}function X(){if(g=void 0,f<0){for(var t=p>=0?p:0,e=m;e!=t;)h[e].hide(),e=h[e].parent.uid;m=t}else if(M!==L){var i=-1;w>=0&&(i=T[w].submenu_uid);for(e=m;e!=f&&e!=i;)h[e].hide(),e=h[e].parent.uid;if(i>=0&&e!=i)if(T[w]){var n={};n.parentItemRect=D(w),h[i].show(n)}m=i>=0?i:f}}function j(){x=void 0;for(var t=p>=0?p:0,e=m;e!=t;)h[e].hide(),e=h[e].parent.uid;m=t}return R.prototype.buildView=function(){if(this.parent&&!(this.parent instanceof R))throw new Error("Invalid parent, parent must be a Menu instance.");if(this.useTouchInput=i.getTouchMode(),!this.content||!this.content.length)throw new Error("Invalid content, menu must contain at least one item.");this.showIcons=!1,this.showTitles=!1,this.showAccelerators=!1,this.showSubMenuSeparators=!1,this.showSubMenus=!1,this.view=a.cloneNode(!0),this.view.dataset.wuxMenuUid=this.uid;var t=N();t&&(this.view.dataset.recId="menu_"+this.uid,t.markForRecord(this.view)),this.uid>0&&M===L&&(this.view.classList.add("wux-menu-replace"),this.view.querySelector(".wux-menu-parent-title").textContent=this.parentTitle);var e=this.view.querySelector(".wux-menu-column-left"),o=this.view.querySelector(".wux-menu-column-icon"),s=this.view.querySelector(".wux-menu-column-title"),u=this.view.querySelector(".wux-menu-column-accelerator"),l=this.view.querySelector(".wux-menu-column-submenu"),h=this,m=-1;this.content.forEach(function(t,i,a){!function(t){if(!t||!t.type)throw new Error("Invalid item, 'type' property is mandatory.");if(t.icon&&t.fonticon)throw new Error("Invalid item, 'icon' and 'fonticon' properties cannot be set together.");if(t.icon&&!("string"==typeof t.icon||t.icon instanceof Object&&("string"==typeof t.icon.iconClasses||"string"==typeof t.icon.iconPath||"string"==typeof t.icon.iconName)))throw new Error("Invalid item, 'icon' property must be a string or an object compliant with an icon definition");if(t.fonticon&&(!(t.fonticon instanceof Object)||!t.fonticon.content||"string"!=typeof t.fonticon.content))throw new Error("Invalid item, 'fonticon' property must be an object with a 'content' string property.");if(t.submenu&&(!(t.submenu instanceof Array)||!t.submenu.length)&&!(t.submenu instanceof Function))throw new Error("Invalid item, 'submenu' property must be an non empty array of menu items or a function");if(t.action&&!t.action.callback&&!t.action.func)throw new Error("Invalid item, 'action' property must be defined.");if(t.action&&t.action.callback&&"function"!=typeof t.action.callback)throw new Error("Invalid item, 'action.callback' property must be a function.");if(t.action&&(t.action.func&&"string"!=typeof t.action.func||t.action.module&&"string"!=typeof t.action.module))throw new Error("Invalid item, 'action.func' and 'action.module' properties must be strings.")}(t);var f=!1,p=!1;if(t.state){var w=t.state.toLowerCase().split("|");f=w.indexOf("disabled")>=0,p=w.indexOf("selected")>=0}var v=e.appendChild(r.cloneNode(!0)),g=o.appendChild(r.cloneNode(!0)),x=s.appendChild(r.cloneNode(!0)),b=u.appendChild(r.cloneNode(!0)),y=l.appendChild(r.cloneNode(!0)),E=v.appendChild(c.cloneNode(!0)),_=[v,g,x,b,y];if("SeparatorItem"===t.type)_.forEach(function(t,e,i){t.classList.add("wux-menu-separator")});else if("TitleItem"===t.type)_.forEach(function(t,e,i){t.classList.add("wux-menu-title"),f&&t.classList.add("wux-menu-disabled")}),t.title&&(E.textContent=t.title),O(t,E,E);else if("PushItem"===t.type){var S;if(f||(I=new C(t,h.uid),-1!=m&&(I.previous_uid=m,T[m].next_uid=I.uid),m=I.uid,E.dataset.wuxMenuItemUid=I.uid,I.cells.push(v,g,x,b),!t.submenu||t.submenu instanceof Function||!t.action?I.cells.push(y):((S=new C(t,h.uid)).previous_uid=m,T[m].next_uid=S.uid,m=S.uid,S.cells.push(y),y.dataset.wuxMenuItemUid=S.uid),-1==this.first_uid&&(this.first_uid=I.uid)),_.forEach(function(t,e,i){t.classList.add("wux-menu-push"),f&&t.classList.add("wux-menu-disabled")}),t.icon)this.showIcons=!0,g.appendChild(n.generateIcon(t.icon));else if(t.fonticon){if(this.showIcons=!0,"&#"===t.fonticon.content.substr(0,2))g.innerHTML=t.fonticon.content;else t.fonticon.content.split(" ").forEach(function(t,e,i){g.classList.add(t)});t.fonticon.family&&(g.style.fontFamily=t.fonticon.family)}if(t.title&&(this.showTitles=!0,x.textContent=t.title),t.accelerator&&(this.showAccelerators=!0,b.textContent=t.accelerator),t.submenu&&!(t.submenu instanceof Function))this.showSubMenus=!0,t.action&&(this.showSubMenuSeparators=!0,E.classList.add("wux-menu-submenu-separator"),y.classList.add("wux-menu-submenu-separator")),y.classList.add("wux-menu-submenu","wux-ui-3ds","wux-ui-3ds-chevron-right"),(L=new R(this,S||I,t.recId,t.title,t.submenu,this.config)).buildView(),S?S.submenu_uid=L.uid:I&&(I.submenu_uid=L.uid);O(t,E,x)}else if("CheckItem"===t.type||"RadioItem"===t.type){var I,L;if(f||(I=new C(t,h.uid),-1!=m&&(I.previous_uid=m,T[m].next_uid=I.uid),m=I.uid,I.cells.push(v,g,x,b),E.dataset.wuxMenuItemUid=I.uid,t.submenu?t.submenu instanceof Function?(I.cells.push(y),y.dataset.wuxDynamicMenuItemUid=I.uid):t.action?((S=new C(t,h.uid)).previous_uid=m,T[m].next_uid=S.uid,m=S.uid,S.cells.push(y),y.dataset.wuxMenuItemUid=S.uid):I.cells.push(y):I.cells.push(y),-1==this.first_uid&&(this.first_uid=I.uid)),_.forEach(function(e,i,n){e.classList.add("CheckItem"===t.type?"wux-menu-check":"wux-menu-radio"),f&&e.classList.add("wux-menu-disabled"),p&&e.classList.add("wux-menu-selected")}),t.icon)this.showIcons=!0,g.appendChild(n.generateIcon(t.icon));else if(t.fonticon){if(this.showIcons=!0,"&#"===t.fonticon.content.substr(0,2))g.innerHTML=t.fonticon.content;else t.fonticon.content.split(" ").forEach(function(t,e,i){g.classList.add(t)});t.fonticon.family&&(g.style.fontFamily=t.fonticon.family)}if(t.title&&(this.showTitles=!0,x.textContent=t.title),t.accelerator&&(this.showAccelerators=!0,b.textContent=t.accelerator),t.submenu)if(this.showSubMenus=!0,t.action&&(this.showSubMenuSeparators=!0,E.classList.add("wux-menu-submenu-separator"),y.classList.add("wux-menu-submenu-separator")),y.classList.add("wux-menu-submenu","wux-ui-3ds","wux-ui-3ds-chevron-right"),!(t.submenu instanceof Function))(L=new R(this,S||I,t.recId,t.title,t.submenu,this.config)).buildView(),S?S.submenu_uid=L.uid:I&&(I.submenu_uid=L.uid);O(t,E,x)}else{if("CollectionItem"!==t.type)throw new Error("Invalid item, '"+t.type+"' is an unsupported 'type' property.");_.forEach(function(t,e,i){t.classList.add("wux-menu-collection"),f&&t.classList.add("wux-menu-disabled")}),t.items&&t.items.forEach(function(t,e,i){if(t.icon&&t.fonticon)throw new Error("Invalid item, 'icon' and 'fonticon' properties cannot be set together.");if(t.icon&&"string"!=typeof t.icon)throw new Error("Invalid item, 'icon' property must be a string.");if(t.fonticon&&(!(t.fonticon instanceof Object)||!t.fonticon.content||"string"!=typeof t.fonticon.content))throw new Error("Invalid item, 'fonticon' property must be an object with a 'content' string property.");if(t.action&&"function"!=typeof t.action.callback)throw new Error("Invalid item, 'action.callback' property must be a function.");var n=!1;t.state&&(n=t.state.toLowerCase().split("|").indexOf("disabled")>=0);var o,s,u=d.cloneNode(!0);if((f||n)&&u.classList.add("wux-menu-disabled"),t.icon)u.style.backgroundImage="url("===(o=t.icon).substr(0,4)?o:'url("'+o+'")';else if(t.fonticon){if("&#"===t.fonticon.content.substr(0,2))u.innerHTML=t.fonticon.content;else t.fonticon.content.split(" ").forEach(function(t,e,i){u.classList.add(t)});t.fonticon.family&&(u.style.fontFamily=t.fonticon.family)}O(t,u),f||n||(s=new C(t,h.uid),-1!=m&&(s.previous_uid=m,T[m].next_uid=s.uid),m=s.uid,s.cells.push(u),u.dataset.wuxMenuItemUid=s.uid,-1==this.first_uid&&(this.first_uid=s.uid)),this.appendChild(u)},E)}},this),-1!=this.first_uid&&(T[this.first_uid].previous_uid=m,T[m].next_uid=this.first_uid),this.useTouchInput?this.view.classList.add("wux-menu-touch"):this.view.classList.add("wux-menu-mouse"),this.showIcons||o.parentNode.removeChild(o),this.showTitles||s.parentNode.removeChild(s),this.showAccelerators||u.parentNode.removeChild(u),this.showSubMenus||l.parentNode.removeChild(l),this.showIcons||s.classList.add("wux-menu-column-left-margin"),(this.showAccelerators||!this.showSubMenus||this.showSubMenuSeparators)&&(this.showTitles?s.classList.add("wux-menu-column-right-margin"):o.classList.add("wux-menu-column-right-margin")),!this.showAccelerators||this.showSubMenus&&!this.showSubMenuSeparators||u.classList.add("wux-menu-column-right-margin")},R.prototype.updateSize=function(){const t=this.config&&this.config.targetDocument||document;var e=!0;if(this.view){var i=this.view.getBoundingClientRect().width;if(i<160||i>320){var n=this.view.querySelector(".wux-menu-column-title");if(n){var o=n.getBoundingClientRect().width;o+=i>320?320-i:160-i,n.style.width=o+"px",i=this.view.getBoundingClientRect().width}}for(var s=this.view.querySelectorAll(".wux-menu-overlap"),u=0;u<s.length;u++)if(s[u].classList.contains("wux-menu-submenu-separator")){var a=this.view.querySelector(".wux-menu-column-submenu"),r=a?a.getBoundingClientRect().width:0;s[u].style.width=i-r+"px"}else s[u].style.width=i+"px";var c=this.view.querySelectorAll(".wux-menu-column"),d=this.view.querySelectorAll(".wux-menu-collection .wux-menu-overlap");for(u=0;u<d.length;u++)for(var l=Array.prototype.indexOf.call(d[u].parentNode.parentNode.children,d[u].parentNode),h=d[u].getBoundingClientRect().height,m=0;m<c.length;m++)c[m].children[l].style.height=h+"px";var f=t.documentElement.clientWidth;this.config&&this.config.display&&(this.config.display.paddingLeft&&(f-=this.config.display.paddingLeft),this.config.display.paddingRight&&(f-=this.config.display.paddingRight)),i+320>f&&(e=!1)}return e},R.prototype.setHoverState=function(t,e){if(t>=0&&t<T.length){e&&(this.focus_uid=t,this.parent&&this.parent_item_uid>=0&&this.parent.setHoverState(this.parent_item_uid,!0));const i=T[t].cells;for(const t of i)e?t.classList.add("wux-menu-hover"):t.classList.remove("wux-menu-hover")}e||this.focus_uid!=t||(this.focus_uid=-1)},R.prototype.makeItemVisible=function(t){if(this.view&&this.view.classList.contains("wux-menu-with-scroll")){var e=D(t),i=this.view.querySelector(".wux-menu-scroll-up"),n=this.view.querySelector(".wux-menu-scrollable"),o=this.view.querySelector(".wux-menu-scroll-down"),s=this.view.querySelector(".wux-menu-container"),u=n.getBoundingClientRect(),a=s.getBoundingClientRect();a.height,u.height;if(e.top<u.top)(r=a.top-e.top)>=0&&(r=0,i.classList.add("wux-menu-scroll-disabled")),s.style.top=r+"px",o.classList.remove("wux-menu-scroll-disabled");else if(e.bottom>u.bottom){var r=a.top-u.top-(e.bottom-u.bottom);u.height-r>=a.height&&(r=u.height-a.height,o.classList.add("wux-menu-scroll-disabled")),s.style.top=r+"px",i.classList.remove("wux-menu-scroll-disabled")}}},R.prototype.onKeyDown=function(t){if(-1!=this.first_uid){var e=this.focus_uid,i=this.focus_uid,n=!1;if(13==t){if(-1!=this.focus_uid)if(-1!=(o=T[this.focus_uid].submenu_uid))(s={}).parentItemRect=D(this.focus_uid),h[o].show(s),n=!0;else V(T[this.focus_uid])}else if(27==t)this.parent?(this.hide(),m=this.parent.uid):l.hide();else if(37==t)0==m?n=!0:(this.hide(),m=this.parent.uid);else if(38==t)(i=-1==this.focus_uid?T[this.first_uid].previous_uid:T[this.focus_uid].previous_uid)===e&&(n=!0);else if(39==t){if(-1!=this.focus_uid){var o,s;if(-1!=(o=T[this.focus_uid].submenu_uid))(s={}).parentItemRect=D(this.focus_uid),h[o].show(s);n=!0}}else 40==t&&(i=-1==this.focus_uid?this.first_uid:T[this.focus_uid].next_uid)===e&&(n=!0);n||this.setHoverState(e,!1),i!==e&&(this.setHoverState(i,!0),this.makeItemVisible(i))}},R.prototype.show=function(t){let e;if(this.view){const s=t&&t.targetDocument||document,u=this.view,a=o.getElementTranslation(s.body),r=function(t,e){a.length>=2&&(t-=a[0],e-=a[1]),u.style.left=t+"px",u.style.top=e+"px"};let c=0,d=0;const h=s.documentElement.clientWidth,f=s.documentElement.clientHeight;let w=!1;if(this.uid>0&&M===L){w=!0;const t=this.parent.view.getBoundingClientRect();c=t.left,d=t.top}else t&&t.position&&(c=t.position.x,d=t.position.y),t&&t.parentItemRect&&!I&&(c=t.parentItemRect.right,d=t.parentItemRect.top);if(r(c,d),s.body.appendChild(this.view),!this.updateSize()&&0===M&&0===this.uid){M=L;const t=this.config||{};t.submenu="replace",l.show(this.content,t,l._callbacks),e=!0}let v=this.view.getBoundingClientRect();!w&&t&&t.parentItemRect&&I&&(r(c=t.parentItemRect.left-v.width,d=t.parentItemRect.top),v=this.view.getBoundingClientRect());let g=0,x=0,b=h,y=f;t&&t.display&&(t.display.paddingLeft&&(g=t.display.paddingLeft),t.display.paddingTop&&(x=t.display.paddingTop),t.display.paddingRight&&(b-=t.display.paddingRight),t.display.paddingBottom&&(y-=t.display.paddingBottom));const E=y-x;if(!w&&t&&t.layout)for(var i=t.layout.toLowerCase().split("|"),n=0;n<i.length&&("topleft"===i[n]?r(c,d):"topright"===i[n]?r(c-v.width,d):"bottomleft"===i[n]?r(c,d-v.height):"bottomright"===i[n]&&r(c-v.width,d-v.height),!((v=this.view.getBoundingClientRect()).left>=g&&v.right<b&&v.top>=x&&v.bottom<y));n++);if(v.left<g||v.right>=b||v.top<x||v.bottom>=y){let e=v.left,i=v.top;v.right>b&&(t&&t.parentItemRect&&!I&&t.parentItemRect.left-v.width>=g?(e=t.parentItemRect.left-v.width,i=t.parentItemRect.top,I=!0):(e-=v.width)+v.width>b&&(e=b-v.width)),v.bottom>y&&(i-=v.height)+v.height>y&&(i=y-v.height),e<g&&(e=g),i<x&&(i=x),w||r(e,i),v.height>y-i&&(this.view.style.height=E+"px",this.view.classList.add("wux-menu-with-scroll"))}m=this.uid,w&&(this.parent.view.style.display="none",p=this.uid)}return e},R.prototype.hide=function(){if(this.view&&this.view.parentNode&&(this.view.parentNode.removeChild(this.view),this.setHoverState(-1,!1),this.parent&&"none"===this.parent.view.style.display&&(this.parent.view.style.display="",m=this.parent.uid,p=this.parent.uid,this.parent.focus_uid>=0))){var t=D(this.parent.focus_uid);(b<t.left||b>t.right||y<t.top||y>t.bottom)&&this.parent.setHoverState(this.parent.focus_uid,!1)}},l.show=function(t,i,o){const s=i&&i.targetDocument||document;l.hide(),l._callbacks=o,M=0,i&&"replace"===i.submenu?M=L:i&&"outside"===i.submenu&&(M=1);var u=new R(void 0,void 0,void 0,void 0,t,i);if(u.buildView(),!u.show(i)){var a=N();return a&&h.length>0&&(a.menus=h[0].content),n.addEventOnElement(this,s,"mouseover",k,!0),n.addEventOnElement(this,s,e.POINTEROUT,H),n.addEventOnElement(this,s,e.POINTERMOVE,B),n.addEventOnElement(this,s,e.POINTERDOWN,q),n.addEventOnElement(this,s,e.POINTERHIT,P),n.addEventOnElement(this,s,"keydown",F,!0),n.addEventOnElement(this,s,"resize",Y,!1),n.addEventOnElement(this,s,"contextmenu",W,!1),n.addEventOnElement(this,s,"wheel",z,!0),l._callbacks&&l._callbacks.onShow&&l._callbacks.onShow(),this._onShow(),h&&h.length&&(u._resizeAndScrollEvtsHandler=n.addScrollAndResizeListener(h[0],h[0].view,this.hide.bind(this))),u.view.getBoundingClientRect()}},l.hide=function(){if(h&&h.length>0){const u=h[0]&&h[0].config&&h[0].config.targetDocument||document;h[0]&&h[0]._resizeAndScrollEvtsHandler&&(n.removeScrollAndResizeListener(h[0]._resizeAndScrollEvtsHandler),delete h[0]._resizeAndScrollEvtsHandler);var i=N();t.isRecording()&&i&&t.addCustomInteraction(i,{recVersion:1,recType:"MenuHide"},"DS/MenuRec/MenuRec",{checkVisibility:!1}),n.removeEventOnElement(this,u,"mouseover",k,!0),n.removeEventOnElement(this,u,e.POINTEROUT,H),n.removeEventOnElement(this,u,e.POINTERMOVE,B),n.removeEventOnElement(this,u,e.POINTERDOWN,q),n.removeEventOnElement(this,u,e.POINTERHIT,P),n.removeEventOnElement(this,u,"keydown",F,!0),n.removeEventOnElement(this,u,"resize",Y,!1),n.removeEventOnElement(this,u,"contextmenu",W,!1),n.removeEventOnElement(this,u,"wheel",z,!0),void 0!==g&&(window.clearTimeout(g),g=void 0),void 0!==x&&(window.clearTimeout(x),x=void 0);for(var o=0;o<h.length;o++)if(h[o].view){var s=h[o].view.parentNode;s&&s.removeChild(h[o].view)}h=[],m=-1,f=-1,p=-1,w=-1,T=[],I=!1,l._callbacks&&l._callbacks.onHide&&l._callbacks.onHide()}},l._onShow=function(){},l.updateModel=function(t){for(const e of t)for(const t of T)if(t&&t.content&&"CheckItem"===t.content.type&&e.title===t.content.title){t.content.state=e.state;for(const e of t.cells){l.getItemState(t.content)&l.MENU_STATE_SELECTED?e.classList.add("wux-menu-selected"):e.classList.remove("wux-menu-selected")}}},l.MENU_STATE_NONE=0,l.MENU_STATE_SELECTED=1,l.MENU_STATE_DISABLED=2,l.translateStateStringToBitField=(t=>{let e=l.MENU_STATE_NONE;const i=t.toLowerCase().split("|");return-1===i.indexOf("unselected")&&i.indexOf("selected")>=0&&(e|=l.MENU_STATE_SELECTED),i.indexOf("disabled")>=0&&(e|=l.MENU_STATE_DISABLED),e}),l.translateStateBitFieldToString=(t=>{let e=!1,i=!1;return t&l.MENU_STATE_SELECTED&&(e=!0),t&l.MENU_STATE_DISABLED&&(i=!0),`${e?"selected":""}${e&&i?"|":""}${i?"disabled":""}`}),l.getItemState=(t=>{let e=l.MENU_STATE_NONE;return t&&void 0!==t.state&&null!==t.state&&(e=l.translateStateStringToBitField(t.state)),e}),l.setItemState=((t,e)=>{t&&null!=e&&(t.state=l.translateStateBitFieldToString(e))}),l.getMenuItemUidFromNode=(t=>t&&t.dataset?void 0!==t.dataset.wuxDynamicMenuItemUid&&null!==t.dataset.wuxDynamicMenuItemUid?t.dataset.wuxDynamicMenuItemUid:void 0!==t.dataset.wuxMenuItemUid&&null!==t.dataset.wuxMenuItemUid?t.dataset.wuxMenuItemUid:void 0:-1),l.getMenuDescriptionFromUid=(t=>{if(T[t])return T[t].content}),l}),define("DS/Menu/ContextualMenu",["DS/Menu/Menu","DS/WebRecordEnabler/Adapter","UWA/Class/Promise","DS/Core/PointerEvents","DS/Utilities/Utils"],function(t,e,i,n,o){"use strict";var s=void 0,u="mouse",a="auto";function r(t){n.isTouchEvent(t)&&c(t)}function c(n){t.hide();for(var r=[],c=n.target;c;){if(c["wux-data-contextual"])for(var d=c.getBoundingClientRect?c.getBoundingClientRect():{left:0,top:0},l=n.pageX-d.left,h=n.pageY-d.top,m=c["wux-data-contextual"],f=0;f<m.length;f++){var p=m[f].params.callback.call(m[f].params.this,{context:m[f].params.context,info:{position:{x:l,y:h},target:n.target},data:{event:n,listener:c,listenerPosition:{x:l,y:h},target:n.target,targetPosition:{x:n.offsetX,y:n.offsetY},windowPosition:{x:n.clientX,y:n.clientY}}});p&&p instanceof Promise?r.push(p):p&&p.length>0&&r.push(i.resolve(p))}c=c===window?void 0:c.parentNode?c.parentNode:window}if((r.length>0||!n.target||"input"!==n.target.tagName.toLowerCase()&&"textarea"!==n.target.tagName.toLowerCase()&&!n.target.isContentEditable)&&n.preventDefault(),r&&r.length>0){n.actionPerformed=!0;var w=e.WaitManager.addWaitCondition(2e4,"Wait context menu to be displayed");i.allSettled(r).then(function(i){var r=[],c=0;if(i&&i.length>0)for(var d=0;d<i.length;d++)i[d].value&&i[d].value.length>0&&(r.length>c&&(r.push({type:"SeparatorItem"}),c=r.length),r=r.concat(i[d].value));if(r&&r.length>0){const e=o.getDocumentOwner(n.target);t.show(r,{display:s,input:u,position:{x:n.pageX,y:n.pageY},submenu:a,targetDocument:e},{onShow:()=>{n.target&&n.target.setAttributeNode(e.createAttribute("is-displaying-menu"))},onHide:()=>{n.target&&n.target.removeAttribute("is-displaying-menu")}})}e.WaitManager.removeWaitCondition(w)})}return!1}var d={setGlobalConfig:function(t){if(!t)throw new Error("Invalid configuration.");if(t.display&&(s=t.display),t.input){if("mouse"!==t.input&&"touch"!==t.input)throw new Error("Invalid input configuration, expected values are 'mouse' or 'touch'.");u=t.input}if(t.submenu){if("replace"!==t.submenu&&"outside"!==t.submenu&&"auto"!==t.submenu)throw new Error("Invalid submenu configuration, expected values are 'replace', 'outside' or 'auto'.");a=t.submenu}},addEventListener:function(t,e){if(!t||!e)throw new Error("Invalid parameters.");if(t!==window&&!(t instanceof HTMLElement))throw new Error("Invalid parameters, 'target' must be the window or an HTMLElement.");if(!(e.callback&&e.callback instanceof Function))throw new Error("Invalid parameters, 'params.callback' must be a function.");var i=t["wux-data-contextual"];return i||((i=[]).next=0,t["wux-data-contextual"]=i,t.addEventListener("contextmenu",c),t.addEventListener(n.LONGHOLD,r)),i.push({uid:i.next,params:e}),i.next++}};return d.removeEventListener=function(t,e){if(!t||(i=e,isNaN(parseFloat(i))||!isFinite(i)))throw new Error("Invalid parameters.");var i,o=t["wux-data-contextual"];if(!o)throw new Error("Invalid target.");for(var s=0;s<o.length&&o[s].uid!=e;)s++;if(s>=o.length)throw new Error("Invalid uid.");o.length>1?(o.splice(s,1),o.next=o[o.length-1].uid+1):(t.removeEventListener("contextmenu",c),t.removeEventListener(n.LONGHOLD,r),delete t["wux-data-contextual"])},d});