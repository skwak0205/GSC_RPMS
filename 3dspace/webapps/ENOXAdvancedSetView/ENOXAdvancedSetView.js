define("DS/ENOXAdvancedSetView/js/ENOXAdvancedSetView",["DS/W3DXComponents/Views/Item/SetView"],function(e){"use strict";return e.extend({name:"advanced-set-view",init:function(e){this._parent.call(this,e)},setup:function(e){var t=this;t.currentFilters=null,t.currentFilters=null,t.customFilters={},t.customSorters={};for(var n=[],i=0;i<t.collection._models.length;i++)n.push(UWA.clone(t.collection._models[i]._attributes));t.collection=new UWA.Class.Collection(n),t._referenceCollection=t.collection,t.filteredCollection=t._referenceCollection._models,t.sortedCollection=t.filteredCollection,e.filters&&e.filters.forEach(function(e){t.addCustomFilter(e.id,e.callback)}),e.sorters&&e.sorters.forEach(function(e){t.addCustomSorter(e.id,e.callback)}),e.modelEvents.subscribe({event:"advanced-set-view-switch"},function(e){console.log("### - ENOXAdvancedSetView - Switch view to : "+e.id),t.dispatchEvent("onSwitch",[t,e.id])}),e.modelEvents.subscribe({event:"advanced-set-view-filter"},function(e){null!=e&&console.log("### - ENOXAdvancedSetView - Apply "+e.length+" filter(s)"),t.filter(e)}),e.modelEvents.subscribe({event:"advanced-set-view-sort"},function(e){null!=e&&(console.log("### - ENOXAdvancedSetView - Sort collection : "+e.id),"name"===e[0].id&&(e[0].id="title")),t.sort(e)}),e.modelEvents.subscribe({event:"advanced-set-view-add-filter"},function(e){console.log("### - ENOXAdvancedSetView - Adding new filter"),t.addCustomFilter(e.id,e.callback)}),e.modelEvents.subscribe({event:"advanced-set-view-add-sorter"},function(e){console.log("### - ENOXAdvancedSetView - Adding new sorter"),t.addCustomSorter(e.id,e.callback)}),this._parent.apply(this,arguments)},filter:function(e){var t=this,n=t._referenceCollection._models,i=[];e.forEach(function(e,s){void 0!==t.customFilters[e.id]?i.push({id:e.id,exclude:e.exclude}):n=n.filter(function(t){return e.exclude?!(t.get(e.id)===e.value):t.get(e.id)===e.value})}),i.forEach(function(e){var i=t.customFilters[e.id];n=e.exclude?n.filter(function(e,t){return!i(e,t)}):n.filter(i)}),t.filteredCollection=n,t.sort(t.currentSorters),t.options.modelEvents.publish({event:"advanced-set-view-filtered"})},filterByCallBack:function(e){var t=this._referenceCollection._models;e.forEach(function(e,n){t=t.filter(function(t){return e.cb(t)})}),this.filteredCollection=t,this.sort(this.currentSorters),this.options.modelEvents.publish({event:"advanced-set-view-filtered"})},sort:function(e){var t=this,n=[];if(null==e||e.length<=0)t.currentSorters=null,t.sortedCollection=t.filteredCollection;else{t.currentSorters=e;for(var i=e.length-1,s=i;s>=0;s--){var o=function(){var o=s,l=e[o].id,r=e[o].desc,a=t.customSorters[l];return function(e,t){var s;r&&(s=e,e=t,t=s);if(void 0!==a){var c=a(e,t);if(0!==c)return c}else{if(e._attributes[l]>t._attributes[l])return 1;if(e._attributes[l]<t._attributes[l])return-1}return o===i?0:r?n[o+1](t,e):n[o+1](e,t)}}();n.unshift(o)}t.sortedCollection=t.filteredCollection.sort(n[0])}t.collection.reset(t.sortedCollection),t.options.modelEvents.publish({event:"advanced-set-view-sortered"})},refreshCollection:function(e){console.log("item added"+e);if(this._referenceCollection.add(e.model),this.filters)for(var t in this.filters){var n=this.filters[t];n.indexOf("all")<0&&n.indexOf(e.model.get(t))<0&&this._actualCollection.remove(e.model)}},addCustomFilter:function(e,t){this.customFilters[e]=t},addCustomSorter:function(e,t){this.customSorters[e]=t}})}),define("DS/ENOXAdvancedSetView/js/GridScrollView",["DS/W3DXComponents/Views/Layout/GridView","DS/W3DXComponents/Views/Layout/NestedScrollView","css!DS/W3DXComponents/W3DXComponents"],function(e,t){"use strict";return t.extend({name:"grid-scroll",nested:e,setup:function(e){this._parent.call(this,e),this.nestedView.listenTo(this.nestedView,"onAfterItemAdded",function(e){this.collection.dispatchEvent("onAfterItemAdded",e)})}})}),define("DS/ENOXAdvancedSetView/js/BaseCustomView",["UWA/Class/View"],function(e){"use strict";return e.extend({tagName:"div",setup:function(e){if(this.model){this.container.id=this.id=this.model.cid;var t=this.model.toJSON();t.withMultisel=this.options.withMultisel,t.cid=this.cid,this.container.setHTML(e(t))}},persistCheckbox:function(){this.container.getElement("."+this.name+"-check").addClassName("persist")},unPersistCheckbox:function(){this.container.getElement("."+this.name+"-check").removeClassName("persist")},setShading:function(e){for(var t=0;t<e.length;t++)e[t].criteria(this.model)&&(this.container.setStyle("background-color",e[t].color),this.container.addClassName("shaded"),this.container.getElement(".tile-header").setStyle("outline-color",e[t].color))},resetShading:function(){this.container.style.backgroundColor="",this.container.removeClassName("shaded")},select:function(e){e||(e={}),this.container.addClassName("selected"),this.container.getElement("."+this.name+"-check input")&&(this.container.getElement("."+this.name+"-check input").checked=!0),e.silent||this.dispatchEvent("onSelect")},unSelect:function(e){this.container.removeClassName("selected"),this.container.getElement("."+this.name+"-check input")&&(this.container.getElement("."+this.name+"-check input").checked=!1),e&&!e.silent&&this.dispatchEvent("onUnSelect")},isSelected:function(){return this.container.hasClassName("selected")}})}),define("DS/ENOXAdvancedSetView/js/SampleModel",["UWA/Class/Model"],function(e){"use strict";return e.extend({name:"SampleModel",idAttribute:"id",parse:function(e){var t={canEdit:!1};if(t.alert=t.warning=0,UWA.is(e,"string"))t.idAttr=t.id=e;else{if(t.idAttr=t.id=e["@ref"],e.representations&&e.representations.member){var n=e.representations.member[0],i=n.thumbnails?n.thumbnails:null;t.image=i&&i.imageURL&&i.imageURL.member?i.imageURL.member[0]:null}e.versionLabel&&(t.version=e.versionLabel?e.versionLabel:""),e.relatedItemType&&(t.parentType=e.relatedItemType["@ref"]),e.relatedItem&&(t.parent=e.relatedItem["@ref"]),(e.AttributeContent&&e.AttributeContent.member?e.AttributeContent.member:[]).forEach(function(e){var n="";for(n in e)if(e.hasOwnProperty(n))if("object"==typeof e[n]){if(e[n].member){var i="";e[n].member.forEach(function(e){i=""==i?e:i+","+e}),t[n]=i}}else t[n]=e[n]})}t.Description||(t.Description=t.Description?t.Description:""),t.fulltitle||(t.title=t.name?t.name:t.Name,t.fulltitle=t.title?t.title+" "+t.version:t.version),t.id=t.id.substring(t.id.indexOf(":")+1,t.id.length),t.id=t.id.replace(".","");var s,o=[{value:t.description}];if(t.basics=o,t.name){var l=t.name.split("_")[1];t.type=l%2==0?"Part":"Model"}for(s in t)UWA.owns(t,s)&&!UWA.is(t[s])&&delete t[s];return t}})}),define("DS/ENOXAdvancedSetView/js/ActionsToolbar",["UWA/Class/View","DS/UIKIT/Mask","DS/UIKIT/Tooltip","DS/UIKIT/Input/Button","DS/UIKIT/DropdownMenu","DS/Handlebars/Handlebars","text!DS/ENOXAdvancedSetView/html/ActionsToolbar.html","css!DS/ENOXAdvancedSetView/css/ActionsToolbar.css"],function(e,t,n,i,s,o,l){"use strict";o.registerHelper("ifActionType",function(e,t,n){return e===t?n.fn(this):n.inverse(this)});o.compile(l);return e.extend({name:"actions-toolbar",tagName:"div",filters:{},sorter:"",currentSorterId:null,descSort:!1,domEvents:function(){var e=this;return{"click .action-button":function(t){e.dispatchEvent("onActionClick",[t]),e.options.modelEvents&&e.options.modelEvents.publish({event:"atb-action-click",data:{id:this.id}})}}},setup:function(e){var t=this;t.container.addClassName(this.getClassNames("-container")),e.listTile&&this.setTitle(e.listTile),t.collection&&t.collection.forEach(function(e,n,i){e&&UWA.is(e,"object")&&(t.elements[e.id]=t.getActionElement(e))}),t.container.getElement("#order-by").addEvent("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var n=this.getElement(".fonticon");n.hasClassName("fonticon-down")?(n.classList.remove("fonticon-down"),n.classList.add("fonticon-up"),this.set("name","Ascending"),t.descSort=!0):(n.classList.remove("fonticon-up"),n.classList.add("fonticon-down"),this.set("name","Descending"),t.descSort=!1),t.options.modelEvents.publish({event:"advanced-set-view-sort",data:[{id:t.currentSorterId,desc:t.descSort}]})})},setTitle:function(e){var t=UWA.extendElement(this.container);new UWA.Element("div",{class:"xEng-list-title pull-left",html:e}).inject(t,"top")},getActionElement:function(e){var t,s,o=e.type,l=!1;switch(s=UWA.extendElement(this.container).getElement(".manage-actions"),o){case"dropdown":e.items=this.getDropdownOptions(e),(t=this.createDropdownElement(e)).inject(this.container);break;case"filter":case"sort":var r;l||(l=!0),s||(s=new UWA.Element("div",{class:"manage-actions"}).inject(this.container),r=new i({id:"order-by",className:"order-action",icon:"down",name:"Descending"}).inject(s),new n({position:"bottom",target:r.getContent(),body:"",events:{onShow:function(e){this.setBody(this.options.target.name)},onHide:function(e){this.setBody("")}}})),e.items=this.getDropdownOptions(e),t="filter"===o?this.createDropdownMenuElement(e):this.createDropdownElement(e),s.insertBefore(t,s.lastChild);break;default:t=this.createButtonElement(e)}return t},createButtonElement:function(e){var t=new i({className:"action-button",icon:e.icon}).inject(this.container);new n({position:"bottom",target:t.getContent(),body:e.title})},_maskAndFilter:function(e,n){var i=UWA.extendElement(widget.body),s=i.getElement(".set-contents"),o=i.getElement('[name="Filter By"]');t.mask(s,"Filtering..."),this.options.modelEvents.subscribeOnce({event:"advanced-set-view-filtered"},function(){t.unmask(s)}),void 0===n?(this.options.modelEvents.publish({event:"advanced-set-view-filter",data:[]}),o.textContent="All"):(this.options.modelEvents.publish({event:"advanced-set-view-filter",data:[{id:e,value:n}]}),o.textContent=n)},createDropdownMenuElement:function(e){var t=this,n=new UWA.Element("div",{class:"action-dropdown"});new UWA.Element("div",{class:"selectLabel",text:e.title+":"}).inject(n);var o=new i({className:"selectOptions",id:e.key,name:e.title,value:e.defaultValue}).inject(n);return new s({target:o.getContent(),items:[{text:"Maturity",position:"bottom left",items:[{text:"All",handler:function(){t._maskAndFilter("status")}},{text:"In work",handler:function(){t._maskAndFilter("status","In Work")}},{text:"Released",handler:function(){t._maskAndFilter("status","Released")}},{text:"Frozen",handler:function(){t._maskAndFilter("status","Frozen")}},{text:"Obsolete",handler:function(){t._maskAndFilter("status","Obsolete")}}]}]}),n},createDropdownElement:function(e){var s,o=this,l=new UWA.Element("div");"filter"===e.type||"sort"===e.type?(s="selectOptions",new UWA.Element("div",{class:"selectLabel",html:e.title+": "}).inject(l),l.addClassName("action-dropdown")):s="action-button";var r=new i({className:s,id:e.key,name:e.title,icon:e.icon?e.icon:null,value:e.defaultValue?e.defaultValue:"",dropdownCaret:!1,dropdown:{closeOnClick:!!e.closeOnClick&&e.closeOnClick,multiSelect:!!e.multiSelect&&e.multiSelect,items:e.items},events:{onDropdownClick:function(t){var n=!1,i=this.dropdown.getSelectedItems(),s=[];if(i.forEach(function(e,t){"all"===e.name&&(n=!0),s.push({id:e.name,text:e.text,value:e.value})}),"filter"===e.type)s.length>1&&n&&(n=!1,this.dropdown.getItem("all").toggleSelection(),s.splice(0,1)),0===s.length?n=!0:1===s.length?this.setValue(s[0].text):(this.setValue("Multiple"),this.textContent=s.join("|")),n&&(this.dropdown.getItem("all").selected||(this.dropdown.getItem("all").toggleSelection(),s.push("all")),this.setValue("All"),this.dropdown.items.forEach(function(e,t){"All"!==e.text&&e.selected&&e.toggleSelection()}));else if("sort"===e.type)this.setValue(i[0].text),"None"!==i[0].text&&(o.currentSorterId=i[0].name,o.options.modelEvents.publish({event:"advanced-set-view-sort",data:[{id:i[0].name,desc:o.descSort}]}));else{var l=t.target;t.target.classList.contains("item")||(l=t.target.parentElement),o.options.modelEvents&&o.options.modelEvents.publish({event:"atb-action-click",data:{id:l.getAttribute("name")}})}},onDropdownClickOutside:function(n){var i=this.dropdown.getSelectedItems(),s=UWA.extendElement(widget.body).getElement(".set-contents"),l=[];if(i.forEach(function(e,t){"all"!==e.name&&"none"!==e.name&&l.push({id:e.name,value:e.value})}),"filter"===e.type)t.mask(s,"Filtering..."),o.options.modelEvents.subscribeOnce({event:"advanced-set-view-filtered"},function(){t.unmask(s)}),o.options.modelEvents.publish({event:"advanced-set-view-filter",data:l});else if("sort"===e.type){t.mask(s,"Sorting...");var r=null;void 0!==l&&void 0!==l[0]&&(r=l[0].id),o.options.modelEvents.subscribeOnce({event:"advanced-set-view-sortered"},function(){t.unmask(s)}),o.currentSorterId=r,o.options.modelEvents.publish({event:"advanced-set-view-sort",data:[{id:r,desc:o.descSort}]})}}}}).inject(l);return"filter"===e.type?o.filterBtnElt=r:"sort"===e.type&&(o.sorterBtnElt=r),new n({position:"bottom",target:r.getContent(),body:e.title}),l},getDropdownOptions:function(e){var t,n,i,s,o,l=[],r=e.type,a=e.key,c=!0;if("sort"===r){if(t={name:"none",text:"None",selectable:!0},e.defaultValue||(e.defaultValue=t.text,t.selected=!0,c=!1),l.push(t),a&&a.length>0)for(i=a.length,n=0;n<i;n++)s=a[n].name?a[n].name:a[n].label,o=a[n].label,t={name:s,text:o,selectable:!0},c&&e.defaultValue===s&&(t.selected=!0),l.push(t)}else if("filter"===r){t={name:"all",text:"All",selectable:!0},e.defaultValue||(e.defaultValue=t.text,t.selected=!0,c=!1),l.push(t),a&&a.length>0&&a.forEach(function(n){t={name:n.name,value:n.value,text:n.label,selectable:!0},c&&e.defaultValue===s&&(t.selected=!0),l.push(t)})}else if("dropdown"===r){a&&a.length>0&&a.forEach(function(e){t={name:e.name,value:e.value,text:e.label,fonticon:e.icon,selectable:e.selectable},l.push(t)})}return l},addCustomFilter:function(e,t){void 0===this.customFilters&&(this.customFilters={}),this.customFilters[t]=e;var n=this.filterBtnElt;if(n){var i=n.dropdown;i.items.push({name:e,text:t,selectable:!0}),n.setDropdown({closeOnClick:i.options.closeOnClick,multiSelect:i.options.multiSelect,items:i.items})}},addCustomSorter:function(e,t){void 0===this.customSorters&&(this.customSorters={}),this.customSorters[t]=e;var n=this.sorterBtnElt,i=n.dropdown;i.items.push({name:e,text:t,selectable:!0}),n.setDropdown({closeOnClick:i.options.closeOnClick,multiSelect:i.options.multiSelect,items:i.items})}})}),define("DS/ENOXAdvancedSetView/js/SampleCircleView",["DS/Handlebars/Handlebars","DS/ENOXAdvancedSetView/js/BaseCustomView","text!DS/ENOXAdvancedSetView/html/SampleCircleView.html","css!DS/ENOXAdvancedSetView/css/SampleCircleView.css"],function(e,t,n){"use strict";var i=e.compile(n);return t.extend({name:"circle",tagName:"div",domEvents:function(){return{"click .circle-sub-container":function(e){this.dispatchEvent("onClick",[e])},"change .circle-check input":this.dispatchAsEventListener("onCheck")}},setup:function(){this.container.addClassName(this.getClassNames("-container")),this._parent.call(this,i)}})}),define("DS/ENOXAdvancedSetView/js/SampleCollection",["DS/WebAppsFoundations/Collections/PageableCollection","DS/ENOXAdvancedSetView/js/SampleModel"],function(e,t){"use strict";return e.extend({model:t,defaultOptions:{mode:"data",state:{firstPage:0,currentPage:0,pageSize:20},queryParams:{currentPage:"page",pageSize:"limit",totalRecords:"member"}},parseResponseForStateUpdate:function(e,t,n,i){return{totalRecords:e.totalItems}},parseRecords:function(e,t){return e.member?e.member:e.value},fetch:function(e){var t=e.to?e.to*this.defaultOptions.state.pageSize+1:this.defaultOptions.state.currentPage;return this.url="http://ruu1w764blr:9090/3DRDF/v0/classes/dslc:ItemVersion?$mask=dsmveng:EngItemVersionMask.Common&$skip="+t+"&$top="+this.defaultOptions.state.pageSize+"&$where=?res WHERE {?item a dseng:EngItem . ?item dslc:hasItemVersion ?res . FILTER NOT EXISTS {?descendant  dslc:isVersionEvolution ?res}}",this._parent.call(this,e)}})});