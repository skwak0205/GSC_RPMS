define("DS/IterationsWebInWinWidget/IterationsWebInWinWidget",["UWA/Controls/Abstract","DS/ENO6WPlugins/jQuery","DS/WAFData/WAFData","DS/LifecycleServices/LifecycleServices","DS/WebInWinHelper/WebInWinHelper","DS/IterationsWidget/IterationsWidget","DS/LifecycleServices/LifecycleServicesSettings"],function(e,i,t,n,o,s,d){"use strict";return e.extend({defaultOptions:{wintop:!1,addinmode:null},webToWinCom_Socket:null,ContextualMenus:null,context:null,displayNotification:function(e){LifecycleAlert.displayNotification(e)},init:function(e,i,t){this.widget=e,this.context=this,this.options=t,this.selectedOid=null,this.isWebInWinODTMode=t.isWebInWinODTMode,1==t.isWebInWinODTMode&&(window.IterationsWebInWinPayload=t.IterationsWebInWinPayload),this.securityContext=null,o.initTenant(this),o.getServices(this),this.contextMenuObject=null,1==this.options.wintop&&(this.webToWinCom_Socket=o.createWebInWinSocket("webinwiniteration_socket_")),this.options.webToWinComSocket=this.webToWinCom_Socket,this.parentWidget=i,this._parent(t);var n=UWA.createElement("div",{class:"webinwin_iteration_frame",id:"webinwiniteration"});this.elements.container=n,n.style.width="100%",n.style.height="100%",n.setAttribute("data-rec-id",n.id),this.widget.body.setAttribute("data-rec-id","iterationsWebInWinWidgetParent"),n.dataset.webinwinSocket=this.options.webToWinComSocket,null!==t.addinmode&&void 0!==t.addinmode&&t.addinmode.length>0?(this.addinmode=t.addinmode,1==t.isWebInWinODTMode&&(window.addinmode=t.addinmode,window.webinwincom_socket=this.options.webToWinComSocket)):this.addinmode=null,window._webinwincom_socket=this.options.webToWinComSocket,this.iterationWidget=new s(this.widget,this.parentWidget,this.options)},onComplete:function(e,i){window._oidAlias=i.name+" "+i.rev;var t=e.elements.container;if(void 0!==typeof t&&null!=t)for(;t.hasChildNodes();)t.removeChild(t.lastChild);e.iterationWidget.buildWebInWinUI(e.webToWinCom_Socket);var n={physicalid:e.selectedOid,type:i.type};e.iterationWidget.setObject(n),e.iterationWidget.inject(e.elements.container)},initDatafromWin:function(e){var i=this;window._tenant=i.tenant;var t=[];o.setCSOSelectionIteration(i.webToWinCom_Socket,e),e.forEach(function(e){var n={physicalid:e.physicalId,name:e.name,tenant:i.tenant};t.push(n)}),this.iterationWidget.setOptions(this.options);var s=i.elements.container;if(void 0!==typeof s&&null!=s)for(;s.hasChildNodes();)s.removeChild(s.lastChild);if(0!=t.length){t[0].physicalid;i.selectedOid=t[0].physicalid,i.selectedObj=t[0],window._oidAlias=t[0].name}if(i.addinmode&&"catiav5"===i.addinmode.toLowerCase()){i.licenseList=[],i.licenseList.length>0&&(window._licenseList=i.licenseList);!0===i.options.isWebInWinODTMode?(i.licenseList.length>0&&(window._licenseList=i.licenseList),i.iterationWidget.buildWebInWinUI(i.webToWinCom_Socket,i.isWebInWinODTMode,i.addinmode),i.iterationWidget.setObject(i.selectedObj),i.iterationWidget.inject(i.elements.container)):d.app_initialization(function(){n.getSecurityContextPromise(i.tenant).then(function(e){null!==e&&(i.securityContext=e,i.licenseList.length>0&&(window._licenseList=i.licenseList),i.options.securityContext=e,i.iterationWidget.buildWebInWinUI(i.webToWinCom_Socket,i.isWebInWinODTMode,i.addinmode),i.iterationWidget.setObject(i.selectedObj),i.iterationWidget.inject(i.elements.container))})})}else o.sendGetLicenseNotif(i.webToWinCom_Socket)},onLicenseList:function(e){var i=this;function t(e){this.license=e.license,this.authorized=e.authorized}if(i.licenseList=[],t.prototype.getAvailable=function(e){if(void 0!==typeof e&&this.license===e)return this.authorized},0!=e.length)for(var o=0;o<e.length;o++){var s=new t(e[o]);i.licenseList.push(s)}i.licenseList.length>0&&(window._licenseList=i.licenseList),1==i.isWebInWinODTMode?window._isWebInWinODTMode=!0:window._isWebInWinODTMode=!1;if(1==i.isWebInWinODTMode)return i.iterationWidget.buildWebInWinUI(i.webToWinCom_Socket,i.isWebInWinODTMode,null),i.iterationWidget.setObject(i.selectedObj),void i.iterationWidget.inject(i.elements.container);require(["DS/UWPClientCode/PublicAPI"],function(e){n.getSecurityContextPromise(i.tenant).then(function(e){null!==e&&(i.securityContext=e,i.licenseList.length>0&&(window._licenseList=i.licenseList),i.options.securityContext=e,i.iterationWidget.buildWebInWinUI(i.webToWinCom_Socket,i.isWebInWinODTMode,null),i.iterationWidget.setObject(i.selectedObj),i.iterationWidget.inject(i.elements.container))})})},onResize:function(){},onRefresh:function(){},initEnvfromWin:function(e){}})});