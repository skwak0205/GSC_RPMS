define("DS/ENOXTabs/js/ENOXTabs",["DS/CoreEvents/ModelEvents","UWA/Class/View","UWA/Class/Model","UWA/Drivers/Alone","DS/W3DXComponents/IdCard","DS/Handlebars/Handlebars","text!DS/ENOXTabs/html/ENOXTabComponent.html","css!DS/ENOXTabs/css/ENOXTabComponent.css","css!DS/UIKIT/UIKIT.css"],function(e,t,i,n,s,r,o,a,c){"use strict";var d=r.compile(o);return t.extend({name:"page-sidebar-view",className:function(){return this.getClassNames("-container")},tagName:"div",init:function(e){var t;for(var i in e.title=e.title?e.title:null,e.description=e.description?e.description:null,e.date=e.date?e.date:null,e.ownerName=e.ownerName?e.ownerName:null,e.tabs=e.tabs?e.tabs:[],e.lazyRendering=!!e.lazyRendering&&e.lazyRendering,e.initialSelectedIndex=e.initialSelectedIndex?e.initialSelectedIndex:0,e.initialSelectedIndex=e.initialSelectedIndex>=e.tabs.length?0:e.initialSelectedIndex,this._options=e,this._doms={},this._listSubscription=[],e)this[i]=e[i];if(this._parent(e),this.container.setHTML(d(e)),this._initializeEvents(e),this._idCard=null,this._initializeIdCard(e),this._currentIndex=e.initialSelectedIndex,e.lazyRendering)t=this.container.querySelector(".sidebar-tab-content.tab-"+e.initialSelectedIndex),e.tabs[e.initialSelectedIndex].content(t),e.tabs[e.initialSelectedIndex].rendered=!0,t.classList.add("active");else{var n=0;for(n=0;n<e.tabs.length;n+=1)t=this.container.querySelector(".sidebar-tab-content.tab-"+n),e.tabs[n].content(t),e.tabs[n].rendered=!0;this.container.querySelector(".sidebar-tab-content.tab-"+e.initialSelectedIndex).classList.add("active")}this._idCard.selectFacet(e.initialSelectedIndex),this._startSubscribingEvents(e)},setup:function(e){},render:function(e){var t=0;return this._options.title&&(t+=38),(this._options.ownerName||this._options.date)&&(t+=20),this._options.description&&(t+=21),!!this.container.querySelector(".id-card").classList.contains("without-facets")||(t+=42),this.container.querySelector(".sidebar-body").style.height="calc(100% - "+t+"px)",this.container.querySelector(".sidebar-nav").style.height=t+"px",this},_hideHeader:function(){this.container.querySelector(".sidebar-body").style.height="100%",this.container.querySelector(".sidebar-nav").classList.add("height0"),this.container.querySelector(".sidebar-nav").style.height="0px"},_showHeader:function(){this.container.querySelector(".sidebar-nav").classList.remove("height0"),this.render()},_changeTab:function(e,t){if(e!==t){var i=this.container.querySelectorAll(".sidebar-tab-content");Array.prototype.map.call(i,function(e){e.classList.remove("active")});var n=this.container.querySelector(".sidebar-tab-content.tab-"+e);if(this._options.lazyRendering){this._doms[t]=this.container.querySelector(".sidebar-tab-content.tab-"+t).cloneNode(!0);for(var s=this.container.querySelector(".sidebar-tab-content.tab-"+t);s.firstChild;)s.removeChild(s.firstChild);this._options.tabs[e].rendered?n.appendChild(this._doms[e].firstChild):(this._options.tabs[e].content(n),this._options.tabs[e].rendered=!0)}n.classList.add("active"),this._modelEvent.publish({event:"right-side-bar-tab-changed",data:{idx:e}})}},getCurrentIndex:function(){return this._currentIndex},_initializeIdCard:function(e){var t=this,n=new(i.extend({}))({title:e.title,description:e.description,date:e.date,ownerName:e.ownerName}),r=[],o=0;for(o=0;o<e.tabs.length;o+=1){var a={};a.text=e.tabs[o].text,a.icon=e.tabs[o].fonticon,a.id=e.tabs[o].id,a.handler=function(){t._modelEvent.publish({event:"right-side-bar-tab-change",data:{idx:this.getSelectedFacet(),add:"internal"}})},r.push(a)}this._idCard=new s({model:n,actions:[],facets:r}),this._idCard.inject(this.container.getElement(".sidebar-nav")),!e.title&&this.container.querySelector(".header-section")&&this.container.querySelector(".header-section").classList.add("displaynone"),e.ownerName||e.date||!this.container.querySelector(".owner-name-section")||this.container.querySelector(".owner-name-section").classList.add("displaynone"),!e.description&&this.container.querySelector(".description-section")&&this.container.querySelector(".description-section").classList.add("displaynone")},_initializeEvents:function(t){t.modelEvents?this._modelEvent=t.modelEvents:this._modelEvent=new e},_startSubscribingEvents:function(e){var t=this;this._listSubscription.push(this._modelEvent.subscribe({event:"right-side-show-header"},function(){t._showHeader()})),this._listSubscription.push(this._modelEvent.subscribe({event:"right-side-hide-header"},function(){t._hideHeader()})),this._listSubscription.push(this._modelEvent.subscribe({event:"right-side-bar-toggle"},function(){t._toggleDisplay()})),this._listSubscription.push(this._modelEvent.subscribe({event:"right-side-bar-show"},function(){t._show()})),this._listSubscription.push(this._modelEvent.subscribe({event:"right-side-bar-tab-change"},function(e){e.add&&"internal"===e.add||t._idCard.selectFacet(e.idx),t._changeTab(e.idx,t._currentIndex),t._currentIndex=e.idx})),this._listSubscription.push(this._modelEvent.subscribe({event:"right-side-bar-tab-content-change"},function(e){var i=t.container.querySelector(".sidebar-tab-content.tab-"+e.idx);i&&(i.innerHTML="",i.appendChild(e.content))})),this._listSubscription.push(this._modelEvent.subscribe({event:"right-side-bar-title-change"},function(e){t._options.title=e,t.container.querySelector(".header-section").classList.remove("displaynone"),t.container.querySelector(".header-section").querySelector(".title-section").querySelector("h1").querySelector("span").innerHTML=e,t.render()})),this._listSubscription.push(this._modelEvent.subscribe({event:"right-side-bar-top-change"},function(e){t._options.title=e.title?e.title:t._options.title,t._options.date=e.date?e.date:t._options.date,t._options.ownerName=e.ownerName?e.ownerName:t._options.date,t.container.querySelector(".header-section").classList.remove("displaynone"),t.container.querySelector(".header-section").querySelector(".title-section").querySelector("h1").querySelector("span").innerHTML=t._options.title,t.container.querySelector(".id-card").querySelector(".info-section").querySelector(".detailed-info-section").querySelector(".text-primary").innerHTML=t._options.ownerName,t.container.querySelector(".id-card").querySelector(".info-section").querySelector(".detailed-info-section").querySelector(".text-muted").innerHTML=t._options.date})),this._listSubscription.push(this._modelEvent.subscribe({event:"right-side-bar-clear-top"},function(){t._options.title="",t._options.date="",t._options.ownerName="",t.container.querySelector(".header-section").classList.remove("displaynone"),t.container.querySelector(".header-section").querySelector(".title-section").querySelector("h1").querySelector("span").innerHTML=" ",t.container.querySelector(".id-card").querySelector(".info-section").querySelector(".detailed-info-section").querySelector(".text-primary").innerHTML=" ",t.container.querySelector(".id-card").querySelector(".info-section").querySelector(".detailed-info-section").querySelector(".text-muted").innerHTML=" "})),this._listSubscription.push(this._modelEvent.subscribe({event:"tab-title-change"},function(e){if(e){var i=e.tabTitle,n=t._idCard.getOption("facets");if(UWA.is(n,"array")){n.forEach(function(t){t.id==e.tabId&&(t.text=i)});var s=t._idCard.options;s.facets=n,t._idCard.options=s,t._idCard.render()}}}))},_hide:function(){this.container.classList.add("displaynone"),this.container.querySelector(".sidebar-element").classList.add("displaynone"),this._modelEvent.publish({event:"right-side-bar-hidden"})},_show:function(){this.container.classList.remove("displaynone"),this.container.querySelector(".sidebar-element").classList.remove("displaynone"),this._modelEvent.publish({event:"right-side-bar-visible"})},_toggleDisplay:function(){this.container.classList.contains("displaynone")?this._show():this._hide()},destroy:function(){var e=0,t=this._listSubscription.length;for(e=0;e<t;e++)this._modelEvent.unsubscribe(this._listSubscription[e]);this._parent()}})});