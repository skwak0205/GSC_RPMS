define("DS/XCTInfBusyIndicator/XCTInfBusyIndicator",["UWA/Core","UWA/Class","UWA/Controls/Abstract","DS/CoreEvents/Events","DS/UIKIT/Spinner"],function(i,t,n,s,e){"use strict";return t.singleton({init:function(i){this._parent(i.parent),this._buildSpinner(i.parent),this.actions=[],s.subscribe({event:i.addActionEvent},function(i){this.addAction(i)}.bind(this)),s.subscribe({event:i.updateActionEvent},this.updateAction.bind(this)),s.subscribe({event:i.removeActionEvent},this.removeAction.bind(this))},_buildSpinner:function(t){this.indicator=new i.Element("div",{Class:"busy-indicator-overlay busy-indicator-hidden"}).inject(t),this.container=new i.Element("div",{Class:"busy-indicator-container "}).inject(this.indicator),this.spinner=new e({visible:!0,animate:!0,spin:!0}).inject(this.container),this.messageDiv=new i.Element("div",{Class:"busy-indicator-message"}).inject(this.container)},addAction:function(i){this.actions.push(i),this._updateMessages()},removeAction:function(i){var t=this.actions.findIndex(function(t){return t.id===i});this.actions.splice(t,1),this._updateMessages()},updateAction:function(i){var t=this.actions.findIndex(function(t){return t.id===i.id});this.actions[t]=i,this._updateMessages()},_updateMessages:function(){this.messageDiv.empty(),this.actions.forEach(function(t){new i.Element("div",{html:t.message}).inject(this.messageDiv)},this),this.actions.length?this._showIndicator():this._hideIndicator()},_showIndicator:function(){this.indicator.classList.remove("busy-indicator-hidden")},_hideIndicator:function(){this.indicator.classList.add("busy-indicator-hidden")}})});