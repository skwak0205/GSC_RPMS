define("DS/MPFBankAccountModel/BankAccountModel",["UWA/Core","DS/MPFModel/MPFModel","DS/MPFModel/ModelValidator","i18n!DS/MPFBankAccountModel/assets/nls/BankAccountModel"],function(t,n,a,o){"use strict";var e={BANK_ACCOUNT_ID:"bankAccountId",SHOP_ID:"shopId",COUNTRY:"country",IBAN:"iban",SWIFT:"swift",BSB_NUMBER:"bsbNumber",ABA_NUMBER:"abaNumber",TRANSIT_NUMBER:"transitNumber",ACCOUNT_NUMBER:"accountNumber",BANK_NUMBER:"bankNumber"},r={};r[e.BANK_ACCOUNT_ID]=null,r[e.SHOP_ID]=null,r[e.COUNTRY]=null,r[e.IBAN]=null,r[e.SWIFT]=null,r[e.BSB_NUMBER]=null,r[e.ABA_NUMBER]=null,r[e.TRANSIT_NUMBER]=null,r[e.ACCOUNT_NUMBER]=null,r[e.BANK_NUMBER]=null;var i=n.extend({idAttribute:"bank_account_id",defaults:r,setup:function(t,n){this._parent(t,n),this.constraints=n.constraints||null,this._type="BankAccountModel",this.validator=new a({model:this})},parse:function(t){var n={};return n.bank_account_id=t.bank_account_id,n[e.IBAN]=t.IBAN||null,n[e.SWIFT]=t.BIC||null,n[e.BSB_NUMBER]=t.bsbNumber||null,n[e.ABA_NUMBER]=t.abaNumber||null,n[e.TRANSIT_NUMBER]=t.transitNumber||null,n[e.ACCOUNT_NUMBER]=t.accountNumber||null,n[e.BANK_NUMBER]=t.bankNumber||null,n},validate:function(t){return this.validator.validate(t)}});return i.Fields=Object.freeze(e),i}),define("DS/MPFBankAccountModel/ShopBankAccountDataProxy",["UWA/Core","UWA/Class","DS/MPFDataProxy/DataProxy"],function(t,n,a){"use strict";return a.extend({init:function(t){this._parent(t,"/mdshop/shops/{0}/bank")},url:function(n){var a,o;return o=n.parentResourceId||n.get("shopId"),a=t.String.format(this.resourcePath,o),this.connector.url(a)},request:function(t,n){var a;return"PATCH"!==n.method&&"PUT"!==n.method||(n.method="POST"),n.data&&((a=JSON.parse(n.data)).IBAN=a.iban,a.BIC=a.swift,delete a.iban,delete a.swift,n.data=JSON.stringify(a)),this._parent(t,n)}})}),define("DS/MPFBankAccountModel/BankAccountFactory",["UWA/Core","UWA/Promise","DS/MPFModelFactory/Factory","DS/MPFBankAccountModel/BankAccountModel","DS/MPFBankAccountConstraintsModel/BankAccountConstraintsCollection","DS/MPFBankAccountModel/ShopBankAccountDataProxy","DS/MPFBankAccountConstraintsModel/BankAccountConstraintsDataProxy"],function(t,n,a,o,e,r,i){"use strict";var s=[];return s.BANK_ACCOUNT="bankAccount",a.extend({init:function(t,a){this._parent(t,a),this.bankAccountsConstraints=new e([],{dataProxy:this.getDataProxy("constraints")});var o=n.deferred();this.bankAccountsConstraints.fetch({onComplete:function(){o.resolve()},onFailure:function(){o.reject(new Error("initialization failed"))}}),this.promise=o.promise},whenReady:function(){return this.promise},createModel:function(t,n){return t=t||{},(n=n||{}).constraints=this.bankAccountsConstraints,n.dataProxy=this.getDataProxy(s.BANK_ACCOUNT),this._parent(o,s.BANK_ACCOUNT,t,n)},getConstraints:function(){return this.bankAccountsConstraints},getDataProxy:function(t){var n=null;return t===s.BANK_ACCOUNT?(this.dataProxies.bankAccount=this.dataProxies.bankAccount||new r(this.connector),n=this.dataProxies.bankAccount):"constraints"===t&&(this.dataProxies.constraints=this.dataProxies.constraints||new i(this.connector),n=this.dataProxies.constraints),n}})});