define("DS/DMUBaseCtxCommands/DMUHideShowThumbnailCmd",["DS/ApplicationFrame/Command","DS/DMUBaseExperience/DMUContextManager"],function(e,t){"use strict";return e.extend({init:function(e){e.mode="shared",e.repeatMode=!1,e.isAsynchronous=!0,this._parent(e);var n=this,a=(e.frameWindow||this.getFrameWindow()).getViewer();this.beginExecute=function(){var e=t.giveEventsController({viewer:a});e&&e.fireEvent("onHideShowThumbnailRequested"),n.end()}}})}),define("DS/DMUBaseCtxCommands/DMUPropertiesCmd",["UWA/Core","DS/ApplicationFrame/Command","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager","DS/Windows/Dialog","DS/Controls/Button","i18n!DS/DMUBaseCtxCommands/assets/nls/DMUBaseCtxCommands"],function(e,t,n,a,r,i,l){"use strict";return t.extend({init:function(t){t.mode="shared",this._parent(t);var o=this;this.beginExecute=function(){var t,s=n.getReviewContext({viewer:o.getFrameWindow().getViewer()});if(s){for(var d=a.get(),u=[],m=[],c=0;c<d.length;c++){var g=s.getDMUObjectFromPathElement(d[c].pathElement);g&&(-1===u.indexOf(g.getType())?(0===u.length&&m.push(g),u.push(g.getType())):m.push(g))}if(1===u.length&&m.length>0&&m[0]&&m[0].getPropertiesObject){var C=m[0].getPropertiesObject();if(C){var v=e.createElement("div");C.getPropertiesDisplay(m,v);var h=function(){var e=C.getPropertiesToSet();if(e.length>0){for(var t=0;t<m.length;t++)m[t].setAttributes(e);C.afterSetProperties(m,e);var a=n.giveEventsController({viewer:o.getFrameWindow().getViewer()});a&&a.fireEvent("onSaveRequested")}},f=new i({emphasize:"primary",label:l.propertiesPanel.okLabel,onClick:function(){h(),t.close?t.close():t.destroy()}}),S=new i({label:l.propertiesPanel.applyLabel,onClick:h}),p=new i({label:l.propertiesPanel.closeLabel,onClick:function(){t.close?t.close():t.destroy()}});(t=new r({modalFlag:!0,ensureHeightDefinitionOnHierarchy:!0,title:l.propertiesPanel.title,content:v,immersiveFrame:this.getFrameWindow().getImmersiveFrame(),buttons:{Abort:p,Ok:f,Apply:S}})).addEventListener("close",function(){o.end()})}}}}},endExecute:function(){}})}),define("DS/DMUBaseCtxCommands/DMUContextCmd",["DS/ApplicationFrame/Command","DS/Selection/CSOManager","DS/DMUBaseExperience/DMUContextManager"],function(e,t,n){"use strict";return e.extend({init:function(e){var t=e||{};t.mode="shared",this._parent(t),this._bCmdState=!1,this.getState=function(){return this._bCmdState},this.setState=function(e){this._bCmdState=e}},beginExecute:function(e){this._parent(e);for(var a=t.get(),r=[],i=[],l=n.getReviewContext({viewer:this.getFrameWindow().getViewer()}),o=0;o<a.length;o++){var s=l.getDMUObjectFromPathElement(a[o].pathElement);s&&r.push(s)}switch(this._id){case"DMUNoLeaderHdr":i.push({name:"bHasALeader",value:!1});break;case"DMUArrowLeaderHdr":i.push({name:"bHasALeader",value:!0}),i.push({name:"sLeaderEndType",value:"Arrow"});break;case"DMUBubbleLeaderHdr":i.push({name:"bHasALeader",value:!0}),i.push({name:"sLeaderEndType",value:"Bubble"});break;case"DMUCrossLeaderHdr":i.push({name:"bHasALeader",value:!0}),i.push({name:"sLeaderEndType",value:"Cross"});break;case"DMUSquareLeaderHdr":i.push({name:"bHasALeader",value:!0}),i.push({name:"sLeaderEndType",value:"Square"});break;case"DMUNoEndLeaderHdr":i.push({name:"bHasALeader",value:!0}),i.push({name:"sLeaderEndType",value:"No end"})}i.length>0&&r.forEach(function(e){for(var t=[],n=0;n<i.length;n++)void 0!==e.getAttribute(i[n].name)&&t.push(i[n]);t.length>0&&(e.setAttributes(t),e.refreshNode())}),this.getFrameWindow().getViewer().render(),l&&l.getCurrentSessionMarkup()&&l.getCurrentSessionMarkup().getCurrentSlide()&&l.getCurrentSessionMarkup().getCurrentSlide().fireEvent("onSlidePreviewRefreshRequired",{dmuObject:l.getCurrentSessionMarkup().getCurrentSlide()})}})}),define("DS/DMUBaseCtxCommands/DMUBaseContextCmd",["DS/ApplicationFrame/Command","DS/Visualization/ThreeJS_DS","DS/Selection/CSOManager","DS/DMUBaseExperience/DMUContextManager","DS/DMUBaseExperience/EXPToolsVisualization"],function(e,t,n,a,r){"use strict";return e.extend({init:function(e){var t=e||{};t.mode="shared",this._parent(t)},beginExecute:function(e){this._parent(e);var i,l=this;function o(){var e;l.getFrameWindow().getViewer().render(),(e=a.getReviewContext({viewer:l.getFrameWindow().getViewer()}))&&e.getCurrentSessionMarkup()&&e.getCurrentSessionMarkup().isVisible()&&e.getCurrentSessionMarkup().getCurrentSlide()&&e.getCurrentSessionMarkup().getCurrentSlide().fireEvent("onSlidePreviewRefreshRequired",{dmuObject:e.getCurrentSessionMarkup().getCurrentSlide()})}function s(e,t){if(e&&e.hasAttribute("fFontSize")&&-1===e.getType().indexOf("Picture")){var n=e.getAttribute("iFontSize");n=n?r.convertPixelToModel({sizeInPixels:n,viewer:e._viewer}):e.getAttribute("fFontSize"),"Increase"===t?e.setAttribute("fFontSize",n+1):n-1>0&&e.setAttribute("fFontSize",n-1),e.refreshNode(),o()}}var d,u=n.get(),m=this._id.replace("Marker_","").replace("Measure_","").replace("Section_",""),c=a.getReviewContext({viewer:this.getFrameWindow().getViewer()});for(i=0;i<u.length;i++)if(d=c.getDMUObjectFromPathElement(u[i].pathElement)){if("Marker3DStamp"!==d.getAttribute("sType"))switch(m){case"DMUDefaultStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#000000")},{name:"sFontStyle",value:"normal"},{name:"cFillStyleColor",value:new t.Color("#ffffff")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!0},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#afafaf")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#3d3d3d")}]),d.refreshNode(),o());break;case"DMUMeasureStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#ffffff")},{name:"sFontStyle",value:"normal"},{name:"cFillStyleColor",value:new t.Color("#368ec4")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#3d3d3d")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#3d3d3d")}]),d.refreshNode(),o());break;case"DMUPostitStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#000000")},{name:"sFontStyle",value:"italic"},{name:"cFillStyleColor",value:new t.Color("#fee000")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#ff8a2e")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#ff8a2e")}]),d.refreshNode(),o());break;case"DMUValidateStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#ffffff")},{name:"sFontStyle",value:"normal"},{name:"cFillStyleColor",value:new t.Color("#57b847")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#477738")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#477738")}]),d.refreshNode(),o());break;case"DMUWarningStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#ffffff")},{name:"sFontStyle",value:"normal"},{name:"cFillStyleColor",value:new t.Color("#ff8a2e")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#8f4c00")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#8f4c00")}]),d.refreshNode(),o());break;case"DMUCautionStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#ffffff")},{name:"sFontStyle",value:"bold"},{name:"cFillStyleColor",value:new t.Color("#cc092f")},{name:"bIsFilled",value:!0},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#6d2828")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#6d2828")}]),d.refreshNode(),o());break;case"DMULightStyleHdr":d.hasAttribute("sFontStyle")&&-1===d.getType().indexOf("Picture")&&(d.setAttributes([{name:"fOpacity",value:1},{name:"cFontColor",value:new t.Color("#000000")},{name:"sFontStyle",value:"normal"},{name:"cFillStyleColor",value:new t.Color("#ffffff")},{name:"bIsFilled",value:!1},{name:"bHasBorder",value:!1},{name:"fLineStyleThicknessIndex",value:0},{name:"sLineStylePattern",value:"1"},{name:"cLineStyleColor",value:new t.Color("#3d3d3d")},{name:"fLeaderStyleThicknessIndex",value:0},{name:"sLeaderStylePattern",value:"1"},{name:"cLeaderStyleColor",value:new t.Color("#3d3d3d")}]),d.refreshNode(),o())}switch(m){case"DMUIncreaseFontSizeHdr":s(d,"Increase");break;case"DMUDecreaseFontSizeHdr":s(d,"Decrease")}}this.end()}})}),define("DS/DMUBaseCtxCommands/DMUExpandCollapseAllCmd",["DS/ApplicationFrame/Command","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager"],function(e,t,n){"use strict";return e.extend({init:function(e){e.mode="shared",e.repeatMode=!1,e.isAsynchronous=!0,this._parent(e);var a,r=this,i=(e.frameWindow||this.getFrameWindow()).getViewer();this.beginExecute=function(){var e=n.get();a=t.getEventsController({viewer:i});var l=this.options.arguments[0].Value;if(e.length){for(let t=0;t<e.length;t++){var o=e[t].pathElement.getLastElement().getDMUType();"Checks"===o&&"Expand"===l?a.fireEvent("onExpandRequested","DMUValidationCheck"):"Checks"===o&&"Collapse"===l?a.fireEvent("onCollapseRequested","DMUValidationCheck"):"Highlights"===o&&"Expand"===l?a.fireEvent("onExpandRequested","DMUValidationExposedPresentation"):"Highlights"===o&&"Collapse"===l&&a.fireEvent("onCollapseRequested","DMUValidationExposedPresentation")}r.end()}}}})}),define("DS/DMUBaseCtxCommands/DMUContextPointExtremityTypeCmd",["DS/ApplicationFrame/Command","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager"],function(e,t,n){"use strict";return e.extend({init:function(e){e.mode="shared",this._parent(e);var a=this;a._bCmdState=!1,this.beginExecute=function(){var e=t.getReviewContext({viewer:a.getFrameWindow().getViewer()});if(e){var r=n.get();if(r.length>0){var i="NA",l="NA";switch(this._id.includes("PointTypeHdr")?l="PointType":this._id.includes("ExtremityTypeHdr")&&(l="ExtremityType"),this._id){case"DMUCross"+l+"Hdr":i="Cross";break;case"DMUPlus"+l+"Hdr":i="Plus";break;case"DMUConcentric"+l+"Hdr":i="Concentric";break;case"DMUCoincident"+l+"Hdr":i="Coincident";break;case"DMUFullCircle"+l+"Hdr":i="FullCircle";break;case"DMUFullSquare"+l+"Hdr":i="FullSquare";break;case"DMUStar"+l+"Hdr":i="Star";break;case"DMUDot"+l+"Hdr":i="Dot";break;case"DMUSmallDot"+l+"Hdr":i="SmallDot";break;case"DMUNone"+l+"Hdr":i="None"}for(var o=0;o<r.length;o++){var s=e.getDMUObjectFromPathElement(r[o].pathElement);s&&"NA"!==i&&void 0!==s.getAttribute("s"+l)&&(s.setAttribute("s"+l,i),s.refreshNode())}a.getFrameWindow().getViewer().render()}}a.end()},this.getState=function(){return a._bCmdState},this.setState=function(e){a._bCmdState=e}}})}),define("DS/DMUBaseCtxCommands/DMUHideShowCmd",["DS/ApplicationFrame/Command","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager","DS/DMUBaseUIControllers/DMUSceneDisplayController"],function(e,t,n,a){"use strict";return e.extend({init:function(e){e.mode="shared",this._parent(e);var r=this;this.beginExecute=function(){var e=t.getReviewContext({viewer:r.getFrameWindow().getViewer()}),i=e.getCurrentSessionMarkup();if((!i||i&&!i.getActiveFlag()||i&&i.getActiveFlag()&&i.isReadOnly()||i&&i.getActiveFlag()&&!i.isReadOnly()&&!i.getCurrentSlide())&&(i=e.getTransientReviewBag()),e&&!e.isReadOnly()&&i&&!i.isReadOnly()){var l,o=n.get(),s=[],d=[];for(l=0;l<o.length;l++){var u=e.getDMUObjectFromPathElement(o[l].pathElement);u?s.push(u):d.push(o[l].pathElement)}var m=a.giveDMUSceneDisplayController({context:t.getContextViewer({viewer:r.getFrameWindow().getViewer()})});m&&d&&d.length&&m.toggleVisibility(d);var c,g=[];for(l=0;l<s.length;l++){var C=s[l].getAttribute("bVisible");c=null!=C&&!C,"DMUOccurrenceOverloader"===s[l].getType()?g.push({state:{bVisible:c},target:s[l]}):(s[l].setAttribute("bVisible",c),s[l].refreshNode())}r.getFrameWindow().getViewer().render();var v=t.giveEventsController({viewer:r.getFrameWindow().getViewer()});v&&(g.length&&v.fireEvent("onDMUOverloadPropertiesChanged",{overloads:g}),(s.length||d.length)&&v.fireEvent("onSaveRequested",{})),n.empty()}r.end()}}})}),define("DS/DMUBaseCtxCommands/DMUDeleteCmd",["DS/ApplicationFrame/Command","DS/DMUBaseExperience/DMUContextManager","DS/Selection/CSOManager","DS/DMUControls/DMUWarningPanel","DS/DMUControls/EXPNotify","DS/DMUBaseUIControllers/DMUSlidesController","DS/DMUBaseUIControllers/DMUCommentsController","i18n!DS/DMUBaseCtxCommands/assets/nls/DMUBaseCtxCommands"],function(e,t,n,a,r,i,l,o){"use strict";var s,d;return e.extend({init:function(e){e.mode="shared",this._parent(e)},_sendNotify:function(e,t){d&&(d.destroy(),d=null),d=new r({body:this.getFrameWindow().getUIFrame(),type:e,message:t})},beginExecute:function(e){let r=!0;this._parent(e);var d=this;if(s)return void d.end();var u=n.get(),m=t.getReviewContext({viewer:this.getFrameWindow().getViewer()});if(!m)return void d.end();let c,g,C=[],v=[],h=m.getCurrentSessionMarkup();(!h||h&&!h.getActiveFlag()||h&&h.getActiveFlag()&&h.isReadOnly()||h&&h.getActiveFlag()&&!h.isReadOnly()&&!h.getCurrentSlide())&&(h=m.getTransientReviewBag());let f=l.giveDMUCommentsController({context:d.getFrameWindow()}),S=m.getValidation();if(u.length)for(c=u.length-1;c>=0;c--){var p=m.getDMUObjectFromPathElement(u[c].pathElement);if(!p&&f&&(p=f.getDMUObjectFromPathElement(u[c].pathElement)),p&&!p.isReadOnly()&&v.push(p),u[c].pathElement.getLastElement(!0).getDMUType&&"DMUMarkup"===u[0].pathElement.getLastElement(!0).getDMUType())if(S.getContext()&&S.getContext().getJsonContextTypes()&&"Document"===S.getContext().getJsonContextTypes()[0]&&1===S.getMarkups().length)this._sendNotify("warning",o.DeleteLastMarkupWarning),r=!1;else if(S){let e=u[c].pathElement;S.getMarkups().forEach(t=>{let n=t.getRepRef();n.getMarkupContent()&&n.getMarkupContent().getNode()===e.getLastElement(!0)&&C.push(t)})}!u[c].pathElement.getLastElement(!0).getDMUType||"DMUValidationCheck"!==u[c].pathElement.getLastElement(!0).getDMUType()&&"DMUValidationExposedPresentation"!==u[c].pathElement.getLastElement(!0).getDMUType()||u[c].pathElement.getLastElement(!0).getOwner().isEditable()&&C.push(u[c].pathElement.getLastElement(!0).getOwner())}if(C.length||v.length){var D=function(e){if("boolean"==typeof e&&localStorage.setItem("DMUDeleteWarningPanelCheckboxFlag",e),C.length)C[0].fireEvent("onValidationObjectDeleted",{dmuObject:C});else{var t,n,a,r=!1;for(c=v.length-1;c>=0;c--)if(t=v[c],"DMUMarkup"===(g=t.getParent()).getType()){var l=t.getType();"DMUFormat"===l?(r=r||h===g,1===v.length&&g.getCurrentSlide()===t&&(a=g.getFormats(),h===g&&(n=a.indexOf(t))),g.removeFormat(t)):"DMUSlide"===l?(r=r||h===g,1===v.length&&g.getCurrentSlide()===t&&(a=g.getSlides(),h===g&&(n=a.indexOf(t))),g.removeSlide(t)):f&&"DMUComment"===l?f.removeComment(t,e||t.hasAlertFlag()):g.getCurrentSlide().removeDMUObject(t)}else g.removeDMUObjects&&g.removeDMUObjects([t]);if(r){var o;if(void 0===n)o=m.getUIManager().getFormatEditionModeFlag()?g.getFormats()[0]:g.getSlides()[0];else n<0?n=0:0===n?n=1:n===a.length-1?n=a.length-2:n+=1,o=a[n];var s=i.giveDMUSlidesController({context:d.getFrameWindow()});s&&s.setActiveSlide(o)}}};if(-1===this._id.indexOf("Quick")){var M=v.filter(function(e){if("DMUComment"===e.getType()&&!e.isReply()&&!e.hasAlertFlag()){var t=e.getNode().getParents()[0],n=t?t.getDMUType():null;return n&&"DMUCommentPositioned"!==n&&"DMUCommentHighlight"!==n}return!1}).length>0,y=localStorage.getItem("DMUDeleteWarningPanelCheckboxFlag");r&&(s=new a({title:o.deleteWarningPanel.title,message:o.deleteWarningPanel.message,checkboxMessage:M?o.deleteWarningPanel.checkboxMessage:null,checked:y&&"true"===y,frmWindow:this.getFrameWindow(),callbacks:{onValidateCB:function(e){D(e),d.end(),s=null},onCancelCB:function(){d.end(),s=null},onCloseCB:function(){d.end(),s=null}}}))}else D("true"===localStorage.getItem("DMUDeleteWarningPanelCheckboxFlag")),this.end();this.getFrameWindow().getContextualUIManager().getContextualBar().hide()}else this.end()},_destroy:function(){s&&s.destroy(),this._parent()}})}),define("DS/DMUBaseCtxCommands/DMUGraphicPropertiesPanelCmd",["DS/ApplicationFrame/Command","DS/PADUtils/PADContext","DS/DMUBaseUIControllers/DMUGraphicPropertiesCtr"],function(e,t,n){"use strict";return e.extend({init:function(e){var a=e||{};a.mode="shared",this._parent(a);var r=this,i=t.get();this.beginExecute=function(){var e=n.getDMUGraphicPropsController({context:i});e&&e.setActiveState(!0),r.end()};var l=this._destroy;this._destroy=function(){i&&n.unreferenceDMUGraphicPropsController({context:i}),l.call(r),r=i=null}}})});