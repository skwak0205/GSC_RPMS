define("DS/ENOXWizard/js/ENOXWizard",["DS/Core/ModelEvents","DS/ResizeSensor/js/ResizeSensor","i18n!DS/ENOXWizard/assets/nls/ENOXWizard","text!DS/ENOXWizard/html/ENOXWizard.html","css!DS/ENOXWizard/css/ENOXWizard.css","css!DS/UIKIT/UIKIT.css"],function(e,t,i,n,s,r){"use strict";var o=function(e){this.isIE=!!document.documentMode,this._init(e)},a=function(e){e&&(this._modelEventObj=e,this._tokens=[])};return a.prototype.subscribe=function(e,t,i){t&&i&&this._modelEventObj&&this._tokens.push(this._modelEventObj.subscribe(t,i))},a.prototype.cleanup=function(e){if(this._tokens&&this._tokens.length>0){var t=this;console.log("[ENOXWizard:LocalEvtManager] Performing event cleanup for: "+e),this._tokens.forEach(function(e){t._modelEventObj.unsubscribe(e)})}},o.prototype._init=function(t){this._options=t?UWA.clone(t,!1):{},this._modelEvents=t.modelEvents?t.modelEvents:new e,this._myEventManager=new a(this._modelEvents),this._items=t.items?t.items:[],this._currentSelection=t.currentSelection?t.currentSelection:this._items[0].id,this._initDivs(),this._addItems(this._items),this._subscribeToEvents()},o.prototype._initDivs=function(){this._container=document.createElement("div"),this._container.innerHTML=n,this._wizard_container=this._container.querySelector(".create-view-navigator-container"),this._rope_container=this._container.querySelector(".ariadne-container"),this._rope_place_holder=this._container.querySelector(".ariadne-rope-placeholder"),this._rope=this._container.querySelector(".ariadne-rope"),this._wizard_view_container=this._container.querySelector(".create-view-navigator")},o.prototype._subscribeToEvents=function(){var e=this;this._myEventManager.subscribe(this._modelEvents,{event:"enox-wizard-remove-item"},function(t){e._removeItem(t)}),this._myEventManager.subscribe(this._modelEvents,{event:"enox-wizard-add-item"},function(t){e._addItem(t)}),this._myEventManager.subscribe(this._modelEvents,{event:"enox-wizard-add-list-item"},function(t){e._addItems(t)}),this._myEventManager.subscribe(this._modelEvents,{event:"enox-wizard-select-item"},function(t){e._removeAllSelection(),e._setCurrentSelection(t)}),this._myEventManager.subscribe(this._modelEvents,{event:"enox-wizard-remove-all-selection"},function(t){e._removeAllSelection()}),this._myEventManager.subscribe(this._modelEvents,{event:"enox-wizard-change-text-item"},function(t){e._changeTextItem(t)})},o.prototype._addItems=function(e){for(var t=0;t<e.length;t++)this._addItem(e[t])},o.prototype._addItem=function(e){var t=this,i=document.createElement("a");i.setAttribute("id",e.id),i.setAttribute("class","nav-item"),i.addEventListener("click",function(){t._removeAllSelection(),t._setCurrentSelection(this.id),t._modelEvents.publish({event:"enox-wizard-item-click",data:this.id}),console.log("Publish enox-wizard-item-click : "+this.id)});var n=document.createElement("div");n.setAttribute("class","nav-item-active-indicator");var s=document.createElement("span");s.setAttribute("class","fonticon fonticon-expand-down"),n.appendChild(s);var r=document.createElement("div");r.setAttribute("class","nav-item-circle");var o=document.createElement("span");if(e.icon&&o.setAttribute("class",e.icon),e.title&&(o.title=e.title),e.image){var a=document.createElement("img");a.setAttribute("src",e.image),o.appendChild(a)}r.appendChild(o);var c=document.createElement("div");c.setAttribute("class","nav-item-label"),c.innerHTML=e.name,i.appendChild(n),i.appendChild(r),i.appendChild(c),this._wizard_view_container.appendChild(i)},o.prototype._changeTextItem=function(e){e.id&&e.value&&(document.getElementById(e.id).getElementsByClassName("nav-item-label")[0].innerHTML=e.value);this._resize()},o.prototype._removeItem=function(e){var t=document.getElementById(e);this._wizard_view_container.removeChild(t)},o.prototype._setCurrentSelection=function(e){if(this._currentSelection=e,this._currentSelection){var t=document.getElementById(this._currentSelection);if(t){t.classList.contains("active")||t.classList.contains("filled")||(this.isIE?t.className+=" active filled":t.classList+=" active filled"),this._manageRope(this._currentSelection);for(var i=0;i<this._wizard_view_container.childNodes.length;i++){var n=this._wizard_view_container.childNodes[i];if(n.id===this._currentSelection)break;n.hasChildNodes()&&n.classList.contains("nav-item")&&(n.className+=" filled")}}}},o.prototype._removeAllSelection=function(){for(var e=0;e<this._wizard_view_container.children.length;e++)this._wizard_view_container.children[e].classList.remove("active"),this._wizard_view_container.children[e].classList.remove("filled"),this._rope.style.width="0px"},o.prototype._manageRope=function(e){var t;if(e){var i=document.getElementById(this._currentSelection);if(i){var n=i.children[1].children[0].getBoundingClientRect();this._rope.style.width=n.left+"px"}else t=Math.ceil(100/this._items.length),this._rope.style.width=t+"%"}},o.prototype._find=function(e,t){var i;return e.forEach(function(e){e.id!==t||(i=e)}),i||(i=e[0]),i},o.prototype._resize=function(){this._manageRope(this._currentSelection)},o.prototype.inject=function(e){e.appendChild(this._container),this._setCurrentSelection(this._currentSelection)},o.prototype.destroy=function(){this._myEventManager&&(this._myEventManager.cleanup("ENOXWizard"),this._myEventManager=null)},o.prototype.attachResizeSensor=function(){var e=this;this.resizeSensor=new t(this._container,function(){e._container.offsetWidth>0&&e._container.offsetWidth!==e._currentWidth&&(e._resize(),e._currentWidth=e._container.offsetWidth)})},o});