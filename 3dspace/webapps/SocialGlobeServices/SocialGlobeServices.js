define("DS/SocialGlobeServices/i3DDashboard/i3DDriveServices",["UWA/Core","UWA/Promise","DS/WAFData/WAFData","DS/i3DXCompassServices/i3DXCompassServices"],function(e,n,t,r){"use strict";const o="/resources/3ddrive/v1/bos/",i="/fileurl",a="/ticket",u="/contents";function s(e,r,o){var i=new FormData;i.append("__fcs__jobTicket",e.ticket),i.append("file-name",r.name),i.append("file-title",r.name),i.append("file-description",""),i.append("file",r),i.append("__fcs__nohtml",!0);var a=e.actionurl;return a=c(a,o),new n(function(e,n){var r={method:"POST",type:"form-data",data:i,onComplete:e,onFailure:n};t.authenticatedRequest(a,r)})}function c(e,n){return-1===e.indexOf("?")?e+"?tenant="+n:e+"&tenant="+n}function l(r,i){return function(e,r){var i=e+o+a.replace("/","");return i=c(i,r),new n(function(e,n){var r={method:"GET",type:"json",onComplete:function(n,t){e({data:n,csrf:t["x-ds-csrftoken"]})},onFailure:n};t.authenticatedRequest(i,r)})}(r,i).then(function(t){var r=t.data;return e.is(r,"object")?e.is(r.ticket,"string")&&""!==r.ticket?e.is(r.jobticket,"string")&&""!==r.jobticket?e.is(r.actionurl,"string")&&""!==r.actionurl?n.resolve(t):n.reject(new Error("Invalid value for attribute 'actionurl' found in response")):n.reject(new Error("Invalid value for attribute 'jobticket' found in response")):n.reject(new Error("Invalid value for attribute 'ticket' found in response")):n.reject(new Error("Invalid response type (should be an object)"))})}function v(t,r,o,i){return s(t,new File([r],o),i).then(function(t){return e.is(t,"string")?n.resolve(t):n.reject(new Error("Invalid response type (should be an string)"))})}function d(r,i,a,s,l,v){return function(e,r,i,a,s,l){var v=e+o+a+u;v=c(v,s);var d={type:"DriveFile",title:i,receipt:r.trim()};return new n(function(e,n){var r={method:"POST",type:"json",headers:{"Content-Type":"application/json;charset=UTF-8",Accept:"application/json,text/javascript","X-DS-CSRFTOKEN":l},data:JSON.stringify(d),onComplete:function(n){e({data:n,csrf:l})},onFailure:function(e,t,r){n({error:e,data:t,headers:r})}};t.authenticatedRequest(v,r)})}(r,i,a,s,l,v).then(function(t){return e.is(t,"object")?n.resolve(t):n.reject(new Error("Invalid response type (should be an object)"))})}var f={url3DDrive:"",i3DXplatformServices:{},addTenantId:c,retrieve3DDriveUrl:function(t){return function(e){return new n(function(n,t){r.getServiceUrl({serviceName:"3DDrive",platformId:e,onComplete:n,onFailure:t})})}(t).then(function(t){return e.is(t,"string")&&""!==t?(f.url3DDrive=t,f.i3DXplatformServices["3DDrive"]=t,n.resolve(f.url3DDrive)):n.reject(new Error("Unable to retrieve 3DDrive service URL."))})},retrieveDocumentTypes:function(r,i,a){return function(e,r,i){var a=e+o+r;return a=c(a,i),new n(function(e,n){var r={method:"GET",type:"json",onComplete:e,onFailure:n};t.authenticatedRequest(a,r)})}(r,i,a).then(function(t){return e.is(t,"object")?e.is(t.id,"string")&&""!==t.id?e.is(t.extension,"string")&&""!==t.extension?n.resolve({extension:t.extension,driveUrl:r}):n.reject(new Error("Invalid value for attribute 'extension' found in response")):n.reject(new Error("Invalid value for attribute 'id' found in response")):n.reject(new Error("Invalid response type (should be an object)"))})},retrieveDocumentURL:function(r,a,u){return function(e,r,a){var u=e+o+r+i;return u=c(u,a),new n(function(e,n){var r={method:"GET",type:"json",onComplete:e,onFailure:n};t.authenticatedRequest(u,r)})}(r,a,u).then(function(t){return e.is(t,"object")?e.is(t.url,"string")&&""!==t.url?e.is(t.extension,"string")&&""!==t.extension?n.resolve(t.url):n.reject(new Error("Invalid value for attribute 'extension' found in response")):n.reject(new Error("Invalid value for attribute 'url' found in response")):n.reject(new Error("Invalid response type (should be an object)"))})},retrieveDocumentContent:function(e,r){var o=e;return o=c(o,r),new n(function(e,n){var r={method:"GET",type:"text",onComplete:e,onFailure:n};t.authenticatedRequest(o,r)})},retrieveDriveTicket:l,uploadFileInFCS:function(t,r,o){return s(t,r,o).then(function(t){return e.is(t,"string")?n.resolve(t):n.reject(new Error("Invalid response type (should be an string)"))})},uploadContentInFCS:v,createFileIn3DDrive:d,getItemsListIn3DDriveFolder:function(r,i,a){return function(e,r,i){var a=e+o+r+u;return a=c(a,i),new n(function(e,n){var r={method:"GET",type:"json",onComplete:e,onFailure:n};t.authenticatedRequest(a,r)})}(r,i,a).then(function(t){return e.is(t,"object")?n.resolve(t):n.reject(new Error("Invalid response type (should be an object)"))})},deleteFileFromDrive:function(r,i,a,u){return function(e,r,i,a){var u=e+o+r;return u=c(u,i),new n(function(e,n){var r={method:"DELETE",type:"json",headers:{"X-DS-CSRFTOKEN":a},onComplete:e,onFailure:n};t.authenticatedRequest(u,r)})}(r,i,a,u).then(function(t){return e.is(t,"object")?n.resolve(t):n.reject(new Error("Invalid response type (should be an object)"))})},uploadFileInDriveCompleteProcess:function(e,n,t,r,o){var i;return l(e,o).then(function(e){var r=e.data;return i=e.csrf,v(r,n,t,o)}).then(function(n){return d(e,n,t,r,o,i)})}};return f}),define("DS/SocialGlobeServices/Passport/iPassportServices",["UWA/Core","UWA/Promise","DS/WAFData/WAFData"],function(e,n,t){"use strict";function r(e){return new n(function(n,r){var o=e+"/3DPassport/login?action=get_auth_params";t.authenticatedRequest(o,{method:"GET",type:"json",onComplete:n,onFailure:r})})}function o(e,r,o,i,a){return new n(function(n,u){var s=e+"/3DPassport/login";a&&(s+="?service="+encodeURIComponent(a));var c={lt:encodeURIComponent(i),username:encodeURIComponent(r),password:encodeURIComponent(o)};t.authenticatedRequest(s,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:c,onComplete:n,onFailure:u})})}return{getAuthentificationParameters:r,postLoginForm:o,authenticateToPassport:function(t,i,a){return r(t).then(function(t){var r=t.lt;return e.is(r,"string")&&""!==r?n.resolve(r):n.reject(new Error("Invalid lt"))}).then(function(e){return o(t,i,a,e)})},authenticateToService:function(t,i,a,u){var s=this;return r(t).then(function(t){var r=t.lt;return e.is(r,"string")&&""!==r?n.resolve(r):n.reject(new Error("Invalid lt"))}).then(function(e){return s.lt=e,o(t,i,a,e)}).then(function(){return o(t,i,a,s.lt,u)})}}});