define("DS/ENOGantt/View/Toolbar",["UWA/Class","DS/Foundation/FoundationData","DS/ENOGantt/Ven/Ext","DS/ENOGantt/GanttUtil","DS/ENOGantt/GanttConstants","DS/ENOGantt/Controller/MainController"],function(e,t,n,r,o,a,l){return e.extend({init:function(e){n.define("DS.ENOGantt.View.Toolbar",{extend:"Ext.Toolbar",xtype:"dpmgantttbar",id:"dpmgantttbar",cls:"my-toolbar",enableOverflow:!0,layout:{align:"stretchmax",overflowHandler:"menu"},initComponent:function(){n.apply(this,{defaults:{scale:"medium"}}),this.callParent(arguments)},items:this.getToolBarActionList()})},getToolBarActionList:function(){n.create("Ext.data.Store",{fields:["id","name"],data:App.Nls.durationStore});var e=[],t=enoviaServer.computeUrl("/common/images/"),o={id:"tBarActionZoomToFit",tooltip:App.Nls["emxProgramCentral.Gantt.ZoomFit"],overflowText:App.Nls["emxProgramCentral.Gantt.ZoomFit"],icon:t+"iconActionFitToPage.png",iconCls:"tBarIcon",enableToggle:!0,reference:"zoomToFit"},a={id:"tBarActionZoomIn",tooltip:App.Nls["emxProgramCentral.Gantt.ZoomIn"],icon:t+"iconActionZoomIn.png",iconCls:"tBarIcon",reference:"zoomIn",overflowText:App.Nls["emxProgramCentral.Gantt.ZoomIn"]},l={id:"tBarActionZoomOut",tooltip:App.Nls["emxProgramCentral.Gantt.ZoomOut"],icon:t+"iconActionZoomOut.png",iconCls:"tBarIcon",reference:"zoomOut",overflowText:App.Nls["emxProgramCentral.Gantt.ZoomOut"]},i=(App.Nls["emxProgramCentral.Gantt.ExpandAll"],App.Nls["emxProgramCentral.Gantt.ExpandAll"],n.create("Ext.button.Split",{triggerAction:"all",id:"tBarActionExpandNLevels",tooltip:App.Nls["emxProgramCentral.Gantt.ExpandNLevel"],icon:t+"iconActionSetNodeExpansionLevel.png",iconCls:"tBarIcon",showSeparator:!1,cls:"x-btn-default-toolbar-medium",arrowCls:"",menu:{items:r.getSelectiveItemArray(5,"expandLevel_",this.expandNLevelHandler,this.expandAllLevelHandler)},handler:function(){this.showMenu()},reference:"expandnLevel",overflowText:App.Nls["emxProgramCentral.Gantt.ExpandNLevel"]}),{id:"tBarActionCriticalPath",tooltip:App.Nls["emxProgramCentral.Gantt.HighlightCriticalPath"],icon:t+"iconActionHighlightCriticalPath.png",iconCls:"tBarIcon",enableToggle:!0,disabled:App.Infra.ReadOnly,reference:"highlightCrit",overflowText:App.Nls["emxProgramCentral.Gantt.HighlightCriticalPath"]});n.define("DS.ENOGantt.View.Toolbar.StatusDatePicker",{extend:"Ext.picker.Date",disableProgressLine:function(){var e=n.ComponentQuery.query("panel#dpmprojectgantt")[0];progressLine=e.plugins[4],progressLine.disable()},initComponent:function(){me=this,n.apply(this,{listeners:{afterrender:function(){var e=this,t=n.ComponentQuery.query("panel#dpmprojectgantt")[0];if(n.isEmpty(e.clearBtn)){e.clearBtn=new n.Button({text:App.Nls["emxProgramCentral.Common.Clear"],id:"btnClearAction",handler:e.disableProgressLine,ownerCt:e}),e.clearBtn.render(e.todayBtn.container);var r=t.taskStore.getProjectStartDate();e.setMinDate(r)}}}}),this.callParent(arguments)},handler:function(e){var t=n.ComponentQuery.query("panel#dpmprojectgantt")[0],r=e.getValue(),o=t.getTimeAxis().getEnd();r>=o&&(r=o-1),progressLine=t.plugins[4],progressLine.setStatusDate(r),progressLine.enable()}});var p=n.create("DS.ENOGantt.View.Toolbar.StatusDatePicker",{id:"tBarProgressLineStatusDatePicker",reference:"statusDatePicker"}),s={id:"tBarActionProgressLine",tooltip:App.Nls["emxProgramCentral.Gantt.ProgressLine.Action.ProgressLine"],icon:t+"iconActionProgressLine.png",iconCls:"tBarIcon",hidden:App.Infra.Views.VIEW_WBS!==App.Infra.ViewId,overflowText:App.Nls["emxProgramCentral.Gantt.ProgressLine.Action.ProgressLine"],arrowCls:"",menu:{items:[p]}},c={id:"tBarPrint",tooltip:App.Nls["emxProgramCentral.Gantt.Print"],icon:t+"iconActionPrint.png",iconCls:"tBarIcon",reference:"print",overflowText:App.Nls["emxProgramCentral.Gantt.Print"]},m={enableToggle:!0,id:"View",icon:t+"I_ShowPlanActual32.png",iconCls:"tBarIcon",hidden:App.Infra.HideView,reference:"viewDropDown",overflowText:App.Nls.viewStore[2].name,tooltip:App.Nls.viewStore[2].name},d={enableToggle:!0,id:"tBarActionRollUpTask",tooltip:App.Nls["emxProgramCentral.Gantt.Toolbar.showRollUpTasks"],overflowText:App.Nls["emxProgramCentral.Gantt.Toolbar.showRollUpTasks"],icon:t+"I_ShowRollupTask32.png",iconCls:"tBarIcon",reference:"showRollUpTask"},g={id:"tBarActionRefine",tooltip:App.Nls["emxProgramCentral.gantt.Refinements"],icon:t+"iconActionFilter.png",iconCls:"tBarIcon",reference:"refinement",overflowText:App.Nls["emxProgramCentral.gantt.Refinements"]},x={id:"tBarganttConfiguration",tooltip:App.Nls["emxProgramCentral.GanttConfig.Configurations"],icon:t+"I_Configurations.png",disabled:App.Infra.ReadOnly,iconCls:"tBarIcon",reference:"ganttConfiguration",overflowText:App.Nls["emxProgramCentral.GanttConfig.Configurations"]},A=(App.Nls["emxProgramCentral.Common.AddTask"],App.Infra.ReadOnly,App.Nls["emxProgramCentral.Common.AddTask"],{id:"tBarActionSaveAll",xtype:"button",text:App.Nls["emxProgramCentral.Gantt.Save"],enableKeyEvents:!0,style:"border-color:#5FA0BE;background-color:#5FA0BE;color:#FFFFFF !important;font-size:14px;border-radius: 5px;border-width:1px;border-style:solid;box-shadow: inset 0px 2px 0px rgba(255,255,255,.3), inset 0px 0px 8px rgba(255,255,255,.5);",reference:"SaveAll",overflowText:App.Nls["emxProgramCentral.Gantt.Save"]}),C={id:"tBarActionUndo",tooltip:App.Nls["emxProgramCentral.Gantt.Undo"],overflowText:App.Nls["emxProgramCentral.Gantt.Undo"],icon:t+"I_Undo32.png",iconCls:"tBarIcon",reference:"undo"},f={id:"tBarActionRedo",tooltip:App.Nls["emxProgramCentral.Gantt.Redo"],overflowText:App.Nls["emxProgramCentral.Gantt.Redo"],icon:t+"I_Redo32.png",iconCls:"tBarIcon",reference:"redo"},u={id:"tBarActionResetAll",xtype:"button",text:App.Nls["emxProgramCentral.Gantt.DependencyEditor.Cancel"],style:"border-color:#000000 !important;background-color:#f1f1f1 !important;color:#000000 !important;",cls:"cancel-button-text",reference:"resetAll",overflowText:App.Nls["emxProgramCentral.Gantt.DependencyEditor.Cancel"]},h={xtype:"textfield",id:"findTextField",width:175,height:30,enableKeyEvents:!0,margin:0,border:0,emptyText:App.Nls["emxProgramCentral.Common.Find"],fieldStyle:"border-left:0;border-right:0;border-bottom:0;background:#fff url("+enoviaServer.computeUrl("/webapps/Bryntum/resources/images/search.png")+") no-repeat 5px center;padding:0px;padding-left:25px;height:100%;",reference:"find",triggers:{clear:{cls:"x-fa fa-times findTextField-trigger-clear",hidden:!0,tooltip:App.Nls["emxProgramCentral.Common.Clear"],scope:"controller",handler:"clear"},prev:{cls:"x-fa fa-chevron-up findTextField-trigger-prev",scope:"this",tooltip:App.Nls["emxProgramCentral.Gantt.Toolbar.FindPrevious"],scope:"controller",handler:"previous"},next:{cls:"x-fa fa-chevron-down findTextField-trigger-next",scope:"controller",tooltip:App.Nls["emxProgramCentral.Gantt.Toolbar.FindNext"],handler:"next"}}},P={id:"tBarActionCollapseChart",icon:t+"I_HideChart_32.png",iconCls:"tBarIcon",tooltip:App.Nls["emxProgramCentral.Gantt.Toolbar.CollapseChart"],reference:"collapseGanttChart",overflowText:App.Nls["emxProgramCentral.Gantt.Toolbar.CollapseChart"],enableToggle:!0},T={id:"tBarActionCalculateFloatAndCriticalPath",tooltip:App.Nls["emxProgramCentral.Gantt.CalculateFloatAndCriticalPath"],icon:t+"I_OverallCriticalPath32.png",iconCls:"tBarIcon",disabled:App.Infra.ReadOnly,enableToggle:!0,reference:"calculateFloatData",overflowText:App.Nls["emxProgramCentral.Gantt.CalculateFloatAndCriticalPath"]},N={id:"tBarActionCalculateForecastValues",tooltip:App.Nls["emxProgramCentral.Gantt.CalculateForecastValues"],hidden:App.Infra.HideView||App.Infra.isCustomizedEnvironment,disabled:App.Infra.ReadOnly,icon:t+"I_CalculateForecast_32.png",iconCls:"tBarIcon",enableToggle:!0,reference:"calculateForecastValues",overflowText:App.Nls["emxProgramCentral.Gantt.CalculateForecastValues"]},I={id:"tBarActionPromoteSuccessor",tooltip:App.Nls["emxProgramCentral.Gantt.PromoteSuccessor"],hidden:"true"==App.Infra.projectDataElements.checkIfPromoteReadyTaskCommandVisible||!("TRUE"==App.Infra.projectDataElements.kindOfProjectSpace&&("Active"==App.Infra.projectDataElements.state||"Assign"==App.Infra.projectDataElements.state)&&"TRUE"==App.Infra.projectDataElements.modifyAccess),icon:t+"iconActionMultipleTaskApproval.png",iconCls:"tBarIcon",enableToggle:!0,reference:"promoteSuccessor",overflowText:App.Nls["emxProgramCentral.Gantt.PromoteSuccessor"]};App.Nls["emxProgramCentral.TaskIndentaion.LeftIndent"],App.Infra.ReadOnly,App.Nls["emxProgramCentral.TaskIndentaion.LeftIndent"],App.Nls["emxProgramCentral.TaskIndentaion.RightIndent"],App.Infra.ReadOnly,App.Nls["emxProgramCentral.TaskIndentaion.RightIndent"];return App.Infra.ViewId==App.Infra.Views.VIEW_STATUS_REPORT?(e.push("->"),e.push(m)):(e.push(P),e.push(o),e.push(a),e.push(l),e.push(i),e.push(s),e.push(d),e.push(m),e.push({xtype:"tbseparator"}),e.push(T),e.push(N),e.push(I),e.push({xtype:"tbseparator"}),e.push(x),e.push(c),e.push(g),e.push(h),e.push({xtype:"tbseparator"}),e.push("->"),e.push(C),e.push(f),e.push(A),e.push(u)),e}})});