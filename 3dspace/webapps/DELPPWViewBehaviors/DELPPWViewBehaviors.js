define("DS/DELPPWViewBehaviors/UXFactoryBehavior/FormEventHelper",["UWA/Core"],function(e){"use strict";return function(t,n,o,i,r,a){var s,l=["<",">","<=",">=","===","==","!=","!==","AND","OR","&&","||","IN","MATCH"],c=function(e){return l.indexOf(e)>-1},u=function(e){return e.length>=2&&"["===e[0]&&e[e.length-2]},d=function(t){var n=!1;return e.is(s)&&void 0!==s[t]?n=!0:"EMPTY_STRING"===t?n=!0:"true"===String(t).toLowerCase()||"false"===String(t).toLowerCase()?n=!0:"null"===String(t).toLowerCase()||"undefined"===String(t).toLowerCase()?n=!0:isNaN(Number(t))?u(t)?n=!0:(t>="a"&&t<="z"||t>="A"&&t<="Z")&&(n=!0):n=!0,n},g=function(e){var t=-1;return"!"===e?t=4:"AND"===e||"&&"===e?t=3:"OR"===e||"||"===e?t=2:l.indexOf(e)>-1&&(t=1),t},f=function t(n){var o=n;return e.is(s)&&void 0!==s[n]?o=t(s[n]):"EMPTY_STRING"===n||""===n?o="":"true"===String(n).toLowerCase()?o=!0:"false"===String(n).toLowerCase()?o=!1:"null"===String(n).toLowerCase()?o=null:"undefined"===String(n).toLowerCase()?o=void 0:isNaN(Number(n))?u(n)&&(o=n.substring(1,n.length-1).split(",").map(function(e){return t(e)})):o=Number(n),o},p=function(e){var t,n,o,i,r=[];return!!Array.isArray(e)&&(e.forEach(function(e){c(e)?(t=r[r.length-1],r.pop(),n=r[r.length-1],r.pop(),o=function(e,t,n){var o=!1;switch(t){case"<":o=e<n;break;case"<=":o=e<=n;break;case">":o=e>n;break;case">=":o=e>=n;break;case"==":o=e==n;break;case"===":o=e===n;break;case"!=":o=e!=n;break;case"!==":o=e!==n;break;case"AND":case"&&":o=e&&n;break;case"OR":case"||":o=e||n;break;case"IN":o=n.indexOf(e)>-1;break;case"MATCH":o=new RegExp(n).test(e)}return o?"TRUE":"FALSE"}(n,e,t),o=f(o),r.push(o)):d(e)&&(i=f(e),r.push(i))}),1===r.length&&r.pop())},h=function(e){var t=function(e){var t=e.split(" "),n=[],o=[];for(t.forEach(function(e){if(c(e)){for(;0!==n.length&&g(e)<=g(n[n.length-1]);)o.push(n[n.length-1]),n.pop();n.push(e)}else if(d(e))o.push(e);else if("("===e)n.push(e);else if(")"===e){for(;"("!==n[n.length-1];)o.push(n[n.length-1]),n.pop();n.pop()}});0!==n.length;)o.push(n[n.length-1]),n.pop();return o}(e);return p(t)};return{setFieldsValue:function(e){s=e},isConditionMatch:function(e){return h(e)}}}}),define("DS/DELPPWViewBehaviors/SearchBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["SearchPlugin","ResourcePlugin","UXComponentsPlugin","WebServicePlugin"],creator:function(t,n,o,i,r,a){var s,l,c,u,d,g,f;return s=function(t,a){var s,f,p,h=r.getComponent("Button"),m=r.getComponent("LineEditor"),I=r.getComponent("Element"),v=e.is(a.title)?a.title:i.getNLSValue("Dialog.InsertInstanceCmd.Title"),y=e.is(a.placeholder)?a.placeholder:i.getNLSValue("Search.InsertInstanceCmd.Placeholder"),b=e.is(a.searchTitle)?a.searchTitle:i.getNLSValue("Search.InsertInstanceCmd.Title"),C=i.getNLSValue("InsertInstanceCmd.INSERT"),P=new I("div",{class:"search-dialog-container"}),D=new I("div",{class:"search-tree-container"}).inject(P);e.is(u)?((f=new m({placeholder:y,autoCommitFlag:!0}).inject(D)).addEventListener("change",function(){f.value.length>0?l.buttons.Ok.disabled=!1:l.buttons.Ok.disabled=!0,e.is(l.buttons.Apply)&&(l.buttons.Apply.disabled=!0)}),"duplicate"===a.command?(C=i.getNLSValue("InsertInstanceCmd.INSERTAsCOPY"),v=i.getNLSValue("Dialog.InsertAsCopyCmd.Title"),p={Cancel:new h({onClick:function(){d()}}),Ok:new h({label:C,visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){g([s],t)}})},f.disabled=!0,f.placeholder=i.getNLSValue("Search.InsertInstanceAsCopyCmd.Placeholder")):p={Cancel:new h({onClick:function(){d()}}),Ok:new h({label:i.getNLSValue("InsertInstanceCmd.SEARCH"),icon:"search",visibleFlag:!0,disabled:!0,emphasize:"primary",onClick:function(){c(),d()}}),Apply:new h({label:C,visibleFlag:!0,disabled:!0,onClick:function(){var e=[];e.id=s,t([e]),d()}})},l=u.create("Dialog",{domId:"search-dialog-container",identifier:"search-dialog-container",title:v,modalFlag:!0,resizableFlag:!0,visibleFlag:!1,closable:!0,content:P,height:100,width:300,buttons:p}),o.subscribeToSelectEvent(function(t){var n,o,i,r,c=t.data;e.is(c)&&Array.isArray(c.paths)&&c.paths.length>0&&c.paths[0].length>0&&(n=c.paths[0][0],e.is(c.attributes)&&(o=c.attributes[n],e.is(o)&&(i=o.type,r=o.label,s="",f.value="",-1!==a.types.indexOf(i)?(s=n,f.value=r,"duplicate"===a.command?l.buttons.Ok.disabled=!1:l.buttons.Apply.disabled=!1):"duplicate"===a.command&&(l.buttons.Ok.disabled=!0))))}),l.close=function(){d()}):n.debug("uxFactoryBehavior is not available."),c=function(){o.activate(b,t,e.is(a.types)?a.types:null,[f.value])}},d=function(){e.is(l)&&(l.destroy(),l=void 0)},g=function(t,o){var r,s,l,c={},u={};l={selectedRefPIDs:t,oneDelmiaAggregationMode:n.getPreferenceValue("oneDelmiaAggregationMode")},r=function(t,o){var r;e.is(o)&&e.is(o.message,"string")?((r=i.getNLSValue(o.message,null,"Error","Title"))==="Error."+o.message+".Title"&&(r=i.getNLSValue(u.replaceType,null,"Error","Title"),n.debug(o.message)),f(c,r,null,u,void 0)):f(c,i.getNLSValue(u.replaceType,null,"Error","Title"),null,u,void 0)},s=function(e){var t;t=e.duplicatedPIDs.map(function(e){return{id:e}}),o(t),n.notify("stopProgress",c)},d(),a.webServiceRequest({url:"dsmfg/private/V0/invoke/duplicateStructure",method:"POST",headers:a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(l),onFailure:r,onTimeout:r,onCancel:r,onComplete:s}),n.notify("startProgress",c)},f=function(t,o,i,r,a){var s=r||{},l=!e.is(s.popupMessage)||s.popupMessage;e.is(i)&&e.is(i.message,"string")&&(o+="\n"+i.message),!0===l?n.warn(o,a):n.log(o,a),n.notify("stopProgress",t),e.is(s.onFailure,"function")&&s.onFailure.call(null,o)},{onStart:function(){u=n.getBehavior("UXFactoryBehavior")},onStop:function(){},activate:function(e,t,n,i){o.activate(e,t,n,i)},showSearchDialoguAndActivate:function(t,n){var o=e.is(n)?n:{};s(t,o),l.show()},onClose:function(){d()}}}}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/AbstractGroupingClass",[],function(){"use strict";return function(){return{group:function(){},ungroup:function(){}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/DataCollectRowColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";var n=["V_MinValue_Inclusive","V_MinControlValue_Inclusive","V_MaxValue_Inclusive","V_MaxControlValue_Inclusive"];return t.singleton({name:"DCPColumnManager",init:function(e){this._parent(e)},getCellTypeRepresentation:function(t){var n,o;if(t.isHeader)return"string";switch(e.is(t.nodeModel)&&(o=t.nodeModel.options.grid),t.dataIndex){case"V_DCRichText":case"V_DCUnit":case"V_DCTimeStampFormat":case"V_DCFormula":n="string";break;case"V_MinValue":case"V_MinControlValue":case"V_MaxValue":case"V_MaxControlValue":n="number";break;case"V_Value":n=e.is(o)&&e.is(o.V_DCUnit)?"number":"string";break;case"V_MinValue_Inclusive":case"V_MinControlValue_Inclusive":case"V_MaxValue_Inclusive":case"V_MaxControlValue_Inclusive":n="boolean";break;case"V_DCType":case"V_DCMagnitude":case"V_DCRequirementLink":case"V_DCResourceLink":n="url";break;default:n="string"}return n},getCellClassName:function(t){var n="";if(e.is(t.nodeModel)&&!t.isHeader)switch(t.dataIndex){case"V_DCType":case"V_DCMagnitude":case"V_DCRequirementLink":case"V_DCResourceLink":n="url";break;default:n=""}return n},getCellValue:function(t){var n,o,i,r=t.nodeModel.options.grid;switch(i=function(t){var n,o,i,r,a,s=e.is(t)?t:"";if(0===s.indexOf("<?xml")&&0<s.indexOf("<html")&&(r=s.indexOf("<body>"),a=s.indexOf("</body>"),r>-1&&a>-1)){for(s=(s=s.slice(r+6,a)).replaceAll("<br/>"," ");-1!==s.indexOf("<");)n=s.indexOf("<"),-1!==(o=s.indexOf(">",n)+1)&&(i=s.substring(n,o),s=s.replace(i,""));s=(s=(s=(s=s.replaceAll("&lt;","<")).replaceAll("&gt;",">")).replaceAll("&amp;","&")).replaceAll("&nbsp;"," ")}return s},o=function(e,t){return{label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}}},t.dataIndex){case"V_DCRichText":return i(r[t.dataIndex]);case"V_DCType":case"V_DCMagnitude":case"V_DCRequirementLink":case"V_DCResourceLink":return n=r[t.dataIndex].iconPath,o(r[t.dataIndex].label,n);default:return r[t.dataIndex]}},getCellSemantics:function(e){var t,n=e.nodeModel.options.grid;switch(e.dataIndex){case"V_MinValue":case"V_MinControlValue":case"V_MaxValue":case"V_MaxControlValue":case"V_Value":t={units:n.V_DCUnit}}return t},hasCellValue:function(t){var o=t.nodeModel.options.grid;return n.indexOf(t.dataIndex)>-1?e.is(o[t.dataIndex])&&"NotSet"!==o[t.dataIndex]:n.indexOf(t.dataIndex+"_Inclusive")>-1?e.is(o[t.dataIndex+"_Inclusive"])&&"NotSet"!==o[t.dataIndex+"_Inclusive"]:!!e.is(o[t.dataIndex])}})}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/MfgItemCreateReportUI",["UWA/Core"],function(e){"use strict";return function(t,n,o,i,r,a){var s,l,c="full_report",u="erroronly_report",d=a.getComponent("TreeNodeModel"),g=a.getComponent("TreeDocument"),f=a.getComponent("DataGridView"),p=o.getComponent("WUXFrameWindowsManager"),h=[{text:i.getNLSValue("MfgItemCreateReportUI.Column.ProductName"),description:i.getNLSValue("MfgItemCreateReportUI.Column.ProductName"),dataIndex:"tree",width:"40%"},{text:i.getNLSValue("MfgItemCreateReportUI.Column.Status"),description:i.getNLSValue("MfgItemCreateReportUI.Column.Status"),dataIndex:"Status",width:"10%"},{description:i.getNLSValue("MfgItemCreateReportUI.Column.isMfgRefernceCreatedOrReused"),dataIndex:"isMfgRefernceCreatedOrReused",icon:i.getIconURLFromKey("InsertCreateAssembly"),width:"10%"},{description:i.getNLSValue("MfgItemCreateReportUI.Column.isScopeLinkCreated"),dataIndex:"isScopeLinkCreated",typeRepresentation:"boolean",icon:i.getIconURLFromKey("ProductImplementLink"),width:"5%"},{description:i.getNLSValue("MfgItemCreateReportUI.Column.isInstanceCreated"),dataIndex:"isInstanceCreated",typeRepresentation:"boolean",icon:i.getIconURLFromKey("CreateInstance"),width:"5%"},{description:i.getNLSValue("MfgItemCreateReportUI.Column.isImplementLinkCreated"),dataIndex:"isImplementLinkCreated",typeRepresentation:"boolean",icon:i.getIconURLFromKey("ProductImplementLinkOcc"),width:"5%"},{text:i.getNLSValue("MfgItemCreateReportUI.Column.ErrorMessages"),description:i.getNLSValue("MfgItemCreateReportUI.Column.ErrorMessages"),dataIndex:"ErrorMessages",width:"30%"}],m=function(t){var n,o,r={longHelp:""},a=this.getColumnOrGroup(t.columnID),s=a.dataIndex,l=t.nodeModel;if(-1===t.rowID)return e.is(a.description)&&(r.longHelp=a.description),r;if(o="tree"===s?l.getLabel():l.getAttributeValue(s),e.is(o))switch(s){case"tree":case"Status":case"isMfgRefernceCreatedOrReused":case"ErrorMessages":r.longHelp=o;break;case"isScopeLinkCreated":case"isInstanceCreated":case"isImplementLinkCreated":n="MfgItemCreateReportUI."+s+(o?".Created":".NotCreated"),r.longHelp=i.getNLSValue(n)}return r};return s=function(t){var r,a,s=p.getFrameWindow(n.getAppContext()).getImmersiveFrame(),l=i.getIconURLFromKey("CreateMfgItemStructure"),c=o.createElement("div",{class:"tree-list-container"});return(r=o.create("Panel",{title:e.is(t.title)?t.title:i.getNLSValue("MfgItemCreateReportUI.Dialog.Title"),icon:e.is(l)?l:"",identifier:"createMfgItemsReportPanel",immersiveFrame:s,content:c,width:500,height:250,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0})).close=function(){r.hide()},a=new g,new f({treeDocument:a,columns:h,getCellTooltip:m}).getContent().inject(c),{panel:r,treeDocument:a}},l=function(t,n){var o=this;o.treeDocument.prepareUpdate(),t.forEach(function(t){var n,a,s,l,g,f,p;(o.mode===c||o.mode===u&&"Success"!==t.Status)&&(g=(l=t.ProductOcc.split(","))[l.length-1],f=r.getInstance(g),a=(p=r.getReferenceModel(g)).get("V_Name")+"("+f.get("PLM_ExternalID")+")",s=p.get("V_IsManufacturable"),e.is(t.isRefernceCreated)&&(t.isRefernceCreated?t.isMfgRefernceCreatedOrReused=i.getNLSValue("MfgItemCreateReportUI.isMfgRefernceCreatedOrReused.Created"):t.isMfgRefernceCreatedOrReused=i.getNLSValue("MfgItemCreateReportUI.isMfgRefernceCreatedOrReused.Reused")),e.is(t.Status)&&("Phanthom"===t.Status&&"FALSE"===s&&(t.Status="NON-BOM"),t.Status=i.getNLSValue("MfgItemCreateReportUI.Status."+t.Status)),n=new d({label:a,grid:t}),o.treeDocument.addRoot(n))}),o.treeDocument.pushUpdate(),n()},{displayReport:function(t){var n;t=t||{},e.is(t.report,"array")&&(n=s(t),r.getExecuteByBlockPromise({callback:l,globalArray:t.report,context:{treeDocument:n.treeDocument,mode:e.is(t.mode)?t.mode:c}}).then(function(){n.treeDocument.getRoots().length>0&&n.panel.show()}))}}}}),define("DS/DELPPWViewBehaviors/GraphViewBehavior/EGraphLinkFilterUI",["UWA/Core"],function(e){"use strict";var t=!0;return function(n){var o,i,r,a=[],s=n.getBehavior("UXFactoryBehavior"),l=n.getBehavior("EGraphViewBehaviour"),c=n.getBehavior("ResourceBehavior");return{init:function(t){o=e.extend(o,t)},destroy:function(){i.destroy(),i=void 0},isActive:function(){},getDisplayLabel:function(e){var t="";switch(e){case"scope":t=c.getNLSValue("GraphViewLinksFilter.Scope");break;case"implement":t=c.getNLSValue("GraphViewLinksFilter.Implement");break;case"origin":t=c.getNLSValue("GraphViewLinksFilter.Origin");break;case"alternate":t=c.getNLSValue("GraphViewLinksFilter.Alternate");break;case"output":t=c.getNLSValue("GraphViewLinksFilter.Output");break;case"productFlow":t=c.getNLSValue("GraphViewLinksFilter.ProductFlow");break;case"capableResources":t=c.getNLSValue("GraphViewLinksFilter.CapableResources");break;case"capableResourcesStructure":t=c.getNLSValue("GraphViewLinksFilter.CapableResourcesStructureLink");break;case"secondaryCapableResources":t=c.getNLSValue("GraphViewLinksFilter.SecondaryCandidateResourceLink")}return t},loadLinkGraphUI:function(){var o,i,u,d,g,f,p,h,m,I=this,v={},y=c.getNLSValue("InsertCmd.OK"),b=s.getComponent("Modal"),C=s.getComponent("Toggle"),P=s.getComponent("ButtonGroup"),D=s.getComponent("Button");for(n.notify("startProgress",v),h=e.createElement("div"),r=new b({header:c.getNLSValue("GraphViewLinksFilter.Header"),closable:!1,className:"linksFilter_dialog_modal",footer:h}),e.is(r.elements.container)&&r.elements.container.setAttribute("id","PPR-GraphView-filter"),new D({label:y,className:"ok primary",emphasize:"primary",onClick:function(){l.removeGenericEGraphView(),l.createGenericEGraphView(),r.destroy(),r=null}}).inject(h),r.inject(widget.body),o=new P({type:"checkbox"}),m=new C({type:"switch",label:c.getNLSValue("GraphViewLinksFilter.SelectUnselectAll")+"</br>",checkFlag:t,allowUnsafeHTMLLabel:!0}),o.addChild(m),m.addEventListener("buttonclick",function(e){!1===e.dsModel._properties.checkFlag.value?(I.setStateOfAllLinks(!1),t=!1):(I.setStateOfAllLinks(!0),t=!0)}),g=l.getSupportedTypesOfLink(),d=0;d<g.length;d++)i=(f=g._models[d]._attributes).linkType,u="<img src='"+c.getIconURLFromKey(f.img)+"'/>   "+I.getDisplayLabel(f.linkType),p=f.displayed,a[d]=new C({type:"checkbox",value:i,label:u,isMultiSelection:!0,checkFlag:p,allowUnsafeHTMLLabel:!0}),o.addChild(a[d]),a[d].addEventListener("buttonclick",function(e){l.setLinkDisplayStatus(e.dsModel._properties.value.value,e.dsModel._properties.checkFlag.value)});r.setBody(o),r.show(),n.notify("stopProgress",v)},setStateOfAllLinks:function(e){a.forEach(function(t){t.checkFlag=e,l.setLinkDisplayStatus(t._properties.value.value,e)})}}}}),define("DS/DELPPWViewBehaviors/MfgItemReplaceBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["SelectionPlugin","DatabasePlugin","ImplementPlugin","ResourcePlugin","WebServicePlugin","BIPlugin"],creator:function(t,n,o,i,r,a,s,l){var c,u;return u=function(t,o,i,r,a){var s=r||{},l=!e.is(s.popupMessage)||s.popupMessage;e.is(i)&&e.is(i.message,"string")&&(o+="\n"+i.message),!0===l?n.warn(o,a):n.log(o,a),n.notify("stopProgress",t),e.is(s.onFailure,"function")&&s.onFailure.call(null,o)},c=function t(o,r){var c,d,g,f,p,h,m={},I=o||{};p=a.getNLSValue("replaceCmd.LogMessage",{replaceType:I.replaceType}),h=n.log(p),n.notify("startProgress",m),f={instancePIDs:I.instancePIDs,scopedParentPrdRefIDs:I.scopedParentPrdRefIDs,rootMfgPIDs:I.rootMfgPIDs,rerouteSLCheckForAssemblies:I.rerouteSLCheckForAssemblies},"replaceByLatest"===I.replaceType?c="dsmfg/private/V0/invoke/replaceByLatest":"replaceByExisting"===I.replaceType||"replaceByNew"===I.replaceType?(c="dsmfg/private/V0/invoke/replaceByExisting",f.existingRefPID=I.existingRefPID):"replaceByNewRevision"===I.replaceType?c="dsmfg/private/V0/invoke/replaceByNewRevision":u(m,a.getNLSValue("InvalidReplaceOperation",null,"Error","Title"),null,I,h),d=function(t,o){var i;e.is(o)&&e.is(o.message,"string")?((i=a.getNLSValue(o.message,null,"Error","Title"))==="Error."+o.message+".Title"&&(i=a.getNLSValue(I.replaceType,null,"Error","Title"),n.debug(o.message)),u(m,i,null,I,h)):u(m,a.getNLSValue(I.replaceType,null,"Error","Title"),null,I,h)},g=function(o){var s,c,u,d,g,f=[],v=[],y=n.getPreferenceValue("refreshBIOnAuthoring"),b=n.getBehavior("UXFactoryBehavior"),C=i.getConnectionParser(),P={silentMode:!1,stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[],onComplete:function(t){"replaceByLatest"===I.replaceType?g=a.getNLSValue("Dialog.ReplaceByLatest.Report"):"replaceByExisting"===I.replaceType?g=a.getNLSValue("Dialog.ReplaceByExisting.Report"):"replaceByNewRevision"===I.replaceType?g=a.getNLSValue("Dialog.ReplaceByNewRevision.Report"):"replaceByNew"===I.replaceType&&(g=a.getNLSValue("Dialog.ReplaceByNew.Report")),e.is(I.showReport)&&!I.showReport||b.showMessage(g,{messages:r,token:h}),e.is(y,"boolean")&&!0===y&&l.getBICmdState()&&l.computeBI(),e.is(I.onComplete)&&I.onComplete(t),n.notify("stopProgress",m),n.log(p+" "+a.getNLSValue("completed"),h)}},D=o.failed;Object.keys(D).forEach(function(e){var t=D[e];(f=Object.keys(t)).forEach(function(e){r.push(t[e].message)})}),e.is(o.warning)?(u=o.warning.message,e.is(u)&&(n.notify("stopProgress",m),b.showConfirmation(a.getNLSValue("Confirmation.AreYouSure"),u,null,function(n){var o,i,a,s=[],l=[],c=[],u=I.instancePIDs,d=I.rootMfgPIDs,p=I.scopedParentPrdRefIDs;if(e.is(n,"boolean")&&n)if(I.rerouteSLCheckForAssemblies=!1,f.length>0){for(let e=0;e<u.length;e++)o=u[e],0!==f.indexOf(o)&&(i=p[e],a=d[e],s.push(o),l.push(i),c.push(a));I.instancePIDs=s,I.scopedParentPrdRefIDs=l,I.rootMfgPIDs=c,s.length>0?t(I,r):b.showMessage(g,{messages:r,token:h})}else t(I,r)}))):(c=o.succeeded,Object.keys(c).forEach(function(e){var t=c[e];Object.keys(t).forEach(function(e){var n=t[e];n.instancesAndReferences.forEach(function(e){d=e.attributesValue,Object.prototype.hasOwnProperty.call(d,"isInstanceOf")?P.stackedInstances.push(d):(v.push(d.PID),P.stackedReferences.push(d))}),n.connections.forEach(function(e){C.parse(e,P)}),P.deletedObjects=P.deletedObjects.concat(n.deletedObjects),r.push(n.message)})}),n.notify("replace",{}),s=function(){i.addToCollections(P)},i.getDescendantsFromServer(v,s,{silentMode:!0}))},s.webServiceRequest({url:c,method:"POST",headers:s.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(f),onFailure:d,onTimeout:d,onCancel:d,onComplete:g})},{listenTo:function(){return{}},onStart:function(e){},onStop:function(){},replace:function(t,s,l,u,d){var g,f,p,h,m,I,v,y=o.getSelectionsWithPaths(n.getId()).length>0?o.getSelectionsWithPaths(n.getId()):l,b=[],C=[],P=[],D=[];e.is(y)&&y.length>0&&((y=y[0]).forEach(function(e){for(g=e.path,m=g[0],I=i.getInstance(m),v=I.get("isAggregatedBy"),C.push(v),p=0;p<g.length-1;p++)-1===b.indexOf(g[p])&&b.push(g[p])}),y.every(function(e){return f=e.id,-1===b.indexOf(f)})?(y.forEach(function(t){var n,o,i=null;g=t.path,n=t.id,P.push(n),o=r.getScopedParent(g),e.is(o)&&o.length>0&&(i=r.getScopeLinksOfImplementing(o)[0].get("to")),D.push(i)}),h={instancePIDs:P,scopedParentPrdRefIDs:D,replaceType:t,existingRefPID:s,rootMfgPIDs:C,rerouteSLCheckForAssemblies:!0,showReport:y[0].showReport,onComplete:u,onFailure:d},c(h,[])):n.warn(a.getNLSValue("Error.replaceDirectOrIndirectChild.Title")))}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXManageCapableRscDragDrop",["UWA/Core"],function(e){"use strict";return function(t,n,o,i,r,a,s,l){var c,u,d=function(){return e.is(u)||(u=n.getBehavior("LinkBehavior")),u},g=function(){var t,o,i,r,a,s=null,l=n.getBehavior("ManageCapableResourcesBehaviour"),c=n.getBehavior("CapableResourceLinkBehaviour");return t=(r=(i=l.getBreadCrumb()).value[i.value.length-1]).refPID,o=r.instPID,a=c.getCapableRscStructureLinkOfAncestor(r.path),c.checkType(t,"OPERATION")&&e.is(o)&&c.checkParentType(o,"SYSTEM")&&(s=e.is(a)?a.get("to"):null),{fromRefPID:t,fromInstPID:o,resourceAreaID:s,fromSideAbsPath:r.path}},f=function(t){var n="",o=c.acceptedTypes;return e.is(t)&&(n=e.is(t.get)?t.get("PPRTYPE"):e.is(t["ds6w:type_value"])?r.getPPRType(t["ds6w:type_value"]):e.is(t,"string")?r.getPPRType(t):(t=i.getReference(t.referenceID)).get("PPRTYPE")),!e.is(o)||-1!==o.indexOf(n)},p=function(e){return e.preventDefault(),!0};return{init:function(t){var n=this;c=t||{},e.is(c.dropZone)&&(c.dropZone.addEventListener("drop",function(e){e.preventDefault(),n.onTreeListViewDrop(e)}),c.dropZone.addEventListener("dragover",function(e){e.preventDefault()}))},isAcceptedType:function(e){return f(e)},getDDBehavior:function(){return{onDragStartCell:this.onDragStartCell,onDropCell:this.onDropCell.bind(this),onDropBlank:this.onDropBlank.bind(this),onDropColumnHeader:this.onDropColumnHeader.bind(this),onDragOverBlank:p,onDragOverColumnHeader:p,onDragOverCell:p,onDragEnterRowHeader:this.onDragEnterRowHeader,onDragLeaveRowHeader:this.onDragLeaveRowHeader,onDragOverRowHeader:this.onDragOverRowHeader}},onDragOverRowHeader:function(){return!1},onDragLeaveRowHeader:function(){return!1},onDragEnterRowHeader:function(){return!1},retrieveItems:function(t){var o,i,r,a,s,l=[],c="",u=["text/searchitems","text/plain","Text"];if(!e.is(t))return n.debug("ERROR: No dropped item found"),l;for(r=e.is(t.dataTransfer.types.indexOf,"function")?"indexOf":"contains",a=0;a<u.length&&""===c;a++)s=t.dataTransfer.types[r](u[a]),(e.is(s,"number")&&s>=0||e.is(s,"boolean")&&!0===s)&&(c=u[a]);if(""===c)return n.debug("ERROR: No data retrieved"),l;o=t.dataTransfer.getData(c);try{i=e.Json.decode(o)}catch(e){return l}return e.is(i)?e.is(i.data)?e.is(i.data.items,"array")?i.data.items:(n.debug("ERROR: Items is not an array"),l):(n.debug("ERROR: No data retrieved"),l):(n.debug("ERROR: Parsing returned null"),l)},onDragStartCell:function(i,r){var s,l,c,u=[],d=r.nodeModel,f=widget.data,p=a.get3DSpaceServiceName(),h=n.getBehavior("WUXNodeModelBehavior"),m=n.getBehavior("ExpandFilterBehavior"),I=n.getBehavior("ManageCapableResourcesBehaviour"),v={widgetId:widget.id,appId:t.getConfig().appId},y=g();if(!0!==I.getStepOperationUIState())return e.is(m)&&e.is(m.getFilterProxy())&&(s=m.getFilterProxy())&&s.getCtxForSharing&&(v=s.getCtxForSharing()),l={protocol:"3DXContent",version:"1.1",source:t.getConfig().appId,widgetId:widget.id,data:{items:[]},biProxyCtx:v},c={properties:[function(){return{property:"envId",value:a.getPlatformID({serviceId:p})}},function(){return{property:"serviceId",value:p}},function(){return{property:"contextId",value:[f.role,f.organization,f.collaborativeSpace].join(".")}},function(){return{property:"objectId",value:e.is(this.getReferencePID)?this.getReferencePID():null}},function(){return{property:"linkId",value:e.is(this.getLinkPID)?this.getLinkPID():null}},function(){return{property:"resourceAreaID",value:y.resourceAreaID}},function(){return{property:"objectType",value:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"displayName",value:this.getLabel()}},function(){return{property:"displayType",value:e.is(this.getReferenceType)?o.getNLSValue(this.getReferenceType(),null,"Type"):null}}]},d.isSelected()||d.select(),r.cellView.collectionView.getTreeDocument().getXSO().get().forEach(function(t){e.is(h)&&!h.isFakeNodeModel(t)&&u.push(t.dump(c))}),l.data.items=u,i.dataTransfer.setData("Text",JSON.stringify(l)),i.dataTransfer.effectAllowed="copyMove",!1;n.warn("DrgDrop Not Supported")},getDragNDropInfo:function(t,n){var o,r,a,s={draggedItems:[],info:{fromWUX:!1,dropPosition:null,fromSameSource:!1},targetRootReferencePID:null,targetInstancePIDsArray:null,targetInstanceSiblingPID:null};return e.is(t)&&e.is(t.dataTransfer)&&e.is(t.dataTransfer.getData,"function")&&(r=t.dataTransfer.getData("Text"),e.is(r,"string")&&r.length>0&&(a=JSON.parse(r),e.is(a)&&e.is(a.widgetId,"string")&&(s.info.fromSameSource=a.widgetId===widget.id))),e.is(n)&&e.is(n.nodeModel,"object")&&e.is(n.dropPosition)&&(s.info.fromWUX=!0,s.info.dropPosition=n.dropPosition,s.targetTreeNodeModel=n.nodeModel),o=this.retrieveItems(t),e.is(o,"array")&&(o.forEach(function(t){var n,o={};e.is(t)&&(o.rootReferencePID=e.is(t.objectId)?t.objectId:null,o.instancePIDsArray=e.is(t.path,"array")?i.transformRIRToAbsolutePath(t.path):null,o.name=e.is(t.displayName,"string")?t.displayName:null,o.type=e.is(t.referenceType,"string")?t.referenceType:e.is(t.objectType)?t.objectType:null,o.typeNLS=e.is(t.displayType,"string")?t.displayType:e.is(t.displayType)?t.displayType:null,o.securityContext=e.is(t.contextId,"string")?t.contextId:null,o.tenant=e.is(t.envId,"string")?t.envId:null,o.service=e.is(t.serviceId,"string")?t.serviceId:null,o.path=Array.isArray(t.path)?t.path:[],e.is(t.isManufacturable,"string")&&(o.isManufacturable=t.isManufacturable),e.is(o.instancePIDsArray,"array")&&o.instancePIDsArray.length>0&&(n=i.getInstance(o.instancePIDsArray[0]),e.is(n)&&(o.rootReferencePID=n.get("isAggregatedBy")))),s.draggedItems.push(o)}),e.is(s.targetTreeNodeModel)&&(e.is(s.targetTreeNodeModel.getLinkPID,"function")&&(s.targetReferencePID=s.targetTreeNodeModel.getReferencePID(),s.instPID=s.targetTreeNodeModel.getInstancePID(),s.linkPID=s.targetTreeNodeModel.getLinkPID(),s.nodeDepth=s.targetTreeNodeModel.getNodeDepth(),s.siblingsPID=s.targetTreeNodeModel.getSiblingsPID()),delete s.targetTreeNodeModel)),s},onDragEnterColumnHeader:function(){},onDragLeaveColumnHeader:function(){},onDragEnterBlank:function(){},onDragLeaveBlank:function(){},onDropCell:function(t,r){var a,s,l,c=[],u=this.getDragNDropInfo(t,r),p=u.targetReferencePID,h=d(),m=n.getBehavior("ManageCapableResourcesBehaviour"),I=g();!0!==m.getStepOperationUIState()?"middle"===u.info.dropPosition&&(0===u.nodeDepth&&(s=u.linkPID,u.draggedItems.forEach(function(t){var r,a,l,u=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,d=u>0?t.instancePIDsArray[u-1]:null;r=u>0?i.getReferenceIdFromInstance(d):t.rootReferencePID,f({referenceID:r})&&(p!==r||e.is(I.resourceAreaID)&&t.rootReferencePID===I.resourceAreaID?p===r&&I.resourceAreaID===t.rootReferencePID?u>0&&(a=i.getInstance(t.instancePIDsArray[u-1]),l={linkPID:s,instMdl:a},n.notify("updateResourceUsage",[l,!0])):c.push({type:"SecondaryCandidateResourceLink",fromSideRefPID:I.fromRefPID,toSideRefPID:r,fromSideInstPID:I.fromInstPID,fromSideAbsPath:I.fromSideAbsPath,connectionParams:{primaryResourceLinkPID:s}}):n.warn(o.getNLSValue("ManageCapableResource.setResourceUsage.Failure",{resource:"CapableResourcesStructureLink dose not Exist (or) Instance Under Different Resorce Area"})))}),h.createConnection(c)),1===u.nodeDepth&&(l=u.linkPID,a=u.siblingsPID,u.draggedItems.forEach(function(t){var r,s,c,u=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,d=u>0?t.instancePIDsArray[u-1]:null;r=u>0?i.getReferenceIdFromInstance(d):t.rootReferencePID,f({referenceID:r})&&(p!==r||e.is(I.resourceAreaID)&&t.rootReferencePID===I.resourceAreaID?p===r&&t.rootReferencePID===I.resourceAreaID&&u>0&&(s=i.getInstance(t.instancePIDsArray[u-1]),-1===a.indexOf(s.get("PID"))&&(c={linkPID:l,instMdl:s},n.notify("updateResourceUsage",[c,!0]))):n.warn(o.getNLSValue("ManageCapableResource.setResourceUsage.Failure",{resource:"CapableResourcesStructureLink dose not Exist (or) Instance Under Different Resorce Area"})))}))):n.warn("DrgDrop Not Supported")},onDropBlank:function(t,r){var a=[],s=this.getDragNDropInfo(t,r),l=d(),c=n.getBehavior("ManageCapableResourcesBehaviour"),u=g();!0!==c.getStepOperationUIState()?(s.draggedItems.forEach(function(t){var r,s,l,c,d,g,p=e.is(t.instancePIDsArray)?t.instancePIDsArray.length:0,h=p>0?t.instancePIDsArray[p-1]:null;if(r=p>0?i.getReferenceIdFromInstance(h):t.rootReferencePID,f({referenceID:r})){if(-1!==i.getImpacted(u.fromRefPID,!0,{relationTypes:["DELAsmProcessCanUseCnx"]}).indexOf(r))return s=i.getReference(u.fromRefPID),l=i.getReference(r),c=s.get("V_Name"),d=l.get("V_Name"),g={linkType:o.getNLSValue("DELAsmProcessCanUseCnx"),target:c,source:d},void n.warn(o.getNLSValue("CreateLink.Failure",g));a.push({type:"DELAsmProcessCanUseCnx",fromSideRefPID:u.fromRefPID,toSideRefPID:r,fromSideInstPID:u.fromInstPID,toSideInstPID:h,fromSideAbsPath:u.fromSideAbsPath,toSideRootRefPID:t.rootReferencePID})}}),l.createConnection(a)):n.warn("DrgDrop Not Supported")},onDropColumnHeader:function(e,t){this.onDropBlank(e,t)}}}}),define("DS/DELPPWViewBehaviors/ExportToCSVBehaviour",["UWA/Core"],function(e){"use strict";return{plugins:["WebServicePlugin","UXComponentsPlugin","ResourcePlugin"],creator:function(t,n,o,i,r){var a,s,l,c,u,d,g,f=i.getComponent("Toggle"),p=i.getComponent("Button"),h=function(){return window.URL||window.webkitURL||window},m=function(e,t,n){var o,i,r,a,s,l;a=function(e,t){var n,o,i;if("string"==typeof e){for(n=new ArrayBuffer(e.length),o=new Uint8Array(n),i=0;i<e.length;i++)o[i]=e.charCodeAt(i);return new Blob([n],{type:t})}return e instanceof Blob?e:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?new Blob([e],{type:t}):null}(e,n),"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,t):(o=window.document.createElementNS("http://www.w3.org/1999/xhtml","a"),i=h().createObjectURL(a),o.href=i,o.download=t,r=new MouseEvent("click"),o.dispatchEvent(r),s=i,l=function(){"string"==typeof s?h().revokeObjectURL(s):s&&s.remove()},window.chrome?l():setTimeout(l,10))},I=function(e){var o,i;switch(t.getService("ConfigService").getPreference("csvSeparator")){case"Semicolon":o=";";break;case"Pipe":o="|";break;case"Tab":o="\t";break;default:o=","}i=e?l.getConfiguredAttributesAsCSV(c,o):l.getVisibleTableContentAsCSV(o),m(i,a+"_"+(new Date).toString().split(" ").splice(1,4).join(" ")+".csv","text/csv"),n.info(r.getNLSValue("ExportCSVCmd.SuccessMsg"))},v=function(){var t;t=function(){var t,o;!0===u?(o=new f({label:r.getNLSValue("ExportCSVCmd.ExportAllQuestion"),checkFlag:d}),e.is(g)?(t=g.create("Dialog",{domId:"ExportCSV-Dialog",modalFlag:!0,visibleFlag:!1,snappableFlag:!1,title:r.getNLSValue("ExportCSVCmd.Header"),content:o,buttons:{Ok:new p({className:"ok primary",label:r.getNLSValue("ExportCSVCmd.OK"),emphasize:"primary",onClick:function(){t.destroy(),I(o.checkFlag)}}),Cancel:new p({className:"cancel",label:r.getNLSValue("ExportCSVCmd.CANCEL"),onClick:function(){t.destroy()}})}})).show():n.debug("uxFactoryBehavior is not available.")):I(!1)},e.is(s)?o.getXMLValues(s,function(e){c=e.convert("Config.Preferences.ExportCSV.Type","name"),u=e.Config.Preferences.ExportCSV.showOptionPanel,d=e.Config.Preferences.ExportCSV.defaultValue,t()},function(e){n.warn(r.getNLSValue("ExportCSVCmd.ConfigXMLFetchFailed")),n.debug("Cannot export as ExportCSVPreferences XML fetch failed ,"+e)}):n.debug("Cannot export as _exportCSVPreferencesXML path is not provided")};return{listenTo:function(){return{ExportCSVCmd:v}},onStart:function(t){s=(t=t||{}).exportCSVPreferencesXML,a=t.exportCSVFileName,l=n.getBehavior("TreeListViewBehavior"),g=n.getBehavior("UXFactoryBehavior"),e.is(l)||n.debug("ExportToCSVBehaviour initialization failed as TreeListViewBehavior is not available")},onStop:function(){s=null,l=null}}}}}),define("DS/DELPPWViewBehaviors/ManageCapableResourcesBehaviour/ManageCapableResourcesBehaviour",["UWA/Core"],function(e){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","DatabasePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin","EGraphPlugin","RootsPlugin"],creator:function(t,n,o,i,r,a,s,l,c,u,d){var g,f,p,h,m,I,v;return m=function(t,o,i,r){i=i||{},e.is(o)&&n.info(o,r),n.notify("stopProgress",t),e.is(i.onComplete,"function")&&i.onComplete.call(null,o)},I=function(t,o,i,r,a){r=r||{},e.is(i,"string")&&(o+="\n"+i),n.warn(o,a),n.debug(o),n.notify("stopProgress",t),e.is(r.onFailure,"function")&&r.onFailure.call(null,o)},v=function(e,t){var n=a.getConnection(t),i=a.getReference(n.get("to")).get("V_Name");return o.getNLSValue(e,{resource:i})},g=function(e){var t,n,i,r=[],s=e.path,l=e.id,c=function(e,t,n){e&&r.unshift({label:e.get("V_Name"),icon:{iconPath:o.getIconURLFromKey(e.get("type")),iconSize:{width:"20px",height:"20px"}},instPID:t,refPID:e.get("PID"),path:n})};if(0===s.length)c(a.getReference(l),null,[]);else for(t=s.length-1;t>=0;t--)i=s[t],c(a.getReferenceModel(i),i,s.slice(0,t+1)),0===t&&(n=a.getInstance(i),c(a.getAggregatingReferenceModelFromInstance(n),null,[]));return r},f=function(e){var t=[],n=a.getFilteredInstancesFromCollection(e);return(n=(n=n.map(function(e,t){return{position:t,data:e}})).sort(function(e,t){var n=e.data.get("V_TreeOrder"),o=t.data.get("V_TreeOrder");return n&&o?Number(n)-Number(o):e.position-t.position})).forEach(function(e){var n=a.getReferenceModel(e.data.id);a.isOperation(n)&&t.push({name:n.get("V_Name"),type:n.get("type"),instPID:e.data.id,icon:o.getIconURLFromKey(n.get("type")),refPID:n.get("PID")})}),t},{listenTo:function(){return{}},onStart:function(e,t){c.getViewLabelMap().MANAGECAPABLERESOURCESMOD={attributeName:"V_Name",dicoType:"PLMEntity",labelIsOnRef:!0},t()},onStop:function(){},setStepOperationUIState:function(e){h=e},getStepOperationUIState:function(){return h},getChildrenInfo:function(e){return f(e)},getBreadcrumbValue:function(e){return g(e)},setBreadCrumb:function(e){p=e},getBreadCrumb:function(){return p},isBreadCrumbLabelSameAsNewLabel:function(e){var t=!1,n=p.value;return n.length===e.length&&(t=!(t=n.some(function(t,n){return t.label!==e[n].label}))),t},getBreadCrumbLastElementRefPID:function(){var e=this.getBreadCrumb().value;return e[e.length-1].refPID},getBreadCrumbRefPIDs:function(){var e=[];return this.getBreadCrumb().value.forEach(function(t){e.push(t.refPID)}),e},isBreadCrumbLastElementHeaderOperation:function(){var e=this.getBreadCrumbLastElementRefPID(),t=a.getReference(e);return s.isAKindOf(t,"DELLmiHeaderOperationReference")},getBreadCrumbLastElementInstPID:function(){var e=this.getBreadCrumb().value;return e[e.length-1].instPID},isPrimaryCapableResourceLink:function(e){return"DELAsmProcessCanUseCnx"===a.getConnection(e).get("type")},getBreadCrumbRIRPath:function(){var e,t,n,o=[];for(e=p.value.length,t=0;t<e;t++)n=p.value[t],0===t?o.push(n.refPID):(o.push(n.instPID),o.push(n.refPID));return o},checkType:function(e,t){return a.getReference(e).get("PPRTYPE")===t},checkParentType:function(e,t){var n=a.getInstance(e).get("isAggregatedBy");return a.getReference(n).get("PPRTYPE")===t},isUsageOrPreferredPossible:function(){var t=this.getBreadCrumbLastElementRefPID(),n=this.getBreadCrumbLastElementInstPID();return this.checkType(t,"OPERATION")&&e.is(n)&&this.checkParentType(n,"SYSTEM")},createResourceUsage:function(e,t){a.createInstance(e,t)},getResourceUsage:function(t){var n=a.getConnection(t).get("ResourceUsage");return e.is(n)?a.getInstance(n):null},getReferenceModel:function(e){return a.getReferenceModel(e)},getReferencePID:function(e){return a.isReference(e)?e:a.getReferenceIdFromInstance(e)},getImpacted:function(e,t,n){return a.getImpacted(e,t,n)},setPreferred:function(t,i){var r,s,c={};this.isUsageOrPreferredPossible()&&(r={url:"dsmfg/private/V0/MfgElement/connection/setPreferred/"+t,method:"PUT",context:this,onComplete:function(o){var r,l=[];e.is(o)&&e.is(o.preferred)&&(r=a.getConnection(o.preferred).get("from"),a.getImpacted(r,!1,{relationTypes:["DELAsmProcessCanUseCnx"]}).forEach(function(e){var n=e.get("PID"),o=n===t;l.push({linkPID:n,state:o}),e.set("V_IsPreferred",o?"TRUE":"FALSE")}),n.notify("updatePreferredLink",[l])),m(c,v("ManageCapableResource.setPreferred.Success",t),i,s)},onFailure:function(){I(c,v("ManageCapableResource.setPreferred.Failure",t),i,s)}},n.notify("startProgress",c),s=n.log(o.getNLSValue("ManageCapableResource.setPreferred")),l.webServiceRequest(r))},setResourceUsage:function(t,i){var r,s,c,u={};this.isUsageOrPreferredPossible()&&(s=this.getBreadCrumbRIRPath(),r={url:"dsmfg/private/V0/MfgElement/connection/setResourceUsage/?rscInstance="+t.instPID+"&stepOperationRIRpath="+s+"&rscLinkPID="+t.linkPID,method:"PUT",context:this,onComplete:function(o){var r,s,l,d,g={};if(e.is(o.ResourceUsage))for(s in r=o.ResourceUsage)r.hasOwnProperty(s)&&(l=r[s],(d=a.getConnection(s)).set("ResourceUsage",l),g={linkPID:d.get("PID"),instMdl:a.getInstance(l)},n.notify("updateResourceUsage",g));m(u,v("ManageCapableResource.setResourceUsage.Success",t.linkPID),i,c)},onFailure:function(){I(u,v("ManageCapableResource.setResourceUsage.Failure",t.linkPID),i,c)}},n.notify("startProgress",u),c=n.log(o.getNLSValue("ManageCapableResource.setResourceUsage")),l.webServiceRequest(r))},fetchResourceUsages:function(t,i){var r,s,c=this,u={};e.is(t,"array")&&t.length>0?(r=t.map(function(t){return function(t){return new Promise(function(n,o){var i;i={url:"dsmfg/private/V0/MfgElement/connection/getResourceUsage?stepOperationRIRpath="+t.idFrom+"&rscLinkPID="+t.idTo,method:"GET",context:c,onComplete:function(t){var o,i,r;if(e.is(t.resourceUsage))for(i in o=t.resourceUsage)o.hasOwnProperty(i)&&(r=o[i],a.getConnection(i).set("ResourceUsage",r));n(t)},onFailure:function(){o()}},l.webServiceRequest(i)})}(t)}),n.notify("startProgress",u),s=n.log(o.getNLSValue("ManageCapableResource.getResourceUsage")),e.Promise.allSettled(r).then(function(e){var t=[],n=0;e.forEach(function(e,o){"rejected"===e.state?n++:t.push(e.value)}),0===n?m(u,o.getNLSValue("ManageCapableResource.getResourceUsages.Success"),i,s):n===e.length?I(u,o.getNLSValue("ManageCapableResource.getResourceUsages.Failure"),null,i,s):I(u,o.getNLSValue("ManageCapableResource.getResourceUsages.PartialFailure"),null,i,s)})):e.is(i)&&e.is(i.onComplete)&&i.onComplete.call(null)},createRscDetailLinkBulk:function(t,i){var r,s,c,u,d={},g=function(t){return new Promise(function(n,o){var r,s={connectionParams:t},c={stackedReferences:[],stackedInstances:[],stackedConnections:[],documentIdMap:{}};r={url:"dsmfg/private/V0/MfgElement/connection/resourceDetail/createResourceDetail",method:"POST",data:e.Json.encode(s),context:self,onComplete:function(t){var o=a.getConnectionParser();e.is(t.connections)&&t.connections.forEach(function(e){o.parse(e,c)}),a.addToCollections({stackedConnections:c.stackedConnections,onComplete:function(e){i.onComplete&&n(e.connections)}})},onFailure:function(){o()}},l.webServiceRequest(r)})},f=[],p=[];if(e.is(t,"array")&&t.length>0){for(s=0,c=t.length;s<c;s+=5)u=t.slice(s,s+5),f.push(g(u));n.notify("startProgress",d),r=n.log(o.getNLSValue("ManageCapableResource.createResourceDetail")),e.Promise.allSettled(f).then(function(t){var n=0;t.forEach(function(e){"rejected"===e.state?n++:p=p.concat(e.value)}),0===n?(m(d,o.getNLSValue("ManageCapableResource.createResourceDetails.Success"),null,r),e.is(i)&&e.is(i.onComplete)&&i.onComplete.call(null,p)):n===t.length?I(d,o.getNLSValue("ManageCapableResource.createResourceDetails.Failure"),null,i,r):I(d,o.getNLSValue("ManageCapableResource.createResourceDetails.PartialFailure"),null,i,r)})}else i.onComplete.call(null,p)},fetchRscDetailLinkBulk:function(t,i){var r,s,c,u,d={},g=function(t){return new Promise(function(n,o){var r,s={connectionParams:t},c={stackedReferences:[],stackedInstances:[],stackedConnections:[],documentIdMap:{}};r={url:"dsmfg/private/V0/MfgElement/connection/resourceDetail/getResourceDetail",method:"POST",data:e.Json.encode(s),context:self,onComplete:function(t){var o=a.getConnectionParser();e.is(t.connections)&&t.connections.forEach(function(e){o.parse(e,c)}),a.addToCollections({stackedConnections:c.stackedConnections,onComplete:function(e){i.onComplete&&n(e.connections)}})},onFailure:function(){o()}},l.webServiceRequest(r)})},f=[],p=[];if(e.is(t,"array")&&t.length>0){for(s=0,c=t.length;s<c;s+=5)u=t.slice(s,s+5),f.push(g(u));n.notify("startProgress",d),r=n.log(o.getNLSValue("ManageCapableResource.getResourceDetail")),e.Promise.allSettled(f).then(function(t){var n=0;t.forEach(function(e){"rejected"===e.state?n++:p=p.concat(e.value)}),0===n?(m(d,null,null,r),e.is(i)&&e.is(i.onComplete)&&i.onComplete.call(null,p)):n===t.length?I(d,o.getNLSValue("ManageCapableResource.getResourceDetails.Failure"),null,i,r):I(d,o.getNLSValue("ManageCapableResource.getResourceDetails.PartialFailure"),null,i,r)})}else i.onComplete.call(null,p)}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ManageCapableResources/MSOColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";return function(t,n,o,i,r,a){return{name:"MSOColumnManager",init:function(e){this._parent(e)},hasCellValue:function(e){return!0},getCellTypeRepresentation:function(e){return e.isHeader?"string":"enumCustom"},getCellClassName:function(e){return""},getCellValue:function(t){var n=e.is(t.nodeModel)?t.nodeModel:null;if(e.is(n))return t.nodeModel.options.grid[t.dataIndex]},getCellSemantics:function(e){var t={"":"Undefined"};return t[r.getNLSValue("ManageStepOperation.StepOnly")]="StepOnly",t[r.getNLSValue("ManageStepOperation.Reserved")]="Reserved",t[r.getNLSValue("ManageStepOperation.Released")]="Released",{possibleValues:t,valueType:"enumCustom"}},setValue:function(n,i,a){var s,l,c,u,d,g=i.nodeModel.options.grid.cellInfo.rowInfo,f=e.is(g[n.dataIndex].resourceDetailPID)?g[n.dataIndex].resourceDetailPID:null,p=i.cellModel,h={},m=1===i.columnID?"PrimaryResourceLinkDetail":"SecondaryResourceLinkDetail",I={onComplete:function(e){var o="Undefined"===e.get("V_AvailabilityMode")?"":e.get("V_AvailabilityMode");i.nodeModel.setAttribute(n.dataIndex,o),g[n.dataIndex]={resourceDetailPID:e.get("PID"),availabilityMode:e.get("V_AvailabilityMode")},u=r.getNLSValue("ManageStepOperation.setAvilabilityMode.Success",{availablity:e.get("V_AvailabilityMode")}),t.info(u,c),t.notify("stopProgress",h)},onFailure:function(e){i.nodeModel.setAttribute(n.dataIndex,p),d=r.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),t.warn(d,c),t.debug(d),t.notify("stopProgress",h)},data:{}};I.data[m+".V_AvailabilityMode"]=a,e.is(f)?(t.notify("startProgress",h),c=t.log(r.getNLSValue("ManageStepOperation.setAvilabilityMode")),o.updateConnection(f,I)):(s=t.getBehavior("ManageCapableResourcesBehaviour"),e.is(g[n.dataIndex].connectionParams)&&(l=g[n.dataIndex].connectionParams,s.createRscDetailLinkBulk(l,{onComplete:function(t){e.is(t,"array")&&t.length>0&&(f=t[0].get("PID"),g[n.dataIndex]={resourceDetailPID:f,availabilityMode:t[0].get("V_AvailabilityMode")},o.updateConnection(f,I))},onFailure:function(e){i.nodeModel.setAttribute(n.dataIndex,p),d=r.getNLSValue("ManageStepOperation.setAvilabilityMode.Failure"),t.warn(d),t.debug(d)}})))},getCellEditableState:function(e){return!0}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/WUXDataCollectRowDragDrop",["UWA/Core"],function(e){"use strict";return function(t,n){var o,i,r,a;return o=function(){return!1},i=function(e,n){var o;return o={protocol:"3DXContent",version:"1.1",source:t.getConfig().appId,widgetId:widget.id,data:{draggedRowPID:n.nodeModel.getReferencePID()}},e.dataTransfer.setData("Text",JSON.stringify(o)),e.dataTransfer.effectAllowed="move",!1},r=function(e){return e.preventDefault(),!0},a=function(o,i){var r,a,s,l,c=!1;return e.is(o.dataTransfer)&&e.is(o.dataTransfer.getData)&&(l=o.dataTransfer.getData("Text"),e.is(l)&&(l=JSON.parse(l),e.is(l.source)&&e.is(l.widgetId)&&l.source===t.getConfig().appId&&l.widgetId===widget.id&&(c=!0))),c&&e.is(i.droppedNodes)&&e.is(i.nodeModel)?(r=i.droppedNodes[0],a=i.nodeModel,r.getReferencePID()===a.getReferencePID()&&(c=!1),"top"===i.dropPosition?s=i.rowID:"bottom"===i.dropPosition&&(s=i.rowID+1),e.is(s)&&r._getRowID()!==s||(c=!1)):c=!1,c&&n.notify("moveDataCollectRow",[r.options.dataCollectPID,r.getReferencePID(),s.toString()]),!1},{init:function(e){},getDDBehavior:function(){return{onDragStartRowHeader:o,onDragRowHeader:o,onDragOverRowHeader:o,onDragEnterRowHeader:o,onDragLeaveRowHeader:o,onDragEndRowHeader:o,onDropRowHeader:o,onDragStartCell:i,onDragCell:o,onDragOverCell:r,onDragEnterCell:o,onDragLeaveCell:o,onDragEndCell:o,onDropCell:a,onDragStartBlank:o,onDragBlank:o,onDragOverBlank:o,onDragEnterBlank:o,onDragLeaveBlank:o,onDragEndBlank:o,onDropBlank:o}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/DataGridViewManager",["UWA/Core"],function(e){"use strict";return function(t){return{getDocument:function(){return t.getTreeDocument()},getCellID:function(e,n){return t.getLayout().getCellIDFromCoordinates({rowID:e,columnID:n})},getCellModel:function(e,n){var o=this.getCellID(e,n);return t.getCellInfosAt(o).cellModel},getCellNodeModel:function(e,n){var o=this.getCellID(e,n);return t.getCellInfosAt(o).nodeModel},getTreeNodeModelFromRowID:function(e){return t._rowModel.getVisibleNodeModel(e)},scrollToCellAt:function(e,n){var o=this.getCellID(e,n);t.scrollToCellAt(o)},getCellView:function(e,n){var o=this.getCellID(e,n);return t._getViewAt(o)},getCellContent:function(e,t){return this.getCellView(e,t).getContent()},getNumberOfRows:function(){var t=this.getDocument(),n=0;return e.is(t)&&t.getChildren(!0).forEach(function(e){n+=e.isVisible()?1:0,n+=e.getAllDescendants(!1,!0).filter(function(e){return e.isVisible()}).length}),n},getColumnIDFromDataIndex:function(e){return t.getColumnIndexByDataIndex(e)},getModelEvents:function(){return t._modelEvents},getColumns:function(){return t.columns},unselectAll:function(){t.unselectAll()},selectAll:function(){t.selectAll()},getCellClassName:function(e,t,n){return e+' .wux-layouts-datagridview-cell[cell-id="'+this.getCellID(t,n)+'"]'},empty:function(){this.getDocument().empty()},getRows:function(){return t.model},getDataGridViewModel:function(){return t.model},getRowModel:function(e){var n,o,i,r=this.getColumns(),a={};for(n=0;n<r.length;n++)"tree"===(i=r[n].dataIndex)?a[i]=this.getTreeNodeModelFromRowID(e):(o=this.getCellID(e,i),a[i]=t.getModelAt(o));return a},getColumnOptions:function(e){return t.getColumnOrGroup(e)},getColumnOptionsByPosition:function(e){var n=t.layout.getOrderedColumnsIndexes()[e];return this.getColumnOptions(n)},isColumnHidden:function(e){return!1===t.layout.getColumnVisibleState(e)||0===t.layout.getColumnWidth(e)},scrollToCellCallback:function(e,n,o){t.subscribeOnceToAllCellsRendered(o),this.scrollToCellAt(e,n)},addEventListener:function(e,n){t.addEventListener(e,n,!0)},removeEventListener:function(e,n){t.removeEventListener(e,n,!0)},getDataGridViewLayout:function(){return t.getLayout()}}}}),define("DS/DELPPWViewBehaviors/ViewBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["TreeViewPlugin"],creator:function(t,n,o){var i;return i=function(){var e=n.getElement();o.getActiveView()!==n.getId()?e.removeClassName("focus"):e.addClassName("focus")},{listenTo:function(){return{activeViewChange:i}},onStart:function(t){var o=this,i=n.getElement();e.is(i)&&(i.onclick=function(){o.setActiveView(n.getId())})},onStop:function(){},registerViewforWidgetLayout:function(e){o.registerViewforWidgetLayout(e)},unregisterViewforWidgetLayout:function(e,t){o.unregisterViewforWidgetLayout(e,t)},setCurrentView:function(e){o.setCurrentView(n.getId(),e)},setActiveView:function(){o.setActiveView(n.getId()),n.notify("activeViewChange")},getActiveView:function(){return o.getActiveView()},setFocus:function(){var t=n.getElement();e.is(t)&&(this.getActiveView()!==n.getId()?t.removeClassName("focus"):t.addClassName("focus"))}}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementedRevChooserUI",["UWA/Core"],function(e){"use strict";return function(t,n,o,i,r,a){var s,l,c,u,d,g,f,p,h,m,I,v,y,b,C,P,D,S=o.getComponent("TooltipModel"),A=null,R=null;return m=function(){c=o.createElement("div",{class:"implementedRevChooser-dlg-container"}),D=o.createElement("div",{class:"inside-accordeon-warningMessage"}),y(),b(),C()},I=function(t){l=e.merge(t,{disabled:!0,defaultWidth:"380",defaultHeight:"350",modalFlag:!1,resizableFlag:!0}),m(),(s=o.create("Dialog",{title:i.getNLSValue(l.cmdTitle),domId:l.cmdId,content:c,identifier:l.cmdId,width:l.defaultWidth,height:l.defaultHeight,modalFlag:l.modalFlag,resizableFlag:l.resizableFlag,buttons:{Cancel:o.create("Button",{onClick:function(){s.close()}}),Ok:o.create("Button",{disabled:!e.is(l.disabled)||l.disabled,emphasize:"primary",onClick:function(){var t=n.getBehavior("WUXNodeModelBehavior").getSelectedNodes(),o={};e.is(t)&&t.length>0&&(R=t[0].getReferencePID()),o.implementingId=A,o.implementedId=R,!0===l.optionsSection&&("ComboBox"===l.scopeOption&&(o.scopeCreation=d.value),e.is(l.mfgItemPrefix)&&l.mfgItemPrefix&&(o.mfgItemPrefix=f.value),e.is(g)&&(o.updateIntermediateScopedAssemblies=g.checkFlag)),l.onOKCallBack(o)}})}})).close=function(){v()}},v=function(){var t,o=n.getBehavior("WUXNodeModelBehavior"),i=n.getBehavior("TreeListViewBehavior");e.is(s)&&(e.is(p)&&o.removeEventListener(p),e.is(h)&&o.removeEventListener(h),o.emptyNodeModel(),t=i.getDataGridView(),e.is(t)&&t.remove(),s.destroy(),u=void 0,c=void 0,s=void 0),l.onCancelCallback&&l.onCancelCallback()},y=function(){var e=o.createElement("div",{}).inject(c),t=i.getNLSValue("ImplementUI.Implementing"),n=i.getNLSValue("ImplementUI.SelectImplementing");u=o.create("SelectionControl",{title:t,message:n,renderTo:e})},b=function(){var t,r,a,s=i.getNLSValue("ImplementUI.SelectImplementedRevision"),u=o.createElement("div",{class:"implementedSection-header",html:"<h5>"+s+"</h5>"}),d=o.createElement("div",{class:l.implementedRevTreeListCSSStyle}),g=n.getBehavior("WUXNodeModelBehavior"),f=n.getBehavior("TreeListViewBehavior");P=o.createElement("div",{class:"Non-BOM_Item_WarningMsg"}),u.inject(c),d.inject(c),P.inject(c),a=e.clone(l.moduleOptions),t={rowSelection:"single"},e.is(a.views)&&e.is(a.views.treeListView)&&(r=e.extend(a.views.treeListView,t),delete a.views.treeListView,a.dataGridViewOptions=r),f.createTreeListView(a),f.loadDocument(g.getWUXNodeModel()),f.getContent().inject(d)},C=function(){var t,n,r,a,s;!0===l.optionsSection&&(s=o.createElement("div",{class:"accordeon-section-container, optionsSection"}).inject(c),t=o.createElement("div",{class:"options-container"}),o.create("Accordeon",{items:[{header:i.getNLSValue("Expander.Options"),content:t,expandedFlag:!0}],style:"filled-separate"}).inject(s),e.is(l.scopeOption)&&(n=o.createElement("div",{class:"scope-option-container"}).inject(t),o.createElement("div",{class:"wux-title-textElement",text:i.getNLSValue("ImplementUI.CreateScopeForChildren")}).inject(n),"ComboBox"===l.scopeOption&&(d=o.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:i.getNLSValue("ImplementUI.ScopeCreation.AllScope"),valueItem:"AllLevel"}]}).inject(n))),e.is(l.mfgItemPrefix)&&l.mfgItemPrefix&&(r=o.createElement("div",{class:"mfgItemPrefix-option-container"}).inject(t),o.createElement("div",{class:"wux-title-textElement",text:i.getNLSValue("ImplementUI.PrefixForMfgItems")}).inject(r),r.tooltipInfos=new S({shortHelp:i.getNLSValue("ImplementUI.PrefixForMfgItems")}),f=o.create("LineEditor",{placeholder:i.getNLSValue("ImplementUI.PrefixForMfgItemsPlaceHolder")}).inject(r)),a=o.createElement("div",{class:"scope-option-container"}).inject(t),o.createElement("div",{class:"wux-title-textElement-long",text:i.getNLSValue("ImplementUI.UpdateIntermediateScopedAssemblies")}).inject(a),g=o.create("Toggle",{checkFlag:!1}).inject(a))},{createUI:function(e){I(e)},isVisible:function(){return!!e.is(s)&&s.visibleFlag},destroyUI:function(){e.is(s)&&s.close()},updateImplementingLabel:function(e){var t=n.getBehavior("WUXNodeModelBehavior");A=e,u.updateLabel([r.getReferenceModel(e)]),t.emptyNodeModel(),s.clearMessages()},updateImplementedRevnList:function(t,r,a,c){var u,d,g,f,m,I=!1,v=!1,y={},b={},C=n.getBehavior("WUXNodeModelBehavior"),S={};for(u=0;u<r.length;u++){if(g=(d=r[u]).PID,!I){if(t!==g)continue;I=!0}!0!==a?((b={})["V_Name.reference"]=d.V_Name,b["revision.reference"]=d.revision,y={id:g,referencePID:g,referenceType:d.type,grid:b,label:d.V_Name,revision:d.revision,icons:[i.getIconURLFromKey(d.PPRTYPE)]},e.owns(d,"V_IsManufacturable")&&(y.isManufacturable=d.V_IsManufacturable),C.addNodeModel(y),v=!0):a=!1}v?(c?(s.width="700",s.warning(i.getNLSValue("ImplementBehavior.Validation.ChildrenImpLinkDeletion"))):s.width=l.defaultWidth,p=C.addEventListener("select",function(t){e.is(s)&&(S=t.data.nodeModel.options,e.owns(S,"isManufacturable")&&"FALSE"===S.isManufacturable&&(f=i.getNLSValue(i.getNLSValue("ImplementBehavior.Validation.NonBOMItem",{objectName:S.label+" "+S.revision})),"UpdateMfgItemStructure"===s.identifier?(m=new e.Element("div",{class:"TNRWarning"}).inject(P),o.createElement("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert"}).inject(m),D.setHTML(f).inject(m)):s.warning(f)),s.buttons.Ok.disabled=t.data.nodeModel.getTreeDocument().getSelectedNodes().length<1)}),h=C.addEventListener("unselect",function(t){e.is(s)&&(P.empty(),s.clearMessages(),s.buttons.Ok.disabled=t.data.nodeModel.getTreeDocument().getSelectedNodes().length<1)})):(s.width=l.defaultWidth,s.error(i.getNLSValue("ImplementBehavior.Validation.NoHigherRevision")))},showMessages:function(e,t){"info"===t?s.info(e):"warning"===t?s.warning(e):"error"===t?s.error(e):n.debug("type of message is invalid")}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/OperationTime/OperationTimeColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n,o,i){var r,a=t.getBehavior("ModelBehavior"),s=t.getBehavior("WUXNodeModelBehavior"),l={EstimatedTime:"V_EstimatedTime",MeasuredTime:"V_MeasuredTime"};return r=function(t){var i,r,a,s,c,u;return i=o.getReference(t.getReferencePID()),e.is(i)&&(a=this.getColumnOrGroup("V_TimeMode.reference"),s=n.getNodeAndColumnInfos(t,a),u=n.getAuthorizedValueIndex(s.attributeInfo,s.attributeDef,i.get("V_TimeMode")),r=n.getAuthorizedValueDB(s.attributeInfo,u),c=l[r]),c},{getAttributes:function(){var t=Object.values(l);return t.push("V_UseGanttTimeSolver"),e.clone(t)},getMagnitudeSematics:function(e){var t=r.call(this,e.nodeModel);return t=i.getAttributeInfo(t),{units:n.getNLSForUnit(t)}},getCellTypeRepresentation:function(e){var t="number";return e.rowID>-1&&"??"===e.cellModel&&(t="configLoading"),t},hasCellValue:function(t){var n,o=!1;return s.isFakeNodeModel(t.nodeModel)||(n=t.nodeModel.getAttributeValue(t.dataIndex),o=e.is(n)),o},setCellValue:function(t,o){var i,s,l,c=this;i=r.call(this,t.nodeModel),e.is(i)&&e.is(a)&&(s={dataIndex:i+".reference",dicoType:"DELLmiOperationReference"},l=n.getNodeAndColumnInfos(t.nodeModel,s),e.is(l)&&a.updateModelAttribute(l.objectToBeModified.id,l,o,{onComplete:function(){var n,o=t.nodeModel.getParent();e.is(o)&&(n=c.getLayout().getCellIDFromCoordinates({rowID:o._rowID,columnID:t.columnID}),c.updateCellView(n,{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1}))},onFailure:function(){c._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})}}))}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/MessageDialog",["UWA/Core","UWA/Controls/Abstract"],function(e,t){"use strict";return function(n,o){var i,r=t.extend({defaultOptions:{className:"Message-objectslist",showHeaderMessage:!1},objectsTableBody:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableBody.inject(t)},setData:function(t){var n,i=this,r=[],a=[];i.empty(),i.options.showHeaderMessage&&null!==i.objectsTableBody&&(r.push({tag:"th",text:t.headerMessage}),n=e.createElement("tr",{html:r}),i.objectsTableHead.appendChild(n)),null!==i.objectsTableBody&&t.messages.forEach(function(r){a=[],o.log(r,t.token),a.push({tag:"td",text:e.is(r)?r:""}),n=e.createElement("tr",{html:a}),i.objectsTableBody.appendChild(n)})},empty:function(){if(e.is(this.objectsTableBody))for(;this.objectsTableBody.firstChild;)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return i=function(t,o,i){var r=e.createElement("div",{class:"Message-dialog-content-container"});e.is(o,"string")&&(o=e.createElement("span",{class:"message-dialog-message",text:o})).inject(r),e.is(i)&&i.inject(r),n.create("Dialog",{title:t,domId:"message-dialog-container",identifier:"message-dialog-container",content:r,minHeight:200,minWidth:400,modalFlag:!0,resizableFlag:!0}).close=function(){this.destroy()}},{show:function(t,n){var o,a;o=e.createElement("div",{class:"Message-objectList"}),(a=new r).setData(n),a.getContent().inject(o),i(t,null,o)},showWithMessage:function(t,n,o){let a=e.createElement("div",{class:"Message-objectList"}),s=new r;s.setData(o),s.getContent().inject(a),i(t,n,a)}}}}),define("DS/DELPPWViewBehaviors/RootsBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["RootsPlugin"],creator:function(e,t,n){return{listenTo:function(){return{ResetRootsStore:this.removeRoots}},onStart:function(){},onStop:function(){},getRoots:function(){return n.getRoots(t.getId())},isRoot:function(e){return n.isRoot(e)},getRootFilter:function(e){return n.getRootFilter(e)},getCompatibleConfigurationFilters:function(e){return n.getCompatibleConfigurationFilters(e)},removeRoots:function(){return n.removeRoots(t.getId())}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Compensation/CompensationMaterialColumnManager",["UWA/Core"],function(e){"use strict";const t=["DELFmiContQuantity_Mass.V_ContQuantity","DELFmiContQuantity_Area.V_ContQuantity","DELFmiContQuantity_Length.V_ContQuantity","DELFmiContQuantity_Volume.V_ContQuantity"],n="IsCompensation",o="DELFmiMagnitudeExt.V_DimensionType";return function(i,r,a,s,l){var c=i.getBehavior("ModelBehavior"),u=i.getBehavior("WUXNodeModelBehavior");return{getNonModelDataIndexes:function(){return[n]},getCellTypeRepresentation:function(e){return e.isHeader?"string":"boolean"},hasCellValue:function(n){var o,i,a,l=!1;if(!u.isFakeNodeModel(n.nodeModel)&&(i=this.getColumnOrGroup(n.columnID),a=r.getNodeAndColumnInfos(n.nodeModel,i),e.is(a.objectToBeModified)))for(o=0;o<t.length;o++)if(r.doesAttributeExist(a.objectToBeModified,t[o])||s.isAKindOf(a.objectToBeModified,"ProcessInstanceContinuous")&&r.isAttrApplicableForType(a.objectToBeModified,t[o])){l=!0;break}return l},getCellValue:function(n){var o,i,r=!0;if(e.is(n))for(o=0;o<t.length;o++)if(i=n.nodeModel.getAttributeValue(t[o]+".instance"),e.is(i)){r=!1;break}return r},setCellValue:function(n,u){var d,g,f,p,h,m={},I={},v={},y=s.getAttributeInfo("IsCompensation");switch(a.getReferenceModel(n.nodeModel.getReferencePID()).get(o)){case"MASS":p=t[0];break;case"AREA":p=t[1];break;case"LENGTH":p=t[2];break;case"VOLUME":p=t[3]}e.is(c)&&(u?(m.IsCompensation="TRUE",v={data:m,onComplete:function(){i.notify("editAttribute"),delete n.nodeModel.options.grid[p+".instance"],d=l.getNLSValue("TableView.SingleUpdateSuccess",{key:r.getNLS(y),value:!0}),i.info(d),i.notify("stopProgress",I)},onFailure:function(){d=l.getNLSValue("TableView.SingleUpdateFailure",{key:r.getNLS(y),value:!0}),i.warn(d),i.notify("stopProgress",I)}},i.notify("startProgress",I),h=n.nodeModel.getInstancePID(),a.updateInstance(h,v)):(g={dataIndex:p+".instance",dicoType:""},f=r.getNodeAndColumnInfos(n.nodeModel,g),u="1",h=n.nodeModel.getReferencePID(),c.updateModelAttribute(h,f,u)))}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsUtil",["UWA/Core"],function(e){"use strict";return function(t,n,o,i,r,a){var s,l,c;return c=function(t,n,o,r){var a;return!(i.getImplementLinkType()===r&&(a=i.getPathToScope(o),!e.equals(t,a)&&!e.equals(n,a)))},s=function(a,s,l,c){var u,d,g,f,p,h,m,I={},v=[],y=e.is(a,"array")?a:[a];if(u=l||s,e.is(u)){for(v=n.getImpacted(u),g=t.getBehavior("LinkBehavior"),n.getReference(u),m=0;m<v.length;m++)switch((p=v[m]).get("type")){case"DELAsmProcessCanUseCnx":g.getSecondaryRscLinksFromPrimaryLink(p).forEach(function(e){(h=e.clone()).set("from",p.get("from")),v.splice(m+1,0,h),m+=1});break;case"SecondaryCandidateResourceLink":f=g.getConnection(p.get("from")),e.is(f)&&((h=p.clone()).set("from",f.get("from")),v.splice(m,1,h))}return y.forEach(function(a){var u;"relation"===a.split(".")[1]&&(I[a]=[],(u=o.getRelationsConfiguredOnColumn(a))&&v.forEach(function(g){var f,p,h,m,v,y,b,C,P,D,S,A,R=g.get("from"),w=g.get("to"),V=g.get("type"),L=!1,E=null,M="",T=function(t,n){var o="";return t.length>0?t.forEach(function(t){if("Relation"===n||"relation"===n){let n=g.get("type");D="ProcessImplementLinkOcc"===n&&"V_usage"===t.name?i.getRoleFromModelOrComputed(g.get("PID")):e.is(g.get(t.name))?g.get(t.name):""}else D=e.is(p.get(t.name))?p.get(t.name):"";""!==o&&(o+=" "),o+=D}):o=e.is(p)?p.get("V_Name")||p.get("name")||p.get("PLM_ExternalId"):r.getNLSValue("TableView.RelationsColumn.Unknown"),o},N=function(t,n){return C=e.is(t)&&e.is(t.display_icon)?t.display_icon:null,P="relation"===C?V:n};if(!(Array.isArray(R)&&Array.isArray(w)&&(R=(S=R)[S.length-1],w=(A=w)[A.length-1],Array.isArray(c)&&e.is(i.isImplementLinkValidForOccPath,"function")&&!i.isImplementLinkValidForOccPath(S,A,c)))){if(f=l===R||s===R?w:R,h=e.is(V)?V:null,m=e.is(u[h])?u[h]:null,e.is(m)&&e.is(m.attribute_source)&&e.is(m.direction))switch(m.direction){case"To":L=l===R||s===R;break;case"From":L=l===w||s===w;break;case"Both":L=!0;break;default:L=!1,t.debug("Direction configured for "+h+" in XML is invalid.")}if(!0===L){f&&(p=Array.isArray(f)?n.getInstance(f[f.length-1]):n.getReferenceModel(f));let t,i,r=m.attribute_source.split(",");for(M="",i=0;i<r.length;i++){switch(y=r[i]){case"Relation":v=h;break;case"Type":v=e.is(p)?p.get("type"):null}b=o.getRelationsColumnDisplayOptions(v),d=e.is(v)?u[v]:null,o.isObjectConstraint()&&a===o.getConstraintRelationName()?d&&(E=d):E=e.is(b.Attribute)?b.Attribute:[],t=T(E,y),M+=t="Relation"===y&&"Relation,Type"===r.toString()?"("+t+")":t,P=N(b,v)}I[a].push({Icon:P,Value:M})}}}))}),I}},l=function(o,i,r){var a,l={},u=[],d=t.getBehavior("WUXNodeModelBehavior");if(e.is(d)){if(e.is(i))return n.getImpacted(i,!1,{excludeRelationTypes:["PrimaryResourceLinkDetail","SecondaryResourceLinkDetail"]}).forEach(function(t){var g,f,p,h,m=t.get("from"),I=t.get("to"),v=t.get("type");e.is(m,"array")&&e.is(I,"array")&&e.is(r,"array")&&(m=(p=m)[p.length-1],I=(h=I)[h.length-1],!c(p,h,r,v))||(f=i===m?I:m,e.is(f)&&(g=e.is(f,"array")?n.getInstance(f[f.length-1]):n.getReference(f),a=d.getNodeInfo(g.get("PID"),!0),e.is(a)&&(e.is(a.instancePID)?l=s(o,a.referencePID,a.instancePID,r):e.is(a.referencePID)&&(l=s(o,a.referencePID,null,r)),e.is(l)&&(u[g.id]={attributes:l}))))}),u}else t.debug("nodeModelBehavior is not available to update the relation attributes.")},{fillNodeOptions:function(i,l,c,u){var d,g,f=e.is(c)?c.PID:i.referencePID,p=s(l,f,null,u),h=n.needToQueryForConnections(f),m=o.getInverseRelationNameSet(),I=t.getPreferenceValue("navigateOnIndex"),v="Index"===I;for(g in p)if(p.hasOwnProperty(g)){if(v&&h&&m.has(g)){e.is(i.grid[g])||(i.grid[g]=[{Value:r.getNLSValue("Info.RelationsNotLoaded.Title")}]);continue}Array.isArray(i.grid[g])?(i.grid[g]=i.grid[g].filter(function(e){return e.Value!==r.getNLSValue("Info.RelationsNotLoaded.Title")}),e.is(c)&&(i.grid[g]=i.grid[g].concat(p[g]))):i.grid[g]=p[g]}if("IndexRelationsOnDemand"===I&&h)for(d in i.grid)i.grid.hasOwnProperty(d)&&"relation"===d.split(".")[1]&&(a.isMGALoadRelationsOnDemand()?i.grid[d].push({Value:"",Icon:"LinksNotFetched"}):i.grid[d].push({Value:r.getNLSValue("Info.RelationsNotLoaded.Title"),Icon:null}));return i},getRelationAttributes:function(n,i,r){var a,c,u,d,g,f,p,h,m=[],I=[],v=t.getBehavior("WUXNodeModelBehavior");if(e.is(v)){if(a=function(t){p=v.getNodeInfo(t),e.is(p,"array")&&p.forEach(function(t){e.is(t.instancePID)?(h=e.is(t.absPath,"array")?t.absPath:null,f=s(i,t.referencePID,t.instancePID,h),I[t.absPath]={attributes:f}):e.is(t.referencePID)&&(f=s(i,t.referencePID),I[t.referencePID]={attributes:f})})},n.isConnection())a(n.get("from")),a(n.get("to"));else if(g=n.changedAttributes(),e.is(g))for(c=n.get("type"),d=o.getRelationsColumnDisplayOptions(c),e.is(d)?d.Attribute.forEach(function(e){m.push(e.name)}):m[0]="V_Name",u=0;u<m.length;u++)if(g.hasOwnProperty(m[u])){I=l(i,n.get("PID"),r);break}return I}t.debug("nodeModelBehavior is not available to update the relation attributes.")}}}}),define("DS/DELPPWViewBehaviors/BI/MfgProcessBIBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin"],creator:function(t,n,o,i,r,a){var s,l,c=[],u={ItemAssignmentStatus:{Assigned_OneAdd:{colorCode:"#0000FF",label:r.getNLSValue("BI.ItemStatus.Assigned_OneAdd")},Assigned_AllAdd:{colorCode:"#CC79A7",label:r.getNLSValue("BI.ItemStatus.Assigned_AllAdd")},Assigned_AllRemove:{colorCode:"#FFFF00",label:r.getNLSValue("BI.ItemStatus.Assigned_AllRemove")},Assigned_AddNRemove:{colorCode:"#00FF00",label:r.getNLSValue("BI.ItemStatus.Assigned_AddNRemove")},Assignable:{colorCode:"#FFA500",label:r.getNLSValue("BI.ItemStatus.Assignable")},NonAssignable:{colorCode:"#A9A9A9",label:r.getNLSValue("BI.ItemStatus.NonAssignable")},Inconsistent:{colorCode:"#000000",label:r.getNLSValue("BI.ItemStatus.Inconsistent")}},SystemUpdateStatus:{UpToDate:{colorCode:"#008000",label:r.getNLSValue("BI.ProcessStatus.UpToDate")},InDirectlyImpacting:{colorCode:"#FFFF00",label:r.getNLSValue("BI.ProcessStatus.InDirectlyImpacting")},DirectlyImpacting:{colorCode:"#FF0000",label:r.getNLSValue("BI.ProcessStatus.DirectlyImpacting")},Inconsistent:{colorCode:"#000000",label:r.getNLSValue("BI.ProcessStatus.Inconsistent")}}},d=function(t){var o,i,r=(i=n.getBehavior("TreeListViewBehavior").getColumnsByDisplayType("BIEssentials")).length>0?i[0]:null,a={nodeOptions:{}};return e.is(r)&&(o={colorCode:u[l].Inconsistent.colorCode,tooltip:u[l].Inconsistent.label,status:"Inconsistent"},o=e.is(c[t])?c[t]:o,a.nodeOptions[r]={colorCode:o.colorCode,tooltip:o.tooltip,status:o.status}),a},g=function(t){var o,i;e.is(l)&&(o=t[l],i=u[l],e.is(o,"array")&&o.length>0&&(o.forEach(function(e){var t,n,o=e.get("id"),r=e.get("status");t=i[r].colorCode,n=i[r].label,c[o]={rirPath:o,colorCode:t,tooltip:n,status:r}}),function(){var t,o=n.getBehavior("WUXNodeModelBehavior"),i=o.getAllDescendants();o&&Object.keys(c).length>0&&(o.prepareUpdate(),t={callback:function(t,n){t.forEach(function(e){var t=e.getRIRpath(),n=d(t);n.nodeOptions&&e.updateOptions(n.nodeOptions)}),e.is(n,"function")&&n()},globalArray:i,context:this,blockSize:100},a.getExecuteByBlockPromise(t).then(function(){o.pushUpdate()}))}()))},f=function(){var t,o=n.getBehavior("TreeListViewBehavior"),i=n.getBehavior("WUXNodeModelBehavior"),r=o.getColumnsByDisplayType("BIEssentials"),a={};c=[],o&&i&&r&&(t=i.getAllDescendants(),r.forEach(function(n){a[n]={colorCode:"transparent",tooltip:""},e.is(t,"array")&&0<t.length&&i.withTransactionUpdate(function(){t.forEach(function(e){e.updateOptions(a)})})}))},p=function(){var e=n.getBehavior("WUXNodeModelBehavior");o.getBICmdState()&&e.getSelectedNodesInfo().length>0&&o.computeBI()};return{listenTo:function(){return{updateBIStatus:g,resetBIModel:f,refreshCmd:p}},onStart:function(t){s=t||{},e.is(s.biStatusType)&&(l=s.biStatusType)},onStop:function(){},getNodeOptions:function(t,n){var i={nodeOptions:{},taggerOptions:{}};return o.getBICmdState()&&e.is(n)&&(i=d(n)),i},getBICmdState:function(){return o.getBICmdState()},resetBIModelCollection:function(){return o.resetBIModelCollection()}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";var n=function(e){var t,n=!1;return e.isHeader||(n=(t=e.nodeModel.getAttributeValue("cellInfo"))&&t.candidateEntries&&t.candidateEntries.length>1),n};return t.singleton({name:"MILColumnManager",init:function(e){this._parent(e)},hasMILCellValue:function(e){return!0},getCellTypeRepresentation:function(e){var t;if(e.isHeader)return"string";switch(e.dataIndex){case"MIL_previous":case"MIL_manufactured":t="url";break;case"MIL_rerouting":t=n(e)?"enumString":"string";break;case"MIL_suggestion":t="enumString";break;default:t="string"}return t},getCellClassName:function(t){var n,o,i="";return e.is(t.nodeModel)&&(o=t.nodeModel.options.milStatus,"MIL_status"===t.dataIndex?(n=t.cellView.getContent(),"fail"===o?i="mil-fail-status":"success"===o?i="mil-success-status":"ignore"===o&&(i="mil-ignored-status"),""!==i&&n.hasClassName(i)&&(i="")):"MIL_manufactured"!==t.dataIndex&&"MIL_previous"!==t.dataIndex||(i="icon-text-column"),"MIL_status"!==t.dataIndex&&"success"===o&&(i+=" mil-succeeded-row"),"MIL_status"!==t.dataIndex&&"ignore"===o&&(i+=" mil-ignored-row")),i},getCellValue:function(t){var n,o,i=t.nodeModel.options.grid,r=function(e,t){return{label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}}};switch(t.dataIndex){case"MIL_previous":return n=i.cellInfo.PreviousProdIconUrl,r(i[t.dataIndex],n);case"MIL_manufactured":return n=i.cellInfo.MfgItemIconUrl,r(i[t.dataIndex],n);case"MIL_rerouting":return o=i[t.dataIndex],"object"===e.typeOf(o)&&e.is(this.isCellInEdition,"function")&&(this.isCellInEdition(t.cellID)&&(o=i[t.dataIndex].valueItem),o=i[t.dataIndex].labelItem),o;case"MIL_suggestion":return e.is(i[t.dataIndex])&&!t.isHeader&&e.is(this.isCellInEdition,"function")?this.isCellInEdition(t.cellID)?i[t.dataIndex].value:i[t.dataIndex].label:null;default:return i[t.dataIndex]}},getCellSemantics:function(e){var t,o=e.nodeModel.options,i=function(e){var t={};return e.forEach(function(e){t[e.labelItem]=e.valueItem}),t};return"MIL_rerouting"===e.dataIndex?o.grid&&o.grid.cellInfo&&n(e)&&(t={possibleValues:i(o.grid.cellInfo.candidateEntries)}):"MIL_suggestion"===e.dataIndex&&o.grid&&o.grid.cellInfo&&(t={possibleValues:i(o.grid.cellInfo.suggestionToPerformEntries)}),t},setMILValue:function(t,n,o){var i,r,a;if("MIL_suggestion"===t.dataIndex){if(!e.is(o)||""===o)return;n.nodeModel.options.grid.cellInfo.suggestionToPerformEntries.forEach(function(e){e.valueItem===o&&(a={label:e.labelItem,value:e.valueItem,tooltip:e.tooltipItem,getLabel:function(){return this.label}})}),n.nodeModel.setAttribute(t.dataIndex,a),e.is(n.nodeModel)&&e.is(n.nodeModel.options)&&(i=n.nodeModel.options,e.is(i.grid)&&(i.grid.MIL_suggestion=a,e.is(i.grid.cellInfo)&&(i=i.grid.cellInfo,e.is(i.action)&&(i.action=o))))}else if("MIL_rerouting"===t.dataIndex){if(!e.is(o)||""===o)return;n.nodeModel.options.grid.cellInfo.candidateEntries.forEach(function(e){e.valueItem===o&&(r=e)}),n.nodeModel.setAttribute(t.dataIndex,r)}},getCellEditableState:function(t){var o,i,r=!0;if(e.is(t.nodeModel)&&e.is(t.nodeModel.options))switch(i=t.nodeModel.options.milStatus,"MIL_suggestion"!==t.dataIndex||!e.is(i)||"success"!==i&&"ignore"!==i||(r=!1),t.dataIndex){case"MIL_suggestion":o=r;break;case"MIL_rerouting":o=n(t);break;default:o=!1}return o}})}),define("DS/DELPPWViewBehaviors/MfgProcessReplaceBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin","DicoPlugin","ImplementPlugin"],creator:function(t,n,o,i,r,a,s,l,c){var u,d,g;return u={replaceByLatest:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/ByLatestRevision",dialogTitle:r.getNLSValue("Dialog.ReplaceByLatest.Report")},replaceByExisting:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/WithExisting",dialogTitle:r.getNLSValue("Dialog.ReplaceByExisting.Report")},replaceByNewRevision:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/ByNewRevision",dialogTitle:r.getNLSValue("Dialog.ReplaceByNewRevision.Report")},replaceByNew:{URL:"dsmfg/private/V0/invoke/MfgProcess/Replace/WithExisting",dialogTitle:r.getNLSValue("Dialog.ReplaceByNew.Report")}},d=function(t,o,i,a){var l={};n.notify("startProgress",l),new Promise(function(r,a){s.webServiceRequest({url:u[t].URL,method:"POST",headers:s.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode({instancesToReplace:o,existingRefPID:i,oneDelmiaAggregationMode:n.getPreferenceValue("oneDelmiaAggregationMode")}),onFailure:a,onTimeout:a,onCancel:a,onComplete:r})}).then(function(e){g(t,e,l,a)},function(o,i){n.notify("stopProgress",l),e.is(i)&&e.is(i.message,"string")&&n.warn(r.getNLSValue("Error."+t+".Title"),a),n.log(r.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+r.getNLSValue("failed"),a)}).catch(function(){n.notify("stopProgress",l),n.debug(r.getNLSValue("Error."+t+".Title"),a),n.log(r.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+r.getNLSValue("failed"),a)})},g=function(t,i,s,l){var c,d,g,f,p,h=[],m=[],I=a.getConnectionParser();c={silentMode:!1,stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},d=i.succeeded||[],g=i.failed||[],d.forEach(function(e){e.instancesAndReferences.forEach(function(e){var t=e.attributesValue;Object.prototype.hasOwnProperty.call(t,"isInstanceOf")?(t.queriedForConnections=!0,c.stackedInstances.push(t)):(t.queriedForConnections=!0,m.push(t.PID),c.stackedReferences.push(t))}),e.connections.forEach(function(e){I.parse(e,c)}),c.deletedObjects=c.deletedObjects.concat(e.deletedObjects),h.push(e.message)}),g.forEach(function(e){h.push(e.message)}),c.onComplete=function(){var i=n.getBehavior("UXFactoryBehavior"),a=n.getPreferenceValue("refreshBIOnAuthoring");i.showMessage(u[t].dialogTitle,{messages:h,token:l}),e.is(a,"boolean")&&!0===a&&o.getBICmdState()&&o.computeBI(),n.notify("replace",{}),n.notify("stopProgress",s),n.log(r.getNLSValue("replaceCmd.LogMessage",{replaceType:t})+" "+r.getNLSValue("completed"),l)},f=function(){a.addToCollections({stackedInstances:c.stackedInstances,silentMode:c.silentMode,onComplete:function(){a.addToCollections({stackedConnections:c.stackedConnections,stackedReferences:c.stackedReferences,deletedObjects:c.deletedObjects,silentMode:c.silentMode,onComplete:c.onComplete})}})},p=function(){n.debug("Fetching getDescendantsFromServer for replaced Instances failed."),c.onComplete()},a.getDescendantsFromServer(m,f,{onFailure:p,silentMode:!0,forceDBMode:!0})},{listenTo:function(){return{}},onStart:function(e){},onStop:function(){},replace:function(t,o){var s,g=[],f=[],p=i.getSelectionsWithPaths(n.getId()),h=n.log(r.getNLSValue("replaceCmd.LogMessage",{replaceType:t}));if(e.is(p)&&p.length>0&&((p=p[0]).forEach(function(e){g.push(e.path.join(",")),f=f.concat(e.path.splice(0,e.path.length-1))}),s=p.every(function(e){var t=e.id;return-1===f.indexOf(t)})),e.is(u[t]))if(g.length<1)n.warn(r.getNLSValue("Error.NoSelections.Title"),h);else if(s)if("replaceByExisting"===t){let i=a.getReference(o),s=[c.getPartialScopeLinkType()],u={relationTypes:s,onComplete:function(){var e=n.getBehavior("MfgProcessBehavior"),i=a.getReference(o);g.every(function(t){var n={child:i,targetAbsPath:t.split(",")};return!0===e.isInstPossible(n)})?d(t,g,o,h):n.warn(r.getNLSValue("ModelBehavior.InsertInstance.HOP.Error",{refName:i.get("V_Name")}),h)}};e.is(i)?l.isAKindOf(i,"DELLmiHeaderOperationReference")?a.getConnectionsByModel(i,null,u):d(t,g,o,h):a.getDescendantsFromServer(o,u.onComplete,{gridIDs:s,silentMode:!0,forceDBMode:!0,expandLevel:0})}else d(t,g,o,h);else n.warn(r.getNLSValue("Error.replaceDirectOrIndirectChild.Title"),h);else n.warn(r.getNLSValue("Error.InvalidReplaceOperation.Title"),h)}}}}}),define("DS/DELPPWViewBehaviors/LoadObjectBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["RootsPlugin","DatabasePlugin"],creator:function(t,n,o,i){var r;return{listenTo:function(){return{LoadRecentContent:this.loadObjectsFromRecent,LoadRelationsinViews:this.onLoadRelationsinViews}},onStart:function(e){r=e||{}},onStop:function(){},loadObjectsFromRecent:function(t){var i={action:[],parameters:[],promises:[],dragNDropInfo:{}},r=[],a=[],s=[],l={},c=n.getBehavior("TreeListViewBehavior"),u=n.getBehavior("WUXNodeModelBehavior"),d=function(){i.promises.forEach(function(t){var i=function(t){e.is(t.modelsNotRetrieved,"array")&&t.modelsNotRetrieved.forEach(function(e){o.removeRoot(n.getId(),e)})};t.then(i,i)})};a=e.is(t)&&e.is(t.store)?o.getStoreRoots(t.store,n.getId()):o.getRoots(n.getId()),(s=u.getRoots()).length>0&&Array.isArray(a)?a[0].forEach(function(e){-1===s.indexOf(e)&&r.push(e)}):r=Array.isArray(a)?a[0]:[],e.is(c)&&e.is(u)&&Array.isArray(r)&&r.length>0&&(i.action[0]="addRoot",i.parameters[0]={PIDsToAddRoot:r},i.dragNDropInfo.info={loadObjectsInOwnView:!0},n.notify("startProgress",l),u.prepareUpdate(),c.processDropEffect(i).then(function(){u.pushUpdate(),n.notify("stopProgress",l),n.notify("onRecentContentLoaded"),d()}).catch(function(){u.pushUpdate(),n.notify("stopProgress",l),n.debug("loadObjectsFromRecent failed"),d()}))},onLoadRelationsinViews:function(t){var o,a,s,l,c=[],u=!!e.is(t)&&t.selectConnectedObjects,d=n.getBehavior("SelectionBehavior"),g=n.getBehavior("WUXNodeModelBehavior"),f=[],p=[],h={expandLevel:0,forceDBMode:!0,silentMode:!0},m=!!e.is(r.isLoadObjectsinViews)&&r.isLoadObjectsinViews;0===(l=g.getSelectedNodes()).length&&m&&(s=(l=d.getSelections()).every(function(e){return 0===e.length}),l=!0===s?g.getAllDescendants():null),e.is(l)&&(l.forEach(function(t){e.is(t.getID())&&c.push(t.getID()),e.is(t.getInstancePID())&&c.push(t.getInstancePID())}),o=function(t){var o=t.connections,r=[],a=[],s=[],l=[],d=function(){f.length>0&&(f.forEach(e=>{var t=i.transformToRIROccurrencePath(e);t.length>1?p.push(t):l.push(t[0])}),l.forEach(e=>{p.some(t=>t.includes(e))||p.push([e])}),n.notify("addOccurrece",[p]),u&&s.length>0&&n.notify("selectNodes",[s]))};e.is(o,"array")&&o.length>0&&(o.forEach(function(t){var n=e.is(t.get("from"))?t.get("from"):[],o=e.is(t.get("to"))?t.get("to"):[],i=function(e){e=Array.isArray(e)?e:[e],c.some(function(t){return e.includes(t)})||(f.push(e),s.push(e[e.length-1]),e.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}))};i(n),i(o)}),r.forEach(function(e){i.isReference(e)||i.isInstance(e)||a.push(e)}),a.length>0?i.getDescendantsFromServer(a,function(){var t,n,o=[];r.forEach(function(r){t=i.getInstance(r),e.is(t)&&((n=function(e){-1!==o.indexOf(e)||i.isReference(e)||o.push(e)})(t.get("isInstanceOf")),n(t.get("isAggregatedBy")))}),o.length>0?i.fetchRefList(o,e.merge({onComplete:function(){d()}},h)):d()},h):d())},a=function(){n.debug("Fetching getDescendantsFromServer for Load Relations in Views failed.")},c.length>0&&i.getDescendantsFromServer(c,o,e.merge(h,{onFailure:a,fetchInverseRelations:!0})))}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n,o){var i,r;return i=function(e){var t={};t.node=e.nodeModel,o.executeCommand("Relations",t)},r=function(r){var a,s,l=void 0,c=this,u=this.getColumnOrGroup(r.columnID),d=r.nodeModel.getAttributeValue(u.dataIndex);return e.is(d,"array")&&d.length>0&&(s=(a=d)[0],l={icon:{iconPath:n.getIconURLFromKey(s.Icon),iconSize:{width:"22px",height:"22px"}},label:s.Value,iconName:s.Icon,func:o.areModuleColumnsImmutable(t.getId())?null:i.bind(c,r),relations:a}),l},{getCellValueForExport:function(t){var n,o,i="";return t.rowID<0?t.cellModel:(n=this.getColumnOrGroup(t.columnID),o=t.nodeModel.getAttributeValue(n.dataIndex),e.is(o,"array")&&o.forEach(function(t,n){e.is(t.Value)?i+=t.Value:i+=t.toString(),n!==o.length-1&&(i+=", ")}),i)},getCellValue:function(e){return r.call(this,e)},hasCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=e.nodeModel.options.grid;return Array.isArray(n[t.dataIndex])&&0!==n[t.dataIndex].length},getCellClassName:function(t){var n,o="";return e.is(t.nodeModel)&&(n=t.nodeModel.getAttributeValue(t.dataIndex),o=Array.isArray(n)&&n.length>1?"relation-column-multivalued":"relation-column"),o}}}}),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/Mutex",["UWA/Core"],function(e){"use strict";return function(){var t=!1,n=[];return{acquire:function(){var o=e.Promise.deferred();return t?n.push(o):(t=!0,o.resolve()),o.promise},release:function(){var o=null;t&&(n.length>0?o=n.shift():t=!1),e.is(o)&&o.resolve()},destroy:function(){for(;n.length>0;)n.shift().resolve()}}}}),define("DS/DELPPWViewBehaviors/BI/BIBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["BIPlugin","SelectionPlugin","ResourcePlugin","DatabasePlugin","ImplementPlugin","DicoPlugin"],creator:function(t,n,o,i,r,a,s,l){var c,u,d,g={},f={},p=[],h=function(){return c.pprTypes.indexOf("PROCESS")>-1},m=function(){return c.pprTypes.indexOf("PART")>-1||c.pprTypes.indexOf("PRODUCT")>-1},I=function(t){var o,i,r={colorCode:f.Inconsistent.colorCode,tooltip:f.Inconsistent.label,status:"Inconsistent"},s=(i=n.getBehavior("TreeListViewBehavior").getColumnsByDisplayType("BIEssentials")).length>0?i[0]:null,c={nodeOptions:{},taggerOptions:{}};if(""===t)return c={nodeOptions:null,taggerOptions:null};if(e.is(s)){if("ManufacturingItemUpdateStatus"===s&&(o=t.split(","))[o.length-1],e.is(p[t]))r=p[t];else{const e=t.split(","),n=e[e.length-1];l.getParentTypes(a.getReferenceModel(n).get("type")).includes("VPMRepReference")&&(r={colorCode:"transparent",tooltip:""})}c.nodeOptions[s]={colorCode:r.colorCode,tooltip:r.tooltip,status:r.status},c.taggerOptions={absolutePath:t,status:r.status,dispValue:r.tooltip}}return c},v=function(t){e.is(t,"array")&&t.length>0&&(t.forEach(function(t){var n,o,i,r,a=t.get("status"),s=t.get("type"),l=e.is(t.get("isRef")),c=[];"ProductsAssignmentStatus"===s?(n=(c=(r=t.get("id")).split(","))[c.length-1],o=g[a].colorCode,i=g[a].label):"MfgItemsUpdateStatus"===s&&(n=(c=(r=t.get("id")).split(","))[c.length-1],e.is(t.get("MadeFrom_UseCase_AttValue"))&&"MadeFrom_UseCase_Att_Remove"!==a&&(a=a+"."+t.get("MadeFrom_UseCase_AttValue")),o=f[a].colorCode,i=f[a].label),p[e.is(r)?r:n]={PID:n,colorCode:o,tooltip:i,type:s,occurrencePath:r,status:a,isRef:l}}),function(){var t,i=n.getBehavior("WUXNodeModelBehavior"),r=n.getBehavior("TaggerBehavior"),s=i.getAllDescendants();i&&Object.keys(p).length>0&&(i.prepareUpdate(),t={callback:function(t,n){!0===o.getBICmdState()&&t.forEach(function(e){var t=e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath().toString(),n=I(t);n.nodeOptions&&e.updateOptions(n.nodeOptions),r&&n.taggerOptions&&r.addExternalTags(n.taggerOptions)}),e.is(n,"function")&&n()},globalArray:s,context:this,blockSize:100},a.getExecuteByBlockPromise(t).then(function(){i.pushUpdate(),r.displayExternalTags(),n.notify("BIDone",n.getId())}))}())},y=function(e){var t;h()?t=e.ProcessStatus:m()&&(t=e.ProductStatus),v(t)},b=function(e){h()?v([e]):m()&&v([e])},C=function(e){h()?v([e]):m()&&v([e])},P=function(){var t,o=n.getBehavior("TreeListViewBehavior"),i=n.getBehavior("WUXNodeModelBehavior"),r=n.getBehavior("TaggerBehavior"),a=o.getColumnsByDisplayType("BIEssentials"),s={};p=[],o&&i&&a&&(t=i.getAllDescendants(),a.forEach(function(n){s[n]={colorCode:"transparent",tooltip:""},e.is(t,"array")&&0<t.length&&i.withTransactionUpdate(function(){t.forEach(function(e){e.updateOptions(s)})})}),r&&r.removeExternalTags())},D=function(){var e=n.getBehavior("WUXNodeModelBehavior");o.getBICmdState()&&e.getSelectedNodesInfo().length>0&&o.computeBI()},S=function(e){var t=Array.isArray(e)?e:[e],n=!1;return o.isBIComputed()&&(n=t.some(function(e){return e.get("type")===u})),n},A=function(t){var i,r=Array.isArray(t)?t:[t];!0===o.getBICmdState()&&(h()||m())&&(S(r)?h()&&o.computeBI():(i=!1===o.getBICmdState()?{silent:!0}:{},r.forEach(function(t){!function(t,i){var r,a,s,l,c,u,g,f=i||{},p=n.getBehavior("WUXNodeModelBehavior");(r=t.get("type"))===d&&e.is(p)&&(a=t.get("from"),s=t.get("to"),l=s.join(),g=o.getBIModelCollection(),h()&&(c=p.getNodeInfo(a),Array.isArray(c)&&c.forEach(function(t){var n,i,a=t.absPath.join();n=g.findWhere({id:a}),e.is(n)?n.set({pointedPaths:l,status:o.getProcessStatus(r,l)},f):(i={id:a,pointedPaths:l,status:o.getProcessStatus(r,l),type:"MfgItemsUpdateStatus"},g.add(i,f))})),m()&&(u=p.getNodeInfo(s),Array.isArray(u)&&u.forEach(function(t){var n,i,s,l,c=t.absPath.join();n=g.findWhere({id:c}),e.is(n)?(i=n.get("implementingPIDs"),Array.isArray(i)?i.includes(a)||(s=i.concat(a),n.set({implementingPIDs:s,status:o.getProductStatus(s,r)},f)):n.set({implementingPIDs:[a],status:o.getProductStatus([a],r)},f)):(l={id:c,implementingPIDs:[a],status:o.getProductStatus([a],r),type:"ProductsAssignmentStatus"},g.add(l,f))})))}(t,i)})))},R=function(t){var i,r=Array.isArray(t)?t:[t];!0===o.getBICmdState()&&(h()||m())&&(S(r)?h()&&o.computeBI():(i=!1===o.getBICmdState()?{silent:!0}:{},r.forEach(function(t){!function(t,i){var r,a,s,l,c,u,g=i||{},f=n.getBehavior("WUXNodeModelBehavior");(r=t.get("type"))===d&&e.is(f)&&(a=t.get("from"),s=t.get("to"),u=o.getBIModelCollection(),h()&&(l=f.getNodeInfo(a),Array.isArray(l)&&l.forEach(function(t){var n,i=t.absPath.join();n=u.findWhere({id:i}),e.is(n)&&n.set({pointedPaths:"",status:o.getProcessStatus(r)},g)})),m()&&(c=f.getNodeInfo(s),Array.isArray(c)&&c.forEach(function(t){var n,i,s,l=t.absPath.join();n=u.findWhere({id:l}),e.is(n)&&(i=n.get("implementingPIDs"),Array.isArray(i)&&(-1!==(s=i.indexOf(a))?(i.splice(s,1),n.set({implementingPIDs:i,status:o.getProductStatus(i,r)},g)):n.set({status:o.getProductStatus([],r)},g)))})))}(t,i)})))};return{listenTo:function(){return{updateBIStatus:y,addBIModel:b,changeBIModel:C,refreshCmd:D,resetBIModel:P,addConnection:A,removeConnection:R}},onStart:function(e){c=e||{},u=s.getScopeLinkType(),d=s.getImplementLinkType(),g={AssociatedWithScope:{colorCode:"#006400",label:r.getNLSValue("BI.PrdStatus.AssociatedWithScope")},NotAssigned:{colorCode:"#FFA500",label:r.getNLSValue("BI.PrdStatus.NotAssigned")},AssignedIndirectly:{colorCode:"#00008B",label:r.getNLSValue("BI.PrdStatus.AssignedIndirectly")},AssignedDirectly:{colorCode:"#ADD8E6",label:r.getNLSValue("BI.PrdStatus.AssignedDirectly")},AssignedMoreThanOnce:{colorCode:"#bd07b0",label:r.getNLSValue("BI.PrdStatus.AssignedMoreThanOnce")},NotAssignable:{colorCode:"#808080",label:r.getNLSValue("BI.PrdStatus.NotAssignable")},NotApplicable:{colorCode:"#A9A9A9",label:r.getNLSValue("BI.PrdStatus.NotApplicable")},PartiallyAssigned:{colorCode:"#8B4513",label:r.getNLSValue("BI.PrdStatus.PartiallyAssigned")}},f={NotApplicable:{colorCode:"#A9A9A9",label:r.getNLSValue("BI.MfgStatus.NotApplicable")},ScopeGood:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.ScopeGood")},ScopeToOldRev:{colorCode:"#7030a0",label:r.getNLSValue("BI.MfgStatus.ScopeToOldRev")},ScopeToAncestorBranch:{colorCode:"#7030a0",label:r.getNLSValue("BI.MfgStatus.ScopeToAncestorBranch")},ScopeToNew:{colorCode:"#FFA500",label:r.getNLSValue("BI.MfgStatus.ScopeToNew")},ScopeNoCorrespondingProductOccurence:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.ScopeNoCorrespondingProductOccurence")},ImplGood:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.ImplGood")},ImplGoodWithGoodScope:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.ImplGoodWithGoodScope")},ImplCandidatePrdOccWithGoodScope:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithGoodScope")},ImplCandidatePrdOccWithGoodScopeEvolveInstance:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithGoodScopeEvolveInstance")},ImplCandidatePrdOccWithScopeToOldRev:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithScopeToOldRev")},ImplCandidatePrdOccWithScopeToAncestorBranch:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccWithScopeToAncestorBranch")},ImplCandidatePrdOccButNotCorrespondingScope:{colorCode:"#FFA500",label:r.getNLSValue("BI.MfgStatus.ImplCandidatePrdOccButNotCorrespondingScope")},ImplCandPrdOccToSamePrd:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToSamePrd")},ImplCandPrdOccToSamePrdEvolveInstance:{colorCode:"#0000FF",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToSamePrdEvolveInstance")},ImplCandPrdOccToOtherRev:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToOtherRev")},ImplCandPrdOccToAncestorBranch:{colorCode:"#9370DB",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToAncestorBranch")},ImplCandPrdOccToDiffPrd:{colorCode:"#FFA500",label:r.getNLSValue("BI.MfgStatus.ImplCandPrdOccToDiffPrd")},ImplNoCandProdOccurence:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.ImplNoCandProdOccurence")},ImplNoProductOccurence:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.ImplNoProductOccurence")},IntermediateGood:{colorCode:"#008000",label:r.getNLSValue("BI.MfgStatus.IntermediateGood")},IntermediateChildrenNotUptoDate:{colorCode:"#FFFF00",label:r.getNLSValue("BI.MfgStatus.IntermediateChildrenNotUptoDate")},Inconsistent:{colorCode:"#000000",label:r.getNLSValue("BI.MfgStatus.Inconsistent")},MadeFrom_UseCase_Att_Add:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Add")},MadeFrom_UseCase_Att_Remove:{colorCode:"#FF0000",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Remove")},MadeFrom_UseCase_Att_Good:{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good")},"MadeFrom_UseCase_Att_Good.ManufacturingMadeFrom":{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.ManufacturingMadeFrom")},"MadeFrom_UseCase_Att_Good.ManufacturingAssembly":{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.ManufacturingAssembly")},"MadeFrom_UseCase_Att_Good.EngineeringMadeFrom":{colorCode:"#44ebe8",label:r.getNLSValue("BI.MfgStatus.MadeFrom_UseCase_Att_Good.EngineeringMadeFrom")}}},onStop:function(){},getNodeOptions:function(t){var n={nodeOptions:{},taggerOptions:{}};return o.getBICmdState()&&e.is(t)&&(n=I(t)),n},getBICmdState:function(){return o.getBICmdState()},resetBIModelCollection:function(){return o.resetBIModelCollection()},clearPseudoBIStatus:function(){o.clearPseudoBIStatus()}}}}}),define("DS/DELPPWViewBehaviors/DataGridViewBehavior/DataGridViewBehavior",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/CoreEvents/Events","DS/Menu/Menu"],function(e,t,n,o){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","SelectionPlugin","DicoPlugin","WebServicePlugin"],creator:function(i,r,a,s,l,c,u){var d,g,f=t,p=i.getLogger(),h=["CreateAssembly","Provide","CreateMaterial","CreateKit","Installation","ProcessContinuousProvide"],m=function(e){var t=!1;return h.forEach(function(n){c.isAKindOf(e,n)&&(t=!0)}),t},I=function(t,n){var o=[],i=function(t){return e.is(n,"function")&&(d.removeRoots(),n(null)),t},r={context:this,onFailure:i};a.navigateScopesFromDB(t,function(t){var r={context:this,forceDBMode:!0,onComplete:function(t){e.is(n)&&n(t)},onFailure:function(e){return e}};e.is(t)&&e.is(t,"array")&&t.length>0?(t.forEach(function(e){m(e.type)&&o.push(e.physicalid)}),a.fetchRoot(o,r)):i(null)},r)},v=function(t,o){var i={context:this,onComplete:function(t){e.is(t)&&(a.addReference(t),n.publish({event:"DELMFNCommands/CreateMfgItemAndScopeCmd",data:o}))}};p.log("createObjectAndScope fetchRoot objectId: "+t),a.fetchRoot(t,i),l.setSelection("IMPMOD",[{id:t,path:[]}])},y=function(t,o){var i={context:this,onComplete:function(t){e.is(t)&&(a.addReference(t),n.publish({event:"DELMFNCommands/CreateMfgItemAndResultingProductCmd",data:o}))}};p.log("createObjectAndResultingProduct fetchRoot objectId: "+t),a.fetchRoot(t,i),l.setSelection("RESULTINGMOD",[{id:t,path:[]}])},b=function(t){var n=r.getBehavior("WUXNodeModelBehavior"),o=n.getRoots();e.is(t)&&t.length>=1&&t.forEach(function(t){e.is(o,"array")&&-1===o.indexOf(t.get("PID"))&&n.addNode(t,{silentMode:!0,withLinksResolved:!1,loadRootOnly:!0,doNotExpand:!0,loadChildren:!1,fromXEN:!0})})},C=function(e){f.publish("DS/PADUtils/PADCommandProxy/refresh",{data:{authored:{modified:[e],fromFacet:!0}}})};return{onStart:function(){i.addExternalListener("createMfgItemAndScope",function(){C(g)}),i.addExternalListener("createMfgItemAndResultingProduct",function(){C(g)}),f.subscribe("DS/PADUtils/PADCommandProxy/refresh",function(t){var n=t.data.authored.modified,o=t.data.authored.fromFacet,i=[],s=null;e.is(n,"array")&&!e.is(o)?n.forEach(function(t){i.onComplete=function(t){m(t.get("type"))?(s=d.getNodesFromIdentifierStringArray([t.get("PID")]),e.is(s)&&1===s.nodeModelArray.length&&(s.nodeModelArray[0].setAttribute("organization.reference",t.get("organization")),s.nodeModelArray[0].setAttribute("owner.reference",e.is(t.get("ds6w:responsible"))?t.get("ds6w:responsible"):t.get("owner")),s.nodeModelArray[0].setAttribute("current.reference",t.get("current")),s.nodeModelArray[0].setAttribute("project.reference",t.get("project")),s.nodeModelArray[0].setLabel(t.get("V_Name")))):c.isAKindOf(t._attributes.type,"VPMReference")&&r.getPreferenceValue("isReleaseSyncXENEnabled")&&I(t.get("PID"),function(n){var o=u.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0});e.is(n)&&e.is(n,"array")&&n.length>0&&a.getCurrentStates([t.get("PID")],o,function(i){var s=[];e.is(i)&&"RELEASED"===i.get(t.get("PID"))&&(n.forEach(function(e){s.push(e.get("PID"))}),a.getCurrentStates(s,o,function(i){var s=[];n.forEach(function(t){var n=e.is(i)?i.get(t.get("PID")):null;e.is(n)&&"RELEASED"!==n&&c.isAKindOf(t.get("type"),"Provide")&&s.push(t)}),s.length>0&&new Promise(function(e,t){a.syncMaturity(s,o,!0,e,t)}).then(function(){s.forEach(function(n){var o=d.getNodesFromIdentifierStringArray([n.get("PID")]);e.is(o)&&1===o.nodeModelArray.length&&o.nodeModelArray[0].setAttribute("current.reference",t.get("current"))})}).catch(function(){s.forEach(function(e){r.notify("addReference",e)}),r.warn("The object(s) has been created but the state(s) hasn't been able to be changed")})}))})})},i.forceDBMode=!0,a.fetchRoot(t,i)}):function(e){I(g,e)}(b)})},setContextualMenu:function(e){e.onContextualEvent=function(e){var t=[],o=e.cellInfos.nodeModel.options.referencePID,i=r.getBehavior("WUXNodeModelBehavior");return t.push({type:"PushItem",fonticon:{family:"DSFontIcon",content:"wux-ui-3ds wux-ui-3ds-move-to"},title:s.getNLSValue("Command.MoveTo"),label:s.getNLSValue("Command.MoveTo"),action:{callback:function(){d.getRoots().forEach(function(e){o===e.options.referencePID&&e.select()}),n.publish({event:"FacetCommandManager/beginCommand",data:{commandName:"ActionBar_ChangeOwner"}})}}}),t.push({type:"PushItem",fonticon:{family:"DSFontIcon",content:"wux-ui-3ds-database-delete"},title:s.getNLSValue("Command.Delete"),label:s.getNLSValue("Command.Delete"),action:{callback:function(){var e,t,n={},l={};n.onComplete=function(){e.forEach(function(e){d.removeRoot(e),C(e.options.referencePID)})},n.onFailure=function(){r.warn(s.getNLSValue("DeleteObject.Failure"))},d.getRoots().forEach(function(e){o===e.options.referencePID&&e.select()}),t=(e=i.getSelectedNodes()).map(e=>a.getReference(e.options.referencePID)),l.object=t,l.options=n,r.notify("DeleteReferenceFromXen",l)}}}),t}},setTreeDocument:function(e){d=e},onStop:function(){},setSecurityContext:function(t){e.is(t,"string")&&n.publish({event:"DELPPXEN/CustomizeSecurityContext",data:t})},getContent:function(){},getScopes:function(e,t,n){g=e,I(e,t)},removeRoots:function(){e.is(d)&&d.removeRoots()},fetchRoot:function(e,t){t.forceDBMode=!0,a.fetchRoot(e,t)},refreshNode:function(e){!function(e){var t=d.getRoots();d.prepareUpdate(),t.forEach(function(t){t.options.referencePID===e.id&&(t.setAttributeValue("Organization",e.attributes.organization),t.setAttributeValue("Owner",e.attributes.owner))}),d.pushUpdate()}(e)},refreshTable:function(e){I(g,e)},renderMenu:function(e,t,n){e&&n&&(g=t,function(e,t){if(!e||!Array.isArray(t))throw new Error("unable to build the menu");o.show(t,{position:{x:e.left,y:e.bottom},submenu:"outside"})}(e,function(e){return[{name:"CreateAssemblyAndScopeAction",icon:s.getIconURLFromKey("CreateAssemblyAndScope"),title:s.getNLSValue("Title.MakeAssembly"),tooltip:s.getNLSValue("Title.MakeAssembly"),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateAssembly"}]})}}},{name:"CreateAssemblyAndResultingProductAction",icon:s.getIconURLFromKey("CreateAssemblyAndResultingProduct"),title:s.getNLSValue("Title.ResultingProduct.MakeAssembly"),tooltip:s.getNLSValue("Title.ResultingProduct.MakeAssembly"),type:"PushItem",action:{callback:function(){y(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateAssembly"}]})}}},{name:"CreateMaterialAndScopeAction",icon:s.getIconURLFromKey("CreateMaterialAndScope"),title:s.getNLSValue("Title.MakeMaterial"),tooltip:s.getNLSValue("Title.MakeMaterial"),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateMaterial"}]})}}},{name:"CreateMaterialAndResultingProductAction",icon:s.getIconURLFromKey("CreateMaterialAndResultingProduct"),title:s.getNLSValue("Title.ResultingProduct.MakeMaterial"),tooltip:s.getNLSValue("Title.ResultingProduct.MakeMaterial"),type:"PushItem",action:{callback:function(){y(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/CreateMaterial"}]})}}},{name:"CreateProvideAndScopeAction",icon:s.getIconURLFromKey("CreateProvideAndScope"),title:s.getNLSValue("Title.Buy"),tooltip:s.getNLSValue("Title.Buy"),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/Provide"}]})}}},{name:"CreateProvideAndResultingProductAction",icon:s.getIconURLFromKey("CreateProvideAndResultingProduct"),title:s.getNLSValue("Title.ResultingProduct.Buy"),tooltip:s.getNLSValue("Title.ResultingProduct.Buy"),type:"PushItem",action:{callback:function(){y(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/Provide"}]})}}},{name:"CreateInstallationAndResultingProductAction",icon:s.getIconURLFromKey("CreateInstallProcessAndResultingProduct"),title:s.getNLSValue("Title.ResultingProduct.InstallProcess"),tooltip:s.getNLSValue("Title.ResultingProduct.InstallProcess"),type:"PushItem",action:{callback:function(){y(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/Installation"}]})}}},{name:"CreateContinuousProvidedMaterialLengthAndScope",icon:s.getIconURLFromKey("ProcessContinuousProvideLengthAndScope"),title:s.getNLSValue("Title.ContinuousProvidedMaterialAndScope",{dimension:s.getNLSValue("Dimension.LENGTH")}),tooltip:s.getNLSValue("Title.ContinuousProvidedMaterialAndScope",{dimension:s.getNLSValue("Dimension.LENGTH")}),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/ProcessContinuousProvide"},{ID:"DisplayedInTableView",Value:"PROCESS",Mode:"In"},{ID:"V_DimensionType",Value:"LENGTH",Mode:"In"}]})}}},{name:"CreateContinuousProvidedMaterialMassAndScope",icon:s.getIconURLFromKey("ProcessContinuousProvideMassAndScope"),title:s.getNLSValue("Title.ContinuousProvidedMaterialAndScope",{dimension:s.getNLSValue("Dimension.MASS")}),tooltip:s.getNLSValue("Title.ContinuousProvidedMaterialAndScope",{dimension:s.getNLSValue("Dimension.MASS")}),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/ProcessContinuousProvide"},{ID:"DisplayedInTableView",Value:"PROCESS",Mode:"In"},{ID:"V_DimensionType",Value:"MASS",Mode:"In"}]})}}},{name:"CreateContinuousProvidedMaterialAreaAndScope",icon:s.getIconURLFromKey("ProcessContinuousProvideAreaAndScope"),title:s.getNLSValue("Title.ContinuousProvidedMaterialAndScope",{dimension:s.getNLSValue("Dimension.AREA")}),tooltip:s.getNLSValue("Title.ContinuousProvidedMaterialAndScope",{dimension:s.getNLSValue("Dimension.AREA")}),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/ProcessContinuousProvide"},{ID:"DisplayedInTableView",Value:"PROCESS",Mode:"In"},{ID:"V_DimensionType",Value:"AREA",Mode:"In"}]})}}},{name:"CreateContinuousProvidedMaterialVolumeAndScope",icon:s.getIconURLFromKey("ProcessContinuousProvideVolumeAndScope"),title:s.getNLSValue("Title.ContinuousProvidedMaterialAndScope",{dimension:s.getNLSValue("Dimension.VOLUME")}),tooltip:s.getNLSValue("Title.ContinuousProvidedMaterialAndScope",{dimension:s.getNLSValue("Dimension.VOLUME")}),type:"PushItem",action:{callback:function(){v(e,{arguments:[{ID:"ReferenceType",Mode:"In",Value:"DELAsmAssemblyModelDisciplines/ProcessContinuousProvide"},{ID:"DisplayedInTableView",Value:"PROCESS",Mode:"In"},{ID:"V_DimensionType",Value:"VOLUME",Mode:"In"}]})}}}]}(t)))},isAvailableType:function(e){return c.isAKindOf(e,"VPMReference")},createObjectAndScope:function(e,t){v(e,t)},createContinuousProvidedMaterialAndScope:function(t,n){!function(t,n){var o={context:this,onComplete:function(t){e.is(t)&&(a.addReference(t),r.notify("InsertCmd",n))}};p.log("createObjectAndScope fetchRoot objectId: "+t),a.fetchRoot(t,o),l.setSelection("IMPMOD",[{id:t,path:[]}])}(t,n)},createObjectAndResultingProduct:function(e,t){y(e,t)},getModel:function(){return d},setSelectedObject:function(e){g=e},hide:function(){},show:function(){}}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/AltSubInfoContainer",[],function(){"use strict";const e=(...e)=>{let t=new Map;for(const n of e)for(const e of n)t.set(...e);return t};class t{constructor(e,t){this.ids=e,this.infoMap=new Map(t)}static empty(){return new t([],new Map)}addId(e){return this.ids.push(e),this}setInfo(e,t){return this.infoMap.set(e,t),this}combine(n){const o=this.ids.concat(n.ids),i=e(this.infoMap,n.infoMap);return new t(o,i)}}return t}),define("DS/DELPPWViewBehaviors/RoutingsViewer3DBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["Viewer3DPlugin","DatabasePlugin","RootsPlugin"],creator:function(t,n,o,i,r){var a,s,l,c,u,d,g,f,p,h,m,I,v,y;return a=function(e){return"PRODUCT"===i.getPPRType(e)},s=function(e){return"PROCESS"===i.getPPRType(e)},l=function(e){return"SYSTEM"===i.getPPRType(e)},c=function(e){var t,n=[];return l(e)?i.getImpacted(e,null,{relationTypes:["ProcessImplementLink"]}).forEach(function(e){var o=e.get("to");(t=i.getImpacted(o,null,{relationTypes:["ProductImplementLink"]})).length>0&&n.push(t[0].get("to"))}):s(e)&&(t=i.getImpacted(e,null,{relationTypes:["ProductImplementLink"]})).length>0&&n.push(t[0].get("to")),n},u=function(e){var t=[];return a(e)?i.getImpacted(e,null,{relationTypes:["ProductImplementLink"]}).forEach(function(e){var n=e.get("from");i.getImpacted(n,null,{relationTypes:["ProcessImplementLink"]}).forEach(function(e){t.push(e.get("from"))})}):s(e)&&i.getImpacted(e,null,{relationTypes:["ProcessImplementLink"]}).forEach(function(e){t.push(e.get("from"))}),t},d=function(t){var o,i=!1;return e.is(t)&&(o=r.getRoots(n.getId())[0],i=(t=Array.isArray(t)?t:[t]).some(function(e){return o.indexOf(e)>-1})),i},I=function(e){var t=[];e.forEach(function(e){var n;(n=u(e)).length>0&&d(n)||t.push(e)}),t.length>0&&o.remove3D(t)},p=function(e){var t=[];return(e=Array.isArray(e)?e:[e]).forEach(function(e){var n,o,i;"ProcessImplementLink"===e.get("type")?(n=e.get("from"),o=e.get("to"),d(n)&&(t=t.concat(c(o)))):"ProductImplementLink"===e.get("type")&&(o=e.get("from"),i=e.get("to"),n=u(o),d(n)&&t.push(i))}),t},g=function(e){var t,n=[];l(e)?n=c(e):s(e)&&(t=u(e),d(t)&&(n=c(e))),n.length>0&&o.drop3D(n)},f=function(e){var t=[];l(e)&&(t=c(e)),t.length>0&&I(t)},h=function(e){var t;(t=p(e)).length>0&&o.drop3D(t)},m=function(e){var t;(t=p(e)).length>0&&I(t)},v=function(t){var i,r,a,s=[],l=[],c=[];t.changed.isSelected||o.selectIn3D([]),t.selectedNodeIds.length>0&&((i=(r=n.getBehavior("SelectionBehavior")).getSelectionsWithPaths()[0]).length>0?(i.forEach(e=>{e.path.length>0?s.push(e.path):e.id&&c.push(e.id)}),a=n.getBehavior("LinkBehavior"),c.length>0?c.forEach(e=>{l=l.concat(a.getConnectedObjects(e,e,{relationTypes:["ProcessImplementLink"]}))}):s.length>0&&s.forEach(e=>{l=l.concat(a.getConnectedObjects(e[e.length-1],e,{relationTypes:["ProcessImplementLink","ProcessImplementLinkOcc"]}))})):(i=r.getSelectionsWithPaths()[1]).forEach(t=>{t.path.length>0?l.push(t.path):e.is(t.id)&&l.push(t.id)}),y(l))},y=function(e){var t=[],r=n.getBehavior("ProductAbsPathHelperBehavior"),a=[];e.forEach(function(e){var n,o;"string"==typeof e||e instanceof String?(n=e,o={relationTypes:["ProductImplementLink"]}):(n=e[e.length-1],o={relationTypes:["ProductImplementLinkOcc","ProductImplementLink"]}),i.getImpacted(n,null,o).forEach(function(n){t.push({from:e,type:n.get("type"),to:n.get("to")})})}),t.forEach(function(e){var t;Array.isArray(e.from)?(t=r.getImplementedProductAbsPath(e.from,e.to),a.push(t||e.to)):a.push(e.to)}),o.selectIn3D(a)},{listenTo:function(){return{select:v,addRootNode:g,removeRoot:f,addConnection:h,removeConnection:m}},onStart:function(){},apply3DFilter:function(){n.debug("RoutingsViewer3DBehavior::apply3DFilter is not supported at moment")},change3DVisiblity:function(e,t,o){n.debug("RoutingsViewer3DBehavior::change3DVisiblity is not supported at moment"),o.reject("RoutingsViewer3DBehavior::change3DVisiblity is not supported at moment")}}}}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/ManageCommands",["DS/Core/Events"],function(e){"use strict";return{showProcurementView:function(){e.publish({event:"ManageCommands/ProcurementView"})},showStructureView:function(){e.publish({event:"ManageCommands/StructuralGrouping"})}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManagerMFN",["UWA/Core","UWA/Class"],function(e,t){"use strict";const n=(e=>(...t)=>t.join(e))(" "),o=function(){let e=new Map;return{generateFor:function(t){let n;return n=e.has(t)?e.get(t)+1:1,e.set(t,n),n}}},i="MIL_previous",r="MIL_rerouting",a="MIL_suggestion",s="MIL_status",l="success",c="fail",u=t=>{let n=!1;return e.is(t)&&(n=!0,(t=>e.is(t,"string")&&0===t.length)(t)&&(n=!1)),n},d=t=>n=>o=>{let i=!1;if(!o.isHeader){const r=o.nodeModel;if(e.is(r)){const o=r.getAttributeValue("cellInfo");if(e.is(o)){const e=o[t];i=n(e)}}}return i},g=d("candidateEntries")(e=>Array.isArray(e)&&e.length>1),f=d("suggestionToPerformEntries")(e=>Array.isArray(e)&&e.length>0),p=t=>{let n=!1;const o=t.options.milStatus;return e.is(o)&&(n=o===l),n};return t.singleton({name:"MILColumnManager",init(e){this._parent(e)},hasMILCellValue:e=>!0,getCellTypeRepresentation(e){let t;if(e.isHeader)t="string";else switch(e.dataIndex){case i:t="url";break;case r:t=g(e)?"enumString":"string";break;case a:t=f(e)?"enumString":"string";break;default:t="string"}return t},getCellClassName(t){const o="",r="mil-success-status",a="mil-fail-status",u="icon-text-column",d=(e=>t=>e.cellView.getContent().hasClassName(t))(t);let g=o;if(e.is(t.nodeModel)){const e=t.nodeModel.options.milStatus,o=t.dataIndex;o===s?e===l?d(r)||(g=r):e===c&&(d(a)||(g=a)):(o===i&&(g=u),e===l&&(g=n(g,"mil-succeeded-row")))}return g},getCellValue(t){const n=(e,t)=>({label:e,getLabel:function(){return this.label},icon:{iconPath:t,iconSize:{width:"22px",height:"22px"}}});let o=null;if(e.is(t.nodeModel)){const s=t.nodeModel.options.grid,l=t.dataIndex;switch(l){case i:if(e.is(s[l])&&!t.isHeader){const t=s.cellInfo;e.is(t)&&(o=n(s[l],t.PreviousProdIconUrl))}break;case r:case a:e.is(s[l])&&(t.isHeader||e.is(this.isCellInEdition,"function")&&(o=this.isCellInEdition(t.cellID)?s[l].value:s[l].label));break;default:o=s[l]}}return o},getCellSemantics(t){const i=t=>{const i=(e=>t=>{const o=e.generateFor(t);return n(t,(e=>"["+e+"]")(o))})(new o);return t.reduce((t,n)=>{const o=n.labelItem;if(e.owns(t,o)){t[i(o)]=n.valueItem}else t[o]=n.valueItem;return t},{})};let s=null;if(e.is(t.nodeModel)){const n=t.nodeModel.options.grid,o=t.dataIndex;if(e.is(n)){const l=n.cellInfo;e.is(l)&&(o===r?g(t)&&(s={possibleValues:i(l.candidateEntries)}):o===a&&f(t)&&(s={possibleValues:i(l.suggestionToPerformEntries)}))}}return s},setMILValue(t,n,o){if(e.is(n.nodeModel)){let i=n.nodeModel.options.grid;const s=t.dataIndex;if(s===a){if(u(o)){let t=i.cellInfo;if(e.is(t)){const r=t.suggestionToPerformEntries.find(e=>e.valueItem===o);if(e.is(r)){const e={label:r.labelItem,value:r.valueItem,tooltip:r.tooltipItem,getLabel:function(){return this.label}};n.nodeModel.setAttribute(s,e),i[a]!==e&&(i[a]=e),t.action=o}}}}else if(s===r&&u(o)){let t=i.cellInfo;if(e.is(t)){const a=t.candidateEntries.find(e=>e.valueItem===o);if(e.is(a)){const e={label:a.labelItem,value:a.valueItem,tooltip:a.labelItem,getLabel:function(){return this.label}};n.nodeModel.setAttribute(s,e),i[r]!==e&&(i[r]=e)}if("#SELECT"===o)t.candidateId=null,t.candidateOccPath=null;else{const e=o.split(",");t.candidateId=function(e,t=null){const n=e.length;return n>0?e[n-1]:t}(e,""),t.candidateOccPath=e}}}}},getCellEditableState(t){let n;switch(t.dataIndex){case a:n=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;p(e)?n=!1:e.isExpanded()&&e.hasChildren()&&(n=!1)}return n})(t);break;case r:n=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;n=!p(e)&&g(t)}return n})(t);break;default:n=!1}return n}})}),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/AbstractTreeNodeModel",["UWA/Core","DS/Tree/TreeNodeModel"],function(e,t){"use strict";var n=function(e){return e.getNodeSource()===t.NODE_SOURCE.GROUPING},o=function(n){n=n||{},this._logger=this.facade,this._referencePID=null,this._instancePID=null,this._type=null,this.options={label:"",badges:{},icons:[],grid:{},thumbnail:null,useAsyncPreExpand:!0},this.setReferencePID(n.referencePID),this.setReferenceType(n.referenceType),this.options=e.extend(this.options,n),n.instancePID&&this.setInstancePID(n.instancePID),n.linkPID&&this.setLinkPID(n.linkPID),t.call(this,this.options)};function i(e){e._getFilterInfo||(e._getFilterInfo=o.prototype._getFilterInfo.bind(e),e._getChildrenFilterInfo=o.prototype._getChildrenFilterInfo.bind(e),e._removeChildrenFilterInfo=o.prototype._removeChildrenFilterInfo.bind(e),e.filterInChild=o.prototype.filterInChild.bind(e),e.filterOutChild=o.prototype.filterOutChild.bind(e))}return o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype.name="AbstractTreeNodeModel",o.prototype.addChild=function(e,o,i){var r,a,s,l,c,u=!0;return(r=t.prototype.addChild.call(this,e,o))&&!0!==i&&(u=!0,l=r.getAttributeValue("V_TreeOrder"),(a=r.getPreviousBrother())&&l<a.getAttributeValue("V_TreeOrder")&&(u=!1),(s=r.getNextBrother())&&l>s.getAttributeValue("V_TreeOrder")&&(u=!1),u||(c=r.getParent().getChildren().sort(function(e,t){return n(e)&&n(t)?0:n(e)?-1:n(t)?1:e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")}).map(function(e){return n(e)?"":e.getInstancePID()}).indexOf(r.getInstancePID()),r=t.prototype.addChild.call(this,r,c))),r},o.prototype.getID=function(){return this.getReferencePID()},o.prototype.setReferencePID=function(t){return e.is(t,"string")?(this._referencePID=t,this.getReferencePID()):null},o.prototype.setInstancePID=function(t){return e.is(t,"string")?(this._instancePID=t,this.getInstancePID()):null},o.prototype.setLinkPID=function(t){return e.is(t,"string")?(this._linkPID=t,this.getLinkPID()):null},o.prototype.setReferenceType=function(t){return e.is(t,"string")?(this._type=t,this.getReferenceType()):null},o.prototype.getReferencePID=function(){return this._referencePID},o.prototype.getInstancePID=function(){return this._instancePID},o.prototype.getLinkPID=function(){return this._linkPID},o.prototype.getReferenceType=function(){return this._type},o.prototype.getRootPID=function(){var t=this.getRoot(!0);return e.is(t)?t.getReferencePID():null},o.prototype.getAbsolutePath=function(){var e,t,o=this.getParents(),i=[];for(e=o.length-1;e>=0;e--)t=o[e],n(t)||i.push(t.getInstancePID());return i=i.concat([this.getInstancePID()]).slice(1)},o.prototype.getRIRpath=function(){var e,t,o,i=this.getParents(),r=[];for(o=i.length-1;o>=0;o--)e=i[o],n(e)||((t=e.getInstancePID())&&r.push(t),r.push(e.getReferencePID()));return r.length>0&&!n(this)?(r.push(this.getInstancePID()),r.push(this.getReferencePID())):n(this)||r.push(this.getReferencePID()),r},o.prototype.getChildrenPID=function(){var e=this.getChildren(!0),t=[];return Array.isArray(e)&&(t=e.map(function(e){return e.getInstancePID()})),t},o.prototype.getSiblingsPID=function(){var t=this.getParent(),n=[];return e.is(t)&&(e.is(t.getChildrenPID)||(t.getChildrenPID=o.prototype.getChildrenPID.bind(t)),n=t.getChildrenPID()),n},o.prototype.expand=function(e){var n=e||{};return n.previousNodeState={},n.previousNodeState[this.getReferencePID()]=this.getState(),t.prototype.expand.call(this,n)},o.prototype._removeFilterInfo=function(){delete this.options._filterInfo},o.prototype._removeChildrenFilterInfo=function(){delete this.options._childrenFilterInfo},o.prototype.filterInChild=function(t){var o,i,r,a,s,l,c,u,d=this._getChildrenFilterInfo();if(d&&(o=d.childrenBeforeFiltering)&&(i=o.indexOf(t))>=0&&(r=t._getFilterInfo())&&r.parentBeforeFiltering===this){if(a=this.getChildren(!0))for(c=0;c<a.length;c++)if(s=a[c],!n(s)&&o.indexOf(s)>i){l=s;break}delete r.parentBeforeFiltering,e.is(t.options.isRootAttached)?!0===t.options.isRootAttached&&this.insertBefore(t,l):this.insertBefore(t,l),e.is(this.setState,"function")&&this.setState({state:d.expandStateBeforeFiltering}),t._removeFilterInfo(),u=d.filteredOutChildren.indexOf(t),d.filteredOutChildren.splice(u,1),0===d.filteredOutChildren.length&&this._removeChildrenFilterInfo()}},o.prototype.filterIn=function(e){var t,n,o,r=this._getFilterInfo();r&&r.parentBeforeFiltering&&(i(t=r.parentBeforeFiltering),t.filterInChild(this)),e&&(n=(o=this._getChildrenFilterInfo())&&o.childrenBeforeFiltering?o.childrenBeforeFiltering:this.getChildren(!0))&&n.forEach(function(t){t.filterIn(e)})},o.prototype._getFilterInfo=function(e){return!this.options._filterInfo&&Boolean(e)&&(this.options._filterInfo={}),this.options._filterInfo},o.prototype._getChildrenFilterInfo=function(e){return!this.options._childrenFilterInfo&&Boolean(e)&&(this.options._childrenFilterInfo={}),this.options._childrenFilterInfo},o.prototype.filterOutChild=function(t){var n,o,i=this.getChildren(!0);if(i.indexOf(t)<0)throw"Not a child";(n=this._getChildrenFilterInfo(!0)).childrenBeforeFiltering||(n.childrenBeforeFiltering=i&&i.length>0?i.slice(0):[],o={noExpandState:"noChildren",expandingState:"expanding",partiallyExpandedState:"partiallyExpanded",collapseState:"expanded",expandState:"collapsed"},e.is(this._expandState)&&(n.expandStateBeforeFiltering=o[this._expandState])),t._getFilterInfo(!0).parentBeforeFiltering=this,e.is(this.removeChild,"function")?this.removeChild(t):this.removeRoot(t,!0,!0),e.is(this.setState,"function")&&this.setState({state:n.expandStateBeforeFiltering}),n.filteredOutChildren||(n.filteredOutChildren=[]),n.filteredOutChildren.push(t)},o.prototype.filterOut=function(){var e=this.isRoot(!0)?this.getTreeDocument():this.getParent();null!==e&&(i(e),e.filterOutChild(this))},o.prototype.isRoot=function(o){var i=!1,r=this.getParent();return i=(o=!!e.is(o,"boolean")&&o)&&r&&n(r)&&0===r.getNodeDepth()?1===this.getNodeDepth():t.prototype.isRoot.call(this),i},o.prototype.getRoot=function(o){var i,r,a;if(o=!!e.is(o,"boolean")&&o,i=t.prototype.getRoot.call(this),o&&n(i))if(null===this.getInstancePID())i=this;else for(a=(r=this.getParents()).length-1;a>=0;a--)if(!n(r[a])){i=r[a];break}return i},o.prototype.getChildren=function(i){var r;return i=!!e.is(i,"boolean")&&i,r=t.prototype.getChildren.call(this),i&&Array.isArray(r)&&(r=r.reduce(function(e,t){var r;return n(t)?(r=o.prototype.getChildren.call(t,i),Array.isArray(r)&&(e=e.concat(r))):e.push(t),e},[])),r},o.prototype.getVisibleChildren=function(i,r){var a;return r=!!e.is(r,"boolean")&&r,a=t.prototype.getVisibleChildren.call(this,i),r&&Array.isArray(a)&&(a=a.reduce(function(e,t){var a;return n(t)?(a=o.prototype.getVisibleChildren.call(t,i,r),Array.isArray(a)&&(e=e.concat(a))):e.push(t),e},[])),a},o.prototype.getAllDescendants=function(o,i){var r=null,a=!!e.is(i,"boolean")&&i;return e.is(o,"array")&&(o=null),r=t.prototype.getAllDescendants.call(this,o),a&&e.is(r,"array")&&r.length>0&&(r=r.filter(function(e){return!n(e)})),r},o.NODE_SOURCE=t.NODE_SOURCE,o}),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightLinkHelper",["UWA/Core"],function(e){"use strict";return function(t,n,o,i){var r,a,s,l="CrossHighlightLinkHelper",c=o.getImplementLinkType();return r=function e(t,n){var o,r,a,s;if(r=i.getInstance(t).get("isInstanceOf"),0===(a=i.getInstancesFromCollection(r).map(function(e){return e.get("PID")})).length)return[];if((s=a.filter(function(e){return-1!==n.indexOf(e)})).length>0)return s;for(o=0;o<a.length&&!((s=e(a[o],n)).length>0);o++);return s},a=function(e){var t,n,o,i,a,s=[],l=[];for(l.push(e[0]),t=0;t<e.length-1;t++){for(s=[],o=e[t],n=0;n<o.length;n++)-1!==l[t].indexOf(o[n])&&(a=e[t+1],i=r(o[n],a),s=s.concat(i));l.push(s)}return l.length>0?l[l.length-1]:[]},s=function(t){return i.findSomeConnection(function(n){var o=c===n.get("type"),i=e.equals(t,n.get("to"));return o&&i}).map(function(e){return e.get("from")})},{getImplementLinks:function(e){return n?o.getImplLinksOfImplementing(e):o.getImplLinksOfImplemented(e)},isImplemented:function(e){var t,n=!1;return t=this.getImplementLinks(e),Array.isArray(t)&&t.length>0&&(n=!0),n},getParentScoped:function(t){var n,i,r,a=null;return Array.isArray(t)&&t.length>0&&(r=o.findInstanceWhoseParentIsScoped(t),e.is(r)&&(0===r.absPathIndex?i=r.instanceModel.get("isAggregatedBy"):n=t.slice(0,r.absPathIndex))),e.is(n)?a=n:e.is(i)&&(a=i),a},getScopedNodePrdAbsolutePath:function(n){var r,a,s,c,u,d=function(t){var n,o=!1;return n=i.getReferenceModel(t),e.is(n)&&"PROCESS"===n.get("PPRTYPE")&&(o=!0),o};if(Array.isArray(n)){if(0===(r=n).length)return t.debug(l,"Error: getScopedNodePrdAbsolutePath: expected reference id for root node"),null;if(!d(r[r.length-1]))return t.debug(l,"Error: getScopedNodePrdAbsolutePath: expected a Manufacturing Item"),null;if(!o.isScoped(r))return null;if(o.isUnderScope(r)){u=[],s=r.slice(0);do{if(!o.isUnderScope(s))break;if(c=o.getImplLinksOfImplementing(s),!e.is(c)||c.length>1||0===c.length){u=null;break}u=c[0].get("to").concat(u),s=this.getParentScoped(s)}while(Array.isArray(s))}else c=o.getImplLinksOfImplementing(r),u=e.is(c)&&1===c.length?c[0].get("to"):[]}else u=d(a=n)&&o.isScoped(a)?[]:null;return u},getImplementingItemInstIDs:function(t){var n,r,l,u,d,g,f,p,h=[],m=null;if(Array.isArray(t)){if(0===(n=t).length)return null;r=n.slice(0);do{l=o.getPathToScope(r),u=i.findSomeConnection(function(t){var n=c===t.get("type"),o=e.equals(l,t.get("to"));return n&&o}).map(function(e){return e.get("from")}),!e.is(m)&&n.length!==r.length&&u.length>0&&(m=u),h.unshift(u),r=this.getParentScoped(r)}while(Array.isArray(r));d=!1,e.equals(o.getPathToScope(n),n)||e.is(m)&&(d=!0),d?(g=h[h.length-1].length>0?a(h):h[h.length-1],f=s(n),p=g.concat(f)):p=h.length>0?h[h.length-1]:[]}else p=null;return p}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ManageCapableResources/MCRColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";return t.singleton({name:"MCRColumnManager",init:function(e){this._parent(e)},hasCellValue:function(e){return!0},getCellTypeRepresentation:function(e){var t="string";return e.isHeader?"string":("Preferred"===e.dataIndex&&(t="functionIcon"),t)},getCellClassName:function(e){return""},getCellValue:function(e){var t=e.nodeModel.options.grid;return"Preferred"===e.dataIndex?""===t[e.dataIndex]?"FALSE":"TRUE":t[e.dataIndex]},getCellSemantics:function(e){var t;return"Preferred"===e.dataIndex&&(t={icon:e.nodeModel.options.grid.Preferred}),t},setValue:function(e,t,n){},getCellEditableState:function(e){return!1}})}),define("DS/DELPPWViewBehaviors/BulkTreeSearchHelper",["UWA/Core"],function(e){"use strict";return function(t,n){var o,i,r,a,s,l,c,u;return o=function(t,n){var o,i=-1,r=t.length;for(o=0;o<r;o++)if(e.equals(t[o],n)){i=o;break}return i},i=function(e,t){var n,o,i=[],r=e.length;for(n=e.indexOf(t);n>-1&&(i.push(n),!((o=n+1)>=r));)n=e.indexOf(t,o);return i},r=function(t,n,o){var i,r,a;a=Array.isArray(o)?o:[o],e.is(t)&&(r=t[i=JSON.stringify(n)],e.is(r)?t[i]=r.concat(a):t[i]=a)},a=function(e,t){var n=[];return 1===t.length?n=n.concat(e):t.length>1&&e.forEach(function(e){var o,i,r,a,s=e;for(o=1;o<t.length;o++){for(r=s.getChildren(!0),a=!1,i=0;i<r.length;i++)if(r[i].getInstancePID()===t[o]){s=r[i],a=!0;break}if(!a)break}a&&n.push(s)}),n},s=function(t,n){var o,i,r,a,s,l=t;if(l.isVisible()){for(o=t.isRoot(!0)?0:1;o<n.length&&(s=l.getVisibleChildren(!1,!0),e.is(s)&&0!==s.length);o++)for(i=0;i<s.length;i++)if(s[i].getInstancePID()===n[o]){l=s[i];break}a=l}else{for(r=l.getParent();!r.isVisible();)r=r.getParent();a=r}return a},l=function(n){e.is(n,"function")&&t.getRoots(!0).forEach(function(e){var t,o,i=[];for(i.push(e);i.length>0;)t=i.pop(),n(t),o=t.getChildren(!0),Array.isArray(o)&&o.forEach(function(e){i.push(e)})})},c=function(o){var i;return i=t.getRoots(!0).map(function(e){return e.getReferencePID()}),o.map(function(t){var o,r=n.getInstance(t[0]),a=null;return e.is(r)&&(o=r.get("isAggregatedBy"),i.indexOf(o)>-1&&(a=o)),a},[])},u=function(n){var o,a,s,u,d=Object.create(null),g=!1,f=!1;for(s=0,u=(o=c(n)).length;s<u&&(e.is(o[s])?g||(g=!0):f||(f=!0),!g||!f);s++);return g&&t.getRoots(!0).forEach(function(t){var a,s=t.getReferencePID();e.is(s)&&(a=i(o,s)).length>0&&a.forEach(function(e){r(d,n[e],t)})}),f&&(a=o.map(function(t,o){var i=null;return e.is(t)||(i=n[o][0]),i}),l(function(t){var n,o=t.getInstancePID();e.is(o)&&(n=i(a,o)).length>0&&n.forEach(function(e){r(d,t.getAbsolutePath(),t)})})),d},{getNodeModels:function(t,n){var s,c,u,d,g=!e.is(n)||n,f=[],p=[],h=[],m=[],I=[],v=[],y=Object.create(null),b={found:[],notFound:[]};return(t=Array.isArray(t)?t:[t]).forEach(function(e){Array.isArray(e)?p.push(e):f.push(e)}),c=p.map(function(e){return e[0]}),l(function(t){var n,o,a,s=!1;a=t.getInstancePID(),e.is(a)&&(s=(n=f.indexOf(a))>-1,(o=i(c,a)).length>0&&o.forEach(function(e){r(y,p[e],t)})),s||(s=(n=f.indexOf(t.getReferencePID()))>-1),s&&(I.push(f[n]),h.push(t))}),Object.keys(y).forEach(function(e){var t,n,o=JSON.parse(e);t=y[e],v.push(o),n=a(t,o),m=m.concat(n)}),g||(h.length<f.length&&(u=f.filter(function(e){return-1===I.indexOf(e)})).length>0&&(b.notFound=b.notFound.concat(u)),m.length<p.length&&(d=p.filter(function(e){return-1===o(v,e)})).length>0&&(b.notFound=b.notFound.concat(d))),(s=h.concat(m)).length>0&&(s=s.filter(function(e,t,n){return n.indexOf(e)===t}),b.found=s),b},getLastVisibleNodeModels:function(t){var n,o=[],a=[],u=new Set,d=Object.create(null);return t.forEach(function(e){Array.isArray(e)?a.push(e):o.push(e)}),n=c(a).filter(function(t){return e.is(t)}),l(function(t){var s,l,c,u,g=!1,f=t.getInstancePID();t.isRoot(!0)&&(c=t.getReferencePID(),e.is(c)&&(l=i(n,c)).length>0&&l.forEach(function(e){r(d,a[e],t)})),e.is(f)&&(g=(s=o.indexOf(f))>-1),g||(g=(s=o.indexOf(t.getReferencePID()))>-1),g&&(u=[o[s]],r(d,u,t))}),u=Object.keys(d).reduce(function(e,t){var n,o=JSON.parse(t);return n=d[t],Array.isArray(n)&&n.length>0&&n.forEach(function(t){var n;n=s(t,o),e.add(n)}),e},u),Array.from(u)},searchPathsPartially:function(e){var t,n,i,r={found:[],notFound:[]};return e.length>0&&(t=u(e),n=Object.keys(t).map(function(e){return JSON.parse(e)}),r.found=r.found.concat(n),n.length<e.length&&(i=e.filter(function(e){return-1===o(n,e)})).length>0&&(r.notFound=r.notFound.concat(i))),r},traverseTreeListView:function(e){l(e)}}}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/GroupingDialog",["UWA/Core"],function(e){"use strict";return function(t,n,o){var i,r;return i=function(i){var a=e.createElement("div",{class:"Message-dialog-content-container"});(r=new(o.getComponent("ComboBox"))({elementsList:["type","current","organization","owner","V_NeedDedicatedSystem","V_isLastVersion","revision"],selectedIndex:0})).inject(a),n.create("Dialog",{title:"GROUPING DIALOG",content:a,minHeight:200,minWidth:400,modalFlag:!0,resizableFlag:!0,buttons:{Ok:n.create("Button",{onClick:function(e){var t=e.dsModel.dialog,n=r.value;t.close(),i(n)}}),Cancel:n.create("Button",{onClick:function(e){e.dsModel.dialog.close(),t.notify("toggleCmdCheckHeaderState",{cmdName:"ShowGroupingDataGridView",cmdState:!1})}})}}).close=function(){this.destroy(),t.notify("toggleCmdCheckHeaderState",{cmdName:"ShowGroupingDataGridView",cmdState:!1})}},{show:function(e){i(e)}}}}),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/MfgProcessCrossHighlightBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin"],creator:function(t,n,o){var i,r,a,s,l,c,u,d,g,f,p,h,m,I,v,y,b,C="MfgProcessCrossHighlightBehavior";return s=function(t){var o=n.getBehavior(t);return e.is(o)||n.debug(C+" : "+t+"behavior is not available "),o},c=function(){i=Object.create(null)},l=function(e,t){i[e.toString()]=t},u=function(e){delete i[e.toString()]},d=function(){return Object.keys(i).reduce(function(e,t){return e.concat(i[t])},[])},g=function(){var t=s("WUXNodeModelBehavior"),o=r;return o&&e.is(t)&&t.isDocumentEmpty()&&(o=!1,n.debug(C+" : Not computing crossHighlight as document is empty")),o},f=function(t,i){var r,l,c=s("LinkBehavior"),u=[];return e.is(c)&&(r=o.getPPRType(t),l=a[r],Array.isArray(l)?u=c.getConnectedObjects(t,i,{relationTypes:l}):n.debug(C+" : Couldnt _computeConnectedObjs as crossHighLightLinkTypes config is not available for "+r)),u},p=function(t,n){var o,i,r,a,s;if(t.isVisible()){if(r=t,e.is(n))for(o=1;o<n.length&&(a=!1,s=r.getVisibleChildren(!1,!0),e.is(s)&&0!==s.length);o++){for(i=0;i<s.length;i++)if(s[i].getInstancePID()===n[o]){r=s[i],a=!0;break}if(!a)break}}else for(r=t.getParent();!r.isVisible();)r=r.getParent();return r},h=function(t){var n=s("WUXNodeModelBehavior"),i=[],r={},a={};return e.is(n)&&(n.getAllDescendants().forEach(function(t){var n,o,i;n=t.getReferencePID(),t.isRoot()?i=n:(o=t.getInstancePID(),i=t.getAbsolutePath().toString()),e.is(n)&&(e.is(r[n])||(r[n]=[]),r[n].push(i)),e.is(o)&&(e.is(r[o])||(r[o]=[]),r[o].push(i)),e.is(i)&&(a[i]=t)}),t.forEach(function(t){var n,s,l;Array.isArray(t)?(n=t[0],e.is(r[n])&&r[n].forEach(function(e){i.push(p(a[e],t))}),l=o.getInstance(n),e.is(l)&&(s=l.get("isAggregatedBy"),e.is(s)&&e.is(r[s])&&r[s].forEach(function(e){0===a[e].getChildren(!0).length&&i.push(p(a[e]))}))):e.is(r[t])&&r[t].forEach(function(e){i.push(p(a[e]))})})),i},m=function(e){var t,n=s("WUXNodeModelBehavior");n&&Array.isArray(e)&&e.length>0&&(t=h(e)).length>0&&n.withTransactionUpdate(function(){t.forEach(function(e){e.highlight()})})},I=function(){var e,t=s("WUXNodeModelBehavior");t&&(e=t.getHighlightedNodes(),Array.isArray(e)&&e.length>0&&t.withTransactionUpdate(function(){e.forEach(function(e){e.unhighlight()})}))},v=function(){c()},y=function(t){var n;g()&&e.is(t)&&((t=Array.isArray(t)?t:[t]).forEach(function(t){var n,o,i=t.nodeId,r=t.isSelected,a=t.absPath;e.is(i)&&e.is(r)&&e.is(a)&&(o=a.length>0?a:i,r?(n=f(i,a),l(o,n)):u(o))}),I(),n=d(),m(n))},b=function(t){var o,i=s("WUXNodeModelBehavior");g()&&e.is(i)&&e.is(t)&&e.is(t.sourceId)&&e.is(t.changed)&&(o=t.changed,t.sourceId!==n.getId()&&o.isSelected&&i.unSelectAll(),y(o))},{listenTo:function(){return{refreshAll:v,select:b,reComputeCrossHighlight:y,onNodeExpanded:this.reHighlightMyView,onNodeCollapsed:this.reHighlightMyView}},onStart:function(t){r=!!e.is(t.enableCrossHighlight)&&t.enableCrossHighlight,a=e.is(t.crossHighLightLinkTypes)?t.crossHighLightLinkTypes:{},c()},onStop:function(){i=null},reHighlightMyView:function(){var e;g()&&i&&Object.keys(i).length>0&&(I(),e=d(),m(e))}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/RPColumnManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";return function(e,t,n,o){return{name:"RPColumnManager",init:function(e){this._parent(e)},hasCellValue:function(e){return 0===e.nodeModel.getAbsolutePath().length},getNonModelDataIndexes:()=>["RP_USAGE"],getCellTypeRepresentation:function(e){var t="string";return e.isHeader?"string":("Preferred"===e.dataIndex&&(t="functionIcon"),t)},getCellClassName:function(e){return""},getCellValue:function(e){return"RP_NONE"},getCellSemantics:function(e){var n=e.nodeModel._type,i={};return t.isAKindOf(n,"Drawing")?(i[o.getNLSValue("ResultingProduct.Overload.NONE")]="NONE",i[o.getNLSValue("ResultingProduct.Overload.2D")]="2D"):(i[o.getNLSValue("ResultingProduct.Overload.NONE")]="NONE",i[o.getNLSValue("ResultingProduct.Overload.EIN")]="EIN",i[o.getNLSValue("ResultingProduct.Overload.3D-EIN")]="3D-EIN"),{possibleValues:i,valueType:"enumCustom"}},setRPValue:function(t,i,r){var a,s,l,c=e.getBehavior("ImplementBehavior"),u=i.nodeModel.options.grid.cellInfo.rpConnectionFakeID,d=t.dataIndex,g=i.cellModel,f={},p={onFailure:function(){i.nodeModel.setAttribute(t.dataIndex,g),l=o.getNLSValue("ResultingProduct.setOverload.Failure"),e.warn(l,a),e.debug(l),e.notify("stopProgress",f)}};if(g!==r)return t?(e.notify("startProgress",f),a=e.log(o.getNLSValue("ResultingProduct.setOverload")),void c.updateDataMaterializationLinkUsage(i.nodeModel.options.grid.cellInfo.rpConnectionPID,r,p).then(function(){n.addConnection({PID:u,V_usage:r}),i.nodeModel.setAttribute(d,r),s=o.getNLSValue("ResultingProduct.setOverload.Success",{Overload:r}),e.info(s,a),e.notify("stopProgress",f)})):void 0},getCellEditableState:function(e){return!0}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/SelectionControl",["UWA/Core"],function(e){"use strict";return function(t,n,o,i,r){var a,s,l,c=null,u=null,d=!1,g=o.getComponent("TooltipModel"),f=o.getComponent("Accordeon"),p=function(t){var n=e.is(t.get("V_usage"))&&"NULL"!==t.get("V_usage")&&"VPMReference"===t.get("type")?t.get("V_usage"):t.get("type"),o=new e.Element("div",{class:"TNRInfo"}),r=new e.Element("div",{class:"iconType-container"}).inject(o);return i.getIconElem(n).inject(r),new e.Element("div",{class:"SubLabelDiv",text:t.get("V_Name")}).inject(o),new e.Element("div",{class:"SubRevisionDiv",text:t.get("revision")}).inject(o),o};return{createUI:function(t){var n,o,r=new e.Element("div",{class:"accordeon-section-container"});a=new e.Element("div",{class:"inside-accordeon-warningMessage"}),s=new e.Element("div",{class:"inside-accordeon-errorMessage"}),e.is(t)&&(n=e.is(t.title)?t.title:"",o=e.is(t.message)?t.message:"",d=!!e.is(t.multiSelection)&&t.multiSelection),u=new e.Element("div",{class:"Data-selection-UI"}).inject(t.renderTo),l=function(t,n,o){var r=new e.Element("div",{class:"accordeon-section-container"}).inject(o);return new f({items:[{header:i.getNLSValue(t),content:n,expandedFlag:!0}],style:"filled-separate"}).inject(r)}(n,r,u),c=function(t,n){var o;return(o=new e.Element("div",{class:"selectionUIitems-container"})).inject(n),new e.Element("div",{class:"SubLabelDiv",styles:{padding:"0px"}}).setHTML(i.getNLSValue(t)).inject(o),n}(o,r)},updateLabel:function(t){var n,o,a,s,l,u,f,h=[],m=!1,I=new e.Element("i",{class:"wux-ui-3ds wux-ui-3ds-menu-dot wux-layouts-rowentry-moreindicator",id:"multiValueCellMoreIndicator"}),v=[];if(!e.is(t,"string")){if(e.is(t,"array")||(t=[t]),t&&c)if(h=[],!1===d&&t.length>1)s=i.getNLSValue("Error.MultipleObjectsSelected"),this.showWarningMessage(s),m=!1;else if(t.length>0)if(c.empty(),r.isReferencesHasReadOnlyType(t))s=i.getNLSValue("Error.ReadOnlyTypesNotAllowed"),this.showErrorMessage(s),m=!1;else{for(o=0;o<t.length;o++)n=p(t[o]),0===o&&n.inject(c),(a=new e.Element("div",{class:"TNRInfo"})).addContent(n.innerHTML),h.push(a),u=t[o].get("V_IsManufacturable"),e.is(u)&&"FALSE"===u&&(f=t[o].get("type"),e.is(f)&&"PRODUCT"===r.getPPRType(f)&&v.push(t[o].get("V_Name")));v.length>0&&(l=v.length>1?i.getNLSValue(i.getNLSValue("ImplementBehavior.Validation.NonBOMItems")):i.getNLSValue(i.getNLSValue("ImplementBehavior.Validation.NonBOMItem",{objectName:v[0]})),this.showWarningMessageForPrd(l)),!0===d&&t.length>1&&I.inject(c),c.tooltipInfos=new g({shortHelp:h,allowUnsafeHTMLShortHelp:!0}),m=!0}return m}c&&(c.empty(),new e.Element("div",{}).inject(c).setHTML(t).inject(c),e.is(c.tooltipInfos)&&(c.tooltipInfos=null))},showErrorMessage:function(t){var n;c.empty(),n=new e.Element("div",{class:"TNRInfo"}).inject(c),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-attention"}).inject(n),s.setHTML(t).inject(n),e.is(c.tooltipInfos)&&(c.tooltipInfos=null)},showWarningMessage:function(t){var n;c.empty(),n=new e.Element("div",{class:"TNRInfo"}).inject(c),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert"}).inject(n),a.setHTML(t).inject(n),e.is(c.tooltipInfos)&&(c.tooltipInfos=null)},updateAccordeon:function(e,t){l.updateItem(e,t)},showWarningMessageForPrd:function(t){var n,o;o=c.getElement(".TNRWarning"),e.is(o)?n=o:(n=new e.Element("div",{class:"TNRWarning"}).inject(c),new e.Element("span",{class:"wux-notification-icon wux-ui-3ds wux-ui-3ds-alert "}).inject(n)),a.setHTML(t).inject(n)}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/CoProduct/CoProductColumnManager",["UWA/Core"],function(e){"use strict";const t=["CreateMaterial","Provide","ProcessContinuousCreateMaterial","ProcessContinuousProvide"],n="DELFmiUseCaseExt.V_UseCase";return function(o,i,r,a,s){var l=o.getBehavior("ModelBehavior"),c=o.getBehavior("WUXNodeModelBehavior");return{getCellTypeRepresentation:function(e){return e.isHeader?"string":"boolean"},hasCellValue:function(o){var s,l=this.getColumnOrGroup(o.columnID),u=!1;return c.isFakeNodeModel(o.nodeModel)||(s=i.getNodeAndColumnInfos(o.nodeModel,l),e.is(s.objectToBeModified)&&(u=!!(i.doesAttributeExist(s.objectToBeModified,n)||i.isAttrApplicableForType(s.objectToBeModified,n)&&function(e){var n,o,i=!1;for(o=r.getReferenceModelFromInstance(e),n=0;n<t.length;n++)if(a.isAKindOf(o,t[n])){i=!0;break}return i}(s.objectToBeModified)))),u},getCellValue:function(t){var o,r,s;if(e.is(t))return r=a.getAttributeInfo(n),s=e.is(r.attributeDef)?r.attributeDef:{},o=t.nodeModel.getAttributeValue(t.dataIndex),"ProducingCoProduct"===i.getAuthorizedValue(r,s,o)},setCellValue:function(t,o){var r,a;e.is(l)&&(r={dataIndex:n+".instance",dicoType:"DELFmiUseCaseExt"},a=i.getNodeAndColumnInfos(t.nodeModel,r),e.is(a)&&(o=o?"ProducingCoProduct":"EngineeringAssembly",l.updateModelAttribute(a.objectToBeModified.id,a,o)))}}}}),define("DS/DELPPWViewBehaviors/RefreshBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","DocumentPlugin"],creator:function(t,n,o,i,r){var a,s=function(){var t=i.getNLSValue("View."+n.getId()+".Title"),o=a.getRoots(),r=n.getBehavior("TreeListViewBehavior"),s={action:[],parameters:[]};a.emptyNodeModel(),e.is(o,"array")&&o.length>0&&(o.forEach(function(e,t){s.action[t]="addRoot",s.parameters[t]={rootReferencePID:e}}),r.processDropEffect(s).then(function(){n.notify("onRefreshedAll",[o]),n.info(i.getNLSValue("RefreshAll.Success",{view:t}))}).catch(function(){n.warn(i.getNLSValue("RefreshAll.Failure",{view:t}))}))},l=function(t){var s,l,c,u,d,g={noTimeout:!0},f=!!e.is(t.impactedChildren),p=function(t){var n=e.clone(t.impactedChildren),o=e.clone(t.impactedObjects);a.withTransactionUpdate(function(){n.forEach(function(e){a.updateNode(e,{loadChildren:!0})}),o.forEach(function(e){a.updateNode(e)})})};if(f)l=e.clone(t);else if((s=a.getSelectedNodesInfo().map(function(e){return e.id})).length<1)return;n.notify("startProgress",g),f?(p(l),n.notify("stopProgress",g)):((l={impactedChildren:[],impactedObjects:[]}).impactedChildren=(c=[],u=[],d=[],s.forEach(function(t){var n=o.getReferenceModel(t);(function e(t){var n=o.getInstancesFromCollection(t);-1===c.indexOf(t)&&c.unshift(t),u=u.concat(n),n.forEach(function(t){var n,i=t.get("PID"),r=o.getReferenceModel(i);n=o.getImpacted(i,!1,{onlyInstanceRelations:!0}),d=d.concat(n),e(r.get("PID")),r.setAdditionalInfo({queriedForChildren:!1})})})(t),o.getImpacted(t).forEach(function(e){d.push(e)}),e.is(r)&&r.removeDocumentConnections(t),n.setAdditionalInfo({queriedForDocuments:!1,queriedForChildren:!1,queriedForConnections:!1})}),o.removeInstance(u,{silent:!0}),o.removeConnection(d,{silent:!0}),n.notify("removeInstance",[u]),n.notify("removeConnection",[d]),c),o.getDescendantsFromServer(s,function(e){p(l),f||(n.notify("addConnection",[e.connections,{loadRelatedobjectsToView:!1}]),n.notify("refreshImpacted",[l])),n.info(i.getNLSValue("RefreshSelected.Success",{view:i.getNLSValue("View."+n.getId()+".Title")})),n.notify("stopProgress",g)},{fetchInverseRelations:!0,forceDBMode:!0,silentMode:!0}))};return{listenTo:function(){return{refreshAll:s,RefreshCmd:l,refreshImpacted:l}},onStart:function(){a=n.getBehavior("WUXNodeModelBehavior")},onStop:function(){},onRefreshSelected:l}}}}),define("DS/DELPPWViewBehaviors/SetSequencingModeBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["UXComponentsPlugin","ResourcePlugin","DatabasePlugin"],creator:function(t,n,o,i,r){var a,s,l,c,u,d=o.getComponent("Button");return{name:"SetSequencingModeBehavior",listenTo:function(){return{SetSequencingMode:this.showDialog}},onStart:function(e){a=n.getBehavior("UXFactoryBehavior")},onStop:function(){},showDialog:function(t){var o,g;e.is(t,"array")||(t=[t]),1===t.length&&e.is(t[0].referencePID,"string")&&function(e){return new Promise(function(t,o){var a={},s=function(){n.notify("stopProgress",a),n.warn(i.getNLSValue("SetSequencingModeUI.RetrieveFailure")),o()};n.notify("startProgress",a),r.getSequencingMode(e,{onComplete:function(e){n.notify("stopProgress",a),u=e,c=e,t()},onFailure:s,onTimeout:s})})}(o=t[0].referencePID).then(function(){var t,f,p,h,m;e.is(l)||(f=a.createElement("div",{class:"section-container"}),p=a.create("ButtonGroup",{type:"radio"}),h=a.create("Toggle",{type:"radio",label:i.getNLSValue("SetSequencingModeUI.Linear"),value:"Linear",checkFlag:"Linear"===c}),m=a.create("Toggle",{type:"radio",label:i.getNLSValue("SetSequencingModeUI.Advanced"),value:"Advanced",checkFlag:"Advanced"===c}),p.addChild(h),p.addChild(m),p.inject(f),p.addEventListener("change",function(){p.value.forEach(function(e){c=e,l.buttons.Ok.disabled=c===u})}),g=f,t=function(){var e={},t=function(){n.notify("stopProgress",e),n.warn(i.getNLSValue("SetSequencingModeUI.UpdateFailure")),l.close()};n.notify("startProgress",e),r.setSequencingMode(o,c,{onComplete:function(t){n.notify("stopProgress",e),n.info(i.getNLSValue("SetSequencingModeUI.UpdateSuccess")),l.close(),n.notify("setSequencingMode")},onFailure:t,onTimeout:t})},s=a.createElement("div",{class:"SetSequencingMode-Dialog"}),(l=a.create("Dialog",{title:i.getNLSValue("SetSequencingModeUI.Header"),domId:"SetSequencingModeUI-Dialog",content:s,resizableFlag:!0,modalFlag:!0,width:285,minWidth:185,buttons:{Cancel:new d({onClick:function(){l.close()}}),Ok:new d({disabled:!0,emphasize:"primary",onClick:function(){e.is(t,"function")&&t()}})}})).close=function(){this.destroy(),e.is(s)&&s.destroy(),l=null},g.inject(s))})}}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/AltSubBIBehavior",["UWA/Core","UWA/Promise"],function(e,t){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin"],creator:function(n,o,i,r){var a,s,l,c,u,d,g,f,p,h,m,I,v,y,b,C,P,D,S,A="#FFA500",R="#56B4E9",w="#008000",V="Alternate",L="RefSubst",E="InstSubst",M={EMPTY:{colorCode:"transparent",label:""},NO_ENG_ALTERNATES:{colorCode:A,label:r.getNLSValue("AltSubBI.noEngAlternate")},NO_MFG_OR_ENG_ALTERNATES:{colorCode:A,label:r.getNLSValue("AltSubBI.noMfgOrEngAlternate")},EBOM_HAS_ENG_ALTERNATE:{colorCode:R,label:r.getNLSValue("AltSubBI.ebomHasEngAlternate")},MBOM_HAS_ENG_ALTERNATE:{colorCode:R,label:r.getNLSValue("AltSubBI.mbomHasEngAlternate")},HAS_MFG_ALTERNATE:{colorCode:w,label:r.getNLSValue("AltSubBI.hasMfgAlternate")}},T=!1;return s=function(){return a.indexOf("PROCESS")>-1},l=function(){return a.indexOf("PART")>-1||a.indexOf("PRODUCT")>-1},c=function(e,t,n){e.has(t)?e.set(t,e.get(t).concat(n)):e.set(t,[n])},u=function(e){return{AltSubBI:{colorCode:e.colorCode,tooltip:e.label},altSubBIComputed:e!==M.EMPTY}},d=function(t){return t.filter(function(t){var n=!0,o=t.options;return e.is(o.altSubBIComputed,"boolean")&&(n=!o.altSubBIComputed),n})},g=function(e,t){var n;return n={PrimaryItemPhysicalId:e},t.length>0&&(n.SubstituteInstancePhysicalId=t),n},f=function(e,t){var n=o.getBehavior("WUXNodeModelBehavior");n.prepareUpdate(),e.forEach(function(e){var n=t(e.getReferencePID(),e.getInstancePID());e.updateOptions(u(n))}),n.pushUpdate()},p=function(e,t){o.getBehavior("WUXNodeModelBehavior").updateNodeOptions(e,u(t))},h=function(n,o){var r={alternateRefIds:new Set,referenceSubstInfoMap:new Map,instanceSubstInstIdMap:new Map};return new t(function(t,a){i.getAlternateEnggItemInfoPromise(n,o).then(function(n){Object.keys(n).forEach(function(t){var o,i,a=n[t];e.owns(a,"Alternate")&&r.alternateRefIds.add(t),e.owns(a,"ReferenceSubstitute")&&(o=e.owns(a,"referenceIds")?a.referenceIds:[],r.referenceSubstInfoMap.set(t,o)),e.owns(a,"InstanceSubstitute")&&(e.owns(a,"instanceIds")&&(i=a.instanceIds),Array.isArray(i)&&i.forEach(function(e){r.instanceSubstInstIdMap.set(e,t)}))}),t(r)}).catch(function(e){a(e)})})},m=function(n){var o=new Map;return new t(function(t,r){var a,s,l;a=["Proposed","Qualified"],l=i.groupingBy(n,function(e){return e.getReferencePID()},function(e){return e.isRoot()?[]:[e.getInstancePID()]}),s=Array.from(l.keys()).map(function(e){var t=l.get(e);return g(e,t)}),h(s,a).then(function(i){n.forEach(function(t){var n=null,r=t.getReferencePID(),a=null;t.isRoot()||(a=t.getInstancePID()),i.alternateRefIds.has(r)?n=V:i.referenceSubstInfoMap.has(r)?i.referenceSubstInfoMap.get(r).includes(t.getParent().getReferencePID())&&(n=L):e.is(a)&&i.instanceSubstInstIdMap.has(a)&&(n=E),e.is(n)&&o.set(a||r,{referenceId:r,absPath:t.getAbsolutePath(),parentId:t.isRoot()?null:t.getParent().getReferencePID(),alternateType:n})}),t(o)}).catch(function(e){r(e)})})},I=function(){return new t(function(e){e(y())})},v=function(e){var t;return t=e.map(function(e){var t=e.isRoot()?null:e.getInstancePID();return{referenceId:e.getReferencePID(),instanceId:t}}),i.getMultipleAltSubContextProductsPromise(t)},y=function(){return i.findConnections({type:"MfgProcessAlternate"}).map(function(e){return e.get("from")})},b=function(t){m(t).then(function(n){f(t,function(t,o){var i=e.is(o)?o:t;return n.has(i)?M.EBOM_HAS_ENG_ALTERNATE:M.NO_ENG_ALTERNATES}),o.notify("AltSubBIDone",o.getId())}).catch(function(e){f(t,function(){return M.NO_ENG_ALTERNATES}),o.warn(r.getNLSValue("AltSubBI.errorMsg")),o.log("Error: "+e)})},C=function(t){I().then(function(e){var n;return f(t,function(t){return e.includes(t)?M.HAS_MFG_ALTERNATE:M.NO_MFG_OR_ENG_ALTERNATES}),n=t.filter(function(t){return!e.includes(t.getReferencePID())}),v(n)}).then(function(t){var n,r,a,s,l=Object.keys(t),u=new Map,d=new Map;l.length>0&&(s=l.map(function(e){return t[e]}),l.forEach(function(n){var o=t[n];e.is(o.instanceId)&&c(d,o.instanceId,n),c(u,o.referenceId,n)}),n=["Proposed","Qualified"],r=i.groupingBy(s,function(e){return e.referenceId},function(t){return e.is(t.instanceId)?[t.instanceId]:[]}),a=Array.from(r.keys()).map(function(e){var t=r.get(e);return g(e,t)}),h(a,n).then(function(e){var t,n=new Set,i=new Set,r=new Set;e.alternateRefIds.forEach(function(e){u.has(e)&&u.get(e).forEach(function(e){n.add(e)})}),e.referenceSubstInfoMap.forEach(function(e,t){u.has(t)&&u.get(t).forEach(function(e){i.add(e)})}),e.instanceSubstInstIdMap.forEach(function(e,t){d.has(t)&&d.get(t).forEach(function(e){r.add(e)}),u.has(e)&&u.get(e).forEach(function(e){r.add(e)})}),t=Array.from(n).concat(Array.from(i),Array.from(r)),p(t,M.MBOM_HAS_ENG_ALTERNATE),o.notify("AltSubBIDone",o.getId())}))}).catch(function(e){f(t,function(){return M.NO_MFG_OR_ENG_ALTERNATES}),o.warn(r.getNLSValue("AltSubBI.errorMsg")),o.log("Error: "+e)})},P=function(e){var t=d(e);t.length>0&&(l()?b(t):s()&&C(t))},D=function(){var t,n=o.getBehavior("WUXNodeModelBehavior"),r=n.getAllDescendants();r.length>0&&(n.prepareUpdate(),t={callback:function(t,n){f(t,function(){return M.EMPTY}),e.is(n,"function")&&n()},globalArray:r,context:this,blockSize:100},i.getExecuteByBlockPromise(t).then(function(){n.pushUpdate(),o.notify("AltSubBICleared",o.getId())}).catch(function(e){n.pushUpdate(),o.log("An error occured:"+e)}))},S=function(e){var t=o.getBehavior("WUXNodeModelBehavior");(s()||l())&&(!0===(T=e.state)?P(t.getVisibleNodesInViewport()):D())},{listenTo:function(){return{BIAltSub:S}},onStart:function(e){a=e.pprTypes},onStop:function(){},isCmdActive:function(){return T},showBIStatus:function(e){P(e)},getStatusEnum:function(){return M}}}}}),define("DS/DELPPWViewBehaviors/MfgItemViewer3DBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["Viewer3DPlugin","DatabasePlugin","ImplementPlugin","RootsPlugin","ResourcePlugin"],creator:function(t,n,o,i,r,a,s){var l,c,u,d,g,f,p,h,m,I,v,y,b,C,P=["PRODUCT"];return u=function(e){return"PROCESS"===i.getPPRType(e)},d=function(){return c.some(function(e){return P.indexOf(e)>-1})},g=function(t){var n,i;e.is(l,"boolean")&&!0===l&&u(t)&&(i=r.getScopeLinksOfImplementing(t)).length>0&&(n=[i[0].get("to")],o.drop3D(n))},f=function(t){var n,o;e.is(l,"boolean")&&!0===l&&(n=r.getScopeLinksOfImplementing(t)).length>0&&(o=n[0].get("to"),I([o]))},p=function(t,i){var a,s,c,u,d;e.is(l,"boolean")&&!0===l&&(a=Array.isArray(t)?t:[t],s=r.getScopeLinkType(),u=n.getBehavior("WUXNodeModelBehavior"),e.is(u)&&(c=u.getRoots(),(d=a.filter(function(e){var t,n=s===e.get("type"),o=!1;return n&&(t=e.get("from"),o=c.indexOf(t)>-1),n&&o}).map(function(e){return e.get("to")})).length>0&&(i?o.drop3D(d):I(d))))},h=function(e){p(e,!0)},m=function(e){p(e,!1)},I=function(t){var i;i=e.is(l,"boolean")&&!0===l?a.getRoots(n.getId())[0]:a.getRoots(n.getId())[1],0===t.reduce(function(e,t){var n,o=r.getScopeLinksOfImplemented(t);return o.length>0&&(n=o.map(function(e){return e.get("from")}),e=e.concat(n)),e},[]).filter(function(e){return i.indexOf(e)>-1}).length&&o.remove3D(t)},v=function(t,i,r,a){var s,l=n.getBehavior("CrossHighlightBehavior");d()&&e.is(l)&&(s=l.getImpactedOfImplementing(t,i),o.change3DVisibility(s,r),a.resolve())},y=function(){var t=n.getBehavior("WUXNodeModelBehavior"),o=t.getSelectedNodesInfo(),i=this,r=[];o.forEach(function(t){var n=e.Promise.deferred();i.change3DVisiblity(0===t.absPath.length?t.id:t.absPath,!1,n),r.push(n.promise)}),e.Promise.all(r).then(function(){t.update3DNodeOptions(!1)})},b=function(){var t=n.getBehavior("WUXNodeModelBehavior"),o=t.getSelectedNodesInfo(),i=this,r=[];o.forEach(function(t){var n=e.Promise.deferred();i.change3DVisiblity(0===t.absPath.length?t.id:t.absPath,!0,n),r.push(n.promise)}),e.Promise.all(r).then(function(){t.update3DNodeOptions(!0)})},C=function(t){const i=n.getBehavior("CrossHighlightBehavior"),r=n.getBehavior("InterWidgetComBehavior");if(d()&&e.is(i)&&e.is(r))if(r.isWidgetLinked("DELOER_AP")){const e=Array.isArray(t.absPath)&&t.absPath.length>0?t.absPath:t.nodeId,n=i.getImpactedOfImplementing(e);o.reframeIn3DViewer(n)}else n.warn(s.getNLSValue("MfgItem3DOperationViewer.IsNotLinked"))},{listenTo:function(){return{addRootNode:g,removeRoot:f,addConnection:h,removeConnection:m,change3DVisibility:v,HideIn3D:y,ShowIn3D:b,ReframeIn3DViewer:C}},onStart:function(t){l=e.is(t.implementing)?t.implementing:null,c=t.pprTypes},select3D:function(e){d()&&o.selectIn3D(e)},unSelectAll3D:function(){o.selectIn3D([])},change3DVisiblity:function(t,o,i){var r,a=n.getBehavior("CrossHighlightBehavior");e.is(l,"boolean")&&!0===l?e.is(a)&&(r=[t,a.getImpactedOfImplementing(t),o,i],n.notify("change3DVisibility",r)):i.reject("ERROR while hiding/showing 3D")},unHideAll3D:function(){o.unHideAll3D()}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu",["UWA/Core"],function(e){"use strict";return function(t,n,o,i,r,a,s,l,c){var u,d,g,f,p,h=n.getComponent("WUXCommandsManager"),m=["Type","Reference","Column"],I=new Set(["CreateAssemblyAndScopeAltSubst","CreateProvideAndScopeAltSubst","CreateMaterialAndScopeAltSubst","CreateKitAndScopeAltSubst"]),v=new Set(["CreateAssemblyAndResultingProductAltSubst","CreateProvideAndResultingProductAltSubst","CreateMaterialAndResultingProductAltSubst","CreateKitAndResultingProductAltSubst"]);return f=function(n,o){var r,a,l,c,u,d,g,f,m,I=[],v=function(){return e.is(o.node)?o.selectedNodes[0].getNodeDepth()+1:0};switch(o=o||{},c=t.getAppContext(),n){case"SizeColumnToFit":o.handlers.onSizeColumnToFit(o.virtualColumnID);break;case"SortAToZ":t.getBehavior("WUXNodeModelBehavior").setSortOptions(o.virtualColumnID,"asc"),o.handlers.onSortColumnContentAsc(o.virtualColumnID);break;case"SortZToA":t.getBehavior("WUXNodeModelBehavior").setSortOptions(o.virtualColumnID,"desc"),o.handlers.onSortColumnContentDesc(o.virtualColumnID);break;case"ClearSort":t.getBehavior("WUXNodeModelBehavior"),o.handlers.onClearSort();break;case"HideColumn":o.handlers.onHideColumn(o.virtualColumnID);break;case"EditInstruction":t.notify("editWorkInstruction",o.infos.objectToBeModified);break;case"EditDataCollectRow":t.notify("editDataCollectRow",o.infos.objectToBeModified);break;case"DeleteDataCollectRow":t.notify("deleteDataCollectRow");break;case"Type":case"Reference":p=s.getGroupingAdditonalColumns(),a=v(),o.handlers.onGroupRows(p[n],a);break;case"Column":a=v(),o.handlers.onGroupRows(o.column.dataIndex,a);break;case"ClearGroupBy":o.handlers.onRemoveGrouping();break;case"GroupByCriteria":o.column.label?l="type":o.column.dataIndex.contains(".")&&(l=o.column.dataIndex.split(".")[0]),o.handlers.onGroupByCriteria(l);break;case"UngroupByCriteria":o.column.label?l="type":o.column.dataIndex.contains(".")&&(l=o.column.dataIndex.split(".")[0]),o.handlers.onUngroupByCriteria(l);break;case"Quantity":u=o.getColumnIDFromDataIndex("V_ContQuantity.instance"),d=o.getColumnOrGroup(u),o.infos=i.getNodeAndColumnInfos(o.node,d),g=e.clone(o.infos.attributeInfo),e.is(g,"object")&&e.owns(g,"Protection")&&(g.Protection=1,o.infos.attributeInfo=g),o.selectedNodes.forEach(function(e){I.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})}),t.notify(n,[I,o.infos]);break;case"LoadIn3DViewer":case"ReframeIn3DViewer":m={nodeId:(f=o.selectedNodes[0]).getInstancePID()||f.getReferencePID(),absPath:f.getAbsolutePath()},t.notify(n,m);break;case"CreatePartialScopeOnHeaderOperation":t.notify("CreatePartialScopeLinkOnHeaderOperation",[o.node.getAbsolutePath()]);break;default:r=h.getCommand(n,c),e.is(r)?(r.beginExecute(o),r.execute({sourceModuleId:t.getId()}),r.endExecute()):(r=h.getCommandCheckHeader(n,c),e.is(r)&&!1===r.getState()?(r.options.node={referencePID:o.node.getReferencePID(),instancePID:o.node.getInstancePID(),absPath:o.node.getAbsolutePath()},r.toggleState()):(o.selectedNodes.forEach(function(e){I.push({referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),absPath:e.getAbsolutePath()})}),t.notify(n,[I,o.infos])))}},u=function(t,n){const o=n.options,i=o.restrictLinkCreation,r=o.mfgReferenceId,a=!!e.is(o.isContextMfgRoot,"boolean")&&o.isContextMfgRoot;let s="enabled";return"AddMfgItemToMBOMAltSub"===t?e.is(r)||(s="disabled"):"ReplaceByAlternate"===t?e.is(r)&&!a||(s="disabled"):e.is(i,"string")&&("ResultingProduct"===i?I.has(t)&&(s="disabled"):v.has(t)&&(s="disabled")),s},d=function(n,r,d,g){var y,b,C,P,D,S,A,R,w,V,L=!1;if(b="enabled",V=t.getAppContext(),e.is(n,"string"))D=n;else{if("object"!=typeof n)return void t.debug("Nodes should be an array of string or objects");e.is(n.text)&&e.is(n.command)&&(D=n.text,n=n.command)}if(C=o.getNLSValue(D,null,d,g),e.is(n))if("Refresh"===n&&s.isGroupingExist())b="disabled";else if("EditAttribute"===n)i.isReadOnly(r.infos.attributeInfo,r.infos.attributeDef)||!i.doesAttributeExist(r.infos.objectToBeModified,r.infos.dataIndex)&&!i.isAttrApplicableForType(r.infos.objectToBeModified,r.infos.dataIndex)||l.isReferencesHasReadOnlyType(r.infos.objectToBeModified)?b="disabled":"isCoProduct"===r.column.displayType&&(b="disabled");else if("HideIn3D"===n||"ShowIn3D"===n)S=r.selectedNodes,"HideIn3D"===n?b=S.every(function(e){return!1===e.options.hideShow3D})?"disabled":"enabled":"ShowIn3D"===n&&(b=S.every(function(e){return!0===e.options.hideShow3D})?"disabled":"enabled");else if("EditInstruction"===n){if(1!==(S=r.selectedNodes).length||!a.isWorkInstruction(r.infos.objectToBeModified))return;A="url("+o.getIconURLFromKey(r.infos.objectToBeModified.get("type"))+")",b="enabled"}else if("CreatePartialScopeOnHeaderOperation"===n){if(A="url("+o.getIconURLFromKey("PartialProcessImplementLink")+")",b="disabled",1===(S=r.selectedNodes).length&&!S[0].isRoot()){let t,n,o,i,r,s;if(t=S[0].getReferenceType(),(n=l.isAKindOf(t,"DELLmiHeaderOperationReference"))&&(r=c.findInstanceWhoseParentIsScoped(S[0].getAbsolutePath()),(s=e.is(r,"object")?r.scopeLinks:[]).length>0)){let e=s[0].get("from"),t=a.getReference(e);l.isAKindOf(t,"DELLmiWorkPlanSystemReference")&&(b=(i=(o=c.getImplLinksOfImplementing(S[0].getAbsolutePath())).length>0)?"disabled":"enabled")}}}else if("EditDataCollectRow"===n)b=1===(S=r.selectedNodes).length?"enabled":"disabled";else if("DeleteDataCollectRow"===n)b="enabled";else if(m.indexOf(n)>=0){if(p=s.getGroupingAdditonalColumns(),"Column"===n&&e.is(r.column)){if(!r.column.groupableFlag)return;C=r.column.text,w=r.column.dataIndex}else w=p[n];(R=s.getColumnsForGrouping(t.getId())).length>0&&R.includes(w)&&(L=!0),b=r.selectedNodes.length<=1&&!L?"enabled":"disabled",A="url("+o.getIconURLFromKey("GroupBy")+")"}else if("ClearGroupBy"===n)R=s.getColumnsForGrouping(t.getId()),C=o.getNLSValue(n,null,d,g),A="url("+o.getIconURLFromKey("ClearGroupBy")+")",b=R.length>0?"enabled":"disabled";else if("SetSequencingMode"===n)1===r.selectedNodes.length&&(l.isAKindOf(r.infos.objectToBeModified,"DELLmiGeneralSystemReference")||l.isAKindOf(r.infos.objectToBeModified,"DELLmiWorkPlanSystemReference")||l.isAKindOf(r.infos.objectToBeModified,"DELLmiQtyControlProcessReference")||l.isAKindOf(r.infos.objectToBeModified,"DELLmiTransformationSystemReference")||l.isAKindOf(r.infos.objectToBeModified,"DELLmiTransferSystemReference")||l.isAKindOf(r.infos.objectToBeModified,"SourceSystem")||l.isAKindOf(r.infos.objectToBeModified,"SinkSystem")||l.isAKindOf(r.infos.objectToBeModified,"BufferSystem")||l.isAKindOf(r.infos.objectToBeModified,"DELLmiHeaderOperationReference")||l.isAKindOf(r.infos.objectToBeModified,"DELLmiGeneralOperationReference"))||(b="disabled");else if(I.has(n)||v.has(n)||"AddMfgItemToMBOMAltSub"===n||"ReplaceByAlternate"===n)b=1===r.selectedNodes.length?u(n,r.selectedNodes[0]):"disabled";else if("Quantity"===n){if(1!==(S=r.selectedNodes).length||S[0].isRoot()||"ProcessContinuousProvide"!==r.node.object.type)return;b="enabled",A="url("+o.getIconURLFromKey("EditQuantity")+")"}else if("LoadIn3DViewer"===n){const e=r.selectedNodes[0];b=c.isScoped(e.getReferencePID())?"enabled":"disabled"}else y=h.getCommand(n,V),e.is(y)||(y=h.getCommandCheckHeader(n,V)),e.is(y)&&(b=y.isEnabled()?"enabled":"disabled");return P=f.bind(null,n,r),{icon:e.is(A)?A:"url("+o.getIconURLFromKey(n)+")",type:"PushItem",title:C,label:C,sensitivity:b,state:b,callback:P,action:{callback:P}}},g=function(e){var t=!0;return["ExploreInWebApp"].indexOf(e)>-1&&r.isCloud()&&(t=!1),t},{getDefaultContextualMenu:function(){return["showAuxiliaryView","ProcessView","ItemsView","ResourcesView"]},buildContextualMenu:function(n,i,a,s){var l=[];return a=a||"Cmd",s=s||"Title",e.is(n,"array")?(n.forEach(function(n){var c,u,f,p=[];if(e.is(n,"object")&&e.is(n.groupName)){if("DocumentsCmds"===n.groupName&&!r.displayDocumentManagementCmds())return;if("GroupBy"===n.groupName&&e.is(i.params)&&(f={insertRow:!1,expandCollapse:!1,pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!1,filter:!0},c=i.params.collectionView.buildDefaultContextualMenu(i.params,f),e.is(c[0])&&l.push(c[0])),"3DViewer"===n.groupName&&1!==i.selectedNodes.length)return;if(!Array.isArray(n.commands))return t.debug('"commands" in a group should be an array'),null;n.commands.forEach(function(t){var n;n="SEPARATOR"===t?{type:"SeparatorItem"}:d(t,i,a,s),e.is(n)&&p.push(n)}),u=o.getNLSValue(n.groupName,null,a,s),c={icon:"url("+o.getIconURLFromKey(n.groupName)+")",type:"PushItem",title:u,label:u,state:"enabled",submenu:p},l.push(c)}else e.is(n,"string")&&"SEPARATOR"===n?l.push({type:"SeparatorItem"}):g(n)&&(c=d(n,i,a,s),e.is(c)&&l.push(c))},this),l):(t.debug("Nodes should be an array"),null)},onContextMenuCallback:function(e,t){return f(e,t)}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/HideShow3DColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n){return{getNonModelDataIndexes:function(){return["hide_show_3D"]},hasCellValue:function(){return!0},getCellValue:function(e){return e.nodeModel.options.hideShow3D},setCellValue:function(o){var i,r,a,s=o.nodeModel,l=!1,c=t.getBehavior("Viewer3DBehavior");i=s.options.hideShow3D,e.is(i)&&(l=!i),e.is(c)?(a=e.Promise.deferred(),c.change3DVisiblity(s.isRoot(!0)?s.getReferencePID():s.getAbsolutePath(),l,a),a.promise.then(function(){s.updateOptions({hideShow3D:l})}).catch(function(e){t.log((l?"Showing":"Hiding")+" 3D failed: "+e),t.warn(n.getNLSValue("HideShow3D.error")),s.updateOptions({hideShow3D:i})})):(r={nodeId:s.getInstancePID()||s.getReferencePID(),isVisible:l,absPath:s.getAbsolutePath()},t.notify("change3DVisibility",r),s.updateOptions({hideShow3D:l}))}}}}),define("DS/DELPPWViewBehaviors/DropZoneViewBehavior/DropZoneViewBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin"],creator:function(t,n,o,i){var r=null,a=null,s="mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop",l="mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-plus",c={DROPHERE:1,PLUS:2};return{onStart:function(){var e,t,s;s=i.getComponent("Element"),a=new s("div",{class:"drop-zone-container"}),(r=new s("div",{class:"dropLayer"}))&&(e=new s("div",{class:"mfndnd_invite_container"}).inject(r))?(t=new s("div",{class:"mfndnd_invite_display",draggable:!1}).inject(e),new s("i",{class:"mfndnd_invite_img wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-drag-drop",draggable:"false"}).inject(t),new s("h5",{class:"font-3dsregular",text:o.getNLSValue("DragDrop.DropHere.Title")}).inject(t),r.inject(a)):n.debug("Could not create droplayer")},onStop:function(){e.is(a)&&(a.destroy(),a=void 0)},getContent:function(){if(a)return a},hide:function(){r?r.hide():n.debug("No container")},show:function(){r?r.show():n.debug("No container")},isVisible:function(){var e=!1;return r&&(e="none"!==r.getStyle("display")),e},setIcon:function(t){var i,r,a,u;if(u=function(e,t,n){r.removeClassName(e),r.addClassName(t),a.setHTML(o.getNLSValue(n))},i=this.getContent(),e.is(i)&&(r=i.getElement(".mfndnd_invite_img"),a=i.getElement(".font-3dsregular"),e.is(r)&&e.is(a)))switch(t){case c.DROPHERE:u(l,s,"DragDrop.DropHere.Title");break;case c.PLUS:u(s,l,"DragDrop.AddObjectInContext.Title");break;default:n.debug("wrong option")}this.show()},iconEnum:c}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop",["UWA/Core","UWA/Class/Promise","UWA/Utils/InterCom"],function(e,t,n){"use strict";return function(o,i,r,a,s,l,c,u){var d,g,f,p=null,h=function(t){var n="";return e.is(t)&&(n=e.is(t.get)?t.get("PPRTYPE"):e.is(t["ds6w:type_value"])?s.getPPRType(t["ds6w:type_value"]):e.is(t,"string")?s.getPPRType(t):(t=a.getReference(t.referenceID)).get("PPRTYPE")),n},m=function(t){var n=h(t),o=d.acceptedTypes;return!e.is(o)||-1!==o.indexOf(n)},I=function(e){return a.getLastElementInstanceInfoPID(e,"isAggregatedBy")},v=function(e){return a.getLastElementInstanceInfoPID(e,"isInstanceOf")},y=function(t){var n=null;return e.is(t)&&(e.is(t.instancePIDsArray,"array")&&t.instancePIDsArray.length>0&&(n=v(t.instancePIDsArray)),n||(n=a.isValidPID(t.rootReferencePID)?t.rootReferencePID:null)),n},b=function(t){var n=null;return e.is(t)&&(n=e.is(t.targetInstancePIDsArray,"array")&&t.targetInstancePIDsArray.length>0?v(t.targetInstancePIDsArray):a.isValidPID(t.targetRootReferencePID)?t.targetRootReferencePID:null),n},C=function(t,n){var o=i.getBehavior("DropZoneViewBehavior"),r=i.getBehavior("WUXNodeModelBehavior");e.is(o)&&(o.setIcon(t),e.is(r)&&(!0!==n||r.isDocumentEmpty()||o.hide()))},P=function(t){var n={action:new Array(t.draggedItems.length),parameters:new Array(t.draggedItems.length),message:new Array(t.draggedItems.length),dragNDropInfo:t},l=i.getBehavior("DropZoneViewBehavior"),c={parameters:null,message:null},d={createLink:null,createLinkOrInstance:null,addCA:null,addRoot:null,reOrderRoot:null,reOrder:null,reParent:null},g=function(e,t){var n=Array.isArray(o.getConfig().unAuthorizedTypes)?o.getConfig().unAuthorizedTypes:[];return!(n.indexOf(s.getPPRType(e))>-1&&n.indexOf(s.getPPRType(t))>-1)},f=function(n){var o=!1;return a.isValidPID(t.draggedItems[n].rootReferencePID)&&!e.is(a.getLastElement(t.draggedItems[n].instancePIDsArray))&&(o=!0),o},p=function(e){var n=!1,o=null,i=null;return f(e)||(o=I(t.draggedItems[e].instancePIDsArray),i=I(t.targetInstancePIDsArray),a.isValidPID(o)&&a.isValidPID(i)&&o===i&&(n=!0)),n},h=function(o){var i=!1,l=e.is(t.targetInstanceSiblingPID,"array")?t.targetInstanceSiblingPID:[],c=t.draggedItems[o],u=-1,f=a.getLastElement(c.instancePIDsArray),h=null,I=!1,v=t.draggedItems[o].type,y=s.getPPRType(v);return t.info.fromSameSource&&p(o)&&m(v)&&(s.isReorderPossible(y)?g(t.targetType,v)?(-1!==(u=l.indexOf(f))&&l.splice(u,1),e.is(d.reOrder,"number")?(n.action[o]="aggregatedAction",n.parameters[o]=d.reOrder,n.message[o]=null,e.is(n.parameters[d.reOrder])&&!n.parameters[d.reOrder].isTargetIdDragged&&(n.parameters[d.reOrder].movedInstancePID.push(f),n.parameters[d.reOrder].newChildrenPID=l)):((I=function(){var n=e.is(t.draggedItems,"array")?t.draggedItems:[],o=a.getLastElement(t.targetInstancePIDsArray);return-1!==n.findIndex(function(e){return a.getLastElement(e.instancePIDsArray)===o})}())?n.action[o]="aggregatedAction":(h=a.getLastElement(t.targetInstancePIDsArray),n.action[o]="reorder"),n.parameters[o]={movedInstancePID:[f],newChildrenPID:l,targetInstancePID:h,dropPosition:t.info.dropPosition,isTargetIdDragged:I},n.message[o]=null,d.reOrder=o),i=!0):(n.action[o]="error",n.parameters[o]=null,n.message[o]=r.getNLSValue("AbstractDragAndDropManager.NotAllowed")):(n.action[o]="error",n.parameters[o]=null,n.message[o]=r.getNLSValue("AbstractDragAndDropManager.ReOrderRestricted",{objectName:s.getPPRType(v)}))),i};return t.draggedItems.forEach(function(v,P){n.action[P]="error",n.parameters[P]=null,n.message[P]=null,function(i){var s=!1,l=null;return"middle"===t.info.dropPosition&&(t.targetRootReferencePID===t.draggedItems[i].rootReferencePID&&a.arrayCompare(t.draggedItems[i].instancePIDsArray,t.targetInstancePIDsArray)?(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.SameObject")):g(t.targetType,t.draggedItems[i].type)?(l=u.isNewDragNDrop()&&"MFN"===o.getConfig().widgetTrigram?"createLink":"createLinkOrInstance",c.parameters={rootReferencePID:t.draggedItems[i].rootReferencePID,referencePID:y(t.draggedItems[i]),targetReferencePID:b(t),instancePID:a.getLastElement(t.draggedItems[i].instancePIDsArray),targetRootReferencePID:t.targetRootReferencePID,targetInstancePID:a.getLastElement(t.targetInstancePIDsArray),allowMove:t.info.fromSameSource&&"middle"===t.info.dropPosition,instancePIDsArray:t.draggedItems[i].instancePIDsArray,targetInstancePIDsArray:t.targetInstancePIDsArray,path:Array.isArray(t.path)?t.path:[]},e.is(d[l],"number")?(n.action[i]="aggregatedAction",n.parameters[i]=d[l],n.message[i]=null,n.parameters[d[l]].push(c.parameters)):(n.action[i]=l,n.parameters[i]=[c.parameters],n.message[i]=null,d[l]=i),s=!0):(n.action[i]="error",n.parameters[i]=null,n.message[i]=r.getNLSValue("AbstractDragAndDropManager.NotAllowed"))),s}(P)||function(e){var o=!1;return a.isValidPID(t.targetRootReferencePID)||"Change Action"===t.draggedItems[e].type&&(n.action[e]="addChangeAction",n.parameters[e]={rootReferencePID:t.draggedItems[e].rootReferencePID},n.message[e]=null,o=!0),o}(P)||function(e){var o=!1;return a.isValidPID(t.targetRootReferencePID)||"PPRContext"===t.draggedItems[e].type&&(n.action[e]="addPPRContext",n.parameters[e]={rootReferencePID:t.draggedItems[e].rootReferencePID},n.message[e]=null,o=!0),o}(P)||function(o){var i=!1;return a.isValidPID(t.targetRootReferencePID)?(C(l.iconEnum.DROPHERE,!0),n.action[o]="error",n.parameters[o]=null,n.message[o]=r.getNLSValue("AbstractDragAndDropManager.NotAuthorized")):(c.parameters={PIDsToAddRoot:[y(t.draggedItems[o])]},e.is(d.addRoot,"number")?(n.action[o]="aggregatedAction",n.parameters[o]=d.addRoot,n.message[o]=null,e.is(n.parameters[d.addRoot])&&n.parameters[d.addRoot].PIDsToAddRoot.push(y(t.draggedItems[o]))):(n.action[o]="addRoot",n.parameters[o]=c.parameters,n.message[o]=null,d.addRoot=o),i=!0),i}(P)||function(e){var o=!1;return f(e)&&t.info.fromSameSource&&m(t.draggedItems[e].type)&&(n.action[e]="reorderRoots",n.parameters[e]={rootReferencePID:y(t.draggedItems[e]),targetRootReferencePID:t.targetRootReferencePID,position:t.info.dropPosition},n.message[e]=null,o=!0),o}(P)||h(P)||function(o){var i=!1,l=t.info.wuxLocalID,u=t.draggedItems[o].instancePIDsArray,f=a.getLastElement(u),h=I(t.targetInstancePIDsArray),v=e.is(t.targetInstanceSiblingPID,"array")?t.targetInstanceSiblingPID.slice(0):[],y=a.getReferenceModel(h),b=a.getReferenceModel(f),C=t.draggedItems[o].type,P=s.getPPRType(C);return t.info.fromSameSource&&"middle"!==t.info.dropPosition&&!p(o)&&a.isValidPID(h)&&m(C)&&a.isInstancePossible(y,b)&&(s.isReparentPossible(P)?g(t.targetType,C)?a.isWorkInstruction(b)?(n.action[o]="error",n.parameters[o]=null,n.message[o]=r.getNLSValue("AbstractDragAndDropManager.ReparentWorkInstruction")):("bottom"===t.info.dropPosition&&l++,v.splice(l,0,null),c.parameters={instancesPIDsToReparent:[f],formerInstancesParentPIDs:[I(u)],newParentPID:h,newParentInstancesOrder:v},e.is(d.reParent,"number")?(n.action[o]="aggregatedAction",n.parameters[o]=d.reParent,n.message[o]=null,e.is(n.parameters[d.reParent])&&(n.parameters[d.reParent].instancesPIDsToReparent.push(f),n.parameters[d.reParent].formerInstancesParentPIDs.push(c.parameters.formerInstancesParentPIDs[0]),n.parameters[d.reParent].newParentInstancesOrder.splice(l,0,null))):(n.action[o]="reparent",n.parameters[o]=c.parameters,n.message[o]=null,d.reParent=o),i=!0):(n.action[o]="error",n.parameters[o]=null,n.message[o]=r.getNLSValue("AbstractDragAndDropManager.NotAllowed")):(n.action[o]="error",n.parameters[o]=null,n.message[o]=r.getNLSValue("AbstractDragAndDropManager.MoveInstanceRestricted",{objectName:s.getPPRType(C)}))),i}(P)||i.debug("AbstractDragAndDropManager.InternalError")},this),n},D=function(e){return e.preventDefault(),!0},S=function(e){return e.some(function(e){const t=e.object.type;return s.isReferencesHasReadOnlyType(t)})},A=function(t){var n,o,i,r=[];if(e.is(t,"object"))return n=t.targetType,e.owns(t,"draggedItems")&&Array.isArray(t.draggedItems)&&t.draggedItems.length>0&&(r=t.draggedItems.reduce(function(t,r){return e.owns(r,"isManufacturable")&&"FALSE"===r.isManufacturable&&(o=r.type,"PROCESS"===s.getPPRType(n)&&"PRODUCT"===s.getPPRType(o)&&(i=y(r),e.is(i)&&t.push(a.getReferenceModel(i)))),t},[])),r},R=function(t,n){var o=i.getBehavior("UXFactoryBehavior"),a=r.getNLSValue("NON-BOM.Confirmation.Title"),s=r.getNLSValue("NON-BOM.Confirmation.Message");o.showConfirmation(a,s,{attributes:["V_Name","revision"],models:t},function(t){e.is(t,"boolean")&&t&&n()})};return{init:function(t){var n=this;d=t||{},e.is(d.dropZone)&&(d.dropZone.addEventListener("drop",function(e){e.preventDefault(),n.onTreeListViewDrop(e)}),d.dropZone.addEventListener("dragover",function(e){e.preventDefault()}))},isAcceptedType:function(e){return m(e)},getDraggedReferencePID:function(e){return y(e)},getDDBehavior:function(){return{onDragStartCell:this.onDragStartCell,onDragStartRowHeader:this.onDragStartCell,onDragEndCell:this.onDragEndCell,onDragEnterRowHeader:this.onDragEnterRowHeader,onDragLeaveRowHeader:this.onDragLeaveRowHeader,onDragEnterColumnHeader:this.onDragEnterColumnHeader,onDragLeaveColumnHeader:this.onDragLeaveColumnHeader.bind(this),onDragEnterCell:this.onDragEnterCell,onDragLeaveCell:this.onDragLeaveCell,onDropCell:this.onDropCell.bind(this),onDropRowHeader:this.onDropCell.bind(this),onDragEnterBlank:this.onDragEnterBlank,onDragLeaveBlank:this.onDragLeaveBlank,onDropBlank:this.onDropBlank.bind(this),onDropColumnHeader:this.onDropColumnHeader.bind(this),onDragOverRowHeader:D,onDragOverCell:D,onDragOverBlank:D,onDragOverColumnHeader:D}},processRootDrop:function(n,o,s,l,c,u,g){var f,p,I=!1,v=i.getBehavior("WUXNodeModelBehavior"),y=r.getNLSValue(i.getId()),b=r.getNLSValue("AbstractDragAndDropManager.AddRoot.LogMessage",{view:y}),P=r.getNLSValue("AbstractDragAndDropManager.AddRoot.Error",{view:y}),D=i.getBehavior("DropZoneViewBehavior"),S=function(t,n,a,s){var l,u,g,f={},b=n||{},S=i.getBehavior("WUXNodeModelBehavior"),A=function(){i.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!0}),i.warn(P,p,"failed"),s()},R=function(t,n){var o=r.getNLSValue("AbstractDragAndDropManager.AddRoot.Success",{objectName:n,view:y});i.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!0}),i.log(o,p,"completed"),null!==c?(g=i.getBehavior("ExpandFilterBehavior"),e.is(g)?g.applyFilter(c,a):(i.debug("Expand filter behavior is not available on this module"),a())):a()},w=!!e.is(b.forceDBMode,"boolean")&&b.forceDBMode;t=e.is(t,"array")?t:[t],S.prepareUpdate(),t.forEach(function(t){var n,c,g;n=t,u=e.is(v)?v.validate(n):null,e.is(u)?(e.is(D)&&C(D.iconEnum.DROPHERE,!0),f[u.param]=u.paramValue,l=r.getNLSValue(u.key,f,"ValidationError"),i.warn(l,p,"failed"),s()):e.is(v)&&m(t)?(i.notify("toggleCmdCheckHeaderState",{cmdName:"refreshCmd",cmdState:!1}),v.addNode(t,{onAddToTreeListFail:A,onAddToTreeListComplete:R,forceDBMode:w})):e.is(o)&&o&&(c=h(t),g=e.is(d.pprTypesWithSupportedViews)?d.pprTypesWithSupportedViews:[],!e.is(g)||-1!==g.indexOf(c))?(i.notify("addReference",[t]),a()):(I=!0,i.notify("addToAuxiliaryView",[t]),a())}),I&&(i.info(r.getNLSValue("AbstractDragAndDropManager.RepositionAuxView")),e.is(D)&&C(D.iconEnum.DROPHERE,!0)),S.pushUpdate()},A=function(n,o){var a,s,l,c,d=[],f=[],p=[],h={modelsFetched:[]};o=o||{},e.is(o.modelsNotRetrieved)&&(h.modelsNotRetrieved=o.modelsNotRetrieved,s=(s=r.getNLSValue("AbstractDragAndDropManager.ObjectsNotRetrieved")).replace("%n",o.modelsNotRetrieved.length),i.warn(s)),e.is(o.modelsFromForceDB)&&(f=o.modelsFromForceDB),(n=e.is(n,"array")?n:[n]).forEach(function(n){f.indexOf(n.get("PID"))>-1?(p.push(n),e.is(h.modelsFromForceDB)||(h.modelsFromForceDB=[]),h.modelsFromForceDB.push(n.get("PID"))):(a=new t(function(e,t){S(n,o,e,t)}),d.push(a)),h.modelsFetched.push(n.get("PID"))}),p.length>0&&(l=i.getBehavior("UXFactoryBehavior"),c=r.getNLSValue("AbstractDragAndDropManager.indexOrDBDialog"),s=r.getNLSValue("AbstractDragAndDropManager.RootsNotInIndex"),l.showConfirmation(c,s,{attributes:["V_Name"],models:p},function(n){e.is(n,"boolean")&&n&&(a=new t(function(e,t){S(p,o,e,t)}),d.push(a))})),t.all(d).then(function(){u(h)},function(){g(h)})};p=i.log(b),f=a.getReferencesFromArray(n),n.length!==f.length?f=a.fetchRoot(n,{onComplete:A,onFailure:function(){i.warn(r.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),p),i.debug("Failed to fetch refernce for PID: "+n),g()},context:this,silent:!0}):A(f)},retrieveItems:function(t){var n,o,r,a,s,l=[],c="",u=["text/searchitems","text/plain","Text"];if(!e.is(t))return i.debug("ERROR: No dropped item found"),l;for(r=e.is(t.dataTransfer.types.indexOf,"function")?"indexOf":"contains",a=0;a<u.length&&""===c;a++)s=t.dataTransfer.types[r](u[a]),(e.is(s,"number")&&s>=0||e.is(s,"boolean")&&!0===s)&&(c=u[a]);if(""===c)return i.debug("ERROR: No data retrieved"),l;n=t.dataTransfer.getData(c);try{o=e.Json.decode(n)}catch(e){return l}return e.is(o)?e.is(o.data)?e.is(o.data.items,"array")?o.data.items:(i.debug("ERROR: Items is not an array"),l):(i.debug("ERROR: No data retrieved"),l):(i.debug("ERROR: Parsing returned null"),l)},onDragStartCell:function(t,n){var c,u,d,g=[],f=n.nodeModel,p=widget.data,h=l.get3DSpaceServiceName(),m=i.getBehavior("WUXNodeModelBehavior"),I=i.getBehavior("ExpandFilterBehavior"),v={widgetId:widget.id,appId:o.getConfig().appId};return e.is(I)&&e.is(I.getFilterProxy())&&(c=I.getFilterProxy())&&c.getCtxForSharing&&(v=c.getCtxForSharing()),u={protocol:"3DXContent",version:"1.1",source:o.getConfig().appId,widgetId:widget.id,data:{items:[]},biProxyCtx:v},d={properties:[function(){return{property:"envId",value:l.getPlatformID({serviceId:h})}},function(){return{property:"serviceId",value:h}},function(){return{property:"contextId",value:p.Credentials}},function(){return{property:"objectId",value:e.is(this.getReferencePID)?this.getReferencePID():null}},function(){var t=null;return{property:"objectType",value:t=e.is(this.object)&&e.is(this.object.defType)?this.object.defType:e.is(t)?t:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"secondaryObjectType",value:e.is(this.getReferenceType)?this.getReferenceType():null}},function(){return{property:"displayName",value:this.getLabel()}},function(){return{property:"displayType",value:e.is(this.getReferenceType)?r.getNLSValue(this.getReferenceType(),null,"Type"):null}},function(){var t,n,o,i=[];if(e.is(this.getRIRpath))for(t=this.getRIRpath(),Array.isArray(t)&&0===t.length&&t.push(this.getReferencePID()),o=0;o<t.length;o++)n=o%2==1?a.getInstance(t[o]):a.getReference(t[o]),i.push({resourceid:t[o],type:n.get("type")});return{property:"path",value:i}},function(){var t,n=this.options.grid;return e.is(this.getReferenceType,"function")&&"PRODUCT"===s.getPPRType(this.getReferenceType())&&e.owns(n,"V_IsManufacturable.reference")&&(t=n["V_IsManufacturable.reference"]),{property:"isManufacturable",value:t}}]},f.isSelected()||f.select(),n.cellView.collectionView.getTreeDocument().getXSO().get().forEach(function(t){e.is(m)&&!m.isFakeNodeModel(t)&&g.push(t.dump(d))}),u.data.items=g,t.dataTransfer.setData("Text",JSON.stringify(u)),t.dataTransfer.effectAllowed="copyMove",!1},getDragNDropInfo:function(t,n){var o,i,r,s={draggedItems:[],info:{fromWUX:!1,dropPosition:null,fromSameSource:!1},targetRootReferencePID:null,targetInstancePIDsArray:null,targetInstanceSiblingPID:null};return e.is(t)&&e.is(t.dataTransfer)&&e.is(t.dataTransfer.getData,"function")&&(i=t.dataTransfer.getData("Text"),e.is(i,"string")&&i.length>0&&(r=JSON.parse(i),e.is(r)&&e.is(r.widgetId,"string")&&(s.info.fromSameSource=r.widgetId===widget.id,e.is(r.data.items,"array")&&r.data.items.length>0&&(s.info.fromManageCapableResource=!!e.is(r.data.items[0].linkId))))),e.is(n)&&e.is(n.nodeModel,"object")&&e.is(n.dropPosition)&&(s.info.fromWUX=!0,s.info.dropPosition=n.dropPosition,s.targetTreeNodeModel=n.nodeModel,e.is(n.nodeModel.isDummyNode)&&(s.fromGroupingView=!0)),e.is(n)&&e.is(n.loadObjectsInOwnView)&&(s.info.loadObjectsInOwnView=n.loadObjectsInOwnView),e.is(r.biProxyCtx)&&(s.ctx={},s.ctx.biProxyCtx=r.biProxyCtx,s.ctx.objIds=[],r.data.items.forEach(function(e){s.ctx.objIds.push(e.objectId)})),o=this.retrieveItems(t),e.is(o,"array")&&(o.forEach(function(t){var n,o={};e.is(t)&&(o.rootReferencePID=e.is(t.objectId)?t.objectId:null,o.instancePIDsArray=e.is(t.path,"array")?a.transformRIRToAbsolutePath(t.path):null,o.name=e.is(t.displayName,"string")?t.displayName:null,o.type=e.is(t.referenceType,"string")?t.referenceType:e.is(t.secondaryObjectType)?t.secondaryObjectType:t.objectType,o.typeNLS=e.is(t.displayType,"string")?t.displayType:e.is(t.displayType)?t.displayType:null,o.securityContext=e.is(t.contextId,"string")?t.contextId:null,o.tenant=e.is(t.envId,"string")?t.envId:null,o.service=e.is(t.serviceId,"string")?t.serviceId:null,o.path=Array.isArray(t.path)?t.path:[],e.is(t.linkId)&&(o.linkPID=t.linkId,o.resourceAreaID=t.resourceAreaID,o.referencePID=e.is(t.objectId)?t.objectId:null,delete o.rootReferencePID),e.is(t.isManufacturable,"string")&&(o.isManufacturable=t.isManufacturable),e.is(o.instancePIDsArray,"array")&&o.instancePIDsArray.length>0&&(n=a.getInstance(o.instancePIDsArray[0]),e.is(n)&&(o.rootReferencePID=n.get("isAggregatedBy")))),s.draggedItems.push(o)}),e.is(s.targetTreeNodeModel)&&(e.is(s.targetTreeNodeModel.getRootPID,"function")&&(s.targetRootReferencePID=s.targetTreeNodeModel.getRootPID(),s.targetInstancePIDsArray=s.targetTreeNodeModel.getAbsolutePath(),s.targetInstanceSiblingPID=s.targetTreeNodeModel.getSiblingsPID(),s.targetType=s.targetTreeNodeModel.getReferenceType(),s.info.wuxLocalID=s.targetTreeNodeModel._localID),delete s.targetTreeNodeModel)),s},processDropEffect:function n(o){var u=this;return new t(function(d){var g=i.getBehavior("ModelBehavior"),f=null,p=i.getBehavior("WUXNodeModelBehavior"),h=i.getBehavior("DropZoneViewBehavior"),I=i.getBehavior("GroupingViewBehavior"),v=function(n){return new t(function(t,i){var r=o.parameters[n],a=e.is(r.PIDsToAddRoot)?r.PIDsToAddRoot:r.rootReferencePID,s=e.is(o.dragNDropInfo)&&e.is(o.dragNDropInfo.ctx)?o.dragNDropInfo.ctx:null,l=e.is(o.dragNDropInfo)&&e.is(o.dragNDropInfo.info.loadObjectsInOwnView)?o.dragNDropInfo.info.loadObjectsInOwnView:null;u.processRootDrop(a,l,n,o.action.length,s,t,i)})},y=function(n){return new t(function(t){var s=(n||[{actionIndex:null}])[0].actionIndex,l=e.is(s,"number")?o.parameters[s]:null,c=e.is(l.PIDsToAddRoot)?l.PIDsToAddRoot:l.rootReferencePID,u=a.findConnections({from:c}),d=a.getInstancesFromCollection(c),g="AUXILIARY"===i.getId(),f=[],p=[];u.forEach(function(e){f.push(e.get("to"))}),d.forEach(function(e){f.push(e.get("isInstanceOf"))}),(p=a.getReferencesFromArray(f)).length>0?(p.forEach(function(e){g?i.notify("addToAuxiliaryView",[e,{loadRelatedobjectsToView:!1}]):i.notify("addReference",[e,null,{loadRelatedobjectsToView:!1}])}),i.info(r.getNLSValue("AbstractDragAndDropManager.PPRContext.Success"))):i.warn(r.getNLSValue("AbstractDragAndDropManager.PPRContext.Empty")),e.is(h)&&C(h.iconEnum.DROPHERE,!0),t()})},P=function(n){var o=t.reject(),a=e.is(n,"string")?n:r.getNLSValue("AbstractDragAndDropManager.InternalError");return i.warn(a),o},D=function(n){var i=e.is(o.parameters[n],"array")?o.parameters[n]:[o.parameters[n]],s=[];return i.forEach(function(o){var i=a.getReference(o.referencePID),l=new t(function(t,s){var l={onComplete:function(e){t({rootReferenceMdl:e,actionIndex:n})},onFailure:function(){s(r.getNLSValue("AbstractDragAndDropManager.NoRootReferenceModel"))},silent:!0};e.is(i)?t({rootReferenceMdl:i,actionIndex:n}):a.fetchRoot(o.rootReferencePID,l)});s.push(l)}),t.all(s)},S=function(n){var o=n||[],l=[],c={},u={};return i.notify("startProgress",u),o.forEach(function(n){var o=new t(function(t,o){e.is(n.rootReferenceMdl)?a.needToQueryForChildren(n.rootReferenceMdl.get("PID"))?(s.isAKindOf(n.rootReferenceMdl,"PPRContext")&&(c={expandLevel:1,forceDBMode:!0}),a.getDescendantsFromServer(n.rootReferenceMdl.get("PID"),function(){t(n)},c)):t(n):o(r.getNLSValue("AbstractDragAndDropManager.NoRootReferenceModel"))});l.push(o)}),t.all(l).then(function(e){return i.notify("stopProgress",u),t.resolve(e)}).catch(function(e){return i.notify("stopProgress",u),t.reject(e)})},A=function(e){var n=e||[],i=b(o.dragNDropInfo);return n.some(function(e){var t=!1;return a.isWorkInstruction(e.rootReferenceMdl)&&a.isOperation(i)&&(t=!0),t})?new t(function(t,n){a.needToQueryForChildren(i)?a.getDescendantsFromServer(i,function(){t(e)},{onFailure:n}):t(e)}):t.resolve(e)},R=function(o){return new t(function(t,i){e.is(o,"array")&&o.forEach(function(o){var s=a.getReference(o),l=function(e){var o={};m(e)?(o.action=["addRoot"],o.parameters=[{rootReferencePID:e.get("PID")}],o.message=[null]):(o.action=["error"],o.parameters=[null],o.message=[r.getNLSValue("AbstractDragAndDropManager.NotValidType")]),n.call(u,o).then(t,i)};e.is(s)?l(s):a.fetchRoot(o,{context:u,onComplete:l,onFailure:i,silent:!0})},u)})},w=function(n){return new t(function(t,r){var a=(n||[{actionIndex:null}])[0].actionIndex,s=e.is(a,"number")?o.parameters[a]:null;e.is(s,"array")&&s.length>0?(i.notify("CreateMultipleLinks",[s]),t()):r("AbstractDragAndDropManager.DropEffectError")})},V=function(n){return new t(function(t){var r=(n||[{actionIndex:null}])[0].actionIndex,a=e.is(r,"number")?o.parameters[r]:null;i.notify("CreateLinkOrInstance",[a]),t()})},L=function(n,s){var u=null;switch(n){case"addRoot":u=v(s);break;case"addChangeAction":u=c.setCAAndGetDetails(o.parameters[s].rootReferencePID).then(R,P);break;case"addPPRContext":u=D(s).then(S).then(y).catch(P);break;case"createLink":u=D(s).then(S).then(w).then(t.resolve,P);break;case"createLinkOrInstance":u=D(s).then(S).then(A).then(V).catch(P);break;case"reorderRoots":u=v(s);break;case"reorder":u=function(n){return new t(function(t,s){var c,u,d=-1,g={},f={},h=function(e){i.warn(r.getNLSValue("AbstractDragAndDropManager.ReorderFailure")),i.debug("AbstractDragAndDropManager.ReorderFailure. Error Details: "+e),i.notify("stopProgress",g),s()};i.notify("startProgress",g),d=o.parameters[n].newChildrenPID.indexOf(o.parameters[n].targetInstancePID),"bottom"===o.parameters[n].dropPosition&&d++,o.parameters[n].movedInstancePID.forEach(function(e,t){o.parameters[n].newChildrenPID.splice(d+t,0,e)}),c={listOrdered:o.parameters[n].newChildrenPID,listModifiable:o.parameters[n].movedInstancePID},u={url:"dsmfg/private/V0/invoke/persistChildrenOrder",method:"POST",onComplete:function(r){var s=[];e.is(r,"array")&&r.forEach(function(t){var n;e.is(t.PID,"string")&&e.is(t.V_TreeOrder)&&(n=a.getInstance(t.PID),a.manageLinearProductFlowsOnDeleteInstance(n),n.set("V_TreeOrder",t.V_TreeOrder),a.manageLinearProductFlowsOnCreateInstance(n))}),o.parameters[n].newChildrenPID.forEach(function(e){s.push(a.getInstance(e))}),p.prepareUpdate(),i.notify("removeInstance",[s]),i.notify("addInstance",[s]),i.notify("reorder",f),p.pushUpdate(),i.notify("stopProgress",g),t()},onFailure:h,onTimeout:h,data:e.Json.encode(c)},l.webServiceRequest(u)})}(s);break;case"reparent":u=function(n){return new t(function(t,r){var a=e.merge({onComplete:t,onFailure:r},o.parameters[n]);e.is(g)?g.moveInstance(a):(i.debug("Model behavior is not available to reparent"),r())})}(s);break;case"aggregatedAction":u=t.resolve();break;case"modifyAttribute":u=function(n){return new t(function(t,r){var a=e.merge({onComplete:t,onFailure:r},o.parameters[n]);e.is(I)?I.modifyAttribute(a):(i.debug("groupingViewBehavior is not available"),r())})}(s);break;case"error":u=P(o.message[s]);break;default:u=P("AbstractDragAndDropManager.DropEffectError")}return u};return e.is(o)&&e.is(o.action,"array")&&(o.action.forEach(function(t,n){var i=function(){var i=L(t,n);return o.promises=e.is(o.promises,"array")?o.promises:[],o.promises[n]=i,i};f=e.is(f)?f.then(i,i):i()},this),f.then(d,d)),!1})},_computeAndProcessDropEffect:function(t){var n;e.is(t)&&(n=P(t),e.is(n)&&this.processDropEffect(n))},onTreeListViewDrop:function(t,o){var i,r,a=this.getDragNDropInfo(t,o);return e.is(a)&&(i=P(a),e.is(i)&&(this.processDropEffect(i),r=e.is(widget)&&widget.id?"padcompassSocket_"+widget.id:"padcompassSocket",null===p&&(p=new n.Socket(r)).subscribeServer("com.ds.compass",window.parent),p.dispatchEvent("onResetX3DContent",{},r))),!1},onDragEnterColumnHeader:function(){var t=i.getBehavior("DropZoneViewBehavior");return e.is(t)&&(e.is(f)?f.promise.then(function(){g=e.Promise.deferred(),C(t.iconEnum.PLUS,!1),f=null},function(){i.log("failed")}):(g=e.Promise.deferred(),C(t.iconEnum.PLUS,!1))),!0},onDragLeaveColumnHeader:function(){var t=i.getBehavior("DropZoneViewBehavior");return e.is(t)&&(C(t.iconEnum.DROPHERE,!0),e.is(g)&&g.resolve()),!0},onDragEnterBlank:function(){var t=i.getBehavior("DropZoneViewBehavior");return e.is(t)&&(e.is(g)?g.promise.then(function(){C(t.iconEnum.PLUS,!1),g=null},function(){i.log("failed")}):C(t.iconEnum.PLUS,!1),f=e.Promise.deferred()),!0},onDragLeaveBlank:function(){var t=i.getBehavior("DropZoneViewBehavior");return e.is(t)&&C(t.iconEnum.DROPHERE,!0),e.is(f)&&f.resolve(),!0},onDropCell:function(t,n){var o,a,l=this,c=this.getDragNDropInfo(t,n);if(e.is(c.info.fromManageCapableResource)&&!0===c.info.fromManageCapableResource)return function(e){var t=[];e.draggedItems.forEach(function(n){e.targetRootReferencePID===n.resourceAreaID&&0===e.targetInstancePIDsArray.length&&t.push({isAggregatedBy:e.targetRootReferencePID,isInstanceOf:n.referencePID,linkPID:n.linkPID})}),i.notify("createResourceUsage",t)}(c),!0;if(e.is(n.droppedNodes)&&S(n.droppedNodes))return i.warn(r.getNLSValue("ReadOnlyTypes.Warn.Title")),!1;if(e.is(n.nodeModel)){const e=n.nodeModel.object.type;if(s.isReferencesHasReadOnlyType(e))return i.warn(r.getNLSValue("ReadOnlyTypes.Warn.Title")),!1}if(o=i.getBehavior("DropZoneViewBehavior"),e.is(n.nodeModel)&&!e.is(n.nodeModel.getReferencePID))return!1;try{return a=A(c),Array.isArray(a)&&a.length>0?(R(a,function(){l._computeAndProcessDropEffect(c)}),!1):this.onTreeListViewDrop(t,n)}catch(t){return e.is(o)&&C(o.iconEnum.DROPHERE,!0),!0}},onDropBlank:function(t,n){var o,a,s=this,l=this.getDragNDropInfo(t,n);if(e.is(n.droppedNodes)&&S(n.droppedNodes))return i.warn(r.getNLSValue("ReadOnlyTypes.Warn.Title")),!1;o=i.getBehavior("DropZoneViewBehavior");try{return a=A(l),Array.isArray(a)&&a.length>0?(R(a,function(){s._computeAndProcessDropEffect(l)}),!1):this.onTreeListViewDrop(t,n)}catch(t){return e.is(o)&&C(o.iconEnum.DROPHERE,!0),!0}},onDropColumnHeader:function(t,n){var o,r=i.getBehavior("DropZoneViewBehavior");try{return o=e.Json.decode(t.dataTransfer.getData("Text")),!(!e.is(o.data)||!e.is(o.data.DataGridView_Column_Options))||this.onTreeListViewDrop(t,n)}catch(t){return e.is(r)&&C(r.iconEnum.DROPHERE,!0),!0}}}}}),define("DS/DELPPWViewBehaviors/ExpandFilterBehavior",["UWA/Core","UWA/Promise"],function(e,t){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","ProxyPlugin","TreeViewPlugin","RootsPlugin","BIPlugin"],creator:function(n,o,i,r,a,s,l,c){var u,d,g,f,p,h,m,I,v,y,b,C,P,D,S,A,R,w,V=["union","intersection","minus"],L=["config_filter","sequence_filter","root_path_physicalid"];return p=function(t){var n;return n=o.getBehavior(t),e.is(n)||o.debug(t+"is not available"),n},h=function(t){var n=p("WUXNodeModelBehavior"),o=!1;return e.is(n)&&(o=n.getRoots().some(function(e){return-1!==t.indexOf(e)})),o},m=function(t){var n,i,r,a=t||null,l=null,c=[];s.getActiveView()===o.getId()&&(a=e.is(a,"string")?JSON.parse(a):a,n=e.is(a)?a.CVQuery:{},c=e.is(a.filterRootIds)?a.filterRootIds:[],r=!!e.is(a.empty)&&a.empty,i=c.reduce(function(t,n){var o;return o=e.is(n,"array")&&n.length>0?n[0]:n,e.is(o,"string")&&t.push(o),t},[]),h(i)&&(l=e.is(a.CVQuery3D)?a.CVQuery3D:null,r?v(i,n,l):I(i,n,l)))},I=function(n,a,s){var l={};o.notify("startProgress",l),n.forEach(function(e){y(e,a)}),new t(function(t,o){var l,c=function(){o(r.getNLSValue("ExpandFilter.ApplyFilter.ExpandFailed"))};e.is(a)&&e.is(n)&&(l={ordered:!1,context:this,doNotExpand:!0,expandLevel:-1,filterQuery:a,filterQuery3d:s,onFailure:c,onTimeout:c,onCancel:c},i.getDescendantsFromServer(n,function(e){t(e)},l))}).then(function(t){var i;0===(e.is(t.instancesAndReferences)?t.instancesAndReferences:[]).length?o.warn(r.getNLSValue("ExpandFilter.EmptyResult.Message")):(i=p("Viewer3DBehavior"),e.is(i)&&(!0===f&&o.notify("Filter3DApplied"),!0===g&&i.unHideAll3D())),!0===c.getBICmdState()&&o.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),C(n,a),o.notify("stopProgress",l),o.notify("ExpandFilterApplied")},function(e){o.warn(e),o.notify("stopProgress",l)})},v=function(t,n){var r=p("Viewer3DBehavior"),a={};0<t.length&&e.is(n)&&t.every(function(e){return""!==e})&&(o.notify("startProgress",a),t.forEach(function(e){b(e),i.removeFilterFromCollection(e,n)}),e.is(r)&&(!0===f&&o.notify("Filter3DApplied"),!0===g&&r.unHideAll3D()),!0===c.getBICmdState()&&o.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),C(t),o.notify("stopProgress",a),o.notify("ExpandFilterRemoved"))},y=function(t,n){var o,i,r={operator:null,filters:[]};o=function(e,t){var n,o=null;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)>-1){o=n;break}return o}(n,V),e.is(o)&&(r.operator=o,i=n[o].expand,Array.isArray(i)&&(r.filters=i.map(function(e){var n={};return Object.keys(e).filter(function(n){var o,i,r,a=!1;return(o=L.indexOf(n)>-1)&&"root_path_physicalid"===n&&(i=e[n],Array.isArray(i)&&i.length>0&&(r=i[0],Array.isArray(r)&&(a=1===r.length&&r[0]===t))),!a&&o}).forEach(function(t){n[t]=e[t]}),n}))),r.originalFilterQuery=n,l.addRootFilter(t,r)},b=function(e){l.removeRootFilter(e)},C=function(t,n){var o,i=p("WUXNodeModelBehavior");o=e.is(n)?n:null,e.is(i)&&t.forEach(function(e){i.filterChildren(e,o)})},P=function(){var t,n,o=p("WUXNodeModelBehavior");e.is(u)&&e.is(o)&&(n=d.appContext.widget,t=o.getRoots(),u.resetNGFilterUI({appId:n.data.app3DSharedId,widgetId:n.getId(),rootIds:t}))},D=function(){var t=i.isAuthoringMode(),n=p("WUXNodeModelBehavior"),a="ExpandFilter.AuthoringON.FilterDisabled";e.is(n)&&t&&n.isFilterAppliedInAnyRoot()&&(!0===c.getBICmdState()&&(o.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),a="ExpandFilter.AuthoringON.FilterAndBIDisabled"),P(),n.removeFilterFromAllRoots().forEach(function(e){b(e)}),o.info(r.getNLSValue(a)),o.notify("ExpandFilterRemovedOnAuthoring"))},S=function(e){p("TaggerBehavior").onColorize(e)},A=function(){p("TaggerBehavior").onUnColorize()},R=function(t){e.is(u)&&u.removeRoot(t)},w=function(){e.is(u)&&(s.getActiveView()!==o.getId()?u.deactivate():u.activate())},{listenTo:function(){return{authoringMode:D,removeRoot:R,activeViewChange:w}},onStart:function(t){var o,i;d=n.getConfig(),o=!!e.is(t.disableExpandFilter)&&t.disableExpandFilter,g=!!e.is(t.unhide3DOnFilterApplication,"boolean")&&t.unhide3DOnFilterApplication,f=!!e.is(t.support3DFilter,"boolean")&&t.support3DFilter,o||(i=d.appContext.widget.data,u=a.create(a.PROXY.FilterProxy,{processingMode:"appProcessing",appId:i.app3DSharedId,colorize:!0,volumeFilterAvailable:1,synthesis_priority:1,ExpandSynthesisON:!0,shareFilterSpec:!0}),e.is(u.setNGFilterOptions,"function")&&(u.setNGFilterOptions({expandServices:"expand",appId:i.app3DSharedId}),u.setSynthesisMode("occurrence")),u.addEvent("ApplyNGFilter",m),u.addEvent("FilterBIColorize",S),u.addEvent("FilterBIUnColorize",A))},onStop:function(){e.is(u)&&(u.removeEvent("ApplyNGFilter"),u.removeEvent("FilterBIColorize"),u.removeEvent("FilterBIUnColorize"),P(),u.destroy(),u=null)},resetFilterUI:function(){P()},clear:function(){var t=p("TaggerBehavior");e.is(u)&&(u.cleanProxy(),t.clear())},getFilterProxy:function(){return u},setTagsWithExpandSynthesis:function(t){var n,o=[t];e.is(u)&&(n={type_filter_bo:["PLMCoreReference"]},u.setTagsWithExpandSynthesis(o,n))},applyFilter:function(e,t){u.areRootsSharable(e.objIds,e.biProxyCtx).then(function(n){n.forEach(function(t){var n=t.rootId,o=t.hasFilter;u.removeRoot(n),!0===o&&u.shareFilterSpec({fromRootId:n,fromSourceCtx:e.biProxyCtx,fromDropOnFilter:!1,callback:function(e){1===e.success.length&&I([n],e.success[0].filter.CVQuery,null)}})}),t()})}}}}}),define("DS/DELPPWViewBehaviors/SelectionBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["SelectionPlugin","DatabasePlugin"],creator:function(t,n,o,i){return{onStart:function(){},onStop:function(){},getSelections:function(){return o.getSelections(n.getId())},getSelectedNodesCount:function(){return o.getSelectedNodesCount(n.getId())},getSelectionsWithPaths:function(){return o.getSelectionsWithPaths(n.getId())},getSelectedRefs:function(){var t,r=[];return o.getSelections(n.getId()).forEach(function(n){n.forEach(function(n){t=i.getReference(n),e.is(t)&&r.push(t)})}),r},getSelectedInsts:function(){var t,r=[];return o.getSelections(n.getId()).forEach(function(n){n.forEach(function(n){t=i.getInstance(n),e.is(t)&&r.push(t)})}),r}}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementUI",["UWA/Core"],function(e){"use strict";return function(t,n,o,i,r,a,s){var l,c,u,d,g,f,p,h,m,I,v,y,b,C,P,D,S,A=null,R=[],w=null,V=[],L=[],E=null,M=o.getComponent("TooltipModel"),T=null,N=null,B=null,O=null,x=null,F=null,k=null,U=null,W=[],_=[],j=[];return h=function(){var t=i.getNLSValue("ImplementUI.Implementing"),n=i.getNLSValue("ImplementUI.SelectImplementing"),r=i.getNLSValue("ImplementUI.Implemented"),a=i.getNLSValue("ImplementUI.SelectImplemented");w=o.createElement("div",{class:"ImplementUI-Container"}),E=o.createElement("div",{class:"selectionForm-Main-Container"}).inject(w),!0===l.implementingSection&&(u=o.create("SelectionControl",{title:t,message:n,renderTo:E,multiSelection:e.is(l.multiSelectionOfImplementing)?l.multiSelectionOfImplementing:null})),!0===l.implementedSection&&(c=o.create("SelectionControl",{title:r,message:a,renderTo:E,multiSelection:!e.is(l.multiSelectionOfImplemented)||l.multiSelectionOfImplemented})),!0===l.optionsSection&&(T=o.createElement("div",{class:"options-section-container"}).inject(w),b()),k=o.createElement("div",{class:"dcForm-Main-Container"}).inject(w)},m=function(t){var n,o=t.newObjType,r=t.newObjDimensionType,a=t.cmdTitle;return e.is(r)?n=i.getNLSValue(a,{dimension:i.getNLSValue(r,null,"Dimension")}):e.is(o)?(-1!==o.indexOf("/")&&(o=o.split("/")[1]),n=i.getNLSValue(a,{type:i.getNLSValue(o||"",null,"Type")})):n=i.getNLSValue(a),n},I=function(t){var i,r,a=null,s=null,c="PLMEntity.V_Name";l=t,h(),(A=o.create("Dialog",{title:m(l),domId:l.cmdId,content:w,resizableFlag:!0,modalFlag:l.modalFlag,buttons:{Cancel:o.create("Button",{onClick:function(){A.close()}}),Ok:o.create("Button",{disabled:!e.is(void 0)||void 0,emphasize:"primary",onClick:function(){var t,o,u={};if(e.is(F)&&!0===n.getPreferenceValue("showDialog")){if(!0!==(r=F.validate()).result)return A.error(r.message),void(A.buttons.Ok.disabled=!1);for(a=F.getValues(),e.is(l.newObjDimensionType)&&(a["DELFmiMagnitudeExt.V_DimensionType"]=l.newObjDimensionType),s=F.getSecurityContextOverride(),a[c]!==R[0][c]&&(o=a[c]),t=0;t<R.length;t++)e.merge(R[t],a);if(o)if(R.length>1)for(t=0;t<R.length;t++)R[t][c]=o+"_"+(t+1);else R[0][c]=o}else if(e.is(l.newObjType)){if(e.is(L,"array"))for(t=0;t<L.length;t++)(a={}).V_Type=l.newObjType,R[t]=a}else R=null;i=e.clone(R),u.securityContextOverride=s,u.implementingId=U,u.implementedIDs=_,u.implementedPaths=j,u.implementingPaths=W,u.newObjAttributes=i,u.isInstancePossible=e.is(l.isInstancePossible)?l.isInstancePossible:null,u.cmdAction=e.is(l.cmdAction)?l.cmdAction:null,!0===l.optionsSection&&("ComboBox"===l.scopeOption?u.scopeCreation=B.value:"Toggle"===l.scopeOption&&(u.scopeCreation=B.checkFlag),e.is(l.mfgItemPrefix)&&l.mfgItemPrefix&&(u.mfgItemPrefix=O.value),e.is(l.mfgItemResultReport)&&l.mfgItemResultReport&&(u.resultReportMode=x.value)),l.onOKCallBack(u)}})}})).close=function(){v()}},y=function(){e.is(void 0)&&(void 0).destroy(),e.is(F)&&(F.destroy(),F=null)},v=function(){A.destroy(),y(),k=null,T=null,N=null,B=null,U=null,_=[],j=[],W=[],A=null,w=null,l.onCancelCallback&&l.onCancelCallback()},b=function(){var t;return N=o.createElement("div",{class:"Basic-Section-container"}).inject(T),t=o.create("Accordeon",{items:[{header:i.getNLSValue("Expander.Options"),content:N,expandedFlag:!0}],style:"filled-separate"}).inject(T),e.is(l.scopeOption)&&(d=o.createElement("div",{class:"scope-option-container"}).inject(N),o.createElement("div",{class:"wux-title-textElement",text:i.getNLSValue("ImplementUI.CreateScopeForChildren")}).inject(d),d.tooltipInfos=new M({shortHelp:i.getNLSValue("ImplementUI.CreateScopeForChildren")}),"ComboBox"===l.scopeOption&&(B=o.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:i.getNLSValue("ImplementUI.ScopeCreation.AllScope"),valueItem:"AllLevel"},{labelItem:i.getNLSValue("ImplementUI.ScopeCreation.LeafScope"),valueItem:"Leaf"}]}).inject(d))),e.is(l.mfgItemPrefix)&&l.mfgItemPrefix&&(g=o.createElement("div",{class:"mfgItemPrefix-option-container"}).inject(N),o.createElement("div",{class:"wux-title-textElement",text:i.getNLSValue("ImplementUI.PrefixForMfgItems")}).inject(g),g.tooltipInfos=new M({shortHelp:i.getNLSValue("ImplementUI.PrefixForMfgItems")}),O=o.create("LineEditor",{placeholder:i.getNLSValue("ImplementUI.PrefixForMfgItemsPlaceHolder")}).inject(g)),e.is(l.mfgItemResultReport)&&l.mfgItemResultReport&&(f=o.createElement("div",{class:"resultReport-option-container"}).inject(N),o.createElement("div",{class:"wux-title-textElement",text:i.getNLSValue("ImplementUI.ResultReport")}).inject(f),f.tooltipInfos=new M({shortHelp:i.getNLSValue("ImplementUI.ResultReport")}),x=o.create("ComboBox",{enableSearchFlag:!1,elementsList:[{labelItem:i.getNLSValue("ImplementUI.ResultReport.FullReport"),valueItem:"full_report"},{labelItem:i.getNLSValue("ImplementUI.ResultReport.ErrorReportOnly"),valueItem:"erroronly_report"},{labelItem:i.getNLSValue("ImplementUI.ResultReport.NoReport"),valueItem:"no_report"}]}).inject(f)),t},P=function(e,t){A.title=m(l.cmdTitle),t.inject(w),A.clearMessages()},C=function(){_.length>0&&(!0===l.implementingSection?e.is(U)?A.buttons.Ok.disabled=!1:A.buttons.Ok.disabled=!0:A.buttons.Ok.disabled=!1)},D=function(t){var n,o,i=[];if(e.is(t,"array"))for(n=0;n<t.length;n++)o=t[n].get("V_Name"),i.push(o);return i},S=function(){var e;!0===l.checkForImplementingScope&&("ResultingProduct"===l.linkType?s.isResultingLinked(U):s.isScoped(U))&&(e=i.getNLSValue(i.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:p})),A.error(e))},{createUI:function(e){I(e)},isVisible:function(){return!!e.is(A)&&A.visibleFlag},destroyUI:function(){e.is(A)&&A.close()},updateImplemented:function(e){var t=[],n=[],o=[];V=e,j=[],_=[],A.clearMessages(),0!==e.length&&(e.forEach(function(e){n.push(e.id),o.push(e.path),t.push(r.getReferenceModel(e.id))}),c.updateLabel(t),L=D(t),!0===l.multiSelectionOfImplemented?(_=n,j=o):1===e.length?(_=[n[0]],j=[o[0]]):(A.buttons.Ok.disabled=!0,y()),C(),S())},getImplementedIDs:function(){return _},updateImplementing:function(t){var n=[],o=[],i=[];U=null,W=[],A.clearMessages(),0!==t.length&&(t.forEach(function(e){o.push(e.id),i.push(e.path),n.push(r.getReferenceModel(e.id))}),!1===u.updateLabel(n)?A.buttons.Ok.disabled=!0:(e.is(V,"array")&&this.updateImplemented(V),!0===l.multiSelectionOfImplementing||(1===t.length?(U=o[0],W=[i[0]],p=n[0].get("V_Name")):(A.buttons.Ok.disabled=!0,y())),C(),S()))},getImplementingID:function(){return U},showDCFormForAssign:function(t){var n;if(e.is(U)&&_.length>0)if(l.isInstancePossible=t,!0===t){if(R=[],e.is(L,"array"))for(n=0;n<L.length;n++)R.push({"PLMEntity.V_Name":L[n]});e.is(F)?F.updateToDefaultValues(R[0]):F=o.create("DataCollectionUI",{type:l.newObjType,onTypeChange:P,renderTo:k,defaultValues:R})}else y()},showDCFormForCreate:function(){var t;if(_.length>0){if(R=[],e.is(L,"array"))for(t=0;t<L.length;t++)R.push({"PLMEntity.V_Name":L[t]});e.is(F)?F.updateToDefaultValues(R[0]):F=o.create("DataCollectionUI",{type:l.newObjType,onTypeChange:P,renderTo:k,defaultValues:R})}},getSelectionsWithPaths:function(){var e={},t=a.getSelectionsWithPaths(n.getId());return e.selNodes=[],e.bUpdateImplemented=!1,e.bUpdateImplementing=!1,t.length<=0?e:(0!==t[0].length?(e.selNodes=t[0],e.bUpdateImplemented=!0,e.bUpdateImplementing=!1):0!==t[1].length&&(e.selNodes=t[1],e.bUpdateImplemented=!1,e.bUpdateImplementing=!0),e)},showErrorMultipleImplementedSelected:function(e){c.showWarningMessage(e),j=[],_=[],A.buttons.Ok.disabled=!0},showMessages:function(e,t){"info"===t?A.info(e):"warning"===t?A.warning(e):"error"===t?A.error(e):n.debug("type of message is invalid")}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/AltSubReplaceReportUI",["UWA/Core","UWA/Controls/Abstract"],function(e,t){"use strict";const n=t.extend({defaultOptions:{className:"Details-list",showHeaderMessage:!0},objectsTableHead:null,objectsTableBody:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){let t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableHead=e.createElement("thead",{id:"tableHeader"}),this.objectsTableHead.setStyles({"font-weight":"bold"}),this.objectsTableHead.inject(t),this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableBody.inject(t)},setData:function(t){if(this.empty(),this.options.showHeaderMessage&&e.is(this.objectsTableHead)){const n=[{tag:"th",text:"#"}],o=t.headers.map(e=>({tag:"th",text:e})),i=e.createElement("tr",{html:n.concat(o)});this.objectsTableHead.appendChild(i)}e.is(this.objectsTableBody)&&t.detailObjs.map((t,n)=>{const o=[{tag:"td",text:n+1},{tag:"td",text:t.instanceTitle},{tag:"td",text:t.parentTitle},{tag:"td",text:t.status},{tag:"td",text:t.message}];return e.createElement("tr",{html:o})}).forEach(e=>{this.objectsTableBody.appendChild(e)})},empty:function(){if(e.is(this.objectsTableBody))for(;e.is(this.objectsTableBody.firstChild);)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return function(t,o,i,r){const a=function(e){return e.isReference()?e.get("V_Name"):e.get("PLM_ExternalID")},s=function(e){return Object.values(e).map(e=>"Success"===e.status?(e=>({instanceId:e.replacementInstanceId,status:i.getNLSValue("AltSub.ReplaceReport.Success"),message:e.successMessage}))(e):(e=>({instanceId:e.oldInstanceId,status:i.getNLSValue("AltSub.ReplaceReport.Failed"),message:e.errorMessage}))(e))},l=function(l){let c=e.createElement("div",{class:"Replace-report-content-container"});(function(t){let o=new n;const s=t.map(e=>{const t=r.getInstance(e.instanceId),n=r.getAggregatingReferenceModelFromInstance(t);return{instanceTitle:a(t),parentTitle:a(n),status:e.status,message:e.message}});o.setData({headers:[i.getNLSValue("AltSub.ReplaceReport.InstanceTitle"),i.getNLSValue("AltSub.ReplaceReport.ParentTitle"),i.getNLSValue("AltSub.ReplaceReport.Status"),i.getNLSValue("AltSub.ReplaceReport.Message")],detailObjs:s});let l=(()=>{let t=e.createElement("div",{class:"Details-list-div"});return t.setStyles({margin:"5px"}),t})();return o.getContent().inject(l),l})(s(l)).inject(c),function(e){const n=o.getComponent("WUXFrameWindowsManager").getFrameWindow(t.getAppContext());let r=o.create("Panel",{title:i.getNLSValue("AltSub.ReplaceReport.Title"),icon:"",immersiveFrame:n.getImmersiveFrame(),content:e,width:500,height:250,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0});return r.close=function(){r.hide()},r}(c).show()};return{showReport:function(e){l(e)}}}}),define("DS/DELPPWViewBehaviors/CfgColumnsBehavior/ConfigIdsContainer",[],function(){"use strict";const e=function(e,t){let n=new Set(e);for(const e of t)n.add(e);return n};class t{constructor(e,t,n){this.pidSet=e,this.relidSet=t,this.pairs=n}static empty(){return new t(new Set,new Set,{})}addPID(e){return this.pidSet.add(e),this}addRelID(e){return this.relidSet.add(e),this}addPair([e,t]){return this.pairs[e]=t,this}combine(n){const o=e(this.pidSet,n.pidSet),i=e(this.relidSet,n.relidSet),r={...this.pairs,...n.pairs};return new t(o,i,r)}getIdsObjAsPerExternalSpec(){return{pids:Array.from(this.pidSet),relids:Array.from(this.relidSet),pairs:this.pairs}}}return t}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/OperationTime/OperationTimeUtil",["UWA/Core"],function(e){"use strict";return function(t,n,o,i){var r,a,s,l=["V_EstimatedTime","V_MeasuredTime"],c={EstimatedTime:l[0],MeasuredTime:l[1]};return a=function(e){return n.doesAttributeExist(e,"V_UseGanttTimeSolver")&&"TRUE"===e.get("V_UseGanttTimeSolver")},s=function(e){var t,o,r;return o=i.getAttributeInfo("V_TimeMode"),t=n.getAuthorizedValueIndex(o,null,e.get("V_TimeMode")),r=n.getAuthorizedValueDB(o,t),c[r]},r=function(t){var n,i=void 0;return a(t)?o.needToQueryForChildren(t)?i=0:(i=0,o.getAllChildrenFromCollection(t.get("PID")).instancesPID.forEach(function(t){var n,r,a=o.getInstance(t);r=o.getReferenceIdFromInstance(a),r=o.getReference(r),e.is(r)&&(n=s(r),i+=e.is(n)&&r.get(n)?Number(r.get(n)):0)})):(n=s(t),i=e.is(n)?t.get(n):void 0),i},{fillNodeOptions:function(t,n){var i,a=t.referencePID;e.is(a)&&(i=o.getReference(a),e.is(i)&&"OPERATION"===i.get("PPRTYPE")&&n.forEach(function(e){e.includes(".operationTime")&&(t.grid[e]=r(i))}))},fillUpdatedNodeOptions:function(t,n,o,i){var a;("V_TimeMode"===i||l.indexOf(i)>-1)&&(a=n.find(function(e){return e.includes(".operationTime")}),e.is(a)&&(t[a]=r(o)))}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ToolTipManager",["UWA/Core"],function(e){"use strict";return function(t,n,o,i,r,a){var s,l=function(o){n.getXMLValues(o,function(t){!function(t){var n;if(e.is(t))for(t=Array.isArray(t)?t:[t],n=0;n<t.length;n++)s[t[n].name]=Array.isArray(t[n].Attribute)?t[n].Attribute:[t[n].Attribute]}(t.Tooltips.Tooltip)},function(){t.debug("Failed to get"+o+"XML configuration file")})},c=function(t){var n,o,l,c,u,d,g="",f=i.getReference(t.nodeModel.getReferencePID()),p=e.is(t.nodeModel.getInstancePID()),h=t.cellView.collectionView.getColumnOrGroup(t.columnID).tooltipIndex;if(p&&(d=i.getInstance(t.nodeModel.getInstancePID())),e.is(h)&&(o=s[h],e.is(o)))for(n=0;n<o.length;n++)l=a.getAttributeInfoFromColumn(o[n]),u=r.getAttributeInfo(l.attributeName),("instance"!==l.objType||p)&&("instance"===l.objType&&e.is(d)?c=d.get(l.dataIndex):e.is(f)&&(c=f.get(l.dataIndex)),e.is(c)&&""!==c&&(c=e.is(u)&&a.hasMagnitude(u)?a.getMagnitudeValue(c,u)+" "+a.getNLSForUnit(u):"NULL"===c?"":c,g+=(e.is(u)?a.getNLS(u):l.attributeName)+" : "+c+"\n"));return g};return{init:function(e){s={},l(e)},getTooltipValue:function(e){return c(e)}}}}),define("DS/DELPPWViewBehaviors/CfgColumnsBehavior/CfgCellManager",["UWA/Core","UWA/Class"],function(e,t){"use strict";const n="string",o="configLoading";return t.singleton({hasCellValue:()=>!0,getCellValue(t){let n=null;if(e.owns(t,"nodeModel")){const o=t.nodeModel,i=t.dataIndex,r=o.options.grid[i];n=e.is(r,"string")?r.trim():r}return e.is(n)?n:""},getCellTypeRepresentation(t){let i=o;if(e.owns(t,"nodeModel")){const a=t.nodeModel;if(e.is(a))if(r=t.cellModel,e.is(r,"string")&&0===r.length){i=!!e.is(a.options.areCfgColumnsFilled,"boolean")&&a.options.areCfgColumnsFilled?n:o}else i=n}var r;return i}})}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/Documents/DocumentsUtil",["UWA/Core"],function(e){"use strict";return function(t,n,o){var i,r;return i=function(t,n,i){var r,a=o.getAttributesConfiguredOnDocumentColumn(i),s=t.get("dataelements"),l="";if(e.is(a))for(r=0;r<a.length;r++)e.is(s[a[r]])&&""!==s[a[r]]&&(l={title:s[a[r]],type:n});else l=s.title;return l},{fillNodeOptions:function(e,t){var o,i,a=r(e.referencePID,t);for(o in a)a.hasOwnProperty(o)&&(e.grid[o]=a[o]);if("IndexRelationsOnDemand"===widget.getValue("navigateOnIndex")&&n.needToQueryForConnections(e.referencePID))for(i in e.grid)Array.isArray(e.grid[i])&&0===e.grid[i].length&&e.grid[i].push({Value:"??",Icon:null});return e},getDocumentNodeOptions:r=function(t,n){var r,a,s,l,c={},u=o.getConnectedDocumentPIDs(t);if(Array.isArray(n)||(n=[n]),e.is(u)&&n.length>0)for(a=0;a<n.length;a++)if("document"===(s=n[a]).split(".")[1])for(c[s]=[],r=0;r<u.length;r++){const[e,,t]=u[r].split("|");l=o.getDocument(t),c[s].push(i(l,e,s))}return c}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/ConfirmationDialog",["UWA/Core","UWA/Controls/Abstract"],function(e,t){"use strict";return function(n,o){var i,r=!(!e.is(o)||!e.is(o.check,"string")),a=t.extend({defaultOptions:{className:"confirmation-objectslist",appendObjects:!1,showColumnHeaders:!1},objectsTableBody:null,objectsTableHead:null,objectsTableFoot:null,init:function(e){this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=e.createElement("table",{class:"table table-bordered table-condensed table-hover",id:"tableNames"});this.elements.container=t,this.objectsTableHead=e.createElement("thead"),this.objectsTableFoot=e.createElement("tfoot"),this.objectsTableBody=e.createElement("tbody",{id:"tableBody"}),this.objectsTableHead.inject(t),this.objectsTableBody.inject(t),this.objectsTableFoot.inject(t)},setData:function(t){var n,o,i=this,r=[],a=[],s=e.is(t)&&e.is(t.attributes,"array")?t.attributes:[],l=e.is(t)&&e.is(t.models,"array")?t.models:[];!1===i.options.appendObjects&&i.empty(),i.options.showColumnHeaders&&null!==i.objectsTableBody&&s.length>0&&(s.forEach(function(e){r.push({tag:"th",text:e})}),n=e.createElement("tr",{html:r}),i.objectsTableHead.appendChild(n)),null!==i.objectsTableBody&&l.length>0&&l.forEach(function(t){a=[],s.forEach(function(n){o=t.get(n),a.push({tag:"td",text:e.is(o)?o:""})}),a.length>0&&(n=e.createElement("tr",{html:a}),i.objectsTableBody.appendChild(n))})},empty:function(){if(null!==this.objectsTableBody)for(;this.objectsTableBody.firstChild;)this.objectsTableBody.removeChild(this.objectsTableBody.firstChild)}});return i=function(t,i,a,s,l){var c,u,d=e.createElement("div",{class:"confirmation-dialog-content-container"});e.is(i,"string")&&(i=e.createElement("span",{class:"confirmation-dialog-message",text:i})).inject(d),e.is(l)&&l.inject(d),r&&(u=n.create("Toggle",{type:"checkbox",checkFlag:!1,label:o.check})).inject(d),(c=n.create("Dialog",{title:t,domId:"ConfirmationUI-Dialog",content:d,minHeight:100,minWidth:400,modalFlag:!0,resizableFlag:!0,buttons:{Cancel:n.create("Button",{onClick:function(){c.close(),a.apply(null,[!1,s])}}),Ok:n.create("Button",{disabled:!1,emphasize:"primary",onClick:function(){c.close(),a.apply(null,[!0,s,e.is(u)?u.checkFlag:null])}})}})).close=function(){this.destroy(),i=null,t=null,c=null}},{show:function(t,n,r,s){var l,c,u;e.is(r)&&e.is(r.models)&&(l=r.models).length>0&&((u=new a(o)).setData(r),c=e.createElement("div",{class:"confirmation-objectList"}),u.getContent().inject(c)),i(t,n,s,l,c)}}}}),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeDocument",["UWA/Core","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel"],function(e,t,n){"use strict";return t.extend({name:"TreeDocument",getTreeNodeModel:function(t,n){var o=null;if(n=n||{},!t)throw new Error("id is not defined");return o=this.searchTree(t),e.is(n.returnFirstOne)&&n.returnFirstOne&&(o=0<o.length?o[0]:null),o},getMatchingNodeModels:function(t){var n=[];return e.is(t,"function")&&(n=this.search({match:function(n){var o,i=n.nodeModel,r=!1;return o=t(i),e.is(o,"boolean")&&(r=o),r},useTransaction:!1})),n},getHighlightedNodes:function(){return this.search({match:function(e){return e.nodeModel.isHighlighted()},useTransaction:!1})},searchTree:function(t,n,o,i){var r;return t=Array.isArray(t)?t:[t],this.search({match:function(a){if(!e.is(a.nodeModel.getReferencePID))return!1;if(i&&!a.nodeModel.isRoot(!0))return!1;if(n&&"PID"!==n){if(n&&(r=o?".instance":".reference",t.indexOf(a.nodeModel.options.grid[n+r])>-1))return!0}else{if(t.indexOf(a.nodeModel.getInstancePID())>-1)return!0;if(t.indexOf(a.nodeModel.getReferencePID())>-1)return!0;if(t.indexOf(a.nodeModel.getLinkPID())>-1)return!0}},useTransaction:!1})},getRoots:function(t){var o=!!e.is(t,"boolean")&&t,i=this._parent();return o&&(i=i.reduce(function(e,t){var o;return t.getNodeSource()===n.NODE_SOURCE.GROUPING?(o=t.getChildren(!0),Array.isArray(o)&&(e=e.concat(o))):e.push(t),e},[])),i},getAllDescendants:function(t){var o;return t=!!e.is(t)&&t,o=this._parent(),t&&e.is(o,"array")&&(o=o.filter(function(e){return e.getNodeSource()===n.NODE_SOURCE.MODEL})),o}})}),define("DS/DELPPWViewBehaviors/EditAttributeBehavior",["UWA/Core","text!DS/DELPPWViewBehaviors/assets/json/MockAttributeInfo.json","text!DS/DELPPWViewBehaviors/assets/json/EditAttributeFormEvents.json"],function(e,t,n){"use strict";return{plugins:["UXComponentsPlugin","AttributePlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin"],creator:function(o,i,r,a,s,l,c){var u,d,g,f,p,h=r.getComponent("Button"),m=null,I=null,v=null,y=e.Json.decode(n),b=function(t,n){var o=d.createElement("div",{class:"section-container"}),i={attribute:t},r={};return e.is(n)&&e.is(n.formStyle)&&(r.formStyle=n.formStyle),r.section=i,I=d.create("FormUI",{sections:r,renderTo:o,headerAccordean:!1}),o},C=function(t,n){u=d.createElement("div",{class:"EditAttribute-Dialog"}),e.is(d)?(v=d.create("Dialog",e.merge(t,{domId:"EditAttributeUI-Dialog",content:u,resizableFlag:!0,modalFlag:!0,width:400,minWidth:290,buttons:{Cancel:new h({onClick:function(){v.close()}}),Ok:new h({disabled:!1,emphasize:"primary",onClick:function(){e.is(n,"function")&&n()}})}}))).close=function(){this.destroy(),e.is(I)&&I.destroy(),e.is(u)&&u.destroy(),v=null}:i.debug("uxFactoryBehavior is not available.")},P=function(t){return new Promise(function(n,o){var r={},a=function(){i.notify("stopProgress",r),i.warn(s.getNLSValue("EditAttributeUI.retrieveDataFailure")),o()};if(!e.is(t))return i.debug("objectToBeModified is not available."),void o();i.notify("startProgress",r),l.fetchAttributes(t,{onComplete:function(){i.notify("stopProgress",r),n()},onFailure:a,onTimeout:a})})},D=function(t){var n=l.getReference(t);return e.is(n)||(n=l.getInstance(t)),e.is(n)||(n=l.getConnection(t)),n};return{name:"EditAttributeBehavior",onStart:function(n){var o;d=i.getBehavior("UXFactoryBehavior"),g=i.getBehavior("ModelBehavior"),f=i.getBehavior("LinkBehavior"),e.is(n.editFormAttributesXML)&&(o=c.getXMLValues(n.editFormAttributesXML),m=o.convert("AttributesDescriptionList.Type","name")),p=e.Json.decode(t)},onStop:function(){},hasEditConfiguration:function(t){var n=!1,o=null;return e.is(m)?(o=D(t),e.is(o)&&e.is(m[o.get("type")])&&(n=!0)):i.debug("_editFormAttrsConfig is not available."),n},editConfiguredAttributes:function(t){var n,r,c,d,g,h,S,A,R=null,w={};h=l.getConnection(t),S=e.is(h)?h.get("type"):null,e.is(m)?(R=D(t),e.is(R)?(n=m[R.get("type")],y[R.get("type")]&&(A=y[R.get("type")]),e.is(n)?(c=n.Attribute,e.is(n.formStyle)&&(w.formStyle=n.formStyle),(d=a.getObjectAndAttributeInfos(c)).forEach(function(n){"ProcessImplementLinkOcc"===S&&"V_usage"===n.dataIndex&&(n.attributeInfo=p[n.dataIndex],n.attributeInfo.AuthorizedValues=function(t){var n,i,r,a,l,c,u=[];return i=(n=o.getPlugins("ImplementPlugin").instance).getRolesForTargrtObject(t),r=f.getConnection(t),a=n.getRoleFromModelOrComputed(r.get("PID")),e.is(a)&&"NULL"!==a&&(c=a.replace("*",""),l=i.indexOf(c),i.splice(l,1),i.unshift(a)),i.forEach(function(e){u.push({NLS:s.getNLSValue("Role."+e),Name:e})}),u}(t))}),d.forEach(function(t,n){t.objectToBeModified=R,e.is(c[n].displayType)&&(t.displayType=c[n].displayType)}),P(R).then(function(){var n;(n=d.filter(function(t,n){var o=e.is(t.attributeNLSTitle)?t.attributeNLSTitle:a.getNLS(t.attributeInfo);return a.doesAttributeExist(R,t.dataIndex)||a.isAttrApplicableForType(R,t.attributeName)?(e.is(A)&&e.is(A[t.dataIndex])&&(t.events=A[t.dataIndex]),!0):(i.warn(s.getNLSValue("EditAttributeUI.AttrNotAvilaibleOnObject",{attributeNLS:o})),!1)})).length>0?(g=b(n,w),r={title:s.getNLSValue("EditAttributeUI.HeaderMulti")},l.isWorkInstruction(R)&&(r=e.merge({position:{my:"top",at:"top"},height:500,width:600},r)),C(r,function(){var o,r,c,u,g,p,h={},m={};if(!0!==(r=I.validate()).result)return v.error(r.message),void(v.buttons.Ok.disabled=!1);if(c=I.getValues(),R.isConnection())if(e.is(f)){for(u in c)if(c.hasOwnProperty(u))for(g=0;g<d.length;g++)u===n[g].attributeInfo.FullName&&(n[g].attributeInfo.Protection<3||!a.isReadOnly(n[g].attributeInfo))&&(p=c[u],"ProcessImplementLinkOcc"===S&&"V_usage"===n[g].dataIndex&&(p=p.replace("*","")),n[g].newValue=p);f.updateLinkAttributes([t],n)}else i.debug("linkBehavior is not available.");else{for(u in c)if(c.hasOwnProperty(u))for(g=0;g<d.length;g++)u===n[g].attributeInfo.FullName&&n[g].attributeInfo.Protection<3&&(m[u]=c[u]);o={data:m,onFailure:function(t,n){var o=s.getNLSValue("EditAttributeUI.UpdateFailure");e.is(n)&&e.is(n.message,"string")&&(o+="\n"+n.message),i.warn(o),i.notify("stopProgress",h)},onComplete:function(){i.info(s.getNLSValue("EditAttributeUI.UpdateSuccess")),i.notify("stopProgress",h)}},i.notify("startProgress",h),R.isReference()?l.updateReference(t,o):R.isInstance()&&l.updateInstance(t,o)}v.close()}),g.inject(u)):i.warn(s.getNLSValue("EditAttributeUI.ConfigAttrNotAvilaibleOnObject"))})):i.warn(s.getNLSValue("EditAttributeUI.NoAttributesConfigured"))):i.debug("objectToBeModified is not available.")):i.debug("_editFormAttrsConfig is not available.")},editAttribute:function(t,n){var o,r,l,c,d,p;e.is(n,"array")||(n=[n]),e.is(t,"array")||(t=[t]),d=n[0].objectToBeModified,P(d).then(function(){var h=!0;n.forEach(function(u){a.doesAttributeExist(d,u.dataIndex)||a.isAttrApplicableForType(d,u.dataIndex)?(r=e.is(u.attributeNLSTitle)?u.attributeNLSTitle:a.getNLS(u.attributeInfo),l=[],t.forEach(function(t){o=null,o="reference"===u.instOrRef&&e.is(t.referencePID)?t.referencePID:"instance"===u.instOrRef&&e.is(t.instancePID)?t.instancePID:t.id,e.is(o)&&l.push(o)}),c=n.length>1?s.getNLSValue("EditAttributeUI.HeaderMulti"):s.getNLSValue("EditAttributeUI.Header",{attributeName:r})):(h=!1,i.warn(s.getNLSValue("TableView.AvailabilityFailure",{key:r})))}),h&&(e.is(v)||(p=b(n),C({title:c},function(){var t,o,i,r,s,c;if(!0!==(c=I.validate()).result)return v.error(c.message),void(v.buttons.Ok.disabled=!1);for(i in o=I.getValues())if(o.hasOwnProperty(i))for(r=0;r<n.length;r++)i!==n[r].attributeInfo.FullName||a.isReadOnly(n[r].attributeInfo)||(t=o[i],n[r].newValue=t,s=n[r].instOrRef);e.is(g&&s)?g.updateModelAttribute(l,n,t):e.is(f)&&f.updateLinkAttributes(l,n),v.close()}),p.inject(u)))})}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager",["UWA/Core","DS/Utilities/Utils"],function(e,t){"use strict";return function(n,o,i,r,a,s){var l=s.getGroupingAdditonalColumns(),c=n.getBehavior("ModelBehavior"),u=n.getBehavior("WUXNodeModelBehavior"),d=function(t){var n;return e.is(t.nodeModel)&&Object.prototype.hasOwnProperty.call(t.nodeModel.options,t.dataIndex)&&(n=t.nodeModel.options[t.dataIndex]),n},g=function(e,t){var n={};n.node=t.nodeModel,e.command&&s.executeCommand(e.command,n)},f=function(t,n){var i,a,s,l,c={cellValue:"",isAttrExists:!1,unit:""},u=r.getAttributeInfoFromColumn(t);if(e.is(t.dicoType,"array")&&t.dicoType.length>0)for(s=t.dicoType.length,i=0;i<s;i++)if(a=t.dicoType[i]+"."+t.dataIndex,e.is(n.nodeModel)&&Object.prototype.hasOwnProperty.call(n.nodeModel.options.grid,a)){l=o.getAttributeInfo(t.dicoType[i]+"."+u.dataIndex),e.is(l)&&r.hasMagnitude(l)&&(c.unit=r.getNLSForUnit(l)),c.cellValue=n.nodeModel.options.grid[a],c.isAttrExists=!0;break}return c};return{getBICellValue:function(e){return d(e).colorCode},getMultiTypeCellValue:function(e){var t=this.getColumnOrGroup(e.columnID);return f(t,e).cellValue},getMultiTypeCellSemantics:function(e){var t=this.getColumnOrGroup(e.columnID);return{units:f(t,e).unit}},getMultiTypeCellEditableState:function(e){var t,o;return s.areModuleColumnsImmutable(n.getId())?o=!1:(t=this.getColumnOrGroup(e.columnID),o=f(t,e).isAttrExists),o},getBICellValueForExport:function(t){var n="";return e.is(t.cellModel,"string")?n=t.cellModel:(n=d(t),n=e.is(n)?n.tooltip:""),n},setValue:t.debounce(function(t,o){var s,l,u,d,g,f,p=this,h=[];if(f=this.getColumnOrGroup(t.columnID),d=r.getNodeAndColumnInfos(t.nodeModel,f),g=r.isMultiValuated(d.attributeInfo),!r.doesAttributeExist(d.objectToBeModified,d.dataIndex)&&!r.isAttrApplicableForType(d.objectToBeModified,d.dataIndex))return n.warn(a.getNLSValue("TableView.AvailabilityFailure",{key:d.attributeNLSTitle})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});if(r.isBoolean(d.attributeInfo))g&&(o=r.getValueAsArray(o,r.getType(d.attributeInfo)));else if(r.hasRangeDefined(d.attributeInfo,d.attributeDef)){if(!e.is(o))return;o=r.getAuthorizedValue(d.attributeInfo,d.attributeDef,o)}else if(r.isDate(d.attributeInfo)){if(o=e.is(o)?o:"",g)for(h=r.getValueAsArray(o),o=[],u=0;u<h.length;u++){if(l=new Date(h[u]),isNaN(l.getTime()))return n.warn(a.getNLSValue("TableView.InvalidDateMessage",{date:h[u]})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o.push(Math.floor(l.getTime()/1e3))}else{if(l=new Date(o),isNaN(l.getTime()))return n.warn(a.getNLSValue("TableView.InvalidDateMessage",{date:o})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});o=Math.floor(l.getTime()/1e3)}t.nodeModel.setAttribute(t.dataIndex,o),this.updateRenderedRow(t.rowID)}else if(g)o=r.getValueAsArray(o,r.getType(d.attributeInfo));else if(e.is(t.cellModel)){if(r.isInteger(d.attributeInfo)&&!Number.isInteger(o))return void n.warn(a.getNLSValue("TableView.InvalidIntegerValue",{attr:d.attributeNLSTitle,value:o}))}else if((s=r.getMaxLength(d.attributeInfo))>0&&o.length>s)return void n.warn(a.getNLSValue("TableView.MaxLengthFailure",{length:o.length,maxLength:s}));"V_SequencingMode"===d.dataIndex?i.setSequencingMode(d.objectToBeModified.id,o,{onFailure:function(){n.warn(a.getNLSValue("SetSequencingModeUI.UpdateFailure"))},onComplete:function(){n.info(a.getNLSValue("SetSequencingModeUI.UpdateSuccess")),n.notify("setSequencingMode")}}):e.is(c)&&c.updateModelAttribute(d.objectToBeModified.id,d,o,{onFailure:function(){var n;n=t.nodeModel,e.is(n.options.oldLabel)&&(n.prepareUpdate(),n.setLabel(n.options.oldLabel),delete n.options.oldLabel,n.pushUpdate()),p._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})}})},100,!0),getCellValue:function(t,n){var o=r.getNodeAndColumnInfos(n.nodeModel,t),i=r.isMultiValuated(o.attributeInfo),s=r.hasMagnitude(o.attributeInfo),l=r.hasRangeDefined(o.attributeInfo),c=n.nodeModel.options.grid[t.dataIndex];if("type"===o.attributeName&&(c=a.getNLSValue("Type."+c)),s)c=r.getMagnitudeValue(c,o.attributeInfo,!1);else if(i)r.isDate(o.attributeInfo)&&c&&(c=c.map(function(e){return r.getFormattedDate(e)})),c=r.getValueAsString(c,r.getType(o.attributeInfo));else if(r.isDate(o.attributeInfo))return c=l?e.is(c)?r.getFormattedDate(c):null:e.is(c)?r.getDate(c):null;return e.is(c)?c:""},getCustomStringCellValue:function(e){var t=e.nodeModel.getAttributeValue(e.dataIndex),n=a.getNLSValue("Column.MakeOrBuy.Make"),i=a.getNLSValue("Column.MakeOrBuy.Buy");return o.isAKindOf(t,"CreateKit")||o.isAKindOf(t,"CreateAssembly")||o.isAKindOf(t,"CreateMaterial")||o.isAKindOf(t,"Installation")?n:o.isAKindOf(t,"Provide")?i:""},getURLCellValue:function(t){var n=this.getColumnOrGroup(t.columnID),o=t.nodeModel.getAttributeValue(n.dataIndex);return(!e.is(o)||e.is(o,"string")&&0===o.length)&&(o=n.defaultValue),{label:o,func:g.bind(this,n,t),getLabel:function(){return this.label}}},getFullOwnerURL:function(t){var n=this.getColumnOrGroup(t.columnID),o=t.nodeModel.getAttributeValue(n.dataIndex),r=e.is(o)?i.getReferenceModel(t.nodeModel._referencePID):null,a=e.is(r)?r.get("ds6w:responsible"):"";return{label:e.is(a)?a:e.is(o)?o:"",func:g.bind(this,n,t),getLabel:function(){return this.label}}},hasCellValue:function(t){var n,o,a,s,l,c;if(u.isFakeNodeModel(t.nodeModel))return!1;switch((n=this.getColumnOrGroup(t.columnID)).displayType){case"ALTERNATES_AND_SUBSTITUTES":case"hideShow3D":case"NonEditable":case"URL":a=!0;break;case"BIEssentials":case"BIEssentialsAltSub":s=d(t),a=!(!e.is(s)||"transparent"===s.colorCode);break;case"DocMgmt":s=t.nodeModel.getAttributeValue(t.dataIndex),a=e.is(s,"array")&&s.length>0;break;case"MultiType":a=(s=f(n,t)).isAttrExists;break;default:o=r.getNodeAndColumnInfos(t.nodeModel,n),e.is(o.objectToBeModified)?(a=r.doesAttributeExist(o.objectToBeModified,o.dataIndex),c=r.isAttrApplicableForType(o.objectToBeModified,o.dataIndex),l=o.objectToBeModified.getAdditionalInfo("isFetched"),a=a||!a&&i.getNavigateOnIndex()&&e.is(l)&&!l||c):a=!1}return a},getCellValueForDocMgt:function(e){var t;if(!e.isHeader&&(t=e.nodeModel.getAttributeValue(e.dataIndex),Array.isArray(t))){const e=t.length;if(1===e)return t[0].title;if(e>1)return`${t[0].title} ...`}return""},getURLCellValueForExport:function(t){var n=t.cellModel;return t.rowID>=0&&e.is(t.cellModel)&&(n=t.cellModel.getLabel()),n},getGroupingColumnCellValue:function(e){var t,n=this.getColumnOrGroup(e.columnID);return n.dataIndex===l.Type?(t=e.nodeModel.getReferenceType(),a.getNLSValue("Type."+t)):n.dataIndex===l.Reference?e.nodeModel.getReferencePID():void 0}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/RWU/RWUColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n,o,i){const r=(e=>(...t)=>t.join(e))(" "),a=function(){let e=new Map;return{generateFor:function(t){let n;return n=e.has(t)?e.get(t)+1:1,e.set(t,n),n}}},s={ACTION:"RWU_Action",STATUS:"RWU_Status",REPLACE:"RWU_Replace"},l="success",c="ignored",u=t=>{let n=!1;return e.is(t)&&(n=!0,(t=>e.is(t,"string")&&0===t.length)(t)&&(n=!1)),n},d=t=>n=>o=>{let i=!1;if(!o.isHeader){const r=o.nodeModel;if(e.is(r)){const o=r.getAttributeValue("cellInfo");if(e.is(o)){const e=o[t];i=n(e)}}}return i},g=d("candidateEntries")(e=>Array.isArray(e)&&e.length>1),f=d("suggestionToPerformEntries")(e=>Array.isArray(e)&&e.length>0),p=t=>{let n=!1;const o=t.options.rwuStatus;return e.is(o)&&(n=o===l||o===c),n};return{getNonModelDataIndexes:()=>[s.ACTION,s.STATUS,s.REPLACE],hasRWUCellValue:()=>!0,getCellTypeRepresentation(e){let t;if(e.isHeader)t="string";else switch(e.dataIndex){case s.ACTION:t=f(e)?"enumString":null;break;case s.REPLACE:t="url";break;default:t="string"}return t},getCellClassName(t){var n,o="";return e.is(t.nodeModel)&&(n=t.nodeModel.options.rwuStatus,"RWU_Status"===t.dataIndex&&(t.cellView.getContent(),"fail"===n?o="rwu-fail-status":"success"===n?o="rwu-success-status":"ignored"===n&&(o="rwu-ignored-status")),"RWU_Replace"===t.dataIndex?o="url-column":"RWU_Status"!==t.dataIndex&&"success"===n&&(o+=" rwu-succeeded-row")),o},getCellValue(r){let a=null;const l=r.nodeModel.options.grid,c=r.dataIndex;if(e.is(r.nodeModel))switch(c){case s.ACTION:e.is(l[c])&&(r.isHeader||e.is(this.isCellInEdition,"function")&&(a=this.isCellInEdition(r.cellID)?l[c].value:l[c].label));break;case s.REPLACE:a=1===l[s.ACTION].value||6===l[s.ACTION].value?{label:l[c],func:function(){!function(r,a,s){var l=t.getBehavior("SearchBehavior"),c=i.getModuleSelections(t.getId()),u=t.getBehavior("WUXNodeModelBehavior");const d=r.nodeModel._referencePID;var g=n.getReferenceModel(d),f=n.getValidChildTypes(g);l.showSearchDialoguAndActivate(function(i){c.forEach(function(r){var s=u.getNodeModel(r.id,!0);if(e.is(s.options.grid)&&s.options.grid.cellInfo.isLeaf){if(e.is(i,"array")&&i.length>0){var l=n.getReferenceModel(i[0]);e.is(l)?(s.options.grid[a]=l.get("V_Name"),s.options.grid[a+"PID"]=l.get("PID")):(s.options.grid[a]=i[0]["ds6w:label"],s.options.grid[a+"PID"]=i[0].id)}else t.warn(o.getNLSValue("RWU.ObjectRetrievalFailure"));u.updateNode(s.options.referencePID)}})},{title:o.getNLSValue("Dialog.ReplaceByExisting.Title"),searchTitle:o.getNLSValue("Search.ReplaceByExisting.Title"),types:f})}(r,c)},getLabel:function(){return this.label},PID:""}:"";break;default:a=l[c]}return a},getCellSemantics(t){const n=t=>{const n=(e=>t=>{const n=e.generateFor(t);return r(t,(e=>"["+e+"]")(n))})(new a);return t.reduce((t,o)=>{const i=o.labelItem;return e.owns(t,i)?t[n(i)]=o.valueItem:t[i]=o.valueItem,t},{})};let o=null;if(e.is(t.nodeModel)){const i=t.nodeModel.options.grid,r=t.dataIndex;if(e.is(i)){const a=i.cellInfo;e.is(a)&&(r===s.REROUTING?g(t)&&(o={possibleValues:n(a.candidateEntries)}):r===s.ACTION&&f(t)&&(o={possibleValues:n(a.suggestionToPerformEntries)}))}}return o},setRWUValue(n,o,r){const a=n.dataIndex;var l=i.getModuleSelections(t.getId()),c=t.getBehavior("WUXNodeModelBehavior");a===s.ACTION&&u(r)&&l.forEach(function(t){var n=c.getNodeModel(t.id,!0);let o=n.options.grid.cellInfo;if(e.is(o)&&o.isLeaf){const t=o.suggestionToPerformEntries.find(e=>e.valueItem===r);if(e.is(t)){const e={label:t.labelItem,value:t.valueItem,tooltip:t.tooltipItem,getLabel:function(){return this.label}};n.setAttribute(a,e),n.options.grid[s.ACTION]!==e&&(n.options.grid[s.ACTION]=e),o.action=r}}})},getCellEditableState(t){const n=t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;p(e)&&(n=!1),e.isExpanded()&&e.hasChildren()&&(n=!1)}return n};let o;switch(t.dataIndex){case s.ACTION:o=n(t);break;case s.REROUTING:o=(t=>{let n=!0;if(e.is(t.nodeModel)){const e=t.nodeModel;n=!p(e)&&g(t)}return n})(t);break;case s.REPLACE:o=n(t);break;default:o=!1}return o},getRWUGroupingKeyForURLColumn(e){var t;switch(e.dataIndex){case s.REPLACE:t=e.nodeModel.getAttributeValue(e.dataIndex);default:t=null}return t}}}}),define("DS/DELPPWViewBehaviors/Tagger/FilterComponentServices",["UWA/Core","UWA/Class"],function(e,t){"use strict";return t.extend({init:function(e){},parse:function(e){var t,n,o,i,r={};for(t in e)if(e.hasOwnProperty(t))for(o in n=e[t])n.hasOwnProperty(o)&&(i=n[o],r[o]||(r[o]={}),"date"===i.type&&(i.value=i.value.split("-").join("/").substr(0,10)),r[o][i.value]||(r[o][i.value]={type:i.type,dispValue:i.dispValue||i.value,subjects:[]}),r[o][i.value].subjects.push(t));return{ds6wTagGrouped:r,ds6wTagSummary:[]}},getFilteredSubjects:function(e,t){var n,o,i,r=[],a=[];for(o in e)if(e.hasOwnProperty(o))for(n=e[o],i=0;i<n.length;i++)t&&t[o]&&t[o][n[i].object]&&(Array.isArray(r)&&0===r.length?t[o][n[i].object].subjects.forEach(function(e){r.push(e)}):(a=[],t[o][n[i].object].subjects.forEach(function(e){a.push(e)}),0!==(a=r.filter(function(e){return-1!==a.indexOf(e)})).length&&(r=a)));return r},findColoredPaths:function(t,n){var o,i=[],r={};if("date"===n.type)for(var a in r=t[n.predicate])r.hasOwnProperty(a)&&-1!==a.indexOf(n.object)&&e.merge(i,r[a]);else o=t[n.predicate],UWA.is(o)&&(o[n.object]?i=o[n.object].subjects:Object.values(o).length>0&&Object.values(o).forEach(e=>{i=i.concat(e.subjects)}));return i},getTagsSummary:function(e){var t,n,o=[];for(t in e)if(e.hasOwnProperty(t))for(n in e[t])e[t].hasOwnProperty(n)&&o.push({sixw:t,object:n,value:n,count:e[t][n].subjects.length,type:e[t][n].type,dispValue:e[t][n].dispValue});return o}})}),define("DS/DELPPWViewBehaviors/View",[],function(){"use strict";return{plugins:["View"],creator:function(e,t,n){return{onStart:function(e){},onStop:function(){},extend:function(e){return n.extend(e)}}}}}),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/ProductAbsPathHelperBehavior",["UWA/Core","DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightLinkHelper"],function(e,t){"use strict";return{plugins:["DatabasePlugin","ProductImplementPlugin"],creator:function(n,o,i,r){var a,s,l,c;return l=function(t,n){var o,i=n||{},r=null;return o=s.getParentScoped(t,i),e.is(o)&&(e.is(r)||(r=s.getScopedNodePrdAbsolutePath(o,i))),r},c=function(e,t,n){var o,i=null;return o=l(e,n),Array.isArray(o)&&(i=o.length>0?o.concat(t):t),i},{onStart:function(o){a=e.is(o.implementing)?o.implementing:null,s=new t(n.getLogger(),a,r,i)},getImplementedProductAbsPath:function(e,t,n){return c(e,t,n)}}}}}),define("DS/DELPPWViewBehaviors/GraphViewBehavior/GraphViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],function(e,t,n){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","SelectionPlugin","DatabasePlugin","DicoPlugin","PlatformPlugin","WebServicePlugin","TreeViewPlugin","ImplementPlugin"],creator:function(o,i,r,a,s,l,c,u,d,g,f,p){var h,m,I,v,y,b,C,P,D,S,A,R={},w=a.getComponent("ETree"),V=a.getComponent("ETreeViewsFactory"),L=w.OrientationMode.ROOT_ON_TOP,E={paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0},M={height:"auto",useAsyncPreExpand:!1,isDraggable:!0,resize:{columns:!0},selection:{unselectAllOnEmptyArea:!0,toggle:!1,cells:!1,enableListSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0};return m=function(l){var g,f,m,v,y,b,C,P,D,S,T=i.getElement();e.is(T.getElementsByClassName,"function")&&(g=T.getElementsByClassName("graphView-container")[0])?(v=(b=l||{}).graphViewOptions?e.extend(M,b.graphViewOptions,!0):M,e.is(I,"array")&&(f=new t(i,a,r,s,d,c,u,p),D=function(t){var n,o,r,a={context:this,nodes:[]};return e.is(t)&&(t.isSelected()||t.select()),o={selectedNodes:h.getModel().getXSO().get()},n=f.buildContextualMenu(I,i.getAppContext(),o),0===o.selectedNodes.length&&(r=I.indexOf("ExploreInWebApp"))>=0&&(n[r].sensitivity="disabled"),a.nodes=n,a}),m={template:['<div class="etree-sync-node" draggable="true">','\t\t<div class="etree-sync-node-widget">','\t\t\t<div class="etree-sync-node-label">','\t\t\t\t<div class="etree-sync-node-color"></div>','\t\t\t\t<div class="etree-sync-node-label-content"></div>',"\t\t\t</div>",'    \t\t<div class="etree-sync-node-caption">','      \t\t<div class="etree-sync-node-icon"></div>','      \t\t<div class="etree-sync-node-moreinfo" data-egraph-subelt="moreinfo"></div>',"    \t\t</div>","  \t</div>",'\t\t<div class="etree-sync-node-collapse-expand" data-egraph-subelt="collapse-expand">','\t\t\t<div class="etree-sync-node-collapse-expand-spinner"></div>',"  \t</div>","</div>",'<div class="etree-sync-temp-node">',"</div>",'<div class="etree-sync-group">',"</div>"].join("\n"),onmodifyDisplay:function(t){var n,o,i,r,a,l,c,d=[{dicoType:"PLMEntity",dataIndex:"V_Name.reference"}],g=e.is(R)?R:{},f=t.nodeView,p=t.nodeModel;p.options.isBeingCut?f.classList.add("is-being-cut"):f.classList.remove("is-being-cut"),c=f.querySelector(".etree-sync-node-color"),e.is(A)&&A&&e.is(p.options.taggerColor)?(f.classList.add("colorized"),c.style.backgroundColor=p.options.taggerColor):f.classList.remove("colorized"),(c=f.querySelector(".etree-sync-node-icon")).classList.remove("hidden"),p.options.icons&&p.options.icons.length>0?(c.style.backgroundImage='url("'+p.options.icons[0]+'")',c.style["background-size"]="22px 22px"):c.classList.add("hidden"),(c=f.querySelector(".etree-sync-node-moreinfo")).classList.remove("hidden"),c.classList.add("hidden"),e.is(g.Color)&&(c=f.querySelector(".etree-sync-node-widget"),o=g.Color.dataIndex,l=g.Color.colorDef,i=p.options.grid[o],e.is(i)&&e.is(l[i])&&!p.isSelected()?c.style.background=l[i].code:c.style.background=""),c=f.querySelector(".etree-sync-node-label-content"),e.is(g.Content)&&e.is(g.Content[p._type])&&(d=g.Content[p._type]),n=[],c.innerHTML="",d.forEach(function(e){i=p.options.grid[e.dataIndex],a=u.getAttributeInfo(e.dicoType+"."+e.dataIndex.split(".")[0]),r=s.getNLS(a),n.push(r+" : "+i)}),c.innerHTML=n.join("<br/>"),c.title=n.join("\n")}},b=e.extend(v,{orientation:L,contextCallback:D,fittingArea:E,nodeView:V.generateNodeView(m)}),S=function(t,n){var o=i.getBehavior("DropZoneViewBehavior"),r=i.getBehavior("WUXNodeModelBehavior");e.is(o)&&(o.setIcon(t),e.is(r)&&(!0!==n||r.isDocumentEmpty()||o.hide()))},(h=new w.SyncEGraphTree(g,b)).treeContainer.ondragenter=function(){var t=i.getBehavior("DropZoneViewBehavior");e.is(t)&&S(t.iconEnum.PLUS,!1)},h.treeContainer.ondragleave=function(){var t=i.getBehavior("DropZoneViewBehavior");e.is(t)&&S(t.iconEnum.DROPHERE,!0)},h.treeContainer.ondrop=function(){var t=i.getBehavior("DropZoneViewBehavior");e.is(t)&&S(t.iconEnum.DROPHERE,!0)},"function"==typeof T.getElementsByClassName&&T.getElementsByClassName("drop-zone-container")[0]&&(h.widget.sm.rootState.actions.insert=function(){},h.widget.sm.rootState.movePredicate=function(){return!1},P=h.container.getElementsByClassName("egraph_views_RootLayer"),e.is(P)&&P.length>=1&&(C=P[0],e.is(C)&&(y={dropZone:C,acceptedTypes:l.pprTypes},new n(o,i,r,c,u).init(y)))),h.createOverview(),h.swapOverviewVisibility()):i.debug("graph Container not defined.")},v=function(){var t;return t=f.getCurrentView(),!(!e.is(t[i.getId()].currentView)||"graphView"!==t[i.getId()].currentView)},y=function(t){g.getXMLValues(t,function(t){var n,o;if(e.is(t.Config.Preferences.BOMView)&&(e.is(t.Config.Preferences.BOMView.Color)&&(R.Color=t.Config.Preferences.BOMView.Color.AttributeDefinition,R.Color.colorDef=t.convert("Config.Preferences.BOMView.Color.ColorDefinition","value")),e.is(t.Config.Preferences.BOMView.Content)))for(n in R.Content={},o=t.convert("Config.Preferences.BOMView.Content.Type","name"))Object.prototype.hasOwnProperty.call(o,n)&&(R.Content[n]=Array.isArray(o[n].Row)?o[n].Row:[o[n].Row]);C()},function(){i.debug("Failed to get"+t+"XML configuration file")})},C=function(){var t=[],n={boAttrName:[],roAttrName:[],otherAttrName:[]};P(t),e.is(t,"array")&&t.forEach(function(e){var t=e.split("."),o=e,i="reference";2===t.length&&(o=t[0],i=t[1]),"reference"===i?n.boAttrName.push(o):"instance"===i?n.roAttrName.push(o):n.otherAttrName.push(o)}),c.setSelectPredicate(i.getId(),n)},P=function(t,n){var o=[];e.is(R)&&(e.is(R.Color)&&t.indexOf(R.Color.dataIndex)<0&&t.push(R.Color.dataIndex),e.is(n)?e.is(R.Content)&&e.is(R.Content[n])&&o.push(n):e.is(R.Content)&&Object.keys(R.Content).forEach(function(e){o.push(e)}),o.forEach(function(e){R.Content[e].forEach(function(e){t.indexOf(e.dataIndex)<0&&t.push(e.dataIndex)})}))},D=function(t){var n,o,i=t.type,r={icons:"",label:"",grid:{},useAsyncPreExpand:!0},a=[];for(n in P(a,i),t)Object.prototype.hasOwnProperty.call(t,n)&&(o=t[n],e.is(o)&&"NULL"!==o&&(a&&a.indexOf(n+".reference")>=0?r.grid[n+".reference"]=t[n]:"PID"===n?r.referencePID=t[n]:"type"===n&&(r.referenceType=t[n])));return r},S=function(t,n){var o,i,r=[],a=D(t);for(o in P(r,t.type),n)Object.prototype.hasOwnProperty.call(n,o)&&(i=n[o],e.is(i)&&"NULL"!==i&&(r&&r.indexOf(o+".instance")>=0?a.grid[o+".instance"]=n[o]:"PID"===o&&(a.instancePID=n[o])));return a},{viewName:"graphView",listenTo:function(){return{Reframe:this.reframeAll,ReframeOn:this.reframeOn,ToggleOrientation:this.toggleOrientation,ToggleOverview:this.toggleOverview}},onStart:function(t,n){t=t||{},e.is(t.views)&&e.is(t.views.graphView)&&(I=t.views.graphView.contextualCommands),m({pprTypes:t.pprTypes,graphViewOptions:t.graphViewOptions}),e.is(t.views.graphView.configXML)&&y(t.views.graphView.configXML),!0===(b=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&f.registerViewforWidgetLayout({viewID:i.getId(),viewType:this.viewName}),n()},onStop:function(){h.container.remove(),h=void 0,!0===b&&f.unregisterViewforWidgetLayout(i.getId(),this.viewName)},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=D(t.toJSON())),n},getInstanceNodeOptions:function(t,n){var o;return e.is(t)&&e.is(n)&&(o=S(t.toJSON(),n.toJSON())),o},setModel:function(t){i.debug("set model on Graph View"),e.is(h)&&h.setModel(t)},getModel:function(){var t=void 0;return e.is(h)&&(t=h.getModel()),t},toggleOrientation:function(){v()&&h.swapLayoutOrientation()},toggleOverview:function(){v()&&h.swapOverviewVisibility()},reframeOn:function(){v()&&h.reframeOn()},reframeAll:function(){v()&&h.reframeAll()},setSize:function(){v()&&h.setSize()},selectArea:function(){v()&&h.selectArea()},setRootPosition:function(t){if(v())if(e.is(t,"string"))switch(t){case"left":h.setRootPosition(w.OrientationMode.ROOT_ON_LEFT);break;case"top":h.setRootPosition(w.OrientationMode.ROOT_ON_TOP);break;case"right":h.setRootPosition(w.OrientationMode.ROOT_ON_RIGHT);break;case"bottom":h.setRootPosition(w.OrientationMode.ROOT_ON_BOTTOM)}else i.debug("position should be a string")},getContent:function(){var t=void 0;return e.is(h)&&(t=h.getContent()),t},setTaggerStatus:function(e){var t;t=i.getElement().getElementsByClassName("graphView-container")[0],A=e||!1,e?t.removeClassName("unColorizeTagger"):t.addClassName("unColorizeTagger")}}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/AltSubReplaceBehavior",["UWA/Core","DS/DELPPWViewBehaviors/AltSubBehavior/AltSubReplaceReportUI"],function(e,t){"use strict";const n=e=>Array.isArray(e)&&e.length>0,o=e=>t=>t[e],i=function(e,t=null){return e.length>0?e[0]:t},r=function(e,t=null){const n=e.length;return n>0?e[n-1]:t},a=(...e)=>t=>e.reduce((e,t)=>t(e),t);return{plugins:["DatabasePlugin","WebServicePlugin","BIPlugin","ImplementPlugin"],creator:function(s,l,c,u,d,g){let f=[];const p=function(t){let n={stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]};const i=function(e,t){let n=new Map;n.set(!0,[]),n.set(!1,[]);for(const o of e){const e=t(o),i=o;n.set(e,n.get(e).concat(i))}return n}(t.instancesAndReferences,a(o("attributesValue"),t=>e.owns(t,"isInstanceOf")));let r=i.get(!0),s=i.get(!1);n.stackedInstances=r.map(((e,t)=>n=>({...n,[e]:t}))("queriedForConnections",!0)),s.length>0&&(n.stackedReferences=s);const l=c.getConnectionParser();t.connections.forEach(e=>{l.parse(e,n)}),n.deletedObjects=t.deletedObjects;const u=t.resultReport;return{stackedObjects:n,resultReport:u}},h=function(s,f,h,m,I){const v=e=>e.get("isInstanceOf"),y=(e,t)=>{const n=t(e),o=(e=>{let t=[];const n=g.getImplLinksOfImplementing(e);if(Array.isArray(n)&&1===n.length){const e=i(n).get("to");t=g.getImplLinksOfImplemented(e).map(e=>e.get("from"))}return t})(e),r=function(e,t){let n=new Set;for(const o of t)e.has(o)&&n.add(o);return n}(new Set(n),new Set(o));return Array.from(r)},b=(t,n,o,i)=>{const l=a(r,c.getInstance,v),u=e=>{const t=l(e);return s.getWhereUsedInstanceIds(t)},d=e=>s.getWhereUsedInstanceIdsUnderParent(e);let g=[];if((t=>e.is(t))(i))if((e=>"reference"===e)(i.type))g=d(t);else{let e=[];n?e=y(t,d):o&&(e=y(t,u)),g=e.length>0?e:[r(t)]}else g=o?u(t):d(t);return g},C=(e,t)=>{const n=function(e,t,n){let o;const i=((e,t)=>n(e).find(e=>t.has(e)))(e,new Set(t));return o=Array.isArray(e)?e.concat(i):[i]}(e,t,e=>s.getChildren(e));s.unSelectAll(),s.selectNode(n)},P=t=>{const o=function(e){const t=e.length;return t>0?e.slice(0,t-1):e}(t);let r;return r=n(o)?o:(t=>{let n=null;const o=i(t);return e.is(o)&&(n=(e=>e.get("isAggregatedBy"))(c.getInstance(o))),n})(t)},{isReplaceAll:D,restrictToUnderSameParent:S,replaceAllInstances:A}=m,R=(()=>{let t=null;const o=i(s.getSelectedNodesInfo(),null);if(e.is(o)){const e=o.absPath;n(e)&&r(e)===f&&(t=o.absPath)}return t})();if(e.is(R)){let n={};l.notify("startProgress",n),s.showOverlay();const i=P(R),r=R;(function(t){const n=e.Json.encode(t);return new Promise((e,t)=>{u.webServiceRequest({url:"dsmfg/private/V0/invoke/MfgItem/replaceByAlternate",method:"POST",data:n,onComplete:function(t){e(t)},onFailure:function(e){t(e)}})})})({instanceIdsToReplace:D?b(r,S,A,I):[f],replacementReferenceId:h}).then(function(r){s.unSelectNode(R);const{stackedObjects:u,resultReport:g}=p(r),f=u.deletedObjects.map(c.getInstance);return function(e){return new Promise(t=>{const n={...e,onComplete:t};c.addToCollections(n)})}(Object.entries(u).filter(([e,t])=>"deletedObjects"!==e).reduce((e,[t,n])=>(e[t]=n,e),{})).then(function(){!function(e){const t=Array.isArray(e)?e:[e];var n;(e=>{const t=e.map(o("id"));c.removeInstance(t,{silent:!0})})(t),n=t,l.notify("removeInstance",[n])}(f);const r=Object.values(g).filter(((e,t)=>n=>n[e]===t)("status","Success"));if(r.length>0){l.notify("replace");const t=r.map(a(o("replacementInstanceId"),c.getInstance));!function(e){const t=Array.isArray(e)?e:[e];l.notify("addInstance",[t])}(t);const n=t.map(o("id"));C(i,n),(()=>{const t=l.getPreferenceValue("refreshBIOnAuthoring");return e.is(t,"boolean")&&!0===t})()&&(()=>!0===d.getBICmdState())()&&d.computeBI()}else s.selectNode(R);l.notify("stopProgress",n),s.removeOverlay(),function(n){const o=l.getBehavior("UXFactoryBehavior"),i=l.getBehavior("ResourceBehavior");e.is(o)&&e.is(i)&&new t(l,o,i,c).showReport(n)}(g),l.notify("ReplaceByAlternateDone")})}).catch(function(e){l.log("Error occured on replace: "+e),l.notify("stopProgress",n),s.removeOverlay()})}};return{listenTo:function(){return{doReplaceByMfgAlternate:this.onDoReplaceByMfgAlternate}},onStart:function(e){f=e.pprTypes},onStop:function(){},onDoReplaceByMfgAlternate:function(t,n,o,i){if(f.includes("PROCESS")){const r=l.getBehavior("WUXNodeModelBehavior");e.is(r)&&h(r,t,n,o,i)}}}}}}),define("DS/DELPPWViewBehaviors/GraphViewBehavior/EGraphViewBehaviour",["UWA/Core","DS/DELPPWViewBehaviors/GraphViewBehavior/EGraphLinkFilterUI"],function(e,t){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","AttributePlugin","DatabasePlugin","DicoPlugin","WebServicePlugin","TreeViewPlugin","EGraphPlugin","RootsPlugin","ImplementPlugin"],creator:function(n,o,i,r,a,s,l,c,u,d,g,f){var p,h,m,I,v,y,b,C,P,D,S,A,R,w,V,L,E,M,T,N,B,O,x,F,k,U,W,_,j,H,G,X,z,K,q,Q,J,Y,Z,$,ee,te,ne,oe,ie,re,ae,se,le,ce,ue,de,ge,fe,pe,he,me,Ie,ve,ye,be,Ce={},Pe={},De=0,Se=!1,Ae={},Re=new e.Class.Collection([],{}),we=r.getComponent("EGraphCore"),Ve=r.getComponent("EGraphViews"),Le=r.getComponent("EGraphIact"),Ee=r.getComponent("EGraphUtils"),Me=r.getComponent("Breadcrumb"),Te=r.getComponent("ContextualMenuManager"),Ne=r.getComponent("TooltipModel"),Be=r.getComponent("WUXCommandsManager"),Oe=o.getElement();return ee=function(){var e=o.getBehavior("SelectionBehavior").getSelectionsWithPaths()[0][0];return{id:e.id,path:e.path}},te=function(t){var n=s.getReferenceModel(y.id);return e.is(t)&&(t.get("isAggregatedBy")===y.id||n&&n.get("PID")===t.get("isAggregatedBy"))},ne=function(){return 1===De},D=function(){Ve.SVGEdgeView.call(this)},k=function(){},w=function(t,n,o,r){var a,s,l=0;return k.prototype.onupdate=function(e){var t,n,o,i,r;t=e.cl1.c.aleft,i=e.cl1.c.atop,o=e.cl2.c.aleft,r=e.cl2.c.atop,n=.5*(t+o),e.set("path",[we.PathCmd.M,t,i,we.PathCmd.L,n,i,we.PathCmd.L,n,r,we.PathCmd.L,o,r])},D.prototype.oncreateDisplay=function(t){var n=this;Ve.SVGEdgeView.prototype.oncreateDisplay.apply(this,arguments),this.display.elt.id=Math.random(),this.display.elt.textContent="official",t.mark&&(this.display.elt.setAttribute("data-link-type-nls",i.getNLSValue(t.mark.get("type"))),this.display.elt.setAttribute("data-link-from",t.mark.get("from")),this.display.elt.setAttribute("data-link-to",t.mark.get("to"))),s=Pe.Info,e.is(s,"array")?s.forEach(function(e){L(n,t,e.name,e.dicoType,l),l++}):L(n,t,s.name,s.dicoType,l)},a=new we.Edge,"Instance"===o?(a.set("geometry",new k),a.mark=""):(a.set("geometry",new we.AutoBezierGeometry),a.mark=o),a.views.main=new D("egraph_views_SVGEdgeView"),r.addEdge(t,n,a),a},V=function(e,t,n,o){var i;return(i=new we.Edge).set("geometry",new we.AutoBezierGeometry),i.views.main=new Ve.SVGEdgeView(0===De?"my-first-edge-view":"my-sec-edge-view"),i.mark=n,o.addEdge(e,t,i),i},L=function(t,n,r,a,l){var c,u,d,g,h="http://www.w3.org/2000/svg",m=o.getBehavior("ProductFlowLinkBehavior"),I=0;if((c=document.createElementNS(h,"textPath")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+t.display.elt.id),c.setAttribute("startOffset","10%"),""===n.mark?c.appendChild(document.createTextNode("")):"type"===r?(d=i.getNLSValue(n.mark.get(r)),"ProcessImplementLinkOcc"===n.mark.get(r)?d="("+f.getRoleFromModelOrComputed(n.mark.get("PID"))+")"+d:"DELLmiTimeConstraintCnx"===n.mark.get(r)&&(g=s.getConnection(n.mark.get("PID")),d=m.getLinkInfo(g).NLS),c.appendChild(document.createTextNode(d)),l++):n.mark.get(r)&&(c.appendChild(document.createTextNode(i.getNLSValue(a+"."+r)+": "+n.mark.get(r))),l++),t.display.text=document.createElementNS(h,"text"),e.is(n.mark)&&""!==n.mark)for(u=p.edges.first;u;u=u.next)e.is(u.mark)&&""!==u.mark&&u.mark.get("PID")!==n.mark.get("PID")&&n.cl1.c.node.PID===u.cl1.c.node.PID&&n.cl2.c.node.PID===u.cl2.c.node.PID&&I++;t.display.text.setAttribute("dy",-14*(l-1)+12*(I+1)),t.display.text.grElt=n,t.display.text.setAttribute("data-id",t.display.elt.id),Ee.classListAdd(t.display.text,"edge-text"),t.display.text.appendChild(c),""!==c.innerHTML&&t.structure.root.appendChild(t.display.text)},be=function(){var t=e.createElement("div",{class:"egraph_views_HTMLNodeView_Node input-node my-node"}),n=e.createElement("div",{class:"my-node-header"}),o=e.createElement("div",{class:"my-node-container"}),i=e.createElement("div",{class:"my-node-rightConnector-container"});return t.setStyles({width:"50px",height:"50px"}),t.appendChild(n),t.appendChild(o),t.appendChild(i),t},x=function(t,n,o){var r=e.is(Ce.Lines)?Ce.Lines.Line:[],a="";r.forEach(function(r){var s=e.is(r.Info,"array")?r.Info:[r.Info],c=new e.Element("div",{class:"my-node-line"}),u=function(e){return/^(auto|0)$|^[+-]?[0-9]+.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc|rem)$/.test(e)};s.forEach(function(o){var r,d,g,f,p=new e.Element("span",{class:"my-node-word"});r=e.is(o.dicoType)&&l.isEntityInstance(o.dicoType)?n.get(o.property):t.get(o.property),o.fontSize&&u(o.fontSize)&&(g=o.fontSize),d=o.maxWidth&&u(o.maxWidth)?o.maxWidth:100/s.length+"%",o.displayAttributeName&&(f=e.is(o.dicoType)?o.dicoType+"."+o.property:o.property,r=i.getNLSValue(f)+" : "+r),p.setText(r),p.setStyles({fontWeight:o.fontWeight,color:o.color,maxWidth:d,fontSize:g}),a+=r,a+=" ",p.inject(c)}),a+="\n",c.inject(o)}),o.tooltipInfos=new Ne({shortHelp:a})},F=function(t,n,r,a,l,c,u,d){var g,f;return f=l,(g=new we.Node).views.main=new P,g.name=r,g.idObjet=l,g.referencePID=l,g.typeDobjet=a,g.imgType=u,e.is(d)&&(g.PID=d.get("PID"),g.referencePID=d.get("referencePID"),g.instancePID=d.get("instancePID"),g.childOccurencePath=d.get("childOccurencePath"),g.isAggregatedBy=d.get("isAggregatedBy"),f=g.referencePID+(g.instancePID?"_"+g.instancePID:"")),f=f.replace(new RegExp(",","g"),"_"),g.id="node_"+f,g.data={},g.multiset("left",t,"top",n,"width",250,"height",ne()?90:100),P.prototype.buildNodeElement=function(t){var n,r,a,l,u,d,g=null,f=null,p="",h=null;if(e.is(t))return e.is(t.referencePID)?(g=s.getReference(t.referencePID),p=i.getIconURLFromKey(g.get("type")),t.instancePID&&(f=s.getInstance(t.instancePID)),h=c.cloneNode(!0),r=e.is(t.childOccurencePath)?t.childOccurencePath:t.referencePID,h.className+=" EGraph_obj_"+g.get("PPRTYPE")+" "+r,n=Ce.Image.value,ne()?(!0===n&&e.is(p,"string")&&p.length>0&&(h.childNodes[0].src=p),x(g,f,h.childNodes[1])):(a=o.getBehavior("LinkBehavior"),l=e.is(Ce.Primary.Info)?Ce.Primary.Info.property:null,u=e.is(l)?g.get(l):null,d=e.is(Ce.Secondary.Info,"array")?Ce.Secondary.Info:[Ce.Secondary.Info],new e.Element("div",{class:"wux-control-inline-container"}).inject(h.childNodes[0]),!0===n&&e.is(p,"string")&&p.length>0&&(h.childNodes[0].innerHTML+='<img src="'+p+'">'),e.is(u,"string")&&u.length>0&&(h.childNodes[0].innerHTML+=u),d.forEach(function(t,n){var o,r,a,s;e.is(t)&&e.is(t.property)&&(o=e.is(t.dicoType)?t.dicoType+"."+t.property:t.property,r=i.getNLSValue(o),a=g.get(t.property),"type"===t.property&&(a=i.getNLSValue("Type."+a)),s="<div><b>"+r+"</b>: "+a+"</div>",h.childNodes[1].innerHTML+=s)}),(e.is(t.instancePID)?a.areRelationsLoaded(t.instancePID):a.areRelationsLoaded(t.referencePID))||i.getIconElem("LinksNotFetched").inject(h.childNodes[2]))):h=c.cloneNode(!0),h},g},j=function(e,t){var n=!1;return t.forEach(function(t){(e===t.path.join()||0===t.path.length&&e===t.id)&&(n=!0)}),n},H=function(t,n){var r,a,l=[],c=n,u=t.clientPos[0],d=t.clientPos[1],g=s.getConnection(c).getAttribute("type"),f=o.getBehavior("EditAttributeBehavior");r={icon:"url("+i.getIconURLFromKey("GeneralDelete")+")",label:i.getNLSValue("LinksUI.DeleteLink"),sensitivity:"LinearProductFlowCnx"!==g?"enabled":"disabled",callback:function(){var t=s.getConnection(c);e.is(t)&&s.deleteConnection(c,{onFailure:function(){o.warn(i.getNLSValue("LinksUI.DeleteFailure"))},onComplete:function(){o.info(i.getNLSValue("LinksUI.DeleteSuccess"))},logMessage:i.getNLSValue("LinksUI.LogMessage")})}},["CapableResourcesStructureLink"].indexOf(g)>=0&&(r.sensitivity="disabled"),a={icon:"url("+i.getIconURLFromKey("EditAttribute")+")",label:i.getNLSValue("LinksUI.EditAttribute"),sensitivity:f.hasEditConfiguration(c)?"enabled":"disabled",callback:function(){f.editConfiguredAttributes(c)}},l.push(r),l.push(a),Te.show({nodes:l},[u,d])},b=function(t){var n,r,a=!0;Oe.getElement("#canvas"+De.toString()).addEventListener("mouseover",function(e){},!1),t.addChangeListener(function(t){var l,c,u,d=[];if("edges"===t[0].path[0]&&(l=t[0].child.cl2.c,c=t[0].child.cl1.c,null!==l&&null!==c&&e.is(l.node.referencePID)&&e.is(c.node.referencePID))){if(!e.is(t[0].child.geometry)){if(l.node.PID===c.node.PID)return void o.warn(i.getNLSValue("CreateLink.SameItem"));u={allowMove:!0,instancePID:null,instancePIDsArray:[],referencePID:l.node.referencePID,rootReferencePID:null,targetInstancePID:null,targetInstancePIDsArray:[],targetReferencePID:c.node.referencePID,targetRootReferencePID:null},l.node.instancePID?(u.rootReferencePID=s.getInstance(l.node.childOccurencePath.split(",")[0]),u.rootReferencePID=e.is(u.rootReferencePID)?u.rootReferencePID.get("isAggregatedBy"):null,u.instancePIDsArray=l.node.childOccurencePath.split(","),u.instancePID=l.node.instancePID):u.rootReferencePID=l.node.referencePID,c.node.instancePID?(u.targetRootReferencePID=s.getInstance(c.node.childOccurencePath.split(",")[0]),u.targetRootReferencePID=e.is(u.targetRootReferencePID)?u.targetRootReferencePID.get("isAggregatedBy"):null,u.targetInstancePIDsArray=c.node.childOccurencePath.split(","),u.targetInstancePID=c.node.instancePID):u.targetRootReferencePID=c.node.referencePID,d.push(u),o.notify("CreateLinkOrInstance",[d])}setTimeout(function(){for(n=[],n=Oe.getElements("path"),r=0;r<n.length;r++)"official"!==n[r].innerHTML&&("none"===window.getComputedStyle(n[r]).getPropertyValue("marker-end")&&"arrow-edge-end-marker"!==n[r].parentElement.id&&n[r].parentElement.removeChild(n[r]))},500)}a||(a=t.some(function(e){return"selection"===e.path[0]}))}),t.addListener("update",function(){var n,i,r,l,c,u,d,g,f,p,h=o.getBehavior("SelectionBehavior"),m=[],I=new e.Class.Collection([],{});if(a){for(a=!1,u=(c=h.getSelections())[0].concat(c[1]).concat(c[2]).concat(c[3]),d=h.getSelectionsWithPaths()[0],u.forEach(function(t){e.is(t)&&(g=s.getReferenceModel(t),e.is(g)&&I.add({ref:g}))}),n=t.selection.first;n;n=n.nextSel)n.type===we.Type.NODE&&(i=s.getReference(n.referencePID),n.instancePID,l=j(n.PID,d),r=n.childOccurencePath,l?I.forEach(function(e){e.get("ref").id===n.referencePID&&I.remove(e)}):p=i.get("PID"));I.forEach(function(e){m.push(e.get("ref").id)}),f={selectedNodeIds:m},e.is(p)&&(f.changed={nodeId:p,childOccurencePath:e.is(r)?r.split(","):null,isSelected:!0}),Se||o.notify("EGraphNodeSelect",f),Se=!1}})},C=function(){var e,t,n;return(e=new we.EGraph).setViewOpts({addTopologicalIds:!0}),n=Oe.childNodes[0],e.addView("main",new Ve.HTMLGraphView(n)),(t=new Le.StateMachine(e,null,null,e.views.main)).rootState&&(t.rootState.doubleClickOnNode=ae,t.rootState.oncontextmenu=function(e,t){se(e,t)}),e.setZoomOpts({customMgt:!0}),t.state.onwheel=function(e,t){var o,i;t.inside&&(o=e.graphView).zoominc&&(i=n.getBoundingClientRect(),o.zoominc(.5*t.wheelDelta,t.clientPos[0]-i.x,t.clientPos[1]-i.y))},e.updateLock(),e},P=function(){Ve.HTMLNodeView.call(this)},D=function(){Ve.SVGEdgeView.call(this)},z=function(e){var t=[],n=[],o=[],i=[];return e.forEach(function(e){switch(e.get("Type")){case 0:i.push(e);break;case 1:t.push(e);break;case 2:n.push(e);break;case 3:o.push(e)}}),[i,t,n,o]},S=function(t){for(var n,o,i,r,a,s,l,c,u,d,g=new e.Class.Collection([],{}),f=t.where({index:0}),p=0;f.length>0;){if(o=p,i=(n=f[0]).get("index"),f.shift(),void 0===g.findWhere({ref:n})){for(;void 0!==g.findWhere({y:o,x:i});)o++;g.add({y:o,x:i,ref:n}),p=o}for(c=n.get("links"),d=0;d<c.length;d++){for(u=c[d],o=p,i=(u=t.findWhere({PID:u[0]})).get("index");void 0!==g.findWhere({y:o,x:i});)o++;if(r=g.findWhere({ref:u}),a=g.findWhere({ref:n}),void 0===r){if(r=g.add({y:o,x:i,ref:u}),p=o,s=!1,o=a.get("y")-1,r.get("x")-a.get("x")>1){for(;!1===s;)for(s=!0,o++,l=a.get("x")+1;l<r.get("x");l++)void 0!==g.findWhere({x:l,y:o})&&(s=!1);for(l=a.get("x")+1;l<r.get("x");l++)g.add({y:o,x:l,ref:null});r.set({y:o}),a.set({y:o}),p=o}f.unshift(u)}else a.set({y:o}),p=o+1}}return g},A=function(e,t,n){var o;return(o=new we.Connector).views.main=!0===n?new Ve.SVGConnView("egraph_views_SVGConnView egraph_views_mySVGConnView"):0===De?new Ve.SVGConnView("egraph_views_SVGConnView egraph_views_mySVGConnView_invisible"):new Ve.SVGConnView,o.multiset(["cstr","attach"],e,["cstr","offset"],40),o},R=function(e){0===De?(e.data.out=A(we.BorderCstr.RIGHT,0,!0),e.data.out.id="in_"+e.id,e.appendConnector(e.data.out),e.data.in1=A(we.BorderCstr.LEFT,0,!0),e.data.in1.id="out_"+e.id,e.appendConnector(e.data.in1),e.data.outInstance=A(we.BorderCstr.BOTTOM,0,!1),e.data.outInstance.id="instance_"+e.id,e.appendConnector(e.data.outInstance)):(e.data.in1=A(we.BorderCstr.LEFT,0,!0),e.appendConnector(e.data.in1),e.data.in2=A(we.BorderCstr.LEFT,0,!0),e.appendConnector(e.data.in2),e.data.out=A(we.BorderCstr.RIGHT,0,!0),e.appendConnector(e.data.out))},E=function(t,n){var i,r,a,l,c,u,d,g,f,p,h,m=0,I=0,v=0,y=o.getBehavior("SelectionBehavior"),b=e.Class.Model.extend({idAttribute:"PID"});p=new e.Class.Collection([],{model:b}),f=y.getSelectionsWithPaths(),g=f[0].concat(f[3]),t.forEach(function(e,t){e.forEach(function(e,n){m=e.get("X"),d=500*t+40+150*(m+I),i=125*n+40,r=e.get("V_Name"),u=e.get("PPRTYPE"),c=e.get("PID"),a=be(),l=e.get("TYPE"),p.add({PID:c,referencePID:e.get("referencePID"),Node:F(d,i,r,u,c,a,l,e)}),R(p.last().get("Node")),m>v&&(v=m)}),I+=v});try{p._models.forEach(function(e){var t;n.addNode(e.get("Node")),g.forEach(function(o){h=s.getReferenceModel(o),t=0===o.path.length?h.get("PID"):o.path.join(","),e.get("Node").PID===t&&n.addToSelection(e.get("Node"))})})}finally{n.updateUnlock()}return p},M=function(t,n){var o,i,r,a=0,s=0,l=new e.Class.Collection([],{});t.forEach(function(t){i=t.get("ref"),e.is(i)&&(o=oe(i,t.get("x"),t.get("y")),r=i.get("PID"),l.add({PID:r,Node:o}),R(l.last().get("Node")),a<150*t.get("y")&&(a=150*t.get("y")),s<450*t.get("x")&&(s=450*t.get("x")))});try{l._models.forEach(function(e){n.addNode(e.get("Node"))})}finally{n.updateUnlock()}return l},T=function(t,n,o){var i,r,a,l,c,u=null,d=null,g=function(t){return e.is(t,"array")&&0!==t.length},f=function(t){return I.filter(function(n){var o,i,r=n.get("Node");return e.is(r.childOccurencePath)&&(o=r.childOccurencePath.indexOf(t),i=r.childOccurencePath.slice(o)),e.is(i)&&i===t||r.referencePID===t})},h=null,m=null,v=null,y=null,b=null,C=null,P=null;if(e.is(o)&&(P=o),c=P.get("PID"),e.is(Ae[c])||(Ae[c]={fromNodes:[],totalEdges:0}),e.is(t,"string")&&(u=(u=f(t)).filter(function(e){var t=e.get("Node").PID;return-1===Ae[c].fromNodes.indexOf(t)&&(Ae[c].fromNodes.push(t),!0)})),e.is(n,"string")&&(d=f(n)),g(u)&&g(d))for(a=0;a<u.length;a++)for(h=u[a],e.is(h)&&(i=h.get("Node"),e.is(i)&&(v=s.getReference(i.referencePID),e.is(v)&&(b=v._attributes.PPRTYPE))),l=0;l<d.length;l++)m=d[l],e.is(m)&&(r=m.get("Node"),e.is(r)&&(y=s.getReference(r.referencePID),e.is(y)&&(C=y._attributes.PPRTYPE))),e.is(r)&&e.is(i)&&(b===C?(w(i.data.out,r.data.out,P,p),V(i.data.out,r.data.out,P,p)):i.actualLeft<r.actualLeft?(w(i.data.out,r.data.in1,P,p),V(i.data.out,r.data.in1,P,p)):(w(r.data.out,i.data.in1,P,p),V(i.data.in1,r.data.out,P,p)),Ae[c].totalEdges+=2)},N=function(t,n,r){var a,l,c;t.forEach(function(t){null!==t.get("isAggregatedBy")&&n.where({PID:t.get("PID")}).forEach(function(s){e.is(s)?(a=s.get("Node"),n.where({referencePID:a.isAggregatedBy}).forEach(function(t){l=t.get("Node"),e.is(a.childOccurencePath)&&(c=a.childOccurencePath.split(","),e.is(l.instancePID)?c.length>1&&c[c.length-2]===l.instancePID&&l.childOccurencePath.split(",")[0]===c[0]&&w(a.data.in1,l.data.outInstance,"Instance",r):l.referencePID===a.isAggregatedBy&&1===c.length&&w(a.data.in1,l.data.outInstance,"Instance",r))})):o.warn(i.getNLSValue("GraphView.NodeWithPID")+t.get("PID")+i.getNLSValue("GraphView.NotExist"))}),t.get("LINKS").forEach(function(e){var t=e.get("from"),n=e.get("to"),o=e.get("type"),i=e.get("PID"),r=!0;"DELLmiTimeConstraintCnx"!==o&&"DELLmiMaterialPathCnxCust"!==o&&"LinearProductFlowCnx"!==o||(r=function(e,t,n){var o,i,r,a,l,c,u;if(c=(l=s.getConnection(n)).get("from"),u=l.get("to"),Array.isArray(c)&&(c=c.join()),Array.isArray(u)&&(u=u.join()),o=e.replace(c,""),i=t.replace(u,""),o.length>0&&i.length>0){if(o=o.split(","),i=i.split(","),r=o.length-1,o.length!==i.length)return!1;for(a=0;a<r;a++)if(o[a]!==i[a])return!1}return!0}(t,n,i)),r&&T(t,n,e)})})},B=function(e,t,n){var o,i,r,a;e.forEach(function(s){o=s.get("PID"),s.get("links").forEach(function(l){r=(r=t.findWhere({PID:o})).get("Node"),a=(a=t.findWhere({PID:l[0]})).get("Node"),i=e.findWhere({PID:l[0]}),s.get("loopNode")&&s.get("index")>i.get("index")?V(r.data.in1,a.data.in1,l[1],n):i.get("loopNode")?V(r.data.out,a.data.out,l[1],n):V(r.data.out,a.data.in1,l[1],n)})})},U=function(){var e;J(),ne()?ye().then(function(){e=X(),Y(e)}):Q()},W=function(){new t(o).loadLinkGraphUI()},O=function(){var t,n=o.getElement(),r=i.getIconURLFromKey("Refresh"),a=i.getIconURLFromKey("Graph.LinksFilter"),s=e.createElement("div",{class:"canvas-gv",id:"canvas"+De.toString()}),l=e.createElement("img",{src:r,class:"GraphViewBar refresh-btn"}),c=e.createElement("img",{src:a,class:"GraphViewBar filter-btn"}),u=e.createElement("div",{class:"egraph-toobar"}),d=e.createElement("div",{class:"egraph-navigator"}),g=Oe.getElement("#canvas"+De.toString()),f=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","svg")),p=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","defs")),h=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","marker")),m=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg","path"));return e.is(Oe)||(Oe=n),null!==g&&g.remove(0),f.appendChild(p),p.appendChild(h),h.appendChild(m),f.setAttribute("width","0"),f.setAttribute("height","0"),f.setAttribute("style","position:absolute;"),h.setAttribute("id","arrow-edge-end-marker"),h.setAttribute("markerWidth","10"),h.setAttribute("markerHeight","8"),h.setAttribute("refX","8"),h.setAttribute("refY","4"),h.setAttribute("orient","auto"),m.setAttribute("d","M 0 0 L 10 4 L 0 8"),m.setAttribute("fill","#777"),m.setAttribute("stroke","none"),m.setAttribute("z-index","10"),l.tooltipInfos=new Ne({shortHelp:i.getNLSValue("GraphView.Refresh")}),l.addEvent("click",function(){U()}),c.addEvent("click",W),s.addEvent("contextmenu",function(t){e.Event.stop(t)}),s.setStyles({width:"100%",height:"100%","background-color":"white",position:"relatve"}),s.appendChild(f),ne()&&((t=le(y.id,y.path))&&(t.inject(d),d.inject(u)),u.inject(s)),e.is(v.showReloadAction)&&!0===v.showReloadAction&&(ne()?l.inject(u):l.inject(s)),e.is(v.showGraphViewFilter)&&!0===v.showGraphViewFilter&&c.inject(s),e.is(Oe)&&s.inject(Oe),Oe},_=function(e){var t,n,o;for(o=new Ee.BoundingRect,t=e.nodes.first;t;t=we.dftNext(e,t))o.update(t,t.actualLeft-300,t.actualLeft+t.actualWidth,t.actualTop,t.actualTop+t.actualHeight);o.xmax=o.xmax>800?800:o.xmax,o.ymax=o.ymax>2e3?2e3:o.ymax,n=Ee.reframeViewpoint(e.views.main.getSize(),o,{padding:15,minSize:50,horizontal:-1,vertical:-1,aliasing:0,defaultVpt:e.views.main.vpt,maxScale:1}),e.views.main.setViewpoint(n,!0)},q=function(){return O(),Ee.inherit(P,Ve.HTMLNodeView),0===De&&Ee.inherit(D,Ve.SVGEdgeView),p=C()},G=function(){var t,n=[];return e.is(h)&&h.length>0?h:((t=g.getRoots(o.getId())).length>0&&(n=t[0].concat(t[1]).concat(t[2])),h=d.getEGraphDataToDisplay(n))},X=function(){var t;return e.is(y)&&e.is(y.id)&&(t=s.getReferenceModel(y.id),e.is(t)&&(h=d.getProductFlowDataToDisplay(t.id,y.path))),h},K=function(e){return S(e)},Q=function(){var t,n;t=G(),Ae={},e.is(t)&&t.length>0&&(m=z(t),n=q(),I=E(m,n),N(t,I,n),_(n),b(n))},J=function(){e.is(Oe)&&e.is(Oe.childNodes[0])&&(Oe.childNodes[0].destroy(),p=void 0,h=void 0)},Y=function(t){var n,r;p=q(),e.is(t)&&t.length>0&&((n=d.isProductFlowDataLooped(t))>0&&(r=1===n?"ProductFlowView.Loop":"ProductFlowView.MultipleLoop",o.warn(i.getNLSValue(r),void 0,"error")),Re=K(t),I=M(Re,p),B(t,I,p),_(p),b(p))},oe=function(e,t,n){var o,i,r,a,s,l,c,u;return null!==e&&(c=450*t,u=150*n,i=e.get("V_Name"),r=e.get("PPRTYPE"),a=e.get("PID"),s=e.get("TYPE"),l=Oe.childNodes[0].childNodes[0].childNodes[0],(o=F(c,u,i,r,a,l,s)).childOccurencePath=e.get("childOccurencePath"),o.instancePID=e.get("instancePID"),o.PID=a),o},ie=function(e){var t,n,o,i=-1;t=d.getProductFlowGraphInstance(e,y.path),n=h.push(t),Re.forEach(function(e){e.get("y")>i&&(i=e.get("y"))}),i+=1,Re.add({y:i,x:0,ref:n}),o=oe(n,0,i),R(o);try{p.addNode(o)}finally{p.updateUnlock()}},re=function(e){var t,n=y.path.concat([e.get("PID")]).toString();for(t=p.nodes.first;t&&t.childOccurencePath!==n;t=t.next);t&&p.removeNode(t)},ve=function(t,n){ne()&&(y.id=t,y.path=e.is(n,"string")&&n.length>0?n.split(","):n,J(),ye().then(function(){h=X(),Y(h)}))},ae=function(e){ve(e.instancePID,e.childOccurencePath)},se=function(t,n){var r,a,s,l,c=n.grElt,u=[],d=n.clientPos[0],g=n.clientPos[1],f=o.getAppContext(),h=o.getBehavior("LinkBehavior"),m=function(){var t,n,o=!1;return e.is(p.selection.first)&&(t=p.selection.first.PID),e.is(p.selection.last)&&(n=p.selection.last.PID),e.is(t)&&e.is(n)&&(o=t===n),o};e.is(c)&&(c.type===we.Type.NODE?(e.is(c.gr.selection.first)&&c.gr.selection.first.PID!==c.PID?(p.removeFromSelection(c.gr.selection.first),p.addToSelection(c)):null===c.gr.selection.first&&p.addToSelection(c),(e.is(c.instancePID)?h.areRelationsLoaded(c.instancePID):h.areRelationsLoaded(c.referencePID))||(a={icon:"url("+i.getIconURLFromKey("LoadRelations")+")",label:i.getNLSValue("Cmd.LoadRelations.Title"),sensitivity:"enabled",callback:function(){r=Be.getCommand("LoadRelations",f),e.is(r)&&(r.beginExecute(),r.execute({sourceModuleId:o.getId()}),r.endExecute())}},u.push(a)),s={icon:"url("+i.getIconURLFromKey("Relations")+")",label:i.getNLSValue("Cmd.Relations.Title"),sensitivity:m()?"enabled":"disabled",callback:function(){r=Be.getCommandCheckHeader("Relations",f),e.is(r)&&!1===r.getState()&&(r.options.node={referencePID:c.referencePID,instancePID:c.instancePID,absPath:c.childOccurencePath.split(",")},r.toggleState())}},u.push(s),l={icon:"url("+i.getIconURLFromKey("DisplayProperties")+")",label:i.getNLSValue("Cmd.DisplayProperties.Title"),sensitivity:m()?"enabled":"disabled",callback:function(){r=Be.getCommandCheckHeader("DisplayProperties",f),e.is(r)&&!1===r.getState()&&(r.options.node={referencePID:c.referencePID,instancePID:c.instancePID,absPath:c.childOccurencePath},r.toggleState())}},u.push(l),Te.show({nodes:u},[d,g])):c.type===we.Type.EDGE&&e.is(c.mark.get("PID"))&&(H(n,c.mark.get("PID"),c.mark.get("from")),c.gr.selection.first=null,c.gr.selection.last=null))},le=function(t,n){var o,r,a,l,c,u=[],d=function(e,t,n){a&&u.unshift({label:a.get("V_Name"),icon:i.getIconURLFromKey(a.get("type")),id:t,childOccurencePath:n})};if(e.is(n,"string")&&(n=n.split(",")),0===n.length)d(0,(a=s.getReference(t)).get("PID"),[]);else for(c=n.length-1;c>=0;c--)l=n[c],a=s.getReferenceModel(l),d(0,l,n.slice(0,c+1)),0===c&&(r=s.getInstance(l),d(0,(a=s.getAggregatingReferenceModelFromInstance(r)).get("PID"),[]));return u.length>0&&(o=new Me({value:u,mode:Me.MODE.NAVIGATION})).addEventListener("selectionChange",function(){var e=o.selectedValues[0];ve(e.id,e.childOccurencePath)}),o},Z=function(e,t,n){var o,i=[];for(n=n||!1,o=p.nodes.first;o&&(o[e]!==t||(i.push(o),n));o=o.next);return i},$=function(t,n){var o,i,r=[];for(i=p.nodes.first;i;i=i.next)i.isAggregatedBy===t&&(e.is(n)?((o=i.childOccurencePath.split(",")).pop(),(o=o.join())===n&&r.push(i)):r.push(i));return r},he=function(t){var n,o,i,r,a,l,c,u,g,f,v,y,b,C,P,D,S,A,V,L,E,M=0,T=function(e){var t;return 1===e.length&&(t=e[0]).multiset("top",t.top+125),t},N=function e(t){var n=0,o=s.getInstancesFromCollection(t);return 0===o.length?0:(o.forEach(function(t){n++,n+=e(t.get("isInstanceOf"))}),n)},B=function(){var n,o=t.get("V_Name"),i=e.is(y)?y:C,s=be();try{p.updateLock(),n=h.add({PID:i,X:c,Type:S,isAggregatedBy:t.get("isAggregatedBy"),childOccurencePath:y,instancePID:P,referencePID:C}),f=F(a,l,o,D,i,s,S,n),R(f),m[S].splice(r,0,n),I.add({PID:i,referencePID:C,Node:f}),p.addNode(f)}finally{p.updateUnlock()}},O=function(){B(),w(f.data.in1,b.data.outInstance,"Instance",p)};if(D=t.get("PPRTYPE"),!e.is(D)&&t.isInstance()&&(A=s.getReference(t.get("isInstanceOf")),D=A.get("PPRTYPE")),S="PRODUCT"===D&&t.isInstance()?function(){var e,n,o,i=0;for(e=0;e<m.length;e++)for(n=0;n<m[e].length;n++)if(o=m[e][n],t.get("isAggregatedBy")===o.get("referencePID"))return i=o.get("Type");return i}():d.getType(D),u=m[S].length,s.isReference(t))c=0,r=u,S>=1&&(M=function(e){var t,n,o=0;for(t=0;t<m[e].length;t++)(n=m[e][t]).get("X")>o&&(o=n.get("X"));return o}(S-1)),a=500*S+40+150*M,l=125*u+40,C=t.get("PID"),B();else{for(P=t.get("PID"),C=t.get("isInstanceOf"),n=0;n<m[S].length;n++)if(v=m[S][n],i=t.get("isAggregatedBy")===v.get("isAggregatedBy"),t.get("isAggregatedBy")===v.get("referencePID")||i){if(c=v.get("X"),0===(f=Z("PID",v.get("PID"))).length)continue;if(f=f[0],V=$(v.get("referencePID"),v.get("childOccurencePath")).find(function(e){return e.instancePID===t.get("PID")}),e.is(V)){if(L=n,n+=N(v.get("referencePID")),e.is(r))for(o=L;o<=n;o++)E=m[S][o],T(Z("PID",E.get("PID")));continue}if(i)n+=N(v.get("referencePID")),a=f?f.left:0;else{if(e.is(b))for(O(),n+=1,v=m[S][n],g=Z("PID",v.get("PID")),f=T(g),o=n+1;o<m[S].length;o++)E=m[S][o],T(Z("PID",E.get("PID")));c=v.get("X")+1,y=v.get("childOccurencePath"),y=e.is(y)?y+","+t.get("PID"):t.get("PID"),b=f,a=(f?f.left:0)+150}l=125*(r=n+1)+40}else!i&&e.is(r)&&(g=Z("PID",v.get("PID")),f=T(g));O()}},me=function(t,n){var o,i,r=function(t,n){var o,i,r;return(r=(e.is(t,"array")?t.toString():t)===(i=e.is(n,"array")?n.toString():n))||(o=e.is(t,"array")?t:t.split(",")).length>0&&(r=o[o.length-1]===i||o.slice(1).join()===i),r};for(i=p.edges.first;i&&(o=i.next,!(e.is(i.mark,"object")&&r(i.mark.get("from"),t.get("from"))&&r(i.mark.get("to"),t.get("to"))&&(n--,i.remove(),0===n)));i=o);},Ie=function(t,n){var o,i,r,a=s.getAllChildrenFromCollection(t);if(n=e.is(n)?n:"",e.is(a.instancesPID)&&(!a||0!==a.instancesPID.length))for(i=0;i<a.instancesPID.length;i++)r=n.length>0?n+","+a.instancesPID[i]:a.instancesPID[i],1===(o=Z("childOccurencePath",r)).length&&(o=o[0],Ie(o.referencePID,r),de(o))},ue=function(t){var n;t.get("isInstanceOf"),n=t.isReference(),Z(n?"referencePID":"instancePID",t.get("PID"),!0).forEach(function(t){e.is(t)&&(Ie(t.referencePID,t.childOccurencePath),de(t))})},de=function(t){var n;t.remove(),n=e.is(t.childOccurencePath)?t.childOccurencePath:t.referencePID,I.remove(n),ge(n)},ge=function(e){var t,n,o,i,r,a=!1;for(t=0;t<m.length;t++)for(n=0;n<m[t].length;n++)if(m[t][n].get("PID")===e&&(m[t].splice(n,1),a=!0),a){for(o=n;o<m[t].length;o++)r=m[t][o],1===(i=Z("PID",r.get("PID"))).length&&(i=i[0]).multiset("top",i.top-125);return}},fe=function(){var e,t;for(e=p.selection.first;e;e=t)Ie(e.referencePID),t=e.nextSel,Se=!0,e.remove()},pe=function(e){var t,n,o=e.changed;for(n=o.absPath.length>0?o.absPath.join(","):o.nodeId,t=p.nodes.first;t;t=t.next)if(t.PID===n||t.instancePID===n||t.childOccurencePath===n){Se=!0,o.isSelected?p.addToSelection(t):p.removeFromSelection(t);break}},ce=function(t){var n,o,i;if(e.is(p)){for(n=p.nodes.first;n&&(n.childOccurencePath.endsWith(t.get("from").toString())?o=n:n.childOccurencePath.endsWith(t.get("to").toString())&&(i=n),!o||!i);n=n.next);o&&i&&V(o.data.out,i.data.in1,t,p)}},ye=function(){var t,n=o.getBehavior("LinkBehavior"),i=o.getBehavior("ModelBehavior"),r=[];return i.isNavigateOnDemand()?(r.push({id:y.id,path:y.path}),t=s.getReferenceModel(y.id),s.getInstancesFromCollection(t.get("PID")).forEach(function(e){r.push({id:e.get("PID")})}),n.getRelations(r)):e.Promise.resolve()},{viewName:"EgraphView",listenTo:function(){return{}},onStart:function(t,n){var o;t=t||{},e.is(t.displayNodeConfigXML)&&e.is(t.displayLinkConfigXML)&&(o=c.getXMLValues(t.displayNodeConfigXML),e.is(o.Config.Preferences)&&(Ce=o.Config.Preferences),o=c.getXMLValues(t.displayLinkConfigXML),e.is(o.Config.Preferences)&&(Pe=o.Config.Preferences)),e.is(t.graphType)&&(De=t.graphType),v=t,n()},onStop:function(){J()},updateLink:function(t){var n,i,r,a,l=o.getBehavior("LinkBehavior"),c=function(t){return t=e.is(t,"array")?t[t.length-1]:t,s.getInstance(t)};"SecondaryCandidateResourceLink"===t.get("type")&&(t=l.cloneSecondaryCapableRscLinkWithFromAttr(t)),ne()?(a=c(t.get("to")),r=c(t.get("from")),te(a)&&te(r)&&ce(t)):(n=t.get("from").toString(),i=t.get("to").toString(),T(n,i,t))},onChangeReference:function(e){var t,n,o,i;(e=Array.isArray(e)?e:[e]).forEach(function(e){t=e,ne()&&(l.isEntityInstance(e.get("type"))&&(n=e,t=s.getReferenceModelFromInstance(n)),I.where({PID:t.get("PID")}).forEach(function(e){e.get("PID")===t.id&&(o=e.get("Node"),n=s.getInstance(o.instancePID),(i=o.view.elts.node.getElementsByClassName("my-node-container")[0]).innerHTML="",x(t,n,i))}))})},removeEGraphNode:function(e){0===De?ue(e):ne()&&te(e)&&re(e)},removeLink:function t(n){var i,r,a,l=n.get("PID"),c=o.getBehavior("LinkBehavior"),u=function(t){return t=e.is(t,"array")?t[t.length-1]:t,s.getInstance(t)};"DELAsmProcessCanUseCnx"===n.get("type")&&s.getImpacted(l,!1,{relationTypes:["SecondaryCandidateResourceLink"]}).forEach(function(e){(e=e.clone()).set("from",n.get("from")),t(e)}),"SecondaryCandidateResourceLink"===n.get("type")&&(n=c.cloneSecondaryCapableRscLinkWithFromAttr(n)),0===De?(a=n.get("PID"),me(n,Ae[a].totalEdges),Ae[a]=void 0):ne()&&(r=u(n.get("to")),i=u(n.get("from")),te(r)&&te(i)&&me(n,2))},reparentInstances:function(e){var t,n=e.newInstPIDArray,o=e.movedInstPIDArray,i=this;Array.isArray(o)&&o.forEach(function(e){Z("instancePID",e,!0).forEach(function(t){e===t.instancePID&&(Ie(t.referencePID,t.childOccurencePath),de(t))})}),Array.isArray(n)&&n.forEach(function(e){0===Z("instancePID",e,!0).length&&(t=s.getInstance(e),i.addNodeNChildrenRecursive(t))})},addEGraphNode:function(e){0===De?he(e):ne()&&te(e)&&ie(e)},addNodeNChildrenRecursive:function(t){var n,o=this,i=[];this.addEGraphNode(t),n=t.isReference()?t.get("PID"):t.get("isInstanceOf"),i=i.concat(s.getImpacted(n)),function t(n){var r,a;(r=s.getInstancesFromCollection(n)).sort(function(t,n){var o=t.get("V_TreeOrder"),i=n.get("V_TreeOrder");return(e.is(o)?o:0)-(e.is(i)?i:0)}),r.forEach(function(e){o.addEGraphNode(e),a=e.get("isInstanceOf"),i=(i=i.concat(s.getImpacted(e.id))).concat(s.getImpacted(a)),t(a)})}(n),i.forEach(function(e){o.updateLink(e)})},createGenericEGraphView:function(){var e={};o.notify("startProgress",e),Q(),o.notify("stopProgress",e)},removeGenericEGraphView:function(){J()},createProductFlowEGraphView:function(){var e,t={};o.notify("startProgress",t),y=ee(),ye().then(function(){e=X(),Y(e),o.notify("stopProgress",t)})},setLinkDisplayStatus:function(e,t){d.setLinkDisplayStatus(e,t)},getSupportedTypesOfLink:function(){return d.getCreatableTypesOfLink()},setGraphContainer:function(e){Oe=e},reload:function(){U()},hideSelectionNodes:function(){fe()},setTLVSelection:function(e){pe(e)},getCurrentEGraphView:function(){return p},getEGraphNodeByPropValue:function(e,t,n){return Z(e,t,n)}}}}}),define("DS/DELPPWViewBehaviors/Tagger/TaggerBehavior",["UWA/Core","UWA/Class/Promise","DS/DELPPWViewBehaviors/Tagger/FilterComponentServices"],function(e,t,n){"use strict";return{plugins:["DatabasePlugin","WebServicePlugin","TreeViewPlugin","ProxyPlugin"],creator:function(o,i,r,a,s,l){var c,u=new Map,d={},g=[],f=new n({facade:i}),p=function(){g=[],d={},u.clear()},h=function(t){var n,o,i,a,s=t.absolutePath,l=t.status,g=t.dispValue,f={},p=[];if(d[c]||(d[c]={}),!(d[c]&&d[c][l]&&d[c][l].subjects.length>0&&-1!==d[c][l].subjects.indexOf(s))){if(d[c])for(i in d[c])d[c].hasOwnProperty(i)&&-1!==(a=(p=d[c][i].subjects).indexOf(s))&&(1===p.length?delete d[c][i]:d[c][i].subjects.splice(a,1));d[c][l]||(d[c][l]={},d[c][l]={type:"string",dispValue:g,subjects:[]}),d[c][l].subjects.push(s),n=u.get(s),o=r.getReference(n),e.is(o)&&(f=(f=o.getAdditionalInfo("ds6w"))||{},e.is(f)&&(f[c]={dispValue:g,type:"string",value:l},o.setAdditionalInfo({ds6w:f})))}},m=function(n,o){new t(function(t,n){var o,i,a=[],s=g.splice(0);Array.isArray(s)&&s.length>0?(s.forEach(function(t){if("add"===t.event){if(u.set(t.Path,t.PID),o=r.getReference(t.PID),!e.is(o))return void n("Model not found for PID:"+t.PID);i=o.getAdditionalInfo("ds6w"),e.is(i)||a.push(t.PID),Object.keys(t.externalTags).length>0&&t.externalTags.forEach(function(e){h(e)})}else"remove"===t.event&&u.delete(t.Path)}),0===u.size&&(p(),n("View data empty.")),a.length>0?r.fetchMultiplePromise(a,{select_predicate:["physicalid","interface"],withSynthesisAttribute:!0,type:"entity",silent:!0}).then(function(n){n.forEach(function(t){var n=r.addReference(t.attributes,{silent:!0});e.is(t.ds6w)&&n.setAdditionalInfo({ds6w:t.ds6w})}),t()}).catch(function(){n("Failed to fetch index attributes for root PID:"+a)}):t()):n("No nodes to process tags.")}).then(function(){return new t(function(t,n){var o,i={};u.forEach(function(t,o){var a,s;a=r.getReference(t),e.is(a)?(s=a.getAdditionalInfo("ds6w"),e.is(s)&&(i[o]=s)):n("Model not found for PID:"+t)}),o=f.parse(i),d=o.ds6wTagGrouped,t()})}).then(function(){return e.is(o,"function")&&o(),t.resolve()}).catch(function(t){e.is(o,"function")&&o()})};return{onStart:function(e,t){t()},onStop:function(){},clear:function(){p()},getNodeUpdatePromise:function(t){var n;if(e.is(t))return Array.isArray(t)?g=g.concat(t):g.push(t),n={callback:m,globalArray:g,context:this,delay:500,blockSize:1e3},r.getExecuteByBlockPromise(n)},addExternalTags:function(e){h(e)},displayExternalTags:function(){var t;t=f.getTagsSummary(d),e.is(t)},removeExternalTags:function(){var t,n,o,a,s;(s=i.getBehavior("WUXNodeModelBehavior"))&&(e.is(d[c])&&delete d[c],t=f.getTagsSummary(d),e.is(t),n=s.getAllDescendants(),Array.isArray(n)&&0<n.length&&n.forEach(function(t){o=r.getReference(t.getReferencePID()),e.is(o)&&(a=o.getAdditionalInfo("ds6w"),e.is(a)&&e.is(a[c])&&(delete a[c],o.setAdditionalInfo({ds6w:a})))}))},setStatusCustomColors:function(t){!function(t){var n,o=[],i={};if(0!==Object.keys(t).length){for(n in t)t.hasOwnProperty(n)&&o.push({color:t[n].colorCode,type:"string",object:n});i[c]=o,e.is(i)&&(void 0).setColorMap(i)}}(t)},onColorize:function(t){!function(t){var n=i.getBehavior("TreeListViewBehavior"),o=i.getBehavior("WUXNodeModelBehavior"),r=i.getBehavior("GraphViewBehavior");s.getActiveView()===i.getId()&&e.is(n)&&e.is(o)&&(n.manageColumn("taggerColor",{visible:!0}),e.is(r)&&r.setTaggerStatus(!0),t.tagColors.forEach(function(e){var t=f.findColoredPaths(d,e).map(function(e){return e.indexOf(",")>-1?e.split(","):e});o.setTaggerColor(t,e)}),i.notify("TaggerColumnColorized",i.getId()))}(t)},onUnColorize:function(){var t,n;s.getActiveView()===i.getId()&&(t=i.getBehavior("TreeListViewBehavior"),n=i.getBehavior("GraphViewBehavior"),e.is(t)&&t.manageColumn("taggerColor",{visible:!1}),e.is(n)&&n.setTaggerStatus(!1),i.notify("TaggerColumnUnColorized",i.getId()))}}}}}),define("DS/DELPPWViewBehaviors/CfgColumnsBehavior/CfgColumnsBehavior",["UWA/Core","DS/DELPPWViewBehaviors/CfgColumnsBehavior/ConfigIdsContainer"],function(e,t){"use strict";return{plugins:["CfgColumnsPlugin"],creator:function(n,o,i){let r=new Set,a=[];const s=function(){return r.size>0},l=function(e){!function(e){r=new Set(e)}(e),function(e){const t=i.getAdditionalColumnAMDsBasedOnDataIndices(e);a=t}(e)},c=function(){return a},u=function(t){return e.owns(t,"displayType")&&"CFG"===t.displayType},d=function(e){return i.isDataIndexAvailable(e.dataIndex)},g=function(t){return t.filter(t=>u(t)&&(t=>!!e.owns(t,"isHidden")&&!t.isHidden)(t)&&d(t)).map(e=>e.dataIndex)},f=function(t){if(s()){const n=o.getBehavior("WUXNodeModelBehavior");if(e.is(n)){const o=function(t){let n=[];return e.owns(t,"pids")&&(n=n.concat(Object.keys(t.pids))),e.owns(t,"relids")&&(n=n.concat(Object.keys(t.relids))),n}(t);n.updateCfgColumnsForCommandUpdates(o,t)}}},p=function(){const t=i.getColumnsFromPreferences(o.getId()),n=g(t);if(l(n),s()){const t=o.getBehavior("WUXNodeModelBehavior");e.is(t)&&t.resetConfigColumns()}};return{listenTo:function(){return{updateCfgColumns:f,TreeViewPrefModified:p}},onStart:function(){},onStop:function(){},computeVisibleConfigColDataIndices:function(e){return g(e)},setVisibleCfgColDataIndices:function(e){l(e)},getCombinedEntriesFromUpdatedAttributesObj:function(e){const t=Object.entries(e.pids),n=Object.entries(e.relids);return t.concat(n)},trimAttributesBasedOnVisibleDataIndices:function(t){return function(t,n){let o={};for(const i in n)e.owns(n,i)&&t(i)&&(o[i]=n[i]);return o}(e=>(function(e){return r.has(e)})(e),t)},isAnyCfgColumnVisible:function(){return s()},filterCFGColumnsBasedOnAvailability:function(e){let t;return t=s()?e.filter(function(e){let t;return t=!u(e)||d(e)}):e},getNodeIdsObjAsPerExternalSpec:function(e){return e.reduce((e,n)=>{const o=function(e){const n=e.getReferencePID();let o=t.empty().addPID(n);if(!e.isRoot()){const t=e.getInstancePID();o.addRelID(t).addPair([n,t])}return o}(n);return e.combine(o)},t.empty()).getIdsObjAsPerExternalSpec()},updateAttributes:function(e){return i.updateAttributes(e,c)},getRequiredTypeRepresentations:function(){return i.getTypeRepresentations()}}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormEventHelper"],function(e,t){"use strict";return function(n,o,i,r,a,s){var l,c=i.getComponent("Element"),u=i.getComponent("ComboBox"),d=i.getComponent("TreeDocument"),g=i.getComponent("TreeNodeModel"),f=i.getComponent("AutoComplete"),p=i.getComponent("LineEditor"),h=i.getComponent("Editor"),m=i.getComponent("Toggle"),I=i.getComponent("DatePicker"),v=i.getComponent("Accordeon"),y=i.getComponent("UnitsEditor"),b=i.getComponent("TooltipModel"),C=i.getComponent("RichTextEditor"),P=i.getComponent("InclusiveLineEditor"),D=i.getComponent("Chips"),S=!1,A=null,R=null,w={},V=new t,L="inline-container",E=function(t){var n=o.getPreferenceValue("separator"),i=new p({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:r.getNLSValue("FormUI.Placeholder.EnterAText")});return"Yes"===t.multiValue&&(i.placeholder=r.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:n}),i.autoCorrectFlag=!1),i.fieldType=t.fieldType,i.pattern=t.pattern,w[t.name]=i,i},M=function(t,n,o){var i,r,s,l=function(l){var c={};switch(l){case"magnitude":c.type="unitsEditor",c.value=a.getMagnitudeValue(n,o);break;case"multivalueRange":for(c.type="autoComplete",c.value=n,c.multiValue=!0,c.elementsList=[],i=0;i<o.AuthorizedValues.length;i++)s=a.getAuthorizedValueNLS(o,i),c.elementsList.push({label:s,value:a.getAuthorizedValueNLS(o,i)});o.labelMap=c.elementsList;break;case"range":for(c.type="select",c.value=a.isDate(o)?a.getFormattedDate(n):n,c.options=[],i=0;i<o.AuthorizedValues.length;i++)s=a.getAuthorizedValueNLS(o,i),c.options.push({label:s,value:a.getAuthorizedValueNLS(o,i)});break;case"multivalue":c.type="text",c.value=a.getValueAsString(n,a.getType(o),!1);break;case"date":c.type="date",c.value=e.is(n)&&"NULL"!==n&&""!==n?a.getDate(n):null,"datetime"===c.displayType&&(c.timePickerFlag=!0);break;case"multivalueDate":c.type="text",r=(r=a.getValueAsDateArray(n)).map(function(e){return a.getFormattedDate(e)}),c.value=a.getValueAsString(r,a.getType(o));break;case"boolean":c.type="checkbox",c.value="TRUE"===n;break;case"multiLine":c.type="textarea",c.value="NULL"===n?"":n,c.pattern=a.getPattern(o),c.rows="6";break;case"richTextEditor":c.type="richTextEditor",c.value="NULL"===n?"":n;break;case"inclusiveLineEditor":c.type="inclusiveLineEditor",c.value=n,c.unit=o.unit,c.step=a.isDouble(o)?.1:1;break;case"chips":c.type="chips",c.value=n;break;default:c.type="text",a.isDouble(o)||a.isInteger(o)?c.value=a.getValueAsString(n,a.getType(o),!1):c.value="NULL"===n?"":n,c.pattern=a.getPattern(o)}return e.extend(t,c)};return t=a.hasMagnitude(o)?l("magnitude"):a.isMultiValuated(o)?a.hasRangeDefined(o)?l("multivalueRange"):a.isDate(o)?l("multivalueDate"):l("multivalue"):a.hasRangeDefined(o)?l("range"):a.isBoolean(o)?l("boolean"):a.isDate(o)?l("date"):a.isMultiLine(o)?l("multiLine"):a.isString(o)&&"richTextEditor"===t.displayType?l("richTextEditor"):(a.isInteger(o)||a.isDouble(o))&&"inclusiveLineEditor"===t.displayType?l("inclusiveLineEditor"):"chips"===t.displayType?l("chips"):l("text")},T=function(t,n,o){var i=t,r=function(e){var t="",n=new Date(e);return isNaN(n.getTime())||(t=Math.floor(n.getTime()/1e3)),t.toString()};return a.isMultiValuated(n)?(i=a.getValueAsArray(t),a.isDate(n)&&(i=a.hasRangeDefined(n)?i.map(function(e){return t=e,n.labelMap.some(function(e){return t===e.label&&(o=e.value,!0)}),o;var t,o}):i.map(function(e){return r(e)}))):a.isBoolean(n)?i="true"===t?"TRUE":"FALSE":a.hasRangeDefined(n)?i=a.getAuthorizedValue(n,null,t):a.isDate(n)&&(t="NULL"!==t&&e.is(t)?t:"",i=r(t)),i},N=function(t){var n=new h({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:r.getNLSValue("FormUI.Placeholder.EnterAText")});return n.fieldType=t.fieldType,w[t.name]=n,n},B=function(e){var t=new m({type:"switch",checkFlag:e.value,value:e.value,disabled:e.disabled});return t.fieldType=e.fieldType,w[e.name]=t,t},O=function(t){var n=e.is(t)?new I(t):new I;return n.fieldType=t.fieldType,w[t.name]=n,n},x=function(t,n,o){var i,r,s,l=[],c={};if(e.is(n)&&(s=w[n],e.is(s)&&"select"===s.fieldType)){for(r=0;r<t.AuthorizedValues.length;r++)i=a.getAuthorizedValueNLS(t,r),l.push({labelItem:i,valueItem:a.getAuthorizedValueNLS(t,r)});c.elementsList=l,c.value=e.is(o)?o:s.value,s.setProperties(c)}},F=function(t,n){var o,i,r=[];for(i=0;i<t.elementsList.length;i++)r[i]={labelItem:t.elementsList[i].label,valueItem:t.elementsList[i].value};return(o=new u({elementsList:r,actionOnClickFlag:!1,enableSearchFlag:!0,value:t.value,disabled:t.disabled,generateRegexString:function(e){return e}})).fieldType=t.fieldType,w[t.name]=o,e.is(n,"function")&&o.addEventListener("change",n.bind(null,w)),o},k=function(t,n){var o,i,r;return i=new d({}),t.elementsList.forEach(function(e){r=new g({label:e.label,value:e.value}),i.addChild(r)}),o=new f({elementsTree:i,actionOnClickFlag:!1,enableSearchFlag:!1,multiSearchMode:t.multiValue}),e.is(t.value,"array")&&t.value.length>0&&(o.value=t.value),o.fieldType=t.fieldType,w[t.name]=o,e.is(n,"function")&&o.addEventListener("change",n),o},U=function(t){var n,i,a=o.getPreferenceValue("separator");return n="null"!==t.value?t.value:"",i=new y({value:n,requiredFlag:t.mandatory,disabled:t.disabled,placeholder:r.getNLSValue("FormUI.Placeholder.EnterANumber"),pattern:"^[-+e]?[0-9e]+(.[0-9e]+)?$",autoCorrectFlag:!1}),e.is(t.magnitudeText,"string")&&i.setUnit(t.magnitudeText),"Yes"===t.multiValue&&(i.placeholder=r.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:a}),i.pattern="^(([0-9])+(.[0-9]*){0,1}|)*((([0-9])*(.[0-9]*){0,1})[0-9])$",i.autoCorrectFlag=!1),i.fieldType=t.fieldType,w[t.name]=i,i},W=function(e){var t=new C;return""!==e.value&&t.setData(e.value),t.fieldType=e.fieldType,w[e.name]=t,t},_=function(e){var t=new P(e);return t.fieldType=e.fieldType,w[e.name]=t,t},j=function(t){var n=new D({value:t.value,uniqueValue:!0,disabled:t.disabled});return n.addEventListener("change",function(t){e.is(t)&&t.stopPropagation()}),n.fieldType=t.fieldType,w[t.name]=n,n},H=function(t){var n,o,i,r={};for(o in w)Object.prototype.hasOwnProperty.call(w,o)&&(i=s.getAttributeInfo(o),e.is(o)&&!w[o].getContent().getParent().isHidden()&&("select"===w[o].fieldType?n=T(w[o].currentValue,i):"autoComplete"===w[o].fieldType?n=w[o].value?T(w[o].value.join("|"),i):T(w[o].value,i):"checkbox"===w[o].fieldType?(n=(n=w[o].checkFlag).toString(),n=T(n,i)):"date"===w[o].fieldType?n=T(w[o].value,i):"richTextEditor"===w[o].fieldType?n=w[o].getData():"inclusiveLineEditor"===w[o].fieldType?n=w[o].getValue():"chips"===w[o].fieldType?0===(n=w[o].value).length&&(n=""):n=T(w[o].valueToCommit,i),e.is(n)&&(r[o]=n)));return r},G=function(t,n){var o,i;V.setFieldsValue(H()),o=function(t){var n;if(e.is(V))return(n=t.findIndex(function(e){return V.isConditionMatch(e.condition)}))>-1?t[n]:void 0}(t),e.is(o)&&e.is(o.affectedAttributes)&&(i=o.affectedAttributes,Array.isArray(i)||(i=[i]),i.forEach(function(t){var o;e.is(w[t.fullName])&&(t.hide?w[t.fullName].getContent().getParent().hide():t.hide||(w[t.fullName].getContent().getParent().show(),e.is(t.updateAuthorizedListFrom)&&t.updateAuthorizedListFrom&&(o=s.getAttributeInfo(t.updateAuthorizedListFrom),x(o,t.fullName)),e.is(n)&&e.is(t.resetValue)&&function(e,t){var n=w[e];switch("defaultValue"===t&&(t=s.getAttributeInfo(e).DefaultValue),n.fieldType){case"checkbox":n.checkFlag=Boolean(t);break;case"select":n.selectedIndex=t;break;default:n.value=t}}(t.fullName,t.newValue)))}))},X=function(e,t){var n=e.events;Array.isArray(n)||(n=[n]),n.forEach(function(e){t.addEventListener(e.event,G.bind(null,e.conditions))})},z=function(t,n){var o,i,r,a,s,l,c,u,d;for(e.is(t,"array")||(t=[t]),i=0;i<t.length;i++){switch(r=t[i],a=new e.Element("div",{class:"wux-field-container "+L}),new e.Element("h6",{class:"wux-textElement",text:r.label}).inject(a).tooltipInfos=new b({shortHelp:r.label}),s={name:r.name,value:r.value,mandatory:r.mandatory,disabled:r.disabled,fieldType:r.type,multiValue:r.multiValue,pattern:r.pattern},r.type){case"text":o=E(s);break;case"textarea":o=N(s);break;case"checkbox":o=B(s);break;case"date":l={timePickerFlag:r.timePickerFlag||!1},e.extend(s,l),o=O(s);break;case"select":l={elementsList:r.options},e.extend(s,l),o=F(s,r.attributeInfo.onChange);break;case"autoComplete":l={elementsList:r.elementsList},e.extend(s,l),o=k(s);break;case"unitsEditor":l={magnitudeText:r.magnitudeText,multiValue:r.multiValue},e.extend(s,l),o=U(s);break;case"richTextEditor":o=W(s);break;case"inclusiveLineEditor":s.unit=r.unit,s.stepValue=r.step,o=_(s);break;case"chips":o=j(s);break;default:o=E(s)}o.inject(a),a.inject(n),e.is(r.events)&&X(r,o)}for(i=0;i<t.length;i++)c=t[i],u=void 0,d=void 0,u=c.events,d=w[c.name].getContent().getParent().isHidden(),e.is(c.events)&&!d&&(Array.isArray(u)||(u=[u]),u.forEach(function(e){"change"===e.event&&G.call(null,e.conditions)}))},K=function(t,n){var o=r.getNLSValue(t),i=new e.Element("div",{class:"accordeon-section-container"}).inject(A);new v({items:[{header:"Wrong NLS key"!==o?o:t,content:n,expandedFlag:!0}],style:"filled-separate"}).inject(i)},q=function(t){var n,o,i,c,u,d,g,f=[],p=r.getNLSValue(R,null,"Type");for(e.is(t,"array")||(t=[t]),o=0;o<t.length;o++){if(n=t[o],i=e.is(n.attributeName)?n.attributeName:n.dicoType+"."+n.name,c=e.is(n.attributeInfo)?n.attributeInfo:s.getAttributeInfo(i),!e.is(c))return void(S=!0);d=a.getFullName(c),u=e.is(n.defaultValue)?n.defaultValue:e.is(l&&l[d])?l[d]:"PLMEntity.V_Name"===d&&R?p:a.getDefaultValue(c),g={name:a.getFullName(c),mandatory:n.mandatory,label:a.getNLS(c),attributeInfo:c,magnitudeText:a.getNLSForUnit(c),multiValue:c.MultiValuated,disabled:n.readOnly||a.isReadOnly(c),defaultValue:u},e.is(n.value)?u=n.value:e.is(n.objectToBeModified)&&(u=n.objectToBeModified.get(n.dataIndex),e.is(u)||(u=n.objectToBeModified.get(c.FullName))),a.isDate(c)&&(g.displayType="DateTime"===n.displayType?"datetime":"date"),a.isString(c)&&e.is(n.displayType)&&"richText"===n.displayType?g.displayType="richTextEditor":(a.isInteger(c)||a.isDouble(c))&&e.is(n.displayType)&&"inclusiveEditor"===n.displayType?g.displayType="inclusiveLineEditor":e.is(n.displayType)&&"chips"===n.displayType&&(g.displayType="chips",g.valueType=c.Type),g=M(g,u,c),e.is(n.events)&&(g.events=n.events),f.push(g)}return f},Q=function(t,n){var i,r,a=new c("div",{class:"section-container"});for(i in!1===n.headerAccordean?a.inject(A):t.name||(t.name=""),t)if(e.is(i))switch(i.toLowerCase()){case"name":K(t[i],a);break;case"attribute":if(r=q(t[i]),!e.is(r))return void o.debug("attributeInfo is not available");z(r,a)}a.addEvent("resize",function(){var t,n,o,i;i=a.getElements(".wux-field-container"),(o=a.clientWidth)<290?(t="inline-container",n="block-container"):o>290&&"block-container"===L?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(i)&&i.forEach(function(e){e.removeClassName(t),e.addClassName(n)})})},J=function(t){var n,i=t.sections;for(n in i)if(e.is(n))switch(n.toLowerCase()){case"section":e.is(i[n])&&(Array.isArray(i[n])?i[n].forEach(Q):Q(i[n],t));break;case"formstyle":e.is(i[n])&&("Vertical"===i[n]?L="block-container":"Horizontal"===i[n]&&(L="inline-container"))}!0===S&&(S=!1,o.debug(r.getNLSValue("InsertCmd.WarningConfiguration")))};return{createUI:function(t){t=t||{},A=new c("div",{class:"data-collection-form-UI"}),e.is(t.renderTo)?(e.is(t.type)&&(R=t.type.split("/")[1]||""),e.is(t.defaultValues)&&(l=t.defaultValues),J(t),A.inject(t.renderTo)):o.debug("no parent container is present to inject the mainContainer")},getFormStyle:function(){return L},destroy:function(){e.is(A)&&A.destroy(),w={}},getValues:function(){return H()},validate:function(){var t,n,o,i,a={result:!0,message:null,more:null},s=[],l=[];for(t in w)e.is(w[t])&&!w[t].getContent().getParent().isHidden()&&(i=r.getNLSValue(t),!0===w[t].requiredFlag&&""===w[t].value&&(a.result=!1,s.push(i)),e.is(w[t].pattern)&&(n=new RegExp(w[t].pattern),""===(o=e.is(w[t].valueToCommit)?w[t].valueToCommit:"")||n.test(o)||(l.push(i),a.result=!1)));return a.result||(s.length>0&&l.length>0?a.message=r.getNLSValue("ModelBehavior.CreateReference.Failure.Multiple",{missingFields:s.join(","),invalidFields:l.join(",")}):s.length>0?a.message=r.getNLSValue("ModelBehavior.CreateReference.Failure.ValueMissing",{fields:s.join(",")}):l.length>0&&(a.message=r.getNLSValue("ModelBehavior.CreateReference.Failure.InvalidValue",{fields:l.join(",")}))),a},updateToDefaultValues:function(t){var n;for(n in w)e.is(w[n])&&e.is(t[n])&&(w[n].value=t[n])},updateAuthorizedList:function(e,t){x(e,t)}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/ColumnManager",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/CellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManagerMFN","DS/DELPPWViewBehaviors/TreeListViewBehavior/RWU/RWUColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/ManageCapableResources/MCRColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/ManageCapableResources/MSOColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/DataCollectRowColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/HideShow3DColumnManager","DS/DELPPWViewBehaviors/CfgColumnsBehavior/CfgCellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/RPColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/CoProduct/CoProductColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/Compensation/CompensationMaterialColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/OperationTime/OperationTimeColumnManager"],function(e,t,n,o,i,r,a,s,l,c,u,d,g,f,p){"use strict";return function(h,m,I,v,y,b,C,P,D,S,A,R){var w,V,L,E,M,T,N,B,O,x=A.getGroupingAdditonalColumns(),F=m.getBehavior("WUXNodeModelBehavior"),k=new c(m,P),U=new t(m,b,y,C,P,A),W=new r(m,y,P,R),_=new d(m,b,y,P),j=new n(m,P,A),H=new g(m,C,y,b,P),G=new f(m,C,y,b,P),X=new p(m,C,y,b),z=new s(m,b,y,C,P,A);return T=(T=(T=(T=(T=[]).concat(W.getNonModelDataIndexes())).concat(k.getNonModelDataIndexes())).concat(G.getNonModelDataIndexes())).concat(_.getNonModelDataIndexes()),V=function(t){var n,o,i,r,a={treeDataIndex:null,label:null,labelIsOnRef:null,dicoType:null},s=m.getPreferenceValue("separator");if(e.owns(t,"name")&&"Auxiliary"===t.name&&e.owns(t,"Label")&&e.is(t.Label.length)&&t.Label.length>1)for(a.treeDataIndex="",a.label="",a.dicoType="",i=t.Label,o=0;o<i.length;o++)a.treeDataIndex+=t.Label.dataIndex,a.dicoType+=t.Label.dicoType,n=a.treeDataIndex.split("."),a.label+=n[0],r=n[1],a.labelIsOnRef="instance"===r?!!e.is(a.labelIsOnRef)&&a.labelIsOnRef&&!1:!e.is(a.labelIsOnRef)||a.labelIsOnRef&&!0,o+1!==i.length&&(a.label+=s,a.type+=s,a.dicoType+=s,a.treeDataIndex+=s);else e.owns(t,"Label")&&(a.treeDataIndex=t.Label.dataIndex,a.dicoType=t.Label.dicoType,n=a.treeDataIndex.split("."),a.label=n[0],r=n[1],a.labelIsOnRef="instance"!==r);return a},L=function(t){var n=[];return e.is(t.dicoType,"array")&&(n=t.dicoType.map(function(t){return e.is(t,"object")&&e.owns(t,"dicoType")?t.dicoType:t})),n},E=function(t){let n=t;Array.isArray(n)||(n=[n]);const r=m.getBehavior("CfgColumnsBehavior");if(e.is(r)){const e=r.computeVisibleConfigColDataIndices(n);r.setVisibleCfgColDataIndices(e),n=r.filterCFGColumnsBasedOnAvailability(n)}return n.map(function(t){var n,r,s,c,d=!1,g=!1,f=!1,p={sortableFlag:!1,groupableFlag:!0,dataIndex:t.dataIndex,dicoType:t.dicoType,displayType:t.displayType,visibleFlag:!e.is(t.isHidden)||!t.isHidden,width:isNaN(t.width)?"auto":parseInt(t.width),minWidth:isNaN(t.minWidth)?100:parseInt(t.minWidth),text:C.getColumnDisplayValue(t),editionPolicy:"EditionOnClick",tooltipIndex:t.Tooltip,hasCellValue:U.hasCellValue,getCellValue:U.getCellValue.bind(U,t),getCellValueForExport:function(n){var o,i="",r=n.cellModel;return n.rowID<0?i=r:e.is(r)&&(d&&!g?(o=n.nodeModel.getAttributeValue(t.dataIndex),Array.isArray(o)&&(i=o.join())):i=e.is(r,"array")?r.join():r.toString()),i}};c=function(){return{units:r}};const h=C.getAttributeInfoFromColumn(t),I=b.getAttributeInfo(h.attributeName);if(e.is(I)&&(g=C.hasRangeDefined(I),d=C.isMultiValuated(I),(f=C.hasMagnitude(I))&&(r=C.getNLSForUnit(I))),e.is(t.displayType)&&t.displayType.contains("URL")&&(s=A.getURLColumnInfo(t.dataIndex))&&(t.command=s.command,e.owns(s,"defaultValue")?t.defaultValue=s.defaultValue:t.defaultValue=""),!e.is(t.displayType)&&e.is(h)&&C.isDate(I)&&!g&!d&&(t.displayType="Date"),e.is(t.displayType))switch(p.editableFlag=!1,t.displayType){case"FullOwnerURL":p.typeRepresentation="url",p.className=A.areModuleColumnsImmutable(m.getId())?"icon-text-column":"url-column",p.getCellValue=U.getFullOwnerURL,p.command=A.areModuleColumnsImmutable(m.getId())?null:t.command,p.getCellValueForExport=U.getURLCellValueForExport,p.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"CustomString":p.typeRepresentation="string",p.getCellValue=U.getCustomStringCellValue;break;case"URL":p.typeRepresentation="url",p.className=A.areModuleColumnsImmutable(m.getId())?"icon-text-column":"url-column",p.getCellValue=U.getURLCellValue,p.command=A.areModuleColumnsImmutable(m.getId())?null:t.command,p.defaultValue=t.defaultValue,p.getCellValueForExport=U.getURLCellValueForExport,p.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"IconText":p.typeRepresentation="url",p.className="icon-text-column",p.hasCellValue=function(){return!0},p.getCellValue=function(e){var t=e.nodeModel.options.grid;return{label:t[e.dataIndex],getLabel:function(){return this.label},icon:{iconPath:t.cellInfo.IconUrl,iconSize:{width:"22px",height:"22px"}}}};break;case"Relation":p.typeRepresentation="url",p.className=A.areModuleColumnsImmutable(m.getId())?"icon-text-column":"url-column",p.groupableFlag=!1,p.getCellValue=j.getCellValue,p.hasCellValue=j.hasCellValue,p.getCellValueForExport=j.getCellValueForExport;break;case"DocMgmt":p.className=A.areModuleColumnsImmutable(m.getId())?"icon-text-column":"url-column",p.groupableFlag=!1,p.getCellValue=U.getCellValueForDocMgt,p.getCellValueForExport=function(t){return e.is(t.cellModel,"array")&&t.cellModel.join(", "),e.is(t.cellModel)?t.cellModel.toString():""};break;case"BIEssentials":case"BIEssentialsAltSub":p.typeRepresentation="color",p.className="biessentials",p.groupableFlag=!1,p.getCellValue=U.getBICellValue,p.getCellValueForExport=U.getBICellValueForExport;break;case"MIL":p.editionPolicy="EditionInPlace",p.getCellTypeRepresentation=o.getCellTypeRepresentation,p.setCellValue=o.setMILValue.bind(null,t),p.getCellClassName=o.getCellClassName,p.getCellValue=o.getCellValue,p.getCellSemantics=o.getCellSemantics,p.hasCellValue=o.hasMILCellValue,p.getCellEditableState=o.getCellEditableState;break;case"RP_USAGE":p.editionPolicy="EditionInPlace",p.setCellValue=_.setRPValue.bind(null,t),p.typeRepresentation="enumString",p.getCellSemantics=_.getCellSemantics,p.hasCellValue=_.hasCellValue,p.getCellEditableState=_.getCellEditableState,p.editableFlag=!1;break;case"MANAGECAPABLERESOURCESMOD":p.editionPolicy="EditionOnClick",p.getCellTypeRepresentation=a.getCellTypeRepresentation,p.setCellValue=a.setValue.bind(null,t),p.getCellClassName=a.getCellClassName,p.getCellValue=a.getCellValue,p.getCellSemantics=a.getCellSemantics,p.hasCellValue=a.hasCellValue,p.getCellEditableState=a.getCellEditableState;break;case"MANAGESTEPOPERATIONSUI":p.editionPolicy="EditionOnClick",p.getCellTypeRepresentation=z.getCellTypeRepresentation,p.setCellValue=z.setValue.bind(null,t),p.getCellClassName=z.getCellClassName,p.getCellValue=z.getCellValue,p.getCellSemantics=z.getCellSemantics,p.hasCellValue=z.hasCellValue,p.getCellEditableState=z.getCellEditableState;break;case"DataCollectRow":p.getCellTypeRepresentation=l.getCellTypeRepresentation,p.getCellClassName=l.getCellClassName,p.getCellValue=l.getCellValue,p.getCellSemantics=l.getCellSemantics,p.hasCellValue=l.hasCellValue;break;case"CIM":p.editionPolicy="EditionInPlace",p.getCellTypeRepresentation=i.getCellTypeRepresentation,p.setCellValue=i.setMILValue.bind(null,t),p.getCellClassName=i.getCellClassName,p.getCellValue=i.getCellValue,p.getCellSemantics=i.getCellSemantics,p.hasCellValue=i.hasMILCellValue,p.getCellEditableState=i.getCellEditableState;break;case"RWU":p.editionPolicy="RWU_Replace"===t.dataIndex?null:"EditionInPlace",p.getCellTypeRepresentation=W.getCellTypeRepresentation,p.setCellValue=W.setRWUValue.bind(null,t),p.getCellClassName=W.getCellClassName,p.getCellValue=W.getCellValue,p.getCellSemantics=W.getCellSemantics,p.hasCellValue=W.hasRWUCellValue,p.getCellEditableState=W.getCellEditableState,p.getCellGroupingKey=W.getRWUGroupingKeyForURLColumn;break;case"MultiType":p.dicoType=L(t),p.typeRepresentation="float",p.groupableFlag=!1,p.getCellValue=U.getMultiTypeCellValue,p.getCellSemantics=U.getMultiTypeCellSemantics,p.setCellValue=U.setValue,p.getCellEditableState=U.getMultiTypeCellEditableState;break;case"isCoProduct":p.editionPolicy="EditionOnClick",p.editableFlag=!0,p.getCellTypeRepresentation=H.getCellTypeRepresentation,p.getCellValue=H.getCellValue,p.hasCellValue=H.hasCellValue,p.setCellValue=H.setCellValue;break;case"isCompensation":p.editionPolicy="EditionOnClick",p.editableFlag=!0,p.getCellTypeRepresentation=G.getCellTypeRepresentation,p.getCellValue=G.getCellValue,p.hasCellValue=G.hasCellValue,p.setCellValue=G.setCellValue;break;case"CFG":p.groupableFlag=!1,p.getCellTypeRepresentation=u.getCellTypeRepresentation,p.getCellValue=u.getCellValue,p.hasCellValue=u.hasCellValue;break;case"OPTime":p.editableFlag=!1,p.getCellTypeRepresentation=X.getCellTypeRepresentation,p.hasCellValue=X.hasCellValue,p.getCellSemantics=X.getMagnitudeSematics;break;case"Date":case"DateTime":p.editionPolicy="EditionInPlace",p.editableFlag=!C.isReadOnly(I),p.typeRepresentation="DateTime"===t.displayType?"datetime":"date",p.setCellValue=U.setValue,p.getCellValueForExport=function(e){var n="",o=e.cellModel,i="DateTime"===t.displayType;return e.rowID<0?n=o:o&&(n=C.getFormattedDate(o,i)),n};break;case"NonEditable":p.editableFlag=!1,C.isBoolean(I)&&(p.typeRepresentation="boolean")}else p.editableFlag=!C.isReadOnly(I),n=C.getNodeAndColumnInfos(null,t),d&&!g?(p.typeRepresentation="string",p.editionPolicy="EditionInPlace"):g?(p.allowResetToUndefinedByUIFlag=!0,p.hasRangeDefined=!0,p.editionPolicy="EditionInPlace",p.typeRepresentation=t.dataIndex.replaceAll(".",""),p.authorizedValues=C.getAuthorizedValuesNLSList(n.attributeInfo,n.attributeDef),f&&(p.getCellSemantics=c)):f?(p.typeRepresentation="number",p.getCellSemantics=c):C.isBoolean(I)?p.typeRepresentation="boolean":C.isInteger(n.attributeInfo)?p.typeRepresentation="integer":C.isDouble(n.attributeInfo)&&(p.typeRepresentation="float"),p.setCellValue=U.setValue;return A.areModuleColumnsImmutable(m.getId())&&(p.editableFlag=!1),p})},M=function(t,n){var o,i,r,a;return n=n||!1,O=t.Label.dataIndex,a=e.is(t.Label.minWidth)?t.Label.minWidth:null,i=A.getLabelInfo(m.getId()),r=e.is(t)&&e.is(t.name)?P.getNLSValue("Column."+t.name):C.getColumnDisplayValue(t.Label),(o={sortableFlag:!0,groupableFlag:!0,text:r,dataIndex:"tree",width:e.is(a)?"auto":n?"100%":"30%",minWidth:e.is(a)?a:150,dicoType:i.dicoType,label:i.attributeName,labelIsOnRef:i.labelIsOnRef,getCellValue:function(t){var n,o,i=t.nodeModel,r=null;return e.is(i)&&(F.isFakeNodeModel(i)&&i.getProperty()===x.Reference?(o=this.getColumnOrGroup(x.Reference),n=y.getReference(i.getIdentifier()),r=o.text+": "+n.get("V_Name")+" ("+i.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount+")"):r=i.getLabel()),r}}).editableFlag="NonEditable"!==t.Label.displayType,o.setCellValue=U.setValue,A.areModuleColumnsImmutable(m.getId())&&(o.editableFlag=!1),o},N=function(){var e,t,n=[];for(e in x)Object.prototype.hasOwnProperty.call(x,e)&&((t={sortableFlag:!1,editableFlag:!1,groupableFlag:!0,dataIndex:x[e],visibleFlag:!1,width:"auto",minWidth:100,editionPolicy:"EditionOnClick",hasCellValue:function(e){return!F.isFakeNodeModel(e.nodeModel)},getCellValue:U.getGroupingColumnCellValue}).text=C.getColumnDisplayValue(t),n.push(t));return n},B=function(){return{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,dataIndex:"hide_show_3D",displayType:"hideShow3D",editionPolicy:"EditionInPlace",typeRepresentation:"visibility",alignment:"center",text:"",width:30,icon:P.getIconURLFromKey("3DColumnIcon"),hasCellValue:k.hasCellValue,getCellValue:k.getCellValue,setCellValue:k.setCellValue}},{getBlockAttributes:function(t){var n,o,i={boAttrName:[],roAttrName:[],otherAttrName:[]},r=!1,a=e.is(t.Columns)?t.Columns.Column:[],s=V(t),l=function(e,t){switch(t){case"reference":-1===i.boAttrName.indexOf(e)&&i.boAttrName.push(e);break;case"instance":-1===i.roAttrName.indexOf(e)&&i.roAttrName.push(e);break;default:-1===i.otherAttrName.indexOf(e)&&i.otherAttrName.push(e)}};return e.is(s.label)&&(e.is(s.labelIsOnRef,"boolean")?s.labelIsOnRef?l(s.label,"reference"):l(s.label,"instance"):l(s.label,null)),e.is(a,"array")||(a=[a]),a.forEach(function(t){var n=C.getAttributeInfoFromColumn(t),i=n.dataIndex,a=n.objType;if(!e.owns(t,"displayType")||"MultiType"!==t.displayType&&"OPTime"!==t.displayType)"instance"===a||"reference"===a?l(i,a):"relation"===a&&(r=!0,l(i,a));else switch(t.displayType){case"MultiType":t.dicoType=L(t),t.dicoType.forEach(function(e){l(o=e+"."+i,a)});break;case"OPTime":l(o,a)}}),r&&(n=S.getAllRelationDisplayAttributes(),e.is(n,"array")&&n.forEach(function(e){l(e,"reference")})),i},setReusablecontent:function(t){var n=function(n,o){var i,r={forceDBMode:!0,onComplete:function(){e.is(i)&&e.is(i.objectToBeModified)&&(i.objectToBeModified.setAdditionalInfo({isFetched:!0}),C.doesAttributeExist(i.objectToBeModified,i.dataIndex)||C.isAttrApplicableForType(i.objectToBeModified,i.dataIndex)||-1===T.indexOf(i.dataIndex)&&m.warn(P.getNLSValue("TableView.AvailabilityFailure",{key:i.attributeNLSTitle}))),e.is(o)&&e.is(o.cellView)&&t.updateRenderedRow(o.rowID,{updateCellContent:!0})}};n.preventDefault(),n.stopPropagation(),o&&(i=C.getNodeAndColumnInfos(o.nodeModel,o.cellView.collectionView.getColumnOrGroup(o.columnID)),!e.is(i.objectToBeModified)||C.doesAttributeExist(i.objectToBeModified,i.dataIndex)||i.objectToBeModified.getAdditionalInfo("isFetched")||("instance"===i.instOrRef?y.fetchInstance({PID:i.objectToBeModified.id},r):y.fetchRoot(i.objectToBeModified.id,r)))};v||(t.addEventListener("show",function(e,t){m.debug("onEventShow fired"),n(e,t)}),t.addEventListener("activeCellChange",function(t){const o=t.dsModel,i=o.getActiveCellID();if(i>=0&&o.isCellInEdition(i)){let r=o.getCellInfosAt(i);e.is(r)&&r.rowID>=0&&r.columnID>=0&&e.is(r.nodeModel)&&e.is(r.nodeModel.getReferencePID)&&(e.is(r.cellView)||(r.cellView={collectionView:o}),n(t,r))}m.debug("activeCellChange fired")}))},getColumnDataIndexByDisplayType:function(t,n){var o,i,r,a=[];if(!e.is(n))return this.getColumnsDataIndex(t);for(i=t.columns.length,o=1;o<i;o++)r=t.columns[o],e.is(r)&&e.owns(r,"dataIndex")&&e.owns(r,"displayType")&&r.displayType===n&&a.push(r.dataIndex);return a},getColumnsDataIndex:function(t,n){var o,i,r,a,s=[],l=!!e.is(n,"boolean")&&n;if(l||!e.is(w)){for(r=t.columns.length,e.is(t._treeDataIndex)&&s.push(t._treeDataIndex),o=1;o<r;o++)a=t.columns[o],i=!e.is(a.isExportable)||a.isExportable,e.is(a)&&e.owns(a,"dataIndex")&&i&&(l&&a.isHidden||(e.owns(a,"displayType")&&"MultiType"===a.displayType?a.dicoType.forEach(function(e){s.push(e+"."+a.dataIndex)}):s.push(a.dataIndex)));l||(w=s)}else s=w;return s},createTreeListViewColumns:function(t,n,o,i){var r,a,s=[];return t.Columns&&t.Columns.Column&&(s=E(t.Columns.Column)),t.Label&&((r=M(t,0===s.length)).isExportable=!1,s.splice(0,0,r)),Array.isArray(I)&&(a=s.filter(function(e){return I.includes(e.dataIndex)})).length>0&&(s=s.filter(function(e){return!I.includes(e.dataIndex)}),a.length>0&&s.unshift.apply(s,a)),(!e.is(t.addDefaultGroupingColumns)||e.is(t.addDefaultGroupingColumns,"boolean")&&!0===t.addDefaultGroupingColumns)&&(s=s.concat(N())),e.is(i)&&!0===i&&s.splice(0,0,B()),{columns:s,labelIsOnRef:e.is(t.Label)?r.labelIsOnRef:null,label:e.is(t.Label)?r.label:null}},manageColumn:function(e,t,n){n&&(!0===n.visible?e.showColumn(t):e.hideColumn(t))},getLabelColumnDataIndex:function(){return O}}}}),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightTreeHelper",["UWA/Core","DS/DELPPWViewBehaviors/BulkTreeSearchHelper"],function(e,t){"use strict";return function(n,o,i){var r=o.getWUXNodeModel(),a=new t(r,i);return{getNodeModels:function(e,t){return a.getNodeModels(e,t)},searchPathsPartially:function(e){return a.searchPathsPartially(e)},highlightNodes:function(e){var t;Array.isArray(e)&&e.length>0&&(t=a.getLastVisibleNodeModels(e)).length>0&&(r.prepareUpdate(),t.forEach(function(e){e.highlight()}),r.pushUpdate())},unHighlightAll:function(){var e=r.getHighlightedNodes();Array.isArray(e)&&e.length>0&&(r.prepareUpdate(),e.forEach(function(e){e.unhighlight()}),r.pushUpdate())},unSelectAll:function(){r.unselectAll()},getSelectedNodeIds:function(){return o.getSelectedNodesInfo().map(function(e){return e.absPath.length>0?e.absPath:e.id})},fetchAllNearestDescendantsHavingImplLink:function(t){var o,i,r,s,l,c,u={nearestDescendants:[],descendantLinkMap:Object.create(null)},d=function(e){var t=e.getChildren(!0);Array.isArray(t)&&t.forEach(function(e){l.push(e)})};if((o=a.getNodeModels([t],!0)).found.length>0&&(i=o.found[0]),e.is(i))for(l=[],d(i);l.length>0;)s=(r=l.pop()).getAbsolutePath(),c=n.getImplementLinks(s),Array.isArray(c)&&c.length>0?(u.nearestDescendants.push(s),u.descendantLinkMap[s.toString()]=c):d(r);return u}}}}),define("DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightBehavior",["UWA/Core","DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightLinkHelper","DS/DELPPWViewBehaviors/CrossHighlightBehavior/CrossHighlightTreeHelper"],function(e,t,n){"use strict";return{plugins:["DatabasePlugin","SelectionPlugin","ImplementPlugin","PlatformPlugin"],creator:function(o,i,r,a,s,l){var c,u,d,g,f,p,h,m,I,v,y,b,C,P,D,S,A,R,w,V,L,E,M,T,N,B,O,x,F,k,U,W,_,j={rootSelection:!1,implementingSelection:!0,implementedSelection:!!l.isDescHighlightFromEBOMEnabled()};return v=function(t){var n=i.getBehavior("Viewer3DBehavior");e.is(n)&&n.select3D(t)},y=function(){var t=i.getBehavior("Viewer3DBehavior");e.is(t)&&t.unSelectAll3D()},b=function(t,n){var o,i,r,a=!e.is(n)||n,s=[],l=[],c={found:[],notFound:[]};return t.forEach(function(e){Array.isArray(e)?l.push(e):s.push(e)}),s.length>0&&((i=(o=h.getNodeModels(s,!1)).found).length>0&&(r=i.map(function(e){return e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath()}),c.found=c.found.concat(r)),a||(c.notFound=c.notFound.concat(o.notFound))),l.length>0&&(o=h.searchPathsPartially(l),c.found=c.found.concat(o.found),a||(c.notFound=c.notFound.concat(o.notFound))),c},C=function(){d=Object.create(null)},P=function(e,t){d[e.toString()]=t},D=function(e){delete d[e.toString()]},S=function(){return Object.keys(d).reduce(function(e,t){return e.concat(d[t])},[])},A=function(e,t){a.setNodeIdsToHighlight(e,t)},R=function(e){a.removeFromHighlightMap(e)},w=function(e){var t,n,o=e.toString();t=a.getNodeIdsToHighlight(e),Array.isArray(t)&&(n=b(t).found,d[o]=n)},V=function(t,n,o){var i,a,l,c,u,d=o||{},g=!!e.is(d.isRoot,"boolean")&&d.isRoot,p=!!e.is(d.onlyRefRefOfInstance,"boolean")&&d.onlyRefRefOfInstance,h=!!e.is(d.prioritizeImplementLink,"boolean")&&d.prioritizeImplementLink,v=!!e.is(d.hasImplementLinks,"boolean")&&d.hasImplementLinks,y=null,b=[],C={},P=function(t){var n=null,o=r.getInstance(t);return e.is(o)&&(n=o.get("isInstanceOf")),n};return a=g?t:p?i=P(t):t,h&&(C.excludeRelationTypes=[m,I]),e.is(a)&&(C.excludeTimeConstraintType=!0,b=r.getImpacted(a,!0,C),r.getImpacted(a,!1,{relationTypes:["DELAsmProcessCanUseCnx"]}).forEach(function(e){var t=r.getImpacted(e.get("PID"),!0,{relationTypes:["SecondaryCandidateResourceLink"]});b=b.concat(t)}),r.getImpacted(a,!1,{relationTypes:["SecondaryCandidateResourceLink"]}).forEach(function(t){var n=r.getConnection(t.get("from"));e.is(n)&&(b.push(n.get("to")),b.push(n.get("from")))}),h&&!g&&(e.is(i)||(i=P(t)),e.is(i)&&(f?(l=s.getScopeLinksOfImplemented(i),p||(y=s.getImplLinksOfImplementing(n),v=!!(Array.isArray(y)&&y.length>0)),c="from"):(l=s.getScopeLinksOfImplementing(i),y=s.getImplLinksOfImplementing(n),v=!!(Array.isArray(y)&&y.length>0),c="to"),(u=(l.length>0&&v?y||[]:v?y||[]:l).map(function(e){return e.get(c)})).length>0&&(b=b.concat(u))))),b},L=function(t,n){var o=n||{},i=e.is(o.implementingImplementedAbsPathCache)?o.implementingImplementedAbsPathCache:null,r=e.is(o.scopedParentNodeAbsPathOrRefId)?o.scopedParentNodeAbsPathOrRefId:null,a=null;return e.is(r)||(r=p.getParentScoped(t)),e.is(r)&&(e.is(i)&&(a=i[r.toString()]),e.is(a)||(a=p.getScopedNodePrdAbsolutePath(r),e.is(i)&&(i[r.toString()]=a))),a},E=function(e,t,n){var o,i=null;return o=L(e,n),Array.isArray(o)&&(i=o.length>0?o.concat(t):t),i},M=function(e,t){var n,o,i,r=Object.create(null);return e.length>0&&(i=p.getParentScoped(e[0]),o={implementingImplementedAbsPathCache:r,scopedParentNodeAbsPathOrRefId:i},n=e.reduce(function(e,n,i,r){var a,s,l;return a=t[n.toString()],Array.isArray(a)&&a.length>0&&1===a.length&&(s=a[0].get("to")),Array.isArray(s)&&(l=r[i],e.push(E(l,s,o))),e},[])),r=null,n},T=function(e){var t;return e.length>0&&(t=e.reduce(function(e,t){var n;return n=p.getImplementingItemInstIDs(t),e.concat(n)},[])),t},N=function(t,n){var o,i=f;return g?o=M(t,n):i&&(o=T(t)),e.is(o)?o:[]},B=function(t,n,o){var i=o||{},r=f,a=g,l=!!e.is(i.supportRootSelection,"boolean")&&i.supportRootSelection,c=!!e.is(i.supportImplementingSelection,"boolean")&&i.supportImplementingSelection,u=!!e.is(i.supportImplementedSelection,"boolean")&&i.supportImplementedSelection,d=[],m=t?n:null,I=t?[]:n,v=function(e){var t,n,o,i;return n=(t=h.fetchAllNearestDescendantsHavingImplLink(e)).nearestDescendants,o=t.descendantLinkMap,n.length>0&&(i=N(n,o)),Array.isArray(i)?i:[]},y=function(t){!1===p.isImplemented(t)&&e.is(p.getParentScoped(t))&&(d=v(t))};return t?l&&!0===s.isScoped(m)&&(d=v(m)):a?c&&y(I):r&&u&&y(I),d},O=function(t,n,o){var i,r,a,s,l,c,u,d=o||{},h=f,m=g,I=!!e.is(d.enableDescendantHighlight,"boolean")&&d.enableDescendantHighlight,v=!!e.is(d.supportRootSelection,"boolean")&&d.supportRootSelection,y=!!e.is(d.supportImplementingSelection,"boolean")&&d.supportImplementingSelection,b=!!e.is(d.supportImplementedSelection,"boolean")&&d.supportImplementedSelection,C=!1,P=null;if(0===n.length?u={isRoot:C=!0}:h?(P=p.getImplementingItemInstIDs(n),u={onlyRefRefOfInstance:!0,hasImplementLinks:!!(Array.isArray(P)&&P.length>0),prioritizeImplementLink:!0}):m&&(u={prioritizeImplementLink:!0}),i=V(t,n,u),!C)if(h)Array.isArray(P)&&P.length>0&&(i=i.concat(P));else if(m)for(a=0,l=i.length;a<l;a++)s=i[a],Array.isArray(s)&&(c=E(n,s),e.is(c)&&(i[a]=c));return I&&(r=B(C,C?t:n,{supportRootSelection:v,supportImplementingSelection:y,supportImplementedSelection:b}),i=i.concat(r)),i},F=function(e,t){var n,o,i,r;i=(n=b(e,!1)).found,r=n.notFound,o=t.length>0?t:e,P(o,i),A(o,r),h.highlightNodes(o)},x=function(e,t,n){var o,i,r,a,s,l,c,d=f;o=O(e,t,{enableDescendantHighlight:u,supportRootSelection:j.rootSelection,supportImplementingSelection:j.implementingSelection,supportImplementedSelection:j.implementedSelection}),a=(i=b(o,!1)).found,s=i.notFound,r=t.length>0?t:e,P(r,a),A(r,s),l=S(),h.highlightNodes(l),c=l,d&&(c=c.concat(h.getSelectedNodeIds())),c.length>0&&!1!==n&&v(c)},k=function(e,t){var n,o,i=f;e?w(t):D(t),n=S(),h.highlightNodes(n),o=n,!e&&i&&(o=o.concat(h.getSelectedNodeIds())),o.length>0&&v(o)},U=function(e,t){var n,o,i=f;R(e),D(e),n=S(),h.highlightNodes(n),o=n,i&&(o=o.concat(h.getSelectedNodeIds())),o.length>0&&!1===t&&v(o)},W=function(e){h.unHighlightAll(),k(!0,e)},_=function(){C()},{listenTo:function(){return{updateCrossHighlight:W,refreshAll:_}},onStart:function(a){var l;m=s.getScopeLinkType(),I=s.getImplementLinkType(),u=m.indexOf("ProductImplementLink")>-1,c=!!e.is(a.enableCrossHighlight)&&a.enableCrossHighlight,g=e.is(a.implementing)?a.implementing:null,(f=e.is(a.implemented)?a.implemented:null)||g?!0!==f||!0!==g?(l=i.getBehavior("WUXNodeModelBehavior"),e.is(l)?(p=new t(o.getLogger(),g,s,r),h=new n(p,l,r),C()):i.debug("WUXNodeModelBehavior is not available")):i.debug("Wrong configuration for Cross-highlight in the module: "+i.getId()):i.debug('Cross-highlight needs "implemented" && "implementing" entries in Module Configuration')},onStop:function(){d=null},crossHighlight:function(t,n,r,a){var s=o.getService("BuildUpService")||{isBuildUpActivated:function(){return!1},buildUpSelection:function(){}};c&&(e.is(t)?r?(s.isBuildUpActivated()||x(t,n,a),"DELMFN_AP"!==widget.data.appId&&s.buildUpSelection(n)):(h.unHighlightAll(),!1!==a&&y(),U(n.length>0?n:t)):i.debug("nodeId is not defined to crossHighlight"))},crossHighlightFrom3DViewer:function(t,n,o){c&&(e.is(t)?o?F(t,n):(h.unHighlightAll(),U(n.length>0?n:t,!1)):i.debug("nodeId is not defined to crossHighlight"))},crossHighlightImpacted:function(e,t,n){c&&(!0===n?h.unSelectAll():h.unHighlightAll(),k(n,t.length>0?t:e))},reHighlightMyView:function(){var e;d&&Object.keys(d).length>0&&(h.unHighlightAll(),e=S(),h.highlightNodes(e))},updateCrossHighlightForSelf:function(e){var t,n,o;c&&(Array.isArray(e)?n=(t=e)[t.length-1]:(t=[],n=e),y(),x(n,t),o=[t.length>0?t:n],i.notify("updateCrossHighlight",o))},setFullDescendantHighlight:function(e){u=e,j.rootSelection=e,j.implementedSelection=e,j.implementingSelection=e},getImpactedOfImplementing:function(t,n){var o,i,r=e.is(n)?n:null,a=!1,s=null;return u&&!0===j.implementingSelection&&t.toString()in d&&(a=!0),a?s=d[t]:(g&&(Array.isArray(t)?i=(o=t)[o.length-1]:(o=[],i=t),s=O(i,o,{enableDescendantHighlight:!0,supportImplementingSelection:!0})),f&&Array.isArray(r)&&(s=b(r).found)),s}}}}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXActionDragDrop",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],function(e,t){"use strict";return function(n,o,i,r,a,s,l,c){var u,d=new t(n,o,i,r,a,s,l,c),g=d.init;return d.init=function(e){u=e||{},g.call(this,e)},d.checkType=function(e){return!1!==this.isAcceptedType(e)},d.processRootDrop=function(t,n,a,s,l,c,d,g){var f,p,h,m,I,v,y,b=this,C=o.getBehavior("SelectionBehavior"),P=o.getBehavior("ModelBehavior"),D=o.getBehavior("LinkBehavior"),S=o.getBehavior("TreeListViewBehavior"),A=i.getNLSValue(o.getId()),R=i.getNLSValue("AbstractDragAndDropManager.AddRoot.LogMessage",{view:A}),w=u.linkTypes[0];if(!e.is(C)||!e.is(P)||!e.is(D))return o.debug("WUXActionDragDrop: Required behaviors are missing."),void g("AbstractDragAndDropManager.InternalError");f=o.log(R),I=function(t){var n,i=o.getBehavior("WUXNodeModelBehavior");return n=e.is(i)?i.validate(t):n},y=function(t,n){var r,a,s,l={},c=e.is(S)?S.getLabelAttribute():"V_Name";b.checkType(n)?(s=I(n),e.is(s)?(l[s.param]=s.paramValue,r=i.getNLSValue(s.key,l,"ValidationError"),o.warn(r,f,"failed"),g()):(a=i.getNLSValue("AbstractDragAndDropManager.AddRoot.Success",{objectName:n.get(c),view:A}),o.log(a,f,"completed"),D.createConnection([{type:w,IDFrom:t.get("PID"),IDTo:n.get("PID"),fromSideRefPID:t.get("PID"),toSideRefPID:n.get("PID")}]),d())):(r=i.getNLSValue("AbstractDragAndDropManager.NotValidType"),o.warn(r,f,"failed"),g("AbstractDragAndDropManager.NotValidType"))},h=C.getSelections(),p=e.is(h[1],"array")?h[1][0]:null,e.is(p)?(v=P.getReferenceModel(p),(m=P.getReference(t))?v.get("PID")===m.get("PID")?(o.warn(i.getNLSValue("AbstractDragAndDropManager.SameObject"),f,"failed"),g()):y(v,m):m=r.fetchRoot(t,{onComplete:function(t){e.is(t)?(y(v,t),o.debug("WUXActionDragDrop:Succesfully fetched reference : %o",t)):(o.warn(i.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),f,"failed"),g("AbstractDragAndDropManager.RootNotInDB"))},onFailure:function(){o.debug("Failed to fetch Reference for PID: "+t),o.warn(i.getNLSValue("AbstractDragAndDropManager.RootNotInDB"),f,"failed"),g("AbstractDragAndDropManager.RootNotInDB")},context:this,silent:!0})):(o.warn(i.getNLSValue("AbstractDragAndDropManager.NoMBOMSelected"),f,"failed"),g())},d.onTreeListViewDrop=function(t,n){var o=this,i={action:[],parameters:[]},r=o.getDragNDropInfo(t,n);e.is(r)&&e.is(r.draggedItems,"array")&&(r.draggedItems.forEach(function(e,t){i.action[t]="addRoot",i.parameters[t]={rootReferencePID:o.getDraggedReferencePID(e)}}),this.processDropEffect(i))},d.onDropBlank=function(e,t){return this.onTreeListViewDrop(e,t)},d}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/DataCollectionUI",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI","text!DS/DELPPWViewBehaviors/assets/json/TypeMapping.json"],function(e,t,n){"use strict";return function(o,i,r,a,s,l,c){var u,d,g,f=null,p=null,h=null,m=null,I=null,v=null,y=null,b=null,C=null,P=null,D={},S=null,A=null,R=!1,w=!1,V=new e.Element("div",{class:"Form-Sections-Container"}),L=r.getComponent("ComboBox"),E=r.getComponent("Accordeon"),M=r.getComponent("TooltipModel"),T=e.Json.decode(n),N=function(t){var n;h=t.dsModel.currentValue,n=f.concat("/",h),u.type=n,P.destroy(),e.is(S)&&S.destroy(),null===A&&U(),W(function(e){_(e)}),u.onTypeChange(h,V)},B=function(t){m=t.dsModel.currentValue,P.destroy(),e.is(S)&&S.destroy(),null===A&&U(),W(function(e){_(e)})},O=function(e){p=e.dsModel.currentValue,A.destroy(),A=null,N(e)},x=function(e){y=e.dsModel.currentValue},F=function(e){e.sort(function(e,t){return e.label.localeCompare(t.label,widget.lang,{numeric:!0})})},k=function(t){var n,o,i=[];return n={elementsList:i=t.elementsList.map(function(e){return{labelItem:e.label,valueItem:e.value}}),actionOnClickFlag:!1,enableSearchFlag:!1},e.is(t.selected)&&(n.selectedIndex=i.findIndex(function(e){return e.valueItem===t.selected})),(o=new L(n)).fieldType=t.fieldType,D[t.name]=o,e.is(t.onChange,"function")&&o.addEventListener("change",t.onChange),o},U=function(){var t=function(){var t,n,i,r,s,l,u,d,f,m,v,b,P,D,S,R,w={},T=[],O=[];e.is(C,"object")&&e.owns(C,h)&&(w=C[h]),P=function(t){let n={},o=[];return e.is(w,"object")&&e.owns(w,"Type")&&(n=function(t,n){let o;return Array.isArray(t.Type)&&(o=t.Type.find(function(e){return e.name===n})),e.is(o)?o:{}}(w,t)),e.is(n,"object")&&(e.owns(n,"visibility")&&"true"===n.visibility||!e.owns(n,"visibility"))&&(b=c.getTypeInfo(t),c.isAKindOf(t,"Resource")?(e.owns(b,"isOOTB")&&"false"===b.isOOTB||e.owns(b,"Newable")&&function(e){let t=e.toUpperCase();return["NEW","ALL"].some(e=>t.includes(e))}(b.Newable))&&o.push({value:t,label:a.getNLSValue(t,null,"Type")}):o.push({value:t,label:a.getNLSValue(t,null,"Type")})),o},T=T.concat(P(h)),e.is(p)&&p!==h?(T=T.concat(P(p)),v=c.getTypeHierarchy(p)):v=c.getTypeHierarchy(h),e.is(v,"array")&&v.forEach(function(e){e!==h&&(T=T.concat(P(e)))}),F(T),m=new e.Element("div",{class:"section-container"}),t=new e.Element("div",{class:"wux-field-container inline-container"}).inject(m),r=new e.Element("div",{class:"wux-field-container inline-container"}).inject(m),i=new e.Element("h6",{class:"wux-type-textElement",text:a.getNLSValue("General.Type")}).inject(t),n=k({name:"V_Type",elementsList:T,fieldType:"select",selected:h,onChange:N}),i.tooltipInfos=new M({shortHelp:a.getNLSValue("General.Type")}),n.inject(t),l=new e.Element("h6",{class:"wux-type-textElement",text:a.getNLSValue("General.Credentials")}).inject(r),s=function(){var t=o.getService("ConfigService").getSecurityContext(),n=t.getAllSC(),i=o.getConfig().isFacet&&!t.getSCFromPreferences().includes("ctx::")?"ctx::"+t.getSCFromPreferences():t.getSCFromPreferences(),r=new L({elementsList:n.map(function(e){return{labelItem:e.label,valueItem:e.value}}),actionOnClickFlag:!1,enableSearchFlag:!1,selectedIndex:n.findIndex(function(e){return e.value===i})});return y=i,e.is(x,"function")&&r.addEventListener("change",x),r}(),l.tooltipInfos=new M({shortHelp:a.getNLSValue("General.Credentials")}),s.inject(r),["MASS","VOLUME","LENGTH","AREA"].forEach(e=>{O.push({value:e,label:a.getNLSValue(e,null,"Dimension")})}),-1===["ProcessContinuousProvide","ProcessContinuousCreateMaterial","ContinuousByProduct"].indexOf(h)||e.is(I)||(f=new e.Element("div",{class:"wux-field-container inline-container"}).inject(m),u=new e.Element("h6",{class:"wux-type-textElement",text:a.getNLSValue("General.Magnitude")}).inject(f),d=k({name:"V_DimensionType",elementsList:O,fieldType:"select",selected:h,onChange:B}),u.tooltipInfos=new M({shortHelp:a.getNLSValue("General.Magnitude")}),d.inject(f)),D="Section.General",S=m,R=new e.Element("div",{class:"Type-Section-Container"}).inject(V),new E({items:[{header:a.getNLSValue(D)?a.getNLSValue(D):D,content:S,expandedFlag:!0}],style:"filled-separate"}).inject(R),S.addEvent("resize",function(){var t,n,o,i;i=S.getElements(".wux-field-container"),(o=S.clientWidth)<290?(t="inline-container",n="block-container"):o>290&&"block-container"===g?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(i)&&i.forEach(function(e){e.removeClassName(t),e.addClassName(n)})}),A=R};e.is(C)?t():s.getXMLValues(o.getConfig().resource.ItemOOTBFiltering,function(n){e.owns(T,i.getId())&&(C=n.convert("Config.Preferences."+T[i.getId()].section+".OOTBType","name")),t()},function(e){w=!0,i.debug("failed to get ItemOOTBFiltering XML. Error Desc: "+e)})},W=function(t){var n=function(){var n,o,i=b[h]||{};if(e.owns(i,"Section")||(i.Section={},i.Section.name=a.getNLSValue("Section.Attributes"),i.Section.Attribute=[{dicoType:"PLMEntity",name:"V_Name",mandatory:!0},{dicoType:"PLMEntity",name:"V_description"}]),["ProcessContinuousProvide","ProcessContinuousCreateMaterial","ContinuousByProduct"].indexOf(h)>=0){switch(m=e.is(I)?I:["MASS","VOLUME","LENGTH","AREA"].indexOf(m)>-1?m:"MASS"){case"LENGTH":n="DELFmiContQuantity_Length",o="DELFmiRefQuantity_Length";break;case"MASS":n="DELFmiContQuantity_Mass",o="DELFmiRefQuantity_Mass";break;case"AREA":n="DELFmiContQuantity_Area",o="DELFmiRefQuantity_Area";break;case"VOLUME":n="DELFmiContQuantity_Volume",o="DELFmiRefQuantity_Volume";break;default:n=null,o=null}i.Section.Attribute.forEach(e=>{"V_ContQuantity"===e.name?e.dicoType=n:"V_RefQuantity"===e.name&&(e.dicoType=o)}),e.is(d)&&!0===d&&(i.Section.Attribute=i.Section.Attribute.filter(function(e){return"instance"!==e.entity}))}t(i)};e.is(b)?n():s.getXMLValues(o.getConfig().resource.insertFormAttributeXML,function(e){b=e.convert("AttributesDescriptionList.Type","name"),n()},function(e){R=!0,i.debug("failed to get insertFormAttribute XML. Error Desc: "+e)})},_=function(n){P=new t(o,i,r,a,l,c),S=new e.Element("div",{class:"Form-container"}),P.createUI({sections:n,type:u.type,renderTo:S,defaultValues:v}),S.inject(V),g=P.getFormStyle()},j=function(){return R||w};return{createUI:function(t){u=t||{},e.is(u.type)&&e.is(u.renderTo)&&(R=!1,w=!1,h=u.type.split("/")[1]||"",f=u.type.split("/")[0],I=u.dimension,u.defaultValues&&(v=u.defaultValues[0]),e.is(u.createRoot)&&(d=u.createRoot),W(function(t){var n,o,i,r;e.is(u.baseTypes)&&(r=u.baseTypes.map(function(e){return{value:e,label:a.getNLSValue(e,null,"Type")}}),F(r),n=new e.Element("div",{class:"top-container inline-container"}).inject(V),o=new e.Element("h6",{class:"wux-type-textElement",text:a.getNLSValue("Base.Type")}).inject(n),i=k({name:"V_BaseType",elementsList:r,fieldType:"select",selected:u.selectedBaseType,onChange:O}),o.tooltipInfos=new M({shortHelp:a.getNLSValue("Base.Type")}),i.inject(n),p=u.selectedBaseType),U(),_(t)}),j()&&e.is(u.onFailure,"function")&&u.onFailure({invalidXML:!0}),V.inject(u.renderTo))},destroy:function(){e.is(P)&&P.destroy(),e.is(S)&&S.destroy(),e.is(V)&&V.destroy()},getValues:function(){var t,n={};return e.owns(D,"V_Type")&&(D.V_Type.currentValue?(n.V_Type=f.concat("/",D.V_Type.currentValue),n.type=h):(n.V_Type=D.V_Type,n.type=h),e.is(m)&&(n["DELFmiMagnitudeExt.V_DimensionType"]=m)),t=P.getValues(),e.extend(t,n),t},getSecurityContextOverride:function(){return y},validate:function(){return j()?{result:!1,message:a.getNLSValue("ModelBehavior.CreateReference.Failure.InvalidXML")}:P?P.validate():{result:!0,message:null}},updateToDefaultValues:function(e){P&&P.updateToDefaultValues(e)}}}}),define("DS/DELPPWViewBehaviors/UXFactoryBehavior/UXFactoryBehavior",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/SelectionControl","DS/DELPPWViewBehaviors/UXFactoryBehavior/DataCollectionUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementedRevChooserUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/MfgItemCreateReportUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ConfirmationDialog","DS/DELPPWViewBehaviors/UXFactoryBehavior/MessageDialog"],function(e,t,n,o,i,r,a,s,l){"use strict";return{plugins:["UXComponentsPlugin","ResourcePlugin","WebServicePlugin","AttributePlugin","DicoPlugin","DatabasePlugin","SelectionPlugin","ImplementPlugin","PlatformPlugin"],creator:function(c,u,d,g,f,p,h,m,I,v,y){var b=function(e,t){var n=[null].concat(t),o=d.getComponent(e);return new(Function.prototype.bind.apply(o,n))};return{onStart:function(){},onStop:function(){},getComponent:function(e){return d.getComponent(e)},showConfirmation:function(e,t,n,o,i){new s(this,i).show(e,t,n,o)},showMessage:function(e,t){new l(this,u).show(e,t)},showWithMessage:function(e,t,n){new l(this,u).showWithMessage(e,t,n)},createElement:function(){var e=Array.prototype.slice.call(arguments);return b("Element",e)},create:function(s,l){var C,P,D,S,A,R=[],w=Array.prototype.slice.call(arguments,1);switch(s){case"Panel":A=this.getComponent("WUXDockAreaEnum"),(C=new(d.getComponent("Panel"))(l)).allowedDockAreas=A.LeftDockArea|A.RightDockArea;break;case"Tree":C=new(d.getComponent("Tree"))({height:"inherit",width:"100%",apiVersion:2,selection:{toggle:!1,canMultiSelect:!1},styles:{height:"100%",width:"100%"}});break;case"Dialog":D=d.getComponent("WUXFrameWindowsManager").getFrameWindow(u.getAppContext()),P={position:{my:"center",at:"center"},immersiveFrame:c.getConfig().isFacet?c.getConfig().immersiveFrame:D.getImmersiveFrame()},e.extend(l,P),(C=new(d.getComponent("CustomDialog"))(l)).addEventListener("contextmenu",function(e){e.preventDefault()}),e.is(C.buttons.Ok)?C.buttons.Ok._giveFocus():C.buttons.Cancel&&C.buttons.Cancel._giveFocus(),C.addEventListener("keypress",function(e){"Enter"===e.key&&(C.buttons.Ok&&!C.buttons.Ok.disabled&&C.buttons.Ok._isFocused()?C.buttons.Ok.onClick():C.buttons.Cancel&&!C.buttons.Cancel.disabled&&C.buttons.Cancel._isFocused()&&C.buttons.Cancel.onClick())});break;case"Filter":(Array.isArray(l.filterToolbarSections)?l.filterToolbarSections:["PROCESS","SYSTEM","RESOURCE","PART","PRODUCT","PARENT"]).forEach(function(e){"PARENT"===e?R.push({item:e,iconElemName:"CreateInstance",isSelected:!1}):R.push({item:e,iconElemName:e,isSelected:!0})}),S=R.reduce(function(t,n){var o=g.getNLSValue("PPRTYPE."+n.item),i=g.getIconElem(n.iconElemName),r=!!e.is(n.isSelected,"boolean")&&n.isSelected;return t[n.item]={text:o,tooltipText:o,title:i,pinned:r},t},{}),C=new(d.getComponent("Segmented"))({multiSelect:!0,data:S});break;case"SelectionControl":(C=new n(c,u,d,g,h)).createUI(l);break;case"FormUI":(C=new t(c,u,d,g,p,h)).createUI(l);break;case"DataCollectionUI":(C=new o(c,u,d,g,f,p,h)).createUI(l);break;case"ImplementUI":(C=new i(c,u,this,g,m,I,v)).createUI(l);break;case"ImplementedRevChooserUI":(C=new r(c,u,this,g,m,y)).createUI(l);break;case"MfgItemCreateReportUI":(C=new a(c,u,this,g,m,d)).displayReport(l);break;default:C=b(s,w)}return C}}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/DesignAlternateRetriever",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors/AltSubBehavior/AltSubInfoContainer"],function(e,t,n){"use strict";return function(o){var i,r,a,s,l,c,u=()=>!0,d=()=>!1,g=u,f=d,p=d,h=d,m=d;return a=function(e,n,o){return new t(function(t,i){var r=[];e.forEach(function(e){n(e)&&r.push(e)}),r.length>0?o(r,t,i):t()})},s=function(e){return a(e,function(e){return!o.isReference(e)},function(e,t,n){o.fetchRoot(e,{forceDBMode:!0,silent:!0,onComplete:t,onFailure:n})})},l=function(e){return a(e,function(e){return!o.isInstance(e)},function(e,t,n){o.fetchInstancesAndTheirReferences(e,{onComplete:t,onFailure:n})})},c=function(o){let i=n.empty(),r=n.empty(),a=n.empty();return new t(function(n){let c=[],u=new Set,d=new Set;o.forEach(function(t){const n=t.id,o=t.qualificationStatus;if(e.is(o)&&g(o)){const e=t.operation;p()&&e.includes("Substitute")&&("ReferenceSubstitute"===e?h(t.parentContextId)&&(r.addId(n).setInfo(n,t),d.add(t.parentContextId)):"InstanceSubstitute"===e&&m(t.instanceContextId)&&(a.addId(n).setInfo(n,t),u.add(t.instanceContextId))),f()&&"Alternate"===e&&i.addId(n).setInfo(n,t)}}),c=[s(d),l(u)],t.all(c).then(function(){n({alternates:i,referenceSubstitutes:r,instanceSubstitutes:a})})})},{of:function(e){return i=e,this},ofBL:function(e){return r=e,this},withStatus:function(e){return g=e,this},withAlternates:function(){return f=u,this},withoutSubstitutes:function(){return p=d,this},withReferenceSubstitutes:function(e){return h=e,p=u,this},withInstanceSubstitutes:function(e){return m=e,p=u,this},retrieve:function(){return o.getAlternateEnggItemPromise(i).then(function(e){return c(e)})},retrieveThroughBL:function(){return o.getEngAlternatesFromBLPromise(r).then(function(e){return c(e)})}}}}),define("DS/DELPPWViewBehaviors/AltSubBehavior/AltSubBehavior",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors/AltSubBehavior/DesignAlternateRetriever","DS/DELPPWViewBehaviors/AltSubBehavior/AltSubInfoContainer"],function(e,t,n,o){"use strict";return{plugins:["DatabasePlugin","ImplementPlugin","ResourcePlugin"],creator:function(i,r,a,s,l){var c,u,d,g,f,p,h,m,I,v,y,b,C,P,D={RESULTING_PRODUCT:"ResultingProduct",SCOPE:"Scope",IMPLEMENT:"Implement"};return c=function(e){return function(t){var n=null;return e.alternates.infoMap.has(t)?n=e.alternates.infoMap.get(t):e.referenceSubstitutes.infoMap.has(t)?n=e.referenceSubstitutes.infoMap.get(t):e.instanceSubstitutes.infoMap.has(t)&&(n=e.instanceSubstitutes.infoMap.get(t)),n}},u=function(e){return new t(function(t,n){var o=[];e.forEach(function(e){a.isReference(e)||o.push(e)}),o.length>0?a.fetchRoot(o,{forceDBMode:!0,silent:!0,onComplete:t,onFailure:n}):t()})},d=function(n){return new t(function(t,o){var i=n.Results,r=[],s=new Set,l=function(t,n,o){return{productId:t,linkTypeNavigated:e.is(n,"string")?n:null,mfgId:e.is(o,"string")?o:null}};Array.isArray(i)?(i.forEach(function(e){var t,n,o,i=e.PrdID,c=e.mfgItems;s.add(i),Array.isArray(c)&&c.length>0&&(n=(t=a.groupingBy(c,function(e){return e.linkType},function(e){return e.mfgItemIds})).has(D.RESULTING_PRODUCT)?t.get(D.RESULTING_PRODUCT).length:0,o=t.has(D.SCOPE)?t.get(D.SCOPE).length:0,0===n&&0===o?r.push(l(i)):t.forEach(function(e,t){e.forEach(function(e){s.add(e),r.push(l(i,t,e))})}))}),u(s).then(function(){t(r)})):o('Server response of "/mfgItemsFromDesignAlternates" is not as expected')})},g=function(o){var i=o.contextProductRefId,r=a.getInstance(o.contextProductInstId),s=o.contextLinkNavigated;return new t(function(t,o){var l,c,u=new n(a);e.is(i)?(s===D.RESULTING_PRODUCT||s===D.SCOPE?c=u.of(i).withStatus(function(e){return"Obsolete"!==e}).withAlternates().withoutSubstitutes().retrieve():e.is(r)?(l=r.get("isAggregatedBy"),c=u.of(i).withStatus(function(e){return"Obsolete"!==e}).withAlternates().withReferenceSubstitutes(function(e){return l===e}).withInstanceSubstitutes(function(e){return e===r.get("PID")}).retrieve()):o("No Context product Instance is found"),c.then(t)):o("No context product found")})},f=function(e){return new n(a).ofBL(e).withStatus(()=>!0).withAlternates().withReferenceSubstitutes(()=>!0).withInstanceSubstitutes(()=>!0).retrieveThroughBL()},p=function(n,o,i,r,s){return a.getMfgItemsFromDesignAlternatesPromise(n,o,i).then(d).then(function(n){return new t(t=>{t(n.filter(function(t){let n=!0;return e.is(t.mfgId)&&(n=s(t.mfgId)),n}).map(function(e){return{...e,altSubInfo:c(r)(e.productId)}}))})})},h=function(){return t.resolve([])},m=function(e,t,n){var o,i=e.alternates.ids,r=e.referenceSubstitutes.ids,a=e.instanceSubstitutes.ids,s=t.contextLinkNavigated;return s===D.IMPLEMENT&&(s=D.SCOPE),o=i.concat(r).concat(a),{contextProductRefId:t.contextProductRefId,designAlternateIds:o,contextLinkNavigated:s,altSubInfoObj:e}},I=function(){return{contextLinkNavigated:D.IMPLEMENT,contextProductRefId:null}},v=function(n,i,r){const a=g(r).then(function(e){return m(e,r)}),s=f(n).then(function(e){return m(e,r)});return t.all([a,s]).then(function(n){const i=(t=>{let n={contextProductRefId:null,designAlternateIds:[],contextLinkNavigated:null,altSubInfoObj:{alternates:o.empty(),referenceSubstitutes:o.empty(),instanceSubstitutes:o.empty()}};for(const o of t)n.contextProductRefId=e.is(o.contextProductRefId)?o.contextProductRefId:null,n.designAlternateIds=n.designAlternateIds.concat(o.designAlternateIds),n.contextLinkNavigated=e.is(o.contextLinkNavigated)?o.contextLinkNavigated:null,n.altSubInfoObj.alternates=n.altSubInfoObj.alternates.combine(o.altSubInfoObj.alternates),n.altSubInfoObj.referenceSubstitutes=n.altSubInfoObj.referenceSubstitutes.combine(o.altSubInfoObj.referenceSubstitutes),n.altSubInfoObj.instanceSubstitutes=n.altSubInfoObj.instanceSubstitutes.combine(o.altSubInfoObj.instanceSubstitutes);return n})(n);return t.resolve(i)}).then(function(e){const{contextProductRefId:t,designAlternateIds:n,contextLinkNavigated:o,altSubInfoObj:r}=e;return p(t,n,o,r,i)})},y=function(e,t){return f(e).then(function(e){return m(e,I())}).then(function(e){const{contextProductRefId:n,designAlternateIds:o,contextLinkNavigated:i,altSubInfoObj:r}=e;let a;return a=o.length>0?p(n,o,i,r,t):h()})},b=function(t){return function(n){var o,i=e.is(n.mfgId)?n.mfgId:null,r=n.productId,s=n.altSubInfo,c={referenceModel:null,isContextProduct:r===t,status:null,engRelTypeNLS:null,engRelType:null,substituteContextModel:null},u={referenceModel:null,mfgRelTypeNLS:null,mfgRelType:null};return c.referenceModel=a.getReference(r),e.is(i)&&(u.referenceModel=a.getReference(i),u.mfgRelTypeNLS=l.getNLSValue("AltSub.Link."+n.linkTypeNavigated),u.mfgRelType=n.linkTypeNavigated),e.is(s)?(e.is(s.qualificationStatus)&&(c.status=l.getNLSValue("AltSub.Status."+s.qualificationStatus)),o=s.operation,e.is(o)&&(c.engRelTypeNLS=l.getNLSValue("AltSub."+o),c.engRelType=o,"ReferenceSubstitute"===o?c.substituteContextModel=a.getReference(s.parentContextId):"InstanceSubstitute"===o&&(c.substituteContextModel=a.getInstance(s.instanceContextId)))):(c.status="",c.engRelTypeNLS=""),{eng:c,mfg:u}}},C=function(t,n,o,i){var r={};return r.mfgReferenceId=t,r.results=e.is(n)?n:null,r.contextProductModel={reference:e.is(o)&&e.is(o.referenceModel)?o.referenceModel:null,instance:e.is(o)&&e.is(o.instanceModel)?o.instanceModel:null},r.contextLinkNavigated=e.is(i)?i:null,r},P=function(e){return C(e,null,null,null)},{onStart:function(e){},onStop:function(){},getEnggAlternatesAndMfgs:function(n,o,i,s){const l=e=>e!==n,c=function(n,o,i){if(n.length>0){let r=i.contextLinkNavigated;r===D.IMPLEMENT&&(r=D.SCOPE);const s=b(i.contextProductRefId),l=n.map(s),c=a.getReference(i.contextProductRefId),u=e.is(i.contextProductInstId)?a.getInstance(i.contextProductInstId):null;return t.resolve(C(o,l,{referenceModel:c,instanceModel:u},r))}return t.resolve(P(o))};let u={};r.notify("startProgress",u),a.getAltSubContextProductPromise(n,o).then(function(t){let o;return o=e.is(t)?v(i,l,t).then(e=>c(e,n,t)):y(i,l).then(e=>c(e,n,I()))}).then(function(e){r.notify("stopProgress",u),s(e)}).catch(function(e){r.notify("stopProgress",u),r.log("Error : "+e),s({})})},getLinkTypeEnum:function(){return D}}}}}),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeNodeModel",["UWA/Core","UWA/Class","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/AbstractTreeNodeModel"],function(e,t,n){"use strict";var o=function(t){t=t||{},n.call(this,t),this.object={},this.options.grid["ds6w:type"]=this.getReferenceType(),this.object.type=this.getReferenceType(),e.is(t.defType)&&(this.object.defType=t.defType)};return(o.prototype=Object.create(n.prototype)).constructor=o,o.prototype.updateBadge=function(e){this.prepareUpdate(),this.setBadges(e),this.pushUpdate()},o.prototype.setRootFiltered=function(e){this.isRoot(!0)&&(this.options.isFiltered=e),this.updateBadge({bottomRight:e?"filter":""})},o.prototype.isRootFiltered=function(){var t=!1;return this.isRoot(!0)&&e.is(this.options.isFiltered,"boolean")&&(t=this.options.isFiltered),t},o.NODE_SOURCE=n.NODE_SOURCE,o}),define("DS/DELPPWViewBehaviors/WUXNodeModelBehavior/WUXNodeModelBehavior",["UWA/Core","UWA/Promise","DS/DELPPWViewBehaviors/BulkTreeSearchHelper","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeDocument","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/TreeNodeModel","DS/DELPPWViewBehaviors/WUXNodeModelBehavior/Mutex"],function(e,t,n,o,i,r){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","SelectionPlugin","ImplementPlugin","KeyBindingPlugin","RootsPlugin","CfgColumnsPlugin","PlatformPlugin","DicoPlugin"],creator:function(a,s,l,c,u,d,g,f,p,h,m){var I,v,y,b,C,P,D,S,A,R,w,V,L,E,M,T,N,B,O,x,F,k,U,W,_,j,H,G,X,z,K,q,Q,J,Y,Z,$,ee,te,ne,oe,ie,re,ae,se,le,ce,ue,de,ge="noChildren",fe="expanding",pe="partiallyExpanded",he="expanded",me="collapsed",Ie={virtualColumnID:null,sortOrder:null},ve=[],ye=0,be=new o({useAsyncPreExpand:!0,shouldAcceptDrag:function(t){return e.is(t.getReferencePID)},shouldAcceptDrop:function(t){var n=t.dropNode;return!e.is(n)||e.is(n.getReferencePID)}}),Ce=new n(be,l);(I=be.getXSO())&&I.onChange(function(t){var n,o,i,r,a,l,c,d,g,f=[],p=[],h=s.getBehavior("ViewBehavior");if(!re(t)){for(l=t.getInstancePID()||t.getReferencePID(),c=t.isSelected(),d=be.getSelectedNodes(),g=t.getAbsolutePath(),o=0,i=d.length;o<i;o++)r=d[o],e.is(r)&&e.is(r.getReferencePID)&&(a=r.getInstancePID()||r.getReferencePID(),"MANAGECAPABLERESOURCESMOD"===s.getId()&&(a=r.getLinkPID()),f.push(a),p.push({id:a,path:r.getAbsolutePath()}));u.setSelection(s.getId(),p),n={sourceId:s.getId(),selectedNodeIds:f,changed:{nodeId:l,isSelected:c,absPath:g}},e.is(E)&&!0!==t.from3DViewer?E.crossHighlight(l,g,c):t.from3DViewer=null,e.is(h)&&!0===c&&h.setActiveView(),s.notify("select",n)}}),M=function(){var t,n,o=function(){};t=function(t){var n,o,i,r,a;if(t.preventDefault(),t.stopPropagation(),i=function(){var t,n=be.getRoots();e.is(n)&&(t=n[0],e.is(t)&&t.select())},n=be.getSelectedNodes())if(r=n[0])if(r.hasChildren()||r.getNextBrother())r.getNextVisibleNode().select(),r.unselect();else{if(r.isRoot(!0))return r.unselect(),void i();for(a=r.getParent();a&&!a.getNextBrother()&&!a.isRoot(!0);)a=a.getParent();if(o=a.getNextBrother())o.select(),r.unselect();else{if(!a.getPreviousBrother())return r.unselect(),void i();a.getPreviousBrother().select(),r.unselect()}}else i();else i()},n=function(t){var n,o,i=be.getSelectedNodes(),r=function(){var t,n,o;t=be.getRoots(),e.is(t,"array")&&t.length>0&&(o=(n=t[t.length-1]).getVisibleChildren(!1,!0),(e.is(o,"array")&&o.length>0?o[o.length-1]:n).select())};if(t.preventDefault(),t.stopPropagation(),i)if(n=i[0]){if(0===n._rowID)return n.unselect(),void r();o=n.getPreviousVisibleNode(),n.unselect(),o.select()}else r();else r()},g.createHandler({domElement:s.getElement(),onTab:t,onDownArrow:t,onShiftTab:n,onUpArrow:n,onCtrlA:function(e){be.selectAll(),e.preventDefault(),e.stopPropagation()},onCtrlC:o,onCtrlV:o,onCtrlX:o,onSuppr:o,onBackspace:o})},T=function(t,n){var o,i;return n=n||!1,i=function(t){var o=[],i=null;return i=be.getTreeNodeModel(t[0]),e.is(i)&&0!==i.length?(1===t.length?n&&(i=i[0]):t.length>1&&(i.forEach(function(e){var n,i,r,a,s=e;for(n=1;n<t.length;n++){for(r=s.getChildren(!0),a=!1,i=0;i<r.length;i++)if(r[i].getInstancePID()===t[n]){s=r[i],a=!0;break}if(!a)break}a&&o.push(s)}),i=o.length>0?n?o[0]:o:null),i):null},Array.isArray(t)&&t.length>0?o=i(t):e.is(t,"string")?(o=be.getTreeNodeModel(t,{returnFirstOne:n}),Array.isArray(o)&&o.length<1&&(o=null)):(s.debug("nodeId is not valid."),o=null),o},N=function(e,t){return Ce.getNodeModels(e,t)},B=function(e){var t,n,o=be.getRoots(!0),i=null;for(n=o.length,t=0;t<n;t++)if(o[t].getReferencePID()===e){i=o[t];break}return i},O=function(){var e=be.getRoots();return Array.isArray(e)&&e.length<=0},x=function(n,o,r,a){var l,c,u,d,g,p=s.getBehavior("TaggerBehavior"),h=s.getBehavior("BIBehavior"),m=s.getBehavior("ExpandFilterBehavior"),I=!1,y={nodeOptions:{},taggerOptions:{}};return e.is(o)?(u=""!==(g=o.getAbsolutePath().toString())?g.concat(",",n.instancePID):n.instancePID,d=o.getRIRpath().join(",")+","+n.instancePID+","+n.referencePID):(u=n.referencePID,d=n.referencePID),h&&(y=h.getNodeOptions(u,d),e.merge(n,y.nodeOptions)),c=new i(n),e.is(o)?(!0===a&&(r=ye++,I=!0),o.addChild(c,r,I)):(be.addRoot(c),e.is(m)&&m.setTagsWithExpandSynthesis(c.getReferencePID()),!0!==O()&&(l=s.getBehavior("DropZoneViewBehavior"),e.is(l)&&l.hide()),!0===v&&f.addRoot(s.getId(),c.getID())),e.is(n.fromXEN)&&(c.stringIdentifier=n.referencePID,c.fromXEN=n.fromXEN),F(c),p&&p.getNodeUpdatePromise({PID:c.getID(),Path:c.isRoot(!0)?c.getReferencePID():c.getAbsolutePath().toString(),event:"add",externalTags:[y.taggerOptions]}).then(function(){t.resolve()}),c},F=function(t){var n=!1;e.is(t.fromXEN)&&t.fromXEN&&(n=t.fromXEN),(e.is(b)||e.is(P)||e.is(C))&&(d.getScopeLinksOfImplementing(t.getID(),n).length>0?k(t,b.badgeIcon):d.getPartialScopeLinksOfImplementing(t.getID(),n).length>0?k(t,P.badgeIcon):d.getResultingProductLinksOfImplementing(t.getID(),n).length>0&&k(t,C.badgeIcon))},ie=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)||/[/]?((\.|\.\.)*?([/]))*?(([a-zA-Z0-9_ ]+)\/)*?([a-zA-Z0-9_ ]+)\.([a-z]{2,})/.test(e)},k=function(t,n){var o=e.is(n)?c.getIconURLFromKey(n):"",i={bottomLeft:ie(o)?{iconPath:o,iconSize:{width:"16px",height:"16px"}}:""};Array.isArray(t)?t.forEach(function(e){e.updateBadge(i)}):t.updateBadge(i)},q=function(e,t){var n,o,i=null;if(t&&(o=t.getChildren(!0),Array.isArray(o)&&o.length>0))for(n=0;n<o.length;n++)if(e===o[n].options.instancePID){i=o[n];break}return i},le=function(t,n){var o,i,r,a=s.getBehavior("TreeListViewBehavior"),c=s.getBehavior("GraphViewBehavior");return n=n||{},o=i=a.getReferenceNodeOptions(t),e.is(c)&&(r=c.getReferenceNodeOptions(t),o.grid=e.merge(i.grid,r.grid)),e.is(n.fromXEN)&&(o.fromXEN=n.fromXEN),!n.fromXEN&&(l.needToQueryForChildren(t)||e.is(n.forceIntializeChildren)&&n.forceIntializeChildren)&&(o.children=[]),x(o)},ce=function(t,n,o,i,r){var a,c,u,d,g=s.getBehavior("TreeListViewBehavior"),f=s.getBehavior("GraphViewBehavior");return r=r||{},a=o.getAbsolutePath().concat(t.get("PID")),c=u=g.getInstanceNodeOptions(n,t,a),e.is(f)&&(d=f.getInstanceNodeOptions(n,t),c.grid=e.merge(u.grid,d.grid)),(l.needToQueryForChildren(n)||e.is(r.forceIntializeChildren)&&r.forceIntializeChildren)&&(c.children=[],e.is(r.fromXEN)&&(c.fromXEN=r.fromXEN)),T(c.referencePID,!0),r.isFlatView?x(c,null,i,r.isFlatView):x(c,o,i,r.isFlatView)},W=function(t,n,o){var i,r,a,c,u,d,g,f=o||{},p=s.getBehavior("TreeListViewBehavior"),h=e.is(f.onEndAddToNodeList,"function")?f.onEndAddToNodeList:null,I=!0;if(e.is(h)&&delete f.onEndAddToNodeList,g=function(t,n){a.getRoot(!0).isRootFiltered()?J(a):l.needToQueryForChildren(t)?J(a,pe):J(a),e.is(h)&&h(t,n)},!e.is(t,"string"))return s.debug("_addToNodeModelListRecursive: invalid PID."),void g(null,null);if(e.is(p)){if(d=function(){_(a,f),g(i,a)},e.is(n))if(r=l.getInstance(t),e.is(r)){if(i=l.getReferenceModelFromInstance(r),!e.is(i)||m.isAKindOf(i,"Document"))return;a=q(t,n),e.is(a)&&(a.getReferencePID()!==r.get("isInstanceOf")?(c=a._getLocalID(),n.removeChild(a)):(I=!1,u=p.getUpdateNodeOptions(r,a),z(t,u),U(r,a.getAbsolutePath()))),I&&(a=T(f.rootId,!0),f.rootNode=a,a=ce(r,i,n,c,f))}else i=l.getReference(t);else(i=l.getReference(t))&&(e.is(f.loadRootOnly)&&f.loadRootOnly&&(f.expandLevel=0),a=T(t,!0),e.is(a)&&(a.isRoot(!0)||e.is(f.updateItem)&&!0===f.updateItem)?(u=p.getUpdateNodeOptions(i),z(t,u)):a=le(i,f));f.loadChildren?r?d():!S&&l.needToQueryForChildren(i)?(f=e.merge(f,{silentMode:!0}),J(a,fe),l.getDescendantsFromServer(i.get("PID"),d,f)):!S&&e.is(f.withLinksResolved)&&f.withLinksResolved&&l.needToQueryForConnections(i)&&!0!==f.isFlatView?(J(a,fe),l.findMissingLinkedObjects(i.get("PID"),d,f)):d():g(i,a)}else s.debug("treeListViewBehavior is undefined")},_=function(t,n){var o,i=n||{},r=e.is(i.filterQuery)?i.filterQuery:null,a=s.getBehavior("TreeListViewBehavior");e.is(t)&&t.removeChildren(),be.prepareUpdate(),o=l.getFilteredInstancesFromCollection(t.getReferencePID(),r),e.is(Ie)&&e.is(Ie.virtualColumnID)&&e.is(Ie.sortOrder)?a.getDataGridView().reapplySortModel():o=(o=(o=o.map(function(e,t){return{position:t,data:e}})).sort(function(e,t){var n=e.data.get("V_TreeOrder"),o=t.data.get("V_TreeOrder");return n&&o?Number(n)-Number(o):e.position-t.position})).map(function(e){return e.data}),o.forEach(function(e){W(e.id,t,i)}),be.pushUpdate()},Y=function(e){var t,n=!1,o=e.getReferencePID();return l.needToQueryForChildren(o)||(t=l.getInstancesFromCollection(o),n=e.getChildren(!0).length===t.length),n},j=function(t){var n,o,i,r,a,u,d,g,f,p=null,h=!1,m={};if(u=function(){s.notify("startProgress",m),p.prepareUpdate()},d=function(t){p.preExpandDone(),p.pushUpdate(),e.is(t)&&""!==t&&J(p,t),s.notify("stopProgress",m),e.is(E)&&E.reHighlightMyView(),s.notify("onNodeExpanded")},i=function(){var t="";(!p.hasChildren()||!f||e.is(n.previousNodeState)&&n.previousNodeState[p.getReferencePID()]===pe)&&_(p,{loadChildren:!0}),p.hasChildren()||(t=ge),d(t)},r=function(){s.warn(c.getNLSValue("Error.ExpandFailed.Title")),g.setAdditionalInfo({queriedForChildren:!1}),d(h?me:pe)},a=function(){s.warn(c.getNLSValue("Info.ExpandCanceled.Title")),g.setAdditionalInfo({queriedForChildren:!1}),d(h?me:pe)},e.is(t)&&e.is(t.data)&&e.is(t.data.nodeModel)){if(re(t.data.nodeModel))return void t.target.preExpandDone();n=t.data,p=n.nodeModel,g=l.getReference(p.getReferencePID()),e.is(g)&&(u(),h=p.getRoot(!0).isRootFiltered(),S?d():h?d():(f=!l.needToQueryForChildren(g))?i():(o={ordered:!1,context:this,doNotExpand:!0,onFailure:r,onTimeout:r,onCancel:a},!!e.is(n.expandAll,"boolean")&&n.expandAll&&(o.expandLevel=-1),l.getDescendantsFromServer(g.get("PID"),i,o)))}},H=function(){e.is(E)&&E.reHighlightMyView()},G=function(){s.notify("onNodeCollapsed")},X=function(t,n={}){if(e.is(n.label)&&t.setLabel(n.label),e.is(n.attributes))if(e.is(t._getRowID()))t.updateOptions({grid:n.attributes});else for(const[e,o]of Object.entries(n.attributes))t.options.grid[e]=o;F(t)},z=function(e,t){const n=t||{},o=Array.isArray(e)?T(e):T(e.split(","));if(Array.isArray(o)){be.prepareUpdate();for(let e of o)X(e,n);be.pushUpdate()}},U=function(t,n){var o,i,r,a=s.getBehavior("TreeListViewBehavior");if(be.prepareUpdate(),o=a.getRelationNodeOptions(t,n),e.is(o))for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r=o[i].attributes,e.is(r)&&z(i,{attributes:r}));be.pushUpdate()},K=function(t){var n,o,i,r,a=l.getReference(t.getReferencePID()),c=s.getBehavior("TreeListViewBehavior"),u=s.getBehavior("GraphViewBehavior");(e.is(t)||e.is(c))&&(t.isRoot(!0)?(n=i=c.getReferenceNodeOptions(a),e.is(u)&&(r=u.getReferenceNodeOptions(a),n.grid=e.merge(i.grid,r.grid))):(o=l.getInstance(t.getInstancePID()),n=i=c.getInstanceNodeOptions(a,o,t.getAbsolutePath()),e.is(u)&&(r=u.getInstanceNodeOptions(a,o),n.grid=e.merge(i.grid,r.grid))),t.updateOptions(n),F(t))},Q=function(t,n){const o=(e=>t=>e.filter(e=>((e,t)=>e===t.getReferencePID())(t,e)||((e,t)=>!!(e=>!e.isRoot())(t)&&e===t.getInstancePID())(t,e)))(n),i=s.getBehavior("CfgColumnsBehavior");if(e.is(i)){let e={data:[],pids:[]};be.prepareUpdate();try{i.getCombinedEntriesFromUpdatedAttributesObj(t).forEach(([t,n])=>{const r=i.trimAttributesBasedOnVisibleDataIndices(n),a=o(t);for(let e of a)X(e,{attributes:r});e.data.push(n),e.pids.push(t)}),s.notify("updateEffectivity",e)}finally{be.pushUpdate()}}},J=function(t,n){var o=n||null,i=t.getState();e.is(o)||(o=t.hasChildren()?t.isExpanded()?he:me:ge),!0===t.fromXEN?t.setState({state:ge}):o!==i&&(o===fe?t._expandState="expandingState":t.setState({state:o}))},Z=function(n){return new t(function(t,o){e.is(n,"function")?setTimeout(function(){e.is(D)?D.acquire().then(function(){const i=n();e.is(i.then,"function")?i.then(function(){D.release(),t()}).catch(function(e){D.release(),o(e)}):(D.release(),o("promiseSupplier is not returning a Promise"))}):o("_mutex is not initialized")},5):o("Given promiseSupplier is not a function")})},$=function(n){var o=s.getBehavior("TreeListViewBehavior");o.isInverseRelationColumnPresent()&&Z(()=>new t(function(t,o){var i,r,a,c=new Set,u=[];(i=n.filter(function(t){var n=!1;return!!e.is(t.options.areInverseRelationColumnsFilled,"boolean")&&t.options.areInverseRelationColumnsFilled||(l.needToQueryForConnections(t.getReferencePID())||e.is(t.getInstancePID())&&l.needToQueryForConnections(t.getInstancePID()))&&(n=!0),n})).length>0?(i.forEach(function(t){var n=t.getInstancePID();e.is(n)&&c.add(n),c.add(t.getReferencePID())}),c.forEach(function(e){u.push(e)}),a=N(u),(r=a.found).forEach(function(e){e.options.areInverseRelationColumnsFilled=!1}),l.getInverseConnectionsFromServer(u,{onComplete:function(){r.forEach(function(e){K(e),e.options.areInverseRelationColumnsFilled=!0}),s.notify("nodesUpdatedInAsync",s.getId()),t()},onFailure:function(e){o(e)}})):t()})).catch(function(e){s.log("Inverse Relation Column update failed. Reason: "+e)})},ee=function(t,n){let o=null;const i=function(){let t;return e.is(o)?t=o:(t=n.filter(function(e){return!re(e)}),o=t),t};h.isExpandFetchFetchEnabled()&&"Index"===s.getPreferenceValue("navigateOnIndex")&&!l.isAuthoringMode()&&$(i());const r=s.getBehavior("AltSubBIBehavior");e.is(r)&&r.isCmdActive()&&r.showBIStatus(i());const a=s.getBehavior("CfgColumnsBehavior");e.is(a)&&a.isAnyCfgColumnVisible()&&te(i())};const Pe=e=>t=>{be.prepareUpdate();for(let n of t)n.updateOptions({areCfgColumnsFilled:e});return be.pushUpdate(),t};return te=function(n){const o=Pe(!0),i=Pe(!1),r=s.getBehavior("CfgColumnsBehavior");e.is(r)&&Z(()=>(function(n,r){return new t((t,a)=>{const s=r.filter(t=>!(e.is(t.options.areCfgColumnsFilled,"boolean")&&t.options.areCfgColumnsFilled));if((e=>e.length>0)(s)){i(s);const e=n.getNodeIdsObjAsPerExternalSpec(s);n.updateAttributes(e).then(e=>{Q(e,s),o(s),t()}).catch(function(e){a("Something failed while updating Cfg attributes in Tree: "+e)})}else t()})})(r,n)).catch(function(e){s.log("Updating Configuration columns failed. Reason: "+e)})},ne=function(e){var t=T(e);Array.isArray(t)&&t.forEach(K)},oe=function(){var t;s.getBehavior("TreeListViewBehavior").has3DHideShowColumn()&&(t=be.getMatchingNodeModels(function(t){var n=t.options.hideShow3D,o=!1;return e.is(n,"boolean")&&(o=!1===n),o})).length>0&&(be.prepareUpdate(),t.forEach(function(e){e.updateOptions({hideShow3D:!0})}),be.pushUpdate())},re=function(e){return e.getNodeSource()===i.NODE_SOURCE.GROUPING},ae=function(e){return new i({label:c.getNLSValue(e),grid:{},useAsyncPreExpand:!1,referenceType:e+"Node",referencePID:e+"Node",hideShow3D:!0})},se=function(e){return(e=>{const{found:t}=N([e]);return t})(e).filter(e=>!e.isRoot())},V=function(e){var t=this;t.withTransactionUpdate(function(){e.forEach(e=>{t.selectNode(e)})})},L=function(e){var t=this;t.withTransactionUpdate(function(){e.forEach(e=>{t.unSelectNode(e)})})},de=function(e,t,n){var o=l.getReference(e);n&&(ye=0),t.addNode(o,{forceDBMode:!1,isFlatView:n,rootId:e}),n||t.expandAllRoots(),be.reapplyFilterModel()},ue=function(e){const{found:t}=N(e);return t},{listenTo:function(){return{changeSortIndex:this.onChangeSortIndex,Hide:this.onHideRootNode,HideAll:this.onHideAll,visibleNodesChanged:ee,updateRelationsColumn:ne,Filter3DApplied:oe,selectNodes:V,unSelectNodes:L}},onStart:function(t){var n=l.isNavigateOnDemand();v=!!e.is(t.registerRoots)&&t.registerRoots,y=e.is(t.withLinksResolved,"boolean")?t.withLinksResolved:!n,b=e.is(t.displayBadge)?t.displayBadge:null,C=e.is(t.displayBadgeRPL)?t.displayBadgeRPL:null,P=e.is(t.displayBadgePS)?t.displayBadgePS:null,A=be.onPreExpand(j),R=be.onPreCollapse(H),w=be.onPostCollapse(G),M(),E=s.getBehavior("CrossHighlightBehavior"),D=new r,S=!!e.is(t.noExpandServerCall,"boolean")&&t.noExpandServerCall},onStop:function(){be.empty(),e.is(R)&&(this.removeEventListener(R),R=void 0),e.is(w)&&(this.removeEventListener(w),w=void 0),this.removePreExpandListener(),D.destroy(),D=null},removePreExpandListener:function(){e.is(A)&&(this.removeEventListener(A),A=null)},validate:function(t){var n;return e.is(t)&&e.is(B(t.get("PID")))&&((n={}).key="AlreadyRoot",n.param="referenceName",n.paramValue=t.get("V_Name")),n},getNodeModel:function(e,t){return T(e,t)},getNodeInfo:function(t,n){var o,i=null,r=T(t,n);return o=function(e){return{label:e.getLabel(),referencePID:e.getReferencePID(),instancePID:e.getInstancePID(),referenceType:e.getReferenceType(),absPath:e.getAbsolutePath()}},Array.isArray(r)?i=r.map(o):e.is(r,"object")&&(i=o(r)),i},addNodeModel:function(e,t){return x(e,t)},removeNode:function(t,n){var o=[],i=s.getBehavior("TaggerBehavior"),r=function(){var t=s.getBehavior("DropZoneViewBehavior");O()&&e.is(t)&&(t.setIcon(t.iconEnum.DROPHERE),t.show()),e.is(n,"function")&&n()};(e.is(t,"string")?be.searchTree(t):e.is(t,"array")?t:[t]).forEach(function(t){var n,r,a;e.is(i)&&(n=t.getAllDescendants(void 0,!0),e.is(n)&&(o=n.map(function(e){return{PID:e.getID(),Path:e.isRoot(!0)?e.getReferencePID():e.getAbsolutePath().toString(),event:"remove"}})),o.push({PID:t.getID(),Path:t.isRoot(!0)?t.getReferencePID():t.getAbsolutePath().toString(),event:"remove"})),t.isRoot(!0)?(a=t.getID(),be.removeRoot(t),!0===v&&f.removeRoot(s.getId(),a),s.notify("removeRoot",a)):(r=t.getParent())&&r.removeChild(t)}),e.is(i)?i.getNodeUpdatePromise(o).then(r).catch(r):r()},removeNodes:function(e,t){var n;Array.isArray(e)?(n=be.searchTree(e),this.removeNode(n,t)):t()},hideNodes:function(t){var n,o,i=[],r={};e.is(t,"array")&&t.length>0&&(n=s.getBehavior("ExpandFilterBehavior"),e.is(n)&&n.resetFilterUI(),i=t.filter(function(t){return e.is(t)&&t.isRoot(!0)}),r={callback:this.removeNode,globalArray:i,context:this,blockSize:50},be.prepareUpdate(),be.getXSO().empty(!1),l.getExecuteByBlockPromise(r).then(function(){var t=[];be.pushUpdate(),e.is(i,"array")&&i.length>0&&(i.forEach(function(e){var n=l.getReference(e.getID());t.push(n)}),s.notify("hideRootNode",[t])),o=f.getRoots(),e.is(o,"array")&&0===o.length&&l.resetCollections()}))},onHideRootNode:function(){this.hideNodes(be.getSelectedNodes())},onHideAll:function(){this.hideNodes(be.getRoots(!0))},updateCfgColumnsForCommandUpdates:function(e,n){const o=Pe(!0),i=ue(e);(e=>e.length>0)(i)&&Z(()=>(Q(n,i),o(i),t.resolve())).catch(function(e){s.log("Updating Configuration columns failed. Reason: "+e)})},onChangeSortIndex:function(t){var n=be.getTreeNodeModel(t.get("PID"));e.is(n)&&(n.setAttribute("sortIndex",t.get("sortIndex")),n.getParent().sortChildren({isRecursive:!1,sortFunction:function(e,t){return e.options.grid.sortIndex<t.options.grid.sortIndex?-1:1}}))},isSelected:function(t){var n=T(t,!1),o=!1;return e.is(n,"array")&&(o=n.some(function(e){return e.isSelected()})),o},isNodeAdded:function(t){var n=T(t,!0);return e.is(n)},selectNode:function(t){var n=T(t,!1);e.is(n,"array")&&n.forEach(function(e){e.isSelected()&&e.unselect(),e.select()})},unSelectNode:function(t){var n=T(t,!1);e.is(n,"array")&&n.forEach(function(e){e.isSelected()&&e.unselect()})},updateBadge:function(t,n){var o;Array.isArray(t)?(o=be.searchTree(t),e.is(o)&&k(o,n)):e.is(t)&&(o=T(t,!1),e.is(o)&&k(o,n))},getWUXNodeModel:function(){return be},unSelectAll:function(){be.unselectAll()},withTransactionUpdate:function(e){be.withTransactionUpdate(e)},prepareUpdate:function(){be.prepareUpdate()},pushUpdate:function(){be.pushUpdate()},getRoots:function(){return be.getRoots(!0).map(function(e){return e.getReferencePID()})},getRootNodes:function(){return be.getRoots(!0)},getChildren:function(t){var n=T(t,!0),o=[];return e.is(n)&&(o=n.getChildrenPID()),o},getAllDescendants:function(){return be.getAllDescendants(!0)},getVisibleNodesInViewport:function(){var t,n,o,i,r=s.getBehavior("TreeListViewBehavior").getTreeListViewManager(),a=[];if(e.is(r))for(o=(n=r.getDataGridViewLayout().getMinMaxVisibleRowIDs()).minRowID,t=r.getDataGridViewModel();o<=n.maxRowID;o++)i=t[o],re(i)||a.push(i);return a},getSelectedNodes:function(){return be._xso.get()},getHighlightedNodes:function(){return be.getHighlightedNodes()},getSelectedNodesInfo:function(){return this.getSelectedNodes().map(function(e){return{id:e.getID(),absPath:e.getAbsolutePath()}})},update3DNodeOptions:function(e){var t=this.getSelectedNodes();t.length>0&&(be.prepareUpdate(),t.forEach(function(t){t.updateOptions({hideShow3D:e})}),be.pushUpdate())},emptyNodeModel:function(){var t,n=s.getBehavior("ExpandFilterBehavior");if(e.is(n)&&n.clear(),be.prepareUpdate(),e.is(be)){const e=this.getSelectedNodes();Array.isArray(e)&&e.length>0&&be._xso.empty(),be.empty()}be.pushUpdate(),be._numberOfNodesInDocument<1&&(t=s.getBehavior("DropZoneViewBehavior"),e.is(t)&&t.show())},addEventListener:function(e,t){return be.getModelEvents().addEventListener(e,t)},removeEventListener:function(e){be.getModelEvents().unsubscribe(e)},addNode:function(t,n){var o,i,r,a,c,u=n||{},d=e.is(u.loadRootOnly,"boolean")?u.loadRootOnly:s.getPreferenceValue("loadRootOnly"),g=!e.is(u.loadChildren,"boolean")||u.loadChildren,f=!e.is(u.silentMode,"boolean")||u.silentMode,p=e.is(u.withLinksResolved,"boolean")?u.withLinksResolved:y,h=!!e.is(u.doNotExpand,"boolean")&&u.doNotExpand,m=!!e.is(u.forceDBMode,"boolean")&&u.forceDBMode,I=!!e.is(u.updateItem,"boolean")&&u.updateItem,v=e.is(u.onAddToTreeListFail,"function")?u.onAddToTreeListFail:null,b=e.is(u.onAddToTreeListComplete,"function")?u.onAddToTreeListComplete:null,C={noTimeout:!0},P=!!e.is(u.fromXEN,"boolean")&&u.fromXEN,D=!e.is(u.loadRelatedobjectsToView,"boolean")||u.loadRelatedobjectsToView;a=function(t,n){var o="";e.is(n)&&(o=n.getLabel(),g&&!n.isExpanded()&&n.expand(),K(n),s.notify("addRootNode",[n.getID(),{loadRelatedobjectsToView:D}])),s.notify("stopProgress",C),e.is(b,"function")&&b(t,o)},c=function(n){var o=be.getTreeNodeModel(t.get("PID"));s.notify("stopProgress",C),Array.isArray(o)&&o.length>0&&o.forEach(function(e){e&&e.getState()===fe&&(J(e,me),e.options.children=[])}),e.is(v,"function")&&v(n)},(u=e.merge(u,{loadChildren:g,silentMode:f,withLinksResolved:p,forceDBMode:m,updateItem:I,onFailure:c,loadRootOnly:d,fromXEN:P})).isFlatView=!!e.is(u.isFlatView,"boolean")&&u.isFlatView,be.prepareUpdate(),t.isReference()?(s.notify("startProgress",C),u.onEndAddToNodeList=a,W(t.get("PID"),null,u)):t.isInstance()&&(i=l.getAggregatingReferenceModelFromInstance(t),r=l.needToQueryForChildren(i),e.is(i)&&(o=be.searchTree(i.get("PID")),e.is(o)&&o.length>0&&o.forEach(function(e){var n,o={noTimeout:!0};s.notify("startProgress",o),n=e.getState(),W(t.get("PID"),e,u),r?(J(e,pe),h=!0):n===me?Y(e)||(J(e,pe),h=!0):n===pe&&(J(e,pe),h=!0),h||e.isExpanded()||e.expand(),s.notify("stopProgress",o)}))),be.pushUpdate()},addOccurences:function(t){var n,o,i=[],r={},a=[],c=[];n=function(t,n){e.is(r[t])||(r[t]=[]),r[t].push(n)},o=function(t,n){var o=t.getState();e.is(n)&&n===pe?J(t,pe):o===me&&(Y(t)?t.expand():J(t,pe))},t.forEach(function(e){i=i.concat(e.filter(e=>i.indexOf(e)<0))}),be.searchTree(i).forEach(function(t){var o=t.getReferencePID(),i=t.getInstancePID();e.is(o)&&(n(o,t),a.indexOf(o)<0&&a.push(o)),e.is(i)&&c.indexOf(i)<0&&c.push(i)}),t.forEach(function(e){e.forEach(function(t,i){var u,d,g,f,p,h;0===i?(d=e[i],a.indexOf(d)<0?(f=l.getReference(d),h=le(f,{forceIntializeChildren:!0}),J(h,pe),n(d,h),a.push(d),s.notify("addRootNode",[d])):r[d].forEach(function(e){o(e)})):i%2!=0&&(c.indexOf(t)<0?(u=e[i-1],d=e[i+1],g=r[u],f=l.getReference(d),p=l.getInstance(t),g.forEach(function(e){var i=e.getState();h=ce(p,f,e,null,{forceIntializeChildren:!0}),J(h,pe),o(e,i),n(d,h),c.push(t),a.indexOf(d)<0&&a.push(d)})):(d=e[i+1],r[d].forEach(function(e){o(e.getParent())})))})})},updateNode:function(t,n){var o=T(t);n=n||{},e.is(o,"array")&&(be.prepareUpdate(),o.forEach(function(t){e.is(n.loadChildren)&&n.loadChildren&&(_(t,n),(t.isSelected()||t.isRoot(!0))&&t.expand()),K(t)}),be.pushUpdate())},updateAttributes:function(t){var n,o=s.getBehavior("TreeListViewBehavior");e.is(t)?(n=o.getUpdateNodeOptions(t),e.is(n)&&z(t.get("PID"),n),U(t)):s.debug("updateAttributes: Input model is undefined.")},updateDocAttributes:function(t){var n,o=s.getBehavior("TreeListViewBehavior");be.prepareUpdate(),n=o.getDocumentNodeOptions(t),e.is(n)&&z(t,n),be.pushUpdate()},reparent:function(t){var n,o,i,r,a,c,u,d=this,g={},f=function(e,t){return e.add(t)};e.is(t)&&(s.notify("startProgress",g),be.prepareUpdate(),r=t.formerParentsPIDArray,a=t.movedInstPIDArray,Array.isArray(r)&&(c=r.reduce(f,new Set),u=new Set,Array.isArray(a)&&(u=a.reduce(f,u)),c.forEach(function(e){var t;t=T(e),Array.isArray(t)&&t.forEach(function(e){var t=e.getChildren(!0);Array.isArray(t)&&t.filter(function(e){return u.has(e.getInstancePID())}).forEach(function(t){e.removeChild(t)})})})),n=t.newParentPID,o=t.newInstPIDArray,e.is(n,"string")&&(i=T(n),Array.isArray(i)&&(i.forEach(function(e){e.removeChildren()}),Array.isArray(o)&&o.forEach(function(t){var n=l.getInstance(t);e.is(n)&&d.addNode(n)}))),be.pushUpdate(),s.notify("stopProgress",g))},expandNode:function(e){var t=Array.isArray(e)?e:[e];t.length>1&&(t=t.filter(function(e,t,n){return e.getParents().every(function(e){return-1===n.indexOf(e)})})),t.forEach(function(e){e.expandAll()})},collapseNode:function(e){var t,n;(Array.isArray(e)?e:[e]).forEach(function(e){n=e.getState(),e.hasChildren()&&n!==me&&(t=n,e.collapseAll(),t===pe&&(e.removeChildren(),J(e,pe)))})},expandAllRoots:function(){be.getRoots(!0).forEach(function(e){e.expandAll()})},isFilterAppliedInAnyRoot:function(){return be.getRoots(!0).some(function(e){return e.isRootFiltered()})},filterChildren:function(t,n){var o,i=this,r=n||null,a=!!e.is(r),s=a?{filterQuery:r}:{};o=B(t),e.is(o)&&(o.setRootFiltered(a),be.withTransactionUpdate(function(){o.hasChildren()&&o.getChildren(!0).slice().forEach(function(e){i.removeNode(e)}),l.getFilteredInstancesFromCollection(o.getReferencePID(),r).forEach(function(e){i.addNode(e,s)}),a?l.needToQueryForChildren(o.getReferencePID())&&o.getState()===pe&&J(o):l.needToQueryForChildren(o.getReferencePID())&&o.getState()!==pe&&J(o,pe)}))},removeFilterFromAllRoots:function(){var t,n=this;return t=be.getRoots(!0).filter(function(e){return e.isRootFiltered()}),be.prepareUpdate(),t.forEach(function(e){e.setRootFiltered(!1)}),Ce.traverseTreeListView(function(t){t.getState()===me&&(t.getChildren(!0).slice().forEach(function(e){n.removeNode(e)}),e.is(t.options.children)||(t.options.children=[])),J(t,pe)}),be.pushUpdate(),t.map(function(e){return e.getReferencePID()})},isDocumentEmpty:function(){return O()},setTaggerColor:function(e,t){var n;Array.isArray(e)&&(n=N(e).found,Array.isArray(n)&&n.length>0&&(be.prepareUpdate(),n.forEach(function(e){e.updateOptions({color:t.color})}),be.pushUpdate()))},getMutex:function(){return D},updateNodeOptions:function(t,n){var o;(o=N(t).found).length>0&&(be.prepareUpdate(),o.forEach(function(t){var o=e.clone(n);t.updateOptions(o)}),be.pushUpdate())},setSortOptions:function(e,t){Ie.virtualColumnID=e,Ie.sortOrder=t},isFakeNodeModel:function(e){return re(e)},getGroupingNode:function(e){return ae(e)},addGroupingNode:function t(n,o,r,a,u){var d,g=[],f=s.getBehavior("TreeListViewBehavior");return e.is(r)&&r.length>0?(g=r.map(function(e){var t;return t=e.isReference()?f.getReferenceNodeOptions(e):f.getInstanceNodeOptions(l.getReferenceModelFromInstance(e),e),new i(t)}),d=new i({label:c.getNLSValue(n),children:g,grid:{},useAsyncPreExpand:!1,referenceType:n+"Node",referencePID:n+"Node",hideShow3D:!1}),o.addChild(d)):e.is(a)&&a?(d=new i({label:c.getNLSValue(n),grid:{},icons:[c.getIconURLFromKey(u)]}),o.addChild(d)):(d=ae(n),o.addChild(d),Object.keys(r).forEach(function(e){t(e,d,r[e])})),d.isExpanded()||d.expand(),d},addNodeToGroupNode:function(e,t,n){var o,r;return o=s.getBehavior("TreeListViewBehavior").getReferenceNodeOptions(e),r=new i(o),t.addChild(r,n),r},getTreeDocument:function(){return be},showOverlay:function(){var t,n,o=c.getNLSValue("View.WaitMessage"),i=s.getBehavior("TreeListViewBehavior");if(e.is(i)){for(t=i.getDataGridView();ve.length>0;)ve.shift().resolve();n=e.Promise.deferred(),ve.push(n),t.displayModalLoader(o,function(){n.promise.then(function(){t.removeModalLoader(o)})})}},removeOverlay:function(){1===ve.length&&ve.shift().resolve()},updateNodeState:function(e,t){J(e,t)},getWhereUsedInstanceIds:function(e){return se(e).map(e=>e.getInstancePID())},getWhereUsedInstanceIdsUnderParent:function(t){let n=[];const o=T(t);if(Array.isArray(o)&&o.length>0){const i=o.filter((t=>n=>e.equals(n.getAbsolutePath(),t))(t));if(1===i.length){const e=i[0];n=(e=>e.getBrothers())(e).concat(e).filter((e=>t=>t.getReferencePID()===e)(e.getReferencePID())).map(e=>e.getInstancePID())}}return n},resetConfigColumns:function(){const n=Pe(!1),o=(t,o)=>{const i=t.filter(t=>e.owns(t.options,"areCfgColumnsFilled"));i.length>0&&n(i),e.is(o,"function")&&o()},i=this;(e=>new t(n=>{Z(()=>(e=>new t(t=>{const n={callback:o,globalArray:e,context:null,blockSize:100};l.getExecuteByBlockPromise(n).then(()=>{t()}).catch(()=>{t()})}))(e)).then(function(){n()}).catch(function(e){s.log("Resetting Configuration columns failed. Reason: "+e),n()})}))(i.getAllDescendants()).then(function(){te(i.getVisibleNodesInViewport())})},getFlattenNodeModel:function(t,n){var o=this;e.is(t)&&t.forEach(function(e){de(e,o,n)})}}}}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/StructuralGroupingImplementation",["UWA/Core","DS/DELPPWViewBehaviors/GroupingViewBehavior/AbstractGroupingClass"],function(e,t){"use strict";return function(n,o){var i,r,a,s,l,c,u=new t,d=n.getBehavior("TreeListViewBehavior"),g=n.getBehavior("WUXNodeModelBehavior");n.getBehavior("SelectionBehavior");return i=function(e,t){var n=t;!function e(t){var i=t.getInstancePID()||t.getReferencePID();Object.keys(n).filter(function(e){return n[e].parent===i}).forEach(function(i){var r,a,s,l=n[i],c=n[i].groupingValue;s=l.children.map(function(e){return o.getInstance(e)}),r=i.split("|")[1],(a=g.addGroupingNode(r,t,s,c)).hasChildren()&&a.getChildren().forEach(function(t){e(t)})})}(e)},r=function(e,t){var n;d.loadDocument(g.getWUXNodeModel()),g.addNode(t,{onAddToTreeListFail:function(){},onAddToTreeListComplete:function(){},fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1}),n=g.getNodeModel(t.get("PID"),!0),i(n,e),g.expandAllRoots()},a=function(t,n){var o={};return t.forEach(function(t){var i=n(t);e.is(o[i])?o[i].push(t):o[i]=[t]}),o},l=function(e,t,n,i,r){var s,l,c,u,d,g=e,f=g,p=[];!function e(t,n){o.getInstancesFromCollection(t).forEach(function(t){n.push(t),d=o.getReferenceIdFromInstance(t.get("PID")),e(d,n)})}(g,p),p.length>0&&(s=a(p,i),Object.keys(s).forEach(function(e){c=s[e][0],l=f+"|"+r(c)+" ("+s[e].length+")",u=[],s[e].forEach(function(e){u.push(e.get("PID"))}),t[l]={parent:n?g:void 0,children:u,groupingValue:e}}))},s=function e(t,n,i,r,s){var l,c,u,d,g,f,p=t,h=p;i||(p=o.getReferenceIdFromInstance(t),h=f=t),(u=o.getInstancesFromCollection(p)).length>0&&(l=a(u,r),Object.keys(l).forEach(function(e){d=l[e][0],c=h+"|"+s(d)+" ("+l[e].length+")",g=[],l[e].forEach(function(e){g.push(e.get("PID"))}),n[c]={parent:i?p:f,children:g,groupingValue:e}}),u.forEach(function(t){e(t.get("PID"),n,!1,r,s)}))},c=function(t,i,a){var c={},u=n.getBehavior("GroupingViewBehavior");e.is(u)&&u.isFlatView()?l(t,c,!0,i,a):s(t,c,!0,i,a),r(c,o.getReferenceModel(t))},e.extend(u,{group:function(t,o,i){var r;r=g.getWUXNodeModel(),e.is(r)&&r.removeRoots(),d.loadDocument(r),e.is(i)?c(i,t,o):n.debug("GroupingViewBehavior._groupingPID is not set")},ungroup:function(){}})}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXGenericLinksDragDrop",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop"],function(e,t){"use strict";return function(e,n,o,i,r,a,s,l){var c,u=new t(e,n,o,i,r,a,s,l),d=u.init;return u.init=function(e){c=e||{},d.call(this,c)},u.onDragEndCell=function(e,t){return!1},u.onDragEnterRowHeader=function(e,t){return!1},u.onDragLeaveRowHeader=function(e,t){return!1},u.onDragEnterColumnHeader=function(e,t){return!1},u.onDragLeaveColumnHeader=function(e,t){return!1},u.onDragEnterCell=function(e,t){return!1},u.onDragLeaveCell=function(e,t){return!1},u.onDragOverCell=function(e,t){return!1},u.onDragEnterBlank=function(e,t){return!1},u.onDragLeaveBlank=function(e,t){return!1},u.onDropCell=function(e,t){return n.warn(o.getNLSValue("AbstractDragAndDropManager.NotAuthorized")),!1},u.onDropBlank=function(e,t){return n.warn(o.getNLSValue("AbstractDragAndDropManager.NotAuthorized")),!1},u}}),define("DS/DELPPWViewBehaviors/TreeListViewBehavior/TreeListViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu","DS/DELPPWViewBehaviors/TreeListViewBehavior/ColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXActionDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXGenericLinksDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXManageCapableRscDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/WUXDataCollectRowDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/Documents/DocumentsUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/OperationTime/OperationTimeUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/ToolTipManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/DataGridViewManager"],function(e,t,n,o,i,r,a,s,l,c,u,d,g){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ImplementPlugin","PlatformPlugin","SelectionPlugin"],creator:function(f,p,h,m,I,v,y,b,C,P,D,S,A,R,w){var V,L,E,M,T,N,B,O,x,F,k,U,W,_,j,H,G,X,z,K,q,Q,J,Y,Z,$,ee,te,ne,oe,ie,re,ae,se,le,ce={},ue=new l(p,I,b,A,h,R),de=new c(p,I,C),ge=new u(p,y,I,v),fe=m.getComponent("DataGridView"),pe=new d(p,P,h,I,v,y),he={placeholder:"",apiVersion:2,showSelectionCheckBoxesFlag:!0,rowSelection:"multiple",cellSelection:"none",showRowIndexFlag:!1,defaultColumnDef:{sortableFlag:!0,editionPolicy:"EditionOnDoubleClick",typeRepresentation:"string"},isEditable:!1,selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",rowGroupingOptions:{depth:0,hideGroupedColumns:!1},getCellTooltip:function(t){var n,o,i,r,a=this.getColumnOrGroup(t.columnID),s={longHelp:""},l=[],c=y.getAttributeInfoFromColumn(a),u=v.getAttributeInfo(c.attributeName),d=t.cellModel;if(!t.isHeader&&e.is(t.nodeModel)&&!e.is(t.nodeModel.getReferencePID))return s;switch(!e.is(a.displayType)&&e.is(c)&&y.isMultiValuated(u)&&(a.displayType="Multivalue"),a.displayType){case"URL":!t.isHeader&&e.is(t.cellModel)?s.longHelp=t.cellModel.label:s.longHelp=t.cellModel;break;case"MIL":i=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?s.longHelp="object"===e.typeOf(i)?i.getLabel():i:(r=t.nodeModel.options.grid[t.dataIndex],s.longHelp=e.is(r)?e.is(r.tooltip)?r.tooltip:r.getLabel():"");break;case"RWU":i=t.cellModel,t.isHeader||"RWU_Action"!==t.dataIndex?s.longHelp="object"===e.typeOf(i)?i.getLabel():i:(r=t.nodeModel.options.grid[t.dataIndex],s.longHelp=e.is(r)?e.is(r.tooltip)?r.tooltip:e.is(r.getLabel)?r.getLabel():"":"");break;case"CIM":i=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?s.longHelp="object"===e.typeOf(i)?i.getLabel():i:(r=t.nodeModel.options.grid[t.dataIndex],s.longHelp=e.is(r)?e.is(r.tooltip)?r.tooltip:r.getLabel():"");break;case"Relation":case"Multivalue":if("Multivalue"!==a.displayType||t.isHeader||(d=y.getValueAsArray(t.nodeModel.options.grid[t.dataIndex])),"Relation"!==a.displayType||t.isHeader||(d=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(d)&&0!==d.length){for(y.isDate(u)&&(d=d.map(function(e){return y.getFormattedDate(e)})),o=0;o<d.length;o++)n=d[o],l.push(e.is(n.Value)?n.Value:n);s.longHelp=y.getValueAsString(l,y.getType(u)).split(p.getPreferenceValue("separator")).join("\n")}else t.isHeader&&(s.longHelp=d);break;case"DocMgmt":if(t.isHeader||(d=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(d)&&0!==d.length){l=d.reduce((e,t)=>("Reference Document"===t.type?e.Attachments.push(t.title):e.Specifications.push(t.title),e),{Specifications:[],Attachments:[]});let e="";for(const[t,n]of Object.entries(l))Array.isArray(n)&&n.length>0&&(e+=t+":",n.forEach(t=>{e+="\n\t"+t}),e+="\n");s.longHelp=e}else t.isHeader&&(s.longHelp=d);break;case"hideShow3D":t.isHeader?s.longHelp=h.getNLSValue("HideShow3D.tooltip"):(i=t.cellModel,e.is(i,"boolean")&&(s.longHelp=i?h.getNLSValue("HideShow3D.hide3D"):h.getNLSValue("HideShow3D.show3D")));break;case"BIEssentials":case"BIEssentialsAltSub":t.isHeader?s.longHelp=t.cellModel:(i=t.nodeModel.options[t.dataIndex],s.longHelp=e.is(i)?i.tooltip:"");break;default:i=t.cellModel,t.isHeader||(e.is(i)?"object"===e.typeOf(i)?i=i.getLabel():y.isBoolean(u)?i="TRUE"===i?h.getNLSValue("TRUE"):h.getNLSValue("FALSE"):y.isDate(u)?i=y.getFormattedDate(i):y.hasRangeDefined(u)?i=t.cellModel:(y.isDouble(u)||y.isInteger(u))&&(i=y.getValueAsString(i,y.getType(u))):i=""),s.longHelp=i}return!t.isHeader&&e.is(t.nodeModel)&&(i=pe.getTooltipValue(t),e.is(s.longHelp)&&(s.longHelp+=s.longHelp.length>0&&i.length>0?"\n\n":"",s.longHelp+=i)),s},getCellEditableState:function(e){var t,n=!0;return!0===e.isHeader?n=!1:"selection"===e.dataIndex?n=!0:(t=y.getNodeAndColumnInfos(e.nodeModel,e.parent.options.columns[e.virtualColumnID]),n=!y.isReadOnly(t.attributeInfo,t.attributeDef)),n}};return G=function(l){var c;if(F=e.is(l.columnConfig)?l.columnConfig:S.getViewColumnPreferences(p.getId(),N),U=(l=l||{}).dataGridViewOptions?e.extend(he,l.dataGridViewOptions,!0):he,!e.is(F))throw new Error("_createTreeListView options not defined");if(U.contextualCommands&&(j=new n(p,m,h,y,R,I,S,v,A),U.onContextualEvent=function(t){var n,o,i,r,a=this,s=[],l={};if(e.is(t.cellInfos)&&(n=(i=t.cellInfos).nodeModel,r=i.manager,e.is(i.rowID))){if(-1===i.rowID)e.is(U.headerContextualCommands)&&(o=a.getColumnOrGroup(i.columnID),(l={node:n,selectedNodes:a.getTreeDocument().getXSO().get(),column:o,virtualColumnID:i.columnID,dataIndex:o.dataIndex,manager:r,handlers:{onSizeColumnToFit:function(e){r.sizeColumnToFit(e)},onSortColumnContentAsc:function(){r.sortColumn(o.dataIndex,"asc")},onSortColumnContentDesc:function(){r.sortColumn(o.dataIndex,"desc")},onClearSort:function(){r.clearSort()},onHideColumn:function(e){S.updateViewPreferences(p.getId(),o.dataIndex,{visibility:!1}),a.hideColumn(e,{isUserInteraction:!1})},onGroupRows:function(e,t){var n;S.doesModuleHaveRecursiveGrouping(p.getId())?(n=o.dataIndex!==e?a.getColumnOrGroup(r.getColumnIndexByDataIndex(e)):o,ie(n)):ee(e,t)},onRemoveGrouping:function(){S.doesModuleHaveRecursiveGrouping(p.getId())?re():te()},onGroupByCriteria:function(e){p.getBehavior("GroupingViewBehavior").group(e)},onUngroupByCriteria:function(e){p.getBehavior("GroupingViewBehavior").ungroup(e)}}}).params=t,s=j.buildContextualMenu(U.headerContextualCommands,l),"selection"===i.dataIndex||"taggerColor"===i.dataIndex||"hide_show_3D"===i.dataIndex?s.forEach(function(e){e.state="disabled"}):"tree"===i.dataIndex&&s.forEach(function(e){"Hide"===e.title&&(e.state="disabled")}));else if(0<=i.rowID){if(!e.is(n.getReferencePID))return;e.is(n)&&(n.isSelected()||n.select()),o=a.getColumnOrGroup(i.columnID),(l={node:n,selectedNodes:a.getTreeDocument().getXSO().get(),column:o,getColumnIDFromDataIndex:function(e){return r.getColumnIndexByDataIndex(e)},getColumnOrGroup:function(e){return i.cellView.collectionView.getColumnOrGroup(e)},handlers:{onGroupRows:function(e,t){ee(e,t)},onRemoveGrouping:function(){te()}}}).infos=y.getNodeAndColumnInfos(n,o),s=j.buildContextualMenu(U.contextualCommands,l)}return s}}),e.is(l.dataGridViewOptions)&&e.is(l.dataGridViewOptions.enableDragAndDrop,"boolean")&&!0===l.dataGridViewOptions.enableDragAndDrop){switch(U.cellDragEnabledFlag=!0,U.rowDragEnabledFlag=!0,c={acceptedTypes:l.pprTypes,pprTypesWithSupportedViews:e.is(l.pprTypesWithSupportedViews)?l.pprTypesWithSupportedViews:[]},l.dragDropManager){case"WUXActionDragDrop":c=e.extend(c,{linkTypes:l.linkTypes}),T=new i(f,p,h,I,v,P,D,R);break;case"WUXGenericLinksDragDrop":c=e.extend(c,{linkTypes:l.linkTypes}),T=new r(f,p,h,I,v,P,D,m);break;case"WUXManageCapableRscDragDrop":c=e.extend(c,{linkTypes:l.linkTypes}),T=new a(f,p,h,I,v,P,D,m);break;case"WUXDataCollectRowDragDrop":c=e.extend(c,{linkTypes:l.linkTypes}),T=new s(f,p,h,P,I);break;default:T=new t(f,p,h,I,v,P,D,R)}T.init(c),U=e.extend(U,T.getDDBehavior())}E=new o(f,p,k,_,I,v,y,h,m,b,S,w),W=E.createTreeListViewColumns(F,U.showTagger,U.showSelection,U.show3DHideShow)},H=function(t){var n,o,i=p.getPreferenceValue("separator");if(M=t,e.is(W)&&e.is(W.columns,"array")?U.columns=W.columns:U.columns=[],e.is(V))V.setProperties({columns:U.columns});else{U.treeDocument=t,V=new fe(U),L=new g(V),V.registerColumnsEnum();const n=p.getBehavior("CfgColumnsBehavior");if(e.is(n)){const e=n.getRequiredTypeRepresentations();V.registerColumnTypeRepresentations(e)}}if(e.is(U.toolbarOptions)&&Array.isArray(U.toolbarOptions.items)&&V.setToolbar(ae(U.toolbarOptions.items)),F.Label)if("Auxiliary"===F.name&&e.is(F.Label.length)){for(V._treeDataIndex="",V._label="",V._types="",o=0;o<F.Label.length;o++)V._treeDataIndex+=o<F.Label.length-1?F.Label[o].dataIndex+i:F.Label[o].dataIndex,V._label+=o<F.Label.length-1?F.Label[o].dataIndex.split(".")[0]+i:F.Label[o].dataIndex.split(".")[0],V._types+=o<F.Label.length-1?F.Label[o].type+i:F.Label[o].type;V._labelIsOnRef=!0,V.isMultipleLabel=F.Label.length>1}else V._treeDataIndex=F.Label.dataIndex,V._label=W.label,V._labelIsOnRef=W.labelIsOnRef,V.isMultipleLabel=!1;e.is(U.setReusablecontent)&&!1===U.setReusablecontent||E.setReusablecontent(V),n=E.getBlockAttributes(F),I.setSelectPredicate(p.getId(),n)},z=function(t){var n,o,i,r,a,s,l,c=t.type,u={icons:"",label:"",grid:{},useAsyncPreExpand:!0},d=p.getPreferenceValue("separator"),g=E.getColumnsDataIndex(V);if(V._labelIsOnRef){if(a="VPMReference"===c&&(e.is(t.V_usage,"array")&&t.V_usage.includes("3DPart")||e.is(t.V_usage,"string")&&"3DPart"===t.V_usage)?h.getIconURLFromKey("3DPart"):h.getIconURLFromKey(c),u.icons=[a],u.label="",e.is(V.isMultipleLabel)&&V.isMultipleLabel)for(i=V._label.split(d),r=V._types.split(d),l=0;l<i.length;l++)e.is(t.type)&&("undefined"===r[l]||"undefined"!==r[l]&&v.isAKindOf(t.type,r[l]))&&(s=""===u.label?"":d,e.owns(t,i[l])&&e.is(t[i[l]])&&(u.label+="NULL"!==t[i[l]]?s+t[i[l]]:""));e.owns(t,V._label)&&(u.label="NULL"!==t[V._label]?t[V._label]:"")}for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o=t[n],e.is(o)&&"NULL"!==o&&(g&&g.indexOf(n+".reference")>=0?u.grid[n+".reference"]=t[n]:"PID"===n&&(u.referencePID=t[n]),"type"===n&&(u.referenceType=t[n]),"defType"===n&&(u.defType=o)));return ue.fillNodeOptions(u,g),de.fillNodeOptions(u,g),ge.fillNodeOptions(u,g),e.is(ce.show3DHideShow)&&!0===ce.show3DHideShow&&(u.hideShow3D=!0),u},X=function(t,n,o){var i,r,a=E.getColumnsDataIndex(V),s=z(t);for(i in!V._labelIsOnRef&&e.owns(n,V._label)&&(s.label="NULL"!==n[V._label]?n[V._label]:""),n)Object.prototype.hasOwnProperty.call(n,i)&&(r=n[i],e.is(r)&&"NULL"!==r&&(a&&a.indexOf(i+".instance")>=0?s.grid[i+".instance"]=n[i]:"PID"===i?s.instancePID=n[i]:"V_TreeOrder"===i&&(s.grid.V_TreeOrder=parseFloat(n[i]))));return ue.fillNodeOptions(s,a,n,o),s},K=function(t){var n,o,i,r=t.changedAttributes(),a=t.isInstance()?".instance":".reference",s=V._labelIsOnRef?".reference":".instance",l=E.getColumnsDataIndex(V),c={};if(!t.isConnection()&&e.is(r)){for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=n+a,-1!==l.indexOf(i)&&(c[i]="NULL"!==r[n]?r[n]:"",ge.fillUpdatedNodeOptions(c,l,t,n)),n===V._label&&s===a&&(o="NULL"!==r[n]?r[n]:""));return{label:o,attributes:c}}},q=function(){var e,t,n=[],o=L.getNumberOfRows();for(e=0;e<o;e++)t=L.getTreeNodeModelFromRowID(e),n.push(t.getReferencePID());return n},Q=function(){var t,n,o,i,r,a,s,l,c,u;if(O)for(o=S.getViewColumnPreferences(p.getId()),n=e.is(o)?o.Columns.Column:[],r=V.getColumnIndexByDataIndex("tree")+1,t=0;t<n.length;t++)l={},(i=n[t]).isHidden?V.isColumnHidden(i.dataIndex)||V.hideColumn(i.dataIndex):(u=isNaN(i.width)?"auto":parseInt(i.width),V.getColumnWidth(i.dataIndex)!==u&&(l.width=u),u=isNaN(i.minWidth)?"100":parseInt(i.minWidth),V.getColumnMinWidth(i.dataIndex)!==u&&(l.minWidth=u),V.isColumnHidden(i.dataIndex)&&(l.visibleFlag=!0),e.Object.keys(l).length>0&&V.layout.setColumnOrGroupProperties(i.dataIndex,l),c=V.getColumnIndexByDataIndex(i.dataIndex),s=V.layout.getOrderedColumnsReverseIndexes(),a=V.layout.getOrderedColumnsIndexes(),s[c]!==r&&V.moveColumn(i.dataIndex,a[r])),r++},J=function(e){var t,n,o="";for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?o+=String.fromCharCode(n):n>127&&n<2048?(o+=String.fromCharCode(n>>6|192),o+=String.fromCharCode(63&n|128)):(o+=String.fromCharCode(n>>12|224),o+=String.fromCharCode(n>>6&63|128),o+=String.fromCharCode(63&n|128));return o},Y=function(e){return'"'+J(e).replace(/"/g,'""')+'"'},Z=function(e){U.showTagger&&V.updateNodeKPIColor(e)},$=function(t){var n,o,i=[],r=t.collectionView;if(t.startNodeIndex>=0&&t.endNodeIndex>=0){for(n=t.startNodeIndex;n<=t.endNodeIndex;n++)o=r.model[n],e.is(o)&&i.push(o);i.length>0&&p.notify("visibleNodesChanged",[p.getId(),i])}},ne=function(t){var n=S.getColumnsForGrouping(p.getId());((t=!!e.is(t,"boolean")&&t)||n.length>0)&&V.groupRows({dataIndexesToGroup:n})},oe=function(t){var n;e.is(t.options)&&t.options.updateType===WUXModelUpdateTypes.Grouping&&(S.isGroupingExist()||p.notify("manageCommandsOnGrouping"),n=S.getColumnsForGrouping(p.getId()),e.is(B)&&0===n.length&&(p.getBehavior("WUXNodeModelBehavior").removeEventListener(B),B=void 0))},ee=function(t,n){var o;S.getColumnsForGrouping(p.getId(),!0).length>0&&V.rowGroupingOptions.depth!==n?p.warn(h.getNLSValue("TableView.InvalidGrouping")):(e.is(B)||(o=p.getBehavior("WUXNodeModelBehavior"),e.is(o)&&(B=o.addEventListener("pushUpdate",oe))),V.rowGroupingOptions.depth=n,S.addColumnForGrouping(p.getId(),t),ne(),p.notify("manageCommandsOnGrouping"))},te=function(){S.resetColumnsForGrouping(p.getId()),ne(!0)},ie=function(t){var n,o=p.getBehavior("GroupingViewBehavior"),i=t.dataIndex;e.is(o)&&!0===t.groupableFlag&&(S.resetColumnsForGrouping(p.getId()),S.addColumnForGrouping(p.getId(),i),"tree"===i&&(i=E.getLabelColumnDataIndex()),i.endsWith(".group")&&(i=S.getCollectionSpecificDataIndex(i)),n={dataIndex:i,title:t.text},o.group(n))},re=function(){var t=p.getBehavior("GroupingViewBehavior");e.is(t)&&(S.resetColumnsForGrouping(p.getId()),t.clearGrouping())},ae=function(t){return{entries:t.map(function(t){var n,o=h.getIconURLFromKey(t.icon);return e.is(t.tooltip)&&(n={title:h.getNLSValue(t.tooltip.title),shortHelp:h.getNLSValue(t.tooltip.shortHelp)}),{id:t.id,dataElements:{typeRepresentation:e.is(t.typeRepresentation)?t.typeRepresentation:"functionIcon",position:e.is(t.position)?t.position:"far",category:e.is(t.category)?t.category:"0",icon:{iconPath:o,iconSize:{width:"22px",height:"22px"}},value:se.bind(null,t.id),disabled:!!e.is(t.disabled)&&t.disabled,tooltip:n}}})}},se=function(t,n){e.is(U.toolbarOptions.actionHandler,"function")?U.toolbarOptions.actionHandler.call(null,t,n):e.is(j)&&j.onContextMenuCallback(t)},le=function(t){var n;t=Array.isArray(t)?t:[t],V&&(n=V.getToolbar(),e.is(n)&&n.items.getChildren().forEach(function(e){var n=e.options.id,o=t.indexOf(n);e.updateOptions({disabled:-1===o})}))},{viewName:"treeListView",listenTo:function(){return{TreeViewPrefModified:Q,LoadDropContent:this.processDropContent}},onStart:function(t,n){t=t||{},e.is(t.pprTypes)&&e.is(t.columnConfigName)&&(e.is(t.hasReadOnlyTypes,"boolean")&&t.hasReadOnlyTypes&&(he.defaultColumnDef.getCellEditableState=function(t){let n=null;return e.is(t)&&e.is(t.nodeModel)&&e.is(t.nodeModel.object)&&(n=t.nodeModel.object.type||null),(!e.is(n)||!v.isReferencesHasReadOnlyType(n))&&V.getColumnOrGroup(t.dataIndex).editableFlag}),e.is(t.views)&&e.is(t.views.treeListView)&&(ce=t.views.treeListView,Object.prototype.hasOwnProperty.call(ce,"show3DHideShow")&&R.isSuppressHideShow3DColumn()&&(ce.show3DHideShow=!1)),e.is(t.views.treeListView.toolTipConfigXML)&&pe.init(t.views.treeListView.toolTipConfigXML),N=t.columnConfigName,(O=!!e.is(t.registerViewPreference)&&t.registerViewPreference)&&S.registerViewforColumnPref({viewID:p.getId(),columnConfigName:t.columnConfigName,viewIcon:t.moduleIcon}),k=Array.isArray(t.columnsBeforeTitle)?t.columnsBeforeTitle:null,!!e.is(t.immutableColumns,"boolean")&&t.immutableColumns&&S.registerModuleColumnsAsImmutable(p.getId()),_=!!e.is(t.noActiveCellChange,"boolean")&&t.noActiveCellChange,G({pprTypes:t.pprTypes,dataGridViewOptions:e.merge(ce,{isEditable:!!e.is(t.isAuthoringAllowed)&&t.isAuthoringAllowed}),dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,pprTypesWithSupportedViews:Array.isArray(t.pprTypesWithSupportedViews)?t.pprTypesWithSupportedViews:null}),!0===(x=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&S.registerViewforWidgetLayout({viewID:p.getId(),viewType:this.viewName})),n()},onStop:function(){e.is(V)&&V.remove(),O&&S.unRegisterViewforColumnPref(p.getId()),!0===x&&S.unregisterViewforWidgetLayout(p.getId(),this.viewName)},has3DHideShowColumn:function(){return!!e.is(ce.show3DHideShow,"boolean")&&ce.show3DHideShow},createTreeListView:function(t){var n,o,i="",r=ce;t=t||{},e.is(t.dataGridViewOptions.identifier)&&(i=t.dataGridViewOptions.identifier),e.is(t.columnConfig)&&(o=t.columnConfig),e.is(t.dataGridViewOptions)&&(r=t.dataGridViewOptions),G({columnConfig:o,pprTypes:t.pprTypes,dataGridViewOptions:r,dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,identifier:i}),e.is(t.treeDocument)&&(H(t.treeDocument),e.is(V.onDelayedModelDataRequest,"function")||(V.onDelayedModelDataRequest=$),e.is(t.treeListViewContainer)&&V.getContent().inject(t.treeListViewContainer),e.is(t.toolbarContainer)&&(n=V.getToolbar(),e.is(n)&&n.getContent().inject(t.toolbarContainer)))},getColumnsByDisplayType:function(e){var t,n,o=[],i=E.getColumnDataIndexByDisplayType(V,e),r=i.length;for(t=0;t<r;t++)n=i[t],o.push(n.split(".")[0]);return o},loadDocument:function(t){H(t),e.is(V.onDelayedModelDataRequest,"function")||(V.onDelayedModelDataRequest=$)},getContent:function(){var t=void 0;return e.is(V)&&(t=V.getContent()),t},manageColumn:function(t,n){if("taggerColor"!==t)return e.is(V)&&e.is(E)?E.manageColumn(V,t,n):void 0;Z(n.visible)},processDropEffect:function(e){return T.processDropEffect(e)},processDropContent:function(e,t){var n=new Event("Drag");return n.dataTransfer=new DataTransfer,n.dataTransfer.setData("Text",e),T.onTreeListViewDrop(n,t)},getTreeListViewManager:function(){var t=null;return e.is(L)&&(t=L),t},getLabelAttribute:function(){return V._label},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=z(t.toJSON())),n},getInstanceNodeOptions:function(t,n,o){var i;return e.is(t)&&e.is(n)&&(i=X(t.toJSON(),n.toJSON(),o)),i},getRelationNodeOptions:function(e,t){var n=E.getColumnsDataIndex(V);return ue.getRelationAttributes(e,n,t)},getDocumentNodeOptions:function(e){var t=E.getColumnsDataIndex(V);return{attributes:de.getDocumentNodeOptions(e,t)}},getUpdateNodeOptions:function(t){var n;return e.is(t)&&(n=K(t)),n},getVisibleTableContentAsCSV:function(e){return J(V.getAsCSV({columnSeparator:e,addLevelInformation:!0,allColumns:!1,forceQuotes:!0}))},getConfiguredAttributesAsCSV:function(t,n){var o,i,r,a,s,l=[],c="";function u(e,n){var o,i;for(o=t[n].Attribute,i=0;i<o.length;i++)if((a=o[i].name)===e)return!0;return!1}for(o in t)if(Object.prototype.hasOwnProperty.call(t,o))for(i=t[o].Attribute,r=0;r<i.length;r++)a=i[r].name,-1===l.indexOf(a)&&l.push(a);for(s=0;s<l.length;s++)0!==s&&(c+=n),c+=Y(l[s]);return c+="\r\n",q().forEach(function(i){var r,a,d;if(r=I.getReference(i),e.is(r)&&function(e){return Object.prototype.hasOwnProperty.call(t,e)}(o=r.get("type"))){for(s=0;s<l.length;s++)0!==s&&(c+=n),d=u(a=l[s],o)&&e.is(r.get(a))?String(r.get(a)):"",c+=Y(d);c+="\r\n"}}),c},isInverseRelationColumnPresent:function(){var t,n=!1,o=b.getInverseRelationNameSet();return o.size>0&&e.is(E)&&(t=E.getColumnsDataIndex(V),e.is(t,"array")&&(n=t.some(function(e){return o.has(e)}))),n},getDataGridView:function(){return V},getTreeDocument:function(){return M},getToolBarContent:function(){var e,t=null;return V&&(e=V.getToolbar())&&(t=e.getContent()),t},enableToolBarItems:function(e){le(e)}}}}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/ProcurementGroupingImplementation",["DS/DELPPWViewBehaviors/GroupingViewBehavior/AbstractGroupingClass","UWA/Core"],function(e,t){"use strict";return function(n,o,i,r){var a,s,l,c=n.getBehavior("TreeListViewBehavior"),u=n.getBehavior("WUXNodeModelBehavior"),d=(n.getBehavior("SelectionBehavior"),function(e,n){var o=function(){},i=function(){};c.loadDocument(u.getWUXNodeModel()),u.addNode(n,{onAddToTreeListFail:o,onAddToTreeListComplete:i,fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1}),t.is(e,"array")&&e.length>0?e.forEach(function(e){u.addNode(e,{onAddToTreeListFail:o,onAddToTreeListComplete:i,fromXEN:!0,forceDBMode:!1,loadRootOnly:!1,loadChildren:!1,doNotExpand:!1})}):(function(e,t){var n=t;!function e(t){var o=t.getInstancePID()||t.getReferencePID();Object.keys(n).filter(function(e){return n[e].parent===o}).forEach(function(n){var o,i,r;o=n.split("|")[1],i=n.split("|")[2],(r=u.addGroupingNode(o,t,null,!0,i)).hasChildren()&&r.getChildren().forEach(function(t){e(t)})})}(e)}(u.getNodeModel(n.get("PID"),!0),e),u.expandAllRoots())}),g=function(e){var t,n=!1,o="",i=!1,r=Object.keys(e);if(e.length>0&&(n=!0),r.length>0)for(t=0;t<r.length;t++)Number.isNaN(Number.parseInt(r[t]))&&(i=!0);return n&&i||!n&&!i?o="error":n?o="array":i&&(o="json"),o},f=function(e){var t=null,n=null;return l=e,i.isReference(l)?t=i.getAllChildrenFromCollection(l):(n=i.getReferenceIdFromInstance(l),t=i.getAllChildrenFromCollection(n)),i.getReferencesFromArray(t.referencesPID)},p=function(e,n){var o;return l=e,o=f(e),s=function e(n,o,i){var r,a,s,l={};if(t.is(n))t.is(n,"array")&&0!==n.length?(n.forEach(function(e){var n=e.get(o);t.is(l[o+":"+n])?l[o+":"+n].push(e):l[o+":"+n]=[e]}),n=l):Object.keys(n).forEach(function(t){var r="";t.contains(":")&&(r=t.split(":")[0]),"root"!==t&&r!==o&&(n[t]=e(n[t],o,i))});else for((n={}).root=i[0],r=1;r<i.length;r++)a=(s=i[r]).get(o),t.is(n[o+":"+a])?n[o+":"+a].push(s):n[o+":"+a]=[s];return n}(s,n,o)},h=function(e,n,o,r){var a,s,l,c,u,d,g=[],f=e,p=f;i.traverseInstanceModels(f,function(e){g.push(e)}),g.length>0&&(a=function(e,n){var o={};return e.forEach(function(e){var i=n(e);t.is(o[i])?o[i].push(e):o[i]=[e]}),o}(g,o),Object.keys(a).forEach(function(e){l=a[e][0],u=r(l).split("|")[0],d=r(l).split("|")[1],s=p+"|"+u+" ("+a[e].length+")|"+d,c=[],a[e].forEach(function(e){c.push(e.get("PID"))}),n[s]={parent:f,children:c}}))};return a=new e,t.extend(a,{group:function(e,o,r){var a;a=u.getWUXNodeModel(),t.is(a)&&a.removeRoots(),c.loadDocument(a),t.is(r)?function(e,t,n){var o={};h(e,o,t,n),d(o,i.getReferenceModel(e))}(r,e,o):n.debug("GroupingViewBehavior._groupingPID is not set")},ungroup:function(){},groupByAttribute:function(e,t){return p(e,t)},ungroupByAttribute:function(e){return function e(n,o){var i=[];return o&&"json"===g(o)&&Object.keys(o).forEach(function(r){var a,s="";"root"!==r&&(r.contains(":")&&(s=r.split(":")[0]),s===n?"array"===g(o[r])?(i=i.concat(o[r]),delete o[r]):"json"===g(o[r])?(a=o[r],Object.keys(a).forEach(function(e){t.is(i[e])?("array"===g(a[e])&&(i[e]=i[e].concat(a[e])),Number.isNaN(Number.parseInt(e))&&(i[e]=t.merge(i[e],a[e]))):i[e]=a[e]}),delete o[r]):console.error("ProcurementGroupingImplementation : wrong structure"):i[r]=e(n,o[r]))}),Object.keys(i).length>0&&(t.is(o)&&t.is(o.root)&&(i.root=o.root),o=i),o}(e,s)},updateDatagrid:function(e){t.is(e)&&"MBOM"===e.sourceId&&this.group()}})}}),define("DS/DELPPWViewBehaviors/GroupingViewBehavior/GroupingViewBehavior",["UWA/Core","DS/Core/Events","DS/DELPPWViewBehaviors/GroupingViewBehavior/GroupingDialog","DS/DELPPWViewBehaviors/GroupingViewBehavior/ProcurementGroupingImplementation","DS/DELPPWViewBehaviors/GroupingViewBehavior/StructuralGroupingImplementation"],function(e,t,n,o,i){"use strict";return{plugins:["UXComponentsPlugin","DatabasePlugin","ResourcePlugin","TreeViewPlugin","WebServicePlugin"],creator:function(r,a,s,l,c,u){var d,g,f,p,h,m,I,v,y,b,C,P,D=null,S=[],A=[],R=null,w=!1,V=["V_description.reference","V_Name","V_NeedDedicatedSystem.reference","V_TargetReleaseDate.reference"],L=function(){var t,n,o,i,r,s=a.getBehavior("WUXNodeModelBehavior"),c=a.getBehavior("TreeListViewBehavior"),d=a.getBehavior("SelectionBehavior"),g=u.getViewColumnPreferences(a.getId(),"MBOM.columnConfigPath"),f="";R=null,u.resetColumnsForGrouping(a.getId()),o=s.getWUXNodeModel(),e.is(o)&&o.removeRoots(),f+='{"label":{"filterId": "set"}',g.Columns.Column.forEach(function(e){f=f+',"'+e.dataIndex+'":{"filterId": "set"}'}),f+="}",o.setFilterModel(e.Json.decode(f)),c.loadDocument(o),n=d.getSelections(),i=e.is(n[2])?n[2].length:0,r=e.is(n[1])?n[1].length:0,i>0&&r>0||r>1?a.notify("MultipleOrNoObjectSelected","multipleObjects"):0===r?a.notify("MultipleOrNoObjectSelected","noObject"):e.is(m)&&1===r&&(t=l.getReferenceModel(m),s.addNode(t,{onAddToTreeListFail:function(){},onAddToTreeListComplete:function(){s.expandAllRoots()}}),a.notify("OneObjectSelected"))},E=function(e){"multipleObjects"===e?h.showErrorMessage(c.getNLSValue("Error.MultipleObjectsSelected")):h.showErrorMessage(c.getNLSValue("Error.NoObjectSelected"))},M=function(){h.showDatagrid()},T=function(){return e.is(R)},N=function(t,n){var o,i,r;b=n?{dataIndex:"V_Name.reference",title:c.getNLSValue("Column.Manufacturing")}:e.is(t)?t:e.is(R)?R:null,(e.is(b)||n)&&(o=function(e){var t,n,o=null;return 2===(t=e.split(".")).length&&(n=t[1],["reference","instance"].includes(n)&&(o={attributeName:t[0],modelType:n})),o}(b.dataIndex),e.is(o)&&(i=function(e){var t="reference"===o.modelType?l.getReferenceModelFromInstance(e):e;return n?t.get("PID"):t.get(o.attributeName)},r=function(t){var i,r="reference"===o.modelType?l.getReferenceModelFromInstance(t):t,a=o.attributeName;return"PID"!==a&&"physicalid"!==a||(a="reference"===o.modelType?"V_Name":"PLM_ExternalID"),i=r.get(a),e.is(i)&&""!==i||(i="N/A"),n?i+"|"+r.get("type"):b.title+": "+i},I?f.group(i,r,m):p.group(i,r,m),n||(R=b),a.notify("GroupingApplied")))},B=function(e){var t=a.getBehavior("WUXNodeModelBehavior");e?(P=t.getRoots(),t.getFlattenNodeModel(t.getRoots(),e)):(t.emptyNodeModel(),t.getFlattenNodeModel(P,e)),T()&&N(null,!1)};return{listenTo:function(){return{activateProcurementGrouping:this.toggleProcurementGrouping,activateFlattenView:this.toggleFlattenView}},onStart:function(){f=new o(a,r,l,c),p=new i(a,l,c),S.push(r.addExternalListener("select",function(e){e.sourceId!==a.getId()&&L()})),S.push(r.addExternalListener("OneObjectSelected",M)),S.push(r.addExternalListener("MultipleOrNoObjectSelected",E)),I=!1,u.registerModuleForRecursiveGrouping(a.getId()),y=r.getPlugins("DatabasePlugin").instance,(v=a.getBehavior("WUXNodeModelBehavior").getTreeDocument()).options.shouldAcceptDrag=function(t){var n=e.is(t)?t:{},o=y.getPPRType(n.getReferencePID());return!!e.is(o)},v.options.shouldAcceptDrop=function(t){var n=e.is(t.dropNode)?t.dropNode:{},o=!1,i=y.getPPRType(n.getReferencePID());return"middle"===t.dropPosition&&(o=!e.is(i)),o}},onStop:function(){var e;for(e=0;e<S.length;e++)r.removeExternalListener(S[e]);for(S=[],e=0;e<A.length;e++)t.unsubscribe(A[e]);A=[],I=!1,u.resetColumnsForGrouping(a.getId()),u.unRegisterModuleForRecursiveGrouping(a.getId()),R=null},toggleProcurementGrouping:function(e){(I=e)?(B(!0),this.group(null,!0),T()&&this.group(null,!1)):(B(!1),T()&&this.group(null,!1))},toggleFlattenView:function(e){this.isFlatView(e),B(e)},showAttributeSelectionDialog:function(e){var t=a.getBehavior("UXFactoryBehavior");new n(a,t,s).show(e)},groupByAttribute:function(e,t){o.groupByAttribute(e,t)},group:function(e,t){N(e,t)},clearGrouping:function(){L(),w?this.toggleFlattenView(!0):I&&this.toggleProcurementGrouping(!0),a.notify("GroupingRemoved")},deleteFilters:function(){w=!1},displayView:function(e){switch(e){case"procView":f.group();break;case"structureView":p.group();break;default:L()}},setDatagridView:function(e){h=e},setGroupingPID:function(e){m=e},modifyAttribute:function(t){var n,o,i,s,u,f,p={onFailure:function(){},onSuccess:function(){B(!0===w),t.onComplete()}},h={forceDBMode:!0,onComplete:function(){D.updateModelAttribute(t[0].referencePID,s,o,p)}};if(V.indexOf(b.dataIndex)>-1)if(e.is(D)||(D=a.getBehavior("ModelBehavior")),e.is(g)||(g=a.getBehavior("WUXNodeModelBehavior")),e.is(C)||(C=r.getPlugins("AttributePlugin").instance),e.is(d)||(d=a.getBehavior("TreeListViewBehavior")),n=g.getNodeModel(t[0].target,1),o=n.grouping,i=d.getDataGridView().getColumnOrGroup(b.colId),s=C.getNodeAndColumnInfos(n,i),n=g.getNodeModel(t[0].target,1),o=n.grouping,s.objectToBeModified=D.getReferenceModel(t[0].referencePID),u=b.dataIndex.split(".")[0],w){switch(b.dataIndex){case"V_NeedDedicatedSystem.reference":o=C.getAuthorizedValue(s.attributeInfo,s.attributeDef,o)}e.is(s.objectToBeModified.get(u))?D.updateModelAttribute(s.objectToBeModified.id,s,o,p):l.fetchRoot(s.objectToBeModified.id,h)}else g.getNodeModel(t[0].referencePID,1).getParent().getBrothers().forEach(function(e){e._id===n._id&&(f=!0)}),f?e.is(s.objectToBeModified.get(u))?D.updateModelAttribute(s.objectToBeModified.id,s,o,p):l.fetchRoot(s.objectToBeModified.id,h):a.warn(c.getNLSValue("GroupingModule.View.DndNOTPossible"));else a.warn(c.getNLSValue("GroupingModule.View.NotEditable"))},isFlatView:function(t){if(!e.is(t,"boolean"))return w;w=t}}}}});