define("DS/DELPPWGroupingModule/GroupingViewUI",["UWA/Core"],function(e){"use strict";return function(t,i,n){var o,r,a,l,s,c,g,u,d,p,h,m=i.getComponent("Toggle"),f=i.getComponent("Breadcrumb"),w=i.getComponent("WUXFrameWindowsManager").getFrameWindow(t.getAppContext()),v=t.getElement(),y=w.getImmersiveFrame(),b={};return o=function(){var e,o=widget.getViewportDimensions();e=n.getNLSValue("GroupingModule.View.Title"),r=i.create("Panel",{identifier:"panel-grouping",position:{my:"center",at:"center"},title:e,immersiveFrame:y,content:v,minWidth:300,minHeight:250,width:.7*o.width,height:.6*o.height,snappableFlag:!1,resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0}),v.getParent().setStyles({"overflow-x":"hidden","overflow-y":"hidden"}),r.close=function(){t.notify("toggleCmdCheckHeaderState",{cmdName:"ShowGroupingDataGridView",cmdState:!1})}},a=function(){return d},l=function(){return(h=e.createElement("div")).className="groupingContainer",h.setAttribute("id","groupingContainer"),h.setStyles({height:"100%"}),h},{init:function(t){b=e.extend(b,t),d=e.createElement("div",{class:"enoderivedoutputs_information"}),e.createElement("span",{class:"enoderivedoutputs_information_icon wux-ui-3ds wux-ui-3ds-5x wux-ui-3ds-docs"}).inject(d),p=e.createElement("h2",{class:"enoderivedoutputs_information_msg"}).inject(d),d.setStyle("color","#303030"),d.setStyle("text-align","center"),d.setStyle("position","absolute"),d.setStyle("top","calc(50% - 100px)"),d.setStyle("width","97%"),d.setStyle("opacity",".2"),d.setStyle("pointer-events","none"),d.hide()},destroy:function(){e.is(r)&&(r.destroy(),r=void 0)},loadUI:function(i){var u,d,p,h=l();o(),a().inject(v),e.is(r)&&!1===r.visibleFlag&&((d=e.createElement("div")).className="grouping-toggle",d.setAttribute("id","grouping-toggle"),d.setStyles({top:"10px",position:"relative",width:"12%",height:"50px",float:"right"}),(c=new m({type:"switch",label:n.getNLSValue("Grouping.ProcurementView.Title"),checkFlag:!1})).addEventListener("change",function(e){t.notify("activateProcurementGrouping",e.dsModel.checkFlag)}),c.inject(d),d.inject(h),(p=e.createElement("div")).className="flatten-toggle",p.setAttribute("id","flatten-toggle"),p.setStyles({top:"10px",position:"relative",width:"12%",height:"50px",float:"right"}),(g=new m({type:"switch",label:n.getNLSValue("GroupingModule.View.FlattenView"),checkFlag:!1})).addEventListener("change",function(e){t.notify("activateFlattenView",e.dsModel.checkFlag)}),g.inject(p),p.inject(h),(s=e.createElement("div")).className="grouping-breadcrumb",s.setAttribute("id","grouping-breadcrumb"),s.setStyles({top:"10px",left:"10px",position:"relative",width:"70%",height:"50px"}),s.inject(h),(u=e.createElement("div")).className="datagrid",u.setAttribute("id","datagrid"),u.setStyles({top:"50px",position:"absolute",width:"99%",height:"90%"}),i.inject(u),u.inject(h),h.inject(v),r.show())},showPanel:function(){e.is(r)&&r.show()},showErrorMessage:function(e){h.hide(),p.setText(e),d.show()},showDatagrid:function(){h.show(),d.hide()},setBreadCrumbValue:function(t,i){var o;o=t.map(function(e){return{label:e.label,icon:{iconPath:n.getIconURLFromKey(e.type),iconSize:{width:"22px",height:"22px"}},PID:e.pid}}),e.is(u)&&(u.destroy(),s.empty()),(u=new f({value:o,selectedValues:[o[o.length-1]],mode:f.MODE.EXCLUSIVE_SELECTION})).addEventListener("selectionChange",function(){i(u.selectedValues[0].PID)}),u.inject(s)},enableProcurementViewToggle:function(e){c.setProperties({disabled:!e})},enableFlattenViewToggle:function(e){g.setProperties({disabled:!e})}}}}),define("DS/DELPPWGroupingModule/GroupingModule",["UWA/Core","DS/DELPPWGroupingModule/GroupingViewUI"],function(e,t){"use strict";return{behaviors:["UXFactoryBehavior","EGraphViewBehaviour","ResourceBehavior","GroupingViewBehavior","SelectionBehavior","WUXNodeModelBehavior","TreeListViewBehavior","ModelBehavior"],creator:function(i,n,o,r,a,l,s,c,g){var u,d,p=function(e){a.displayView(e)},h=function(){var t,i,n,o,r,s,c=function(e){return{label:e.get("V_Name"),type:e.get("type"),pid:e.get("PID")}};t=l.getSelectionsWithPaths(),e.is(t[1])&&1===(t=t[1]).length&&((n=(i=t[0]).path).length>0?(o=c(g.getAggregatingReferenceModelFromInstance(g.getInstance(n[0]))),r=n.map(function(e){var t=g.getReferenceModelFromInstance(g.getInstance(e));return c(t)}),r=[o].concat(r)):r=[o=c(g.getReference(i.id))],s=function(e){a.setGroupingPID(e),p("defaultView")},u.setBreadCrumbValue(r,s),a.setGroupingPID(r[r.length-1].pid))},m=function(e){e.sourceId!==i.getId()&&h()};return{listenTo:function(){return{select:m,activateProcurementGrouping:this.toggleProcurementGrouping,activateFlattenView:this.toggleFlattenView}},onStart:function(e){d=e,c.loadDocument(s.getWUXNodeModel()),(u=new t(i,n,r,o)).init(d),u.loadUI(c.getContent()),h(),a.setDatagridView(u),p("defaultView")},onStop:function(){s.getTreeDocument().removeRoots(),a.deleteFilters(),e.is(u)&&(u.destroy(),u=void 0)},start:function(){},stop:function(){},toggleProcurementGrouping:function(t){var i=!!e.is(t)&&t;u.enableFlattenViewToggle(!i)},toggleFlattenView:function(t){var i=!!e.is(t)&&t;u.enableProcurementViewToggle(!i)}}}}});