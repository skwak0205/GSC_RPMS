define("DS/MPFBuyer/BuyerType",["UWA/Class","DS/MPFPersonModel/PersonModel","DS/MPFCompanyModel/CompanyModel"],function(e,t,n){"use strict";var o=e.extend({init:function(e){this.name=e}});return o.INDIVIDUAL=new o("individual"),o.COMPANY=new o("company"),o.UNKNOWN=new o("unknown"),o.fromModel=function(e){return Object.prototype.isPrototypeOf.call(n.prototype,e)?o.COMPANY:Object.prototype.isPrototypeOf.call(t.prototype,e)?o.INDIVIDUAL:o.UNKNOWN},o}),define("DS/MPFBuyer/Buyer",["UWA/Class","UWA/Promise","DS/MPFDataProxy/MarketplaceConnector","DS/MPFModelFactory/MPFFactoriesV2","DS/MPFPersonModel/PersonFactory","DS/MPFCompanyModel/CompanyFactory","DS/MPFPersonModel/PersonModel","DS/MPFBuyer/BuyerType","DS/MPFServices/ObjectService"],function(e,t,n,o,r,c,s,i,u){"use strict";const y=e.extend({init:function(e){this.model=e.model,this.buyerType=i.fromModel(this.model)},getModel:function(){return this.model},getName:function(){switch(this.buyerType){case i.INDIVIDUAL:return this.model.getFullName();case i.COMPANY:return this.model.getName();default:return"Unknown"}},getBuyerType:function(){return this.buyerType}});return y.fromPerson=function(e,r={}){return u.requiredOfPrototype(e,s,"person must be a PersonModel"),(r.connector?t.cast(r.connector):n.fetchPromise(r)).then(function(e){return o.getInstance(e).getFactories([o.Types.ADDRESS,o.Types.COMPANY])}).then(function(n){const o=n[0],r=n[1],s=e.getCompanyId();let i;if(s){const e=r.createModel(c.Types.COMPANY,{},{addressFactory:o});e.set("id",s),i=e.fetchPromise()}else i=t.resolve(e);return i}).then(function(e){return new y({model:e})})},y.fromMe=function(e={}){return(e.connector?t.cast(e.connector):n.fetchPromise(e)).then(function(e){return o.getInstance(e).getFactory(o.Types.PERSON)}).then(function(e){return e.createModel(r.Types.ME).fetchPromise()}).then(function(t){return y.fromPerson(t,e)})},y});