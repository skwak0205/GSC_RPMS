define("DS/ENOMadeFromUX/utils/MBMFUtils",["UWA/Core","UWA/Class","DS/ENOMadeFromUX/service/MBMFServiceProvider","DS/XSRCommonComponents/utils/Notification","DS/XSRCommonComponents/utils/XSRMask","DS/XSRCommonComponents/service/SpecSearchService","DS/XSRCommonComponents/utils/Utils","DS/XSRCommonComponents/utils/TypeUtils","DS/XSRCommonComponents/utils/ItemServiceProvider","i18n!DS/ENOMadeFromUX/assets/nls/MadeFromUX"],function(e,t,n,o,r,s,M,i,a,d){return t.singleton({getMsgAddNodeOnMBMFParent:function(e){o.displayNotification({eventID:"error",msg:d.Error_AddNodeOn_MBMFParent})},getMsgAddNodeOnRM:function(e){o.displayNotification({eventID:"error",msg:d.Error_AddNodeOn_RM})},getMsgAddNodeOnMBMF:function(e){o.displayNotification({eventID:"error",msg:d.Error_AddNodeOn_MBMF})},getMBMFUpdateService:function(e,t){var r=t.getParentId(),s=t.getID();return new Promise(function(t,M){(new n).updateMBMFInfo(e,r,s).then(function(e){return e&&e.success&&o.displayNotification({eventID:"success",msg:e?e.result.message:d.Success_UpdateMBMF}),t(e)}).catch(function(e){return t(e)})})},getMBMFDetails:function(e,t,r,s,a,f){var c=this;return c.MBMFService=new n(f),new Promise(function(n,r){c.MBMFService.getMBMFInfo(e).then(function(r){if(r&&r.success&&200===r.statusCode){if(!(r.result.MadeFromConnections&&r.result.MadeFromConnections.length>0))return n(null);for(var s=[],a=[],f=new Map,u=0;u<r.result.MadeFromConnections.length;u++){var m=r.result.MadeFromConnections[u];a.push(m.madeFromProductID),f.set(m.madeFromRelationId,m)}var F=M.removeDuplicatesFromArr(a);c.MBMFService.fetchItemInfo(F,!0).then(function(o){if(o&&o.length>0){for(var r=0;r<o.length;r++){var a=o[r];for(let n of f.values())if(n.madeFromProductID===a.resourceid){MBMFInfo=Object.assign(n,a);var d=MBMFInfo.madeFromProductType.dbName;MBMFInfo.asRequired?MBMFInfo.asNeeded=MBMFInfo.asRequired:i.isRawMaterial(d)&&(MBMFInfo.asNeeded=!1),MBMFInfo.madeFrom=!0,t&&(MBMFInfo.UOMUnitsDBNLSMap=t),MBMFInfo["ds6w:created"]=M.getformatedDate(MBMFInfo["ds6w:created"]),MBMFInfo["ds6w:modified"]=M.getformatedDate(MBMFInfo["ds6w:modified"]),MBMFInfo["ds6w:responsible"]=MBMFInfo["ds6w:responsible"],MBMFInfo.quantity=MBMFInfo.quantity,MBMFInfo.quantityMBMF=MBMFInfo.quantityUOM?MBMFInfo.quantity+" "+MBMFInfo.quantityUOM.dbName:"",MBMFInfo["ds6w:cadMaster"]=MBMFInfo["ds6w:cadMaster"],MBMFInfo["ds6w:status"]=MBMFInfo["ds6w:status"],MBMFInfo.parentid=e,s.push(MBMFInfo)}}return n(s)}}).catch(function(e){o.displayNotification({eventID:"error",msg:e?e.result.message:d.Error_Get_MBMF})})}}).catch(function(e){var t;t=e&&e.result?e.result.message:d.Error_Get_MBMF,o.displayNotification({eventID:"error",msg:t})})})},getNLSLabels:function(e){var t=e;if(t)for(var n=0;n<t.length;n++)t[n].text=t[n].text&&d[t[n].text]?d[t[n].text]:t[n].text;return t}})});