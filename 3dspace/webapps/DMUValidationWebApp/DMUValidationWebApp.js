/*!  Copyright 2015 Dassault Systemes. All rights reserved. */
define("DS/DMUValidationWebApp/DMUValidationWebAppOptions",["UWA/Core","UWA/Class","UWA/Class/Options","UWA/Utils"],function(e,i,t,n){"use strict";return i.singleton(t,{init:function(){var i={};""!==window.location.search&&(e.extend(i,n.parseQuery(window.location.search)),i.widgetDomain&&e.extend(i,n.parseQuery(i.widgetDomain))),("debug_me"in i||window.debug)&&(i.debug=!0),("testWkb"in i||window.testWkb)&&(i.testWkb=!0),this.setOptions(i)}})}),define("DS/DMUValidationWebApp/DMUValidationWebAppDefaultCmd",["DS/ApplicationFrame/Command","DS/DMUValWebAppController/DMUValWebAppController","DS/PADUtils/PADContext"],function(e,i,t){"use strict";return e.extend({init:function(e){var n=e||{};this._parent(n,{mode:"exclusive",isAsynchronous:!0}),this.setRepeatMode(!1),this.beginExecute=function(){var e=i.giveController({context:t.get()});e&&e.enableDMUContextualBar()},this.endExecute=function(){var e=i.giveController({context:t.get()});e&&e.disableDMUContextualBar()}}})}),
/*!  Copyright 2015 Dassault Systemes. All rights reserved. */
define("DS/DMUValidationWebApp/DMUValidationAppInit",["DS/WAfrContainer/App","DS/DMUBaseExperience/DMUContextManager","DS/DMUMeasurable/DMUToolsSceneGraph"],function(e,i,t){"use strict";let n,o;var a={wkb2D:{type:"2D",wkb:[{file:"DMUDesignValidationWidget2D.xml",module:"DMUValidationWebApp"}]},wkb2DFL:{type:"2DFL",wkb:[{file:"DMUDesignValidationWidget2DFL.xml",module:"DMUValidationWebApp"}]},wkb2DFLFormats:{type:"2DFLFormats",wkb:[{file:"DMUValidation2DFormats.xml",module:"DMUValidationWebApp"}]},wkb2DFormats:{type:"2DFormats",wkb:[{file:"DMUValidation2DFormats.xml",module:"DMUValidationWebApp"}]},wkb3D:{type:"3D",wkb:[{file:"DMUValidationWebApp.xml",module:"DMUValidationWebApp"}]},wkb3DFormats:{type:"3DFormats",wkb:[{file:"DMUValidation3DFormats.xml",module:"DMUValidationWebApp"}]},wkb3DTst:{type:"3DFormats",wkb:[{file:"DMUValidationWebApp_TST.xml",module:"DMUValidationTestWebApp"}]},wkbDocument:{type:"Document",wkb:[{file:"DMUDesignValidationWidgetDocument.xml",module:"DMUValidationWebApp"}]},wkbDocumentTst:{type:"Document",wkb:[{file:"DMU3DReviewWidgetDocument_TST.xml",module:"DMUValidationTestWebApp"}]},wkbRequirement:{type:"Requirement",wkb:[{file:"DMUDesignValidationWidgetRequirement.xml",module:"DMUValidationWebApp"}]},wkbRequirementTst:{type:"Requirement",wkb:[{file:"DMUDesignValidationWidgetRequirement_TST.xml",module:"DMUValidationTestWebApp"}]},"wkbRequirement Specification":{type:"Requirement Specification",wkb:[{file:"DMUDesignValidationWidgetRequirement.xml",module:"DMUValidationWebApp"}]},"wkbRequirement SpecificationTst":{type:"Requirement Specification",wkb:[{file:"DMUDesignValidationWidgetRequirement_TST.xml",module:"DMUValidationTestWebApp"}]},wkbITF:{type:"ITF",wkb:[{file:"DMUDesignValidationWidgetITF.xml",module:"DMUValidationWebApp"}]},wkbITFFormats:{type:"ITFFormats",wkb:[{file:"DMUValidation3DFormats.xml",module:"DMUValidationWebApp"}]},wkbITFTst:{type:"ITFFormats",wkb:[{file:"DMUValidationITFWebApp_TST.xml",module:"DMUValidationTestWebApp"}]},wkbMSR:{type:"MSR",wkb:[{file:"DMUDesignValidationWidgetMSR.xml",module:"DMUValidationWebApp"}]},wkbR2V:{type:"R2V",wkb:[{file:"DMUDesignValidationWidgetR2V.xml",module:"DMUValidationWebApp"}]},wkbMSRFormats:{type:"MSRFormats",wkb:[{file:"DMUValidationMSRFormats.xml",module:"DMUValidationWebApp"}]},wkbReviewNoContext:{type:"ReviewNoContext",wkb:[{file:"DMUDesignValidationWidgetReviewNoContext.xml",module:"DMUValidationWebApp"}]}};return e.extend({setUp:function(e){var i=this;e.sourceApp?e.sourceApp.pad3DViewer?(o=e.sourceApp.pad3DViewer,this.pad3DViewer=e.sourceApp.pad3DViewer,this.appMainDiv=e.sourceApp.appMainDiv,new Promise(function(i){n?i():require(["DS/DMUReviewCommonWebApp/DMUCommonWebAppMain"],function(t){n=new t({widget:window.widget,data:a,controller:"DS/DMUValWebAppController/DMUValWebAppController",appId:"R3V",pad3DViewer:e.sourceApp.pad3DViewer,appMainDiv:e.sourceApp.appMainDiv}),i()})}).then(function(){e.sourceApp&&!e.sourceApp.isDisposeCalled()&&e.sourceApp.dispose();var t=e.done;e.done=function(n){i.appMainDiv||(i.appMainDiv=n.appMainDiv),e.done=t,e.done()},n.setUp(e)})):e.done():require(["DS/DMUReviewCommonWebApp/DMUCommonWebAppMain"],function(t){n=new t({widget:window.widget,viewerAttachment:e.done,data:a,controller:"DS/DMUValWebAppController/DMUValWebAppController",appId:"R3V",done:function(e){o=e.pad3DViewer,i.pad3DViewer=e.pad3DViewer,i.appMainDiv=e.appMainDiv}})})},dispose:function(e){e&&(e.preferredType="DMUValidationValidation"),n&&n.dispose&&n.dispose(e),this._parent(e)},onWillEnter:function(e){return n&&n.onWillEnter&&n.onWillEnter(e),require(["DS/DMUBaseExperience/EXPUtils","DS/DMUValWebAppController/DMUValWebAppController"],function(i,t){var n=t.getController({context:e.pad3DViewer});"X3DPLAW_AP"===e&&n.setappTransition(!0),i._sendUsageProbe("appTransitionFrom",e.options.id,"resolved")}),this._parent(e)},onWillLeave:function(e){var a=t.getRoots(o),p=["Drawing","Document","DIFLayout","DIFSheet"];["X3DPLAW_AP","ENOR3R_AP","ENOR3V_AP","ENOR3D_AP"].indexOf(e.options.id)<0&&p.push("DesignSight");for(var l=0;l<a.length;l++)if(-1!==p.indexOf(t.getNodeType(a[l]))){var r=t.getNodeID(a[l]);i.getReviewContext({context:this.pad3DViewer})&&i.getReviewContext({context:this.pad3DViewer}).getCurrentSessionMarkup()||o.removeRoots({pids:[r]})}return require(["DS/CATWebUXPreferences/CATWebUXPreferencesManager"],function(t){var n=t.getPreferenceManager({context:o.getFrameWindow()});if(n&&("CATC3D_AP"===e.options.id||"CATA3I_AP"===e.options.id||"ENOI3D_AP"===e.options.id)){n.set2DSelectionPreferencesDisplayFlag(!1);let t=i.getReviewContext({context:o});"CATA3I_AP"===e.options.id&&t&&t.getCurrentSessionMarkup()&&t.getCurrentSessionMarkup().setActiveFlag(!1)}}),n&&n.onWillLeave&&n.onWillLeave(e),require(["DS/DMUBaseExperience/EXPUtils"],function(i){i._sendUsageProbe("appTransitionTo",e.options.id,"resolved")}),this._parent(e)}})});