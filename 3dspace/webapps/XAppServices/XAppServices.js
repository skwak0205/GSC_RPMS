define("DS/XAppServices/XAppWelcomeScreenServices",["UWA/Class"],function(e){"use strict";return e.singleton({callWhenWelcomeScreenViewIsReady:function(e,n){if(e){let t=e.getComponent("mod_WelcomeScreen");if(t)if("function"==typeof t.viewIsReady&&t.viewIsReady()||t._welcomeScreenView)n();else{let t=e.getComponent(WAfrStandardComponentKey.ModelEvents);if(t)return t.subscribeOnce({event:"EVT_WelcomeScreenReady"},n)}}}})}),define("DS/XAppServices/XAppErrorsTracker",["UWA/Class"],function(e){"use strict";return e.singleton({registerErrorsHandler:function(e,n,t){this._onErrorCB||(this._onErrorCB=this._onError.bind(this,e,n,t),["error","unhandledrejection"].forEach(e=>{window.addEventListener(e,this._onErrorCB)}))},unregisterErrorsHandler:function(){this._onErrorCB&&(["error","unhandledrejection"].forEach(e=>{window.removeEventListener(e,this._onErrorCB)}),this._onErrorCB=null)},_onError:function(e,n,t,r){var i={stackStr:"",errorMsgStr:"",module:"",file:"",lineNumber:void 0,columnNumber:void 0};if(r instanceof ErrorEvent?r.error?(r.error.message&&(i.errorMsgStr=r.error.message),r.error.stack&&(i.stackStr=r.error.stack)):r.message&&(i.errorMsgStr=r.message,r.stack&&(i.stackStr=r.stack)):r instanceof PromiseRejectionEvent&&(r.reason&&(r.reason&&(i.errorMsgStr=r.reason.message?r.reason.message:r.reason,r.reason.lineNumber&&(i.lineNumber=r.reason.lineNumber),r.reason.columnNumber&&(i.columnNumber=r.reason.columnNumber)),r.reason.stack&&(i.stackStr=r.reason.stack)),r.reason&&r.reason.getError&&r.reason.getError()&&(r.reason.getError().message&&(i.errorMsgStr=r.reason.getError().message),r.reason.getError().stack&&(i.stackStr=r.reason.getError().stack))),i.stackStr=i.stackStr.replace(/\n$/,""),i.stackStr)try{var o=i.stackStr.split(".js"),a=o[0].split("/");if(i.file=a.pop(),i.file&&(i.file+=".js"),i.module=a.pop(),(!i.lineNumber||!i.columnNumber)&&o.length>1){var c=o[1].split(")")[0].split(":");c.length>1&&(i.columnNumber=c.pop().split("\n")[0],i.lineNumber=c.pop())}}catch(e){console.error("XAppErrorsTracker: failed getting module, file, line or column")}if(e&&i.errorMsgStr!==this._previousErrorMsgStr&&(this._previousErrorMsgStr=i.errorMsgStr,require(["DS/XAppServices/XAppTrackers"],function(n){n.trackErrorsJS(e,{stackStr:i.stackStr,message:i.errorMsgStr,module:i.module,file:i.file,lineNumber:i.lineNumber,columnNumber:i.columnNumber})}),i.errorMsgStr)){var s=!0;if((t||window.widget&&!widget.uwaUrl||window.location&&window.location.hostname&&(window.location.hostname.indexOf("devops")>-1||window.location.hostname.indexOf("localhost")>-1)||function(){var e={};if(window.parent&&window.parent.location&&window.parent.location.search){var n=window.parent.location.search.replace("?","").split("&");if(""!==n)for(var t=0;t<n.length;t++){var r=n[t].split("=");e[r[0]]=r.length>1?r[1]:""}}return e}().QADebug)&&(s=!1),!s){var p=i.errorMsgStr.slice(0,80)+(i.errorMsgStr.length>80?"(...)":""),d="";i.module&&i.file&&(d=i.module+"/"+i.file),i.lineNumber&&Number.isInteger(parseInt(i.lineNumber))&&(d+=" (line "+i.lineNumber+":"+i.columnNumber+")"),d&&(d+="<br><br>");var l=[{level:"error",title:"JS error",subtitle:d+=p+"<br><br><i>(this alert will not be visible in production)</i>",sticky:!0}],v=e.getComponent("NotificationsManager");v&&v.displayNotifications(l,{notExclusive:!0})}}return n&&n(i),!1}})}),define("DS/XAppServices/XAppEventsServices",["UWA/Class"],function(e){"use strict";return e.singleton({init:function(){},events:{Application_DocumentUIActivated:"XApp/PartComponent/DocumentUIActivated",Loading_LoadDataPromises:"XApp/Loading/LoadDataPromises",Loading_ChangeLoadModeRequested:"XApp/Loading/ChangeLoadModeRequested",SpecTree_SetUIActivePath:"XGD/SpecTreeComponent/setUIActivePath",SpecTree_ChangeTreeActiveNode:"changeTreeActiveNode",SpecTree_Reframe:"SpecTree/Reframe",SpecTree_Transaction_AddSemanticNode:"VMClientTransaction/AddSemanticNode",SpecTree_Transaction_AddExistingNode:"VMClientTransaction/AddExistingNode",SpecTree_Transaction_RemoveExistingNode:"VMClientTransaction/RemoveExistingNode",SpecTree_Transaction_NotificationsEvent:"VMClientTransaction/notificationsEvent",SpecTree_ViewNodeEdit:"ViewNodeEditEvent",SpecTree_ViewNodePreActivate:"ViewNodePreActivateEvent",SpecTree_ViewNodeSelected:"ViewNodeSelectedEvent",SpecTree_ViewNodePreSelected:"ViewNodePreSelectedEvent",SpecTree_ViewNodeHideShow:"ViewNodeHideShowEvent",SpecTree_ContextualMenuClick:"SpecTree/OnRMBClick",SpecTree_BeginUIActivation:"BeginUIActivation",SpecTree_EndUIActivation:"EndUIActivation",SpecTree_ComponentActivitySwitched:"ComponentActivitySwitched",SpecTree_Rename_Success:"XApp/SpecTreeRename/Success",SpecTree_Rename_Error:"XApp/SpecTreeRename/Error",SpecTree_OccurrenceDrag:"OccurrenceDrag",SpecTree_HierarchyMove:"XApp/SpecTree/HierarchyMove",SpecTree_Reorder_Process:"ReorderCmd_Process",SpecTree_Reorder_Begin:"ReorderCmd_Begin",SpecTree_Reorder_Ended:"ReorderCmd_Ended",SpecTree_VPMOccurrence_PreExpand:"XApp/VPMOccurrence/OnPreExpand"},_getEventsManager:function(e){var n=null;return e&&(n=e.getComponent(WAfrStandardComponentKey.ModelEvents)),n},publish:function(e,n){var t=this._getEventsManager(e);t&&t.publish(n)},subscribe:function(e,n,t){var r=null,i=this._getEventsManager(e);return i&&(r=i.subscribe(n,t)),r},subscribeOnce:function(e,n,t){var r=this._getEventsManager(e);r&&r.subscribeOnce(n,t)},unsubscribeAll:function(e,n){var t=this._getEventsManager(e);t&&t.unsubscribeAll(n)},unsubscribe:function(e,n){var t=this._getEventsManager(e);t&&t.unsubscribe(n)}})}),define("DS/XAppServices/XAppTrackerServices",["UWA/Class"],function(e){"use strict";var n=e.singleton({TrackerAPI:null,trackPageEvent:function(e,t){return new Promise(function(r){requestAnimationFrame(function(){n.getTrackerAPI().then(function(n){if(e&&t){var i=e.getSourceApp()||e.getTargetApp();if(i){var o=i.getId();if(o){t.appID=o,window.widget&&widget.getValue("x3dPlatformId")&&(t.tenant=widget.getValue("x3dPlatformId"));if(["persDim","persVal"].forEach(e=>{if(t[e])for(var n in t[e])void 0===t[e][n]||null===t[e][n]?delete t[e][n]:"persDim"===e&&t[e][n].indexOf(",")>-1&&(t[e][n]=t[e][n].replaceAll(",",";"))}),t.callback=r,n.trackPageEvent(t),window.__karma__||!0===navigator.webdriver){var a=document.createElement("div");a.className="xapp-tracker-odt-only",a.setAttribute("data-content",JSON.stringify(t)),document.body.appendChild(a)}}}}})})})},getTrackerAPI:function(){return new Promise(function(e){n.TrackerAPI?e(n.TrackerAPI):window.DS&&window.DS.analytics?(n.TrackerAPI=window.DS.analytics,e(n.TrackerAPI)):require(["DS/Usage/TrackerAPI"],function(t){n.TrackerAPI=t,e(n.TrackerAPI)})})}});return n}),define("DS/XAppServices/XAppTrackers",["UWA/Class","DS/XAppServices/XAppTrackerServices"],function(e,n){"use strict";return e.singleton({track3DDesignMonitor:function(e){return n.trackPageEvent(e,{eventCategory:"3DDesign",eventAction:"Monitor"})},trackComputeServerConnectionEstablished:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_ComputeServerConnection",eventAction:"XApp_ComputeServerConnectionEstablished",eventLabel:"Connection to Compute Server has been established"})},trackComputeServerConnectionUnestablished:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_ComputeServerConnection",eventAction:"XApp_ComputeServerConnectionUnestablished",eventLabel:"Connection to Compute Server is unable to be established"})},trackLandingPageAppOverviewClick:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_AppOverviewClick",eventLabel:"Landing Page app overview button has been clicked"})},trackLandingPageActionButtonClick:function(e,t){return n.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_ActionButtonClick",eventLabel:"Landing Page action button has been clicked",persDim:{pd1:t.buttonName}})},trackLandingPageLinkClick:function(e,t){return n.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_LinkClick",eventLabel:"Landing Page link has been clicked",persDim:{pd1:t.linkName}})},trackLandingPageOnDrop:function(e,t){return n.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_OnDrop",eventLabel:"A drag & drop has been done on Landing Page",persDim:{pd1:t.isDropOk}})},trackComputeServerConnectionLostMessageDisplayed:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_ComputeServerConnection",eventAction:"XApp_ComputeServerConnectionLostMessageDisplayed",eventLabel:"Server connection lost message has been displayed"})},trackComputeServerConnectionLost:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_ComputeServerConnection",eventAction:"XApp_ComputeServerConnectionLost",eventLabel:"Connection to Compute Server has been lost"})},trackWidgetTenantChanged:function(e,t){return n.trackPageEvent(e,{eventCategory:"XApp_Widget",eventAction:"XApp_WidgetTenantChanged",eventLabel:"Widget tenant changed from preferences",persDim:{pd1:t.numberAvailableTenants,pd2:t.fromHomePage}})},trackWidgetPreferencesClosed:function(e,t){return n.trackPageEvent(e,{eventCategory:"XApp_Widget",eventAction:"XApp_WidgetPreferencesClosed",eventLabel:"Widget preferences closed",persVal:{pv1:t.saved}})},trackWidgetRefresh:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_Widget",eventAction:"XApp_WidgetRefresh",eventLabel:"Widget refreshed from its header"})},trackModelLoadingCancelled:function(e,t){return n.trackPageEvent(e,{eventCategory:"XApp_ModelLoading",eventAction:"XApp_ModelLoading_Cancelled",eventLabel:"Model load cancelled",persDim:{pd1:t.stepName,pd2:t.fromAction},persVal:{pv1:t.stepIndex,pv2:t.stepsNb,pv3:t.ellapsedTimeBeforeCancel,pv4:t.progressRate}})},trackModelLoadingTime:function(e,t){return n.trackPageEvent(e,{eventCategory:"XApp_ModelLoading",eventAction:"XApp_ModelLoading_Time",eventLabel:"Duration of model loading steps",persDim:{pd1:t.fromAction,pd2:t.progressStepNameIdentifier},persVal:{pv1:t.stepDurationInSeconds,pv2:t.totalTimeInSeconds,pv3:t.isLoadingOver,pv4:t.progressStepIndex,pv5:t.progressStepsNb}})},trackLandingPageAppSwitchClick:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_LandingPage",eventAction:"XApp_LandingPage_AppSwitchClick",eventLabel:"Landing Page app switch button has been clicked"})},trackComputeServerConnectionLostRefreshClick:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_ComputeServerConnection",eventAction:"XApp_ComputeServerConnectionLostRefreshClick",eventLabel:"Refresh button clicked in connection lost notif"})},trackInactivityMessageDisplayed:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_Inactivity",eventAction:"XApp_InactivityMessageDisplayed",eventLabel:"Inactivity modal displayed"})},trackInactivityRestoreBtnClick:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_Inactivity",eventAction:"XApp_InactivityRestoreBtnClick",eventLabel:"Restore button clicked in inactivity modal"})},trackInactivityKeepSessionBtnClick:function(e){return n.trackPageEvent(e,{eventCategory:"XApp_Inactivity",eventAction:"XApp_InactivityKeepSessionBtnClick",eventLabel:"Keep session button clicked in inactivity modal"})},trackErrorsJS:function(e,t){return n.trackPageEvent(e,{eventCategory:"XApp_Errors",eventAction:"XApp_Errors_JS",eventLabel:"Javascript execution error",persDim:{pd1:t.message,pd2:t.module,pd3:t.file,pd4:t.lineNumber,pd5:t.columnNumber,pd6:t.stackStr}})}})});