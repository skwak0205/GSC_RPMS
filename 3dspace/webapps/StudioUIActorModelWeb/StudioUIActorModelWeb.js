define("DS/StudioUIActorModelWeb/interfaces/CATICXPUIActor",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(e,t){"use strict";return t.singleton({interfaceName:"CATICXPUIActor",required:{SetOffset:function(){},GetOffset:function(){},SetMinimumDimension:function(){},GetMinimumDimension:function(){},GetDimension:function(){},SetAttachment:function(){},GetAttachment:function(){},SetEnable:function(){},GetEnable:function(){},SetOpacity:function(){},GetOpacity:function(){},SetVisible:function(){},GetVisible:function(){}},optional:{}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIActorGraphicalProperties",["UWA/Core","UWA/Class"],function(e){"use strict";return e.Class.extend({init:function(){this._parent()},GetShowMode:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("visible")},SetShowMode:function(e){this.QueryInterface("CATI3DExperienceObject").SetValueByName("visible",e)},GetOpacity:function(){var e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("opacity");return void 0===e&&(e=255),e},SetOpacity:function(e){this.QueryInterface("CATI3DExperienceObject").SetValueByName("opacity",e)},GetRed:function(){},GetGreen:function(){},GetBlue:function(){},SetColor:function(){},GetPickMode:function(){},SetPickMode:function(){}})}),define("DS/StudioUIActorModelWeb/extensions/CATECXP2DUIActor",["UWA/Core"],function(e){"use strict";return e.Class.extend({SetOffset:function(e){var t=this.QueryInterface("CATI3DExperienceObject").GetValueByName("offset").QueryInterface("CATI3DExperienceObject");t.SetValueByName("x",e.x),t.SetValueByName("y",e.y)},GetOffset:function(){var e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("offset").QueryInterface("CATI3DExperienceObject");return{x:e.GetValueByName("x"),y:e.GetValueByName("y")}},SetMinimumDimension:function(e,t,i){var n=this.QueryInterface("CATI3DExperienceObject").GetValueByName("dimension").QueryInterface("CATI3DExperienceObject");n.SetValueByName("width",e),n.SetValueByName("height",t),i&&n.SetValueByName("mode",i)},GetMinimumDimension:function(){var e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("dimension").QueryInterface("CATI3DExperienceObject");return{width:e.GetValueByName("width"),height:e.GetValueByName("height"),mode:e.GetValueByName("mode")}},GetDimension:function(){var e=this.QueryInterface("CATI3DXUIRep").Get();return{width:e.clientWidth,height:e.clientHeight}},SetAttachment:function(e,t){var i=this.QueryInterface("CATI3DExperienceObject").GetValueByName("attachment").QueryInterface("CATI3DExperienceObject");i.SetValueByName("side",e),i.SetValueByName("target",t)},GetAttachment:function(){var e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("attachment").QueryInterface("CATI3DExperienceObject");return{side:e.GetValueByName("side"),target:e.GetValueByName("target")}},SetEnable:function(e){this.QueryInterface("CATI3DExperienceObject").SetValueByName("enabled",e)},GetEnable:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("enabled")},SetOpacity:function(e){this.QueryInterface("CATI3DExperienceObject").SetValueByName("opacity",e)},GetOpacity:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("opacity")},SetVisible:function(e){this.QueryInterface("CATI3DExperienceObject").SetValueByName("visible",e)},GetVisible:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("visible")}})}),define("DS/StudioUIActorModelWeb/interfaces/CATICXPWebViewer",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(e,t){"use strict";return t.singleton({interfaceName:"CATICXPWebViewer",required:{ExecuteScript:function(){},SendMessage:function(){}},optional:{}})}),define("DS/StudioUIActorModelWeb/controls/CXPImageButtonControl",["UWA/Core","DS/Controls/Abstract","css!DS/StudioUIActorModelWeb/style/CXPImageButtonControl.css","DS/Utilities/Dom","DS/Core/PointerEvents"],function(e,t,i,n,s){"use strict";function r(e,t,i){t&&this.removeEventListener(e,t),i&&this.addEventListener(e,i)}function a(){this.enabled?this._isPressed&&this._isHovered?this.elements.img.src=this.pressedImage:this._isHovered?this.elements.img.src=this.hoveredImage:this.elements.img.src=this.normalImage:this.elements.img.src=this.disabledImage}return t.inherit({publishedProperties:{normalImage:{defaultValue:"",type:"string"},pressedImage:{defaultValue:"",type:"string"},hoveredImage:{defaultValue:"",type:"string"},disabledImage:{defaultValue:"",type:"string"},enabled:{defaultValue:!0,type:"boolean"},onClick:{defaultValue:void 0,type:"function"},onDoubleClick:{defaultValue:void 0,type:"function"},onRightClick:{defaultValue:void 0,type:"function"},onEnter:{defaultValue:void 0,type:"function"},onExit:{defaultValue:void 0,type:"function"},onPress:{defaultValue:void 0,type:"function"},onRelease:{defaultValue:void 0,type:"function"},onHover:{defaultValue:void 0,type:"function"}},_preBuildView:function(t){this.elements.container=new e.Element("div",{class:"cxp-controls-imagebutton",tabindex:0}),this._parent(t)},buildView:function(){this._parent(),this.elements.img=e.createElement("img").inject(this.elements.container),this.elements.img.setAttribute("draggable",!1),this._isPressed=!1,this._isHovered=!1},handleEvents:function(){var e=this;n.addEventOnElement(this,this.elements.container,"click",function(){e.enabled&&e.fire("imagebuttonclick")}),n.addEventOnElement(this,this.elements.container,s.POINTERHIT,function(t){if(2===t.multipleHitCount){if(!e.enabled)return;e.fire("imagebuttondoubleclick")}}),n.addEventOnElement(this,this.elements.container,"contextmenu",function(){e.enabled&&e.fire("imagebuttonrightclick")}),n.addEventOnElement(this,this.elements.container,s.POINTERDOWN,function(t){e.enabled&&(e._isPressed=!0,a.call(e),e.fire("imagebuttonpress"),t.originalEvent&&"touchstart"===t.originalEvent.type&&e.elements.container.setAttribute("hasHoverPrevented",""))}),n.addEventOnElement(this,this.elements.container,s.POINTERUP,function(){e.enabled&&(e._isPressed=!1,a.call(e),e.fire("imagebuttonrelease"))}),n.addEventOnElement(this,this.elements.container,s.POINTERMOVE,function(t){e.enabled&&(t.originalEvent&&"mousemove"===t.originalEvent.type&&e.elements.container.removeAttribute("hasHoverPrevented"),e.fire("imagebuttonhover"))}),n.addEventOnElement(this,this.elements.container,"pointerenter",function(t){e.enabled&&(e._isHovered=!0,e._isPressed=1==(1&t.buttons),a.call(e),e.fire("imagebuttonenter"))}),n.addEventOnElement(this,this.elements.container,"pointerleave",function(){e.enabled&&(e._isHovered=!1,a.call(e),e.fire("imagebuttonexit"))})},_applyNormalImage:function(){a.call(this)},_applyPressedImage:function(){a.call(this)},_applyDisabledImage:function(){a.call(this)},_applyHoveredImage:function(){a.call(this)},_applyEnable:function(){a.call(this)},_applyOnClick:function(e){r.call(this,"imagebuttonclick",e,this.onClick)},_applyOnDoubleClick:function(e){r.call(this,"imagebuttondoubleclick",e,this.onDoubleClick)},_applyOnRightClick:function(e){r.call(this,"imagebuttonrightclick",e,this.onRightClick)},_applyOnEnter:function(e){r.call(this,"imagebuttonenter",e,this.onEnter)},_applyOnExit:function(e){r.call(this,"imagebuttonexit",e,this.onExit)},_applyOnPress:function(e){r.call(this,"imagebuttonpress",e,this.onPress)},_applyOnRelease:function(e){r.call(this,"imagebuttonrelease",e,this.onRelease)},_applyOnHover:function(e){r.call(this,"imagebuttonhover",e,this.onHover)},_applyProperties:function(e){this._parent(e),(this.isDirty("normalImage")||this.isDirty("pressedImage")||this.isDirty("disabledImage")||this.isDirty("hoveredImage")||this.isDirty("enabled"))&&a.call(this),this.isDirty("onClick")&&this._applyOnClick(e.onClick),this.isDirty("onDoubleClick")&&this._applyOnDoubleClick(e.onDoubleClick),this.isDirty("onRightClick")&&this._applyOnRightClick(e.onRightClick),this.isDirty("onPress")&&this._applyOnPress(e.onPress),this.isDirty("onRelease")&&this._applyOnRelease(e.onRelease),this.isDirty("onEnter")&&this._applyOnEnter(e.onEnter),this.isDirty("onExit")&&this._applyOnEnter(e.onExit),this.isDirty("onHover")&&this._applyOnEnter(e.onHover)}})}),define("DS/StudioUIActorModelWeb/interfaces/CATI3DXUIRep",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(e,t){"use strict";return t.singleton({Attachment:{ESide:{eTopLeft:0,eTop:1,eTopRight:2,eLeft:3,eCenter:4,eRight:5,eBottomLeft:6,eBottom:7,eBottomRight:8,e3DActor:9}},interfaceName:"CATI3DXUIRep",required:{Get:function(){},Refresh:function(){},RegisterPlayEvents:function(){},ReleasePlayEvents:function(){},SetIndex:function(){}},optional:{}})}),define("DS/StudioUIActorModelWeb/controls/CXPProductViewerControl",["UWA/Core","DS/Controls/Abstract"],function(e,t){"use strict";function i(){if(this.product&&this.product.QueryInterface("CATI3DGeoVisu")){var e=this.product._experienceBase.getManager("CAT3DXPreviewManager"),t=this.elements.container.offsetWidth,i=this.elements.container.offsetHeight;0!==t&&0!==i&&e.getPreview(this.product.QueryInterface("CATI3DGeoVisu"),t,i).done(e=>{this.elements.container.style.background="url('"+e+"')",this.elements.container.style.backgroundSize="100% 100%"})}else this.elements.container.background="inherit"}return t.inherit({publishedProperties:{product:{defaultValue:null,type:"object"}},_preBuildView:function(t){this.elements.container=new e.Element("div"),this.elements.container.style.width="100%",this.elements.container.style.height="100%",this._parent(t)},_applyProduct:function(){i.call(this)},_applyWidth:function(){i.call(this)},_applyHeight:function(){i.call(this)},_applyProperties:function(e){this._parent(e),this.isDirty("product")&&this._applyProduct(e.product),this.isDirty("disabled")&&this._applyDisabled(e.disabled)},refreshProductViewer(){i.call(this)}})}),define("DS/StudioUIActorModelWeb/extensions/CATECXPUIActor",["UWA/Core"],function(e){"use strict";return e.Class.extend({SetOffset:function(e){var t=this.QueryInterface("CATI3DExperienceObject").GetValueByName("offset").QueryInterface("CATI3DExperienceObject");t.SetValueByName("x",e.x),t.SetValueByName("y",e.y)},GetOffset:function(){var e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("offset").QueryInterface("CATI3DExperienceObject");return{x:e.GetValueByName("x"),y:e.GetValueByName("y")}},SetMinimumDimension:function(e,t,i){var n=this.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject");n.SetValueByName("width",e),n.SetValueByName("height",t),i&&n.SetValueByName("mode",i)},GetMinimumDimension:function(){var e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject");return{width:e.GetValueByName("width"),height:e.GetValueByName("height"),mode:e.GetValueByName("mode")}},GetDimension:function(){var e=this.QueryInterface("CATI3DXUIRep").Get();return{width:e.clientWidth,height:e.clientHeight}},SetAttachment:function(e,t){var i=this.QueryInterface("CATI3DExperienceObject").GetValueByName("attachment").QueryInterface("CATI3DExperienceObject");i.SetValueByName("side",e),i.SetValueByName("target",t)},GetAttachment:function(){var e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("attachment").QueryInterface("CATI3DExperienceObject");return{side:e.GetValueByName("side"),target:e.GetValueByName("target")}},SetEnable:function(e){this.QueryInterface("CATI3DExperienceObject").SetValueByName("enable",e)},GetEnable:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("enable")},SetOpacity:function(e){this.QueryInterface("CATI3DExperienceObject").SetValueByName("opacity",255*e)},GetOpacity:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("opacity")/255},SetVisible:function(e){this.QueryInterface("CATI3DExperienceObject").SetValueByName("visible",e)},GetVisible:function(){return this.QueryInterface("CATI3DExperienceObject").GetValueByName("visible")}})}),define("DS/StudioUIActorModelWeb/extensions/CATECXPUIActorModifiable",["UWA/Core","DS/CAT3DExpModel/extensions/CATEModifiable"],function(e,t){"use strict";return t.extend({_getVCXPropertyValue:function(e){if("opacity"===e){var t=this._parent(e);return t.SetValue(t.GetValue()/255),t}return this._parent(e)},_getVariableValue:function(e,t){return"opacity"===e?255*this._parent(e,t):this._parent(e,t)}})}),define("DS/StudioUIActorModelWeb/controls/CXPGalleryControl",["UWA/Core","DS/Controls/Abstract","css!DS/StudioUIActorModelWeb/style/CXPGalleryControl.css","DS/Utilities/Dom","DS/Core/PointerEvents"],function(e,t,i,n,s){"use strict";function r(e,t,i){t&&this.removeEventListener(e,t),i&&this.addEventListener(e,i)}var a=t.inherit({publishedProperties:{orientation:{defaultValue:"vertical",type:"string"},items:{defaultValue:[]},stretchToContent:{defaultValue:!0},selectionFeedback:{defaultValue:!0},itemMinWidth:{defaultValue:200},itemMinHeight:{defaultValue:140},onClick:{defaultValue:void 0,type:"function"},onDoubleClick:{defaultValue:void 0,type:"function"},onEnter:{defaultValue:void 0,type:"function"},onExit:{defaultValue:void 0,type:"function"},onHover:{defaultValue:void 0,type:"function"},onClickOnIndex:{defaultValue:void 0,type:"function"},onDoubleClickOnIndex:{defaultValue:void 0,type:"function"},onEnterOnIndex:{defaultValue:void 0,type:"function"},onExitOnIndex:{defaultValue:void 0,type:"function"},onHoverOnIndex:{defaultValue:void 0,type:"function"}},_preBuildView:function(t){this.elements.container=e.createElement("div",{class:"cxp-controls-gallery"}),this._parent(t)},buildView:function(){this._parent();let t=e.createElement("div",{class:"cxp-controls-gallery-centeringcontainer"}).inject(this.elements.container);this.elements.itemsContainer=e.createElement("div",{class:"cxp-controls-gallery-itemscontainer"}).inject(t),this.elements.itemsContainer.style.setProperty("--minWidth",this.itemMinWidth+"px"),this.elements.itemsContainer.style.setProperty("--minHeight",this.itemMinHeight+"px"),this._viewItems=[],this._selectedItem=null,this._preselectedItem=null},updateItem:function(e,t){if(e>=this._viewItems.length)return void console.error("item "+e+" on gallery does not exist");let i=this._viewItems[e];for(;i.firstChild;)i.removeChild(i.lastChild);this.items[e]=t,this._buildItem(this.items[e],e,i)},_applyProperties:function(e){this._parent(e),this.isDirty("items")&&this._applyItems(e.items),this.isDirty("orientation")&&this._applyOrientation(e.orientation),this.isDirty("stretchToContent")&&this._applyStretchToContent(e.stretchToContent),this.isDirty("itemMinWidth")&&this._applyItemMinWidth(e.minWidth),this.isDirty("itemMinHeight")&&this._applyItemMinHeight(e.minHeight),this.isDirty("onClick")&&this._applyOnClick(e.onClick),this.isDirty("onDoubleClick")&&this._applyOnDoubleClick(e.onDoubleClick),this.isDirty("onEnter")&&this._applyOnEnter(e.onEnter),this.isDirty("onExit")&&this._applyOnEnter(e.onExit),this.isDirty("onHover")&&this._applyOnEnter(e.onHover)},_applyItems:function(){this.elements.itemsContainer.empty(),this._onCleanItems();for(let t=0;t<this.items.length;++t){let i=e.createElement("div",{class:"cxp-controls-gallery-item"}).inject(this.elements.itemsContainer);this._buildItem(this.items[t],t,i),this._viewItems[t]=i}},_applyOrientation:function(){"horizontal"===this.orientation||"vertical"===this.orientation?this.elements.container.setAttribute("orientation",this.orientation):console.error("wrong orientation, expected 'horizontal' or 'vertical', got '"+this.orientation+"'")},_applyStretchToContent:function(){this.stretchToContent?this.elements.container.setAttribute("stretch",!0):this.elements.container.setAttribute("stretch",!1)},_applyItemMinWidth:function(){this.elements.itemsContainer.style.setProperty("--minWidth",this.itemMinWidth+"px")},_applyItemMinHeight:function(){this.elements.itemsContainer.style.setProperty("--minHeight",this.itemMinHeight+"px")},_applyOnClick:function(e){r.call(this,"galleryclick",e,this.onClick)},_applyOnDoubleClick:function(e){r.call(this,"gallerydoubleclick",e,this.onDoubleClick)},_applyOnEnter:function(e){r.call(this,"galleryenter",e,this.onEnter)},_applyOnExit:function(e){r.call(this,"galleryexit",e,this.onExit)},_applyOnHover:function(e){r.call(this,"galleryhover",e,this.onHover)},_buildItem:function(t,i,r){var a=this;n.addEventOnElement(this,r,"click",function(){a.disabled||(a.selectionFeedback&&(e.is(a._selectedItem)&&a._selectedItem.setAttribute("selected",!1),a._selectedItem=r,r.setAttribute("selected",!0)),a.fire("galleryclick",{index:i}))}),n.addEventOnElement(this,r,s.POINTERHIT,function(e){if(2===e.multipleHitCount){if(a.disabled)return;a.fire("gallerydoubleclick",{index:i})}}),n.addEventOnElement(this,r,s.POINTERMOVE,function(){a.disabled||a.fire("galleryhover",{index:i})}),n.addEventOnElement(this,r,"pointerenter",function(){a.disabled||(a.selectionFeedback&&(e.is(a._preselectedItem)&&a._preselectedItem.setAttribute("preselected",!1),a._preselectedItem=r,r.setAttribute("preselected",!0)),a.fire("galleryenter",{index:i}))}),n.addEventOnElement(this,r,"pointerleave",function(){a.disabled||(a.selectionFeedback&&a._preselectedItem===r&&(a._preselectedItem.setAttribute("preselected",!1),a._preselectedItem=null),a.fire("galleryexit",{index:i}))})},_onCleanItems:function(){this._viewItems=[]}});return a.CreateLabeledItem=function(t,i){let n=e.createElement("div").inject(t);n.position="relative",n.style.flex="1 1 0%",n.style.minWidth="var(--minWidth)",n.style.minHeight="var(--minHeight)",n.style.height="1px";let s=e.createElement("div").inject(t);s.style.paddingTop="2px",s.style.textAlign="center",s.style.flex="0 0 auto";let r=e.createElement("span",{text:i}).inject(s);return r.style.fontWeight="bold",r.style.fontSize="11px",n},a}),define("DS/StudioUIActorModelWeb/managers/W3AACAT3DXUIManager",["UWA/Core","DS/WebApplicationBase/W3AAManager"],function(e,t){"use strict";return e.Class.extend(t,{update:function(){this.GetObject()._update()}})}),define("DS/StudioUIActorModelWeb/controls/CXPCameraViewerControl",["UWA/Core","DS/Controls/Abstract","css!DS/StudioUIActorModelWeb/style/CXPCameraViewerControl.css","DS/Utilities/Dom","DS/Core/PointerEvents","DS/CATCXPModel/CATCXPRenderUtils","DS/Visualization/WebGLV6Viewer","DS/Visualization/Viewpoint"],function(e,t,i,n,s,r,a,o){"use strict";function l(){r.setViewpointFromCamera(this._cameraViewer.currentViewpoint,this.camera,0),this._cameraViewer.render()}function h(e,t,i){t&&this.removeEventListener(e,t),i&&this.addEventListener(e,i)}return t.inherit({publishedProperties:{liveUpdate:{defaultValue:!1,type:"boolean"},camera:{defaultValue:null,type:"object"},onClick:{defaultValue:void 0,type:"function"},onDoubleClick:{defaultValue:void 0,type:"function"},onRightClick:{defaultValue:void 0,type:"function"},onEnter:{defaultValue:void 0,type:"function"},onExit:{defaultValue:void 0,type:"function"},onPress:{defaultValue:void 0,type:"function"},onRelease:{defaultValue:void 0,type:"function"},onHover:{defaultValue:void 0,type:"function"}},_preBuildView:function(t){this.elements.container=new e.Element("div",{class:"cxp-cameraviewer-container",tabindex:0}),this._parent(t)},_applyCamera:function(){if(!this._cameraViewer){if(!this.camera)return;(function(){var e,t=this.camera.GetObject()._experienceBase.webApplication.app;t&&t.getOptions&&(e=t.getOptions());var i=e&&e.viewerOptions?e.viewerOptions:{};i.div=this.elements.container,i.multiViewer=!0,i.multiViewerFix=!0,i.highlight={activated:!1,displayHL:!1},i.defaultLights=!1,this._cameraViewer=new a(i),this._cameraViewer.setVisuEnv("None"),this._cameraViewer.canvas.style.pointerEvents="none";var n=new o({viewer:this._cameraViewer});this._cameraViewer.addViewpoint(n)}).apply(this)}(function(){this._cameraViewer.getSceneGraphOverrideSetManager().clear(),this._content&&this._cameraViewer.removeNode(this._content.GetNode());var e=this.camera._experienceBase.getManager("CAT3DXVisuManager");this._content=e.getContent(),this._cameraViewer.addNode(this._content.GetNode());var t=this._content.GetPathElement();this._cameraViewer.getSceneGraphOverrideSetManager().pushSceneGraphOverrideSet(e.getOverrideSet(),{substractivePath:t.getLength()>1?t:void 0})}).apply(this),l.apply(this);let e=this.camera._experienceBase.getManager("CAT3DXVisuManager");this.liveUpdate&&!this.disabled?this._updateCallback||(this._updateCallback=l.bind(this),e.pushVisuRefreshCB(this._updateCallback)):this._updateCallback&&(e.removeVisuRefreshCB(this._updateCallback),this._updateCallback=null)},_applyLiveUpdate:function(){if(this.camera)if(this.liveUpdate&&!this.disabled){let e=this.camera._experienceBase.getManager("CAT3DXVisuManager");l.apply(this),this._updateCallback||(this._updateCallback=l.bind(this),e.pushVisuRefreshCB(this._updateCallback))}else if(this._updateCallback){this.camera._experienceBase.getManager("CAT3DXVisuManager").removeVisuRefreshCB(this._updateCallback),this._updateCallback=null}},_applyDisabled:function(e){if(this._parent(e),this.disabled){if(this._updateCallback){this.camera._experienceBase.getManager("CAT3DXVisuManager").removeVisuRefreshCB(this._updateCallback),this._updateCallback=null}}else if(this.liveUpdate&&!this._updateCallback){let e=this.camera._experienceBase.getManager("CAT3DXVisuManager");this._updateCallback=l.bind(this),e.pushVisuRefreshCB(this._updateCallback)}},_applyOnClick:function(e){h.call(this,"cameraviewerclick",e,this.onClick)},_applyOnDoubleClick:function(e){h.call(this,"cameraviewerdoubleclick",e,this.onDoubleClick)},_applyOnRightClick:function(e){h.call(this,"cameraviewerrightclick",e,this.onRightClick)},_applyOnEnter:function(e){h.call(this,"cameraviewerenter",e,this.onEnter)},_applyOnExit:function(e){h.call(this,"cameraviewerexit",e,this.onExit)},_applyOnPress:function(e){h.call(this,"cameraviewerpress",e,this.onPress)},_applyOnRelease:function(e){h.call(this,"cameraviewerrelease",e,this.onRelease)},_applyOnHover:function(e){h.call(this,"cameraviewerhover",e,this.onHover)},handleEvents:function(){var e=this;n.addEventOnElement(this,this.elements.container,"click",function(){e.disabled||e.fire("cameraviewerclick")}),n.addEventOnElement(this,this.elements.container,s.POINTERHIT,function(t){if(2===t.multipleHitCount){if(e.disabled)return;e.fire("cameraviewerdoubleclick")}}),n.addEventOnElement(this,this.elements.container,"contextmenu",function(){e.disabled||e.fire("cameraviewerrightclick")}),n.addEventOnElement(this,this.elements.container,s.POINTERDOWN,function(){e.disabled||e.fire("cameraviewerpress")}),n.addEventOnElement(this,this.elements.container,s.POINTERUP,function(){e.disabled||e.fire("cameraviewerrelease")}),n.addEventOnElement(this,this.elements.container,s.POINTERMOVE,function(){e.disabled||e.fire("cameraviewerhover")}),n.addEventOnElement(this,this.elements.container,"pointerenter",function(){e.disabled||e.fire("cameraviewerenter")}),n.addEventOnElement(this,this.elements.container,"pointerleave",function(){e.disabled||e.fire("cameraviewerexit")})},_applyProperties:function(e){this._parent(e),this.isDirty("camera")&&this._applyCamera(e.camera),this.isDirty("liveUpdate")&&this._applyLiveUpdate(e.liveUpdate),this.isDirty("disabled")&&this._applyDisabled(e.disabled),this.isDirty("onClick")&&this._applyOnClick(e.onClick),this.isDirty("onDoubleClick")&&this._applyOnDoubleClick(e.onDoubleClick),this.isDirty("onRightClick")&&this._applyOnRightClick(e.onRightClick),this.isDirty("onPress")&&this._applyOnPress(e.onPress),this.isDirty("onRelease")&&this._applyOnRelease(e.onRelease),this.isDirty("onEnter")&&this._applyOnEnter(e.onEnter),this.isDirty("onExit")&&this._applyOnEnter(e.onExit),this.isDirty("onHover")&&this._applyOnEnter(e.onHover)}})}),define("DS/StudioUIActorModelWeb/CXPUIActor",["UWA/Core","DS/SceneGraphNodes/CSS2DNode","DS/Visualization/ThreeJS_DS"],function(e,t,i){"use strict";return e.Class.extend({init:function(e){this._uiActor=e,this._mapper=null},Dispose:function(){this._container=null,this._2DNode&&this._targetNode&&(this._targetNode.removeChild(this._2DNode),this._2DNode=null,this._targetNode=null),this._uiActor=null,this._mapper&&(this._mapper.Dispose(),this._mapper=null)},getContainer:function(){return this._container||(this._container=this._createContainer()),this._container},setUIMapper:function(e){this._mapper=e},_createContainer:function(){return this._container=e.createElement("div"),this._container.style.pointerEvents="none",this._container.style.position="absolute",Object.defineProperty(this,"left",{enumerable:!0,configurable:!0,get:function(){return this._left},set:function(e){this._left=e,this._container.style.left=this._left}}),Object.defineProperty(this,"top",{enumerable:!0,configurable:!0,get:function(){return this._top},set:function(e){this._top=e,this._container.style.top=this.top}}),Object.defineProperty(this,"clientWidth",{enumerable:!0,configurable:!0,get:function(){return this._container.clientWidth}}),Object.defineProperty(this,"clientHeight",{enumerable:!0,configurable:!0,get:function(){return this._container.clientHeight}}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,get:function(){return this._visible},set:function(e){this._visible=e,e?(this._container.style.visibility="inherit",this._isPlaying&&(this._container.style.pointerEvents="auto")):(this._container.style.visibility="hidden",this._container.style.pointerEvents="none")}}),Object.defineProperty(this,"minimumDimension",{enumerable:!0,configurable:!0,get:function(){return{mode:this._mode,width:this._width,height:this._height}},set:function(e){this._widthCallback&&this._mapper.stopListening(null,"width.CHANGED",this._widthCallback),this._heightCallback&&this._mapper.stopListening(null,"height.CHANGED",this._heightCallback),this._modeCallback&&this._mapper.stopListening(null,"mode.CHANGED",this._modeCallback);var t=e.QueryInterface("CATI3DExperienceObject"),i=this;this._widthCallback=function(e){i.width=e},this._heightCallback=function(e){i.height=e},this._modeCallback=function(e){i._mode=e,i.width=t.GetValueByName("width"),i.height=t.GetValueByName("height")},this._mapper.listenTo(t,"width.CHANGED",this._widthCallback),this._mapper.listenTo(t,"height.CHANGED",this._heightCallback),this._mapper.listenTo(t,"mode.CHANGED",this._modeCallback),this._mode=t.GetValueByName("mode"),this.width=t.GetValueByName("width"),this.height=t.GetValueByName("height")}}),Object.defineProperty(this,"zIndex",{enumerable:!0,configurable:!0,get:function(){return this._zIndex},set:function(e){this._zIndex=e,this._container.style.zIndex=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return this._width},set:function(e){this._width=e,1===this._mode?this._container.style.width=this._width+"vw":this._container.style.width=this._width+"px"}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return this._height},set:function(e){this._height=e,1===this._mode?this._container.style.height=this._height+"vh":this._container.style.height=this._height+"px"}}),this._container},isAttachTo3D:function(){return e.is(this._3dAttachedObject)},detachFrom3D:function(){if(this.isAttachTo3D()){var e=this._uiActor.GetObject()._experienceBase.getManager("CAT3DXVisuManager");e.removeVisuRefreshCB(this._3dAttachedObject.visuRefreshCallback),e.getViewer().getRootNode().removeChild(this._3dAttachedObject.node2d),delete this._3dAttachedObject;var t=this._uiActor.QueryInterface("CATI3DExperienceObject").GetParent().QueryInterface("CATI3DXUIRep");this.getContainer().inject(t.Get())}},attachTo3D:function(n,s,r){if(!e.is(this._3dAttachedObject)){this._3dAttachedObject={};var a=this._uiActor.GetObject()._experienceBase.getManager("CAT3DXVisuManager"),o=a.getViewer();this._3dAttachedObject.node2d=new t({html:this.getContainer(),name:"2DNode"+this._uiActor.QueryInterface("CATI3DExperienceObject").GetValueByName("_varName"),position:new i.Vector3}),this._3dAttachedObject.node2d.excludeFromHighlight(!0,!0),o.getRootNode().addChild(this._3dAttachedObject.node2d);var l=this;this._3dAttachedObject.visuRefreshCallback=function(){var e;e=l._3dAttachedObject.target?l._3dAttachedObject.target.QueryInterface("CATI3DGeoVisu").GetPathElement().getWorldMatrix(o):new i.Matrix4,l._3dAttachedObject.node2d.getMatrix().equals(e)||(l._3dAttachedObject.node2d.setMatrix(e),l._3dAttachedObject.node2d.updatePosition())},a.pushVisuRefreshCB(this._3dAttachedObject.visuRefreshCallback)}this._3dAttachedObject.target=n,this._3dAttachedObject.node2d.setOffset(new i.Vector2(s,r)),this._3dAttachedObject.visuRefreshCallback()},get2DNode:function(){if(this.isAttachTo3D())return this._3dAttachedObject.node2d},inject:function(e){this.isAttachTo3D()||this.getContainer().inject(e)},appendChild:function(e){this.getContainer().appendChild(e)},remove:function(){this.getContainer().remove()},registerPlayEvents:function(){this._isPlaying=!0,this.visible?this._container.style.pointerEvents="auto":this._container.style.pointerEvents="none"},releasePlayEvents:function(){this._isPlaying=!1,this._container.style.pointerEvents="none"}})}),define("DS/StudioUIActorModelWeb/CXPUIMapper",["UWA/Core","UWA/Class/Listener"],function(e,t){"use strict";return t.extend({init:function(e,t,i){e.setUIMapper&&e.setUIMapper(this);for(var n=0;n<i.length;n++)this._createBinding(e,i[n].ui,t,i[n].model,i[n].func)},_getModelForBinding:function(e,t){var i=e.split(".");if(0!==i.length){for(var n=t,s=i[0],r=0;r<i.length-1;){if(!(n=n.QueryInterface("CATI3DExperienceObject").GetValueByName(i[r])))return void console.error("UIMapper : invalid model variable path");s=i[++r]}return{object:n,variableName:s}}console.error("UIMapper : invalid model variable path")},_getUIVariable:function(e,t){var i=e.split(".");if(0!==i.length){for(var n=0,s=t;n<i.length-1;){if(!s)return void console.error("UIMapper : invalid UI variable path");s=s[i[n]],n++}return{variableName:i[i.length-1],parent:s}}console.error("UIMapper : invalid UI variable path")},_createBinding:function(e,t,i,n,s){if(0!==t.split(".").length){var r=this._getModelForBinding(n,i),a=r.object,o=r.variableName,l=this._getUIVariable(t,e),h=l.parent,c=l.variableName,u=function(e){var t;t=s?s(e):e,h[c]=t};if(a&&o){var d=a.QueryInterface("CATI3DExperienceObject");this.listenTo(d,o+".CHANGED",function(e){u(e)}),u(d.GetValueByName(o))}else console.warn("UIMapper : can t find variable "+n)}else console.error("UIMapper : invalid UI variable path")},Dispose:function(){this.stopListening()}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIActorUIRep",["UWA/Core","UWA/Class/Listener","DS/StudioUIActorModelWeb/interfaces/CATI3DXUIRep","DS/Visualization/ThreeJS_DS"],function(e,t,i,n){"use strict";return e.Class.extend(t,{init:function(){this._parent(),this._UIActorRep=null,this._frameChanges={},this._refreshAtNextFrame=!1},Dispose:function(){this._parent(),this.stopListening(),this._UIActorRep.Dispose(),this._UIActorRep=null,this._frameChanges={},this._refreshAtNextFrame=!1},_Create:function(){var e=this,t=this.QueryInterface("CATI3DExperienceObject"),i=t.GetValueByName("data");if(i){var n=i.QueryInterface("CATI3DExperienceObject"),s=this.GetObject()._experienceBase.getManager("CAT3DXUIManager").getFactory().createRep(n.GetValueByName("__configurationName__"),t);return this.listenTo(t,"attachment.CHANGED",function(){e._addFrameChanges("attachmentListener",e._createOrRefreshAttachmentListeners)}),this.listenTo(t,"minimumDimension.CHANGED",function(){e._addFrameChanges("minimumDimension",e._createOrRefreshMinimumDimensionListeners)}),this.listenTo(t,"offset.CHANGED",function(){e._addFrameChanges("offsetListener",e._createOrRefreshOffsetListeners)}),this._addFrameChanges("attachmentListener",e._createOrRefreshAttachmentListeners),this._addFrameChanges("minimumDimensionListener",e._createOrRefreshMinimumDimensionListeners),this._addFrameChanges("offsetListener",e._createOrRefreshOffsetListeners),s}return this.GetObject()._experienceBase.getManager("CAT3DXUIManager").getFactory().createRep("undefined",t)},_createOrRefreshAttachmentListeners:function(){this.stopListening(null,"side.CHANGED"),this.stopListening(null,"target.CHANGED");var e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("attachment").QueryInterface("CATI3DExperienceObject"),t=this;this.listenTo(e.QueryInterface("CATI3DExperienceObject"),"side.CHANGED",function(){t._addFrameChanges("attachment",t._refreshAttachment)}),this.listenTo(e.QueryInterface("CATI3DExperienceObject"),"target.CHANGED",function(){t._addFrameChanges("attachment",t._refreshAttachment)}),this._addFrameChanges("attachment",this._refreshAttachment)},_createOrRefreshOffsetListeners:function(){this.stopListening(null,"x.CHANGED"),this.stopListening(null,"y.CHANGED");var e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("offset").QueryInterface("CATI3DExperienceObject"),t=this;this.listenTo(e.QueryInterface("CATI3DExperienceObject"),"x.CHANGED",function(){t._addFrameChanges("offset",t._refreshOffset)}),this.listenTo(e.QueryInterface("CATI3DExperienceObject"),"y.CHANGED",function(){t._addFrameChanges("offset",t._refreshOffset)}),this._addFrameChanges("offset",this._refreshOffset)},_createOrRefreshMinimumDimensionListeners:function(){this.stopListening(null,"width.CHANGED"),this.stopListening(null,"height.CHANGED"),this.stopListening(null,"mode.CHANGED");var e=this.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject"),t=this;this.listenTo(e.QueryInterface("CATI3DExperienceObject"),"width.CHANGED",function(){t._addFrameChanges("offset",t._refreshOffset)}),this.listenTo(e.QueryInterface("CATI3DExperienceObject"),"height.CHANGED",function(){t._addFrameChanges("offset",t._refreshOffset)}),this.listenTo(e.QueryInterface("CATI3DExperienceObject"),"mode.CHANGED",function(){t._addFrameChanges("offset",t._refreshOffset)}),this._addFrameChanges("offset",this._refreshOffset)},_refreshAttachment:function(){var e=this.QueryInterface("CATI3DExperienceObject"),t=e.GetValueByName("attachment").QueryInterface("CATI3DExperienceObject");if(t.GetValueByName("side")===i.Attachment.ESide.e3DActor){var n=e.GetValueByName("offset").QueryInterface("CATI3DExperienceObject"),s=n.GetValueByName("x"),r=n.GetValueByName("y");this._UIActorRep.attachTo3D(t.GetValueByName("target"),s,r)}else this._UIActorRep.isAttachTo3D()&&this._UIActorRep.detachFrom3D();this._addFrameChanges("offset",this._refreshOffset)},_refreshOffset:function(){var e=this.QueryInterface("CATI3DExperienceObject"),t=e.GetValueByName("attachment").QueryInterface("CATI3DExperienceObject").GetValueByName("side"),s=this.QueryInterface("CATICXPUIActor").GetDimension(),r=s.width,a=s.height,o=this.QueryInterface("CATICXPUIActor").GetMinimumDimension();if(t===i.Attachment.ESide.eTopLeft||0!==r||0!==a||!e.GetValueByName("visible")||0===o.width&&0===o.height){var l,h,c=e.GetValueByName("offset").QueryInterface("CATI3DExperienceObject"),u=c.GetValueByName("x"),d=c.GetValueByName("y");switch(t){case i.Attachment.ESide.eTopLeft:l=u+"px",h=d+"px";break;case i.Attachment.ESide.eTop:l="calc(50% + "+(u-r/2)+"px)",h=d+"px";break;case i.Attachment.ESide.eTopRight:l="calc(100% + "+(u-r)+"px)",h=d+"px";break;case i.Attachment.ESide.eLeft:l=u+"px",h="calc(50% + "+(d-a/2)+"px)";break;case i.Attachment.ESide.eCenter:l="calc(50% + "+(u-r/2)+"px)",h="calc(50% + "+(d-a/2)+"px)";break;case i.Attachment.ESide.eRight:l="calc(100% + "+(u-r)+"px)",h="calc(50% + "+(d-a/2)+"px)";break;case i.Attachment.ESide.eBottomLeft:l=u+"px",h="calc(100% + "+(d-a)+"px)";break;case i.Attachment.ESide.eBottom:l="calc(50% + "+(u-r/2)+"px)",h="calc(100% + "+(d-a)+"px)";break;case i.Attachment.ESide.eBottomRight:l="calc(100% + "+(u-r)+"px)",h="calc(100% + "+(d-a)+"px)";break;case i.Attachment.ESide.e3DActor:l="0px",h="0px",this.QueryInterface("CATI3DXUIRep").Get().get2DNode().setOffset(new n.Vector2(u,d)),this.GetObject()._experienceBase.webApplication.frmWindow.getViewer().render()}this._UIActorRep.left=l,this._UIActorRep.top=h}else{var m=this;setTimeout(function(){m._addFrameChanges("offset",m._refreshOffset)},200)}},Get:function(){return null===this._UIActorRep&&(this._UIActorRep=this._Create()),this._UIActorRep},_addFrameChanges:function(e,t){this._frameChanges[e]=t,this._refreshAtNextFrame||(this._refreshAtNextFrame=!0,this.GetObject()._experienceBase.getManager("CAT3DXUIManager")._refreshUIRep(this))},Refresh:function(){for(var e in this._refreshAtNextFrame=!1,this._frameChanges)this._frameChanges.hasOwnProperty(e)&&(this._frameChanges[e].call(this),delete this._frameChanges[e])},RegisterPlayEvents:function(e){this.Get().registerPlayEvents(e)},ReleasePlayEvents:function(){this.Get().releasePlayEvents()},SetIndex:function(e){this.Get().zIndex=e}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor",["UWA/Core","UWA/Class/Listener","DS/StudioUIActorModelWeb/interfaces/CATI3DXUIRep","DS/SceneGraphNodes/CSS2DNode","DS/CAT3DExpModel/XCTExpVariable","DS/Visualization/ThreeJS_DS"],function(e,t,i,n,s,r){"use strict";return e.Class.extend(t,{init:function(){this._parent(),this._container=null,this._isPlaying=!1,this._refreshLogged=!1,this.propertiesChanged=new Set},Dispose:function(){this._parent(),this.stopListening(),this._container=null},Get:function(){return null===this._container&&this._Create(),this._Is3DAttached()?null:this._container},Refresh:function(){for(var e of(this._SetCheckDimensionDelayedMode(!0),this.propertiesChanged)){let t=e.split(".");this._UpdateProperty(t)}this._SetCheckDimensionDelayedMode(!1),this.propertiesChanged.clear(),this._refreshLogged=!1},_SetCheckDimensionDelayedMode:function(e){this._checkDimensionDelayedMode=e,!this._checkDimensionDelayedMode&&this._pendingCheckValidDimension&&(this._CheckValidDimension(),this._pendingCheckValidDimension=!1)},RegisterPlayEvents:function(){this._isPlaying=!0;var e=this.QueryInterface("CATICXPUIActor").GetVisible();this._container.style.pointerEvents=e?"auto":"none"},ReleasePlayEvents:function(){this._isPlaying=!1,this._container.style.pointerEvents="none"},SetIndex:function(e){this._container.style.zIndex=e},_Create:function(){this._CreateContainer(),this._Fill(this._container)},_Fill:function(){},_LogPropertyChanged:function(e,t){let i=this._GroupPropertyUpdate(e);this.propertiesChanged.add(i),this._refreshLogged||(this.GetObject()._experienceBase.getManager("CAT3DXUIManager")._refreshUIRep(this),this._refreshLogged=!0)},_GroupPropertyUpdate:function(e){let t=e.split(".")[0];return"dimension"===t?t:"offset"===t||"attachment"===t?"attachment":e},_UpdateProperty:function(e){let t=e[0];var i=this.QueryInterface("CATICXPUIActor");"visible"===t?this._SetVisible(i.GetVisible()):"opacity"===t?this._SetOpacity(i.GetOpacity()):"offset"===t||"attachment"===t?this._SetPositionning(i.GetAttachment(),i.GetOffset()):"dimension"===t&&this._SetDimension(i.GetMinimumDimension())},_CreateContainer:function(){this._container=e.createElement("div"),this._container.style.pointerEvents="none",this._container.style.position="absolute";var t=this.QueryInterface("CATICXPUIActor"),i=this.QueryInterface("CATI3DExperienceObject");this._SetVisible(t.GetVisible()),this._ListenVariableChanges(i,"visible"),this._SetOpacity(t.GetOpacity()),this._ListenVariableChanges(i,"opacity"),this._SetDimension(t.GetMinimumDimension()),this._ListenVariableChanges(i,"dimension"),this._SetPositionning(t.GetAttachment(),t.GetOffset()),this._ListenVariableChanges(i,"offset"),this._ListenVariableChanges(i,"attachment")},_ListenVariableChanges:function(e,t,i=""){var n=this;let r=e.GetVariableInfo(t);if(1===r.maxNumberOfValues)if(r.type===s.VarType.Object&&r.valuationMode===s.ValuationMode.AggregatingValue){{let i=e.GetValueByName(t).QueryInterface("CATI3DExperienceObject"),n=i.ListVariables();for(let e of n)"_varName"!==e&&this._ListenVariableChanges(i,e,t+".")}this.listenTo(e,t+".CHANGED",function(e){let s=e.QueryInterface("CATI3DExperienceObject");var r=s.ListVariables();for(let e of r)"_varName"!==e&&(n.stopListening(null,e+".CHANGED"),this._ListenVariableChanges(s,e,t+"."));n._LogPropertyChanged(i+t)})}else this.listenTo(e,t+".CHANGED",function(){n._LogPropertyChanged(i+t)});else{this.listenTo(e,t+".CHANGED",function(){n._LogPropertyChanged(i+t)});let s=e.GetValueByName(t);for(let e=0;e<s.length;++e){let n=s[e].QueryInterface("CATI3DExperienceObject"),r=n.ListVariables();for(let s of r){if("_varName"===s)continue;let r=t+"."+e+".";this._ListenVariableChanges(n,s,i+r)}}}},_SetVisible:function(e){e?(this._container.style.visibility="inherit",this._isPlaying?this._container.style.pointerEvents="auto":this._container.style.pointerEvents="none"):(this._container.style.visibility="hidden",this._container.style.pointerEvents="none")},_SetOpacity:function(e){this._container.style.opacity=e},_SetDimension:function(e){1===e.mode?(this._container.style.width=e.width+"vw;",this._container.style.height=e.height+"vh;"):(this._container.style.width=e.width+"px",this._container.style.height=e.height+"px"),this._CheckValidDimension()},_SetPositionning:function(t,s){if(this._attachment=t,t.side===i.Attachment.ESide.e3DActor){if(!e.is(this._node2d)){let e=this.GetObject()._experienceBase.getManager("CAT3DXVisuManager").getViewer();this._node2d=new n({html:this._container,name:"2DNode"+this.QueryInterface("CATI3DExperienceObject").GetValueByName("_varName"),position:new r.Vector3}),this._node2d.excludeFromHighlight(!0,!0),this._node2d.setMatrix(new r.Matrix4),e.getRootNode().addChild(this._node2d),this._node2d.updatePosition()}this._node2d.setOffset(new r.Vector2(s.x,s.y)),this._Update3DAttachment();this._ListenWorldMatrixChanges(this._attachment.target,this._Update3DAttachment),this.GetObject()._experienceBase.getManager("CAT3DXUIManager")._doRefreshUIActorsList=!0,this._container.style.transform="inherit",this._container.style.top="0px",this._container.style.left="0px"}else{if(e.is(this._node2d)){this.GetObject()._experienceBase.getManager("CAT3DXVisuManager").getViewer().getRootNode().removeChild(this._node2d),delete this._node2d,this._StopListeningMatrixChanges(this._Update3DAttachment),this.GetObject()._experienceBase.getManager("CAT3DXUIManager")._doRefreshUIActorsList=!0}var a=0,o=0;switch(t.side){case i.Attachment.ESide.eLeft:case i.Attachment.ESide.eCenter:case i.Attachment.ESide.eRight:a=50;break;case i.Attachment.ESide.eBottomLeft:case i.Attachment.ESide.eBottom:case i.Attachment.ESide.eBottomRight:a=100}switch(t.side){case i.Attachment.ESide.eTop:case i.Attachment.ESide.eCenter:case i.Attachment.ESide.eBottom:o=50;break;case i.Attachment.ESide.eTopRight:case i.Attachment.ESide.eRight:case i.Attachment.ESide.eBottomRight:o=100}this._container.style.top=a+"%",this._container.style.left=o+"%";var l=-a,h=-o;this._container.style.transform="translateX("+h+"%) translateY("+l+"%) translate("+s.x+"px, "+s.y+"px)"}},_CheckValidDimension:function(){if(1==this._checkDimensionDelayedMode)return void(this._pendingCheckValidDimension=!0);let e=this._GetVisuMinimumDimension(),t=function(e){var t=e.QueryInterface("CATICXPUIActor").GetMinimumDimension();if(1===t.mode){const e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);return{width:t.width*e/100,height:t.height*i/100}}return{width:t.width,height:t.height}}(this),i=!1;e.width>t.width&&(t.width=e.width,i=!0),e.height>t.height&&(t.height=e.height,i=!0),i&&function(e,t){var i=e.QueryInterface("CATICXPUIActor");if(1===i.GetMinimumDimension().mode){const e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);i.SetMinimumDimension(100*t.width/e,100*t.height/n,1)}else i.SetMinimumDimension(t.width,t.height,0)}(this,t)},_GetVisuMinimumDimension:function(){let e=this._container.style.width,t=this._container.style.height;this._container.style.width="min-content",this._container.style.height="min-content";let i={width:this._container.offsetWidth,height:this._container.offsetHeight};return this._container.style.width=e,this._container.style.height=t,i},_ListenWorldMatrixChanges:function(t,i){if(this._StopListeningMatrixChanges(i),e.is(t)){let n=t.QueryInterface("CATI3DExperienceObject");for(;e.is(n);)this.listenTo(n,"_varposition.CHANGED",i),n=n.GetParent(),e.is(n)&&(n=n.QueryInterface("CATI3DExperienceObject"))}},_StopListeningMatrixChanges:function(e){this.stopListening(null,null,e)},_Update3DAttachment:function(){var t=null;if(this._attachment.target){let i=this.GetObject()._experienceBase.getManager("CAT3DXVisuManager").getViewer();t=this._attachment.target.QueryInterface("CATI3DGeoVisu").GetPathElement().getWorldMatrix(i),e.is(t)||(console.warn("Could not retrieve world matrix for attachment. Setting referential to identity matrix"),t=new r.Matrix4)}else t=new r.Matrix4;this._node2d.getMatrix().equals(t)||(this._node2d.setMatrix(t),this._node2d.updatePosition())},_Is3DAttached:function(){return this._attachment.side===i.Attachment.ESide.e3DActor}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DImage",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor"],function(e,t){"use strict";return t.extend({_Fill:function(t){this._parent(t),this._img=e.createElement("img").inject(t),this._img.setAttribute("draggable",!1),this._img.style.width="100%",this._img.style.height="100%",this._img.style.display="inherit";let i=this.QueryInterface("CATI3DExperienceObject");this._SetImage(i.GetValueByName("image")),this._ListenVariableChanges(i,"image"),this._SetEnabled(i.GetValueByName("enabled")),this._ListenVariableChanges(i,"enabled")},_UpdateProperty:function(e){let t=e[0],i=this.QueryInterface("CATI3DExperienceObject");"enabled"===t?this._SetEnabled(i.GetValueByName("enabled")):"image"===t?this._SetImage(i.GetValueByName("image")):this._parent(e)},RegisterPlayEvents:function(e){this._parent(e);var t=this;this._img.addEventListener("click",this._clickEvent=function(){t._enabled&&e.doUIDispatchEvent("UIClickEvent")}),this._img.addEventListener("dblclick",this._dblclickEvent=function(){t._enabled&&e.doUIDispatchEvent("UIDoubleClickEvent")}),this._img.addEventListener("mouseenter",this._mouseEnterEvent=function(){t._enabled&&e.doUIDispatchEvent("UIEnterEvent")}),this._img.addEventListener("mouseleave",this._mouseLeaveEvent=function(){t._enabled&&e.doUIDispatchEvent("UIExitEvent")}),this._img.addEventListener("mousemove",this._mouseMoveEvent=function(){t._enabled&&e.doUIDispatchEvent("UIHoverEvent")}),this._img.addEventListener("mousedown",this._mouseDownEvent=function(i){t._enabled&&0===i.button&&e.doUIDispatchEvent("UIPressEvent")}),this._img.addEventListener("mouseup",this._mouseUpEvent=function(i){t._enabled&&0===i.button&&e.doUIDispatchEvent("UIReleaseEvent")}),this._img.addEventListener("contextmenu",this._contextMenuEvent=function(){t._enabled&&e.doUIDispatchEvent("UIRightClickEvent")})},ReleasePlayEvents:function(){this._parent(),this._img.removeEventListener("click",this._clickEvent),this._img.removeEventListener("dblclick",this._dblclickEvent),this._img.removeEventListener("mouseenter",this._mouseEnterEvent),this._img.removeEventListener("mouseleave",this._mouseLeaveEvent),this._img.removeEventListener("mousemove",this._mouseMoveEvent),this._img.removeEventListener("mousedown",this._mouseDownEvent),this._img.removeEventListener("mouseup",this._mouseUpEvent),this._img.removeEventListener("contextmenu",this._contextMenuEvent)},_SetImage:function(t){if(t){var i=t.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");var n=this;i.getPicture().done(function(e){n._img.src=e.src,n._img.hidden=!1})}else this._img.hidden=!0},_SetEnabled:function(e){this._enabled=e,e?(this._img.style.pointerEvents="inherit",this._img.style.filter="none"):(this._img.style.pointerEvents="none",this._img.style.filter="brightness(70%) grayscale(100%)")}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DText",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor","DS/VCXWebProperties/VCXColor"],function(e,t,i){"use strict";return t.extend({ETextAlignments:{eAlignLeft:0,eAlignCenter:1,eAlignRight:2},_Fill:function(t){this._parent(t),this._textOpacity=1,this._textColor=(new i).SetRGB(85,118,139),this._showBg=!0,this._backgroundOpacity=1,this._backgroundColor=(new i).SetRGB(255,255,255),this._showBorder=!0,this._borderColor=(new i).SetRGB(85,118,138),this._borderOpacity=1,this._labelContainer=e.createElement("div").inject(t),this._labelContainer.style.width="100%",this._labelContainer.style.height="100%",this._labelContainer.style.border="2px",this._labelContainer.style.borderStyle="solid",this._labelContainer.style.borderRadius="5px",this._labelContainer.style.padding="6px",this._labelContainer.style.boxSizing="border-box",this._label=e.createElement("span").inject(this._labelContainer),this._label.style.whiteSpace="pre",this._label.style.lineHeight="initial";let n=this.QueryInterface("CATI3DExperienceObject");this._SetAlignment(n.GetValueByName("alignment")),this._ListenVariableChanges(n,"alignment"),this._SetFont(n.GetValueByName("font")),this._ListenVariableChanges(n,"font"),this._SetFontSize(n.GetValueByName("fontSize")),this._ListenVariableChanges(n,"fontSize"),this._SetBold(n.GetValueByName("bold")),this._ListenVariableChanges(n,"bold"),this._SetItalic(n.GetValueByName("italic")),this._ListenVariableChanges(n,"italic"),this._SetText(n.GetValueByName("text")),this._ListenVariableChanges(n,"text"),this._SetTextColor(n.GetValueByName("textColor")),this._ListenVariableChanges(n,"textColor"),this._SetTextOpacity(n.GetValueByName("textOpacity")),this._ListenVariableChanges(n,"textOpacity"),this._SetShowBackground(n.GetValueByName("showBackground")),this._ListenVariableChanges(n,"showBackground"),this._SetBackgroundColor(n.GetValueByName("backgroundColor")),this._ListenVariableChanges(n,"backgroundColor"),this._SetBackgroundOpacity(n.GetValueByName("backgroundOpacity")),this._ListenVariableChanges(n,"backgroundOpacity"),this._SetShowBorder(n.GetValueByName("showBorder")),this._ListenVariableChanges(n,"showBorder"),this._SetBorderColor(n.GetValueByName("borderColor")),this._ListenVariableChanges(n,"borderColor"),this._SetBorderOpacity(n.GetValueByName("borderOpacity")),this._ListenVariableChanges(n,"borderOpacity"),this._SetEnabled(n.GetValueByName("enabled")),this._ListenVariableChanges(n,"enabled")},_UpdateProperty:function(e){let t=e[0],i=this.QueryInterface("CATI3DExperienceObject");"alignment"===t?this._SetAlignment(i.GetValueByName("alignment")):"font"===t?this._SetFont(i.GetValueByName("font")):"fontSize"===t?this._SetFontSize(i.GetValueByName("fontSize")):"bold"===t?this._SetBold(i.GetValueByName("bold")):"italic"===t?this._SetItalic(i.GetValueByName("italic")):"text"===t?this._SetText(i.GetValueByName("text")):"textColor"===t?this._SetTextColor(i.GetValueByName("textColor")):"textOpacity"===t?this._SetTextOpacity(i.GetValueByName("textOpacity")):"showBackground"===t?this._SetShowBackground(i.GetValueByName("showBackground")):"backgroundColor"===t?this._SetBackgroundColor(i.GetValueByName("backgroundColor")):"backgroundOpacity"===t?this._SetBackgroundOpacity(i.GetValueByName("backgroundOpacity")):"showBorder"===t?this._SetShowBorder(i.GetValueByName("showBorder")):"borderColor"===t?this._SetBorderColor(i.GetValueByName("borderColor")):"borderOpacity"===t?this._SetBorderOpacity(i.GetValueByName("borderOpacity")):"enabled"===t?this._SetEnabled(i.GetValueByName("enabled")):this._parent(e)},_GroupPropertyUpdate:function(e){let t=e.split(".")[0];return"backgroundColor"===t||"borderColor"===t||"textColor"===t?t:this._parent(e)},RegisterPlayEvents:function(e){this._parent(e);var t=this;this._labelContainer.addEventListener("click",this._clickEvent=function(){t._enabled&&e.doUIDispatchEvent("UIClickEvent")}),this._labelContainer.addEventListener("dblclick",this._dblclickEvent=function(){t._enabled&&e.doUIDispatchEvent("UIDoubleClickEvent")}),this._labelContainer.addEventListener("mouseenter",this._mouseEnterEvent=function(){t._enabled&&e.doUIDispatchEvent("UIEnterEvent")}),this._labelContainer.addEventListener("mouseleave",this._mouseLeaveEvent=function(){t._enabled&&e.doUIDispatchEvent("UIExitEvent")}),this._labelContainer.addEventListener("mousemove",this._mouseMoveEvent=function(){t._enabled&&e.doUIDispatchEvent("UIHoverEvent")}),this._labelContainer.addEventListener("mousedown",this._mouseDownEvent=function(i){t._enabled&&0===i.button&&e.doUIDispatchEvent("UIPressEvent")}),this._labelContainer.addEventListener("mouseup",this._mouseUpEvent=function(i){t._enabled&&0===i.button&&e.doUIDispatchEvent("UIReleaseEvent")}),this._labelContainer.addEventListener("contextmenu",this._contextMenuEvent=function(){t._enabled&&e.doUIDispatchEvent("UIRightClickEvent")})},ReleasePlayEvents:function(){this._parent(),this._labelContainer.removeEventListener("click",this._clickEvent),this._labelContainer.removeEventListener("dblclick",this._dblclickEvent),this._labelContainer.removeEventListener("mouseenter",this._mouseEnterEvent),this._labelContainer.removeEventListener("mouseleave",this._mouseLeaveEvent),this._labelContainer.removeEventListener("mousemove",this._mouseMoveEvent),this._labelContainer.removeEventListener("mousedown",this._mouseDownEvent),this._labelContainer.removeEventListener("mouseup",this._mouseUpEvent),this._labelContainer.removeEventListener("contextmenu",this._contextMenuEvent)},_SetText:function(e){this._label.innerHTML=e,this._CheckValidDimension()},_SetBold:function(e){this._label.style.fontWeight=e?"bold":"normal"},_SetItalic:function(e){this._label.style.fontStyle=e?"italic":"normal"},_SetAlignment:function(e){this.ETextAlignments.eAlignLeft===e?this._labelContainer.style.textAlign="left":this.ETextAlignments.eAlignRight===e?this._labelContainer.style.textAlign="right":this._labelContainer.style.textAlign="center"},_SetFont:function(e){this._label.style.fontFamily="'"+e+"'",this._CheckValidDimension()},_SetFontSize:function(e){this._label.style.fontSize=e+"px",this._CheckValidDimension()},_SetTextColor:function(e){this._textColor=e,this._label.style.color="rgba("+255*this._textColor.r+", "+255*this._textColor.g+", "+255*this._textColor.b+", "+this._textOpacity+")"},_SetTextOpacity:function(e){this._textOpacity=e,this._label.style.color="rgba("+255*this._textColor.r+", "+255*this._textColor.g+", "+255*this._textColor.b+", "+this._textOpacity+")"},_SetShowBackground:function(e){this._showBg=e,this._UpdateBackground()},_SetBackgroundColor:function(e){this._backgroundColor=e,this._UpdateBackground()},_SetBackgroundOpacity:function(e){this._backgroundOpacity=e,this._UpdateBackground()},_SetShowBorder:function(e){this._showBorder=e,this._UpdateBorder()},_SetBorderColor:function(e){this._borderColor=e,this._UpdateBorder()},_SetBorderOpacity:function(e){this._borderOpacity=e,this._UpdateBorder()},_UpdateBackground:function(){this._showBg?this._labelContainer.style.backgroundColor="rgba("+255*this._backgroundColor.r+","+255*this._backgroundColor.g+","+255*this._backgroundColor.b+", "+this._backgroundOpacity+")":this._labelContainer.style.backgroundColor="transparent"},_UpdateBorder:function(){if(this._showBorder){let e=this._borderColor;this._labelContainer.style.borderColor="rgb("+255*e.r+","+255*e.g+","+255*e.b+", "+this._borderOpacity+")"}else this._labelContainer.style.borderColor="transparent"},_SetEnabled:function(e){this._enabled=e,this._enabled?(this._labelContainer.style.pointerEvents="inherit",this._labelContainer.style.filter="none"):(this._labelContainer.style.pointerEvents="none",this._labelContainer.style.filter="brightness(70%) grayscale(100%)")}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DCameraViewer",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor","DS/StudioUIActorModelWeb/controls/CXPCameraViewerControl"],function(e,t,i){"use strict";return t.extend({_Fill:function(e){this._parent(e),this._cameraViewer=(new i).inject(e);let t=this.QueryInterface("CATI3DExperienceObject");this._SetCamera(t.GetValueByName("camera")),this._ListenVariableChanges(t,"camera"),this._SetLiveUpdate(t.GetValueByName("liveUpdate")),this._ListenVariableChanges(t,"liveUpdate"),this._SetEnabled(t.GetValueByName("enabled")),this._ListenVariableChanges(t,"enabled")},_UpdateProperty:function(e){let t=e[0],i=this.QueryInterface("CATI3DExperienceObject");"camera"===t?this._SetCamera(i.GetValueByName("camera")):"liveUpdate"===t?this._SetLiveUpdate(i.GetValueByName("liveUpdate")):"enabled"===t?this._SetEnabled(i.GetValueByName("enabled")):this._parent(e)},RegisterPlayEvents:function(e){this._parent(e),this._cameraViewer.onClick=function(){e.doUIDispatchEvent("UIClickEvent")},this._cameraViewer.onDoubleClick=function(){e.doUIDispatchEvent("UIDoubleClickEvent")},this._cameraViewer.onRightClick=function(){e.doUIDispatchEvent("UIRightClickEvent")},this._cameraViewer.onEnter=function(){e.doUIDispatchEvent("UIEnterEvent")},this._cameraViewer.onExit=function(){e.doUIDispatchEvent("UIExitEvent")},this._cameraViewer.onHover=function(){e.doUIDispatchEvent("UIHoverEvent")},this._cameraViewer.onPress=function(){e.doUIDispatchEvent("UIPressEvent")},this._cameraViewer.onRelease=function(){e.doUIDispatchEvent("UIReleaseEvent")}},ReleasePlayEvents:function(){this._parent(),this._cameraViewer.onClick=null,this._cameraViewer.onDoubleClick=null,this._cameraViewer.onRightClick=null,this._cameraViewer.onEnter=null,this._cameraViewer.onExit=null,this._cameraViewer.onHover=null,this._cameraViewer.onPress=null,this._cameraViewer.onRelease=null},_SetCamera:function(e){this._cameraViewer.camera=e},_SetLiveUpdate:function(e){this._cameraViewer.liveUpdate=e},_SetEnabled:function(e){this._cameraViewer.disabled=!e}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DSlider",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor","DS/Controls/Slider"],function(e,t,i){"use strict";return t.extend({ESliderOrientation:{eVertical:0,eHorizontal:1},ESliderLabelPosition:{eTop:0,eBottom:1,eRight:2,eLeft:3},_Fill:function(t){this._parent(t),this._childContainer=e.createElement("div").inject(t),this._childContainer.style.display="flex",this._childContainer.style.alignItems="stretch",this._childContainer.style.width="100%",this._childContainer.style.height="100%",this._slider=(new i).inject(this._childContainer),this._slider.getContent().style.flex="1 1 auto",this._slider.getContent().style.display="flex",this._slider.getContent().style.alignItems="center",this._label=e.createElement("span").inject(this._childContainer),this._label.style.flex="0 1 auto",this._label.style.display="inline-flex",this._label.style.alignItems="center",this._label.style.justifyContent="center",this._label.style.whiteSpace="pre",this._valueUnit="";let n=this.QueryInterface("CATI3DExperienceObject");this._SetValue(n.GetValueByName("value")),this._ListenVariableChanges(n,"value"),this._SetMinimumValue(n.GetValueByName("minimumValue")),this._ListenVariableChanges(n,"minimumValue"),this._SetMaximumValue(n.GetValueByName("maximumValue")),this._ListenVariableChanges(n,"maximumValue"),this._SetStepValue(n.GetValueByName("stepValue")),this._ListenVariableChanges(n,"stepValue"),this._SetOrientation(n.GetValueByName("orientation")),this._ListenVariableChanges(n,"orientation"),this._SetShowValueLabel(n.GetValueByName("showValueLabel")),this._ListenVariableChanges(n,"showValueLabel"),this._SelLabelPosition(n.GetValueByName("labelPosition")),this._ListenVariableChanges(n,"labelPosition"),this._SetValueUnit(n.GetValueByName("valueUnit")),this._ListenVariableChanges(n,"valueUnit"),this._SetEnabled(n.GetValueByName("enabled")),this._ListenVariableChanges(n,"enabled")},_UpdateProperty:function(e){let t=e[0],i=this.QueryInterface("CATI3DExperienceObject");"value"===t?this._SetValue(i.GetValueByName("value")):"minimumValue"===t?this._SetMinimumValue(i.GetValueByName("minimumValue")):"maximumValue"===t?this._SetMaximumValue(i.GetValueByName("maximumValue")):"stepValue"===t?this._SetStepValue(i.GetValueByName("stepValue")):"orientation"===t?this._SetOrientation(i.GetValueByName("orientation")):"showValueLabel"===t?this._SetShowValueLabel(i.GetValueByName("showValueLabel")):"labelPosition"===t?this._SelLabelPosition(i.GetValueByName("labelPosition")):"valueUnit"===t?this._SetValueUnit(i.GetValueByName("valueUnit")):"enabled"===t?this._SetEnabled(i.GetValueByName("enabled")):this._parent(e)},RegisterPlayEvents:function(e){this._parent(e);var t=this;this._slider.addEventListener("change",this._sliderValueChanged=function(){if(!t._enabled)return;t.QueryInterface("CATI3DExperienceObject").SetValueByName("value",t._slider.value),e.doUIDispatchEvent("UIValueChangeEvent")}),this._slider.addEventListener("beginEdit",this._beginEditChanged=function(){t._enabled&&e.doUIDispatchEvent("UIDragStartEvent")}),this._slider.addEventListener("endEdit",this._endEditChanged=function(){t._enabled&&e.doUIDispatchEvent("UIDragEndEvent")}),this._slider.addEventListener("mouseenter",this._mouseEnterEvent=function(){t._enabled&&e.doUIDispatchEvent("UIEnterEvent")}),this._slider.addEventListener("mouseleave",this._mouseLeaveEvent=function(){t._enabled&&e.doUIDispatchEvent("UIExitEvent")})},ReleasePlayEvents:function(){this._parent(),this._slider.removeEventListener("change",this._sliderValueChanged),this._slider.removeEventListener("beginEdit",this._beginEditChanged),this._slider.removeEventListener("endEdit",this._endEditChanged),this._slider.removeEventListener("mouseenter",this._mouseEnterEvent),this._slider.removeEventListener("mouseleave",this._mouseLeaveEvent)},_SetValue:function(e){this._slider.value=e,this._UpdateLabelWithCache()},_UpdateLabelWithCache:function(){this._label.textContent=this._slider.value+" "+this._valueUnit},_SetMinimumValue:function(e){this._slider.minValue=e},_SetMaximumValue:function(e){this._slider.maxValue=e},_SetStepValue:function(e){this._slider.stepValue=e},_SetOrientation:function(e){e===this.ESliderOrientation.eVertical?this._slider.displayStyle="vertical":this._slider.displayStyle="horizontal"},_SetShowValueLabel:function(e){this._label.style.display=e?"inline-flex":"none"},_SelLabelPosition:function(e){e===this.ESliderLabelPosition.eTop||e===this.ESliderLabelPosition.eLeft?(this._label.style.order="0",this._slider.getContent().style.order="1"):(this._label.style.order="1",this._slider.getContent().style.order="0"),e===this.ESliderLabelPosition.eTop||e===this.ESliderLabelPosition.eBottom?this._childContainer.style.flexDirection="column":this._childContainer.style.flexDirection="row"},_SetEnabled:function(e){this._enabled=e,this._slider.disabled=!e},_SetValueUnit:function(e){this._valueUnit=e,this._UpdateLabelWithCache()}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DButton",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor","DS/Controls/Button","css!DS/StudioUIActorModelWeb/style/CXPButton.css"],function(e,t,i,n){"use strict";return t.extend({_Fill:function(e){this._parent(e),this._button=new i({emphasize:"secondary"}).inject(e),this._button.getContent().style.overflow="initial",this._button.getContent().style.minWidth="100%",this._button.getContent().style.minHeight="100%",this._button.getContent().style.paddingLeft="7px",this._button.getContent().style.paddingRight="7px",this._iconWidth=null,this._iconHeight=null;var t=this.QueryInterface("CATI3DExperienceObject");this._SetFontSize(t.GetValueByName("fontSize")),this._ListenVariableChanges(t,"fontSize"),this._SetLabel(t.GetValueByName("label")),this._ListenVariableChanges(t,"label"),this._button.elements.text&&(this._button.elements.text.style.margin="auto"),this._SetPushable(t.GetValueByName("pushable")),this._ListenVariableChanges(t,"pushable"),this._SetPushed(t.GetValueByName("pushed")),this._ListenVariableChanges(t,"pushed");var n=t.GetValueByName("iconDimension").QueryInterface("CATI3DExperienceObject"),s=this;this._SetIcon(t.GetValueByName("icon")).then(function(){s._SetIconWidth(n.GetValueByName("x")),s._SetIconHeight(n.GetValueByName("y"))}),this._ListenVariableChanges(t,"icon"),this._ListenVariableChanges(t,"iconDimension"),this._SetEnabled(t.GetValueByName("enabled")),this._ListenVariableChanges(t,"enabled")},_UpdateProperty:function(e){let t=e[0];var i=this.QueryInterface("CATI3DExperienceObject");if("fontSize"===t)this._SetFontSize(i.GetValueByName("fontSize"));else if("label"===t)this._SetLabel(i.GetValueByName("label"));else if("pushable"===t)this._SetPushable(i.GetValueByName("pushable"));else if("pushed"===t)this._SetPushed(i.GetValueByName("pushed"));else if("icon"===t)this._SetIcon(i.GetValueByName("icon"));else if("iconDimension"===t){var n=i.GetValueByName("iconDimension").QueryInterface("CATI3DExperienceObject");2===e.length?"x"===e[1]?this._SetIconWidth(n.GetValueByName("x")):"y"===e[1]?this._SetIconHeight(n.GetValueByName("y")):console.error("unknown property "+e[1]+" on iconDimension"):(this._SetIconWidth(n.GetValueByName("x")),this._SetIconHeight(n.GetValueByName("y")))}else"enabled"===t?this._SetEnabled(i.GetValueByName("enabled")):this._parent(e)},RegisterPlayEvents:function(e){this._parent(e),this._button.addEventListener("buttonclick",this._OnButtonclick=function(){e.doUIDispatchEvent("UIClickEvent")}),this._button.addEventListener("buttonDblClick",this._OnButtonDblClick=function(){e.doUIDispatchEvent("UIDoubleClickEvent")});var t=this;this._button.addEventListener("change",this._OnChange=function(){t.QueryInterface("CATI3DExperienceObject").SetValueByName("pushed",t._button.checkFlag)}),this._button.addEventListener("mouseenter",this._OnMouseEnter=function(){e.doUIDispatchEvent("UIEnterEvent")}),this._button.addEventListener("mouseleave",this._OnMouseLeave=function(){e.doUIDispatchEvent("UIExitEvent")}),this._button.addEventListener("mousemove",this._OnMouseMove=function(){e.doUIDispatchEvent("UIHoverEvent")}),this._button.addEventListener("mousedown",this._OnMouseDown=function(t){0===t.button&&e.doUIDispatchEvent("UIPressEvent")}),this._button.addEventListener("mouseup",this._OnMouseUp=function(t){0===t.button&&e.doUIDispatchEvent("UIReleaseEvent")}),this._button.addEventListener("contextmenu",this._OnContextMenu=function(){e.doUIDispatchEvent("UIRightClickEvent")})},ReleasePlayEvents:function(){this._parent(),this._button.removeEventListener("buttonclick",this._OnButtonclickEvent),this._button.removeEventListener("buttonDblClick",this._OnButtonDblClick),this._button.removeEventListener("change",this._OnChange),this._button.removeEventListener("mouseenter",this._OnMouseEnter),this._button.removeEventListener("mouseleave",this._OnMouseLeave),this._button.removeEventListener("mousemove",this._OnMouseMove),this._button.removeEventListener("mousedown",this._OnMouseDown),this._button.removeEventListener("mouseup",this._OnMouseUp),this._button.removeEventListener("contextmenu",this._OnContextMenu)},_SetEnabled:function(e){this._button.disabled=!e},_SetFontSize:function(e){this._button.getContent().style.fontSize=e+"px"},_SetLabel:function(e){this._button.label=e},_SetPushable:function(e){this._button.type=e?"check":"standard"},_SetPushed:function(e){this._button.checkFlag=!!e},_SetIcon:function(t){if(t){var i=t.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");var n=this;return i.getPicture().done(function(t){let i=e.createElement("img");i.setAttribute("draggable",!1),i.src=t.src,n._button.icon={iconClasses:"cxpbutton-iconcontainer"},i.inject(n._button.elements.icon),null!==n._iconWidth&&null!==n._iconHeight&&(n._button.elements.icon.parentElement.style.order="-1",n._button.elements.icon.style.width=n._iconWidth+"px",n._button.elements.icon.style.height=n._iconHeight+"px")})}return this._button.icon="",e.Promise.resolve(this._button.icon)},_SetIconWidth:function(e){e!==this._iconWidth&&(this._iconWidth=e),this._button.elements.icon&&(this._button.elements.icon.style.width=this._iconWidth+"px")},_SetIconHeight:function(e){e!==this._iconHeight&&(this._iconHeight=e),this._button.elements.icon&&(this._button.elements.icon.style.height=this._iconHeight+"px")}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DTextField",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor","css!DS/StudioUIActorModelWeb/style/CXPTextField.css","DS/Controls/Editor"],function(e,t,i,n){"use strict";return t.extend({_Fill:function(e){this._parent(e),this._editor=(new n).inject(e),this._editor.elements.container.classList.add("cxptextfield-container"),this._editor.elements.container.childNodes[0].classList.add("cxptextfield-childnode"),this._editor.nbRows=1;let t=this.QueryInterface("CATI3DExperienceObject");this._SetText(t.GetValueByName("text")),this._ListenVariableChanges(t,"text"),this._SetEnabled(t.GetValueByName("enabled")),this._ListenVariableChanges(t,"enabled")},_UpdateProperty:function(e){let t=e[0],i=this.QueryInterface("CATI3DExperienceObject");"text"===t?this._SetText(i.GetValueByName("text")):"enabled"===t?this._SetEnabled(i.GetValueByName("enabled")):this._parent(e)},RegisterPlayEvents:function(e){this._parent(e);var t=this;let i=this.QueryInterface("CATI3DExperienceObject");this._editor.addEventListener("uncommittedChange",this._valueChanged=function(){t._enabled&&(i.SetValueByName("text",t._editor.valueToCommit),e.doUIDispatchEvent("UIValueChangeEvent"))}),this._editor.addEventListener("keydown",this._returnPress=function(i){13===i.keyCode&&(t._enabled&&e.doUIDispatchEvent("UIReturnPressEvent"),i.preventDefault())}),this._editor.addEventListener("mouseenter",this._mouseEnterEvent=function(){t._enabled&&e.doUIDispatchEvent("UIEnterEvent")}),this._editor.addEventListener("mouseleave",this._mouseLeaveEvent=function(){t._enabled&&e.doUIDispatchEvent("UIExitEvent")})},ReleasePlayEvents:function(){this._parent(),this._editor.removeEventListener("uncommittedChange",this._valueChanged),this._editor.removeEventListener("keydown",this._returnPress),this._editor.removeEventListener("mouseenter",this._mouseEnterEvent),this._editor.removeEventListener("mouseleave",this._mouseLeaveEvent)},_SetText:function(e){this._editor.value=e},_SetEnabled:function(e){this._enabled=e,this._editor.disabled=!e}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DColorPicker",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor","css!DS/StudioUIActorModelWeb/style/CXPColorPicker.css","DS/Controls/ColorChooser","DS/VCXWebProperties/VCXColor"],function(e,t,i,n,s){"use strict";return t.extend({_Fill:function(e){this._parent(e),this._colorPicker=(new n).inject(e),this._colorPicker.informationsVisibleFlag=!1,this._colorPicker.colorChooserDimensions={x:220,y:160},this._colorPicker.getContent().classList.add("cxpcolorpicker-container");let t=this.QueryInterface("CATI3DExperienceObject");this._SetColor(t.GetValueByName("color")),this._ListenVariableChanges(t,"color"),this._SetEnabled(t.GetValueByName("enabled")),this._ListenVariableChanges(t,"enabled")},_UpdateProperty:function(e){let t=e[0],i=this.QueryInterface("CATI3DExperienceObject");"color"===t?this._SetColor(i.GetValueByName("color")):"enabled"===t?this._SetEnabled(i.GetValueByName("enabled")):this._parent(e)},RegisterPlayEvents:function(e){this._parent(e);var t=this;let i=this.QueryInterface("CATI3DExperienceObject");this._colorPicker.addEventListener("change",this._valueChanged=function(){if(!t._enabled)return;let n=new s;n.FromHexString("#"+t._colorPicker.value),i.SetValueByName("color",n),e.doUIDispatchEvent("UIValueChangeEvent")}),this._colorPicker.addEventListener("mouseenter",this._mouseEnterEvent=function(){t._enabled&&e.doUIDispatchEvent("UIEnterEvent")}),this._colorPicker.addEventListener("mouseleave",this._mouseLeaveEvent=function(){t._enabled&&e.doUIDispatchEvent("UIExitEvent")})},ReleasePlayEvents:function(){this._parent(),this._colorPicker.removeEventListener("change",this._valueChanged),this._colorPicker.removeEventListener("mouseenter",this._mouseEnterEvent),this._colorPicker.removeEventListener("mouseleave",this._mouseLeaveEvent)},_SetColor:function(e){this._colorPicker.value=e.GetColorHexString()},_SetEnabled:function(e){this._enabled=e,this._colorPicker.disabled=!e},_GetVisuMinimumDimension:function(){return{width:211,height:180}}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DImageButton",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor","DS/StudioUIActorModelWeb/controls/CXPImageButtonControl"],function(e,t,i){"use strict";return t.extend({_Fill:function(e){this._parent(e),this._imagebutton=(new i).inject(e);var t=this.QueryInterface("CATI3DExperienceObject");this._SetNormalImage(t.GetValueByName("normalImage")),this._ListenVariableChanges(t,"normalImage"),this._SetPressedImage(t.GetValueByName("pressedImage")),this._ListenVariableChanges(t,"pressedImage"),this._SetHoveredImage(t.GetValueByName("hoveredImage")),this._ListenVariableChanges(t,"hoveredImage"),this._SetDisabledImage(t.GetValueByName("disabledImage")),this._ListenVariableChanges(t,"disabledImage"),this._SetEnabled(t.GetValueByName("enabled")),this._ListenVariableChanges(t,"enabled")},_UpdateProperty:function(e){let t=e[0];var i=this.QueryInterface("CATI3DExperienceObject");"normalImage"===t?this._SetNormalImage(i.GetValueByName("normalImage")):"pressedImage"===t?this._SetPressedImage(i.GetValueByName("pressedImage")):"hovered"===t?this._SetHoveredImage(i.GetValueByName("hoveredImage")):"disabledImage"===t?this._SetDisabledImage(i.GetValueByName("disabledImage")):"enabled"===t?this._SetEnabled(i.GetValueByName("enabled")):this._parent(e)},RegisterPlayEvents:function(e){this._parent(e),this._imagebutton.onClick=function(){e.doUIDispatchEvent("UIClickEvent")},this._imagebutton.onDoubleClick=function(){e.doUIDispatchEvent("UIDoubleClickEvent")},this._imagebutton.onRightClick=function(){e.doUIDispatchEvent("UIRightClickEvent")},this._imagebutton.onEnter=function(){e.doUIDispatchEvent("UIEnterEvent")},this._imagebutton.onExit=function(){e.doUIDispatchEvent("UIExitEvent")},this._imagebutton.onHover=function(){e.doUIDispatchEvent("UIHoverEvent")},this._imagebutton.onPress=function(){e.doUIDispatchEvent("UIPressEvent")},this._imagebutton.onRelease=function(){e.doUIDispatchEvent("UIReleaseEvent")}},ReleasePlayEvents:function(){this._parent(),this._imagebutton.onClick=null,this._imagebutton.onDoubleClick=null,this._imagebutton.onRightClick=null,this._imagebutton.onEnter=null,this._imagebutton.onExit=null,this._imagebutton.onHover=null,this._imagebutton.onPress=null,this._imagebutton.onRelease=null},_SetNormalImage:function(t){if(t){var i=t.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");var n=this;return i.getPicture().done(function(e){n._imagebutton.normalImage=e.src})}return this._imagebutton.normalImage="",e.Promise.resolve(this._imagebutton.normalImage)},_SetPressedImage:function(t){if(t){var i=t.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");var n=this;return i.getPicture().done(function(e){n._imagebutton.pressedImage=e.src})}return this._imagebutton.pressedImage="",e.Promise.resolve(this._imagebutton.pressedImage)},_SetHoveredImage:function(t){if(t){var i=t.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");var n=this;return i.getPicture().done(function(e){n._imagebutton.hoveredImage=e.src})}return this._imagebutton.hoveredImage="",e.Promise.resolve(this._imagebutton.hoveredImage)},_SetDisabledImage:function(t){if(t){var i=t.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");var n=this;return i.getPicture().done(function(e){n._imagebutton.disabledImage=e.src})}return this._imagebutton.disabledImage="",e.Promise.resolve(this._imagebutton.disabledImage)},_SetEnabled:function(e){this._imagebutton.enabled=e}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DWebViewer",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor"],function(e,t){"use strict";return t.extend({_Fill:function(t){this._parent(t),this._iframe=e.createElement("iframe").inject(t),this._iframe.style.width="100%",this._iframe.style.height="100%";let i=this.QueryInterface("CATI3DExperienceObject");this._SetUrl(i.GetValueByName("url")),this._ListenVariableChanges(i,"url"),this._SetEnabled(i.GetValueByName("enabled")),this._ListenVariableChanges(i,"enabled")},_UpdateProperty:function(e){let t=e[0],i=this.QueryInterface("CATI3DExperienceObject");"url"===t?this._SetUrl(i.GetValueByName("url")):"enabled"===t?this._SetEnabled(i.GetValueByName("enabled")):this._parent(e)},RegisterPlayEvents:function(e){this._parent(e);var t=this;this._iframe.addEventListener("mouseenter",this._mouseEnterEvent=function(){t._enabled&&e.doUIDispatchEvent("UIEnterEvent")}),this._iframe.addEventListener("mouseleave",this._mouseLeaveEvent=function(){t._enabled&&e.doUIDispatchEvent("UIExitEvent")}),window.addEventListener("message",this._messageReceivedEvent=function(i){if(i.source===t._iframe.contentWindow){if("string"!=typeof i.data)throw new TypeError("web viewer received non-string message type. Only strings are accepted");e.doUIDispatchEvent("UIWebMessageReceivedEvent",JSON.stringify({message:i.data}))}})},ReleasePlayEvents:function(){this._parent(),this._iframe.removeEventListener("mouseenter",this._mouseEnterEvent),this._iframe.removeEventListener("mouseleave",this._mouseLeaveEvent)},_SetUrl:function(e){this._iframe.src=e},_SetEnabled:function(e){this._enabled=e,this._enabled?(this._iframe.style.pointerEvents="inherit",this._iframe.style.filter="none"):(this._iframe.style.pointerEvents="none",this._iframe.style.filter="brightness(70%) grayscale(100%)")},ExecuteScript:function(e){this._iframe.contentWindow.eval(e)},SendMessage:function(e){this._iframe.contentWindow.postMessage(e,this._iframe.src)},_GetVisuMinimumDimension:function(){return{width:0,height:0}}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DGallery",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DUIActor","DS/StudioUIActorModelWeb/controls/CXPGalleryControl"],function(e,t,i){"use strict";return t.extend({EGalleryOrientation:{eVertical:0,eHorizontal:1},_Fill:function(e){this._parent(e),this._BuildGalleryView(e);let t=this.QueryInterface("CATI3DExperienceObject");this._SetEnabled(t.GetValueByName("enabled")),this._ListenVariableChanges(t,"enabled"),this._SetItems(t.GetValueByName("items")),this._ListenVariableChanges(t,"items"),this._SetItemSize(t.GetValueByName("itemSize")),this._ListenVariableChanges(t,"itemSize"),this._SetOrientation(t.GetValueByName("orientation")),this._ListenVariableChanges(t,"orientation"),this._SetStretchToContent(t.GetValueByName("stretchToContent")),this._ListenVariableChanges(t,"stretchToContent")},_UpdateProperty:function(e){let t=e[0],i=this.QueryInterface("CATI3DExperienceObject");if("enabled"===t)this._SetEnabled(i.GetValueByName("enabled"));else if("items"===t)if(e.length>=2){let t=i.GetValueByName("items"),n=parseInt(e[1]);t.length<=n?console.error("invalid index "+n+" on items"):this._UpdateItem(n,t[n])}else this._SetItems(i.GetValueByName("items"));else"itemSize"===t?this._SetItemSize(i.GetValueByName("itemSize")):"orientation"===t?this._SetOrientation(i.GetValueByName("orientation")):"stretchToContent"===t?this._SetStretchToContent(i.GetValueByName("stretchToContent")):this._parent(e)},_BuildGalleryView:function(e){this._gallery=(new i).inject(e)},RegisterPlayEvents:function(e){this._parent(e),this._gallery.onClick=function(t){e.doUIDispatchEvent("UIClickEvent",'{"index": '+t.options.index+"}")},this._gallery.onDoubleClick=function(t){e.doUIDispatchEvent("UIDoubleClickEvent",'{"index": '+t.options.index+"}")},this._gallery.onEnter=function(t){e.doUIDispatchEvent("UIEnterEvent",'{"index": '+t.options.index+"}")},this._gallery.onExit=function(t){e.doUIDispatchEvent("UIExitEvent",'{"index": '+t.options.index+"}")},this._gallery.onHover=function(t){e.doUIDispatchEvent("UIHoverEvent",'{"index": '+t.options.index+"}")}},ReleasePlayEvents:function(){this._parent(),this._gallery.onClick=null,this._gallery.onDoubleClick=null,this._gallery.onEnter=null,this._gallery.onExit=null,this._gallery.onHover=null,this._gallery.onClickOnIndex=null,this._gallery.onDoubleClickOnIndex=null,this._gallery.onEnterOnIndex=null,this._gallery.onExitOnIndex=null,this._gallery.onHoverOnIndex=null},_SetEnabled:function(e){this._gallery.disabled=!e},_SetOrientation:function(e){e===this.EGalleryOrientation.eVertical?this._gallery.orientation="vertical":this._gallery.orientation="horizontal",this._CheckValidDimension()},_SetItemSize:function(e){let t=e.QueryInterface("CATI3DExperienceObject");this._gallery.itemMinWidth=t.GetValueByName("x"),this._gallery.itemMinHeight=t.GetValueByName("y"),this._CheckValidDimension()},_SetStretchToContent:function(e){this._gallery.stretchToContent=e,this._CheckValidDimension()},_SetItems:function(){},_UpdateItem:function(e,t){},_GroupPropertyUpdate:function(e){let t=e.split("."),i=t[0];return"items"===i&&3==t.length?t[0]+"."+t[1]:this._parent(e)},_GetVisuMinimumDimension:function(){return!this._gallery||this._gallery.stretchToContent?this._parent():function(e){var t=e.QueryInterface("CATICXPUIActor").GetMinimumDimension();if(1===t.mode){const e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);return{width:t.width*e/100,height:t.height*i/100}}return{width:t.width,height:t.height}}(this)}})}),define("DS/StudioUIActorModelWeb/CXPImage",["UWA/Core","DS/StudioUIActorModelWeb/CXPUIActor"],function(e,t){"use strict";return t.extend({init:function(t){this._parent(t),this._img=e.createElement("img").inject(this.getContainer()),this._img.setAttribute("draggable",!1),this._img.style.width="100%",this._img.style.height="100%",this._img.style.display="inherit",Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,get:function(){return this._enable},set:function(e){this._enable=e,this._enable?(this._img.style.pointerEvents="inherit",this._img.style.filter="none"):(this._img.style.pointerEvents="none",this._img.style.filter="brightness(70%) grayscale(100%)")}}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._img.style.opacity=this._opacity/255}}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,get:function(){return this._image},set:function(t){if(this._image=t,this._image){var i=this._image.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");var n=this;i.getPicture().done(function(e){n._img.src=e.src,n._img.hidden=!1})}else this._img.hidden=!0}}),Object.defineProperty(this,"src",{enumerable:!0,configurable:!0,get:function(){return this._src},set:function(e){this._src=e,this._src&&!this.image&&(this._img.src=this._src,this._img.hidden=!1)}})},registerPlayEvents:function(t,i){this._parent(t);var n=e.is(i);i=e.is(i)?i:0;var s=this.getContainer();s.addEventListener("click",this._clickEvent=function(){t.doUIDispatchEvent("UIClicked",i)}),s.addEventListener("dblclick",this._dblclickEvent=function(){t.doUIDispatchEvent("UIDoubleClicked",i)}),s.addEventListener("mouseenter",this._mouseEnterEvent=function(){t.doUIDispatchEvent("UIEntered",i)}),s.addEventListener("mouseleave",this._mouseLeaveEvent=function(){t.doUIDispatchEvent("UIExited",i)}),s.addEventListener("mousemove",this._mouseMoveEvent=function(){t.doUIDispatchEvent("UIHovered",i)}),n||(s.addEventListener("mousedown",this._mouseDownEvent=function(e){0===e.button&&t.doUIDispatchEvent("UIPressed",i)}),s.addEventListener("mouseup",this._mouseUpEvent=function(e){0===e.button&&t.doUIDispatchEvent("UIReleased",i)})),s.addEventListener("contextmenu",this._contextMenuEvent=function(){return t.doUIDispatchEvent("UIRightClicked",i),!1})},releasePlayEvents:function(){this._parent();var e=this.getContainer();e.removeEventListener("click",this._clickEvent),e.removeEventListener("dblclick",this._dblclickEvent),e.removeEventListener("mouseenter",this._mouseEnterEvent),e.removeEventListener("mouseleave",this._mouseLeaveEvent),e.removeEventListener("mousemove",this._mouseMoveEvent),e.removeEventListener("mousedown",this._mouseDownEvent),e.removeEventListener("mouseup",this._mouseUpEvent),e.removeEventListener("contextmenu",this._contextMenuEvent)}})}),define("DS/StudioUIActorModelWeb/CXPGallery",["UWA/Core","DS/StudioUIActorModelWeb/CXPUIActor"],function(e,t){"use strict";return t.extend({init:function(t){this._parent(t);var i=t.QueryInterface("CATI3DExperienceObject").GetValueByName("data");this._stretchboolean=i.QueryInterface("CATI3DExperienceObject").GetValueByName("stretchToContent"),this.widthItem=i.QueryInterface("CATI3DExperienceObject").GetValueByName("itemSize").QueryInterface("CATI3DExperienceObject").GetValueByName("x"),this.heightItem=i.QueryInterface("CATI3DExperienceObject").GetValueByName("itemSize").QueryInterface("CATI3DExperienceObject").GetValueByName("y"),this._UIItems=[],this._gallery=e.createElement("div").inject(this.getContainer()),this._gallery.style.position="absolute",Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._gallery.style.opacity=this._opacity/255}}),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,get:function(){return this._items},set:function(e){this._items=e,this._refreshItems(this._items)}}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,get:function(){return this._orientation},set:function(e){this._orientation=e,!0===this._stretchboolean&&this._orientation<=0?this._gallery.style.display="flex":this._orientation>1?(this._gallery.style.display="flex",this._gallery.style.flexWrap="wrap"):this._gallery.style.display="inherit"}})},registerPlayEvents:function(e){this._parent(e)},releasePlayEvents:function(){this._parent()},_createContainer:function(){var e=this._parent();return Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return this._width},set:function(e){this._width=e,this.stretchToContent?this._container.style.width="":1===this._mode?this._container.style.width=this._width+"vw":this._container.style.width=this._width+"px"}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return this._height},set:function(e){this._height=e,this.stretchToContent?this._container.style.height="":1===this._mode?this._container.style.height=this._height+"vh":this._container.style.height=this._height+"px"}}),Object.defineProperty(this,"stretchToContent",{enumerable:!0,configurable:!0,get:function(){return this._stretchToContent},set:function(e){this._stretchToContent=e,this._stretchToContent?(this._container.style.overflow="visible",this._container.style.width="",this._container.style.height=""):(1===this._mode?(this._container.style.width=this._width+"vw",this._container.style.height=this._height+"vh",this._container.style.minWidth=this.widthItem+"vw",this._container.style.minHeight=this.heightItem+"vh"):(this._container.style.width=this._width+"px",this._container.style.height=this._height+"px",this._container.style.minWidth=this.widthItem+"px",this._container.style.minHeight=this.heightItem+"px"),this._container.style.overflow="auto")}}),Object.defineProperty(this,"clientWidth",{enumerable:!0,configurable:!0,get:function(){return 0===this._container.clientWidth?this._gallery.clientWidth:this._container.clientWidth}}),Object.defineProperty(this,"clientHeight",{enumerable:!0,configurable:!0,get:function(){return 0===this._container.clientHeight?this._gallery.clientHeight:this._container.clientHeight}}),e}})}),define("DS/StudioUIActorModelWeb/CXPButton",["UWA/Core","DS/StudioUIActorModelWeb/CXPUIActor","DS/Controls/Button"],function(e,t,i){"use strict";return t.extend({init:function(t){this._parent(t),this._button=new i({emphasize:"secondary"}).inject(this.getContainer()),this._button.elements.container.style.overflow="initial",this._button.elements.container.style.minWidth="100%",this._button.elements.container.style.minHeight="100%",Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,get:function(){return this._enable},set:function(e){this._enable=e,this._button.disabled=!this._enable}}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._button.elements.container.style.opacity=this._opacity/255}}),Object.defineProperty(this,"fontHeight",{enumerable:!0,configurable:!0,get:function(){return this._fontHeight},set:function(e){this._fontHeight=e,1===this._fontHeight?this._button.elements.container.style.fontSize="12px":this._fontHeight<10?this._button.elements.container.style.fontSize=20*Math.pow(10,-(10-this._fontHeight))+"%":this._button.elements.container.style.fontSize=6*this._fontHeight+"%";var t=2.5*this._fontHeight;t>100&&(this._button.elements.container.style.minHeight=t+"%")}}),Object.defineProperty(this,"icon",{enumerable:!0,configurable:!0,get:function(){return this._icon},set:function(t){if(this._icon=t,this._icon){var i=this._icon.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");var n=this;this._button.elements.container.style.paddingLeft="0px",this._button.elements.container.style.paddingRight="0px",i.getPicture().done(function(e){n._button.icon=e.src,n._iconWidth&&(n._button.elements.icon.width=n._iconWidth),n._iconHeight&&(n._button.elements.icon.height=n._iconHeight)})}else this._button.icon="",this._button.elements.container.style.paddingLeft="",this._button.elements.container.style.paddingRight=""}}),Object.defineProperty(this,"iconWidth",{enumerable:!0,configurable:!0,get:function(){return this._iconWidth},set:function(e){this._iconWidth=e,this._button.elements.icon&&(this._button.elements.icon.width=e)}}),Object.defineProperty(this,"iconHeight",{enumerable:!0,configurable:!0,get:function(){return this._iconHeight},set:function(e){this._iconHeight=e,this._button.elements.icon&&(this._button.elements.icon.height=e)}}),Object.defineProperty(this,"label",{enumerable:!0,configurable:!0,get:function(){return this._label},set:function(e){this._label=e,this._button.label=this._label}}),Object.defineProperty(this,"pushable",{enumerable:!0,configurable:!0,get:function(){return this._pushable},set:function(e){this._pushable=e,this._pushable?this._button.type="check":this._button.type="standard"}}),Object.defineProperty(this,"pushed",{enumerable:!0,configurable:!0,get:function(){return this._pushed},set:function(e){this._pushed=e,this._pushed&&this.pushable?this._button.checkFlag=!0:this._button.checkFlag=!1}})},registerPlayEvents:function(t,i){this._parent(t);var n=this,s=e.is(i);i=e.is(i)?i:0,this._button.onClick=function(){t.pushed=n._button.checkFlag,t.doUIDispatchEvent("UIClicked",i)},this._button.addEventListener("dblclick",this._dblclickEvent=function(){t.doUIDispatchEvent("UIDoubleClicked",i)}),this._button.addEventListener("mouseenter",this._mouseEnterEvent=function(){t.doUIDispatchEvent("UIEntered",i)}),this._button.addEventListener("mouseleave",this._mouseLeaveEvent=function(){t.doUIDispatchEvent("UIExited",i)}),this._button.addEventListener("mousemove",this._mouseMoveEvent=function(){t.doUIDispatchEvent("UIHovered",i)}),s||(this._button.addEventListener("mousedown",this._mouseDownEvent=function(e){0===e.button&&t.doUIDispatchEvent("UIPressed",i)}),this._button.addEventListener("mouseup",this._mouseUpEvent=function(e){0===e.button&&t.doUIDispatchEvent("UIReleased",i)})),this._button.addEventListener("contextmenu",this._contextMenuEvent=function(){return t.doUIDispatchEvent("UIRightClicked",i),!1})},releasePlayEvents:function(){this._parent(),this._button.onClick=null,this._button.removeEventListener("dblclick",this._dblclickEvent),this._button.removeEventListener("mouseenter",this._mouseEnterEvent),this._button.removeEventListener("mouseleave",this._mouseLeaveEvent),this._button.removeEventListener("mousemove",this._mouseMoveEvent),this._button.removeEventListener("mousedown",this._mouseDownEvent),this._button.removeEventListener("mouseup",this._mouseUpEvent),this._button.removeEventListener("contextmenu",this._contextMenuEvent)}})}),define("DS/StudioUIActorModelWeb/CXPCameraViewer",["UWA/Core","DS/StudioUIActorModelWeb/CXPUIActor","DS/Visualization/WebGLV6Viewer","DS/Visualization/Viewpoint","DS/CATCXPModel/CATCXPRenderUtils"],function(e,t,i,n,s){"use strict";return t.extend({init:function(t){var s;this._parent(t),this._viewerContainer=e.createElement("div").inject(this.getContainer()),this._viewerContainer.style.boxSizing="border-box",this._viewerContainer.style.width="100%",this._viewerContainer.style.height="100%";var r=this._uiActor.GetObject()._experienceBase.webApplication.app;r&&r.getOptions&&(s=r.getOptions());var a=s&&s.viewerOptions?s.viewerOptions:{};a.div=this._viewerContainer,a.multiViewer=!0,a.multiViewerFix=!0,a.highlight={activated:!1,displayHL:!1},a.defaultLights=!1,this._cameraViewer=new i(a),this._cameraViewer.setVisuEnv("None"),this._cameraViewer.canvas.style.pointerEvents="none";var o=new n({viewer:this._cameraViewer});this._cameraViewer.addViewpoint(o),Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,get:function(){return this._enable},set:function(e){var t;this._enable=e,this._enable?(this._viewerContainer.style.pointerEvents="inherit",this._viewerContainer.style.filter="none",this.camera&&(this._update(),this._liveUpdate&&(t=this.camera._experienceBase.getManager("CAT3DXVisuManager"),this._updateCallback||(this._updateCallback=this._update.bind(this),t.pushVisuRefreshCB(this._update.bind(this)))))):(this._viewerContainer.style.pointerEvents="none",this._viewerContainer.style.filter="brightness(70%) grayscale(100%)",this.camera&&(t=this.camera._experienceBase.getManager("CAT3DXVisuManager"),this._updateCallback&&(t.removeVisuRefreshCB(this._refreshVisu),this._updateCallback=null)))}}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._viewerContainer.style.opacity=this._opacity/255}}),Object.defineProperty(this,"liveUpdate",{enumerable:!0,configurable:!0,get:function(){return this._liveUpdate},set:function(e){if(this._liveUpdate=e,this.camera){var t=this.camera._experienceBase.getManager("CAT3DXVisuManager");this._liveUpdate&&this.enable?(this._update(),this._updateCallback||(this._updateCallback=this._update.bind(this),t.pushVisuRefreshCB(this._update.bind(this)))):this._updateCallback&&(t.removeVisuRefreshCB(this._updateCallback),this._updateCallback=null)}}}),Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,get:function(){return this._camera},set:function(e){if(this._camera=e,this._camera){this._cameraViewer.getSceneGraphOverrideSetManager().clear(),this._content&&this._cameraViewer.removeNode(this._content.GetNode());var t=this._camera._experienceBase.getManager("CAT3DXVisuManager");this._content=t.getContent(),this._cameraViewer.addNode(this._content.GetNode());var i=this._content.GetPathElement();this._cameraViewer.getSceneGraphOverrideSetManager().pushSceneGraphOverrideSet(t.getOverrideSet(),{substractivePath:i.getLength()>1?i:void 0}),this.enable&&this._update(),this.liveUpdate&&this.enable?this._updateCallback||(this._updateCallback=this._update.bind(this),t.pushVisuRefreshCB(this._update.bind(this))):this._updateCallback&&(t.removeVisuRefreshCB(this._update),this._updateCallback=null)}}})},_update:function(){s.setViewpointFromCamera(this._cameraViewer.currentViewpoint,this.camera,0),this._cameraViewer.render()},registerPlayEvents:function(t,i){this._parent(t);var n=e.is(i);i=e.is(i)?i:0,this.camera&&this._update(),this._viewerContainer.addEventListener("click",this._clickEvent=function(){t.doUIDispatchEvent("UIClicked",i)}),this._viewerContainer.addEventListener("dblclick",this._dblclickEvent=function(){t.doUIDispatchEvent("UIDoubleClicked",i)}),this._viewerContainer.addEventListener("mouseenter",this._mouseEnterEvent=function(){t.doUIDispatchEvent("UIEntered",i)}),this._viewerContainer.addEventListener("mouseleave",this._mouseLeaveEvent=function(){t.doUIDispatchEvent("UIExited",i)}),this._viewerContainer.addEventListener("mousemove",this._mouseMoveEvent=function(){t.doUIDispatchEvent("UIHovered",i)}),n||(this._viewerContainer.addEventListener("mousedown",this._mouseDownEvent=function(e){0===e.button&&t.doUIDispatchEvent("UIPressed",i)}),this._viewerContainer.addEventListener("mouseup",this._mouseUpEvent=function(e){0===e.button&&t.doUIDispatchEvent("UIReleased",i)})),this._viewerContainer.addEventListener("contextmenu",this._contextMenuEvent=function(){return t.doUIDispatchEvent("UIRightClicked",i),!1})},releasePlayEvents:function(){this._parent(),this._viewerContainer.removeEventListener("click",this._clickEvent),this._viewerContainer.removeEventListener("dblclick",this._dblclickEvent),this._viewerContainer.removeEventListener("mouseenter",this._mouseEnterEvent),this._viewerContainer.removeEventListener("mouseleave",this._mouseLeaveEvent),this._viewerContainer.removeEventListener("mousemove",this._mouseMoveEvent),this._viewerContainer.removeEventListener("mousedown",this._mouseDownEvent),this._viewerContainer.removeEventListener("mouseup",this._mouseUpEvent),this._viewerContainer.removeEventListener("contextmenu",this._contextMenuEvent)}})}),define("DS/StudioUIActorModelWeb/CXPColorPicker",["UWA/Core","DS/StudioUIActorModelWeb/CXPUIActor","DS/Controls/ColorChooser"],function(e,t,i){"use strict";return t.extend({init:function(t){this._parent(t),this._holder=e.createElement("div").inject(this.getContainer()),this._colorPicker=(new i).inject(this._holder),this._colorPicker.informationsVisibleFlag=!1,this._colorPicker.colorChooserDimensions={x:220,y:160},this._colorPicker.getContent().style.textAlign="initial",this._holder.style.background="silver",this._holder.style.textAlign="center",this._holder.style.width="100%",this._holder.style.height="100%",this._holder.style.minWidth="211px",this._holder.style.minHeight="196px",this._holder.style.paddingTop="10px",Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,get:function(){return this._enable},set:function(e){this._enable=e,this._colorPicker.disabled=!this._enable}}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._colorPicker.elements.container.style.opacity=this._opacity/255}}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return this._color},set:function(e){this._color&&(this._mapper.stopListening(null,"r.CHANGED",this._colorCallback),this._mapper.stopListening(null,"g.CHANGED",this._colorCallback),this._mapper.stopListening(null,"b.CHANGED",this._colorCallback));var t=this;this._color=e;var i=this._color.QueryInterface("CATI3DExperienceObject");this._colorCallback=function(){t._colorPicker.value=t._rgbToHex(i.GetValueByName("r"),i.GetValueByName("g"),i.GetValueByName("b"))},this._mapper.listenTo(i,"r.CHANGED",this._colorCallback),this._mapper.listenTo(i,"g.CHANGED",this._colorCallback),this._mapper.listenTo(i,"b.CHANGED",this._colorCallback),this._colorCallback()}})},registerPlayEvents:function(e){this._parent(e);var t=this;this._colorPicker.addEventListener("change",this._colorPickerValueChanged=function(){var i=t._hexToRgb(t._colorPicker.value);e.color.r=i.r,e.color.g=i.g,e.color.b=i.b,e.doUIDispatchEvent("UIValueChanged",0)}),this._colorPicker.addEventListener("mouseenter",this._mouseEnterEvent=function(){e.doUIDispatchEvent("UIEntered",0)}),this._colorPicker.addEventListener("mouseleave",this._mouseLeaveEvent=function(){e.doUIDispatchEvent("UIExited",0)})},releasePlayEvents:function(){this._parent(),this._colorPicker.removeEventListener("change",this._colorPickerValueChanged),this._colorPicker.removeEventListener("mouseenter",this._mouseEnterEvent),this._colorPicker.removeEventListener("mouseleave",this._mouseLeaveEvent)},_hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},_rgbToHex:function(e,t,i){return"#"+this._componentToHex(e)+this._componentToHex(t)+this._componentToHex(i)},_componentToHex:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t}})}),define("DS/StudioUIActorModelWeb/CXPGalleryProduct",["UWA/Core","DS/StudioUIActorModelWeb/CXPGallery","DS/StudioUIActorModelWeb/CXPImage","DS/StudioUIActorModelWeb/CXPUIMapper"],function(e,t,i,n){"use strict";return t.extend({init:function(e){this._parent(e),this._modelitems=[],this._widthTotal=0,this._heightTotal=0},Dispose:function(){this._parent(),this._clearUIItems()},_refreshItems:function(e){e&&(this._modelitems=e),this._clearUIItems();for(var t=0;t<this._modelitems.length;t++){var i=this._createUIItem(this._modelitems[t],t);i.holder.inject(this._gallery),this._UIItems.push(i)}},_clearUIItems:function(){for(var e=0;e<this._UIItems.length;e++){this._UIItems[e].holder.remove();for(var t=0;t<this._UIItems[e].mappers.length;t++)this._UIItems[e].mappers[t].Dispose();this._UIItems[e].image.Dispose()}this._UIItems=[]},_createUIItem:function(t){var s=[],r=t.QueryInterface("CATI3DExperienceObject").GetParent(),a=r.QueryInterface("CATI3DExperienceObject").GetParent(),o=new i(this._uiActor);o.visible=!0,s.push(new n(o,r,[{model:"itemSize.x",ui:"width"},{model:"itemSize.y",ui:"height"}])),s.push(new n(o,t,[{model:"image",ui:"image"},{model:"product",ui:"src",func:function(e){if(e&&e.QueryInterface("CATI3DGeoVisu")){var t=e._experienceBase.getManager("CAT3DXPreviewManager"),i=r.QueryInterface("CATI3DExperienceObject").GetValueByName("itemSize"),n=i.QueryInterface("CATI3DExperienceObject").GetValueByName("x"),s=i.QueryInterface("CATI3DExperienceObject").GetValueByName("y");t.getPreview(e.QueryInterface("CATI3DGeoVisu"),n,s).done(function(e){o.src=e})}}}])),s.push(new n(o,a,[{model:"enable",ui:"enable"}])),o.getContainer().style.position="relative";var l=e.createElement("div");l.style.padding="5px",o.inject(l);var h=e.createElement("div").inject(l);h.style.marginLeft="auto",h.style.marginRight="auto",h.style.textAlign="center",h.style.width="100%";var c=e.createElement("span").inject(h);c.style.fontSize="90%",c.style.fontWeight="bold",s.push(new n(c,t,[{model:"label",ui:"innerHTML"}]));var u=a.QueryInterface("CATI3DExperienceObject").GetValueByName("data"),d=a.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject").GetValueByName("width"),m=a.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject").GetValueByName("height"),_=u.QueryInterface("CATI3DExperienceObject").GetValueByName("items").length;if(!0===u.QueryInterface("CATI3DExperienceObject").GetValueByName("stretchToContent")){let e=.3;var p=u.QueryInterface("CATI3DExperienceObject").GetValueByName("orientation");if(1===p?(o.width<=d-d*e&&(o.width=d-10),(o.height+20)*_<=m-m*e&&(o.height=m/_-20)):0===p?(o.width*_<=d-d*e&&(o.width=d/_-10),o.height+20<=m-m*e&&(o.height=m-20)):1!==p&&0!==p&&(o.width*_<=d-d*e&&(o.width=d/_-10),(o.height+20)*_<=m-m*e&&(o.height=m/_-20)),o.width-=o.width/10,o.height-=o.height/10,p>1){this._widthTotal=this._widthTotal>=d-d*e?0:this._widthTotal;let t=d-(o.width+this._widthTotal);(t-=d-o.width*_)<0&&(t=0),l.style.marginLeft=t+"px",this._widthTotal+=o.width}else if(p<0){this._heightTotal=this._heightTotal>=m-m*e?0:this._heightTotal;let t=m-(o.height+20+this._heightTotal);(t-=m-(o.height+20)*_)<0&&(t=0),l.style.marginTop=t+"px",this._heightTotal+=o.height+20}}else{let e=100;o.height-=5,o.width<=d-e&&(o.width=d-10)}return{holder:l,image:o,mappers:s}},registerPlayEvents:function(e){this._parent(e),this._refreshItems(this._modelitems);for(var t=0;t<this._UIItems.length;t++)this._UIItems[t].image.registerPlayEvents(e,t)},releasePlayEvents:function(){this._parent();for(var e=0;e<this._UIItems.length;e++)this._UIItems[e].image.releasePlayEvents()}})}),define("DS/StudioUIActorModelWeb/CXPGalleryMenu",["UWA/Core","DS/StudioUIActorModelWeb/CXPGallery","DS/StudioUIActorModelWeb/CXPButton","DS/StudioUIActorModelWeb/CXPUIMapper"],function(e,t,i,n){"use strict";return t.extend({init:function(e){this._parent(e),this._widthTotal=0,this._heightTotal=0},Dispose:function(){this._parent(),this._clearUIItems()},_refreshItems:function(e){this._clearUIItems();for(var t=0;t<e.length;t++){var i=this._createUIItem(e[t]);i.button.inject(this._gallery),this._UIItems.push(i)}},_clearUIItems:function(){for(var e=0;e<this._UIItems.length;e++){this._UIItems[e].button.remove();for(var t=0;t<this._UIItems[e].mappers.length;t++)this._UIItems[e].mappers[t].Dispose();this._UIItems[e].button.Dispose()}this._UIItems=[]},_createUIItem:function(e){var t=[],s=e.QueryInterface("CATI3DExperienceObject").GetParent(),r=s.QueryInterface("CATI3DExperienceObject").GetParent(),a=new i(this._uiActor);a.visible=!0,t.push(new n(a,s,[{model:"itemSize.x",ui:"width"},{model:"itemSize.y",ui:"height"},{model:"itemFontHeight",ui:"fontHeight"}])),t.push(new n(a,e,[{model:"label",ui:"label"}])),t.push(new n(a,r,[{model:"enable",ui:"enable"}])),a.getContainer().style.position="relative",a.getContainer().style.margin="5px";var o=r.QueryInterface("CATI3DExperienceObject").GetValueByName("data"),l=r.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject").GetValueByName("width"),h=r.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject").GetValueByName("height"),c=o.QueryInterface("CATI3DExperienceObject").GetValueByName("items").length,u=o.QueryInterface("CATI3DExperienceObject").GetValueByName("stretchToContent");a.height*c<=h&&(a.height=(h-10)/c);var d=o.QueryInterface("CATI3DExperienceObject").GetValueByName("orientation");if(1===d?a.width<=l&&(a.width=l-10):0===d&&(a.width+10)*c<=l&&(a.width=l/c-10),!0===u){if(d>1){let e=l-(a.width+this._widthTotal)+5;e-=l-a.width*c,a.getContainer().style.marginLeft=e<=0?"5px":e+"px",this._widthTotal+=a.width}else if(d<0){let e=h-(a.height+this._heightTotal)+5;e-=h-a.height*c,a.getContainer().style.marginTop=e<=0?"5px":e+"px",this._heightTotal+=a.height}}else h<50&&(a.getContainer().style.paddingBottom="10px");return{button:a,mappers:t}},registerPlayEvents:function(e){this._parent(e);for(var t=0;t<this._UIItems.length;t++)this._UIItems[t].button.registerPlayEvents(e,t)},releasePlayEvents:function(){this._parent();for(var e=0;e<this._UIItems.length;e++)this._UIItems[e].button.releasePlayEvents()}})}),define("DS/StudioUIActorModelWeb/CXPGalleryViewpoint",["UWA/Core","DS/StudioUIActorModelWeb/CXPGallery","DS/StudioUIActorModelWeb/CXPCameraViewer","DS/StudioUIActorModelWeb/CXPUIMapper","DS/StudioUIActorModelWeb/CXPImage"],function(e,t,i,n,s){"use strict";return t.extend({init:function(e){this._parent(e),this._widthTotal=0,this._heightTotal=0},Dispose:function(){this._parent(),this._clearUIItems()},_refreshItems:function(e){this._clearUIItems();for(var t=0;t<e.length;t++){var i=this._createUIItem(e[t]);i.holder.inject(this._gallery),this._UIItems.push(i)}},_clearUIItems:function(){for(var e=0;e<this._UIItems.length;e++){this._UIItems[e].holder.remove();for(var t=0;t<this._UIItems[e].mappers.length;t++)this._UIItems[e].mappers[t].Dispose();this._UIItems[e].cxpViewer.Dispose(),this._UIItems[e].cxpImage.Dispose()}this._UIItems=[]},_createUIItem:function(t){var r=[],a=t.QueryInterface("CATI3DExperienceObject").GetParent(),o=a.QueryInterface("CATI3DExperienceObject").GetParent(),l=e.createElement("div");l.style.padding="5px";var h=new i(this._uiActor);r.push(new n(h,a,[{model:"itemSize.x",ui:"width"},{model:"itemSize.y",ui:"height"},{model:"liveUpdate",ui:"liveUpdate"}])),r.push(new n(h,t,[{model:"camera",ui:"camera"}])),r.push(new n(h,o,[{model:"enable",ui:"enable"}])),h.getContainer().style.position="relative",h.inject(l);var c=new s;r.push(new n(c,a,[{model:"itemSize.x",ui:"width"},{model:"itemSize.y",ui:"height"}])),r.push(new n(c,t,[{model:"image",ui:"image",func:function(e){return e?(h.visible=!1,h.getContainer().hide(),c.visible=!0,c.getContainer().show()):(h.visible=!0,h.getContainer().show(),c.visible=!1,c.getContainer().hide()),e}}])),r.push(new n(c,o,[{model:"enable",ui:"enable"}])),c.getContainer().style.position="relative",c.inject(l);var u=e.createElement("div").inject(l);u.style.marginLeft="auto",u.style.marginRight="auto",u.style.textAlign="center",u.style.width="100%",u.style.height="15px";var d=e.createElement("span").inject(u);d.style.fontSize="90%",d.style.fontWeight="bold",r.push(new n(d,t,[{model:"label",ui:"innerHTML"}]));var m=o.QueryInterface("CATI3DExperienceObject").GetValueByName("data"),_=o.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject").GetValueByName("width"),p=o.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject").GetValueByName("height"),f=m.QueryInterface("CATI3DExperienceObject").GetValueByName("items").length,b=m.QueryInterface("CATI3DExperienceObject").GetValueByName("stretchToContent"),y=void 0!==c.image?c:h;if(!0===b){var g=m.QueryInterface("CATI3DExperienceObject").GetValueByName("orientation");if(1===g?(y.width<=_-.3*_&&(y.width=_-10),(y.height+20)*f<=p-.3*p&&(y.height=p/f-20)):0===g?(y.width*f<=_-.3*_&&(y.width=_/f-10),y.height+20<=p-.3*p&&(y.height=p-20)):1===g&&0===g||(y.width*f<=_-.3*_&&(y.width=_/f-10),(y.height+20)*f<=p-.3*p&&(y.height=p/f-20)),g>1){let e=_-(y.width+this._widthTotal);(e-=_-y.width*f)<0&&(e=0),l.style.marginLeft=e+"px",this._widthTotal+=y.width}else if(g<0){let e=p-(y.height+this._heightTotal);(e-=p-y.height*f)<0&&(e=0),l.style.marginTop=e+"px",this._heightTotal+=y.height}}return y.getContainer().height=y.height,y.height=y.height-20,{holder:l,cxpViewer:h,cxpImage:c,mappers:r}},registerPlayEvents:function(e){this._parent(e);for(var t=0;t<this._UIItems.length;t++)this._UIItems[t].cxpViewer.registerPlayEvents(e,t),this._UIItems[t].cxpImage.registerPlayEvents(e,t)},releasePlayEvents:function(){this._parent();for(var e=0;e<this._UIItems.length;e++)this._UIItems[e].cxpViewer.releasePlayEvents(),this._UIItems[e].cxpImage.releasePlayEvents()}})}),define("DS/StudioUIActorModelWeb/controls/CXPGalleryImageControl",["UWA/Core","DS/StudioUIActorModelWeb/controls/CXPGalleryControl"],function(e,t){"use strict";return t.inherit({publishedProperties:{},buildView:function(){this._parent(),this.contentContainers=[]},_buildItem:function(i,n,s){this._parent(i,n,s);let r=t.CreateLabeledItem(s,i.label);if(i.image)r.style.background="url("+i.image+")",r.style.backgroundSize="100% 100%";else{let t=e.createElement("div").inject(r);t.style.width="100%",t.style.height="100%"}this.contentContainers.push(r)},_onCleanItems:function(){this._parent(),this.contentContainers=[]}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DGalleryImage",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DGallery","DS/StudioUIActorModelWeb/controls/CXPGalleryImageControl"],function(e,t,i){"use strict";return t.extend({_BuildGalleryView:function(e){this._gallery=(new i).inject(e)},_SetItems:function(t){let i=[];var n=[];for(let s=0;s<t.length;s++){let r=t[s].QueryInterface("CATI3DExperienceObject"),a=r.GetValueByName("image"),o=r.GetValueByName("label");if(e.is(a)){let t=a.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(t))return void console.error("Cant retrieve picture");n.push(t.getPicture().done(e=>{i[s]={label:o,image:e.src}}))}else i[s]={label:o,image:""}}Promise.allSettled(n).then(()=>{this._gallery.items=i})},_UpdateItem:function(t,i){let n=i.QueryInterface("CATI3DExperienceObject"),s=n.GetValueByName("image"),r=n.GetValueByName("label");if(e.is(s)){let i=s.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");i.getPicture().done(e=>{let i={label:r,image:e.src};this._gallery.updateItem(t,i)})}else{let e={label:r,image:""};this._gallery.updateItem(t,e)}}})}),define("DS/StudioUIActorModelWeb/controls/CXPGalleryMenuControl",["UWA/Core","DS/StudioUIActorModelWeb/controls/CXPGalleryControl","DS/Controls/Button"],function(e,t,i){"use strict";return t.inherit({publishedProperties:{fontSize:{defaultValue:30}},buildView:function(){this._parent(),this.selectionFeedback=!1,this.contentContainers=[]},_buildItem:function(e,t,n){this._parent(e,t,n),n.style.minWidth="var(--minWidth)",n.style.minHeight="var(--minHeight)";let s=new i({emphasize:"secondary"}).inject(n);s.elements.container.style.minWidth="var(--minWidth)",s.elements.container.style.minHeight="var(--minHeight)",s.elements.container.style.width="100%",s.elements.container.style.height="100%",s.label=e.label,this.contentContainers.push(n),this._applyFontSize()},_applyFontSize:function(){let e=0;e=1===this.fontSize?"12px":6*this.fontSize+"%";for(let t of this.contentContainers)t.firstChild.style.fontSize=e},_onCleanItems:function(){this._parent(),this.contentContainers=[]}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DGalleryMenu",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DGallery","DS/StudioUIActorModelWeb/controls/CXPGalleryMenuControl"],function(e,t,i){"use strict";return t.extend({_Fill:function(e){this._parent(e);let t=this.QueryInterface("CATI3DExperienceObject");this._SetFontSize(t.GetValueByName("fontSize")),this._ListenVariableChanges(t,"fontSize")},_BuildGalleryView:function(e){this._gallery=(new i).inject(e)},_SetItems:function(e){let t=[];for(let i=0;i<e.length;i++){let n=e[i].QueryInterface("CATI3DExperienceObject").GetValueByName("label");t.push({label:n})}this._gallery.items=t},_UpdateItem:function(e,t){let i={label:t.QueryInterface("CATI3DExperienceObject").GetValueByName("label")};this._gallery.updateItem(e,i)},_UpdateProperty:function(e){if("fontSize"===e[0]){let e=this.QueryInterface("CATI3DExperienceObject");this._SetFontSize(e.GetValueByName("fontSize"))}else this._parent(e)},_SetFontSize:function(e){this._gallery.fontSize=e}})}),define("DS/StudioUIActorModelWeb/CXPText",["UWA/Core","DS/StudioUIActorModelWeb/CXPUIActor"],function(e,t){"use strict";return t.extend({init:function(t){this._parent(t),this._spanHolder=e.createElement("div").inject(this.getContainer()),this._spanHolder.style.boxSizing="border-box",this._spanHolder.style.cursor="default",this._span=e.createElement("span").inject(this._spanHolder),this._span.style.lineHeight="initial",this._span.style.whiteSpace="pre",this._spanHolder.style.border="2px",this._spanHolder.style.borderStyle="solid",this._spanHolder.style.borderRadius="5px",this._spanHolder.style.padding="5px",this._spanHolder.style.minWidth="100%",this._spanHolder.style.minHeight="100%",this._spanHolder.style.position="absolute",Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,get:function(){return this._enable},set:function(e){this._enable=e,this._enable?(this._spanHolder.style.pointerEvents="inherit",this._spanHolder.style.filter="none"):(this._spanHolder.style.pointerEvents="none",this._spanHolder.style.filter="brightness(70%) grayscale(100%)")}}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._spanHolder.style.opacity=this._opacity/255}}),Object.defineProperty(this,"alignment",{enumerable:!0,configurable:!0,get:function(){return this._alignment},set:function(e){this._alignment=e,0===this._alignment?this._spanHolder.style.textAlign="left":1===this._alignment?this._spanHolder.style.textAlign="center":2===this._alignment&&(this._spanHolder.style.textAlign="right")}}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return this._color},set:function(e){this._color&&(this._mapper.stopListening(null,"r.CHANGED",this._colorCallback),this._mapper.stopListening(null,"g.CHANGED",this._colorCallback),this._mapper.stopListening(null,"b.CHANGED",this._colorCallback));var t=this;this._color=e;var i=this._color.QueryInterface("CATI3DExperienceObject");this._colorCallback=function(){t._span.style.color="rgb("+i.GetValueByName("r")+","+i.GetValueByName("g")+","+i.GetValueByName("b")+")"},this._mapper.listenTo(i,"r.CHANGED",this._colorCallback),this._mapper.listenTo(i,"g.CHANGED",this._colorCallback),this._mapper.listenTo(i,"b.CHANGED",this._colorCallback),this._colorCallback()}}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,get:function(){return this._text},set:function(e){this._text=e,this._span.innerHTML=this._text}}),Object.defineProperty(this,"bold",{enumerable:!0,configurable:!0,get:function(){return this._bold},set:function(e){this._bold=e,this._bold?this._span.style.fontWeight="bold":this._span.style.fontWeight="normal"}}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,get:function(){return this._fontFamily},set:function(e){this._fontFamily=e,this._span.style.fontFamily=this._fontFamily}}),Object.defineProperty(this,"fontHeight",{enumerable:!0,configurable:!0,get:function(){return this._height},set:function(e){this._height=e,1===this._height&&(this._height=14),this._span.style.fontSize=.8*this._height+"px"}}),Object.defineProperty(this,"italic",{enumerable:!0,configurable:!0,get:function(){return this._italic},set:function(e){this._italic=e,this._italic?(this._span.style.fontStyle="italic",this._height>50&&(this._spanHolder.style.paddingRight="15px")):this._span.style.fontStyle="normal"}}),Object.defineProperty(this,"backgroundColor",{enumerable:!0,configurable:!0,get:function(){return this._backgroundColor},set:function(e){this._backgroundColor&&(this._mapper.stopListening(null,"r.CHANGED",this._backgroundColorCallback),this._mapper.stopListening(null,"g.CHANGED",this._backgroundColorCallback),this._mapper.stopListening(null,"b.CHANGED",this._backgroundColorCallback));var t=this;this._backgroundColor=e;var i=this._backgroundColor.QueryInterface("CATI3DExperienceObject");this._backgroundColorCallback=function(){t.showBackground?t._spanHolder.style.backgroundColor="rgb("+i.GetValueByName("r")+","+i.GetValueByName("g")+","+i.GetValueByName("b")+")":t._spanHolder.style.backgroundColor="transparent"},this._mapper.listenTo(i,"r.CHANGED",this._backgroundColorCallback),this._mapper.listenTo(i,"g.CHANGED",this._backgroundColorCallback),this._mapper.listenTo(i,"b.CHANGED",this._backgroundColorCallback),this._backgroundColorCallback()}}),Object.defineProperty(this,"borderColor",{enumerable:!0,configurable:!0,get:function(){return this._borderColor},set:function(e){this._borderColor&&(this._mapper.stopListening(null,"r.CHANGED",this._borderColorCallback),this._mapper.stopListening(null,"g.CHANGED",this._borderColorCallback),this._mapper.stopListening(null,"b.CHANGED",this._borderColorCallback));var t=this;this._borderColor=e;var i=this._borderColor.QueryInterface("CATI3DExperienceObject");this._borderColorCallback=function(){t.showBorder?t._spanHolder.style.borderColor="rgb("+i.GetValueByName("r")+","+i.GetValueByName("g")+","+i.GetValueByName("b")+")":t._spanHolder.style.borderColor="transparent"},this._mapper.listenTo(i,"r.CHANGED",this._borderColorCallback),this._mapper.listenTo(i,"g.CHANGED",this._borderColorCallback),this._mapper.listenTo(i,"b.CHANGED",this._borderColorCallback),this._borderColorCallback()}}),Object.defineProperty(this,"showBackground",{enumerable:!0,configurable:!0,get:function(){return this._showBackground},set:function(e){if(this._showBackground=e,this._showBackground){var t=this.backgroundColor;if(t){var i=t.QueryInterface("CATI3DExperienceObject");this._spanHolder.style.backgroundColor="rgb("+i.GetValueByName("r")+","+i.GetValueByName("g")+","+i.GetValueByName("b")+")"}}else this._spanHolder.style.backgroundColor="transparent"}}),Object.defineProperty(this,"showBorder",{enumerable:!0,configurable:!0,get:function(){return this._showBorder},set:function(e){if(this._showBorder=e,this._showBorder){var t=this.borderColor;if(t){var i=t.QueryInterface("CATI3DExperienceObject");this._spanHolder.style.borderColor="rgb("+i.GetValueByName("r")+","+i.GetValueByName("g")+","+i.GetValueByName("b")+")"}}else this._spanHolder.style.borderColor="transparent"}})},registerPlayEvents:function(e){this._parent(e),this._spanHolder.addEventListener("click",this._clickEvent=function(){e.doUIDispatchEvent("UIClicked",0)}),this._spanHolder.addEventListener("dblclick",this._dblclickEvent=function(){e.doUIDispatchEvent("UIDoubleClicked",0)}),this._spanHolder.addEventListener("mouseenter",this._mouseEnterEvent=function(){e.doUIDispatchEvent("UIEntered",0)}),this._spanHolder.addEventListener("mouseleave",this._mouseLeaveEvent=function(){e.doUIDispatchEvent("UIExited",0)}),this._spanHolder.addEventListener("mousemove",this._mouseMoveEvent=function(){e.doUIDispatchEvent("UIHovered",0)}),this._spanHolder.addEventListener("mousedown",this._mouseDownEvent=function(t){0===t.button&&e.doUIDispatchEvent("UIPressed",0)}),this._spanHolder.addEventListener("mouseup",this._mouseUpEvent=function(t){0===t.button&&e.doUIDispatchEvent("UIReleased",0)}),this._spanHolder.addEventListener("contextmenu",this._contextMenuEvent=function(){return e.doUIDispatchEvent("UIRightClicked",0),!1})},releasePlayEvents:function(){this._parent(),this._spanHolder.removeEventListener("click",this._clickEvent),this._spanHolder.removeEventListener("dblclick",this._dblclickEvent),this._spanHolder.removeEventListener("mouseenter",this._mouseEnterEvent),this._spanHolder.removeEventListener("mouseleave",this._mouseLeaveEvent),this._spanHolder.removeEventListener("mousemove",this._mouseMoveEvent),this._spanHolder.removeEventListener("mousedown",this._mouseDownEvent),this._spanHolder.removeEventListener("mouseup",this._mouseUpEvent),this._spanHolder.removeEventListener("contextmenu",this._contextMenuEvent)}})}),define("DS/StudioUIActorModelWeb/controls/CXPGalleryViewpointControl",["UWA/Core","DS/StudioUIActorModelWeb/controls/CXPGalleryControl","DS/StudioUIActorModelWeb/controls/CXPCameraViewerControl"],function(e,t,i){"use strict";return t.inherit({publishedProperties:{liveUpdate:{defaultValue:!1}},buildView:function(){this._parent(),this._resizeObserver=null,this.contentContainers=[]},_buildItem:function(e,i,n){this._parent(e,i,n);let s=t.CreateLabeledItem(n,e.label);this.stretchToContent?(s.style.width="inherit",s.style.height="inherit"):(s.style.width="var(--minWidth)",s.style.height="var(--minHeight)"),this.contentContainers[i]=s},updateItem:function(e,t){0==e&&this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),this._parent(e,t);let n=t,s=this.contentContainers[e];if(n.image)s.style.background="url("+n.image+")",s.style.backgroundSize="100% 100%";else{let e=(new i).inject(s);e.camera=n.camera,e.liveUpdate=this.liveUpdate,s.viewer=e,this.stretchToContent?(e.elements.container.style.width="var(--computedWidth)",e.elements.container.style.height="var(--computedHeight)"):(e.elements.container.style.width="100%",e.elements.container.style.height="100%")}0==e&&(this._resizeObserver=new ResizeObserver(()=>{this._updateViewersSize()}),this._resizeObserver.observe(s))},_applyItems:function(e){if(this._parent(e),this.contentContainers.length){let e=this.contentContainers[0].offsetWidth,t=this.contentContainers[0].offsetHeight;this.elements.itemsContainer.style.setProperty("--computedWidth",e+"px"),this.elements.itemsContainer.style.setProperty("--computedHeight",t+"px");for(let e=0;e<this.items.length;++e){let t=this.items[e],n=this.contentContainers[e];if(t.image)n.style.background="url("+t.image+")",n.style.backgroundSize="100% 100%";else{let e=(new i).inject(n);e.camera=t.camera,e.liveUpdate=this.liveUpdate,n.viewer=e,this.stretchToContent?(e.elements.container.style.width="var(--computedWidth)",e.elements.container.style.height="var(--computedHeight)"):(e.elements.container.style.width="100%",e.elements.container.style.height="100%")}}this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),this._resizeObserver=new ResizeObserver(()=>{this._updateViewersSize()}),this._resizeObserver.observe(this.contentContainers[0])}},_applyStretchToContent:function(e){this._parent(e);for(let e of this.contentContainers)this.stretchToContent?(e.style.width="inherit",e.style.height="inherit"):(e.style.width="var(--minWidth)",e.style.height="var(--minHeight)");if(this.stretchToContent){for(let e=0;e<this.contentContainers.length;++e){let t=this.contentContainers[e].viewer;t&&(t.elements.container.style.width="var(--computedWidth)",t.elements.container.style.height="var(--computedHeight)")}this._updateViewersSize(),null==this._resizeObserver&&this.contentContainers.length>0&&(this._resizeObserver=new ResizeObserver(()=>{this._updateViewersSize()}),this._resizeObserver.observe(this.contentContainers[0]))}else{this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null);for(let e=0;e<this.contentContainers.length;++e){let t=this.contentContainers[e].viewer;t&&(t.elements.container.style.width="100%",t.elements.container.style.height="100%")}}},_applyLiveUpdate:function(){for(let e=0;e<this.contentContainers.length;++e){let t=this.contentContainers[e].viewer;t&&(t.liveUpdate=this.liveUpdate)}},_onCleanItems:function(){this._parent(),this.contentContainers=[]},_updateViewersSize:function(){if(this.contentContainers.length&&this.stretchToContent){let e=null;this.contentContainers[0].viewer&&((e=this.contentContainers[0].viewer).elements.container.style.display="none");let t=this.contentContainers[0].offsetWidth-1,i=this.contentContainers[0].offsetHeight-1;this.elements.itemsContainer.style.setProperty("--computedWidth",t+"px"),this.elements.itemsContainer.style.setProperty("--computedHeight",i+"px"),e.elements.container.style.display="inherit"}}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DGalleryViewpoint",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DGallery","DS/StudioUIActorModelWeb/controls/CXPGalleryViewpointControl"],function(e,t,i){"use strict";return t.extend({_Fill:function(e){this._parent(e);let t=this.QueryInterface("CATI3DExperienceObject");this._SetLiveUpdate(t.GetValueByName("liveUpdate")),this._ListenVariableChanges(t,"liveUpdate")},_BuildGalleryView:function(e){this._gallery=(new i).inject(e)},_SetItems:function(t){let i=[],n=[];for(let s=0;s<t.length;s++){let r=t[s].QueryInterface("CATI3DExperienceObject"),a=r.GetValueByName("image"),o=r.GetValueByName("camera"),l=r.GetValueByName("label");if(e.is(a)){let t=a.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(t))return void console.error("Cant retrieve picture");i.push(t.getPicture().done(e=>{n[s]={image:e.src,camera:o,label:l}}))}else n[s]={image:null,camera:o,label:l}}Promise.allSettled(i).then(()=>{this._gallery.items=n})},_UpdateItem:function(t,i){let n=i.QueryInterface("CATI3DExperienceObject"),s=n.GetValueByName("image"),r=n.GetValueByName("camera"),a=n.GetValueByName("label");if(e.is(s)){let i=s.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");i.getPicture().done(e=>{let i={image:e.src,camera:r,label:a};this._gallery.updateItem(t,i)})}else{let e={image:null,camera:r,label:a};this._gallery.updateItem(t,e)}},_UpdateProperty:function(e){if("liveupdate"===e[0]){let e=this.QueryInterface("CATI3DExperienceObject");this._SetLiveUpdate(e.GetValueByName("liveUpdate"))}else this._parent(e)},_SetLiveUpdate:function(e){this._gallery.liveUpdate=e}})}),define("DS/StudioUIActorModelWeb/CXPGalleryImage",["UWA/Core","DS/StudioUIActorModelWeb/CXPGallery","DS/StudioUIActorModelWeb/CXPImage","DS/StudioUIActorModelWeb/CXPUIMapper"],function(e,t,i,n){"use strict";return t.extend({init:function(e){this._parent(e),this._widthTotal=0,this._heightTotal=0},Dispose:function(){this._parent(),this._clearUIItems()},_refreshItems:function(e){this._clearUIItems();for(var t=0;t<e.length;t++){var i=this._createUIItem(e[t]);i.holder.inject(this._gallery),this._UIItems.push(i)}},_clearUIItems:function(){for(var e=0;e<this._UIItems.length;e++){this._UIItems[e].holder.remove();for(var t=0;t<this._UIItems[e].mappers.length;t++)this._UIItems[e].mappers[t].Dispose();this._UIItems[e].image.Dispose()}this._UIItems=[]},_createUIItem:function(t){var s=[],r=t.QueryInterface("CATI3DExperienceObject").GetParent(),a=r.QueryInterface("CATI3DExperienceObject").GetParent(),o=new i(this._uiActor);o.visible=!0,s.push(new n(o,r,[{model:"itemSize.x",ui:"width"},{model:"itemSize.y",ui:"height"}])),s.push(new n(o,t,[{model:"image",ui:"image"}])),s.push(new n(o,a,[{model:"enable",ui:"enable"}])),o.getContainer().style.position="relative";var l=e.createElement("div");l.style.padding="5px",o.inject(l);var h=e.createElement("div").inject(l);h.style.marginLeft="auto",h.style.marginRight="auto",h.style.textAlign="center",h.style.width="100%";var c=e.createElement("span").inject(h);c.style.fontSize="90%",c.style.fontWeight="bold",s.push(new n(c,t,[{model:"label",ui:"innerHTML"}]));var u=a.QueryInterface("CATI3DExperienceObject").GetValueByName("data"),d=a.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject").GetValueByName("width"),m=a.QueryInterface("CATI3DExperienceObject").GetValueByName("minimumDimension").QueryInterface("CATI3DExperienceObject").GetValueByName("height"),_=u.QueryInterface("CATI3DExperienceObject").GetValueByName("items").length;if(!0===u.QueryInterface("CATI3DExperienceObject").GetValueByName("stretchToContent")){var p=u.QueryInterface("CATI3DExperienceObject").GetValueByName("orientation");if(1===p?(o.width<=d-.3*d&&(o.width=d-10),(o.height+20)*_<=m-.3*m&&(o.height=m/_-20)):0===p?(o.width*_<=d-.3*d&&(o.width=d/_-10),o.height+20<=m-.3*m&&(o.height=m-20)):1===p&&0===p||(o.width*_<=d-.3*d&&(o.width=d/_-10),(o.height+15)*_<=m-.3*m&&(o.height=m/_-20)),p>1){let e=d-(o.width+this._widthTotal);(e-=d-o.width*_)<0&&(e=0),l.style.marginLeft=e+"px",this._widthTotal+=o.width}else if(p<0){let e=m-(o.height+20+this._heightTotal);(e-=m-(o.height+20)*_)<0&&(e=0),l.style.marginTop=e+"px",this._heightTotal+=o.height+20}}return{holder:l,image:o,mappers:s}},registerPlayEvents:function(e){this._parent(e);for(var t=0;t<this._UIItems.length;t++)this._UIItems[t].image.registerPlayEvents(e,t)},releasePlayEvents:function(){this._parent();for(var e=0;e<this._UIItems.length;e++)this._UIItems[e].image.releasePlayEvents()}})}),define("DS/StudioUIActorModelWeb/CXPTextField",["UWA/Core","DS/StudioUIActorModelWeb/CXPUIActor","DS/Controls/Editor"],function(e,t,i){"use strict";return t.extend({init:function(e){this._parent(e),this._editor=(new i).inject(this.getContainer()),this._editor.elements.container.style.width="100%",this._editor.elements.container.style.height="100%",this._editor.elements.container.childNodes[0].style.width="100%",this._editor.elements.container.childNodes[0].style.height="100%",this._editor.elements.container.childNodes[0].style.boxSizing="border-box",this._editor.elements.container.childNodes[0].style.overflow="hidden",this._editor.elements.container.childNodes[0].style.whiteSpace="nowrap",this._editor.nbRows=1,Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,get:function(){return this._enable},set:function(e){this._enable=e,this._editor.disabled=!this._enable}}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._editor.elements.container.childNodes[0].style.opacity=this._opacity/255}}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,get:function(){return this._text},set:function(e){this._text=e,this._editor.value=this._text}})},registerPlayEvents:function(e){this._parent(e);var t=this;this._editor.addEventListener("uncommittedChange",this._valueChanged=function(){e.text=t._editor.valueToCommit,e.doUIDispatchEvent("UIValueChanged",0)}),this._editor.addEventListener("keydown",this._returnPress=function(t){13===t.keyCode&&(e.doUIDispatchEvent("UIReturnPressed",0),t.preventDefault())}),this._editor.addEventListener("mouseenter",this._mouseEnterEvent=function(){e.doUIDispatchEvent("UIEntered",0)}),this._editor.addEventListener("mouseleave",this._mouseLeaveEvent=function(){e.doUIDispatchEvent("UIExited",0)})},releasePlayEvents:function(){this._parent(),this._editor.removeEventListener("uncommittedChange",this._valueChanged),this._editor.removeEventListener("keydown",this._returnPress),this._editor.removeEventListener("mouseenter",this._mouseEnterEvent),this._editor.removeEventListener("mouseleave",this._mouseLeaveEvent)}})}),define("DS/StudioUIActorModelWeb/controls/CXPGalleryProductControl",["UWA/Core","DS/StudioUIActorModelWeb/controls/CXPGalleryControl","DS/StudioUIActorModelWeb/controls/CXPProductViewerControl"],function(e,t,i){"use strict";return t.inherit({buildView:function(){this._parent(),this.contentContainers=[],this.viewers=[]},_buildItem:function(e,n,s){this._parent(e,n,s);let r=t.CreateLabeledItem(s,e.label);if(e.image)r.style.background="url("+e.image+")",r.style.backgroundSize="100% 100%";else{let t=(new i).inject(r);t.product=e.product,t.elements.container.style.width="100%",t.elements.container.style.height="100%",this.viewers.push(t)}this.contentContainers.push(r)},_applyItems:function(){this._parent();for(let e of this.viewers)e.refreshProductViewer()},_onCleanItems:function(){this._parent(),this.contentContainers=[],this.viewers=[]}})}),define("DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DGalleryProduct",["UWA/Core","DS/StudioUIActorModelWeb/extensions/CATE3DXUIRep2DGallery","DS/StudioUIActorModelWeb/controls/CXPGalleryProductControl"],function(e,t,i){"use strict";return t.extend({_BuildGalleryView:function(e){this._gallery=(new i).inject(e)},_SetItems:function(t){let i=[],n=[];for(let s=0;s<t.length;s++){let r=t[s].QueryInterface("CATI3DExperienceObject"),a=r.GetValueByName("image"),o=r.GetValueByName("product"),l=r.GetValueByName("label");if(e.is(a)){let t=a.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(t))return void console.error("Cant retrieve picture");i.push(t.getPicture().done(e=>{n[s]={image:e.src,product:o,label:l}}))}else n[s]={image:null,product:o,label:l}}Promise.allSettled(i).then(()=>{this._gallery.items=n})},_UpdateItem:function(t,i){let n=i.QueryInterface("CATI3DExperienceObject"),s=n.GetValueByName("image"),r=n.GetValueByName("product"),a=n.GetValueByName("label");if(e.is(s)){let i=s.QueryInterface("CATI3DXPictureResourceAsset");if(!e.is(i))return void console.error("Cant retrieve picture");i.getPicture().done(e=>{let i={image:e.src,product:r,label:a};this._gallery.updateItem(t,i)})}else{let e={image:null,product:r,label:a};this._gallery.updateItem(t,e)}}})}),define("DS/StudioUIActorModelWeb/CXPWebViewer",["UWA/Core","DS/StudioUIActorModelWeb/CXPUIActor"],function(e,t){"use strict";return t.extend({init:function(t){this._parent(t),this._webViewer=e.createElement("iframe").inject(this.getContainer()),this._webViewer.style.width="100%",this._webViewer.style.height="100%",Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,get:function(){return this._enable},set:function(e){this._enable=e,this._enable?(this._webViewer.style.pointerEvents="inherit",this._webViewer.style.filter="none"):(this._webViewer.style.pointerEvents="none",this._webViewer.style.filter="brightness(70%) grayscale(100%)")}}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._webViewer.style.opacity=this._opacity/255}}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,get:function(){return this._url},set:function(e){this._url=e,this._webViewer.src=this._url}})},registerPlayEvents:function(e){this._parent(e),this._webViewer.addEventListener("mouseenter",this._mouseEnterEvent=function(){e.doUIDispatchEvent("UIEntered",0)}),this._webViewer.addEventListener("mouseleave",this._mouseLeaveEvent=function(){e.doUIDispatchEvent("UIExited",0)})},releasePlayEvents:function(){this._parent(),this._webViewer.removeEventListener("mouseenter",this._mouseEnterEvent),this._webViewer.removeEventListener("mouseleave",this._mouseLeaveEvent)}})}),define("DS/StudioUIActorModelWeb/CXPSlider",["UWA/Core","DS/StudioUIActorModelWeb/CXPUIActor","DS/Controls/Slider"],function(e,t,i){"use strict";return t.extend({init:function(t){this._parent(t);var n=t.QueryInterface("CATI3DExperienceObject").GetValueByName("data");this._valueUnit=n.QueryInterface("CATI3DExperienceObject").GetValueByName("valueUnit"),this._showValueLabel=n.QueryInterface("CATI3DExperienceObject").GetValueByName("showValueLabel"),this._labelPosition=n.QueryInterface("CATI3DExperienceObject").GetValueByName("labelPosition"),this._holder=e.createElement("div").inject(this.getContainer()),1===this._labelPosition||2===this._labelPosition?(this._holderSubSlider=e.createElement("div").inject(this._holder),this._holderSubSpan=e.createElement("div").inject(this._holder)):(this._holderSubSpan=e.createElement("div").inject(this._holder),this._holderSubSlider=e.createElement("div").inject(this._holder)),this._holder.style.minWidth="70px",this._slider=(new i).inject(this._holderSubSlider),this._span=e.createElement("span").inject(this._holderSubSpan),Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,get:function(){return this._enable},set:function(e){this._enable=e,this._slider.disabled=!this._enable}}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._holder.style.opacity=this._opacity/255}}),Object.defineProperty(this,"showValueLabel",{enumerable:!0,configurable:!0,get:function(){return this._showValueLabel},set:function(e){this._showValueLabel=e}}),Object.defineProperty(this,"valueUnit",{enumerable:!0,configurable:!0,get:function(){return this._valueUnit},set:function(e){this._valueUnit=e}}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,get:function(){return this._orientation},set:function(e){this._orientation=e,this._holderSubSpan.style.textAlign="center",0===this._orientation?(this._slider.displayStyle="vertical",this._holderSubSlider.style.justifyContent="center",this._holderSubSlider.style.display="flex",3!==this._labelPosition&&2!==this._labelPosition||(this._holderSubSlider.style.width="50%",this._holderSubSlider.style.height="auto",this._holderSubSpan.style.width="auto",this._holderSubSpan.style.height="auto",this._holderSubSpan.style.whiteSpace="pre",this._holder.style.alignItems="center",this._holder.style.display="flex")):1===this._orientation&&(this._slider.displayStyle="horizontal",3!==this._labelPosition&&2!==this._labelPosition||(this._holderSubSlider.style.width="100%",this._holderSubSlider.style.height="auto",this._holderSubSpan.style.width="auto",this._holderSubSpan.style.height="auto",this._holderSubSpan.style.whiteSpace="pre",this._holder.style.alignItems="center",this._holder.style.display="flex"))}}),Object.defineProperty(this,"maximumValue",{enumerable:!0,configurable:!0,get:function(){return this._maximumValue},set:function(e){this._maximumValue=e,this._slider.maxValue=this._maximumValue}}),Object.defineProperty(this,"minimumValue",{enumerable:!0,configurable:!0,get:function(){return this._minimumValue},set:function(e){this._minimumValue=e,this._slider.minValue=this._minimumValue}}),Object.defineProperty(this,"stepValue",{enumerable:!0,configurable:!0,get:function(){return this._stepValue},set:function(e){this._stepValue=e,this._slider.stepValue=this._stepValue}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this._value},set:function(e){this._value=e,this._slider.value=this._value,this._showValueLabel&&(this._span.textContent=this._value+" "+this._valueUnit)}})},registerPlayEvents:function(e){var t=this;this._parent(e),this._slider.addEventListener("change",this._sliderValueChanged=function(){e.value=t._slider.value,e.doUIDispatchEvent("UIValueChanged",0)}),this._slider.addEventListener("beginEdit",this._beginEditChanged=function(){e.doUIDispatchEvent("UIDragStarted",0)}),this._slider.addEventListener("endEdit",this._endEditChanged=function(){e.doUIDispatchEvent("UIDragEnded",0)}),this._slider.addEventListener("mouseenter",this._mouseEnterEvent=function(){e.doUIDispatchEvent("UIEntered",0)}),this._slider.addEventListener("mouseleave",this._mouseLeaveEvent=function(){e.doUIDispatchEvent("UIExited",0)})},releasePlayEvents:function(){this._parent(),this._slider.removeEventListener("change",this._sliderValueChanged),this._slider.removeEventListener("beginEdit",this._beginEditChanged),this._slider.removeEventListener("endEdit",this._endEditChanged),this._slider.removeEventListener("mouseenter",this._mouseEnterEvent),this._slider.removeEventListener("mouseleave",this._mouseLeaveEvent)}})}),define("DS/StudioUIActorModelWeb/CXPUIRepFactory",["UWA/Core","DS/StudioUIActorModelWeb/CXPUIMapper","DS/StudioUIActorModelWeb/CXPUIActor","DS/StudioUIActorModelWeb/CXPButton","DS/StudioUIActorModelWeb/CXPText","DS/StudioUIActorModelWeb/CXPImage","DS/StudioUIActorModelWeb/CXPSlider","DS/StudioUIActorModelWeb/CXPTextField","DS/StudioUIActorModelWeb/CXPColorPicker","DS/StudioUIActorModelWeb/CXPCameraViewer","DS/StudioUIActorModelWeb/CXPWebViewer","DS/StudioUIActorModelWeb/CXPGalleryMenu","DS/StudioUIActorModelWeb/CXPGalleryViewpoint","DS/StudioUIActorModelWeb/CXPGalleryImage","DS/StudioUIActorModelWeb/CXPGalleryProduct"],function(e,t,i,n,s,r,a,o,l,h,c,u,d,m,_){"use strict";return e.Class.extend({init:function(){},typeMap:{undefined:{rep:function(e){return new i(e)},binding:[]},CXPButton:{rep:function(e){return new n(e)},binding:[{model:"visible",ui:"visible"},{model:"enable",ui:"enable"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.fontHeight",ui:"fontHeight"},{model:"data.icon",ui:"icon"},{model:"data.iconDimension.x",ui:"iconWidth"},{model:"data.iconDimension.y",ui:"iconHeight"},{model:"data.label",ui:"label"},{model:"data.pushable",ui:"pushable"},{model:"data.pushed",ui:"pushed"}]},CXPText:{rep:function(e){return new s(e)},binding:[{model:"visible",ui:"visible"},{model:"enable",ui:"enable"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.alignment",ui:"alignment"},{model:"data.color",ui:"color"},{model:"data.text",ui:"text"},{model:"data.bold",ui:"bold"},{model:"data.font",ui:"fontFamily"},{model:"data.height",ui:"fontHeight"},{model:"data.italic",ui:"italic"},{model:"data.backgroundColor",ui:"backgroundColor"},{model:"data.borderColor",ui:"borderColor"},{model:"data.showBackground",ui:"showBackground"},{model:"data.showBorder",ui:"showBorder"}]},CXPImage:{rep:function(e){return new r(e)},binding:[{model:"visible",ui:"visible"},{model:"enable",ui:"enable"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.image",ui:"image"}]},CXPSlider:{rep:function(e){return new a(e)},binding:[{model:"visible",ui:"visible"},{model:"enable",ui:"enable"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.orientation",ui:"orientation"},{model:"data.maximumValue",ui:"maximumValue"},{model:"data.minimumValue",ui:"minimumValue"},{model:"data.stepValue",ui:"stepValue"},{model:"data.value",ui:"value"}]},CXPTextField:{rep:function(e){return new o(e)},binding:[{model:"visible",ui:"visible"},{model:"enable",ui:"enable"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.text",ui:"text"}]},CXPColorPicker:{rep:function(e){return new l(e)},binding:[{model:"visible",ui:"visible"},{model:"enable",ui:"enable"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.color",ui:"color"}]},CXPCameraViewer:{rep:function(e){return new h(e)},binding:[{model:"visible",ui:"visible"},{model:"enable",ui:"enable"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.liveUpdate",ui:"liveUpdate"},{model:"data.camera",ui:"camera"}]},CXPWebViewer:{rep:function(e){return new c(e)},binding:[{model:"visible",ui:"visible"},{model:"enable",ui:"enable"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.url",ui:"url"}]},CXPGalleryMenu:{rep:function(e){return new u(e)},binding:[{model:"visible",ui:"visible"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.items",ui:"items"},{model:"data.orientation",ui:"orientation"},{model:"data.stretchToContent",ui:"stretchToContent"}]},CXPGalleryViewpoint:{rep:function(e){return new d(e)},binding:[{model:"visible",ui:"visible"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.items",ui:"items"},{model:"data.orientation",ui:"orientation"},{model:"data.stretchToContent",ui:"stretchToContent"}]},CXPGalleryImage:{rep:function(e){return new m(e)},binding:[{model:"visible",ui:"visible"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.items",ui:"items"},{model:"data.orientation",ui:"orientation"},{model:"data.stretchToContent",ui:"stretchToContent"}]},CXPGalleryProduct:{rep:function(e){return new _(e)},binding:[{model:"visible",ui:"visible"},{model:"opacity",ui:"opacity"},{model:"minimumDimension",ui:"minimumDimension"},{model:"data.items",ui:"items"},{model:"data.orientation",ui:"orientation"},{model:"data.stretchToContent",ui:"stretchToContent"}]}},createRep:function(e,i){var n=this.typeMap[e].rep(i),s=new t(n,i,this.typeMap[e].binding);return n.setUIMapper(s),n}})}),define("DS/StudioUIActorModelWeb/managers/CAT3DXUIManager",["UWA/Core","UWA/Class/Listener","DS/StudioUIActorModelWeb/CXPUIRepFactory"],function(e,t,i){"use strict";return e.Class.extend(t,{Build:function(){this._uiRepToRefresh=[],this._repFactory=new i,this._doRefreshUIActorsList=!1,this._doRefreshUIActorsZIndex=!1},Dispose:function(){this.removeExperience(),delete this._repFactory,this._doRefreshUIActorsList=!1,this._doRefreshUIActorsZIndex=!1,delete this._waitUIActorsReadyDeferred},getFactory:function(){return this._repFactory},setExperience:function(e){if(this._experience)console.warn("CAT3DXUIManager : An experience is already defined");else{this._experience=e;var t=this;this.listenTo(e.QueryInterface("CATI3DExperienceObject"),"actors.CHANGED",function(){t._doRefreshUIActorsList=!0}),this.listenTo(e.QueryInterface("CATI3DExperienceObject"),"currentScene.CHANGED",function(){t._doRefreshUIActorsList=!0}),this._doRefreshUIActorsList=!0}},removeExperience:function(){delete this._experience,this.stopListening(),this._UIActorsList=[],this._uiRepToRefresh=[];for(var e=this._getUIRepHolder();e.firstChild;)e.firstChild.remove()},_getUIRepHolder:function(){return this._UIRepHolder||this._createUIRepHolder(),this._UIRepHolder},_createUIRepHolder:function(){this._UIRepHolder||(this._UIRepHolder=e.createElement("div").inject(this._experienceBase.webApplication.frmWindow.getUIFrame()),this._UIRepHolder.id="UIActorsRepHolder",this._UIRepHolder.style.position="absolute",this._UIRepHolder.style.left="0px",this._UIRepHolder.style.right="0px",this._UIRepHolder.style.top="0px",this._UIRepHolder.style.bottom="0px",this._UIRepHolder.style.zIndex=1,this._UIRepHolder.style.pointerEvents="none")},_refreshUIActorsList:function(){this.stopListening(null,"zIndex.CHANGED"),this._UIActorsList=[];for(var t=this._getUIRepHolder();t.firstChild;)t.firstChild.remove();var i=this,n=this._experience.QueryInterface("CATI3DExperienceObject").GetValueByName("actors");for(let s=0;s<n.length;s++){let r=n[s].QueryInterface("CATI3DXUIRep");if(!r)continue;this._UIActorsList.push(n[s]);let a=r.Get();e.is(a)&&a.inject(t),this.listenTo(n[s].QueryInterface("CATI3DExperienceObject"),"zIndex.CHANGED",function(){i._doRefreshUIActorsZIndex=!0})}var s=this._experience.QueryInterface("CATICXPScenesMgr");if(s){var r=s.GetCurrentScene();if(r){var a=r.QueryInterface("CATI3DExperienceObject").GetValueByName("actors");for(let n=0;n<a.length;n++){let s=a[n].QueryInterface("CATI3DXUIRep");if(!s)continue;this._UIActorsList.push(a[n]);let r=s.Get();e.is(r)&&r.inject(t),this.listenTo(a[n].QueryInterface("CATI3DExperienceObject"),"zIndex.CHANGED",function(){i._doRefreshUIActorsZIndex=!0})}}}this._doRefreshUIActorsZIndex=!0,this._doRefreshUIActorsList=!1,this._waitUIActorsReadyDeferred&&this._waitUIActorsReadyDeferred.resolve()},_refreshUIActorsZIndex:function(){this._UIActorsList.sort(function(e,t){return e.QueryInterface("CATI3DExperienceObject").GetValueByName("zIndex")<t.QueryInterface("CATI3DExperienceObject").GetValueByName("zIndex")?-1:e.QueryInterface("CATI3DExperienceObject").GetValueByName("zIndex")>t.QueryInterface("CATI3DExperienceObject").GetValueByName("zIndex")?1:0});for(var e=0;e<this._UIActorsList.length;e++)this._UIActorsList[e].QueryInterface("CATI3DXUIRep").SetIndex(e);this._doRefreshUIActorsZIndex=!1},_update:function(){this._doRefreshUIActorsList&&this._refreshUIActorsList(),this._doRefreshUIActorsZIndex&&this._refreshUIActorsZIndex();for(var e=0;e<this._uiRepToRefresh.length;e++)this._uiRepToRefresh[e].Refresh();this._uiRepToRefresh=[]},_refreshUIRep:function(e){this._uiRepToRefresh.push(e)},waitUIActorsReady:function(){return this._doRefreshUIActorsList?this._waitUIActorsReadyDeferred?this._waitUIActorsReadyDeferred.promise:(this._waitUIActorsReadyDeferred=new e.Promise.deferred,this._waitUIActorsReadyDeferred.promise.then(()=>{delete this._waitUIActorsReadyDeferred})):e.Promise.resolve()},GetType:function(){return"CAT3DXUIManager"}})});