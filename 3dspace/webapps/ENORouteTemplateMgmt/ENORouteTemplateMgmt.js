define("DS/ENORouteTemplateMgmt/Config/TemplateTabsConfig",["DS/Core/Core","UWA/Drivers/Alone","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],function(e,t,i){"use strict";return[{label:i.tasks,id:"tasks",isSelected:!0,icon:{iconName:"flow-tree",fontIconFamily:WUXManagedFontIcons.Font3DS,orientation:"horizontal"},content:t.createElement("div",{id:"routeTasksContainer",class:"route-tasks-container"}),loader:"DS/ENORouteMgmt/Views/Loader/TaskGraphicalViewLoader"},{label:i.members,id:"members",icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS},allowClosableFlag:!1,content:t.createElement("div",{id:"routeMembersContainer",class:"route-members-container"}),loader:"DS/ENORouteMgmt/Views/RouteMembersView"}]}),define("DS/ENORouteTemplateMgmt/Views/Grid/TemplateGridCustomColumns",["DS/Controls/Button","DS/Controls/TooltipModel","DS/ENORouteMgmt/EnoviaBootstrap","UWA/Drivers/Alone","DS/ENORouteMgmt/Utilities/RouteViewUtils","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],function(e,t,i,o,n,l){"use strict";return{onRouteNodeStateCellRequest:e=>(function(e){let t;if(!e.isHeader&&(t=e.cellView.collectionView.reuseCellContent("_state_"))){let i=e.nodeModel.options.grid.state;t.getChildren()[0].setHTML(e.nodeModel.options.grid.Maturity_State),t.getChildren()[0].setAttribute("class","route-template-state-title "+i.toUpperCase().replace(/ /g,"")),e.cellView._setReusableContent(t)}})(e),onRouteNodeActionCellRequest:e=>(function(e){let i;e.isHeader||(i=e.cellView.collectionView.reuseCellContent("_actions_"))&&require(["DS/ENORouteMgmt/Views/Menu/RouteContextualMenu"],function(o){var n=[];n.push(e.nodeModel.options.grid.id),i.setHTML(o.routeGridCheveron(e.nodeModel.options.grid.Actions,n)),i.tooltipInfos=new t({shortHelp:l.actions,allowUnsafeHTMLShortHelp:!0}),i.setStyle(),e.cellView._setReusableContent(i)})})(e),onRouteNodeOwnerCellRequest:e=>(function(e){let t;if(!e.isHeader&&(t=e.cellView.collectionView.reuseCellContent("_owner_"))){var o=e.nodeModel.options.grid.OwnerFullName,l="/api/user/getpicture/login/"+e.nodeModel.options.grid.UserName+"/format/normal",a=n.getAvatarDetails(o),r=i.getSwymUrl()+l;null!=i.getSwymUrl()?t.getChildren()[0].getChildren()[0].src=r:(t.getChildren()[0].getChildren()[0].setHTML(a.avatarStr),t.getChildren()[0].getChildren()[0].setStyle("background",a.avatarColor)),t.getChildren()[1].setHTML(o),e.cellView._setReusableContent(t)}})(e)}}),define("DS/ENORouteTemplateMgmt/Services/InitiateTemplateServices",["UWA/Core","UWA/Class/Promise","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteMgmt/Utilities/ParseJSONUtil","DS/WAFData/WAFData"],function(e,t,i,o,n){"use strict";let l,a,r;a=function(n){return new t(function(t,o){null==n.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(o){o.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(o){i.authenticateRequest(o+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){n.csrf=JSON.parse(e).csrf,t()}}))}})}):t()}).then(function(){return function(e){return new t(function(t,n){let l=i.getRouteTemplateServiceBaseURL(),a={method:"POST",headers:{"Content-Type":"application/ds-json"}};a.data=JSON.stringify(e),a.onComplete=function(e){let i=(new o).parseResp(JSON.parse(e)),n=JSON.parse(e);if(n.data[0].relateddata&&n.data[0].relateddata.tasks){let e=n.data[0].relateddata.tasks,t=s(e);i[0].assignees=t}t(i)},a.onFailure=function(e,t,i){n(JSON.parse(t))},i.authenticateRequest(l,a)})}(n)})},r=function(n){return new t(function(t,o){null==n.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(o){o.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(o){i.authenticateRequest(o+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){n.csrf=JSON.parse(e).csrf,t()}}))}})}):t()}).then(function(){return function(e){return new t(function(t,n){let l=i.getRouteTemplateServiceBaseURL()+"?action=activate",a={method:"POST",headers:{"Content-Type":"application/ds-json"}};a.data=JSON.stringify(e),a.onComplete=function(e){let i=(new o).parseResp(JSON.parse(e));t(i)},a.onFailure=function(e,t,i){n(JSON.parse(t))},i.authenticateRequest(l,a)})}(n)})};let s=function(e){let t=[];return e.forEach(function(e){if(t.indexOf(e.dataelements.taskAssignee)<0){let i="User Group";"Person"==e.dataelements.assigneeType&&(i=e.dataelements.assigneeType);let o=i+"~"+e.dataelements.taskAssigneeUsername+"~"+e.dataelements.taskAssignee;t.push(o)}}),t};return l={saveAsRouteTemplate:e=>a(e),createAndActivateRouteTemplate:e=>r(e),getScopeInformation:e=>(function(e){return new t(function(t,o){let n=i.get3DSpaceURL()+"/resources/bps/scopeMembers?oid="+e,l={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t(JSON.parse(e))},onFailure:function(e){o(JSON.parse(e))}};i.authenticateRequest(n,l)})})(e),getESignConfigSetting:()=>new t(function(e,t){let o=i.get3DSpaceURL()+"/resources/bps/requiresESign",n={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(t){e(JSON.parse(t))},onFailure:function(e){t(JSON.parse(e))}};i.authenticateRequest(o,n)})}}),define("DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplateAvailabilityChooser",["DS/ENORouteMgmt/Controller/RouteServicesController","DS/Utilities/Dom","DS/ENORouteMgmt/Utilities/Search/SearchUtil","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o){"use strict";return{}}),define("DS/ENORouteTemplateMgmt/Config/InitiateTemplateTabsConfig",["DS/Core/Core","UWA/Drivers/Alone","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],function(e,t,i){"use strict";return[{label:i.properties,id:"properties",isSelected:!0,icon:{iconName:"attributes",fontIconFamily:WUXManagedFontIcons.Font3DS,orientation:"horizontal"},content:t.createElement("div",{id:"iTemplatePropertiesContainer",class:"itemplate-properties-container"}),loader:"DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplatePropertiesLoader"},{label:i.tasks,id:"tasks",icon:{iconName:"flow-tree",fontIconFamily:WUXManagedFontIcons.Font3DS},allowClosableFlag:!1,content:t.createElement("div",{id:"iTemplateTasksContainer",class:"itemplate-tasks-container"}),loader:"DS/ENORouteMgmt/Views/Loader/InitiateRouteTasksLoader"}]}),define("DS/ENORouteTemplateMgmt/Utilities/TemplateIdCardUtil",[],function(){"use strict";var e={getTemplateDataUpdated:function(e){require(["DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/ENORouteMgmt/Utilities/ParseJSONUtil","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],function(t,i,o){t.fetchRouteTemplateById(e).then(e=>{widget.routeMgmtMediator.publish("template-data-updated",e[0]),widget.routeMgmtMediator.publish("template-idcard-data-updated",e[0]),"Active"===e[0].state?widget.routeMgmtMediator.publish("hide-edit-icon-in-tasks-tab"):widget.routeMgmtMediator.publish("show-edit-icon-in-tasks-tab")},e=>{e.error?widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:o.errorRefresh,sticky:!1})})})}};return e}),define("DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplateLinkTemplateChooser",["DS/ENORouteMgmt/Controller/RouteServicesController","DS/Utilities/Dom","DS/ENORouteMgmt/Utilities/Search/SearchUtil","DS/TreeModel/TreeNodeModel","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n){"use strict";let l,a=!1;var r=function(e,t){var i;t&&(i=new o({label:t[0]["ds6w:label"],value:t[0].id,status:t[0]["ds6w:status"]}),l.fields.linkedTemplateField.selectedItems=i)};return{init:(e,t)=>(function(e,t){l=t;var o=e.dsModel,n=UWA.Utils.getUUID();require(["DS/SNInfraUX/SearchCom"],function(e){var t=e.createSocket({socket_id:n}),l=i.getRefinementToSnN(n,"linkTemplate",!1,["Route Template"]);if(l.precond=i.getPrecondForLinkTemplateSearch(),!UWA.is(t))throw new Error("Socket not initialized");t.dispatchEvent("RegisterContext",l),t.addListener("Selected_Objects_search",r.bind(o,"")),t.dispatchEvent("InContextSearch",l)})})(e,t),destroy:()=>{_routeProperties={}},getPrecondForLinkedTemplateSearch:()=>(function(){var e={};return e.precond=i.getPrecondForLinkTemplateSearch(),e})(),changeHandlerLinkedFortemplateField:e=>(function(e){a?a=!1:(e.fields.linkedTemplateField.selectedItems&&"Draft"==e.fields.linkedTemplateField.selectedItems.options.status&&(widget.notify.handler().addNotif({level:"error",subtitle:n.errorSelectedInactiveTemplate,sticky:!1}),a=!0,e.fields.linkedTemplateField.selectedItems=void 0),e.fields.linkedTemplateField.selectedItems&&e.fields.linkedTemplateField.selectedItems.options?e.fields.linkedTemplateField._editor.elements.inputField.value==e.fields.linkedTemplateField.selectedItems.options.label&&(e.linkTemplateCompleteActionField.className="",e.demoteOnRejectionField.className=""):(e.linkTemplateCompleteActionField.className="fonticon-chooser-scope-display",e.demoteOnRejectionField.className="fonticon-chooser-scope-display"))})(e)}}),define("DS/ENORouteTemplateMgmt/Model/RouteTemplateModel",["DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/ENORouteMgmt/Utilities/DataFormatter","DS/ENORouteMgmt/Components/Wrappers/WrapperDataGridView","DS/ENORouteMgmt/EnoviaBootstrap","DS/WebappsUtils/WebappsUtils","DS/ENORouteMgmt/Utilities/RouteViewUtils","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],function(e,t,i,o,n,l,a,r){"use strict";let s,d=new e,u=function(e,t,i,o,n){var l,a=e;return l=UWA.createElement("div",{class:"route-template-task-state-and-owner"}),UWA.createElement("span",{html:a,class:"route-template-state-title "+t.toUpperCase().replace(/ /g,"")}).inject(l),i.setStyle("display","inline"),i.setStyle("padding-left","3px"),i.set({title:n}),i.inject(l),l.outerHTML},c=function(e,o){d.prepareUpdate();var n=m(e),a=new t({label:e.title,id:e.id,width:300,grid:i.templateGridData(e),thumbnail:l.getWebappsAssetUrl("ENORouteMgmt","icons/144/I_RouteTemplate108x144.png"),subLabel:r[e.routeBasePurpose],description:u(e.stateNLS,e.state,n.ownerDiv,e.routeStatus,n.tooltip),icons:[l.getWebappsAssetUrl("ENORouteTemplateMgmt","icons/16/I_RouteTemplate16.png")],contextualMenu:["My context menu"],customTooltip:w(i.templateGridData(e))});return d.getXSO().add(a),d.addChild(a,0),d.unselectAll(),d.pushUpdate(),h(),void 0!==o&&0==o||widget.routeMgmtMediator.publish("initialize-IDCard-on-dblClick",{model:i.templateGridData(e)}),a},m=function(e){var t=new UWA.Element("div",{class:"members"}),i={},o="",l=e.ownerFullName;if(void 0!==l){var r=new UWA.Element("div",{class:"assignee"});let i,d="";i="/api/user/getpicture/login/"+e.owner+"/format/normal";let u=n.getSwymUrl()+i;if(o=o+l+",\n",null!=n.getSwymUrl())d=UWA.createElement("img",{class:"userIcon",src:u});else{var s=a.getAvatarDetails(l);(d=UWA.createElement("div",{html:s.avatarStr,class:"avatarIcon"})).style.setProperty("background",s.avatarColor)}""!=d&&d.inject(r),r.inject(t)}return o=o.slice(0,-2),t.set({title:o}),e.assigneesdiv=t.outerHTML,i.ownerDiv=t,i.tooltip=o,i},p=function(e){return o.getRowModelById(d,e)},g=function(e){0==f()&&widget.routeMgmtMediator.publish("show-no-template-placeholder",e)},f=function(){let e=0;return d.getChildren().forEach(t=>{t._isHidden||e++}),e},h=function(){0!=f()&&widget.routeMgmtMediator.publish("hide-no-template-placeholder")},w=function(e){return r.title+": "+e.Title+"\n"+r.name+": "+e.Name+"\n"+r.IDcardMaturityState+": "+e.Maturity_State+"\n"+r.routeBasePurpose+": "+e.BasePurposeNLS+"\n"+r.revision+": "+e.revision+"\n"+r.IDcardOwner+": "+e.Owner},T=function(){widget.routeMgmtMediator.subscribe("template-back-to-summary",function(e){s=void 0})};return{createModel:e=>(function(e){return d.prepareUpdate(),e.forEach(function(e){var o=m(e),n=new t({label:e.title,id:e.id,width:300,grid:i.templateGridData(e),thumbnail:l.getWebappsAssetUrl("ENORouteMgmt","icons/144/I_RouteTemplate108x144.png"),subLabel:r[e.routeBasePurpose],description:u(e.stateNLS,e.state,o.ownerDiv,e.routeStatus,o.tooltip),icons:[l.getWebappsAssetUrl("ENORouteTemplateMgmt","icons/16/I_RouteTemplate16.png")],contextualMenu:["My context menu"],shouldAcceptDrop:!0,customTooltip:w(i.templateGridData(e))});d.addRoot(n)}),d.pushUpdate(),T(),d})(e),appendRows:(e,t)=>c(e,t),updateRow:e=>(function(e){var t=m(e);if(e.id&&""!=e.id){var o=p(e.id);o.updateOptions({grid:i.templateGridData(e)}),o.updateOptions({label:e.title,subLabel:r[e.routeBasePurpose],description:u(e.stateNLS,e.state,t.ownerDiv,e.routeStatus,t.tooltip),customTooltip:w(i.templateGridData(e))})}})(e),getModel:()=>d,getSelectedRowsModel:()=>o.getSelectedRowsModel(d),getRowModelById:e=>p(e),getRowModelIndexById:e=>o.getRowModelIndexById(d,e),deleteRowModelByIndex:e=>(function(e){o.deleteRowModelByIndex(d,e),g(d)})(e),deleteRowModelSelected:()=>(function(){let e=o.deleteRowModelSelected(d);return g(d),e})(),deleteRowModelById:e=>(function(e){o.deleteRowModelById(d,e),g(d)})(e),deleteRowModelByIds:e=>(function(e){o.deleteRowModelByIds(d,e),g(d)})(e),destroy:()=>{d=new e},getOpenedRouteModel:()=>s,appendAllRows:e=>{!function(e){d.prepareUpdate(),e.forEach(e=>{var t=c(e,!1);d.addRoot(t)}),d.pushUpdate()}(e)}}}),define("DS/ENORouteTemplateMgmt/Services/RouteTemplateServices",["UWA/Core","UWA/Class/Promise","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteMgmt/Utilities/ParseJSONUtil","DS/WAFData/WAFData"],function(e,t,i,o,n){"use strict";let l,a,r,s,d,u,c,m,p;a=function(e){return new t(function(t,n){let l=i.getRouteTemplateServiceBaseURL()+"/"+e,a={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t((new o).parseResp(JSON.parse(e)))},onFailure:function(e){n(e)}};i.authenticateRequest(l,a)})};let g=function(e){return-1===e.indexOf("?")?"?":"&"};return r=function(e){return new t(function(t,n){let l=i.getRouteTemplateServiceBaseURL()+"/"+e+"/history",a={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t((new o).parseResp(JSON.parse(e)))},onFailure:function(e){n(e)}};i.authenticateRequest(l,a)})},d=function(){return new t(function(e,t){let n=i.getRouteTemplateServiceBaseURL(),l=widget.getValue("templateStateFilter");l?n+=g(n)+"stateFilter="+l:""==l&&(n+=g(n)+"stateFilter=undefined");let a=widget.getValue("templateOwnershipFilter");a?n+=g(n)+"ownershipFilter="+a:""==a&&(n+=g(n)+"ownershipFilter=undefined");let r=widget.getValue("objectLimit");r&&(n+=g(n)+"objectLimit="+r);let s={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(t){let i=(new o).parseResp(JSON.parse(t));e(i)},onFailure:function(e){t(e)}};i.authenticateRequest(n,s)})},s=function(n,l){return new t(function(t,o){null==n.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(o){o.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(o){i.authenticateRequest(o+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){n.csrf=JSON.parse(e).csrf,t()}}))}})}):t()}).then(function(){return function(e,n){return new t(function(t,l){let a=i.getRouteTemplateServiceBaseURL()+"/"+n,r={method:"PUT",headers:{"Content-Type":"application/ds-json"}};r.data=JSON.stringify(e),r.onComplete=function(e){let i=(new o).parseResp(JSON.parse(e));t(i)},r.onFailure=function(e,t,i){l(JSON.parse(t))},i.authenticateRequest(a,r)})}(n,l)})},u=function(n){return new t(function(t,o){null==n.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(o){o.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(o){i.authenticateRequest(o+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){n.csrf=JSON.parse(e).csrf,t()}}))}})}):t()}).then(function(){return function(e){return new t(function(t,n){let l=i.getRouteTemplateServiceBaseURL(),a={method:"PUT",headers:{"Content-Type":"application/ds-json"}};a.data=JSON.stringify(e),a.onComplete=function(e){let i=(new o).parseResp(JSON.parse(e));t(i)},a.onFailure=function(e,t,i){n(JSON.parse(t))},i.authenticateRequest(l,a)})}(n)})},c=function(n,l){return new t(function(t,o){null==n.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(o){o.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(o){i.authenticateRequest(o+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){n.csrf=JSON.parse(e).csrf,t()}}))}})}):t()}).then(function(){return function(e,n){return new t(function(t,l){let a=i.getRouteTemplateServiceBaseURL()+"/"+n+"/revise",r={method:"POST",headers:{"Content-Type":"application/ds-json"}};r.data=JSON.stringify(e),r.onComplete=function(e){let i=(new o).parseResp(JSON.parse(e));t(i)},r.onFailure=function(e,t,i){l(t)},i.authenticateRequest(a,r)})}(n,l)})},m=function(o,n,l){return new t(function(t,n){null==o.csrf?require(["DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(n){n.getServiceUrl({serviceName:"3DSpace",platformId:i.getTenantValue(),onComplete:function(n){i.authenticateRequest(n+"/resources/v1/application/E6WFoundation/CSRF",e.extend({method:"GET",onComplete:function(e){o.csrf=JSON.parse(e).csrf,t()}}))}})}):t()}).then(function(){return function(e,o,n){return new t(function(t,l){let a=i.getRouteTemplateServiceBaseURL()+"/"+n+"/"+o,r={method:"PUT",headers:{"Content-Type":"application/ds-json"}};r.data=JSON.stringify(e),r.onComplete=function(e){t(e)},r.onFailure=function(e,t,i){l(t)},i.authenticateRequest(a,r)})}(o,n,l)})},p=function(e){return new t(function(t,o){let n=i.getRouteTemplateServiceBaseURL()+"/"+e+"/linktemplate",l={method:"GET",headers:{"Content-Type":"application/ds-json"},onComplete:function(e){t(JSON.parse(e))},onFailure:function(e){o(e)}};i.authenticateRequest(n,l)})},l={fetchRouteTemplateById:e=>a(e),fetchAllRouteTemplates:()=>d(),updateRouteTemplate:(e,t)=>s(e,t),deleteTemplate:e=>u(e),reviseRouteTemplate:(e,t)=>c(e,t),fetchRouteTemplateHistory:e=>r(e),changeTemplateState:(e,t,i)=>m(e,t,i),linkedTemplates:e=>p(e)}}),define("DS/ENORouteTemplateMgmt/Model/RouteTemplateInfoHistoryModel",["DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/WebappsUtils/WebappsUtils","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],function(e,t,i,o){"use strict";let n=new e({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!1}});return{getModel:e=>(function(e){let l,a,r,s,d,u,c;return n.prepareUpdate(),e.forEach(function(e){for(l=e.routeTemplateAction,a=0;a<=l.length-1;a++){if(r=e.routeTemplateAction[a],c=e.description[a],"revisehistory"==r)d=o.replace(o[r+"des"],{tag2:e.description[a],tag1:e.userName[a]});else if("changeownerhistory"==r){var m=c.split("|");d=o.replace(o[r+"des"],{tag2:m[1],tag3:m[0],tag1:e.userName[a]})}else d=o.replace(o[r+"des"],{tag1:e.userName[a]});s=e.Time[a],u=i.getWebappsAssetUrl("ENORouteTemplateMgmt","icons/144/I_RouteTemplate108x144.png");var p=new t({label:o[r],subLabel:s,thumbnail:u,description:d});n.addRoot(p)}}),n.pushUpdate(),n})(e),destroy:()=>{n=new e({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!1}})}}}),define("DS/ENORouteTemplateMgmt/Config/Toolbar/TemplateSummaryToolbarConfig",["i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],function(e){let t,i={menu:[{type:"CheckItem",title:e.gridView,state:"selected",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENORouteTemplateMgmt/Views/ToggleViews",func:"doToggleView",argument:{view:"GridView",curPage:"TemplateSummary"}},tooltip:e.gridView},{type:"CheckItem",title:e.tileView,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENORouteTemplateMgmt/Views/ToggleViews",func:"doToggleView",argument:{view:"TileView",curPage:"TemplateSummary"}},tooltip:e.tileView}]};let o=function(t){var o={entries:[{id:"filter",dataElements:{typeRepresentation:"filterdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:function(t){var i={menu:[{type:"CheckItem",title:e.filterOwnedbyme,state:t.indexOf("owned")>-1?"selected":"unselected",id:"owned",action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"changeOwnerFilter",argument:{type:"owner",filter:"owned"}},tooltip:e.filterOwnedbymeTooltip},{type:"CheckItem",title:e.filterSharedwithme,state:t.indexOf("shared")>-1?"selected":"unselected",id:"assigned",action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"changeOwnerFilter",argument:{type:"owner",filter:"shared"}},tooltip:e.filterSharedwithmeTooltip},{type:"SeparatorItem",title:""}]},o=widget.getValue("stateTemplateNLS"),n={type:"CheckItem",state:t.indexOf("Draft")>-1?"selected":"unselected",id:"draft",action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"changeStateFilter",argument:{type:"state",filter:"Draft"}},tooltip:e.filterDraftTooltip};return o&&o.Inactive?n.title=o.Inactive:n.title=e.filterDraft,i.menu.push(n),n={type:"CheckItem",state:t.indexOf("Released")>-1?"selected":"unselected",id:"released",action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"changeStateFilter",argument:{type:"state",filter:"Released"}},tooltip:e.filterReleasedTooltip},o&&o.Active?n.title=o.Active:n.title=e.filterReleased,i.menu.push(n),i}(t)},category:"status",tooltip:e.filter},{id:"view",className:"routeViews",dataElements:{typeRepresentation:"viewdropdown",icon:{iconName:"view-list",fontIconFamily:1},value:i},position:"far",tooltip:e.gridView,category:"action"},{id:"deleteRoute",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:WUXManagedFontIcons.Font3DS},action:{module:"DS/ENORouteTemplateMgmt/Views/Dialogs/RemoveTemplate",func:"removeConfirmation"}},position:"far",category:"action",tooltip:e.Delete},{id:"information",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:WUXManagedFontIcons.Font3DS},action:{module:"DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",func:"openPropertiesView"}},position:"far",category:"action",tooltip:e.Information}],typeRepresentations:{sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}},filterdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"},position:"far",tooltip:{text:"Filter",position:"far"}},viewdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"},position:"far",tooltip:{text:"view",position:"far"}}}};return JSON.stringify(o)};return t={writetoolbarDefination:e=>o(e),destroy:function(){_dataGrid.destroy(),_container.destroy()}}}),define("DS/ENORouteTemplateMgmt/Utilities/VersionFacetIntegration",["DS/ENOXVersionExplorerController/VersionExplorerController","DS/ENOXVersionExplorerUtils/VersionExplorerSettings","DS/ENOXVersionExplorerUtils/VersionExplorerEnums","DS/ENOXVersionExplorerViews/VersionExplorerModal","DS/ENORouteMgmt/EnoviaBootstrap","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n,l){"use strict";var a={};let r=function(e,t){console.log("Cancel Pressed"),a._myVersionExplorer.unsubscribeAll()};return{launchVersionControlApp:(l,s)=>(function(l,s){a.oldTemplateId=l;var d=UWA.createElement("div",{class:"revisionUpdate-dialog"}).inject(document.body);a._myVersionExplorer=new e({versionGraphContainer:null,selectionMode:i.SELECTION_MODES.SINGLE_SELECT_ONLY,widget:widget}),a._myVersionExplorer.disableDrag(),a._myVersionExplorer.showDialog({x:100,y:100},d,!0),t.loadUserSettingsPromise({displayMode:i.DISPLAY_MODES.SUBWAY_VIEW,displayLegend:!0},!0),a._myVersionExplorer.subscribeEvent("ENOXVersionExplorerModalCancel",r.bind(this)),a._dlgVersionExplorer=o._dlg,o._dlg&&o._dlg.rightButtons&&o._dlg.rightButtons.addEventListener("click",r.bind(this)),a._myVersionExplorer.publishEvent("ENOXVersionExplorerLoadVersionModel",{id:a.oldTemplateId,tenantId:n.getTenantValue(),securityContext:n.getSecurityContextValue().split("ctx::")[1],onComplete:function(){},dataModelType:i.DATA_MODEL_TYPES.MODEL_HISTORY}),a._dlgVersionExplorer.getFooter().getChildren()[0].hide()})(l)}}),define("DS/ENORouteTemplateMgmt/Controller/TemplateServicesController",["DS/ENORouteTemplateMgmt/Services/RouteTemplateServices","DS/ENORouteTemplateMgmt/Services/InitiateTemplateServices","UWA/Promise","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],function(e,t,i,o){"use strict";let n,l=function(e,t){500===t.statusCode?widget.notify.handler().addNotif({level:"error",subtitle:o.unexpectedError,sticky:!0}):e(t)};return n={fetchAllRouteTemplates:function(){return new i(function(t,i){e.fetchAllRouteTemplates().then(e=>{t(e)},e=>{l(i,e)})})},createAndActivateRouteTemplate:function(e){return new i(function(i,o){t.createAndActivateRouteTemplate(e).then(e=>{i(e)},e=>{l(o,e)})})},fetchRouteTemplateHistory:function(t){return new i(function(i,o){e.fetchRouteTemplateHistory(t).then(e=>{i(e)},e=>{l(o,e)})})},saveAsRouteTemplate:function(e){return new i(function(i,o){t.saveAsRouteTemplate(e).then(e=>{i(e)},e=>{l(o,e)})})},updateRouteTemplate:function(t,o){return new i(function(i,n){e.updateRouteTemplate(t,o).then(e=>{i(e)},e=>{l(n,e)})})},deleteTemplate:function(t){return new i(function(i,o){e.deleteTemplate(t).then(e=>{i(e)},e=>{l(o,e)})})},reviseRouteTemplate:function(t,o){return new i(function(i,n){e.reviseRouteTemplate(t,o).then(e=>{i(e)},e=>{l(n,e)})})},fetchRouteTemplateById:function(t){return new i(function(i,o){e.fetchRouteTemplateById(t).then(e=>{i(e)},e=>{l(o,e)})})},changeTemplateState:function(t,o,n){return new i(function(i,a){e.changeTemplateState(t,o,n).then(e=>{i(e)},e=>{l(a,e)})})},linkedTemplates:function(t){return new i(function(i,o){e.linkedTemplates(t).then(e=>{i(e)},e=>{l(o,e)})})},getESignConfigSetting:function(){return new i(function(e,i){t.getESignConfigSetting().then(t=>{e(t)},e=>{l(i,e)})})}}}),define("DS/ENORouteTemplateMgmt/Actions/TemplateActions",["DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteMgmt/Utilities/ParseJSONUtil","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n){"use strict";let l;return l={updateRouteTemplate:(t,o)=>(function(t,o){return new Promise(function(n,l){var a=(new i).createDataForRequest(t);e.updateRouteTemplate(a,o).then(e=>n(e),e=>l(e))})})(t,o),DeleteTemplate:(t,i)=>(function(t,i){let l=[];t.forEach(e=>{let t={};t.id=e,t.type="Route Template",t.updateAction="DELETE",l.push(t)});let a={csrf:widget.data.csrf,data:l};e.deleteTemplate(a).then(e=>{var i=n.successRemoveTemplate;1==t.length&&(i=n.successRemoveTemplateSingle),i=i.replace("{count}",t.length),widget.notify.handler().addNotif({level:"success",subtitle:i,sticky:!1}),widget.routeMgmtMediator.publish("template-summary-delete-row-by-ids",{model:t}),widget.routeMgmtMediator.publish("template-data-deleted",{model:t}),widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:o.getModel()})},e=>{e.error?widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:n.errorRemove,sticky:!1})})})(t),changeTemplateState:(t,o,l)=>(function(t,o,l){var a=(new i).createCSRFForRequest();e.changeTemplateState(a,o,t).then(e=>{var t=n.changeStateSuccess;widget.notify.handler().addNotif({level:"success",subtitle:t,sticky:!1});var a=(new i).parseResp(JSON.parse(e));a[0].noTitleUpdate=!0,widget.routeMgmtMediator.publish("template-data-updated",a[0]),l&&(widget.routeMgmtMediator.publish("template-idcard-data-updated",a[0]),widget.routeMgmtMediator.publish("redraw-graph",a[0]),"activate"===o?widget.routeMgmtMediator.publish("hide-edit-icon-in-tasks-tab"):widget.routeMgmtMediator.publish("show-edit-icon-in-tasks-tab"))},e=>{var t=JSON.parse(e);t.error?widget.notify.handler().addNotif({level:"error",subtitle:t.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:n.changeStateError,sticky:!1})})})(t,o,l),reviseRouteTemplate:(t,o)=>(function(t){return new Promise(function(o,n){var l=(new i).createCSRFForRequest();e.reviseRouteTemplate(l,t).then(e=>o(e),e=>n(e))})})(t)}}),define("DS/ENORouteTemplateMgmt/Views/TemplateHeaderView",["DS/WebappsUtils/WebappsUtils","DS/ResizeSensor/js/ResizeSensor","DS/ENORouteMgmt/Utilities/IdCardUtil","DS/ENORouteTemplateMgmt/Utilities/VersionFacetIntegration","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n){"use strict";let l;var a=function(e){this.container=e};a.prototype.resizeSensor=function(){new t(l,function(){i.resizeIDCard(l.offsetWidth)})},a.prototype.resizeIDCard=function(){i.resizeIDCard(l.offsetWidth)},a.prototype.init=function(t,i){l=new UWA.Element("div",{id:"routeIdCard",class:""}),this.container.appendChild(l);var o=new UWA.Element("div",{id:"infoAndThumbnailSec",class:"id-card-info-and-thumbnail-section"});l.appendChild(o);UWA.createElement("div",{id:"routeHome",class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-home fonticon-display fonticon-color-display",title:n.home,styles:{"font-size":"20px"},events:{click:function(e){d()}}}).inject(o);var a=new UWA.Element("div",{id:"thumbnailSection",class:"id-card-thumbnail-section",html:[UWA.createElement("div",{class:"id-card-thumbnail",styles:{"background-image":"url("+e.getWebappsAssetUrl("ENORouteMgmt","icons/144/I_RouteTemplate108x144.png")+")"}})]});o.appendChild(a);var u=new UWA.Element("div",{id:"infoSec",class:"id-card-info-section no-bottom-border"});o.appendChild(u);var c=new UWA.Element("div",{id:"infoHeaderSec",class:"id-card-header-section"});u.appendChild(c);var m=new UWA.Element("div",{id:"infoHeaderSecTitle",class:"id-card-title-section"});c.appendChild(m),UWA.createElement("h4",{html:[UWA.createElement("span",{html:t.model.Title,title:t.model.Title})]}).inject(m);var p=new UWA.Element("div",{id:"infoHeaderSecAction",class:"id-card-actions-section"});c.appendChild(p),UWA.createElement("div",{id:"expandCollapse",class:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-expand-up fonticon-display fonticon-color-display",title:n.idCardHeaderActionCollapse,styles:{"font-size":"20px"},events:{click:function(e){r()}}}).inject(p);var g={},f=[],h={options:{}};h.options.grid=t.model,f.push(h),g.data=f,require(["DS/ENORouteTemplateMgmt/Views/Menu/TemplateContextualMenu"],function(e){e.templateIdCardCheveron(g,t).inject(p)});var w="fonticon-color-display";i&&(w="fonticon-color-active"),UWA.createElement("div",{id:"routeInfoIcon",title:n.idCardHeaderActionInfo,class:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-info fonticon-display "+w+" ",styles:{"font-size":"20px"},events:{click:function(e){widget.getValue("propWidgetOpen")?widget.routeMgmtMediator.publish("route-info-close-click",{info:"Route Template"}):widget.routeMgmtMediator.publish("route-header-info-click",{model:t.model,info:"Route Template"})}}}).inject(p);var T=new UWA.Element("div",{id:"infoDetailedSec",class:"id-card-detailed-info-section"});u.appendChild(T);var v=new UWA.Element("div",{id:"channel1",class:"properties-channel"});T.appendChild(v),UWA.createElement("div",{html:[UWA.createElement("label",{html:n.IDcardOwner+"&nbsp;:&nbsp;",class:""}),UWA.createElement("span",{html:t.model.OwnerFullName,class:""})]}).inject(v),require(["DS/ENORouteTemplateMgmt/Views/Menu/TemplateContextualMenu"],function(e){UWA.createElement("div",{class:"",html:[UWA.createElement("label",{class:"",html:n.IDcardMaturityState+"&nbsp;:"}),UWA.createElement("span",{class:"route-template-state-title "+t.model.state.toUpperCase().replace(/ /g,""),html:"&nbsp;"+t.model.Maturity_State+"&nbsp;",styles:{"margin-left":"5px"}}),UWA.createElement("span",{html:e.templateIdCardStateCheveron(t.model),class:"",styles:{"margin-left":"5px"}})]}).inject(v)});var S=t.model.ProjectTitle;S||(S=t.model.Project),UWA.createElement("div",{html:[UWA.createElement("label",{html:n.IDcardCollSpace+"&nbsp;:&nbsp;",class:""}),UWA.createElement("span",{html:S,class:""})]}).inject(v);var R=new UWA.Element("div",{id:"channel2",class:"properties-channel"});T.appendChild(R),UWA.createElement("div",{html:[UWA.createElement("label",{html:n.revision+"&nbsp;:&nbsp;",class:""}),UWA.createElement("span",{html:s(t.model.id,t.model.revision),class:""})]}).inject(R);var M=new Date(t.model.Modified);UWA.createElement("div",{html:[UWA.createElement("label",{html:n.IDcardModified+"&nbsp;:&nbsp;",class:""}),UWA.createElement("span",{html:M.toGMTString().parseRelativeTime(),class:""})]}).inject(R);var b=new UWA.Element("div",{id:"channel3",class:"properties-channel"});T.appendChild(b),UWA.createElement("div",{class:"id-card-description",html:[UWA.createElement("span",{text:t.model.Description,title:t.model.Description,class:""})]}).inject(b)},a.prototype.destroyContainer=function(){this.container.destroy()},a.prototype.destroyContent=function(){l.destroy()};let r=function(){var e=document.querySelector("#expandCollapse"),t=document.querySelector("#templateHeaderContainer");document.querySelector("#graph_canvas_view");let i=document.querySelector(".route-graph-task-container");if(e.className.indexOf("wux-ui-3ds-expand-up")>-1){if(e.className=e.className.replace("wux-ui-3ds-expand-up","wux-ui-3ds-expand-down"),t.classList.add("minimized"),e.title=n.idCardHeaderActionExpand,(o=document.querySelector("#thumbnailSection"))&&o.className.indexOf("id-card-thumbnail-remove")>-1)(l=document.querySelector("#infoSec")).classList.remove("id-info-section-align"),l.classList.add("id-info-section-align-minimized");i.setStyle("height","calc(100% - 96px)")}else{var o,l;if(e.className=e.className.replace("wux-ui-3ds-expand-down","wux-ui-3ds-expand-up"),t.classList.remove("minimized"),e.title=n.idCardHeaderActionCollapse,(o=document.querySelector("#thumbnailSection"))&&o.className.indexOf("id-card-thumbnail-remove")>-1)(l=document.querySelector("#infoSec")).classList.remove("id-info-section-align-minimized"),l.classList.add("id-info-section-align");i.style.removeProperty("height")}},s=function(e,t){var i=UWA.createElement("a");return i.set({title:n.revision,text:t,phyId:e,revision:t,class:"cursorPointer",events:{click:function(){o.launchVersionControlApp(this.getAttribute("phyid"))}}}),i},d=function(){widget.routeMgmtMediator.publish("route-triptych-show-toggle-button"),widget.routeMgmtMediator.publish("template-back-to-summary"),widget.routeMgmtMediator.publish("template-tag-data-updated"),widget.routeMgmtMediator.publish("route-task-close-click-view-mode"),widget.routeMgmtMediator.publish("route-task-close-click-edit-mode"),require(["DS/ENORouteTemplateMgmt/Model/RouteTemplateModel"],function(e){widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:e.getModel()})}),widget.setValue("openedTemplateId",void 0)};return a}),define("DS/ENORouteTemplateMgmt/Views/InitiateTemplatePropertiesView",["DS/Controls/LineEditor","DS/Controls/Editor","DS/Controls/Accordeon","DS/Controls/ButtonGroup","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Utilities/Dom","DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplateLinkTemplateChooser","DS/ENORouteMgmt/Views/Loader/InitiateRouteScopeChooser","DS/ENORouteMgmt/Views/Form/ENORouteAutoComplete","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n,l,a,r,s,d,u,c){"use strict";let m,p,g=function(i,r){m.formFields=new UWA.Element("div",{id:"InitiateTemplatePropertiesContainer",class:""}),m.templateAvailabilityField=new UWA.Element("div",{id:"SeachAvailabilityField",class:"fonticon-chooser-scope-display"}),m.startRouteOnCompletionField=new UWA.Element("div",{id:"startRouteOnCompletionField"}),m.linkTemplateCompleteActionField=new UWA.Element("div",{id:"linkTemplateCompleteActionField",class:"fonticon-chooser-scope-display"}),m.demoteOnRejectionField=new UWA.Element("div",{id:"demoteOnRejectionField",class:"fonticon-chooser-scope-display"}),m.fields={},m.formFields.inject(i),p=new UWA.Element("h5",{class:"required",text:c.title}).inject(m.formFields),UWA.createElement("div",{class:"required-label-routes fonticon fonticon-asterisk-alt"}).inject(p),m.fields.name=new e({placeholder:c.placeholderName,pattern:"[^./#,\\[\\]\\$\\^@\\*\\?%:'\"\\\\<>;|]+",sizeInCharNumber:61}),m.fields.name.domId="Template_name",m.fields.name.inject(m.formFields),m.fields.name.addEventListener("change",function(e){widget.routeMgmtMediator.publish("initiate-template-toggle-dialogbuttons",{properties:m})}),new UWA.Element("h5",{text:c.description}).inject(m.formFields),m.fields.descField=new t({placeholder:c.placeholderDescription,widthInCharNumber:63,nbRows:5,newLineMode:"enter"}),m.fields.descField.domId="Template_description",m.fields.descField.inject(m.formFields),m.templateAvailabilityFieldDiv=new UWA.Element("div",{id:"SeachAvailabilityFieldDiv",class:"fonticon-chooser-scope-display"}),m.templateAvailabilityFieldDiv.inject(m.formFields),m.fields.buttonGroupAvailability=new o({type:"radio"}),m.fields.buttonGroupAvailability.addChild(new l({type:"radio",label:c.availabilityUser,value:"User"})),m.fields.buttonGroupAvailability.addChild(new l({type:"radio",label:c.availabilityEnterprise,value:"Enterprise",checkFlag:!0})),m.fields.buttonGroupAvailability.addChild(new l({type:"radio",label:c.availabilityBookMark,value:"BookMark"})),m.fields.buttonGroupAvailability.inject(m.templateAvailabilityFieldDiv),m.fields.buttonGroupAvailability.addEventListener("change",function(e){}),m.fields.availabilityField=new e({placeholder:c.selectScope,availabilityType:"Enterprise",availabilityId:"",availabilityName:"",sizeInCharNumber:48,value:f(),displayClearFieldButtonFlag:!1}),m.fields.availabilityField.inject(m.templateAvailabilityField),m.fields.availabilityField.addEventListener("change",function(e){}),new UWA.Element("div",{html:"&nbsp;"}).inject(m.templateAvailabilityField),m.fields.availabilityChooser=new n({icon:{iconName:"search"}}),m.fields.availabilityChooser.getContent().addEventListener("buttonclick",function(){}),m.fields.availabilityChooser.inject(m.templateAvailabilityField),m.templateAvailabilityField.inject(m.formFields),p=new UWA.Element("h5",{class:"required",text:c.routeBasePurpose}).inject(m.formFields),m.fields.routePurpose=new a({elementsList:[c.standard,c.Approval,c.Review],enableSearchFlag:!1}).inject(m.formFields),m.fields.routePurpose.addEventListener("change",function(e){let t=e.dsModel.selectedIndex;t=t=0==t?"Standard":1==t?"Approval":"Review",widget.routeMgmtMediator.publish("initiateRoute-on-RouteBasePurposeSelection",{basePurpose:t}),"All"!=r.routeESignConfigSetting&&"RouteSpecific"!=r.routeESignConfigSetting||("Approval"==t||"Standard"==t?(document.getElementById("approvalWithSign").style.display="block",m.fields.approvalWithSign.visibleFlag=!0):(m.fields.approvalWithSign.visibleFlag=!1,document.getElementById("approvalWithSign").style.display="none")),"Approval"==t||"Review"==t?(m.startRouteOnCompletionField.className="fonticon-chooser-scope-display",m.linkTemplateCompleteActionField.className="fonticon-chooser-scope-display",m.demoteOnRejectionField.className="fonticon-chooser-scope-display"):(m.startRouteOnCompletionField.className="",m.fields.linkedTemplateField.selectedItems&&(m.linkTemplateCompleteActionField.className="",m.demoteOnRejectionField.className=""))}),new UWA.Element("h5",{text:c.StartRouteOnCompletion}).inject(m.startRouteOnCompletionField);var d=new UWA.Element("div",{id:"startRouteOnCompletionFieldChooser",class:"fonticon-chooser-display"}),g={isMultiSearchMode:!1};g.placeHolderValue=c.searchTemplate,g.minLengthToType=3,g.isFreeInputAllowed=!1,g.toKeepSearchResultsFlag=!1,g.getPrecond=function(){return s.getPrecondForLinkedTemplateSearch()},g.getChangeHandler=function(){return s.changeHandlerLinkedFortemplateField(m)},m.fields.linkedTemplateField=u.drawAutoCompleteComponent(g),m.fields.linkedTemplateField.inject(d),new UWA.Element("div",{html:"&nbsp;"}).inject(d),m.fields.templateChooser=new n({icon:{iconName:"search"}}),m.fields.templateChooser.inject(d),m.fields.templateChooser.getContent().addEventListener("buttonclick",function(){s.init(event,m)}),d.inject(m.startRouteOnCompletionField),m.startRouteOnCompletionField.inject(m.formFields),p=new UWA.Element("h5",{class:"required",id:"linkTemplateCompleteActionField",text:c.routeCompletionAction}).inject(m.linkTemplateCompleteActionField),m.fields.routeCompleteAction=new a({elementsList:[c.notifyRouteOwner,c.promoteConnectedObject],enableSearchFlag:!1}),m.fields.routeCompleteAction.inject(m.linkTemplateCompleteActionField),m.linkTemplateCompleteActionField.inject(m.formFields),p=new UWA.Element("h5",{class:"required",id:"demoteOnRejectionField",text:c.DemoteOnRejection}).inject(m.demoteOnRejectionField),m.fields.demoteOnRejection=new a({elementsList:[c.no,c.yes],enableSearchFlag:!1}),m.fields.demoteOnRejection.inject(m.demoteOnRejectionField),m.demoteOnRejectionField.inject(m.formFields),p=new UWA.Element("h5",{class:"required",text:c.routeScope}).inject(m.formFields),m.fields.buttonGroupScope=new o({type:"radio"}),m.fields.buttonGroupScope.addChild(new l({type:"radio",label:c.scopeAll,value:"All"})),m.fields.buttonGroupScope.addChild(new l({type:"radio",label:c.scopeOrg,value:"Organization",checkFlag:!0})),m.fields.buttonGroupScope.inject(m.formFields),m.fields.buttonGroupScope.addEventListener("change",function(e){widget.routeMgmtMediator.publish("initiateRoute-on-ScopeSelection",{scopeId:e.dsModel.value,scopePhyId:""})}),p=new UWA.Element("h5",{class:"required",text:c.routeTaskEdits}).inject(m.formFields),m.fields.routeTaskEdits=new a({elementsList:[c.ModifyDeleteTaskList,c.ExtendTaskList,c.ModifyTaskList,c.MaintainExactTaskList],enableSearchFlag:!1}),m.fields.routeTaskEdits.inject(m.formFields),p=new UWA.Element("h5",{class:"required",text:c.routeAutoStopOnRejection}).inject(m.formFields),m.fields.routeAutoStopOnRejection=new a({elementsList:[c.immediate,c.deferred],enableSearchFlag:!1}),m.fields.routeAutoStopOnRejection.inject(m.formFields),p=new UWA.Element("h5",{class1:"required",id:"PreserveTaskOwner",text:c.PreserveTaskOwnerLabel}).inject(m.formFields),m.fields.buttonGroupPTO=new o({type:"radio"}),m.fields.buttonGroupPTO.addChild(new l({type:"radio",label:c.PreserveTaskOwnerSelect2,value:"Retain",checkFlag:!0})),m.fields.buttonGroupPTO.addChild(new l({type:"radio",label:c.PreserveTaskOwnerSelect1,value:"Reset"})),m.fields.buttonGroupPTO.inject(m.formFields),p=new UWA.Element("h5",{class:"required",id:"selectUsersFromUserGroup",text:c.ChooseUsersFromUG}).inject(m.formFields),m.fields.buttonGroupChooseUG=new o({type:"radio"}),m.fields.buttonGroupChooseUG.addChild(new l({type:"radio",label:c.no,value:"False",checkFlag:!0})),m.fields.buttonGroupChooseUG.addChild(new l({type:"radio",label:c.yes,value:"True"})),m.fields.buttonGroupChooseUG.inject(m.formFields),widget.routeMgmtMediator.publish("InitiateTemplate-on-chooseUGSelection",{chooseUserFromUG:"False",Type:"Route Template"}),m.fields.buttonGroupChooseUG.addEventListener("change",function(e){"True"==e.dsModel.value?(m.fields.buttonGroupPTO.selectIndex(0),m.fields.buttonGroupPTO.getButton(1).disabled=!0):m.fields.buttonGroupPTO.getButton(1).disabled=!1,widget.routeMgmtMediator.publish("InitiateTemplate-on-chooseUGSelection",{chooseUserFromUG:e.dsModel.value[0],Type:"Route Template"})}),"RouteSpecific"!=r.routeESignConfigSetting&&"All"!=r.routeESignConfigSetting||(p=new UWA.Element("h5",{class:"required",id:"approvalWithSign",text:c.routeRequiresESign}).inject(m.formFields),m.fields.approvalWithSign=new o({type:"radio"}),m.fields.approvalWithSign.addChild(new l({type:"radio",label:c.no,value:"False",checkFlag:!0})),m.fields.approvalWithSign.addChild(new l({type:"radio",label:c.yes,value:"True"})),"All"==r.routeESignConfigSetting&&(m.fields.approvalWithSign.selectIndex(1),m.fields.approvalWithSign.getButton(0).disabled=!0),m.fields.approvalWithSign.inject(m.formFields))},f=function(){return null==widget.getPreference("organization")&&""!=widget.getPreference("organization")?widget.data.pad_security_ctx.split("ctx::")[1].split(".")[1]:widget.getPreference("organization").value};return{build:(e,t)=>(function(e,t){m={},g(e,t)})(e,t),destroy:()=>{m={}},getProperties:()=>m}}),define("DS/ENORouteTemplateMgmt/Views/Loader/InitiateTemplatePropertiesLoader",["DS/ENORouteTemplateMgmt/Views/InitiateTemplatePropertiesView","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],function(e,t){"use strict";let i={};return{init:function(t){this.showView()||(i.container=new UWA.Element("div",{html:"",id:"InitiateTemplateFormView",class:"template-initiate-properties-container"}),i.container.inject(document.querySelector("#iRouteTabsContainer")),e.build(i.container,t))},hideView:function(){document.querySelector("#InitiateTemplateFormView")&&document.querySelector("#InitiateTemplateFormView").getChildren().length>0&&(document.getElementById("InitiateTemplateFormView").style.display="none")},showView:function(){return!!(document.querySelector("#InitiateTemplateFormView")&&document.querySelector("#InitiateTemplateFormView").getChildren().length>0)&&(document.getElementById("InitiateTemplateFormView").style.display="block",!0)},destroy:function(){e.destroy()},getModel:function(){return e.getProperties()}}}),define("DS/ENORouteTemplateMgmt/Views/RouteTemplateHistory",["DS/EditPropWidget/facets/Common/FacetsBase","DS/ENORouteMgmt/Components/Wrappers/WrapperLargeTileView","DS/ENORouteTemplateMgmt/Model/RouteTemplateInfoHistoryModel","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController"],function(e,t,i,o){"use strict";var n=e.extend({init:function(){widget.propWidgetHistoryOpen=!0,this._parent.apply(this,arguments);arguments[0];this.elements.container=UWA.createElement("div",{id:"routeTemplateHistory",class:"routeTemplateHistory"})},updateFacet:function(){let e=this.getModel();if(1==e.isMergedModel())return;if(!e)return!1;this.elements.container.setContent("");let t=e.get("objectId");o.fetchRouteTemplateHistory(t).then(function(e){i.destroy();let t=l(e);a(t).inject(document.querySelector(".routeTemplateHistory"))})},destroyComponent:function(){},onResize:function(){},onRefresh:function(){this.updateFacet()}}),l=function(e){return i.getModel(e)};let a=function(e){var i=UWA.createElement("div",{id:"routeTemplateInfoHistoryContainer",class:""});return t.build(e,i)};return n}),define("DS/ENORouteTemplateMgmt/Views/InitiateTemplateTabsView",["DS/Controls/TabBar","DS/ENORouteMgmt/Components/Mediator","DS/ENORouteTemplateMgmt/Config/InitiateTemplateTabsConfig"],function(e,t,i){"use strict";let o,n,l={},a={},r=function(e,t){this.container=e,a=t,u()},s=function(e){let t=e.options.value;if(void 0===t&&(t=e.dsModel.buttonGroup.value[0]),t!==n){var i=["properties","tasks"];l[i[t]].init(a),void 0!==n&&l[i[n]].hideView(),n=t}};r.prototype.init=function(){o=new e({displayStyle:"strip",showComboBoxFlag:!0,editableFlag:!1,multiSelFlag:!1,reindexFlag:!0,touchMode:!0,centeredFlag:!1,allowUnsafeHTMLOnTabButton:!0}),i.forEach(e=>{o.add(e)}),o.inject(this.container),d()};let d=function(){new Promise(function(e,t){let o=[];i.forEach((e,t)=>{""!=e.loader&&(o[t]=new Promise(function(t,i){require([e.loader],function(i){l[e.id]=i,t()})}))}),Promise.all(o).then(()=>{e()})}).then(function(){let e={options:{}};e.options.value=0,s(e),o.addEventListener("tabButtonClick",function(e){s(e)}),o.addEventListener("change",function(e){s(e)})},function(){})};r.prototype.destroy=function(){try{n=void 0,Object.keys(l).map(e=>{l[e].destroy()}),o.destroy(),a={},this.container.destroy()}catch(e){}},r.getModel=function(e){return l[e].getModel()},r.getPropertiesModel=function(){l.properties.getModel()},r.getContentModel=function(){l.contents.getModel()},r.getTasksModel=function(){l.tasks.getModel()};let u=function(){null==widget.routeMgmtMediator&&(widget.routeMgmtMediator=new t),widget.routeMgmtMediator.subscribe("initiateRoute-on-TemplateSelection",function(e){e.template&&e.template.length>0&&e.template[0].id?(a.templateId=e.template[0].id,a.chooseUserFromGroup=e.chooseUserFromUG):(a.templateId="",a.chooseUserFromGroup="No")}),widget.routeMgmtMediator.subscribe("initiateRoute-on-ScopeSelection",function(e){a.scopeId=e.scopeId,a.scopePhyId=e.scopePhyId,a.ScopeMembers=e.ScopeMembers}),widget.routeMgmtMediator.subscribe("initiateRoute-on-RouteBasePurposeSelection",function(e){e.basePurpose&&(a.routeBasePurpose=e.basePurpose)}),widget.routeMgmtMediator.subscribe("InitiateTemplate-on-chooseUGSelection",function(e){e.chooseUserFromUG&&e.Type&&(a.chooseUserFromGroup=e.chooseUserFromUG,a.Type=e.Type)})};return r}),define("DS/ENORouteTemplateMgmt/Views/Loader/EditTemplateLinkTemplateChooser",["DS/ENORouteMgmt/Utilities/Search/SearchUtil","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/TreeModel/TreeNodeModel","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o){"use strict";let n,l=!1;var a=function(e,t){var o;t&&(o=new i({label:t[0]["ds6w:label"],value:t[0].id,status:t[0]["ds6w:status"]}),n.fields.linkedTemplateField.selectedItems=o)};let r=function(e,t){if("Standard"==e.model.BasePurpose){if(""!=e.model.linkedRouteTemplate&&null==t.fields.linkedTemplateField.selectedItems||null!=t.fields.linkedTemplateField.selectedItems&&e.model.linkedRouteTemplate!=t.fields.linkedTemplateField.selectedItems.options.label)return void(t.button.style.visibility="visible");if(""==t.linkTemplateCompleteActionField.className&&t.fields.routeCompleteAction.value!=e.model.routeCompletionAction)return void(t.button.style.visibility="visible");if(""==t.demoteOnRejectionField.className&&t.fields.demoteOnRejection.value!=e.model.DemoteOnRejection)return void(t.button.style.visibility="visible")}"False"!=e.model.selectUsersFromUserGroup||e.model.preserveTaskOwner==t.fields.buttonGroupPTO.value[0]?t.button.style.visibility="hidden":t.button.style.visibility="visible"};return{init:(t,i,o)=>(function(t,i,o){n=i;var l=t.dsModel,r=UWA.Utils.getUUID();require(["DS/SNInfraUX/SearchCom"],function(t){var i=t.createSocket({socket_id:r}),n=e.getRefinementToSnN(r,"linkTemplate",!1,["Route Template"]),s=e.getPrecondForLinkTemplateEditSearch(o);if(n.precond=s.precond,""!=o&&(n.resourceid_not_in=s.resourceid_not_in),!UWA.is(i))throw new Error("Socket not initialized");i.dispatchEvent("RegisterContext",n),i.addListener("Selected_Objects_search",a.bind(l,"")),i.dispatchEvent("InContextSearch",n)})})(t,i,o),destroy:()=>{n={}},getPrecondForLinkedTemplateSearch:i=>(function(i){return new Promise(function(o,n){var l={};""!=i.model.linkedRouteTemplateId&&null!=i.model.linkedRouteTemplateId?t.linkedTemplates(i.model.id).then(t=>{l=e.getPrecondForLinkTemplateEditSearch(t),o(l)},e=>{e.error&&widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}),n()}):(l=e.getPrecondForLinkTemplateEditSearch(),o(l))})})(i),changeHandlerLinkedFortemplateField:(e,t)=>(function(e,t){if(l)l=!1;else{if(t.fields.linkedTemplateField.selectedItems&&"Draft"==t.fields.linkedTemplateField.selectedItems.options.status&&(widget.notify.handler().addNotif({level:"error",subtitle:o.errorSelectedInactiveTemplate,sticky:!1}),l=!0,t.fields.linkedTemplateField.selectedItems=void 0),t.fields.linkedTemplateField.selectedItems&&t.fields.linkedTemplateField.selectedItems.options){if(t.fields.linkedTemplateField._editor.elements.inputField.value!=t.fields.linkedTemplateField.selectedItems.options.label)return;t.linkTemplateCompleteActionField.className="",t.demoteOnRejectionField.className=""}else t.linkTemplateCompleteActionField.className="fonticon-chooser-scope-display",t.demoteOnRejectionField.className="fonticon-chooser-scope-display";null==t.fields.linkedTemplateField.options.isSelected&&r(e,t),null!=t.fields.linkedTemplateField.options.isSelected&&(t.fields.linkedTemplateField.options.isSelected=void 0)}})(e,t),checkForFieldChange:(e,t)=>r(e,t)}}),define("DS/ENORouteTemplateMgmt/Actions/InitiateTemplateActions",["DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/WAFData/WAFData","UWA/Core","DS/ENORouteMgmt/Utilities/Utils","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteMgmt/Utilities/ParseJSONUtil","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n,l,a){"use strict";let r,s=function(e){var t={title:e.fields.name.value.trim(),description:e.fields.descField.value,attrAvailabilityType:"Organization",attrAvailabilityId:"",routeBasePurpose:0==e.fields.routePurpose.selectedIndex?"Standard":1==e.fields.routePurpose.selectedIndex?"Approval":"Review",attRestrictMembers:u(e),taskEditSetting:0==e.fields.routeTaskEdits.selectedIndex?"Modify/Delete Task List":1==e.fields.routeTaskEdits.selectedIndex?"Extend Task List":2==e.fields.routeTaskEdits.selectedIndex?"Modify Task List":"Maintain Exact Task List",AutoStopOnRejection:0==e.fields.routeAutoStopOnRejection.selectedIndex?"Immediate":"Deferred",preserveTaskOwner:"Retain"==e.fields.buttonGroupPTO.value[0]?"False":"True",selectUsersFromUserGroup:"True"==e.fields.buttonGroupChooseUG.value[0]?"True":"False"};return 0==e.fields.routePurpose.selectedIndex&&e.fields.linkedTemplateField.selectedItems&&(t.linkedRouteTemplateId=e.fields.linkedTemplateField.selectedItems.options.value,t.routeCompletionAction=0==e.fields.routeCompleteAction.selectedIndex?"Notify Route Owner":"Promote Connected Object",t.DemoteOnRejection=0==e.fields.demoteOnRejection.selectedIndex?"No":"Yes"),e.fields.approvalWithSign&&e.fields.approvalWithSign.visibleFlag&&(t.routeRequiresESign="True"==e.fields.approvalWithSign.value[0]?"True":"False"),t},d=function(e,t){var i={tasks:[]};return e.forEach(e=>{let o="";e.taskDueDate&&""!=e.taskDueDate&&(o=new Date(e.taskDueDate).toISOString());var n=e.chooseUsersFromUg;("TRUE"==e.routeOwnerTask||"Group"!=e.assigneeType&&"Group Proxy"!=e.assigneeType||"False"==t.fields.buttonGroupChooseUG.value[0])&&(n="False"),i.tasks.push({dataelements:{allowDelegation:e.allowDelegation,assigneeId:1==e.routeOwnerTask?"contextUser":e.assigneeId,assigneeSetDueDate:e.assigneeSetDueDate,instructions:e.instructions,parallelNodeProcessionRule:e.parallelNodeProcessionRule,taskAction:e.taskAction,taskOrder:e.taskOrder,taskDueDate:o,title:e.title,reviewTask:e.needsOwnerReview,dateOffsetFrom:e.dateOffsetFrom,dueDateOffset:e.dueDateOffset,needsOwnerReview:e.needsOwnerReview,routeOwnerTask:e.routeOwnerTask,routeOwnerUGChoice:e.routeOwnerUGChoice,chooseUsersFromUg:n}})}),i},u=function(e){if(e.fields.buttonGroupScope){var t=e.fields.buttonGroupScope.value[0];return"scope"==t?e.fields.scopeField.options.scopePhyId:t}if(e.fields.scopeField)return e.fields.scopeField.options.scopePhyId};return r={saveAsDraftTemplate:(t,i)=>(function(t,i){return new Promise(function(o,n){var a=s(t);a=(new l).createDataForRequest(a),null!=i&&(a.data[0].relateddata=d(i,t)),e.saveAsRouteTemplate(a).then(e=>o(e),e=>n(e))})})(t,i),createAndActivateRouteTemplate:(t,i)=>(function(t,i){var o;return new Promise(function(n,a){var r=s(t);r=(new l).createDataForRequest(r),null!=i&&(r.data[0].relateddata=d(i,t)),e.createAndActivateRouteTemplate(r).then(e=>{o=e[0].id,n(e)},e=>a(e))}).then(function(){return new Promise(function(t,i){e.fetchRouteTemplateById(o).then(e=>{t(e)},e=>i(e))})})})(t,i)}}),define("DS/ENORouteTemplateMgmt/Views/Form/RelatedObjectForm",["DS/Controls/LineEditor","DS/Controls/Editor","DS/Controls/ButtonGroup","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/ENORouteTemplateMgmt/Views/Loader/EditTemplateLinkTemplateChooser","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/ENORouteTemplateMgmt/Actions/TemplateActions","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/TreeModel/TreeNodeModel","DS/ENORouteMgmt/Views/Form/ENORouteAutoComplete","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n,l,a,r,s,d,u,c,m,p,g){let f,h=function(e,t){var h=document.querySelector(".RelatedObjectContainer");h.innerHTML="",f.linkTemplateCompleteActionField=new UWA.Element("div",{id:"linkTemplateCompleteActionField",class:"fonticon-chooser-scope-display"}),f.demoteOnRejectionField=new UWA.Element("div",{id:"demoteOnRejectionField",class:"fonticon-chooser-scope-display"});var v=new UWA.Element("div",{class:"Space2",html:"&nbsp;"});f.button={};var S=new UWA.Element("div",{html:"<br><br>"});if(f.fields=new UWA.Element("div",{id:"RelatedObjectFields",class:"RelatedObjectFields",styles:{height:"calc(100% - 84px)"}}),"Inactive"==t.model.actualState&&-1!=t.model.Actions.indexOf("modify")&&(f.Toolbar=new UWA.Element("div",{id:"EditToolbar",class:"wux-button-icon-placeholder"}),new UWA.Element("span",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-pencil wux-ui-3ds-lg",title:g.editMode,styles:{"font-size":"20px",position:"absolute",right:"16px",cursor:"pointer",height:"auto"},events:{click:function(e){if(null==document.getElementById("button"))T.build("edit",t);else{if(!w(t,f))return d.setNotificationManager(s),void s.addNotif({level:"error",subtitle:g.relatedErrorMessage,sticky:!1});T.build("view",t)}}}}).inject(f.Toolbar),S.inject(f.Toolbar),f.Toolbar.inject(h),f.fields.addEventListener("dblclick",function(i){"view"==e&&T.build("edit",t)})),f.fields.inject(h),"Standard"==t.model.BasePurpose){if(""!=t.model.linkedRouteTemplate&&(f.linkTemplateCompleteActionField.className="",f.demoteOnRejectionField.className=""),f.fields.startRouteOnCompletionField=new UWA.Element("div",{id:"startRouteOnCompletionField"}),new UWA.Element("h5",{text:g.StartRouteOnCompletion}).inject(f.fields.startRouteOnCompletionField),"edit"==e){var R,M=new UWA.Element("div",{id:"startRouteOnCompletionFieldChooser",class:"fonticon-chooser-display"}),b={};if(b.isMultiSearchMode=!1,b.placeHolderValue=g.searchTemplate,b.minLengthToType=3,b.isFreeInputAllowed=!1,b.toKeepSearchResultsFlag=!1,b.getPrecond=function(){return a.getPrecondForLinkedTemplateSearch(t)},b.getChangeHandler=function(){return a.changeHandlerLinkedFortemplateField(t,f)},f.fields.linkedTemplateField=p.drawAutoCompleteComponent(b),f.fields.linkedTemplateField.inject(M),null!=t.model.linkedRouteTemplateId&&""!=t.model.linkedRouteTemplateId)R=new m({label:t.model.linkedRouteTemplate,value:t.model.linkedRouteTemplateId,status:"Released"}),f.fields.linkedTemplateField.options.isSelected=!0,f.fields.linkedTemplateField.selectedItems=R;new UWA.Element("div",{html:"&nbsp;"}).inject(M),f.fields.templateChooser=new o({icon:{iconName:"search"}}),f.fields.templateChooser.inject(M),f.fields.templateChooser.getContent().addEventListener("buttonclick",function(e){var i="";""!=t.model.linkedRouteTemplateId&&null!=t.model.linkedRouteTemplateId?c.linkedTemplates(t.model.id).then(t=>{i=t,a.init(e,f,i)},e=>{e.error&&widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1})}):a.init(e,f,i)}),M.inject(f.fields.startRouteOnCompletionField),f.fields.startRouteOnCompletionField.inject(f.fields)}else if(new UWA.Element("span",{html:t.model.linkedRouteTemplate}).inject(f.fields.startRouteOnCompletionField),f.fields.startRouteOnCompletionField.inject(f.fields),""!=f.linkTemplateCompleteActionField.className)v.inject(f.fields);else{var E=document.querySelector(".Space2");null!=E&&E.remove()}if(new UWA.Element("h5",{class:"required",id:"linkTemplateCompleteActionField",text:g.routeCompletionAction}).inject(f.linkTemplateCompleteActionField),"edit"==e){let e,i={};i.label=g.promoteConnectedObject,i.value="Promote Connected Object";let o={};o.label=g.notifyRouteOwner,o.value="Notify Route Owner",e="Promote Connected Object"==t.model.routeCompletionAction?1:0,f.fields.routeCompleteAction=new l({elementsList:[o,i],enableSearchFlag:!1,selectedIndex:e}),f.fields.routeCompleteAction.inject(f.linkTemplateCompleteActionField),f.fields.routeCompleteAction.addEventListener("change",function(e){a.checkForFieldChange(t,f)})}else{var y;y="Promote Connected Object"==t.model.routeCompletionAction?g.promoteConnectedObject:g.notifyRouteOwner,new UWA.Element("span",{html:y}).inject(f.linkTemplateCompleteActionField)}if(f.linkTemplateCompleteActionField.inject(f.fields),new UWA.Element("h5",{class:"required",id:"demoteOnRejection",text:g.DemoteOnRejection}).inject(f.demoteOnRejectionField),"edit"==e){let e,i={};i.label=g.no,i.value="No";let o={};o.label=g.yes,o.value="Yes",e="Yes"==t.model.DemoteOnRejection?1:0,f.fields.demoteOnRejection=new l({elementsList:[i,o],enableSearchFlag:!1,selectedIndex:e}),f.fields.demoteOnRejection.inject(f.demoteOnRejectionField),f.fields.demoteOnRejection.addEventListener("change",function(e){a.checkForFieldChange(t,f)})}else{var O;O="No"==t.model.DemoteOnRejection?g.no:g.yes,new UWA.Element("span",{html:O}).inject(f.demoteOnRejectionField)}f.demoteOnRejectionField.inject(f.fields)}let C=t.model.Scope[0];if("All"!=t.model.Scope[0]&&"Organization"!=t.model.Scope[0]||(C="Organization"==t.model.Scope[0]?g.scopeOrg:g.scopeAll),new UWA.Element("h5",{class:"required",html:g.routeScope}).inject(f.fields),new UWA.Element("span",{html:C}).inject(f.fields),new UWA.Element("h5",{class1:"required",id:"PreserveTaskOwner",text:g.PreserveTaskOwnerLabel}).inject(f.fields),"edit"==e&&"False"==t.model.selectUsersFromUserGroup){let e=!1,o=!1;"False"==t.model.preserveTaskOwner?o=!0:e=!0,f.fields.buttonGroupPTO=new i({type:"radio"}),f.fields.buttonGroupPTO.addChild(new n({type:"radio",label:g.PreserveTaskOwnerSelect2,value:"False",checkFlag:o})),f.fields.buttonGroupPTO.addChild(new n({type:"radio",label:g.PreserveTaskOwnerSelect1,value:"True",checkFlag:e})),f.fields.buttonGroupPTO.inject(f.fields),f.fields.buttonGroupPTO.addEventListener("change",function(e){a.checkForFieldChange(t,f)})}else{let e;e="False"==t.model.preserveTaskOwner?g.PreserveTaskOwnerSelect2:g.PreserveTaskOwnerSelect1,new UWA.Element("span",{html:e}).inject(f.fields)}var D;if(new UWA.Element("h5",{class:"required",id:"selectUsersFromUserGroup",text:g.ChooseUsersFromUG}).inject(f.fields),D="True"!=t.model.selectUsersFromUserGroup?g.no:g.yes,new UWA.Element("span",{html:D}).inject(f.fields),"edit"==e){f.button=new UWA.Element("div",{id:"button",class:"wux-button-icon-placeholder",styles:{bottom:"0px",float:"right",height:"40px"}}).inject(h);var N=new r({name:g.save,value:g.save,className:"primary default medium"});N.inject(f.button),N.addEvents({onClick:function(){var e={};if("Standard"==t.model.BasePurpose){if(""!=t.model.linkedRouteTemplate&&null==f.fields.linkedTemplateField.selectedItems||null!=f.fields.linkedTemplateField.selectedItems&&t.model.linkedRouteTemplate!=f.fields.linkedTemplateField.selectedItems.options.label){if(f.fields.linkedTemplateField.selectedItems&&""!=f.fields.linkedTemplateField.selectedItems.options.label&&(""==f.fields.linkedTemplateField.selectedItems.options.value||null==f.fields.linkedTemplateField.selectedItems.options.value))return d.setNotificationManager(s),void s.addNotif({level:"error",subtitle:g.linkedTemplateSelectMessage,sticky:!1});""!=t.model.linkedRouteTemplate&&null==f.fields.linkedTemplateField.selectedItems?e.linkedRouteTemplateId="":e.linkedRouteTemplateId=f.fields.linkedTemplateField.selectedItems.options.value,null==f.fields.linkedTemplateField.selectedItems?(e.routeCompletionAction="",e.DemoteOnRejection=""):(e.routeCompletionAction=f.fields.routeCompleteAction.value,e.DemoteOnRejection=f.fields.demoteOnRejection.value)}""==f.linkTemplateCompleteActionField.className&&f.fields.routeCompleteAction.value!=t.model.routeCompletionAction&&(e.routeCompletionAction=f.fields.routeCompleteAction.value),""==f.demoteOnRejectionField.className&&f.fields.demoteOnRejection.value!=t.model.DemoteOnRejection&&(e.DemoteOnRejection=f.fields.demoteOnRejection.value)}"False"==t.model.selectUsersFromUserGroup&&t.model.preserveTaskOwner!=f.fields.buttonGroupPTO.value[0]&&(e.preserveTaskOwner=f.fields.buttonGroupPTO.value[0]),u.updateRouteTemplate(e,t.model.id).then(e=>{widget.notify.handler().addNotif({level:"success",subtitle:g.relatedSuccessfulMesaage,sticky:!1}),null!=e[0].linkedRouteTemplate?t.model.linkedRouteTemplate=e[0].linkedRouteTemplate:t.model.linkedRouteTemplate="",null!=e[0].linkedRouteTemplateId?t.model.linkedRouteTemplateId=e[0].linkedRouteTemplateId:t.model.linkedRouteTemplateId="",null!=e[0].routeCompletionAction?t.model.routeCompletionAction=e[0].routeCompletionAction:t.model.routeCompletionAction="",null!=e[0].DemoteOnRejection?t.model.DemoteOnRejection=e[0].DemoteOnRejection:t.model.DemoteOnRejection="","False"==e[0].selectUsersFromUserGroup&&(t.model.preserveTaskOwner=e[0].preserveTaskOwner),T.build("edit",t),widget.routeMgmtMediator.publish("template-data-updated",e[0])},e=>{e.error?widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:g.errorModify,sticky:!1})})}});v=new UWA.Element("div",{html:"&nbsp;",styles:{display:"inline-block"}}).inject(f.button);var F=new r({name:g.cancel,value:g.cancel,className:"default medium"});F.addEvents({onClick:function(){T.build("edit",t)}}),F.inject(f.button),f.button.style.visibility="hidden"}},w=function(e,t){if("Standard"==e.model.BasePurpose){if(""!=e.model.linkedRouteTemplate&&null==t.fields.linkedTemplateField.selectedItems||null!=t.fields.linkedTemplateField.selectedItems&&e.model.linkedRouteTemplate!=t.fields.linkedTemplateField.selectedItems.options.label)return!1;if(""==t.linkTemplateCompleteActionField.className&&t.fields.routeCompleteAction.value!=e.model.routeCompletionAction)return!1;if(""==t.demoteOnRejectionField.className&&t.fields.demoteOnRejection.value!=e.model.DemoteOnRejection)return!1}return"False"!=e.model.selectUsersFromUserGroup||e.model.preserveTaskOwner==t.fields.buttonGroupPTO.value[0]},T={build:(e,t)=>(function(e,t){f={},h(e,t)})(e,t)};return T}),define("DS/ENORouteTemplateMgmt/Views/TemplateRelatedObjInfo",["DS/EditPropWidget/facets/Common/FacetsBase","DS/ENORouteTemplateMgmt/Views/Form/RelatedObjectForm","DS/ENORouteMgmt/Controller/RouteServicesController","DS/ENORouteMgmt/Utilities/DataFormatter","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n){"use strict";var l=e.extend({init:function(){this._parent.apply(this,arguments),this.elements.container=new UWA.Element("div",{id:"TemplateRelatedObjectFields",class:""})},updateFacet:function(){let e=this,t=e.getModel();if(1==t.isMergedModel())return;if(!t)return!1;let n=t.get("objectId");i.fetchRouteTemplateById(n).then(function(t){e.elements.container.setContent("");let i={};t&&t.data&&t.data.length>0&&(t.data[0].dataelements.id=t.data[0].id,i=o.templateGridData(t.data[0].dataelements)),a(i).inject(e.elements.container)})},destroyComponent:function(){},onResize:function(){},onRefresh:function(){this.updateFacet()}});let a=function(e){let i={};if((i=new UWA.Element("div",{id:"RelatedObjectContainer",class:"RelatedObjectContainer",styles:{top:"2px",height:"100%"}})).fields={},i.formFields=new UWA.Element("div",{id:"RelatedObjectFields",class:"RelatedObjectFields",styles:{height:"calc(100% - 84px)"}}),"Inactive"==e.actualState&&-1!=e.Actions.indexOf("modify")){var o=new UWA.Element("div",{html:"<br><br>"});i.Toolbar=new UWA.Element("div",{id:"EditToolbar",class:"wux-button-icon-placeholder"}),new UWA.Element("span",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-pencil wux-ui-3ds-lg",title:n.editMode,styles:{"font-size":"20px",position:"absolute",right:"16px",cursor:"pointer",margin:"0px",height:"auto"},events:{click:function(i){let o={};o.model=e,t.build("edit",o)}}}).inject(i.Toolbar),o.inject(i.Toolbar),i.Toolbar.inject(i),i.formFields.addEventListener("dblclick",function(i){let o={};o.model=e,t.build("edit",o)})}var l,a;(i.formFields.inject(i),"Standard"==e.BasePurpose)&&(null==e.linkedRouteTemplate&&(e.linkedRouteTemplate="",e.linkedRouteTemplateId=""),new UWA.Element("h5",{text:n.StartRouteOnCompletion,class:"required"}).inject(i.formFields),new UWA.Element("span",{html:e.linkedRouteTemplate}).inject(i.formFields),""!=e.linkedRouteTemplate?(null==e.routeCompletionAction&&(e.routeCompletionAction=""),l="Promote Connected Object"==e.routeCompletionAction?n.promoteConnectedObject:n.notifyRouteOwner,new UWA.Element("h5",{text:n.routeCompletionAction,class:"required"}).inject(i.formFields),new UWA.Element("span",{html:l}).inject(i.formFields),null==e.DemoteOnRejection&&(e.DemoteOnRejection=""),a="No"==e.DemoteOnRejection?n.no:n.yes,new UWA.Element("h5",{text:n.DemoteOnRejection,class:"required"}).inject(i.formFields),new UWA.Element("span",{html:a}).inject(i.formFields)):new UWA.Element("div",{html:"&nbsp;"}).inject(i.formFields));let r,s=e.Scope[0];var d;return"All"!=e.Scope[0]&&"Organization"!=e.Scope[0]||(s="Organization"==e.Scope[0]?n.scopeOrg:n.scopeAll),new UWA.Element("h5",{text:n.routeScope,class:"required"}).inject(i.formFields),new UWA.Element("span",{html:s}).inject(i.formFields),r="False"==e.preserveTaskOwner?n.PreserveTaskOwnerSelect2:n.PreserveTaskOwnerSelect1,new UWA.Element("h5",{text:n.PreserveTaskOwnerLabel,class:"required"}).inject(i.formFields),new UWA.Element("span",{html:r}).inject(i.formFields),d="True"!=e.selectUsersFromUserGroup?n.no:n.yes,new UWA.Element("h5",{text:n.ChooseUsersFromUG,class:"required"}).inject(i.formFields),new UWA.Element("span",{html:d}).inject(i.formFields),i};return l}),define("DS/ENORouteTemplateMgmt/Views/Dialogs/InitiateTemplateDialog",["DS/ENORouteTemplateMgmt/Views/InitiateTemplateTabsView","DS/ENORouteTemplateMgmt/Actions/InitiateTemplateActions","DS/ENORouteMgmt/Utilities/Utils","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/Controls/Button","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],function(e,t,i,o,n,l,a,r){"use strict";let s,d,u,c,m={},p=function(){let i=new UWA.Element("div",{html:"",id:"initiateTemplate"});s=new UWA.Element("div",{id:"iRouteTabsContainer",class:"template-facets-container"}),u=!1,c=!1,new e(s,m).init(),s.inject(i);var l=new n;l.inject(document.body),d=new o({title:r.newTemplate,modalFlag:!0,width:600,height:500,content:i,immersiveFrame:l,resizableFlag:!0,buttons:{Ok:new a({disabled:!0,domId:"releaseButton",emphasize:"primary",label:r.release,allowUnsafeHTMLLabel:!0,onClick:function(e){let i=w();f(i)&&(e.dsModel.label=r.buttonProgress,e.dsModel.disabled=!0,t.createAndActivateRouteTemplate(i,T()).then(t=>{var i="";i=t[0].title.length>30?t[0].title.substring(0,27)+"...":t[0].title;var o={level:"success",subtitle:r.replace(r.successCreatedAndReleased,{tag1:i}),sticky:!1};widget.routeMgmtMediator.publish("template-summary-append-rows",{data:t[0]}),widget.routeMgmtMediator.publish("template-created",t[0]),e.dsModel.dialog.close(),widget.routeMgmtMediator.publish("template-summary-show-message",{message:o}),widget.routeMgmtMediator.publish("refresh-homepage-after-template-created",{data:t[0]}),widget.routeMgmtMediator.publish("template-deactivate-tag-data")},t=>{e.dsModel.label=r.release,e.dsModel.disabled=!1,-1!=t.error.indexOf(r.ErrorChooseUsers)?widget.notify.handler().addNotif({level:"error",subtitle:r.UnresolvedTasksError,sticky:!1}):t&&t.error.toLowerCase().indexOf("no create access")>-1?widget.notify.handler().addNotif({level:"error",title:r.errorCreateRouteTemplateForRoleTitle,subtitle:r.errorCreateRouteTemplateForRoleSubTitle,message:r.errorCreateRouteTemplateForRoleMsg,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:t.error,sticky:!1})}))}}),Apply:new a({disabled:!0,emphasize:"secondary",domId:"applyButton",label:r.saveAsDraft,allowUnsafeHTMLLabel:!0,onClick:function(e){let i=w();if(!f(i))return;let o=T();e.dsModel.label=r.buttonProgress,e.dsModel.disabled=!0,t.saveAsDraftTemplate(i,o).then(t=>{var i="";i=t[0].title.length>30?t[0].title.substring(0,27)+"...":t[0].title;var o={level:"success",subtitle:r.replace(r.successCreate,{tag1:i}),sticky:!1};widget.routeMgmtMediator.publish("template-summary-append-rows",{data:t[0]}),widget.routeMgmtMediator.publish("template-created",t[0]),e.dsModel.dialog.close(),widget.routeMgmtMediator.publish("template-summary-show-message",{message:o}),widget.routeMgmtMediator.publish("refresh-homepage-after-template-created",{data:t[0]}),widget.routeMgmtMediator.publish("template-deactivate-tag-data")},t=>{e.dsModel.label=r.saveAsDraft,e.dsModel.disabled=!1,t&&t.error.toLowerCase().indexOf("no create access")>-1?widget.notify.handler().addNotif({level:"error",title:r.errorCreateRouteTemplateForRoleTitle,subtitle:r.errorCreateRouteTemplateForRoleSubTitle,message:r.errorCreateRouteTemplateForRoleMsg,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:t.error,sticky:!1})})}}),Cancel:new a({label:r.cancel,domId:"cancelButton",emphasize:"secondary",allowUnsafeHTMLLabel:!0,onClick:function(e){e.dsModel.dialog.close(),widget.setValue("isDialogOpened",!1)}})}}),g(),d.addEventListener("close",function(t){widget.notify.notifview().removeNotifications(),new e(s).destroy(),widget.setValue("isDialogOpened",!1)})},g=function(){widget.routeMgmtMediator.subscribe("initiate-template-toggle-dialogbuttons",function(){h()}),widget.routeMgmtMediator.subscribe("initiate-route-toggle-dialogbuttons",function(){h()})},f=function(e){return!e.fields.linkedTemplateField.selectedItems||""==e.fields.linkedTemplateField.selectedItems.options.label||""!=e.fields.linkedTemplateField.selectedItems.options.value&&null!=e.fields.linkedTemplateField.selectedItems.options.value||(widget.notify.handler().addNotif({level:"error",subtitle:r.linkedTemplateSelectMessage,sticky:!1}),!1)};var h=function(){let e=w(),t=T();if(e&&e.formFields){e.formFields.getChildren();""!=e.fields.name.value.trim()&&(Array.isArray(t)&&t.length>=0||void 0===t)?(d.buttons.Apply.disabled=!1,c=!0):(d.buttons.Apply.disabled=!0,c=!1),u=!!(t&&Array.isArray(t)&&t.length>0),d.buttons.Ok.disabled=!c||!u}};let w=function(){return e.getModel("properties")},T=function(){return e.getModel("tasks")};return{InitiateTemplateDialog:()=>((m={}).scopeId="Organization",m.routeBasePurpose="Standard",m.chooseUserFromGroup="False",void l.getESignConfigSetting().then(function(e){m.routeESignConfigSetting=e.routeESignConfigSetting,p()})),getDialog:()=>d}}),define("DS/ENORouteTemplateMgmt/Config/TemplateSummaryGridViewConfig",["DS/ENORouteTemplateMgmt/Views/Grid/TemplateGridCustomColumns","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],function(e,t){"use strict";return[{text:t.title,dataIndex:"tree",editableFlag:!1,pinned:"left"},{text:t.name,dataIndex:"Name",editableFlag:!1},{text:t.maturityState,dataIndex:"Maturity_State",editableFlag:!1,onCellRequest:e.onRouteNodeStateCellRequest},{text:t.routeBasePurpose,dataIndex:"BasePurposeNLS",editableFlag:!1},{text:t.description,dataIndex:"Description",editableFlag:!1},{text:t.revision,dataIndex:"revision",editableFlag:!1},{text:t.owner,dataIndex:"Owner",editableFlag:!1,onCellRequest:e.onRouteNodeOwnerCellRequest}]}),define("DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView",["DS/ENORouteTemplateMgmt/Config/TemplateSummaryGridViewConfig","DS/ENORouteMgmt/Components/Wrappers/WrapperDataGridView","DS/ENORouteMgmt/Utilities/DragAndDropManager","DS/ENORouteTemplateMgmt/Config/Toolbar/TemplateSummaryToolbarConfig"],function(e,t,i,o){"use strict";let n,l,a=function(){var e=widget.getValue("templatefilters");return null==e?(widget.setValue("templatefilters",["owned","shared","Draft","Released"]),["owned","shared","Draft","Released"]):e};return{build:i=>(function(i){var r=UWA.createElement("div",{id:"TemplatedataGridViewContainer",class:"data-grid-container showView nonVisible"});let s=o.writetoolbarDefination(a());var d=!1;1==UWA.Utils.Client.Features.touchEvents&&(d=!0);let u=t.build(i,e,s,r,d);return n=t.dataGridViewToolbar(),l=t.dataGridView(),u})(i),registerListners:()=>registerListners(),destroy:()=>{_dataGrid.destroy()},getGridViewToolbar:()=>n,getDataGridInstance:()=>l}}),define("DS/ENORouteTemplateMgmt/Views/ToggleViews",["DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],function(e,t){"use strict";let i,o,n;return{doToggleView:function(l){switch(l.curPage){case"TemplateSummary":i=".data-grid-container",o=".tile-view-container",n=e.getGridViewToolbar().getNodeModelByID("view");break;default:Console.log("Incorrect arguments in config file.")}if("GridView"==l.view)n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",n&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:t.gridView}),(a=document.querySelector(i))&&(a.removeClassName("hideView"),a.removeClassName("nonVisible"),a.addClassName("showView")),(r=document.querySelector(o))&&(r.removeClassName("showView"),r.addClassName("hideView"));else if("TileView"==l.view){var a,r;n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",n&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:t.tileView}),(a=document.querySelector(i))&&(a.removeClassName("showView"),a.addClassName("hideView")),(r=document.querySelector(o))&&(r.removeClassName("hideView"),r.addClassName("showView"))}}}}),define("DS/ENORouteTemplateMgmt/Views/TemplateInfoPropWidget",["DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/models/EditPropModel","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/ENORouteMgmt/EnoviaBootstrap","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n){return{getOptions:function(t){let i=!0;"Active"!=t.model.actualState&&-1!=t.model.Actions.indexOf("modify")&&(i=!1);let l=[e.FACET_PROPERTIES];return{typeOfDisplay:e.ALL,selectionType:e.NO_SELECTION,facets:l,editMode:!1,readOnly:i,context:{getSecurityContext:function(){return{SecurityContext:o.getSecurityContextValue()}}},extraNotif:!0,actions:[{name:"action_close_panel",text:n.infoCloseAction,icon:"close",handler:function(){widget.routeMgmtMediator.publish("route-info-close-click",{info:"Route Template"})}}]}},getPropModel:function(e){var l=[],a=new t({metatype:"businessobject",objectId:e,source:"3DSpace",tenant:o.getTenantValue()});return a.set("isTransient",!1),a.addEvent("onSave",function(t){i.fetchRouteTemplateById(e).then(e=>{e[0].requestFrom="editPropWidget",widget.routeMgmtMediator.publish("template-idcard-data-updated",e[0]),widget.routeMgmtMediator.publish("template-data-updated",e[0])},e=>{e.error?widget.notify.handler().addNotif({level:"error",subtitle:e.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:n.infoRefreshError,sticky:!1})})}),l.push(a),l},addFacets:function(e,t){let i=this.getFacets(t);e.addFacets(i)},getFacets:function(e){return[{alwaysVisible:!0,require:"DS/ENORIPE_Relations/views/RelationsTab",facet:{name:"relations",text:n.relations_tab,icon:"object-related"}},{alwaysVisible:!0,require:"DS/ENORouteTemplateMgmt/Views/TemplateRelatedObjInfo",options:{model:e.model},facet:{name:"RelatedData",text:n.infoRelationTab,icon:"cog"}},{alwaysCalled:!0,alwaysVisible:!0,visible:!0,inheritance:!0,require:"DS/ENORouteTemplateMgmt/Views/RouteTemplateHistory",options:{id:e.model.id},facet:{name:"History",text:n.infoHistoryTab,icon:"navigation-history"}}]}}}),define("DS/ENORouteTemplateMgmt/Views/Dialogs/TemplateNewRevision",["DS/WAFData/WAFData","UWA/Core","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/Controls/Button","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView","DS/ENORouteMgmt/Actions/RouteActions","DS/ENORouteTemplateMgmt/Actions/TemplateActions","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n,l,a,r,s,d){"use strict";let u,c,m=function(e,t){s.reviseRouteTemplate(e,t).then(i=>{var o=d.successRevise;widget.notify.handler().addNotif({level:"success",subtitle:o,sticky:!1});var n={};n.data=i[0],n.action=t,widget.routeMgmtMediator.publish("template-summary-delete-row-by-ids",{model:e}),widget.routeMgmtMediator.publish("template-summary-append-rows",n)},e=>{var t=JSON.parse(e);t.error?widget.notify.handler().addNotif({level:"error",subtitle:t.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:d.errorRevise,sticky:!1})}),c.close()};return u={newRevisionConfirmation:(e,t)=>(function(e,t){if(e.data,e.data.length<1)return void widget.notify.handler().addNotif({level:"warning",subtitle:d.ErrorTemplateReviseSelection,sticky:!1});var l=[],a=!1;let r=new o;r.inject(document.body);let s=new UWA.Element("div",{id:"reviseTemplateWarning",class:""});var u=d.reviseTemplateHeader+e.data[0].options.grid.Title;"TRUE"==e.data[0].options.grid.reviseAccess?(l.push(e.data[0].options.grid.id),s.appendChild(UWA.createElement("div",{class:"",html:d.reviseTemplateWarning}))):(a=!0,s.appendChild(UWA.createElement("div",{class:"",html:d.reviseTemplateWarningDetail2Single}))),c=new i({modalFlag:!0,width:500,height:200,title:u,content:s,immersiveFrame:r,buttons:{Ok:new n({label:d.Revise,disabled:a,onClick:function(e){e.dsModel.dialog,m(l,t)}}),Cancel:new n({onClick:function(e){e.dsModel.dialog.close()}})}})})(e,t)}}),define("DS/ENORouteTemplateMgmt/Views/Dialogs/RemoveTemplate",["DS/WAFData/WAFData","UWA/Core","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/Controls/Button","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView","DS/ENORouteTemplateMgmt/Actions/TemplateActions","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n,l,a,r,s){"use strict";let d,u,c=function(e,t){r.DeleteTemplate(e,t),u.close()};return d={removeConfirmation:(e,t)=>(function(e,t){if(void 0===e.data&&(e=l.getSelectedRowsModel()),e.data.length<1)return void widget.notify.handler().addNotif({level:"warning",subtitle:s.ErrorTemplateRemoveSelection,sticky:!1});for(var a=[],r=[],d=UWA.createElement("ul",{class:"",styles:{"list-style-type":"circle"}}),m=UWA.createElement("ul",{class:"",styles:{"list-style-type":"circle"}}),p=0;p<e.data.length;p++)-1==e.data[p].options.grid.Actions.indexOf("delete")||null!=e.data[p].options.grid.routeCompletionAction&&""!=e.data[p].options.grid.routeCompletionAction||null!=e.data[p].options.grid.linkedRouteTemplateId&&""!=e.data[p].options.grid.linkedRouteTemplateId||"Active"==e.data[p].options.grid.actualState?(r.push(e.data[p].options.grid.id),m.appendChild(UWA.createElement("li",{class:"",html:[UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-template"}),UWA.createElement("span",{html:"&nbsp;"+e.data[p].options.grid.Title})]}))):(a.push(e.data[p].options.grid.id),d.appendChild(UWA.createElement("li",{class:"",html:[UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-template"}),UWA.createElement("span",{html:"&nbsp;"+e.data[p].options.grid.Title})]})));let g=new o;g.inject(document.body);let f=new UWA.Element("div",{id:"removeRouteWarning",class:""});var h="";a.length>0&&(h=(h=1==a.length?s.removeTemplateHeaderSingle:s.removeTemplateHeader).replace("{count}",a.length),f.appendChild(UWA.createElement("div",{class:"",html:s.removeTemplateWarning})),1==a.length?f.appendChild(UWA.createElement("div",{class:"",html:s.removeTemplateWarningDetailSingle})):f.appendChild(UWA.createElement("div",{class:"",html:s.removeTemplateWarningDetail})),f.appendChild(UWA.createElement("div",{class:""}).appendChild(d))),r.length>0&&(""==h&&(h=s.removeTemplateHeader2),1==r.length?f.appendChild(UWA.createElement("div",{class:"",html:s.removeTemplateWarningDetail2Single})):f.appendChild(UWA.createElement("div",{class:"",html:s.removeTemplateWarningDetail2})),f.appendChild(UWA.createElement("div",{class:""}).appendChild(m)));var w=!1;r.length>0&&a.length<1&&(w=!0),u=new i({modalFlag:!0,width:500,height:200,title:h,content:f,immersiveFrame:g,buttons:{Ok:new n({label:s.Delete,disabled:w,onClick:function(e){e.dsModel.dialog,c(a,t)}}),Cancel:new n({onClick:function(e){e.dsModel.dialog.close()}})}})})(e,t),getDialog:()=>u}}),define("DS/ENORouteTemplateMgmt/Views/TemplateTabsView",["DS/Controls/TabBar","DS/ENORouteTemplateMgmt/Config/TemplateTabsConfig"],function(e,t){"use strict";let i,o,n={},l={},a=function(e,t){l=t,this.container=e},r=function(e){let t=e.options.value;if(void 0===t&&(t=e.dsModel.buttonGroup.value[0]),t!==o){var i=["tasks","members"];n[i[t]].init(l),void 0!==o&&n[i[o]].hideView(),o=t}};a.prototype.init=function(){i=new e({displayStyle:"strip",showComboBoxFlag:!0,editableFlag:!1,multiSelFlag:!1,reindexFlag:!0,touchMode:!0,centeredFlag:!1,allowUnsafeHTMLOnTabButton:!0}),t.forEach(e=>{i.add(e)}),i.inject(this.container),s()};let s=function(){new Promise(function(e,i){let o=[];t.forEach((e,t)=>{""!=e.loader&&(o[t]=new Promise(function(t,i){require([e.loader],function(i){n[e.id]=i,t()})}))}),Promise.all(o).then(()=>{e()})}).then(function(){let e={options:{}};e.options.value=0,r(e),i.addEventListener("tabButtonClick",function(e){r(e)}),i.addEventListener("change",function(e){r(e)})},function(){})};return a.prototype.destroy=function(){try{o=void 0,Object.keys(n).map(e=>{n[e].destroy()}),null!=i&&i.destroy(),l={},this.container.destroy()}catch(e){}},a}),define("DS/ENORouteTemplateMgmt/Utilities/TemplatePlaceHolder",["DS/Controls/Button","DS/ENORouteTemplateMgmt/Views/Dialogs/InitiateTemplateDialog","i18n!DS/ENORouteMgmt/assets/nls/ENORouteMgmt"],function(e,t,i){"use strict";let o=function(e,o){let n=e.getElement(".no-templates-to-show-container");if(e.querySelector(".tile-view-container").setStyle("display","none"),e.querySelector(".data-grid-container").setStyle("display","none"),null!==n)return widget.routeMgmtMediator.publish("template-back-to-summary"),widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:o}),n;var l=UWA.createElement("span",{class:"no-templates-to-show-filter-shortcut fonticon fonticon-list-filter",title:i.filter}),a=UWA.createElement("span",{class:"no-templates-to-show-create-shortcut fonticon fonticon-plus",title:i.newRouteTemplate}),r=UWA.createElement("div",{class:"no-templates-to-show-container",html:[UWA.createElement("div",{class:"no-templates-to-show",html:[UWA.createElement("div",{class:"pin",html:'<span class="fonticon fonticon-5x fonticon-template"></span>'}),UWA.createElement("span",{class:"no-templates-to-show-label",html:i.templatetitles.placeholder.label}),UWA.createElement("div",{class:"no-templates-to-show-sub-container",html:UWA.createElement("span",{html:i.replace(i.templatetitles.placeholder.sub,{filter:l.outerHTML,create:a.outerHTML})})})]})]});r.getElement(".no-templates-to-show-filter-shortcut").addEventListener("click",function(){document.querySelector(".widget-container").getElementsByClassName("wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-list-filter wux-ui-3ds-lg")[0].click()}),r.getElement(".no-templates-to-show-create-shortcut").addEventListener("click",function(){t.InitiateTemplateDialog()}),e.appendChild(r),widget.routeMgmtMediator.publish("template-back-to-summary"),widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:o})},n=function(e){let t=e.getElement(".no-templates-to-show-container");null!==t&&(e.querySelector(".tile-view-container").removeAttribute("style"),e.querySelector(".data-grid-container").removeAttribute("style"),t.destroy())};return{showeErrorPlaceholder:e=>(function(e){let t=e.querySelector(".generic-error-container");if(e.querySelector(".tile-view-container")&&e.querySelector(".tile-view-container").setStyle("display","none"),e.querySelector(".data-grid-container")&&e.querySelector(".data-grid-container").setStyle("display","none"),e.querySelector("#dataGridDivToolbar")&&e.querySelector("#dataGridDivToolbar").setStyle("display","none"),e.querySelector("#TemplatedataGridDivToolbar")&&e.querySelector("#TemplatedataGridDivToolbar").setStyle("display","none"),e.querySelector("#TemplatedataGridDivToolbar")&&e.querySelector("#TemplatedataGridDivToolbar").setStyle("display","none"),null===t){var o=UWA.createElement("div",{class:"generic-error-container",html:[UWA.createElement("div",{class:"generic-error",html:[UWA.createElement("span",{class:"generic-error-label",html:i.loading})]})]});e.appendChild(o)}else t.removeAttribute("style")})(e),hideeErrorPlaceholder:e=>(function(e){let t=e.getElement(".generic-error-container");null!==t&&t.setStyle("display","none")})(e),showEmptyRouteTemplatePlaceholder:(e,t)=>o(e,t),hideEmptyRouteTemplatePlaceholder:e=>n(e),registerListeners:()=>(widget.routeMgmtMediator.subscribe("show-no-template-placeholder",function(e){o(document.querySelector(".widget-container"),e)}),void widget.routeMgmtMediator.subscribe("hide-no-template-placeholder",function(e){n(document.querySelector(".widget-container"))}))}}),define("DS/ENORouteTemplateMgmt/Views/TemplateIDCardView",["DS/ENORouteTemplateMgmt/Views/TemplateHeaderView","DS/ENORouteTemplateMgmt/Views/TemplateTabsView","DS/ENORouteMgmt/Utilities/IdCardUtil","DS/ENORouteMgmt/Utilities/DataFormatter","DS/ENORouteTemplateMgmt/Views/RouteTemplateHistory"],function(e,t,i,o,n){"use strict";let l,a,r,s,d;var u=function(e){this.rightPanel=e,l=new UWA.Element("div",{id:"templateHeaderContainer",class:"route-header-container"}),a=new UWA.Element("div",{id:"routeFacetsContainer",class:"route-facets-container"})};return u.prototype.init=function(n){new e(l).destroyContainer(),new t(a).destroy(),s&&widget.routeMgmtMediator.unsubscribe(s),d&&widget.routeMgmtMediator.unsubscribe(d);new e(l).init(n,!1),r=n.model.id,new t(a,n).init(),this.rightPanel.appendChild(l),this.rightPanel.appendChild(a);let u=new e(l);u.resizeSensor(),u.resizeIDCard(),s=widget.routeMgmtMediator.subscribe("template-idcard-data-updated",function(t){var n={model:o.templateGridData(t)};if(n.model.id==r){var a=i.infoIconIsActive();let o=new e(l);o.destroyContent(),o.init(n,a),o.resizeSensor(),o.resizeIDCard(),widget.propWidgetOpen&&(t.requestFrom&&"editPropWidget"==t.requestFrom||widget.routeMgmtMediator.publish("route-header-info-click",{model:n.model,info:"Route Template"}))}}),d=widget.routeMgmtMediator.subscribe("template-data-deleted",function(e){e.model.includes(r)&&require(["DS/ENORouteTemplateMgmt/Views/TemplateSummaryView"],function(e){e.backToTemplateSummary()})})},u.prototype.destroy=function(){this.rightPanel.destroy()},u}),define("DS/ENORouteTemplateMgmt/Services/LifeCycleServices",["DS/ENORouteTemplateMgmt/Utilities/TemplateIdCardUtil","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],function(e,t){"use strict";return{lifeCycle:t=>(function(t){require(["DS/LifecycleCmd/MaturityCmd"],function(i){var o=[],n=t.id;o.push({physicalid:n}),(new i).executeAsync(o).then(function(){e.getTemplateDataUpdated(n)})})})(t)}}),define("DS/ENORouteTemplateMgmt/Views/Menu/TemplateContextualMenu",["DS/Menu/Menu","DS/ENORouteTemplateMgmt/Views/Dialogs/RemoveTemplate","DS/ENORouteTemplateMgmt/Views/Dialogs/TemplateNewRevision","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/ENORouteTemplateMgmt/Services/LifeCycleServices","DS/ENORouteTemplateMgmt/Actions/TemplateActions","DS/ENORouteTemplateMgmt/Utilities/VersionFacetIntegration","DS/ENORouteMgmt/Views/Dialogs/InitiateRouteDialog","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt","css!DS/ENORouteMgmt/ENORouteMgmt.css"],function(e,t,i,o,n,l,a,r,s){"use strict";let d,u=function(e,i){let o=!0;1===e.data.length&&(-1==e.data[0].options.grid.Actions.indexOf("delete")||null!=e.data[0].options.grid.routeCompletionAction&&""!=e.data[0].options.grid.routeCompletionAction||null!=e.data[0].options.grid.linkedRouteTemplateId&&""!=e.data[0].options.grid.linkedRouteTemplateId||"Active"==e.data[0].options.grid.actualState)&&(o=!1);var n=[];return o&&n.push({name:s.Delete,title:s.Delete,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},data:null,action:{callback:function(){t.removeConfirmation(e,i)}}}),n},c=function(e,t){let o=!0;1===e.data.length&&-1==e.data[0].options.grid.Actions.indexOf("revise")&&(o=!1);var n=[];return o&&n.push({name:s.newRevision,title:s.newRevision,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-line-add"},data:null,action:{callback:function(){i.newRevisionConfirmation(e,t)}}}),n},m=function(e){var t=[];return t.push({name:s.Open,title:s.Open,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-open"},data:null,action:{callback:function(){widget.routeMgmtMediator.publish("initialize-IDCard-on-dblClick",{model:e})}}}),t},p=function(t){return UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-3x wux-ui-3ds-chevron-down fonticon-display fonticon-color-display",title:s.idCardHeaderActionTemplateAction,styles:{"padding-top":"0px"},events:{click:function(i){var o=i.target.getBoundingClientRect(),n={position:{x:o.left,y:o.top+20}},l=[];l=(l=l.concat(function(e,t){var i=[];return i.push({name:s.revisions,title:s.revisions,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-branch-list"},data:null,action:{callback:function(){a.launchVersionControlApp(e.data[0].options.grid.id)}}}),i}(t))).concat(c(t,!0)),"Active"===t.data[0].options.grid.actualState&&(l=l.concat(g(t.data[0].options.grid.id))),l=l.concat(u(t,!0)),e.show(l,n)}}})},g=function(e){var t=[];return t.push({name:s.createRouteFromTemplate,title:s.createRouteFromTemplate,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"},data:null,action:{callback:function(){var t={templateId:e};r.InitiateRouteDialog(t)}}}),t},f=function(e){var t=[];return t.push({name:s.maturity,title:s.maturity,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collaborative-lifecycle-management"},data:null,action:{callback:function(){n.lifeCycle(e)}}}),t},h=function(e,t){var i,o,n,a,r=[];return-1!==e.Actions.indexOf("demote")?(i="deactivate",o=s.setToState+widget.getValue("stateTemplateNLS").Inactive,n=widget.getValue("stateTemplateNLS").Inactive,a="demote"):-1!==e.Actions.indexOf("promote")&&(i="activate",o=s.setToState+widget.getValue("stateTemplateNLS").Active,n=widget.getValue("stateTemplateNLS").Active,a="promote"),e.Actions?(i&&r.push({name:n,title:o,type:"PushItem",fonticon:{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-status-change template-maturity-icon-"+a},data:null,action:{callback:function(){l.changeTemplateState(e.id,i,t)}}}),r):r};return d={templateTileCheveron:(e,t)=>(function(e,t){var i=o.getSelectedRowsModel(),n=[];return 1===i.data.length&&(n=n.concat(m(i.data[0]._options.grid)),"Active"===i.data[0]._options.grid.actualState&&(n=n.concat(g(i.data[0]._options.grid.id))),n=(n=n.concat(h(i.data[0]._options.grid,!1))).concat(c(i,!1))),n=n.concat(u(i,!1))})(),templateIdCardStateCheveron:t=>(function(t){return t.Actions?-1===t.Actions.findIndex(e=>e.includes("promote"))&&-1===t.Actions.findIndex(e=>e.includes("demote"))?"":UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-chevron-down ",title:s.idCardHeaderTemplateActivityState,styles:{"font-size":"18px","line-height":"24px"},events:{click:function(i){var o=i.target.getBoundingClientRect(),n={position:{x:o.left,y:o.top+20}},l=h(t,!0);l=l.concat(f(t)),e.show(l,n)}}}):""})(t),templateGridRightClick:(t,i)=>(function(t,i){t.preventDefault(),t.stopPropagation();var n=t.target.getBoundingClientRect(),l={position:{x:n.left,y:n.top+20}},a=o.getSelectedRowsModel(),r=[];1===a.data.length&&(r=r.concat(m(i)),"Active"===i.actualState&&(r=r.concat(g(i.id))),r=(r=r.concat(h(i))).concat(c(a,!1))),r=r.concat(u(a,!1)),e.show(r,l)})(t,i),templateIdCardCheveron:e=>p(e)}}),define("DS/ENORouteTemplateMgmt/Views/Tile/TemplateSummaryTileView",["DS/WAFData/WAFData","UWA/Core","DS/ENORouteMgmt/Components/Wrappers/WrapperTileView","DS/ENORouteTemplateMgmt/Views/Menu/TemplateContextualMenu","DS/WebappsUtils/WebappsUtils","DS/Core/PointerEvents","DS/ENORouteMgmt/Utilities/DragAndDropManager","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],function(e,t,i,o,n,l,a,r){"use strict";let s,d;return{build:e=>(function(e){return d=e||new TreeDocument({useAsyncPreExpand:!0}),s=t.createElement("div",{id:"TemplateTileViewContainer",class:"tile-view-container hideView"}),i.build(d,s)})(e),contexualMenuCallback:()=>{i.tileView().onContextualEvent={callback:function(e){var t=[];if(e&&e.cellInfos&&e.cellInfos.cellModel){var i=d.getSelectedNodes(),n=i[0].options.grid.Actions,l=i[0]._options.grid.id;t=o.templateTileCheveron(n,l)}return t}}},destroy:()=>{_myResponsiveTilesView.destroy()},getTileViewInstance:()=>i.tileView()}}),define("DS/ENORouteTemplateMgmt/Views/TemplateSummaryView",["DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView","DS/ENORouteTemplateMgmt/Config/Toolbar/TemplateSummaryToolbarConfig","DS/ENORouteMgmt/Components/Wrappers/WrapperDataGridView","DS/ENORouteMgmt/Components/Wrappers/WrapperTileView","DS/ENORouteTemplateMgmt/Views/Tile/TemplateSummaryTileView","DS/ENORouteMgmt/EnoviaBootstrap","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel","DS/ENORouteTemplateMgmt/Utilities/TemplatePlaceHolder","DS/ENORouteTemplateMgmt/Controller/TemplateServicesController","DS/Utilities/Array","DS/Core/PointerEvents","DS/ENORouteMgmt/Views/RouteHomeSplitView","DS/ENORouteTemplateMgmt/Views/TemplateIDCardView","DS/ENORouteMgmt/Utilities/IdCardUtil","DS/ENORouteTemplateMgmt/Views/TemplateInfoPropWidget","DS/ENORouteMgmt/Services/RouteServices","DS/ENORouteMgmt/Utilities/Utils","DS/ENORouteMgmt/Components/TagNavigator","i18n!DS/ENORouteTemplateMgmt/assets/nls/ENORouteTemplateMgmt"],function(e,t,i,o,n,l,a,r,s,d,u,c,m,p,g,f,h,w,T){"use strict";let v=[],S=function(e){a.createModel(e);let t=E();return l.getSecurityContextValue()?r.hideeErrorPlaceholder(t):(b(t),widget.notify.handler().addNotif({title:T.errorCreateRouteTemplateForRoleTitle,subtitle:T.errorCreateRouteTemplateForRoleSubTitle,message:T.errorCreateRouteTemplateForRoleMsg,level:"warning",sticky:!1})),t},R=function(e){b(document.querySelector(".widget-container"));var t="";try{t=JSON.parse(e)}catch(e){}t.error?widget.notify.handler().addNotif({level:"error",subtitle:t.error,sticky:!1}):widget.notify.handler().addNotif({level:"error",subtitle:T.infoRefreshError,sticky:!1})},M=function(){let e;return void 0!==widget.data.ids&&(e=widget.data.ids),widget.data.contentId&&(e=widget.data.contentId),widget.data.templateId&&(e=widget.data.templateId),e};function b(e){e||(e=new UWA.Element("div",{class:"widget-container"})).inject(widget.body),r.hideEmptyRouteTemplatePlaceholder(e),r.showeErrorPlaceholder(e)}let E=function(t){widget.setValue("HomePage","route_templates");var i=a.getModel();let o=e.build(i),l=n.build(i);n.contexualMenuCallback(),L();let s,d=e.getGridViewToolbar(),u=document.querySelector(".widget-container");s=u||new UWA.Element("div",{class:"widget-container"});let c=UWA.createElement("div",{id:"TemplatedataGridDivToolbar",class:"toolbar-container"}).inject(s);d.inject(c),o.inject(s),l.inject(s);var m=[];if(0==i.getChildren().length)r.showEmptyRouteTemplatePlaceholder(s,i);else{i.prepareUpdate();var p=0;i.getChildren().forEach(e=>{m.push(e.options.id),e._isHidden&&p++}),i.pushUpdate(),p==i.getChildren().length&&r.showEmptyRouteTemplatePlaceholder(s,i)}return widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:i}),r.registerListeners(),m.length>1e3&&widget.notify.handler().addNotif({message:T.taggerWarning,level:"warning",sticky:!1}),U(m),s},y=function(){let e=A(),t="";e.indexOf("Draft")>-1&&(t+="Inactive,"),e.indexOf("Released")>-1&&(t+="Active,"),""==t||(t=t.slice(0,-1)),widget.setValue("templateStateFilter",t)},O=function(){let e=A(),t="";e.indexOf("shared")>-1&&(t+="Assigned,"),e.indexOf("owned")>-1&&(t+="Owned,"),""==t||(t=t.slice(0,-1)),widget.setValue("templateOwnershipFilter",t)},C=function(t){let i=e.getDataGridInstance(),o=n.getTileViewInstance();t?(i.displayModalLoader(T.loadingTemplatesMessage),o.displayModalLoader(T.loadingTemplatesMessage)):(i.removeModalLoader(T.loadingTemplatesMessage),o.removeModalLoader(T.loadingTemplatesMessage))},D=function(e){var t=a.getModel(),i=w.getTaggerVariable(),o=w.getSearchWithInTypedValue();t.prepareUpdate(),d.optimizedForEach(t.getChildren(),function(t){null==o&&0==Object.keys(i.getCurrentFilter().allfilters).length?t.show():e.includes(t.options.id)?t.show():t.hide()});t.getChildren().forEach(e=>{e._isHidden&&0}),t.pushUpdate(),document.querySelector(".right-container")&&"0px"==document.querySelector(".right-container").getStyle("width")&&widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:t})},N=function(e){l.getLoginUser(),A();if(e)(C(!0),y(),O(),new Promise(function(e,t){s.fetchAllRouteTemplates().then(t=>{C(!1);var i=a.getModel();i.prepareUpdate(),i.removeRoots(),i.pushUpdate();let o=document.querySelector(".widget-container");null!=o&&(0==t.length?r.showEmptyRouteTemplatePlaceholder(o,i):r.hideEmptyRouteTemplatePlaceholder(o)),a.appendAllRows(t),B(),e(t)},e=>{_dataGridView.removeModalLoader()})})).then(e=>{let t=a.getModel();widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:t}),widget.routeMgmtMediator.publish("template-tag-data-updated")},e=>{R(e)});else{var t=a.getModel();let e=t.getSelectedNodes();t.prepareUpdate(),d.optimizedForEach(t.getChildren(),function(e){e.show()});var i=0;t.getChildren().forEach(e=>{e._isHidden&&i++}),t.pushUpdate(),e&&1==e.length&&e[0]._isHidden&&k(),(0==e.length||document.querySelector(".right-container")&&"0px"==document.querySelector(".right-container").getStyle("width"))&&widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:t});let o=document.querySelector(".widget-container");null!=o&&(t.getChildren().length==i?r.showEmptyRouteTemplatePlaceholder(o,t):r.hideEmptyRouteTemplatePlaceholder(o))}h.refreshRightPanel("Route Template",a)},F=function(e,t){var i=[];w.getSearchResult(e,t).then(t=>{if(t.results)for(var o=0;o<t.results.length;o++)i.push(t.results[o].attributes[0].value);D(i),t.infos&&t.infos.nmatches>1e3&&w.getSearchResult(e,i)})},A=function(){var e=widget.getValue("templatefilters");return M()?(widget.setValue("templatefilters",["owned","shared","Draft","Released"]),["owned","shared","Draft","Released"]):null==e?(widget.setValue("templatefilters",["owned","Draft","Released"]),["owned","Draft","Released"]):e},U=function(e){var t=w.setTaggerProxy("Template");t.addEvent("onFilterChange",function(e){var t=P(),i=w.getSearchWithInTypedValue(),o=w.getTaggerVariable().getCurrentFilter();t.length>1e3&&null==i&&(t=t.slice(0,1e3)),F(o.allfilters,t)});var i=t.getCurrentFilter().allfilters;if(0==e.length)w.setTagsForSummaryPage([]);else{e.length>1e3&&(e=e.slice(0,1e3));var o=w.getSearchWithInTypedValue(),n=[];w.getSearchResult(i,e).then(e=>{if(e.results)for(var i=0;i<e.results.length;i++)n.push(e.results[i].attributes[0].value);(null!=o||Object.keys(t.getCurrentFilter().allfilters).length>0)&&D(n)})}},k=function(){widget.routeMgmtMediator.publish("template-back-to-summary"),widget.routeMgmtMediator.publish("route-widgetTitle-count-update",{model:a.getModel()}),widget.setValue("openedTemplateId",void 0)},I=function(e,t){t&&t.nodeModel&&t.nodeModel.options.grid?2==e.multipleHitCount?(t.nodeModel.select(!0),_(t.nodeModel.options.grid)):e.ctrlKey||e.shiftKey||h.refreshRightPanel("Route Template",a,t.nodeModel.options.grid):h.refreshRightPanel("Route Template",a)},x=function(e,t){t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount&&(t.nodeModel.select(!0),_(t.nodeModel.options.grid))},W=function(e,t){t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.button&&(require(["DS/ENORouteTemplateMgmt/Views/Menu/TemplateContextualMenu"],function(i){i.templateGridRightClick(e,t.nodeModel.options.grid)}),h.refreshRightPanel("Route Template",a,t.nodeModel.options.grid))},V=function(e,t){h.refreshRightPanel("Route Template",a)},j=function(e,t){h.refreshRightPanel("Route Template",a)},P=function(){var e=a.getModel(),t=[];return e.getChildren().forEach(e=>{t.push(e.options.id)}),t},L=function(){let e=i.dataGridView();e.addEventListener(u.POINTERHIT,I),e.addEventListener("contextmenu",W),o.tileView().addEventListener(u.POINTERHIT,x),e.getTreeDocument().getXSO().onAdd(V),e.getTreeDocument().getXSO().onRemove(j),G()},G=function(){q();let t=widget.routeMgmtMediator.subscribe("template-summary-append-rows",function(t){let i=a.appendRows(t.data,t.action);e.getDataGridInstance().ensureNodeModelVisible(i,!0),i.select()});v.push(t),t=widget.routeMgmtMediator.subscribe("template-summary-show-message",function(e){widget.notify.handler().addNotif(e.message)}),v.push(t),t=widget.routeMgmtMediator.subscribe("template-summary-delete-rows",function(e){a.deleteRowModelByIndex(e),widget.routeMgmtMediator.publish("template-tag-data-updated")}),v.push(t),t=widget.routeMgmtMediator.subscribe("template-summary-delete-row-by-ids",function(e){e.model.length>0&&a.deleteRowModelByIds(e.model),h.refreshRightPanel("Route Template",a),widget.routeMgmtMediator.publish("template-tag-data-updated")}),v.push(t),t=widget.routeMgmtMediator.subscribe("template-summary-delete-selected-rows",function(){a.deleteRowModelSelected(),h.refreshRightPanel("Route Template",a),widget.routeMgmtMediator.publish("template-tag-data-updated")}),v.push(t),t=widget.routeMgmtMediator.subscribe("template-data-updated",function(e){a.updateRow(e),N()}),v.push(t),t=widget.routeMgmtMediator.subscribe("template-new-route-show-message",function(e){widget.notify.handler().addNotif(e.message)}),v.push(t),t=widget.routeMgmtMediator.subscribe("initialize-IDCard-on-dblClick",function(e){let t=a.getRowModelById(e.model.id);t&&t.select(!0),_(e)}),v.push(t),t=widget.routeMgmtMediator.subscribe("template-info-panel",function(e){g.render(e.container,e.templatedata)}),v.push(t),t=widget.routeMgmtMediator.subscribe("template-tag-data-updated",function(e){var t=P(),i=w.getTaggerVariable(),o=i.getCurrentFilter();t.length>1e3&&(t=t.slice(0,1e3)),t.length>0?F(o.allfilters,t):w.setTagsForSummaryPage([]),i.activate()}),v.push(t),t=widget.routeMgmtMediator.subscribe("template-deactivate-tag-data",function(e){var t=w.getTaggerVariable();t&&t.deactivate()}),v.push(t),t=widget.routeMgmtMediator.subscribe("template-search-within-data",function(e){var t=P(),i=w.getTaggerVariable().getCurrentFilter();F(i.allfilters,t)}),v.push(t),t=widget.routeMgmtMediator.subscribe("template-reset-search-within-data",function(e){var t=P(),i=w.getTaggerVariable().getCurrentFilter();t.length>1e3&&(t=t.slice(0,1e3)),F(i.allfilters,t)}),v.push(t)},q=function(){v.forEach((e,t)=>{widget.routeMgmtMediator.unsubscribe(e)}),v=[]},B=function(){let e=M();if(!e&&widget.getValue("openedTemplateId")&&(e=widget.getValue("openedTemplateId"),widget.setValue("openedTemplateId",void 0)),e){void 0!==widget.data.ids&&(widget.data.ids=void 0),widget.data.contentId&&(widget.data.contentId=void 0),widget.data.templateId&&(widget.data.templateId=void 0);let t=a.getRowModelById(e);t?(t.select(!0),_(t.options.grid)):k()}},_=function(e){let t=(new c).getExistingRightViewWrapper();t.innerHTML="";let i=new m(t),o={};o=e.model?e:{model:e},i.init(o),p.collapseIcon(),widget.routeMgmtMediator.publish("route-template-DataGrid-on-dblclick",o)};return{build:()=>(function(){let e=M();return e?new Promise(function(t,i){s.fetchRouteTemplateById(e).then(e=>{let i=S(e);t(i)},e=>{R(e)})}):(y(),O(),new Promise(function(e,t){s.fetchAllRouteTemplates().then(t=>{a.destroy();let i=S(t);e(i)},e=>{R(e)})}))})(),getFilterPreferences:()=>A(),updateFilterPreferences:(e,t)=>(function(e,t){var i=widget.getValue("templatefilters");const o=i.indexOf(e);t?o<=-1&&i.push(e):o>-1&&i.splice(o,1),widget.setValue("templatefilters",i)})(e,t),destroyAndRedrawwithFilters:()=>{N(!0)},destroy:()=>{a.destroy(),e.destroy(),n.destroy(),q()},backToTemplateSummary:()=>k(),getModel:()=>getSummaryModel(),openSelected:()=>B(),activateInfoIcon:()=>{h.activateInfoIcon(e)},inActivateInfoIcon:()=>{h.inActivateInfoIcon(e)}}}),define("DS/ENORouteTemplateMgmt/Actions/Toolbar/TemplateSummaryToolbarActions",["DS/ENORouteTemplateMgmt/Views/Grid/TemplateSummaryDataGridView","DS/ENORouteTemplateMgmt/Views/TemplateSummaryView","DS/ENORouteTemplateMgmt/Model/RouteTemplateModel"],function(e,t,i){"use strict";var o=Object.create(null);o.currentView="Grid",o.previousView="Grid";var n=function(i,o){var n=e.getGridViewToolbar().getNodeModelByID("filter"),l=!0;if("owner"==i.type)"owned"==i.filter?"selected"==n.options.grid.data.menu[0].state?(n.options.grid.data.menu[0].state="unselected",l=!1):n.options.grid.data.menu[0].state="selected":"shared"==i.filter&&("selected"==n.options.grid.data.menu[1].state?(n.options.grid.data.menu[1].state="unselected",l=!1):n.options.grid.data.menu[1].state="selected"),t.updateFilterPreferences(i.filter,l),t.destroyAndRedrawwithFilters(),n&&"list-ok"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({label:"list-ok"});else if("state"==i.type){n=e.getGridViewToolbar().getNodeModelByID("filter"),l=!0;"Released"==i.filter?("selected"==n.options.grid.data.menu[4].state?(n.options.grid.data.menu[4].state="unselected",l=!1):n.options.grid.data.menu[4].state="selected",i.filter="Released"):"Draft"==i.filter&&("selected"==n.options.grid.data.menu[3].state?(n.options.grid.data.menu[3].state="unselected",l=!1):n.options.grid.data.menu[3].state="selected",i.filter="Draft"),t.updateFilterPreferences(i.filter,l),t.destroyAndRedrawwithFilters(),n&&"list-delete"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({label:"list-delete"})}};return{changeOwnerFilter:e=>(function(e){n(e)})(e),changeStateFilter:e=>(function(e){n(e)})(e),openPropertiesView:e=>(function(e){console.log(e);let t=i.getSelectedRowsModel();if(1==t.data.length){let e=t.data[0].options.grid;t.model=e}widget.getValue("propWidgetOpen")?widget.routeMgmtMediator.publish("route-info-close-click",{info:"Route Template"}):widget.routeMgmtMediator.publish("route-header-info-click",{model:t.model,info:"Route Template",openedFrom:"toolbar"})})(e)}});