define("DS/ENOChgOSLCProvider/scripts/ChangeOSLCUtility",["DS/WAFData/WAFData","DS/WidgetServices/WidgetServices","DS/UIKIT/Alert"],function(e,t,n){"use strict";var a={error:function(e){this.message(e,"error")},success:function(e){this.message(e,"success")},warn:function(e){this.message(e,"warning")},info:function(e){this.message(e,"primary")},message:function(e,t){null!=this.alertCA&&this.alertCA.hide();var a=!0;"error"==t&&(a=!1),this.alertCA=new n({closable:!0,visible:!0,autoHide:a,hideDelay:3500,className:"wp-alert"}).inject(document.body,"top"),this.alertCA.add({className:t,message:e})},createCO:function(e,t,n){a.makeWSCall("/resources/v1/modeler/oslc/cm/services/changeorder","POST","enovia","application/json",e,t,n)},createCR:function(e,t,n){a.makeWSCall("/resources/v1/modeler/oslc/cm/services/changerequest","POST","enovia","application/json",e,t,n)},createCA:function(e,t,n){a.makeWSCall("/resources/v1/modeler/oslc/cm/services/changeaction","POST","enovia","application/json",e,t,n)},getCADetails:function(e){return new Promise(function(t,n){var i="/resources/v1/modeler/oslc/cm/services/changeaction/"+e;a.makeWSCall(i,"GET","enovia","application/json","",function(e){t(e)},n,!1)})},getCODetails:function(e){return new Promise(function(t,n){var i="/resources/v1/modeler/oslc/cm/services/changeorder/"+e;a.makeWSCall(i,"GET","enovia","application/json","",function(e){t(e)},n,!1)})},getCRDetails:function(e){return new Promise(function(t,n){var i="/resources/v1/modeler/oslc/cm/services/changerequest/"+e;a.makeWSCall(i,"GET","enovia","application/json","",function(e){t(e)},n,!1)})},getPlatformUrls:function(){return new Promise(function(e,t){a.makeWSCall("/resources/v1/bps/oslc/cm/platform-urls","GET","enovia","application/json","",function(t){var n={};n.platformurls=t,e(n)},t,!0)})},makeWSCall:function(t,n,a,i,s,r,o){ChgOSLCWidget.url="../..";var l="../.."+t,c=(new Date).getTime();l=-1==l.indexOf("?")?l+"?tenant="+ChgOSLCWidget.tenant+"&timestamp="+c:l+"&tenant="+ChgOSLCWidget.tenant+"&timestamp="+c;var C=ChgOSLCWidget.securityContext;r=r||function(){},o=o||function(){};var d=widget.getValue("lang");widget.lang&&(d=widget.lang);var m={};m.method=n,m.timeout=ChgOSLCWidget.wsCallTimeout,m.type="json",ChgOSLCWidget.isNative?m.headers=C?{Accept:"application/json","Content-Type":i,SecurityContext:C,"Accept-Language":d}:{Accept:"application/json","Content-Type":i,"Accept-Language":d}:(a&&(m.auth={passport_target:a}),m.proxy=ChgOSLCWidget.proxy,m.headers=C?{Accept:"application/json","Content-Type":i,SecurityContext:C,"Accept-Language":d}:{Accept:"application/json","Content-Type":i,"Accept-Language":d}),s&&(m.data=s),m.onComplete=function(e){console.log("Success calling url: "+l),console.log("Success data: "+JSON.stringify(e)),r(e)},m.onFailure=function(e,t){console.log("Error in calling url: "+l),console.log("Additional Details:: httpMethod: "+n+" authentication: "+a+" securityContext: "+C+" ContentType: "+i),console.log("Error Detail: "+e),console.log("Error Data: "+JSON.stringify(t)),o(e,t)},m.onTimeout=function(){console.log("Timedout for url: "+l)},e.authenticatedRequest(l,m)}};return a}),define("DS/ENOChgOSLCProvider/scripts/ChangeObjectProperties",["UWA/Core","DS/ENOChgOSLCProvider/scripts/ChangeOSLCUtility","DS/WidgetServices/securityContextServices/SecurityContextServices","UWA/Class/Model","UWA/Date","DS/UIKIT/Scroller","css!DS/ENOChgOSLCProvider/ENOChgOSLCProvider","i18n!DS/ENOChgOSLCProvider/assets/nls/ChangeOSLCProvider","css!DS/UIKIT/UIKIT"],function(e,t,n,a,i,s,r,o,l){"use strict";var c={model:null,init:function(e){window.ChgOSLCWidget={tenant:e.tenant?e.tenant:"OnPremise",wsCallTimeout:6e4,isNative:!1,proxy:window.UWA.Data.proxies.passport?"passport":"ajax"};this.options=e,this.getParams(),this.model=new a({id:e.id});this.displayChangeProp(e)},displayChangeProp:function(e){this.MainContainer=UWA.Element("div",{class:"OSLC_CHGProperties_MainContainer"});var n=this,a=n.model.get("id");switch(this._initscroller(),n.options.Entity){case"ChangeAction":this.ChangeData=t.getCADetails(a).then(function(e){n.UpdateUIForAttributes(e)});break;case"ChangeRequest":this.ChangeData=t.getCRDetails(a).then(function(e){n.UpdateUIForAttributes(e)});break;case"ChangeOrder":this.ChangeData=t.getCODetails(a).then(function(e){n.UpdateUIForAttributes(e)})}this.MainContainer.inject(document.body)},CreateElements:function(e){var t=e[0]?e[0]:"",n=e[1]?e[1]:"",a=UWA.Element("div",{class:"AttOSCLCHGContainer"}),i=UWA.Element("div",{class:"CHG_Attribute_Name",html:{text:t}}),s=UWA.Element("div",{class:"CHG_Attribute_Value",html:{text:n}});return a.addContent(i),a.addContent(s),a},CreateElementFromObj:function(e){for(var t=UWA.Element("div",{class:"AttOSCLCHGContainer1"}),n=Object.keys(e),a=Object.values(e),i=0;i<n.length;i++){var s=Object.values(a[i]);t.addContent(this.CreateElements(s))}return t},_initscroller:function(){if(this.scrollerContainer=document.getElementById("AttOSCLCHGContainer-scroll"),this.scrollerContainer||(this.scrollerContainer=UWA.createElement("div",{id:"AttOSCLCHGContainer-scroll",styles:{height:"90%",display:"flex","flex-direction":"column"}})),this.scrollerContainer.empty(),"large"==this.options.preview){var e=this.AttOSCLCHGBasic=UWA.Element("div",{class:"AttOSCLCHGBasic",styles:{}}),t=this.AttOSCLCHGDetails=UWA.Element("div",{class:"AttOSCLCHGDetails",styles:{}}),n=this.AttOSCLCHGTeam=UWA.Element("div",{class:"AttOSCLCHGTeam",styles:{}});this.scrollerContainer.addContent(e),this.scrollerContainer.addContent(t),this.scrollerContainer.addContent(n)}else{var a=this.AttOSCLCHGShortPreview=UWA.Element("div",{class:"AttOSCLCHGShortPreview",styles:{height:"90%"}});this.scrollerContainer.addContent(a)}},CreateBasicElements:function(e){var t=UWA.Element("div",{class:"AttOSCLCHGHeader",html:{text:o.ECM_CA_Header_Basic}});if(this.AttOSCLCHGBasic.addContent(t),"ChangeAction"==this.options.Entity)var n={AttName:{name:o.ECM_CA_Name,value:this.model.get("name")},AttTitle:{name:o.ECM_CA_Title,value:this.model.get("synopsis")},AttType:{name:o.ECM_CA_Type,value:this.model.get("type")},AttPolicy:{name:o.ECM_CA_Policy,value:this.model.get("policy")},AttDescription:{name:o.ECM_CA_Description,value:this.model.get("description")},AttState:{name:o.ECM_CA_State,value:this.model.get("currentDisplay")},AttOwner:{name:o.ECM_CA_Team_Owner,value:this.model.get("owner")}};else if("ChangeRequest"==this.options.Entity)n={AttName:{name:o.ECM_CA_Name,value:this.model.get("name")},AttDescription:{name:o.ECM_CA_Description,value:this.model.get("description")},AttType:{name:o.ECM_CA_Type,value:this.model.get("type")},AttInitiator:{name:o.ECM_CA_Intiator,value:this.model.get("originator")},AttOwner:{name:o.ECM_CA_Team_Owner,value:this.model.get("owner")},AttState:{name:o.ECM_CA_State,value:this.model.get("currentDisplay")},AttPolicy:{name:o.ECM_CA_Policy,value:this.model.get("policy")},AttCoOrdinator:{name:o.ECM_CA_Change_Coordinator,value:this.model.get("coordinator")}};else if("ChangeOrder"==this.options.Entity)n={AttName:{name:o.ECM_CA_Name,value:this.model.get("name")},AttDescription:{name:o.ECM_CA_Description,value:this.model.get("description")},AttType:{name:o.ECM_CA_Type,value:this.model.get("type")},AttInitiator:{name:o.ECM_CA_Intiator,value:this.model.get("originator")},AttOwner:{name:o.ECM_CA_Team_Owner,value:this.model.get("owner")},AttState:{name:o.ECM_CA_State,value:this.model.get("currentDisplay")},AttPolicy:{name:o.ECM_CA_Policy,value:this.model.get("policy")}};var a=c.CreateElementFromObj(n);this.AttOSCLCHGBasic.addContent(a)},CreateDetailsElements:function(e){var t=UWA.Element("div",{class:"AttOSCLCHGHeader",html:{text:o.ECM_CA_Header_Details}});switch(this.AttOSCLCHGDetails.addContent(t),this.options.Entity){case"ChangeAction":var n={AttResp:{name:o.ECM_CA_Responsible_Organization,value:this.model.get("organization")},AttCO:{name:o.ECM_CA_Governing_CO,value:this.model.get("changeOrderName")},AttSev:{name:o.ECM_CA_Severity,value:this.model.get("severity")},AttCat:{name:o.ECM_CA_CategoryofChange,value:this.model.get("categoryofChange")}};break;case"ChangeRequest":n={AttResp:{name:o.ECM_CA_Responsible_Organization,value:this.model.get("organization")},Attdeco:{name:o.ECM_CA_CHG_DECOMPOSITION,value:this.model.get("decomposition")},AttCat:{name:o.ECM_CA_CategoryofChange,value:this.model.get("categoryofChange")},AttSev:{name:o.ECM_CA_Severity,value:this.model.get("severity")},Attreason:{name:o.ECM_CA_ReasonForChange,value:this.model.get("reasonforchange")},Attreport:{name:o.ECM_CA_ReportedAgainst,value:this.model.get("reportedAgainst")}};break;case"ChangeOrder":n={AttResp:{name:o.ECM_CA_Responsible_Organization,value:this.model.get("organization")},Attreport:{name:o.ECM_CA_ReportedAgainst,value:this.model.get("reportedAgainst")},AttParent:{name:o.ECM_CA_CHG_Parent_CO,value:this.model.get("parentCO")},Attreason:{name:o.ECM_CA_CHG_Related_CR,value:this.model.get("relatedCR")},AttCat:{name:o.ECM_CA_CategoryofChange,value:this.model.get("categoryofChange")},AttSev:{name:o.ECM_CA_Severity,value:this.model.get("severity")}}}var a=c.CreateElementFromObj(n);this.AttOSCLCHGDetails.addContent(a)},CreateTeamElements:function(e){var t=UWA.Element("div",{class:"AttOSCLCHGHeader",html:{text:o.ECM_CA_Header_Team}});this.AttOSCLCHGTeam.addContent(t);var n=this.model.get("people");if(n){switch(this.options.Entity){case"ChangeAction":var a={AttResp:{name:o.ECM_CA_Assignees,value:n.assignee},AttCO:{name:o.ECM_CA_Reviewers,value:n.reviewer},AttSev:{name:o.ECM_CA_Followers,value:n.follower}};break;case"ChangeRequest":a={};break;case"ChangeOrder":a={AttSev:{name:o.ECM_CA_Approvers,value:n.approver}}}var i=c.CreateElementFromObj(a);this.AttOSCLCHGTeam.addContent(i)}},CreateSmallPreviewElements:function(e){var t=UWA.Element("div",{class:"AttOSCLCHGHeader",html:{text:o.ECM_CA_Header_Preview}});this.AttOSCLCHGShortPreview.addContent(t);var n={AttName:{name:o.ECM_CA_Name,value:this.model.get("name")},AttSev:{name:o.ECM_CA_Severity,value:this.model.get("severity")},AttDescription:{name:o.ECM_CA_Description,value:this.model.get("description")},AttOwner:{name:o.ECM_CA_Team_Owner,value:this.model.get("owner")},AttState:{name:o.ECM_CA_State,value:this.model.get("currentDisplay")},AttDue:{name:o.ECM_CA_DueDate,value:this.model.get("due")}},a=c.CreateElementFromObj(n);this.AttOSCLCHGShortPreview.addContent(a)},UpdateUIForAttributes:function(e){var t=this,n=null;switch(t.options.Entity){case"ChangeAction":n=e.changeaction;break;case"ChangeRequest":n=e.changerequest;break;case"ChangeOrder":n=e.changeorder}t.model.set("id",n.pid);var a=n.attributes;UWA.is(a)&&a.forEach(function(e){"Category of Change"===e.name?t.model.set("categoryofChange",e.value):"Estimated Completion Date"===e.name?(t.model.set("due",UWA.is(e.value)&&""!==e.value?i.strftime(new Date(e.value),"%Y-%m-%d"):""),""===t.model.get("due")&&t.model.set("due",o.ECM_CA_DUEDATE_UNASSIGNED)):"Severity"===e.name?(t.model.set("severity","",{silent:!0}),t.model.set("severity",e.value)):"Synopsis"===e.name?t.model.set("synopsis",e.value):"project"===e.name&&t.model.set("project_space",e.value)});var s={};UWA.is(n.people)&&(s.assignee=n.people.assignees,s.follower=n.people.followers,s.reviewer=n.people.reviewers,s.approver=n.people.approvers),t.model.set("people",s),t.model.set("owner",n.owner),t.model.set("originator",n.originator),t.model.set("coordinator",n.changeCoordinator),t.model.set("organization",n.organization),t.model.set("current",n.current),t.model.set("currentDisplay",o.get("ECM_CA_State_"+t.model.get("current"))),t.model.set("name",n.name),t.model.set("description",n.description),t.model.set("policy",n.policy),t.model.set("type",n.type),UWA.is(n.reportedAgainst)&&t.model.set("reportedAgainst",n.reportedAgainst.name),UWA.is(n.relatedCR)&&t.model.set("relatedCR",n.relatedCR.name),UWA.is(n.parentCO)&&t.model.set("parentCO",n.parentCO.name),UWA.is(n.governingCO)&&UWA.is(n.governingCO.pid)&&(t.model.set("changeOrderName",n.governingCO.name),t.model.set("changeOrderId",n.governingCO.pid)),"large"==t.options.preview?(c.CreateBasicElements(),c.CreateDetailsElements(),"ChangeRequest"!=t.options.Entity&&c.CreateTeamElements()):c.CreateSmallPreviewElements(),t.scrollerContainer.inject(t.MainContainer)},getParams:function(){var e=document.createElement("a");e.href=location.href;for(var t=e.search.substring(1).split("&"),n=0;n<t.length;n++){var a=t[n].split("=");this.options[a[0]]=decodeURIComponent(a[1])}return{}}};return c}),define("DS/ENOChgOSLCProvider/scripts/ChangeReportedAgainst",["UWA/Core","DS/UIKIT/Input","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleCmd/OSLCConsumerCmd","DS/ENOChgOSLCProvider/scripts/ChangeOSLCUtility","i18n!DS/ENOChgOSLCProvider/assets/nls/ChangeOSLCProvider","css!DS/ENOChgOSLCProvider/ENOChgOSLCProvider"],function(e,t,n,a,i,s){"use strict";return t.extend({defaultOptions:{placeholder:s.ECM_CA_ReportedAgainstPlaceHolder,fileBannedChars:["'","#","$","@","%"],multiple:!1},routeTemplate:{},socket:null,init:function(t){e.merge(this.defaultOptions,t),this._parent(t)},buildInput:function(){var t=e.createElement("div",{class:"eno-rt-search",html:this.options.text});this.mLabelElement=e.createElement("label",{html:s.ECM_CA_ReportedAgainst}).inject(t),this.mInputElement=e.createElement("div",{class:"eno-rt-input input-group"}).inject(t),this.mTextElement=e.createElement("input",{class:"form-control",name:"txtIssueAffectedItem",placeholder:this.options.placeholder,disabled:!0}).inject(this.mInputElement),this.mTextElementPID=e.createElement("input",{type:"hidden",name:"txtActualAffectedItem"}).inject(this.mInputElement);return this.nativeSearchButton=e.createElement("span",{class:"input-group-addon",html:s.ECM_CA_Native,styles:{cursor:"pointer"},events:{click:this.onInputClick.bind(this)}}).inject(this.mInputElement),this.extSearchButton=e.createElement("span",{class:"input-group-addon",html:s.ECM_CA_External,styles:{cursor:"pointer"},events:{click:this.onExtInputClick.bind(this)}}).inject(this.mInputElement),t.addEventListener("dragover",this.onInputDragOver.bind(this),!1),t.addEventListener("dragleave",this.onInputDragLeave.bind(this),!1),t.addEventListener("drop",this.onInputDrop.bind(this),!1),t},clear:function(){this.elements.container.removeClassName("error"),this.elements.container.setText(this.options.placeholder)},selected_Objects_search:function(e){},onInputClick:function(){var e=this,t=e.options,n="../../webapps/ENOOSLCIssueProvider/ENODataGrid.html?showTitle="+t.showTitle+"&showDesc="+t.showDesc+"&relationships="+t.relationships+"&allowMultiSelect=N&cspid="+t.cspid,a=window.open(n,"_blank","toolbar=yes,scrollbars=no,resizable=yes,top=300,left=300,width=800,height=500");window.focus&&a.focus(),window.addEventListener("message",function(t){var n=t.data;n=n.replace("oslc-response:","").trim();var i=JSON.parse(n)["oslc:results"];if(i&&i.length>0){var s=new Array,r=new Array;for(var o in i)s.push(i[o]["oslc:label"]),r.push(i[o]["oslc:PID"]);e.mTextElement.value=s.join("|"),e.mTextElementPID.value=r.join("|")}a.close()},!1);var i=this.mTextElement.parentNode;i&&i.removeClassName("has-error")},onExtInputClick:function(){i.getPlatformUrls().then(function(e){require(["DS/ENOChgOSLCConsumer/scripts/ENOECMOSLCConsumer"],function(t){var n=new t;n.setupWithExternalSetting(e.platformurls),n.launchDelegatedUIWithExternalSetting(n.createReportedAgainstPostProcessCommon)})})},createChangePostProcessCommon:function(e){if(e&&e.objects&&e.objects.length>0){var t=document.getElementsByName("txtIssueAffectedItem")[0],n=document.getElementsByName("txtActualAffectedItem")[0],a="",i="",s=!0;if(t&&n){for(var r=e.objects,o=0;o<r.length;o++){var l=r[o].proxy;l&&l.id&&l.dataelements&&l.dataelements.name&&(s?(i=l.id,a=l.dataelements.name,s=!1):(i=i+"|"+l.id,a=a+"|"+l.dataelements.name))}t.value=a,n.value=i}}},onInputDragOver:function(e){},onInputDragLeave:function(e){},onInputDrop:function(e){},onInputChange:function(e){},getValue:function(){return this.mTextElement.value}})}),define("DS/ENOChgOSLCProvider/scripts/ChangeObjectCreate",["UWA/Core","UWA/Date","UWA/Element","DS/WAFData/WAFData","UWA/Class/View","DS/UIKIT/Alert","UWA/Widget","UWA/Drivers/Alone","DS/UIKIT/Form","DS/UIKIT/Input/Button","DS/UIKIT/Input/Date","DS/ENOChgOSLCProvider/scripts/ChangeReportedAgainst","DS/ENOChgOSLCProvider/scripts/ChangeOSLCUtility","DS/ENOFrameworkPlugins/jQuery","i18n!DS/ENOChgOSLCProvider/assets/nls/ChangeOSLCProvider","css!DS/ENOChgOSLCProvider/ENOChgOSLCProvider","css!DS/UIKIT/UIKIT.css"],function(e,t,n,a,i,s,r,o,l,c,C,d,m,u,h){"use strict";var p=new s({className:"csg-alert",closable:!0,renderTo:document.body,visible:!0,autoHide:!0,hideDelay:5e3,messageClassName:"error"}),g=i.extend({name:"createChange",tagName:"div",className:"create-change-view",init:function(e){var t=UWA.clone(e,!1);["container","template","tagName","domEvents"].forEach(function(e){delete t[e]}),g.options=e,window.widget=new r,window.ChgOSLCWidget={tenant:e.tenant?e.tenant:"OnPremise",wsCallTimeout:6e4,isNative:!1,proxy:window.UWA.Data.proxies.passport?"passport":"ajax",options:{Entity:e.Entity}},this._parent(t)},setup:function(){window.isIE=!1,this.container.addClassName(this.getClassNames("-container")),this._initAlert(),this._initForm(),this._initListenKeyDown(),this._detectBrowser(navigator.userAgent)},_detectBrowser:function(e){/(msie|trident)/i.test(e)&&(window.isIE=!0)},_initAlert:function(){},_initForm:function(){var e,t,n,a=this,i=(this.options,this.options.Entity),s=this.elements,r=a.getParameterByName("cspid"),o=new d({cspid:r,showTitle:"Y",showDesc:"N",type:"type_Requirement",relationships:"relationship_ReportedAgainstChange"}),C={type:"textarea",name:"txtChangeDescription",rows:3,required:!0,label:h.ECM_CA_Description,maxlength:"128",placeholder:h.ECM_CA_Description_PlaceHolder,events:{onChange:function(){if(""!==this.getValue().trim()){var e=this.elements.input.parentNode;e&&e.removeClassName("has-error")}}}},m={type:"text",name:"txtAbstract",required:!0,label:h.ECM_CA_Abstract,maxlength:"128",placeholder:h.ECM_CA_Abstract_PlaceHolder,events:{onChange:function(){if(""!==this.getValue().trim()){var e=this.elements.input.parentNode;e&&e.removeClassName("has-error")}}}},u={type:"html",name:"ReportedAgainstElem",html:o},p={type:"select",name:"txtPolicy",label:h.ECM_CA_Policy,nativeSelect:!1,required:!0,placeholder:!1,options:[{value:"policy_FasttrackChange",label:h.ECM_CA_Policy_FastTrack,selected:!0},{value:"policy_FormalChange",label:h.ECM_CA_Policy_FormalChange}]},g={type:"select",name:"txtSeverity",label:h.ECM_CA_Severity,nativeSelect:!1,placeholder:!1,options:[{value:"Low",label:h.ECM_CA_Severity_Low,selected:!0},{value:"Medium",label:h.ECM_CA_Severity_Medium},{value:"High",label:h.ECM_CA_Severity_High}]},v={type:"html",html:UWA.createElement("div",{id:"DueDateDiv",html:[{tag:"h5",html:h.ECM_CA_DueDate},{tag:"span",class:"due-date-span",html:this.createDueDateElem()},{tag:"input",type:"hidden",name:"DueDate_hidden",id:"DueDate_hidden",value:""}]}),name:"date-field"},A=[],E="";"ChangeAction"==i?(A.push(m),A.push(C),A.push(g),A.push(v),E=h.ECM_ChangeAction_Definition):"ChangeOrder"!=i&&"ChangeRequest"!=i||(A.push(C),A.push(u),A.push(g),"ChangeOrder"==i?(A.push(p),E=h.ECM_ChangeOrder_Definition):(A.push(v),E=h.ECM_ChangeRequest_Definition)),e=new l({fields:A,events:{onSubmit:function(){a.onCreate()},onInvalid:function(e){},onValid:function(){}}}),a._form=e;var _=UWA.createElement("div",{class:"header",html:E});t=new c({value:h.ECM_CA_Button_Done,className:"primary",events:{onClick:this.dispatchAsEventListener("onCreate")}}),n=new c({value:h.ECM_CA_Cancel,events:{onClick:this.dispatchAsEventListener("onCancel")}}),s.form=e,s.header=_,s.create=t,s.cancel=n},getCreateButton:function(){return this.elements.create},getCancelButton:function(){return this.elements.cancel},_initListenKeyDown:function(){this.onKeyDown=this.onKeyDown.bind(this),document.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(e){},submitEnabled:function(){return null===this.elements.create.elements.content.getAttribute("disabled")},onCancel:function(){window.parent.postMessage('oslc-response:{"oslc:results":[]}',"*")},render:function(){var e=this.elements,t=e.form,n=e.create,a=e.header,i=e.cancel;return this.container.setContent([a,t,{tag:"div",class:"footer",html:[n,i]}]),this},_validateInput:function(e){var t,n={txtChangeDescription:this.elements.form.getField("txtChangeDescription"),txtAbstract:this.elements.form.getField("txtAbstract"),txtPolicy:this.elements.form.getField("txtPolicy")};if("ChangeAction"==e&&(void 0===n.txtAbstract.value||""==n.txtAbstract.value.trim()))return p.add({message:h.ECM_OSLC_TitleEmptyFieldMessage}),(t=n.txtAbstract.parentNode)&&t.addClassName("has-error"),n.txtAbstract.focus(),!1;if(void 0===n.txtChangeDescription.value||""==n.txtChangeDescription.value.trim())return p.add({message:h.ECM_OSLC_DescriptionEmptyFieldMessage}),(t=n.txtChangeDescription.parentNode)&&t.addClassName("has-error"),n.txtChangeDescription.focus(),!1;if("ChangeOrder"==e&&(void 0===n.txtPolicy.value||""==n.txtPolicy.value.trim()))return p.add({message:h.ECM_OSLC_PolicyEmptyFieldMessage}),(t=n.txtPolicy.parentNode)&&t.addClassName("has-error"),n.txtPolicy.focus(),!1;return!0},onCreate:function(){var e=this.options.Entity;if(this._validateInput(e)){this.elements.create.setDisabled(),(window.isIE?navigator.userLanguage:navigator.language).replace("-","_");var t=this.getCreateEditData("create");switch(this.options.Entity){case"ChangeAction":m.createCA(JSON.stringify(t),this.onCompleteCallback,this.onFailureCallback);break;case"ChangeRequest":m.createCR(JSON.stringify(t),this.onCompleteCallback,this.onFailureCallback);break;case"ChangeOrder":m.createCO(JSON.stringify(t),this.onCompleteCallback,this.onFailureCallback)}}},onCompleteCallback:function(e){var t=null;switch(window.ChgOSLCWidget.options.Entity){case"ChangeAction":t=e.changeaction;break;case"ChangeRequest":t=e.changerequest;break;case"ChangeOrder":t=e.changeorder}var n=t.pid,a={"oslc:results":[{"oslc:label":t.name,"rdf:resource":t["rdf:resource"]+"/"+n}]};null!=a&&void 0!==a&&window.parent.postMessage("oslc-response:"+JSON.stringify(a),"*"),m.success(a)},onFailureCallback:function(e,t){},sendErrorResponse:function(e,t){var n={"oslc:statusCode":t,"oslc:message":e};window.parent.postMessage("oslc-response:"+JSON.stringify(n),"*")},onDestroy:function(){},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n&&n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):""},createDueDateElem:function(){return[{styles:{border:"1px solid #b4b6ba","border-radius":"5px",display:"flex","background-color":"#f4f5f6"},html:UWA.createElement("span",{class:"date-input-container",html:[new C({name:"DueDate",id:"DueDate",required:!1,min:new Date,value:"",placeholder:h.ECM_CA_Date_PlaceHolder,events:{onChange:this.dueDateOnChange}}),{tag:"span",class:"cancel-span",html:this.createCancelBtnSpan()},{tag:"span",class:"calendar-span",html:this.createCalenderSpan()}]})}]},dueDateOnChange:function(){var n=e.extendElement(document.body).getElement("#DueDate"),a=e.extendElement(document.body).getElement("#DueDate_hidden");if(n.value){var i="%m/%d/%Y";a.value=t.strftime(this.getDate(),i),i="%Y-%m-%d",n.value=t.strftime(this.getDate(),i)}else n.value="",a.value="";var s=u("#duedatecancel"),r=u("#calenderspan");s&&(s.css("display","block"),s.css("visibility","visible")),r&&r.css("display","none")},createCancelBtnSpan:function(){var e=UWA.createElement("span",{class:"clear-filter fonticon fonticon-cancel-circled",id:"duedatecancel"});return e.set({events:{click:function(e){var t=u("#DueDate"),n=u("#DueDate_Hidden");t&&t.val(""),n&&n.val("");var a=u("#duedatecancel"),i=u("#calenderspan");a&&a.css("display","none"),i&&i.css("display","block")}}}),[{html:e}]},createCalenderSpan:function(){var t=UWA.createElement("span",{class:"fonticon fonticon-calendar",id:"calenderspan"});return t.set({events:{click:function(t){e.extendElement(document.body).getElement("#DueDate").click()}}}),[{html:t}]},getCreateEditData:function(e){var t=this.elements.form.getField("txtChangeDescription").value,n=this.elements.form.getField("txtSeverity").value;if("ChangeAction"==this.options.Entity)var a=this.elements.form.getField("txtAbstract").value,i=this.elements.form.getField("DueDate_hidden").value;else if("ChangeRequest"==this.options.Entity||"ChangeOrder"==this.options.Entity){var s=this.elements.form.getField("txtIssueAffectedItem").value,r=this.elements.form.getField("txtActualAffectedItem").value;if("ChangeOrder"==this.options.Entity)var o=this.elements.form.getField("txtPolicy").value;else i=this.elements.form.getField("DueDate_hidden").value}var l="";switch(this.options.Entity){case"ChangeAction":l={version:"v0",changeaction:{name:"",revision:"-",type:"type_ChangeAction",description:t,attributes:[{name:"Synopsis",value:a},{name:"Estimated Completion Date",value:i},{name:"Severity",value:n}]}};break;case"ChangeRequest":l={version:"v0",changerequest:{name:"",revision:"-",type:"type_ChangeRequest",description:t,reportedAgainst:{name:s,pid:r},attributes:[{name:"Estimated Completion Date",value:i},{name:"Severity",value:n}]}};break;case"ChangeOrder":l={version:"v0",changeorder:{name:"",revision:"-",type:"type_ChangeOrder",description:t,policy:o,reportedAgainst:{name:s,pid:r},attributes:[{name:"Severity",value:n}]}}}return l}});return g});