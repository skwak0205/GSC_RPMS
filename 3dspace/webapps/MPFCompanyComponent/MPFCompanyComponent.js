define("DS/MPFCompanyComponent/CompanyPmpInformationComponent",["UWA/Class/View","DS/MPFView/FieldTextInput","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent"],function(e,t,n){"use strict";return e.extend({tagName:"form",setup:function(){var e=this.model;this.companyNameInput=new t({className:t.prototype.className+" mpf-oneline",required:!0,readOnly:!!e.getName(),model:e,fieldName:"name",fieldLabel:n.get("companyName")})},render:function(){return this.container.setContent([this.companyNameInput.render()]),this}})}),define("DS/MPFCompanyComponent/CompanyFormShell",["UWA/Core","UWA/Class/View"],function(e,t){"use strict";return t.extend({tagName:"form",className:"mpf-form",setup:function(e){e||(e={}),this.inputComponents=e.inputComponents||[],this.isReadOnly=this.setReadOnly(e.isReadOnly)},render:function(){var e;return e=this.inputComponents.map(function(e){return e.render()}),this.container.setContent(e),this},setReadOnly:function(e){var t=this;this.isReadOnly=!0===e,this.inputComponents.forEach(function(e){"function"==typeof e.setReadOnly&&e.setReadOnly(t.isReadOnly)})}})}),define("DS/MPFCompanyComponent/CompanyNameForm",["UWA/Core","UWA/Promise","DS/MPFView/MPFView","DS/UIKIT/Input/Text","DS/MPFView/FieldTextInput","DS/MPFError/ValidationError","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent","css!DS/MPFUI/MPFUI"],function(e,t,n,i,o,a,s){"use strict";return n.extend({tagName:"form",className:"mpf-form",domEvents:{change:"onChange"},setup:function(e){this._parent(e),this.required=!0===e.required,this.readOnly=!0===e.readOnly,this.dynamicValidation=!0===e.dynamicValidation,this.maxlength=e.maxlength,this.input=new o({model:this.model,fieldName:"name",fieldLabel:s.get("companyName"),required:this.required,readOnly:this.readOnly,dynamicValidation:this.dynamicValidation,maxlength:this.maxlength}),this.inputs=[this.input]},onChange:function(e){e.target.required&&this._validateInput(e.target)},render:function(){return this.container.setContent(this.input.render()),this},validate:function(){var e=this,t=!0;return this.container.addClassName("validated"),this.container.getElements(".mpf-entry input").forEach(function(n){t=t&&e._validateInput(n)},{}),t},save:function(){var e=t.deferred();return this.model.isNew()?!1===this.model.save("name",this.inputs[0].getValue(),{onComplete:function(){e.resolve()},onFailure:function(){e.reject("Unable to save company")}})&&e.reject("Unable to save company"):e.resolve(),e.promise},focus:function(){this.input.focus()},_validateInput:function(t){var n,i=t.getParent(),o=this.model.validate(this.model.omit());return t.removeClassName("mpf-invalidField"),null!==(n=i.getElement("p"))&&i.removeChild(n),o&&o.filter(function(n){"name"===n.field&&(t.addClassName("mpf-invalidField"),e.createElement("p",{class:"mpf-error",text:n.message}).inject(i))}),!(e.is(o,"array")&&o.length>0)},setReadOnly:function(e){this.readOnly=!0===e,this.input.setDisabled(this.readOnly)},destroy:function(){this.model=null,this._parent(),this.container=null}})}),define("DS/MPFCompanyComponent/CompanyIsDueToOnlineTaxInput",["UWA/Core","DS/MPFView/FieldToggleInput","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent"],function(e,t,n){"use strict";return t.extend({setup:function(e){return e.fieldName="isSellerDueToOnlineTax",e.fieldLabel=n.get("isDueToOnlineTax"),this._parent(e)}})}),define("DS/MPFCompanyComponent/CompanyMenuComponent",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/UWPClientCode/Navigation","DS/MPFView/MPFView","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent","css!DS/MPFUI/MPFUI"],function(e,t,n,i,o){"use strict";return i.extend({init:function(n){var i=this;this.topic=n.topic,this.stepStatus={addresses:!1,information:!1,members:!1},this._parent(n),this.menuItems=[{name:"information",label:o.get("information")},{name:"addresses",label:o.get("addresses")},{name:"members",label:o.get("members")}],t.subscribe(this.topic,function(n){switch(n.event){case"moduleReady":t.publish(i.topic,{event:"menuReady",id:"menu"});break;case"saveComplete":var o=i.nextComponent;if(n.next){var a=i._findMenuItem(n.id);o=i.menuItems[a+1].name}i._navigateComponent({id:i.currentComponent,next:o});case"updateMenu":a=i._findMenuItem(n.id);i.stepStatus[n.id]=n.complete,"information"===n.id&&e.is(n.newModel)&&(i.firstViewUser=!0===n.newModel),i.firstViewUser?n.id===i.currentComponent?(a>0&&i._completeIcon(i.menuItems[a-1].icon),i._activeDiv(i.menuItems[a].div)):i._inactiveDiv(i.menuItems[a].div):n.complete||n.status&&"complete"===n.status?(i._completeIcon(i.menuItems[a].icon),t.publish(i.topic,{event:"loadWidgets",id:"menu"})):n.id===i.currentComponent?i._activeDiv(i.menuItems[a].div):i._inactiveDiv(i.menuItems[a].div);break;case"widgetBack":a=i._findMenuItem(n.id);n.next=i.menuItems[a-1].name,i._navigateComponent(n);break;case"widgetNext":(a=i._findMenuItem(n.id))===i.menuItems.length-1?window.location.pathname="/welcome":(n.next=i.menuItems[a+1].name,i._navigateComponent(n))}}),t.publish(i.topic,{event:"menuReady",id:"menu"})},load:function(){var t=this._createMenuItems(),n=e.createElement("div",{class:"mpf-companyMenuContainer",html:t});return this.container.setContent(n),this},destroy:function(){this.model=null,this._parent(),this.container=null,this.menuItems=null,this.stepStatus=null},_createMenuItems:function(){this.currentComponent="information";for(var n=[],i=this,o=0;o<this.menuItems.length;o++)-1!==window.location.pathname.indexOf(this.menuItems[o].name)&&(this.currentComponent=this.menuItems[o].name);for(var a=0;a<this.menuItems.length;a++){var s=this.currentComponent===this.menuItems[a].name?"mpf-companyActiveMenuIcon":"mpf-companyInactiveMenuIcon",m=this.currentComponent===this.menuItems[a].name?"mpf-companyActiveMenuItemDiv":"mpf-companyMenuItemDiv";this.menuItems[a].icon=e.createElement("span",{class:s+" fonticon fonticon-record unchecked"}),this.menuItems[a].span=e.createElement("span",{text:this.menuItems[a].label}),this.menuItems[a].div=e.createElement("div",{class:m+" "+this.menuItems[a].name,html:[this.menuItems[a].icon,this.menuItems[a].span],events:{click:function(e){var n=e.currentTarget||e.target;"div"!==n.tagName.toLowerCase()&&(n=n.getParent());for(var o=0;o<i.menuItems.length;o++)if(n.hasClassName(i.menuItems[o].name)){i.nextComponent=i.menuItems[o].name;break}"information"===i.currentComponent?t.publish(i.topic,{event:"save",id:"menu",target:"information"}):i.currentComponent!==i.nextComponent&&i._navigateComponent({id:i.currentComponent,next:i.nextComponent})}}}),n.push(this.menuItems[a].div)}return n},_navigateComponent:function(e){var i,o=this._findMenuItem(e.id),a=this._findMenuItem(e.next);this.menuItems[o].icon.hasClassName("mpf-companyActiveMenuIcon")&&this._inactiveIcon(this.menuItems[o].icon),this._inactiveDiv(this.menuItems[o].div),i=-1===e.next.indexOf("my-company-test")?"my-company-test/"+e.next:e.next,i+=window.location.search,n.routeTo(i),t.publish(this.topic,{event:"stepSet",id:e.next,step:e.next}),this.currentComponent=e.next,this._activeDiv(this.menuItems[a].div),this._activeIcon(this.menuItems[a].icon)},_activeDiv:function(e){e.removeClassName("mpf-companyMenuItemDiv"),e.removeClassName("mpf-companyMenuHoverLabelDiv"),e.addClassName("mpf-companyActiveMenuItemDiv")},_inactiveDiv:function(e){e.removeClassName("mpf-companyActiveMenuItemDiv"),e.addClassName("mpf-companyMenuItemDiv")},_completeIcon:function(e){e.removeClassName("fonticon-record"),e.addClassName("fonticon-check"),e.removeClassName("mpf-companyActiveMenuIcon"),e.removeClassName("mpf-companyInactiveMenuIcon"),e.addClassName("mpf-companyCompletedMenuIcon")},_activeIcon:function(e){e.hasClassName("mpf-companyCompletedMenuIcon")||(e.removeClassName("mpf-companyInactiveMenuIcon"),e.addClassName("mpf-companyActiveMenuIcon"))},_inactiveIcon:function(e){e.removeClassName("mpf-companyActiveMenuIcon"),e.removeClassName("mpf-companyCompletedMenuIcon"),e.addClassName("mpf-companyInactiveMenuIcon"),e.removeClassName("fonticon-check"),e.hasClassName("fonticon-record")||e.addClassName("fonticon-record")},_findMenuItem:function(e){for(var t,n=0;n<this.menuItems.length;n++)if(this.menuItems[n].name===e){t=n;break}return t}})}),define("DS/MPFCompanyComponent/CompanyNameLabel",["UWA/Core","UWA/Class/View"],function(e,t){"use strict";return t.extend({setup:function(e){this.listenTo(this.model,"onChange:name",this.render)},render:function(){var t;return t=e.createElement("p",{class:"mpf-label",text:this.model.getName()}),this.container.setContent(t),this}})}),define("DS/MPFCompanyComponent/CompanyHeaderComponent",["UWA/Core","UWA/Class/View","DS/PlatformAPI/PlatformAPI","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent","css!DS/MPFCompanyComponent/MPFCompanyComponent"],function(e,t,n,i){"use strict";return t.extend({setup:function(t){t||(t={}),this.topic=t.topic,this._parent(t),this.titleSpan=e.createElement("span",{text:i.get("myCompanyHeader")}),this.dividerSpan=e.createElement("span",{text:" | "}),this.stepSpan=e.createElement("span",{class:"mpf-companyHeaderStepSpan"}),n.subscribe(this.topic,this._onReceivedMessage.bind(this))},render:function(){var t;return t=e.createElement("div",{class:"mpf-companyHeaderContainer",html:[this.titleSpan,this.dividerSpan,this.stepSpan]}),this.container.setContent(t),this},_onReceivedMessage:function(e){"titleSet"===e.event&&e.title&&e.id?(this.stepSpan.setContent(i.get(e.id)),this.titleSpan.setContent(i.get(e.title))):"stepSet"===e.event&&this.stepSpan.setContent(i.get(e.step))},load:function(){return this.render()},destroy:function(){this.model=null,this._parent(),this.container=null,this.stepSpan=null,this.titleSpan=null,this.topic=null}})}),define("DS/MPFCompanyComponent/CompanyTaxRegistrationIdInput",["UWA/Core","DS/MPFView/FieldTextInputV2","DS/MPFCompanyModel/CompanyModel","DS/MPFView/ValidationResultBuilder","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent","css!DS/MPFUI/MPFUI"],function(e,t,n,i,o){"use strict";return t.extend({className:"mpf-entry-v2 mpf-tax-registration-id",setup:function(t){t||(t={}),t.fieldName=n.Fields.TAX_REGISTRATION_ID,t.fieldLabel=t.fieldLabel||o.get(n.Fields.TAX_REGISTRATION_ID),t.dynamicValidation=!e.is(t.dynamicValidation,"boolean")||t.dynamicValidation,this._parent(t)},setFieldLabel:function(t){this.fieldLabel=e.is(t)?t:o.get(n.Fields.TAX_REGISTRATION_ID),this.entry=this._createEntry(this.fieldLabel)},setRequired:function(e){this.required=!0===e,this.entry=this._createEntry(this.fieldLabel)},getTaxRegistrationId:function(){return this.getValue()},destroy:function(){this.model=null,this._parent(),this.container=null}})}),define("DS/MPFCompanyComponent/CompanyNameInput",["UWA/Core","DS/MPFView/FieldTextInputV2","DS/MPFServices/ObjectService","DS/MPFCompanyModel/CompanyModel","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent","css!DS/MPFUI/MPFUI"],function(e,t,n,i,o){"use strict";return t.extend({className:"mpf-company-name-input mpf-entry-v2",setup:function(e){e||(e={}),n.requiredOfPrototype(this.model,i,"this.model must be a CompanyModel"),e.fieldName=i.Fields.NAME,e.fieldLabel=o.get("companyName"),this._parent(e)},focus:function(){this.input.focus()}})}),define("DS/MPFCompanyComponent/CompanyCeoInputs",["UWA/Core","UWA/Class/View","DS/MPFView/FieldTextInputV2","DS/MPFServices/ObjectService","DS/MPFCompanyModel/CompanyModel","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent","css!DS/MPFUI/MPFUI"],function(e,t,n,i,o,a){"use strict";return t.extend({className:"mpf-ceo-entries",setup:function(e){e||(e={}),i.requiredOfPrototype(this.model,o,"this.model must be a CompanyModel"),this.required=!0===e.required,this.readOnly=!0===e.readOnly,this.dynamicValidation=!0===e.dynamicValidation,this.maxlength=e.maxlength||50,this.ceoFirstName=new n({model:this.model,fieldName:o.Fields.CEO_FIRST_NAME,fieldLabel:a.get("firstName"),required:this.required,readOnly:this.readOnly,dynamicValidation:this.dynamicValidation,maxlength:this.maxlength}),this.ceoLastName=new n({model:this.model,fieldName:o.Fields.CEO_LAST_NAME,fieldLabel:a.get("lastName"),required:this.required,readOnly:this.readOnly,dynamicValidation:this.dynamicValidation,maxlength:this.maxlength})},render:function(){return this.container.setContent([this.ceoFirstName.render(),this.ceoLastName.render()]),this},validate:function(){var e,t;return e=this.ceoFirstName.validate().isValid,t=this.ceoLastName.validate().isValid,e&&t}})}),define("DS/MPFCompanyComponent/CompanyComponent",["UWA/Core","UWA/Class/View","DS/UIKIT/Input/Text"],function(e,t,n){"use strict";return t.extend({setup:function(e){this._parent(e)},render:function(){return this.container.setContent([]),this},destroy:function(){this.model=null,this._parent(),this.container=null}})}),define("DS/MPFCompanyComponent/CompanyCeoForm",["UWA/Core","DS/MPFView/MPFView","DS/MPFView/FieldTextInput","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent","css!DS/MPFUI/MPFUI"],function(e,t,n,i){"use strict";return t.extend({tagName:"form",domEvents:{change:"onChange"},setup:function(e){this._parent(e),this.required=!0===e.required,this.readOnly=!0===e.readOnly,this.dynamicValidation=!0===e.dynamicValidation,this.ceoFirstName=new n({model:this.model,fieldName:"ceoFirstName",fieldLabel:i.get("ceoFirstName"),required:this.required,readOnly:this.readOnly,dynamicValidation:this.dynamicValidation}),this.ceoLastName=new n({model:this.model,fieldName:"ceoLastName",fieldLabel:i.get("ceoLastName"),required:this.required,readOnly:this.readOnly,dynamicValidation:this.dynamicValidation})},onChange:function(e){e.target.required&&this._validateInput(e.target)},render:function(){return this.container.setContent([this.ceoFirstName.render(),this.ceoLastName.render()]),this},validate:function(){var t,n=this;return this.container.getElements(".mpf-entry input").forEach(function(e){n._validateInput(e)},{}),t=this._getErrorMessages(this.model.omit()),!(e.is(t,"array")&&t.length>0)},_validateInput:function(t){var n,o=t.getParent(),a=this._getErrorMessages(this.model.omit());t.removeClassName("mpf-invalidField"),null!==(n=o.getElement("p"))&&o.removeChild(n),a&&a.filter(function(n){n===t.name&&(t.addClassName("mpf-invalidField"),e.createElement("p",{class:"mpf-inputError",text:i.get(n+"Error")}).inject(o))})},_getErrorMessages:function(e){var t=[];if("string"==typeof e.ceoFirstName&&0!==e.ceoFirstName.length||t.push("ceoFirstName"),"string"==typeof e.ceoLastName&&0!==e.ceoLastName.length||t.push("ceoLastName"),t.length>0)return t},destroy:function(){this.model=null,this._parent(),this.container=null}})}),define("DS/MPFCompanyComponent/CompanyRegistrationIdInput",["UWA/Core","DS/MPFView/FieldTextInputV2","DS/MPFCompanyModel/CompanyModel","DS/MPFView/ValidationResultBuilder","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent","css!DS/MPFUI/MPFUI"],function(e,t,n,i,o){"use strict";return t.extend({className:"mpf-entry-v2 mpf-registration-id",setup:function(e){e.fieldName=n.Fields.REGISTRATION_ID,e.fieldLabel||(e.fieldLabel=o.get(n.Fields.REGISTRATION_ID)),e.dynamicValidation=!0,this._parent(e)},getRegistrationId:function(){return this.getValue()}})}),define("DS/MPFCompanyComponent/CompanyPmpInformationWidget",["UWA/Class","UWA/Promise","DS/UIKIT/Spinner","DS/MPFDataProxy/MarketplaceConnector","DS/MPFModelFactory/MPFFactoriesV2","DS/MPFCompanyModel/CompanyHelper","DS/MPFCompanyComponent/CompanyPmpInformationComponent"],function(e,t,n,i,o,a,s){"use strict";return e.extend({init:function(e){this.widget=e,document.body.style.backgroundColor="#f9f9f9"},load:function(){var e,m=this;this.widget.body.addClassName("mpf-page"),(new n).inject(this.widget.body).show(),i.fetchPromise().then(function(e){var n=o.getInstance(e);return t.all([n.getFactory(o.Types.PERSON),n.getFactory(o.Types.COMPANY)])}).then(function(t){var n=t[0];return e=t[1],n.createModel("me").fetchPromise()}).then(function(t){var n;return(n=a.getCompanyFromPerson(t,e))?n.fetchPromise():n=e.createModel("me")}).then(function(e){var t;t=new s({model:e}),m.widget.setBody(t.render())}).catch(function(){m.widget.setBody("Unable to start widget. Please reload the page.")})}})}),define("DS/MPFCompanyComponent/CompanyForm",["UWA/Core","UWA/Promise","DS/MPFView/MPFView","DS/MPFServices/ObjectService","DS/MPFCompanyModel/CompanyModel","DS/MPFCountryModel/CountryCollection","DS/MPFView/FieldSelectInputV2","DS/MPFCompanyComponent/CompanyNameInput","DS/MPFCompanyComponent/CompanyRegistrationIdInput","DS/MPFCompanyComponent/CompanyTaxRegistrationIdInput","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent"],function(e,t,n,i,o,a,s,m,r,l,d){"use strict";return n.extend({setup:function(e){e||(e={}),i.requiredOfPrototype(this.model,o,"this.model must be a CompanyModel"),i.requiredOfPrototype(e.countries,a,"options.countries must be a CountryCollection"),this._parent(e),this.countries=e.countries,this.hideCountry=e.hideCountry,this.companyNameInput=this._createCompanyName(),this.countrySelect=this._createCountrySelect(),this.taxRegistrationIdInput=this._createTaxRegistrationID(),this.registrationIdInput=this._createCompanyRegistrationID(),!0===this.hideCountry&&this.countrySelect.container.addClassName("hidden")},render:function(){var t,n=[];return n.push(this.companyNameInput.render()),n.push(this.countrySelect.render()),n.push(this.taxRegistrationIdInput.render()),n.push(this.registrationIdInput.render()),t=e.createElement("form",{class:"mpf-form",html:n}),this.container.setContent(t),this},save:function(){var e={},n=null;return this.validate()?(this.model.isNew()||(n=this.model.getPendingChanges(),e.patch=!0),this.model.isNew()||0!==Object.keys(n).length?this.model.savePromise(n,e):t.resolve()):t.reject("Company validation failed")},validate:function(){this.container.getElement("form").addClassName("validated");var e=[this.companyNameInput.validate().isValid,this.taxRegistrationIdInput.validate().isValid,this.registrationIdInput.validate().isValid];return this.hideCountry||e.push(this.countrySelect.validate().isValid),-1===e.indexOf(!1)},_createCompanyName:function(){return new m({model:this.model,dynamicValidation:!0,readOnly:!this.model.isNew(),required:!0})},_createCountrySelect:function(){return new s({model:this.model,required:!0,dynamicValidation:!0,silent:!1,fieldName:o.Fields.COUNTRY,fieldLabel:d.get("country"),readOnly:!this.model.isNew()&&e.is(this.model.getCountry()),placeholder:d.get("selectCountry"),selectableOptions:this._getCountriesOptions()})},_createTaxRegistrationID:function(){return new l({model:this.model,required:!0,readOnly:!1,dynamicValidation:!0})},_createCompanyRegistrationID:function(){return new r({model:this.model,readOnly:!1,required:!1,dynamicValidation:!0})},_getCountriesOptions:function(){var e=this,t=[];return this.countries.forEach(function(n){var i={value:n.getIso3(),label:n.getName()};i.selected=e.model.has(o.Fields.COUNTRY)&&""!==e.model.getCountry()&&n.getIso3()===e.model.getCountry(),t.push(i)}),t},destroy:function(){this.model=null,this._parent(),this.container=null}})}),define("DS/MPFCompanyComponent/CompanyNameFormV2",["UWA/Core","UWA/Promise","UWA/Class/View","DS/MPFServices/ObjectService","DS/MPFCompanyModel/CompanyModel","DS/MPFCompanyComponent/CompanyNameInput"],function(e,t,n,i,o,a,s){"use strict";return n.extend({tagName:"form",className:"mpf-form",setup:function(e){e||(e={}),i.requiredOfPrototype(this.model,o,"this.model must be a CompanyModel"),this._parent(e),this.horizontalLayout=!0===e.horizontalLayout,this.required=!0===e.required,this.readOnly=!0===e.readOnly,this.dynamicValidation=!0===e.dynamicValidation,this.maxlength=e.maxlength,this.input=new a({model:this.model,required:this.required,readOnly:this.readOnly,dynamicValidation:this.dynamicValidation,maxlength:this.maxlength})},render:function(){return this.horizontalLayout&&this.container.addClassName("mpf-horizontal"),this.container.setContent(this.input.render()),this},validate:function(){return this.input.validate().isValid},save:function(){return this.model.isNew()?this.model.savePromise(o.Fields.NAME,this.input.getValue()):t.resolve(this.model)},destroy:function(){this.model=null,this._parent(),this.container=null}})}),define("DS/MPFCompanyComponent/CompanyShopForm",["UWA/Promise","UWA/Class/View","DS/MPFServices/ObjectService","DS/MPFCompanyModel/CompanyModel","DS/MPFCompanyComponent/CompanyNameInput","DS/MPFCompanyComponent/CompanyCeoInputs","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent"],function(e,t,n,i,o,a,s){"use strict";return t.extend({className:"mpf-company-inputs",domEvents:{'change input[name="name"]':"_onCompanyChange",'change input[name*="ceo"]':"_onCompanyChange"},setup:function(e){e||(e={}),n.requiredOfPrototype(this.model,i,"this.model must be a CompanyModel"),this.readOnly=e.readOnly,this.companyNameInput=new o({model:this.model,readOnly:!0===this.readOnly,required:!0,maxlength:120,dynamicValidation:!0}),this.companyCeoInputs=new a({model:this.model,readOnly:!0===this.readOnly,required:!0,maxlength:255,dynamicValidation:!0}),this.companyHasChanged=!1},render:function(){return this.container.setContent([this.companyNameInput.render(),this.companyCeoInputs.render()]),this},validate:function(){var e=this.companyNameInput.validate().isValid,t=this.companyCeoInputs.validate();return e&&t},save:function(){return this.validate()?this.model.isNew()?(this.model.unset(i.Fields.TAX_REGISTRATION_ID),this.model.unset(i.Fields.REGISTRATION_ID),this.model.savePromise()):this.model.hasPendingChanges()?this.model.savePromise(this.model.getPendingChanges(),{patch:!0}).catch(function(t){return console.error(t),e.reject(new Error(s.get("anErrorOccured")))}):e.resolve():e.reject("Company validation failed")},focus:function(){this.companyNameInput.focus()},_onCompanyChange:function(){this.companyHasChanged=!0},destroy:function(){this.model=null,this._parent(),this.container=null}})}),define("DS/MPFCompanyComponent/CompanyIdsForm",["UWA/Core","UWA/Class/View","DS/MPFCompanyComponent/CompanyRegistrationIdInput","DS/MPFCompanyComponent/CompanyTaxRegistrationIdInput","i18n!DS/MPFCompanyComponent/assets/nls/CompanyComponent"],function(e,t,n,i,o){"use strict";return t.extend({setup:function(e){this._parent(e),this.registrationId=new n({model:this.model}),this.taxRegistrationId=new i({model:this.model})},render:function(){return this.container.setContent([this.registrationId.render(),this.taxRegistrationId.render()]),this},destroy:function(){this.model=null,this._parent(),this.container=null},save:function(){var e,t,n=this;e=this.container.getElements("input").reduce(function(e,t){return e[t.name]=t.value.trim(),e},{}),this.model.set(e)&&((t=this.model.validate(this.model.toJSON()))&&t.length>0||this.model.save(null,{onComplete:function(){n.saveButton.load(!1)},onFailure:function(){n._addErrorMessage(o.get("saveFailure")),n.saveButton.load(!1),this._setFieldsEnabled(!0)}}))}})});