define("DS/E6WCommonUI/WidgetUtils",["UWA/Core"],function(e){"use strict";String.prototype.htmlEncode=function(){var e=this.toString();return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/>/g,"&gt;")).replace(/</g,"&lt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#x27;")).replace(/\//g,"&#x2F;")).replace(/`/g,"&#x60;")).replace(/=/g,"&#x3D;")},String.prototype.htmlDecode=function(){var e=this.toString();return(e=(e=(e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#39;/g,"'")).replace(/&#x60;/g,"`")).replace(/&#x3D;/g,"=")).hexDecode()},String.prototype.hexDecode=function(){for(var e=this.toString(),t=e.split("&#x");t.length;){var n,i,a="0x"+t.pop().split(";")[0];!isNaN(parseFloat(a))&&isFinite(a)&&(n=String.fromCharCode(a),i=new RegExp("&#x"+a.substring(2)+";","g"),e=e.replace(i,n))}return e};var t={doNotOverrideDropEffect:!1,makeHTML5Date:function(t){if(!t)return"";var n;if(t instanceof Date)n=t;else{var i=t;e.is(t,"string")&&(i=parseInt(t,10)),isNaN(i)||(n=new Date(i))}if(n){var a=n.getDate();a=a<10?"0"+a:a;var o=n.getMonth()+1;return o=o<10?"0"+o:o,n.getFullYear()+"-"+o+"-"+a}return""},topWindowcache:null,getTopWindow:function(e){if(this.topWindowcache)return this.topWindowcache;for(var t=window;t&&t.parent!==t;)try{if(t.parent.test="temp","temp"!==t.parent.test)break;t=t.parent}catch(e){break}if(e)try{for(;t.opener&&t.opener.top&&(t.opener.top.test="temp2","temp2"===t.opener.top.test);)t=t.opener.top}catch(e){}return this.topWindowcache=t,this.topWindowcache},addDragDropListeners:function(){document.addEventListener("dragover",function(e){(e=e||event).preventDefault(),t.doNotOverrideDropEffect&&(e.dataTransfer.dropEffect="copy"),t.doNotOverrideDropEffect=!1},!1),document.addEventListener("drop",function(e){(e=e||event).preventDefault()},!1)},getSessionId:function(){return"session-"+widget.id+".widgetViewModeBeforePreview"},restoreWidgetViewModeBeforePreview:function(){var e=sessionStorage.getItem(this.getSessionId());e&&(widget.dispatchEvent("onViewRequest",{type:e}),sessionStorage.removeItem(this.getSessionId()))}};return t}),define("DS/E6WCommonUI/PlatformManager",["UWA/Core","UWA/Array","UWA/Class/Events","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/PlatformAPI/PlatformAPI","UWA/Utils"],function(e,t,n,i,a,o){"use strict";function r(){return void 0!==window.widget}var s=n.extend({_serviceData:[],_rolesData:[],initPlatformServiceData:function(e){0===this._serviceData.length?i.getPlatformServices({onComplete:function(t){s._instance.storePlatformServiceData(t),e.tenant&&s._instance.setTenant(e.tenant),e.onComplete()}}):e.onComplete()},storePlatformServiceData:function(e){this._serviceData=e,this.dispatchEvent("serviceDataLoaded")},getServiceUrl:function(e,t){var n=this.getTenantServiceData();if(!n||!n[e]){if(t)return!1;throw new Error("Service data not loaded")}return n[e]},getTenant:function(){return r()?widget.getValue("x3dPlatformId"):this._tenant},setTenant:function(e){r()?widget.setValue("x3dPlatformId",e):this._tenant=e},isOnPremise:function(){return"OnPremise"===this.getTenant()},isInternalProduction:function(){return"DSEXT001"===this.getTenant()},isInternalProduction:function(){return"DSEXT001"===this.getTenant()},getTenantServiceData:function(e){var n=e||this.getTenant();return t.detect(this._serviceData,function(e){return e.platformId===n})},fetchRolesData:function(){var e=this;i.getGrantedRoles(function(t){e._rolesData=t,e.setXPPLicenseStatus(),e.dispatchEvent("rolesDataLoaded")})},hasLoadedRolesData:function(){return this._rolesData.length>0},hasRole:function(t){if(this.hasLoadedRolesData()){var n=e.Array.detect(this._rolesData,function(e){return"InternalDS"===e.id}),i=e.Array.detect(this._rolesData,function(e){return e.id===t}),a=i&&-1!==i.platforms.indexOf(this.getTenant());return Boolean(n||a)}throw new Error("Fetching of Roles Data is not finished.")},hasSimulationRole:function(){var e=this;return["SPF","SPF-OC","MDO","MDO-OC","SPI","SPI-OC","SEI","SEI-OC"].some(function(t){return e.hasRole(t)})},setAuthorized:function(e,t){this["_"+e+"Authorized"]=t},hasRiskRole:function(){return this.isAuthorized("DPM")||this.isAuthorized("RSK")},isXPPAuthorized:function(){return!!this.hasOwnProperty("_XPPAuthorized")&&(this._XPPAuthorized||(this._XPPAuthorized=this.hasRole("XPP")),this._XPPAuthorized)},isAuthorized:function(e){return this["_"+e+"Authorized"]||this.hasRole(e)},setXPPAuthorized:function(e){this._XPPAuthorized=e,this.setXPPLicenseStatus(),this.dispatchEvent("xppAuthorizedLoaded")},hasXPPAuthorizationChecked:function(){return this.hasOwnProperty("_XPPAuthorized")},setXPPLicenseStatus:function(){this.hasLoadedRolesData()&&this.hasXPPAuthorizationChecked()&&!this.isXPPAuthorized()&&(this._XPPLicenseOK=!1)},isXPPLicenseOK:function(){return!this.hasOwnProperty("_XPPLicenseOK")||this._XPPLicenseOK},clearCachedServiceData:function(){this._serviceData=[],this._rolesData=[]},hasAccess:function(e){try{return Boolean(this.getServiceUrl(e))}catch(e){return!1}},getCurrentLanguage:function(){return widget.lang},setContextUserUid:function(e){this._userUid=e,this.dispatchEvent("userUidSet")},getContextUserUid:function(){return this._userUid},getContextUser:function(){return window.enoviaServer.user},getContextUserName:function(){var e=a.getUser();return e.firstName+" "+e.lastName},getCollaborativeSpaceName:function(){return WidgetUwaUtils.spaceNames&&WidgetUwaUtils.spaceNames[widget.getValue("collabspace")]&&WidgetUwaUtils.spaceNames[widget.getValue("collabspace")].displayName},setInvalidTenant:function(e){this._invalidTenant=e},getInvalidTenant:function(){return this._invalidTenant},is3DViewerPresent:function(){return this._is3DViewerPresent},enableUserGroup:function(){return window.widget&&window.widget.getValue("assignedToUserGroups")}});s._instance=s._instance||new s;let l=a.subscribe("DS/PADUtils/PADCommandProxy/sessionContent",()=>{s._instance._is3DViewerPresent=!0,a.unsubscribe(l)});return a.publish("DS/PADUtils/PADCommandProxy/getSessionContent",{metadata:{uid:`this should be documented ${o.getUUID()}`}}),s._instance}),define("DS/E6WCommonUI/Views/CustomizedAutocomplete",["DS/UIKIT/Autocomplete"],function(e){"use strict";var t=0;return e.extend({init:function(){return this._cid=t++,this._parent.apply(this,arguments)},_shouldDropUp:function(e){var t=this.boundingElement||document.documentElement;return(e||this.getContent().getOffsets().y+this.elements.inputContainer.getDimensions().height)+this.elements.suggestsContainer.getSize().height>(t.clientHeight||window.innerHeight)+(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)},setBoundingElement:function(e){this.boundingElement=e},reset:function(){this._parent.apply(this,arguments),this.dispatchEvent("onHideSuggests")},getSuggestions:function(e){e.length>=this.options.minLengthBeforeSearch?this._parent.apply(this,arguments):this.reset()}})}),define("DS/E6WCommonUI/FileSaver",[],function(){"use strict";var e=window;function t(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){a(i.response,t,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="download"in HTMLAnchorElement.prototype?function(a,o,r){var s=e.URL||e.webkitURL,l=document.createElement("a");o=o||a.name||"download",l.download=o,l.rel="noopener","string"==typeof a?(l.href=a,l.origin!==location.origin?n(l.href)?t(a,o,r):i(l,l.target="_blank"):i(l)):(l.href=s.createObjectURL(a),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){i(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,o){if(a=a||e.name||"download","string"==typeof e)if(n(e))t(e,a,o);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){i(r)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,o),a)}:function(n,i,a,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof n)return t(n,i,a);var r="application/octet-stream"===n.type,s=/constructor/i.test(e.HTMLElement)||e.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},c.readAsDataURL(n)}else{var d=e.URL||e.webkitURL,u=d.createObjectURL(n);o?o.location=u:location.href=u,o=null,setTimeout(function(){d.revokeObjectURL(u)},4e4)}};return{saveAs:a}}),define("DS/E6WCommonUI/UnitBezier",["UWA/Class"],function(e){"use strict";return e.extend({epsilon:1e-6,init:function(){this.cx=1.26,this.bx=3*(.58-.42)-this.cx,this.ax=1-this.cx-this.bx,this.cy=0,this.by=3-this.cy,this.ay=1-this.cy-this.by},sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){var n,i,a,o,r,s;for(a=e,s=0;s<8;s++){if(o=this.sampleCurveX(a)-e,Math.abs(o)<t)return a;if(r=this.sampleCurveDerivativeX(a),Math.abs(r)<t)break;a-=o/r}if((a=e)<(n=0))return n;if(a>(i=1))return i;for(;n<i;){if(o=this.sampleCurveX(a),Math.abs(o-e)<t)return a;e>o?n=a:i=a,a=.5*(i-n)+n}return a},solve:function(e,t){var n=t||this.epsilon;return this.sampleCurveY(this.solveCurveX(e,n))}})}),define("DS/E6WCommonUI/CompassUtil",["DS/i3DXCompassServices/i3DXCompassPubSub","DS/PlatformAPI/PlatformAPI"],function(e,t){"use strict";return{openCompassWithModel:function(t,n){var i;(n&&n.transferObject||t.getTransferObject)&&(i=n&&n.transferObject||t.getTransferObject&&t.getTransferObject()),i&&(e.publish("setObject",i.data.items[0]),e.publish("setX3DContent",i))},publishOnPlatformAPI:function(e,n){n.getTransferObject&&t.publish(e,n.getTransferObject())}}}),define("DS/E6WCommonUI/Collections/MergingCollection",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Class/Listener"],function(e,t,n,i){"use strict";var a=n.extend(i,{_uwaClassName:"MergingCollection",addSubCollection:function(t,n){this._subCollections||(this._subCollections=[]);var i=e.clone(n||{},!1);i.previousModels=this.toArray(),this._subCollections.push(t),this.listenTo(t,"onAnyEvent",function(e){var t=Array.prototype.slice.call(arguments,1);this.dispatchEvent(e,t)}),n&&n.silent||this.dispatchEvent("onReset",[this,i])},_arrayReturningFunction:function(e){return this._subCollections?Array.prototype.concat.apply([],this._subCollections.map(e)):[]},toArray:function(){return this._arrayReturningFunction(function(e){return e.toArray()})},size:function(){var e=0;return this._subCollections&&this._subCollections.forEach(function(t){e+=t.size()}),e},toJSON:function(){return this._arrayReturningFunction(function(e){return e.toJSON()})},get:function(){for(var e,t=this._subCollections,n=t.length,i=0;i<n;i++){var a=t[i];if(e=a.get.apply(a,arguments))break}return e},indexOf:function(){for(var e,t=this._subCollections,n=t.length,i=0,a=0;a<n;a++){var o=t[a];if(-1!==(e=o.indexOf.apply(o,arguments))){e+=i;break}i+=o.length}return e},at:function(e){var t=e;if(!(t<0)&&this._subCollections)for(var n=this._subCollections,i=n.length,a=0;a<i;a++){var o=n[a],r=o.size();if(r>t)return o.at(t);t-=r}},complete:function(){for(var t=this._subCollections,n=t.length,i=0;i<n;i++){var a=t[i];e.is(a.complete,"function")&&a.complete.apply(a,arguments)}},contains:function(e){return-1!==this.indexOf(e)}});return Object.defineProperty(a.prototype,"length",{get:function(){return this.size()}}),a}),define("DS/E6WCommonUI/E6WCommonUIConstants",[],function(){"use strict";return{WORKING_HOURS_IN_A_DAY:8,LOGICAL_USER_TYPE:"dsplan:LogicalUser",JS_TYPE_ATTR:"dsxplan:jsType",DSLC_TITLE_ATTR:"dsxplan:label",USER_GROUP_TYPE:"foaf:Group",PERSON_TYPE:"pno:Person",ACTUAL_DELIVERABLE_ATTR:"dsplan:actualDeliverable",ATTACHMENT_ATTR:"dsplan:hasAttachment",BOOKMARK_FOR_FILE_REPOSITORY:"dsplan:hasBookmark",SERVICE_3DPLAN:"3dplan"}}),define("DS/E6WCommonUI/TopBarSearchDispatcher",["UWA/Core","UWA/Class/Events","UWA/Class/Listener"],function(e,t,n){"use strict";var i=t.extend(n,{_uwaClassName:"TopBarSearchDispatcher",listenToTopBarSearch:function(){this.listenTo(widget,{onSearch:this._dispatchSearchEvent,onResetSearch:this._dispatchResetSearch})},_dispatchSearchEvent:function(e){this._search=e,this.dispatchEvent("onTopBarSearch",arguments)},_dispatchResetSearch:function(){delete this._search,this.dispatchEvent("onTopBarResetSearch",arguments)},getSearchString:function(){return this._search},getSearchStringConvertedToRegex:function(){var e=this._search,t="";return e?/[*?]/.test(e)?(e.split("").forEach(e=>{switch(e){case"*":t=t.concat(".*");break;case"?":t=t.concat(".");break;default:t=t.concat(e)}}),t):t=".*"+e+".*":""}});return i._instance=i._instance||new i,i._instance}),define("DS/E6WCommonUI/Search",["UWA/Core","UWA/Utils/InterCom","UWA/Utils","DS/RDFFoundation/MemberUtils"],function(e,t,n,i){"use strict";var a=["3dspace","drive"],o=function(e,i){this.socketName="search_socket_"+n.getUUID(),this.socket=new t.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.listener=this.objectsSelected.bind(this),this.socket.addListener("Selected_Objects_search",this.listener);var a=this;this.socket.addListener("onCloseTransient",function(){a.unregister()});var o=this.options({title:"iTitle"});i&&(o.idcard_activated=!0)};return o.prototype.destroy=function(){var e={};e.widget_id=widget&&widget.id||enoviaServer.widgetId,this.socket.dispatchEvent("UnregisterContext",e),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.removeListener("onCloseTransient"),this.socket.disconnect()},o.prototype.options=function(t){var n,i=e.clone(t||{},!1),a=((n={title:"",types:"",role:"",default_search_criteria:""}).app_socket_id=this.socketName,n.mode="furtive",n.widget_id=widget.id,n.default_with_precond=!0,n.show_precond=!1,n.idcard_activated=!1,n.select_result_max_idcard=!1,n.source=["3dspace"],n.tenant=window.enoviaServer?enoviaServer.tenant:widget.getValue("x3dPlatformId"),n.precond="",n.excluded_types={},n.callback=null,n);return i.excludedSearchTypes&&(a.excluded_types=i.excludedSearchTypes),e.extend(a,i),function(t){if(e.is(t.types,"object")){var n="Config not supported by 3dsearch. If you specify types for any source, you must do so for all sources",i=e.is(t.source,"array")?t.source:[t.source],a=Object.keys(t.types);if(a.length!==i.length)throw new Error(n);for(var o=0;o<a.length;o++)if(-1===i.indexOf(a[o]))throw new Error(n)}}(a),a.precond||(a.precond=o.buildSearchTypeQuery(a.types,a)),a},o.prototype.activate=function(t){var n=this,i=this.options(t),a=i.callback;e.is(a,"function")||(i.mode="default"),this.callback=a;var o={};o.widget_id=widget&&widget.id||enoviaServer.widgetId,this.socket.dispatchEvent("UnregisterContext",o),this.socket.addListener("RegisterContext_Response",function(){n.socket.dispatchEvent("InContextSearch",i),n.socket.removeListener("RegisterContext_Response")}),this.socket.dispatchEvent("RegisterContext",i)},o.prototype.isAvailable=function(){return e.is(this.socket)},o.prototype.objectsSelected=function(e){this.callback&&this.callback(e)},o.prototype.unregister=function(){var e={widget_id:widget&&widget.id||enoviaServer.widgetId};this.socket.dispatchEvent("UnregisterContext",e)},o.buildSearchTypeQuery=function(t,n){var i;if(t){if(e.is(t,"string")){var a=n.source||["3dspace"];if(-1===(a=e.is(a,"array")?a:[n.source]).indexOf("3dspace")&&a.length)throw new Error("types as string only supported for 3dspace source as it is a backward compatibility feature");t={"3dspace":t.split(",")}}var r=Object.keys(t),s=r.length;i="(";for(var l=0;l<s;l++){0!==l&&(i+=" OR ");var c=r[l],d=t[c];e.is(d,"string")&&(d=[d]),i+=o.buildSearchTypeQueryForSource(c,d,n)}if(n.excluded_types)i+=Object.keys(n.excluded_types).length>0?") AND NOT "+o.buildSearchTypeQuery(n.excluded_types,{exclude:!0}):")";else i+=")"}else n.excluded_types&&(i=" NOT "+o.buildSearchTypeQuery(n.excluded_types,{exclude:!0}));return i},o.buildSearchTypeQueryForSource=function(e,t,n){var i,a=o.isM1BasedSource(e);i=a?"flattenedtaxonomies:":"[ds6w:type]:",i+="(","swym"===e&&-1!==t.indexOf("pno:Person")&&n&&!n.exclude&&n.excludePendingUser&&(i="ut_state:1 && "+i);for(var r=0;r<t.length;r++){var s=t[r];0!==r&&(i+=" OR "),i+=a?'"types/'+s.trim()+'"':'"'+s.trim()+'"'}return i+=")"},o.isM1BasedSource=function(e){return-1!==a.indexOf(e)},o.computeSourceParameters=function(t,n){var i=e.clone(t.excludeSearchTypes||{},!1),r={};a.forEach(function(n){(e.is(t.searchSource,"array")&&-1!==t.searchSource.indexOf(n)||t.searchSource===n)&&(i[n]||(i[n]=["Person","Security Context"]))});var s,l=t.searchSourceTypes;return l&&(s={types:l,specificSourceParameter:r,excludePendingUser:t.excludePendingUser},o._buildSpecificSourceParameter(s,n)),o._buildSpecificSourceParameter(s={types:i,specificSourceParameter:r,exclude:!0},n),r},o._buildSpecificSourceParameter=function(e,t){for(var n=e.specificSourceParameter,a=e.types,r=Object.keys(a),s=r.length,l=0;l<s;l++){var c=r[l],d=a[c],u=n[c],h=u&&u.additional_query||"";h&&(h+=" AND "),e.exclude&&(h+="NOT "),t&&"usersgroup"in e.types?("swym"===c&&(h=" AND personOrGroup:("+t+")"),"usersgroup"===c&&(h=" AND [ds6w:label]:("+i.escapeRegExp(t)+"*)")):h+=o.buildSearchTypeQueryForSource(c,d,e),n[c]={additional_query:h}}return n},o}),define("DS/E6WCommonUI/ApolloUtils",["UWA/Core","UWA/Class/Events","DS/RDFFoundation/RDFUtils","DS/RDFFoundation/Collections/CollectionTaggerHelper","DS/RDFFoundation/FederatedSearchUtil","DS/E6WCommonUI/PlatformManager"],function(e,t,n,i,a,o){"use strict";var r=["what","when","where","who","why","how"],s={"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Kernel/label>":"dsxplan:label","<urn:x-arq:DefaultGraph> <http://www.3ds.com/vocabularies/ds6w/type>":"@type",estimatedEnd:"dsxplan:estimatedEndDate",estimatedStart:"dsxplan:estimatedStartDate",created:"dspol:creationDate",modified:"dspol:modificationDate",actualStart:"dsxplan:actualStartDate",actualEnd:"dsxplan:actualEndDate","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectIndexId>":"dsxplan:workscopeParent","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/workDecompositionParentIndex>":"dsxplan:workDecompositionParent","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectMilestoneIndexId>":"dsxplan:workscopeParent","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentTaskIndexId>":"dsxplan:taskParent","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/jsType>":"dsxplan:jsType","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/comment>":"dsxplan:comment","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/logicalAssignee>":"dsplan:hasAssignee"},l={"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Kernel/owner>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasAssignee>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/logicalAssignee>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/com/hasMaturity>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasPriority>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasAttachment>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/actualDeliverable>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectIndexId>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectMilestoneIndexId>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/workDecompositionParentIndex>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasMilestone>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasFromConstraint>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentTaskIndexId>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/xPlan/from>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/xPlan/to>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/isRolledUpInfoFor>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasRolledUpInfo>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasWorkContext>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasScheduleError>":!0};var c,d={"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Kernel/owner>":"foaf:Person","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasAssignee>":"foaf:Person","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/logicalAssignee>":"dsplan:LogicalUser","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectIndexId>":"dsplan:Project","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectMilestoneIndexId>":"dsplan:Project","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/workDecompositionParentIndex>":"dsplan:Project","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasMilestone>":"dsplan:Milestone","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentTaskIndexId>":"dsplan:Task","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/isRolledUpInfoFor>":"dsplan:Project","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasRolledUpInfo>":"dsplan:RolledUpInfo","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasFromConstraint>":"dsplan:TemporalConstraint","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasWorkContext>":function(e){return"dsplan:Task"===e["dsxplan:jsType"]?"dscom:ComponentProxy":"dsplan:Project"}},u={"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasAttachment>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/actualDeliverable>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasAssignee>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/logicalAssignee>":!0,"<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasMilestone>":!0},h=n.inverseMapping(n.typeDictionary.context),p={"ds6w:who/ds6w:responsible":"ownerFilter","ds6w:who/ds6w:assignee":"assigneeFilter","ds6w:where/ds6w:context/ds6w:parent":"parentFilter","ds6w:why/ds6w:priority":"priorityFilter","ds6w:what/ds6w:status":"stateFilter","ds6w:what":"whatFilter","ds6w:who":"whoFilter","ds6w:when":"whenFilter","ds6w:where":"whereFilter","ds6w:why":"whyFilter","ds6w:how":"howFilter","ds6w:when/ds6w:ends/ds6w:actualEnd":"actualEndFilter","ds6w:when/ds6w:ends/ds6w:plannedEnd":"plannedEndFilter","ds6w:when/ds6w:starts/ds6w:plannedStart":"plannedStartFilter","ds6w:when/ds6w:starts/ds6w:actualStart":"actualStartFilter","ds6w:when/ds6w:created":"createdFilter","ds6w:when/ds6w:modified":"modifiedFilter","ds6w:what/ds6w:type":"typeFilter","ds6w:where/ds6w:context/ds6w:community":"communityFilter"},m=n.inverseMapping(p),f=new RegExp("<.*> <(.*)>"),g={};var v=t.extend({_deletedModels:{},parse:function(e){var t=this,i=[],a=0,o=function(e){var t,n=e.match(/"(.*?)"/);return n.length>1&&(t=n[1]),t};return e.forEach(function(e){if(e){var r={},s=n.removeBracketLongURI(e.stringPredicates["<urn:x-arq:DefaultGraph> <http://www.3ds.com/vocabularies/ds6w/resourceUid>"][0]);t.userDeletedModel(s)?a++:(r["@id"]=s,t.addPredicatesToObject(r,e.datetimePredicates,!0),t.addPredicatesToObject(r,e.doublePredicates),t.addPredicatesToObject(r,e.longPredicates),t.addPredicatesToObject(r,e.stringPredicates),t.addPredicatesToObject(r,e.booleanPredicates),["<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectIndexId>","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/workDecompositionParentIndex>","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentProjectMilestoneIndexId>","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/parentTaskIndexId>","<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Plan/hasRolledUpInfo>"].forEach(function(t){e.uriPredicates[t]||(e.uriPredicates[t]=e.stringPredicates[t])}),t._parseUriPredicates(r,e),r._tagData=e.tags,r.explicitTagsData=t.getApolloExplicitTagsData(e.tags),r._workscopeParent=e.workscopeParent,e.intervalMin&&(r["dsplan:durationIntervalMin"]=o(e.intervalMin)),e.intervalMax&&(r["dsplan:durationIntervalMax"]=o(e.intervalMax)),e.duration&&(r["dsplan:estimatedDuration"]=o(e.duration)),c.addMask(r),i.push(r))}}),{models:i,deletedModelsFound:a}},getApolloExplicitTagsData:function(t){var n;return t&&r.forEach(function(i){var a=t[i];a&&(n||(n={}),n[i]||(n[i]=[]),e.is(a,"array")?n[i]=n[i].concat(a):n[i].push(a))}),n},_parseUriPredicates:function(e,t){for(var n in t.uriPredicates){var i=this.getAttributeFromPredicate(n);if(i){var a=t.uriPredicates[n];u[n]?(e[i]=e[i]||{"@type":"Collection","@id":e["@id"]+"/"+i,member:[]},a.forEach(function(t){e[i].member.push(this._parseNestedObject(t,n,e))}.bind(this))):a&&(e[i]=this._parseNestedObject(a[0],n,e))}else console.error(`No attribute mapping for ${n}. Skipping it.`)}},_parseNestedObject:function(t,i,a){if(!l[i])return;var o=t;t.startsWith("<uuid")?o=n.removeBracketLongURI(t):t.startsWith("<http")&&(o=t.match(/<(.*)>/)[1],o=this.longToShortURI(o));var r={"@id":o};let s=d[i];return d[i]&&(e.is(s,"function")&&(s=s(a)),r["dsxplan:jsType"]=s),r},addPredicatesToObject:function(e,t,n){for(var i in t)if(t[i]){if("<urn:x-arq:DefaultGraph> <http://www.3ds.com/RDF/Corpus/Kernel/comment>"===i&&"dsplan:Milestone"===e["dsxplan:jsType"])continue;var a=t[i][0],o=this.getAttributeFromPredicate(i);o&&a&&(n&&!a.endsWith("Z")&&(a+="Z"),e[o]=a)}},getAttributeFromPredicate:function(e){if(g[e])return g[e];if(s[e])g[e]=s[e];else{var t=e.match(f)[1];g[e]=this.longToShortURI(t)}return g[e]},longToShortURI:function(e){var t=e.split("/"),n=t.pop(),i=t.join("/")+"/";return h[i]?`${h[i]}:${n}`:(console.error(`${i} does not have short URI defined in ApolloUtils.js`),e)},parseTags:function(e){var t=JSON.parse(e),i=[],o={};if(t.result)for(var r in t.result)Object.values(t.result[r].views).forEach(function(e){var t=e.data.axes[0].dimensions[0].ticks;if(t){var a=t.map(function(e){return e[0]});e.data.points.forEach(function(t){if(a[t[0][0]]){var r=!1;a[t[0][0]].match(/(\d\d\d\d\/\d\d\/\d\d)/)&&(r=!0);var s,l={object:a[t[0][0]],sixw:(s=e.data.axes[0].name,m[s]||s),count:t[1][0],type:r?"date":"string"};if("ds6w:where/ds6w:context/ds6w:community"===l.sixw){var c=n.removeBracketLongURI(l.object);c&&(c=c.substring(c.indexOf("_")+1)),o[c]=l}else i.push(l)}})}});return function(e,t){for(var n=[],i=0;i<e.length;i++)n.push('[ds6w:resourceUid]:"'+e[i]+'"');if(n.length>0){var o={sources:["swym"],nresults:n.length+10,query:n,select_predicate:["ds6w:label","ds6w:type","ds6w:resourceUid"],delimeter:" BOR ",onComplete:function(e){t.onComplete&&t.onComplete(e)},onFailure:function(e){t.onFailure&&t.onFailure(e)}};a.sendRequestWithDelimiter(o)}}(Object.keys(o),{onComplete:function(e){var t=e.results;if(t&&t.length){for(var n=[],a=0;a<t.length;a++){var r=o[t[a].attributes.find(e=>"resourceid"===e.name).value];r.dispValue=t[a].attributes.find(e=>"ds6w:label"===e.name).value,n.push(r)}c.dispatchEvent("onCommunityDataLoaded",[i.concat(n)])}}}),i},createFilterParams:function(e){var t=[],n=this;for(var a in e){var o=[];e[a].forEach(function(e){if("date"===e.type){var r=i.getFromAndToDateFromDateTagFilter(e.object);r.to&&t.push({key:n.getServiceVariableForTag(a)+"To",value:JSON.stringify(r.to.toISOString())}),r.from&&t.push({key:n.getServiceVariableForTag(a)+"From",value:JSON.stringify(r.from.toISOString())})}else o.push(e.object)}),o.length>0&&t.push({key:n.getServiceVariableForTag(a),value:JSON.stringify(o)})}return t},onModelDeleted:function(e){this._deletedModels[e.id]=!0},userDeletedModel:function(e){return this._deletedModels[e]},sendInitialRequest:function(){n.request(this.getServiceLoginUrl(),{ignoreDictionary:!0,method:"GET"})},getServiceUrl:function(){return o.getServiceUrl("3dplan",!0)+"/3drdfindexfts/services/customdataquery"},getServiceLoginUrl:function(){return o.getServiceUrl("3dplan",!0)+"/3drdfindexfts/services/login"},addMask:function(e){var t;switch(e["dsxplan:jsType"]){case"dsplan:Project":case"dsplan:xProject":t="dsplan:MVMask.WorkPackage.Expanded";break;case"dsplan:Task":t="dsplan:MVMask.Task.Apollo";break;case"dsplan:Milestone":t="dsplan:MVMask.Milestone.Complex"}t&&(e["@mask"]=t)}});return(c=new v).PROJECT_TAGS_SERVICE="custom_ProjectTaskTags",c.getServiceVariableForTag=function(e){return p[e]||e},c.APOLLO_EXPLICIT_TAG_KEYS=r,c}),define("DS/E6WCommonUI/UIHelper",["UWA/Core","UWA/Utils/Client","UWA/Utils/InterCom","UWA/Promise","DS/UIKIT/Alert","DS/UIKIT/SuperModal","DS/UIKIT/Mask","DS/UIKIT/Tooltip","DS/UIKIT/Modal","DS/Handlebars/Handlebars4","DS/RDFFoundation/RDFUtils","DS/RDFFoundation/MemberUtils","DS/E6WCommonUI/PlatformManager","DS/E6WCommonUI/E6WCommonUIConstants","DS/i3DXCompassPlatformServices/OpenWith","DS/WAFData/WAFData","DS/Usage/TrackerAPI","DS/Notifications/NotificationsManagerAbstract","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],function(e,t,n,i,a,o,r,s,l,c,d,u,h,p,m,f,g,v,w){"use strict";var D=w.get("E6WCommonUI.Info.LoadingData"),_={autoHide:!0,closable:!0,closeOnClick:!1,className:"eno6wcommonui-alert-root"},E={"dsplan:Task":w.get("E6WCommonUI.Label.Task"),"dsplan:Milestone":w.get("E6WCommonUI.Label.Milestone"),"dsplan:Project":w.get("E6WCommonUI.Label.Project"),"dsplan:xProject":w.get("E6WCommonUI.Label.xProject"),"pno:Person":w.get("E6WCommonUI.Label.Person"),"dsplan:LogicalUser":w.get("E6WCommonUI.Label.LogicalUser")},C=["Simulation","Simulation Template"];let y=c.compile("{{message}}");var b={trackPageEvent:function(t){var n=e.clone(t,!1);n.appID=widget.getValue("appId"),n.tenant=h.getTenant(),g.trackPageEvent(n)},trackPageView:function(t){var n=e.clone(t,!1);n.appID=widget.getValue("appId"),n.tenant=h.getTenant(),g.trackPageView(n)},enrichObjectFromSearch:function(e){var t=e.sourceid||e.sourceId;if(t){var n=t.indexOf(":");e.source=-1===n?t:t.substring(0,n),e.serviceId=d.serviceFromSource(e.source)}},extraDragForSwym:function(e){try{"3DSwym"===e.data.items[0].serviceId&&(widget.socket||(widget.socket=new n.Socket("DetailsDisplayView"+widget.id),widget.socket.subscribeServer("ifweServer",window.parent)),widget.socket.dispatchEvent("SwymContentDragStarted",e))}catch(e){console.log(e)}},getParentTypesFromMap:function(e){return this.parentTypesMap[e]},addToParentTypesMap:function(e,t){this.parentTypesMap[e]=t},destroyOpenWith:function(e){e.openWith&&(delete e.openWith._content,delete e.openWith._dropdown,e.openWith._appsList&&(e.openWith._appsList.request&&e.openWith._appsList.request.cancel(),delete e.openWith._appsList)),delete e.openWith},addOpenWith:function(e){e.view.openWith&&this.destroyOpenWith(e.view),e.view.openWith=new m,e.dropdownMenu.addItem({id:"OpenWith",title:"Open With",text:w.get("E6WCommonUI.Label.OpenWith"),fonticon:"open-menu-dot",index:0}),e.view.openWith.set3DXContent(e.modelData).retrieveCompatibleApps(function(t){t.length>0&&t.forEach(function(t){e.dropdownMenu.addItem({name:t.text,text:t.text,type:"PushItem",title:t.text,icon:t.icon,handler:t.handler,parentItemId:"OpenWith"})})})},launchPreviewGroupMembers:function(e,t){let n=require("DS/i3DXRDFGroupViewer/js/GroupViewer");if(n){var i=new n({platformId:h.getTenant(),groupId:e,language:h.getCurrentLanguage()});this._modal=new l({closable:!0,renderTo:t,className:"group-viewer",header:b.i18n("E6WCommonUI.Label.PreviewGroupMembers"),body:i.render()}),this._modal.getBody().addClassName("members-view"),this._modal.show()}},pictureAPIConfig:{defaultSwym:"https://dsext001-eu1-215dsi0708-3dswym.3dexperience.3ds.com",pictureAPIPrefix:"/api/user/getpicture/login/",pictureAPISuffixMini:"/format/mini",pictureAPISuffixNormal:"/format/normal"},i18n:function(e){return e?(window.WidgetConstants&&window.WidgetConstants.str||console.error("getWidgetConstant called too early (prior to constants initialization) "),(window.WidgetConstants&&window.WidgetConstants.str?window.WidgetConstants.str[e]:null)||w.get(e)):""},userPictureURL:function(e,t,n){var i="";if(!n||"Group"!==n.type&&"Group Proxy"!==n.type){if(e){var a=this.pictureAPIConfig.pictureAPISuffixMini,o=window.enoviaServer.swym;"normal"===t&&(a=this.pictureAPIConfig.pictureAPISuffixNormal),i=o?o+this.pictureAPIConfig.pictureAPIPrefix+e+a:""}}else i=n.imageUrl;return i},isIpad:function(){return t.Platform.ipad},isAndroid:function(){return t.Platform.android},isIOS:function(){return t.Platform.ios},isSurface:function(){return t.Platform.tablet&&(t.Platform.win32||t.Platform.win64)},isMobile:function(){return this.isIpad()||this.isAndroid()||this.isSurface()},isTouchExceptTablet:function(){return!(!this.isMobile()&&!t.Platform.ios)&&!t.Platform.tablet},isTouchDevice:function(){return"ontouchstart"in window||window.navigator.msMaxTouchPoints},isIE:function(){return t.Engine.ie},isEdge:function(){return-1!==window.navigator.userAgent.indexOf("Edge/")},isWidgetNarrow:function(){return window.innerWidth<450},parentTypesMap:{},DATA_KEY_LIST:[void 0!==t.Engine.ie||-1!==window.navigator.userAgent.indexOf("Edge/")?"text":"text/plain","text/searchitems","dragObjectDetails"],isDataTransferTypeSupported:function(e){var t=!1;return e.types&&(t=this.DATA_KEY_LIST.some(function(t){for(var n=0;n<e.types.length;n++)return e.types[n].toLowerCase()===t;return!1})),t},getTransferObject:function(t){var n=e.clone(t,!1);return n.serviceId=n.serviceId||"3DSpace",{protocol:"3DXContent",version:"1.0",source:n.source,data:{items:[n]}}},getDataTransferJSON:function(t){var n,i,a=["0.1","1.0","1.1","2.0"];return this.DATA_KEY_LIST.some(function(o){if(n=t.getData(o),e.is(n,"string"))try{n=JSON.parse(n)}catch(e){return!1}return(i=n.version&&"3DXContent"===n.protocol)?-1===a.indexOf(n.version)&&(i=!1):b.displayError(b.i18n("E6WCommonUI.Alert.InvalidDataDropped")),i}),i?n:(b.displayError(b.i18n("E6WCommonUI.Alert.InvalidDataDropped")),!1)},dateForJSON:function(e,t,n,i){var a=e;return a=i&&i.dataForRendering?e&&{actualValue:a.getTime().toString(),displayValue:isNaN(a)?"":n&&n.getLocaleDate(a)}:"UTC"===t?isNaN(a.getTime())?"":a.toISOString():e.getTime()},getIntlDateFormat:function(e){var t=e,n=new Date(e);return"Invalid Date"!==n.toString()&&(t={actualValue:n,displayValue:isNaN(n.getTime())?t:b.DATE_FORMAT.format(n)}),t},getIntlDateTimeFormat:function(e){var t=e,n=new Date(e);return"Invalid Date"!==n.toString()&&(t={actualValue:n,displayValue:isNaN(n.getTime())?t:`${b.DATE_LONG_FORMAT.format(n)} (${b.TIME_FORMAT.format(n)})`}),t},setHelper:function(t,n,i){var a,o=i;return t?e.is(t,"object")?(a=t,o=n||{}):((a={})[t]=n,o=i||{}):o=n,{attrs:a,options:o}},match:function(e,t){return!(!e||!t)&&(e=e.toLowerCase(),t=t.toLowerCase(),-1===e.indexOf("*")?-1!==t.indexOf(e):new RegExp("^"+e.split("*").join(".*")+"$").test(t))},processDroppedObjectPreview:function(e,t,n){t.onload=function(){b.scaleImage(this,null,null,n),window.URL.revokeObjectURL(this.src)},t.onerror=function(){n(null),window.URL.revokeObjectURL(this.src)};var i={method:"GET",type:"blob",onComplete:function(e){var n=new Blob([e]);t.src=window.URL.createObjectURL(n)},onFailure:function(){n(null)}};f.authenticatedRequest(e,i)},processDroppedImage:function(e,t,n){var i=e[0],a=i.name,o=i.type;t.onload=function(){window.URL.revokeObjectURL(this.src),b.scaleImage(this,a,o,n)},t.src=window.URL.createObjectURL(i)},openFileExplorer:function(t){var n={id:"fileUploadButton",type:"file",accept:t.accept};e.Utils.Client.Platform.ios||b.isSurface()||b.isAndroid()||!0===t.single||(n.multiple=!0);var i=e.createElement("input",{attributes:n,styles:{display:"none"},events:{change:function(){i.destroy(),t.callback&&t.callback(this.files)}}});i.inject(document.body),i.click()},scaleImage:function(e,t,n,i){var a=document.createElement("canvas"),o=a.getContext("2d"),r=e.naturalWidth,s=e.naturalHeight,l=Math.min(120/s,160/r);l<1&&(s*=l,r*=l);for(var c,d=1;a.width=r,a.height=s,o.fillStyle="white",o.fillRect(0,0,a.width,a.height),o.drawImage(e,0,0,r,s),(c=a.toDataURL("image/jpeg",d)).length>16300;)d-=.05;i(c)},initializeAlert:function(e){widget.alerter=new a(_),widget.alerter.inject(e,"top"),widget.alerter._lastInjectedTo=e;let t=widget.getValue("appId");"ENXPLAN_AP"!==t&&"ENOTASK_AP"!==t&&"ENOTASP_AP"!==t||(v.prototype.addNotif=function(e){b.displayMessage({message:e.message||e.title||e.subtitle,className:e.level})})},displayMessage:function(e,t){return widget.alerter?(widget.alerter.setOptions&&(t?widget.alerter.setOptions(t):widget.alerter.setOptions(_)),widget.alerter.elements&&!widget.alerter.elements.container.isInjected()&&widget.alerter.inject(widget.alerter._lastInjectedTo,"top"),widget.alerter.add(e),widget.alerter.show(),!0):(console.log("No alerter defined. This must be done by the application."),!1)},displayMessageBasedOnType:function(e){var t=e.msg,n=e.msgType;switch(e.msgType){case"warning":return this.displayWarning(t);case"info":return this.displayInfo(t);case"error":return this.displayError(t);case"success":return this.displaySuccess(t);case"primary":return this.displayPrimary(t);default:var i={message:t,className:n};return this.displayMessage(i)}},displaySuccess:function(e){return this.displayMessage({message:e,className:"success"})},displayError:function(e){return this.displayMessage({message:e,className:"error"},{hideDelay:4e3})},displayInfo:function(e,t){return this.displayMessage({message:e,className:"info"},{hideDelay:t||4e3})},displayWarning:function(e,t){return this.displayMessage({message:e,className:"warning"},{hideDelay:t||4e3})},displayPrimary:function(e){return this.displayMessage({message:e,className:"primary"})},getAlertInjectionLocation:function(){return widget.alerter&&widget.alerter._lastInjectedTo},updateDocumentConfirmation:function(e,t,n,i){if(e.length>1)b.displayError(w.get("E6WCommonUI.Alert.MultipleFilesNotSupported"));else{var a=e[0],r=t.get("title"),s=a.name,l={nameA:s,nameB:r};if("DriveFile"!==t.get("ds6w:type")&&(l={nameA:s=this.getFileNameWithoutExtension(s),nameB:s}),r!==s){var c={title:w.get("E6WCommonUI.Label.Update")+" "+r,body:w.replace(w.get("E6WCommonUI.Alert.UpdateDifferentFileNames"),l),buttons:[{className:"primary",value:w.get("E6WCommonUI.Label.Update"),action:function(e){e.hide(),n(a,t,i)}},{value:w.get("E6WCommonUI.Label.Cancel"),action:function(e){e.hide()}}]};new o({renderTo:document.body}).dialog(c)}else n(a,t)}},getFileNameWithoutExtension:function(e){var t=e.lastIndexOf(".");return-1!==t&&(e=e.substring(0,t)),e},widgetInPreviewMode:function(){return widget.id&&-1!==widget.id.indexOf("preview")&&!widget.getValue("addinmode")},showLoadingMessage:function(e,t){r.isMasked(e)||r.mask(e,t||D)},hideLoadingMessage:function(e){r.unmask(e)},showAndUpdateContextualDropdownMenuPosition:function(e,t){e.options.contextual=!0,e.show(),e.updatePosition(t),e.options.contextual=!1},_alreadyHasObjectInRelatedData:function(t,n,i){var a=t.get(n)||[],o=a.detect||a.find;return o&&o.call(a,function(t){return!e.is(t,"string")&&(e.equals(t.id,i)||t.get("physicalId")===i||t.get("dsaccess:accountName")===i||"iam:"+t.get("dsaccess:accountName")===i||t.get("groupURI")&&t.get("groupURI")===i)},i)},setHeaderMetaTag:function(){var e=top.document.getElementsByName("viewport");e&&e.length&&e[0].setAttribute("content","user-scalable=0, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height")},disableBrowserDefaultPinchZoom:function(){t.Platform.ios&&document.documentElement.addEventListener("touchstart",function(e){e.touches.length>1&&(e.stopPropagation(),e.preventDefault())},{passive:!1})},isWedoTask:function(e){return"swym:WeDo"===e},isTask:function(e){return"dsplan:Task"===e||b.isWedoTask(e)||"Task"===e},isProject:function(e){return"dsplan:Project"===e||"dsplan:xProject"===e},isTaskAnyType:function(e){return b.isTask(e)||"Inbox Task"===e},isGate:function(e){return"Gate"===e},isMilestone:function(e){return"Milestone"===e},isPhaseTask:function(e){return"Phase"===e}};let S,I,T;return b.getTenantErrorMessage=function(e,t){return w.replace(w.get("E6WCommonUI.Alert.FailedToAttachObjectWithDifferentTenant"),{TENANT1:e,TENANT2:t})},b.displayAlreadyAttachedErrorMessage=function(e,t){var n;n="Person"===t.get("type")||"pno:Person"===t.get("type")?w.replace(w.get("E6WCommonUI.Warning.AlreadyAssociated"),{TASK_NAME:e,ALREADY:t.get("name")}):"foaf:Group"===t.get("type")||"Group"===t.get("type")||"Group Proxy"===t.get("type")?w.replace(w.get("E6WCommonUI.Warning.GroupAlreadyAssociated"),{TASK_NAME:e,ALREADY:t.get("name")}):t.getObjectType()===p.LOGICAL_USER_TYPE?w.replace(w.get("E6WCommonUI.Warning.LogicalUserAlreadyAssociated"),{TASK_NAME:e,ALREADY:t.get("name")}):C.includes(t.get("type"))?w.replace(w.get("E6WCommonUI.Warning.ProcessAlreadyAttached"),{PARENT_NAME:e,EXISTING_CHILD_NAME:t.get("title")}):w.replace(w.get("E6WCommonUI.Warning.AlreadyAttached"),{PARENT_NAME:e,EXISTING_CHILD_NAME:t.get("title")}),b.displayError(n)},b.getObjectDataFromDropSearchOrTypeAhead=function(e){var t;return e.dropObj?t=function(e){var t={},n=e.objectId;return"foaf:Group"!==e.objectType&&e.resourceUid&&(n=u.addUUIDToURI(e.resourceUid)),t.id=n,t.title=e.displayName,t.serviceId=e.serviceId,t.tenant=e.envId,t.image=e.image||e.displayPreview,t.type=e.objectType,"pno:Person"===e.objectType&&(t.accountName=d.splitUri(e.objectId)[1]),t}(e.dropObj):e.detailedObject&&(t=function(e){var t={},n=e.sourceId?e.sourceId.split(":")[1]:window.enoviaServer.tenant,i=e.id;return e.resourceUid&&!i.startsWith("mailto:")&&(i=u.preProcessPersonObject(e.resourceUid,e)),t.id=i,t.title=e.label||e["ds6w:label"],t.serviceId=e.serviceId||e.sourceId||"3DSpace",t.tenant=n,t.image=e.image||e.type_icon_url,t.type=e["ds6w:type_value"]||e["ds6w:type"],"pno:Person"===t.type&&(t.accountName=u.getAccountNameForUser(i,e.resourceUid)),t}(e.detailedObject)),t},b.normalizedToJson=function(t,n){return"function"==typeof t.dataForRendering?t.dataForRendering(n):"function"==typeof t.toJSON?t.toJSON(n):e.clone(t,!1)},b.copyTextToClipboard=function(e){var t=document.createElement("INPUT");t.setAttribute("type","text"),t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,999999),document.execCommand("copy"),document.body.removeChild(t)},b.isLoggedInUser=function(e){return e&&e.toUpperCase()===window.enoviaServer.user.toUpperCase()},b.isModelOwnerTheLoggedInUser=function(e){var t=e.get("dskern:owner");return t&&b.isLoggedInUser(t.get("dsaccess:accountName"))},b.getNewRouteIndexFromManagmentView=function(e,t){var n=t.collection,i=n.indexOf(e);return i===n.size()-1&&(i-=1),i},b.getDaysStringForDate=function(e){let t="Days",n=0;return void 0!==e&&(n=d.xsdDayTimeDurationToMilliseconds(e)/(60*p.WORKING_HOURS_IN_A_DAY*60*1e3)),1===n&&(t="Day"),t},b.validateObjectTenant=function(){var e=widget.getValue("X3DContentId");if(e){var t=(e=JSON.parse(widget.getValue("X3DContentId"))).data.items[0],n=h.getTenant();if(t&&t.envId!==n){var i=w.get("E6WComonUI.Warning.TenantMismatch");b.displayWarning(w.replace(i,{TENANT:t.envId}),1e4)}}},b.translateType=function(e){return E[e]||e},b.isValidDate=function(e){return e instanceof Date&&!isNaN(e)},b.isFileNotFound=function(e){return!!(e&&e.errorMsg&&e.errorMsg.contains("404"))},b.fixDisplayMessageMethod=function(){b.displayMessage=b.workaroundDisplayMessage},b.assignToSelfButtonConfig=function(){return{id:"assignToSelfItem",iconClass:"fonticon-user-ok",callback:function(){this.model.assignToSelf(this.options)},toolTip:b.i18n("E6WCommonUI.Command.AssignToSelf")}},b.getDefaultImage=function(e){return b.isTask(e["dsxplan:jsType"])?require.toUrl("E6WCommonApps/assets/img/iconSmallTask.png"):"dsplan:xProject"===e["dsplan:projectType"]?require.toUrl("E6WCommonApps/assets/img/I_EnterpriseProject_Thumbnail.png"):require.toUrl("E6WCommonApps/assets/img/I_TeamProject_Thumbnail.png")},b.loadJSDependency=function(e){return new i(function(t,n){require([e],function(e){t(e)},function(e){n(e)})})},b.sanitizeMessage=function(e){return y({message:e})},b.createTooltip=function(e,t){return new s({target:e,body:t||""})},Object.defineProperty(b,"DATE_FORMAT",{get:()=>(S||(S=new Intl.DateTimeFormat(h.getCurrentLanguage(),{weekday:"short",year:"numeric",month:"short",day:"numeric"})),S)}),Object.defineProperty(b,"DATE_LONG_FORMAT",{get:()=>(I||(I=new Intl.DateTimeFormat(h.getCurrentLanguage(),{weekday:"long",year:"numeric",month:"long",day:"numeric"})),I)}),Object.defineProperty(b,"TIME_FORMAT",{get:()=>(T||(T=new Intl.DateTimeFormat(h.getCurrentLanguage(),{hour:"numeric",minute:"numeric"})),T)}),b.IMAGE_MAX_WIDTH=160,b.IMAGE_MAX_HEIGHT=120,b.IMAGE_MAX_BYTE_SIZE=16300,b.LONG_MSG_DELAY=15e3,b.workaroundDisplayMessage=b.displayMessage,b}),define("DS/E6WCommonUI/Models/CloneModel",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Class/Listener","UWA/Class/Collection","DS/E6WCommonUI/UIHelper"],function(e,t,n,i,a,o){"use strict";function r(e,t){var n;if(t)for(var i=0;i<t.length;i++){var a=t[i];if(a.id===e){n=a;break}}return n}var s=t.extend(n,{init:function(e,t){this.config=t&&t.config||{imageAttribute:"image",attributeToDisplay:"title"},this.file=e},get:function(e){return"canEdit"!==e&&(e===this.config.imageAttribute&&this.file?this.file.FileName?"":window.URL.createObjectURL(this.file):e===this.config.attributeToDisplay&&this.file instanceof window.File?this.file.name:this.file.FileName)},toJSON:function(){var e={};return e[this.config.imageAttribute]=this.get(this.config.imageAttribute),e[this.config.attributeToDisplay]=this.get(this.config.attributeToDisplay),e.canEdit=this.get("canEdit"),e}}),l=t.extend(n,i,{_uwaClassName:"CloneModel",FileValue:s,i18n:function(e,t){return t||e},init:function(t,n){var i=e.clone(n||{},!1);i.i18n&&(this.i18n=n.i18n),this.model=t,e.is(this.model.addEvent,"function")&&this.listenTo(this.model,"onAnyEvent",function(e){if(0===e.indexOf("onChange")){var t=Array.prototype.slice.call(arguments,1);t[0]=this,this.dispatchEvent(e,t)}}),this.localAttributes={},this.localRelatedData={},this._options=i,Object.defineProperty(this,"csrf",{get:function(){return this.model.csrf}}),Object.defineProperty(this,"id",{get:function(){return this.model.id}}),e.is(this.model.updateDocument,"function")&&(this.updateDocument=this.model.updateDocument.bind(this.model))},createWhitelistMap:function(e){var t,n=e||{};if(n.attributes){t={};for(var i=n.attributes.length,a=0;a<i;a++){t[n.attributes[a]]=!0}}return t},_dataForRendering:function(){return e.is(this.dataForRendering,"function")?this.dataForRendering.apply(this,arguments):e.is(this.toJSON,"function")?this.toJSON():e.clone(this,!1)},toJSON:function(){var t=e.is(this.model.toJSON,"function")?this.model.toJSON.apply(this.model,arguments):e.clone(this.model,!1);return this._overlayAttributes(t),t},dataForRendering:function(){var e=this._dataForRendering.apply(this.model,arguments);return this._overlayAttributes(e),e},_overlayAttributes:function(t){for(var n=t,i=Object.keys(this.localRelatedData),a=i.length,o=0;o<a;o++){for(var r=i[o],s=this.get(r),l=s?s.length:0,c=[],d=0;d<l;d++){var u=s.at?s.at(d):s[d];c.push(this._dataForRendering.call(u))}n[r]=c}var h=Object.keys(this.localAttributes);a=h.length;for(var p=0;p<a;p++){var m=h[p],f=this.localAttributes[m];e.is(f,"object")&&(f=this._dataForRendering.call(f)),n[m]=f}return n},_hasModifiedProperty:function(e){return!(!this.localAttributes.hasOwnProperty(e)&&!this.localRelatedData.hasOwnProperty(e))},get:function(t){var n=this.localRelatedData[t],i=this.model.get(t);if(!n){var o=this.localAttributes[t];return void 0!==o?o:i}(i=i||[])instanceof a&&(i=i.toArray());for(var r=n.length,s=0;s<r;s++){var l,c=n[s];if("add"===c.operation)l=c.value,i&&i.unshift?i.unshift(l):i=[l];else if("remove"===c.operation)if(e.is(i.toArray,"function")&&(i=i.toArray()),!e.is(i,"string")&&e.is(i.indexOf,"function")){var d=i.indexOf(c.value);i.splice(d,1)}else i===c.value?i=void 0:e.is(i,"string")&&i===c.value.id&&(i=void 0)}return i},set:function(t,n,i){var a=e.clone(i||{},!1),o=n,r=a&&a.whisper;r&&delete a.silent;var s=a&&a.silent;this.localAttributes[t]=o;var l=this.modificationsPending;this.modificationsPending=!0,s||r||this.dispatchEvent("onChange",[this,i]),s||r||this.dispatchEvent("onChange:"+t,[this,n,i]),s||l===this.modificationsPending||this.dispatchEvent("onChange:modificationsPending",[this]),a&&a.validate&&this.validate&&(this.validationError=this.validate(this.toJSON(),a),!s&&this.validationError&&this.dispatchEvent("onValidationFailure"))},add:function(n,i,a){var o;e.is(i,"array")||i instanceof window.FileList?o=i:i instanceof t?o=[i]:e.is(i.split,"function")&&(o=i.split(",").map(function(e){return e.trim()}));for(var s=o.length,l=[],c=!1,d=!1,u=e.clone(a||{},!1),h=0;h<s;h++){var p=o[h];u.detailedObject=r(p,u.detailedObjects);var m=this.addIndividualObject(n,p,void 0,u);m.ret&&l.push(m.ret),c=c||m.changed,d=d||m.changedModificationPending}return d&&this.dispatchEvent("onChange:modificationsPending",[this]),c&&(u.operation="add",u.added=l,this._fireRelationshipChangeEvents(n,u)),l},addIndividualObject:function(t,n,i,a){var r,s=this.localRelatedData[t];s||(s=this.localRelatedData[t]=[]);var l=!1,c=this.modificationsPending,d=a.DocumentManagement&&a.DocumentManagement.MSFDocumentClient;if(!e.is(n,"string")){if(d&&d.IsConnectedToMSFClient()||n instanceof window.File||n instanceof window.Blob){var u=n,h=new this.FileValue(u,a),p={operation:"add",input:u,value:h};return p.isThumbnail=a&&a.config&&a.config.isThumbnail,s.push(p),this.modificationsPending=!0,u&&(r=h),{ret:r,changed:!0,changedModificationPending:this.modificationsPending!==c}}return this.addIndividualObjectAsModel(t,n)}var m=o._alreadyHasObjectInRelatedData(this,t,n);if(m)return o.displayAlreadyAttachedErrorMessage(this.get("title"),m),{ret:r,changed:l,changedModificationPending:this.modificationsPending!==c};var f,g=i||this.getObjectToBeAdded(t,n,a);g&&e.is(this.model.addEvent,"function")&&e.is(this.model.removeEvent,"function")&&this.listenTo(g,"onDestroy",function(){var n=e.clone(a||{},!1);this._removeByValueFromLocalRelatedData(t,g)&&this._fireRelationshipChangeEvents(t,n),this.stopListening(g)});var v=s.length,w=void 0!==g;for(f=v-1;w&&f>=0;f--){var D=s[f];if(D.value.id===n)switch(w=!1,D.operation){case"remove":s.splice(f,1),l=!0}}return w&&(s.push({operation:"add",input:g.id,value:g}),this.modificationsPending=!0,l=!0),{ret:r=g,changed:l,changedModificationPending:this.modificationsPending!==c}},addIndividualObjectAsModel:function(e,t){this.localRelatedData[e]=this.localRelatedData[e]||[];var n=o._alreadyHasObjectInRelatedData(this,e,t.id);if(n&&!t.isNew())return o.displayAlreadyAttachedErrorMessage(this.get("title"),n),{ret:void 0,changed:!1,changedModificationPending:!1};var i=this.modificationsPending;return this.localRelatedData[e].push({operation:"add",input:t,value:t}),this.modificationsPending=!0,{ret:t,changed:!0,changedModificationPending:this.modificationsPending!==i}},getObjectToBeAdded:function(t,n,i){var a,o,r,s,l,c;i&&i.dropObj&&i.dropObj.serviceId?(o=i.dropObj.serviceId,r=i.dropObj.envId):i&&i.detailedObject&&"usersgroup"===(o=i.detailedObject.serviceId)&&(s="Group",l=i.detailedObject.image,c=i.detailedObject.label);let d="3DSpace"!==o;return a=e.is(this.model.collection.getRelatedObject,"function")&&this.model.collection.getRelatedObject(t,n,d,void 0,{attributes:{service:o,tenant:r,type:s,image:l,Title:c}}),d&&"3DDrive"!==o&&(a.serviceId=o,a.fetch()),a},remove:function(t,n,i){var o=e.clone(i||{},!1);o.at=n;var r,s=this.get(t);e.is(s,"array")?r=s[n]:e.is(s.at,"function")&&(r=s.at(n)),r||e.is(s,"array")||s instanceof a||(r=s),r&&this._removeByValue(t,r,o)},_removeByValue:function(t,n,i){var a=e.clone(i||{},!1),o=i.at||0,r=this.localAttributes[t];if(!r||this.model.get(t)){var s=this.localRelatedData[t];if(s||(s=this.localRelatedData[t]=[]),!this._removeByValueFromLocalRelatedData(t,n)){var l={operation:"remove",input:o,value:n};i&&i.config&&i.config.isThumbnail&&(l.isThumbnail=!0),s.push(l),this.modificationsPending=!0,this.dispatchEvent("onChange:modificationsPending",[this])}a.operation="remove",a.removed=n,this._fireRelationshipChangeEvents(t,a)}else{delete this.localAttributes[t],a.operation="remove",a.removed=r,this._fireRelationshipChangeEvents(t,a);var c=Object.keys(this.localAttributes),d=Object.keys(this.localRelatedData);0===c.length&&0===d.length&&(this.modificationsPending=!1,this.dispatchEvent("onChange:modificationsPending",[this]))}},_removeByValueFromLocalRelatedData:function(e,t){var n=this.localRelatedData[e],i=!1;if(n)for(var a=n.length-1;a>=0;a--){var o=n[a];if(o.value===t)switch(i=!0,o.operation){case"add":if(n.splice(a,1),0===n.length){delete this.localRelatedData[e];var r=Object.keys(this.localAttributes),s=Object.keys(this.localRelatedData);0===r.length&&0===s.length&&(this.modificationsPending=!1,this.dispatchEvent("onChange:modificationsPending",[this]))}}}return i},cancel:function(){var e=this.localAttributes,t=this.localRelatedData;if(this.localAttributes={},this.localRelatedData={},this.modificationsPending){this.modificationsPending=!1,this.dispatchEvent("onChange:modificationsPending",[this]),this.dispatchEvent("onChange",[this]);var n=Object.keys(e);n.push.apply(n,Object.keys(t));for(var i=n.length,a=0;a<i;a++)this.dispatchEvent("onChange:"+n[a])}},save:function(t){var n=e.clone(t||{});this.modificationsPending=!1,this.dispatchEvent("onChange:modificationsPending",[this]);var i=this._saveRelatedData(n)||n.changed,a=this.localAttributes;Object.keys(a).length?i=!0:a=null,this.localAttributes={},i&&this._modelSave(a,n)},_modelSave:function(t,n){var i=e.clone(n||{},!1);e.merge(i,this._options),this.model.save(t,i)},_saveRelatedData:function(t){var n=!1,i=this.localRelatedData,a=Object.keys(i);this.localRelatedData={};for(var o=a.length,r=0;r<o;r++){var s=a[r],l=i[s];if(l)for(var c=l.length,d=0;d<c;d++){var u=l[d];"add"===u.operation?u.input instanceof window.File||u.input.FileName?this._addFile(s,u,t):(e.is(this.model.addObjects,"function")&&this.model.addObjects([u.input],s,void 0,{silentOnChange:!0,at:0,values:[u.value]}),n=!0):"remove"===u.operation&&(u.isThumbnail?e.is(this.model.removeThumbnail,"function")&&this.model.removeThumbnail(s,u.value,{silentOnChange:!0}):(e.is(this.model.removeObject,"function")&&this.model.removeObject(s,u.value,{silentOnChange:!0}),n=!0))}}return n},_addFile:function(t,n,i){var a=e.clone(i||{},!1);if(n.isThumbnail)this.model.uploadThumbnail(n.input,t,{noSave:!0,fileWrapper:n.value});else{var o,r,s={fieldName:t};e.merge(s,a);var l=n.input.FileName;n.input instanceof window.File&&(l=n.input.name),s.fileName=l,o=this.onFileUploadComplete.bind(this,s),r=this.onFileUploadFailure.bind(this,s),e.is(this.model.uploadFiles,"function")&&this.model.uploadFiles([n.input],t,e.merge({noSave:!0,fileWrapper:n.value,onComplete:o,onFailure:r},a))}},destroy:function(){this.stopListening(),delete this.model},isValid:function(e){return!this.validate||!this.validate(this.toJSON(),e)},_fireRelationshipChangeEvents:function(e,t,n,i){t&&t.silent||(i||(this.dispatchEvent("onChange:"+e,[this,t]),"add"===t.operation?this.dispatchEvent("onAdd:"+e,[this,t]):"remove"===t.operation&&this.dispatchEvent("onRemove:"+e,[this,t])),n||this.dispatchEvent("onChange",[this,t]))},onFileUploadComplete:function(e){if(e.onComplete)e.onComplete();else{var t=this.i18n("emxFoundation.Label.FileUploadSuccess");t=t.replace("%FILE_NAME%",e.fileName),o.displaySuccess(t)}},onFileUploadFailure:function(e,t){this.dispatchEvent("onChange:"+e.fieldName);var n=t;n||(n=(n=this.i18n("emxFoundation.Error.FileUploadFailed")).replace("%FILE_NAME%",e.fileName)),o.displayError(n)}});return l.FileValue=s,l}),define("DS/E6WCommonUI/Models/DropValidator",["UWA/Core","DS/RDFFoundation/RDFUtils","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/PlatformManager","DS/E6WCommonUI/E6WCommonUIConstants","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],function(e,t,n,i,a,o){"use strict";var r={validateDroppedObject:function(e,n){var i=r._validateType(e,n);if(!i&&n.validateSameTenant&&(i=r.validateTenant(e)),!i){var a=n.searchSource;n.dropTypes&&(a=Object.keys(n.dropTypes)),i=r._validateSource(t.sourceFromService(e.serviceId),a)}return i||"pno:Person"!==e.objectType||n.excludePendingUser&&0===e.objectId.indexOf("mailto:")&&(i=o.get("E6WComonUI.Error.CantAddPendingPersons")),i||"dsxplan:workscopeParentForMilestone"!==n.name||(i=o.get("E6WCommonUI.Alert.InvalidDataDropped")),i},validateTenant:function(e){var t;return e.envId!==i.getTenant()&&(t=n.getTenantErrorMessage(e.envId,i.getTenant())),t},_validateSource:function(e,t){var n;return-1===(t&&t.length>0?t.slice(0):["3dspace"]).indexOf(e)&&("3dplan"===e&&(e=o.get("E6WCommonUI.Label.ProjectPlanning")),n=o.replace(o.get("E6WCommonUI.Alert.FailedToAttachObjectBadSource"),{SOURCE:e})),n},_validateType:function(e,i){var a,s=!1,l=e.objectType,c=e.displayType,d=t.sourceFromService(e.serviceId),u=i.dropTypes||i.searchSourceTypes;if(u){var h=u[d];h&&(s=-1===h.indexOf(l))}if(i.searchTypes){var p=i.searchTypes.split(",");s=s||-1===p.indexOf(l)}if(!s&&i.excludeSearchTypes){var m=r._getExcludedSearchTypeArray(d,i);s=m.length&&-1!==m.indexOf(l)}return s&&(a=o.replace(o.get("E6WCommonUI.Alert.FailedToAttachObjectBadType"),{TYPE:c||n.translateType(l)})),a},_getExcludedSearchTypeArray:function(t,n){var i=n.excludeSearchTypes;return e.is(i,"object")?n.excludeSearchTypes[t]||[]:i.split(",")},PERSON_DROP_TYPES:{"3dspace":["Person","Group Proxy","Group"],swym:["pno:Person"]}};return r.RDF_ASSIGNEE_DROP_TYPES={swym:[a.PERSON_TYPE],"3dplan":["dsplan:LogicalUser"]},i.enableUserGroup()&&(r.RDF_ASSIGNEE_DROP_TYPES.usersgroup=[a.USER_GROUP_TYPE]),r.MEMBER_DROP_TYPES={swym:["pno:Person"],usersgroup:["foaf:Group"]},r}),define("DS/E6WCommonUI/Views/E6WHandlebarsHelpers",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/WidgetUtils","DS/E6WCommonUI/UIHelper"],function(e,t,n,i){"use strict";var a={};if(!t.helpers.userPictureUrl){var o={registerHelper:function(e,n){t.registerHelper(e,n)}};o.registerHelper("userPictureUrl",function(e,t,n){return e?i.userPictureURL(e,void 0,{type:t,imageUrl:n}):""}),o.registerHelper("assetImageURL",function(e){return e?require.toUrl(e):""}),o.registerHelper("makeHTML5Date",function(e){return n.makeHTML5Date(e)}),o.registerHelper("i18n",function(e){return a.i18n(e)});t.registerHelper("eachLimit",function(e){return function(t,n,i){var a,o="",r=t?t.length:0,s=r>n&&n>0?n:r,l=i&&i.hash&&i.hash.startingIndex||0;if(i.data&&(a=e.createFrame(i.data)),"number"!=typeof r)o=i.fn(t);else{for(var c=0,d=s;c<d;c++)a&&(a.index=c,a.indexWithOffset=c+l),o+=i.fn(t[c],{data:a});s!==r&&(o+=i.inverse(this,{data:a}))}return o}}(t)),o.registerHelper("E6Wif",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),o.registerHelper("readOnlyValue",function(e){return e&&0!==parseInt(e)&&0!==parseFloat(e)?e:"--"}),o.registerHelper("ifEmpty",function(t,n){return t&&e.is(t,"array")&&t.length>0||t&&0!==parseInt(t)&&0!==parseFloat(t)?n.inverse(this):n.fn(this)}),t.registerHelper("isdefined",function(e){return void 0!==e}),o.registerHelper("concat",function(){var e="";for(var t in arguments)"object"!=typeof arguments[t]&&(e+=arguments[t]);return e})}return a}),define("DS/E6WCommonUI/SvgUtils",["UWA/Core","DS/E6WCommonUI/UnitBezier"],function(e,t){"use strict";return{createSVGElement:function(t,n){var i=e.extendElement(document.createElementNS("http://www.w3.org/2000/svg",t));return n&&i.setAttributes(n),this.convertToAnimatableSVG(i),Object.defineProperty(i,"offsetHeight",{get:function(){try{return this.getBBox?this.getBBox().height:0}catch(e){return 0}}}),Object.defineProperty(i,"offsetWidth",{get:function(){try{return this.getBBox?this.getBBox().width:0}catch(e){return 0}}}),i},convertToAnimatableSVG:function(n){return n.animationFrameTimestamps={},n.setAttribute=function(e){var t=this.animationFrameTimestamps[e];t&&(window.cancelAnimationFrame(t),delete this.animationFrameTimestamps[e]),this.__proto__.setAttribute.apply(this,arguments)}.bind(n),n.animateAttribute=function(i,a,o){var r,s=null,l=n.getAttribute(i),c=0,d=this,u=function(e){delete d.animationFrameTimestamps[i],s||(s=e);var t=e-s;if(t<o){var n=parseFloat(l+c*r.solve(t/o));d.setAttribute(i,n),d.animationFrameTimestamps[i]=window.requestAnimationFrame(u)}else d.setAttribute(i,a)};["x","y","width","x2","cx"].indexOf(i)>-1?(l=l?parseFloat(l):0,o=o||"0.5s",r=new t({easeOut:(c=a-l)<0}),d.animationFrameTimestamps[i]=window.requestAnimationFrame(u)):(e.log("Animate not defined for attribute "+i+". Just setting it."),n.setAttribute(i,a))}.bind(n),-1!==this.displayPosition}}}),define("DS/E6WCommonUI/Views/FoundationBaseView",["UWA/Core","UWA/Element","UWA/Event","UWA/Class/View","DS/E6WCommonUI/SvgUtils"],function(e,t,n,i,a){"use strict";var o=new WeakMap,r=t.prototype.constructor.hasClassName;t.prototype.constructor.hasClassName=function(e){if(this instanceof SVGElement){var t=this.className.baseVal;return t&&t.contains(e," ")}return r.apply(this,arguments)};var s=t.prototype.constructor.addClassName;t.prototype.constructor.addClassName=function(e){return this instanceof SVGElement?(this.hasClassName(e)||this.setAttribute("class",this.getAttribute("class")+" "+e),this):s.apply(this,arguments)};var l=t.prototype.constructor.removeClassName;t.prototype.constructor.removeClassName=function(e){if(this instanceof SVGElement){var t=this.getAttribute("class")||"";return this.setAttribute("class",t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)"),"$1").trim()),this}return l.apply(this,arguments)};var c=i.extend({tagName:"div",id:function(){var e;return this.collection?e=this.collection.extid:this.model&&(e=this.model.id),e},_startOfSetup:Function.prototype,_endOfdestroy:Function.prototype,setup:function(e){return this._startOfSetup(),o.set(this.container,this),this._parentView=e?e.parentView:void 0,e},init:function(t){var n=t&&t.tagName||this.tagName,i=t&&t.className||this.className,a=t&&t.id||this.id;if(!t||!t.container){var o=/^svg:(.*)/.exec(n);if(o){this.model=t&&t.model,this.collection=t&&t.collection;var r=t&&t.attributes||this.attributes||{};i&&(i=e.is(i,"function")?i.call(this):i,r.class=i),this.container=this.createSVGElement(o[1],r),a&&(e.is(a,"function")&&(a=a.call(this)),this.container.id=a)}}return this._parent.apply(this,arguments)},addChildView:function(e){return this._childrenViews?this._childrenViews.push(e):this._childrenViews=[e],e._parentView||(e._parentView=this),e},cleanUpChildren:function(){var t=this;this._childrenViews&&(e.clone(this._childrenViews,!1).forEach(function(n){t.stopListening(n),n._parentView===t?e.is(n.destroy,"function")&&n.destroy():console.log("parentView of childView is inconsistent, check for bugs")}),delete this._childrenViews)},removeChildView:function(e){if(this._childrenViews){var t=this._childrenViews.indexOf(e);if(-1!==t)return this._childrenViews.splice(t,1),e._parentView===this&&delete e._parentView,!0}return!1},destroy:function(){this.isDestroyed?console.log("FoundationBaseView: View destroyed twice. Check for bug."):(this.dispatchEvent("onDestroy"),this.cleanUpChildren(),this.stopListening(),this.collection=null,this.model=null,this._parentView&&this._parentView.removeChildView(this),this._parent(),this.container&&this.container.empty(!0),this.container=null,this._parentView=null,this.isDestroyed=!0,this._endOfdestroy())},setDefaultImages:function(e){for(var t=(e||this.container).getElements("img"),n=t.length,i=function(){this.removeEvent("error"),this.src=""},a=0;a<n;a++){t[a].addEvent("error",i)}},createSVGElement:function(e,t){return a.createSVGElement(e,t)},escapeCssId:function(e){return e.replace(/[:=? ~!@$%^&*()+,./';"><[\]{}|`#]/g,"\\$&")}});return c.getViewFromContainer=function(e){return e&&o.get(e)},c}),define("DS/E6WCommonUI/Views/DetailsDisplaySharedView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/E6WHandlebarsHelpers","DS/E6WCommonUI/UIHelper","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],function(e,t,n,i,a,o){"use strict";var r=n.extend({_uwaClassName:"E6WCommonUIDetailsDisplaySharedView",tagName:"div",className:"details-display-shared-view ddv-field form-group ",name:"E6WCommonUI.DetailsDisplaySharedView",id:function(){return this._config.type+"Property_"+this.cid},init:function(t){var n=e.clone(t||{},!1);this._config=n.config,this._parent.apply(this,arguments),this.setConfiguredTemplate()},setConfig:function(e){this._config=e,this.setConfiguredTemplate()},setup:function(t){var n=e.clone(t||{},!1);this._options=n;var i=n.i18n;i&&(this.i18n=i),this.tenant=n.tenant,this.model&&this._config&&this.addModelEvents(),this._setContainerAttributes(),this._parent.apply(this,arguments)},setConfiguredTemplate:function(){if(this.compiledTemplate){var e=i.i18n;i.i18n=o.get.bind(o);var n=this._config;n.viewId="_"+this.cid;var a=this.compiledTemplate(n);n.template=t.compile(a),i.i18n=e}},template:function(e){var t=e.data,n=i.i18n;i.i18n=o.get.bind(o);var a=this._config.template(t);return i.i18n=n,a},_setContainerAttributes:function(){var e=this._config;e.className&&this.container.toggleClassName(e.className,!0),e.W&&this.container.toggleClassName("sixdub "+e.W,!0),this.container.setAttribute("data-field-type",e.type),this.container.setAttribute("data-field-name",e.name),this.container.setAttribute("data-field-index",e.index)},addModelEvents:function(){var e=this._config;this.model&&this.model.addEvent&&(this.listenTo(this.model,"onChange:"+e.name,function(e,t,n){n&&n.detailsDisplayViewDebounce||this.refreshView()}),e.endDateAttribute&&this.listenTo(this.model,"onChange:"+e.endDateAttribute,function(){this.render()}),this.listenTo(this.model,"onValidationFailure",this._highlightValidationErrors),this.listenTo(this.model,"onValidationSuccess",this._clearValidationErrors))},refreshView:function(){this.render()},resetModel:function(e){e!==this.model&&(this.model&&this.stopListening(this.model),this.model=e,this.addModelEvents(),this._highlightValidationErrors())},_highlightValidationErrors:function(){if(this._clearValidationErrors(),this.model&&this.model.validationError&&this.model.validationError.fields){var e=this._config,t=!1,n=this.container,i=e.name;if(-1!==this.model.validationError.fields.indexOf(i)){t=!0;var a=this.model.validationError.messages&&this.model.validationError.messages[i];a&&this._displayValidationError(a)}n&&n.toggleClassName("has-error",t)}},_displayValidationError:function(t){this._errorSpanNode||(this._errorSpanNode=e.createElement("span",{class:"text-error"})),this._errorSpanNode.inject(this.container),this._errorSpanNode.setText(t)},_clearValidationErrors:function(){this._errorSpanNode&&this._errorSpanNode.remove(),this.container.toggleClassName("has-error",!1)},normalizedSet:function(t,n,i){var a,o=t.validationError,r=e.clone(n||{},!1);return r.detailsDisplayViewDebounce=!0,e.is(t.set,"function")?(r.whisper=!0,a=t.set(n.name,i,r)):a=t[n.name]=i,o&&!t.validationError&&e.is(t.dispatchEvent,"function")&&t.dispatchEvent("onValidationSuccess"),a},normalizedGet:function(t,n){return t&&n?e.is(t.get,"function")?t.get(n):t[n]:""},render:function(t){if(!this.model)return this;var n=e.clone(t||{},!1).data;n=this._getData(n),this.undelegateDOMEvents();var i=this._config.readWrite;return i||(i=!1),this.container.toggleClassName("editable",Boolean(i&&n.canEdit)),this.container.setHTML(this.template({data:n})),this.delegateDOMEvents(),this._highlightValidationErrors(),this},getDataOptions:function(){return{attributes:[this._config.name,"canEdit"],level:0}},_getData:function(e){var t=e;if(!e&&this.model){var n=this.getDataOptions();t=a.normalizedToJson(this.model,n)}return t}});return r.events={menuOpened:"menuOpened"},r}),define("DS/E6WCommonUI/Views/TextAreaView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","text!DS/E6WCommonUI/assets/templates/textarea.html.handlebars"],function(e,t,n,i,a){"use strict";var o=0,r=t.compile(a),s=i.extend({_uwaClassName:"E6WCommonUITextAreaView",tagName:"div",name:"E6WCommonUI.TextAreaView",domEvents:{"click .show-more":"_textAreaShowMore","click .show-less":"_textAreaShowLess","input textarea.content ":"_inputDataEntry"},addModelEvents:function(){this._parent.apply(this,arguments),this.model.addEvent&&this.listenTo(this.model,"onChange:"+this._config.name,this._postTreatmentTextArea)},render:function(){this.removeEventListener();var e=this._parent.apply(this,arguments);return this.addEventListener(),this.container.toggleClassName("hide-links",!0),e},refreshView:function(){this._parent.apply(this,arguments),this._postTreatmentTextArea()},destroy:function(){this.removeEventListener(),this._parent.apply(this,arguments)},addEventListener:function(){var e=this.container.getElement("textarea,input");e&&(e.addEventListener("focus",this._textAreaShowMore.bind(this)),this._config.required&&(this._blurListener=this._onBlurInputDataEntry.bind(this),e.addEventListener("blur",this._blurListener)))},removeEventListener:function(){var e=this.container.getElement("textarea,input");e&&e.removeEventListener("blur",this._blurListener)},_getInputValue:function(){var e,t=(e=this._config.readWrite&&this.normalizedGet(this.model,"canEdit")?this.getElement(".content"):this.getElement(".read-only")).value;return this._config.removeCarriageReturns&&(t=t.replace(/\n/g," "),e.value=t),t},_inputDataEntry:function(){this.normalizedSet(this.model,this._config,this._getInputValue()),this._postTreatmentTextArea(this._config)},_onBlurInputDataEntry:function(){var e=this._getInputValue().trim();e!==this.normalizedGet(this.model,this._config.name)&&this.normalizedSet(this.model,this._config,e),!(this.model.validationError&&this.model.validationError.fields)&&this._config.required&&this.container.toggleClassName("has-error",!e||0===e.length)},_textAreaShowMore:function(){this.container.toggleClassName("showing-more",!0)},_textAreaShowLess:function(t){e.Event.getElement(t).getClosest(".form-group").toggleClassName("showing-more",!1),this._postTreatmentTextArea()},_postTreatmentTextArea:function(){var e,t=this._config;"text"===t.type&&(e=!0);var n=this.getContentElement();if(n){var i=this.getElement("style");if(i){var a="",r="",s="";try{o||(o=this.getLineHeight()),e&&(n.style.transition="none",n.style.height=o+"px"),this._viewAllHeight=this.getViewAllHeight();var l=this.getDesiredHeight();"textarea"!==t.type&&"RichText"!==t.type||(this._viewAllHeight<=l&&(this._viewAllHeight=l),this.container.toggleClassName("hide-links",isNaN(this._viewAllHeight)||isNaN(l)||this._viewAllHeight<=l)),a=this.getRegularStyle(),r=this.getFocusStyle(),s=this.getShowingMoreStyle(),i.setHTML(a+r+s)}finally{e&&(n.style.height="",window.requestAnimationFrame(function(){n.style.transition=""}))}}}},getContentElement:function(){return this.getElement(".content")},getHeightCalculatorElement:function(){return this.getElement(".height-calculator")},getSelectorBase:function(){return"#"+this._config.type+"Property_"+this.cid},getSelector:function(){return this.getSelectorBase()+" .content"},getSelectorFocus:function(){return this.getSelector()+":focus"},getLineHeight:function(){var e=this.getContentElement();return parseInt(e.getStyle("lineHeight"),10)},getDesiredHeight:function(){return this._config.numberOfDisplayLines*o},getFocusDesiredHeight:function(){return this._config.numberOfEditableLines*o},getShowingMoreStyle:function(){return"#"+this._config.type+"Property_"+this.cid+".showing-more .content"+this.getViewAllTextStyle()},getViewAllTextStyle:function(){return"{\n height:"+this._viewAllHeight+"px;\n line-height:"+o+"px;}"},getRegularStyle:function(){var e="",t=this.getSelector();if("text"===this._config.type)e=t+this.getViewAllTextStyle();else{var n=this.getDesiredHeight();isNaN(n)||(e=t+" { \n height:"+n+"px;\n line-height:"+o+"px; \n}\n")}return e},getFocusStyle:function(){var e="",t=this.getSelectorFocus(),n=this.getFocusDesiredHeight();return isNaN(n)||(e=t+" { \n height:"+n+"px;\r }\n"),e},getViewAllHeight:function(){var e,t=this.getContentElement(),n=this.getHeightCalculatorElement(),i=o;return n&&(e="SPAN"===t.tagName?t.textContent:(e=this.getTextValue()).htmlDecode().replace(/&nbsp;/g," ").replace(/(<([^>]+)>)/gi,""),n.textContent=e,n.style.lineHeight!==o+"px"&&(n.style.lineHeight=o+"px"),i=n.scrollHeight),i},getTextValue:function(){return this.getContentElement().value}});return s.prototype.compiledTemplate=r,s}),define("DS/E6WCommonUI/Views/DateView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/UIKIT/Input/Date","DS/ENO6WPlugins/jQuery_3.3.1","DS/E6WCommonUI/Views/DetailsDisplaySharedView","text!DS/E6WCommonUI/assets/templates/date.html.handlebars"],function(e,t,n,i,a,o,r){"use strict";var s=t.compile(r),l=!1,c=o.extend({_uwaClassName:"E6WCommonUIDateView",tagName:"div",name:"E6WCommonUI.DateView",domEvents:{'change input.data-entry[type="date"]':"_dateDataEntry","keyup input.input-date":"_dateDataEntry"},render:function(){var e=this._parent.apply(this,arguments);return this._setupUIKITDatePickers(),e},_setupUIKITDatePickers:function(){for(var t=this,n=this.getElements("input[type=date]"),o=n.length,r=this._dateDataEntry.bind(this),s=0;s<o;s++){var l=n[s],c=this._config,d=c.name,u=l.getParent();"startStop"===c.type&&c.endDateAttribute&&u.hasClassName("stop")&&(d=c.endDateAttribute);var h=this.normalizedGet(this.model,d);h&&h.actualValue&&(h=h.actualValue);var p={events:{onChange:r},allowTextEdition:void 0===c.allowTextEdition||c.allowTextEdition,renderTo:this.container};c.min instanceof Date&&(p.min=new Date(c.min.getTime())),c.max instanceof Date&&(p.max=new Date(c.max.getTime())),e.is(h,"string")&&h?p.value=new Date(parseInt(h,10)):h instanceof Date&&(p.value=isNaN(h)?"":h),this._childrenViews||(this._childrenViews=[]);var m=new i(p);m.getContent().addEventListener("change",r),this.addChildView(m),a.data(u,"dateInput",m),l.remove(),m.inject(u),m.elements.picker.addEvent("onShow",function(){var e=this.options.field.getOffsetParent().offsetLeft,n=this.options.field.offsetWidth,i=t.container.offsetWidth,a=this.elements.container.offsetWidth,o=e;e+a>i&&(o=o+n-a),this.elements.container.setStyle("left",o+"px")})}},_dateDataEntry:function(t){if(t.ctrlKey||17===t.keyCode)l=!0;else if(l&&67===t.keyCode)l=!1;else{var n=e.Event.getElement(t),i=this._config;if(i){var a;if(t.firedBy)a=t.firedBy.getDate()?t.firedBy.getDate().getTime():"";else if(a=n.value,""!==n.value){var o=new Date(n.value);a=new Date(o.getTime()+6e4*o.getTimezoneOffset()).getTime()}var r=i.name;"startStop"===i.type&&i.endDateAttribute&&n.getParent().hasClassName("stop")&&(r=i.endDateAttribute);var s=e.clone(this._config,!1);s.name=r;var c=isNaN(a)?"":{actualValue:a};this.normalizedSet(this.model,s,c)}}}});return c.prototype.compiledTemplate=s,c}),define("DS/E6WCommonUI/Views/NumberView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","text!DS/E6WCommonUI/assets/templates/number.html.handlebars"],function(e,t,n,i,a){"use strict";var o=t.compile(a),r=i.extend({_uwaClassName:"E6WCommonUINumberView",tagName:"div",name:"E6WCommonUI.NumberView",domEvents:{'input input.data-entry[type="number-as-text"]':"_numberDataEntry"},render:function(){var e=this._parent.apply(this,arguments);return this._postTreatmentNumber(),e},_numberDataEntry:function(t){var n=e.Event.getElement(t),i=this._config,a=n.value,o=new RegExp("^-?[0-9]*[,.]?[0-9]*$"),r=i.name;i.toleranceName&&n.getClosest(".field-group").hasClassName("tolerance")&&(r=i.toleranceName);var s=this.normalizedGet(this.model,r);if(o.test(a)){-1!==a.indexOf(",")&&(a=a.replace(/,/g,"."));var l=parseFloat(a,10),c=parseFloat(i.minimumValue,10);!isNaN(c)&&!isNaN(l)&&l<c&&(l=s,n.value=l),a=this._getActualValueBasedOnNumValue(l),this.isValidInput(a)&&this.normalizedSet(this.model,{name:r,validate:i.validate},a)}else n.value=isNaN(s)?"":s},isValidInput:function(e){return!isNaN(e)},_getActualValueBasedOnNumValue:function(e){return String(e)},_postTreatmentNumber:function(){var e,t=this._config,n=this.getElement("input"),i=this.normalizedGet(this.model,t.name);null!=(i=null===i?0:i)&&n&&(e=i.actualValue||0===i.actualValue?i.actualValue:i,e=(e=parseFloat(e)).toLocaleString(widget.lang,{useGrouping:!1}),n.value=e)}});return r.prototype.compiledTemplate=o,r}),define("DS/E6WCommonUI/Views/SelectView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/RDFFoundation/RDFUtils","DS/Controls/ComboBox","text!DS/E6WCommonUI/assets/templates/select.html.handlebars"],function(e,t,n,i,a,o,r){"use strict";var s=t.compile(r),l=i.extend({_uwaClassName:"E6WCommonUISelectView",tagName:"div",name:"E6WCommonUI.SelectView",domEvents:{"change select.data-entry":"_selectDataEntry"},setup:function(){this._parent.apply(this,arguments),e.is(this._config.values,"function")&&(this._valuesFunc=this._config.values,this._config.values=this._valuesFunc(),this._valuesFunc.dispatchEvent&&this.listenTo(this._valuesFunc,"onChange",function(){this._updateValues(),this.setConfiguredTemplate(),this.render()}))},render:function(){var e=this._parent.apply(this,arguments),t=[];if(this._selectElement=this.getElement("select"),this._selectElement&&widget&&widget.useUIKitSelect){if(this._config&&this._config.values&&this._config.values.length)for(var n,i=0;i<this._config.values.length;i++)(n=this._config.values[i]).icon?t.push({valueItem:n.actualValue,labelItem:n.displayValue,iconItem:{iconPath:n.icon}}):n.fontIcon?t.push({valueItem:n.actualValue,labelItem:n.displayValue,iconItem:{iconName:n.fontIcon}}):t.push({valueItem:n.actualValue,labelItem:n.displayValue});this._select=new o({enableSearchFlag:!1,actionOnClickFlag:!1,elementsList:t}),this._select.inject(this._selectElement.parentElement,"top"),this._selectElement.destroy(),delete this._selectElement}return this._postTreatmentSelect(),this._select&&this._select.addEventListener("change",this._selectDataEntry.bind(this)),e},destroy:function(){this._select&&this._select.destroy(),delete this._select,this._parent()},_selectDataEntry:function(){var t=this._config,n=this._select?this._select.value:this._selectElement.value,i=t.values.detect(function(e){return e.actualValue===n});if(this.normalizedSet(this.model,t,i),e.is(t.helperTextFunc,"function")){var a=t.helperTextFunc(this.model),o=this.container.getElement(".form-control-helper-text");o&&o.setText(a)}},_postTreatmentSelect:function(){var e=this._config,t=this.normalizedGet(this.model,e.name);if(e.isObject&&(t=t&&t.id),e.readWrite&&this.normalizedGet(this.model,"canEdit")){var n=t&&t.actualValue||t;this._select?this._select.value=n:this._selectElement.value=n}else if(t){for(var i=e.values&&e.values.length||0,a=t&&t.displayValue||t,o=t&&t.actualValue||t,r=0;r<i;r++){var s=e.values[r];if(s.actualValue===o){a=s.displayValue;break}}this.getElement("span").setText(a)}},_updateValues:function(){this._valuesFunc&&(this._config.values=this._valuesFunc())}});return l.prototype.compiledTemplate=s,l}),define("DS/E6WCommonUI/Views/TextView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/TextAreaView","text!DS/E6WCommonUI/assets/templates/text.html.handlebars"],function(e,t,n,i,a){"use strict";var o=t.compile(a),r=i.extend({_uwaClassName:"E6WCommonUITextView",tagName:"div",name:"E6WCommonUI.TextView",domEvents:{'input input.data-entry[type="text"]':"_inputDataEntry"}});return r.prototype.compiledTemplate=o,r}),define("DS/E6WCommonUI/Views/RangeView",["UWA/Core","DS/Handlebars/Handlebars4","DS/Controls/Gauge","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","text!DS/E6WCommonUI/assets/templates/range.html.handlebars"],function(e,t,n,i,a,o){"use strict";var r=t.compile(o),s=a.extend({_uwaClassName:"E6WCommonUIRangeView",tagName:"div",name:"E6WCommonUI.RangeView",domEvents:{},render:function(){var e=this._parent.apply(this,arguments);return this._postTreatmentRange(),e},_rangeDataEntry:function(){if(!this.parent.dontUpdateModel){var e=this.parent._config,t=this.getValue();this.parent.normalizedSet(this.parent.model,e,t)}},destroy:function(){this._parent.apply(this,arguments),delete this._gauge},_postTreatmentRange:function(){var e,t,i=this._config,a=this.normalizedGet(this.model,i.name),o="[data-field-name='"+i.name+"'] .range";e=this.getElement(o);var r={minValue:i.minimumValue||0,maxValue:i.maximumValue||100,stepValue:i.step||.1,dynamicGraduations:!1,graduationsLabel:!1,dynamicGaugeColor:!1,graduations:2,value:a};i.percents&&(r.displayFunction=this._percentDisplay);var s=(t=new n(r)).destroy;t.destroy=function(){delete this.elements.scales,delete this.elements.cursors,this._parentView&&this._parentView.removeChildView(this),s.apply(this,arguments)},t.parent=this,this.listenTo(t,"change",this._rangeDataEntry),this.addChildView(t),this._gauge&&this._gauge.destroy(),this._gauge=t,Object.defineProperty(i,"control",{value:t,enumerable:!1,configurable:!0,writable:!0}),t.inject(e),i.readWrite&&this.normalizedGet(this.model,"canEdit")||t.disable()},_percentDisplay:function(e){return e.toString()+"%"}});return s.prototype.compiledTemplate=r,s}),define("DS/E6WCommonUI/Views/UomView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/NumberView","DS/Controls/ComboBox","text!DS/E6WCommonUI/assets/templates/uom.html.handlebars"],function(e,t,n,i,a,o){"use strict";var r=t.compile(o),s=i.extend({_uwaClassName:"E6WCommonUIUomView",tagName:"div",name:"E6WCommonUI.UomView",domEvents:{"change select.ddv-uom":"_uomDataEntry"},render:function(){var e=this._parent.apply(this,arguments),t=[];if(this._selectElement=this.getElement("select.ddv-uom"),this._selectElement&&widget&&widget.useUIKitSelect){if(this._config&&this._config.uomValues&&this._config.uomValues.length)for(var n,i=0;i<this._config.uomValues.length;i++)n=this._config.uomValues[i],t.push({valueItem:n,labelItem:n});this._select=new a({className:"ddv-uom",enableSearchFlag:!1,actionOnClickFlag:!1,elementsList:t}),this._select.inject(this._selectElement.parentElement),this._selectElement.destroy(),delete this._selectElement}return this._postTreatmentNumber(),this._select&&this._select.addEventListener("change",this._uomDataEntry.bind(this)),e},destroy:function(){this._select&&this._select.destroy(),delete this._select,this._parent()},_uomDataEntry:function(t){for(var n,i=e.Event.getElement(t).getClosest(".form-group").getElements("input"),a=0;a<i.length;a++)this._numberDataEntry({target:i[a]});this._config.unitAttribute&&(n=this._select?this._select.selectedIndex:this.getElement("select.ddv-uom").selectedIndex,this.normalizedSet(this.model,{name:this._config.unitAttribute,validate:this._config.validate},n))},_getActualValueBasedOnNumValue:function(e){var t,n;return this._config.unitAttribute?this._parent.apply(this,arguments):(t=this._select?this._select.selectedIndex:this.getElement("select.ddv-uom").selectedIndex,n=this._config.conversionTable[t],String(e/n))},_postTreatmentNumber:function(){if(this._parent.apply(this,arguments),this._config.unitAttribute){var e=this.normalizedGet(this.model,this._config.unitAttribute);if(e>=0&&e<this._config.uomValues.length)if(this._select)this._select.selectedIndex=e;else{var t=this.getElement("select.ddv-uom");t&&(t.selectedIndex=e)}var n=this.getElement("span.read-only");if(n){var i=this.normalizedGet(this.model,this._config.name);i=i&&0!==parseFloat(i)?i:"--",n.textContent=i+""+this._config.uomValues[e]}}}});return s.prototype.compiledTemplate=r,s}),define("DS/E6WCommonUI/DragUtil",["DS/E6WCommonUI/UIHelper"],function(e){"use strict";var t={setDragModel:function(e){this._dragModel=e},getDragModel:function(){return this._dragModel},setDragTransferData:function(e,n){var i=JSON.stringify(n);event.dataTransfer.clearData(),event.dataTransfer.setData(t.getDragDataKey(),i),event.dataTransfer.setData("text",i)},getDragDataKey:function(){return e.isIE()||e.isEdge()?"text":"text/searchitems"},setDragView:function(e){this._view=e},getDragView:function(){return this._view}};return t}),define("DS/E6WCommonUI/Views/ObjectView",["UWA/Core","UWA/Class/Collection","DS/RDFFoundation/RDFUtils","DS/Handlebars/Handlebars4","UWA/Controls/Drag","UWA/Class/Promise","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/UIKIT/Spinner","DS/E6WCommonUI/Search","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/DragUtil","DS/E6WCommonUI/Views/CustomizedAutocomplete","DS/E6WCommonUI/Models/DropValidator","DS/RDFFoundation/FederatedSearchUtil","text!DS/E6WCommonUI/assets/templates/object.html.handlebars","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],function(e,t,n,i,a,o,r,s,l,c,d,u,h,p,m,f,g){"use strict";var v=i.compile(f);d.isIE()||d.isEdge();function w(e){e.preventDefault()}var D=s.extend({_uwaClassName:"E6WCommonUIObjectView",tagName:"div",name:"E6WCommonUI.ObjectView",domEvents:{"dragenter .drop-target":"handleDragEnter","dragover .drop-target":"handleDragOver","dragleave .drop-target":"handleDragLeave","drop .drop-target":"handleDrop","dragend .drop-target":"handleDragEnd","click .object-list a":"objectClick","click ul":"_activateObjectField","click button.ds-group-plus":"_activateObjectField","click button.ds-group-upload":"_uploadToObjectList","click .custom-button":"_onClickCustomButton",'keypress .ds-group-add input[type="text"]':"_keyUpInputAddObject",'input .ds-group-add input[type="text"]':"_enableDisableSearch","click label":"_preventLabelDefault","click input":"_onInputClicked","keyup input":"_onKeyUp"},i18n:function(e,t){return t||e},getDataOptions:function(){var e=this._parent.apply(this,arguments);e.level=1;var t=e.attributes.indexOf("canEdit");return e.attributes.splice(t,1,"physicalId",this._config.attributeToDisplay,this._config.imageAttribute,"busType","type","hasfiles"),e},_getData:function(){var e=this._parent.apply(this,arguments);return e.hasOwnProperty("canEdit")||(e.canEdit=this.normalizedGet(this.model,"canEdit")),e},setup:function(e){this._parentContainerId=e.detailDisplayViewId,this._parent.apply(this,arguments);this._config.readWrite&&(this.search=this._config.search||new c("",!1,"furtive")),this.context=e&&e.context,this._createAutocomplete()},_getMinLengthBeforeSearch:function(){var e=this._config.minLengthBeforeAutocomplete;return void 0===e&&(e=2),e},_createAutocomplete:function(){this.autoCompleteControl=new h({disabled:!0,cid:this.cid,placeholder:this._config.placeHolder||"",minLengthBeforeSearch:this._getMinLengthBeforeSearch(),noResultsMessage:g.get("emxFoundation.Label.NoResultsFound"),datasets:[{configuration:{templateEngine:this._addAutoCompleteItemToContainer.bind(this),remoteSearchEngine:this._getAndSendAutoCompleteRequest.bind(this)}}]}),this.autoCompleteControl.elements.input.addClassName("form-control")},_preventLabelDefault:function(e){return e.preventDefault(),!1},render:function(t){var n=e.clone(t||{},!1);this.removeAutoCompleteFromDOM(),this.autoCompleteControl.setBoundingElement(n.boundingElement);var i=this._parent.apply(this,arguments);return this._postTreatmentObjectList(),this._listenToSubModels(),this.setDefaultImages(),this.autoCompleteControl.enable(),i},_submodelCallback:function(){this.render()},_listenToSubModels:function(){this.stopListening(null,null,this._submodelCallback);var t=this.normalizedGet(this.model,this._config.name);e.is(t,"array")||(t=t?[t]:[]);for(var n=t.length,i=0;i<n;i++){var a=t[i];a&&a.addEvent&&(this.listenTo(a,"onChange",this._submodelCallback),this.listenTo(a,"onModelAccessChanged",this._submodelCallback))}},checkDialogDeactivation:function(t,n){if(t!==n){if(this){var i=this.container.getElement("ul");i&&(i.toggleClassName("active",!1),e.is(t.activationCallback,"function")&&t.activationCallback(t.name,!1))}}},_uploadToObjectList:function(){var e=this,t=this._config;d.openFileExplorer({callback:function(t){e._addToModel(t)},accept:t.accept})},_addToModel:function(t,n){var i=e.clone(n||this._options||{},!1),a=this._config,o=this.normalizedGet(this.model,a.name);if(a.singleObjectOnly&&o&&e.is(o,"array")&&o.length>0&&e.is(this.model.remove,"function")){var r=i.singleObjectRemove;i.singleObjectRemove=!0,this.model.remove(a.name,0,i),i.singleObjectRemove=r}return this.modelAdd(a.name,t,i)},_onClickCustomButton:function(t){t.preventDefault&&t.preventDefault();var n=e.Event.getElement(t),i=this._config,a=n.getAttribute("data-custom-button-index");a=parseInt(a);var o=i.customButtons;o&&o[a].callback.call(this,o)},handleDragEnter:function(t){e.Event.getElement(t).addClassName("drag-over")},handleDragLeave:function(t){e.Event.getElement(t).removeClassName("drag-over")},handleDragOver:function(t){return t.preventDefault&&t.preventDefault(),t.dataTransfer.dropEffect="copy",e.Event.getElement(t).addClassName("drag-over"),!1},handleDrop:function(t){this.getElement(".object-list")&&this.getElement(".object-list").removeClassName("drag-over"),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var n=this.getElement("input");n&&(n.value="",n.removeClassName("drag-over"),this.autoCompleteControl.reset());var i=this._config,a=e.clone(this._options||{},!1);if((a.config=i,a.objectView=this,i.dropHandler)&&(e.is(i.dropHandler,"function")?i.dropHandler:this.model.dropHandler).call(this.model,t.dataTransfer,i,a))return!1;return t.dataTransfer.files&&t.dataTransfer.files.length?this._handleDroppedFiles(t.dataTransfer.files):!this.validateDroppedObjects(t.dataTransfer)&&this.dropHandler(t.dataTransfer,i,a)},dropHandler:function(e){var t=d.getDataTransferJSON(e);return t&&this.processDropData(t),!1},_handleDroppedFiles:function(e){var t=this._config;if(t.allowFileManagement&&"true"===t.readWrite&&this.normalizedGet(this.model,"canEdit")){if(t.accept){for(var n=t.accept.toLowerCase().split(","),i=e.length,a=[],o=0;o<i;o++){var r=e[o],s=r.name,l=s.lastIndexOf(".");if(-1!==l){var c=s.substring(l);-1!==n.indexOf(c.toLowerCase())&&a.push(r)}}if(e=a,!a.length)return!1}return this._addToModel(e),!1}if(!t.allowFileManagement){var d=g.get("E6WCommonUI.Error.DroppingFilesNotSupported");d&&this._displayErrorMessage(d)}return!0},_displayErrorMessage:function(e){this._parentView&&this._parentView._displayMessage?e&&this._parentView._displayMessage({msg:e,msgType:"error"}):d.displayError(e)},validateDroppedObjects:function(e){for(var t,n=d.getDataTransferJSON(e).data.items,i=0;i<n.length&&!t;i++){var a=n[i];(t=this.validateDroppedObject(a))&&t&&this._displayErrorMessage(t)}return Boolean(t)},validateDroppedObject:function(e){return p.validateDroppedObject(e,this._config)},processDropData:function(t){for(var n=t.data.items,i=n.length,a=this._config,o=!1,r=0;r<i;r++){var s=n[r],l=s.displayName;e.is(this.model.preprocessPersonObject,"function")&&this.model.preprocessPersonObject(s);var c=e.clone(this._options||{},!1);c.config=a,c.dropObj=s;var d=this._addToModel(s.objectId,c);if(d&&d.length>0){o=!0;var u,h=d[0];u="person"===a.type?"firstname":this._config.attributeToDisplay,this.normalizedGet(h,u)||this.normalizedSet(h,{name:u},l)}}o&&this.render()},objectClick:function(n,i){var a=e.clone(i||{},!1),o=e.Event.getElement(n),r=this._config;n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),n.clickedOnObject=!0;var s,l=o.getClosest("li").getAttribute("data-id"),c=m.filterSearchSources(r.searchSource),u=this.normalizedGet(this.model,r.name);if(e.is(u,"array")||u instanceof t||(u=[u]),u&&u.length>0)for(var h=u.length,p=0;p<h;p++){var f=u.at?u.at(p):u[p],v=d.normalizedToJson(f);if(e.is(v,"array"))for(var w=v.length,D=0;D<w;D++)if(v[D].physicalId===l){v=v[D];break}if(v.physicalId===l){s=f;break}}if(a.model=s,!r.linkCallback||!r.linkCallback.call(this,l,a)){var _=g.get("emxFoundation.Label.ObjectDetails");a={title:_=_.replace("%NAME%",o.getText()),source:c,tenant:void 0,role:this.context,idcard_activated:!0,select_result_max_idcard:!0,default_search_criteria:"physicalid:"+l},this.search&&this.search.activate(a)}return!0},_onKeyUp:function(e){"Tab"===e.key&&this._activateObjectField(e)},_activateObjectField:function(t){t.preventDefault&&t.preventDefault();var n=this.dropdownMenu&&this.dropdownMenu.isVisible;if(!t.clickedOnObject&&!n){var i=this._config,a=this.getElement("ul");if(("true"===i.readWrite||!0===i.readWrite)&&this.normalizedGet(this.model,"canEdit")&&a){a.toggleClassName("active",!0),e.is(i.activationCallback,"function")&&i.activationCallback(i.name,!0);var o=a.getElement("input");o&&o.focus()}}},handleDragEnd:function(t){e.Event.getElement(t).removeClassName("drag-over")},_postTreatmentObjectList:function(e){if(e||(e=this._config),e.typeAheadCallback&&e.readWrite&&this._postTreatmentObjectListAutocomplete(e),this.postTreatmentObjectListClickHandlers(e),("object"===e.type||"person"===e.type)&&this.shouldDisableSearch()){var t=this.getElement(".ds-group-add .btn");t&&(t.disabled=!0)}},getSearchOptions:function(){var t=this._config,n=this.getElement("input"),i=n.value.trim().split(",").map(function(e){return e.trim()});i=this.getFederatedQueryCriteria(i,t);var a=this.getFederatedQueryPreCondition(t),o=m.filterSearchSources(t.searchSource),r=o&&t.searchSourceTypes||t.searchTypes;if(e.is(r,"object")&&o){var s={};o.forEach(function(e){s[e]=r[e]}),r=s}var l=t.excludeSearchTypes;r||(r="person"===t.type?"Person":"");var c=t.searchTitle;return c||(c=""),n.value="",this._toggleSearchButton(n),{title:c,source:o,role:this.context,types:r,multiSel:!0!==t.singleObjectOnly,default_search_criteria:i,precond:a,excludedSearchTypes:l,callback:this._searchCallback.bind(this)}},_onSearchButtonClick:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.doSearch(),this.autoCompleteControl.reset()},doSearch:function(){this.search&&this.search.activate(this.getSearchOptions())},getFederatedQueryCriteria:function(e,t){return e.length>1?"("+e.join(" OR ")+")":0===e.length||0===e[0].length?"":e[0]+"*"},getFederatedQueryPreCondition:function(e){var t;return e&&"person"===e.type&&e.userRole&&e.searchSource&&-1!==e.searchSource.indexOf("3dspace")&&(t='userrole:"'+e.userRole+'"'),t},postTreatmentObjectListClickHandlers:function(t){var n=this;if(e.is(this.model.add,"function")){var i=this.getElement("button.ds-search");i&&i.addEvent("click",this._onSearchButtonClick.bind(this))}if(e.is(this.model.remove,"function"))for(var a=function(i,a){a.stopPropagation();var o=e.clone(n._options||{},!1);o.config=t;var r=this.getAttribute("data-field-name");n.model.remove(r,i,o)},o=this.getElements(".ds-group-remove"),r=o.length,s=0;s<r;s++){var l=o[s];l.getClosest("button").addEvent("click",a.bind(l,s))}for(var c=this.getElements(".fonticon-download"),d=c.length,u=0;u<d;u++){var h=c[u];h.getClosest("button").addEvent("click",this.objectClickDownload.bind(this)),this._donwloadAddedCode(h)}this._makeDraggableAndDroppable()},_donwloadAddedCode:Function.prototype,_makeDraggableAndDroppable:function(){var e=this.container.getElements('[draggable="true"]');d.isIpad()||d.isAndroid()||this._makeDraggableAndDroppableUWA();for(var t=0;t<e.length;t++){var n=e[t];n&&n.addEvent("dragstart",this._dragHandler.bind(this,n.getParent()))}},_dragHandler:function(e,t){var n=this.computeDragDataFromElement(e);t.dataTransfer.effectAllowed="copy",u.setDragTransferData(t,n),d.extraDragForSwym(n)},getModelFromCard:function(e){var t=e.getClosest("li").getAttribute("data-id"),n=this,i=this.normalizedGet(this.model,this._config.name),a=i;return i.forEach&&i.forEach(function(e){n._normalizedGetPhysicalId(e)!==t&&n.normalizedGet(e,"groupURI")!==t||(a=e)}),a},_normalizedGetPhysicalId:function(e){var t=this.normalizedGet(e,"physicalId");return t||(t=d.normalizedToJson(e).physicalId),t},computeDragDataFromModel:function(e){var t,n=this.model&&this.model.model;if(e.getTransferObject){var i={};n&&(i.parentObject=n),t=e.getTransferObject(i)}else{var a=this.normalizedGet(e,"type")||this.normalizedGet(e,"busType");t=d.getTransferObject({source:window.widget.getValue("appId")||"X3DCSMA_AP",envId:this.tenant||window.widget.getValue("x3dPlatformId"),contextId:this.context,objectId:this._normalizedGetPhysicalId(e),objectType:a,objectType_Internal:a,displayName:this.normalizedGet(e,this._config.attributeToDisplay)})}return t},computeDragDataFromElement:function(e){var t=this.getModelFromCard(e);return this.computeDragDataFromModel(t)},_iPadScrollIssueFix:function(e){d.isIpad()&&(e?document.body.addEventListener("touchmove",w,{passive:!1}):document.body.removeEventListener("touchmove",w))},_makeDraggableAndDroppableUWA:function(){this.dragControl&&this.dragControl.destroy();var t=this;this.dragControl=new a.Move({container:widget.body,root:this.container,zoneCss:".drop-target",zones:function(){return widget.body.getElements(this.options.zoneCss)},delegate:".draggable-item *",centerHandles:!0,handles:function(n){var i=n.target.getParent(".draggable-item");n.elemToClone=i;var a=e.Element.extend(i.cloneNode(!0));a.setStyle("width",i.offsetWidth),a.setStyle("height",i.offsetHeight);for(var o=a.getElements("button"),r=0;r<o.length;r++)o[r].remove();var s=e.createElement("ul",{class:"object-list"});a.inject(s);var l=e.createElement("div",{styles:{position:"absolute",zIndex:100}});l.toggleClassName("draggable-helper",!0),s.inject(l);var c=t._config.appendTo?t._config.appendTo:"body",d=i.getClosest(c);return l.inject(d),l},start:function(e){if(e.currentEvent instanceof MouseEvent)return!1;var n=e.target.getParent(".draggable-item");n.toggleClassName("ui-being-dragged",!0);var i=t.computeDragDataFromElement(n);return n.setData(D.DRAG_DATA_TAG,i),t._iPadScrollIssueFix(!0),!0},stop:function(e){var n=e.elemToClone;n.toggleClassName("ui-being-dragged",!1),n.toggleClassName("drag",!1),e.handles.destroy(),t._iPadScrollIssueFix()},enter:function(e){var t=e.zone;e.accept()&&(t.toggleClassName("drag-over",!0),t.dispatchEvent(e.getCustomEvent("dragenter")))},leave:function(e){e.zone.toggleClassName("drag-over",!1)},drop:function(e){var t=e.zone;t.toggleClassName("drag-over",!1),e.accept()&&t.dispatchEvent(e.getCustomEvent("drop"))}}),this.dragControl.accept=function(){return this.target.getClosest(this.options.zoneCss)!==this.zone},this.dragControl.getCustomEvent=function(e){var t=this.target.getParent(".draggable-item").getData(D.DRAG_DATA_TAG);t.getData=function(){return this};var n=new window.Event(e,{bubbles:!0});return n.dataTransfer=t,n}},objectClickDownload:function(t,n){var i=e.Event.getElement(t);t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.clickedOnObject=!0;var a=i.getClosest("li").getAttribute("data-id");return this.download({pid:a,tenant:n&&this.normalizedGet(n,"dscom:Tenant"),serviceId:n&&this.normalizedGet(n,"dscom:ServiceHosting")}),!0},download:function(t){var n;t=t||{};var i=this,a=e.clone(t,!1);return a.autoDownload=!0,a.csrf=this.model.csrf,a.onFailure=function(e){var n=g.get("E6WCommonUI.Error.DownloadFailed");d.isFileNotFound(e)&&(n=g.get("E6WCommonUI.Info.itemNotFound")),i._parentView._displayMessage({msg:n,msgType:"error"}),t.onFailure&&t.onFailure()},this._options.DocumentManagement&&(n=this._options.DocumentManagement.downloadDocument(a.pid,void 0,Boolean(t.checkout),a)),n},processAutoCompleteData:function(e){return e},_addAutoCompleteItemToContainer:function(t,n,i){var a=this.processAutoCompleteData(i),o=e.createElement("span",{class:"thumbnail profile-image"});a.image&&e.createElement("img",{draggable:"false",src:a.image,title:a.label,"data-actualvalue":a.value,events:{contextmenu:function(){return!1}}}).inject(o),o.inject(t),e.createElement("span",{text:a.label}).inject(t)},_getExistingIds:function(){var e={},t=this.getExistingObjs(this._config.name);return t&&(Array.isArray(t)||(t=[t]),t.forEach(function(t){e[t.id]=!0})),e},_getAndSendAutoCompleteRequest:function(t,n){var i=this;return new o(function(a){var o=D.filter.bind(void 0,function(n){var o={};o.dataset=t;var r=[];e.is(n,"array")&&n.forEach(function(e){e.handler=i.onAutocompleteSelect.bind(i,i._config,e),r.push(e)}),o.matchingItems=r,a(o)},i._getExistingIds());i._previousTypeaheadRequest&&i._previousTypeaheadRequest.cancel&&i._previousTypeaheadRequest.cancel(),i._previousTypeaheadRequest=i._config.typeAheadCallback(i._config,n,o,{model:i.model})})},removeAutoCompleteFromDOM:function(){this.autoCompleteControl&&this.autoCompleteControl.remove()},_postTreatmentObjectListAutocomplete:function(){if(this.normalizedGet(this.model,"canEdit")&&this._config.readWrite){var e=this.getElement("input");e&&e.remove(),this.autoCompleteControl.inject(this.getElement("li.chooser"),"top")}},_searchCallback:function(t){for(var n=[],i=t.length,a=0;a<i;a++){var o=t[a];o.id?(d.enrichObjectFromSearch(o),n.push(o.id)):n.push(o)}var r=n.join(","),s=e.clone(this._options||{},!1);s.detailedObjects=t,s.config=this._config;var l=this._config;if(l.singleObjectOnly&&t&&t.length>0)return r=n[0],s.detailedObjects=[t[0]],void this._addToModel(r,s);this.modelAdd(l.name,r,s)},modelAdd:function(){if(e.is(this.model.add,"function"))return this.model.add.apply(this.model,arguments)},destroy:function(){this.search&&this.search.destroy(),delete this.search,this.autoCompleteControl.disable(),document.removeEventListener("click",this.autoCompleteControl.events.document.click,!0),this.autoCompleteControl.destroy(),delete this.autoCompleteControl,this._parent()},_keyUpInputAddObject:function(t){if("Enter"===t.key){var n=e.Event.getElement(t).getClosest(".form-group").getElement(".ds-group-add .btn");n.disabled||n.click()}},_enableDisableSearch:function(t){var n=e.Event.getElement(t);this._toggleSearchButton(n)},_toggleSearchButton:function(){var e=this.getElement(".ds-group-add .btn");e&&(this.getElement("input").value.length>0?e.disabled=!1:this.shouldDisableSearch()&&(e.disabled=!0))},onAutocompleteSelect:function(t,n){var i=e.clone(n,!1);i.id=n.value||n.id,delete i.value,this._searchCallback([i]),this.autoCompleteControl&&this.autoCompleteControl.reset()},getExistingObjs:function(e){return this.normalizedGet(this.model,e)},showAutoComplete:function(){var e=this.getElement("input");this.autoCompleteControl&&this.autoCompleteControl.getSuggestions(e.value)},_onInputClicked:function(){this.getElement("input").value.length>=this._getMinLengthBeforeSearch()&&this.showAutoComplete()},shouldDisableSearch:function(){return!this._config.searchTypes&&!this._config.searchSourceTypes},getCardById:function(e){return this.container.getElement('li[data-id="'+e+'"]')}});return D.filter=function(e,t,n){e(n.filter(function(e){return!t[e.value]}))},D.prototype.compiledTemplate=v,D.DRAG_DATA_TAG="dragDataTransfer",D.DROP_CLASS_NAME="drag-over",D}),define("DS/E6WCommonUI/Views/ObjectCardView",["UWA/Core","UWA/Class/Collection","DS/UIKIT/DropdownMenu","DS/E6WCommonUI/Views/ObjectView","DS/E6WCommonUI/PlatformManager","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/CompassUtil","DS/E6WCommonUI/Views/DetailsDisplaySharedView","DS/Handlebars/Handlebars4","DS/UIKIT/Tooltip","DS/RDFFoundation/Models/PersonRDFModel","DS/RDFFoundation/FederatedSearchUtil","text!DS/E6WCommonUI/assets/templates/objectCard.html.handlebars","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS"],function(e,t,n,i,a,o,r,s,l,c,d,u,h,p){"use strict";var m=function(e){return p.get(e)},f=l.compile(h),g=function(e){return!e||!e.hasViewAccess||e.hasViewAccess()},v=i.extend({_uwaClassName:"ObjectCardView",domEvents:{"click li.object-card":"_onClickObjectField"},setup:function(){var e=this;this._tooltips=[],this.container.addEventListener("contextmenu",function(t){return e.createAndShowContextMenu(t),!1},!1),this._parent.apply(this,arguments)},render:function(){var t=e.Element.extend(document.activeElement),n=this.container===t.getClosest(".ddv-field");this._parent.apply(this,arguments);var i=this,a=this.getElements(".fonticon-down-open"),o=i.getElement(".btn.ds-group-plus");0===a.length&&o&&o.toggleClassName("disabled",!0),a.forEach(function(e){i._tooltips.push(new c({target:e,body:m("E6WCommonUI.Label.Menu")}))});const r=this.getElement("#uploadButton");return r&&i._tooltips.push(new c({target:r,body:m("E6WCommonUI.Label.Upload")})),this.getElements(".custom-button").forEach((e,t)=>{i._tooltips.push(new c({target:e,body:i._config.customButtons[t].toolTip}))}),o&&i._tooltips.push(new c({target:o,body:"person"===i._config.type?m("E6WCommonUI.Label.AddMember"):m("E6WCommonUI.Label.AddExisting")})),n&&this.container.getElement("ul").click(),this._addDummyCard(),this},_addDummyCard:function(){this._clearDummyCard();let e=this._config.limit,t=this.normalizedGet(this.model,this._config.name);if(t&&t.length>e){let n=t.length-e,i=this._getInfoMessageForDummycard(n);this._injectDummyCard(i)}},_clearDummyCard:function(){this._dummyListNode&&this._dummyListNode.remove()},_getInfoMessageForDummycard:function(e){return p.replace(p.get("E6WCommonUI.Label.DummyCard"),{OBJECT_COUNT:e})},_injectDummyCard:function(t){this._dummyListNode||(this._dummyListNode=e.createElement("li",{class:"text-info object-card",contextMenu:!1,styles:{display:"grid","text-align":"center"},events:{click:function(t){t.stopPropagation(),e.Event.stop(t)},contextmenu:function(t){t.stopPropagation(),e.Event.stop(t)}}}));var n=this.container.getElement(".object-list");n&&this._dummyListNode.inject(n),this._dummyListNode.setText(t)},_onClickObjectField:function(t){if(t.preventDefault&&t.preventDefault(),!t.clickedOnObject){var n=e.Event.getElement(t),i=n.getClosest("li");this.deactivateAllListElements(i),i&&i.addClassName("active"),this.selectInCompass(n)}},addOpenWith:function(e){o.addOpenWith({view:this,dropdownMenu:this.dropdownMenu,modelData:this.computeDragDataFromModel(e)})},selectInCompass:function(e){var t=this.getModelFromCard(e),n=this.normalizedGet(t,"type");if(n&&-1===n.indexOf("Person")){var i=this.computeDragDataFromElement(e);r.openCompassWithModel(t,{transferObject:i})}},_dontActivateObjectField:function(){},checkDialogDeactivation:function(e,t){this._parent(e,t),e!==t&&this.deactivateAllListElements()},deactivateAllListElements:function(){var e=this.container.getElements("li");e&&e.forEach(function(e){e.toggleClassName("active",!1)})},getActiveModel:function(t){var n,i=this.normalizedGet(this.model,this._config.name),a=this;return i&&(e.is(i,"array")||i instanceof e.Class.Collection)?i.some(function(e){return(t===a.normalizedGet(e,"physicalId")||t===a.normalizedGet(e,"groupURI")||t===a.normalizedGet(e,"objectId"))&&(n=e,!0)}):t===this.normalizedGet(i,"physicalId")&&(n=i),n},postTreatmentObjectListClickHandlers:function(e){this._parent(e),this._addDropDownMenuListener()},_addDropDownMenuListener:function(){for(var e=this,t=e.getElements(".fonticon-down-open"),n=t.length,i=0;i<n;i++){t[i].getClosest("button").addEvent("click",function(t){e.createMenu(t,{target:this}),e.dropdownMenu.show()})}},createAndShowContextMenu:function(e){this.createMenu(e),o.showAndUpdateContextualDropdownMenuPosition(this.dropdownMenu,e)},createMenu:function(t,n){t.stopPropagation(),t.preventDefault();var i=e.Event.getElement(t),a=i.getClosest(".object-card").getAttribute("data-id"),o=this.getElements(".object-card").findIndex(function(e){return e.getAttribute("data-id")===a}),r=e.clone(this._options||{},!1);r.config=this._config;var s={target:n&&n.target||i,options:r,event:t,index:o,model:this.getActiveModel(a)};this.dropdownMenu&&this.dropdownMenu.destroy(),this.createMenuButtons(s)},createMenuButtons:function(e){this.checkDialogDeactivation();var t,n=this;e.model&&(t=!0===(t=this.normalizedGet(e.model,"hasfiles"))||"TRUE"===t);const i={target:e.target,items:[],events:{onClickOutside:function(){this.menus&&this.destroy(),delete n.dropdownMenu},onHide:function(){this.menus&&this.destroy(),delete n.dropdownMenu}},currentModel:this.normalizedGet(this.model,this._config.name)};e.zIndex&&(i.zindex=e.zIndex),n.createDropdownMenu(i),e.model&&this.addOpenAndOpenWith(e),(this._config.getDropDownMenuItems&&this._config.getDropDownMenuItems.call(this,t,e)||this.getDropDownMenuItems(t,e)).forEach(function(e){n.dropdownMenu.addItem(e)})},createDropdownMenu:function(e){this.dropdownMenu=new n(e),this.dispatchEvent(s.events.menuOpened,[this.dropdownMenu])},getDropDownMenuItems:function(t,n){var i=e.clone(n||{},!1);i.canDownload=t;var a=[this.getDownloadButton(i),this.getRemoveItemButton(i)];let o=i.model&&g(i.model)&&(!i.model.canShowProperties||i.model.canShowProperties());var r=i.model&&("foaf:Group"===i.model.get("ds6w:type")||"Group"===i.model.get("type")||"Group Proxy"===i.model.get("type"));try{let e=require("DS/i3DXRDFGroupViewer/js/GroupViewer");r&&e&&a.unshift(this.getShowMembersButton(i,this._parentView._parentView._parentView.container))}catch(e){}o&&a.unshift(this.getPropertiesButton(i)),a[0].className&&"disabled"===a[0].className&&a.shift();var s=i.model&&this.normalizedGet(i.model,"type");if(s&&-1!==s.indexOf("Person")&&a.splice(1,1),e.is(this.model.updateDocument,"function")){var l=this.getUpdateButton(i);a.splice(2,0,l)}return a},getUpdateButton:function(e){var t=this,n=e.model,i=this.normalizedGet(e.model,"hasfiles");return i=!0===i||"TRUE"===i,{text:m("E6WCommonUI.Label.Update"),id:"documentUpdateButton",fonticon:"update",className:i?null:"disabled",handler:function(){e.documentUpdateHandler?e.documentUpdateHandler(n,t.model.updateDocument):o.openFileExplorer({callback:function(e){o.updateDocumentConfirmation(e,n,t.model.updateDocument)}})}}},getRemoveItemButton:function(e){var t=this,n=this._config.readWrite;return n||(n=!1),{text:m("E6WCommonUI.Label.Remove"),name:"remove-button",fonticon:"remove",className:t.normalizedGet(t.model,"canEdit")&&n?null:"disabled",handler:function(){t.model.remove(t._config.name,e.index,e.options)}}},getPropertiesButton:function(e){var t=this;return{text:m("E6WCommonUI.Label.Properties"),fonticon:"attributes",handler:function(){t.objectClick(e.event,e)},name:"propertiesButton"}},getDownloadButton:function(e){var t=this;return{text:m("E6WCommonUI.Label.Download"),fonticon:"download",className:e.canDownload?null:"disabled",handler:function(){t.objectClickDownload(e.event,e.model)},name:"downloadButton"}},getShowMembersButton:function(e,t){return{text:o.i18n("E6WCommonUI.Label.ShowMembers"),fonticon:"users-group",handler:function(){var n=e.model.id;"Group Proxy"===e.model.get("type")&&(n=e.model.get("groupURI")),o.launchPreviewGroupMembers(n,t)},name:"showMembersButton"}},destroy:function(){this.dropdownMenu&&this.dropdownMenu.destroy(),this._clearDummyCard(),this._tooltips.forEach(function(e){e.destroy()}),this._tooltips=[],this._parent.apply(this,arguments)},getFederatedQueryCriteria:function(e){return widget.getValue("oldSearch")?this._parent.apply(this,arguments):u.getFederatedQueryCriteria({criteria:e,fieldConfig:this._config})},addOpenAndOpenWith:Function.prototype});return v.prototype.modelHasViewAccess=g,v.prototype.compiledTemplate=f,v}),define("DS/E6WCommonUI/Views/CheckBoxView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DetailsDisplaySharedView","text!DS/E6WCommonUI/assets/templates/checkbox.html.handlebars"],function(e,t,n,i,a){"use strict";var o=t.compile(a),r=i.extend({_uwaClassName:"E6WCommonUICheckBoxView",tagName:"div",name:"E6WCommonUI.CheckBoxView",domEvents:{'change input.data-entry[type="checkbox"]':"_checkBoxDataEntry"},_checkBoxDataEntry:function(){var e=this._config,t=String(this.getElement("input").checked).toUpperCase();this.normalizedSet(this.model,e,t)}});return r.prototype.compiledTemplate=o,r}),define("DS/E6WCommonUI/Views/PersonView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/ObjectView","DS/E6WCommonUI/Models/DropValidator","DS/E6WCommonUI/UIHelper","text!DS/E6WCommonUI/assets/templates/person.html.handlebars"],function(e,t,n,i,a,o){"use strict";var r=t.compile(o),s=n.extend({_uwaClassName:"E6WCommonUIPersonView",tagName:"div",name:"E6WCommonUI.PersonView",init:function(t){this._dropTypes=e.clone(t&&t.config&&t.config.dropTypes||{},!1),this._dropTypes["3dspace"]=this._dropTypes["3dspace"]||[],this._dropTypes.swym=this._dropTypes.swym||[],this._dropTypes["3dspace"]=this._dropTypes["3dspace"].concat("Person"),this._dropTypes.swym=this._dropTypes.swym.concat("pno:Person"),this._parent(t)},processAutoCompleteData:function(t){var n=e.clone(t,!1);return!n.image&&n.name&&(n.image=a.userPictureURL(n.name)),n},validateDroppedObject:function(t){return i.validateDroppedObject(t,e.extend(this._config,{dropTypes:this._dropTypes}))}});return s.prototype.compiledTemplate=r,s}),define("DS/E6WCommonUI/Views/StartStopView",["UWA/Core","DS/Handlebars/Handlebars4","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/DateView","text!DS/E6WCommonUI/assets/templates/startstop.html.handlebars"],function(e,t,n,i,a){"use strict";var o=t.compile(a),r=i.extend({_uwaClassName:"E6WCommonUIStartStopView",tagName:"div",name:"E6WCommonUI.StartStopView",_highlightValidationErrors:function(){if(this.model&&this.model.validationError&&this.model.validationError.fields){var e=this._config,t=!1,n=this.container,i=e.name;-1!==this.model.validationError.fields.indexOf(i)&&(t=!0);var a=n&&n.getElement(".start");a&&a.toggleClassName("has-error",t),t=!1,i=e.endDateAttribute,-1!==this.model.validationError.fields.indexOf(i)&&(t=!0);var o=n&&n.getElement(".stop");o&&o.toggleClassName("has-error",t)}},template:function(){var e=arguments[0].data;return e&&!0===e.canEdit&&this.setEditFlagOnFields(e),this._parent.apply(this,arguments)},setEditFlagOnFields:function(t){var n=!0;this._config.hasOwnProperty("canEditStartDate")&&(n=e.is(this._config.canEditStartDate,"function")?this._config.canEditStartDate(this.model):this._config.canEditStartDate),t.canEditStartDate=n,n=!0,this._config.hasOwnProperty("canEditEndDate")&&(n=e.is(this._config.canEditEndDate,"function")?this._config.canEditEndDate(this.model):this._config.canEditEndDate),t.canEditEndDate=n},moveLabelPosition:function(e){var t;t=this.container.getElement(".input-group.start");var n=this.container.getElement(".start label");t&&n&&t.grab(n,e),t=this.container.getElement(".input-group.stop");var i=this.container.getElement(".stop label");t&&i&&t.grab(i,e)},render:function(){return this._parent.apply(this,arguments),this._config.hasOwnProperty("labelPosition")&&"top"===this._config.labelPosition&&this.moveLabelPosition("top"),this}});return r.prototype.compiledTemplate=o,r}),define("DS/E6WCommonUI/Views/DetailsDisplayView",["UWA/Core","UWA/Utils","UWA/Event","UWA/Class/Model","UWA/Class/Events","UWA/Controls/Drag","DS/Handlebars/Handlebars4","DS/ENO6WPlugins/jQuery_3.3.1","DS/E6WCommonUI/Views/FoundationBaseView","DS/E6WCommonUI/Views/TextView","DS/E6WCommonUI/Views/TextAreaView","DS/E6WCommonUI/Views/SelectView","DS/E6WCommonUI/Views/CheckBoxView","DS/E6WCommonUI/Views/DateView","DS/E6WCommonUI/Views/NumberView","DS/E6WCommonUI/Views/ObjectView","DS/E6WCommonUI/Views/PersonView","DS/E6WCommonUI/Views/RangeView","DS/E6WCommonUI/Views/StartStopView","DS/E6WCommonUI/Views/UomView","DS/E6WCommonUI/Views/E6WHandlebarsHelpers","DS/E6WCommonUI/UIHelper","DS/E6WCommonUI/Views/DetailsDisplaySharedView","text!DS/E6WCommonUI/assets/templates/meta.html.handlebars","i18n!DS/E6WCommonUI/assets/nls/E6WCommonUINLS","css!DS/E6WCommonUI/E6WCommonUI","css!DS/UIKIT/UIKIT"],function(e,t,n,i,a,o,r,s,l,c,d,u,h,p,m,f,g,v,w,D,_,E,C,y,b){"use strict";return E.fixDisplayMessageMethod(),l.extend({_uwaClassName:"DetailsDisplayView",getHtmlFromTemplate:r.compile(y),className:"ds-dialog ds-detail-display ddv-view",id:function(){return"detailDisplayView"+this.cid},domEvents:{"click .form-section-title":"_showGroupProperties"},i18n:function(e,t){return t||e},_displayMessage:function(e){this._options.displayMessage?this._options.displayMessage.apply(this,arguments):E.displayMessageBasedOnType(e)},setup:function(t){var n=e.clone(t||{},!1);this._options=n,this._parent.apply(this,arguments);var i=this;s("body").on("click.closeListInputFields",function(t){if(i._config)for(var n=e.Event.getElement(t),a=i._getConfigFromElement(n),o=i._config.length,r=0;r<o;r++){var s=i._config[r];switch(s.type){case"object":case"person":i._getChildViewBasedOnConfig(s).checkDialogDeactivation(s,a)}}})},getChildViewBasedOnConfig:function(e){for(var t,n=this._childrenViews,i=0;i<n.length;i++){var a=n[i];if(a._config&&a._config.type===e.type&&a._config.name===e.name){t=a;break}}return t},_getChildViewBasedOnConfig:function(e){return this._configMap.get(e)},_resizeHandler:function(){var e=this;!function(){var t=e.container.clientWidth,n=e._config.length,i=0!==t&&t!==e.previousResizeWidth;i&&(e.previousResizeWidth=t);for(var a=0;a<n;a++){var o=e._config[a];switch(o.type){case"text":i&&"true"===o.readWrite&&C.prototype.normalizedGet(e.model,"canEdit")&&e._getChildViewBasedOnConfig(o)._postTreatmentTextArea();break;case"textarea":i&&e._getChildViewBasedOnConfig(o)._postTreatmentTextArea()}}}()},_dataForRenderingWithWhiteListAttributes:function(){var t=[],n={};this._childrenViews.forEach(function(e){var n=e.getDataOptions(),i=t[n.level];i||(i=t[n.level]={}),n.attributes.forEach(function(e){i[e]=!0})});for(var i=0;i<t.length;i++){var a=t[i];a&&e.extend(n,E.normalizedToJson(this.model,{level:i,attributes:Object.keys(a)}))}return n},_setChildViews:function(t){var n=this._childrenViews;if(n)for(var i=this._dataForRenderingWithWhiteListAttributes(),a=0;a<n.length;a++){var o=n[a],r=o._config;o.model||(o.model=this.model);var s={data:i};e.merge(s,t),o.render(s),this.injectFieldViewForConfig(r,o)}},injectFieldViewForConfig:function(e,t){var n=e.group?e.group.actualValue||e.group:void 0;n?t.inject(this.container.getElement("#_"+this.cid+this.groupMap[n].actualValue+" .form-section-body")):this.container.getElement(".form-section")?t.inject(this.container.getElement(".form-section"),"before"):t.inject(this.container.getElement(".form.form-vertical"))},_template:function(e){for(var t=0;t<this._config.length;t++){if(this._config[t].required){e.required=!0,e.requiredLegend=b.get("emxFoundation.Label.RequiredFieldLegend");break}}return Object.keys(this.groupMap).length>0&&(e.groupNames=this.groupMap,e.viewid="_"+this.cid),this.getHtmlFromTemplate(e)},_filterConfigIntoGroups:function(){for(var e=this._config,t={},n=0;n<e.length;n++){var i=e[n],a=i.group?i.group.actualValue||i.group:void 0;if(a){var o=t[a];o?a&&o.push(i):(t[a]=[i],t[a].displayValue=a,t[a].actualValue="G"+n)}}return t},render:function(e){var t;if(!this._config)return this;t=this.getElements(".accordion.expanded").map(function(e){return e.id});var n={};return n.openedGroups=t,this.container.setHTML(this._template(n)),this._setChildViews(e),this.dispatchEvent("onFinishRender"),delete this.previousResizeWidth,this.container.isInjected()?this._resizeHandler():this.listenToOnce(this,"onPostInject",this._resizeHandler),this._toggleGroups(t,!0),this},setConfig:function(t){this._config=t.map(function(t){return e.clone(t,!1)}),this._config.options=e.clone(t.options||{},!1),this.groupMap=this._filterConfigIntoGroups(),delete t.options,this.cleanUpChildren();for(var n=0;n<this._config.length;n++){var i=this._config[n];i.index=n;var a=e.clone(this._options||{},!1);e.extend(a,{config:i,model:this.model}),this._createAndAddChildView(i,a)}},cleanUpChildren:function(){return this._configMap=new WeakMap,this._parent.apply(this,arguments)},_createAndAddChildView:function(t,n){var i,a=e.clone(n||{},!1);if(a.detailDisplayViewId="#"+(e.is(this.id,"function")?this.id():this.id),delete a.parentView,t.customView)i=new t.customView(a);else switch(t.type){case"text":i=new c(a);break;case"textarea":i=new d(a);break;case"select":i=new u(a);break;case"checkbox":i=new h(a);break;case"date":i=new p(a);break;case"number":i=new m(a);break;case"object":i=new f(a);break;case"person":i=new g(a);break;case"range":i=new v(a);break;case"startStop":i=new w(a);break;case"uom":i=new D(a)}i&&(this._configMap.set(t,i),this.addChildView(i),this.listenTo(i,C.events.menuOpened,function(e){this.dropdownMenu&&this.dropdownMenu.destroy(),this.dropdownMenu=e}))},resetModel:function(t,n,i){var a=e.clone(i||{},!1);if(t!==this.model){var o=this.getElements(".accordion.expanded").map(function(e){return e.id});this._toggleGroups(o,n);var r=this._childrenViews;if(r)for(var s=0;s<r.length;s++)r[s].resetModel(t);this.model=t,!a.noRender&&this.render()}},_toggleGroups:function(e,t){var n=this;e&&e.forEach(function(e){e&&e.length>0&&n.getElement("#"+e).toggleClassName("expanded",t)})},destroy:function(){delete this._configMap,this._parent(),s("body").off("click.closeListInputFields")},_showGroupProperties:function(t){var n=e.Event.getElement(t);e.extendElement(n.parentElement).toggleClassName("expanded")},_getConfigFromElement:function(e){var t,n=e.getClosest(".ddv-field");if(n){var i=n.getAttribute("data-field-index");i=parseInt(i,10),t=this._config[i]}return t},isModelValid:function(){for(var e=this._config,t=0;t<e.length;t++)if(e[t].required&&!C.prototype.normalizedGet(this.model,e[t].name))return!1;return!0},getFieldViewByName:function(e){var t;return this._childrenViews.some(function(n){return n._config.name===e&&(t=n,!0)}),t},dispatchScrollToElementEvent:function(e){this.dispatchEvent("scrollToElement",e)},handleParentScroll:function(){this.dispatchEvent("onScroll")}})});