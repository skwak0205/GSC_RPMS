define("DS/BusinessExpParamWdg/Components/Dropzone",["text!DS/BusinessExpParamWdg/assets/Template/Components/Dropzone.vue"],function(e){"use strict";return{name:"Dropzone",template:e,props:{value:{required:!0},label:{type:String,default:()=>""},preview:{type:String,default:()=>""},showLabel:{type:Boolean,default:()=>!0},showRatio:{tyype:Boolean,default:!0},minHeight:{type:Number,required:!0},minWidth:{type:Number,required:!0},maxHeight:{type:Number,required:!0},maxWidth:{type:Number,required:!0},maxWeight:{type:Number,default:()=>1/0},maxDuration:{type:Number,default:()=>1/0},ratio:{type:Number,default:()=>1},aspectRatio:{type:Number,default:()=>9/16},displayRatio:{type:String,default:()=>"16 / 9"},keepRatio:{type:Boolean,default:()=>!1},types:{type:Array,default:()=>[]},noCheckDimension:{type:Boolean,default:()=>!1},loading:{type:Boolean,default:!1},error:{type:String,default:""},downloadUrl:{type:String,default:""}},data:()=>({dragOver:!1,error:""}),computed:{url(){return this.error?"":this.value?URL.createObjectURL(this.value):this.preview},downloadUrlComputed(){return this.downloadUrl||this.preview||this.url},completeLabel(){let e=this.label;return this.showRatio&&(e=`${e} x${this.ratio}`),e=`${e} ${this.labelSize}`,this.types.length&&(e=`${e} - ${this.types.join(", ").toUpperCase()}`),e},labelSize(){return this.minHeight===this.maxHeight&&this.minWidth===this.maxWidth?`${this.minWidth*this.ratio}x${this.minHeight*this.ratio}`:`from ${this.minWidth*this.ratio}x${this.minHeight*this.ratio} to ${this.maxWidth*this.ratio}x${this.maxHeight*this.ratio}`},backgroundStyle(){return this.error?{}:{"background-image":`url('${this.url}')`,"background-color":this.isVideo(this.value)?"transparent":""}}},methods:{fileFromDrop(e){return this.dragOver=!1,this.inputFile(e.dataTransfer.files[0])},fileFromInput(){return this.inputFile(this.$refs["upload-input"].files[0])},async inputFile(e){if(e.size>this.maxWeight)return void(this.error=`The maximum file size is ${this.maxWeight}`);let{type:t}=e;t||(t=e.name.split(".").pop()),t=t.replace(/^(image|video)\//,"");if(!this.types.length||this.types.includes(t))if(this.isVideo(e)){const t=document.createElement("video");t.addEventListener("loadedmetadata",t=>{this.fileLoaded(e,{width:t.currentTarget.videoWidth,height:t.currentTarget.videoHeight,duration:t.currentTarget.duration})},!1),t.src=URL.createObjectURL(e)}else{const t=new Image;t.onload=(t=>{this.fileLoaded(e,t.currentTarget)}),t.src=URL.createObjectURL(e)}else this.types.includes(t)?this.error=`You are trying to upload a jpg picture with a ${t} extension, only true ${t} format is supported`:this.error=`Only ${this.types} ${1===this.types.length?"is":"are"} accepted`},checkRatio(e){return!this.keepRatio||e.height/e.width===this.aspectRatio},checkDuration(e){return e.duration<this.maxDuration},checkDimension(e){return!!this.noCheckDimension||e.width>=this.minWidth*this.ratio&&e.height>=this.minHeight*this.ratio&&e.width<=this.maxWidth*this.ratio&&e.height<=this.maxHeight*this.ratio},isVideo(e){return["mp4","avi"].some(e?t=>e.type&&e.type.includes(t):e=>this.preview&&this.preview.endsWith(e))},fileLoaded(e,t){!this.checkDimension(t)||this.isVideo(e)&&!this.checkDuration(t)||this.keepRatio&&!this.checkRatio(t)?this.checkDimension(t)?this.isVideo(e)&&!this.checkDuration(t)?this.error=`Your video duration must be less than ${this.maxDuration}s`:this.keepRatio&&!this.checkRatio(t)&&(this.error=`You document must have a ${this.displayRatio} ratio `):this.error=`Your document must be a ${this.types} file sized ${this.labelSize}px.`:(this.$emit("input",e),this.error="")}}}}),define("DS/BusinessExpParamWdg/WidgetStarter",["UWA/Core","vuejs"],function(e,t){"use strict";var s=e.Class.extend({init:function(e){this._widget=e,this._widget.launched?(this.onLoad(),this.onShow()):this._widget.addEvent("onLoad",function(){this.onLoad(),this.onShow()}.bind(this)),this._widget.addEvent("onShow",this.onShow.bind(this)),this._widget.addEvent("onHide",this.onHide.bind(this)),this._parent()},onLoad:function(){},onShow:function(){this._view&&this.onHide(),this._render()},onHide:function(){this._view.$destroy(),this._widget.body.empty(),this._view=null},_render:function(){this._widget.body.setContent(e.createElement("div",{id:this._id})),this._view=new t(Object.assign({el:"#"+this._id},this._component))}});return function(e,i){return s.extend({init:function(s){this._id=e,this._component=i,this._component.methods||(this._component.methods={}),t.prototype.$getWidget=function(){return this._widget}.bind(this),i.nls&&(t.prototype.$t=function(e){return this._component.nls[e]}.bind(this)),i.plugins&&Object.keys(i.plugins).forEach(e=>{this._component[e]=i.plugins[e]}),this._parent(s)}})}}),define("DS/BusinessExpParamWdg/Plugins/Vukit",["vuejs","vu-kit",`css!DS/BusinessExpParamWdg/assets/vendors/vu-kit/${window.VU_KIT_VERSION}/vu-kit.css`],function(e,t){"use strict";t.install(e)}),define("DS/BusinessExpParamWdg/API",["DS/PlatformAPI/PlatformAPI"],function(e){"use strict";const t=top.require("DS/UWPClientCode/Data/BusinessExperience"),s=top.require("DS/Dashboard/PublicAPI"),i=function(){if(!o){var e=window.location,t=e.pathname,s=e.protocol+"//"+e.host,i=t.indexOf("/api/widget/");o=window.dsBaseUrl||s+t.substring(0,-1!==i?i+1:t.length)}return o};var o;const r={PATCH_WIDGET_DATA_ERROR_CODE:"API#patchData",getPlatformId:function(e){return e.getValue("x3dPlatformId")},getCurrentContext:function(){return s._getActiveContext()},getContextProperty:e=>s._getContextProperty(r.getCurrentContext().modelId,e),fetchVersions:()=>t.getVersions({modelId:r.getCurrentContext().modelId,serviceName:s._getServiceName()}),publishVersion(e){const i={modelId:r.getCurrentContext().modelId,version:e.version,serviceName:s._getServiceName()};return"platform"===e.target?t.publishVersion(i):"marketplace"===e.target?t.publishVersion(i):void 0},createVersion:()=>t.createVersion({modelId:r.getCurrentContext().modelId,serviceName:s._getServiceName()}),getFileUri:function(e){return function(){var e=[],t=arguments.length-1;return Array.prototype.forEach.call(arguments,function(s,i){s&&(s+="",0!==i&&(s=s.replace(/^\//,"")),i!==t&&(s=s.replace(/\/$/,"")),e.push(s))}),e.join("/")}(i(),t.getFileUri({modelId:r.getCurrentContext().modelId,fileId:e}))},uploadPublicFile:function({fileData:e,fileId:i}){return t.uploadPublicFile({modelId:r.getCurrentContext().modelId,fileData:e,fileId:i,serviceName:s._getServiceName()})},deletePublicFile:function({fileId:e}){return t.deleteFile({modelId:r.getCurrentContext().modelId,fileId:e,serviceName:s._getServiceName()})},patchData:function(t,s){return(s=(s=s||[]).filter(function(e){return e})).length?e.patchWidgetData({widget:t,patches:s,silentErrorAlert:!1}).catch(function(){throw{code:r.PATCH_WIDGET_DATA_ERROR_CODE}}):Promise.resolve()},createPatch:function(e,t,s,i){var o=e.environment.getAllData();return"set"===t?{op:s in o?"replace":"add",path:"/"+s,value:i}:"delete"===t&&s in o&&null!=o[s]?{op:"remove",path:"/"+s}:null}};return r}),define("DS/BusinessExpParamWdg/Utils",[],function(){"use strict";return{deepClone:e=>JSON.parse(JSON.stringify(e)),isEmptyObj:(e={})=>!Object.keys(e).length,replace:(e,t)=>(e||"").replace(/\{([\w\-]+)\}/g,function(e,s){return void 0!==t[s]?t[s]:""})}}),define("DS/BusinessExpParamWdg/Constants",[],function(){"use strict";return{asset:{key:{thumbnail:"thumbnail",asset1:"asset1",asset2:"asset2",asset3:"asset3",asset4:"asset4"}},version:{state:{inwork:"IN_WORK",published:"PUBLISHED",released:"RELEASED",deprecated:"DEPRECATED",closed:"CLOSED"},publishTarget:{platform:"platform",marketplace:"marketplace"}}}}),define("DS/BusinessExpParamWdg/Store/Types",[],function(){"use strict";return{index:{getters:{},mutations:{},actions:{initStore:"index_init-store"}},categories:{getters:{getCategories:"categories_get-categories",isCategorySelected:"categories_is-category-selected",getCategoryImageSrc:"categories_get-category-image-src"},mutations:{},actions:{selectCategory:"categories_select-category",unselectCategory:"categories_unselect-category"}},description:{getters:{getTagline:"description_get-tagline",getDescription:"description_get-description",getThumbnailUrl:"description_get-thumbnail-url",getAssetUrl:"description_get-asset-url"},mutations:{setTagline:"description_set-tagline",setDescription:"description_set-description"},actions:{onTaglineChange:"description_on-tagline-change",onDescriptionChange:"description_on-description-change",uploadThumbnailFile:"description_upload-thumbnail-file",deleteThumbnailFile:"description_delete-thumbnail-file",uploadAssetFile:"description_upload-asset-file",deleteAssetFile:"description_delete-asset-file"}},lifecycle:{getters:{getVersions:"lifecycle_get-versions",isVersionPublishedIntoPlatform:"lifecycle_is-version-published-into-platform",isVersionPublishedIntoMarketplace:"lifecycle_is-version-published-into-marketplace"},mutations:{},actions:{init:"lifecycle_init-module",createVersion:"lifecycle_create-version",publishVersion:"lifecycle_publish-version"}},roles:{getters:{getRoles:"roles_get-roles"},mutations:{},actions:{init:"roles_init-module",fetchRoles:"roles_fetch-roles",addRole:"roles_add-role",deleteRole:"roles_delete-role"}}}}),define("DS/BusinessExpParamWdg/Store/Modules/Lifecycle.store",["vuejs","DS/BusinessExpParamWdg/Constants","DS/BusinessExpParamWdg/API","DS/BusinessExpParamWdg/Utils","DS/BusinessExpParamWdg/Store/Types"],function(e,t,s,i,o){"use strict";const r=t.version.state.published,n=t.version.state.closed,a=t.version.publishTarget.platform,l=t.version.publishTarget.marketplace;return{namespaced:!0,state:function(){return{versions:[],publishedVersions:{}}},getters:{[o.lifecycle.getters.getVersions]:e=>e.versions,[o.lifecycle.getters.isVersionPublishedIntoPlatform]:e=>t=>!!(e.publishedVersions[t]||{})[a],[o.lifecycle.getters.isVersionPublishedIntoMarketplace]:e=>t=>!!(e.publishedVersions[t]||{})[l]},mutations:{setVersions(e,t=[]){e.versions=(t||[]).reverse()},addVersion(e,t){e.versions.unshift(t)},setVersionState(t,{revision:s,status:i}){const o=t.versions.find(e=>e.revision===s);e.set(o,"state",i)},setPublishedVersion(t,{revision:s,target:i}){let o=t.publishedVersions[s]||{};e.set(o,i,!0),e.set(t.publishedVersions,s,o)},initState(e){e.versions=[],e.publishedVersions=this.$getValue("publishedVersions")||{}},resetModule(e){e.versions=[],e.publishedVersions={}}},actions:{[o.lifecycle.actions.createVersion]:({commit:e})=>s.createVersion().then(t=>{e("addVersion",t),e("setVersionState",{revision:t.revision-1,status:n})}).catch(e=>{throw console.error("Fail to create new BER version.",e),e}),[o.lifecycle.actions.publishVersion]({state:e,commit:t},i){return s.publishVersion(i).then((s={})=>{t("setPublishedVersion",{revision:i.version,target:i.target}),t("setVersionState",{revision:i.version,status:s.state||r}),this.$setValue("publishedVersions",e.publishedVersions)}).catch(e=>{throw console.error(`Fail to publish BER version "${i.version}" to "${i.target}".`,e),e})},[o.lifecycle.actions.init]:({commit:e,dispatch:t})=>(e("initState"),t("fetchVersions")),fetchVersions:({commit:e})=>s.fetchVersions().then(t=>{e("setVersions",t.map((e,s)=>s<t.length-1?{...e,state:n}:e))}).catch(e=>{throw console.error("Fail to fetch BER versions.",e),e}),resetModule({commit:e}){return e("resetModule"),this.$deleteValue("publishedVersions"),Promise.resolve()}}}}),define("DS/BusinessExpParamWdg/Store/Modules/Roles.store",["vuejs","DS/BusinessExpParamWdg/Utils","DS/BusinessExpParamWdg/Store/Types"],function(e,t,s){"use strict";return{namespaced:!0,state:function(){return{roles:[]}},getters:{[s.roles.getters.getRoles]:e=>e.roles,export:e=>({roles:[...e.roles]})},mutations:{setRoles(e,t=[]){e.roles=t||[]},addRole(e,t){e.roles.unshift(t)},deleteRole(e,t){e.roles=e.roles.filter(e=>e!==t)},initState(e){e.roles=t.deepClone(this.$getValue("selectedRoles")||[])},resetModule(e){e.roles=[]}},actions:{[s.roles.actions.addRole]({state:e,commit:t,dispatch:s},i){return t("addRole",i),this.$setValue("selectedRoles",[...e.roles]),s("onRolesStoreUpdate",void 0,{root:!0}),Promise.resolve()},[s.roles.actions.deleteRole]({state:e,commit:t,dispatch:s},i){return t("deleteRole",i),this.$setValue("selectedRoles",[...e.roles]),s("onRolesStoreUpdate",void 0,{root:!0}),Promise.resolve()},resetModule({commit:e}){return e("resetModule"),this.$deleteValue("selectedRoles"),Promise.resolve()},[s.roles.actions.init]:({commit:e})=>(e("initState"),Promise.resolve())}}}),define("DS/BusinessExpParamWdg/Store/Modules/Categories.store",["vuejs","DS/BusinessExpParamWdg/Utils","DS/BusinessExpParamWdg/Store/Types"],function(e,t,s){"use strict";const i=[{id:"people",image:"People.jpg",label:"People"},{id:"legal",image:"Legal.jpg",label:"Legal"},{id:"strategy",image:"Strategy.jpg",label:"Strategy"},{id:"finance",image:"Finance.jpg",label:"Finance"},{id:"it",image:"IT.jpg",label:"IT"},{id:"marketing",image:"Marketing.jpg",label:"Marketing"},{id:"sales",image:"Sales.jpg",label:"Sales"}];return{namespaced:!0,state:function(){return{categories:{},selectedCategory:""}},getters:{[s.categories.getters.getCategories]:e=>e.categories,[s.categories.getters.isCategorySelected]:e=>t=>e.selectedCategory===t,[s.categories.getters.getCategoryImageSrc]:e=>t=>window.dsDefaultWebappsBaseUrl+"BusinessExpParamWdg/assets/image/category/"+e.categories[t].image,export:e=>({category:e.selectedCategory})},mutations:{setCategories(e,t={}){e.categories=t||{}},selectCategory(e,t){e.selectedCategory=t},unselectCategory(e){e.selectedCategory=""},initState(e){e.categories={},e.selectedCategory=this.$getValue("selectedCategory")||""},resetModule(e){e.categories={},e.selectedCategory=""}},actions:{[s.categories.actions.selectCategory]({state:e,commit:t,dispatch:s},i){t("selectCategory",i),this.$setValue("selectedCategory",e.selectedCategory),s("onCategoriesUpdate",void 0,{root:!0})},[s.categories.actions.unselectCategory]({commit:e,dispatch:t},s){e("unselectCategory",s),this.$setValue("selectedCategory",""),t("onCategoriesUpdate",void 0,{root:!0})},[s.categories.actions.init]:({commit:e,dispatch:t})=>(e("initState"),t("fetchCategories")),fetchCategories:({commit:e})=>(e("setCategories",Object.fromEntries(i.map(e=>[e.id,e]))),Promise.resolve()),resetModule({commit:e}){return e("resetModule"),this.$deleteValue("selectedCategory"),Promise.resolve()}}}}),define("DS/BusinessExpParamWdg/Components/Categories/CategoryTile",["DS/BusinessExpParamWdg/Store/Types","text!DS/BusinessExpParamWdg/assets/Template/Components/Categories/CategoryTile.vue"],function(e,t){"use strict";return{template:t,name:"CategoryTile",props:{category:{type:Object,default:()=>({})}},data:()=>({}),computed:{NS:()=>"categories",isSelected(){return this.$store.getters[`${this.NS}/${e.categories.getters.isCategorySelected}`](this.category.id)},imageSrc(){return this.$store.getters[`${this.NS}/${e.categories.getters.getCategoryImageSrc}`](this.category.id)}},methods:{select(t){this.$store.dispatch(`${this.NS}/${e.categories.actions.selectCategory}`,t)},unselect(t){this.$store.dispatch(`${this.NS}/${e.categories.actions.unselectCategory}`,t)},getStyles(){return{"background-image":`url(${this.imageSrc})`}},onClick(e){this.isSelected?this.unselect(e):this.select(e)}}}}),define("DS/BusinessExpParamWdg/Sections/DescriptionSection",["DS/BusinessExpParamWdg/Constants","DS/BusinessExpParamWdg/Utils","DS/BusinessExpParamWdg/Store/Types","DS/BusinessExpParamWdg/Components/Dropzone","text!DS/BusinessExpParamWdg/assets/Template/Sections/DescriptionSection.vue"],function(e,t,s,i,o){"use strict";const r=e.asset.key.thumbnail,n=e.asset.key.asset1,a=e.asset.key.asset2,l=e.asset.key.asset3,c=e.asset.key.asset4;return{name:"DescriptionSection",template:o,components:{Dropzone:i},data(){const e={model:void 0,url:"",uploading:!1,error:!1};return{TAGLINE_MAX_LENGTH:160,DESCRIPTION_MIN_LENGTH:300,DESCRIPTION_MAX_LENGTH:900,THUMBNAIL_KEY:r,types:["thumbnail","media1","media2","media3","media4"],bustcaches:{},data:{},titlePreview:"",[r]:{...e},assetsMap:{[n]:{...e},[a]:{...e},[l]:{...e},[c]:{...e}}}},computed:{NS:()=>"description",that(){return this},tagline:{get(){return this.$store.getters[`${this.NS}/${s.description.getters.getTagline}`]||""},set(e){this.$store.commit(`${this.NS}/${s.description.mutations.setTagline}`,e),this.$store.dispatch(`${this.NS}/${s.description.actions.onTaglineChange}`)}},description:{get(){return this.$store.getters[`${this.NS}/${s.description.getters.getDescription}`]||""},set(e){this.$store.commit(`${this.NS}/${s.description.mutations.setDescription}`,e),this.$store.dispatch(`${this.NS}/${s.description.actions.onDescriptionChange}`)}},thumbnailUrl(){return this.$store.getters[`${this.NS}/${s.description.getters.getThumbnailUrl}`]()},taglineLabel(){return t.replace(this.$t("taglineInputLabel"),{length:this.tagline.length,maxLength:this.TAGLINE_MAX_LENGTH})},taglineMaxLengthErrorMsg(){return t.replace(this.$t("inputLengthError"),{maxLength:this.TAGLINE_MAX_LENGTH})},taglineLengthRule:()=>!0,descriptionLabel(){return t.replace(this.$t("descriptionInputLabel"),{descriptionLength:this.descriptionLength})},descriptionMaxLengthErrorMsg(){return t.replace(this.$t("inputMinMaxLengthError"),{minLength:this.DESCRIPTION_MIN_LENGTH,maxLength:this.DESCRIPTION_MAX_LENGTH})},descriptionLengthRule:()=>!0,descriptionLength(){const e=this.description,t=document.createElement("div");return t.innerHTML=e,t.innerText.length}},created(){this.$store.dispatch(`${this.NS}/${s.description.actions.init}`).then(()=>{this.$set(this[r],"url",this.thumbnailUrl),Object.keys(this.assetsMap).forEach(e=>{this.$set(this.assetsMap[e],"url",this.getAssetUrl(e))})})},mounted(){this.$refs.form.validate()},methods:{getAssetUrl(e){return this.$store.getters[`${this.NS}/${s.description.getters.getAssetUrl}`](e)},setAsset(e,t){let i,o;e===r?(i=s.description.actions.uploadThumbnailFile,o=this[e]):(i=s.description.actions.uploadAssetFile,o=this.assetsMap[e]),this.$set(o,"uploading",!0),this.$set(o,"error",void 0),this.$store.dispatch(`${this.NS}/${i}`,{key:e,file:t}).then(()=>{this.$set(o,"url",e===r?this.thumbnailUrl:this.getAssetUrl(e))}).catch((e={})=>{this.$set(o,"error",e.message||"Upload failed.")}).finally(()=>{this.$set(o,"uploading",!1)})},deleteAsset(e){let t,i,o;e===r?(i=s.description.actions.deleteThumbnailFile,o=this[e]):(i=s.description.actions.deleteAssetFile,o=this.assetsMap[e]),t=o.url,this.$set(o,"url",""),this.$set(o,"model",void 0),this.$store.dispatch(`${this.NS}/${i}`,e).catch(e=>{this.$set(o,"url",t),this.$set(o,"error",e.message||"Delete failed.")})}}}}),define("DS/BusinessExpParamWdg/Sections/VocabularySection",["DS/BusinessExpParamWdg/Store/Types","text!DS/BusinessExpParamWdg/assets/Template/Sections/VocabularySection.vue"],function(e,t){"use strict";const s={how:{label:"How",icon:"fonticon-3ds-how"},what:{label:"What",icon:"fonticon-3ds-what"},who:{label:"Who",icon:"fonticon-3ds-who"},when:{label:"When",icon:"fonticon-3ds-when"},where:{label:"Where",icon:"fonticon-3ds-where"},why:{label:"Why",icon:"fonticon-3ds-why"}},i={text:"Text"};return{name:"VocabularySection",template:t,components:{},data:()=>({vocabularies:[],vocabModel:{sixW:"",name:"",type:"",value:""},vocabSixWOptions:Object.keys(s).map(e=>({value:e,label:s[e].label})),vocabTypeOptions:Object.keys(i).map(e=>({value:e,label:i[e]})),editVocab:!1,vocabCtnStyle:{},vocabFormStyle:{}}),computed:{vocabValueLabel(){return this.$t("vocabularyValuesInputLabel")}},mounted(){this.vocabularies=widget.getValue("vocabularies")||[]},methods:{addVocabulary(){const e={...this.vocabModel};e.id=Date.now(),this.vocabularies.unshift(e),Object.keys(this.vocabModel).forEach(e=>{this.vocabModel[e]=""}),this.setValue("vocabularies",this.vocabularies)},editVocabulary(e,t){this.editVocab=t;const s=e.target.getBoundingClientRect(),i=this.$refs.vocabCtnEl.getBoundingClientRect();this.vocabCtnStyle={"padding-top":"75px"},this.vocabFormStyle={position:"absolute",top:`${s.y-i.y-19}px`,"padding-right":"30px"};let o=this.vocabularies.find(e=>e.id===t);this.vocabModel={id:t,sixW:o.sixW,name:o.name,type:o.type,value:o.value}},onEditVocabulary(e){const t=this.editVocab;if(this.editVocab=!1,this.vocabCtnStyle={},this.vocabFormStyle={},!e)return void(this.vocabModel={});let s=this.vocabularies.findIndex(e=>e.id===t);this.vocabularies[s]={...this.vocabModel},this.vocabModel={},this.setValue("vocabularies",this.vocabularies)},removeVocabulary(e){this.vocabularies=this.vocabularies.filter(t=>t.id!==e),this.setValue("vocabularies",this.vocabularies)},getSixWIcon:e=>(s[e]||{}).icon,getSixWLabel:e=>(s[e]||{}).label,getVocabTypeLabel:e=>i[e],setValue(e,t){widget.dispatchEvent("onUpdateValue",[e,t])}}}}),define("DS/BusinessExpParamWdg/Sections/CategoriesSection",["DS/BusinessExpParamWdg/Store/Types","DS/BusinessExpParamWdg/Components/Categories/CategoryTile","text!DS/BusinessExpParamWdg/assets/Template/Sections/CategoriesSection.vue"],function(e,t,s){"use strict";return{name:"CategoriesSection",template:s,components:{CategoryTile:t},data:()=>({isInitied:!1}),computed:{NS:()=>"categories",categories(){return this.$store.getters[`${this.NS}/${e.categories.getters.getCategories}`]}},created(){this.$store.dispatch(`${this.NS}/${e.categories.actions.init}`).then(()=>{this.isInitied=!0})},mounted(){},methods:{}}}),define("DS/BusinessExpParamWdg/Sections/OntologySection",["DS/BusinessExpParamWdg/Store/Types","text!DS/BusinessExpParamWdg/assets/Template/Sections/OntologySection.vue"],function(e,t){"use strict";const s={country:"Country","escoRoles&Skills":"ESCO Roles & Skills",calendar:"Calendar",other:"Other"};return widget.setPreferences([{name:"selectedOntologies",type:"hidden",defaultValue:""}]),{name:"OnotologySection",template:t,components:{},data:()=>({ontology:s,selectedOntology:"",selectedOntologies:[],ontologyOptions:[]}),computed:{},mounted(){this.selectedOntologies=widget.getValue("selectedOntologies")||[],this.ontologyOptions=Object.keys(s).map(e=>({value:e,label:s[e],disabled:this.selectedOntologies.includes(e)}))},methods:{addOntology(){this.selectedOntology&&!this.selectedOntologies.includes(this.selectedOntology)&&(this.selectedOntologies.unshift(this.selectedOntology),this.ontologyOptions.forEach(e=>{e.value===this.selectedOntology&&(e.disabled=!0)}),this.selectedOntology="",this.setValue("selectedOntologies",this.selectedOntologies))},removeOntology(e){this.selectedOntologies=this.selectedOntologies.filter(t=>t!==e),this.ontologyOptions.forEach(t=>{t.value===e&&(t.disabled=!1)}),this.setValue("selectedOntologies",this.selectedOntologies)},setValue(e,t){widget.dispatchEvent("onUpdateValue",[e,t])}}}}),define("DS/BusinessExpParamWdg/Sections/RolesSection",["DS/BusinessExpParamWdg/Store/Types","text!DS/BusinessExpParamWdg/assets/Template/Sections/RolesSection.vue"],function(e,t){"use strict";return{name:"RolesSection",template:t,components:{},data:()=>({inputRole:""}),computed:{NS:()=>"roles",roles(){return this.$store.getters[`${this.NS}/${e.roles.getters.getRoles}`]}},created(){this.$store.dispatch(`${this.NS}/${e.roles.actions.init}`)},mounted(){},methods:{checkInputRole(e){return!this.roles.includes(e)||this.$t("roleAlreadyExists")},addRole(){const t=this.inputRole;t&&!this.roles.includes(t)&&(this.$store.dispatch(`${this.NS}/${e.roles.actions.addRole}`,t),this.inputRole="",this.$refs.inputAddRole.$el.getElement('input[type="text"]').focus())},removeRole(t){this.$store.dispatch(`${this.NS}/${e.roles.actions.deleteRole}`,t)}}}}),define("DS/BusinessExpParamWdg/Components/Lifecycle/VersionTile",["DS/BusinessExpParamWdg/Constants","DS/BusinessExpParamWdg/Store/Types","text!DS/BusinessExpParamWdg/assets/Template/Components/Lifecycle/VersionTile.vue"],function(e,t,s){"use strict";const i=e.version.state.inwork,o=e.version.state.published,r=e.version.state.released,n=e.version.state.deprecated,a=e.version.state.closed,l=e.version.publishTarget.platform,c=e.version.publishTarget.marketplace;return{name:"VersionTile",template:s,components:{},props:{version:{type:Object,default:()=>({})},publishing:{type:Boolean,default:!1}},emits:{publish:null},data:()=>({PUBLISH_TARGET_PLATFORM:l,PUBLISH_TARGET_MARKETPLACE:c}),computed:{NS:()=>"lifecycle",publishBtnColor(){let e=this.publishing?"":"primary";return this.isPublished&&(e="success"),e},isStateInWork(){return this.version.state===i},isStatePublished(){return this.version.state===o},isStateReleased(){return this.version.state===r},isStateDeprecated(){return this.version.state===n},isStateClosed(){return this.version.state===a},isPublished(){return this.isPublishedIntoPlatform||this.isStatePublished},isPublishedIntoPlatform(){return this.$store.getters[`${this.NS}/${t.lifecycle.getters.isVersionPublishedIntoPlatform}`](this.version.revision)},isPublishedIntoMarketplace:()=>!1},mounted(){},methods:{publish(e){this.publishing||e===l&&this.isPublishedIntoPlatform||e===c&&this.isPublishedIntoMarketplace||this.$emit("publish",{target:e,version:this.version})}}}}),define("DS/BusinessExpParamWdg/Store/Modules/Description.store",["vuejs","DS/BusinessExpParamWdg/Utils","DS/BusinessExpParamWdg/API","DS/BusinessExpParamWdg/Store/Types"],function(e,t,s,i){"use strict";return{namespaced:!0,state:function(){return{tagline:"",description:"",thumbnailId:"",assetsIds:{},_widget:null}},getters:{[i.description.getters.getTagline]:e=>e.tagline,[i.description.getters.getDescription]:e=>e.description,[i.description.getters.getThumbnailUrl]:e=>()=>e.thumbnailId?s.getFileUri(e.thumbnailId):"",[i.description.getters.getAssetUrl]:e=>t=>e.assetsIds[t]?s.getFileUri(e.assetsIds[t]):"",export:e=>({tagline:e.tagline,description:e.description,thumbnailId:e.thumbnailId,assetsIds:Object.values(e.assetsIds)})},mutations:{[i.description.mutations.setTagline](e,t){e.tagline=t},[i.description.mutations.setDescription](e,t){e.description=t},setThumbnailId(e,t){e.thumbnailId=t},setAssetId(t,{id:s,key:i}){e.set(t.assetsIds,i,s)},deleteAssetId(t,s){e.delete(t.assetsIds,s)},initState(e){e._widget=this.$getWidget(),e.tagline=this.$getValue("tagline")||"",e.description=this.$getValue("description")||"",e.thumbnailId=this.$getValue("thumbnailId")||"",e.assetsIds=t.deepClone(this.$getValue("assetsIds")||{})},resetModule(e){e.tagline="",e.description="",e.thumbnailId="",e.assetsIds={}}},actions:{[i.description.actions.onTaglineChange]({state:e,dispatch:t}){return this.$setValue("tagline",e.tagline),t("onDescriptionStoreUpdate",void 0,{root:!0}),Promise.resolve()},[i.description.actions.onDescriptionChange]({state:e,dispatch:t}){return this.$setValue("description",e.description),t("onDescriptionStoreUpdate",void 0,{root:!0}),Promise.resolve()},[i.description.actions.uploadThumbnailFile]({state:e,commit:t,dispatch:s},{file:i}){return s("uploadPublicFile",{file:{data:i,id:"thumbnail.jpg"}}).then(()=>{t("setThumbnailId","thumbnail.jpg"),this.$setValue("thumbnailId",e.thumbnailId),s("onDescriptionStoreUpdate",void 0,{root:!0})}).catch(e=>{throw console.error("### Upload thumbnail file error",e),e})},[i.description.actions.deleteThumbnailFile]({commit:e,dispatch:t}){return e("setThumbnailId",""),t("deletePublicFile",{fileId:"thumbnail.jpg"}).then(()=>{this.$setValue("thumbnailId",""),t("onDescriptionStoreUpdate",void 0,{root:!0})}).catch(t=>{throw e("setThumbnailId","thumbnail.jpg"),console.error("### Delete thumbnail file error",t),t})},[i.description.actions.uploadAssetFile]({state:e,commit:s,dispatch:i},{key:o,file:r}){const n=function({assetsIds:e,key:t,file:s}){return e[t]?e[t]:`${t}.${s.type.split("/")[1]}`}({assetsIds:e.assetsIds,key:o,file:r});return i("uploadPublicFile",{file:{data:r,id:n}}).then(()=>{s("setAssetId",{id:n,key:o}),this.$setValue("assetsIds",t.deepClone(e.assetsIds)),i("onDescriptionStoreUpdate",void 0,{root:!0})}).catch(e=>{throw console.error(`### Upload asset "${o}" file error`,e),e})},[i.description.actions.deleteAssetFile]({state:e,commit:s,dispatch:i},o){const r=e.assetsIds[o];return s("deleteAssetId",o),i("deletePublicFile",{fileId:r,key:o}).then(()=>{this.$setValue("assetsIds",t.deepClone(e.assetsIds)),i("onDescriptionStoreUpdate",void 0,{root:!0})}).catch(e=>{throw s("setAssetId",{id:r,key:o}),console.error(`### Delete asset "${o}" file error`,e),e})},uploadPublicFile(e,{file:t}){if(!t||!t.id)throw"Missing mandatory options.";return s.uploadPublicFile({fileData:t.data,fileId:t.id}).catch(e=>{throw e})},deletePublicFile(e,{fileId:t}){if(!t)throw"Missing mandatory options.";return s.deletePublicFile({fileId:t}).catch(e=>{throw e})},[i.description.actions.init]:({commit:e})=>(e("initState"),Promise.resolve()),resetModule({commit:e}){return e("resetModule"),this.$deleteValue("tagline"),this.$deleteValue("description"),this.$deleteValue("thumbnailId"),this.$deleteValue("assetsIds"),Promise.resolve()}}}}),define("DS/BusinessExpParamWdg/Sections/LifecycleSection",["DS/BusinessExpParamWdg/Utils","DS/BusinessExpParamWdg/Store/Types","DS/BusinessExpParamWdg/Components/Lifecycle/VersionTile","text!DS/BusinessExpParamWdg/assets/Template/Sections/LifecycleSection.vue"],function(e,t,s,i){"use strict";return{name:"LifecycleSection",template:i,components:{VersionTile:s},data:()=>({isInitied:!1,isCreatingVersion:!1,isPublishing:!1}),computed:{NS:()=>"lifecycle",versions(){return this.$store.getters[`${this.NS}/${t.lifecycle.getters.getVersions}`]}},created(){this.$store.dispatch(`${this.NS}/${t.lifecycle.actions.init}`).then(()=>{this.isInitied=!0})},methods:{confirmCreateVersion(){if(this.isCreatingVersion)return Promise.resolve();const e=this.$t("confirmCreateVersionTitle"),t=this.$t("confirmCreateVersionBody");return this.$confirm(t,e,{okLabel:this.$t("add"),cancelLabel:this.$t("cancel")}).then(e=>e?this._createVersion():Promise.resolve())},confirmPublishVersion({target:t,version:s}){if(this.publishing)return Promise.resolve();const i=this.$t("confirmPublishVersionTitle"),o=e.replace(this.$t("confirmPublishVersionBody"),{version:s.revision});this.$confirm(o,i,{okLabel:this.$t("publish"),cancelLabel:this.$t("cancel")}).then(e=>e?this._publishVersion({target:t,version:s}):Promise.resolve())},_createVersion(){return this.isCreatingVersion?Promise.resolve():(this.isCreatingVersion=!0,this.$store.dispatch(`${this.NS}/${t.lifecycle.actions.createVersion}`).catch(e=>{throw e}).finally(()=>{this.isCreatingVersion=!1}))},_publishVersion({target:e,version:s}){return this.publishing?Promise.resolve():(this.publishing=!0,this.$store.dispatch(`${this.NS}/${t.lifecycle.actions.publishVersion}`,{target:e,version:s.revision}).catch(e=>{throw e}).finally(()=>{this.publishing=!1}))}}}}),define("DS/BusinessExpParamWdg/Store/Index",["vuejs","vuex","DS/BusinessExpParamWdg/Utils","DS/BusinessExpParamWdg/API","DS/BusinessExpParamWdg/Store/Types","DS/BusinessExpParamWdg/Store/Modules/Categories.store","DS/BusinessExpParamWdg/Store/Modules/Description.store","DS/BusinessExpParamWdg/Store/Modules/Roles.store","DS/BusinessExpParamWdg/Store/Modules/Lifecycle.store"],function(e,t,s,i,o,r,n,a,l){"use strict";const c=function(){return e.prototype.$getWidget()},d=function(e){let t=c().getValue(e);return"object"!=typeof t||Array.isArray(t)||(t=s.deepClone(t)),t},u=function(e,t){const s=c();let i=Promise.resolve();return s.setValue(e,t),i},h={initState(){}},p={[o.index.actions.initStore]({commit:e}){e("initState");const t=d("x3dPlatformId"),s=i.getContextProperty("platformId");return t!==s&&u("x3dPlatformId",s),Promise.resolve()},setTarget({getters:e}){const t={...e["description/export"],roles:e["roles/export"].roles};u("target",t)},onDescriptionStoreUpdate:({dispatch:e})=>e("setTarget"),onCategoriesStoreUpdate:({dispatch:e})=>e("setTarget"),onRolesStoreUpdate:({dispatch:e})=>e("setTarget")};e.use(t);const g={categories:r,description:n,roles:a,lifecycle:l},m=new t.Store({state:{},getters:{},actions:p,mutations:h,modules:g});return m.$getWidget=c,m.$setValue=u,m.$getValue=d,m.$deleteValue=function(e){const t=c();let s=Promise.resolve();return t.deleteValue(e),s},m});const isDebugEnabled="debug_me"in window.UWA.Utils.parseQuery(window.location.search||"");window.VU_KIT_VERSION=window.VU_KIT_VERSION||"1.0.17",require.config({paths:{vuejs:`${window.dsDefaultWebappsBaseUrl}vuejs/2.6.10/vue.min`,vuex:`${window.dsDefaultWebappsBaseUrl}vuex/3.1.1/vuex.min`,"vu-kit":`${window.dsDefaultWebappsBaseUrl}BusinessMethodWdg/assets/vendors/vu-kit/${window.VU_KIT_VERSION}/vu-kit.umd${isDebugEnabled?"":".min"}`}}),define("DS/BusinessExpParamWdg/BusinessExpParam",["vuejs","DS/BusinessExpParamWdg/WidgetStarter","DS/BusinessExpParamWdg/Plugins/Vukit","DS/BusinessExpParamWdg/Store/Index","DS/BusinessExpParamWdg/Store/Types","DS/BusinessExpParamWdg/Sections/CategoriesSection","DS/BusinessExpParamWdg/Sections/DescriptionSection","DS/BusinessExpParamWdg/Sections/LifecycleSection","DS/BusinessExpParamWdg/Sections/OntologySection","DS/BusinessExpParamWdg/Sections/RolesSection","DS/BusinessExpParamWdg/Sections/VocabularySection","text!DS/BusinessExpParamWdg/assets/Template/BusinessExpParam.vue","i18n!DS/BusinessExpParamWdg/assets/nls/BusinessExpParam","css!DS/BusinessExpParamWdg/BusinessExpParamWdg.css"],function(e,t,s,i,o,r,n,a,l,c,d,u,h){"use strict";return t("business-exp-param",{store:i,i18n:!0,nls:h,name:"BusinessExperienceParameters",template:u,components:{CategoriesSection:r,DescriptionSection:n,LifecycleSection:a,OntologySection:l,RolesSection:c,VocabularySection:d},data:()=>({}),computed:{},created(){this.$store.dispatch(o.index.actions.initStore)},mounted(){},methods:{}})});