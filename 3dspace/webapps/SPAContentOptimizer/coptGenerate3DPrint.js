/*!  Copyright 2020 Dassault Systemes. All rights reserved. */
define("DS/SPAContentOptimizer/coptGenerate3DPrint",["DS/CSICommandBinder/CSICommandBinder","DS/SPAContentOptimizer/COpt3DPrintOption"],function(n,r){"use strict";new n.Parameters;var t=function(n){this._node=n,this._nodeId=null,this.onResultFile=null,this.onErrors=null,this.onProgress=null,this.onWarnings=null};return t.prototype={constructor:t,onAnswerResultFile:function(n){var r=n.readBool("result");if(null!=r){var t=n.readBuffer("resultFile");this.onResultFile(r,t)}this.onAnswerWarnings(n),this.dispose()},onAnswerWarnings:function(n){if(null!=this.onWarnings&&"function"==typeof this.onWarnings){var r=n.readStringArray("warnings");null!=r&&0<r.length&&this.onWarnings(r)}},onAnswerProgress:function(n){if(n.existsWithType("progress","double")&&null!=this.onProgress&&"function"==typeof this.onProgress){var r=n.readDouble("progress");this.onProgress(r)}},onAnswerErrors:function(n){var r=JSON.stringify(n.toJSObject());null!=this.onErrors&&"function"==typeof this.onErrors&&this.onErrors(r),this.dispose()},generate3DPrint:function(r,t,e,i){this._nodeId=this._node.select("ContentOptimizer");var s=new n.Parameters;return s.writeString("inputFileName",r),s.writeBuffer("inputFile",t),s.writeInt32("printType",e),s.writeObject("options","COpt3DPrintOption",i),this._node.call({destinationNodeId:this._nodeId,name:"coptGenerate3DPrint",version:1,parameters:s,onSuccess:this.onAnswerResultFile.bind(this),onError:this.onAnswerErrors.bind(this),onProgress:this.onAnswerProgress.bind(this)}),!0,!0},dispose:function(){null!=this._nodeId&&(this._nodeId.close(),this._nodeId=null)}},t});