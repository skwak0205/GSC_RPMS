/*!  Copyright 2020 Dassault Systemes. All rights reserved. */
define("DS/SPAContentOptimizer/coptPing",["DS/CSICommandBinder/CSICommandBinder"],function(n){"use strict";new n.Parameters;var o=function(n){this._node=n,this._nodeId=null,this.onPong=null,this.onErrors=null};return o.prototype={constructor:o,onAnswerPing:function(n){if(console.log("coptPing.onAnswerPing"),null!=this.onPong&&"function"==typeof this.onPong){var o=n.readString("message");this.onPong(o)}this.dispose()},onAnswerErrors:function(n){console.log("coptPing.onAnswerErrors");var o=JSON.stringify(n.toJSObject());null!=this.onErrors&&"function"==typeof this.onErrors&&this.onErrors(o),this.dispose()},ping:function(o){this._nodeId=this._node.select("ContentOptimizer");var t=new n.Parameters;return t.writeString("inputMessage",o),this._node.call({destinationNodeId:this._nodeId,name:"coptPing",version:1,parameters:t,onSuccess:this.onAnswerPing.bind(this),onError:this.onAnswerErrors.bind(this)}),!0,!0},dispose:function(){null!=this._nodeId&&(this._nodeId.close(),this._nodeId=null)}},o});