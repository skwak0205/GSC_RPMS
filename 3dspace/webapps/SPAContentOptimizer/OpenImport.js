/*!  Copyright 2015 Dassault Systemes. All rights reserved. */
define("DS/SPAContentOptimizer/OpenImport",["DS/CSICommandBinder/CSICommandBinder","DS/SPAContentOptimizer/COProductStructure","DS/SPAContentOptimizer/COConvertOption","DS/SPAContentOptimizer/COMiscWCS","DS/SPAContentOptimizer/COMiscLayer","DS/SPAContentOptimizer/COMiscLayerFilter","DS/SPAContentOptimizer/COMiscMaterial","DS/SPAContentOptimizer/COMiscNoteParameters","DS/SPAContentOptimizer/COMiscSymmetry","DS/SPAContentOptimizer/COMiscDisplaySet","DS/SPAContentOptimizer/COUserProperties","DS/SPAContentOptimizer/COMappingData"],function(t,n,e,i,s,r,o,a,l,u,h,c){"use strict";var p=new t.Parameters,m=function(n){this._node=n,this._nodeId=null,this._DocId=-1,this.onOpenResult=null,this.onErrors=null,this.onProgress=null,this.onMissingFiles=null,this.onInfo=null,this.onConfiguration=null,this.onAsm=null,this.onPart=null,this.onVisu=null,this.onMiscDataWCS=null,this.onMiscDataLayer=null,this.onMiscDataLayerFilter=null,this.onMiscDataMaterial=null,this.onMiscDataNoteParameters=null,this.onMiscDataSymmetry=null,this.onMiscDataDisplaySet=null,this.onMiscDataUP=null,this.onMappingData=null,this.onEntityData=null,this.onThumb2D=null,this.onThumb3D=null,this._serverRequest=null,this._responseOpen=new t.Response,this._responseImport=new t.Response},d=function(){this.Version=null,this.ModificationDate=null,this.OriginalFileName=null,this.LastSavedPath=null,this.Author=null,this.Organization=null,this.SourceSystem=null,this.Unit=null,this.Comment=null,this.FormatType=null,this.DocumentType=null,this.Tolerance=null},f=function(){this.ActiveConfiguration=null,this.Configurations=[]};return m.prototype={constructor:m,callbackOpen:function(t){this._responseOpen.callDomains(t)},callbackImport:function(t){this._responseImport.callDomains(t)},onAnswerOpenResult:function(t){var n=t.readString("Result"),e=t.readInt16("Document");if(this._DocId=e,null!=this.onOpenResult&&"function"==typeof this.onOpenResult){var i="Success"==n&&0<=e;this.onOpenResult(i)}},onAnswerProgress:function(t){if(null!=this.onProgress&&"function"==typeof this.onProgress){var n=t.readDouble("Progress");this.onProgress(n)}},onAnswerErrors:function(t){if(null!=this.onErrors&&"function"==typeof this.onErrors){var n=t.readString("CommandName"),e=t.readStringArray("Errors");this.onErrors(n,e)}},onAnswerMissingFiles:function(t){if(null!=this.onMissingFiles&&"function"==typeof this.onMissingFiles){var n=t.readStringArray("FilePaths");this.onMissingFiles(n)}},OnAnswerInfo:function(t){if(null!=this.onInfo&&"function"==typeof this.onInfo){t.toJSObject(!0);var n=new d;n.Version=t.readString("Version"),n.ModificationDate=t.readString("ModificationDate"),n.OriginalFileName=t.readString("OriginalFileName"),n.LastSavedPath=t.readString("LastSavedPath"),n.Author=t.readString("Author"),n.Organization=t.readString("Organization"),n.SourceSystem=t.readString("SourceSystem"),n.Unit=t.readString("Unit"),n.Comment=t.readString("Comment"),n.FormatType=t.readString("FormatType"),n.DocumentType=t.readUint8("DocumentType"),n.Tolerance=t.readDouble("Tolerance"),this.onInfo(n)}if(null!=this.onConfiguration&&"function"==typeof this.onConfiguration){var e=new f;e.ActiveConfiguration=t.readString("ActiveConfiguration"),e.Configurations=t.readStringArray("Configurations"),this.onConfiguration(e)}},OnAnswerAsm:function(t){if(null!=this.onAsm&&"function"==typeof this.onAsm){var n=t.readObject("AsmObject","COProductStructure");this.onAsm(n)}},onAnswerThumb2D:function(t){if(null!=this.onThumb2D&&"function"==typeof this.onThumb2D){var n=t.readBuffer("Thumb"),e=t.readString("Type");this.onThumb2D(e,n)}},onAnswerThumb3D:function(t){if(null!=this.onThumb3D&&"function"==typeof this.onThumb3D){var n=t.readBuffer("Thumb"),e=t.readString("Type");this.onThumb3D(e,n)}},OnAnswerPart:function(t){if(null!=this.onPart&&"function"==typeof this.onPart){var n=t.readUint32("RefId"),e=t.readBuffer("Data"),i=t.readString("Type");this.onPart(n,i,e)}},OnAnswerVisu:function(t){if(null!=this.onVisu&&"function"==typeof this.onVisu){var n=t.readUint32("RefId"),e=t.readBuffer("Data"),i=t.readString("Type");this.onVisu(n,i,e)}},OnAnswerMiscData:function(t){var n=t.readUint32("RefId");if(null!=this.onMiscDataWCS&&"function"==typeof this.onMiscDataWCS){var e=t.readObjectArray("WCS","COMiscWCS");this.onMiscDataWCS(n,e)}if(null!=this.onMiscDataLayer&&"function"==typeof this.onMiscDataLayer){var i=t.readObjectArray("Layers","COMiscLayer");this.onMiscDataLayer(n,i)}if(null!=this.onMiscDataLayerFilter&&"function"==typeof this.onMiscDataLayerFilter){var s=t.readObjectArray("LayerFilters","COMiscLayerFilter");this.onMiscDataLayerFilter(n,s)}if(null!=this.onMiscDataMaterial&&"function"==typeof this.onMiscDataMaterial){var r=t.readObjectArray("Materials","COMiscMaterial");this.onMiscDataMaterial(n,r)}if(null!=this.onMiscDataNoteParameters&&"function"==typeof this.onMiscDataNoteParameters){var o=t.readObjectArray("NoteParameters","COMiscNoteParameters");this.onMiscDataNoteParameters(n,o)}if(null!=this.onMiscDataSymmetry&&"function"==typeof this.onMiscDataSymmetry){var a=t.readObjectArray("Symmetry","COMiscSymmetry");this.onMiscDataSymmetry(n,a)}if(null!=this.onMiscDataDisplaySet&&"function"==typeof this.onMiscDataDisplaySet){var l=t.readObjectArray("DisplaySet","COMiscDisplaySet");this.onMiscDataDisplaySet(n,l)}if(null!=this.onMiscDataUP&&"function"==typeof this.onMiscDataUP){var u=t.readObjectArray("UserProperties","COUserProperties");this.onMiscDataUP(n,u)}},OnAnswerMappingData:function(t){var n=t.readUint32("RefId");if(null!=this.onMappingData&&"function"==typeof this.onMappingData){var e=t.readObjectArray("MappingData","COMappingData");this.onMappingData(n,e)}},OnAnswerEntityData:function(t){var n=t.readUint32("RefId");if(null!=this.onEntityData&&"function"==typeof this.onEntityData){var e=t.readObjectArray("EntityData","COEntity");this.onEntityData(n,e)}},initOpenResponse:function(){this._nodeId=this._node.select("ContentOptimizer"),this._responseOpen.onAnswerDomain("OpenResult",this.onAnswerOpenResult.bind(this)),this._responseOpen.onAnswerDomain("Info",this.OnAnswerInfo.bind(this)),this._responseOpen.onAnswerDomain("Asm",this.OnAnswerAsm.bind(this)),this._responseOpen.onAnswerDomain("MissingFiles",this.onAnswerMissingFiles.bind(this)),this._responseOpen.onAnswerDomain("Errors",this.onAnswerErrors.bind(this)),this._responseOpen.onAnswerDomain("Thumb2D",this.onAnswerThumb2D.bind(this)),this._responseOpen.onAnswerDomain("Thumb3D",this.onAnswerThumb3D.bind(this)),null!=this.onProgress&&"function"==typeof this.onProgress&&(this._node.subscribe(this._nodeId,"Progress",this._responseOpen),this._responseOpen.onAnswerDomain("Progress",this.onAnswerProgress.bind(this)))},initImportResponse:function(){this._responseImport.onAnswerDomain("Part",this.OnAnswerPart.bind(this)),this._responseImport.onAnswerDomain("Visu",this.OnAnswerVisu.bind(this)),this._responseImport.onAnswerDomain("MiscData",this.OnAnswerMiscData.bind(this)),this._responseImport.onAnswerDomain("MappingData",this.OnAnswerMappingData.bind(this)),this._responseImport.onAnswerDomain("EntityData",this.OnAnswerEntityData.bind(this)),this._responseImport.onAnswerDomain("Errors",this.onAnswerErrors.bind(this))},open:function(n,e,i,s){var r=!1;this.initOpenResponse();var o=this._node.createRequest({destinationNodeId:this._nodeId,command:"Open",version:1,onComplete:this.callbackOpen.bind(this)});if(null!=o){this._serverRequest=o;var a=new t.Parameters;a.writeString("InputFileName",n),a.writeBuffer("InputFile",e),a.writeUint8("Thumb",i),a.writeBool("Thumb3D",s),o.send(p,a,p),r=!0}return r},getAsm:function(n){var e=!1;this.initOpenResponse();var i=this._node.createRequest({destinationNodeId:this._nodeId,command:"GetAsm",version:1,onComplete:this.callbackOpen.bind(this)});if(null!=i){this._serverRequest=i;var s=new t.Parameters;s.writeInt16("Document",this._DocId),s.writeString("ConfigName",n),i.send(p,s,p),e=!0}return e},openUrl:function(n,e,i,s){var r=!1,o=this.initOpenRequest();if(null!=o){this._serverRequest=o;var a=new t.Parameters;a.writeString("InputFileName",n),a.writeString("InputFileUrl",e),a.writeUint8("Thumb",i),a.writeBool("Thumb3D",s),o.send(p,a,p),r=!0}return r},importTo:function(n,e,i){var s=!1;this.initImportResponse();var r=this._node.createRequest({destinationNodeId:this._nodeId,command:"ImportTo",version:1,onComplete:this.callbackImport.bind(this)});if(null!=r){this._serverRequest=r;var o=new t.Parameters;o.writeInt16("Document",this._DocId),o.writeUint8("BRep",n),o.writeUint8("Visu",e),o.writeObject("Options","COImportOption",i),r.send(p,o,p),s=!0}return s},importRefTo:function(n,e,i,s){var r=!1;this.initImportResponse();var o=this._node.createRequest({destinationNodeId:this._nodeId,command:"ImportRefTo",version:1,onComplete:this.callbackImport.bind(this)});if(null!=o){this._serverRequest=o;var a=new t.Parameters;a.writeInt16("Document",this._DocId),a.writeUint32("RefId",n),a.writeUint8("BRep",e),a.writeUint8("Visu",i),a.writeObject("Options","COImportOption",s),o.send(p,a,p),r=!0}return r},importAll:function(n,e,i,s,r,o){var a=!1;this.initImportResponse();var l=this._node.createRequest({destinationNodeId:this._nodeId,command:"Import",version:1,onComplete:this.callbackImport.bind(this)});if(null!=l){this._serverRequest=l;var u=new t.Parameters;u.writeInt16("Document",this._DocId),u.writeBool("GeneratePart",n),u.writeBool("GenerateVisu",e),null==i&&(r=!1),u.writeBool("ForceGenerateVisu",r),null==i&&(i=!1),u.writeBool("DRep",i),null==o&&(o=!1),u.writeBool("HideSeam",o),null==s&&(s=""),u.writeString("ConfigName",s),l.send(p,u,p),a=!0}return a},importPartReference:function(n,e,i,s,r,o,a){var l=!1;this.initImportResponse();var u=this._node.createRequest({destinationNodeId:this._nodeId,command:"ImportPartReference",version:1,onComplete:this.callbackImport.bind(this)});if(null!=u){this._serverRequest=u;var h=new t.Parameters;h.writeInt16("Document",this._DocId),h.writeUint32("RefId",n),h.writeBool("GeneratePart",e),h.writeBool("GenerateVisu",i),null==o&&(o=!1),h.writeBool("ForceGenerateVisu",o),null==s&&(s=!1),h.writeBool("DRep",s),null==a&&(a=!1),h.writeBool("HideSeam",a),null==r&&(r=""),h.writeString("ConfigName",r),u.send(p,h,p),l=!0}return l},close:function(){var n=!1,e=this._node.createRequest({destinationNodeId:this._nodeId,command:"Close",version:1,onComplete:this.callbackOpen.bind(this)});if(null!=e){this._serverRequest=e;var i=new t.Parameters;i.writeInt16("Document",this._DocId),e.send(p,i,p),n=!0}return n},dispose:function(){null!=this._nodeId&&(this._nodeId.close(),this._nodeId=null)}},m});