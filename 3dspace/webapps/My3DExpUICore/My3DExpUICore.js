var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("DS/My3DExpUICore/script/feature/core/realtime/coreview-manager",["require","exports","DS/SwymUICore/script/lib/pub-sub","DS/PlatformAPI/PlatformAPI","DS/SwymUICore/script/feature/core/context/context-model","DS/SwymUICore/script/feature/core/context/context-constants"],function(e,t,r,n,i,o){"use strict";var a={instance:null},c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setup=function(){n.subscribe("toswym.im.ds.com",function(e){if("acceptCoreview"===e.action){var t=i.getInstance();t.reset({quadrant:o.WEST_QUADRANT,path:o.WEST_QUADRANT+"/"+o.SKETCH_CREATION_URL_PART+":"+e.data.mediaId}),t.setCoreviewData(e)}})},t}(r);return a.instance=new c,a});__extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("DS/My3DExpUICore/script/mde-bootstrap-model",["require","exports","UWA/Class/Events","DS/SwymUICore/script/feature/core/context/context-constants","DS/SwymUICore/script/feature/core/context/context-model","DS/SwymUICore/script/utils/utils"],function(e,t,r,n,i,o){"use strict";return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getFedSearchUrlPromise=function(){return o.getFedSearchUrlPromise()},t.prototype.getMDETopframeConfig=function(){var e={},t=i.getInstance();return e[n.NORTH_QUADRANT]="north",e[n.CENTER_QUADRANT]="play",{activateGDPR:!0,topMenus:{profile:!0,add:!0,help:!0,notification:!0},showCoachmark:!1,activateLegal:!1,brand:n.MY3DEXPERIENCE_BRAND_NAME,compassVersion:"V2",compassDefaultQuadrant:e[t.quadrant]||t.quadrant,showWidgetApps:!0,enableWidgetDrag:function(e,t){var r={tenantAware:t.tenantAware,x3dPlatformId:t.platformId};window.require(["DS/UWPClientCode/PublicAPI"],function(n){n.enableDragAndInstantiation({noHandler:!0,element:e,appId:t.id,icon:t.icon,url:t.launchInfos,dataUrl:t.config,data:JSON.stringify(r),title:t.title,trusted:t.trusted,token:t.checksum,apps:JSON.stringify(t.apps)})})},onTenantChange:function(e){var t=e||{},r=t.from,n=t.to,i=n.my3dexperience;i&&r.platformId!==n.platformId&&window.location.assign(i+"/social")}}},t.prototype.loginToFedSearch=function(e,t){return new Promise(function(e){window.require(["DS/SwymUICore/script/feature/core/config/bootstrap-model"],function(t){t.getInstance().getStartupTenantsInfo(function(t){return e(t)})})}).then(function(r){var n=r&&r.swym&&r.swym[0]&&r.swym[0].id,i=r&&r.search&&r.search[0]&&r.search[0].url;window.require(["DS/WAFData/WAFData","DS/SwymUICore/script/utils/utils"],function(r,o){r.authenticatedRequest("".concat(i,"/login"),{data:{tenant:n,mde:!0},method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(t){o.initFedSearchUrl(i),e&&e()},onFailure:function(e){t&&t()}})})})},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}(r)}),define("DS/My3DExpUICore/script/feature/container/container-utils",["require","exports","DS/SwymUICore/script/feature/core/context/context-constants"],function(e,t,r){"use strict";var n=/^drive:/,i=/^swym:/,o=/^dashboard:/,a="DriveFile";return{getContainerTypeFromSource:function(e){var t=null;return(e=e||"").match(n)?t=r.DRIVE_URL_PART:e.match(o)?t=r.COCKPIT_URL_PART:e.match(i)&&(t=r.COMMUNITY_URL_PART),t},getContainerIdFromSource:function(e,t){var n=null;return e===r.DRIVE_URL_PART&&(n=r.THREE_DDRIVE_ID_URL_PART),e===r.COCKPIT_URL_PART&&(n=t.get("mid")),e===r.COMMUNITY_URL_PART&&(n=encodeURIComponent(t.get("ds6w:community"))),n},isDriveFile:function(e){var t=!1;return e===a&&(t=!0),t}}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/center/query",[],function(){"use strict";return".3dsto"}),define("DS/My3DExpUICore/script/feature/container/contents/swym-response-utils",["UWA/Core"],function(e){"use strict";return{parseResponseItem:function(t){var r=function(e){var t=e.resourceid;return t&&(e.model_id=t),e}(t),n=function(e){var t={};switch((e["ds6w:what/ds6w:type"]||e["ds6w:type"]).toLowerCase()){case"swym:post":t.type="post";break;case"swym:question":t.type="iquestion";break;case"swym:idea":t.type="idea";break;case"swym:wikitreepage":t.type="wiki";break;case"swym:survey":t.type="survey";break;case"swym:picture":t.media_type="picture",t.type="media";break;case"swym:sound":t.media_type="sound",t.type="media";break;case"swym:video":t.media_type="video",t.type="media";break;case"swym:3dmodel":t.media_type="3d_model",t.type="media";break;case"swym:drawing":t.media_type="drawing",t.type="media";break;case"swym:document":t.media_type="document",t.type="media";break;default:t.type="media"}return t}(r);return e.extend(r,n)}}}),define("DS/My3DExpUICore/script/feature/container/contents/drive-response-utils",[],function(){"use strict";var e={"3dxml":"3d_model",stl:"3d_model",jpg:"picture",jpeg:"picture",png:"picture",bmp:"picture",pdf:"document"},t=Object.keys(e);return{parseResponseItem:function(r){!function(r){var n=r["ds6w:what/ds6w:docExtension"];r.type="media",t.indexOf(n)>-1&&(r.drive_media_type=e[n])}(r);return function(e){var t=e.resourceid;return t&&(e.model_id=t),e}(r)}}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/drive",["UWA/Core"],function(e){"use strict";var t={get_source:function(e){return this._previous(e).concat(function(e){var t={dropbox:"dropbox","3ddrive":"drive","google-drive":"googledrive",onedrive:"onedrive"};return[t[e.containerId]?t[e.containerId]:"drive"]}(e))}},r={get_specific_source_parameter:function(t){var r=this._previous(t);return e.extend(r,{drive:{additional_query:' AND NOT ([flattenedtaxonomies]:"types/DriveNode" AND [current]:"Trashed")'}})}};return{WithDriveSource:t,WithDriveSpecificSourceParameter:r,WithDrive:e.extend(e.extend({},t),r)}}),define("DS/My3DExpUICore/script/lib/fedSearch/utils",[],function(){"use strict";function e(e,t){return e[t.name]=t.value,e}function t(t){return t.attributes.reduce(e,{})}return{parseResult:function(e){var r=e.results||[];return r=r.map(t)}}}),define("DS/My3DExpUICore/script/feature/container/contents/space-response-utils",[],function(){"use strict";return{parseResponseItem:function(e){!function(e){e.type="media"}(e);return function(e){var t=e.resourceid;return t&&(e.model_id=t),e}(e)}}}),define("DS/My3DExpUICore/script/bootstrap/compass-bootstrap",["require","exports","DS/SwymUICore/script/utils/utils","DS/SwymUICore/script/feature/core/context/context-constants","DS/i3DXCompassServices/i3DXCompassPubSub","DS/SwymUICore/script/utils/navigation","DS/SwymUICore/script/utils/routing"],function(e,t,r,n,i,o,a){"use strict";var c=!1;function s(e){var t=e.quadrant,i=!1,c={};c.north=n.NORTH_QUADRANT,c.play=n.CENTER_QUADRANT,t&&((t=c[t]?c[t]:t)===n.NORTH_QUADRANT||t===n.EAST_QUADRANT?i=!0:t===n.WEST_QUADRANT&&r.isFeatureActivated("activateWestQuadrant")?i=!0:t===n.SOUTH_QUADRANT&&r.isFeatureActivated("activateSouthQuadrant")?i=!0:t===n.CENTER_QUADRANT&&r.isFeatureActivated("activateCenterQuadrant")&&(i=!0),i&&o.goToUrl(a.getSocialPageBaseUrl()+"#"+t))}return{subscribeToCompassEvents:function(){c||(i.subscribe("compassEvent",s),c=!0)}}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/swym",["UWA/Core"],function(e){"use strict";var t={get_source:function(e){return this._previous(e).concat(["swym"])}},r={get_refine:function(t){var r=this._previous(t)||{};return e.extend(r,function(e){return{"ds6w:where/ds6w:context/ds6w:community":[{disptext:e.containerId,object:e.containerId,type:"string",field:["implicit"]}]}}(t))}};return{WithSwymSource:t,WithSwymRefine:r,WithSwym:e.extend(e.extend({},t),r)}}),define("DS/My3DExpUICore/script/feature/container/contents/dashboard-response-utils",[],function(){"use strict";return{parseResponseItem:function(e){var t=function(e){var t=e.resourceid;return t&&(e.model_id=t),e}(e);return t.type="cockpit",t}}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/space",["UWA/Core"],function(e){"use strict";var t={get_source:function(e){return this._previous(e).concat(["3dspace"])}},r={get_specific_source_parameter:function(t){var r=this._previous(t);return e.extend(r,{"3dspace":{additional_query:' AND NOT (flattenedtaxonomies:("types/Person" OR "types/Security Context")) AND NOT (owner:"ENOVIA_CLOUD" OR owner:"Service Creator" OR owner:"Corporate" OR owner:"User Agent" OR owner:"SLMInstallerAdmin")'}})}},n={get_refine:function(t){var r=this._previous(t)||{};return e.extend(r,function(e){return{"ds6w:where/ds6w:context/ds6w:project":[{disptext:e.containerName,object:e.containerName,type:"string",field:["implicit"]}]}}(t))}};return{WithSpaceSource:t,WithSpaceSpecificSourceParameter:r,WithSpaceRefine:n,WithSpace:e.extend(e.extend(e.extend({},t),n),r)}}),define("DS/My3DExpUICore/script/feature/drive/drive-file",["UWA/Promise","DS/WAFData/WAFData","DS/SwymUICore/script/feature/core/config/bootstrap-model","DS/SwymUICore/script/utils/utils","DS/SwymUICore/script/utils/platform-utils","DS/Logger/Logger"],function(e,t,r,n,i,o){"use strict";var a=null,c="/resources/3ddrive/v1/bos/";return{getDriveFileUrl:function(n){return function(t){var n=r.getInstance().get("config").tenant.online_instance_id;return new e(a?function(e){e(a)}:function(e,t){i.get3DDriveURL(n,function(t){e(t)},function(e){t(e)})}).then(function(e){return e+c+t+"/fileurl"})}(n).then(function(r){return new e(function(e,n){t.authenticatedRequest(r,{method:"GET",onComplete:function(t,r){var n;n="string"==typeof t?JSON.parse(t):t,e(n,r)},onFailure:function(e,t){o.log(e),o.log(t),n(e,t)}})})}).then(function(e){return o.log(e),e&&e.url})},getDriveFileModel:function(t,r){return new e(function(n){require(["DS/SwymUICore/script/feature/community/media/model/media-model"],function(i){var a=new i({mid:t});(function(e){return Boolean(e.get("title"))})(a)||r&&!1===r.fetch?n(a):function(t){return new Promise(function(e){require(["DS/My3DExpUICore/script/mde-bootstrap-model"],function(t){return t.getInstance().getFedSearchUrlPromise().then(function(t){e(t)})})}).then(function(r){return new e(function(e,n){require(["DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west-drive-model","DS/SwymUICore/script/utils/utils","DS/My3DExpUICore/script/feature/container/contents/utils","DS/My3DExpUICore/script/lib/fedSearch/utils","DS/WAFData/WAFData"],function(i,a,c,s,u){var d=new i({containerId:"3ddrive",containerType:"drive",limit:8,nextStart:null,page:1,quadrant:"west"}).getQuery();d.query="[physicalid]:("+t+")",u.authenticatedRequest(r+"/search",{data:JSON.stringify({params:d}),type:"json",dataType:"json",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(t){var r;o.log(t),r=c.parseResponseArray(s.parseResult(t)),Array.isArray(r)&&r.length>0?e(r[0]):n(t)},onFailure:function(e,t){o.log(e),o.log(t),n()}})})})})}(t).then(function(e){n(new i(e))})})})}}}),define("DS/My3DExpUICore/script/feature/cockpit/cockpit-model",["DS/SwymUICore/script/lib/model/generic/community-content"],function(e){"use strict";return e.extend({_modelName:"cockpit",_iconCls:"chart-map-tree",_iconWrapperCls:"cockpit",_attributesMapping:{"ds6w:description":"enhanced_summary"},hasFirstMedia:function(){return!1},getCommunity:function(){return null}})}),define("DS/My3DExpUICore/script/lib/fedSearch/attributes-mapping",["require","exports"],function(e,t){"use strict";return{"ds6w:label":"title","ds6w:who/ds6w:responsible":"author->nickname","ds6w:responsible":"author->nickname","ds6w:responsibleUid":"author->login","ds6w:snippet":"description","ds6w:description":"enhanced_summary","ds6w:what/ds6w:docExtension":"media_file_ext","ds6w:docExtension":"media_file_ext","ds6w:when/ds6w:created":"publish_date","ds6w:created":"publish_date",resourceid:"subject6wuri","ds6w:where/ds6w:context/ds6w:community":"community->title"}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/dashboard",["UWA/Core"],function(e){"use strict";var t={get_source:function(e){return this._previous(e).concat(["dashboard"])}};return{WithDashboardSource:t,WithDashboard:e.extend({},t)}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/defaults",["DS/SwymUICore/script/utils/utils"],function(e){"use strict";var t,r,n;return{with_indexing_date:!0,with_nls:!1,label:"my3dexp",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6w:description","ds6w:identifier","ds6w:modified","ds6w:created","ds6wg:revision","ds6w:status","ds6w:responsible","owner","ds6w:responsibleUid","ds6wg:filesize","ds6w:project","ds6w:dataSource","ds6w:community"],select_file:["icon","thumbnail_2d"],query:"([ds6w:modified]>"+(t=new Date,r=1,t=t instanceof Date?t:new Date,r="number"==typeof r?parseInt(r,10):1,(n=t).setMonth(t.getMonth()-r),n.setDate(1),n).toISOString().split("T")[0]+")",refine:"",specific_source_parameter:{},order_by:"desc",order_field:"ds6w:created",select_snippets:[],source:[],tenant:e.getCurrentTenantId(),nresults:10,next_start:null,start:0}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/utils",["UWA/Core"],function(e){"use strict";return{mergeQuery:function(e,t){var r;if("string"!=typeof t)throw new Error("A query can only be a string");if(e){if("string"!=typeof e)throw new Error("Incompatible types of query found");r=e+" AND "+t}else r=t;return r},mergeRefine:function(t,r){var n;if("object"!=typeof r)throw new Error("A refine can only be an object");if(t){if("object"!=typeof t)throw new Error("Incompatible types of refine found");n=e.merge(t,r)}else n=r;return n}}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/west/query",["DS/SwymUICore/script/utils/utils"],function(e){"use strict";return!0===e.isFeatureActivated("activateSwymPrefixForFedsearchQuery")?'(([ds6w:type]:("swym:video" BOR "swym:Sound" BOR "swym:Picture" BOR "swym:Drawing" BOR "swym:3dModel" BOR "swym:Document" BOR "swym:AnimatedPicture" BOR "DriveFile")))':'(([ds6w:type]:("video" BOR "Sound" BOR "Picture" BOR "Drawing" BOR "3dModel" BOR "Document" BOR "AnimatedPicture" BOR "DriveFile")))'}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/web-swym",["UWA/Core"],function(e){"use strict";var t={get_source:function(e){return this._previous(e).concat(["swym"])}};return{WithSwymSource:t,WithSwymModeration:{get_specific_source_parameter:function(t){var r=this._previous(t);return e.extend(r,{swym:{moderationMode:!1}})}},WithSwym:e.extend(e.extend({},t))}}),define("DS/My3DExpUICore/script/mde-link-builder-utils",["UWA/Core","UWA/Class/Events","UWA/Event","DS/SwymUICore/script/utils/navigation","DS/SwymUICore/script/feature/core/context/context-model","DS/SwymUICore/script/utils/link-builder-utils"],function(e,t,r,n,i,o){"use strict";function a(e){if(!0!==e.ctrlKey){var t=r.getElement(e),a=(t.getAttribute("data-content-type"),{quadrant:t.getAttribute("data-quadrant"),containerId:t.getAttribute("data-container-id"),containerType:t.getAttribute("data-container-type")||t.getAttribute("data-content-type")});"community"===a.containerType&&t.getElement("img")&&(i.getInstance()._lastAccessedCommunityId=t.getElement("img").getAttribute("data-content-id")),o.blockEventPropagation(e),t&&n.goToContainer(a)}}function c(e){if(!0!==e.ctrlKey){var t=r.getElement(e),i=t.getAttribute("data-content-type"),a={quadrant:t.getAttribute("data-quadrant"),containerId:t.getAttribute("data-container-id"),containerType:t.getAttribute("data-container-type")||t.getAttribute("data-content-type"),contentId:t.getAttribute("data-content-id")};"community"===i&&(a.communityId=t.getAttribute("data-content-id")),o.blockEventPropagation(e),t&&n.goToContentInContainer(a)}}return t.singleton({activateLink:function(t){return function(t){var r={};r['click *[data-content-id]:not([data-content-type="community"]):not([data-container-type]):not([data-content-type="direct-message"]):not([data-is-link="false"])']=o.onContentClick,r['mouseover a[data-content-id]:not([data-content-type="community"]):not([data-container-type]):not([data-content-type="direct-message"]):not([data-is-link="false"])']=o.displayContentHREF,r['click *[data-container-id][data-container-type][data-quadrant]:not([data-content-id]):not([data-is-link="false"])']=a,r['click *[data-container-id][data-container-type][data-content-id][data-content-type][data-quadrant]:not([data-is-link="false"])']=c,e.extendElement(t).addEvents(r,!1,1)}(t)}}).init()}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/south/query",[],function(){"use strict";return".3dsim"}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/east/query",["DS/SwymUICore/script/utils/utils"],function(e){"use strict";return!0===e.isFeatureActivated("activateSwymPrefixForFedsearchQuery")?'(([ds6w:type]:("swym:video" BOR "swym:Sound" BOR "swym:Picture" BOR "swym:Drawing" BOR "swym:3dModel" BOR "swym:Document" BOR "swym:AnimatedPicture" BOR "swym:Post" BOR "swym:Survey" BOR "swym:Question" BOR "swym:WikitreePage" BOR "swym:Idea" BOR "Dashboard" BOR "DriveFile" BOR "Document")))':'(([ds6w:type]:("video" BOR "Sound" BOR "Picture" BOR "Drawing" BOR "3dModel" BOR "Document" BOR "AnimatedPicture" BOR "Post" BOR "Survey" BOR "Question" BOR "WikitreePage" BOR "Idea" BOR "Dashboard" BOR "DriveFile" BOR "Document")))'}),define("DS/My3DExpUICore/script/mde-init",["require","exports","UWA/Element","DS/Logger/Logger","UWA/Class/Promise","DS/My3DExpUICore/script/mde-bootstrap-model","DS/SwymUICore/script/feature/core/context/context-model","DS/My3DExpUICore/script/feature/core/realtime/coreview-manager","DS/SwymUICore/script/utils/utils","DS/My3DExpUICore/script/bootstrap/compass-bootstrap"],function(e,t,r,n,i,o,a,c,s,u){"use strict";var d=a.getInstance(),p=o.getInstance();u.subscribeToCompassEvents(),d.addListener("onContextChange",function(){try{var e=s.getContextFromRoute(d.getLayoutPath());switch(e){case"generic-content":case"east/cockpit":case"east/drive":r.extend(document.body).removeClassName("topframe-overlap");break;default:0!==e.indexOf("east")&&0!==e.indexOf("west")&&0!==e.indexOf("south")&&0!==e.indexOf("center")||r.extend(document.body).addClassName("topframe-overlap")}}catch(e){n.error(e)}},this,!0);var f=p.loginToFedSearch.bind(p),y=function(){},m=function(){s.isFeatureActivated("activateSketchCoreview")&&c.instance.setup()};return{start:function(){return i.resolve("").then(y,n.error).then(function(){return e=document.body,new i(function(t,r){window.require(["DS/My3DExpUICore/script/mde-link-builder-utils"],function(r){r.activateLink(e||document.body),t("")})});var e}).then(f,n.error).then(m,n.error)}}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model",["UWA/Core","UWA/Class","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/defaults","DS/SwymUICore/script/utils/utils"],function(e,t,r,n){"use strict";var i=Object.keys(r);return t.extend({name:"base-query-model",attributes:null,extraQueryParams:null,init:function(e){var t=this.setAttributeFromGetter.bind(this);return this.attributes={},e&&e.extraQueryParams&&(this.extraQueryParams=e.extraQueryParams),i.reduce(t,e),this._parent(e)},setAttributeFromGetter:function(e,t){return"function"==typeof this["get_"+t]&&(this.attributes[t]=this["get_"+t](e)),e},get_with_indexing_date:function(){return r.with_indexing_date},get_with_nls:function(){return r.with_nls},get_label:function(){return r.label+"-"+n.getCurrentTenantId()+"-"+(new Date).getTime()},get_locale:function(){return r.locale},get_select_predicate:function(){return r.select_predicate},get_select_file:function(){return r.select_file},get_query:function(){return r.query},get_refine:function(){return r.refine},get_specific_source_parameter:function(){return r.specific_source_parameter},get_order_by:function(){return r.order_by},get_order_field:function(){return r.order_field},get_select_snippets:function(){return r.select_snippets},get_source:function(){return r.source},get_tenant:function(){return r.tenant},get_nresults:function(e){return void 0!==e.nresults?e.nresults:e.limit},get_next_start:function(e){return e.nextStart?e.nextStart:void 0},get_start:function(e){return e.nextStart?void 0:0},getQuery:function(){var t;for(var r in this.attributes)void 0===this.attributes[r]&&delete this.attributes[r];return t=e.extend({},this.attributes),this.extraQueryParams&&(t=e.extend(t,this.extraQueryParams)),t}})}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/south/query","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/utils"],function(e,t,r){"use strict";var n={get_query:function(e){var n=this._previous(e),i=t;return r.mergeQuery(n,i)}};return{WithSouth:e.extend({},n),WithSouthQuery:n}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/center/query","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/utils"],function(e,t,r){"use strict";var n={get_query:function(e){var n=this._previous(e),i=t;return r.mergeQuery(n,i)}};return{WithCenter:e.extend({},n),WithCenterQuery:n}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/west/query","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/utils"],function(e,t,r){"use strict";var n={get_query:function(e){var n=this._previous(e),i=t;return r.mergeQuery(n,i)}},i={get_specific_source_parameter:function(e){return{swym:{additional_query:'-(community_id:"n1TFX5iZSL6XzUiyWtR6zg") -(media_filename:"*.3dsto") -(media_filename:"*.3dsim")'}}}};return{WithWestQuery:n,WithWest:e.extend(e.extend({},n),i)}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/east/query","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/utils"],function(e,t,r){"use strict";var n={get_query:function(e){var n=this._previous(e),i=t;return r.mergeQuery(n,i)}};return{WithEast:e.extend({},n),WithEastQuery:n}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east-cockpits-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/dashboard","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east"],function(e,t,r,n){"use strict";var i=r.WithDashboard,o=n.WithEast;return t.extend({name:"east-cockpits-query-model"},i,o)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center-space-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/space","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center"],function(e,t,r,n){"use strict";var i=r.WithSpace,o=n.WithCenter;return t.extend({name:"center-space-query-model"},o,i)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west-swym-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/swym","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west"],function(e,t,r,n){"use strict";var i=r.WithSwym,o=n.WithWest;return t.extend({name:"west-swym-query-model"},i,o)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west-model",["DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/drive","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/space","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/swym","DS/SwymUICore/script/utils/utils"],function(e,t,r,n,i,o){"use strict";var a=t.WithWest,c=r.WithDriveSource,s=i.WithSwymSource,u=o.isFeatureActivated("deactivate3DSpace")?{}:n.WithSpaceSource;return e.extend({name:"west-query-model"},a,c,u,s)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east-model",["DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/drive","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/space","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/swym","DS/SwymUICore/script/utils/utils"],function(e,t,r,n,i,o){"use strict";var a=t.WithEast,c=r.WithDriveSource,s=i.WithSwymSource,u=o.isFeatureActivated("deactivate3DSpace")?{}:n.WithSpaceSource;return e.extend({name:"east-query-model"},a,c,s,u)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east-drives-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/drive","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east"],function(e,t,r,n){"use strict";var i=r.WithDriveSource,o=n.WithEast;return t.extend({name:"east-drives-query-model"},i,o)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west-drive-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/drive","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west"],function(e,t,r,n){"use strict";var i=r.WithDrive,o=n.WithWest;return t.extend({name:"west-drive-query-model"},i,o)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south-space-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/space","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south"],function(e,t,r,n){"use strict";var i=r.WithSpace,o=n.WithSouth;return t.extend({name:"south-space-query-model"},o,i)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west-space-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/space","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west"],function(e,t,r,n){"use strict";var i=r.WithSpace,o=n.WithWest;return t.extend({name:"west-space-query-model"},i,o)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center-drive-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/drive","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center"],function(e,t,r,n){"use strict";var i=r.WithDrive,o=n.WithCenter;return t.extend({name:"center-drive-query-model"},i,o)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south-swym-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/swym","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south"],function(e,t,r,n){"use strict";var i=r.WithSwym,o=n.WithSouth;return t.extend({name:"south-swym-query-model"},o,i)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center-model",["DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/drive","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/space","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/swym","DS/SwymUICore/script/utils/utils"],function(e,t,r,n,i,o){"use strict";var a=t.WithCenter,c=r.WithDriveSource,s=i.WithSwymSource,u=o.isFeatureActivated("deactivate3DSpace")?{}:n.WithSpaceSource;return e.extend({name:"center-query-model"},a,c,s,u)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center-swym-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/swym","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center"],function(e,t,r,n){"use strict";var i=r.WithSwym,o=n.WithCenter;return t.extend({name:"center-swym-query-model"},o,i)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south-model",["DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/drive","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/space","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/swym","DS/SwymUICore/script/utils/utils"],function(e,t,r,n,i,o){"use strict";var a=t.WithSouth,c=r.WithDriveSource,s=i.WithSwymSource,u=o.isFeatureActivated("deactivate3DSpace")?{}:n.WithSpaceSource;return e.extend({name:"south-query-model"},a,c,s,u)}),define("DS/My3DExpUICore/script/feature/container/contents/utils",["DS/My3DExpUICore/script/feature/container/contents/space-response-utils","DS/My3DExpUICore/script/feature/container/contents/drive-response-utils","DS/My3DExpUICore/script/feature/container/contents/swym-response-utils","DS/My3DExpUICore/script/feature/container/contents/dashboard-response-utils"],function(e,t,r,n){"use strict";var i=new RegExp("^([a-z0-9]+):[a-z0-9]+$","i"),o={drive:t.parseResponseItem,space:e.parseResponseItem,swym:r.parseResponseItem,dashboard:n.parseResponseItem};function a(e){return(0,o[function(e){var t="",r=e.sourceid.match(i);if(2===r.length)switch(r[1]){case"swym":case"3dswym":t="swym";break;case"drive":case"3ddrive":t="drive";break;case"space":case"3dspace":t="space";break;case"dashboard":case"3ddashboard":t="dashboard"}return t}(e)])(e)}return{parseResponseArray:function(e){return e.map(a)}}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south-drive-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/drive","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south"],function(e,t,r,n){"use strict";var i=r.WithDrive,o=n.WithSouth;return t.extend({name:"south-drive-query-model"},i,o)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/web-east",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/config/east/query","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/utils"],function(e,t,r){"use strict";var n={get_query:function(e){var t=this._previous(e);return r.mergeQuery(t,'(community_id:"n1TFX5iZSL6XzUiyWtR6zg")')}};return{WithEast:e.extend({},n),WithEastQuery:n}}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east-web-model",["UWA/Core","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/base-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/web-swym","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/web-east"],function(e,t,r,n){"use strict";var i=r.WithSwym,o=n.WithEast;return t.extend({name:"east-web-query-model"},i,o)}),define("DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/factory",["DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west-drive-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west-swym-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/west/west-space-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south-drive-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south-swym-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/south/south-space-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center-drive-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center-swym-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/center/center-space-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east-cockpits-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east-drives-model","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/east/east-web-model"],function(e,t,r,n,i,o,a,c,s,u,d,p,f,y,m,l){"use strict";var S={west:{west:e,containerType:{drive:i,space:a,community:o}},south:{south:t,containerType:{drive:c,space:u,community:s}},center:{center:r,containerType:{drive:d,space:f,community:p}},east:{east:n,containerType:{drives:m,cockpits:y,network:n,web:l}}};return{constructQuery:function(e){var t,r;return e.quadrant&&(t=(r=e.containerType?S[e.quadrant].containerType[e.containerType]:S[e.quadrant][e.quadrant])&&new r(e)),t&&t.getQuery()}}}),define("DS/My3DExpUICore/script/lib/collection/contents-collection",["UWA/Core","DS/SwymUICore/script/lib/collection/generic/6wfilterable-collection","DS/SwymUICore/script/feature/community/iquestion/model/iquestion-model","DS/SwymUICore/script/feature/community/post/model/post-model","DS/SwymUICore/script/feature/community/idea/model/idea-model","DS/SwymUICore/script/feature/community/media/model/media-model","DS/SwymUICore/script/feature/community/wiki/model/wiki-model","DS/My3DExpUICore/script/feature/cockpit/cockpit-model","DS/SwymUICore/script/lib/model/generic/swym-model","DS/SwymUICore/script/feature/community/survey/model/survey-model","DS/SwymUICore/script/lib/6wpanel/utils","DS/SwymUICore/script/utils/utils","DS/My3DExpUICore/script/feature/container/contents/utils","DS/My3DExpUICore/script/feature/container/contents/fedSearch/query/factory","DS/My3DExpUICore/script/lib/fedSearch/utils"],function(e,t,r,n,i,o,a,c,s,u,d,p,f,y,m){"use strict";function l(e){return e&&e.refine&&"object"==typeof e.refine&&Object.keys(e.refine).length>0}var S=null,h={post:"post",iquestion:"iquestion",question:"iquestion",wiki:"wiki",idea:"idea",media:"media",survey:"survey",cockpit:"cockpit"},D=["whats-new","container"],w=function(e){var t=null;if(e.type&&(e.model=e.type),e.model=e.model||e.source,e.model){if(t=e.model.toLowerCase(),h.hasOwnProperty(t)){switch(t=h[t]){case"post":t=n;break;case"iquestion":t=r;break;case"idea":t=i;break;case"media":t=o;break;case"wiki":t=a;break;case"survey":t=u;break;case"cockpit":t=c;break;default:throw new Error("No class found for model:"+t)}return t}throw{name:"Invalid model",message:"There is no class attached to the model specified"}}throw{name:"No model provided",message:"An attribute model should be present in each item of the result returned from the server"}},x=function(e,t){return new(w(e))(e,t)},C=t.extend({_collectionName:"contents-collection",_services:{read:{"whats-new":{urlFn:function(){return S+"/search"},noCsrfToken:!0,dataFn:function(e){e.quadrant=this.quadrant,e.nextStart=this.nextStart,e.extraQueryParams=this.extraQueryParams;var t=y.constructQuery(e);return t&&!l(t)&&(t.with_synthesis=!1),t},parse:function(e){return this.retrieveInfosFromServerResponse(e),f.parseResponseArray(m.parseResult(e))}},container:{urlFn:function(){return S+"/search"},noCsrfToken:!0,dataFn:function(e){e.quadrant=this.quadrant,e.containerType=this.containerType,e.containerId=this.containerId,e.nextStart=this.nextStart,e.extraQueryParams=this.extraQueryParams;var t=y.constructQuery(e);return t&&!l(t)&&(t.with_synthesis=!1),t},parse:function(e){return this.retrieveInfosFromServerResponse(e),f.parseResponseArray(m.parseResult(e))}}},filter:{"whats-new":{urlFn:function(){return S+"/search"},noCsrfToken:!0,dataFn:function(e){return e.quadrant=this.quadrant,e.extraQueryParams=this.extraQueryParams,y.constructQuery(e)},parse:function(e){return f.parseResponseArray(m.parseResult(e))},tagsWithoutSubjectURI:!0},container:{urlFn:function(){return S+"/search"},noCsrfToken:!0,dataFn:function(e){return e.quadrant=this.quadrant,e.containerType=this.containerType,e.containerId=this.containerId,e.extraQueryParams=this.extraQueryParams,y.constructQuery(e)},parse:function(e){return f.parseResponseArray(m.parseResult(e))}}}},containerType:null,containerId:null,quadrant:null,nextStart:null,refineUsingQuery:null,extraQueryParams:null,model:x,mode:null,modes:["whats-new","container"],fetchTagsSeparatelyOnRefresh:!0,init:function(e,t){if(t){if(t.model)throw delete t.model,{name:"Model provided",message:"No model should be provided for a mixed collection"};t.refineUsingQuery&&(this.refineUsingQuery=t.refineUsingQuery),t.containerType&&(this.containerType=t.containerType),t.containerId&&(this.containerId=t.containerId),t.quadrant&&(this.quadrant=t.quadrant),t.extraQueryParams&&(this.extraQueryParams=t.extraQueryParams)}return this._parent(e,t),"whats-new"!==this.mode&&"community"!==this.mode||t.paginationMode||(this.paginationMode="PREV_NEXT"),this},fetchPage:function(e,t){var r=this._parent.bind(this);if(S=null,1===e&&(this.nextStart=null),!this.isBeingFetched()&&D.indexOf(this.mode)>=0)return new Promise(function(e){require(["DS/My3DExpUICore/script/mde-bootstrap-model"],function(t){return t.getInstance().getFedSearchUrlPromise().then(function(t){e(t)})})}).then(function(n){return S=n,r(e,t)}.bind(this))},retrieveInfosFromServerResponse:function(e){this.updateNextStartAttribute(e)},updateNextStartAttribute:function(e){e&&e.hasOwnProperty("infos")&&e.infos.hasOwnProperty("next_start")&&(this.nextStart=e.infos.next_start)},getNbResults:function(e){var t;return e&&e.hasOwnProperty("infos")&&e.infos.hasOwnProperty("nhits")&&(t=e.infos.nhits),t},parse:function(t,r){var n,i,o,a=this._parent(t,r);if(e.is(a,"array")){i=[];for(var c=0,u=a.length;c<u;c++)(o=a[c]).subject6wuri=o.resourceid,o instanceof s?i.push(o):(n=w(o),i.push(n.prototype.applyAttributesMapping(o)))}else i=a;return i}});return x.prototype.idAttribute="id",C});