define("DS/TagNavigatorWebInWin/TaggerWebInWin",["UWA/Drivers/Alone","UWA/Core","UWA/Class/Debug","UWA/Controls/Abstract","UWA/Element","UWA/Event","DS/TagNavigator/TaggerSettings","DS/TagNavigator/TagNavigator","DS/TagNavigator/Logger","DS/TagNavigatorProxy/TagNavigatorProxy"],function(t,e,n,i,r,o,a,s,g,d){"use strict";var c;return i.extend(n,{name:"DS_TaggerWebInWin_TaggerWebInWin",_tagger_proxy:{},_index_notif:0,_taggerContent:null,_contextManager:[],_delegationStatus:!1,init:function(t){var n=t.settings,i=window.location.search.substring(1).indexOf("debug_me")>=0||n&&n.debug_me,d=this;d.setDebugMode(i),this.log("TaggerWebInWin init"),(window.location.search.substring(1).indexOf("proxyLogs")>=0||n&&n.proxyLogs)&&(this.log("activating the proxyLogs"),window.proxyLogs=!0),a.setOption("WebInWin",!0),e.is(n,"object")&&(n.hasOwnProperty("legacy6W")&&e.is(n.legacy6W,"boolean")&&(a.setOption("legacy6W",n.legacy6W),this.log("option legacy6W="+n.legacy6W)),n.hasOwnProperty("enableLoadOnDemand")&&e.is(n.legacy6W,"boolean")&&(a.setOption("enableLoadOnDemand",n.enableLoadOnDemand),this.log("option enableLoadOnDemand="+n.enableLoadOnDemand)),n.hasOwnProperty("SimplifiedTagger")&&e.is(n.SimplifiedTagger,"boolean")&&(a.setOption("simplifiedTagger",n.SimplifiedTagger),this.log("option simplifiedTagger="+n.SimplifiedTagger)),n.hasOwnProperty("TNLogs")&&e.is(n.TNLogs,"boolean")&&(this.log("option TNLogs="+n.TNLogs),n.TNLogs&&g.enable()),n.hasOwnProperty("W6_In_WebInWin")&&e.is(n.W6_In_WebInWin,"boolean")&&(a.setOption("W6_In_WebInWin",n.W6_In_WebInWin),this.log("option W6_In_WebInWin="+n.W6_In_WebInWin))),t.notifSeparator&&(this._notifSeparator=t.notifSeparator,this._delegationStatus=!!this._notifSeparator),r.addEvent.call(document,"keydown",function(t){var e=o.whichKey(t),n=o.getElement(t)?o.getElement(t).getTagName():"unknown";"backspace"!==e&&"alt+left"!==e||-1!==["input","select"].indexOf(n)||(o.stop(t),d.log("TaggerWebInWin/TaggerWebInWin backspace stopped",t)),116===t.keyCode&&(t.returnValue=!1,t.preventDefault(),t.stopPropagation())});var p={cStorageService:t.tagsServerUrl,tenant:t.tenant,lang:t.lang,webInWin:!0};d._taggerContent=t.taggercontent,s.set6WTaggerOptions(p),c=e.is(t.contextId,"string")&&t.contextId.length>0?t.contextId:"Universal_SearchCtx",this.log("_contextId="+c);var h=s.get6WTagger(c);s.create6WTaggerView(h,d._taggerContent,{onClose:function(){d._delegationStatus?sendNotification(d._taggerContent+d._notifSeparator+"taggerOnClose","onClose"):sendNotification("taggerOnClose","onClose")},onOpen:function(){},changeTaggerIcon:function(t){d._delegationStatus?sendNotification(d._taggerContent+d._notifSeparator+"changeTaggerIcon",t?JSON.stringify(t):""):sendNotification("changeTaggerIcon",t?JSON.stringify(t):"")}},!0),d._tagger_proxy={},d._contextManager=[],e.is(t.onReady,"function")&&t.onReady.call(d),d.tagger.parent=d,d.proxy.parent=d,-1===window.location.search.indexOf("no_jsnotif=true")&&(d._delegationStatus?sendNotification(d._taggerContent+d._notifSeparator+"Init","done"):sendNotification("Init","done"))},tagger:{activateFilter:function(t){console.log("activateFilter Test"+t),document.getElementById("tagger-content").style="display:none";var e=document.getElementById("FilterTest1");e.style="background-color:lightblue";var n=document.createElement("BUTTON"),i=document.createTextNode("Submit");n.appendChild(i),e.appendChild(n)},setVisibility:function(t){if(!(e.is(t,"object")&&e.is(t.param,"object")&&e.is(t.param.visibility,"string")))throw new Error("E_INVALIDARG: Bad options given to setVisibility method !");try{e.is(s.view)&&e.is(s.view.toggleVisibility)&&s.view.toggleVisibility(t.param.visibility)}catch(t){console.warn("Exception raised=>",t)}finally{this.parent._dispatchEndMethod(t)}},setTaggerMode:function(t){if(!(e.is(t,"object")&&e.is(t.param,"object")&&e.is(t.param.options,"string")))throw new Error("E_INVALIDARG: Bad options given to openAdvancedSearch method !");try{e.is(s.view)&&e.is(s.view.setTaggerMode)&&s.view.setTaggerMode(t.param.options)}catch(t){console.warn("Exception raised=>",t)}finally{this.parent._dispatchEndMethod(t)}},openTagger:function(t){if(!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: Bad options given to openTagger method !");try{e.is(s.view)&&e.is(s.view.openTagger,"function")&&e.is(t.param.mode,"string")?"tags"===t.param.mode?s.view.displayTags():"criteria"===t.param.mode&&s.view.displayCriteria():this.setVisibility(t)}catch(t){console.warn("Exception raised=>",t)}finally{this.parent._dispatchEndMethod(t)}},switchContext:function(t){if(!(e.is(t,"object")&&e.is(t.param,"object")&&e.is(t.param.contextId,"string")&&e.is(t.param.contextNls,"string")||e.is(t.contextId,"string")&&e.is(t.contextNls,"string")))throw new Error("E_INVALIDARG: Bad options given to switchContext method !");try{var n=null,i=null;n=e.is(t.contextId,"string")?t.contextId:t.param.contextId,i=e.is(t.contextNls,"string")?t.contextNls:t.param.contextNls;let a=s.get6WTagger(n);a&&a.setAsCurrent(),c=n;var r=window.document.getElementById("div_context"),o=window.document.getElementById("tagger-title");e.is(r)&&e.is(o)&&(r.style.display="block",o.textContent=i)}catch(t){console.warn("Exception raised=>",t)}finally{this.parent._dispatchEndMethod(t)}},setListOfContexts:function(t){if(!e.is(t,"object")||!e.is(t.param,"object")||!e.is(t.param.contextArray,"array"))throw new Error("E_INVALIDARG: Empty or missing options given to setListOfContexts method !");try{for(var n=t.param.contextArray,i=[],r=0,o=n.length;r<o;r++){var a=n[r];if(!e.is(a,"object")||!e.is(a.contextId,"string")||!e.is(a.contextNls,"string"))throw new Error("E_INVALIDARG: Wrong options given to setListOfContexts method !");i.push({value:a.contextId,label:a.contextNls})}this.parent._contextManager=i}catch(t){console.warn("Exception raised=>",t)}finally{this.parent._dispatchEndMethod(t)}},clearFilters:function(t){if(!e.is(t,"object")||!e.is(t.param,"object")||!e.is(t.param.contextId,"string"))throw new Error("E_INVALIDARG: Bad options given to clearFilters method !");try{s.get6WTagger(t.param.contextId).clearFilters()}catch(t){console.warn("Exception raised=>",t)}finally{this.parent._dispatchEndMethod(t)}},focusOnCC:function(t){if(!(e.is(t,"object")&&e.is(t.param,"object")&&e.is(t.param.contextId,"string")&&e.is(t.param.widgetId,"string")))throw new Error("E_INVALIDARG: Bad options given to focusOnCC method !");try{s.get6WTagger(t.param.contextId).focusOnCC(t.param.contextId)}catch(t){console.warn("Exception raised=>",t)}finally{this.parent._dispatchEndMethod(t)}},unfocus:function(t){if(!e.is(t,"object")||!e.is(t.param,"object")||!e.is(t.param.contextId,"string"))throw new Error("E_INVALIDARG: Bad options given to unfocus method !");try{var n=s.get6WTagger(t.param.contextId);if(!e.is(n)||!e.is(n.unfocus,"function"))throw new Error("E_INVALIDARG: Bad options given to unfocus method !");n.unfocus()}catch(t){console.warn("Exception raised=>",t)}finally{this.parent._dispatchEndMethod(t)}},die:function(t){if(!e.is(t,"object")||!e.is(t.param,"object")||!e.is(t.param.contextId,"string"))throw new Error("E_INVALIDARG: Bad options given to die method !");try{s.get6WTagger(t.param.contextId).die()}catch(t){console.warn("Exception raised=>",t)}finally{this.parent._dispatchEndMethod(t)}},getFilters:function(t){if(!e.is(t,"object")||!e.is(t.param,"object")||!e.is(t.param.contextId,"string"))throw new Error("E_INVALIDARG: Bad options given to getFilters method !");try{s.get6WTagger(t.param.contextId).getFilters()}catch(t){console.warn("Exception raised=>",t)}finally{this.parent._dispatchEndMethod(t)}}},proxy:{createProxy:function(t){try{if(!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to createProxy method !");var n=this,i=t.param,r=i.proxyId||"Universal_SearchCtx_Proxy",o=i.contextId||c||"Universal_SearchCtx",a=this._getProxy(o,i);if(t.disableRightParentWindow||(i.rightParentWindow=window),e.is(a))return this.parent.log("createProxy : proxy already existing !"),void this.parent._dispatchEndMethod(t);this.parent.log("TaggerWebInWin.createProxy, contextId="+o),i.contextId=o,i.events={addFilterChangeListener:function(t){n.parent._dispatchTowin({notif_name:"taggerWebInWinEvent",notif_parameters:{event_id:"addFilterChangeListener",data:t,proxyId:r,contextId:o}})},addCriteriaChangeListener:function(t){n.parent._dispatchTowin({notif_name:"taggerWebInWinEvent",notif_parameters:{event_id:"addCriteriaChangeListener",data:t,proxyId:r,contextId:o}})},addPLMUpdateListener:function(t){n.parent._dispatchTowin({notif_name:"taggerWebInWinEvent",notif_parameters:{event_id:"addPLMUpdateListener",data:t,proxyId:r,contextId:o}})},addRequestSuggestsListener:function(t){n.parent._dispatchTowin({notif_name:"taggerWebInWinEvent",notif_parameters:{event_id:"addRequestSuggestsListener",data:t,proxyId:r,contextId:o}})},addFilterSubjectsListener:function(t){n.parent._dispatchTowin({notif_name:"taggerWebInWinEvent",notif_parameters:{event_id:"addFilterSubjectsListener",data:t,proxyId:r,contextId:o}})},_internalFilterChangeListener:function(t){n.parent._dispatchTowin({notif_name:"taggerWebInWinEvent",notif_parameters:{event_id:"_internalFilterChangeListener",data:t,proxyId:r,contextId:o}})},_addVisibilityChangeListener:function(t){n.parent._dispatchTowin({notif_name:"taggerWebInWinEvent",notif_parameters:{event_id:"addVisibilityChangeListener",data:t,proxyId:r,contextId:o}})},addGroupingChangeListener:function(t){n.parent._dispatchTowin({notif_name:"taggerWebInWinEvent",notif_parameters:{event_id:"onGroupingChange",data:t,proxyId:r,contextId:o}})}},this.parent._tagger_proxy[o]=this.parent._tagger_proxy[o]||{};var s=d.createProxy(i);this.parent._tagger_proxy[o][r]=s,i.colorize&&(s.addEvent("colorize",function(t){n.parent._dispatchTowin({notif_name:"taggerWebInWinEvent",notif_parameters:{event_id:"colorize",data:t,proxyId:r,contextId:o}})}),s.addEvent("unColorize",function(t){n.parent._dispatchTowin({notif_name:"taggerWebInWinEvent",notif_parameters:{event_id:"unColorize",data:t,proxyId:r,contextId:o}})}))}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},toggleProxyFocus:function(t){try{if(!e.is(t,"object")||!e.is(t.param,"object")||!e.is(t.param.status_focus))throw new Error("E_INVALIDARG: bad options input given to toggleProxyFocus method !");let n=e.is(t.param,"object")&&e.is(t.param.contextId,"string")?t.param.contextId:c,i=this._getProxy(n,t);if(!e.is(i,"object")||!e.is(i.toggleProxyFocus,"function"))throw new Error("Unable to retrieve proxy in toggleProxyFocus method !");i.toggleProxyFocus(t.param.status_focus)}catch(e){console.warn("Exception raised, options="+JSON.stringify(t)),console.warn(e)}finally{this.parent._dispatchEndMethod(t),e.is(this._EmbeddedViewVisibility,"boolean")&&this._manageEmbeddedViewVisibility(this._EmbeddedViewVisibility),this._EmbeddedViewVisibility=void 0}},setLocalFilter:function(t){try{if(!e.is(t,"object")||!e.is(t.param,"object")||!e.is(t.param.options,"object"))throw new Error("E_INVALIDARG: bad options input given to setLocalFilter method !");var n=t.param,i=this._getProxy(c,n);if(!e.is(i,"object")||!e.is(i.setLocalFilter,"function"))throw new Error("Unable to retrieve proxy.setLocalFilter in setLocalFilter method !");i.setLocalFilter(n.options,n.warn)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},setLocalGrouping:function(t){try{if(!e.is(t,"object")||!e.is(t.param,"object")||!e.is(t.param.groupingInfo,"object"))throw new Error("E_INVALIDARG: bad options input given to setLocalFilter method !");var n=t.param,i=this._getProxy(c,n);if(!e.is(i,"object")||!e.is(i.setLocalGrouping,"function"))throw new Error("Unable to retrieve proxy.setLocalGrouping in proxy method!");var r=n.groupingInfo;if(!e.is(r,"object"))throw new Error("Invaid Argument: bad input; groupingInfo type is invalid");var o=r.grouping,a=r.warn;if(!e.is(o,"object")||!e.is(a,"boolean"))throw new Error("Invaid Argument: bad input; either one of the attributes are invalid (grouping or warn)");i.setLocalGrouping(o,a)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},clearLocalFilter:function(t){try{if(!e.is(t,"object")||!e.is(t.param))throw new Error("E_INVALIDARG: bad options input given to clearLocalFilter method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.clearLocalFilter"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.clearLocalFilter()}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},clearLocalGrouping:function(t){try{if(!e.is(t,"object")||!e.is(t.param))throw new Error("E_INVALIDARG: bad options input given to clearLocalFilter method !");var n=t.param,i=this._getProxy(c,n);if(!e.is(i,"object")||!e.is(i.clearLocalGrouping,"function"))throw new Error("Unable to retrieve proxy.clearLocalGrouping in proxy method!");this.parent.log("TaggerWebInWin.clearLocalGrouping");let r=e.is(n.groupingInfo)?n.groupingInfo:void 0,o=!!e.is(r)&&r.warn;i.clearLocalGrouping(o)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},_requestGroupingChange:function(t){try{if(!e.is(t,"object")||!e.is(t.param))throw new Error("E_INVALIDARG: bad options input given to _requestGroupingChange method !");var n=t.param,i=this._getProxy(c,n);if(!e.is(i,"object")||!e.is(i._requestGroupingChange,"function"))throw new Error("Unable to retrieve proxy._requestGroupingChange in proxy method!");this.parent.log("TaggerWebInWin._requestGroupingChange"),i._requestGroupingChange(t.param.options)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},activate:function(t){try{if(!e.is(t,"object")||!e.is(t.param))throw new Error("E_INVALIDARG: bad options input given to activate method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.activate"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!, options="+JSON.stringify(t)),void this.parent._dispatchEndMethod(t);i.activate()}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},deactivate:function(t){try{if(!e.is(t,"object")||!e.is(t.param))throw new Error("E_INVALIDARG: bad options input given to deactivate method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.activate"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.deactivate()}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},setTags:function(t){try{if(this.parent.log("->TaggerWebInWin.setTags"),!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to setTags method !");var n=t.param;this.parent.log(t);var i=this._getProxy(c,n);if(!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);var r=n.tagsdata,o=n.summaryData,a=n.attribute;i.setTags(r,o,a)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t),this.parent.log("<-TaggerWebInWin.setTags")}},configurePredicates:function(t){try{if(this.parent.log("->TaggerWebInWin.configurePredicates"),!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to configurePredicates method !");var n=t.param;this.parent.log(t);var i=this._getProxy(c,n);if(!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);var r=n.predicates||n.configuration;i.configurePredicates(r)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t),this.parent.log("<-TaggerWebInWin.configurePredicates")}},toggleDisplayAll:function(t){try{if(this.parent.log("->TaggerWebInWin.toggleDisplayAll"),!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to setPredicates method !");var n=t.param;this.parent.log(t);var i=this._getProxy(c,n);if(!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);var r=n.force;i.toggleDisplayAll(r)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t),this.parent.log("<-TaggerWebInWin.toggleDisplayAll")}},toggleDisplayAllCriteria:function(t){try{if(this.parent.log("->TaggerWebInWin.toggleDisplayAllCriteria"),!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to setPredicates method !");var n=t.param;this.parent.log(t);var i=this._getProxy(c,n);if(!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);var r=n.force;i.toggleDisplayAllCriteria(r)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t),this.parent.log("<-TaggerWebInWin.toggleDisplayAllCriteria")}},addSubjects:function(t){try{if(this.parent.log("->TaggerWebInWin.addSubjects"),!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to addSubjects method !");var n=t.param;this.parent.log(t);var i=this._getProxy(c,n);if(!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);var r=n.tagsdata;i.addSubjects(r)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t),this.parent.log("<-TaggerWebInWin.addSubjects")}},setSubjectsTags:function(t){try{if(this.parent.log("->TaggerWebInWin.setSubjectsTags"),!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to setSubjectsTags method !");var n=t.param;this.parent.log(t);var i=this._getProxy(c,n);if(!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);var r=n.subjectTags;i.setSubjectsTags(r)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t),this.parent.log("<-TaggerWebInWin.setSubjectsTags")}},setColorMap:function(t){this.parent.log("options for setColorMap",JSON.stringify(t));try{if(!e.is(t,"object"))throw new Error("E_INVALIDARG: bad options input given to setColorMap method!");var n=t.param;if(!e.is(n,"object")||!e.is(n.options,"object"))throw new Error("E_INVALIDARG: Bad param for setColorMap");var i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.setColorMap"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error!!!"),void this.parent._dispatchEndMethod(t);i.setColorMap(n.options)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},addSubjectsTags:function(t){try{if(this.parent.log("->TaggerWebInWin.addSubjectsTags"),!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to addSubjectsTags method !");var n=t.param;this.parent.log(t);var i=this._getProxy(c,n);if(!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);var r=n.subjectTags;i.addSubjectsTags(r)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t),this.parent.log("<-TaggerWebInWin.addSubjectsTags")}},unsetTags:function(t){try{if(!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to unsetTags method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.unsetTags"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.unsetTags()}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},focusOnSubjects:function(t){try{if(!e.is(t,"object")||!e.is(t.param,"object")||!e.is(t.param.subjectsURI,"array"))throw new Error("E_INVALIDARG: bad options input given to focusOnSubjects method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.focusOnSubjects"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.focusOnSubjects(n.subjectsURI,n.persistTags,n.dataSources)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},resetFocusOnSubjects:function(t){try{if(!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to resetFocusOnSubjects method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.resetFocusOnSubjects"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.focusOnSubjects([])}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},setCriteria:function(t){try{if(!e.is(t,"object"))throw new Error("E_INVALIDARG: bad options input given to setCriteria method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.setCriteria"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.setCriteria(n.suggestedArray)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},updateCriteria:function(t){try{if(!e.is(t,"object"))throw new Error("E_INVALIDARG: bad options input given to setCriteria method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.updateCriteria"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.updateCriteria(n.suggestedArray)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},displayCriteria:function(t){try{var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.setCriteria"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.displayCriteria(t)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},updatePLMSuggestions:function(t){try{if(!e.is(t,"object"))throw new Error("E_INVALIDARG: bad options input given to updatePLMSuggestions method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.updatePLMSuggestions"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.updatePLMSuggestions(n.suggestedArray)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},updateSuggestions:function(t){try{if(!e.is(t,"object"))throw new Error("E_INVALIDARG: bad options input given to updateSuggestions method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.updateSuggestions"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.updateSuggestions(n.suggestedArray)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},removeCriteria:function(t){try{if(!e.is(t,"object"))throw new Error("E_INVALIDARG: bad options input given to removeCriteria method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.updateCriteria"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);i.removeCriteria(n.predicatesToRemove)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},unfocus:function(t){try{if(!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to unfocus method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.unfocus"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!, options="+JSON.stringify(t)),void this.parent._dispatchEndMethod(t);i.unfocus()}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},die:function(t){try{if(!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to die method !");var n=t.param,i=this._getProxy(c,n),r=this._getProxyId(t);if(this.parent.log("TaggerWebInWin.die"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!"),void this.parent._dispatchEndMethod(t);if(i.die(),e.is(t)&&e.is(t.param)){t.param.contextId||(this.parent.log("contextId is not provided so trying to locate proxy on current context="+c),t.param.contextId=c),(this.parent._tagger_proxy[t.param.contextId]?this.parent._tagger_proxy[t.param.contextId][r]:void 0)?(this.parent.log("Inside TaggerProxy die, removing "+r),delete this.parent._tagger_proxy[t.param.contextId][r]):console.warn("FAILED to locate the proxy on "+c+", proxyId= "+r)}}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},setStatus:function(t){try{if(!e.is(t,"object")||!e.is(t.param,"object"))throw new Error("E_INVALIDARG: bad options input given to setStatus method !");var n=t.param,i=this._getProxy(c,n);if(this.parent.log("TaggerWebInWin.setStatus"),!e.is(i))return console.warn("TaggerWebInWin._tagger_proxy error !!!, options="+JSON.stringify(t)),void this.parent._dispatchEndMethod(t);i.setStatus(n.status)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}},_getProxyId:function(t){var n="Universal_SearchCtx_Proxy";return e.is(t,"object")?e.is(t.proxyId,"string")?n=t.proxyId:e.is(t.param,"object")&&e.is(t.param.proxyId,"string")&&(n=t.param.proxyId):console.warn("using default value for proxyId !!!"),n},_getProxy:function(t,n){var i=null,r=this._getProxyId(n),o=this.parent._tagger_proxy;if(e.is(n)){var a=n.contextId?n.contextId:t;e.is(o)&&e.is(o[a])&&e.is(o[a][r])&&((i=o[a][r]).proxyId=r)}else e.is(o)&&e.is(o[t])&&e.is(o[t][r])&&((i=o[t][r]).proxyId=r);return i},manageEmbeddedViewVisibility:function(t){if(!e.is(t,"object")||!e.is(t.param,"object")||!e.is(t.param.visibility))throw new Error("E_INVALIDARG: Bad options given to openTagger method !");let n=!1;"true"===t.param.visibility&&(n=!0);let i=!1;e.is(t.param.panel)&&(i=t.param.panel),this._EmbeddedViewVisibility=n,setTimeout(this._manageEmbeddedViewVisibility(n,i),650)},_manageEmbeddedViewVisibility:function(t,n){if(e.is(s)&&e.is(s.view)&&s.view.hasEmbeddedView()){if(e.is(s.view.toggleVisibility,"function")){let i=!t;e.is(n)&&!0===n&&(i=!0),s.view.toggleVisibility(i)}s.view._manageEmbeddedViewVisibility(t)}},setEmbeddedViewProperties:function(t){try{if(!e.is(t,"object")||!e.is(t.param))throw new Error("E_INVALIDARG: bad options input given to setEmbeddedViewProperties method !");var n=t.param,i=this._getProxy(c,n);if(!e.is(i,"object")||!e.is(i._requestGroupingChange,"function"))throw new Error("Unable to retrieve proxy.setEmbeddedViewProperties in proxy method!");this.parent.log("TaggerWebInWin.setEmbeddedViewProperties"),i.setEmbeddedViewProperties(t.param.options)}catch(t){console.warn("Exception raised"),console.warn(t)}finally{this.parent._dispatchEndMethod(t)}}},_dispatchTowin:function(t){if(!e.is(t,"object")||!e.is(t.notif_name,"string")||!e.is(t.notif_parameters,"object"))throw new Error("E_INVALIDARG: in _dispatchTowin !");this.log("TaggerWebInWin._dispatchTowin for "+t.notif_name);var n=t;n.notif_parameters.index_notif=this._index_notif,this._index_notif=this._index_notif+1;var i=e.is(n.notif_parameters,"string")?n.notif_parameters:JSON.stringify(n.notif_parameters);this.log(e.is(i)?"notif_parameters:\n"+i:"no parameters"),!0===a.getOption("no_jsnotif")?this.log("JSNOTIF deactivated for "+t.notif_name+" with parameters "+i):this._delegationStatus?sendNotification(this._taggerContent+this._notifSeparator+n.notif_name,i):sendNotification(n.notif_name,i)},_dispatchEndMethod:function(t){if(!e.is(t,"object")||!e.is(t.eventUuid,"string"))throw new Error("E_INVALIDARG: in _dispatchEndMethod !");this.log("TaggerWebInWin._dispatchEndMethod for "+t.eventUuid),!0===a.getOption("no_jsnotif")?this.log("JSNOTIF deactivated for "+t.eventUuid):this._delegationStatus?sendNotification(this._taggerContent+this._notifSeparator+"taggerEventMethodEnded",t.eventUuid):sendNotification("taggerEventMethodEnded",t.eventUuid)}})}),define("DS/TagNavigatorWebInWin/TaggerWebInWinLeftPanel",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Class/Events"],function(t,e,n,i){"use strict";return e.singleton(i,n,{_taggerWebInWin:void 0,buildView:function(t){var e=this;this.log("Inside TaggerWebInWinLeftPanel#initialize"),require(["DS/TagNavigatorWebInWin/TaggerWebInWin","css!DS/TagNavigator/TagNavigator.css"],function(n){t.onReady=function(){this.log("dispatching taggerInitEnded to WIN"),dscef.sendString(t.taggercontent+t.notifSeparator+"taggerInitEnded=true")},e._taggerWebInWin=new n(t)})},executeMethod:function(t){if(!t.target)throw new Error("No target method in executeMethod !");this[t.target](t)},ActionOnTaggerProxy:function(e){if(this.log("ActionOnTaggerProxy"),this.log(e),!t.is(e))throw new Error("No parameters in ActionOnTaggerProxy !");if(!t.is(e.param))throw new Error("No parameters.param in ActionOnTaggerProxy !");if(!t.is(e.param.event_id))throw new Error("No parameters.param.event_id in ActionOnTaggerProxy !");if(!t.is(this._taggerWebInWin))throw new Error("No this._taggerWebInWin in ActionOnTaggerProxy !");t.is(this._taggerWebInWin.proxy[e.param.event_id],"function")?this._taggerWebInWin.proxy[e.param.event_id](e):(this.error("Trying to call undefined function",e),this._taggerWebInWin._dispatchEndMethod(e))},ActionOnTagger:function(e){if(this.log("ActionOnTagger"),this.log(e),!t.is(e))throw new Error("No parameters in ActionOnTaggerProxy !");if(!t.is(e.param))throw new Error("No parameters.param in ActionOnTaggerProxy !");if(!t.is(e.param.method))throw new Error("No parameters.param.event_id in ActionOnTaggerProxy !");if(!t.is(this._taggerWebInWin))throw new Error("No this._taggerWebInWin in ActionOnTaggerProxy !");t.is(this._taggerWebInWin.tagger[e.param.method],"function")?this._taggerWebInWin.tagger[e.param.method](e):(this.error("Trying to call undefined function",e),this._taggerWebInWin._dispatchEndMethod(e))}})});