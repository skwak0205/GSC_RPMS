define("DS/DMUBaseWebValidation/EXPValHighlight",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D","DS/DMUBaseExperience/DMUContextManager"],function(t,e,n){"use strict";return t.extend({init:function(i,s){this._parent(i,s);var a=this;this.addParameters([{name:"sPresentationSlideID",type:"string",JSONname:""},{name:"sRating",type:"string",JSONname:""},{name:"sRepRefMarkupID",type:"string",JSONname:""},{name:"lChangeActionIDs",type:"listStrings",JSONname:"",defaultValue:[]},{name:"lIssuesIDs",type:"listStrings",JSONname:"",defaultValue:[]},{name:"lAssociatedChecks",type:"listStrings",JSONname:"",defaultValue:[]}]),this.setValType("DMUValidationExposedPresentation");var r=new e("Highlight");r.getDMUType=this.getType,r.getOwner=function(){return a},this.setNode(r);let o,u="DS/DMUReviewPersistence/EXPValHighlightContextualBar";this.initAuthoringData=function(){-1===n.getAuthoringFeatureTypes().indexOf("Highlight")||a.getContextualMenuCommandList?"DMUValidationExposedPresentation"!==a.getType()||a.getReadOnlyContextualMenuCmdList||require([u],function(t){o=new t,a.getSharedContextualMenuCommandList=o.getSharedContextualMenuCommandList,o.register({frmWindow:a._frmWindow,type:a.getType()})}):require([u],function(t){o=new t,a.getContextualMenuCommandList=o.getContextualMenuCommandList,a.getSharedContextualMenuCommandList=o.getSharedContextualMenuCommandList,o.register({frmWindow:a._frmWindow,type:a.getType()})})},this.removeAuthoringData=function(){o&&a.getSharedContextualMenuCommandList&&(a.getSharedContextualMenuCommandList=null,a.getContextualMenuCommandList=null,o.unregister({frmWindow:a._frmWindow,type:a.getType()}))},this.getRating=function(){return a.getAttribute("sRating")},this.setRating=function(t){a.setAttribute("sRating",t)},this.setFromJson=function(e){t.prototype.setFromJson.call(a,e),e&&(a.setAttribute("sPresentationSlideID",e.slideId),a.setAttribute("lAssociatedChecks",e.associatedCheck?e.associatedCheck:[]),a.setAttribute("sRating",e.rating),a.setAttribute("lChangeActionIDs",e.ChangeAction?e.ChangeAction:[]),a.setAttribute("lIssuesIDs",e.Issue?e.Issue:[]),a.setAttribute("sRepRefMarkupID",e.repRefMarkupId))},this.getHighlightObject=function(){return{slideId:a.getAttribute("sPresentationSlideID"),associatedCheck:a.getAttribute("lAssociatedChecks"),description:a.getAttribute("sDescription"),rating:a.getAttribute("sRating"),changeAction:a.getAttribute("lChangeActionIDs"),issues:a.getAttribute("lIssuesIDs"),repRefMarkupId:a.getAttribute("sRepRefMarkupID"),name:a.getName(),id:a.getPlmID(),type:a.getValType()}},this.getAssociatedCheck=function(){return a.getAttribute("lAssociatedChecks")},this.addAssociatedCheck=function(t){let e=a.getAttribute("lAssociatedChecks");e&&t&&e.push(t),a.setAttribute("lAssociatedChecks",e)},this.removeAssociatedCheck=function(t){let e=a.getAttribute("lAssociatedChecks");if(e&&t){var n=e.indexOf(t);-1!==n&&e.splice(n,1),a.setAttribute("lAssociatedChecks",e)}},this.getPresentationSlideID=function(){return a.getAttribute("sPresentationSlideID")},this.setsPresentationSlideID=function(t){a.setAttribute("sPresentationSlideID",t)},this.initAuthoringData()}})}),define("DS/DMUBaseWebValidation/EXPValMarkup",["DS/DMUBaseWebValidation/EXPValObject"],function(t){"use strict";var e=t.extend({init:function(n,i){this._parent(n,i);let s=this,a=!1;this.addParameters([{name:"oMarkupContent",type:"objectDefinition",JSONname:""},{name:"lChildren",type:"listObjects",JSONname:"",defaultValue:[]},{name:"fTreeOrder",type:"float",JSONname:"",defaultValue:0},{name:"sInstPlmId",type:"string",JSONname:"",defaultValue:""},{name:"bWebMarkup",type:"boolean",JSONname:"",defaultValue:!1}]),this.getTreeOrder=function(){return s.getAttribute("fTreeOrder")};let r=this.setReadOnly;this.setReadOnly=function(t){r(t);let e=s.getAttribute("oMarkupContent");e&&e.setReadOnly(t),s.getRepRef()&&s.getRepRef().setReadOnly(t);let n=s.getAttribute("lChildren");n&&n.length&&n.forEach(e=>{e.setReadOnly(t)})},this.setFromJson=function(e){t.prototype.setFromJson.call(s,e),s.setAttribute("fTreeOrder",e.treeOrder),s.setInstancePlmID(e.instanceId),e.children&&s.setChildren(e.children),s.setAttribute("bWebMarkup",e.webMarkup&&"true"===e.webMarkup)},this.sortReplies=function(){let t=s.getAttribute("lChildren");if(t){t.sort(function(t,e){return t.getTreeOrder()-e.getTreeOrder()});for(var e=0;e<t.length;e++)t[e].sortReplies();s.setAttribute("lChildren",t)}},this.getMarkupContent=function(){return s.getAttribute("oMarkupContent")},this.setMarkupContent=function(t){s.setAttribute("oMarkupContent",t)},this.removeMarkupContent=function(){s.getAttribute("oMarkupContent")&&(a=!0,s.getAttribute("oMarkupContent").remove()),s.setAttribute("oMarkupContent",null)},this.isBeingRemoved=function(){return a},this.isLoaded=function(){return null!==s.getAttribute("oMarkupContent")},this.getChildren=function(){return s.getAttribute("lChildren")},this.setChildren=function(t){for(var e=0;e<t.length;e++)s.addChild(t[e])},this.addChild=function(t){if("Markup"===t.type||"ReviewMarkup"===t.type||"Reply"===t.type){var n=new e(s.getViewer(),s);n.setFromJson(t);let i=s.getAttribute("lChildren");i||(i=[]),i.push(n),s.setAttribute("lChildren",i)}},this.removeChild=function(t){let e=s.getAttribute("lChildren");if(e){for(var n=e.length-1;n>=0;n--)e[n].getName()===t&&(e[n].remove&&e[n].remove(),e.splice(n,1));s.setAttribute("lChildren",e)}},this.getRepRef=function(){let t=s.getValType(),e=s.getAttribute("lChildren");if(("Markup"===t||"Reply"===t)&&e)for(var n=0;n<e.length;n++)if("ReviewMarkup"===e[n].getValType())return e[n];return null},this.getParentRepRef=function(){var t=s.getParent();if(t)return t.getParent()&&"ReviewMarkup"===s.getValType()?t.getParent().getRepRef():"Reply"===s.getValType()?t.getRepRef():void 0},this.getReplies=function(){let t=[],e=s.getValType(),n=s.getAttribute("lChildren");if(n&&("Markup"===e||"Reply"===e))for(var i=0;i<n.length;i++)"Reply"===n[i].getValType()&&t.push(n[i]);return t},this.getInstancePlmID=function(){return s.getAttribute("sInstPlmId")},this.setInstancePlmID=function(t){s.setAttribute("sInstPlmId",t)},this.isWebMarkup=function(){return"ReviewMarkup"===s.getValType()?Boolean(s.getAttribute("bWebMarkup")):s.getRepRef()?Boolean(s.getRepRef().getAttribute("bWebMarkup")):void 0}}});return e}),define("DS/DMUBaseWebValidation/EXPValParticipants",["DS/DMUBaseWebValidation/EXPValObject"],function(t){"use strict";return t.extend({init:function(e,n){this._parent(e,n);let i=this;this.addParameters([{name:"lJsonMembers",type:"listStrings",JSONname:"",defaultValue:[]}]),this.setFromJson=function(e){t.prototype.setFromJson.call(i,e),e.Members&&i.setJsonMembers(e.Members)},this.getJsonMembers=function(){return i.getAttribute("lJsonMembers")},this.setJsonMembers=function(t){for(var e=0;e<t.length;e++)this.addJsonMember(t[e])},this.addJsonMember=function(t){if(t&&t.name){let e=i.getAttribute("lJsonMembers");e||(e=[]),e.push(t.name)}},this.removeJsonMember=function(t){let e=i.getAttribute("lJsonMembers");if(e){for(var n=e.length-1;n>=0;n--)e[n].name===t&&e.splice(n,1);i.setAttribute("lJsonMembers",e)}}}})}),define("DS/DMUBaseWebValidation/EXPValObject",["DS/DMUBaseExperience/EXPObject"],function(t){"use strict";return t.extend({init:function(t,e){this._parent(t,e),this.addParameters([{name:"sPlmID",type:"string",JSONname:""},{name:"sValType",type:"string",JSONname:""},{name:"sName",type:"string",JSONname:""},{name:"sOwner",type:"string",JSONname:""},{name:"sDescription",type:"string",JSONname:""}]);let n=this;this.getType=function(){return n.getAttribute("sValType")},this.getValType=function(){return n.getAttribute("sValType")},this.setValType=function(t){n.setAttribute("sValType",t)},this.getPlmID=function(){return n.getAttribute("sPlmID")},this.setPlmID=function(t){n.setAttribute("sPlmID",t)},this.getParentID=function(){return n.getParent().getPlmID()},this.getName=function(){return n.getAttribute("sName")},this.setName=function(t){n.setAttribute("sName",t)},this.getOwner=function(){return n.getAttribute("sOwner")},this.setOwner=function(t){n.setAttribute("sOwner",t)},this.getDescription=function(){return n.getAttribute("sDescription")},this.setDescription=function(t){n.setAttribute("sDescription",t)}},setFromJson:function(t){this.setPlmID(t.id),this.setValType(t.type),t.name&&this.setName(t.name),t.owner&&this.setOwner(t.owner),t.description&&this.setDescription(t.description)}})}),define("DS/DMUBaseWebValidation/EXPValCheck",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D","DS/DMUBaseExperience/DMUContextManager"],function(t,e,n){"use strict";return t.extend({init:function(i,s){this._parent(i,s);var a=this;this.addParameters([{name:"lJsonRequirements",type:"listObjects",JSONname:"",defaultValue:[]},{name:"lJsonHighlights",type:"listObjects",JSONname:"",defaultValue:[]},{name:"sStatus",type:"string",JSONname:""}]),this.setValType("DMUValidationCheck");let r=new e("Check");r.getDMUType=this.getType,r.getOwner=function(){return a},this.setNode(r);let o;this.initAuthoringData=function(){-1===n.getAuthoringFeatureTypes().indexOf("Check")||a.getContextualMenuCommandList||require(["DS/DMUReviewPersistence/EXPValCheckContextualBar"],function(t){o=new t,a.getContextualMenuCommandList=o.getContextualMenuCommandList,a.getSharedContextualMenuCommandList=o.getSharedContextualMenuCommandList,o.register({frmWindow:a._frmWindow,type:a.getType()})})},this.removeAuthoringData=function(){o&a.getSharedContextualMenuCommandList&&(a.getSharedContextualMenuCommandList=null,a.getContextualMenuCommandList=null,o.unregister({frmWindow:a._frmWindow,type:a.getType()}))},this.getStatus=function(){return a.getAttribute("sStatus")},this.setStatus=function(t){a.setAttribute("sStatus",t)},this.setFromJson=function(e){if(t.prototype.setFromJson.call(a,e),a.setAttribute("sStatus",e.state),a.setAttribute("sDescription",e.description),e.children){let t;for(let n=0;n<e.children.length;n++)"Requirement"===(t=e.children[n]).type?a.addJsonRequirement(t):"DMUValidationExposedPresentation"===t.type&&a.addJsonHighlight(t)}},this.getCheckObject=function(){return{name:a.getName(),description:a.getAttribute("sDescription"),requirements:a.getAttribute("lJsonRequirements"),status:a.getAttribute("sStatus"),id:a.getPlmID()}},this.getJsonRequirements=function(){return a.getAttribute("lJsonRequirements")},this.addJsonRequirement=function(e){if(e){let n=new t(a.getViewer(),a);n.setFromJson(e);let i=a.getAttribute("lJsonRequirements");i||(i=[]),i.push(n),a.setAttribute("lJsonRequirements",i)}},this.removeJsonRequirement=function(t){let e=a.getAttribute("lJsonRequirements");for(let n=e.length-1;n>=0;n--)e[n].getPlmID()===t&&(e[n].remove(),e.splice(n,1));a.setAttribute("lJsonRequirements",e)},this.getJsonHighlights=function(){a.getAttribute("lJsonHighlights")},this.addJsonHighlight=function(e){if(e){let n=new t(a.getViewer(),a);n.setFromJson(e);let i=a.getAttribute("lJsonHighlights");i||(i=[]),i.push(n),a.getParent()&&a.getParent().addHighlight(n),a.setAttribute("lJsonHighlights",i)}},this.removeJsonHighlight=function(t){let e=a.getAttribute("lJsonHighlights");for(let n=e.length-1;n>=0;n--)e[n].getPlmID()===t&&(e[n].remove(),e.splice(n,1));a.setAttribute("lJsonHighlights",e)},this.initAuthoringData()}})}),define("DS/DMUBaseWebValidation/EXPValValidated",["DS/DMUBaseWebValidation/EXPValObject"],function(t){"use strict";return t.extend({init:function(e,n){this._parent(e,n);let i=this;this.addParameters([{name:"lPathElements",type:"listObjects",JSONname:"",defaultValue:[]}]),this.setFromJson=function(e){t.prototype.setFromJson.call(this,e),e.validatedObjects&&i.setPathElements(e.validatedObjects)},this.getPathElements=function(){return i.getAttribute("lPathElements")},this.getValidatedInstanceNames=function(){let t=[],e=i.getAttribute("lPathElements");if(!e)return t;for(let n=0;n<e.length;n++)1===e[n].pathElement.length?t.push(e[n].referenceName):t.push(e[n].instanceName);return t},this.setPathElements=function(t){for(var e=0;e<t.length;e++)i.addPathElement(t[e])},this.addPathElement=function(t){if(t){let e=i.getAttribute("lPathElements");e||(e=[]),e.push({instanceName:t.instanceName,referenceName:t.referenceName,pathElement:t.PathElements}),i.setAttribute("lPathElements",e)}},this.removePathElement=function(t,e){let n=i.getAttribute("lPathElements");if(n){for(var s=n.length-1;s>=0;s--)(n[s].pathElement.equals(t)||n[s].pathElement.equals(e))&&n.splice(s,1);i.setAttribute("lPathElements",n)}}}})}),define("DS/DMUBaseWebValidation/EXPValContext",["DS/DMUBaseWebValidation/EXPValObject"],function(t){"use strict";return t.extend({init:function(e,n){this._parent(e,n);let i=this;this.addParameters([{name:"lJsonContexts",type:"listObjects",JSONname:"",defaultValue:[]}]),this.setFromJson=function(e){t.prototype.setFromJson.call(i,e),e.contexts&&i.setJsonContexts(e.contexts)},this.getJsonContextIDs=function(){let t=[],e=i.getAttribute("lJsonContexts");if(e)for(let n=0;n<e.length;n++)t.push(e[n].id);return t},this.getJsonContextNames=function(){var t=[],e=i.getAttribute("lJsonContexts");if(e)for(let n=0;n<e.length;n++)t.push(e[n].name);return t},this.getJsonContextTypes=function(){var t=[],e=i.getAttribute("lJsonContexts");if(e)for(let n=0;n<e.length;n++)t.push(e[n].type);return t},this.getJsonContexts=function(){return i.getAttribute("lJsonContexts")},this.setJsonContexts=function(t){if(t)for(let e=0;e<t.length;e++)i.addJsonContext(t[e])},this.addJsonContext=function(t){if(t){let e=i.getAttribute("lJsonContexts");e||(e=[]),e.push({id:t.id,type:t.type,name:t.name,usage:t.usage,loadedR2VInfo:t.loadedR2VInfo}),i.setAttribute("lJsonContexts",e)}},this.removeJsonContext=function(t){let e=i.getAttribute("lJsonContexts");if(e&&e.length){for(let n=e.length-1;n>=0;n--)e[n].id===t&&e.splice(n,1);i.setAttribute("lJsonContexts",e)}}}})}),define("DS/DMUBaseWebValidation/EXPValHighlights",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D","DS/DMUBaseExperience/DMUContextManager"],function(t,e,n){"use strict";return t.extend({init:function(t,i){this._parent(t,i);var s=this;this.setValType("Highlights");var a=new e("Highlights");a.getDMUType=this.getType,a.getOwner=function(){return s},this.setNode(a);let r;this.initAuthoringData=function(){-1===n.getAuthoringFeatureTypes().indexOf("Highlight")||s.getContextualMenuCommandList||require(["DS/DMUReviewPersistence/EXPValHighlightsContextualBar"],function(t){r=new t,s.getContextualMenuCommandList=r.getContextualMenuCommandList,s.getSharedContextualMenuCommandList=r.getSharedContextualMenuCommandList,r.register({frmWindow:s._frmWindow,type:s.getType()})})},this.removeAuthoringData=function(){},this.initAuthoringData()}})}),define("DS/DMUBaseWebValidation/EXPValChecks",["DS/DMUBaseWebValidation/EXPValObject","DS/Visualization/Node3D","DS/DMUBaseExperience/DMUContextManager"],function(t,e,n){"use strict";return t.extend({init:function(t,i){this._parent(t,i);var s=this;this.setValType("Checks");let a=new e("Checks");a.getDMUType=this.getType,a.getOwner=function(){return s},this.setNode(a);let r;this.initAuthoringData=function(){-1===n.getAuthoringFeatureTypes().indexOf("Check")||s.getContextualMenuCommandList||require(["DS/DMUReviewPersistence/EXPValChecksContextualBar"],function(t){r=new t,s.getContextualMenuCommandList=r.getContextualMenuCommandList,s.getSharedContextualMenuCommandList=r.getSharedContextualMenuCommandList,r.register({frmWindow:s._frmWindow,type:s.getType()})})},this.removeAuthoringData=function(){},this.initAuthoringData()}})}),define("DS/DMUBaseWebValidation/EXPValValidation",["DS/DMUBaseWebValidation/EXPValObject","DS/DMUBaseWebValidation/EXPValMarkup","DS/DMUBaseWebValidation/EXPValValidated","DS/DMUBaseWebValidation/EXPValParticipants","DS/DMUBaseWebValidation/EXPValCheck","DS/DMUBaseWebValidation/EXPValChecks","DS/DMUBaseWebValidation/EXPValHighlights","DS/DMUBaseWebValidation/EXPValContext","DS/Visualization/Node3D"],function(t,e,n,i,s,a,r,o,u){"use strict";return t.extend({init:function(l,g){this._parent(l,g);let h=this;this.addParameters([{name:"sContextType",type:"string",JSONname:""},{name:"sStatus",type:"string",JSONname:""},{name:"oValidated",type:"objectDefinition",JSONname:""},{name:"oContext",type:"objectDefinition",JSONname:""},{name:"oParticipants",type:"objectDefinition",JSONname:""},{name:"lChecks",type:"listObjects",JSONname:"",defaultValue:[]},{name:"lMarkups",type:"listObjects",JSONname:"",defaultValue:[]},{name:"lHighlights",type:"listObjects",JSONname:"",defaultValue:[]}]);let d=null,c=null,p=!1,f=new u("Validation");f.getDMUType=h.getValType,this.setNode(f);let m=new a(l,h),b=new r(l,h);f.addChild(m.getNode()),f.addChild(b.getNode()),this.getStatus=function(){return h.getAttribute("sStatus")},this.setStatus=function(t){"InProgress"===t?h.setStatus("inProgress"):"Failed"===t?h.setStatus("failed"):"Passed"===t?h.setStatus("passed"):h.setAttribute("sStatus",t)},this.getCurrentState=function(){return c},this.setCurrentState=function(t){c=t};let C=this.setReadOnly;this.setReadOnly=function(t){C(t);let e=h.getAttribute("lMarkups");e&&e.length&&e.forEach(e=>{e.setReadOnly(t)});let n=h.getAttribute("lHighlights");n&&n.length&&n.forEach(e=>{e.setReadOnly(t)});let i=h.getAttribute("lChecks");i&&i.length&&i.forEach(e=>{e.setReadOnly(t)})},this._parentRemove=this.remove,this.remove=function(){h.setCurrentMarkup(null),d=null,c=null,h._parentRemove()},this.updateVisibleMarkups=(()=>{let t=h.getParent();if(p)t.setVisibleMarkups(h.getMarkups().map(t=>{return("ReviewMarkup"===t.getValType()?t:t.getRepRef()).getMarkupContent()}).filter(Boolean));else{let e="ReviewMarkup"===d.getValType()?d:d.getRepRef();t.setVisibleMarkups(e&&e.getMarkupContent()?[e.getMarkupContent()]:[])}t.refreshNode()}),this.setFromJson=function(e){switch(t.prototype.setFromJson.call(h,e),e.contextType){case"1":h.setContextType("Product");break;case"2":h.setContextType("Simulation");break;case"3":h.setContextType("Image");break;case"4":h.setContextType("RFL");break;case"5":h.setContextType("PPR");break;case"6":h.setContextType("Shape");break;default:h.setContextType("")}h.setCurrentState(e.currentState),h.setStatus(e.status)},this.getContextType=function(){return h.getAttribute("sContextType")},this.setContextType=function(t){h.setAttribute("sContextType",t)},this.getParticipants=function(){return h.getAttribute("oParticipants")},this.setParticipants=function(t){t instanceof i&&h.setAttribute("oParticipants",t)},this.removeParticipants=function(){h.getAttribute("oParticipants")&&h.getAttribute("oParticipants").remove(),h.setAttribute("oParticipants",null)},this.addValidatedNode=(t=>{let e=new u("Validated");e.getDocInfo=(()=>t.docInfo),f.addChild(e)}),this.removeValidatedNode=(t=>{this.getNode().getChildren().forEach(e=>{"Validated"===e.name&&e.getDocInfo().validatedPaths[0]===t&&f.removeChild(e)})}),this.getValidated=function(){return h.getAttribute("oValidated")},this.setValidated=function(t){t instanceof n&&h.setAttribute("oValidated",t)},this.removeValidated=function(){h.getAttribute("oValidated")&&h.getAttribute("oValidated").remove(),h.setAttribute("oValidated",null)},this.getContext=function(){return h.getAttribute("oContext")},this.setContext=function(t){t instanceof o&&h.setAttribute("oContext",t)},this.removeContext=function(){h.getAttribute("oContext")&&h.getAttribute("oContext").remove(),h.setAttribute("oContext",null)},this.getChecks=function(){return h.getAttribute("lChecks")},this.getChecksData=function(){var t=[],e=h.getAttribute("lChecks");if(e){for(var n=0;n<e.length;n++)t.push(e[n].getCheckObject());return t}},this.addCheck=function(t){if(t instanceof s){let e=h.getAttribute("lChecks");e||(e=[]),e.push(t),h.setAttribute("lChecks",e),m.getNode().addChild(t.getNode())}},this.removeCheck=function(t){let e=h.getAttribute("lChecks");if(e){for(let n=e.length-1;n>=0;n--)e[n].getPlmID()===t&&(m.getNode().removeChild(e[n].getNode()),e[n].remove(),e.splice(n,1));h.setAttribute("lChecks",e)}},this.getMarkups=function(){return h.getAttribute("lMarkups")},this.addMarkup=function(t){if(t instanceof e){let e=h.getAttribute("lMarkups");e||(e=[]),e.push(t),h.setAttribute("lMarkups",e)}},this.removeMarkup=function(t){let e=h.getAttribute("lMarkups");if(e){for(var n=e.length-1;n>=0;n--)if(e[n].getPlmID()===t){e[n].remove(),e.splice(n,1);break}h.setAttribute("lMarkups",e),h.updateVisibleMarkups()}},this.reorderMarkups=function(t){let e=h.getAttribute("lMarkups");e&&(t.forEach(function(t){let n=e.findIndex(e=>e.getRepRef().getPlmID()===t),i=e.splice(n,1)[0];e.push(i)}),h.setAttribute("lMarkups",e),h.fireEvent("onDMUValidationMarkupsReordered",{orderedMarkupIDs:t}))},this.sortMarkups=function(){let t=h.getAttribute("lMarkups");if(t){t.sort(function(t,e){return t.getTreeOrder()-e.getTreeOrder()});for(var e=0;e<t.length;e++)t[e].sortReplies();h.setAttribute("lMarkups",t)}},this.getFirstLevelRepRefs=function(){let t=[],e=h.getAttribute("lMarkups");for(var n=0;n<e.length;n++)t.push(e[n].getRepRef());return t},this.getAllRepRefs=function(){let t=[],e=function(t,n){var i=t.getRepRef();i&&n.push(i);for(var s=t.getReplies(),a=0;a<s.length;a++)e(s[a],n)},n=h.getAttribute("lMarkups");if(!n)return t;for(let i=0;i<n.length;i++)e(n[i],t);return t},this.getLoadedRepRefs=function(){for(var t=h.getAllRepRefs(),e=0;e<t.length;)t[e].isLoaded()?e++:t.splice(e,1);return t},this.getNextRepRef=function(t){for(var e=h.getAllRepRefs(),n=0;n<e.length;n++)if(e[n].getPlmID()===t)return n<e.length-1?e[n+1]:e[0]},this.getPreviousRepRef=function(t){for(var e=h.getAllRepRefs(),n=0;n<e.length;n++)if(e[n].getPlmID()===t)return n>0?e[n-1]:e[e.length-1]},this.getRepRef=function(t){for(var e=h.getAllRepRefs(),n=0;n<e.length;n++)if(e[n].getPlmID()===t)return e[n]},this.getHighlights=function(){return h.getAttribute("lHighlights")},this.getHighlightsData=function(){let t=[],e=h.getAttribute("lHighlights");if(!e)return t;for(var n=0;n<e.length;n++)t.push(e[n].getHighlightObject());return t},this.addHighlight=function(e){let n=h.getAttribute("lHighlights");e instanceof t&&(n||(n=[]),n.push(e),b.getNode().addChild(e.getNode()),h.setAttribute("lHighlights",n))},this.removeHighlight=function(t){let e=h.getAttribute("lHighlights");if(e){for(var n=e.length-1;n>=0;n--)e[n].getPlmID()===t&&(b.getNode().removeChild(e[n].getNode()),e[n].remove(),e.splice(n,1));h.setAttribute("lHighlights",e)}},this.enableMultipleMarkupVisibility=(t=>{p!==t&&(h.getParent().enableMultipleMarkupVisibility(t),p=t,h.updateVisibleMarkups())}),this.setCurrentMarkup=function(t){if(d!==t){var e=h.getParent();if(e){var n=null;if(t&&(n="ReviewMarkup"!==t.getValType()?t:t.getParent()),n){if(!d||n.getPlmID()!==d.getPlmID()){var i="ReviewMarkup"===(d=n).getValType()?d:d.getRepRef();e.setCurrentSessionMarkup(i?i.getMarkupContent():null),e.refreshNode()}}else d&&(e.setCurrentSessionMarkup(null),d=null,e.refreshNode())}}},this.getCurrentMarkup=function(){return d}}})}),define("DS/DMUBaseWebValidation/EXPValImporter",["UWA/Class","DS/DMUBaseWebValidation/EXPValValidation","DS/DMUBaseWebValidation/EXPValMarkup","DS/DMUBaseWebValidation/EXPValValidated","DS/DMUBaseWebValidation/EXPValParticipants","DS/DMUBaseWebValidation/EXPValCheck","DS/DMUBaseWebValidation/EXPValContext","DS/DMUBaseWebValidation/EXPValHighlight"],function(t,e,n,i,s,a,r,o){"use strict";return t.extend({init:function(t){this.importValidationFromJSON=function(u,l){var g=null;if(u&&"DMUValidationValidation"===u.type&&u.children){g=new e(t.viewer.getViewer(),t.DMUExperience),t.DMUExperience.setValidation(g),g.setFromJson(u);for(var h=0;h<u.children.length;h++){var d=u.children[h],c=null;switch(d.type){case"Markup":c=new n(t.viewer.getViewer(),g),g.addMarkup(c);break;case"DMUValidationValidated":c=new i(t.viewer.getViewer(),g),g.setValidated(c);break;case"DMUValidationParticipants":c=new s(t.viewer.getViewer(),g),g.setParticipants(c);break;case"DMUValidationCheck":(c=new a(t.viewer.getViewer(),g)).setEditable(l),g.addCheck(c);break;case"DMUValidationContext":c=new r(t.viewer.getViewer(),g),g.setContext(c);break;case"DMUValidationExposedPresentation":(c=new o(t.viewer.getViewer(),g)).setEditable(l),g.addHighlight(c)}c&&c.setFromJson(d)}g.sortMarkups(),g.setReadOnly(t.DMUExperience.isReadOnly()),g.fireEvent("onDMUObjectInitialized",{dmuObject:g,editionMode:l})}return g}}})});