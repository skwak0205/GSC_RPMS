function updateHrefTag(e,t){var n=$("#"+e.id+"proslauncher"),o=e.id,a=e.dataset.href,i=e.dataset.title,s=(e.dataset.label,buildHrefTag(a,o,e.dataset.target,i,"&#x2713;","left pointer launcherbtn launchersubmitbtn",t));n.replaceWith(s)}function buildHrefTag(e,t,n,o,a,i,s){return t+="proslauncher",""===n||"content"===n||"popup"===n?"<button onclick=\"showNonModalDialog('{0}', '930', '650', 'true')\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(e,t,s,i,a):"slidein"!==n?"<button onclick=\"{0};hideLauncher();return false;\" id='{1}' title='{2}' target='{3}' class='{4}'>{5}</button>".format(e,t,s,n,i,a):"<button onclick=\"getTopWindow().showSlideInDialog('{0}', 'true');hideLauncher();return true;\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(e,t,s,i,a)}function hideLauncher(){$(".prosactionlauncher").hide(),$(".proslauncherMenu").show()}function showLauncher(e){$(".prosactionlauncher").hide(),$(".proslauncherMenu").hide(),$("#"+e+".prosactionlauncher").fadeIn(1e3)}define("DS/ENOProcessStepsUX/scripts/SearchConfiguration",["UWA/Core","UWA/Utils/InterCom","UWA/Class/Model","DS/ENOFrameworkPlugins/jQuery"],function(e,t,n,o){"use strict";var a=function(e){this.multiSelectVal=e,this.socketName="search_socket_"+(new Date).getTime(),this.socket=new t.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.listener=this.objectsSelected.bind(this),this.socket.addListener("Selected_Objects_search",this.listener);var n=this.options();this.socket.dispatchEvent("RegisterContext",n)};return a.prototype.destroy=function(){var e={};e.widget_id=widget.id,this.socket.dispatchEvent("unregisterSearchContext",e),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.disconnect()},a.prototype.options=function(e,t,n,a,i){var s={};return s.title=e,s.multiSel=this.multiSelectVal,s.mode="furtive",s.app_socket_id=this.socketName,s.widget_id=widget.id,s.default_with_precond=!0,s.show_precond=!1,s.idcard_activated=!1,s.role=n,t&&(s.precond="(",t=t.split(","),o.each(t,function(e,t){0!==e&&(s.precond+=" OR "),s.precond+='flattenedtaxonomies:"types/'+t.trim()+'"'}),s.precond+=")",""!=i&&(s.precond+=i)),a&&(s.default_search_criteria=a),s},a.prototype.activate=function(e,t,n,o,a,i){var s=this.options(e,t,n,a,i);this.callback=o,this.socket.dispatchEvent("InContextSearch",s)},a.prototype.isAvailable=function(){return e.is(this.socket)},a.prototype.objectsSelected=function(e){var t=[];if(this.callback){for(var o=0;o<e.length;o++){var a=[],i=new n(e[o]);a.push(i.get("id")),a.push(i.get("ds6w:identifier")),a.push(i.get("ds6w:type")),a.push(i.get("ds6w:policy")),a.push(i.get("type_icon_url")),t.push(a)}this.callback(t)}},a}),define("DS/ENOProcessStepsUX/scripts/ProcessStep",["DS/ENOFrameworkPlugins/jQuery"],function(e){"use strict";return{ProcessStep:function(t){this.allMandTasksComplete=!0,e.extend(this,t)}}}),define("DS/ENOProcessStepsUX/scripts/ProcessStepsUtil",["DS/PlatformAPI/PlatformAPI","UWA/Core","UWA/Class/Promise","DS/i3DXCompassServices/i3DXCompassServices","DS/WAFData/WAFData","DS/UIKIT/Alert"],function(e,t,n,o,a,i){"use strict";var s={executeOperation:function(e,t,n){var o=document.getElementById("accordianTasks"),a=document.getElementById("overlay"),i=(document.getElementById("detailsDisplay"),o.getAttribute("rootObjectId")),s=findFrame(getTopWindow(),"PROSProcessSteps"),r=null;a.style.display="block",s||(s=findFrame(getTopWindow(),"detailsDisplay")),r=s?s.location.href:getTopWindow().location.href,$.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(r);return null!=t?t[1]||0:""};var l=$.urlParam("selectedProposedItem"),c=$.urlParam("selectedAffectedItems");jQuery.ajax({url:"./enoPROSProcessStepsActions.jsp?objectId="+e+"&rootobjectId="+i+"&operationName="+t,async:!0,cache:!1,complete:function(e){document.getElementById("overlay").style.display="none";var t=e.responseText,o="begin_process_msg:",a=o.length,i=t.lastIndexOf(o)+a;t=t.substr(i,t.length);var r=":end_process_msg",d=t.lastIndexOf(r),u=t.substr(0,d);setTimeout(function(){if(u&&alert(u),"true"==n){getTopWindow().RefreshHeader(),getTopWindow().deletePageCache();var e=null;e=s?s.location.href:getTopWindow().location.href,l&&c&&(e+="&selectedProposedItem="+l+"&selectedAffectedItems="+c),s.location.href=e}},200)}})},acceptTask:function(e){submitWithCSRF(e,findFrame(getTopWindow(),"listHidden")),getTopWindow().findFrame(getTopWindow(),"detailsDisplay").location.href=getTopWindow().findFrame(getTopWindow(),"detailsDisplay").location.href},showTooltip:function(e,t){if(document.getElementById(e).style.visibility="visible",""!=t){var n=document.getElementById(t);n&&(n.style.visibility="hidden"),showRoute(t)}},hideTooltip:function(e,t){if(document.getElementById(e).style.visibility="hidden",""!=t){var n=document.getElementById(t);n&&(n.style.visibility="hidden")}},showRoute:function(e){var t="&objectId="+e+"&suiteKey=DocumentControl",n=emxUICore.getDataPost("../questionnaire/enoQuestionnaireExecute.jsp?questionAction=ENODCLDocumentUI:getApproversImage",t);document.getElementById(e+"Images").innerHTML=n},openTreePage:function(e){var t="../common/emxTree.jsp?mode=insert&objectId="+e;getTopWindow().showModalDialog(t,250,250,!0)},openHistoryPage:function(e){var t="../audittrail/Execute.jsp?executeAction=ENOAuditTrails:preProcessHistory&structuralHistory=false&mode=";t+="&objectId="+e,getTopWindow().showModalDialog(t,250,250,!0)},openConditionsPage:function(e){var t="../questionnaire/enoQuestionnaireExecute.jsp?questionAction=ENOQuestionUI:getPromoteBlockingConditionsHTML&validateToken=false&mqlNoticeMode=true&objectId="+e,n=emxUICore.getDataPost(t),o=document.getElementById(e+"Blocking");o.innerHTML=n.substring(1),o.style.visibility="visible"},openLifecycle:function(e){var t="../common/emxLifecycle.jsp?toolbar=AEFLifecycleMenuToolBar&header=emxFramework.Lifecycle.LifeCyclePageHeading&export=false";showModalDialog(t+="&mode=advanced&objectId="+e,250,250,!0)},openEditPage:function(e,t){var n="";"Change Order"==t&&(n+="../common/emxForm.jsp?form=type_ChangeOrderSlidein&formHeader=EnterpriseChangeMgt.Heading.EditCO&HelpMarker=emxhelpchangeorderedit&mode=edit&submitAction=doNothing&preProcessJavaScript=preProcessInEditCO&postProcessJPO=enoECMChangeOrder:coPostProcessJPO&type=type_ChangeOrder&postProcessURL=../enterprisechangemgt/ECMCommonRefresh.jsp?functionality=editCOFromRMB",n+="&objectId="+e+"&parentOID="+e,n+="&emxSuiteDirectory=enterprisechangemgt&suiteKey=EnterpriseChangeMgt&SuiteDirectory=enterprisechangemgt&StringResourceFileId=emxEnterpriseChangeMgtStringResource"),"Change Action"==t&&(n+="../common/emxForm.jsp?form=type_ChangeActionSlidein&formHeader=EnterpriseChangeMgt.Heading.EditCA&HelpMarker=emxhelpchangeactionedit&mode=edit&submitAction=doNothing&type=type_ChangeAction&postProcessURL=../enterprisechangemgt/ECMCommonRefresh.jsp?functionality=editCAFromRMB",n+="&objectId="+e+"&parentOID="+e,n+="&emxSuiteDirectory=enterprisechangemgt&suiteKey=EnterpriseChangeMgt&SuiteDirectory=enterprisechangemgt&StringResourceFileId=emxEnterpriseChangeMgtStringResource"),"Quality System Document"==t&&(n+="../documentcontrol/enoDCLExecute.jsp?dclAction=ENODCLDocumentUI:showDocumentEditView&validateToken=false",n+="&objectId="+e+"&parentOID="+e,n+="&emxSuiteDirectory=enterprisechangemgt&suiteKey=EnterpriseChangeMgt&SuiteDirectory=enterprisechangemgt&StringResourceFileId=emxEnterpriseChangeMgtStringResource"),getTopWindow().showSlideInDialog(n,!0),findFrame(getTopWindow(),"DCMyDocumentsTab").emxEditableTable.refreshStructureWithOutSort()},openViewPage:function(e){var t="../common/emxTree.jsp?mode=insert&objectId="+e;t+="&HelpMarker=emxhelpchangeorderedit",getTopWindow().showModalDialog(t,250,250,!0)},openViewPageDiv:function(e){var t="&objectId="+e+"&suiteKey=DocumentControl",n=emxUICore.getDataPost("../questionnaire/enoQuestionnaireExecute.jsp?questionAction=ENODCLDocumentUI:getBasicProperties",t),o=document.getElementById(e);o.innerHTML=n,o.style.visibility="visible"},format:function(){var e=arguments[0],t=arguments;return e.replace(/{(\d+)}/g,function(e,n){return void 0!==t[n]?t[n+1]:e})},resizeIframe:function(e){var t=e.contentDocument?e.contentDocument:e.contentWindow.document,n=getDocHeight(t);e.style.height=n+"px"},getDocHeight:function(e){var t=(e=e||document).body,n=e.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)},getDelimitedStringFromList:function(e,t){var n=e;if(n.length>1){var o=n.toString().split(",");n=o.join(t)}return n},getNonNullValue:function(e){return null==e?"":e},getStepTitleImage:function(e){if(null==statusIconImage)return"";e='<img src="../common/images/'+e+'" width="16px" height="15px" alt=""/>'},getStatusIcon:function(e,t,n,o){var a=e.status,i="false",s="";return"false"===t&&"false"===n&&(i="true"),"Optional"===e.taskType?s="OK"===a?"iconcircle complete checked icon":"iconcircle ps-active alert-iconcircle icon":"true"===n?s="KO"===a?"iconcircle stopped error icon":"iconcircle complete checked icon":"true"!==t&&"true"!==i||(s="true"===t&&"OK"===a?"iconcircle complete checked icon":"WIP"===a||"NA"===a||"hold"===a?"iconcircle pendingArrow icon":"KO"===a?"iconcircle stopped error icon":"stop"===a&&"true"===t?"<div class='octagonStatus'><div class='octagon'></div></div>":"iconcircle future icon"),"true"===t&&"stop"===a?s:(o&&(s+=" enoprocstpes-disabled"),"<div class='{0}'></div>".format(s))},getTitleTag:function(e,t,n){return t&&n?e+'&nbsp;&nbsp;<div class="'+t+'">'+n+"</div>":e},makeWSCall:function(e,t,n,o,i,r,l,c,d){s.getCSRFToken(t.myAppsURL).then(function(s){var u=e,p="";p=d||"POST";var m=(new Date).getTime();u=-1==u.indexOf("?")?u+"?tenant="+t.tenant+"&timestamp="+m:u+"&tenant="+t.tenant+"&timestamp="+m;var f=t.securityContext,h="";t.proxy&&(h=t.proxy),o=o||function(){},i=i||function(){};var g="";"undefined"!=typeof widget&&(g=widget.getValue("lang"),widget.lang&&(g=widget.lang));var v={};v.method=p,v.timeout="",v.type="json",v.auth={passport_target:"enovia"},v.proxy=h,v.headers=f?{Accept:"application/json","Content-Type":"application/json",SecurityContext:f,ENO_CSRF_TOKEN:s,"Accept-Language":g}:{Accept:"application/json","Content-Type":"application/json",ENO_CSRF_TOKEN:s,"Accept-Language":g},n&&(v.data=n),v.onComplete=function(e){console.log("Success calling url: "+u),console.log("Success data: "+JSON.stringify(e)),o(e,JSON.parse(n),r,l)},v.onFailure=function(e,t){console.log("Error in calling url: "+u),console.log("Additional Details:: httpMethod: "+p+" authentication: enovia securityContext: "+f+" ContentType: application/json"),console.log("Error Detail: "+e),console.log("Error Data: "+JSON.stringify(t)),i(e,t)},v.onTimeout=function(){console.log("Timedout for url: "+u)},v.async=null==c||c,a.authenticatedRequest(u,v)})},getCSRFToken:function(e,t){var o=this;return o.app||(o.app=t),new n(function(t,n){var i={},s=e+"/resources/v1/application/CSRF";i.method="GET",i.proxy="passport",i.onComplete=function(e){o.app&&o.app.logger.info("CSRF Token retrieved successfully"),t(e.csrf.value)},i.onFailure=function(e){o.app&&o.app.logger.error("Error while getting CSRF token"),n(e)},i.type="json",a.authenticatedRequest(s,i)})},FileDropSelectHandlerColumn:function(e,t,n,o,a,i,r,l,c,d,u,p,m,f){s.functionOne(e,t,n,o,a,i,r,l,c,d,u,p,m,""),s.functionTwo(o)},functionOne:function(e,t,n,o,a,i,s,r,l,c,d,u,p,m){var f=$.Deferred();return FileSelectHandler(e,t,n,o,a,i,s,r,l,c,d,u,p,m),f},functionTwo:function(e){s.onfileDrop(e)},onDragLeaveFile:function(e,t){FileDragHoverColumn(e,t)},onfileDrop:function(e){document.getElementById(e).className="dropProgressColumn";for(var t=document.getElementById(e).children,n=0;n<=t.length-1;n++)t[n].parentNode.removeChild(t[n]);t=document.getElementById(e).children;for(n=0;n<=t.length-1;n++)t[n].parentNode.removeChild(t[n])},refreshFrame:function(){var e=findFrame(getTopWindow(),"detailsDisplay");e.location.href=e.location.href},getObjectHref:function(e,t){return"<a href='#' class='callout-link' objectid='{0}'>{1}</a>".format(e,t)},isWidget:function(){var e="";try{e=widget}catch(e){}return e},error:function(e){this.message(e,"error")},success:function(e){this.message(e,"success")},warn:function(e){this.message(e,"warning")},info:function(e){this.message(e,"primary")},message:function(e,t){null!=this.alertPS&&this.alertPS.hide();var n=!0;"error"==t&&(n=!1),this.alertPS=new i({closable:!0,visible:!0,autoHide:n,hideDelay:5e3,className:"wp-alert"}).inject(document.body,"top"),this.alertPS.add({className:t,message:e})}};return s}),define("DS/ENOProcessStepsUX/scripts/PlatformServices",["UWA/Core","UWA/Promise","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e,t,n){"use strict";var o=function(){};return o.prototype.initializePlatform=function(e){var t=this;n.getPlatformServices({onComplete:function(n){if(null===n){n.options=e,(0,e.onFailure)("cannot retrieve platform data")}else{var o={};t.platformurls=o.platformurls=n[0],widget.platformServices=t,o.options,(0,e.onComplete)(o)}},onFailure:function(t){(0,e.onFailure)(t)}})},o.prototype.get3DSpaceURL=function(){return this.getURL("3DSpace")},o.prototype.getTenantId=function(){return this.getURL("platformId")},o.prototype.getURL=function(e){return this.platformurls[e]||""},o.prototype.getCurrentUser=function(){return new Promise(function(e,t){n.getUser({onComplete:function(t){e({id:t.id,email:t.email,firstName:t.firstname,lastName:t.lastname})},onFailure:t})})},o}),define("DS/ENOProcessStepsUX/scripts/ProcessStepsModals",["DS/UIKIT/Form","DS/UIKIT/Modal","UWA/Core","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","DS/UIKIT/Input/Button"],function(e,t,n,o,a){"use strict";var i={modalHeader:null,modalFooterButtons:null,modalBody:null,modalObject:null,_createModal:function(){var e=i.createFooterButtons();return this.modalObject=new t({closable:!0,header:"<h4>"+i.modalHeader+"</h4>",body:i.createModalBody(),footer:e,events:{onHide:function(){i.modalObject.destroy()}.bind(i.modalObject)}}),this.modalObject},createFooterButtons:function(){for(var e=i.modalFooterButtons,t=[],n=0;n<e.buttons.length;n++)"Cancel"==e.buttons[n].buttonValue?t[n]=new a({value:o.PS_Cancel,events:{onClick:function(){i.modalObject.hide()}}}):t[n]=new a({value:e.buttons[n].buttonValue,className:"primary"});return t},createModalBody:function(){for(var t=i.modalBody.mBody,n=[],a=0;a<t.length;a++){var s=!1;"textarea"===t[a].fieldType&&(s=!0),n[a]={type:t[a].fieldType,value:t[a].fieldValue,label:t[a].fieldLabel,placeholder:t[a].fieldPlaceHolder,className:t[a].fieldClassName,rows:t[a].fieldRows,html:t[a].html,required:s}}return new e({fields:n,events:{onInvalid:function(){alert(o.PS_MandFieldMissing_error)}}})},clearModalValues:function(){this.modalHeader=null,this.modalFooterButtons=null,this.modalBody=null,this.modalObject=null}};return i}),define("DS/ENOProcessStepsUX/scripts/ProcessTask",["DS/ENOFrameworkPlugins/jQuery"],function(e){"use strict";return{ProcessTask:function(t){this.calloutFlag=!1,this.parentCalloutFlag=!1,e.extend(this,t)}}}),define("DS/ENOProcessStepsUX/scripts/ProcessStepsSpinner",["DS/UIKIT/Mask"],function(e){"use strict";var t={wait:!1,keepActive:!1,doWait:function(n,o){if(!1===t.keepActive&&t.isWaiting())t.endWait(n);else if(t.isWaiting())return;e.mask(n,o),t.wait=!0},endWait:function(n){t.isWaiting()&&(e.unmask(n),t.wait=!1,t.keepActive=!1)},isWaiting:function(){return t.wait}};return t}),define("DS/ENOProcessStepsUX/scripts/DCLFileContentView",["css!DS/ENOProcessStepsUX/ENOProcessStepsUX","DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","DS/UIKIT/Accordion","DS/ENOFrameworkPlugins/jQuery","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps"],function(e,t,n,o,a){"use strict";return{_loadDocumentFiles:function(e){var o=e,i=o.renderTo,s=new UWA.Element("div",{styles:{height:"10%",width:"99.9%"}});s.setAttributes({id:"divForReferenceView"});var r="",l=e.myAppsURL+"/resources/dclProcessSteps/DCLProcessStepsService/getFileContentsData";t.makeWSCall(l,o,JSON.stringify(e),function(e,t,o,i){var l=e.data,c=JSON.parse(l),d=new UWA.Element("table",{styles:{width:"100%",cursor:"default",padding:"0px"}}),u="";try{u=widget}catch(e){}var p=[];p=u?[a.PS_FileName,a.PS_Type,a.PS_Version,a.PS_Comments,a.PS_Originator,a.PS_ModifiedDate,a.PS_FileSize]:[a.PS_FileName,a.PS_Type,a.PS_Version,a.PS_Actions,a.PS_Comments,a.PS_Originator,a.PS_ModifiedDate,a.PS_FileSize];for(var m=document.createElement("tbody"),f=document.createElement("tr"),h=0;h<p.length;h++){var g=document.createElement("td");g.style.height="1px",g.style.border="0 solid #fff",g.style.borderLeftWidth="1px",g.style.borderBottomWidth="1px",g.style.padding="5px 8px 5px 8px";var v=document.createElement("div");v.style.top="0px",g.appendChild(v);var S=document.createTextNode(p[h]);v.appendChild(S),f.appendChild(g)}f.style.backgroundColor="#e2e4e3",f.style.fontWeight="bold",m.appendChild(f);for(h=0;h<c.length;h++)for(var b=c[h].FileContents,y=0;y<b.length;y++){r=u?[b[y]["attribute[Title]"],b[y].type,b[y].revision,b[y].comments,b[y].owner,b[y].modified,b[y].size]:[b[y]["attribute[Title]"],b[y].type,b[y].revision,b[y].actionLink,b[y].comments,b[y].owner,b[y].modified,b[y].size];var C=document.createElement("tr");C.style.backgroundColor="#f4f5f6";for(var P=0;P<r.length;P++){var w=document.createElement("td");w.style.height="1px",w.style.border="0 solid #fff",w.style.borderLeftWidth="1px",w.style.borderBottomWidth="1px",w.style.padding="5px 8px 5px 8px";var k=document.createElement("div");k.style.top="0px",w.appendChild(k),k.innerHTML=r[P],C.appendChild(w),m.appendChild(C)}}d.addContent(m);new n({className:"styled divided filled",items:[{title:a.PS_FileContent,content:d,selected:!0}],events:{onOpen:function(){},onClose:function(){}}}).inject(s);o.appendChild(s)},function(e,t){console.log("onFailureCallback:errDetailds:"+e)},i)}}}),define("DS/ENOProcessStepsUX/scripts/Settings",["UWA/Class","UWA/Promise","DS/ENOProcessStepsUX/scripts/PlatformServices","DS/WAFData/WAFData"],function(e,t,n,o){"use strict";var a=e.singleton({init:function(){this.isPlatformInitialized=!0},getSetting:function(e){return widget[e]||""},getPlatformURLs:function(){return this.getSetting("platformServices")},loadPlatformServices:function(e){var t=this.getSetting("platformServices");""==t?this.addplatformService(e):e(t)},addplatformService:function(e){var o=this;new t(function(e,t){var o={onComplete:e,onFailure:t};n.prototype.initializePlatform(o)}).then(function(e){return new t(function(e,t){var n=a.getPlatformURLs(),o={url:n.get3DSpaceURL()+"/resources/pno/person/getsecuritycontext?tenant="+n.getTenantId(),onComplete:function(t){var n=JSON.parse(t);widget.getValue("pad_security_ctx")||a.addSetting("pad_security_ctx",n.SecurityContext),e(t)},onFailure:t};a.callCustomService(o)})}).then(function(t){e(o)},function(e){console.log(e)})},addSetting:function(e,t){if(!this.isPlatformInitialized)throw new Error("Platformservices not initialized");widget[e]&&console.log("Setting is already in use"),widget[e]=t},callCustomService:function(e){e.method=e.method||"GET",e.headers=e.headers||{Accept:"application/json"},e.proxy=e.proxy||"passport",e.withoutSC||(e.SecurityContext=a.getSetting("pad_security_ctx")),o.authenticatedRequest(e.url,e)}});return a}),define("DS/ENOProcessStepsUX/scripts/ProcessStepsWidgetActions",["DS/ENOProcessStepsUX/scripts/SearchConfiguration","css!DS/ENOProcessStepsUX/ENOProcessStepsUX","DS/UIKIT/SuperModal","DS/ENOProcessStepsUX/scripts/ProcessStepsModals","DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","UWA/Core","DS/ENOProcessStepsUX/scripts/Settings","DS/ENOProcessStepsUX/scripts/ProcessStepsSpinner","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","DS/Panels/SidePanel","DS/UIKIT/Input/Button","DS/UIKIT/Form"],function(e,t,n,o,a,i,s,r,l,c,d,u){"use strict";var p={callback:function(e){alert("back...")},executeViewAction:function(e){var t=e.currentTarget.attributes[0].value.split(":"),n=t[0],o=t[1],a=e.currentTarget.attributes[1].value,i=e.currentTarget.attributes[2].value,s=e.currentTarget.attributes[3].value,r=e.currentTarget.attributes[6].value,l={refJS:n,refMethod:o,title:i};l.viewObjectId=s,l.optionJson=r,"slideIn"==a?p.openActionInSlideIn(l):"popup"==a?p.openActionInPopup(l):p.executeAction(l)},refresh:function(){var e=s.getSetting("data");e.renderTo.innerHTML="",require(["DS/ENOProcessStepsUX/scripts/ProcessStepsView"],function(t){t.prototype._createView_ProcessSteps(e)})},refreshUserDefinedCallback:function(){var e=s.getSetting("data");e.data.callback&&e.data.callback()},executeTaskAction:function(e){var t=p.refresh,n=e.currentTarget.attributes[0].value.split(":"),o=n[0],a=n[1],i=e.currentTarget.attributes[1].value,s=e.currentTarget.attributes[2].value,r=e.currentTarget.attributes[3].value,l=e.currentTarget.attributes[6].value,c=e.currentTarget.attributes[7].value,d={refJS:o,refMethod:a,title:s};d.refresh=t,d.actionObjectId=r,d.that=this,d.actionTargetState=l,d.optionJson=c,"slideIn"==i?p.openActionInSlideIn(d):"popup"==i?p.openActionInPopup(d):p.executeAction(d)},executeAction:function(e){require([e.refJS],function(t){var n=e.refMethod;try{(new t)[n](e)}catch(o){t[n](e)}})},openActionInPopup:function(e){var t=new UWA.Element("div",{});for(var o in"")e[o]=""[o];e.renderTo=t,require([e.refJS],function(t){var n=e.refMethod;try{(new t)[n](e)}catch(o){t[n](e)}}),new n({renderTo:widget.body}).dialog({body:t,title:e.title})},openActionInSlideIn:function(e){var t=new UWA.Element("div",{}),n={};for(var o in n)e[o]=n[o];e.renderTo=t,require([e.refJS],function(t){var n=e.refMethod;try{(new t)[n](e)}catch(o){t[n](e)}});var a=new c({side:"right","z-index":1e3,width:300});a.appendChild(t),a.elements.container.children[0].style.height="100%",a.elements.container.children[1].style.height="100%",a.elements.content.classList.add("sidepanel-content-wrapper"),a.elements.container.children[0].classList.add("sidepanel-content");var i=new UWA.Element("div",{class:"modal modal-root",styles:{display:"block"}}),s=new UWA.Element("div",{class:"modal-overlay in"}),r=UWA.createElement("div",{id:"sidePanelData",class:"modal-wrap"}),l=UWA.createElement("div",{id:"sidePanel-container"});widget.body.appendChild(l),r.empty(),a.inject(r),r.inject(i),i.inject(l),s.inject(l);var d=new UWA.Element("div",{text:e.title,class:"action-bar"}).inject(t);new UWA.Element("div",{class:"preview-icon fonticon fonticon-cancel btn-without-label btn-with-icon actionsContainer",events:{click:function(){document.getElementById("sidePanel-container").destroy()}}}).inject(d)},handleContextMenuClickPromote:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Approver_Comments,l.PS_Reviewer_Comments_Promotion,l.PS_Promote,l.PS_NeedsReviewApprove)},handleContextMenuClickPromoteTask:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Reviewer_Comments,l.PS_Reviewer_Comments_Promotion,l.PS_Promote,l.PS_NeedsReviewApprove)},handleContextMenuClickDemote:function(e){JSON.parse(e.optionJson),e.actionObjectId;e.isOwnerReviewerSame="true",this.openSlideInGenericTask(e,l.PS_Approver_Comments,l.PS_Reviewer_Comments_Demotion,l.PS_Demote,l.PS_NeedsReviewReject)},handleContextMenuClickDemoteTask:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Reviewer_Comments,l.PS_Reviewer_Comments_Demotion,l.PS_Demote,l.PS_NeedsReviewReject)},handleContextMenuClickComplete:function(e){this.checkTaskComment(e,l.PS_Comments,l.PS_Comments,l.PS_Complete,l.PS_completeTask)},handleContextMenuClickCompleteTask:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Comments,l.PS_Comments,l.PS_Complete,l.PS_completeTask)},handleContextMenuClickEdit:function(e){JSON.parse(e.optionJson),e.actionObjectId;e.isOwnerReviewerSame="true",this.openSlideInGenericTask(e,l.PS_Comments,l.PS_Comments,l.PS_Done,l.PS_editTask)},handleContextMenuClickEditTask:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Comments,l.PS_Comments,l.PS_Done,l.PS_editTask)},handleContextMenuClickApproveTask:function(e){this.checkTaskComment(e,l.PS_Comments,l.PS_Approval_Comments,l.PS_Approve,l.PS_Approve)},checkTaskComment:function(e,t,n,o,i){var s=JSON.parse(e.optionJson),l=e.actionObjectId,c=s.myAppsURL+"/resources/processSteps/ProcessStepsService/getTaskComments/"+l;a.makeWSCall(c,s,null,function(a){null==a.comments||""==a.comments||0==a.comments.length?(e.isOwnerReviewerSame="true",e.that.openSlideInGenericTask(e,t,n,o,i)):(e.comment=a.comments,e.that.setApproveOrRejectFortask(i,e,null))},function(e,t){r.endWait(widget.body);var n=t.errorMessage;null!=n&&""!=n&&a.error(n)},null,null,null,"POST")},setApproveOrRejectFortask:function(e,t,n){var o=i.extendElement(document.body).getElements(".reason_input"),s=t.actionObjectId,c=JSON.parse(t.optionJson);if(null!=o&&o[0]&&""==o[0].value)o[0].getParent(".form-group").addClassName("has-error"),a.warn(l.PS_CommentsMissing_error);else{"Approve"==e&&"Reject"==e||(e==l.PS_Approve?e="Approve":e==l.PS_Reject&&(e="Reject"));var d=JSON.stringify({action:e,isOwnerReviewerSame:null!=t.isOwnerReviewerSame&&t.isOwnerReviewerSame,comments:null!=t.comment?t.comment:"Done"}),u=c.myAppsURL+"/resources/processSteps/ProcessStepsService/updateTask/pid=pid:"+s;r.doWait(widget.body),a.makeWSCall(u,c,d,function(e){r.endWait(widget.body),(0,t.refresh)(),t.that.refreshUserDefinedCallback()},function(e,t){r.endWait(widget.body);var n=t.errorMessage;null!=n&&""!=n&&a.error(n)},null,null,null,"PUT"),n&&n.destroy()}},handleContextMenuClickApprove:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Comments,l.PS_Approval_Comments,l.PS_Approve,l.PS_Approve)},onRefresh:function(){var e=document.getElementById("sidePanel-container");document.getElementsByClassName("triptych-main withtransition")[0].style.cssText="width:auto;",e.destroy()},openSlideInGenericTask:function(e,t,n,o,i){var s=new UWA.Element("div",{}),p=new c({side:"right","z-index":1e3,height:"100%",width:300});p.appendChild(s),p.elements.container.children[0].style.height="100%",p.elements.container.children[1].style.height="100%",p.elements.content.classList.add("sidepanel-content-wrapper"),p.elements.container.children[0].classList.add("sidepanel-content");p.elements.panel.setStyles({"background-color":"#FFFFFF"});var m=new UWA.Element("div",{class:"modal modal-root",styles:{display:"block"}}),f=new UWA.Element("div",{class:"modal-overlay in"}),h=UWA.createElement("div",{id:"sidePanelData"}),g=UWA.createElement("div",{id:"sidePanel-container"});widget.body.appendChild(g),h.empty(),p.inject(h),h.inject(m),m.inject(g),f.inject(g);var v=document.getElementsByClassName("triptych-right withtransition borderRight close"),S=document.getElementsByClassName("triptych-main withtransition"),b=document.getElementById("sidePanelData");b.children[0].children[0].style.setProperty("border-left","1px solid #D3D3D3",""),b.children[0].children[0].style.setProperty("border-radius","0",""),S[0].style.cssText="width:80%;",v[0].style.cssText="width:20%;";var y=document.getElementById("sidePanel-container");null!=y.getChildren()[1]&&y.removeChild(y.getChildren()[1]);var C=JSON.parse(e.optionJson),P=function(e,t){r.endWait(widget.body);var n=t.errorMessage;null!=n&&""!=n&&a.error(n)},w=function(r){var c=r.data,p=new UWA.Element("div",{class:"action-bar"}).inject(s),m=new u({fields:[{type:"text",label:t,pattern:"[a-zA-Z]+",placeholder:n,multiline:!0,rows:4,required:"true"==c}]});m.getContent().setStyles({"margin-top":"10%"});var f=function(t){var n=t.srcElement.value;n.length>0?e.comment=n:e.comment=l.PS_Done};m.elements.container.addEvent("change",f),m.elements.container[0].addEvent("keyup",f),m.inject(p);var h=new d({value:l.PS_Cancel,class:"warning",events:{onClick:function(e){y.destroy(),S[0].style.cssText="width:auto;",v[0].style.cssText="width:0%;"}}});h.getContent().setStyles({"margin-top":"20%",float:"right"}),h.inject(p);var g=new d({value:o,class:"primary",events:{onClick:function(t){"true"==c&&null==e.comment?a.warn(l.PS_CommentsMissing_error):("true"==c&&null!=e.comment&&e.comment.length,e.that.setApproveOrRejectFortask(i,e,null),y.destroy(),S[0].style.cssText="width:auto;",v[0].style.cssText="width:0%;")}}});g.getContent().setStyles({"margin-top":"20%","margin-right":"5%",float:"right"}),g.inject(p)},k=e.actionObjectId;if(i==l.PS_Approve||i==l.PS_Reject){var T=C.myAppsURL+"/resources/processSteps/ProcessStepsService/showTaskComments/"+k,D=C.myAppsURL+"/resources/processSteps/ProcessStepsService/checkForComments/"+k;a.makeWSCall(T,C,null,function(e){"true"==e.data?w(e):a.makeWSCall(D,C,null,w,P,null,null,null,"POST")},P,null,null,null,"POST")}else if(i==l.PS_NeedsReviewApprove||i==l.PS_NeedsReviewReject){D=C.myAppsURL+"/resources/processSteps/ProcessStepsService/canEditReviewerComments/"+k;a.makeWSCall(D,C,null,w,P,null,null,null,"POST")}else if(i==l.PS_editTask||i==l.PS_completeTask){var I=JSON.parse('{"data": "true"}');w(I)}widget.addEvent("onRefresh",this.onRefresh)},handleContextMenuClickRejectTask:function(e){this.checkTaskComment(e,l.PS_Comments,l.PS_Rejection_Comments,l.PS_Reject,l.PS_Reject)},handleContextMenuClickReject:function(e){JSON.parse(e.optionJson),e.actionObjectId;this.openSlideInGenericTask(e,l.PS_Comments,l.PS_Rejection_Comments,l.PS_Reject,l.PS_Reject)},handleContextMenuClickAccept:function(e){var t=JSON.parse(e.optionJson),n="pid:"+e.actionObjectId,o=t.myAppsURL+"/resources/processSteps/ProcessStepsService/accept/"+n;r.doWait(widget.body),a.makeWSCall(o,t,null,function(n){(0,e.refresh)(),t.callback&&(0,optionJson.callback)();a.success("CA_NLS.ECM_CA_Task_Accept_Success"),r.endWait(widget.body)},null,null,null,null,"PUT")},handleContextMenuClickRestart:function(e){},openProperties:function(e){new UWA.Element("div",{})},search:function(t){var n=new e(!0),o=p.callback;n.activate("Add Reference Document","Quality System Document","VPLMProjectLeader",o,null,"")}};return p}),define("DS/ENOProcessStepsUX/scripts/ProcessSteps",["DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","DS/ENOProcessStepsUX/scripts/ProcessStep","DS/ENOProcessStepsUX/scripts/ProcessTask","DS/PlatformAPI/PlatformAPI","UWA/Core","UWA/Data","UWA/Class/Promise","DS/i3DXCompassServices/i3DXCompassServices","DS/ENOFrameworkPlugins/jQuery","css!DS/ENOProcessStepsUX/ENOProcessStepsUX","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","DS/ENOProcessStepsUX/scripts/ProcessStepsWidgetActions"],function(e,t,n,o,a,i,s,r,l,c,d,u){"use strict";var p={loadReferenceView:function(t,n,o,a){var i=p.getInputDataJSON(t,n,"","","",a),s=a.myAppsURL+"/resources/processSteps/ProcessStepsService/getReferenceViewURL";e.makeWSCall(s,a,i,function(e,n,o,s){var r=e.data,c=JSON.parse(r),d=c[0].RefernceJS,u=c[0].RefernceMethod,p=c[0].AMD,m=document.getElementById("ReferenceView");if(null==m&&(m=o),"false"==p)document.getElementById("ReferenceView").innerHTML="",l("#ReferenceView").load(d,{objectId:t,MCSURL:a.myAppsURL});else{var f=u;require([d],function(e){var t=e[f];return(i=JSON.parse(i)).renderTo=m,t(i)})}},function(e,t){console.log("onReferenceViewFailureCallback:errDetailds:"+e)},o)},loadProcessSteps:function(o,a,i,s){var r=p.getInputDataJSON(o,a,"","","",s),c=s.myAppsURL+"/resources/processSteps/ProcessStepsService/getProcessStepsData";e.makeWSCall(c,s,r,function(o,i,r,c){for(var u=o.data,m=JSON.parse(u),f=p.getCarouselDiv(),h=0;h<m.length;h++){for(var g,v,S=m[h].ProcessSteps,b=p.getHeaderHTML(i),y=S.length,C=p.getDefaultLoadedStepNumber(t,S),P=0;P<S.length;P++){var w=(M=new t.ProcessStep(S[P])).sequenceNumber,k=M.title,T=(M.titleImage,M.description),D=P+1,I=M.objectIds,O=M.stepXMLStateSymName,A=M.isActiveStep,E=M.isElapsedStep,x=M.isStoppedStep,N=M.isWaitingStep,_=!("true"===M.isActiveStep||"true"===M.isElapsedStep||"true"===M.isStoppedStep||"true"===M.isWaitingStep),L=M.stepXMLPolicySymName,U="graph";console.log("stepTitle:"+k),"true"==A?(v=P+1,U="graph active ps-active",P===C-1&&(U+=" activegraphring loaded",g=M),"true"==x&&(U="graph stopped",P===C-1&&(U+=" stoppedgraphring loaded",g=M))):"true"==E?(U="graph complete",P===C-1&&(U+=" completegraphring loaded",g=M)):(U="graph",P===C-1&&(U+=" futuregraphring loaded",g=M));var R=0==P?"":"--\x3e",j=P==S.length-1?"\x3c!----\x3e":"\x3c!--",W=e.getDelimitedStringFromList(I,"|");null==g&&P==S.length-1&&(g=S[P],v=P+1),f+=R,f+='<div step="'+k+'" ',f+='sequence="'+w+'" ',f+='stepnumber="'+D+'" ',f+='objectId="'+W+'" ',f+='policy="'+L+'" ',f+='state="'+O+'" ',f+='isactive="'+A+'" ',f+='iselapsed="'+E+'" ',f+='isstopped="'+x+'" ',f+='isfuture="'+_+'" ',f+='totalnumsteps="'+y+'" ',f+='selectedAffectedItems="'+e.getNonNullValue(a)+'" ',f+='class="'+U+'"><span>'+D+"</span>",N&&(e.isWidget()?f+="<div class='octagonBadge' title=\"{1}\">".format(M.dependencyHref,M.dependencyLabel):f+='<div class=\'octagonBadge\' onclick="{0}" title="{1}">'.format(M.dependencyHref,M.dependencyLabel),f+="<div class='octagon'></div></div>"),f+="</div>"+j}f+="</div>",f+='<div class="steptitle">';var F="titletext";for(P=0;P<S.length;++P)k=(M=new t.ProcessStep(S[P])).title,A=M.isActiveStep,E=M.isElapsedStep,x=M.isStoppedStep,"true"==A?(F="titletext textactive","true"==x&&(F="titletext textstopped")):F="true"==E?"titletext textcomplete":"titletext textfuture",f+='<div class="'+F+'">'+k+"</div>";for(f+="</div>",f+='<span class="fonticon fonticon-chevron-down collapseSummaryDown"></span>',f+='<div class="summary hiddenSummary">',P=0;P<S.length;++P){var M;T=(M=new t.ProcessStep(S[P])).description,f+='<div class="titletext summary">'+e.getNonNullValue(T)+"</div>"}f+="</div>",f+="</div>",f+='<div id="go-right" class="sliderarrows next"></div>',f+="</div>";var B="tablebanner",H="tasktable";if(g){"true"==g.isActiveStep?(B+=" tablebanneractive",H+=" tasktableactive","true"==g.isStoppedStep&&(B+=" tablebannerstopped",H+=" tasktablestopped")):"true"==g.isElapsedStep?(B+=" tablebannercomplete",H+=" tasktablecomplete"):(B+=" tablebannerfuture",H+=" tasktablefuture");var X="pointleft",J="pointright";"1"==C?X="":C==y&&(J=""),k=g.title,f+=p.getAccordianTasksDiv(),f+=p.getTableBannerContent(C,k,y,g.isActiveStep,g.isElapsedStep,g.isStoppedStep),f+='<table id=taskTable class="'+H+'">',f+=b;var V=g.stepTasks,q=[],K=[],z=!0;for(P=0;P<V.length;P++){var Q=new n.ProcessTask(V[P]);if(!V[P].ignore){"Mandatory"!==Q.taskType&&"Dependency"!==Q.taskType||"OK"===Q.status||(K.push(Q),1==z&&(z=!1));var G=null;V[P].dependeeType&&"all"===V[P].dependeeType?(G=[]).push.apply(G,K):V[P].dependeeTasks&&(G=V[P].dependeeTasks);var $=!("true"===g.isActiveStep||"true"===g.isElapsedStep||"true"===g.isStoppedStep||"true"===g.isWaitingStep),Z=p.getCallout(Q,G,q,g.isActiveStep,g.isElapsedStep,$),Y=!(!Z&&!0!==Q.parentCalloutFlag);null!=Q.comment&&(Y=!1);var ee=p.getTaskAction(Q,Z);!0!==Q.calloutFlag&&!0!==Q.parentCalloutFlag||q.push(Q.sequenceNumber);var te=e.getStatusIcon(Q,g.isActiveStep,g.isElapsedStep,Y),ne=Q.formattedDueDate,oe=Q.formattedDueDateClass,ae=e.getTitleTag(Q.title,oe,ne),ie=Y||$||"NA"===Q.status||"hold"===Q.status?"enoprocstpes-disabled":"";f+="<tr>",f+='<td width="2%">'+te+"</td>",f+="<td><span class={0}>".format(ie)+ae+"</span><span class='callout-holder graphCallout'>{0}</span></td>".format(Z);var se=Q.taskType;if(se="Mandatory"==se||"routetask"==se?d.PS_Mandatory:"Optional"==se?d.PS_Optional:d.PS_Dependency,f+="<td class={0}>".format(ie)+e.getNonNullValue(se)+"</td>",e.isWidget()){if(Q.actionLauncher)ee=p.getLauncherDiv(Q.actionLauncher,Q.dashboardActionLabel),f+="<td class={0} taskAction".format(ie)+" >",f+="<div > "+ee+" </div>",f+="</td>";else{var re=Q.dashboardActionImage.split("@"),le=Q.dashboardActionHref.split("@"),ce=Q.dashboardActionTargetLocation.split("@"),de=Q.dashboardActionLabel.split("@");for(f+="<td class={0} taskAction".format(ie)+" >",h=0;h<re.length;h++)f+="<span href='"+le[h]+"' targetlocation='"+ce[h]+"' title='"+de[h]+"'  actionobjectId='"+Q.actionObjectId+"' actionClick='true' class='"+re[h]+"' actionTargetState='"+Q.targetState+"'  options='"+JSON.stringify(s)+"' > </span>";f+="</td>"}var ue=Q.dashboardViewImage.split("@"),pe=Q.dashboardViewHref.split("@"),me=Q.dashboardViewTargetLocation.split("@"),fe=Q.dashboardViewLabel.split("@");for(f+="<td class={0} taskAction".format(ie)+" >",h=0;h<ue.length;h++)f+="<span amdhref='"+pe[h]+"' targetlocation='"+me[h]+"' title='"+fe[h]+"'  viewObjectId='"+Q.viewObjectId+"' viewClick='true' class='"+ue[h]+"' options='"+JSON.stringify(s)+"'>",ue[h]&&ue[h].indexOf("http")>=0&&(f+="<img src='"+ue[h]+"' ></img>"),f+="</span>";f+="</td>"}else f+="<td class={0}>".format(ie)+ee+"</td>",f+="<td class={0}>".format(ie)+e.getNonNullValue(Q.viewHref)+"</td>";f+="<td class={0}>".format(ie)+p.getOwnerImageDiv(V[P].ownerImageURL,Q.title,V[P].ownerEmailId,V[P].ownerImageTooltip)+"<div class='owner-name'>"+e.getNonNullValue(V[P].owner)+"</div></td>",i.showRoleColumn&&"true"===i.showRoleColumn&&(f+="<td class={0}>".format(ie)+e.getNonNullValue(Q.role)+"</td>"),f+=" </tr>"}}}else{B+=" tablebannercomplete",H+=" tasktablecomplete",f=p.getAccordianTasksDiv(),f+='<div id=taskTableBanner class="'+B+'">',f+='<p class="alignleft m-all-0">'+v+". "+k+"</p>",f+='<div class="alignright">',f+='<div class="'+X+'"></div>';var he=d.PS_Step+" {0} "+d.PS_of+" {1}";f+='<p class="m-all-0 left p-l-half p-r-half">'+(he=he.format(v,y))+" </p>",f+='<div class="'+J+'"></div>',f+="</div>",f+="</div>",f+='<table id=taskTable class="'+H+'">',f+=b}if(f+="</table>",f+="</div>",f+="</div>",f+="</div>",f+="</div>",l("#accordianTasks").html(f),r){var ge=new UWA.Element("div",{styles:{height:"100%",width:"99.9%"}});ge.setAttributes({id:"divForProcessSteps"});var ve=p.getReferencetableDiv();ge.addContent(ve),ge.addContent(f),ge.inject(r)}return p.checkOverflow(!0),p.attachEventHandlers(r,s),l(".loading").remove(),f}},function(e,t){console.log("onFailureCallback:errDetailds:"+e)},i)},attachEventHandlers:function(e,t){l(".collapseSummaryDown").click(function(){return l(".summary").toggleClass("showSummary"),l(".collapseSummaryDown").toggleClass("fonticon-chevron-up fonticon-chevron-down"),!1}),l(".graph").mouseover(function(){p.highlightStep(l(this))}),l(".graph").mouseout(function(){p.unhighlightStep(l(this))}),l(".graph").click(function(){p.loadTasksForStep(l(this),e,t)}),l("#go-right").click(function(){p.slideOnX("right")}),l("#go-left").click(function(){p.slideOnX("left")}),l(window).resize(function(){p.checkOverflow("true")}),p.attachTaskTableEventHandlers(t.myAppsURL,t.proxy,t.tenant,t.securityContext,e,t)},attachTaskTableEventHandlers:function(t,n,o,a,i,s){var r,c=l(".callout-link").attr("objectid");l(".pointleft").click(function(){p.loadPrevStep(t,n,o,a,i,s)}),l(".pointright").click(function(){p.loadNextStep(t,n,o,a,i,s)});l(".infoPop").hover(function(){return r=setTimeout(function(){p.showCallout()},500),!1},function(){return clearTimeout(r),!1}),l(".wux-ui-3ds-comment").hover(function(e){return r=setTimeout(function(){p.showCalloutComments(e.target.getAttribute("data-callout-id"))},500),!1},function(){return clearTimeout(r),!1}),l(".wux-ui-3ds-text-note").hover(function(e){return r=setTimeout(function(){p.showCalloutInstructions(e.target.getAttribute("data-callout-instructions"))},500),!1},function(){return clearTimeout(r),!1}),l(".boxclose").click(function(){return p.hideCallout(),!1}),l(".boxcloseComments").click(function(e){return p.hideCalloutComments(e.target.parentElement.id),!1}),l(".callout-link").click(function(){return e.openViewPage(c),!1}),l(".launcherradiobtn").click(function(){p.updateHrefTag(this,l(".launcherradiobtn").attr("submitLabel"))}),l(".left.pointer.launcherbtn").click(function(){p.hideLauncher()}),l(".proslauncherMenu").click(function(){p.showLauncher(this.name)}),l(".dashboardLauncherAction").click(function(e){u.executeTaskAction(e)}),l(".accepttask").click(function(){e.acceptTask(l("[title=Promote]").attr("accepturl"))}),l("[href*='executeOperation']").click(function(){e.executeOperation(this.attributes.objectid.value,"promote","true")}),l(".referencedocument").on("drop",function(){var t=document.getElementById("divDrag10,1");t.className="dropProgressColumn",e.FileDropSelectHandlerColumn(event,l(".dropAreaColumn").attr("objectid"),"formDrag10,1","divDrag10,1","id[level1]=1,1.expandRow","0,0","null","Quality System Document","","","","","DOCUMENTS","isValidDnDOperation"),t.className="dropAreaColumn"}),l(".checkinfile").on("drop",function(){var t=document.getElementById("divDrag00,0");t.className="dropProgressColumn",e.FileDropSelectHandlerColumn(event,l(".dropAreaColumn").attr("objectid"),"formDrag00,0","divDrag00,0","id[level1]=1,1.expandRow","0,0","null","Quality System Document","","","","","DOCUMENTS","isValidDnDOperation"),t.className="dropAreaColumn"}),l(".checkinfile").on("dragleave",function(){e.onDragLeaveFile(event,"divDrag00,0")}),l("[actionClick='true']").click(function(e){u.executeTaskAction(e)}),l("[viewClick='true']").click(function(e){u.executeViewAction(e)})},loadTaskCompleteCallback:function(e,t,n,o,a){},checkOverflow:function(e){var t=document.getElementsByClassName("slider")[0];if(t){var n=t.style.overflow;n&&"visible"!==n||(t.style.overflow="hidden");var o=t.clientWidth<t.scrollWidth;t.style.overflow=n;var a=l("div.slider").position(),i=l("div.carousel").position();if(!o){var s=l("div.slider").width(),r=l("div.carousel").width();a.left!=parseInt(i.left)-4?o=!0:s>r&&(o=!0)}if(o?(l("#go-left").css("visibility","visible"),l("#go-right").css("visibility","visible")):(l("#go-left").css("visibility","hidden"),l("#go-right").css("visibility","hidden")),e){var c,d=l("div.loaded").outerWidth(!0),u=d*l("div.loaded").attr("stepnumber"),m=(l("div.loaded").offset(),l("div.slider")),f=p.getTranslatedX(m),h=0,g=f+u-d;g<parseInt(i.left)?c=f+(h=parseInt(i.left)-g):(h=f+u-t.clientWidth)>0&&(c=f-h),void 0!==c&&c!==f&&h>4&&p.doTranslateX(m,c)}}},loadNextStep:function(e,t,n,o,a,i){var s=l(".loaded").attr("stepnumber"),r=parseInt(s,10)+1,c=l("div[stepnumber='"+r+"']");p.loadTasksForStep(c,a,i),p.checkOverflow(!0)},loadPrevStep:function(e,t,n,o,a,i){var s=l(".loaded").attr("stepnumber"),r=parseInt(s,10)-1,c=l("div[stepnumber='"+r+"']");p.loadTasksForStep(c,a,i),p.checkOverflow(!0)},getSelectionColor:function(e){var t=l(e).css("background-color");return-1!=l.inArray(t,["rgb(86, 189, 234)","#56bdea"])?"#005685":-1!=l.inArray(t,["rgb(53, 209, 115)","#35d173"])?"#6e821e":-1!=l.inArray(t,["rgb(255, 148, 77)","#ff944d"])?"#cd0200":"#b8b8b8"},getHeaderHTML:function(e){var t='<thead class="fw-bold"><tr><th width="2%"></th><th>'+d.PS_Activities+"</th><th>"+d.PS_ActivityType+"</th>";return t+="<th>"+d.PS_Actions+"</th><th>"+d.PS_RelatedData+"</th>",t+="<th>"+d.PS_Owner+"</th>",e.showRoleColumn&&"true"===e.showRoleColumn&&(t+="<th>"+d.PS_Role+"</th>"),t+="</tr></thead>"},getDefaultLoadedStepNumber:function(e,t){for(var n="",o=0;o<t.length;o++){var a=new e.ProcessStep(t[o]),i=(a.sequenceNumber,a.title,a.titleImage,a.description,a.objectIds,a.stepXMLStateSymName,a.isActiveStep);a.isElapsedStep,a.stepXMLPolicySymName;if("true"==i){n=o+1;break}}return""===n&&(n=t.length),n},getCurrentLoadedStepNumber:function(){return l(".loaded").attr("stepnumber")},getAccordianTasksDiv:function(){return"<div>",'<div class="tableborder">','<div id="accordianTasks" style="display: table;width: 100%;"><div><div class="tableborder">'},getCarouselDiv:function(){return'<div id="carousel" class="carousel" style="overflow: hidden;"><div id="go-left" class="sliderarrows prev"></div><div class="slider"><div class="content">'},getReferencetableDiv:function(){return'<div id="ReferenceView" >'},loadTasksForStep:function(t,o,a){t.is("span")&&(t=t.parent());var i=t.attr("sequence"),s=t.attr("objectid"),r=t.attr("policy"),c=t.attr("state"),u=t.attr("selectedAffectedItems"),m=(t.attr("type"),a.myAppsURL+"/resources/processSteps/ProcessStepsService/getProcessTasksData"),f=p.getInputDataJSON(s,u,i,r,c,a);e.makeWSCall(m,a,f,function(t,o,i,s){l("div.graph").css("box-shadow","none"),l("div.graph").css("color","white"),l("div.graph").removeClass("activegraphring"),l("div.graph").removeClass("completegraphring"),l("div.graph").removeClass("futuregraphring"),l("div.graph").removeClass("loaded"),l("div.graph").css("font-size","medium");var r=p.getSelectionColor(s);s.css("color",r),s.css("box-shadow","inset 0 0 0 3px "+r),s.addClass("loaded");s.attr("sequence"),s.attr("objectid"),s.attr("policy"),s.attr("state"),s.attr("selectedAffectedItems"),s.attr("type");for(var c=t.data,u=JSON.parse(c),m=p.getHeaderHTML(o),f=s.attr("stepnumber"),h=s.attr("step"),g=s.attr("totalnumsteps"),v=s.attr("isactive"),S=s.attr("iselapsed"),b=s.attr("isstopped"),y=s.attr("isfuture"),C=[],P=[],w=!0,k=(o.myAppsURL,0);k<u.length;k++)for(var T=u[k].ProcessTasks,D=0;D<T.length;D++){var I=new n.ProcessTask(T[D]);if(!I.ignore){var O=e.getStatusIcon(I,v,S),A=I.title,E=I.formattedDueDate,x=I.formattedDueDateClass,N=e.getTitleTag(A,x,E),_="";_=I.actionLauncher?p.getLauncherDiv(I.actionLauncher):I.actionHref,I.dependeeType,I.actionLauncher,"Mandatory"!==I.taskType&&"Dependency"!==I.taskType||"OK"===I.status||(P.push(I),1==w&&(w=!1));var L=null;I.dependeeType&&"all"===I.dependeeType?(L=[]).push.apply(L,P):I.dependeeTasks&&(L=I.dependeeTasks);var U=p.getCallout(I,L,C,v,S,y),R=!(!U&&!0!==I.parentCalloutFlag);null!=I.comment&&(R=!1),_=p.getTaskAction(I,U),!0!==I.calloutFlag&&!0!==I.parentCalloutFlag||C.push(I.sequenceNumber),O=e.getStatusIcon(I,v,S,R),E=I.formattedDueDate,x=I.formattedDueDateClass,N=e.getTitleTag(I.title,x,E);var j=R||"true"===y||"NA"===I.status||"hold"===I.status?"enoprocstpes-disabled":"";m+="<tr>",m+='<td width="2%" class={0}>'.format(j)+O+"</td>",m+="<td><span class={0}>".format(j)+N+"</span><span class='callout-holder'>{0}</span></td>".format(U);var W=I.taskType;if(W="Mandatory"==W||"routetask"==W?d.PS_Mandatory:"Optional"==W?d.PS_Optional:d.PS_Dependency,m+="<td class={0}>".format(j)+e.getNonNullValue(W)+"</td>",e.isWidget()){if(I.actionLauncher)_=p.getLauncherDiv(I.actionLauncher,I.dashboardActionLabel),m+="<td class={0} taskAction".format(j)+" >",m+="<div > "+_+" </div>",m+="</td>";else{var F=I.dashboardActionImage.split("@"),M=I.dashboardActionHref.split("@"),B=I.dashboardActionTargetLocation.split("@"),H=I.dashboardActionLabel.split("@");for(I.dashboardViewImage,m+="<td class={0} taskAction".format(j)+" >",k=0;k<F.length;k++)m+="<div amdhref='"+M[k]+"' targetlocation='"+B[k]+"' title='"+H[k]+"'  actionobjectId='"+I.actionObjectId+"' actionClick='true' class='"+F[k]+"' actionTargetState='"+I.targetState+"'  options='"+JSON.stringify(a)+"' > </div>";m+="</td>"}var X=I.dashboardViewImage.split("@"),J=I.dashboardViewHref.split("@"),V=I.dashboardViewTargetLocation.split("@"),q=I.dashboardViewLabel.split("@");for(m+="<td class={0} taskAction".format(j)+" >",k=0;k<X.length;k++)m+="<div amdhref='"+J[k]+"' targetlocation='"+V[k]+"' title='"+q[k]+"'  viewObjectId='"+I.viewObjectId+"' viewClick='true' class='"+X[k]+"' > </div>";m+="</td>"}else m+="<td class={0}>".format(j)+_+"</td>",m+="<td class={0}>".format(j)+e.getNonNullValue(I.viewHref)+"</td>";m+="<td class={0}>".format(j)+p.getOwnerImageDiv(I.ownerImageURL,I.title,I.ownerEmailId,I.ownerImageTooltip)+"<div class='owner-name'>"+e.getNonNullValue(I.owner)+"</div></td>",o.showRoleColumn&&"true"===o.showRoleColumn&&(m+="<td class={0}>".format(j)+e.getNonNullValue(I.role)+"</td>"),m+=" </tr>"}}var K=p.getTableBannerContent(f,h,g,v,S,b);l("#taskTableBanner")[0].outerHTML=K,l("#taskTable").html(m);var z=s.attr("class");-1!=z.indexOf("active")?(l("#taskTableBanner").attr("class","tablebanner tablebanneractive"),l("#taskTable").attr("class","tasktable tasktableactive")):-1!=z.indexOf("stopped")?(l("#taskTableBanner").attr("class","tablebanner tablebannerstopped"),l("#taskTable").attr("class","tasktable tasktablestopped")):-1!=z.indexOf("complete")?(l("#taskTable").attr("class","tasktable tasktablecomplete"),l("#taskTableBanner").attr("class","tablebanner tablebannercomplete")):(l("#taskTable").attr("class","tasktable tasktablefuture"),l("#taskTableBanner").attr("class","tablebanner tablebannerfuture")),p.attachTaskTableEventHandlers(o.myAppsURL,o.proxy,o.tenant,o.securityContext,i,a)},function(e,t){console.log("loadTaskFailureCallback:errDetailds:"+e)},o,t)},getInputDataJSON:function(e,t,n,o,a,i){var s={};return s.objectId=e,s.selectedAffectedItems=t,s.myAppsURL=i.myAppsURL,s.proxy=i.proxy,s.tenant=i.tenant,s.securityContext=i.securityContext,s.inputSequence=n,s.inputStepPolicy=o,s.inputStepState=a,s.widgetui="true",s.MCSURL=i.myAppsURL,s.page="",null!=i&&i.page&&(s.page=i.page),s.showRoleColumn=!0,i.showRoleColumn&&(s.showRoleColumn=i.showRoleColumn),i.callback&&(s.callback=i.callback),JSON.stringify(s)},getTableBannerContent:function(e,t,n,o,a,i){var s="",r="tablebanner",l="pointleft",c="pointright";"true"==o?(r+=" tablebanneractive","true"==i&&(r+=" tablebannerstopped")):r+="true"==a?" tablebannercomplete":" tablebannerfuture","1"==e?l="":e==n&&(c=""),s+='<div id=taskTableBanner class="{0}">'.format(r),s+='<p class="alignleft m-all-0">{0}. {1}</p>'.format(e,t),s+='<div class="alignright">',s+='<div class="{0}"></div>'.format(l);var u=d.PS_Step+" {0} "+d.PS_of+" {1}";return s+='<p class="m-all-0 left p-l-half p-r-half">'+(u=u.format(e,n))+"</p>",s+='<div class="{0}"></div>'.format(c),s+="</div>",s+="</div>"},getLauncherDiv:function(t,n){return e.isWidget()?p.getLauncherDivForDashboard(t,n):p.getLauncherDivForSpace(t)},getLauncherDivForSpace:function(e){for(var t="",n=JSON.parse(e),o=n.closelabel,a=n.submitlabel,i=0;i<n.launchers.length;i++){var s=n.launchers[i];t+='<a  class="proslauncherMenu" class="left" name=\'{0}\'  title=\'{1}\'><img src=\'{2}\' width="23px" height="23px"/></a>'.format(s.name,s.label,s.image),t+='<div id="{0}" class="prosactionlauncher left m-l-1">'.format(s.name);for(var r="",l=0;l<n.launchers[i].inputs.length;++l){var c=n.launchers[i].inputs[l],d="";0===l&&(d="checked",r=c),t+='<input class="left launcherradiobtn" type="radio" name="{0}" id="{1}" value="{2}" submitLabel="{3}" onclick="updateHrefTag(this, \'{3}\')" data-href="{4}" data-target="{5}" data-title="{6}" data-label="{7}" {8}>'.format(s.name,s.name,c.name,a,encodeURI(c.href),c.target,c.label,c.label,d),t+='<label class="left" for="{0}"><img width="23px" height="23px" class="left" src="{1}" title="{2}"/></label>'.format(c.name,c.image,c.label)}t+=p.buildHrefTag(r.href,s.name,r.target,r.label,"","left pointer launcherbtn launchersubmitbtn",a),t+='<button onclick="hideLauncher();return false;" title="{0}" class="left pointer launcherbtn"></button>'.format(o),t+="</div>"}return t},getLauncherDivForDashboard:function(e,t){var n="",o=JSON.parse(e),a=o.closelabel,i=o.submitlabel;if(o=o.dashboardLaunchers)for(var s=0;s<o.length;s++){var r=o[s];n+="<a  class=\"proslauncherMenu\" class=\"left\" name='{0}'  title='{1}'><span class='{2}'/></a>".format(r.name,r.label,r.image),n+='<div id="{0}" class="prosactionlauncher left m-l-1">'.format(r.name);for(var l="",c=0;c<o[s].inputs.length;++c){var d=o[s].inputs[c],u="";0===c&&(u="checked",l=d),n+='<input checked class="left launcherradiobtn" type="radio" name="{0}" id="{1}" value="{2}" submitLabel="{3}" onclick="updateHrefTag(this, \'{3}\')" data-href="{4}" data-target="{5}" data-title="{6}" data-label="{7}" {8}>'.format("create1","Craete2","Crete3","create",encodeURI(d.href),d.target,"c1","c2",u),n+='<label class="left" for="{0}"><span   class="left {1}"  title="{2}"/></label>'.format(d.label,d.image,d.label)}n+=p.buildHrefTag(l.href,r.name,l.target,t,"","left pointer launcherbtn launchersubmitbtn",i),n+='<button onclick="hideLauncher();return false;" title="{0}" class="left pointer launcherbtn"></button>'.format(a),n+="</div>"}return n},buildHrefTag:function(t,n,o,a,i,s,r){return n+="proslauncher",e.isWidget()?""===o||"content"===o||"popup"===o?"<button href='"+t+"' targetlocation='"+o+"'  title='"+a+"' actionobjectId='"+n+"' class='dashboardLauncherAction  {0}'  >{1}</button>".format(s,""):"slidein"!==o?"<button  href='"+t+"' targetlocation='"+o+"'  title='"+a+"' actionobjectId='"+n+"' class='dashboardLauncherAction  {0}' >{1}</button>".format(s,""):"<button href='"+t+"' targetlocation='"+o+"'  title='"+a+"' actionobjectId='"+n+"'  class='dashboardLauncherAction  {0}'   >{1}</button>".format(s,""):""===o||"content"===o||"popup"===o?"<button onclick=\"showNonModalDialog('{0}', '930', '650', 'true')\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(t,n,r,s,i):"listHidden"==o?"<button onclick=\"javascript:submitWithCSRF('{0}', findFrame(getTopWindow(),'listHidden'));hideLauncher();return false;\" id='{1}' title='{2}' target='{3}' class='{4}'>{5}</button>".format(t+="&frameName=detailsDisplay",n,r,o,s,i):"slidein"!==o?"<button onclick=\"{0};hideLauncher();return false;\" id='{1}' title='{2}' target='{3}' class='{4}'>{5}</button>".format(t,n,r,o,s,i):"<button onclick=\"getTopWindow().showSlideInDialog('{0}', 'true');hideLauncher();return true;\" id='{1}' title='{2}' class='{3}' onclick='hideLauncher();return true;'>{4}</button>".format(t,n,r,s,i)},updateHrefTag:function(e,t){var n=l("#"+e.id+"proslauncher"),o=e.id,a=e.dataset.href,i=e.dataset.title,s=(e.dataset.label,e.dataset.target),r=p.buildHrefTag(a,o,s,i,"","left pointer launcherbtn launchersubmitbtn",t);n.replaceWith(r)},hideLauncher:function(){l(".prosactionlauncher").hide(),l(".proslauncherMenu").show()},showLauncher:function(e){l(".prosactionlauncher").hide(),l(".proslauncherMenu").hide(),l("#"+e+".prosactionlauncher").fadeIn(1e3)},highlightStep:function(e){if(e.is("span")&&(e=e.parent()),-1==e.attr("class").indexOf("loaded")){var t=p.getSelectionColor(e);e.css("color",t),e.css("box-shadow","inset 0 0 0 3px "+t+", 0 0 1em "+t)}},unhighlightStep:function(e){e.is("span")&&(e=e.parent()),-1==e.attr("class").indexOf("loaded")&&(e.css("color","white"),e.css("box-shadow","none"))},slideRight:function(){l(".slider").removeClass("move-left move-right"),l(".slider").addClass("move-right")},slideLeft:function(){l(".slider").removeClass("move-left move-right"),l(".slider").addClass("move-left")},slideOnX:function(e){var t=l("div.slider"),n=p.getTranslatedX(t),o=n;o="left"===e?n+200:n-200,p.doTranslateX(t,o),p.checkOverflow(!1)},doTranslateX:function(e,t){var n=t+"px";e.css("transform","translateX("+n+")"),e.css("-webkit-transform","translateX("+n+")"),e.css("-moz-transform","translateX("+n+")")},getTranslatedX:function(e){var t=e.css("transform")||e.css("-webkit-transform")||e.css("-moz-transform");if("none"==t)return 0;var n=t.replace(/[^0-9\-.,]/g,"").split(","),o=n[12]||n[4];return parseInt(o)},getTaskAction:function(t){return t.actionLauncher?p.getLauncherDiv(t.actionLauncher):e.getNonNullValue(t.actionHref)},getCallout:function(t,n,o,a,i,s){var r="";(e.isWidget()&&widget.myApps3DSpaceURL,null!=t.comment&&""!=t.comment)&&(r+=u='<a href="#bottom" class="balloon"><div data-callout-id="callout'+t.sequenceNumber+'" class="fonticon wux-ui-3ds-comment"></div><div   id="callout'+t.sequenceNumber+'" class="hidden-balloon"><a href="#" class="boxcloseComments"></a><div class="calloutContent"><ul class="plain-ul">',r+="<li><strong>"+d.PS_Comments+"</strong></li>",r+="</br>",r+="<li>"+t.comment+"</li>",null!=t.reviewerComment&&""!=t.reviewerComment&&(r+="</br>",r+="<li><strong>Reviewer Comment</strong></li>",r+="</br>",r+="<li>"+t.reviewerComment+"</li>"),r+="</ul></div></div></a>");if("true"!=s&&n){var l=!0,c=t.externalProcessPage?t.calloutHeader+" on "+e.getObjectHref(t.calloutLinkId,t.calloutLinkLabel):t.calloutHeader,u='<a href="#bottom" class="balloon"><div class="fonticon fonticon-info infoPop"></div><div id="callout" class="hidden-balloon"><a href="#" class="boxclose"></a><div class="calloutContent"><ul class="plain-ul">';if(t.dependeeType&&"all"===t.dependeeType)for(var m=0;m<n.length;m++)if(o.length>0&&-1!=o.indexOf(n[m].sequenceNumber))return t.parentCalloutFlag=!0,"";var f=[];for(m=0;m<n.length;m++){n[m].title&&n[m].title!==t.title&&n[m].status&&"OK"!==n[m].status&&l&&(o.length>0&&-1!=o.indexOf(n[m].sequenceNumber)?t.parentCalloutFlag=!0:(l=!1,r+=u));var h=n[m].routeTasks;if(h&&!1===t.parentCalloutFlag)for(var g=0;g<h.length;g++)h[g].status&&"WIP"===h[g].status&&(l&&(r+=u,l=!1),(f.length<=0||!f.includes(h[g].actionObjectId+"|"+h[g].title))&&(r+="<li>{0}</li>".format(e.getStatusIcon(h[g],a,i)+"<div class='balloon-task'>"+h[g].title+"</div>"),p.setProcessedTasks(h[g].actionObjectId,h[g].title,f)));else n[m]&&"OK"!==n[m].status&&n[m].title!==t.title&&!1===t.parentCalloutFlag&&(r+="<li><strong>{0}</strong></li>".format(c),r+="<br>",null!=n[m].stepTitle&&t.externalProcessPage&&(r+="<li>{0}</li>".format("Step : "+n[m].stepTitle)),(f.length<=0||!f.includes(n[m].actionObjectId+"|"+n[m].title))&&(r+="<li>{0}</li>".format(e.getStatusIcon(n[m],a,i)+"<div class='balloon-task'>"+p.text_truncate(n[m].title,"100")+"</div>"),p.setProcessedTasks(n[m].actionObjectId,n[m].title,f)))}l||(r+="</ul></div></div></a>",t.calloutFlag=!0)}if(null!=t.instructions&&""!=t.instructions){r+='<a href="#instructions" class="balloon"><div data-callout-instructions="callout_instructions'+t.sequenceNumber+'" class="fonticon wux-ui-3ds-text-note"></div><div  id="callout_instructions'+t.sequenceNumber+'"class="hidden-balloon"><a href="#" class="boxcloseComments"></a><div class="calloutContent"><ul class="plain-ul">',r+="<li><strong>Instructions</strong></li>",r+="</br>",r+="<li>"+t.instructions+"</li>",r+="</ul></div>",r+="</a>"}return r},showCallout:function(){document.getElementById("callout").classList.remove("hidden-balloon"),document.getElementById("callout").classList.add("visible-balloon")},hideCallout:function(){document.getElementById("callout").classList.remove("visible-balloon"),document.getElementById("callout").classList.add("hidden-balloon")},showCalloutComments:function(e){document.getElementById(e).classList.remove("hidden-balloon"),document.getElementById(e).classList.add("visible-balloon")},showCalloutInstructions:function(e){document.getElementById(e).classList.remove("hidden-balloon"),document.getElementById(e).classList.add("visible-balloon")},hideCalloutComments:function(e){document.getElementById(e).classList.remove("visible-balloon"),document.getElementById(e).classList.add("hidden-balloon")},getOwnerImageDiv:function(e,t,n,o){var a="<div";return a+=e?' class="person-image" style="background-image: url("{0}");"'.format(encodeURI(e)):' class="person-solid icon"',n&&(a+=" onclick=\"location.href='mailTo:{0}?subject={1}'\"".format(n,encodeURI(t)),e||(a+=' style="cursor:pointer"')),o&&(a+=' title="{0}"'.format(o)),a+="></div>",e||(a+="&nbsp;&nbsp;&nbsp;&nbsp;"),a},text_truncate:function(e,t,n){return null==t&&(t=150),null==n&&(n="..."),e.length>t?e.substring(0,t-n.length)+n:e},setProcessedTasks:function(e,t,n){null!=e&&""!=e&&"undefined"!=e&&n.push(e+"|"+t)}};return p}),define("DS/ENOProcessStepsUX/scripts/ProcessStepsView",["UWA/Class/View","UWA/Core","UWA/Promise","DS/ENOProcessStepsUX/scripts/ProcessSteps","DS/ENOProcessStepsUX/scripts/Settings","DS/UIKIT/Scroller"],function(e,t,n,o,a,i){"use strict";var s=function(){this._name="ProcessStepsView"};return s.prototype._createView_ProcessSteps=function(e){new n(function(e,t){a.loadPlatformServices(e)}).then(function(t){var n=e.id||e.objectId;n||(n=e.data.id);var s=e.myAppsURL?e.myAppsURL:a.getPlatformURLs().get3DSpaceURL(),r=e.tenant?e.tenant:a.getPlatformURLs().getTenantId(),l=e.securityContext?e.securityContext:a.getSetting("pad_security_ctx"),c=e.renderTo;!function(e){var t=document.createElement("div");t.classList.add("loading");for(var n=0;n<4;n++){var o=document.createElement("div");o.classList.add("loading-bar"),t.appendChild(o)}var a=document.createElement("span"),i=document.createTextNode("Loading...");a.appendChild(i),t.appendChild(a),e.appendChild(t)}(c),a.addSetting("data",e),a.addSetting("myApps3DSpaceURL",s),e.myAppsURL=s,e.tenant=r,e.securityContext=l,e.proxy="passport";var d=new UWA.Element("div",{id:"processStepsView",styles:{height:"100%"}}),u=new UWA.Element("div",{id:"ReferenceView"}),p=new UWA.Element("div",{id:"TableView"});o.loadReferenceView(n,"",u,e),o.loadProcessSteps(n,"",p,e),d.appendChild(u),d.appendChild(p),new i({element:d}).inject(c),c.appendChild(d)})},s.prototype.refresh=function(){var e=a.getSetting("options");e.renderTo.innerHTML="",(new s)._createView_ProcessSteps(e)},s}),define("DS/ENOProcessStepsUX/scripts/ECMProposedChangeView",["css!DS/ENOProcessStepsUX/ENOProcessStepsUX","DS/ENOProcessStepsUX/scripts/ProcessStepsUtil","DS/UIKIT/Accordion","DS/ENOFrameworkPlugins/jQuery","DS/ENOProcessStepsUX/scripts/ProcessSteps","i18n!DS/ENOProcessStepsUX/assets/nls/ProcessSteps","UWA/Controls/Input"],function(e,t,n,o,a,i,s){"use strict";return{_loadDocumentFiles:function(e){var s=e,r=s.renderTo,l=new UWA.Element("div",{styles:{height:"10%",width:"99.9%"}});l.setAttributes({id:"divForReferenceView"});var c="",d=s.myAppsURL+"/resources/ecmProcessSteps/ECMProcessStepsService/getProposedChangesData",u=s.myAppsURL+"/resources/ecmProcessSteps/ECMProcessStepsService/getRealizedChangesData",p=function(e,t,o,a){for(var s=e.data,r=JSON.parse(s),d=new UWA.Element("table",{styles:{width:"100%",cursor:"default"}}),u=!0,p="",m=["",i.PS_Title,i.PS_Type,i.PS_Name,i.PS_State,i.PS_Revision,i.PS_Actions,i.PS_ChangeInformation],h=document.createElement("tbody"),g=document.createElement("tr"),v=0;v<m.length;v++){var S=document.createElement("td");S.style.height="1px",S.style.border="0 solid #fff",S.style.borderLeftWidth="1px",S.style.borderBottomWidth="1px",S.style.padding="5px 8px 5px 8px";var b=document.createElement("div");b.style.top="0px",S.appendChild(b);var y=document.createTextNode(m[v]);b.appendChild(y),g.appendChild(S)}g.style.backgroundColor="#e2e4e3",g.style.fontWeight="bold",h.appendChild(g);for(v=0;v<r.length;v++){var C=r[v].ProposedItems,P=r[v].RealizedItems,w="";C?(u=!0,p=i.PS_ProposedChanges,w=C):P&&(u=!1,p=i.PS_RealizedChanges,w=P);r[v].selectedproposeditems;for(var k=0;k<w.length;k++){c=[w[k].title,w[k].type,w[k].name,w[k].current,w[k].revision,w[k].action,w[k].changeInfo];var T=document.createElement("tr");T.style.backgroundColor="#f4f5f6";var D=document.createElement("td");if(w.length>0){D.style.height="1px",D.style.border="0 solid #fff",D.style.borderLeftWidth="1px",D.style.borderBottomWidth="1px",D.style.padding="5px 8px 5px 8px",(O=document.createElement("div")).style.top="0px",D.appendChild(O);new UWA.Controls.Input.Checkbox({value:w[k].id,displayData:!0,id:w[k].id,events:{onClick:function(){f()}}}).inject(O);T.appendChild(D)}for(var I=0;I<c.length;I++){var O;(D=document.createElement("td")).style.height="1px",D.style.border="0 solid #fff",D.style.borderLeftWidth="1px",D.style.borderBottomWidth="1px",D.style.padding="5px 8px 5px 8px",(O=document.createElement("div")).style.top="0px",D.appendChild(O),O.innerHTML=c[I],T.appendChild(D)}h.appendChild(T)}}if(d.addContent(h),u||0!=w.length){new n({className:"filled",items:[{title:p,content:d,selected:!0}],events:{onOpen:function(e){null!=document.getElementById(e.id)&&(document.getElementById(e.id).getElementsByClassName("content-wrapper")[0].style.display="block")},onClose:function(e){null!=document.getElementById(e.id)&&(document.getElementById(e.id).getElementsByClassName("content-wrapper")[0].style.display="none")}}}).inject(l);var A=document.getElementsByClassName("accordion-item active");A.length>1&&(A[0].className="accordion-item")}o.appendChild(l)},m=function(e,t){console.log("onFailureCallback:errDetailds:"+e)},f=function(){var t="",n=o("input:checked"),i=e;i=i.objectId,n.each(function(e){t+=o(this).attr("value"),e<n.length-1&&(t+="|")});s.myAppsURL;document.getElementById("accordianTasks").innerHTML="",a.loadProcessSteps(i,t,"",e)};t.makeWSCall(d,s,JSON.stringify(e),p,m,r,!1),t.makeWSCall(u,s,JSON.stringify(e),p,m,r,!1)}}});