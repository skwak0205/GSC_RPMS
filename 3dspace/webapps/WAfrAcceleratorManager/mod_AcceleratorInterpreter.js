define("DS/WAfrAcceleratorManager/mod_AcceleratorInterpreter",["DS/WAfrAcceleratorManager/mod_AcceleratorManagementComponent","DS/WAfrUtils/Logger"],function(e,a){"use strict";var r={};function c(){this.componentName=e.DEFAULT_COMPONENT_NAME}c.prototype.interpret=function(a,r,c){var t=e.DEFAULT_COMPONENT_NAME;if(c&&c.componentId&&(t=c.componentId),this._executionContext=r,this._acceleratorComponent=r.getComponent(t),a){if(a.handlers){var o=a.handlers;if(o&&o.default){var n=o.default;this.interpretDefaultHandler(n)}if(o&&o.check){var i=o.check;this.interpretCheckHandler(i)}}if(a.radioGroup){var l=a.radioGroup;this.interpretRadioHandler(l)}}},c.prototype.interpretDefaultHandler=function(e){for(var r=0;r<e.length;r++){var c="";if(e[r].accelerator&&e[r].accelerator.keyboard&&(c=e[r].accelerator.keyboard),c){var t=this.checkModifierKeysSequence(c);this._acceleratorComponent.allAcceleratorMap[t]?a.log("Command/action ",e[r].identifier," cannot get registered against accelerator ",c,"as it is already used by some another command/action"):(this._acceleratorComponent.addAcceleratorToDefaultMap(t,e[r].identifier),this._acceleratorComponent.allAcceleratorMap[t]=e[r].identifier)}}},c.prototype.interpretCheckHandler=function(e){for(var r=0;r<e.length;r++){var c=e[r].identifier,t={};if(e[r].accelerator&&e[r].accelerator.keyboard){var o=this.checkModifierKeysSequence(e[r].accelerator.keyboard);o&&(this._acceleratorComponent.allAcceleratorMap[o]?a.log("Command/action ",c," cannot get registered against accelerator ",o," as it is already used by some another command/action"):(t.accelerator=o,this._acceleratorComponent.addAcceleratorToCheckMap(c,t),this._acceleratorComponent.allAcceleratorMap[o]=c))}else{var n="",i="";e[r].check&&e[r].check.accelerator&&e[r].check.accelerator.keyboard&&(n=e[r].check.accelerator.keyboard,n=this.checkModifierKeysSequence(n)),e[r].uncheck&&e[r].uncheck.accelerator&&e[r].uncheck.accelerator.keyboard&&(i=e[r].uncheck.accelerator.keyboard,i=this.checkModifierKeysSequence(i)),n&&(this._acceleratorComponent.allAcceleratorMap[n]?a.log("Command/action ",e[r].check.identifier," cannot get registered against accelerator ",n," as it is already used by some another command/action"):(t.check={},t.check[n]=e[r].check.identifier,this._acceleratorComponent.allAcceleratorMap[n]=e[r].check.identifier)),i&&(this._acceleratorComponent.allAcceleratorMap[i]?a.log("Command/action ",e[r].uncheck.identifier," cannot get registered against accelerator ",i," as it is already used by some another command/action"):(t.uncheck={},t.uncheck[i]=e[r].uncheck.identifier,this._acceleratorComponent.allAcceleratorMap[i]=e[r].uncheck.identifier)),(n||i)&&this._acceleratorComponent.addAcceleratorToCheckMap(c,t)}}},c.prototype.interpretRadioHandler=function(e){for(var r in e)if(e.hasOwnProperty(r))for(var c=e[r],t=0;t<c.length;t++){for(var o=c[t].identifier,n={items:{}},i=c[t].items,l=0;l<i.length;l++){var d=i[l].identifier;if(n.items[d]={},i[l].accelerator&&i[l].accelerator.keyboard){var s=i[l].accelerator.keyboard,h=this.checkModifierKeysSequence(s);h&&(this._acceleratorComponent.allAcceleratorMap[h]?a.log("Command/action ",d," cannot get registered against accelerator ",h," as it is already used by some another command/action"):(n.items[d].accelerator=h,this._acceleratorComponent.allAcceleratorMap[h]=d))}else{var m,p;i[l].check&&i[l].check.accelerator&&i[l].check.accelerator.keyboard&&(m=i[l].check.accelerator.keyboard,m=this.checkModifierKeysSequence(m)),i[l].uncheck&&i[l].uncheck.accelerator&&i[l].uncheck.accelerator.keyboard&&(p=i[l].uncheck.accelerator.keyboard,p=this.checkModifierKeysSequence(p)),m&&(this._acceleratorComponent.allAcceleratorMap[m]?a.log("Command/action ",i[l].check.identifier," cannot get registered against accelerator ",m," as it is already used by some another command/action"):(n.items[d].check={},n.items[d].check[m]=i[l].check.identifier,this._acceleratorComponent.allAcceleratorMap[m]=i[l].check.identifier)),p&&(this._acceleratorComponent.allAcceleratorMap[p]?a.log("Command/action ",i[l].uncheck.identifier," cannot get registered against accelerator ",p," as it is already used by some another command/action"):(n.items[d].uncheck={},n.items[d].uncheck[p]=i[l].uncheck.identifier,this._acceleratorComponent.allAcceleratorMap[p]=i[l].uncheck.identifier))}}this._acceleratorComponent.addAcceleratorToRadioMap(o,n)}},c.prototype.checkModifierKeysSequence=function(e){var a,r="",c=e.split("+"),t=!1,o=!1,n=!1;for(var i of c)"ctrl"===(i=i.toLowerCase())?t=!0:"alt"===i?o=!0:"shift"===i?n=!0:a=i;return t&&(r+="Ctrl+"),o&&(r+="Alt+"),n&&(r+="Shift+"),(r+=a).toLowerCase()};var t=Object.create(null);return t.generateInterpreter=function(e){var a=c;return void 0!==r[e]&&(a=r[e]),new a},t});