define("DS/UIKIT/UIKIT",[],function(){}),define("DS/UIKIT/Toggler",["UWA/Core","UWA/Controls/Abstract"],function(e,t){"use strict";return t.extend({defaultOptions:{activeClass:"active",ignored:["disabled"],selected:0,type:"radio"},init:function(){var e=arguments[0].nodeType?{}:arguments[0];e.container||1!==arguments[0].nodeType||(e.container=arguments[0]),e.ignored&&-1===e.ignored.indexOf("disabled")&&e.ignored.push("disabled"),e.bind&&1!==e.bind.nodeType&&delete e.bind,this._parent(e),this.elements.container=this.options.container,delete this.options.container,delete e.container,this.handleEvents(),"radio"===this.options.type&&this.toggle(this.options.selected)},handleEvents:function(){var e,t,n=this;this.events={},this.events.container={click:function(i){if(i.target.parentElement!==n.elements.container)for(t=!0,e=i.target;(e=e.parentElement)&&t;)e.parentElement===n.elements.container&&(t=!1,n.toggle(e));else n.toggle(i.target)}},this.elements.container.addEventListener("click",this.events.container.click,!1)},toggle:function(){function e(e,t,n){"radio"===this.options.type?Array.prototype.forEach.call(e,function(e){e.classList[e===t?"add":"remove"](this.options.activeClass)},this):n?t.classList.add(this.options.activeClass):!1===n?t.classList.remove(this.options.activeClass):t.classList.toggle(this.options.activeClass)}return function(){var t,n,i,s=this.elements.container.children,o="number"==typeof arguments[0]?s[arguments[0]]:arguments[0],a=arguments[1];1===o.nodeType&&(o.classList.contains(this.options.activeClass)&&"radio"===this.options.type||this.options.ignored.some(function(e){return o.classList.contains(e)||function(e,t){return(e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector).call(e,t)}(o,e)})||(t=Array.prototype.indexOf.call(s,o),e.call(this,s,o,a),this.activeElements=Array.prototype.filter.call(s,function(e){return e.classList.contains(this.options.activeClass)},this),this.options.bind&&(i=(n=this.options.bind.children)[t])&&1===i.nodeType&&e.call(this,n,i,a),this.dispatchEvent("onToggle",[o,t,o.classList.contains(this.options.activeClass)])))}}(),getActiveElements:function(){return"radio"===this.options.type?this.activeElements[0]:this.activeElements},destroy:function(){this.elements.container.removeEventListener("click",this.events.container.click,!1),this.activeElements instanceof Array?this.activeElements.length=0:delete this.activeElements,delete this.elements.container}})}),define("DS/UIKIT/Dropdown",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Scroll","UWA/Controls/Abstract"],function(e,t,n,i,s){"use strict";function o(e,t,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n,i)}function a(e,t,n){Object.keys(e).forEach(function(i){o(i,t,e[i],n)})}function l(e,t,n,i){t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n,i)}var r={name:"dropdown",defaultOptions:{className:"",bound:!0,position:"bottom left",closeOnClick:!0,removeOnHide:!0,contextual:!1,offset:{x:0,y:0},attributes:{}},isVisible:!1,enabled:!0,init:function(t){this._parent(t),t=this.options,this.events={},this.events.document={click:function(e){var t=n.getElement(e);t.isInjected(this.elements.container)||t===this.elements.container||this.isClickInSibling(t)||!this.options.contextual&&this.options.target.contains(t)||(this.hide(),this.dispatchEvent("onClickOutside",[e]))}.bind(this)},t.target=e.is(t.target,"element")?e.extendElement(t.target):t.contextual?e.extendElement(document):null,t.bound=t.target&&t.bound||t.contextual,t.closeOnClick=!!t.contextual||t.closeOnClick,t.removeOnHide=!!t.contextual||t.removeOnHide,this.buildSkeleton()},getBody:function(){return this.elements.container},setBody:function(e){return this.elements.container&&this.elements.container.addContent(e),this},buildSkeleton:function(){var t=this.elements,n=this.options;t.container||(t.container=e.createElement("div",{class:this.name+" "+n.className,html:n.body}),Object.keys(this.options.attributes).forEach(function(e){t.container.setAttribute(e,n.attributes[e])}),this.handleEvents())},handleEvents:function(){var t=this.elements,i=this.options;t.container.addEvents({click:this.dispatchEvent.bind(this,"onClick"),mouseleave:this.dispatchEvent.bind(this,"onMouseLeave")}),i.contextual?(this.events.target={mousedown:function(t){var i=n.getElement(t),s=2===e.Event.whichButton(t);!i.isInjected(this.elements.container)&&i!==this.elements.container&&!this.isClickInSibling(i)&&s&&this.isVisible&&this.updatePosition(t)}.bind(this),contextmenu:function(e){this.show(!1,e),n.stop(e)}.bind(this)},a(this.events.target,i.target,!0)):i.bound&&(this.events.target={click:this.toggle.bind(this)},a(this.events.target,i.target,!0))},onClick:function(){!(arguments.length>2&&!!arguments[2])&&this.options.closeOnClick&&this.hide()},getDisplayContext:function(){var e={},t=this.options,n=document.documentElement;if(e.viewportWidth=n.clientWidth||window.innerWidth,e.viewportHeight=n.clientHeight||window.innerHeight,e.scrollTop=window.pageYOffset||document.body.scrollTop||n.scrollTop,t.renderTo&&t.renderTo!==document.body){var s=i.getClosestScrollable(t.target,"y");if(s){var o=s.getBoundingClientRect();e.scrollTop=s.scrollTop,e.viewportWidth=o.width,e.viewportHeight=o.height}}return e},setDropDirection:function(e,t,n,i){var s=this.options,o=this.elements.container;return e+t>i.viewportHeight+i.scrollTop||s.position.indexOf("top")>-1&&e-t-n.offsetHeight>0?(e-t-n.offsetHeight>0||s.position.indexOf("top")>-1)&&(o.addClassName("dropup"),e=e-t-n.offsetHeight):o.removeClassName("dropup"),e},updatePosition:function(t,n){var i,s,o,a,l,r=this.options,c=this.elements,h=r.target,u=this._position;this.isVisible&&(h&&!r.altPosition?(n||(u=this.getDisplayContext(),r.renderTo?u.offsets=h.getPosition(r.renderTo):r.contextual&&t?u.offsets={x:t.pageX,y:t.pageY}:u.offsets=h.getOffsets(),r.contextual?h={offsetWidth:0,offsetHeight:0}:u.offsets.y+=h.offsetHeight,u.initialOffsets=u.offsets),o=u.initialOffsets.x,a=u.initialOffsets.y,i=c.container.offsetWidth,s=c.container.offsetHeight,r.position.indexOf("center")>-1&&o-i+h.offsetWidth>0&&(o+=(h.offsetWidth-i)/2),(o+i>u.viewportWidth||r.position.indexOf("right")>-1&&o-i+h.offsetWidth>0)&&(o=o-i+h.offsetWidth),o<0&&(o=0),a=this.setDropDirection(a,s,h,u),u.offsets={x:o+r.offset.x,y:a+r.offset.y},this._position=u,c.container.setStyles({left:u.offsets.x,top:u.offsets.y})):r.altPosition&&(l=r.altPosition,(u=e.is(l,"function")?l():l).offsets={x:u.x+r.offset.x,y:u.y+r.offset.y},this._position=u,c.container.setStyles({left:u.offsets.x,top:u.offsets.y})))},toggle:function(){return this[this.isVisible?"hide":"show"]()},show:function(e,t){var n=this.elements,i=this.options;if(!n.container||this.isVisible||!this.enabled)return this;if(this.isVisible=!0,!n.container.isInjected()){var s=i.renderTo?i.renderTo:document.body;this.inject(s),n&&Object.keys(n).length>1&&Object.keys(n).forEach(function(e){var t=n[e];"container"===e||t.isInjected()||t.inject(s)})}return n.container.setStyle("display",""),(this.hasEvent("onClickOutside")||i.bound)&&o("click",document,this.events.document.click,!0),this.updatePosition(t),!e&&this.dispatchEvent("onShow"),this},hide:function(e){var t=this.elements,n=this.options;if(t.container&&this.isVisible&&this.enabled){if(this.isVisible=!1,t.container.isInjected()){if(n.removeOnHide){t.container.remove();var i=Object.keys(t);i.length>1&&i.forEach(function(e){var n=t[e];"container"!==e&&n.remove()})}l("click",document,this.events.document.click,!0)}return t.container.setStyle("display","none"),!e&&this.dispatchEvent("onHide"),this}},enable:function(){return this.enabled||(this.enabled=!0),this},disable:function(){return this.enabled&&(this.hide(),this.enabled=!1),this},destroy:function(){var e,t,n;this.hide(!0),this.options.bound&&(e=this.events.target,t=this.options.target,n=!0,Object.keys(e).forEach(function(i){l(i,t,e[i],n)})),this._parent()},isClickInSibling:function(e){var t=this.elements,n=!1;return t&&Object.keys(t).length>1&&Object.keys(t).forEach(function(i){var s=t[i];"container"!==i&&(n=n||s.contains(e))}),n}};return s.extend(r)}),define("DS/UIKIT/Spinner",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract"],function(e,t,n,i,s){"use strict";var o={name:"spinner",defaultOptions:{className:"",hwaccel:!0,visible:!1,spin:!0,animate:!0},isVisible:!1,init:function(t){t=t||{},this._parent(t),this.buildSkeleton(),e.is(t.renderTo,"element")&&(this.inject(t.renderTo),delete this.options.renderTo)},onPostInject:function(){(this.options.visible||this.isVisible)&&(this.isVisible=!1,this.show())},buildSkeleton:function(){var t=this.options;this.elements.container=e.createElement("div",{class:this.name+" "+function(e){var t,n,i;if(e){for(t=0,n=(e=e.split(" ")).length;t<n;t++)(i=e[t].match(/(spinner-)?(small|large)$/))&&!i[1]&&("small"===i[0]?e[t]="spinner-sm":"large"===i[0]&&(e[t]="spinner-lg"));e=e.join(" ")}return e}(t.className),html:[e.createElement("span",{class:"spinner-bar"}),e.createElement("span",{class:"spinner-bar spinner-bar1"}),e.createElement("span",{class:"spinner-bar spinner-bar2"}),e.createElement("span",{class:"spinner-bar spinner-bar3"})]}),t.spin&&this.spin(),t.zIndex&&this.elements.container.setStyle("zIndex",t.zIndex),t.animate&&this.elements.container.addClassName("fade"),t.duration&&(t.visible=!0),t.hwaccel&&this.elements.container.setStyle("transform","translate3d(0,0,0)"),this.elements.container.setStyles({top:t.top,left:t.left})},spin:function(){var e=this.elements;return e.container.hasClassName("spinning")||(e.container.addClassName("spinning"),this.dispatchEvent("onSpin")),this},stop:function(){var e=this.elements;return e.container.hasClassName("spinning")&&(e.container.removeClassName("spinning"),this.dispatchEvent("onSpinStop")),this},toggle:function(){return this[this.isVisible?"hide":"show"]()},show:function(){var e=this,t=this.options,n=this.elements;if(n)return this.isVisible||(t.duration&&(this.timer=setTimeout(function(){e.stop(),e.hide()},t.duration)),this.isVisible=!0,n.container.setStyle("display","inline-block"),t.animate?setTimeout(function(){e.elements&&e.isVisible&&(e.elements.container.addClassName("in"),e.dispatchEvent("onShow"))},50):e.dispatchEvent("onShow")),this},hide:function(){var e=this,t=this.options,n=this.elements;function i(){e.isVisible||(n&&n.container&&n.container.setStyle("display",""),e.dispatchEvent("onHide")),e.timer&&e.destroy()}if(n)return this.isVisible&&(this.isVisible=!1,t.animate?(this.timer&&clearTimeout(this.timer),n.container.removeClassName("in"),setTimeout(function(){i()},300)):i()),this},destroy:function(){this.options&&(this.options.animate=!1),this.hide(),this._parent(),this.elements=null}};return s.extend(o)}),define("DS/UIKIT/Image",["UWA/Core","UWA/Class","UWA/Class/Options","UWA/Class/Events"],function(e,t,n,i){"use strict";var s={defaultOptions:{className:"img",url:null,width:"100%",height:"100%"},init:function(e){this.setOptions(e),this.images=[],this.imageLoaded=0},load:function(){var t=this,n=this.options,i=function(e){var t,n,i;if(e){for(t=0,n=(e=e.split(" ")).length;t<n;t++)(i=e[t].match(/(img-)?(rounded|circle|thumbnail|responsive)$/))&&!i[1]&&(e[t]="img-"+e[t]);return e.join(" ")}}(n.className);function s(e){return function(){this.removeEvent("error"),this.removeEvent("load"),t.dispatchEvent(e,this),--t.imageLoaded||t.handleCompletion()}}[].slice.call(arguments).forEach(function(s){if(e.is(s,"string")){var o=e.createElement("img",{width:n.width,height:n.height,alt:s,class:i});t.images.push(o),t.imageLoaded++}}),this.images.forEach(function(e){e.src=e.alt,e.addEvents({error:s("onError"),load:s("onLoad")})})},handleCompletion:function(){this.dispatchEvent("onComplete",[this.images]),this.images=[],this.imageLoaded=0}};return t.extend(n,i,s)}),define("DS/UIKIT/Input",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract"],function(e,t,n,i,s){"use strict";i.Features.inputPlaceholder="placeholder"in document.createElement("input");var o={defaultOptions:{className:"",attributes:{},value:"",name:"",disabled:!1,commonClassName:"form-control"},nativeInput:!0,init:function(t){if(this.constructor===o)throw new Error("Use a subclass of Input");this._parent(t),this.events=null,this.getContent(),e.owns(t,"name")&&this.setName(t.name),e.owns(t,"value")&&this.setValue(t.value),this.elements.container&&i.Platform.ios&&this.elements.container.classList.add("prevent-ios-zoom-in")},getContent:function(){return this.elements.container||(this.buildSkeleton(),this.syncInput()),this.elements.container},buildSkeleton:function(){var t=this.elements,n=this.options;t.input=this.buildInput().set(n.attributes),n.id&&(t.input.id=n.id),this.nativeInput?t.content=t.container=t.input:(t.content=e.createElement("div",{class:this.getClassNames("-content")}),t.input.addClassName("hidden-input"),t.container=e.createElement("div",{html:[t.input,t.content]})),t.container.addClassName(this.getClassNames()),this.setDisabled(n.disabled)},buildInput:function(){return e.createElement("input",{type:"text"})},syncInput:function(){!this.nativeInput&&this.elements.content&&this.elements.content.setText(this.getValue())},handleEvents:function(){var e=this,t=this.elements;function n(t){return e.dispatchEvent.bind(e,t)}this.events||(this.events={container:{click:n("onClick"),mousedown:n("onMouseDown")},input:{change:n("onChange"),keydown:n("onKeyDown"),focus:this.setFocus.bind(this,!0),blur:this.setFocus.bind(this,!1)}},i.Engine.firefox&&(this.events.input.compositionend=function(e){this.dispatchEvent("onChange",[e])}.bind(this))),this.isDisabled()?(t.container.removeEvents(this.events.container),t.input.removeEvents(this.events.input)):(t.container.addEvents(this.events.container),t.input.addEvents(this.events.input))},setFocus:function(t){var n=this.elements;return!this.nativeInput&&e.Utils.Client.Features.touchEvents?this:(void 0===t&&(t=!0),this.nativeInput||n.container.toggleClassName("focus",t),n.input[t?"focus":"blur"](),this)},focus:function(){return this.setFocus(!0)},blur:function(){return this.setFocus(!1)},setDisabled:function(e){var t=this.elements;return void 0===e&&(e=!0),t.input.disabled=e,t.container.toggleClassName("disabled",e),this.handleEvents(),this},isDisabled:function(){return!!this.elements.input.disabled},enable:function(){return this.setDisabled(!1)},disable:function(){return this.setDisabled()},setName:function(t){return e.is(t,"string")&&(this.elements.input.name=t),this},getName:function(){return this.elements.input.name},setId:function(t){return e.is(t,"string")&&(this.elements.input.id=t),this},getId:function(){return this.elements.input.id},setValue:function(e){var t=this.elements.input,n=t.getTagName();return"input"===n||"textarea"===n?t.value=e:t.setText(e),this.syncInput(),this},getValue:function(){var e=this.elements.input,t=e.getTagName();return"input"===t||"textarea"===t?e.value:e.getText()},onMouseDown:function(e){this.nativeInput||this.isDisabled()||(n.preventDefault(e),this.focus())},onChange:function(e){this.syncInput(),this.bubbleOnChange(e)},dispatchOnChange:function(){n.dispatchEvent(this.elements.input,"change")},bubbleOnChange:function(){var e;return function(i){var s,o=this.elements.input.parentNode;if(!function(){if(void 0===e){e=!1;var i=document.createElement("div"),s=document.createElement("input");s.type="text",i.appendChild(s),i.style.display="none",document.body.appendChild(i),t.addEvent.call(i,"change",function(t){e=!0,n.stop(t)}),n.dispatchEvent(s,"change"),t.remove.call(i),t.removeEvents.call(i)}return e}())for(;o&&1===o.nodeType&&!1!==(i.event||i).returnValue;)(s=o._events&&o._events.change)&&s.handleEvent(i),o=o.parentNode}}()};return s.extend(o)}),define("DS/UIKIT/Badge",["UWA/Core","UWA/Controls/Abstract","UWA/Event"],function(e,t){"use strict";function n(e){var t,n,i;if(e){for(t=0,n=(e=e.split(" ")).length;t<n;t++)(i=e[t].match(/default|primary|info|warning|error|success$/))&&!i[1]&&(e[t]="badge-"+e[t]);return e.join(" ")}}function i(e,t,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n)}var s={name:"badge",defaultOptions:{className:"badge-default",closable:!1,selectable:!1,disabled:!1},init:function(e){(e=e||{}).className&&(e.className=n(e.className)),this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t=this.elements,n=this.options;t.container||(t.container=e.createElement("span",{class:this.getClassNames()}),n.id&&(t.container.id=n.id),n.name&&(t.container.name=n.name),this.setSelectable(n.selectable),this.setClosable(n.closable),t.content=e.createElement("span",{class:this.name+"-content"}).inject(t.container),t.content.setText(n.content),t.cross=e.createElement("span",{class:"fonticon fonticon-cancel"}).inject(t.container),n.icon&&this.setIcon(this.options.icon),this.setDisabled(n.disabled))},setIcon:function(t){for(var n=this.elements,i=0,s=(t=t.split(" ")).length;i<s;i++)t[i].match("fonticon-")||(t[i]="fonticon-"+t[i]);return t=t.join(" "),n.icon?n.icon.className="fonticon "+t+" "+this.name+"-icon":n.icon=e.createElement("span",{class:"fonticon "+t+" "+this.name+"-icon"}).inject(n.container,"top"),this},removeIcon:function(){return this.elements.icon&&this.elements.icon.destroy(),this},select:function(t){this.isDisabled()||(e.is(t)||(t=!0),t?this.elements.container.addClassName(this.name+"-selected"):this.elements.container.removeClassName(this.name+"-selected"))},isSelected:function(){return this.elements.container.hasClassName(this.name+"-selected")},setClassName:function(e){return this.options.className=n(e),this.getContent().className=this.getClassNames(),this},setSelectable:function(e){return void 0===e&&(e=!1),this.options.selectable=e,this.elements.container.toggleClassName(this.name+"-selectable",e),this},setClosable:function(e){return void 0===e&&(e=!1),this.options.closable=e,this.elements.container.toggleClassName(this.name+"-closable",e),this},handleEvents:function(){var t,n,s,o,a=this.elements,l=this.options,r=this;this.events||(this.events={},this.events.container={click:function(t){var n=e.Event.getElement(t);/fonticon-cancel/.test(n.className)||(l.selectable&&!r.isDisabled()&&a.container.addClassName(r.name+"-selected"),r.dispatchEvent("onClick",[t,r]))}},this.events.cross={click:function(e){l.closable&&r.dispatchEvent("onClose",[e,r])}},this.events.document={click:function(t){e.Event.getElement(t).isInjected(r.elements.container)||(l.selectable&&!r.isDisabled()&&a.container.removeClassName(r.name+"-selected"),r.dispatchEvent("onClickOutside",[t,r]))}}),this.isDisabled()?(a.container.removeEvents(this.events.container),a.cross.removeEvents(this.events.cross),i("click",document,this.events.document.click)):(a.container.addEvents(this.events.container),a.cross.addEvents(this.events.cross),t="click",n=document,s=this.events.document.click,o=!0,n.addEventListener?n.addEventListener(t,s,o):n.attachEvent&&n.attachEvent("on"+t,s,o))},destroy:function(){this.options.selectable&&i("click",document,this.events.document.click),this._parent()},enable:function(){return this.setDisabled(!1)},disable:function(){return this.setDisabled()},setDisabled:function(e){var t=this.elements;return void 0===e&&(e=!0),t.container.disabled=e,t.container.toggleClassName("disabled",e),this.handleEvents(),this},isDisabled:function(){return this.elements.container.disabled}};return t.extend(s)}),define("DS/UIKIT/Scroller",["UWA/Core","UWA/Utils","UWA/Utils/Client","UWA/Controls/Abstract","UWA/Controls/Drag","UWA/Class/Timed"],function(e,t,n,i,s,o){"use strict";function a(e){e.event&&(e=e.event);var t,n=e.changedTouches||e.touches||[e],i={x:0,y:0},s=n.length;for(t=0;t<s;t++)i.x+=n[t].clientX/s,i.y+=n[t].clientY/s;return i}var l={delta:0,coef:1,active:!1,visible:!1,scrollSize:0,scrollPosition:0,offsetSize:0},r=s.extend({defaultOptions:{snap:0,delay:0,forceStopOutOfFrame:!0},init:function(e,t){this._parent(t),this.scroller=e,this.direction=this.element.className.contains("scrollbar-y")?"y":"x",this.infos=e._infos[this.direction]},_getPosition:function(){var e=this.element.getBoundingClientRect()["y"===this.direction?"top":"left"];return a(this.currentEvent)[this.direction]-e},_onMoveWithinFrame:function(t,n){var i=this,s=this.infos.window,o=this.infos.lastmove,a={distance:n.distance-o.distance,x:n.x-o.x,y:n.y-o.y},l=Math.ceil(a.distance/10),r=s.top+10*l,c=s.left+10*l,h=s.right-10*l,u=s.bottom-10*l;this.infos.lastmove=a,t.x<c||t.y<r||"x"===this.direction&&t.x>h||"y"===this.direction&&t.y>u?e.Event.dispatchEvent(this.element,"mouseup",this.currentEvent):"x"===this.direction&&t.x>=s.right||"y"===this.direction&&t.y>=s.bottom?(clearTimeout(this._delayedUp),this._delayedUp=setTimeout(function(){e.Event.dispatchEvent(i.element,"mouseup",i.currentEvent)},700)):this._delayedUp&&(clearTimeout(this._delayedUp),this._delayedUp=null)},start:function(e){if(this._parent(e),this.infos.active=!0,this.scroller.update(),this.position=this._getPosition(),this.options.forceStopOutOfFrame&&window&&window!==window.parent){var t=window.document.documentElement.getBoundingClientRect();this.infos.window={top:t.top,left:t.left,right:t.right-4,bottom:t.bottom-4},this.infos.lastmove={distance:0,x:0,y:0}}},move:function(e,t){this._parent(e,t),this.infos.delta=(this._getPosition()-this.position)*this.infos.coef,"mousemove"===this.currentEvent.type&&this.infos.window&&this._onMoveWithinFrame(e,t),this.infos.active=!0,this.scroller.updateVisible()},stop:function(){this._parent(),this.scroller.updateActive(this.currentEvent),this._delayedUp&&(clearTimeout(this._delayedUp),this._delayedUp=null)}}),c=i.extend(o,{name:"scroller",options:{element:null,scrollbars:"auto",scrollbarsMargin:10,scrollbarsMinSize:50,dragForceStopOutOfFrame:!0},init:function(t){e.is(t)&&e.is(t.element)&&e.extendElement(t.element),this._parent(t),this._elementEvents={mousemove:this.updateActive.bind(this),mouseout:this.updateActive.bind(this)},this.build(),this.initInfos()},initInfos:function(){this._infos={x:Object.create(l),y:Object.create(l)},this.setPeriodical("update",this.update,1e3),this.updateShift(),this.update()},destroy:function(){if(this.options.element){var e=this.elements.container;e.removeEvents(this._elementEvents).removeClassName(this.getClassNames()).setContent(this.elements.content.childNodes);var t=e.destroy;e.destroy=function(){},this._parent(),e.destroy=t}else this._parent()},onPostInjected:function(){this.initInfos()},build:function(){var t=this.options.element||e.createElement("div");t.addClassName(this.getClassNames()).addEvents(this._elementEvents);var n="native"===this.options.scrollbars?"native-scrollbars ":"no-native-scrollbars ",i=e.createElement("div",{class:n+this.getClassNames("-content"),events:{scroll:this.updateVisible.bind(this)},html:[].slice.call(t.childNodes)}).inject(t);this.setDelayed("hide-overflow",function(){t.setStyle("overflow","hidden")},0),this.elements.container=t,this.elements.content=i},getInnerElement:function(){return this.elements.content},getScrollbar:function(t,n){var i=this.elements[t+"Scrollbar"];return!i&&n&&(i=this.elements[t+"Scrollbar"]=e.createElement("div",{class:this.getClassNames("-scrollbar","-scrollbar-"+t)}).inject(this.elements.container),new r(this,{element:i,root:this.elements.container,forceStopOutOfFrame:this.options.dragForceStopOutOfFrame}),i.clientHeight),i},scrollToElement:function(e,t,n){var i,s;e.nodeType||(e=this.elements.container.getElement(e)),e&&(i=e.offsetLeft,s=e.offsetTop,"center"===t&&(s=s-this.elements.content.getDimensions().height/2+e.getDimensions().height/2),"bottom"===t&&(s=s-this.elements.content.getDimensions().height+e.getDimensions().height),this.scrollTo(i,s,n))},scrollTo:function(e,t,n){var i,s,o,a,l,r,c,h,u=this;isNaN(e)||isNaN(t)||(n&&!isNaN(n)&&n>0?(s=t>u.elements.content.scrollTop,i=e>u.elements.content.scrollLeft,r=s?t-u.elements.content.scrollTop:u.elements.content.scrollTop-t,l=i?e-u.elements.content.scrollLeft:u.elements.content.scrollLeft-e,o=Math.ceil(l/100),a=Math.ceil(r/100),h=a>0&&setInterval(function(){r>0?(u.elements.content.scrollTop+=s?a:-a,r-=a):(s?u.elements.content.scrollTop+=r:u.elements.content.scrollTop-=r,clearInterval(h))},n/100),c=o>0&&setInterval(function(){l>0?(u.elements.content.scrollLeft+=i?o:-o,l-=o):(i?u.elements.content.scrollLeft+=l:u.elements.content.scrollLeft-=l,clearInterval(c))},n/100)):(this.elements.content.scrollLeft=e,this.elements.content.scrollTop=t))},updateActive:function(e){if(this.updateShift(),"virtual"===this.options.scrollbars){if("mouseout"===e.type||"touchend"===e.type)this._infos.x.active=this._infos.y.active=!1;else{var t=this.elements.container.getBoundingClientRect(),n=a(e);["x","y"].forEach(function(e,s){var o=t[s?"right":"bottom"];this._infos[e].active=i(o-12,n[s?"x":"y"],o)&&i(t[s?"top":"left"],n[e],t[s?"bottom":"right"])},this)}this.updateVisible()}function i(e,t,n){return e<t&&t<n}},updateVisible:function(){this._infos.x.visible=this._infos.y.visible=!0,this.setDelayed("scrollbars-visible",function(){this._infos.x.visible=this._infos.y.visible=!1,this.update()},1e3),this.update()},updateShift:function(){var e=this.elements.content;if(void 0===this._shift&&e.isInjected()){var t=this.options.scrollbars;if("auto"===t&&(n.Platform.ios?(t="native",e.removeClassName("no-native-scrollbars").addClassName("native-scrollbars")):t="virtual",this.options.scrollbars=t),"virtual"===t){var i=e.offsetWidth-e.clientWidth;i>0&&i<30?(this._shift=i,e.setStyles({right:-this._shift,bottom:-this._shift})):n.Engine.firefox&&(this._shift=16,e.setStyles({right:-this._shift,bottom:-this._shift,"padding-right":this._shift,"padding-bottom":this._shift}))}else this._shift=0}},_read:function(e){var t=this._infos[e?"y":"x"],n=this.elements.content;t.scrollSize=n[e?"scrollHeight":"scrollWidth"],t.scrollPosition=n[e?"scrollTop":"scrollLeft"]+t.delta,t.offsetSize=n[e?"offsetHeight":"offsetWidth"]-(this._shift||0),t.scrollPosition<0?t.scrollPosition=0:t.scrollPosition>t.scrollSize-t.offsetSize&&(t.scrollPosition=t.scrollSize-t.offsetSize)},_write:function(e){var t=e?"y":"x",i=this._infos[t],s=this.options;if(i.delta&&(this.elements.content[e?"scrollTop":"scrollLeft"]=i.scrollPosition,i.delta=0),"virtual"===this.options.scrollbars){var o=i.scrollSize>i.offsetSize+(n.Engine.firefox?this._shift:0),a=this.getScrollbar(t,o);if(o&&i.scrollSize){var l=i.offsetSize-2*s.scrollbarsMargin,r=l*(i.offsetSize/i.scrollSize);r<s.scrollbarsMinSize&&(r=s.scrollbarsMinSize),i.coef=(i.scrollSize-i.offsetSize)/(l-r),a.style[e?"top":"left"]=s.scrollbarsMargin+i.scrollPosition/i.coef+"px",a.style[e?"height":"width"]=r+"px",a.toggleClassName("active",i.active).toggleClassName("visible",i.visible)}else a&&a.removeClassName("active").removeClassName("visible")}},update:function(){this.setAnimate("update",function(){this.updateShift(),this._read(!1),this._read(!0),e.equals(this._previousInfos,this._infos)||(this._write(!1),this._write(!0),this._previousInfos=e.clone(this._infos))})}});return i.extend(c)}),define("DS/UIKIT/Carousel",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract"],function(e,t,n,i,s){"use strict";var o={name:"carousel",defaultOptions:{className:"",autoPlay:!0,infinite:!0,dots:!0,arrows:!0,pauseOnHover:!1,animation:"slide",slideSelector:"> div",slideSpeed:200,autoPlaySpeed:5e3,slideToShow:1,slidesToScroll:1},current:null,slides:null,init:function(t){t=t||{},e.is(t,"object")||(t={slides:t}),this._parent(t),this.slides=[],this.buildSkeleton(),e.is(t.renderTo,"element")&&(this.inject(e.extendElement(t.renderTo)),delete this.options.renderTo),this.options.autoPlay&&this.play()},buildSkeleton:function(){var t,i,s=this,o=this.options,a=e.is(o.slides,"element"),l=this.elements;function r(e,t){n.preventDefault(t),s.autoplayTimer&&(s.pause(),s.addEventOnce("onSlide",s.play.bind(s))),s.slide(e)}l.container||(l.container=e.createElement("div",{class:this.name+" "+o.className}),a?(l.content=e.extendElement(o.slides),t=this.getSlides()):(l.content=e.createElement("div"),e.is(o.slides,"array")&&(t=o.slides)),l.content.addClassName(this.name+"-slides"),o.dots&&(l.dots=e.createElement("ol",{class:this.name+"-indicators"}).inject(l.container),l.dots.addEvent("mousedown",function(e){var t=n.getElement(e);t.hasClassName("indicator")&&r(l.dots.getChildren().indexOf(t),e)})),t&&this.add(t),a&&l.content.isInjected()?(i=l.content.getParent())&&(l.content.inject(l.container),l.container.inject(i)):l.content.inject(l.container),o.arrows&&(l.arrowLeft=e.createElement("a",{class:"left "+this.name+"-control",html:'<span class ="fonticon fonticon-left-open"></span>'}).inject(l.container),l.arrowRight=e.createElement("a",{class:"right "+this.name+"-control",html:'<span class ="fonticon fonticon-right-open"></span>'}).inject(l.container),l.arrowRight.addEvent("mousedown",function(e){r("right",e)}),l.arrowLeft.addEvent("mousedown",function(e){r("left",e)})),delete o.slides)},getSlides:function(){return this.elements.content.getElements(this.options.slideSelector)},add:function(e){var t=this;return i.splat(e).forEach(function(e){t.addSlide(e)}),this.current||this.setActive(0),this},addSlide:function(t,n){var i,s=this.elements;(t=e.is(t,"element")?t:(i=t,e.extendElement(e.createElement("div").setContent(i).firstChild))).addClassName("slide"),e.is(n)||(t.isInjected()||t.inject(s.content),this.options.dots&&e.createElement("li",{class:"indicator"}).inject(s.dots),this.slides.push(t),this.dispatchEvent("onAddSlide",t))},remove:function(e){var t=this;return i.splat(e).forEach(function(e){t.removeSlide(e)}),this.current||this.setActive(0),this},removeSlide:function(e){this.slides[e]&&(this.slides[e].remove(),this.slides.splice(e,1),this.elements.dots&&this.elements.dots.getChildren()[e].remove(),this.dispatchEvent("onRemoveSlide",this.slides[e]))},setActive:function(e){var t,n=this.slides[e],i=this.elements;n&&(n.addClassName("active"),this.current=n,i.dots&&((t=i.dots.getChildren()).forEach(function(e){e.removeClassName("active")}),t[e].addClassName("active")))},slide:function(t){var n=this,i=this.options,s="next",o="left",a=this.slides.indexOf(this.current),l=!1;if(!(this.slides.length<2||/sliding|fade/.test(this.current.className))){if(!e.is(t)||e.is(t,"string")?"left"===t?(o="right",s="prev",a--):a++:e.is(t,"number")&&this.slides[t]&&a!==t?(a>t&&(o="right",s="prev"),a=t):a=!1,!1!==a&&(i.infinite&&!this.slides[a]&&(a=a===this.slides.length?0:this.slides.length-1,l=!0),this.slides[a])){if(n.elements.dots)n.elements.dots.getChildren().forEach(function(e){e.removeClassName("active")});"slide"===i.animation?(this.slides[a].addClassName("sliding "+s),this.current.addClassName("sliding"),setTimeout(function(){n.slides[a].addClassName(o),n.current.addClassName(o),setTimeout(function(){n.current.removeClassName("sliding"),n.current.removeClassName(o),n.slides[a].removeClassName("sliding"),n.slides[a].removeClassName(s),n.slides[a].removeClassName(o),n.current.removeClassName("active"),n.setActive(a),n.dispatchEvent("onSlide"),l&&n.dispatchEvent("onLoop")},600)},50)):(n.current.addClassName("fade in"),n.slides[a].addClassName("fade "+s),setTimeout(function(){n.current.removeClassName("in"),n.slides[a].addClassName("in"),setTimeout(function(){n.current.removeClassName("fade"),n.slides[a].removeClassName("fade"),n.slides[a].removeClassName(s),n.slides[a].removeClassName("in"),n.current.removeClassName("active"),n.setActive(a),n.dispatchEvent("onSlide"),l&&n.dispatchEvent("onLoop")},600)},50))}return this}},play:function(e){var t=this,n=this.options;return this.autoplayTimer&&this.pause(),n.pauseOnHover&&!e&&this.elements.container.addEvents({mouseover:function(){t.pause(!0)},mouseout:function(){t.play(!0)}}),this.autoplayTimer=setInterval(function(){window.requestAnimationFrame(t.slide.bind(t,"right"))},n.autoPlaySpeed),this},pause:function(e){var t=this.options;return this.autoplayTimer&&(t.pauseOnHover&&!e&&(this.elements.container.removeEvent("mouseover"),this.elements.container.removeEvent("mouseout")),clearInterval(this.autoplayTimer),this.autoplayTimer=null),this},destroy:function(){this.pause(),this._parent(),this.elements=null}};return s.extend(o)}),"undefined"!=typeof Hammer?define("DS/VENHammer",function(){"use strict";return Hammer}):-1===require.toUrl("DS/VENHammer").indexOf("2.0.8/hammer")&&function(){"use strict";var e=require.toUrl("DS/VENHammer/2.0.8/hammer");e.indexOf("?")>-1&&(e=e.substring(0,e.indexOf("?"))),require.config({paths:{"DS/VENHammer":e},shim:{"DS/VENHammer":{exports:"Hammer"}}})}(),define("DS/UIKIT/Touch",["DS/VENHammer"],function(e){"use strict";return e.defaults.touchAction="pan-y",e}),define("DS/UIKIT/DatePicker",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Utils/Scroll","UWA/Controls/Abstract","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,t,n,i,s,o,a){"use strict";function l(t){return e.is(t,"date")&&!isNaN(t.getTime())}function r(e){l(e)&&e.setHours(0,0,0,0)}function c(e,t){return e.getTime()===t.getTime()}function h(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e}function u(t,n,i){var s;document.createEvent?((s=document.createEvent("HTMLEvents")).initEvent(n,!0,!1),s=e.extend(s,i),t.dispatchEvent(s)):document.createEventObject&&(s=document.createEventObject(),s=e.extend(s,i),t.fireEvent("on"+n,s))}var d={name:"datepicker",defaultOptions:{field:null,bound:void 0,position:"bottom left",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,unselectableDaysOfWeek:null,yearRange:20,showWeekNumber:!1,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",renderTo:void 0,i18n:{previousMonth:a.previousMonth,nextMonth:a.nextMonth,months:[a.january,a.february,a.march,a.april,a.may,a.june,a.july,a.august,a.september,a.october,a.november,a.december],weekdays:[a.sunday,a.monday,a.tuesday,a.wednesday,a.thursday,a.friday,a.saturday],weekdaysShort:[a.sun,a.mon,a.tue,a.wed,a.thu,a.fri,a.sat]},minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0},init:function(t){var n,i;this._parent(t),t=this.options,this.events={},t.isRTL=!!t.isRTL,t.field=e.is(t.field,"element")?t.field:null,t.bound=!!(e.is(t.bound)?t.field&&t.bound:t.field),t.trigger=e.is(t.trigger,"element")?t.trigger:t.field,n=parseInt(t.numberOfMonths,10)||1,t.numberOfMonths=n>4?4:n,t.minDate=!!l(t.minDate)&&t.minDate,t.maxDate=!!l(t.maxDate)&&t.maxDate,t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&(r(t.minDate),t.minYear=t.minDate.getFullYear(),t.minMonth=t.minDate.getMonth()),t.maxDate&&(r(t.maxDate),t.maxYear=t.maxDate.getFullYear(),t.maxMonth=t.maxDate.getMonth()),e.is(t.yearRange,"array")?(i=(new Date).getFullYear()-10,t.yearRange[0]=parseInt(t.yearRange[0],10)||i,t.yearRange[1]=parseInt(t.yearRange[1],10)||i):(t.yearRange=Math.abs(parseInt(t.yearRange,10))||this.defaultOptions.yearRange,t.yearRange>100&&(t.yearRange=100)),this.buildSkeleton()},buildSkeleton:function(){var t,n=this.elements,i=this.options;if(n.container=e.createElement("div",{class:this.getClassNames()+(i.isRTL?" is-rtl":"")}),n.container.addEvent("mousedown",this.onMouseDown.bind(this),!1,0,!0),n.container.addEvent("change",this.onChange.bind(this)),i.field&&(i.renderTo?n.container.inject(i.renderTo):i.bound?n.container.inject(document.body):i.field.parentNode.insertBefore(n.container,i.field.nextSibling),this.events.onInputChange=this.onInputChange.bind(this),i.field.addEvent("change",this.events.onInputChange),i.defaultDate||(i.defaultDate=new Date(Date.parse(i.field.value)),i.setDefaultDate=!0)),l(t=i.defaultDate))i.setDefaultDate?this.setDate(t,!0):this.gotoDate(t);else{var s=new Date,o=i.minDate,a=i.maxDate;l(o)&&s<o?s=o:l(a)&&s>a&&(s=a),this.gotoDate(s)}i.bound?(this.hide(),n.container.addClassName(" is-bound"),this.events.onInputClick=this.onInputClick.bind(this),this.events.onInputFocus=this.onInputFocus.bind(this),this.events.onInputBlur=this.onInputBlur.bind(this),i.trigger.addEvents({click:this.events.onInputClick,focus:this.events.onInputFocus,blur:this.events.onInputBlur})):this.show()},onMouseDown:function(e){var t=this,i=n.getElement(e),s=this.options;if(this.visible&&i){if(!i.hasClassName("is-disabled")){if(i.hasClassName(this.name+"-button")&&!i.hasClassName("is-empty"))return this.setDate(new Date(i.getAttribute("data-year"),i.getAttribute("data-month"),i.getAttribute("data-day"))),void(s.bound&&setTimeout(function(){t.hide(),s.field&&s.field.blur()},100));i.hasClassName(this.name+"-prev")?this.prevMonth():i.hasClassName(this.name+"-next")&&this.nextMonth()}i.hasClassName(this.name+"-select")?this._c=!0:n.preventDefault(e)}},onChange:function(e){var t=n.getElement(e);t&&(t.hasClassName(this.name+"-select-month")?this.gotoMonth(t.value):t.hasClassName(this.name+"-select-year")&&this.gotoYear(t.value))},onInputChange:function(e){var t;e.firedBy!==this&&(t=new Date(Date.parse(this.options.field.value)),this.setDate(l(t)?t:null))},onInputFocus:function(){this.show()},onInputClick:function(){this.show()},onInputBlur:function(){var e=this;this._c||(this._b=setTimeout(function(){e.hide()},50)),this._c=!1},onClick:function(e){var t=n.getElement(e),i=t;if(t){do{if(i.hasClassName(this.name))return}while(i=i.getParent());this.visible&&t!==this.options.trigger&&this.hide()}},toString:function(){var t,n;return l(this.day)?e.is(a._lang)&&e.is(window.Intl)?(t={weekday:"short",year:"numeric",month:"short",day:"2-digit"},n=new Intl.DateTimeFormat(a._lang,t).format(this.day)):n=this.day.toDateString():n="",n},getDate:function(){return l(this.day)?new Date(this.day.getTime()):null},setDate:function(t,n){var i,s,o=this.options,a=o.field;if(!t)return this.day=null,a&&(a.value="",a.removeClassName("filled"),!n&&u(a,"change",{firedBy:this})),this.draw();e.is(t,"string")&&(t=new Date(Date.parse(t))),l(t)&&(i=o.minDate,s=o.maxDate,l(i)&&t<i?t=i:l(s)&&t>s&&(t=s),this.day=new Date(t.getTime()),r(this.day),this.gotoDate(this.day),a&&a.value!==this.toString()&&(a.addClassName("filled"),a.value=this.toString(),!a.disabled&&!n&&u(a,"change",{firedBy:this})),n||this.dispatchEvent("onSelect",this.getDate()))},gotoDate:function(e){var t,n,i,s=!0;l(e)&&(this.calendars&&(t=new Date(this.calendars[0].year,this.calendars[0].month,1),n=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),i=e.getTime(),n.setMonth(n.getMonth()+1),n.setDate(n.getDate()-1),s=i<t.getTime()||n.getTime()<i),s&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this.options.mainCalendar&&(this.calendars[0].month+=1-this.options.numberOfMonths)),this.adjustCalendars())},adjustCalendars:function(){this.calendars[0]=h(this.calendars[0]);for(var e=1;e<this.options.numberOfMonths;e++)this.calendars[e]=h({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.calendars[0].month>this.options.maxMonth&&this.calendars[0].year>=this.options.maxYear?this.gotoDate(this.options.maxDate):this.calendars[0].month<this.options.minMonth&&this.calendars[0].year<=this.options.maxYear?this.gotoDate(this.options.minDate):this.adjustCalendars())},setMinDate:function(e){l(e)?(r(e),this.options.minDate=e,this.options.minYear=this.options.minDate.getFullYear(),this.options.minMonth=this.options.minDate.getMonth()):!1===e&&(this.options.minDate=!1,this.options.minYear=!1,this.options.minMonth=!1)},setMaxDate:function(e){l(e)?(r(e),this.options.maxDate=e,this.options.maxYear=this.options.maxDate.getFullYear(),this.options.maxMonth=this.options.maxDate.getMonth()):!1===e&&(this.options.maxDate=!1,this.options.maxYear=!1,this.options.maxMonth=!1)},clearDates:function(){this.setMinDate(!1),this.setMaxDate(!1)},draw:function(t){var n=this,i=this.options,s=this.elements,o=i.minYear,a=i.maxYear,l=i.minMonth,r=i.maxMonth,c="";function h(t,n,s,o){var a,l,r,c,h,u=n===i.minYear,d=n===i.maxYear,m='<div class="datepicker-title">',p=!0,f=!0;for(r=[],a=0;a<12;a++)r.push('<option value="'+(n===o?a-t:12+a-t)+'"'+(a===s?" selected":"")+(u&&a<i.minMonth||d&&a>i.maxMonth?"disabled":"")+">"+i.i18n.months[a]+"</option>");for(c='<div class="datepicker-label">'+i.i18n.months[s]+'<select class="datepicker-select datepicker-select-month">'+r.join("")+"</select></div>",e.is(i.yearRange,"array")?(a=i.yearRange[0],l=i.yearRange[1]+1):(a=n-i.yearRange,l=1+n+i.yearRange),r=[];a<l&&a<=i.maxYear;a++)a>=i.minYear&&r.push('<option value="'+a+'"'+(a===n?" selected":"")+">"+a+"</option>");return h='<div class="datepicker-label">'+n+i.yearSuffix+'<select class="datepicker-select datepicker-select-year">'+r.join("")+"</select></div>",i.showMonthAfterYear?m+=h+c:m+=c+h,u&&(0===s||i.minMonth>=s)&&(p=!1),d&&(11===s||i.maxMonth<=s)&&(f=!1),0===t&&(m+='<button class="datepicker-prev'+(p?"":" is-disabled")+'" type="button">'+i.i18n.previousMonth+"</button>"),t===i.numberOfMonths-1&&(m+='<button class="datepicker-next'+(f?"":" is-disabled")+'" type="button">'+i.i18n.nextMonth+"</button>"),m+="</div>"}if(this.visible||t){this.year<=o&&(this.year=o,!isNaN(l)&&this.month<l&&(this.month=l)),this.year>=a&&(this.year=a,!isNaN(r)&&this.month>r&&(this.month=r));for(var u=0;u<i.numberOfMonths;u++)c+='<div class="'+this.name+'-calendar">'+h(u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year)+this.render(this.calendars[u].year,this.calendars[u].month)+"</div>";s.container.setHTML(c),i.bound&&"hidden"!==i.field.type&&setTimeout(function(){i.trigger.focus()},1),setTimeout(function(){n.dispatchEvent("onDraw")},0)}},updatePosition:function(){var e,t,n,i=this.options,o=this.elements,a=i.trigger,l=o.container.offsetWidth,r=o.container.offsetHeight,c=a.getOffsets(),h=window.innerWidth||document.documentElement.clientWidth,u=window.innerHeight||document.documentElement.clientHeight;if(i.renderTo){var d=s.getClosestScrollable(i.renderTo,"y");e=d?d.scrollTop:0,n=a.getPosition(i.renderTo).y+a.getComputedSize("marginTop")}else e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,n=c.y;t=c.x,n+=a.offsetHeight,(t+l>h||i.position.indexOf("right")>-1&&t-l+a.offsetWidth>0)&&(t=t-l+a.offsetWidth),(n+r>u+e||i.position.indexOf("top")>-1&&n-r-a.offsetHeight>0)&&(n=n-r-a.offsetHeight),o.container.setStyles({position:"absolute",left:t,top:n})},render:function(e,t){var n,i,s,o,a,h,u,d=this,m=this.options,p=new Date,f=function(e,t){return[31,function(e){return e%4==0&&e%100!=0||e%400==0}(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}(e,t),g=new Date(e,t,1).getDay(),v=[],b=[];function I(e,t){for(e+=m.firstDay;e>=7;)e-=7;return t?m.i18n.weekdaysShort[e]:m.i18n.weekdays[e]}function E(e,t,n,i,s,o,a){var l=[];return a?'<td class="is-empty"></td>':(o&&l.push("is-disabled"),s&&l.push("is-today"),i&&l.push("is-selected"),'<td data-day="'+e+'" class="'+l.join(" ")+'"><button class="'+d.name+"-button "+d.name+'-day" type="button" data-year="'+n+'" data-month="'+t+'" data-day="'+e+'">'+e+"</button></td>")}function C(e,t){return"<tr>"+(t?e.reverse():e).join("")+"</tr>"}for(r(p),m.firstDay>0&&(g-=m.firstDay)<0&&(g+=7),i=n=f+g;i>7;)i-=7;n+=7-i;for(var y=0,S=0;y<n;y++){var w=new Date(e,t,y-g+1),N=m.minDate&&w<m.minDate||m.maxDate&&w>m.maxDate||m.unselectableDaysOfWeek&&m.unselectableDaysOfWeek.indexOf(w.getDay())>-1,x=!!l(this.day)&&c(w,this.day),_=c(w,p),D=y<g||y>=f+g;b.push(E(y-g+1,t,e,x,_,N,D)),7==++S&&(m.showWeekNumber&&b.unshift((s=y-g,o=t,a=e,h=void 0,u=void 0,h=new Date(a,0,1),u=Math.ceil(((new Date(a,o,s)-h)/864e5+h.getDay()+1)/7),'<td class="'+d.name+'-week">'+u+"</td>")),v.push(C(b,m.isRTL)),b=[],S=0)}return function(e){return'<table cellpadding="0" cellspacing="0" class="'+d.name+'-table">'+function(){var e,t=[];for(m.showWeekNumber&&t.push("<th></th>"),e=0;e<7;e++)t.push('<th scope="col"><abbr title="'+I(e)+'">'+I(e,!0)+"</abbr></th>");return"<thead>"+(m.isRTL?t.reverse():t).join("")+"</thead>"}()+"<tbody>"+e.join("")+"</tbody></table>"}(v)},isVisible:function(){return this.visible},show:function(){var e=this.options;this.visible||(this.elements.container.removeClassName("is-hidden"),this.visible=!0,this.draw(),e.bound&&(this.events.onClickOutside=this.onClick.bind(this),t.addEvent.call(document,"click",this.events.onClickOutside),this.updatePosition()),this.dispatchEvent("onShow"))},hide:function(){var n=this.visible;!1!==n&&(this.options.bound&&t.removeEvent.call(document,"click",this.events.onClickOutside),this.elements.container.style.cssText="",this.elements.container.addClassName("is-hidden"),this.visible=!1,e.is(n)&&this.dispatchEvent("onHide"))},destroy:function(){var e=this.options,t=this.elements;this.hide(),e.field&&(e.field.removeEvent("change",this.events.onInputChange),e.bound&&(e.trigger.removeEvent("click",this.events.onInputClick),e.trigger.removeEvent("focus",this.events.onInputFocus),e.trigger.removeEvent("blur",this.events.onInputBlur))),t.container.parentNode&&t.container.parentNode.removeChild(this.elements.container),this._parent()}};return o.extend(d)}),define("DS/UIKIT/Tooltip",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract"],function(e,t,n,i,s){"use strict";var o="MutationObserver"in window,a={_positions:["top","top right","right","bottom right","bottom","bottom left","left","top left"],name:"tooltip",defaultOptions:{className:"",animate:!0,offset:{x:0,y:0},anchor:"target",position:"top",trigger:"hover focus",autoHide:!0,autoHideOnClickOutside:!0,closeOnClick:!1,delay:{show:500,hide:250,click:!0}},isVisible:!1,shouldListenForScroll:!1,init:function(t,n){t=t||{};var s=this,o=!0;e.is(t,"element")&&(t={target:t}),n&&(t.position=n),"touch"===t.trigger&&(t.trigger=this.defaultOptions.trigger+" touch"),e.is(t.allowedPositions,"array")&&(o=t.allowedPositions.some(function(e){return-1===s._positions.indexOf(e)})),t.allowedPositions=o?this._defaultPositions?this._defaultPositions:this._positions:t.allowedPositions,this._parent(t),this.positions=this.options.allowedPositions,this._mutationObserver=void 0,this.options.animate=i.Features.transitionsCSS&&this.options.animate,this.buildSkeleton()},getBody:function(){return this.elements&&this.elements.body},setBody:function(e){return this.getBody()&&(this.elements.body.empty(),this.elements.body.addContent(e)),this.isVisible&&this.updatePosition(this._lastValidPosition),this},setDefaultPosition:function(e){return this.options.position=e,this},setAllowedPositions:function(e){return this.positions=e,this},getPositionClasses:function(e){var t=e||this.options.position,n=t;return t.split(" ").length>1&&((t=n.indexOf("top")>-1?["top"]:["bottom"]).push(n.indexOf("left")>-1?"left":"right"),t=t[0]+" "+t.join("-")),t},buildSkeleton:function(){var t=e.createElement,n=this.elements,i=this.options,s=i.position;s=this.getPositionClasses(i.position),n.container||(n.container=t("div",{class:this.getClassNames()+" "+s}),t("div",{class:this.name+"-arrow"}).inject(n.container),n.body=t("div",{class:this.name+"-body",html:i.body||i.target.getAttribute("title")||"..."}).inject(n.container),i.target.setAttribute("title",""),i.animate&&n.container.addClassName("fade"),this.handleEvents(),delete i.body)},handleEvents:function(){var i=this,s=this.options,o=s.delay,a=o&&o.click,l=e.Utils.Client.Features.touchEvents,r=s.trigger.split(" ");function c(e,o){return function(l){if(i._shouldStopEventChain)l&&"click"===l.type&&(i._shouldStopEventChain=!1);else{var r=void 0===e?!i.isVisible:e;r&&o&&(i._touchstart=t.addEvent.call(document.body,"touchstart",function(e){t.removeEvent.call(document.body,"touchstart",i._touchstart),i.elements.container.isInjected()&&n.getElement(e)!==s.target&&c(!1)()})),s.delay&&(l&&("click"!==l.type||a)||!l)?(clearTimeout(i.timeout),i.timeout=setTimeout(function(){r&&i.options.target&&i.options.target.isInjected()?i.show():r||i.hide()},r?s.delay.show:s.delay.hide)):(i.timeout&&clearTimeout(i.timeout),i[r?"show":"hide"]())}}}if(!this.events&&s.target){if(this.events={},s.autoHideOnClickOutside){var h=this.options.target;if("contains"in HTMLElement.prototype&&!("contains"in h)){var u=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"contains");Object.defineProperty(h,"contains",u)}this._onClickOutside=function(e){var t=n.getElement(e);t.isInjected(this.elements.container)||t===this.elements.container||this.options.target.contains(t)||(this.hide(),this.dispatchEvent("onClickOutside",[e]))}.bind(this)}l&&(this.events.touchstart=function(e){-1===this.options.trigger.indexOf("touch")&&(this._shouldStopEventChain=!0,e.stopPropagation())}.bind(this)),r.forEach(function(e){"hover"===e&&(this.events.mouseover=c(!0),this.events.mouseout=c(!1)),"focus"===e&&(l?this.events.click=c(void 0,l):(this.events.focus=c(!0),this.events.blur=c(!1))),"click"===e&&(this.events.click=c())},this),s.closeOnClick&&!this.events.click&&(this.events.click=c()),s.autoHide&&(r.indexOf("click")>-1||-1===r.indexOf("click")&&r.indexOf("hover")>-1)?this.shouldListenForScroll=!0:this.shouldListenForScroll=!1,s.target.addEvents||e.extendElement(s.target),s.target.addEvents(this.events)}},resetPosition:function(){this.elements.container.setStyles({top:null,left:null}),this.positions.map(this.getPositionClasses).join(" ").split(" ").forEach(function(e){this.elements.container.hasClassName(e)&&this.elements.container.removeClassName(e)},this)},setPlacementClasses:function(e){this.getPositionClasses(e).split(" ").forEach(function(e){!this.elements.container.hasClassName(e)&&this.elements.container.addClassName(e)},this)},setPosition:function(e,t,n,i){var s=t,o=this.getPositionClasses(e);isNaN(n.width)&&(n.width=0),isNaN(n.height)&&(n.height=0),/-right/.test(o)?s.x+=n.width-i.width:/^(top|bottom)$/.test(o)&&(s.x+=n.width/2-i.width/2),/^bottom/.test(o)?s.y+=n.height:/^(left|right)(-top|-bottom)?$/.test(o)?(s.x-=i.width,/^(right|right-\w{3,6})$/.test(o)&&(s.x+=n.width+i.width),/(-top|-bottom)/.test(o)?/-bottom/.test(o)&&(s.y+=n.height-i.height):s.y+=n.height/2-i.height/2):s.y-=i.height,this.elements.container.setStyles({left:Math.round(s.x+this.options.offset.x+parseInt(this.options.target.getStyle("marginLeft"),10)),top:Math.round(s.y+this.options.offset.y+parseInt(this.options.target.getStyle("marginTop"),10))})},adjustPosition:function(e,t){var n,i,s=document.body.getBoundingClientRect(),o=this.elements.container.getBoundingClientRect(),a=Math.floor(5*s.width/100),l=s.width-o.right<=a,r=o.left<a;(l||r)&&(n=this.options.target.getPosition(document.body),i=this.elements.container.getSize(),this.setPosition(e,n,t,i))},isNotFullyVisible:function(){return!this.elements.container.isInViewport(document.body)||!this.elements.container.isInViewport(document.body,!0)},updatePosition:function(){return function(){var e,t,n,i,s="number"==typeof arguments[1]?arguments[1]:0;if(!(s>=this.positions.length))return t=this.options,e=arguments[0]||t.position,n=t.target.getPosition(document.body),i=t.target.getSize(),this.resetPosition(),this.setPlacementClasses(e),this.setPosition(e,n,i,this.elements.container.getSize()),(/^(top|bottom)$/.test(e)||this._needsPositionAdjusment)&&this.adjustPosition(e,i,s),this.isNotFullyVisible()?this.updatePosition(function(e){var t=(this.positions.indexOf(e)+1)%this.positions.length;return this.positions[t]}.call(this,e),s+1):this._lastValidPosition=e,this}}(),toggle:function(){return this[this.isVisible?"hide":"show"]()},_contentInsertionMutationCallback:function(e){e.some(function(e){return e.addedNodes.length||e.removedNodes.length})&&this.updatePosition(this._lastValidPosition)},_targetRemovalMutationCallback:function(e){e.some(function(e){return-1!==Array.prototype.indexOf.call(e.removedNodes,this.options.target)},this)&&this.hide()},show:function(){var e=this,n=this.options;if(this.elements){if(o){this._mutationObserver||(this._mutationObserver=new MutationObserver(function(t){e._targetRemovalMutationCallback(t),e._contentInsertionMutationCallback(t)}));try{this._mutationObserver.observe(n.target.parentNode,{childList:!0}),this._mutationObserver.observe(this.elements.container,{childList:!0,subtree:!0})}catch(e){}}return this.shouldListenForScroll&&(clearInterval(this._scrollInterval),this._initialTargetClientRect=n.target.getBoundingClientRect(),this._scrollInterval=setInterval(function(){var t;try{t=e.options.target.getBoundingClientRect()}catch(e){t={bottom:0}}if(e._initialTargetClientRect.bottom!==t.bottom){try{e.options.target.blur&&e.options.target.blur()}catch(e){}e.hide()}},300)),this.isVisible||(this.isVisible=!0,n.autoHideOnClickOutside&&t.addEvent.call(document.body,"click",this._onClickOutside),this.inject(document.body,"top"),this.updatePosition(this._lastValidPosition),this.elements.container.addClassName("in"),n.animate?setTimeout(function(){e.elements&&e.isVisible&&e.dispatchEvent("onShow")},150):this.dispatchEvent("onShow")),this}},hide:function(){var e=this,n=this.options,i=n.delay&&n.delay.hide||0,s=this.elements;function a(){!e.isVisible&&e.elements&&(e.elements.container.remove(document.body),e.dispatchEvent("onHide"))}if(s)return this.shouldListenForScroll&&(clearInterval(this._scrollInterval),this._initialTargetClientRect=void 0),o&&this._mutationObserver&&this._mutationObserver.disconnect(),this.isVisible&&(this.isVisible=!1,n.autoHideOnClickOutside&&t.removeEvent.call(document.body,"click",this._onClickOutside),s.container.removeClassName("in"),n.animate?setTimeout(function(){a()},i+150):a()),this},destroy:function(){this.options&&(this.options.animate=!1,this.options.target&&this.options.target.removeEvents(this.events)),this.hide(),this._touchstart&&t.removeEvent.call(document.body,"touchstart",this._touchstart),this._mutationObserver=null,this._parent(),this.elements=null}};return s.extend(a)}),define("DS/UIKIT/Core",[],function(){"use strict";var e=Array.prototype.slice;return{log:function(){window.console?"function"==typeof console.log?console.log.apply(console,e.call(arguments)):"object"==typeof console.log&&console.log(e.call(arguments)):window.opera&&"function"==typeof opera.postError&&opera.postError.apply(null,e.call(arguments))}}}),define("DS/UIKIT/Mask",["UWA/Core","DS/UIKIT/Spinner","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,t,n){"use strict";return{mask:function(i,s){var o;this.isMasked(i)&&this.unmask(i),i.addClassName("masked"),o=e.createElement("div",{class:"mask"}),s=e.is(s,"string")?s:n.loading,s=e.createElement("div",{class:"mask-wrapper",html:{tag:"div",class:"mask-content",html:[new t({visible:!0,animate:!0,spin:!0}),e.createElement("span",{class:"text",text:s})]}}).inject(o),o.inject(i)},unmask:function(e){var t=e.getElement(" > .mask");t&&t.destroy(),e.removeClassName("masked")},isMasked:function(e){return e.hasClassName("masked")}}}),define("DS/UIKIT/Popover",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","DS/UIKIT/Tooltip"],function(e,t,n,i,s){"use strict";var o={_positions:["top","top right","right bottom","right","right top","bottom right","bottom","bottom left","left top","left","left bottom","top left"],_defaultPositions:["top","right","bottom","left"],name:"popover",defaultOptions:{position:"right",trigger:"click",autoHideOnClickOutside:!0,delay:!1},init:function(e){this._parent(e),this._needsPositionAdjusment=!0},buildSkeleton:function(){var t=e.createElement,n=this.elements,i=this.options;n.container||(n.container=t("div",{class:this.name+" "+i.className+" "+this.getPositionClasses(i.position)}),n.arrow=t("div",{class:this.name+"-arrow"}).inject(n.container),i.title&&this.setTitle(i.title),n.body=t("div",{class:this.name+"-body",html:i.body||""}).inject(n.container),i.animate&&n.container.addClassName("fade"),this.handleEvents(),i.body=null)},adjustPosition:function(e,t,n){var i,s,o=document.body.getBoundingClientRect(),a=this.elements.container.getBoundingClientRect(),l=Math.floor(5*o.width/100),r=o.width-a.right<=l,c=a.left<l,h=this.positions;if(r||c)if(i=this.options.target.getPosition(document.body),s=this.elements.container.getSize(),e===h[0]&&n&&h[0]===h[h.length-1]){var u=r?o.width-a.width:0;this.elements.container.setStyle("left",u+"px"),this.elements.arrow.setStyle("left",r?i.x+t.width/2-u:i.x+t.width/2+"px")}else this.setPosition(e,i,t,s)},getPositionClasses:function(e){var t=e||this.options.position,n=t;return t.split(" ").length>1&&(0!==n.indexOf("left")&&0!==n.indexOf("right")?((t=n.indexOf("top")>-1?["top"]:["bottom"]).push(n.indexOf("left")>-1?"left":"right"),t=t[0]+" "+t.join("-")):t=t.split(" ").join("-")),t},getTitle:function(){var t=this.elements;return t.title||(t.title=e.createElement("h3",{class:this.name+"-title"}).inject(t.container)),t.title},setTitle:function(e){return this.getTitle().setText(e),this.isVisible&&this.updatePosition(this._lastValidPosition),this},hide:function(){this.elements.arrow.setStyle("left"),this._parent()}};return s.extend(o)}),define("DS/UIKIT/Alert",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Core"],function(e,t,n,i,s){"use strict";var o={name:"alert",defaultOptions:{className:"",messageClassName:"alert-primary",animate:!0,closable:!0,visible:!1,hideDelay:2e3,autoHide:!1,closeOnClick:!0,icon:!0,maximumVisibleMessages:5,fullWidth:!1,attributes:{}},isVisible:!1,messages:null,hidingIntervalId:null,init:function(e){var t=e||{};this._parent(t),this.messages=[],this.buildSkeleton(),this.add(this.options.messages),t.renderTo&&(this.inject(t.renderTo),delete this.options.renderTo)},buildSkeleton:function(){var t=this.elements;t.container||(t.container=e.createElement("div",{class:this.getClassNames(),events:{click:this.eventHandler.bind(this)}}),Object.keys(this.options.attributes).forEach(function(e){t.container.setAttribute(e,this.options.attributes[e])},this),this.options.fullWidth&&t.container.addClassName(this.name+"-fullwidth"))},add:function(e){var t=this;return(e=i.splat(e)).forEach(function(e){t.messages.push(e)}),this.elements.container.isInjected()&&this.showMessages(),this},toggleAutoHide:function(e,t){var n=this;e&&t?this.hidingIntervalId=setTimeout(function(){n.remove(t)},n.options.hideDelay):clearInterval(this.hidingIntervalId)},createMessage:function(t){var n,i,s,o,a=this,l=100,r=this.elements,c=this.options,h=this.getMessages(),u=0,d=c.messageClassName||"";for(h.length>0&&(l=h[h.length-1].getStyle("z-index")-1),t&&t.className&&(d=t.className),s=0,o=(d=d.split(" ")).length;s<o;s++)if((i=d[s].match(/(alert-)?(primary|warning|error|success|default|info)$/))&&!i[1]){"default"!==d[s]&&"info"!==d[s]||(d[s]="primary"),d[s]="alert-"+d[s];break}d=d.join(" "),n=e.createElement("div",{class:this.name+"-message "+d,html:t.message?t.message:t,styles:{zIndex:l}}),"object"==typeof t.attributes&&Object.keys(t.attributes).forEach(function(e){n.setAttribute(e,t.attributes[e])}),c.animate&&n.addClassName("fade"),c.closable,n.addClassName(this.name+"-closable"),e.createElement("span",{class:"close fonticon fonticon-cancel"}).inject(n,"top"),c.icon&&(n.addClassName(this.name+"-has-icon"),e.createElement("span",{class:"icon fonticon"}).inject(n,"top")),h.forEach(function(e){u+=e.getDimensions().outerHeight}),n.inject(r.container),setTimeout(function(){n.setStyle("top",Math.round(u)),c.animate&&n.addClassName("in"),c.autoHide&&(a.toggleAutoHide(!0,n),n.addEvents({mouseover:a.toggleAutoHide.bind(a,!1),mouseleave:a.toggleAutoHide.bind(a,!0,n)}))},10),this.dispatchEvent("onShowMessage",n)},getMessages:function(){return this.getContent().getElements("."+this.name+"-message")},showMessages:function(){var e=this,t=this.getMessages().length;this.isVisible&&t<this.options.maximumVisibleMessages&&(this.messages=this.messages.filter(function(n,i){if(n){if(t+i+1>e.options.maximumVisibleMessages)return!0;e.createMessage(n)}}))},updateMessages:function(){var e=this.getMessages(),t=0;e.forEach(function(e){var n=t,i=e.getDimensions();t+=i.outerHeight,e.setStyles({top:Math.round(n)})}),e.length<this.options.maximumVisibleMessages&&this.showMessages()},onPostInject:function(){this.showMessages(),(this.options.visible||this.isVisible)&&(this.isVisible=!1,this.show())},remove:function(e){var t=this;function n(e){t.dispatchEvent("onRemoveMessage",e),e.destroy(),t.updateMessages()}return this.options&&this.options.animate?(e.removeClassName("in"),setTimeout(n.bind(this,e),500)):n(e),this},eventHandler:function(e){var t,i=n.getElement(e),s=this.name+"-message";(t=i.hasClassName(s)?i:i.getClosest("."+s))&&(this.options.closeOnClick?(this.dispatchEvent("onClick",[e,t]),this.remove(t)):i.hasClassName("close")||i.getParent().hasClassName("close")?this.remove(t):this.dispatchEvent("onClick",[e,t]))},toggle:function(){return this[this.isVisible?"hide":"show"]()},show:function(){var e=this.elements;if(e)return this.isVisible||(this.isVisible=!0,e.container.isInjected()&&(e.container.setStyle("visibility","visible"),this.showMessages(),this.dispatchEvent("onShow"))),this},hide:function(){var e=this.elements;if(e)return this.isVisible&&(this.isVisible=!1,e.container.isInjected()&&(e.container.setStyle("visibility",""),this.dispatchEvent("onHide"))),this},destroy:function(){this.options&&(this.options.animate=!1),this.hide(),this._parent(),this.elements=null}};return s.extend(o)}),define("DS/UIKIT/Input/Text",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","DS/UIKIT/Input"],function(e,t,n,i,s){"use strict";var o=["ios","ipados"].includes(i.Platform.name);function a(e){var t,n,i;if(e){for(t=0,n=(e=e.split(" ")).length;t<n;t++)(i=e[t].match(/xsmall|small|large$/))&&!i[1]&&("small"===i[0]?e[t]="input-sm":"large"===i[0]?e[t]="input-lg":"xsmall"===i[0]&&(e[t]="input-xs"));return e.join(" ")}}var l={name:"form-control",defaultOptions:{className:"",multiline:!1,spellcheck:!0,fixIframedIosScroll:!1},init:function(e){(e=e||{}).className&&(e.className=a(e.className)),this._parent(e)},buildInput:function(){var t={},n=this.options,i=n.multiline?e.createElement("textarea"):e.createElement("input",{type:"text"});return["placeholder","required","pattern","rows","maxlength","spellcheck"].forEach(function(e){n[e]&&(t[e]=n[e])}),i.set(t),i},handleEvents:function(){if(this._parent(),this.options.fixIframedIosScroll&&o&&!this.options.multiline&&window!==window.parent){var t=this.elements;this.events&&!this.events.input.touchmove&&(this.events.input=e.merge(this.events.input,{touchmove:this.touchMove.bind(this),touchend:this.touchEnd.bind(this)}),this.isDisabled()?t.input.removeEvents(this.events.input):t.input.addEvents(this.events.input))}},setFocus:function(e){return this._parent(e),this.syncInput(),this},syncInput:function(){var e,t,n=this.elements.input,s=n.getAttribute("placeholder");s&&!i.Features.inputPlaceholder&&(e=this.getValue(),(t=n.getDocument().activeElement!==n&&!e)!==n.hasClassName("placeholder")&&(n.toggleClassName("placeholder",t),n.set("textarea"===n.getTagName()?"text":"value",t?s:e)))},getValue:function(){return this.elements.input.hasClassName("placeholder")?"":this._parent()},setClassName:function(e){return this.options.className=a(e),this.getContent().className=this.getClassNames(),this},touchMove:function(e){var t,n,i,s,o,a,l,r,c,h,u,d,m=this.throttle;if(!m){var p=this.elements.input,f=p.getBoundingClientRect();f.width>90&&11*p.value.length>f.width?(this.throttle=(t=this.setCaret.bind(this),n=300,i=!1,c=null,h=0,u=function(){h=new Date,c=null,r=t.apply(a,l)},(d=function(){var e=new Date;h||i||(h=e);var d=n-(e-h);return a=o||this,l=arguments,d<=0?(clearTimeout(c),c=null,h=e,r=t.apply(a,l)):!c&&s&&(c=setTimeout(u,d)),r}).cancel=function(){clearTimeout(c),h=0,c=l=null},d),this.throttle.rect=f):this.throttle={canceled:!0}}m&&!m.canceled&&(e.targetTouches&&e.targetTouches[0]&&(m.event=e.targetTouches[0]),e.preventDefault(),m())},touchEnd:function(){this.throttle&&(this.throttle.cancel&&this.throttle.cancel(),delete this.throttle)},setCaret:function(){var e=this.elements.input,t=this.throttle,n=t.rect,i=t.event.clientX,s=e.selectionStart,o=s;i<n.left+30?o=s-5:i>n.right-30&&(o=s+5),(s<5||s<e.value.lenght-5||o!==s)&&(e.selectionStart=e.selectionEnd=o,this.setFocus(!1),this.setFocus(!0))}};return s.extend(l)}),define("DS/UIKIT/Menu",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Scroller"],function(e,t,n,i,s,o){"use strict";var a,l=(a=/^(header|divider)$/,function(e){if(!e)return!1;for(var t=e.split(" "),n=0;n<t.length;n++)if(a.test(t[n]))return!0;return!1});var r,c={name:"",templateClassname:"",backItem:null,items:null,isVisible:!1,keyboardIndex:-1,defaultOptions:{multiSelect:!1,attributes:{}},init:function(e){void 0===(e=e||{}).kb&&(e.kb=!0),this._parent(e),this.items=[],this.buildSkeleton(),e.items&&e.items.forEach(function(e){this.addItem(e)},this)},buildSkeleton:function(){var t=e.createElement,n=this.elements;n.container||(n.container=t("div",{class:this.getClassNames(""),styles:{display:"none"}}),this.options.zindex&&n.container.setStyle("z-index",this.options.zindex),Object.keys(this.options.attributes).forEach(function(e){n.container.setAttribute(e,this.options.attributes[e])},this),n.wrapper=t("ul",{class:this.name+"-wrap",tabindex:"1"}),this.options.multiSelect&&n.wrapper.addClassName("dropdown-multiselect"),n.wrapper.inject(n.container),this.handleEvents())},hide:function(){return this.isVisible&&(this.isVisible=!1,this.getContent().setStyle("display","none"),this.dispatchEvent("onHide")),this},show:function(){return this.isVisible||(this.isVisible=!0,this.getContent().setStyle("display",""),this.focusIt(),this.dispatchEvent("onShow")),this},focusIt:function(){this.options.kb&&this.elements.wrapper.focus()},addItem:function(e){var t=this;return i.splat(e).forEach(function(e){t._addItem(e)}),this},addBackItem:function(e){return e.isBackItem=!0,this.backItem=this._addItem(e),this.backItem},_addItem:function(t){var n,s,o=this.elements,a=t.className||"",r={},c=this;return r.id=t.id||"itm-"+i.getUUID().substr(0,6),t.name||(r.name=t.text),t.disabled&&(a+=" disabled"),t.selected&&(t.selectable=!0),t.selectable&&(a+=" selectable",r.toggleSelection=function(){c.toggleSelection(r)}),r.elements={},r.elements.container=e.createElement("li",{class:"item "+a,id:r.id,title:t.title||""}),Object.keys(t.attributes||{}).forEach(function(e){r.elements.container.setAttribute(e,t.attributes[e])}),t.name&&r.elements.container.set("name",t.name),t.template?r.elements.content=e.createElement("div",{class:"item "+this.templateClassname,id:r.id,html:t.template}).inject(r.elements.container):t.text&&(r.elements.content=e.createElement("span",{class:"item-text",text:t.text||""}).inject(r.elements.container)),l(t.className)?r.elements.container.removeClassName("item"):(t.fonticon&&(r.elements.icon=e.createElement("span",{class:"fonticon fonticon-"+t.fonticon}).inject(r.elements.container,"top"),o.wrapper.addClassName(this.name+"-icons")),!t.fonticon&&t.icon&&(s=t.icon,/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(s)?r.elements.icon=e.createElement("img",{src:t.icon,class:"item-icon"}):r.elements.icon=e.createElement("span",{class:t.icon}),r.elements.icon.inject(r.elements.container,"top"),o.wrapper.addClassName(this.name+"-icons"))),t.handler&&e.is(t.handler,"function")&&(r.handler=t.handler),t.index&&t.index!==this.items.length+1?(n=this.items[t.index-1],r.elements.container.inject(n.elements.container,"before"),t.isBackItem||this.items.splice(t.index-1,0,e.merge(r,t))):(r.elements.container.inject(o.wrapper),this.items.push(e.merge(r,t))),t.selected&&this.select(r),r},removeItem:function(e){var t=this;return i.splat(e).forEach(function(e){t._removeItem(e)}),this},removeBackItem:function(){return this.backItem&&this.backItem.elements.container.destroy(),this.backItem=null,this},_removeItem:function(e){var t=this.getItem(e);t&&(t.elements.container.destroy(),this.items.splice(this.items.indexOf(t),1))},updateItem:function(e){var t=this;return i.splat(e).forEach(function(e){t._updateItem(e)}),this},_updateItem:function(t){var n,i=this.getItem(t.id);i&&(e.is(t.text)&&i.text!==t.text&&(i.text=t.text,i.elements.container.getElement(".item-text").setText(t.text)),n=i.elements.container.getElement("."+this.templateClassname),e.is(t.template)&&n&&n.setHTML(t.template),e.is(t.name)&&i.name!==t.name&&(i.name=t.name),e.is(t.title)&&i.title!==t.title&&(i.title=t.title,i.elements.container.title=t.title),e.is(t.fonticon)&&i.fonticon!==t.fonticon?(i.fonticon=t.fonticon,function(t){t.elements.icon&&t.elements.icon.destroy(),t.elements.icon=e.createElement("span",{class:"fonticon fonticon-"+t.fonticon}).inject(t.elements.container,"top")}(i)):e.is(t.icon)&&i.icon!==t.icon&&(i.icon=t.icon,function(t){t.elements.icon&&t.elements.icon.destroy(),t.elements.icon=e.createElement("span",{class:t.icon}).inject(t.elements.container,"top")}(i)),e.is(t.disabled)&&i.elements.container.toggleClassName("disabled",t.disabled),e.is(t.className)&&i.className!==t.className&&(i.elements.container.removeClassName(i.className),i.elements.container.addClassName(t.className),i.className=t.className,l(t.className)?i.elements.container.removeClassName("item"):i.elements.container.addClassName("item")),e.is(t.handler)&&(i.handler=t.handler))},enableItem:function(e){var t=this.getItem(e);return t&&t.elements.container.removeClassName("disabled"),t&&(t.disabled=!1),this},disableItem:function(e){var t=this.getItem(e);return t&&t.elements.container.addClassName("disabled"),t&&(t.disabled=!0),this},getItem:function(e){var t,n,i,s=!1;for(t=0,n=this.items.length;t<n;t+=1){if(s=this.items[t],e&&e.nodeType){if(i=e.hasClassName("item")?e:e.getParent(),s.id===i.id)break}else if(t===e||s.id===e||s.name===e)break;s=!1}return s},_hoverItem:function(e,t){var n=this.getItem(e);n&&((t=void 0===t||t)?(n.elements.container.addClassName("js-selected"),this.options.kb&&n.elements.container.focus()):n.elements.container.removeClassName("js-selected"))},_updateKeyboardIndex:function(e,t){var n,i=t||this.keyboardIndex,s=this.keyboardIndex,o=!1;-1===i&&"reset"!==e?(i=0,o=!0):"down"===e&&i<this.items.length-1?(i+=1,o=!0):"up"===e&&i>0?(i-=1,o=!0):"reset"===e?(o=!0,this._hoverItem(i,!1),i=-1):e||(o=!0),(n=this.getItem(i))&&l(n.elements.container.className)&&(o=!1,"down"!==e&&"up"!==e||this._updateKeyboardIndex(e,i)),o&&i>=0&&(this._hoverItem(s,!1),this._hoverItem(i),this.keyboardIndex=i)},toggleSelection:function(e){this.select(e,!e.selected)},select:(r=function(e,t){e.selected=t,e.elements.container[t?"addClassName":"removeClassName"]("selected")},function(e,t){var n,i=!this.options.multiSelect;if(void 0===t||!0===t)i&&(n=this.items.filter(function(e){return e.selected}))[0]&&r(n[0],!1),r(e,!0);else{if(i&&e.selected)return;r(e,!1)}}),setHeight:function(e){var t=isNaN(e);this.elements.container.setStyle("height",t?"":e+"px"),this.height=e,t?this.removeScroller():this.setScroller()},preserveWidth:function(e){var t;e||(t=this.elements.container.getSize().width),this.elements.container.setStyle("width",e?"":t+"px")},setScroller:function(){this.scroller||(this.scroller=new o({element:this.elements.container,scrollbarsMargin:0}))},removeScroller:function(){this.scroller&&(this.scroller.destroy(),delete this.scroller)},handleEvents:function(){this.events||(this.events={container:{mouseout:this.dispatchEvent.bind(this,"onMouseout"),mouseover:this.dispatchEvent.bind(this,"onMouseover"),click:this.dispatchEvent.bind(this,"onClick"),keydown:this.dispatchEvent.bind(this,"onKeydown")}}),this.elements.container.addEvents(this.events.container)},destroy:function(e){this.removeScroller(),this.elements.container.removeEvents(this.events.container),e?(this.removeEvents(),delete this.options):this._parent()}};return s.extend(c)}),define("DS/UIKIT/DropdownMenu",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","DS/UIKIT/Dropdown","DS/UIKIT/Menu"],function(e,t,n,i,s,o){"use strict";var a="dropdown-menu",l="dropdown-menu-hidden",r="item-submenu",c=o.extend({name:a,templateClassname:"item-template"}),h=i.Client.Features.touchEvents;function u(e,t,n){Object.keys(e).forEach(function(i){!function(e,t,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n,i)}(i,t,e[i],n)})}var d,m=(d=/^(header|divider|disabled)$/,function(e){if(!e)return!1;for(var t=e.split(" "),n=0;n<t.length;n++)if(d.test(t[n]))return!0;return!1}),p={name:a,items:null,menus:null,activeMenu:null,defaultOptions:{subMenuMaxDepth:20,maxItemsBeforeScroll:12,responsiveMode:!0,responsiveItemsWithSubMenusDivided:!1,scrollMode:!0,zindex:1e3,scrollableResponsive:!1},init:function(e){this.menus=[],this.items=[],null==(e=e||{}).kb&&(e.kb=!0),this.setupTemplates(e),this._parent(e)},buildSkeleton:function(){var e=this.elements,t=this.options;e.container||(this.events.container={},this._mainMenu=this.addMenu(t.items,0,null,t.multiSelect),e.container=this._mainMenu.elements.container,e.container.className=this.getClassNames(),this._handleEvents())},addMenu:function(t,n,i,s){var o,a=this,l=[],u=[],d=this.options,m=d.scrollMode,p=d.renderTo,f=d.className,g=e.is(f,"string")?f.split(" "):[],v={kb:d.kb,multiSelect:s,items:t,attributes:d.attributes};return m&&e.merge(v,{events:{onMouseover:this._onMouseover.bind(this),onMouseout:this._onMouseout.bind(this),onClick:this._onClick.bind(this),onKeydown:this._onKeyDown.bind(this)},zindex:d.zindex+n}),(o=new c(v)).position=i||"bottom right",this.menus.push(o),t.forEach(function(e,t){e.items&&n<d.subMenuMaxDepth&&(l.push(this.addMenu(e.items,n+1,e.position,e.multiSelect)),u.push(t))},this),this.items=this.items.concat(o.items),l.length&&(h||o.elements.container.addEventListener("touchstart",this._onHybridTouch.bind(this),{passive:!0}),l.forEach(function(t,n){var i,s=o.getItem(u[n]);if(m){var l=t.elements.container,c="menu-"+s.id,h=g.map(function(e){return e+"-sub-menu"});a.elements[c]=l,l.addClassName(c),h.forEach(function(e){return l.addClassName(e)}),a.elements.container&&a.elements.container.isInjected()&&(p=p||document.body,l.inject(p))}else t.inject(s.elements.container);s.elements.container.addClassName(r),d.responsiveItemsWithSubMenusDivided||s.elements.container.addClassName("hide-responsive-divider"),i=e.createElement("div",{class:"next-icon"}),e.createElement("span",{class:"divider"}).inject(i),i.inject(s.elements.container),e.createElement("span",{class:"fonticon fonticon-right-open"}).inject(i),t.parentItem=s})),o.childMenus=l,o},_enforceMaxItemsBeforeScroll:function(e){var t=e.items.filter(function(e){return!e.elements.container.hasClassName("hidden")});if(t.length>this.options.maxItemsBeforeScroll){var n=t[this.options.maxItemsBeforeScroll],i=e.items.filter(function(e){return e.id===n.id})[0].elements.container.getPosition().y;e.preserveWidth(),e.setHeight(i)}return e.getContent().getSize()},setupTemplates:function(t){this.template={},this.template.getItem=function(e){return e.hasClassName("item")?e:e.getParent(".item")},e.extend(this.template,t.template)},addItem:function(e){var t=this;return i.splat(e).forEach(function(e){t._addItem(e)}),this},_getSubmenuForItem:function(e){var t=this.getItem(e);return t&&this._getMenuFromParentItem(t.id)},_addBackItem:function(e){var t;e.parentItemId&&(t=this._getSubmenuForItem(e.parentItemId))&&t.addBackItem(e)},_addItem:function(t){var n,i,s,o=this,a=this.elements,l=this.options.scrollMode,c=this.options.renderTo,u=this.options.responsiveItemsWithSubMenusDivided;function d(t,n,i){var s,d,m=o.addMenu(n,0,null,i),p=t.elements.container;if(l){var f=m.elements.container,g="menu-"+t.id;a[g]=f,f.addClassName(g),o._getMenuFromItem(t.id).childMenus.push(m),a.container.isInjected()&&(c=c||document.body,f.inject(c))}else m.inject(t.elements.container);return p.addClassName(r),u||t.elements.container.addClassName("hide-responsive-divider"),s=e.createElement("span",{class:"divider"}),(d=e.createElement("div",{class:"next-icon"})).inject(p),s.inject(d),e.createElement("span",{class:"fonticon fonticon-right-open"}).inject(d),m.parentItem=t,!h&&p.addEventListener("touchstart",o._onHybridTouch.bind(o),{passive:!0}),l?o.updatePosition(null,!1,m):o.updatePosition(),m}if(t.parentItemId)if(i=o._getSubmenuForItem(t.parentItemId))t.items?t.text||t.name?((n=i._addItem(t))&&this.items.push(n),n&&d(n,t.items,t.multiSelect)):t.items.forEach(function(e){o.items.push(i._addItem(e))}):this.items.push(i._addItem(t));else{if(!(s=this.getItem(t.parentItemId)))return;t.items&&(t.text||t.name)?i=d(s,[t],t.multiSelect):d(s,t.items||[t],t.multiSelect)}else i=this.menus[0],t.items?((s=i._addItem(t))&&this.items.push(s),s&&d(s,t.items,t.multiSelect)):this.items.push(i._addItem(t))},removeItem:function(e){var t=this;return i.splat(e).forEach(function(e){t._removeItem(e)}),this},_removeItem:function(e){var t,n,i=this,s=this.getItem(e),o=i.options.scrollMode;s&&(n=this._getMenuFromItem(s.id),(t=this._getMenuFromParentItem(s.id))&&(this.items=this.items.filter(function(n){var s=i._getMenuFromItem(n.id);return!(!s||s.parentItem&&(!s.parentItem||s.parentItem.id===e))||(t.removeItem(n),!1)}),this.menus.splice(this.menus.indexOf(t),1),o&&(n&&n.childMenus.splice(n.childMenus.indexOf(t)),delete i.elements["menu-"+s.id]),t.destroy()),n&&n.removeItem(e),this.items.splice(this.items.indexOf(s),1))},updateItem:function(e){var t=this;return i.splat(e).forEach(function(e){t._updateItem(e)}),this},_updateItem:function(e){var t,n;(n=this.getItem(e.id))&&(t=this._getMenuFromItem(n.id),e.id=n.id,t&&t.updateItem(e))},enableItem:function(e){var t=this.getItem(e);return t&&t.elements.container.removeClassName("disabled"),this},disableItem:function(e){var t=this.getItem(e);return t&&t.elements.container.addClassName("disabled"),this},getItem:function(e){var t,n,i,s=!1;for(t=0,n=this.items.length;t<n;t++){if(s=this.items[t],e&&e.nodeType){if(i=e.hasClassName("item")?e:e.getParent(),s.id===i.id)break}else if(t===e||s.id===e||s.name===e)break;s=!1}return s},setDropDirection:function(e,t,n,i){var s=this.options;if(!s.scrollMode)return this._parent(e,t,n,i);var o=this.elements.container,a=s.position.indexOf("top")>-1,l=e+t>i.viewportHeight+i.scrollTop,r=e-t-n.offsetHeight>i.scrollTop,c=e-i.scrollTop-n.offsetHeight-2>i.viewportHeight+i.scrollTop-e;return(!a&&l&&c||a&&(!r||c))&&(e=e-t-n.offsetHeight-2,a=!0),a?o.addClassName("dropup"):o.removeClassName("dropup"),e},updatePosition:function(){var e,t,n,i,s;function o(e){e.removeScroller(),e.setHeight(NaN),e.preserveWidth(!0)}function a(a,r){var c,h,u,d="right",m="bottom",p=m+"-"+d,f=a.getContent(),g=a.parentItem.elements.container,v=e._getMenuFromItem(g.id),b=v.getContent(),I=b.getSize(),E={};if(e.options.responsiveMode&&e.setNonResponsiveMode(a),a._position&&f.removeClassName(a._position),f.addClassName(p),n?(o(a),h=v._offsets||e._position.offsets||{x:0,y:0},f.addClassName("js-visible")):h=b.getPosition(),u=f.getSize(),h.x+I.width+u.width>t.viewportWidth||a.position&&a.position.indexOf("left")>-1&&h.x-u.width>0?(d="left",c=h.x-u.width):c=h.x+I.width,e.options.responsiveMode&&h.x+I.width+u.width>t.viewportWidth&&h.x-u.width<0||r){if(E=h,a!==e._mainMenu&&void 0===s&&(s=h.x>t.viewportWidth/2||h.x+u.width>t.width/4),E=s?{x:h.x+I.width-u.width,y:h.y}:h,e.setResponsiveMode(a,r),!r)return n&&f.removeClassName("js-visible"),!0}else a._position=m+"-"+d,n&&(E.x=c,u=e._enforceMaxItemsBeforeScroll(a)),function(e,s,o,a,r,c,h,u){var d,m=0,p=0,f=0,g=0,v=0,b=!0;n&&u&&c&&(v=i?u.getPosition(i).y:u.getOffsets().y,m=v-a.y,p=m+u.offsetHeight,f=parseInt(h.getStyle("marginTop")),g=parseInt(h.getStyle("borderTopWidth")),m<0&&(m=0),p>r.height&&(p=r.height));b=!n||a.y+p-t.scrollTop>t.viewportHeight+t.scrollTop-p-a.y,a.y+m+o.height-f>t.viewportHeight+t.scrollTop&&b||e.position&&e.position.indexOf("top")>-1&&a.y+p-o.height>t.scrollTop?(e._position=e._position.replace("bottom","top"),d=a.y+p-o.height):d=a.y+m-f-g;n&&(s.y=d,l(e,o,s,f))}(a,E,u,h,I,v,b,g);n&&(a.getContent().setStyle("left",E.x+"px"),a.getContent().setStyle("top",E.y+"px"),a._offsets=E,f.removeClassName("js-visible")),p!==a._position&&(f.removeClassName(p),f.addClassName(a._position))}function l(n,i,s,o){var a=n!==e._mainMenu,l=e.options.contextual,r=e.options.target,c=e.options.altPosition;if(a?n._position.indexOf("top")>-1:e.elements.container.hasClassName("dropup")){if(s.y<t.scrollTop&&(s.y=t.scrollTop-o,(a||l||!a&&c)&&s.y+i.height>t.viewportHeight+t.scrollTop&&(n.preserveWidth(),n.setHeight(t.viewportHeight)),!a&&!l&&r&&!c&&s.y+i.height>e._position.initialOffsets.y-r.offsetHeight)){var h=e._position.initialOffsets.y-r.offsetHeight-s.y;n.preserveWidth(),n.setHeight(h)}}else s.y+i.height>t.viewportHeight+t.scrollTop&&(a||l?(s.y=t.viewportHeight-i.height-o-t.scrollTop,s.y<t.scrollTop&&(s.y=t.scrollTop-o,i.height>t.viewportHeight&&(n.preserveWidth(),n.setHeight(t.viewportHeight)))):(n.preserveWidth(),n.setHeight(t.scrollTop+t.viewportHeight-s.y-o)))}return function(s,r,c){n=(e=this).options.scrollMode,i=e.options.renderTo;var h,u=r||e.options.forceResponsive;if(e.isVisible){if(t=e.getDisplayContext(),c){if(u)return;h=c.childMenus,a(c,r)}else if(h=e.menus,!u&&n){o(e._mainMenu);var d=e._enforceMaxItemsBeforeScroll(e._mainMenu);e._parent(s,r);var m=e._position.offsets.y;l(e._mainMenu,d,e._position.offsets,2),m!==e._position.offsets.y&&e.elements.container.setStyles({top:e._position.offsets.y})}else e._parent(s,r);if(0!==h.length){n||e.getContent().addClassName("js-visible");for(var p=1,f=h.length;p<f;p++){if(a(h[p],u))break}n||e.getContent().removeClassName("js-visible")}}}}(),setNonResponsiveMode:function(e){var t=this.options.scrollMode,n=e.parentItem&&this._getMenuFromItem(e.parentItem.id);e.removeBackItem(),n&&n.getContent().removeClassName("responsive-menu"),t||!e.parentItem||e.parentItem.elements.container.getElement(".dropdown-menu")||(n.elements.container.removeChild(e.elements.container),e.inject(e.parentItem.elements.container))},setResponsiveMode:function(e,t){var n=this.options.scrollMode,i=!this.options.responsiveItemsWithSubMenusDivided,s=this._getMenuFromItem(e.parentItem.id);if(e._position="dropdown-menu-responsive-wrap responsive-menu","dropdown-menu-responsive-wrap responsive-menu"===e._position&&!s.getContent().hasClassName("responsive-menu")&&s.getContent().addClassName("responsive-menu"),t){if(s=this._getMenuFromItem(e.parentItem.id),!e.backItem&&(this._addBackItem({text:e.parentItem.text,fonticon:"left-open",className:"item-back",index:1,parentItemId:e.parentItem.id}),i)){var o=e.getContent().querySelector(".item-back");o&&o.addClassName("hide-item-back-divider")}!n&&e.parentItem.elements.container.getElement(".dropdown-menu")&&(e.parentItem.elements.container.removeChild(e.elements.container),e.inject(s.elements.container))}else this.updatePosition(null,!0)},show:function(e,t){var n;if(this.items.length)return n=this._parent(e,t),this.activeMenu=this.menus[0],this.activeMenu.keyboardIndex=-1,this.activeMenu.focusIt(),this.usingKeyboard=!1,n},hide:function(e){return this._hideSubmenus(),this._parent(e)},_getMenu:function(e){var t,n,i=!1;for(t=0,n=this.menus.length;t<n&&(i=this.menus[t],!e||!e.nodeType||i.elements.container!==e)&&(t!==e&&i.id!==e&&i.name!==e);t++)i=!1;return i},_getMenuFromItem:function(e){return this.menus.filter(function(t){return t.getItem(e)})[0]},_getMenuFromBackItem:function(e){return this.menus.filter(function(t){return t.backItem&&t.backItem.id===e})[0]},_getMenuFromParentItem:function(e){return this.menus.filter(function(t){return t.parentItem&&(t.parentItem.id===e||t.parentItem.name===e||t.parentItem.value===e)})[0]},_hideSubmenus:function(){var e,t,n,i;return function(s){if(e=this,this.menus)if(this.menus.length<=1)this.menus[0].items.forEach(function(e){(e=e.elements&&e.elements.container).removeClassName("js-selected")});else if(s)!function n(i){i&&i.items.forEach(function(i){(i=i.elements&&i.elements.container)&&i.hasClassName(r)&&(t=e._getMenuFromParentItem(i.id),i.removeClassName("js-selected"),t&&t._updateKeyboardIndex("reset"),t&&t.hide(),n(t))})}(e._getMenuFromItem(s));else{this.menus[0].elements.container.removeClassName(l);for(var o=1,a=this.menus.length;o<a;o++)t=this.menus[o],(n=t.parentItem&&this.getItem(t.parentItem.id))&&n.elements.container.removeClassName("js-selected"),(i=t.backItem)&&i.elements.container.hasClassName("item-back")?this._hideResponsiveMenu(t,this._getMenuFromItem(t.parentItem.id)):t.hide()}}}(),_handleItemSelection:function(e,t){var n,i,s=this.options.scrollMode,o=this.options.scrollableResponsive;if(this.timeoutId&&clearTimeout(this.timeoutId),e.hasClassName(r)||e.hasClassName("item-template")){if(n=this._getMenuFromParentItem(e.id),this.isVisible&&n&&!n.isVisible){var a=!1;n.elements.container.hasClassName("responsive-menu")&&(a=!0),this._hideSubmenus(e.id),n=this._getMenuFromParentItem(e.id),!t&&e.addClassName("js-selected"),i=this._getMenuFromItem(n.parentItem.id),s&&this.updatePosition(null,a,n),n&&n.show(),a&&(i.elements.container.addClassName(l),o&&this._enforceMaxItemsBeforeScroll(n)),this.activeMenu=n}}else e.hasClassName("item-back")?(n=this._getMenuFromBackItem(e.id),i=this._getMenuFromItem(n.parentItem.id),this._hideResponsiveMenu(n,i)):e.hasClassName("item")&&this._hideSubmenus(e.id)},_hideResponsiveMenu:function(e,t){e&&e.hide(),t&&t.elements.container.removeClassName(l),this.activeMenu=t},_handleItemClick:function(t,i){var s,o,a,l,c=n.getElement(t),u=h,d=this.options,p=!1,f=c.classList.contains("next-icon")||c.parentElement.classList.contains("next-icon"),g=!d.responsiveItemsWithSubMenusDivided;if(h||!this._shouldStopEventChain){if(!i){if(!(i=this.template.getItem(c)))return;s=i.classList.contains("item-back"),i=s?(a=this._getMenuFromBackItem(i.id?i.id:i)).backItem:this.getItem(i.id?i.id:i)}i&&!m(i.elements.container.className)&&(a||(a=this._getMenuFromParentItem(i.id)||this._getMenuFromItem(i.id)),l=a&&a._position&&a._position.contains("dropdown-menu-responsive-wrap"),o=a&&a.getContent().hasClassName("responsive-menu"),i.selectable&&(o&&!g&&!c.classList.contains("next-icon")&&!c.parentElement.classList.contains("next-icon")||o&&g&&void 0===i.items||!o)&&i.toggleSelection(),(u||s||l||g)&&((s&&c.classList.contains("fonticon")||o&&(f||g)||!s&&!o)&&(!s&&g&&i.items&&(f=!0),this._handleItemSelection(i.elements.container,f)),p=i.elements.container.hasClassName(r)&&!o||f||s||g&&i.items),this.dispatchEvent("onClick",[t,i,p],this),e.is(i.handler,"function")&&i.handler.call(this,t))}else this._shouldStopEventChain=!1},_handleEvents:function(){var t,i,s,o,a=this.options;this.options.scrollMode||(this.events.container={mouseout:this._onMouseout.bind(this),mouseover:this._onMouseover.bind(this),mouseleave:this.dispatchEvent.bind(this,"onMouseLeave"),click:this._onClick.bind(this)},a.kb&&(this.events.container.keydown=this._onKeyDown.bind(this)),this.elements.container.addEvents(this.events.container)),a.contextual?(this.events.target={mousedown:function(t){var i=n.getElement(t),s=2===e.Event.whichButton(t);i.isInjected(this.elements.container)||i===this.elements.container||s&&this.isVisible&&this.updatePosition(t)}.bind(this),contextmenu:function(e){this.show(!0,e),n.stop(e)}.bind(this)},u(this.events.target,a.target,!0)):a.bound&&(this.events.target={click:this.toggle.bind(this)},u(this.events.target,a.target,!0)),this.events.window={resize:(t=this.resize,i=100,function(){var e,n=this,a=arguments;e=s&&!o,clearTimeout(o),o=setTimeout(function(){o=null,s||t.apply(n,a)},i),e&&t.apply(n,a)}).bind(this)},window.addEventListener("resize",this.events.window.resize)},_onClick:function(e){this._handleItemClick(e)},_onHybridTouch:function(e){var t,i=n.getElement(e),s=this.template.getItem(i),o=i.id||i.parentElement.id||i.parentElement.parentElement.id;if(s&&(s=this.getItem(o)))if((t=s.elements.container).hasClassName("item-submenu")){var a=this._getMenuFromParentItem(o);i.hasClassName("item-back")||a&&a._position&&a._position.contains("dropdown-menu-responsive-wrap")||(this._shouldStopEventChain=!0,setTimeout(function(){this._shouldStopEventChain=!1},50))}else this._handleItemSelection(t)},_onMouseover:function(e){var t,i,s,o=n.getElement(e),a=o.id;if(a=a||o.parentElement.id||o.parentElement.parentElement.id,i=this._getMenuFromParentItem(a),!(o.hasClassName("item-back")||i&&i._position&&i._position.contains("dropdown-menu-responsive-wrap")||(this.timeoutId&&clearTimeout(this.timeoutId),this.usingKeyboard))){if(!(s=this.template.getItem(o)))return;(s=this.getItem(s.id?s.id:s))&&this._handleItemSelection(s.elements.container)}this.options.responsiveMode&&(s=o.parentElement.classList.contains("next-icon")?o.parentElement.parentElement:o.parentElement,s=(i=this._getMenuFromItem(s.id))&&i.getItem(s.id),t=i&&i.getContent().hasClassName("responsive-menu"),s&&t&&(s.elements.container.classList.contains("hide-responsive-divider")||o.classList.contains("next-icon")||o.parentElement.classList.contains("next-icon"))&&!s.elements.container.classList.contains("selected")&&(s.elements.container.addClassName("js-not-selectable"),s.elements.container.removeClassName("js-selected")))},_onMouseout:function(e){var t,i,s=n.getElement(e),o=s&&this._getMenuFromParentItem(s.id);this.usingKeyboard||s.hasClassName("item-back")||o&&o._position&&o._position.contains("dropdown-menu-responsive-wrap")||this.elements.container.classList.contains("dropdown-menu-hidden")||(clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this._hideSubmenus.bind(this),500)),this.options.responsiveMode&&(t=s.parentElement.classList.contains("next-icon")?s.parentElement.parentElement:s.parentElement,t=(o=this._getMenuFromItem(t.id))&&o.getItem(t.id),i=o&&o.getContent().hasClassName("responsive-menu"),t&&i&&(t.elements.container.classList.contains("hide-responsive-divider")||s.classList.contains("next-icon")||s.parentElement.classList.contains("next-icon"))&&t.elements.container.removeClassName("js-not-selectable"))},_onKeyDown:function(t){var n,i,s,o,a=this;function l(){a.activeMenu.hide(),o=a.activeMenu.getContent().hasClassName("dropdown-menu-responsive-wrap"),(i=a.activeMenu.parentItem&&a._getMenuFromItem(a.activeMenu.parentItem.id))&&(o&&a._hideResponsiveMenu(a.activeMenu,i),a.activeMenu._updateKeyboardIndex(),a.activeMenu=i,a.activeMenu.focusIt())}function r(){(n=a._getActiveItem())&&(n=n.elements.container,a._handleItemSelection(n)),a.activeMenu._updateKeyboardIndex()}switch(a.usingKeyboard=!0,t.which){case 13:(n=a._getActiveItem())&&a._handleItemClick(t,a._getActiveItem()),a.options.closeOnClick&&(a.hide(),a.options.target.focus()),e.Event.preventDefault(t);break;case 27:a.hide(),a.options.target.focus(),e.Event.preventDefault(t);break;case 37:s=a.activeMenu.elements.container,n=a._getActiveItem(),s.hasClassName("bottom-left")||s.hasClassName("top-left")?n&&n.elements.container.hasClassName("item-submenu")&&r():l(),e.Event.preventDefault(t);break;case 38:a.activeMenu._updateKeyboardIndex("up"),e.Event.preventDefault(t);break;case 39:s=a.activeMenu.elements.container,n=a._getActiveItem(),s.hasClassName("bottom-left")||s.hasClassName("top-left")?l():n&&n.elements.container.hasClassName("item-submenu")&&r(),e.Event.preventDefault(t);break;case 40:a.activeMenu._updateKeyboardIndex("down"),e.Event.preventDefault(t);break;default:e.Event.preventDefault(t)}},_getActiveItem:function(){var e=this.activeMenu.keyboardIndex;return!!(this.activeMenu&&e>=0)&&this.activeMenu.getItem(e)},getSelectedItems:function(){var e=[];return this.items&&(e=this.items.filter(function(e){return e.selected})),e},isSelected:function(e){var t=this.getItem(e);return t&&t.selected},toggleSelection:function(e){e&&e.selectable&&e.toggleSelection()},resize:function(){this.isVisible&&this.updatePosition()},destroy:function(){if(null!==this.menus){window.removeEventListener("resize",this.events.window.resize);for(var e=0,t=this.menus.length;e<t;e++)this.menus[e].destroy(!0);this._parent(),delete this.menus,delete this.items,delete this._mainMenu,delete this.template}}};return s.extend(p)}),define("DS/UIKIT/Native/Dropdown",["UWA/Event","UWA/Utils","DS/UIKIT/DropdownMenu","DS/CefCommunication/CefCommunication"],function(e,t,n,i){"use strict";var s=["command","checkbox","radio","separator"],o=[];function a(e){return function(t){t.menuId&&i.dispatchEvent(e+"-"+t.menuId,t)}}i.hasEvent("exitMenu")||(i.addNativeEventListener("exitMenu",a("exitMenu")),i.addNativeEventListener("commandFacet",a("commandFacet")));var l={id:"",defaultOptions:{bound:!0,scrollMode:!1},init:function(e){e||(e={}),this.id=e.id||"mnu-"+t.getUUID().substr(0,6),this._parent(e),this.options.contextual&&o.push(this)},show:function(e,t){this.options.contextual&&o.length>0&&o.forEach(function(e){e.hide()}),this._parent(e,t),i.isAvailable()&&(this.elements.container.setStyle("display","none"),i.dispatchEventToNative("displayMenu",this.getNativeModel()))},hide:function(e){this._parent(e),i.isAvailable()&&this.elements.container.setStyle("display","")},_handleEvents:function(){function t(t){var n,s=e.getElement(t);!s&&t.menuId&&t.id&&(s=t.id),s&&(n=this.getItem(s))&&(this.dispatchEvent("onClick",[t,n],this),i.isAvailable()&&n.nativeHandler?n.nativeHandler.call(this,t):"function"==typeof n.handler&&n.handler.call(this,t),this.hide())}this._parent(),this.elements.container.removeEvent("click",this.events.container.click),this.elements.container.addEvent("click",t.bind(this)),i.isAvailable()&&(i.addNativeEventListener("exitMenu-"+this.id,this.hide.bind(this)),i.addNativeEventListener("commandFacet-"+this.id,t.bind(this)))},getNativeModel:function(){if(this.menus.length){var e={menuId:this.id,children:[]};return function e(t,n){var i,o;t.forEach(function(t){(i={}).id=t.id,i.type=-1!==s.indexOf(t.type)?t.type:s[0],i.label=t.text,t.data&&(i.catcommand=t.data),t.icon&&(i.icon=t.icon),null!=t.disabled&&(i.disabled=t.disabled),t.title&&(i.title=t.title),t.items&&"command"===i.type&&(o=this._getMenuFromParentItem(t.id),i.children=[],e.call(this,o.items,i.children)),n.push(i)}.bind(this))}.call(this,this.menus[0].items,e.children),e}},destroy:function(){i.removeNativeEventListener("exitMenu-"+this.id),i.removeNativeEventListener("commandFacet-"+this.id),this.options.contextual&&o.length>-1&&this.options.contextual&&o.splice(o.indexOf(this),1),this._parent()}};return n.extend(l)}),define("DS/UIKIT/Iconbar",["UWA/Core","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Menu","DS/UIKIT/Tooltip","DS/UIKIT/DropdownMenu"],function(e,t,n,i,s,o,a){"use strict";var l=e.Utils.Client.Features.touchEvents;var r,c=(r=/^(divider)$/,function(e){var t,n;if(!e)return!1;for(t=e.split(" "),n=0;n<t.length;n++)if(r.test(t[n]))return!0;return!1});var h=s.extend({name:"iconbar-items"}),u=a.extend({show:function(){document.body.style.overflow="hidden",this._parent(),document.body.style.overflow="auto"}});return i.extend({name:"iconbar",menu:null,TYPE_ICONDROPDOWN:"icondropdown",TYPE_DROPDOWN:"dropdown",TYPE_DROPDOWNMENU:"dropdownmenu",overflowMenu:null,overflowMenuTrigger:null,init:function(e){var t=this;this._parent(e),this.buildSkeleton(),this.handleEvents(),this.show(),window.MutationObserver&&(this._injectionObserver=new MutationObserver(function(e){e.some(function(e){return t.isInjected()||-1!==Array.prototype.indexOf.call(e.addedNodes,t.elements.container)})&&t.show()}),this._injectionObserver.observe(document.body,{childList:!0,subtree:!0}))},buildSkeleton:function(){var e=this.elements,t=this.options;e.container||(this.menu=new h({}),this.addItem(t.items),e.container=this.menu.elements.container,e.container.className=this.getClassNames(),t.renderTo&&1===t.renderTo.nodeType&&(e.container.inject(t.renderTo),delete t.renderTo))},buildOverflowMenu:function(){var t,n,i=[];this.overflowMenuTrigger||(this.overflowMenuTrigger=e.createElement("li",{class:this.name+"-overflow-menu-trigger item",html:{tag:"span",class:"fonticon fonticon-menu-dot"}})),this.overflowMenu&&this.overflowMenu.destroy(),this.overflowMenu=null,this.menu.items.forEach(function(e){e.content&&e.content.type===this.TYPE_DROPDOWN||(n=!0,t={id:e.id,className:(e.id+" "+(e.className?e.className:"")).trim(),disabled:e.disabled,fonticon:e.fonticon,text:e.text,handler:e.handler,name:e.name},e.content&&e.content.options.items&&e.content.type!==this.TYPE_ICONDROPDOWN?t.items=function e(t,n,i){return i=i||0,Array.isArray(t)&&0!==t.length?t=t.map(function(t){return t.className=(n+" "+(t.className?t.className:"")).trim(),t.items&&i<20&&(t.items=e(t.items,n,++i)),t}):t}(e.content.options.items,e.id,0):e.content&&e.content.type===this.TYPE_ICONDROPDOWN&&(n=!1,e.content.options.items&&e.content.options.items.forEach(function(t){i.push({id:t.id,className:(e.id+" "+(t.className?t.className:"")).trim(),fonticon:t.fonticon,icon:t.icon,handler:t.handler,text:t.description})})),n&&i.push(t))},this),this.overflowMenu=new u({items:i,target:this.overflowMenuTrigger})},getItem:function(e){var t,n,i,s=!1;for(t=0,n=this.menu.items.length;t<n;t++){if(s=this.menu.items[t],e&&e.nodeType){if(i=e.hasClassName("item")?e:e.getParent(),s.id===i.id)break}else if(t===e||s.id===e||s.name===e)break;s=!1}return s},handleEvents:function(){var e,n,i,s;this.events={container:{click:function(e){var n=t.getElement(e),i=this.getItem(n);i&&(i.content&&(window.requestAnimationFrame?window.requestAnimationFrame(this.displayContent.bind(this,i)):this.displayContent(i)),i.tooltip&&i.tooltip.isVisible&&!l&&i.tooltip.hide(),i.disabled||(this.dispatchEvent("onClick",[e,i],this),"function"==typeof i.handler&&i.handler.call(this,e,i)))}.bind(this)}},this.elements.container.addEvents(this.events.container),this.events.window={resize:(e=this.resize,n=100,function(){var t,o=this,a=arguments;t=i&&!s,clearTimeout(s),s=setTimeout(function(){s=null,i||e.apply(o,a)},n),t&&e.apply(o,a)}).bind(this)},window.addEventListener("resize",this.events.window.resize)},addItem:function(e){return n.splat(e).forEach(function(e){this._addItem(e)},this),this.buildOverflowMenu(),this},_addItem:function(e){var t=this.menu._addItem(e);(t.content=t.innerComponent||t.content,t.content&&t.content.type===this.TYPE_ICONDROPDOWN)&&t.content.options.items.forEach(function(e){e.id=e.id||"itm-"+n.getUUID().substr(0,6)});!c(e.className)&&t.text&&(t.tooltip=new o({target:t.elements.container,body:t.text,position:t.tooltipPosition||this.options.tooltipsPosition||"top",trigger:t.tooltipTrigger||this.options.tooltipsTrigger||"hover focus"}),t.elements.container.getElement(".item-text").remove())},enableItem:function(e){return this._setActiveState(e,!0)},disableItem:function(e){return this._setActiveState(e,!1)},_setActiveState:function(e,t){var n=this.menu.getItem(e);if(n){var i=t?"enable":"disable",s=i+"Item";this.menu[s](e),n.content?(n.content.created&&n.content.component&&n.content.component[i](),this.overflowMenu&&(n.content.type===this.TYPE_ICONDROPDOWN&&n.content.options&&n.content.options.items?n.content.options.items.forEach(function(e){this.overflowMenu[s](e.id)},this):n.content.type===this.TYPE_DROPDOWNMENU&&this.overflowMenu[s](e))):this.overflowMenu&&this.overflowMenu[s](e)}return this},getOverflowingItems:function(){var e=this,t=this._getElementDimensions(this.elements.container,!0);return this.menu.items.filter(function(n){var i=e._getElementDimensions(n.elements.container);return i.top+i.height>t.top+t.height||i.left+i.width>t.left+t.width})},isElementOverflowing:function(e){var t=this._getElementDimensions(this.elements.container,!0),n=this._getElementDimensions(e);return n.top+n.height>t.top+t.height||n.left+n.width>t.left+t.width},_getElementDimensions:function(e,t){var n=e.getBoundingClientRect();return{left:Math.floor(n.left),width:t?Math.ceil(n.width):Math.floor(n.width),top:Math.floor(n.top),height:t?Math.ceil(n.height):Math.floor(n.height)}},isInjected:function(){if(this.elements&&this.elements.container)return this.elements.container.isInjected()},resize:function(){function e(e){this.overflowMenu.items.forEach(function(t){e.some(function(e){return!!t.className&&(t.className&&-1!==t.className.indexOf(e))})?t.elements.container.removeClassName("hidden"):t.elements.container.addClassName("hidden")})}return function(){var t,n;if(this.overflowMenuTrigger&&this.overflowMenuTrigger.isInjected()&&this.overflowMenuTrigger.remove(),this.overflowMenu.isVisible&&this.overflowMenu.hide(),t=this.getOverflowingItems(),(!this.elements.container||t)&&(n=t.map(function(e){return e.id}),e.call(this,n),t.length))for(this.menu.elements.wrapper.insertBefore(this.overflowMenuTrigger,t[0].elements.container);this.isElementOverflowing(this.overflowMenuTrigger)&&this.overflowMenuTrigger.previousSibling;)this.menu.elements.wrapper.insertBefore(this.overflowMenuTrigger,this.overflowMenuTrigger.previousSibling),t.push(this.overflowMenuTrigger.nextSibling),this.overflowMenuTrigger.nextSibling.id&&n.push(this.overflowMenuTrigger.nextSibling.id),e.call(this,n)}}(),displayContent:function(t){var n=e.clone(t.content.options);if(n.target=t.elements.container,!n.target.hasClassName("disabled")){if(t.content.created)t.content.component&&t.content.component.show();else{if(t.content.type===this.TYPE_DROPDOWN)require(["DS/UIKIT/Dropdown"],function(e){var i=e.extend({hide:function(){this._parent(),this.options.target.removeClassName("active")}});t.content.component=new i(n).show()});else if(t.content.type===this.TYPE_ICONDROPDOWN)require(["DS/UIKIT/IconDropdown"],function(e){var i=e.extend({hide:function(){this._parent(),this.options.target.removeClassName("active")}});t.content.component=new i(n).show()});else{if(t.content.type!==this.TYPE_DROPDOWNMENU)return;var i=a.extend({hide:function(){this._parent(),this.options.target.removeClassName("active")}});t.content.component=new i(n).show()}t.content.created=!0}n.target.addClassName("active")}},select:function(){var e,t,n,i,s=arguments;void 0!==s[0]&&null!==s[0]&&((t=void 0===s[1]||s[1])&&Array.prototype.slice.call(this.elements.container.querySelectorAll(".item-active")).forEach(function(e){e.removeClassName&&e.removeClassName("item-active")}),t&&this.overflowMenu.getSelectedItems().forEach(function(e){this.overflowMenu.menus[0].toggleSelection(e),e.elements.container.removeClassName("selectable")},this),(e=this.getItem(s[0]))&&!e.elements.container.hasClassName("divider")&&(e.elements.container[t?"addClassName":"removeClassName"]("item-active"),n=e.elements.container.id,1===(i=this.overflowMenu.items.filter(function(e){return e.elements.container.hasClassName(n)})).length&&(this.overflowMenu.menus[0].toggleSelection(i[0]),i[0].elements.container.addClassName("selectable"))))},show:function(){this.isInjected()&&(this._injectionObserver&&this._injectionObserver.disconnect(),this._injectionObserver=null,this._parent(),window.requestAnimationFrame?window.requestAnimationFrame(this.resize.bind(this)):this.resize())},destroy:function(){window.removeEventListener("resize",this.events.window.resize),this.overflowMenu&&this.overflowMenu.destroy(),this.overflowMenuTrigger&&this.overflowMenuTrigger.destroy(),this.elements.container.removeEvents(this.events.container),this.menu.items.forEach(function(e){e.tooltip&&e.tooltip.destroy()}),this._parent()}})}),define("DS/UIKIT/IconDropdown",["UWA/Core","UWA/Event","DS/UIKIT/DropdownMenu","DS/UIKIT/Tooltip","DS/UIKIT/Menu"],function(e,t,n,i,s){"use strict";var o,a=["parentItemId","position","items","title","text","selectable"],l=(o=/^(header|divider|disabled)$/,function(e){var t,n=0;if(!e)return!1;for(t=e.split(" ");n<t.length;n++)if(o.test(t[n]))return!0;return!1});function r(e,t,n){Object.keys(e).forEach(function(i){!function(e,t,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n,i)}(i,t,e[i],n)})}var c={name:"icon-dropdown",_activeItem:null,defaultOptions:{scrollMode:!1},init:function(e){this._parent(e)},buildSkeleton:function(){var e,t=this.elements,n=this.options;t.container||((e=new s).position=n.position||"bottom right",this.menus.push(e),this.addItem(n.items),t.container=e.elements.wrapper,t.container.className=this.name,this.handleEvents())},handleEvents:function(){var n=this,i=this.options,s=this.elements;i.contextual?(this.events.target={mousedown:function(n){var i=t.getElement(n),s=2===e.Event.whichButton(n);!i.isInjected(this.elements.container)&&i!==this.elements.container&&s&&this.isVisible&&this.updatePosition(n)}.bind(this),contextmenu:function(e){this.show(!1,e),t.stop(e)}.bind(this)},r(this.events.target,i.target,!0)):i.bound&&(this.events.target={click:this.toggle.bind(this)},r(this.events.target,i.target,!0)),this.events.container={click:function(e){var i=t.getElement(e),s=n.getItem(i);s&&!l(s.elements.container.className)&&(s.tooltip&&s.tooltip.isVisible&&s.tooltip.hide(),n._updateSelected(s),n.dispatchEvent("onClick",[e,s],n),"function"==typeof s.handler&&s.handler.call(n,e,s))}},s.container.addEvents(this.events.container)},_addItem:function(t){var n,s,o,l=this,r=this.menus[0],c=e.clone(t);a.concat("selected").forEach(function(e){delete c[e]}),(s=(n=r._addItem(c)).elements.container.getElement(".item-text"))&&s.destroy(),t.description&&(n.tooltip=new i({target:n.elements.container,body:n.description,position:"bottom"})),t.icon&&!t.fonticon&&(n.elements.iconActive=e.createElement("img",{src:t.iconActive?t.iconActive:t.icon,class:"item-icon hidden"}),n.elements.iconActive.inject(n.elements.container),o={mouseover:function(){n.elements.container.hasClassName("selected")||l._toggleIcon(n,!0)},mouseleave:function(){n.elements.container.hasClassName("selected")||l._toggleIcon(n)}}),n.elements.container.addEvents(o),t.selected&&this._updateSelected(n),this.items.push(n)},_updateItem:function(e){var t,n=this.menus[0];(t=this.getItem(e.id))&&(a.concat("selected").forEach(function(t){delete e[t]}),e.id=t.id,n&&n.updateItem(e),e.iconActive&&(t.iconActive=e.iconActive,t.elements.iconActive.setAttribute("src",e.iconActive)),e.description&&(t.tooltip?t.tooltip.setBody(e.description):t.tooltip=new i({target:t.elements.container,body:t.description,position:"bottom"})))},_toggleIcon:function(e,t){e&&e.elements.iconActive&&(t?(e.elements.iconActive.removeClassName("hidden"),e.elements.icon.addClassName("hidden")):(e.elements.icon.removeClassName("hidden"),e.elements.iconActive.addClassName("hidden")))},_updateSelected:function(e){this._activeItem!==e&&(this._activeItem&&this._activeItem.elements.container.removeClassName("selected"),this._toggleIcon(this._activeItem),this._activeItem=e,this._activeItem.elements.container.addClassName("selected"))},getActiveItem:function(){return this._activeItem},setActiveItem:function(e){var t=this.getItem(e);t&&this._updateSelected(t)},updatePosition:function(e){this._parent(e);var t,n,i,s=this.options,o=this.elements;s.target&&!s.altPosition&&(t=s.target.offsetWidth,n=o.container.offsetWidth,i=this._position.offsets.x,o.container.setStyles({left:i+t/2-n/2+s.offset.x}))}};return n.extend(c)}),define("DS/UIKIT/Input/Button",["UWA/Core","UWA/Event","DS/UIKIT/Input","DS/UIKIT/DropdownMenu","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,t,n,i,s){"use strict";function o(e){var t,n,i;if(e){for(t=0,n=(e=e.split(" ")).length;t<n;t++)(i=e[t].match(/large-icon|xsmall|small|large|default|primary|info|warning|error|success|link|block$/))&&!i[1]&&("small"===i[0]?e[t]="btn-sm":"large-icon"===i[0]?e[t]="large-icon-btn":"large"===i[0]?e[t]="btn-lg":"xsmall"===i[0]?e[t]="btn-xs":e[t]="btn-"+e[t]);return e.join(" ")}}var a={name:"btn",defaultOptions:{className:"btn-default",dropdownCaret:!0,active:!1},dropdown:null,init:function(e){(e=e||{}).className&&(e.className=o(e.className)),this._parent(e),this.options.active&&this.setActive(this.options.active),this.options.icon&&this.setIcon(this.options.icon),e.value&&""!==e.value||this.elements.container.addClassName("btn-without-label")},buildInput:function(){return e.createElement("button",{type:"button"})},onPostInject:function(){this.options.dropdown&&this.setDropdown(this.options.dropdown)},setDropdown:function(n,s){var o,a=this;function l(e){return function(){a.dispatchEvent.call(a,e,arguments)}}return this.events.dropdown||(this.events.dropdown={onShow:l("onDropdownShow"),onHide:l("onDropdownHide"),onClick:function(){a.setActive(a.dropdown.isVisible),a.dispatchEvent.call(a,"onDropdownClick",arguments)},onClickOutside:function(){var e=t.getElement(arguments[0]),n=a.getContent();e!==n&&e.getParent()!==n&&a.setActive(a.dropdown.isVisible),a.dispatchEvent.call(a,"onDropdownClickOutside",arguments)},onMouseLeave:l("onDropdownMouseLeave")},this.events.dropdownButton={click:function(){a.toggleActive()}}),o={events:this.events.dropdown,target:this.getContent()},this.dropdown&&this.dropdown.destroy(),(s||!e.is(s)&&this.options.dropdownCaret)&&(this.elements.caret=e.createElement("span",{class:"caret"}).inject(this.getContent()),this.getContent().toggleClassName("dropdown-toggle",!this.getValue())),this.dropdown=new i(e.merge(n,o)),this.getContent().addEvents(this.events.dropdownButton),this},setIcon:function(t){for(var n=this.elements,i=0,s=(t=t.split(" ")).length;i<s;i++)"left"!==t[i]&&"right"!==t[i]&&(t[i].match("fonticon-")||"caret"===t[i]||(t[i]="fonticon-"+t[i]));return"left"===(t=t.join(" "))||"left left"===t?t="fonticon-left":"left right"===t||"right left"===t?t="fonticon-left right":"right"===t?t="fonticon-right":"right right"===t&&(t="fonticon-right right"),n.icon?n.icon.className="fonticon "+t:n.icon=e.createElement("span",{class:"fonticon "+t}).inject(n.input,"top"),n.icon&&this.elements.container.addClassName("btn-with-icon"),this},removeIcon:function(){return this.elements.icon&&this.elements.icon.destroy(),this.elements.container.removeClassName("btn-with-icon"),this},setValue:function(e){var t,n=this.elements.input;return this.elements.icon||this.elements.caret?(t=this.getContent().firstChild)===this.elements.caret?n.insertBefore(document.createTextNode(e),t):(t=3===t.nodeType?t:t.nextSibling,n.insertBefore(document.createTextNode(e),t),t&&(3===t.nodeType||1===t.nodeType&&"FONT"===t.tagName)&&n.removeChild(t)):n.setText(e),this.elements.caret&&this.getContent().toggleClassName("dropdown-toggle",!this.getValue()),e&&""!==e||this.elements.container.addClassName("btn-without-label"),this},setActive:function(e){return void 0===e&&(e=!0),this.getContent().toggleClassName("active",e),this},toggleActive:function(){return this.setActive(!this.isActive())},isActive:function(){return this.getContent().hasClassName("active")},loading:function(){console.info("The method `Button.loading()` is deprecated. Please use `Button.load()` instead."),this.load.apply(this,arguments)},load:function(e,t){var n;void 0===e&&(e=!0),e&&!this.previousValue&&(this.previousValue=this.getValue()),(n=e?t||s.loading:this.previousValue)&&this.setValue(n),this.setDisabled(e),e||delete this.previousValue},setClassName:function(e){return this.options.className=o(e),this.getContent().className=this.getClassNames(),this}};return n.extend(a)}),define("DS/UIKIT/Accordion",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Input/Button"],function(e,t,n,i,s,o){"use strict";var a={name:"accordion",ITEM_CLASSNAME:"accordion-item",TITLE_CLASSNAME:"accordion-title",defaultOptions:{buttons:!1,arrows:!0,exclusive:!0,animated:!1,styled:!1},items:null,subAccordions:null,selectedItems:null,unselectedItems:null,embeddedItems:0,init:function(e){var t,n,i,s,o=e.items.length;if(this._parent(e),this.items=[],this.subAccordions=[],this.selectedItems=[],this.unselectedItems=[],this.buildSkeleton(),this.subAccordions[0]&&o)for(n=this.subAccordions[0].id,(i=[]).globalOptions=[],s=this.subAccordions[0].options,t=0;t<o;t++)(i=e.items[t]).accordionId=n,i.globalOptions=s,this.addItem(i);this.options.styled=this.elements.container.hasClassName("styled"),this.options.styled&&0===this.embeddedItems&&this.elements.container.removeClassName("styled")},buildSkeleton:function(){var e,t=this.elements;t.container||(this.options.className=this.getClassNames(),e=this._addSubAccordion(this.options),t.container=e.container,this.handleEvents())},_addSubAccordion:function(t){var n=[];return n.id=i.getUUID().substr(0,6),n.parentItemId=t.parentItemId?t.parentItemId:-1,n.options=e.merge(t,this.defaultOptions),-1!==n.parentItemId&&(n.options.className=t.className+" sub-accordion"),n.container=this._buildAccordion(n.options),this.subAccordions.push(n),n},_getSubAccordion:function(e){var t,n,i=[];if(this.subAccordions)for(t=0,n=this.subAccordions.length;t<n;t+=1)if((i=this.subAccordions[t])&&i.id&&i.id===e)return i;return!1},_buildAccordion:function(t){var n=t.className?t.className:this.getClassNames(),i=e.createElement("div",{class:n});return t.animated&&i.addClassName("animated"),i},_buildAccordionItem:function(t,n,i){t.elements={container:e.createElement("div",{class:this.ITEM_CLASSNAME+" "+i,id:t.id})},n.title&&(t.title=e.createElement("div",{class:this.TITLE_CLASSNAME+" ",html:n.title||""}),(!1!==n.arrow&&(n.globalOptions&&n.globalOptions.arrows||!n.globalOptions&&this.defaultOptions.arrows)||n.arrow)&&e.createElement("i",{class:"caret-left "}).inject(t.title,"top"),t.title.inject(t.elements.container),(!1!==n.button&&n.globalOptions&&n.globalOptions.buttons||n.button)&&(t.button=new o,t.disabled&&t.button.disable(),t.button.setIcon("plus"),t.button.inject(t.title)),this.embeddedItems++),t.elements.wrapper=e.createElement("div",{class:"content-wrapper"}),t.elements.content=e.createElement("div",{class:"content "+i}),n.content&&t.elements.content.setContent(n.content),n.globalOptions&&n.globalOptions.animated&&t.elements.content.toggleClassName("accordion-animated-content"),t.elements.content.inject(t.elements.wrapper),t.elements.wrapper.inject(t.elements.container)},_isExclusive:function(e){var t=this._getSubAccordion(e);return t&&t.options.exclusive},selectItem:function(e){var t,n,i=[];if(e.name)t=e;else if(!(t=this.getItem(e)))return;t.isSelected||(t.isSelected=!0,t.elements.container.addClassName("active"),-1===(n=this._getSelectedItemPosition(t.accordionId,t.id))&&(i.id=t.id,i.accordionId=t.accordionId,this.selectedItems.push(i),this.dispatchEvent("onOpen",[t,this.selectedItems],this)),(n=this._getUnselectedItemPosition(t.accordionId,t.id))>-1&&this.unselectedItems.splice(n,1),t.button&&t.button.setIcon("minus"))},unselectItem:function(e){var t,n,i=[];if(e.name)t=e;else if(!(t=this.getItem(e)))return;t.isSelected&&(t.isSelected=!1,t.elements.container.removeClassName("active"),(n=this._getSelectedItemPosition(t.accordionId,t.id))>-1&&this.selectedItems.splice(n,1),-1===(n=this._getUnselectedItemPosition(t.accordionId,t.id))&&(i.id=t.id,i.accordionId=t.accordionId,this.dispatchEvent("onClose",[t,this.unselectedItems],this),this.unselectedItems.push(i)),t.button&&t.button.setIcon("plus"))},enableItem:function(e){var t=this.getItem(e);return t&&t.elements.container.removeClassName("disabled"),t.button&&t.button.enable(),t.disabled=!1,this},disableItem:function(e){var t=this.getItem(e);return t&&t.elements.container.addClassName("disabled"),t.button&&t.button.disable(),t.disabled=!0,this},unselectAll:function(){for(;this.selectedItems.length>0;)this.unselectItem(this.selectedItems[0].id)},selectAll:function(){for(;this.unselectedItems.length>0;)this.selectItem(this.unselectedItems[0].id)},toggleItem:function(e){var t,n=!1;(n=e.name?e:this.getItem(e))?n.disabled||(n.isSelected?this.unselectItem(n):this.selectItem(n),n.accordionId&&this._isExclusive(n.accordionId)&&(t=this._getSelectedItemsByAccordion(n.accordionId)[0])&&t!==n.id&&this.unselectItem(t),this.dispatchEvent("onChange",[n,this.selectedItems,this.unselectedItems],this),this.dispatchEvent("onClick",[n],this),this.options.styled&&0===this.embeddedItems&&(0===this.selectedItems.length?this.elements.container.removeClassName("styled"):this.elements.container.addClassName("styled"))):this.dispatchEvent("onClick",[n],this)},addItem:function(e){var t=this;return i.splat(e).forEach(function(e){t._addItem(e,t.elements.container)}),this},_addItem:function(t){var n,s,o,a=t.className||"",l={},r=t.handler,c=this,h=[];(n=t.accordionId&&(n=this._getSubAccordion(t.accordionId))||this.subAccordions[0])&&n.container&&(l.accordionId=n.id,l.id=i.getUUID().substr(0,6),t.name?l.name=t.name:l.name="item-"+l.id,t.disabled?(a+=" disabled",l.disabled=!0):l.disabled=!1,t.trigger&&t.trigger.addEvent("onClick",function(){c.toggleItem(l.id)}),l.isSelected=!1,this._buildAccordionItem(l,t,a),r&&e.is(r,"function")&&l.elements.container.addEvent("click",function(){r()}),t.accordion&&(t.accordion.parentItemId=l.id,t.accordion.className=t.accordion.className?t.accordion.className+" "+this.name:this.name,(s=this._addSubAccordion(t.accordion))&&s.container&&(o=s.container,t.accordion.items&&t.accordion.items.forEach(function(e){e.accordionId=s.id,e.globalOptions=s.options,c._addItem(e)}),o.inject(l.elements.content))),this.items.push(l),l.elements.container.inject(n.container),t.selected?this.toggleItem(l):(h.id=l.id,h.accordionId=l.accordionId,this.unselectedItems.push(h)))},removeItem:function(e){var t,n=!1;(n=e.name?e:this.getItem(e))&&(n.elements.container.destroy(),n.elements.container=null,(t=this.items.indexOf(n))>-1&&this.items.splice(t,1),(t=this._getUnselectedItemPosition(n.accordionId,n.id))>-1&&this.unselectedItems.splice(t,1),(t=this._getSelectedItemPosition(n.accordionId,n.id))>-1&&this.selectedItems.splice(t,1))},getItem:function(e){var t,n,i=!1;for(t=0,n=this.items.length;t<n&&(i=this.items[t],!e||!e.nodeType||i.elements.container!==e)&&(t!==e&&i.id!==e&&i.name!==e);t+=1)i=!1;return i},setContent:function(t,n){var i=this.getItem(t);i&&(i.elements.container.getElementsByClassName("content-wrapper")[0].destroy(),i.elements.wrapper=e.createElement("div",{class:"content-wrapper"}),i.elements.content=e.createElement("div",{class:"content",html:n||""}),i.elements.content.inject(i.elements.wrapper),i.elements.wrapper.inject(i.elements.container))},setTitle:function(t,n){var i=this.getItem(t);i&&(i.elements.container.getElementsByClassName(this.TITLE_CLASSNAME)[0].destroy(),i.title=e.createElement("div",{class:this.TITLE_CLASSNAME+" ",html:n||""}),i.title.inject(i.elements.container,"top"))},isSelected:function(e){var t=this.getItem(e);return t&&t.isSelected},getSelectedItems:function(){return this.selectedItems},_getSelectedItemsByAccordion:function(e){var t=[];return this.selectedItems.forEach(function(n){n.accordionId===e&&t.push(n.id)}),t},_getSelectedItemPosition:function(e,t){var n,i,s;for(n=0,i=this.selectedItems.length;n<i;n++)if((s=this.selectedItems[n]).accordionId===e&&s.id===t)return n;return-1},getUnselectedItems:function(){return this.unselectedItems},_getUnselectedItemPosition:function(e,t){var n,i,s;for(n=0,i=this.unselectedItems.length;n<i;n++)if((s=this.unselectedItems[n]).accordionId===e&&s.id===t)return n;return-1},show:function(){this.items&&this._parent()},eventHandler:function(e){var t,i=n.getElement(e),s=i.hasClassName(this.TITLE_CLASSNAME)&&i||i.getParent("."+this.TITLE_CLASSNAME),o=s&&s.getParent();o&&o.id&&(!(t=this.getItem(o.id)).button||t.button&&(i.hasClassName("btn")||i.getParent().hasClassName("btn")))&&this.toggleItem(t)},handleEvents:function(){this.elements.container.addEvent("click",this.eventHandler.bind(this))}};return s.extend(a)}),define("DS/UIKIT/Input/Select",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","DS/UIKIT/Input","DS/UIKIT/Scroller","DS/UIKIT/Tooltip","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,t,n,i,s,o,a,l){"use strict";var r=e.Utils.Client.Features.navigator&&navigator.userAgent.toLowerCase()||"",c=e.Utils.Client.Platform.name,h=(/ios|android/.test(c)||/macintosh/.test(r))&&i.Client.Features.touchEvents,u=c.test("android");function d(e){var t,n,i;if(e){for(t=0,n=(e=e.split(" ")).length;t<n;t++)(i=e[t].match(/small|large$/))&&!i[1]&&("small"===i[0]?e[t]="input-sm":"large"===i[0]&&(e[t]="input-lg"));return e.join(" ")}}var m={defaultOptions:{placeholder:l.selectDefaultPlaceholder,options:[],maxHeight:240,tooltipPosition:"top"},init:function(t){(t=t||{}).className&&(t.className=d(t.className)),this.custom=!0!==t.nativeSelect,this.custom=e.is(t.custom)?!1!==t.custom:this.custom,this.custom&&(this.setupTemplates(t),t.showTooltips&&(this._tooltips=[])),this._parent(t)},onPostInject:function(){this.options.showTooltips&&this._updateTooltips()},buildSkeleton:function(){var t=this.elements,n=this.options,s={};e.is(n.id)&&(s.id=n.id),n.required&&(s.required=n.required),n.multiple&&(s.multiple=n.multiple),e.is(n.size)&&(s.size=n.size),e.merge(n.attributes,s),t.container=e.createElement("div",{class:"select "+n.className}),t.input=e.createElement("select",{class:"form-control",attributes:n.attributes}).inject(t.container),this.custom?(t.input.addClassName("select-hidden"),t.handle=e.createElement("div",{class:"select-handle"}),t.choices=e.createElement("ul",{class:"select-choices form-control"}),t.dropdown=e.createElement("div",{class:"select-dropdown"}),t.dropdownScroll=e.createElement("div",{class:"select-dropdown-scroll"}),t.content=e.createElement("ul",{class:"select-results"}),t.handle.inject(t.container,"top"),t.choices.inject(t.container),t.content.inject(t.dropdownScroll),t.dropdownScroll.inject(t.dropdown),n.renderTo?(t.dropdown.inject(n.renderTo),t.dropdown.addClassName("select")):t.dropdown.inject(t.container),this.scroller=new o({element:t.dropdownScroll}).inject(t.dropdown),i.Client.Engine.firefox&&t.content.getParent(".scroller-content").addClassName("scroller-shift"),n.showTooltips&&t.choices.addClassName("select-tooltips")):(t.content=t.input,t.container.addClassName("select-native")),n.multiple&&t.container.addClassName("select-multiple"),!1!==n.placeholder&&(n.options.unshift({label:n.placeholder,value:""}),this.getContent().addClassName("select-placeholder"),n.renderTo&&t.dropdown.addClassName("select-placeholder")),this.add(n.options),!1!==n.placeholder&&(this.getSelection().length||this.select(0,!0,!0),this.ensureClassForPlaceholder()),this.setDisabled(n.disabled)},getOption:function(t,n,i,s){var o,a=this.getOptions(!0,!(!this.custom||!e.is(i))&&!i),l=t;if(e.is(t,"element")){if(/optgroup|option/.test(t.getTagName())){if(!this.custom||this.custom&&!e.is(i))return t}else if(!this.custom||!e.is(i))return null}else e.is(t.value)&&(l=t.value);return a.some(function(t,a){if(o=t,!(t.value!==l&&(s||t.label!==l)&&a!==l&&t!==l||n&&t.getTagName()!==n))return e.is(i)&&(o=this.getOptions(!0,i)[a]),!0}.bind(this))?o:null},getOptions:function(t,n){var i,s;return n=!0===n,this.custom&&n?i=this.elements.content.getElements(".result-group, .result-option"):(s=this.elements.input.getElementsByTagName("*"),i=Array.prototype.map.call(s,function(t){return e.extendElement(t)})),!1!==this.options.placeholder&&!1===t&&i.shift(),i},remove:function(t){var n=this.getSelection();return e.is(t)||(t=this.getOptions()),i.splat(t).forEach(function(e){this.removeOption(e)},this),this.getSelection().equals(n)||this.dispatchOnChange(),this},removeOption:function(e){if((e=this.getOption(e))&&(!1===this.options.placeholder||e!==this.elements.input.firstChild)){if(this.custom){var t=this.getOption(e,void 0,!0);this.options.showTooltips&&this._removeTooltip(t),t&&t.remove()}e.remove()}return this},add:function(e){var t=this.getSelection();return i.splat(e).forEach(function(e){this.addOption(e)},this),this.getSelection().equals(t)||this.dispatchOnChange(),this},addOption:function(n,i){var s,o,a,l=this.elements,r=l.input,c=l.content;return e.is(n,"object")?e.is(n.value)||(n.value=n.label):n=""+n,e.is(n,"object")||(n={value:n}),n.value=""+n.value,(a=!!(s=this.getOption(n,"option",void 0,!0)))||(s=e.createElement("option"),this.custom&&(o=e.createElement("li",{class:"result-option"}))),n.group&&((r=this.getOption(n.group,"optgroup"))?this.custom&&(c=this.getOption(r,void 0,!0).getElement("ul")):(r=e.createElement("optgroup",{label:n.group}).inject(l.input),this.custom&&(c=e.createElement("li",{class:"result-group",html:[{tag:"span",class:"result-group-label",text:n.group},{tag:"ul",class:"result-group-sub"}]}).inject(l.content).getElement("ul")))),e.is(n.label)||e.is(n.value)?(t.set.call(s,{text:e.is(n.label)?n.label:n.value,value:e.is(n.value)?n.value:n.label,selected:n.selected,disabled:n.disabled,attributes:n.attributes}),this.custom&&(o||(o=this.getOption(s,void 0,!0)),n.attributes&&Object.keys(n.attributes).forEach(function(e){o.setAttribute(e,n.attributes[e])}),""===n.label||!n.value&&!n.label?this.template.setOption(o,"&nbsp;",!0):this.template.setOption(o,e.is(n.label)?n.label:n.value),o.toggleClassName("result-option-disabled",!!n.disabled),a&&c===o.getParent()||o.inject(c,i),this.visible&&this.options.showTooltips&&this._setTooltip(o,o.getText())),a&&r===s.getParent()||s.inject(r,i),this):this},setupTemplates:function(n){var i;this.template={},this.template.setOption=(i=!!n.template,function(e,n,s){var o={};o[i||s?"html":"text"]=n,t.set.call(e,o,n)}),this.template.getOption=function(e){if(e.hasClassName("result-option"))return e},this.template.setChoice=function(e,n,i){t.set.call(e,{text:n})},this.template.getText=function(e){return t.getText.call(e)},e.extend(this.template,n.template)},enable:function(t){return e.is(t)?i.splat(t).forEach(function(e){this.setDisabled(!1,e)},this):this.setDisabled(!1),this},disable:function(t){return e.is(t)?i.splat(t).forEach(function(e){this.setDisabled(!0,e)},this):this.setDisabled(!0),this},setDisabled:function(t,n){var i=this.elements;if(e.is(t)||(t=!0),e.is(n)){if(!(n=this.getOption(n)))return this;n.disabled=t,this.custom&&this.getOption(n,void 0,!0).toggleClassName("result-option-disabled",t)}else i.container.toggleClassName("select-disabled",t),i.input.disabled=t,this.setFocus(!1),this.custom&&this.toggleDropdown(!1),this.handleEvents();return this},setPlaceholder:function(e){var t=this.options,n=t.placeholder;return!1!==e&&void 0!==e||!1===n?!1===e&&void 0===e||(t.placeholder=!0===e?this.defaultOptions.placeholder:e,!1!==n?(this.addOption({value:"",label:t.placeholder}),this.syncInput()):(this.addOption({label:t.placeholder,value:""},"top"),this.getContent().addClassName("select-placeholder"))):(t.placeholder=!1,this.remove(n),this.getContent().removeClassName("select-placeholder"),this.getContent().removeClassName("select-not-chosen")),this},getSelection:function(e){var t=this.options,n=this.getOptions(e),i=this.elements.input.selectedIndex;return!1!==t.placeholder&&!1===e&&i--,n.filter(function(e,n){if("optgroup"!==e.getTagName()){if(t.multiple&&e.selected||i===n)return!0}else i++})},clear:function(e){return this.select(this.getSelection(!1),!1,e)},select:function(e,t,n,s){var o=this.getSelection();return s&&this.clear(!0),i.splat(e).forEach(function(e){this.setSelection(e,!1!==t)},this),this.getSelection().equals(o)||!0!==n&&this.dispatchOnChange(),this.syncInput(),this},setValue:function(e){return this.select(e,!0,!1,!0)},getValue:function(){return this.getSelection().map(function(e){return e.value})},setClassName:function(e){return this.options.className=d(e),this.getContent().className=this.getClassNames(),this},setSelection:function(e,t){return(e=this.getOption(e))?("optgroup"===e.getTagName()?this.select(e.getChildren(),t):e.selected=t,this):this},syncInput:function(){var t,n,i=this.options,s=this.getSelection();!1!==i.placeholder&&(0===s.length&&(this.elements.input.firstChild.selected=!0,s.push(this.elements.input.firstChild)),i.multiple&&s.length>1&&this.elements.input.firstChild.selected&&(this.elements.input.firstChild.selected=!1,s.shift())),this.ensureClassForPlaceholder(),t=this.getContent().hasClassName("select-not-chosen"),this.custom&&(s=this.getSelection(),this.getOptions(!0,!0).forEach(function(e){e.removeClassName("result-option-selected")}),this.elements.choices.empty(),n=Array.prototype.slice.call(this.elements.content.querySelectorAll(".result-option")),s.forEach(function(s){var o,a,l,r;(o=this.getOption(s,void 0,!0)).addClassName("result-option-selected"),i.options instanceof Array&&(l=i.options[n.indexOf(o)]),a=e.createElement("li",{class:"select-choice"}),l&&(r=l.attributes||{},Object.keys(r).forEach(function(e){a.setAttribute(e,r[e])})),this.template.setChoice(a,s.getText(),t),t?a.className="select-choice-default":i.multiple&&e.createElement("span",{class:"close",html:"&times;"}).inject(a),a.inject(this.elements.choices)},this),this.ensureSelectedInView())},setFocus:function(t,n){var i=this.elements;return e.is(t)||(t=!1!==t),this._preventIEFocusLost?this:(i.container.toggleClassName("select-focus",t),h&&!u?this:(!n&&i.input[t?"focus":"blur"](),this.custom&&!t&&this.toggleDropdown(!1),this))},toggleDropdown:function(n){var i,s,o=this.options,a=o.renderTo,l=this.getContent(),r=this.elements.dropdown,c=this.elements.container,h=l.hasClassName("dropdown-visible");if(e.is(n)||(n=!h),n!==h){if(n){var u=r.querySelector(".select-results");if(l.addClassName("dropdown-visible"),a){r.setStyle("display","block");var d=u.getSize().height,m=l.getSize(),p=c.getPosition(a),f=p.x;i=p.y,s=Math.min(o.maxHeight,d),r.setStyles({top:i+m.height+"px",left:f+"px",width:m.width,height:s+"px"}),t.addEvent.call(document,"mousedown",this.events.document.mousdedown)}else i=l.getOffsets().y,s=Math.min(o.maxHeight,u.getSize().height),r.setStyle("height",s+"px");if(i+s>(a&&a.clientHeight||window.innerHeight||document.documentElement.clientHeight)+(a&&a.scrollTop||window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop))if(a)r.setStyles({top:i-s+"px"});else{var g=r.getOffsets().y;g<0&&r.setStyle("height",s+g+"px"),l.addClassName("dropup")}else l.removeClassName("dropup")}else r.setStyles({height:"",width:"",top:"",display:""}),a&&t.removeEvent.call(document,"mousedown",this.events.document.mousedown),l.removeClassName("dropdown-visible");this.options.showTooltips&&this._updateTooltips()}this.ensureSelectedInView()},ensureClassForPlaceholder:function(){if(!1!==this.options.placeholder){var e=1===this.getSelection().length&&this.elements.input.firstChild.selected;this.getContent().toggleClassName("select-not-chosen",e)}},ensureSelectedInView:function(){var e,t,n,i,s=this.getSelection(),o=this.elements.content,a=this.elements.dropdownScroll;s.length>0&&(t=(e=this.getOption(s[s.length-1],void 0,!0)).offsetTop-parseInt(o.getStyle("margin-top"),10),n=e.getBoundingClientRect(),i=a.getBoundingClientRect(),(n.bottom>i.bottom||n.top<i.top)&&this.scroller.scrollTo(0,t))},_buildTooltip:function(e,t){var n=this.options.tooltipPosition,i=new a({target:e,body:t,trigger:"touch",position:n});this._tooltips.push(i)},_removeTooltip:function(e){var t=this._getTooltip(e);t&&(t.destroy(),this._tooltips.splice(this._tooltips.lastIndexOf(t),1))},_getTooltip:function(e){var t=this._tooltips.filter(function(t){if(e===t.options.target)return!0});if(t.length>0&&t[0])return t[0]},_setTooltip:function(e,t){var n=this._getTooltip(e);n&&n.getContent()!==t?n.setBody(t):this._buildTooltip(e,t)},_updateTooltips:function(){var e=function(e){e.scrollWidth>e.offsetWidth?this._setTooltip(e,this.template.getText(e)):this._removeTooltip(e)}.bind(this),t=this.elements,n=this.getContent().hasClassName("dropdown-visible"),i=t.choices.querySelector(".select-choice"),s=Array.prototype.slice.call(t.content.querySelectorAll("li.result-option"));n?(i&&s.push(i),s&&s.forEach(function(t){e(t)},this)):(i&&e(i),s&&s.forEach(function(e){this._removeTooltip(e)},this))},handleEvents:function(){var e,t,n,i,s=this.elements;(this._parent(),this.custom)&&(this.events.content||(this.events.content={mouseover:function(){this.options.multiple||this.getOptions(!0,!0).forEach(function(e){e.removeClassName("result-option-selected")})}.bind(this)},this.options.showTooltips&&(this.events.container.resize=(e=this._updateTooltips,t=100,function(){var s,o=this,a=arguments;s=n&&!i,clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(o,a)},t),s&&e.apply(o,a)}).bind(this))),this.options.renderTo&&(this.events.dropdown={mousedown:this.onMouseDown.bind(this),click:this.onClick.bind(this)},this.events.document={mousdedown:this.onClickOutside.bind(this)}),s.content[this.isDisabled()?"removeEvents":"addEvents"](this.events.content),s.container[this.isDisabled()?"removeEvents":"addEvents"](this.events.container),s.dropdown[this.isDisabled()?"removeEvents":"addEvents"](this.events.dropdown))},onMouseDown:function(e){this.custom&&(n.getElement(e)===this.elements.content&&(this._preventIEFocusLost=!0),n.preventDefault(e)),this.elements.input.disabled&&(this.setDisabled(),this._dispatchers&&this._dispatchers.onMouseDown.halt(),n.stop(e))},onClick:function(e){if(this.custom){var t,i,s,o=n.getElement(e),a=this.options,l=!1,r=this.template.getOption(o);r?(o=this.getOption(r,void 0,!1),a.multiple&&!1!==a.placeholder&&o===this.elements.input.firstChild?this.clear():(s=o.getParent(),o.selected&&(o.disabled||s.disabled)?this.select(o,!1):s.disabled||o.disabled?l=!0:this.select(o,!a.multiple||!o.selected)),a.multiple||l||this.toggleDropdown(!1)):o.hasClassName("close")?(o=o.getParent(),t=this.getSelection(!0),i=this.elements.choices.getChildren().indexOf(o),this.select(t[i],!1)):o.hasClassName("result-group-label")||a.multiple&&(!a.multiple||o.hasClassName("select-choice"))||(this.elements.input.focus(),h&&!u||this.toggleDropdown()),this._preventIEFocusLost=!1}},onChange:function(e){this.syncInput(),e&&this.bubbleOnChange(e)},dispatchOnChange:function(){this.isDisabled()?this.dispatchEvent("onChange"):n.dispatchEvent(this.elements.input,"change")},onKeyDown:function(e){var t=n.whichKey(e),i=!0;this.custom&&("space"===t?this.toggleDropdown(!0):"return"===t?this.toggleDropdown():"esc"===t?this.toggleDropdown(!1):i=!1,i&&n.preventDefault(e))},onClickOutside:function(e){var t=e.target,n=this.elements.container,i=this.elements.dropdown;!t||t===n||t.isInjected(n)||t===i||t.isInjected(i)||this.toggleDropdown(!1)},destroy:function(){if(this.elements){var e=this.options,t=e.renderTo,n=e.showTooltips;this.custom&&(this.scroller.destroy(),n&&(this._tooltips.forEach(function(e){e.destroy()},this),delete this._tooltips),this.template&&delete this.template,t&&(this.toggleDropdown(!1),delete this.options.renderTo)),this._parent()}}};return s.extend(m)}),define("DS/UIKIT/Input/Number",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","DS/UIKIT/Input","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,t,n,i,s,o){"use strict";var a=[9,13,27,37,38,39,40],l=["Home","End","Control","Shift","Meta"],r=["Control","Meta"],c=["v","V","c","C"],h=["Delete","Del","Backspace"],u=["0","1","2","3","4","5","6","7","8","9","-",".",","],d=["fr","de","ru"];var m={name:"number",defaultOptions:{min:0,max:10,step:1,value:0,nativeNumber:!1,decimalPrecision:1e5,decimalSeparator:null},init:function(t){t=t||{},this._parent(t),-1===[",","."].indexOf(this.options.decimalSeparator)&&(e.is(o._lang)?this.options.decimalSeparator=d.indexOf(o._lang)>-1?",":".":this.options.decimalSeparator="."),e.owns(this.options,"value")&&this.setValue(this.options.value),this.intMaxLength=Math.max((Math.abs(this.options.min).toFixed(0)+"").length,(Math.abs(this.options.max).toFixed(0)+"").length)+1,this.decimalMaxLength=(this.options.decimalPrecision+"").length-1},buildSkeleton:function(){var t=this.options,n=this.elements,i=t.attributes,s="input-"+this.name;t.id&&(i.id=t.id),t.required&&(i.required=t.required),i.min=t.min,i.max=t.max,i.step=t.step,t.placeholder&&(i.placeholder=t.placeholder),n.container=e.createElement("div",{class:s+" "+t.className}),n.input=e.createElement("input",{type:t.nativeNumber?"number":"text",class:"form-control",attributes:i}).inject(n.container),this.options.nativeNumber?this.getContent().removeClassName("input-"+this.name):(n.leftButton=e.createElement("button",{type:"button",class:s+"-button "+s+"-button-left btn btn-default"}),n.rightButton=e.createElement("button",{type:"button",class:s+"-button "+s+"-button-right btn btn-default"}),n.leftButton.inject(n.input,"before"),n.rightButton.inject(n.input,"after")),this.setDisabled(t.disabled)},setValue:function(e){","===this.options.decimalSeparator&&(e=(e+"").replace(",","."));var t=this.getValue();this._parent(e),t!==e&&this.dispatchOnChange()},add:function(){return this},remove:function(){return this},decrement:function(){var e,t=this.parseInput(this.elements.input.value),n=this.options.min,i=this.options.decimalPrecision;t<=n||(t>n?(e=(e=(t*i-this.options.step*i)/i)<n?n:e,this.setValue(e)):this.setValue(n))},increment:function(){var e,t=this.parseInput(this.elements.input.value),n=this.options.max,i=this.options.decimalPrecision;t>=n||(t<n?(e=(e=(t*i+this.options.step*i)/i)>n?n:e,this.setValue(e)):this.setValue(n))},syncInput:function(){if(!this.options.nativeNumber&&!function(e){return void 0===e||!e||0===e.length||""===e||!/[^\s]/.test(e)||/^\s*$/.test(e)||""===e.replace(/\s/g,"")}(this.elements.input.value)){var e=this.options.decimalPrecision,t=Math.round(this.parseInput(this.elements.input.value)*e)/e;if(t>this.options.max)return this.setValue(this.options.max);if(t<this.options.min||isNaN(t))return this.setValue(this.options.min);","===this.options.decimalSeparator&&(t=(t+"").replace(".",",")),this.elements.input.value=t}},onKeyDown:function(e){var t={start:this.elements.input.selectionStart,end:this.elements.input.selectionEnd,length:this.elements.input.selectionEnd-this.elements.input.selectionStart},i=this.elements.input.value.split(""),s=e.which||e.keyCode,o=e.key,d=h.indexOf(o)>-1;if("Decimal"===o&&(o=this.options.decimalSeparator),c.indexOf(o)>-1)this._commandPressed||n.preventDefault(e);else if(a.indexOf(s)>-1||l.indexOf(o)>-1)this._commandPressed=r.indexOf(o)>-1;else if(!d&&-1===u.indexOf(o)||"-"===o&&(0!==t.start||this.options.min>=0)||(","===o||"."===o)&&1===this.options.decimalPrecision)n.preventDefault(e);else if(d?("Backspace"===o&&t.start>0&&!t.length&&(t.start-=1),i.splice(t.start,t.length||1,"")):t.length?(i.splice(t.start,t.length,""),i.splice(t.start,1,o)):i.splice(t.start,0,o),!(i.indexOf("-")>0)){i=i.join("");var m=this.parseInput(i),p=m-Math.floor(m),f=(m+"").split(".").slice(-1)[0].length;(p&&f>this.decimalMaxLength||(Math.abs(m.toFixed(0))+"").length>this.intMaxLength&&""!==i)&&n.preventDefault(e)}},onKeyRelease:function(e){(!e||"blur"===e.type||r.indexOf(e.key)>-1)&&(this._commandPressed=!1)},onPaste:function(e){var t=e.clipboardData.getData("text/plain");/^-?[0-9]+\.?,?[0-9]*/.test(t)||n.preventDefault(e)},parseInput:function(e){return null!=e?","===this.options.decimalSeparator?parseFloat((e+"").replace(",",".")):parseFloat(e):NaN},setDisabled:function(){var e=this.elements,t=!1!==arguments[0];return this.options.nativeNumber||(e.leftButton.toggleClassName(this.name+"-disabled",t),e.leftButton.disabled=t,e.rightButton.disabled=t),e.input.disabled=t,this.handleEvents(),this},handleEvents:function(){var e=this.elements;this._parent(),this.options.nativeNumber||(this.events.buttons||(this.events.buttons={leftButton:{click:this.decrement.bind(this)},rightButton:{click:this.increment.bind(this)}}),this.events.input.keyup=this.onKeyRelease.bind(this),this.events.input.blur=this.onKeyRelease.bind(this),this.events.input.keydown=this.onKeyDown.bind(this),this.events.input.paste=this.onPaste.bind(this),this.isDisabled()?(e.leftButton.removeEvents(this.events.buttons.leftButton),e.rightButton.removeEvents(this.events.buttons.rightButton),e.input.removeEvents(this.events.input)):(e.leftButton.addEvents(this.events.buttons.leftButton),e.rightButton.addEvents(this.events.buttons.rightButton),e.input.addEvents(this.events.input)))}};return s.extend(m)}),define("DS/UIKIT/Input/Password",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","DS/UIKIT/Input/Text"],function(e,t,n,i,s){"use strict";var o={name:"",defaultOptions:{className:"",multiline:!1},init:function(e){this._parent(e)},buildInput:function(){var t={},n=this.options,i=e.createElement("input",{type:"password"});return["placeholder","required","pattern","maxlength"].forEach(function(e){n[e]&&(t[e]=n[e])}),i.set(t),i}};return s.extend(o)}),define("DS/UIKIT/Input/Toggle",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","DS/UIKIT/Input"],function(e,t,n,i,s){"use strict";var o={name:"toggle",defaultOptions:{type:"radio",className:"",checked:!1,mixed:!1},init:function(e){(e=e||{}).id||(e.id="radio-"+i.getUUID().substring(0,6)),e.mixed&&"checkbox"!==e.type&&(e.mixed=!1),this._parent(e),this.setClassName(e.className),e.mixed&&this.setMixed()},buildInput:function(){var t=e.createElement("input",{type:"radio"===this.options.type?"radio":"checkbox"});return this.options.required&&t.setAttribute("required",!0),t},buildSkeleton:function(){var t=this.elements,n=this.options;t.content=t.input=this.buildInput().set(n.attributes),t.input.id=this.options.id,t.label=e.createElement("label",{text:n.label,class:"control-label",attributes:{for:this.options.id}}),t.container=e.createElement("div",{html:[t.input,t.label]}),t.container.addClassName(this.getClassNames()),this.setCheck(n.checked),this.setDisabled(n.disabled)},handleEvents:function(){var e=this,t=this.elements;function i(t){return e.dispatchEvent.bind(e,t)}function s(t){return function(e){var i=n.getElement(e);i===this.elements.label&&"onClick"!==t?this.dispatchEvent(t,e):i===this.elements.input&&this.dispatchEvent(t,e)}.bind(e)}this.events||(this.events={container:{click:s("onClick"),mousedown:s("onMouseDown")},input:{change:i("onChange"),keydown:i("onKeyDown"),focus:this.setFocus.bind(this,!0),blur:this.setFocus.bind(this,!1)}}),this.isDisabled()?(t.input.removeEvents(this.events.input),t.container.removeEvents(this.events.container)):(t.container.addEvents(this.events.container),t.input.addEvents(this.events.input))},setFocus:function(){return this.syncInput(),this},isChecked:function(){return this.elements.input.checked},setCheck:function(e){return this.elements.input.checked=!1!==e,this},setMixed:function(e){return"checkbox"===this.options.type&&this.elements.container[!1!==e?"addClassName":"removeClassName"]("mixed"),this},syncInput:function(){e.is(this.options.label)||this.elements.label.setText(this.getValue())},setLabel:function(e){return this.options.label=e,this.elements.label.setText(e),this},getLabel:function(){return this.elements.label.getText()},check:function(){return this.setCheck()},uncheck:function(){return this.setCheck(!1)},setClassName:function(e){return"switch"===this.options.type&&(e=e?e+" switch":"switch"),this.options.className=function(e){var t,n,i;if(e){for(t=0,n=(e=e.split(" ")).length;t<n;t++)(i=e[t].match(/(toggle-)?(xsmall|small|large|default|primary|info|warning|error|success|switch|inline)$/))&&!i[1]&&("small"===i[0]?e[t]="toggle-sm":"large"===i[0]?e[t]="toggle-lg":"xsmall"===i[0]?e[t]="toggle-xs":e[t]="toggle-"+e[t]);return e.join(" ")}}(e),this.getContent().className=this.getClassNames(),this}};return s.extend(o)}),define("DS/UIKIT/Input/ButtonGroup",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract","DS/UIKIT/Input/Button"],function(e,t,n,i,s,o){"use strict";function a(e){var t,n,i;if(e){for(t=0,n=(e=e.split(" ")).length;t<n;t++)(i=e[t].match(/(btn-grp-)?(xsmall|small|large|vertical)$/))&&!i[1]&&("small"===i[0]?e[t]="btn-grp-sm":"large"===i[0]?e[t]="btn-grp-lg":"xsmall"===i[0]?e[t]="btn-grp-xs":e[t]="btn-grp-"+e[t]);e=e.join(" ")}return e}var l={name:"btn-grp",defaultOptions:{className:"",disabled:!1},buttons:null,init:function(e){e.className&&(e.className=a(e.className)),this._parent(e),this.events=null,this.buttons=[],this.getContent()},getContent:function(){return this.elements.container||this.buildSkeleton(),this.elements.container},buildSkeleton:function(){var t=this,n=this.elements,i=this.options;n.container=e.createElement("div",{class:this.getClassNames()}),i.buttons.forEach(function(i){var s;(s=i instanceof o==!1?new o(e.clone(i)):i).inject(n.container),t.buttons.push(s)}),this.setDisabled(i.disabled)},handleEvents:function(){var e=this;this.events||(this.events={click:function(t){var i=n.getElement(t),s=e.getButton(i)||e.getButton(i.getParent());s&&(s.dropdown||e.toggleActive(s),e.dispatchEvent.call(e,"onClick",[t,s]))}}),this.isDisabled()?this.elements.container.removeEvents(this.events):this.elements.container.addEvents(this.events)},setDisabled:function(e){return void 0===e&&(e=!0),this.buttons.forEach(function(t){t.setDisabled(e)}),this.elements.container.toggleClassName("disabled",e),this.handleEvents(),this},isDisabled:function(){return this.buttons.every(function(e){return e.isDisabled()})},getButton:function(e){var t,n,i=!1;if(e instanceof o)i=e;else for(t=0,n=this.buttons.length;t<n&&(i=this.buttons[t],!e||!e.nodeType||i.getContent()!==e)&&t!==e;t+=1)i=!1;return i},setActive:function(e,t){var n=this.getButton(e);return void 0===t&&(t=!0),"checkbox"===this.options.type?n.setActive(t):"radio"===this.options.type&&t&&(this.getActive().forEach(function(e){e.setActive(!1)}),n.setActive(!0)),this},getActive:function(){return this.buttons.filter(function(e){if(e.isActive())return!0})},toggleActive:function(e){var t=this.getButton(e);return t&&this.setActive(t,!t.isActive()),this},isActive:function(e){var t=this.getButton(e);if(t)return t.isActive()},setClassName:function(e){return this.options.className=a(e),this.getContent().className=this.getClassNames(),this}};return s.extend(l)}),define("DS/UIKIT/Modal",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract","DS/UIKIT/Tooltip","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,t,n,i,s,o,a){"use strict";function l(){try{return window.self!==window.top}catch(e){return!0}}var r={name:"modal",defaultOptions:{className:"",animate:!1,closable:!0,overlay:!0,visible:!1,escapeToClose:!0},isVisible:!1,init:function(e){e=e||{},this._parent(e),this.options.animate=i.Features.transitionsCSS&&this.options.animate,this.buildSkeleton(),this.handleEvents(),e.renderTo&&this.inject(e.renderTo)},getHeader:function(){return this.elements.header||(this.elements.header=e.createElement("div",{class:this.name+"-header"}).inject(this.elements.content,"top")),this.elements.header},getBody:function(){return this.elements&&this.elements.body},getFooter:function(){return this.elements.footer||(this.elements.footer=e.createElement("div",{class:this.name+"-footer"}).inject(this.elements.content)),this.elements.footer},setHeader:function(t){var n=this,i=this.getHeader(),s=this.options,l=this.elements;return i.empty(),s.closable&&(l.close=e.createElement("span",{class:"close fonticon fonticon-cancel",events:{click:function(){n.hide()}}}).inject(i,"top"),l.closeTooltip=new o({position:"bottom",target:l.close,body:a.close})),t&&i.addContent(t),this},setBody:function(e){return this.elements.body&&(this.elements.body.empty(),this.elements.body.addContent(e)),this},setFooter:function(e){var t=this.getFooter();return t.empty(),e&&t.addContent(e),this},buildSkeleton:function(){var t=e.createElement,n=this.elements,i=this.options;n.container||(n.container=t("div",{class:this.getClassNames()}),n.wrapper=t("div",{class:this.name+"-wrap"}).inject(n.container),n.content=t("div",{class:this.name+"-content"}).inject(n.wrapper),e.is(i.header)?e.is(i.header,"string")&&!/<[\s\S]*>/i.test(i.header)?this.setHeader({tag:"h4",text:i.header}):this.setHeader(i.header):i.closable&&this.setHeader(),n.body=t("div",{class:this.name+"-body",html:i.body}).inject(n.content),e.is(i.footer)&&this.getFooter().addContent(i.footer),i.overlay&&(n.overlay=t("div",{class:this.name+"-overlay"})),i.animate&&(n.container.addClassName("fade"),n.overlay&&n.overlay.addClassName("fade")),i.header=null,i.body=null,i.footer=null)},onPostInject:function(e){this.options.renderTo=e,(this.options.visible||this.isVisible)&&(this.isVisible=!1,this.show())},toggle:function(){return this[this.isVisible?"hide":"show"]()},show:function(){var e=this,n=this.options,i=this.elements;if(i.container)return this.isVisible||(this.isVisible=!0,i.container.isInjected()&&(!l()&&t.addClassName.call(document.body,this.name+"-open"),i.overlay&&i.overlay.inject(n.renderTo||document.body),i.container.setStyle("display","block"),n.animate?setTimeout(function(){e.elements.container&&e.isVisible&&(e.elements.container.addClassName("in"),e.elements.overlay&&e.elements.overlay.addClassName("in"),e.dispatchEvent("onShow"))},50):(e.elements.overlay&&e.elements.overlay.addClassName("in"),e.dispatchEvent("onShow")))),this},hide:function(){var e=this,n=this.options,i=this.elements;function s(){e.isVisible||(e.elements.container&&(e.elements.container.setStyle("display",""),e.elements.overlay&&e.elements.overlay.remove()),!l()&&t.removeClassName.call(document.body,e.name+"-open"),e.dispatchEvent("onHide"))}if(i.container)return this.isVisible&&(this.isVisible=!1,i.container.isInjected()&&(i.overlay&&i.overlay.removeClassName("in"),n.animate?(i.container.removeClassName("in"),setTimeout(function(){s()},150)):s())),this},handleEvents:function(){var e,t,n,i;this.events||(this.events={},this.options.escapeToClose&&(this.events.document={},this.events.document.keyup=function(t){e=t.keyCode?t.keyCode:t.which,this.isVisible&&27===e&&this.hide()}.bind(this),t=this.events.document,n=document,i=!0,Object.keys(t).forEach(function(e){!function(e,t,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n,i)}(e,n,t[e],i)})))},destroy:function(){this.options&&(this.options.animate=!1),this.hide(),this._parent()}};return s.extend(r)}),define("DS/UIKIT/Input/Date",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","DS/UIKIT/Input/Text","DS/UIKIT/DatePicker"],function(e,t,n,i,s,o){"use strict";var a=/ios|android/.test(i.Platform.name)&&i.Features.touchEvents,l={name:"input-date",defaultOptions:{className:"",yearRange:20,firstDay:0,showClearIcon:!1,unselectableDaysOfWeek:null},init:function(e){this._parent(e);var t=this.options,n=t.showClearIcon?this.elements.input:this.elements.container;this.elements.picker=new o({field:n,trigger:n,className:t.pickerClassName,renderTo:t.renderTo,firstDay:t.firstDay,minDate:t.min,maxDate:t.max,unselectableDaysOfWeek:t.unselectableDaysOfWeek,yearRange:t.yearRange})},buildSkeleton:function(){var t=this.elements,n=this.options;n.showClearIcon?(t.input=this.buildInput().set(n.attributes).addClassName("form-control").addClassName(n.className),t.clear=e.createElement("span",{class:this.name+"-reset fonticon fonticon-clear"}),t.container=e.createElement("div",{html:[t.input,t.clear]}),t.container.addClassName(this.name),a&&t.container.addClassName("touch"),this.setDisabled(n.disabled)):this._parent()},buildInput:function(){var t=this.options,n={},i=e.createElement("input",{type:"text"});return this.options.disabled||this.options.allowTextEdition||(i.readOnly=!0),["placeholder","required"].forEach(function(e){t[e]&&(n[e]=t[e])}),i.set(n),i},handleEvents:function(){var e=this;if(e._parent(),e.options.showClearIcon){var i=e.elements,s=e.isDisabled();t.removeEvent.call(i.container,"click",e.events.container.click),e.events.dateContainer={click:function(t){var i=n.getElement(t);/input-date-reset/.test(i.className)&&e.setDate(null,!1),e.dispatchEvent("onClick",[t])}},s?i.container.removeEvents(e.events.dateContainer):i.container.addEvents(e.events.dateContainer)}},getDate:function(){return this.elements.picker.getDate()},setDate:function(e,t){return this.elements.picker.setDate(e,t)},setMinDate:function(e){return this.elements.picker.setMinDate(e)},setMaxDate:function(e){return this.elements.picker.setMaxDate(e)},clearDates:function(){return this.elements.picker.clearDates()}};return s.extend(l)}),define("DS/UIKIT/Input/File",["UWA/Core","UWA/Utils","DS/UIKIT/Input","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,t,n,i){"use strict";var s=new RegExp("^("+["small","large","block","primary","success","default","info","warning","error"].join("|")+")$");function o(e){if(!e)return"";var t=[];return e.split(" ").forEach(function(e,n){var i=e.match(s);i?"small"===i[0]?t[n]="input-group-sm":"large"===i[0]?t[n]="input-group-lg":t[n]="btn-"+e:t[n]=e}),t.join(" ")}var a={defaultOptions:{input:!0,buttonBefore:!0,buttonText:i.browse,placeholder:i.selectFile},init:function(e){(e=e||{}).className=o(e.className),e.buttonClassName=o(e.buttonClassName||"default"),this._parent(e)},buildSkeleton:function(){var t=this.elements,n=this.options;t.container=e.createElement("div",{class:"input-file input-group "+n.className}),t.button=e.createElement("span",{class:"btn btn-file "+n.buttonClassName,text:n.buttonText}),t.input=e.createElement("input",{type:"file",id:n.id||"",attributes:n.attributes}),t.input.multiple=!!n.multiple,t.buttonGroup=e.createElement("span",{class:"input-group-btn"}),t.button.inject(t.buttonGroup),t.buttonGroup.inject(t.container),t.input.inject(t.button),n.input&&(t.textfield=e.createElement("input",{type:"text",class:"form-control",placeholder:n.placeholder,attributes:{readonly:!0}}),n.required&&t.textfield.setAttribute("required",n.required),n.inputAttributes&&t.textfield.set(n.inputAttributes),t.textfield.inject(t.container,n.buttonBefore?"":"top")),this.setDisabled(n.disabled)},handleEvents:function(){var e=this,n=this.elements;this._parent(),this.fileEvents||(this.fileEvents={},t.Client.Engine.ie&&(this.fileEvents.textfield={focus:function(){e.elements.textfield.blur()}})),this.isDisabled()?this.fileEvents.textfield&&n.textfield&&n.textfield.removeEvents(this.fileEvents.textfield):this.fileEvents.textfield&&n.textfield&&n.textfield.addEvents(this.fileEvents.textfield)},syncInput:function(){var t,n,s=this.elements,o=this.options;o.input&&(t=o.multiple&&s.input.files?s.input.files.length:1,s.textfield.value=t>1?t+" "+i.selectedFiles:this.getValue(),this.getValue().length?this.elements.textfield.addClassName("files-uploaded"):this.elements.textfield.removeClassName("files-uploaded")),this.elements.input.title=this.getValue()?(n=this.elements.input.files,[].map.call(n,function(e){return e.name}).join("\n")):e.is(o.attributes.title)?o.attributes.title:i.requiredFileInputTitle},setValue:function(){this.elements.input.value="",this.syncInput()},setText:function(e){this.options.input&&this.elements.textfield.setText(e)},getValue:function(){return this.options.multiple?[].map.call(this.elements.input.files,function(e){return e.name}).join(";"):this.elements.input.value.replace(/\\/g,"/").replace(/.*\//,"")||""},setDisabled:function(e){return this._parent(e),this.elements.button.toggleClassName("disabled",this.isDisabled()),this.options.input&&(this.elements.textfield.disabled=this.isDisabled()),this},clear:function(){return this.setValue(),this}};return n.extend(a)}),define("DS/UIKIT/Autocomplete",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils","UWA/Json","UWA/Controls/Abstract","UWA/Promise","UWA/Data","UWA/Utils/Client","DS/UIKIT/Spinner","DS/UIKIT/Scroller","DS/UIKIT/Badge","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,t,n,i,s,o,a,l,r,c,h,u,d){"use strict";var m=r.Platform.ipad||r.Platform.ios,p=m||r.Platform.android;function f(e,t,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n)}var g={8:"backspace",9:"tab",13:"enter",27:"escape",37:"left-arrow",38:"up-arrow",39:"right-arrow",40:"down-arrow",46:"del"},v={name:"autocomplete",datasets:null,typeTimeout:null,selectedItems:null,badges:null,innerInputs:null,currentPosition:-1,currentBadge:null,currentSuggestions:[],keyboardIndex:-1,scroller:null,CLS_ITEM:"autocomplete-item",CLS_PARENT_ITEM:"autocomplete-parent-item",CLS_HOVERED_ITEM:"js-selected",CLS_FILLED:"autocomplete-filled",SUGGESTIONS_MAX_HEIGHT:200,suggestsDisplayed:!1,defaultOptions:{className:"",placeholder:d.search,noResultsMessage:d.noResults,typeDelayBeforeSearch:500,minLengthBeforeSearch:1,showSuggestsOnFocus:!1,maxSuggestsToDisplay:-1,multiSelect:!1,multiSelectDeviceInnerInputs:!1,itemMultiSelect:!1,tokenSeparator:";",allowFreeInput:!1,disabled:!1,closableItems:!0,floatingSuggestions:!1,inputAutocompleteAttribute:""},init:function(e){this.selectedItems=[],this.badges=[],this.datasets=[],this.innerInputs=[],this._parent(e),this.options.maxHeight=e&&e.maxHeight||this.SUGGESTIONS_MAX_HEIGHT,this.getSuggestion=e&&e.getSuggestion?e.getSuggestion:function(e){return e.hasClassName(this.CLS_ITEM)?e:e.getParent("."+this.CLS_ITEM)},this.buildSkeleton(),e&&e.datasets&&this._addDatasets(e.datasets)},_buildInput:function(){var t=this.options,n=this.name,s={},o=e.createElement("input",{type:"text"});if(["placeholder","required","pattern","maxlength","title"].forEach(function(e){t[e]&&(s[e]=t[e])}),s.required&&void 0===s.title&&(s.title=d.requiredInputTitle),t.inputAutocompleteAttribute){var a=t.inputAutocompleteAttribute;a=i.Client.Engine.chrome&&"chrome-randomize"===a?i.getUUID().substring(0,8):a,s.autocomplete=a}return o.set(s),o.addClassName(n+"-input"),!t.multiSelect&&o.addClassName(n+"-single-select"),o.setAttribute("size",(o.getAttribute("placeholder")||"").length*(0===d._lang.indexOf("zh")||0===d._lang.indexOf("ja")||0===d._lang.indexOf("ko")?2:1)),this.options.name&&(o.name=this.options.name),o},_buildInnerInput:function(){var t,n=e.createElement("input",{type:"text"});return n.addClassName(this.name+"-inner-input"),n.addEvent("keyup",function(){t=5+8*n.value.length,n.setStyle("width",t+"px")}),n.addEvents(this.events.input),n},buildSkeleton:function(){var t=this.elements,n=this.name,s=this.options;t.container||(t.container=e.createElement("div",{class:n+" "+s.className}),t.inputContainer=e.createElement("div",{class:n+"-searchbox",tabindex:"1"}).inject(t.container),s.multiSelect&&t.container.addClassName(n+"-multiselect"),r.Platform.ios&&t.inputContainer.classList.add("prevent-ios-zoom-in"),p&&!s.enforceInnerInputs&&t.inputContainer.classList.add("no-inner-inputs"),t.input=this._buildInput(),t.input.inject(t.inputContainer),!1===s.multiSelect&&(t.clear=e.createElement("span",{class:n+"-reset fonticon fonticon-clear"}).inject(t.inputContainer)),t.suggestsContainer=e.createElement("div",{class:n+"-suggests"}).inject(t.container),s.multiSelect&&s.floatingSuggestions&&t.suggestsContainer.addClassName(n+"-floating-suggests"),t.suggestsScroll=e.createElement("div",{class:n+"-suggests-scroll"}).inject(t.suggestsContainer),t.suggests=e.createElement("ul",{tabindex:"1"}).inject(t.suggestsScroll),i.Client.Engine.firefox&&t.suggests.addClassName("scroller-shift"),this.scroller=new h({element:t.suggestsScroll}).inject(t.suggestsContainer),t.scrollerContent=this.scroller.elements.content,this.setDisabled(s.disabled))},_addDatasets:function(e){var t=this;return i.splat(e).forEach(function(e){t.addDataset(e,e.configuration)}),this},addDataset:function(t,n){var s={items:[]};s.id=i.getUUID().substr(0,6),s.dataCache={},t.items&&this.addItems(t.items,s),(n=n||t.configuration)&&["searchEngine","remoteSearchEngine","filterEngine","templateEngine","dataParser","onError","onTimeout","onGetResults","onNoResults"].forEach(function(t){e.is(n[t],"function")&&(s[t]=n[t])}),s.templateEngine=s.templateEngine?s.templateEngine:function(t,n,i){var s,o;t.addClassName("default-template"),i.parent?((s=e.createElement("span",{class:"item-parent-label"})).setText(i.label),i.parentReference&&(s.setStyle("margin-left",i.parentReference.level+"em"),s.addClassName("sub-item")),s.inject(t)):((s=e.createElement("span",{class:"item-label"})).setText(i.label),i.parentReference&&(s.setStyle("padding-left",i.parentReference.level+"em"),s.addClassName("sub-item")),s.inject(t),i.subLabel&&(t.addClassName("with-sub-label"),(o=e.createElement("span",{class:"sub-label"})).setText(i.subLabel),i.parentReference&&o.setStyle("padding-left",i.parentReference.level+"em"),o.inject(t)))},this.datasets.push(e.merge(s,t)),this.used&&this.getSuggestions(!1,!0)},addItems:function(e,t){var n=this;i.splat(e).forEach(function(i){e.parentItemId&&(i.parentItemId=e.parentItemId,i.level=e.level),n._addItem(i,t)})},_addItem:function(t,n){var s={};(t.value&&t.value.length||t.items)&&(s.id=i.getUUID().substr(0,6),s.datasetId=n.id,s.label=t.label?t.label:t.value,n.items.push(e.merge(s,t)),t.items&&(s.parent=!0,s.level=t.level?t.level+1:1,t.items.level=s.level,t.items.parentItemId=s.id,this.addItems(t.items,n)),t.selected&&this.dispatchEvent("onSelect",[s]))},enableItem:function(e,t){return this._setItemDisabled(e,!1,t)},disableItem:function(e,t){return this._setItemDisabled(e,!0,t)},_setItemDisabled:function(e,t,n){var i=this.getItem(e);if(i)return void 0===t&&(t=!0),i.disabled=t,!0===n&&this.options.multiSelect&&this._setBadgeDisabled(i.id,t),this},_setBadgeDisabled:function(e,t){var n,i=this.getSelectedItemPosition(e);return i>=0&&(n=this.badges[i])&&n.setDisabled(t),this},_removeItemFromCache:function(t,n){var i,s;if(t.dataCache)for(i in t.dataCache)t.dataCache.hasOwnProperty(i)&&(s=t.dataCache[i].indexOf(n),e.is(s)&&t.dataCache[i].splice(s,1))},removeItem:function(e){var t=this;i.splat(e).forEach(function(e){t._removeItem(e)})},_removeItem:function(t){var n,i,s=this.getItem(t);s&&(this.onUnselect(s),i=(n=this.getDataset(s.datasetId)).items.indexOf(s),e.is(i)&&n.items.splice(i,1),this._removeItemFromCache(n,s),i=this.currentSuggestions.indexOf(s),e.is(i)&&this.currentSuggestions.splice(i,1))},getId:function(){return this.elements.input.id},setId:function(t){return e.is(t,"string")&&(this.elements.input.id=t),this},getName:function(){return this.elements.input.name},toggleSelect:function(e,t,n,i){if(e&&!e.disabled)return!0===n?this.dispatchEvent("onSelect",[e,t]):!1===n?this.dispatchEvent("onUnselect",[e,t,i]):e.selected?this.dispatchEvent("onUnselect",[e,t,i]):this.dispatchEvent("onSelect",[e,t]),e},onSelect:function(t,i){var s,o,a,l,r=this.options,c=r.multiSelectDeviceInnerInputs,h=!p||c,d=this;r.multiSelect?(h&&(l=this._buildInnerInput()),s={id:"selected-"+t.id,content:t.label,selectable:!0,events:{onClose:function(e){var t=d.getBadgePosition(o.elements.container),i=t===d.badges.length-1?-1:t;d._handleBadgeDeletion(t,i),n.preventDefault(e)}}},r.closableItems&&(s.closable=!0),(o=new u(s)).elements.container.setAttribute("tabindex","-1"),o.elements.container.setStyle("outline","0"),this._toggleBadgeSelection(this.currentPosition,!1),i>=0?(this.resetInput(i),this.badges[i-1]?o.inject(this.badges[i-1].elements.container,"after"):o.inject(this.elements.inputContainer.getChildren()[0],"before"),this.badges.splice(i,0,o),h&&this.innerInputs.splice(i,0,l)):(this.resetInput(),o.inject(this.elements.input,"before"),this.badges.push(o),h&&this.innerInputs.push(l),m&&window.requestAnimationFrame(function(){var e=o.elements.container;e.getBoundingClientRect().height>25&&e.addClassName("badge-overflowing")})),h&&l.inject(o.elements.container,"before"),this.dispatchEvent("onUpdateInputPosition",[i]),this._toggleBadgeSelection(this.currentPosition),r.itemMultiSelect||(a=this.elements.suggests.getElement("#"+this.CLS_ITEM+"-"+t.id))&&a.addClassName("selected-item")):(this.selectedItems[0]&&this.onUnselect(this.selectedItems[0]),this.elements.input.value=t.label,this.elements.container.toggleClassName(this.CLS_FILLED,!0),this.dispatchEvent("onHideSuggests")),t.selected=!0,i>=0?this.selectedItems.splice(i,0,t):this.selectedItems.push(t),this.options.multiSelect&&this.options.itemMultiSelect&&this.options.showSuggestsOnFocus&&this.showAll(),e.is(t.handler,"function")&&t.handler.call(this),this.suggestsDisplayed&&this._updateSuggestsPosition()},onUnselect:function(t,n,i,s){var o,a,l,r=this.options,c=r.multiSelectDeviceInnerInputs,h=!p||c;if(r.multiSelect){if(o=this.options.itemMultiSelect&&n>=0?n:this.getSelectedItemPosition(t.id),e.is(o)&&o>-1){if(this.resetInput(n),!(a=this.badges[o]))return;this._toggleBadgeSelection(o,!1),a.destroy(),h&&this.innerInputs[o].destroy(),this.badges.splice(o,1),this.selectedItems.splice(o,1),this.innerInputs.splice(o,1),i>=0&&this._updateBadgeFocus(i)}r.itemMultiSelect||(l=this.elements.suggests.getElement("#"+this.CLS_ITEM+"-"+t.id))&&l.removeClassName("selected-item")}else!1!==s&&this.resetInput(),o=this.getSelectedItemPosition(t.id),e.is(o)&&o>-1&&this.selectedItems.splice(o,1),this.elements.container.toggleClassName(this.CLS_FILLED,!1);t.selected=!1,r.multiSelect||this.dispatchEvent("onHideSuggests"),this._updateSuggestsPosition()},unselectAll:function(e){var t=this,n=[];(n=n.concat(this.selectedItems)).forEach(function(n){!1===e?t.dispatchEvent("onUnselect",[n]):t.onUnselect(n)})},showAll:function(){var t,n=[];this.datasets.forEach(function(i){(t={}).suggestions=[],i.items&&i.items.length&&((t=e.merge(t,i)).suggestions=i.items,n.push(t))}),e.is(this.options.filterEngine,"function")&&(n=this.options.filterEngine.call(this,n)),n.length&&this.dispatchEvent("onUpdateSuggests",[n])},getItems:function(){var e=[];return this.datasets&&this.datasets.forEach(function(t){t.items&&t.items.length&&(e=e.concat(t.items))}),e},getItem:function(e){var t,n,i,s,o,a,l=!1;for(t=0,n=this.datasets.length;t<n;t+=1)if((o=this.datasets[t]).items){for(i=0,s=o.items.length;i<s;i+=1){if(l=o.items[i],e&&e.nodeType){if(a=e.hasClassName(this.CLS_ITEM)?e:e.getParent(),this.CLS_ITEM+"-"+l.id===a.id)break}else if(i===e||l.id===e||l.name===e||l.value===e)break;l=!1}if(l)break}else l=!1;return l},getItemByLabel:function(e){var t,n,i,s,o,a=!1;for(t=0,n=this.datasets.length;t<n;t+=1){if(!(o=this.datasets[t]).items){a=!1;break}for(i=0,s=o.items.length;i<s&&(a=o.items[i]).label.toLowerCase()!==e.toLowerCase();i+=1)a=!1;if(a)break}return a},getItemFromSuggestion:function(e){var t=null,n=e.id&&e.id.replace(this.CLS_ITEM+"-","");if(n)return this.currentSuggestions.some(function(e){return e.id+""===n&&(t=e),t}),t},getDataset:function(e){var t,n,i;for(t=0,n=this.datasets.length;t<n&&(i=this.datasets[t],t!==e&&i.id!==e&&i.name!==e);t+=1)i=!1;return i},cleanDataset:function(e){var t=this.getDataset(e),n=this;this.selectedItems.filter(function(e){return e.datasetId===t.id}).forEach(function(e){n.onUnselect(e)}),t.dataCache={},t.items=[]},removeDataset:function(t){var n,i=this.getDataset(t),s=this;i&&(n=this.datasets.indexOf(i),e.is(n)&&this.datasets.splice(i,1),this.selectedItems.filter(function(e){return e.datasetId===i.id}).forEach(function(e){s.onUnselect(e)}),this.currentSuggestions.some(function(e){return e.datasetId===i.id})&&this.getSuggestions())},_appendDatasetName:function(t,n){var i,s;t&&(i=e.createElement("li",{class:"dataset-header"}),(s=e.createElement("span")).setText(t),s.inject(i),i.inject(n))},_appendItem:function(t,n,i){var s,o;n.parentItemId&&(o=this.getItem(n.parentItemId))&&(n.parentReference=o,i.getElement("#"+this.CLS_ITEM+"-"+n.parentItemId)||this._appendItem(t,o,i)),(s=e.createElement("li",{class:this.CLS_ITEM})).id=this.CLS_ITEM+"-"+n.id,t.templateEngine.call(this,s,t,n),n.parent&&(s.addClassName(this.CLS_PARENT_ITEM),n.value&&!n.disabled&&s.addClassName("clickable")),n.selected&&!this.options.itemMultiSelect&&s.addClassName("selected-item"),n.disabled&&s.addClassName("disabled"),n.elements=[],n.elements.container=s,s.inject(i)},defaultSearchEngine:function(e,t){var n=[];return e.items&&e.items.forEach(function(e){e.value&&e.label.toLowerCase().contains(t.toLowerCase())&&n.push(e)}),n},defaultRemoteSearchEngine:function(t,n){var i,s,o=this;return new a(function(a,r){t.searchUrl&&(i=t.searchUrl.replace("{text}",n),l.request(i,{method:"GET",type:"text",onComplete:function(n){(s={}).matchingItems=[],n&&(s.matchingItems=e.is(t.dataParser,"function")?t.dataParser.call(o,t,n):o.defaultDataParser(n)),s.dataset=t,a(s)},onFailure:function(e){e.type="error",e.dataset=t,r(e)},onTimeout:function(e){e.type="timeout",e.dataset=t,r(e)}}))})},isSelected:function(e,t){var n=!1;return this.selectedItems.some(function(i){return i.datasetId===e&&i.value===t&&(n=i),n}),n},getFocusedItem:function(){var e=null;return this.options.multiSelect&&this.currentPosition>=0&&(e=this.selectedItems[this.currentPosition]),e},getFocusedBadge:function(){var e=null;return this.options.multiSelect&&this.currentPosition>=0&&(e=this.badges[this.currentPosition]),e},getSelectedItemPosition:function(e){var t=-1;return this.selectedItems.some(function(n,i){return n.id===e&&(t=i),t>-1}),t},getBadgePosition:function(e){var t=-1;return this.badges.some(function(n,i){return n.elements.container===e&&(t=i),t>-1}),t},getSuggestions:function(t,n){var s,o,l,r,h,u=[],d=this,m=!0,p=function(a){(s={}).suggestions=a.matchingItems,r=a.dataset,o&&o.elements&&o.destroy(),s.suggestions.length>0?(e.is(r.onGetResults,"function")&&r.onGetResults.call(d,r,t,s.suggestions),s.suggestions.forEach(function(e){e.datasetId||(e.datasetId=r.id),(h=d.isSelected(e.datasetId,e.value))&&(e.selected=!0,e.id=h.id),e.id||(e.id=i.getUUID().substr(0,6))}),e.is(r.filterEngine,"function")&&(s.suggestions=r.filterEngine.call(d,r,s.suggestions))):e.is(r.onNoResults,"function")&&r.onNoResults.call(d,r,t),s.suggestions&&s.suggestions.length&&((s=e.merge(s,r)).id=r.id,u.push(s)),r.dataCache[t]=s.suggestions,e.is(d.options.filterEngine,"function")&&(u=d.options.filterEngine.call(d,u)),d.dispatchEvent("onUpdateSuggests",[u,n])},f=function(i){o&&o.elements&&o.destroy(),r=i.dataset,"error"===i.type&&e.is(r.onError,"function")&&(r=i.dataset).onError.call(d,i||[],t),"timeout"===i.type&&e.is(r.onTimeout,"function")&&r.onTimeout.call(d,i||[],t),d.dispatchEvent("onUpdateSuggests",[u,n])};t=t||this.elements.input.value,this.elements.suggests.empty(),this.datasets.forEach(function(n){(s={}).suggestions=[],n.dataCache[t]?s.suggestions=n.dataCache[t]:e.is(n.searchEngine,"function")?(s.suggestions=n.searchEngine.call(d,n,t),e.is(n.filterEngine,"function")&&(s.suggestions=n.filterEngine.call(d,n,s.suggestions)),n.dataCache[t]=s.suggestions):e.is(n.remoteSearchEngine,"function")?(m=!1,o||((l=e.createElement("li",{class:"message"})).inject(d.elements.suggests,"top"),(o=new c).inject(l),o.show()),d.onShowSuggests(),a.cast(n.remoteSearchEngine.call(d,n,t)).then(p,f)):(n.searchUrl?(m=!1,o||((l=e.createElement("li",{class:"message"})).inject(d.elements.suggests,"top"),(o=new c).inject(l),o.show()),d.onShowSuggests(),a.cast(d.defaultRemoteSearchEngine(n,t)).then(p,f)):s.suggestions=d.defaultSearchEngine(n,t),e.is(n.filterEngine,"function")&&(s.suggestions=n.filterEngine.call(d,n,s.suggestions)),n.dataCache[t]=s.suggestions),s.suggestions&&s.suggestions.length&&((s=e.merge(s,n)).id=n.id,u.push(s))}),m&&(e.is(this.options.filterEngine,"function")&&(u=this.options.filterEngine.call(d,u)),this.dispatchEvent("onUpdateSuggests",[u,n]))},_shouldDropUp:function(e){return(e||this.getContent().getOffsets().y+this.elements.inputContainer.getDimensions().height)+this.elements.suggestsContainer.getSize().height>(document.documentElement.clientHeight||window.innerHeight)+(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)},_shouldDropLeft:function(e){return e+this.elements.suggestsContainer.getSize().width>(window.innerWidth||document.documentElement.clientWidth)+(window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft)},_updateSuggestsPosition:function(){var e,t,n,i=this.elements.container,s=this.elements.suggestsContainer,o=this.options.floatingSuggestions&&this.options.multiSelect,a=0,l=0,r=0;o&&(a=(e=this.innerInputs&&this.innerInputs[this.currentPosition]?this.innerInputs[this.currentPosition]:this.elements.input)?e.getPosition().x:this.elements.input.x||0,l=e?e.getPosition().y:this.elements.input.y||0,r=e&&e.getDimensions().height||0,t=e.getOffsets().y+r+4,this.elements.suggestsContainer.setStyle("top","")),n=this._shouldDropUp(t),o&&(this._shouldDropLeft(e.getOffsets().x)?s.setStyle("left",a-(e.getOffsets().x+s.getSize().width-document.documentElement.clientWidth)):s.setStyle("left",a),n?s.setStyle("top",l-s.getDimensions().height-8):s.setStyle("top",l+r+4)),n?i.addClassName("dropup"):i.removeClassName("dropup")},onUpdateSuggests:function(t,n){var i,s,o=this,a=1,l=e.createElement("div"),r=this.options.noResultsMessage,c=!1;this.elements.suggests.empty(),this.currentSuggestions=[],this.keyboardIndex=-1,this.elements.suggestsContainer.setStyle("height",this.options.maxHeight+"px"),t.length?(this.scroller.scrollTo(0,0),this.elements.suggestsContainer.removeClassName("no-result"),t.forEach(function(e){e.name&&e.displayName&&o._appendDatasetName(e.name,l),Array.isArray(e.suggestions)&&(o.currentSuggestions=o.currentSuggestions.concat(e.suggestions),e.suggestions.forEach(function(t){(o.options.maxSuggestsToDisplay<0||o.options.maxSuggestsToDisplay>0&&a<=o.options.maxSuggestsToDisplay)&&(o._appendItem(e,t,l),a++)}))}),this.elements.suggests.setHTML(l.getHTML())):r?((i=e.createElement("li",{class:"message"})).setHTML(this.options.noResultsMessage),i.inject(this.elements.suggests),this.elements.suggestsContainer.addClassName("no-result")):c=!0,this.elements.container.addClassName(this.name+"-suggestsDisplayed"),(s=this.elements.suggests.offsetHeight)>0&&s+20<=this.options.maxHeight?(this.elements.suggestsContainer.setStyle("height",s+20+"px"),this.elements.suggestsScroll.setStyle("height",s+20+"px")):this.elements.suggestsScroll.setStyle("height",this.options.maxHeight+"px"),this.elements.container.removeClassName(this.name+"-suggestsDisplayed"),c||n?this.dispatchEvent("onHideSuggests"):this.dispatchEvent("onShowSuggests")},onFocus:function(){var e=this.elements;e.input.value===this.options.placeholder&&(e.input.value=""),this.elements.inputContainer.addClassName("autocomplete-searchbox-focus"),this.options.showSuggestsOnFocus&&!this.elements.input.value.length?!this.suggestsDisplayed&&this.showAll():this.options.multiSelect&&this.elements.input.value.length&&this.currentSuggestions.length&&!this.suggestsDisplayed&&this.onShowSuggests()},onKeyUp:function(e){var t=n.getElement(e),i=g[e.keyCode];if(!("up-arrow"===i||"down-arrow"===i||"enter"===i||"escape"===i||"tab"===i)){if(0===t.value.length)return this.onHideSuggests(),this.options.showSuggestsOnFocus&&this.showAll(),void(this.options.multiSelect||(this.selectedItems[0]&&this.onUnselect(this.selectedItems[0]),this.elements.container.toggleClassName(this.CLS_FILLED,!1)));t.value.length>0&&!this.options.multiSelect&&this.elements.container.toggleClassName(this.CLS_FILLED,!0),t.value.length>=this.options.minLengthBeforeSearch&&(clearTimeout(this.typeTimeout),this.typeTimeout=setTimeout(function(){this.getSuggestions(t.value)}.bind(this),this.options.typeDelayBeforeSearch))}},onKeyDown:function(){this.used=!0,this.elements.inputContainer.addClassName("autocomplete-searchbox-active"),this.options.multiSelect&&this.elements.input&&this.elements.input.value&&this.elements.input.setStyle("width",8*Math.max(this.elements.input.value.length,this.elements.input.size)+"px")},onShowSuggests:function(){var e=this.elements.container;this._updateSuggestsPosition(),e.addClassName(this.name+"-suggestsDisplayed"),this.suggestsDisplayed=!0,this.keyboardIndex<0&&this._updateKeyboardIndex("down")},onHideSuggests:function(){this.elements.container.removeClassName(this.name+"-suggestsDisplayed"),this.suggestsDisplayed=!1},onClickOutside:function(){""===this.elements.input.placeholder&&(this.elements.input.placeholder=this.options.placeholder),this.elements.inputContainer.removeClassName("autocomplete-searchbox-focus"),this.elements.inputContainer.removeClassName("autocomplete-searchbox-active"),this.dispatchEvent("onHideSuggests")},resetInput:function(e){var t;e>=0?(t=this.innerInputs[e])&&t.setStyle("width","5px"):(t=this.elements.input,this.elements.input.placeholder=this.options.placeholder),t&&(t.value=""),!this.options.multiSelect&&this.elements.container.toggleClassName(this.CLS_FILLED,!1)},reset:function(e){this.resetInput(),this.unselectAll(e),this._updateBadgeFocus(-1)},resetCache:function(){this.datasets.forEach(function(e){e.dataCache={}})},isValid:function(){return!!this.options.allowFreeInput||(this.options.multiSelect?!(""!==this.elements.input.value&&0===this.selectedItems.length):!this.selectedItems[0]||this.selectedItems[0]&&this.selectedItems[0].value&&this.elements.input.value===this.selectedItems[0].value)},isEmpty:function(){return this.options.multiSelect?!(this.selectedItems&&0!==this.selectedItems.length||this.elements.input.value&&""!==this.elements.input.value):!this.elements.input.value||""===this.elements.input.value},getValue:function(){var e="",t=this;return this.selectedItems.forEach(function(n){n.value&&(e=e.concat(n.value+t.options.tokenSeparator))}),e.substring(0,e.length-1)},getSelection:function(){var e,t=this.options.allowFreeInput,n=this.elements.input.value,i=[];return this.options.multiSelect?(i=i.concat(this.selectedItems),t&&n&&i.push(n),i.length?i:""):(e=this.selectedItems[0])&&e.value&&e.value===n?e:t&&n||""},getSelectionByDataset:function(e){var t,n=this.getDataset(e);if(n)return(t=this.selectedItems.filter(function(e){return e.datasetId===n.id})).length?t:""},defaultDataParser:function(e){var t,n,i;if(s.isJson(e))e=s.decode(e),i=!0;else for(t in e=s.xmlToJson(e))if(e.hasOwnProperty(t)){e=e[t];break}for(t in e)if(e.hasOwnProperty(t)&&(n||(n=t),Array.isArray(e[t]))){e=e[t],i=!0;break}if(!i&&n&&(e=[e[n]]),!Array.isArray(e)){var o=[];for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);(e=[]).push(o)}return Array.isArray(e)?e:[]},getCurrentPosition:function(){return this.currentPosition},getNeighbourBadge:function(e,t){var n=-1,i=t>=0?t:this.currentPosition,s=e||"left";return n=i>=0?"left"===s?i-1:i+1:"left"===s?this.badges.length-1:-1,this.badges[n]||null},getNeighbourSelectedItem:function(e,t){var n=-1,i=t>=0?t:this.currentPosition,s=e||"left";return n=i>=0?"left"===s?i-1:i+1:"left"===s?this.badges.length-1:-1,this.selectedItems[n]||null},_updateBadgeFocus:function(e,t){this._toggleBadgeSelection(this.currentPosition,!1),this.dispatchEvent("onUpdateInputPosition",[e]),!t&&this._toggleBadgeSelection(e,!0,t)},_updateInnerInputFocus:function(e,t){var n=this.innerInputs[e];n&&(!t&&this.dispatchEvent("onUpdateInputPosition",[e]),n.focus())},_toggleBadgeSelection:function(e,t,n){var i=this.badges[e];i&&(void 0===t&&(t=!0),t?(!this.options.closableItems&&i.setClosable(!0),i.select(),i.elements.container.focus(),!n&&this.dispatchEvent("onSelectBadge",[this.selectedItems[e],i,this.getBadgePosition(i.elements.container)]),this.currentBadge=i):this.currentBadge&&(!this.options.closableItems&&i.setClosable(!1),i.select(!1),!n&&this.dispatchEvent("onUnselectBadge",[this.selectedItems[e],i,this.getBadgePosition(i.elements.container)]),this.currentBadge=null))},onUpdateInputPosition:function(e){this.currentPosition=e},_updateKeyboardIndex:function(e){var t,n,i,s=this,o=this.keyboardIndex,a=this.keyboardIndex,l=function(o){var a=o;if(t=!1,-1===o&&"reset"!==e?(o=0,t=!0):s.currentSuggestions&&"down"===e&&o<s.currentSuggestions.length-1?(o+=1,t=!0):"up"===e&&o>0?(o-=1,t=!0):"reset"===e&&(s._hoverItem(o,!1),o=-1),t&&!(i=r(o))){if(o!==s.currentSuggestions.length-1)return l(o);i=n,o=a}return o},r=function(e){var t=null;return s.currentSuggestions&&(t=s.currentSuggestions[e]),!(t&&(t.disabled||!t.value))&&t};if(n=r(a),"number"==typeof e){if(!(i=r(o=e)))return;n&&this._hoverItem(n,!1),this._hoverItem(i,!0)}else o=l(o),t&&o>=0&&(n&&this._hoverItem(n,!1),i&&this._hoverItem(i,!0,0===o?3:function(e,t){var n,i,o,a,l,r,c,h=0;if(e&&t&&(r=s.elements.suggestsContainer.getElement("#"+s.CLS_ITEM+"-"+e.id),c=s.elements.suggestsContainer.getElement("#"+s.CLS_ITEM+"-"+t.id),r&&c))return n=s.elements.suggestsContainer.getDimensions().height,i=r.offsetTop,o=c.offsetTop,(a=Math.floor(i/n))+1===(l=Math.floor(o/n))?h=1:a-1===l&&(h=2),h}(n,i)));this.keyboardIndex=o},_hoverItem:function(e,t,n){var i,s;if(e){if(s=void 0===t||t,!(i=this.elements.suggestsContainer.getElement("#"+this.CLS_ITEM+"-"+e.id)))return;s?(i.addClassName(this.CLS_HOVERED_ITEM),i.focus(),1===n&&this.scroller.scrollToElement(i,"top"),2===n&&this.scroller.scrollToElement(i,"bottom"),3===n&&this.scroller.scrollTo(0,0)):i.removeClassName(this.CLS_HOVERED_ITEM)}},_getActiveItem:function(){var e=this.keyboardIndex;return e>=0&&this.currentSuggestions[e]},enable:function(){return this.setDisabled(!1)},disable:function(){return this.setDisabled()},isDisabled:function(){return this.elements.input.disabled},setDisabled:function(e){var t=this.elements;return void 0===e&&(e=!0),t.input.disabled=e,t.inputContainer.toggleClassName("disabled",e),this.handleEvents(),this},_selectCurrentInput:function(e){var t,n=e>=0?this.innerInputs[e].value:this.elements.input.value,s=!0===this.options.itemMultiSelect||null;if(n&&(!(t=this.getItemByLabel(n))&&this.suggestsDisplayed&&this.currentSuggestions&&1===this.currentSuggestions.length&&(t=this.currentSuggestions[0]),!t&&this.options.allowFreeInput&&((t={}).id=i.getUUID().substr(0,6),t.value=t.label=n),t))return this.toggleSelect(t,e,s)},_handleBadgeDeletion:function(e,t){var n=this.badges[e];t===this.selectedItems.length&&(t=-1),n&&n.isDisabled()||(this.elements.inputContainer.addClassName("autocomplete-searchbox-active"),this.dispatchEvent("onUnselect",[this.selectedItems[e],e,t]),-1===t&&this.elements.input.focus())},handleEvents:function(){var e,t,i,s,o=!0===this.options.itemMultiSelect||null;this.events||(this.events={},this.events.input={focus:function(e){var t=n.getElement(e);/autocomplete-inner-input/.test(t.className)?this._updateBadgeFocus(this.getBadgePosition(t.nextSibling),!0):this._updateBadgeFocus(-1),/fonticon-cancel/.test(t.className)||this.dispatchEvent("onFocus",[e])}.bind(this),blur:function(e){this.dispatchEvent("onBlur",[e])}.bind(this),keyup:function(e){this.dispatchEvent("onKeyUp",[e])}.bind(this),keydown:function(e){var t=g[e.keyCode],i=n.getElement(e),s=/autocomplete-inner-input/.test(i.className),a=this.innerInputs[this.currentPosition],l=s&&a&&a.value.length,r=/autocomplete-input/.test(i.className)&&this.elements.input.value.length,c="up-arrow"===t,h="down-arrow"===t,u="enter"===t,d="tab"===t,m="escape"===t;if(this.dispatchEvent("onKeyDown",[e]),c&&(this._updateKeyboardIndex("up"),n.preventDefault(e)),h&&(this._updateKeyboardIndex("down"),n.preventDefault(e)),u||d){var p=this._getActiveItem(),f=null;u&&p&&this.suggestsDisplayed?(n.preventDefault(e),f=this.toggleSelect(p,this.currentPosition,o)):this.options.multiSelect&&(l||r)&&(f=this._selectCurrentInput(this.currentPosition),(u||f)&&n.preventDefault(e)),s&&f?u?(this.innerInputs[this.currentPosition+1]||this.elements.input).focus():this.elements.input.focus():!s&&d&&(this.elements.inputContainer.removeClassName("autocomplete-searchbox-focus"),this.elements.inputContainer.removeClassName("autocomplete-searchbox-active"))}(d||m)&&this.dispatchEvent("onHideSuggests")}.bind(this)},this.events.input.compositionupdate=function(e){this.dispatchEvent("onKeyUp",[e])}.bind(this),this.events.inputContainer={click:function(e){var t=n.getElement(e),i=/badge/.test(t.className)&&!(/disabled/.test(t.className)||/disabled/.test(t.parentElement.className)),s=/badge-close/.test(t.className)&&!/disabled/.test(t.parentElement.className),o=/autocomplete-inner-input/.test(t.className),a=/fonticon-cancel/.test(t.className),l=/autocomplete-reset/.test(t.className);i||o||a||this.elements.input.focus(),i&&!s&&(t.hasClassName("badge-content")&&(t=t.getParent()),this._updateBadgeFocus(this.getBadgePosition(t))),l&&!1===this.options.multiSelect&&(this.elements.inputContainer.addClassName("autocomplete-searchbox-active"),this.reset(!1),this.options.showSuggestsOnFocus&&this.showAll())}.bind(this),keydown:function(e){var t,i,s,o,a,l,r=g[e.keyCode],c=n.getElement(e),h=/badge/.test(c.className),u=h&&/disabled/.test(c.className),d=/autocomplete-inner-input/.test(c.className),m=this.innerInputs[this.currentPosition],p=d&&m&&m.value.length,f=m&&""===m.value,v=/autocomplete-input/.test(c.className),b=v&&this.elements.input.value.length,I="right-arrow"===r,E="backspace"===r,C="del"===r,y="tab"===r;if("left-arrow"===r){if(t=-1,i=-1,!this.options.multiSelect||!this.selectedItems.length||p||b)return;null!=this.currentPosition&&this.currentPosition>=0?h?i=this.currentPosition:f&&(t=this.currentPosition-1):""===this.elements.input.value&&(t=this.selectedItems.length-1),t>=0?this._updateBadgeFocus(t):i>=0&&this._updateInnerInputFocus(i)}if(I){if(t=-1,i=-1,!this.options.multiSelect||!this.selectedItems.length||p||b)return;null!=this.currentPosition&&this.currentPosition>=0&&(h?i=this.currentPosition+1:f&&(t=this.currentPosition)),t>=0&&t<this.selectedItems.length?this._updateBadgeFocus(t):i>=0&&i<this.selectedItems.length?(this._toggleBadgeSelection(this.currentPosition,!1),this._updateInnerInputFocus(i)):t!==this.selectedItems.length&&i!==this.selectedItems.length||(this._updateBadgeFocus(-1),this.elements.input.focus(),this.onShowSuggests())}if(E||C)if(this.options.multiSelect||this.options.allowFreeInput){if(!this.selectedItems.length||p||b||u)return;E&&this.currentPosition<0&&v&&""===this.elements.input.value?(s=this.selectedItems.length-1,t=-1):this.currentPosition>=0&&(E?(s=d?this.currentPosition-1:this.currentPosition,t=d?this.currentPosition-2:this.currentPosition-1):t=(s=this.currentPosition)===this.badges.length-1?-1:s),s>=0&&this._handleBadgeDeletion(s,t),n.preventDefault(e)}else o=this.getItem(c.value),a=c.value.substring(0,c.value.length-1),l=this.getItem(a),o&&!l&&this.onUnselect(this.selectedItems[0],null,null,!1);y&&h&&(this.elements.input.focus(),n.preventDefault(e))}.bind(this)},this.events.suggestsContainer={mouseover:function(e){var t,i,s,o,a=n.getElement(e),l=this.getSuggestion(a),r=-1;if(l&&l.id){for((s=l.getElement(".item-label"))&&(s.offsetWidth<s.scrollWidth?(o=s.textContent)&&s.setAttribute("title",o):s.setAttribute("title","")),t=l.id.replace("autocomplete-item-",""),i=0;i<this.currentSuggestions.length;i++)if(this.currentSuggestions[i].id===t){r=i;break}r>-1&&this._updateKeyboardIndex(r)}}.bind(this),click:function(e){var t,i=n.getElement(e),s=this.getSuggestion(i);if(this.elements.inputContainer.addClassName("autocomplete-searchbox-active"),s&&(!s.hasClassName(this.CLS_PARENT_ITEM)||s.hasClassName(this.CLS_PARENT_ITEM)&&s.hasClassName("clickable"))){if(!(t=this.getItemFromSuggestion(s))||t.disabled)return;this.toggleSelect(t,this.currentPosition,o),this.options.multiSelect&&(this.currentPosition>-1?(this.innerInputs[this.currentPosition+1]||this.elements.input).focus():this.elements.input.focus())}}.bind(this)},this.events.document={click:function(e){n.getElement(e).isInjected(this.elements.container)||e.target===this.elements.container.suggestsContainer||(this.dispatchEvent("onClickOutside",[e]),this._updateBadgeFocus(-1))}.bind(this)},this.events.scrollerContent={scroll:function(){this.elements.inputContainer.addClassName("autocomplete-searchbox-active")}.bind(this)}),this.isDisabled()?(f("click",document,this.events.document.click),this.elements.inputContainer.removeEvents(this.events.inputContainer),this.elements.input.removeEvents(this.events.input),this.elements.suggestsContainer.removeEvents(this.events.suggestsContainer),this.elements.scrollerContent.removeEvents(this.events.scrollerContent)):(this.hasEvent("onClickOutside")&&(e="click",t=document,i=this.events.document.click,s=!0,t.addEventListener?t.addEventListener(e,i,s):t.attachEvent&&t.attachEvent("on"+e,i,s)),this.elements.inputContainer.addEvents(this.events.inputContainer),this.elements.input.addEvents(this.events.input),this.elements.suggestsContainer.addEvents(this.events.suggestsContainer),this.elements.scrollerContent.addEvents(this.events.scrollerContent))},destroy:function(){delete this.datasets,delete this.selectedItems,delete this.badges,delete this.innerInputs,delete this.currentSuggestions,this.scroller.destroy(),f("click",document,this.events.document.click),this._parent()}};return o.extend(v)}),define("DS/UIKIT/Form",["UWA/Core","UWA/Data","UWA/Element","UWA/Event","UWA/Utils","UWA/Controls/Abstract","DS/UIKIT/Input/Text","DS/UIKIT/Input/Password","DS/UIKIT/Input/Button","DS/UIKIT/Input/ButtonGroup","DS/UIKIT/Input/Number","DS/UIKIT/Input/Select","DS/UIKIT/Input/Date","DS/UIKIT/Input/Toggle","DS/UIKIT/Autocomplete","DS/UIKIT/Input/File"],function(e,t,n,i,s,o,a,l,r,c,h,u,d,m,p,f){"use strict";function g(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function v(e){var t,n,i;if(e){for(t=0,n=(e=e.split(" ")).length;t<n;t++)(i=e[t].match(/horizontal|inline|vertical$/))&&!i[1]&&("horizontal"===i[0]?e[t]="form-horizontal":"inline"===i[0]?e[t]="form-inline":"vertical"===i[0]&&(e[t]="form-vertical"));return e.join(" ")}}var b={alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},I={name:"form",texts:null,booleans:null,lists:null,dates:null,passwords:null,files:null,ranges:null,buttons:null,autocompletes:null,numbers:null,defaultOptions:{className:"form-vertical",fields:[],buttons:[],labelSuffix:"",grid:"2 10",autocomplete:!1,method:"POST",encoding:"application/x-www-form-urlencoded",spellcheck:!0},init:function(e){e=e||{},this.texts=[],this.booleans=[],this.lists=[],this.dates=[],this.passwords=[],this.files=[],this.ranges=[],this.buttons=[],this.autocompletes=[],this.numbers=[],e.className&&(e.className=v(e.className)),this.id=s.getUUID().substring(0,6),this._parent(e),this.buildSkeleton()},buildSkeleton:function(){var t,n,s=this,o=this.options.fields,a=this.options.buttons,l=this.fields,r=[],c=[],h=function(t,n,i){var s;if(t.helperText&&n&&(s=e.createElement("span",{text:t.helperText,class:"form-control-helper-text"}).inject(n,i||"after")),t.errorText&&n){var o=s||n;e.createElement("span",{text:t.errorText,class:"form-control-error-text"}).inject("bottom"===i?o:n,"bottom"===i?"before":"after")}};n=e.createElement("form",{attributes:{novalidate:"novalidate",spellcheck:this.options.spellcheck?"true":"false",autocomplete:this.options.autocomplete?"on":"off"},class:this.getClassNames(),events:{submit:function(e){i.stop(e),s.submit.call(s,!1)},reset:function(e){i.stop(e),s.reset.call(s)}}}),o.forEach(function(t){var n,i,o;"hidden"!==t.type&&(void 0===l[t.type]&&(t.type="text"),"radio"===t.type&&t.name&&r.some(function(e){var i=e&&e.getElement("input");if(i&&"radio"===i.type&&i.name===t.name)return n=e,!0}),i=l[t.type](t,s,n),!n&&i&&(t.label&&t.required&&e.createElement("span",{class:"label-field-required",text:" *"}).inject(i.getElement("label")),"file"===t.type?o=i.getElement(".input-file"):"autocomplete"===t.type?o=i.getElement(".autocomplete"):"radio"===t.type?c.push({field:t,helpersBase:i.firstChild}):"number"!==t.type||t.nativeNumber?"select"!==t.type||t.nativeSelect?o=i&&i.getElement(".form-control"):h(t,i,"bottom"):o=i.getElement(".input-number"),o&&h(t,o)),t.label&&t.className&&t.className.contains("input-sm")&&i.getElement("label").addClassName("label-sm"),r.push(i))}),c.forEach(function(e){h(e.field,e.helpersBase,"bottom")}),a.sort(function(e,t){return"submit"===e.type&&"submit"!==t.type||"reset"===e.type&&!t.type?-1:"submit"!==e.type&&"submit"===t.type||"reset"===t.type&&!e.type?1:0}).forEach(function(e,n){/submit|reset/.test(e.type)||(e.type="button"),n?l[e.type](e,s,t):t=l[e.type](e,s)}),t&&t.addClassName("form-footer"),r.push(t),n.addContent(r),this.elements.container=n},getFields:function(e){var t="textarea, input, select";return e&&(t+=", button"),this.elements.container.getElements(t)},getField:function(e){var t,n,i,s=this.getFields();for(t=0,n=s.length;t<n;t++)if((i=s[t]).name===e||i.id===e)return i},_getInput:function(e,t){var n,i,s;for(n=0,i=t.length;n<i;n++)if((s=t[n]).getName()===e)return s},getListInput:function(e){return this._getInput(e,this.lists)},getTextInput:function(e){return this._getInput(e,this.texts)},getBooleanInput:function(e){return this._getInput(e,this.booleans)},getDateInput:function(e){return this._getInput(e,this.dates)},getPasswordInput:function(e){return this._getInput(e,this.passwords)},getFileInput:function(e){return this._getInput(e,this.files)},getRangeInput:function(e){return this._getInput(e,this.ranges)},getNumberInput:function(e){return this._getInput(e,this.numbers)},getButtonInput:function(e){return this._getInput(e,this.buttons)},getAutocompleteInput:function(e){return this._getInput(e,this.autocompletes)},getInput:function(e){return this._getInput(e,this.getAllInputInstances())},unvalidate:function(){return this.getContent().getElements(".has-error").forEach(function(e){e.removeClassName("has-error")}),this},validate:function(t,n){var i,s,o=[],a=this.getFields(),l=this;return this.unvalidate(),a.forEach(function(t){switch(t.type){case"button":case"submit":break;case"radio":var n;t.required&&!t.disabled&&(n=a.filter(function(e){if(e.name===t.name)return!0}),o.every(function(e){return-1===n.indexOf(e)})&&n.every(function(e){return!e.checked})&&o.push(t));break;case"checkbox":t.required&&!1===t.checked&&!t.disabled&&o.push(t);break;case"text":case"textarea":case"email":case"url":case"tel":if(t.name&&l.getAutocompleteInput(t.name))break;i=(i=t.pattern||t.getAttribute("pattern"))||!/text(area)?/.test(t.type)&&t.type,t.required&&""===t.value&&!t.disabled?o.push(t):i&&!t.disabled&&("tel"===i&&(i="alpha_numeric"),b.hasOwnProperty(i)&&i.length>0?i=b[i]:i.length>0&&(i=new RegExp(i)),e.is(i,"regexp")&&t.value.length>0&&!i.test(t.value)&&o.push(t));break;default:t.required&&""===t.value&&!t.disabled&&o.push(t)}}),this.autocompletes.forEach(function(e){(s=l.getField(e.getId())).required&&!s.disabled?!e.isEmpty()&&e.isValid()||o.push(s):e.isValid()||o.push(s)}),!0!==t&&o.length>0&&(o.forEach(function(e){e.getParent(".form-group").addClassName("has-error")}),!n&&o[0].focus()),this.dispatchEvent(0===o.length?"onValid":"onInvalid"),0===o.length},submit:function(t){var n,i=this.options;return(i.novalidate||!i.novalidate&&this.validate()||t)&&(this.dispatchEvent("onSubmit",this.getValues()),i.url&&(this.getContent().setAttributes({method:i.method,action:i.url,target:"form_transfer_"+this.id,enctype:i.encoding}),(n=e.createElement("iframe",{name:"form_transfer_"+this.id,src:"javascript:false;",attributes:{tabindex:-1,frameborder:0},styles:{visibility:"hidden",width:0,height:0,border:0}}).inject(document.body)).onload=function(){n.parentNode.removeChild(n)},this.autocompletes.forEach(function(e){e.options&&!0===e.options.multiSelect&&(e.elements.input.value=e.getValue())}),this.getContent().submit(),this.autocompletes.forEach(function(e){e.options&&!0===e.options.multiSelect&&(e.elements.input.value="")}))),this},getAllInputInstances:function(){return[].concat(this.texts,this.booleans,this.lists,this.dates,this.passwords,this.files,this.ranges,this.buttons,this.autocompletes)},setDisabled:function(e){return void 0===e&&(e=!0),this.getAllInputInstances().forEach(function(t){t.setDisabled(e)}),this},enable:function(){return this.setDisabled(!1)},disable:function(){return this.setDisabled()},reset:function(){var e=this.getValues();return Object.keys(e).forEach(function(t){e[t]=""}),this.autocompletes.forEach(function(e){e.reset()}),this.setValues(e),this.dispatchEvent("onReset"),this},getValues:function(){var t,n,i,s={},o=Array.prototype,a=this.getFields();for(t=0,n=a.length;t<n;t++)switch((i=a[t]).type){case"button":case"submit":break;case"password":""!==i.value&&(s[i.name]=i.value);break;case"checkbox":s[i.name]=!!i.checked,"string"==typeof i.value&&(s[i.name]=String(s[i.name]));break;case"radio":i.checked&&(s[i.name]=i.value);break;case"select-multiple":s[i.name]=o.filter.call(i.getElementsByTagName("*"),function(e){if(e.selected&&"optgroup"!==e.getTagName()&&e.value)return!0}).reduce(function(e,t){return(e?e+",":e)+t.value},"")||"";break;default:e.is(i.name)&&i.name.length&&(s[i.name]=i.value)}return this.autocompletes.forEach(function(t){e.is(t.elements.input.name)&&t.elements.input.name.length&&(s[t.elements.input.name]=t.getValue())}),this.files.forEach(function(t){e.is(t.elements.input.name)&&t.elements.input.name.length&&(s[t.elements.input.name]=t.getValue())}),s},getValue:function(e){return this.getValues()[e]},setValues:function(e){var t,n,i,s,o=this.getFields();for(t=0,n=o.length;t<n;t++)if(i=o[t],e.hasOwnProperty(i.name))switch(s=e[i.name],i.type){case"password":case"button":case"reset":case"submit":break;case"checkbox":i.checked=!!s,g(i);break;case"radio":i.checked&&String(i.value)===s&&(i.checked=!!s,g(i));break;default:i.value=s,g(i)}return this},setValue:function(e,t){var n={};return n[e]=t,this.setValues(n)},createField:function(t,n,i,s){var o,a;return this.options.className.indexOf("form-horizontal")>-1&&this.options.grid?((!(a=this.options.grid.split(" "))||a.length<2)&&(a=[2,10]),s?t.inject(s.getChildren()[0]):n?(n.addClassName("col-sm-"+a[0]+" control-label"),o=e.createElement("div",{class:"form-group",html:[n,{tag:"div",class:"col-sm-"+a[1],html:t}]})):o=e.createElement("div",{class:"form-group",html:{tag:"div",class:"col-sm-offset-"+a[0]+" col-sm-"+a[1],html:t}})):this.options.className.indexOf("form-inline")>-1?s?t.inject(s):n?(n.addClassName("sr-only"),o=e.createElement("div",{class:"form-group",html:[n,t]})):o=e.createElement("div",{class:"form-group",html:t}):s?t.inject(s):o=n?e.createElement("div",{class:"form-group",html:[n,t]}):e.createElement("div",{class:"form-group",html:t}),i&&o.hide(),o},setClassName:function(e){return this.options.className=v(e),this.getContent().className=this.getClassNames(),this},fields:{text:function(t,n){var i,o,l=n,r={attributes:{autocorrect:"off",autocapitalize:"off",spellcheck:void 0!==t.spellcheck?t.spellcheck:l.options.spellcheck},id:"input-"+s.getUUID().substring(0,6)};return t.hasOwnProperty("autocomplete")?(t.attributes||(t.attributes={}),t.attributes.autocomplete=t.autocomplete):r.attributes.autocomplete="off",i=new a(e.extend(t,r,!0)),n.texts.push(i),i.addEvent("onChange",function(){l.dispatchEvent("onChange",[this.getName(),this.getValue(),t.onchange])}),e.is(t.label)&&(o=e.createElement("label",{for:i.getId(),text:e.i18n(t.label+l.options.labelSuffix)})),l.createField.call(l,i,o)},textarea:function(t,n){return this.text(e.merge(t,{multiline:!0}),n)},password:function(t,n){var i,o,a=n,r={attributes:{autocorrect:"off",autocapitalize:"off"},id:"input-"+s.getUUID().substring(0,6)};return t.hasOwnProperty("autocomplete")?(t.attributes||(t.attributes={}),t.attributes.autocomplete=t.autocomplete):r.attributes.autocomplete="off",i=new l(e.extend(t,r,!0)),n.passwords.push(i),i.addEvent("onChange",function(){a.dispatchEvent("onChange",[this.getName(),this.getValue(),t.onchange])}),(e.is(t.label)||e.is(t.name))&&(o=e.createElement("label",{for:i.getId(),text:e.i18n((t.label||t.name)+a.options.labelSuffix)})),a.createField.call(a,i,o)},file:function(t,n){var i,o,a,l=n,r={id:"input-"+s.getUUID().substring(0,6)};return i=new f(e.extend(t,r,!0)),n.files.push(i),i.addEvent("onChange",function(){l.dispatchEvent("onChange",[this.getName(),this.getValue(),t.onchange])}),(e.is(t.label)||e.is(t.name))&&(o=e.createElement("label",{for:i.getId(),text:e.i18n((t.label||t.name)+l.options.labelSuffix)})),a=l.createField.call(l,i,o),i.elements.textfield.onfocus=function(){a.toggleClassName("focused",!0)},i.elements.textfield.onblur=function(){a.toggleClassName("focused",!1)},a},autocomplete:function(t,n){var i,o,a,l=n,r={id:"input-"+s.getUUID().substring(0,6)};return t.hasOwnProperty("autocomplete")&&(t.inputAutocompleteAttribute=t.autocomplete),(i=new p(e.extend(t,r,!0))).setId(s.getUUID().substr(0,6)),n.autocompletes.push(i),i.addEvent("onChange",function(){l.dispatchEvent("onChange",[this.getName(),this.getValue(),t.onchange])}),(e.is(t.label)||e.is(t.name))&&(o=e.createElement("label",{for:i.getId(),text:e.i18n((t.label||t.name)+l.options.labelSuffix)})),a=l.createField.call(l,i,o),i.addEvent("onFocus",function(){a.toggleClassName("focused",!0)}),i.addEvent("onBlur",function(){a.toggleClassName("focused",!1)}),a},list:function(t,n){var i,o,a=n,l=!1,r={id:"input-"+s.getUUID().substring(0,6),placeholder:!1,multiple:!1,nativeSelect:!1};return i=new u(e.merge(t,r)),n.lists.push(i),i.addEvent("onChange",function(){a.dispatchEvent("onChange",[this.getName(),this.getValue()[0],t.onchange])}),(e.is(t.label)||e.is(t.name))&&(o=e.createElement("label",{for:i.getId(),text:e.i18n((t.label||t.name)+a.options.labelSuffix)})),0===i.getOptions().length&&(l=!0),a.createField.call(a,i,o,l)},select:function(e,t){return this.list(e,t)},range:function(t,n){var i,o,a=n,l={id:"input-"+s.getUUID().substring(0,6),placeholder:!1};return i=new h(e.merge(t,l)),n.ranges.push(i),i.addEvent("onChange",function(){a.dispatchEvent("onChange",[this.getName(),this.getValue(),t.onchange])}),e.is(t.label)&&(o=e.createElement("label",{for:i.getId(),text:e.i18n((t.label||t.name)+a.options.labelSuffix)})),a.createField.call(a,i,o,!1)},number:function(t,n){var i,o,a,l=n,r={id:"input-"+s.getUUID().substring(0,6),placeholder:!1};return i=new h(e.merge(t,r)),n.numbers.push(i),i.addEvent("onChange",function(){l.dispatchEvent("onChange",[this.getName(),this.getValue(),t.onchange])}),e.is(t.label)&&(o=e.createElement("label",{for:i.getId(),text:e.i18n((t.label||t.name)+l.options.labelSuffix)})),a=l.createField.call(l,i,o,!1),i.elements.input.onfocus=function(){a.toggleClassName("focused",!0)},i.elements.input.onblur=function(){a.toggleClassName("focused",!1)},a},boolean:function(t,n,i){var o,a=n,l={id:"input-"+s.getUUID().substring(0,6),type:"checkbox",className:"primary"};return!e.is(t.checked)&&e.is(t.value)&&(t.checked="true"===t.value||!0===t.value),o=new m(e.merge(t,l)),n.booleans.push(o),o.addEvent("onChange",function(){a.dispatchEvent("onChange",[this.getName(),this.isChecked(),t.onchange])}),a.createField.call(a,o,!1,!1,i)},radio:function(t,n,i){return this.boolean(e.extend(t,{type:"radio"}),n,i)},checkbox:function(t,n){return this.boolean(e.extend(t,{type:"checkbox"}),n)},submit:function(t,n,i){var o,a=n,l={id:"input-"+s.getUUID().substring(0,6),value:"Submit",className:"primary",attributes:{type:"submit"}};return t.action&&(t.events=t.events||{},t.events.onClick=t.action),o=new r(e.merge(t,l)),n.buttons.push(o),a.createField.call(a,o,!1,!1,i)},reset:function(t,n,i){var o,a=n,l={id:"input-"+s.getUUID().substring(0,6),value:"Reset",attributes:{type:"reset"}};return t.action&&(t.events=t.events||{},t.events.onClick=t.action),o=new r(e.merge(t,l)),n.buttons.push(o),a.createField.call(a,o,!1,!1,i)},button:function(t,n,i){var o,a=n,l={id:"input-"+s.getUUID().substring(0,6)};return t.action&&(t.events=t.events||{},t.events.onClick=t.action),o=new r(e.merge(t,l)),n.buttons.push(o),a.createField.call(a,o,!1,!1,i)},html:function(t){return e.createElement("div",{class:"form-group",html:t.html})},help:function(t){return e.createElement("span",{class:"help-block",text:t.text})},date:function(t,n){var i,o,a=n,l={attributes:{autocomplete:"off",autocorrect:"off",autocapitalize:"off"},id:"input-"+s.getUUID().substring(0,6)};return i=new d(e.extend(t,l,!0)),n.dates.push(i),i.addEvent("onChange",function(){a.dispatchEvent("onChange",[this.getName(),this.getValue(),t.onchange])}),e.is(t.label)&&(o=e.createElement("label",{for:i.getId(),text:e.i18n(t.label+a.options.labelSuffix)})),a.createField.call(a,i,o)},email:function(t,n){return this.text(e.merge(t,{attributes:{type:"email"}}),n)},tel:function(t,n){return this.text(e.merge(t,{attributes:{type:"tel"}}),n)},url:function(t,n){return this.text(e.merge(t,{attributes:{type:"url"}}),n)}}};return o.extend(I)}),define("DS/UIKIT/SuperModal",["UWA/Core","UWA/Element","UWA/Event","UWA/Utils/Client","UWA/Controls/Abstract","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Input/Text","DS/UIKIT/Form","i18n!DS/UIKIT/assets/nls/UIKIT"],function(e,t,n,i,s,o,a,l,r,c){"use strict";var h={defaultOptions:{className:"",animate:!1,closable:!0,overlay:!0,okButtonText:c.ok,koButtonText:c.ko},modals:{current:null,queue:[]},init:function(e){this._parent(e)},alert:function(){var t,n,i=arguments,s=i[0],o=i[1],l=i[2],r=i[3],c=e.merge({visible:!1},this.options);e.is(i[0],"object")&&(s=i[0].message,o=i[0].title,l=i[0].callback,r=i[0].okButtonText),c.closable=!1!==this.options.closable,c.events={onHide:function(){e.is(l,"function")&&l()},onShow:function(){n.focus()}},t=this.modalFactory(c),e.is(s,"string")&&t.elements.body.addContent({tag:"p",text:s}),e.is(o,"string")?t.setHeader({tag:"h4",text:o}):(t.getHeader().hide(),l||(l=o)),!e.is(l,"function")&&this.options.callback&&(l=this.options.callback),n=new a({value:r||c.okButtonText,className:"primary",events:{onClick:function(){t.hide()}}}),t.setFooter(n),t.dispatchEvent("onShowModal")},confirm:function(){var t,n=arguments,i=n[0],s=n[1],o=n[2],l=n[3],r=n[4],c=[],h=e.merge({visible:!1},this.options);function u(n){return function(){t.preventEvent=!0,t.hide(),e.is(o,"function")&&o(n)}}e.is(n[0],"object")&&(i=n[0].message,s=n[0].title,o=n[0].callback,l=n[0].okButtonText,r=n[0].koButtonText),h.closable=!1!==this.options.closable,h.events={onHide:function(){!t.preventEvent&&e.is(o,"function")&&o()},onShow:function(){c[0].focus()}},t=this.modalFactory(h),e.is(i,"string")&&t.elements.body.addContent({tag:"p",text:i}),e.is(s,"string")?t.setHeader({tag:"h4",text:s}):(t.getHeader().hide(),o||(o=s)),!e.is(o,"function")&&this.options.callback&&(o=this.options.callback),c.push(new a({value:l||h.okButtonText,className:"primary"})),c[0].addEvent("onClick",u(!0)),c.push(new a({value:r||h.koButtonText})),c[1].addEvent("onClick",u(!1)),t.setFooter(c),t.dispatchEvent("onShowModal")},prompt:function(){var t,n,i=arguments,s=i[0],o=i[1],l=i[2],h=i[3],u=i[4],d=i[5],m=i[6],p=i[7],f=Math.max(0,i[8])||!1,g=[],v=e.merge({visible:!1},this.options);function b(n){return function(){n&&(n=t.getContent().getElement("input").value),t.preventEvent=!0,t.hide(),e.is(l,"function")&&l(n)}}v.closable=!1!==this.options.closable,e.is(i[0],"object")&&(s=i[0].message,o=i[0].title,l=i[0].callback,h=i[0].okButtonText,u=i[0].koButtonText,d=i[0].placeholder,m=i[0].required,p=i[0].value,f=Math.max(0,i[0].maxlength)||!1),v.events={onHide:function(){!t.preventEvent&&e.is(l,"function")&&l()},onShow:function(){n.getField("input-confirm").focus()}},t=this.modalFactory(v),n=new r({fields:[{type:"text",required:!0===m,value:p||"",placeholder:d||v.placeholder||c.response,name:"input-confirm",maxlength:f}],events:{onSubmit:b(!0)}}),e.is(s,"string")?t.elements.body.addContent({tag:"p",text:s},n):t.elements.body.addContent(s,n),e.is(o,"string")?t.setHeader({tag:"h4",text:o}):(t.getHeader().hide(),l||(l=o)),!e.is(l,"function")&&this.options.callback&&(l=this.options.callback),g.push(new a({value:h||v.okButtonText,className:"primary"})),g[0].addEvent("onClick",function(){n.submit()}),g.push(new a({value:u||v.koButtonText})),g[1].addEvent("onClick",b(!1)),t.setFooter(g),t.dispatchEvent("onShowModal")},dialog:function(t){var n,i,s=e.merge({visible:!1},this.options);s.closable=!1!==this.options.closable,s.events={onHide:function(){},onShow:function(){}},n=this.modalFactory(s),e.is(t.title,"string")?n.setHeader({tag:"h4",text:t.title}):n.getHeader().hide(),t.body&&n.elements.body.addContent(t.body),t.buttons&&t.buttons.length>0?(i=(i=t.buttons.map(function(t){return new a(e.extend(t,{events:{onClick:(i=t.action,function(){e.is(i,"function")&&i(n)})}}));var i})).sort(function(e,t){function n(e){return e.getContent().hasClassName("btn-primary")}return n(e)&&!n(t)?-1:!n(e)&&n(t)?1:0}),n.addEvent("onShow",function(){i[0].focus()}),n.setFooter(i)):s.closable?n.addEvent("onShow",function(){n.elements.close.focus()}):n.addEvent("onShow",function(){n.elements.content.setAttribute("tabindex","0"),n.elements.content.focus()}),n.dispatchEvent("onShowModal")},next:function(){this.modals.current&&this.modals.current.hide()},modalFactory:function(t){var n,i=this;return(n=new o(t)).addEvents({onShowModal:function(){i.modals.current?i.modals.queue.push(this):(i.modals.current=this,i.lastFocus=document.activeElement,this.show())},onShow:function(){i.dispatchEvent("onShow")},onHide:function(){var t,n=i.modals.queue;i.dispatchEvent("onHide"),this.destroy(),n&&n.length>0?(t=n.splice(0,1)[0]).elements&&(t.show(),i.modals.current=t):(i.modals.current=null,i.lastFocus&&e.is(i.lastFocus.focus,"function")&&i.lastFocus.focus())}}),n.inject(t.renderTo||document.body),n}};return s.extend(h)});