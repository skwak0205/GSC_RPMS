define("DS/ConnectionChecker/ConnectionChecker",["UWA/Class","UWA/Class/Options","DS/WAFData/WAFData"],function(t,n,i){"use strict";return t.extend(n,{resource:null,state:null,options:{timeout:25e3,interval:5e3,checkOnInit:!1},init:function(t,n){"string"==typeof t&&(this.resource=t,this.setOptions(n),this.options.checkOnInit&&this.check())},check:function(){function t(t,n){var i=this.state,e=this.options.onDown,s=this.options.onUp;this.state=t,"up"===i&&"down"===t?e&&e():"down"===i&&"up"===t&&s&&s(),n&&n.call(this,this.state)}return function(){var n=arguments[0],e=n&&n.callback;i.request(this.resource,{onTimeout:t.bind(this,"down",e),onFailure:t.bind(this,"down",e),onComplete:t.bind(this,"up",e)})}}(),retry:function(t){var n,i=0,e=this.options.attempts,s=t&&t.callback;this.intervalId&&clearInterval(this.intervalId),"up"!==this.state&&(n=function(t){i++,("up"===t||e&&e===i)&&(clearInterval(this.intervalId),s&&s())},this.intervalId=setInterval(this.check.bind(this,{callback:n}),this.options.interval))}})});