define("DS/MPFCompanyUboModel/CompanyCompanyUboDataProxy",["UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFModel/MPFCollection","DS/MPFError/NotImplementedError","DS/MPFUrl/UrlUtils"],function(t,e,n,i,r){"use strict";return e.extend({init:function(t,e){this._parent(t,"/mdpeoplecompany/companies/{0}/companypersons",e)},buildPath:function(e){return t.format(this.resourcePath,e.parentResourceId)},urlGet:function(t,e){return n.prototype.isPrototypeOf(t)?this._parent(t,e):this.getDelegate().urlGet(t,e)},urlPatch:e.delegate,urlPut:i.emit,urlDelete:i.emit})}),define("DS/MPFCompanyUboModel/CompanyUboDataProxy",["DS/MPFDataProxy/DataProxy"],function(t){"use strict";return t.extend({init:function(t,e){this._parent(t,"/mdpeoplecompany/companypersons",e)}})}),define("DS/MPFCompanyUboModel/CompanyUboModel",["UWA/Promise","UWA/String","DS/MPFModel/MPFModel","DS/MPFModel/ModelValidator","i18n!DS/MPFCompanyUboModel/assets/nls/CompanyUboModel"],function(t,e,n,i,r){"use strict";const o=Object.freeze({TITLE:"title",FIRST_NAME:"firstName",LAST_NAME:"lastName",NATIONALITY:"nationality",DATE_OF_BIRTH:"dateOfBirth",PLACE_OF_BIRTH:"placeOfBirth",COUNTRY_OF_BIRTH:"countryOfBirth",JOB_TITLE:"jobTitle",SHARE_PERCENTAGE:"sharePercentage",IS_DECISION_MAKER:"decisionMaker",IS_POLITICALLY_EXPOSED:"politicallyExposed",IDENTITY_DOCUMENT_IDENTIFICATION_NUMBER:"idNumber",POSTAL_ADDRESS_ID:"postalAddressId",UBO_NUMBER:"uboNumber",STATE:"currentState",EMAIL:"email",PHONE_NUMBER:"phoneNumber",IS_REPRESENTATIVE:"Representative",IS_EXECUTIVE:"Executive",IS_OWNER:"Owner",IS_DIRECTOR:"Director",SSN:"ssnLast4",SNI:"ssnLast4"}),s=Object.freeze({DRAFT:"DRAFT",COMPLETE:"COMPLETE",PENDING:"PENDING",VALIDATED:"VALIDATED",REJECTED:"REJECTED"}),a={[o.IS_DECISION_MAKER]:"FALSE",[o.IS_POLITICALLY_EXPOSED]:"FALSE"},u=[o.TITLE,o.FIRST_NAME,o.LAST_NAME,o.NATIONALITY,o.DATE_OF_BIRTH,o.PLACE_OF_BIRTH,o.COUNTRY_OF_BIRTH,o.SHARE_PERCENTAGE,o.IDENTITY_DOCUMENT_IDENTIFICATION_NUMBER,o.POSTAL_ADDRESS_ID],E=n.extend({defaults:a,setup:function(t,e){this._parent(t,e),this._type="CompanyUboModel",this.validator=this._createModelValidator()},validate:function(t){return this.validator.validate(t)},saveOrUpdate:function(){let e;return e=this.isNew()?this.savePromise():this.hasPendingChanges()?this.savePromise(this.getPendingChanges(),{patch:!0}):t.resolve(this.companyUbo)},isComplete:function(){return this.getState()===s.COMPLETE},isPending:function(){return this.getState()===s.PENDING},isValidated:function(){return this.getState()===s.VALIDATED},getTitle:function(){return this.get(o.TITLE)},setTitle:function(t){return this.set(o.TITLE,t)},getFirstName:function(){return this.get(o.FIRST_NAME)},setFirstName:function(t){return this.set(o.FIRST_NAME,t)},getLastName:function(){return this.get(o.LAST_NAME)},setLastName:function(t){return this.set(o.LAST_NAME,t)},getNationality:function(){return this.get(o.NATIONALITY)},setNationality:function(t){return this.set(o.NATIONALITY,t)},getSharePercentage:function(){return this.get(o.SHARE_PERCENTAGE)},setSharePercentage:function(t){return this.set(o.SHARE_PERCENTAGE,t)},getPostalAddressId:function(){return this.get(o.POSTAL_ADDRESS_ID)},getUboNumber:function(){return this.get(o.UBO_NUMBER)},setUboNumber:function(t){return this.set(o.UBO_NUMBER,t)},getState:function(){return this.get(o.STATE)},getDateOfBirth:function(){return this.get(o.DATE_OF_BIRTH)},setDateOfBirth:function(t){return this.set(o.DATE_OF_BIRTH,t)},getPlaceOfBirth:function(){return this.get(o.PLACE_OF_BIRTH)},setPlaceOfBirth:function(t){return this.set(o.PLACE_OF_BIRTH,t)},getCountryOfBirth:function(){return this.get(o.COUNTRY_OF_BIRTH)},setCountryOfBirth:function(t){return this.set(o.COUNTRY_OF_BIRTH,t)},getJobTitle:function(){return this.get(o.JOB_TITLE)},isRepresentative:function(){return"TRUE"===this.get(o.IS_REPRESENTATIVE)},isDirector:function(){return"TRUE"===this.get(o.IS_DIRECTOR)},isOwner:function(){return"TRUE"===this.get(o.IS_OWNER)},isExecutive:function(){return"TRUE"===this.get(o.IS_EXECUTIVE)},getEmail:function(){return this.get(o.EMAIL)},setEmail:function(t){return this.set(o.EMAIL,t)},getPhoneNumber:function(){return this.get(o.PHONE_NUMBER)},setPhoneNumber:function(t){return this.set(o.PHONE_NUMBER,t)},getMissingFields:function(){const t=[];for(let e=0;e<u.length;e++)this.has(u[e])&&""!==this.get(u[e])||t.push(u[e]);return!this.isDirector()||this.getJobTitle()&&""!==this.getJobTitle()||t.push(o.JOB_TITLE),t},_createModelValidator:function(){return new i({model:this,validations:[{attribute:o.IDENTITY_DOCUMENT_IDENTIFICATION_NUMBER,required:!1,pattern:/^[0-9A-Z]{13,14}$/,invalidError:e.format(r.get("isInvalid"),r.get("idNumber")),conditions:[[o.NATIONALITY,"FRA"]]},{attribute:o.EMAIL,required:!1,pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},{attribute:o.PHONE_NUMBER,required:!1,pattern:/^\+?[\d-.\s]+$/},{attribute:o.SSN,required:!1,pattern:/^(\d{4}|\d{9})$/}]})}});return E.Fields=Object.freeze(o),E.States=Object.freeze(s),E.RequiredFields=Object.freeze(u),E}),define("DS/MPFCompanyUboModel/CompanyUboCollection",["DS/MPFModel/MPFCollection","DS/MPFCompanyUboModel/CompanyUboModel"],function(t,e){"use strict";return t.extend({model:e,isComplete:function(){return!this.isEmpty()&&this.every(function(t){return t.isComplete()||t.isPending()||t.isValidated()})},isValidated:function(){return!this.isEmpty()&&this.every(function(t){return t.isValidated()})},hasRepresentative:function(){return this.some(function(t){return t.isRepresentative()})},hasRequiredRoles:function(t){var e={ok:!1,hasExecutive:!1,hasRepresentative:!1,hasOwner:!1};return this.forEach(function(t){e.hasRepresentative=e.hasRepresentative||t.isRepresentative(),e.hasExecutive=e.hasExecutive||t.isExecutive(),e.hasOwner=e.hasOwner||t.isOwner()}),t.isStripeEU()?e.ok=e.hasRepresentative&&(e.hasExecutive||e.hasOwner):t.isStripeUS()?e.ok=e.hasRepresentative:e.ok=!0,e}})}),define("DS/MPFCompanyUboModel/CompanyUboFactory",["DS/MPFModelFactory/Factory","DS/MPFCompanyUboModel/CompanyUboModel","DS/MPFCompanyUboModel/CompanyUboCollection","DS/MPFCompanyUboModel/CompanyCompanyUboDataProxy","DS/MPFCompanyUboModel/CompanyUboDataProxy"],function(t,e,n,i,r){"use strict";var o={COMPANY_UBO:"companyUbo",COMPANY_COMPANY_UBO:"companyCompanyUbo"},s=t.extend({createModel:function(t,n,i){return this._parent(e,t,n,i)},createCollection:function(t,e,i){return this._parent(n,t,e,i)},getDataProxy:function(t){var e;return t===o.COMPANY_COMPANY_UBO?(this.dataProxies.companyCompanyUbo||(this.dataProxies.companyCompanyUbo=new i(this.connector,this.getDataProxy(o.COMPANY_UBO))),e=this.dataProxies.companyCompanyUbo):(this.dataProxies.company||(this.dataProxies.company=new r(this.connector)),e=this.dataProxies.company),e}});return s.Types=Object.freeze(o),s});