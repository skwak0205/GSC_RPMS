define("DS/CATWebUXInWin/CATDMUGenerateChangeActionInWin",[],function(){"use strict";var e=!1;return{createPanel:function(n){e||require(["DS/UWPClientCode/PublicAPI","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e,t){window.widget.setValue("securityContext","ctx::"+n.securityCtxID),window.COMPASS_CONFIG||(window.COMPASS_CONFIG={}),window.COMPASS_CONFIG.userId||(window.COMPASS_CONFIG.userId=n.login),window.COMPASS_CONFIG.lang||(window.COMPASS_CONFIG.lang=window.widget.lang),e._setUser(n.user),window.widget.id="CATDMUGenerateChangeActionInWin",new Promise(function(e,n){window.dscef.getMyAppsURL().then(function(t){window.COMPASS_CONFIG||(window.COMPASS_CONFIG={}),t?(window.COMPASS_CONFIG.myAppsBaseUrl=t,e({myAppsBaseUrl:t,userId:window.COMPASS_CONFIG.userId,lang:window.COMPASS_CONFIG.lang})):n(new Error("Issue while retrieveing the my apps url"))})}).then(function(e){return new Promise(function(i,o){t.getPlatformServices({config:e,onComplete:function(e){window.widget.setValue("x3dPlatformId",n.platformId?n.platformId:e[0].platformId),i(e)},onFailure:o})})}).then(function(e){require(["DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChangeActionUX/scripts/CreateCAForm"],function(t,i){t.init(),t.clearObjects(),t.addTitle(n.data.title),t.addDescription(n.data.description),t.addContext(n.data.contexts),t.addReferential(n.data.attachments),t.addProposed(n.data.reportedAgainst),t.addSeverity&&t.addSeverity(n.data.priority),t.setTenant&&t.setTenant(n.platformId?n.platformId:e[0].platformId),t.setSecurityContext&&t.setSecurityContext(n.securityCtxID),n.data.assignees&&t.addAssignee(n.data.assignees);var o=t.getJSON();i.createCAFromActionBar(o,function(e){window.dscef.sendString(JSON.stringify({action:"displayNotif",notifMsg:e.changeaction?"CASuccess":"CAFail"}))},function(){window.dscef.sendString(JSON.stringify({action:"closePanel"}))}).then(function(){i.CACreateModal.options.escapeToClose=!1,document.querySelector(".close.fonticon.fonticon-cancel")&&document.querySelector(".close.fonticon.fonticon-cancel").setStyle("display","none")})})})})}}});