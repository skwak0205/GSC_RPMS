define("DS/CustomizableLayout/Controls/Tab",["UWA/Class"],function(t){"use strict";return t.extend({init:function(t,e){this._parent({}),this.contentContainer=e,this.tabBar=UWA.createElement("div",{class:"customizable-layout-tab-bar"}),this.tabBar.inject(t),this.lastActive=null,this.buttons=[]},getVisibleButtons:function(){for(var t=[],e=0;e<this.buttons.length;e++){var i=this.buttons[e];i.isHidden()||t.push(i)}return t},add:function(t,e,i){var n=UWA.createElement("div",{class:"customizable-layout-tab",id:"customizable-layout-tab-"+t.getText()}),s=UWA.createElement("div",{class:"customizable-layout-tab-content-container"});return i&&n.hide(),n.inject(this.tabBar),t.inject(n),this.buttons.push(n),s.inject(this.contentContainer),e.inject(s),n.contentContainer=s,n.addEvent("click",function(){this.select(n)}.bind(this)),n},onSelectTab:function(t){this.onSelectTabCallback=t},select:function(t){this.setActiveAttribute(this.lastActive,!1),this.setActiveAttribute(t,!0),this.lastActive=t,this.onSelectTabCallback(t)},setActiveAttribute:function(t,e){null!=t&&(t.setAttribute("active",e),t.contentContainer.setAttribute("active",e))},onResize:function(){}})}),define("DS/CustomizableLayout/Dock/DropTarget",["UWA/Class"],function(t){"use strict";return t.extend({init:function(t,e,i,n,s){this._parent({}),this.docking=t,this.type=e,this.side=i,this.panel=n,this.model=s||n.model},getLine:function(t,e,i,n){return{k:(n-e)/(i-t),b:e-(n-e)/(i-t)*t,getY:function(t){return this.k*t+this.b}}},hitTest:function(t,e){var i=this.panel.getContent().getBoundingClientRect();if("tab"==this.type){var n=this.panel.tab.getVisibleButtons();if(n.length){var s=n.length,o=this.side;if(o<s){var l;i=n[o].getBoundingClientRect();return 0==o?i.left<=t&&t<i.left+i.width/2&&i.top<=e&&e<i.bottom:(l=n[o-1].getBoundingClientRect()).left+l.width/2<=t&&t<i.left+i.width/2&&i.top<=e&&e<i.bottom}return(l=n[o-1].getBoundingClientRect()).left+l.width/2<=t&&t<l.right+l.width/2&&l.top<=e&&e<l.bottom}}if("side"==this.type){if("left"==this.side)return t<i.left+25;if("right"==this.side)return t>i.right-25;if("top"==this.side)return e<i.top+25;if("bottom"==this.side)return e>i.bottom-25}if("main"==this.type){var r=this.getLine(i.left,i.top,i.right,i.bottom),a=this.getLine(i.left,i.bottom,i.right,i.top),h=r.getY(t),d=a.getY(t);if("left"==this.side)return t<=i.left+i.width/2&&h<e&&e<=d;if("right"==this.side)return i.left+i.width/2<t&&d<e&&e<=h;if("top"==this.side)return e<=h&&e<=d;if("bottom"==this.side)return e>h&&e>d}return!1},showPreview:function(){this.docking.preview.classList.remove("customizable-layout-drop-target-preview-with-tab"),this.docking.previewTab.hide(),this.docking.dockTarget=this;var t,e,i,n,s=this.panel.getContent().getBoundingClientRect(),o=this.docking.getContent().getBoundingClientRect();if("tab"==this.type){var l=0,r=this.panel.tab.getVisibleButtons(),a=this.panel.tab.tabBar.getBoundingClientRect(),h=a.height,d=r.length,c=this.side;if(c<d)if(0==c)l=s.left;else l=r[c].getBoundingClientRect().left-25;else l=r[c-1].getBoundingClientRect().right;this.docking.previewTab.setStyles({left:l-o.left+"px",top:a.top-o.top+"px",width:"50px",height:h+"px"}),this.docking.previewTab.show(),this.docking.preview.classList.add("customizable-layout-drop-target-preview-with-tab"),t=s.left,i=s.width,n=s.height-h,e=s.top+h}"side"==this.type&&(s=this.model.source.uiElement.getContent().getBoundingClientRect(),"top"==this.side||"bottom"==this.side?(t=s.left,e="top"==this.side?s.top:s.bottom-25,i=s.width,n=25):"left"!=this.side&&"right"!=this.side||(t="left"==this.side?s.left:s.right-25,e=s.top,i=25,n=s.height));"main"==this.type&&("top"==this.side||"bottom"==this.side?(t=s.left,e="top"==this.side?s.top:s.top+s.height/2,i=s.width,n=s.height/2):"left"!=this.side&&"right"!=this.side||(t="left"==this.side?s.left:s.left+s.width/2,e=s.top,i=s.width/2,n=s.height)),this.docking.preview.setStyles({left:t-o.left+"px",top:e-o.top+"px",width:i+"px",height:n+"px"}),this.docking.preview.show()},onDropTabTarget:function(){var t=this.panel.model.cloned,e=this.docking.dockSourceViews,i=this.side;Array.prototype.splice.apply(t.views,[i,0].concat(e))},onDropSideTarget:function(){var t=this.model,e=t.parent;null==e&&(e=this.docking.layout.cloned),"top"==this.side||"bottom"==this.side?e.addRow(this.docking.dockSourceViews,t,"top"==this.side):"left"!=this.side&&"right"!=this.side||e.addCol(this.docking.dockSourceViews,t,"left"==this.side)},onDropMainTarget:function(){var t=this.panel.model.cloned.parent,e=t.parent;null==e&&(e=this.docking.layout.cloned),"top"==this.side||"bottom"==this.side?("col"==t.type&&(e=t),e.addRow(this.docking.dockSourceViews,t,"top"==this.side)):("row"==t.type&&(e=t),e.addCol(this.docking.dockSourceViews,t,"left"==this.side))},onDrop:function(){"tab"==this.type?this.onDropTabTarget():"side"==this.type?this.onDropSideTarget():"main"==this.type&&this.onDropMainTarget()}})}),define("DS/CustomizableLayout/View",["UWA/Controls/Abstract"],function(t){return t.extend({init:function(t){this.options=t,this._parent(t)},onResize:function(){},onActivate:function(){},getLabel:function(){return""},getName:function(){return""},getToolbarItems:function(t){return[]},getHeaderbarItems:function(t){return[]},_onResize:function(){null!=this._toolbar&&this._toolbar.onResize(),null!=this._headerbar&&this._headerbar.onResize(),this.onResize()},_getToolbarItems:function(t){return this._toolbar=t,this.getToolbarItems(t)},_getHeaderbarItems:function(t){return this._headerbar=t,this.getHeaderbarItems(t)}})}),define("DS/CustomizableLayout/Cell/CellModel",["UWA/Class"],function(t){"use strict";return t.extend({init:function(t,e){this.type=t,this.state="normal",this.flexGrow="1",this.parent=e,this.children=[],this.views=[]},toCacheJson:function(){var t={type:this.type,children:[],state:this.state,flexGrow:this.flexGrow};if(null!=this.activeViewName&&(t.activeViewName=this.activeViewName),"row"==this.type||"col"==this.type)for(var e=this.children.length,i=0;i<e;i++){var n=this.children[i].toCacheJson(t);t.children.push(n)}else t.views=this.getViewNames(),Array.isArray(this.closedViews)&&this.closedViews.length&&(t.closedViews=this.closedViews);return t},getViewNames:function(){var t=[];if("content"==this.type)for(var e=this.views.length,i=0;i<e;i++)t.push(this.views[i].getName());return t},getAllViews:function(){var t=[];Array.prototype.push.apply(t,this.views);for(var e=0;e<this.children.length;e++){var i=this.children[e].getAllViews();Array.prototype.push.apply(t,i)}return t},clone:function(t){this.cloned=new this.constructor(this.type,t),this.cloned.source=this,this.cloned.state=this.state,this.cloned.flexGrow=this.flexGrow,this.cloned.views=this.views.slice(),Array.isArray(this.closedViews)&&(this.cloned.closedViews=this.closedViews.slice());for(var e=0;e<this.children.length;e++)this.cloned.children.push(this.children[e].clone(this.cloned));return this.cloned},addRow:function(t,e,i){var n=null;return"col"==this.type&&(n=this.addChild("row",e,i),null!=t&&n.addContent(t)),n},addCol:function(t,e,i){var n=null;return"row"==this.type&&(n=this.addChild("col",e,i),null!=t&&n.addContent(t)),n},addContent:function(t){this.addChild("content").views.push(...Array.isArray(t)?t:[t])},addChild:function(t,e,i){if(1==this.children.length){var n=this.children[0];"content"==n.type&&(this.children=[],(e=this.addChildNoCheck(t)).addContent(n.views))}return this.addChildNoCheck(t,e,i)},addChildNoCheck:function(t,e,i){var n=new this.constructor(t,this),s=this.children.indexOf(e);return-1==s?this.children.push(n):(i||s++,this.children.splice(s,0,n)),n},removeFromParent:function(){if("content"==this.type)this.parent.removeFromParent();else if(null!=this.parent){var t=this.parent.children.indexOf(this);if(t>-1){this.parent.children.splice(t,1);var e=this.parent.children;if(0==e.length)this.parent.removeFromParent();else if(1==e.length){var i=e[0];if(1==i.children.length){var n=i.children[0];n.parent=this.parent,this.parent.children=[n]}else if(i.children.length>1){var s=i.children,o=this.parent;if(null==this.parent.parent)this.parent.type="col"==this.parent.type?"row":"col",this.parent.children=s;else{var l=(o=this.parent.parent).children.indexOf(this.parent);o.children.splice(l,1,...s)}for(l=0;l<s.length;l++)s[l].parent=o}}}}},isFirstChild:function(){return null!=this.parent&&0==this.parent.children.indexOf(this)},isLastChild:function(){return null!=this.parent&&this.parent.children.indexOf(this)==this.parent.children.length-1},getAdjExtEdgeAncestor:function(t){return"content"==this.type?this.parent.getAdjExtEdgeAncestor(t):"top"==t?"col"==this.type?this.parent:this.isFirstChild()?this.parent.parent:null:"bottom"==t?"col"==this.type?this.parent:this.isLastChild()?this.parent.parent:null:"left"==t?"row"==this.type?this.parent:this.isFirstChild()?this.parent.parent:null:"row"==this.type?this.parent:this.isLastChild()?this.parent.parent:null}})}),define("DS/CustomizableLayout/Controls/Splitter",["UWA/Controls/Abstract","DS/Core/PointerEvents"],function(t,e){"use strict";return t.extend({init:function(t){this._parent({}),this.parent=t.parent,this.cell1=t.cell1,this.cell2=t.cell2,this.buildUI()},buildUI:function(){this.elements.container=UWA.createElement("div",{class:"customizable-layout-splitter"}),this.elements.container.addEvent(e.POINTERDOWN,this.onMouseDown.bind(this))},onMouseDown:function(t){if(t.stopPropagation(),t.preventDefault(),t.currentTarget==event.target){this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onMouseUpHandler=this.onMouseUp.bind(this),window.addEventListener(e.POINTERMOVE,this.onMouseMoveHandler),window.addEventListener(e.POINTERUP,this.onMouseUpHandler),this.cell1.getContent().removeAttribute("apply-open-close-transition"),this.cell2.getContent().removeAttribute("apply-open-close-transition"),this.x0=t.pageX,this.y0=t.pageY;var i=this.cell1.elements.container,n=this.cell2.elements.container;this.w1=i.offsetWidth,this.w2=n.offsetWidth,"col"==this.parent.model.type&&(this.w1=i.offsetHeight,this.w2=n.offsetHeight),this.flexGrowTotoal=parseFloat(i.getStyle("flex-grow"))+parseFloat(n.getStyle("flex-grow")),this.dragging=!0}},onMouseMove:function(t){if(t.preventDefault(),this.dragging){var e=this.cell1.elements.container,i=this.cell2.elements.container,n=t.pageY-this.y0;if("col"==this.parent.model.type){if(t.pageY<e.offsetTop||t.pageY>i.offsetTop+i.offsetHeight)return}else{if(t.pageX<e.offsetLeft||t.pageX>i.offsetLeft+i.offsetWidth)return;n=t.pageX-this.x0}this.cell1.model.flexGrow=this.flexGrowTotoal*(this.w1+n)/(this.w1+this.w2),this.cell2.model.flexGrow=this.flexGrowTotoal-this.cell1.model.flexGrow,e.setStyle("flex-grow",this.cell1.model.flexGrow),i.setStyle("flex-grow",this.cell2.model.flexGrow)}},onMouseUp:function(){this.dragging=!1,window.removeEventListener(e.POINTERMOVE,this.onMouseMoveHandler),window.removeEventListener(e.POINTERUP,this.onMouseUpHandler);var t=this.cell1.layout,i=[],n=this.cell1.model.getAllViews(),s=this.cell2.model.getAllViews();Array.prototype.push.apply(i,n),Array.prototype.push.apply(i,s),t.onSplitterChangeDone(i),this.cell1.getContent().setAttribute("apply-open-close-transition","yes"),this.cell2.getContent().setAttribute("apply-open-close-transition","yes")}})}),define("DS/CustomizableLayout/Controls/Toolbar",["UWA/Controls/Abstract"],function(t){"use strict";return t.extend({init:function(t){this._parent({}),this.container=t,this.elements.container=UWA.createElement("div",{class:"customizable-layout-toolbar"}),this.inject(t),this.temp=UWA.createElement("div",{class:"customizable-layout-toolbar",styles:{position:"absolute",top:"-200%"}})},createClickButton:function(t,e,i){var n=UWA.createElement("div",{class:"customizable-layout-toolbar-click-button"}),s=UWA.createElement("span",{class:" fonticon fonticon-"+e}),o=UWA.createElement("span",{class:"customizable-layout-toolbar-click-button-label",html:t});return s.inject(n),o.inject(n),n.title=t,n.addEventListener("click",i),n},update:function(t){this.groups=t,this.container.hide(),Array.isArray(t)&&t.length>0&&(this.container.show(),this.rebuild(),setTimeout(function(){this.rebuild()}.bind(this),0))},rebuild:function(){if(null!=this.groups){var t=this.getContent().clientWidth;if(0!=t){this.temp.inject(document.body),this.temp.innerHTML="",this.elements.container.innerHTML="";for(var e=[],i=this.groups.length,n=0;n<i;n++){var s=this.groups[n],o=this.createToolbarButtonGroup(s);e.push(o)}this.addGroupsTo(e,this.temp);var l=e.slice();l.sort(function(t,e){return e.priority-t.priority});for(var r=this.calcWidth(l);r>t;){if(this.collapse(l))break;r=this.calcWidth(l)}this.addGroupsTo(e,this.elements.container),document.body.removeChild(this.temp)}}},createToolbarButtonGroup:function(t){for(var e={float:t.float,priority:t.priority,buttons:[],display:"all",dropdown:UWA.createElement("div",{class:"customizable-layout-toolbar-dropdown"}),addTo:function(t,e){var i=this.buttons.slice();"right"==this.float&&i.reverse();for(var n=0;n<this.buttons.length;n++){var s=i[n];s.style[this.float]=e+"px",t.appendChild(s),e+=s.offsetWidth}return this.dropdown.inject(t),e},calcWidth:function(){for(var t=0,e=0;e<this.buttons.length;e++)t+=this.buttons[e].offsetWidth;return t},onClickShowDropdownButton:function(t){t.stopPropagation(),this.showDropdown(t.x),window.customizableLayoutToolbarActiveDropdownGroup!=this&&(null!=window.customizableLayoutToolbarActiveDropdownGroup&&window.customizableLayoutToolbarActiveDropdownGroup.hideDropdown(),window.customizableLayoutToolbarActiveDropdownGroup=this);var e=function(t){this.hideDropdown(),window.removeEventListener("click",e)}.bind(this);window.addEventListener("click",e)},hideDropdown:function(){this.dropdown.hidden=!0;for(var t=0;t<this.dropdown.children.length;t++)this.dropdown.children[t].hidden=!0},showDropdown:function(t){if(this.dropdown.hidden){this.dropdown.innerHTML="",this.dropdown.hidden=!1;for(var e=0;e<this.buttons.length;e++){var i=this.buttons[e];i.hidden&&(i.hidden=!1,this.dropdown.appendChild(i))}var n=this.dropdown.parentElement.getBoundingClientRect().x,s=this.dropdown.parentElement.clientWidth,o=(t-=n)+this.dropdown.offsetWidth-s;o=o>0?o:0,this.dropdown.style.left=t-o+"px"}}},i=0;i<t.items.length;i++){var n=t.items[i],s=this.createToolbarButton(n);e.buttons.push(s)}var o=this.createClickButton("","menu-dot",e.onClickShowDropdownButton.bind(e)),l=this.createToolbarButton(o);return l.hidden=!0,e.buttons.push(l),e.dropdown.hidden=!0,e},createToolbarButton:function(t){var e=null;return"|"===t&&(t=this.createSeperator()),(e=UWA.createElement("div",{class:"customizable-layout-toolbar-item"})).appendChild(t),e},calcWidth:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].calcWidth();return e},collapse:function(t){for(var e=0;e<t.length;e++){if("some"==(o=t[e]).display){for(var i=o.buttons.length-2;i>=0;i--){var n=o.buttons[i];if(0==n.hidden){n.hidden=!0,0==i&&(o.display="none");break}}break}if("all"==o.display){o.buttons[o.buttons.length-1].hidden=!1,o.display="some",o.buttons[o.buttons.length-2].hidden=!0,2==o.buttons.length&&(o.display="none");break}}var s=!0;for(e=0;e<t.length;e++){var o;if("none"!=(o=t[e]).display){s=!1;break}}return s},addGroupsTo:function(t,e){for(var i=0,n=0,s=0;s<t.length;s++){var o=t[s];"right"==o.float?n=o.addTo(e,n):i=o.addTo(e,i)}},createSeperator:function(){return UWA.createElement("div",{class:"customizable-layout-toolbar-sep"})},onResize:function(){this.rebuild()}})}),define("DS/CustomizableLayout/Layout",["UWA/Controls/Abstract","DS/CustomizableLayout/Cell/CellModel","DS/CustomizableLayout/Cell/Cell","DS/CustomizableLayout/Dock/Docking","css!DS/CustomizableLayout/CustomizableLayout.css"],function(t,e,i,n){return t.extend({init:function(t){this._parent({}),this.container=t.container,this.rootCell=null,this.maximizedPanel=null,this.minimizedPanels=[],this.rootCellModel=null,this.elements.container=UWA.createElement("div",{class:"customizable-layout"}),this.docking=new n(this,t.tabOnlyDocking),this.resultFrame=t.resultFrame,window.addEventListener("resize",function(){this.publishOnResizeEvent()}.bind(this))},onStartDocking:function(t){this.docking.activate(t)},addRow:function(t){return null==this.rootCellModel&&(this.rootCellModel=new e("col",null)),this.rootCellModel.addRow(t)},addCol:function(t){return null==this.rootCellModel&&(this.rootCellModel=new e("row",null)),this.rootCellModel.addCol(t)},onClickShowHideViewCmd:function(t){this[this.isViewOpen(t)?"closeView":"openView"](t)},applyDefaultLayout:function(){this.clearCache(function(){this.rootCellModel=this.rootForReset.clone(null),this.buildUIFromModel()}.bind(this))},getOpenPanels:function(){for(var t=[],e=this.getViews(),i=0;i<e.length;i++){var n=e[i];this.isPanelOpen(n)&&-1==t.indexOf(n.parentLayoutPanel)&&t.push(n.parentLayoutPanel)}return t},closeView:function(t){t.parentLayoutPanel.closeView(t)},openView:function(t){t.parentLayoutPanel.openView(t)},isPanelOpen:function(t){return t.parentLayoutPanel.isOpen()},isViewOpen:function(t){return t.parentLayoutPanel.isViewOpen(t)},getViews:function(){return null==this.rootCellModel?[]:this.rootCellModel.getAllViews()},cloneModel:function(){this.cloned={rootCellModel:this.rootCellModel.clone(null),addRow:function(t,i,n){var s=this.rootCellModel;this.rootCellModel=new e("col",null),s.parent=this.rootCellModel,this.rootCellModel.children.push(s),this.rootCellModel.addRow(t,i,n)},addCol:function(t,i,n){var s=this.rootCellModel;this.rootCellModel=new e("row",null),s.parent=this.rootCellModel,this.rootCellModel.children.push(s),this.rootCellModel.addCol(t,i,n)}}},buildUI:function(t){this.built=!1,t||(this.rootForReset=this.rootCellModel.clone(null)),this.loadCache(function(e){if(null!=e){var i=this.getViews();this.loadModelFromJson(i,e)}this.buildUIFromModel(t)}.bind(this))},buildUIFromModel:function(t){this.elements.container.innerHTML="",this.docking.inject(this.elements.container),this.inject(this.container),null!=t&&null!=this.cloned&&(this.rootCellModel=this.cloned.rootCellModel,this.cloned=null);var e=null;null!=this.rootCell&&(e=this.rootCell),this.rootCell=new i(this.elements.container,this,this.rootCellModel,null);var n=this.getViews().find(t=>"maximized"===t.parentLayoutPanel.model.state);n&&n.parentLayoutPanel.onMaximize(),null!=e&&e.destroy(),setTimeout(function(){this.built=!0,this.updateShowHideViewCmds(),this.saveCache()}.bind(this),0)},loadModelFromJson:function(t,i){this.rootCellModel=new e(i.type,null),this.rootCellModel.state=i.state,this.rootCellModel.flexGrow=i.flexGrow,null!=i.activeViewName&&(this.rootCellModel.activeViewName=i.activeViewName),Array.isArray(i.closedViews)&&(this.rootCellModel.closedViews=i.closedViews),this.loadCellChildrenFromJson(t,i,this.rootCellModel)},getViewsFromJson:function(t,e){var i,n=[],s=e.children[0];if("content"==s.type)for(var o=t.length,l=0;l<o;l++){var r=t[l],a=r.getName();(i=s.views.indexOf(a))>=0&&(n[i]=r)}return n},loadCellChildrenFromJson:function(t,e,i){for(var n=e.children.length,s=0;s<n;s++){var o=e.children[s],l=o.type;if("col"==l||"row"==l){var r=null,a=this.getViewsFromJson(t,o);r=i["col"===o.type?"addCol":"addRow"](a.length>0?a:void 0),a.length>0&&(r.children[0].state=o.children[0].state,null!=o.children[0].activeViewName&&(r.children[0].activeViewName=o.children[0].activeViewName),Array.isArray(o.children[0].closedViews)&&(r.children[0].closedViews=o.children[0].closedViews)),null!=r&&(r.state=o.state,r.flexGrow=o.flexGrow,null!=o.activeViewName&&(r.activeViewName=o.activeViewName),Array.isArray(o.closedViews)&&(r.closedViews=o.closedViews),this.loadCellChildrenFromJson(t,o,r))}}},loadCache:function(t){try{let e=this.layout;if(null==e||""==e)t(null);else t(JSON.parse(e))}catch(e){console.log(e.message),this.clearCache(t)}},saveCache:function(){if(this.built){var t=this.rootCellModel.toCacheJson();this.layout=JSON.stringify(t)}},clearCache:function(t){this.layout="","function"==typeof t&&t()},onViewsMinimized:function(t){this.onViewsMinimizedCallback=t},onViewsRestored:function(t){this.onViewsRestoredCallback=t},onPanelRestoredFromMinimized:function(t){var e=this.minimizedPanels.indexOf(t);e>-1&&this.minimizedPanels.splice(e,1),null!=this.lastSingleVisiblePanel&&(this.lastSingleVisiblePanel.showWinMinCmd(),this.lastSingleVisiblePanel.showWinMaxCmd());var i=t.model.views;null!=this.onViewsRestoredCallback&&this.onViewsRestoredCallback(i),this.publishOnResizeEvent(),this.saveCache()},updateShowHideViewCmds:function(){var t=this.getViews();1==t.length&&t[0].parentLayoutPanel.hideWinCmds()},onPanelClosed:function(t){this.minimizedPanels.push(t),this.maximizedPanel=null;var e=this.getOpenPanels();1==e.length&&(this.lastSingleVisiblePanel=e[0],this.lastSingleVisiblePanel.hideWinCmds());var i=t.model.views;null!=this.onViewsMinimizedCallback&&this.onViewsMinimizedCallback(i),this.publishOnResizeEvent(),this.saveCache()},onPanelMaximized:function(t,e){this.maximizedPanel=t,this.lastSingleVisiblePanel=t,this.rootCell.getContent().setAttribute("state","hide-when-panel-maximized"),this.publishOnResizeEvent(),e&&this.saveCache(),this.resultFrame&&this.resultFrame.onPanelMaximized()},restoreViewFromMaximize:function(t){this.maximizedPanel=null,this.rootCell.getContent().removeAttribute("state"),this.lastSingleVisiblePanel.showWinMinCmd(),this.publishOnResizeEvent(),this.saveCache(),this.resultFrame&&this.resultFrame.onPanelRestoredFromMaximized()},onSplitterChangeDone:function(t){this.publishOnResizeEvent(t),this.saveCache()},onActiveTabChange:function(){this.saveCache()},publishOnResizeEvent:function(t){t=t||this.getViews();for(var e=0;e<t.length;e++)t[e]._onResize()}})}),define("DS/CustomizableLayout/Dock/DockPanel",["UWA/Class","DS/CustomizableLayout/Dock/DropTarget"],function(t,e){"use strict";return t.extend({init:function(t,e,i){this._parent({}),this.docking=t,this.previewDropTargetIndex=0,this.hitDropTargets=[],this.panel=e,this.tabOnlyDocking=i,!0===i?(this.p1DropTargets=this.buildTabDropTargets(e),this.p2DropTargets=[]):(this.p1DropTargets=this.buildP1DropTargets(e),this.p2DropTargets=this.buildP2DropTargets(e))},buildP1DropTargets:function(t){var e=this.buildTabDropTargets(t),i=this.buildSideDropTargets("left",t),n=this.buildSideDropTargets("right",t),s=this.buildSideDropTargets("top",t),o=this.buildSideDropTargets("bottom",t);return e.concat(i,n,s,o)},buildP2DropTargets:function(t){return[new e(this.docking,"main","top",t),new e(this.docking,"main","left",t),new e(this.docking,"main","bottom",t),new e(this.docking,"main","right",t)]},buildSideDropTargets:function(t,i){for(var n=[],s=this.getSideTargetModels(i,t),o=s.length,l=0;l<o;l++){var r=new e(this.docking,"side",t,i,s[l]);n.push(r)}return n},buildTabDropTargets:function(t){for(var i=[],n=t.tab.getVisibleButtons().length,s=0;s<=n;s++){var o=new e(this.docking,"tab",s,t);i.push(o)}return i},getSideTargetModels:function(t,e){for(var i=[],n=t.model.cloned.getAdjExtEdgeAncestor(e);null!=n;)i.push(n),n=n.getAdjExtEdgeAncestor(e);return i},hitTest:function(t,e){var i=this.panel.getContent().getBoundingClientRect();return i.left<t&&t<i.right&&i.top<e&&e<i.bottom},isArrayChanged:function(t,e){var i=t.length;if(i!=e.length)return!0;for(var n=0;n<i;n++){var s=t[n];if(-1==e.indexOf(s))return!0}return!1},onDragOver:function(t,e){if(!this.hitTest(t,e))return!1;var i=this.getHitDropTargets(this.p1DropTargets,t,e);0==i.length&&(i=this.getHitDropTargets(this.p2DropTargets,t,e));var n=this.isArrayChanged(i,this.hitDropTargets);this.hitDropTargets=i,this.showPreview(this.hitDropTargets,n)},showPreview:function(t,e){var i=t.length;0!=i&&(e?(this.lastDragTime=Date.now(),t[0].showPreview(),this.previewDropTargetIndex=1):(this.lastDragTime=this.lastDragTime||Date.now(),Date.now()-this.lastDragTime>=3500&&(this.lastDragTime=Date.now(),this.previewDropTargetIndex>=i&&(this.previewDropTargetIndex=0),t[this.previewDropTargetIndex].showPreview(),this.previewDropTargetIndex++)))},getHitDropTargets:function(t,e,i){for(var n=[],s=t.length,o=0;o<s;o++){var l=t[o];l.hitTest(e,i)&&n.push(l)}return n}})}),define("DS/CustomizableLayout/Cell/Panel",["UWA/Controls/Abstract","DS/CustomizableLayout/Controls/Toolbar","DS/CustomizableLayout/Controls/Tab","DS/DataDragAndDrop/DataDragAndDrop","i18n!DS/ENOFloatingPanel/assets/nls/ENOFloatingPanel"],function(t,e,i,n,s){"use strict";return t.extend({init:function(t,e,i,n){this._parent({}),this.model=e,this.layout=i,this.layoutCell=n,this.buildUI(t)},buildUI:function(t){var e=UWA.createElement("div",{class:"customizable-layout-cell-content-panel"});this.elements.container=e,this.inject(t),this.header=UWA.createElement("div",{class:"customizable-layout-panel-header"}),this.initHeader(this.header),this.header.inject(e),this.content=UWA.createElement("div",{class:"customizable-layout-panel-content"}),this.content.inject(e),this.tab=new i(this.header,this.content),this.tab.onSelectTab(this.onSelectTab.bind(this));var n=UWA.createElement("div",{class:"customizable-layout-headerbar-container"});n.inject(this.header);for(var s=this.getActiveViewIndex(),o=this.model.views,l=0;l<o.length;l++){var r=o[l];r.parentLayoutPanel=this,this.buildHeaderbar(r,n),this.addToTab(r,s===l)}this.updateWinCmds()},getActiveViewIndex:function(){var t=this.model.views;this.model.activeViewName=this.model.activeViewName||t[0].getName();for(var e=0;e<t.length;e++){var i=t[e];if(i.getName()===this.model.activeViewName&&!(Array.isArray(this.model.closedViews)&&this.model.closedViews.indexOf(i.getName())>=0))return e}return 0},buildHeaderbar:function(t,i){for(var n=new e(i),s=t._getHeaderbarItems(n),o=this.createWinToolbarButtons(t,n),l=[],r=s.length,a=0;a<r;a++){var h=s[a],d=n.createClickButton(h.label,h.icon,h.onclick);l.push(d)}r>0&&l.push("|");var c=[{float:"right",items:l.concat(o),priority:0}];n.update(c),n.hide(),t.headerbar=n},buildToolbar:function(t,i){var n=new e(i),s=t._getToolbarItems(n);n.update(s)},createWinToolbarButtons:function(t,e){return t.maxButton=e.createClickButton(s.EFP_MaximizePanel,"resize-full",function(){this.onMaximize(!0)}.bind(this)),t.restoreButton=e.createClickButton(s.EFP_RestorePanel,"resize-small",function(){this.restoreFromMaximized(!0)}.bind(this)),t.closeButton=e.createClickButton(s.EFP_ClosePanel,"close",()=>this.layout.onClickShowHideViewCmd(this.activeView)),t.restoreButton.hide(),[t.maxButton,t.restoreButton,t.closeButton]},addToTab:function(t,e){var i=UWA.createElement("div",{class:"customizable-layout-panel-title"}),s=UWA.createElement("span",{html:t.getLabel()}),o=this.model,l=Array.isArray(o.closedViews)&&-1!==o.closedViews.indexOf(t.getName());s.inject(i);var r=UWA.createElement("div",{class:"customizable-layout-tab-content"}),a=UWA.createElement("div",{class:"customizable-layout-view-container"});t.inject(a),a.inject(r);var h=t.tabButton=this.tab.add(i,r,l);h.isTab=!0,n.on([h],[],{start:this.onDragStart.bind(this),stop:this.onDragEnd.bind(this)}),r.view=t,h.content=r,!h.isHidden()&&e&&this.tab.select(h),Array.isArray(o.closedViews)&&o.views.length===o.closedViews.length&&this.elements.container.setAttribute("state","closed")},onSelectTab:function(t){null!=this.activeView&&this.activeView.headerbar.hide();var e=t.content.view;e.headerbar.show(),e.headerbar.rebuild(),this.activeView=e,this.model.activeViewName=e.getName(),this.layout.onActiveTabChange(),t.contentContainer.isHidden()&&tabContent.contentContainer.show(),e.onActivate()},initHeader:function(t){t.views=this.model.views,n.on([t],[],{start:this.onDragStart.bind(this),stop:this.onDragEnd.bind(this)})},hideWinCmds:function(){for(var t=this.model.views.length,e=0;e<t;e++){var i=this.model.views[e];i.maxButton.hide(),i.restoreButton.hide(),i.closeButton.hide(),null!=i.winSep&&i.winSep.hide()}},showWinMinCmd:function(){for(var t=this.model.views.length,e=0;e<t;e++){var i=this.model.views[e];this.showWinCmdSep(i),i.closeButton.show()}},showWinMaxCmd:function(){for(var t=this.model.views.length,e=0;e<t;e++){var i=this.model.views[e];this.showWinCmdSep(i),i.maxButton.show()}},showWinCmdSep:function(t){null!=t.winSep&&t.winSep.show()},getActiveView:function(){return this.activeView},onDragStart:function(t,e){if(1==this.layout.getViews().length)return!1;e.stopPropagation(),this.layout.cloneModel(),requestAnimationFrame(function(){let e=this.model.views.length,i=Array.isArray(this.model.closedViews)?this.model.closedViews.length:0;if(t.isTab&&e>1){var n=t,s=n.content.view;e-i==1?(this.close(!0),this.elements.container.setAttribute("state","closed")):(this.hiddenTab=n,n.hide()),this.layout.onStartDocking([s]),this.model.cloned.views.splice(this.model.cloned.views.indexOf(s),1)}else this.close(!0),this.model.cloned.removeFromParent(),this.elements.container.setAttribute("state","closed"),setTimeout(function(){this.layout.onStartDocking(this.model.views)}.bind(this),0)}.bind(this))},onDragEnd:function(t,e){this.layout.docking.deactivate(),t.isTab&&null!=this.hiddenTab?(this.hiddenTab.show(),this.hiddenTab.content.show()):(this.restoreFromClosed(!0),setTimeout(()=>{this.elements.container.removeAttribute("state")},100))},showHideToolbar:function(){alert("show toolbar")},close:function(t){this.layoutCell.onClose(t),this.model.state="closed",t&&(this.model.cloned.state=this.model.state),!0!==t&&this.layout.onPanelClosed(this)},closeView:function(t){var e=this.model;if(this.layout.getOpenPanels().length>1||this.isOpen()&&(!Array.isArray(e.closedViews)&&e.views.length>1||Array.isArray(e.closedViews)&&e.views.length-e.closedViews.length>1)){if(Array.isArray(e.closedViews)?e.closedViews.push(t.getName()):e.closedViews=[t.getName()],e.views.length===e.closedViews.length)this.close(),setTimeout(()=>{this.elements.container.setAttribute("state","closed")},150);else{if(this.model.activeViewName===t.getName())for(var i,n=this.layout.getViews(),s=e.views.map(t=>t.getName()),o=0,l=n.length;o<l;o++)if(i=n[o],s.indexOf(i.getName())>=0&&-1===e.closedViews.indexOf(i.getName())){this.tab.select(i.tabButton);break}this.layout.saveCache()}this.tab.setActiveAttribute(t.tabButton,"false"),t.tabButton.hide()}},openView:function(t){t.tabButton.show(),this.model.closedViews.splice(this.model.closedViews.indexOf(t.getName()),1),this.isOpen()?this.layout.saveCache():(this.restoreFromClosed(),setTimeout(()=>{this.elements.container.removeAttribute("state")},100)),setTimeout(()=>{this.tab.select(t.tabButton)},101)},isOpen:function(){return"closed"!=this.model.state},isViewOpen:function(t){return this===t.parentLayoutPanel&&!(Array.isArray(this.model.closedViews)&&this.model.closedViews.indexOf(t.getName())>=0)&&this.isOpen()},restoreFromClosed:function(t){this.layoutCell.onRestoreFromClosed(),this.model.state="normal",!0!==t&&this.layout.onPanelRestoredFromMinimized(this)},_hideOrShowInactiveOpenTabs:function(t){var e=this.model.activeViewName,i=this.model.closedViews||[];if(this.model.views.length-i.length>1&&i.indexOf(e)){var n=this.model.views.filter(t=>t.getName()!==e&&-1==i.indexOf(t.getName()));n.length>0&&n.forEach(e=>{e.tabButton[t]()})}},restoreFromMaximized:function(){this.model.state="normal",this.updateWinCmds(),this.originalParent.appendChild(this.getContent()),this.elements.container.setAttribute("state","normal"),this.layout.restoreViewFromMaximize(this.layoutCell),this._hideOrShowInactiveOpenTabs("show")},onMaximize:function(t){this.model.state="maximized",this.updateWinCmds(),this.originalParent=this.getContent().getParent(),this.layout.getContent().appendChild(this.getContent()),this.elements.container.setAttribute("state","maximized"),this.layout.maximizedPanel=this,this.layout.onPanelMaximized(this,t),this._hideOrShowInactiveOpenTabs("hide")},updateWinCmds:function(){switch(this.model.state){case"normal":this.activeView.maxButton.show(),this.activeView.closeButton.show(),this.activeView.restoreButton.hide();break;case"maximized":this.activeView.restoreButton.show(),this.activeView.maxButton.hide(),this.activeView.closeButton.hide()}}})}),define("DS/CustomizableLayout/Dock/Docking",["UWA/Controls/Abstract","DS/CustomizableLayout/Dock/DockPanel","DS/DataDragAndDrop/DataDragAndDrop"],function(t,e,i){"use strict";return t.extend({init:function(t,e){this._parent({}),this.layout=t,this.tabOnlyDocking=e,this.buildUI(),this.dockSourceViews=null,this.dockTarget=null,this.deactivate()},activate:function(t){this.dockSourceViews=t,this.buildDockPanels(),this.show()},deactivate:function(){this.hide()},buildDockPanels:function(){this.dockPanels=[];for(var t=this.layout.getOpenPanels(),i=t.length,n=0;n<i;n++){var s=t[n],o=new e(this,s,this.tabOnlyDocking);this.dockPanels.push(o)}},onDragOver:function(t,e){e.preventDefault();for(var i=e.clientX,n=e.clientY,s=this.dockPanels.length,o=0;o<s;o++){var l=this.dockPanels[o];this.dropTargetPanel=l.panel,l.onDragOver(i,n)}},buildUI:function(){var t=UWA.createElement("div",{class:"customizable-layout-drop-targets-container"});i.on([],[t],{over:this.onDragOver.bind(this),drop:this.onDrop.bind(this),leave:this.onDragLeave.bind(this)}),this.preview=UWA.createElement("div",{class:"customizable-layout-drop-target-preview"}),this.previewTab=UWA.createElement("div",{class:"customizable-layout-drop-target-preview-tab"}),this.preview.hide(),this.previewTab.hide(),this.preview.inject(t),this.previewTab.inject(t),this.elements.container=t},onDrop:function(){this.dockTarget&&(this.dockTarget.onDrop(),this.hide(),this.layout.buildUI(!0))},onDragLeave:function(){this.preview.hide()}})}),define("DS/CustomizableLayout/Cell/Cell",["UWA/Controls/Abstract","DS/CustomizableLayout/Cell/Panel","DS/CustomizableLayout/Controls/Splitter"],function(t,e,i){"use strict";return t.extend({init:function(t,e,i,n){this._parent({}),this.model=i,this.model.uiElement=this,this.parent=n,this.layout=e,null!=n&&n.children.push(this),this.children=[],this.buildUI(t)},buildUI:function(t,i,n){this.elements.container=UWA.createElement("div",{class:"customizable-layout-cell",type:this.type}),this.inject(t),"row"==this.model.type?this.elements.container.setAttribute("type","row"):this.elements.container.setAttribute("type","col"),this.getContent().setAttribute("state",this.model.state),this.getContent().setAttribute("apply-open-close-transition","yes"),this.getContent().style.flexGrow=this.model.flexGrow,1==this.getOpenSiblings().length&&(this.getContent().style.flexGrow="1");for(var s=null,o=0;o<this.model.children.length;o++){var l=this.model.children[o];if("content"==l.type)this.panel=new e(this.elements.container,l,this.layout,this);else{var r=new this.constructor(this.elements.container,this.layout,l,this);o>0&&s.buildSplitter(r,this),s=r}}},buildSplitter:function(t,e){this.elements.splitter=new i({cell1:this,cell2:t,parent:e}),this.elements.splitter.inject(this.elements.container)},allSiblingsClosed:function(){return 0==this.getOpenSiblings().length},getOpenSiblings:function(){if(null==this.parent)return[];for(var t=[],e=this.parent.model.children,i=0;i<e.length;i++){var n=e[i];"closed"!=n.state&&t.push(n)}return t},onClose:function(t){this.getContent().setAttribute("state","closed"),this.model.state="closed",t&&(this.model.cloned.state=this.model.state),null!=this.parent&&this.allSiblingsClosed()&&this.parent.onClose(t),this.fitSiblings()},fitSiblings:function(){var t=this.getOpenSiblings();if(1==t.length)(i=t[0]).uiElement.getContent().style.flexGrow="1";else for(var e=0;e<t.length;e++){var i;(i=t[e]).uiElement.getContent().style.flexGrow=i.flexGrow}},onRestoreFromClosed:function(){null!=this.parent&&this.allSiblingsClosed()&&this.parent.onRestoreFromClosed(),this.getContent().setAttribute("state","normal"),this.model.state="normal",this.fitSiblings()}})});