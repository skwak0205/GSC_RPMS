define("DS/DibWebUtils/DibQueryToolbox",["UWA/Core","DS/WAFData/WAFData","DS/WebappsUtils/WebappsUtils","DS/PADUtils/PADSettingsMgt"],function(e,t,r,i){"use strict";var o=function(e,r){return t.authenticatedRequest(e,r)};return{getUDLData:function(t){return function(t){if(!e.is(t.objectPhysicalid,"array"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var r=t.serverUrl+"/cvservlet/fetch/v2?SecurityContext="+t.securityContext,i={label:"UDL_"+Date.now(),physicalid:t.objectPhysicalid,select_file:["udl"]},n={data:JSON.stringify(i),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var r=JSON.parse(e);r&&t.onComplete(r)},onFailure:function(){t.onFailure()}};return o(r,n)}(t)},expandDifComponent:function(t){return function(t){if(!e.is(t.objectPhysicalid,"string"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var r=t.serverUrl+"/cvservlet/expand?SecurityContext="+t.securityContext,i={label:"UDL_"+Date.now(),root_physicalid:t.objectPhysicalid,expand_iter:"-1",select_bo:["physicalid","ds6w:type","bo.PLMEntity.V_Name","bo.DIFCapture.V_ViewType","bo.DIFAbstractSheet.V_DIFFormatHeight","bo.DIFAbstractSheet.V_DIFFormatWidth","bo.DIFAbstractView.V_DIFScale","bo.DIFAbstractView.V_DIFScaleStatus","bo.DIFAbstractView.V_DIF3DMatrix"],select_rel:["physicalid","ds6w:type","ro.DIFAbstractViewInstance.V_DIFScale","ro.DIFAbstractViewInstance.V_DIFPosX","ro.DIFAbstractViewInstance.V_DIFPosY","ro.DIFAbstractViewInstance.V_DIFAngle"]},n={data:JSON.stringify(i),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){if(e){var r=JSON.parse(e);r&&t.onComplete(r)}else t.onFailure()},onFailure:function(){t.onFailure()}};return o(r,n)}(t)},expandPointedObject:function(t){return function(t){if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");e.is(t.objectPhysicalid,"string")||onFailure("No objectPhysicalid defined"),0===t.textsAttr.length&&onFailure("No attribute name defined"),e.is(t.onComplete,"function")||onFailure("No onComplete defined"),t.serverUrl||onFailure("No server URL"),t.securityContext||onFailure("No security context");var r=t.serverUrl+"/cvservlet/expand?SecurityContext="+t.securityContext,i=t.textsAttr;i.push("physicalid"),i.push("ds6w:type");var n={label:"UDL_"+Date.now(),root_physicalid:t.objectPhysicalid,expand_iter:"0",select_bo:i,select_rel:i},a={data:JSON.stringify(n),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var r=JSON.parse(e);t.onComplete(r)},onFailure:function(){t.onFailure("Query expandPointedObject fail")}};return o(r,a)}(t)},getPointedObjects:function(t){return function(t){if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");e.is(t.difViewStreamId,"string")||onFailure("No physical id defined"),0===t.textsSRId.length&&onFailure("No sr id defined"),0===t.textsAttr.length&&onFailure("No attribute name defined"),e.is(t.onComplete,"function")||onFailure("No onComplete defined"),t.serverUrl||onFailure("No server URL"),t.securityContext||onFailure("No security context");var r=t.serverUrl+"/cvservlet/navigate?SecurityContext="+t.securityContext,i=t.textsAttr,n=[];n.push(i);var a={input_physical_ids:[t.difViewStreamId],label:"RetrieveAnnLinkPointedObject"+Date.now(),primitives:[{navigate_to_sr:{id:1,filter:{role:["98"],sr_id:t.textsSRId}}}],patterns:{IMPLEMENT_LINK:[{id:1}]},attributes:n,flags:["returnMatches"],version:3},s={data:JSON.stringify(a),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var r=JSON.parse(e).result[0].outputs.IMPLEMENT_LINK[0];t.onComplete(r)},onFailure:function(){t.onFailure("Query getPointedObjectsInternal fail")}};return o(r,s)}(t)},getDIFAnnotatedProduct:function(t){return function(t){if(!e.is(t.objectPhysicalid,"string"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var r=t.serverUrl+"/cvservlet/navigate?SecurityContext="+t.securityContext,i={input_physical_ids:[t.objectPhysicalid],primitives:[{navigate_from_sr:{id:1,mode:"ends",filter:{role:["505"],semantics:["5"]}},navigate_from_rel:{id:2}}],patterns:{IMPLEMENT_LINK:[{id:1},{id:2}]},fileAttributes:[],version:3,label:"navigate to annotationSet"},n={data:JSON.stringify(i),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var r=JSON.parse(e);if(r){var i=r.result[0];if(i){var o,n=i.outputs;if(n)o=n.IMPLEMENT_LINK,t.onComplete(o)}}},onFailure:function(){t.onFailure()}};return o(r,n)}(t)},getProductFromDifAnnotationSet:function(t){return function(t){if(!e.is(t.objectPhysicalid,"string"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var r=t.serverUrl+"/cvservlet/navigate?SecurityContext="+t.securityContext,i={input_physical_ids:[t.objectPhysicalid],primitives:[{navigate_to_rel:{id:1},navigate_to_sr:{id:2,mode:"first"}}],patterns:{IMPLEMENT_LINK:[{id:1},{id:2}]},fileAttributes:[],version:3,label:"navigate to annotationSet"},n={data:JSON.stringify(i),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var r=JSON.parse(e);if(r){var i=r.result[0];if(i){var o=i.outputs;if(o){var n=o.IMPLEMENT_LINK;t.onComplete(n)}}}},onFailure:function(){t.onFailure()}};return o(r,n)}(t)},getRepObjPlmIdAssociatedToSymbol:function(t){return function(t){if(!e.is(t.difViewStreamId,"string"))throw new Error("No physical id defined");if(0==t.symbolsInViewRelIds.length)throw new Error("No symbol sr id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var r=t.serverUrl+"/cvservlet/navigate?SecurityContext="+t.securityContext,i={input_physical_ids:[t.difViewStreamId],primitives:[{navigate_to_sr:{id:1,filter:{role:["326"],sr_id:t.symbolsInViewRelIds}},navigate_to_rel:{id:2,mode:"return_rel"}}],patterns:{symbol_pathSR:[{id:1}],symbol_relation:[{id:1},{id:2}]},flags:["returnMatches"],fileAttributes:[],version:3,label:"navigate to symbol"},n={data:JSON.stringify(i),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var r=JSON.parse(e);if(r){var i=r.result[0];if(i){var o=i.outputs;if(o){var n=o.symbol_pathSR,a=o.symbol_relation;t.onComplete(n,a)}}}},onFailure:function(){t.onFailure()}};return o(r,n)}(t)},getSupplementalGeometryData:function(t){return function(t){if(!e.is(t.objectPhysicalid,"array"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var r=t.serverUrl+"/cvservlet/fetch/v2?SecurityContext="+t.securityContext,i={label:"UDL_"+Date.now(),physicalid:t.objectPhysicalid,select_file:["cgr"]},n={data:JSON.stringify(i),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var r=JSON.parse(e);r&&t.onComplete(r)},onFailure:function(){t.onFailure()}};return o(r,n)}(t)},getPointedObjectsFromLink:function(t){return function(t){if(!e.is(t.fatherID,"string"))throw new Error("No physical id defined");if(!e.is(t.role,"string"))throw new Error("No role defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");if(!t.serverUrl)throw new Error("No server URL");if(!t.securityContext)throw new Error("No security context");var r=t.serverUrl+"/cvservlet/navigate?SecurityContext="+t.securityContext,i={input_physical_ids:[t.fatherID],label:"RetrieveLinkPointedObject"+Date.now(),primitives:[{navigate_to_sr:{id:1,mode:"path",filter:{role:[t.role],sr_id:[t.sR_ID]}}}],patterns:{IMPLEMENT_LINK:[{id:1}]},flags:["returnMatches"],version:3},n={data:JSON.stringify(i),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){var r=JSON.parse(e).result[0].outputs.IMPLEMENT_LINK[0];t.onComplete(r)},onFailure:function(){t.onFailure()}};return o(r,n)}(t)}}}),define("DS/DibWebUtils/DibFavoriteContextAccess",["UWA/Core","DS/WAFData/WAFData","DS/WebappsUtils/WebappsUtils","DS/PADUtils/PADSettingsMgt","DS/PADUtils/PADUtilsServices"],function(e,t,r,i,o){"use strict";var n=function(e,r){var o=null;return!0===i.getSetting("cors_activated")?o=t.authenticatedRequest(e,r):(r.proxy="passport",o=t.proxifiedRequest(e,r)),o};return{getFavoriteContextInfos:function(t){if(!e.is(t.ObjectPhysicalid,"string"))throw new Error("No onComplete defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");var r={RootObject:null,PathOfInstances:[],Error:null},a=o.get3DSpaceUrl()+"/cvservlet/navigate?SecurityContext=preferred";return function(t){if(!e.is(t.ObjectPhysicalid,"string"))throw new Error("No phy id defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");var r=o.get3DSpaceUrl()+"/cvservlet/navigate?SecurityContext=preferred",a={input_physical_ids:[t.ObjectPhysicalid],primitives:[{navigate_to_sr:{id:1,filter:{semantics:["1"],role:["318"]},mode:"path"}}],patterns:{ROOT_PRODUCT_PATH:[{id:1}]},attributes:[],flags:["noReturnThumbnails"],version:3,label:"FavoriteContextQuerry"},s=parseInt(i.getSetting("webapi_timeout"),10),l={data:JSON.stringify(a),timeout:s,method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:t.onComplete,onFailure:t.onFailure};return n(r,l)}({ObjectPhysicalid:t.ObjectPhysicalid,onComplete:function(o){var s=e.is(o,"string")?JSON.parse(o):o;if(e.is(s.result,"array"))if(s.result.length<1)t.onComplete(r);else if(e.is(s.result[0].outputs.ROOT_PRODUCT_PATH,"array")){if(s.result[0].outputs.ROOT_PRODUCT_PATH.length<1)return r.Error=new Error("Bad length of the path of instances, it should be at least one element"),void t.onComplete(r);if(s.result[0].outputs.ROOT_PRODUCT_PATH[0].elements<1)return r.Error=new Error("Bad length of the path of instances, it should be at least one element"),void t.onComplete(r);var l=s.result[0].outputs.ROOT_PRODUCT_PATH[0].elements[0],u=s.result[0].outputs.ROOT_PRODUCT_PATH[0].elements;if("VPMRepInstance"===l["ds6w:type"]||"VPMInstance"===l["ds6w:type"]){var c={input_physical_ids:[l.physicalid],primitives:[{navigate_from_rel:{id:1}}],patterns:{ROOT_PRODUCT:[{id:1,iter:1}]},attributes:[],flags:["noReturnThumbnails"],version:3,label:"FavoriteContextInfosQuerry"},p=parseInt(i.getSetting("webapi_timeout"),10),d={data:JSON.stringify(c),timeout:p,method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(i){var o=e.is(i,"string")?JSON.parse(i):i;e.is(o.result,"array")?o.result.length<1?t.onComplete(r):e.is(o.result[0].outputs.ROOT_PRODUCT,"array")?o.result[0].outputs.ROOT_PRODUCT.length<1?t.onComplete(r):(l=o.result[0].outputs.ROOT_PRODUCT[0],r.PathOfInstances=u,r.RootObject=l,t.onComplete(r)):t.onComplete(r):t.onComplete(r)},onFailure:t.onFailure};return n(a,d)}r.RootObject=l,t.onComplete(r)}else t.onComplete(r);else t.onComplete(r)},onFailure:t.onFailure})},getFilters:function(t){if(!e.is(t.ObjectPhysicalid,"string"))throw new Error("No onComplete defined");if(!e.is(t.onComplete,"function"))throw new Error("No onComplete defined");if(!e.is(t.onFailure,"function"))throw new Error("No onFailure defined");var r=parseInt(i.getSetting("webapi_timeout"),10),a=o.get3DSpaceUrl()+"/cvservlet/navigate?SecurityContext=preferred",s={input_physical_ids:[t.ObjectPhysicalid],primitives:[{navigate_to_sr:{id:1,filter:{semantics:["4"],role:["319"]},mode:"first"}}],patterns:{FILTERS:[{id:1}]},attributes:[],flags:["noReturnThumbnails"],version:3,label:"FavoriteContextQuerryFilter"},l={data:JSON.stringify(s),timeout:r,method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:t.onComplete,onFailure:t.onFailure};return n(a,l)}}});