/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/PIMwebUX/PIMwebGroupDefinitionPanelView",["UWA/Core","UWA/Class","DS/Controls/LineEditor"],function(e,t,n){"use strict";return t.extend({init:function(t){var i=t.parent,l=t.editorText?t.editorText:"",a=e.createElement("div"),o=new n({disabled:!0,value:l,requiredFlag:!0,selectAllOnFocus:!0,autoCommitFlag:!0}).inject(a);o.elements.container.setStyles({width:"100%"}),o.elements.container.childNodes[0].setStyles({width:"100%"}),i.content=a,this.setEditorText=function(e){o.value=e},this.destroy=function(){a&&a.parentNode&&a.parentNode.removeChild(a),a=o=null}}})}),define("DS/PIMwebUX/PIMwebIsrContextGroupView",["UWA/Core","UWA/Class","DS/UIKIT/Iconbar","DS/CoreEvents/Events","DS/DataGridView/DataGridView","DS/Tree/TreeNodeModel","DS/Tree/TreeDocument","DS/Windows/Dialog","DS/Controls/Button","DS/Controls/LineEditor","DS/WebappsUtils/WebappsUtils","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrContextGroupView","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,n,i,l,a,o,s,r,d,c,u){"use strict";return t.extend({init:function(t){this.groupTitle=t.groupTitle,this.dialog=t.dialog,this.htmlParent=t.htmlParent,this.id=t.id;var s=t.productContext,r=t.ctrl,d=this;d.tokenCSO={},d.groupDefinitionDialog=null,d.isFilter=!!t.isFilter&&t.isFilter;var c=!!t.readOnly&&t.readOnly;d.isEmpty=!0;var f,p,g;var h=function(){d.model&&(d.model.removeRoots(),d.model=null),d.dataGridListViewDiv&&d.dataGridListViewDiv.remove(),d.dataGridListViewDiv=null,d.groupContent&&d.groupContent.remove(),d.groupContent=null,d._groupDefinitionDialog&&(d._groupDefinitionDialog.editor&&(d._groupDefinitionDialog.editor.remove(),d._groupDefinitionDialog.editor=null),d._groupDefinitionDialog.remove(),d._groupDefinitionDialog=null),i.publish({event:"onContextGroupRemoved",data:d})};this.removeGroupView=function(){h()},this.addInfoInGroup=function(e){!function(e){if(e&&e.length){d.model.prepareUpdate(),d.isFilter&&(d.model.removeRoots(),0!==d.model.getRoots().length&&1!==e.length&&(d.isFilter=!1));for(var t=0;t<e.length;t++){var n=new a({id:e[t].id,label:e[t].label,icons:e[t].icons,pathElement:e[t].pathElement});d.model.addRoot(n)}d.model.pushUpdate(),d.isEmpty=!1,f.getElementsByTagName("h6")[0].getElementsByTagName("span")[0].hide(),i.publish({event:"onElemAddedInGroup",data:d})}}(e)},this.getGroupInfo=function(){var e,t={},n=d.model.getRoots();if(!n.length)return t;for(t.isFilter=d.isFilter,t.Elements=[],e=0;e<n.length;e++)t.Elements.push({id:n[e]._options.id,label:n[e]._options.label,icons:n[e]._options.icons,pathElement:n[e]._options.pathElement});return t},f=e.createElement("div",{class:"PIMwebGroupTitleWithIconbar",html:[{tag:"h6",html:[d.groupTitle+" # "+this.id+"  ",{tag:"span",class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}]}]}),c||(p=new n({renderTo:f,items:[{id:"product",fonticon:"product",text:u.isrCtxGroupSelectProduct,handler:function(){r&&r.addElementsInGroup(s.id,d)}},{id:"filter",text:u.isrCtxGroupSelectFilter,fonticon:"filter",handler:function(){r&&r.searchFilters(s.id).then(function(e){!function(e){if(e){d.model.prepareUpdate(),d.model.removeRoots(),d.isFilter=!0;var t=new a({label:e[0].alias,id:e[0].id,icons:e[0].icons});d.model.addRoot(t),d.model.pushUpdate(),d.isEmpty=!1,f.getElementsByTagName("h6")[0].getElementsByTagName("span")[0].hide(),i.publish({event:"onFilterAddedInGroup",data:d})}}(e)})}},{id:"remove",text:u.isrCtxGroupElemRemove,fonticon:"remove",handler:function(){p.getItem("remove").elements.container.addClassName("disabled");var e=g.getNodesXSO().get(),t=e.length;if(t){d.model.prepareUpdate();for(var n=0;n<t;n++)d.model.removeRoot(e[n]);d.model.pushUpdate(),d.model.getRoots().length||(d.isEmpty=!0,d.isFilter=!1,f.getElementsByTagName("span")[0].show(),i.publish({event:"onEmptyGroup",data:d}))}}},{id:"delete",text:u.isrCtxGroupDelete,fonticon:"trash",handler:function(){h()}}]})).getItem("remove").elements.container.addClassName("disabled"),d.dataGridListViewDiv=new e.Element("div"),d.model=new o;var b=(g=new l({identifier:"DataGridViewContext",treeDocument:d.model,columns:[{text:"Tree",dataIndex:"tree"}],rowSelection:"multiple",cellSelection:"none",height:100,width:500,minWidth:100,minHeight:500,showRowBorderFlag:!0,showColumnBorderFlag:!0,placeholder:u.isrCtxGroupEmptyGroup,showOutlineFlag:!0})).getNodesXSO();b.options.getElementID=void 0,b.onPostAdd(function(e){p&&p.getItem("remove").elements.container.hasClassName("disabled")&&p.getItem("remove").elements.container.removeClassName("disabled"),r&&r.onPostRowSelect(e)}),b.onPostRemove(function(e){!g.getNodesXSO().get().length&&p&&p.getItem("remove").elements.container.addClassName("disabled"),r&&r.onPostRowUnselect(e)}),g.layout.columnsHeader=!1,g.inject(d.dataGridListViewDiv),d.groupContent=e.createElement("div",{class:"PIMwebGroupView",html:[e.createElement("div",{class:".PIMwebGroupElement",html:[{tag:"div",class:"PIMwebGroupField",html:[f,d.dataGridListViewDiv]}]})]}),d.groupContent.inject(d.htmlParent),i.publish({event:"onGroupViewCreated",data:d})}})}),define("DS/PIMwebUX/PIMwebOpacitySlider",["UWA/Core","UWA/Class","DS/Controls/Slider","DS/Controls/Button","DS/WebappsUtils/WebappsUtils"],function(e,t,n,i,l){"use strict";var a=l.getWebappsAssetUrl("PIMwebUX","icons/32/");return t.extend({init:function(t){var l,o,s,r,d=this,c=t.parent,u=!1,f=t.userValue,p=1===t.checkedButton?1:2===t.checkedButton?2:0,g=1===p?0:2===p?100:f;l=new e.Element("div",{class:"pimWebOpacitySlider","data-rec-id":"pimWebOpacitySlider",styles:{position:"absolute",display:"none",margin:"1px auto"}}),c.appendChild(l),(o=new i({label:"",checkFlag:1===p,icon:a+"I_PIMOpacity0.png",displayStyle:"icon",recId:"btn1"}).inject(l)).onClick=function(){o.checkFlag=!o.checkFlag,p=o.checkFlag?1:0,s.checkFlag=!1,u=!0,r.value=o.checkFlag?0:f},(r=new n({minValue:0,maxValue:100,stepValue:1,value:g,disabled:!1,valuePopupFlag:!1,recId:"slider"}).inject(l)).elements.container.setStyle("display","inline-flex"),r.elements.container.setStyle("margin","1px 10px 2px 10px"),r.elements.container.setStyle("width","300px"),r.addEventListener("change",function(e){if(u||(s.checkFlag=!1,o.checkFlag=!1,p=0,f=e.dsModel.value),u=!1,g!==e.dsModel.value){var t=g;g=e.dsModel.value,"function"==typeof d.onOpacityChange&&d.onOpacityChange({oldValue:t,newValue:g,userValue:f,checkedButton:p})}r.elements.container.getChildren()[0].setStyle("width","100%"),r.elements.container.getChildren()[0].setStyle("width","100%")}),(s=new i({label:"",checkFlag:2===p,icon:a+"I_PIMOpacity1.png",displayStyle:"icon",recId:"btn2"}).inject(l)).onClick=function(){s.checkFlag=!s.checkFlag,p=s.checkFlag?2:0,o.checkFlag=!1,u=!0,r.value=s.checkFlag?100:f},this.show=function(){l.setStyle("display","inline-flex")},this.hide=function(){l.setStyle("display","none")},this.onOpacityChange=null,this.getSize=function(){return l.getSize()},this.setPosition=function(e){l.setStyles(e)},this.destroy=function(){l&&l.parentNode&&l.parentNode.removeChild(l),d.onOpacityChange=null,d=l=c=o=s=r=null}}})}),define("DS/PIMwebUX/PIMwebUnitsUX",[],function(){"use strict";var e=1/12*(1/.0254),t=1/3*e;return Object.freeze({length:{mm:1e3,m:1,cm:100,km:.001,in:1/.0254,ft:e,micron:1e6,yard:t,mile:1/1609.344,nm:1e9,hm:.01,nmi:1/1852,dm:10,ang:1e10,cmm:1e5,mil:1/.0254*1e3},volume:{mm3:1e9,cm3:1e6,dm3:1e3,m3:1,km3:1e-9,L:1e3,in3:61023.74409473229,ft3:35.31466672148859,gal:1/.003785411784,brl:6.289810770432104,yard3:1.3079506193143924},convertValue:function(e,t,n){if(!("number"!=typeof e||e<=0))return e*(t?1:.001)*n[t?"volume":"length"].ratio},convertValueToString:function(e,t,n){if(!("number"!=typeof e||e<=0)){var i=e*(t?1:.001)*n.ratio,l=1-Math.floor(Math.log(i)/Math.log(10)+1);l>=n.decimal?i=Number((i*(t?1:.001)*n.ratio).toFixed(n.decimal+l)):i&&(i=Number((i*(t?1:.001)*n.ratio).toFixed(n.decimal)))}}})}),define("DS/PIMwebUX/PIMwebIsrPanelSpecTab",["UWA/Core","UWA/Class","DS/Controls/LineEditor","DS/Controls/Toggle","DS/Controls/Button","DS/Controls/Expander","DS/Controls/ComboBox","DS/Controls/SpinBox","DS/CoreEvents/Events","DS/Controls/ButtonGroup","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelSpecTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,n,i,l,a,o,s,r,d,c){"use strict";return t.extend({init:function(t){var u,f=this,p=t.parent,g=t.type,h=!!t.isNonPersistIsr&&t.isNonPersistIsr,b=!!t.readOnly&&t.readOnly,m={};localStorage.getItem("PIMwebIsrSpecs")&&(m=JSON.parse(localStorage.getItem("PIMwebIsrSpecs")));var I,w,x,C,S,v,F,y,L,P,M,E,R,D,O,V,T,k,A,N,U,j,G,W,Q,X,B,z,K,H,_,q,J,Y,Z,$,ee,te,ne={ComputationMode:{Clash:!0,Contact:!1,Clearance:!1,ClearanceValue:"10mm"},Fasteners:{FstChecked:!1,CheckItfWithFastenedParts:!1},EngineeringCnx:{EnggCnxChecked:!1,CheckNoClash:!0,CheckContact:!0,CheckClearance:!0,NoCheck:!0},KnwRulesChecked:!1,ElecChecked:!1,PathwaysChecked:!1,ReuseExistingItf:{RecomputeOnlyModItf:!0,DeleteOutOfScopeItf:!1},ComputeQuantifer:{PenVolume:!1,PenVector:!0,MinDist:!1},StoredResults:{ClashQuantifier:1,ClearanceQuantifier:1,GeometryDetail:1,ClashGeometry:1,ContactGeometry:1,ClearanceGeometry:1,Accuracy:{value:10,units:"mm"}},AppRulesExpanded:!0,UsrDefRulesExpanded:!1,UpdateRulesExpanded:!1,StoredQuantifExpanded:!1,StoredResultsExpanded:!1};function ie(e){f.ruleSet=e,V.value=e.alias}function le(){"customFacetMode"!==g&&(w.checkFlag||O&&O.checkFlag||P.checkFlag?r.publish({event:"onSpecInfoChange",data:"SpecInfoSufficient"}):r.publish({event:"onSpecInfoChange",data:"SpecInfoInsufficient"}))}function ae(){"customFacetMode"!==g&&(!P.checkFlag||M.checkFlag||E.checkFlag||R.checkFlag||D.checkFlag?(_.hide(),r.publish({event:"onEngCnxInfoChange",data:"EngCnxInfoSufficient"})):(_.show(),r.publish({event:"onEngCnxInfoChange",data:"EngCnxInfoInsufficient"})))}function oe(){for(var e=u.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].hasClassName("wux-controls-expander")||e[t].hasClassName("wux-controls-expander-container")||e[t].hasClassName("wux-controls-expander-header")||(e[t].style.pointerEvents="none",e[t].style.userSelect="none",e[t].setAttribute("disabled",!0)),e[t].hasClassName("fonticon-remove")&&e[t].getParent().addClassName("disabled")}localStorage.getItem("PIMwebIsrSpecs")&&(I=JSON.parse(localStorage.getItem("PIMwebIsrSpecs"))),u=e.createElement("div",{class:"PIMwebIsrPanelSpecTabContent"}).inject(p);var se=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection  PIMwebFirstTitle"}).inject(u),re=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(se);w=new i({type:"checkbox",label:c.isrSpecClash}).inject(re),x=new i({type:"checkbox",label:c.isrSpecContact,checkFlag:I?I.ComputationMode.Contact:ne.ComputationMode.Contact}).inject(re),(C=new i({type:"checkbox",label:c.isrSpecClearance})).inject(re),S=new n({disabled:!0,selectAllOnFocus:!0}).inject(re),se.setStyles({borderBottom:"1px solid #d1d4d4"}),S.elements.container.setStyles({marginRight:"15px"}),S.elements.container.childNodes[0].setStyles({marginRight:"15px"}),S.addEventListener("change",function(){(parseFloat(S.value)<=0||""===S.value.trim())&&(S.value="10mm")}),S.value=I?I.ComputationMode.ClearanceValue:ne.ComputationMode.ClearanceValue,w.addEventListener("change",function(){le()}),x.addEventListener("change",function(){x.checkFlag?w.checkFlag=w.disabled=!0:w.disabled=!1}),C.addEventListener("change",function(){C.checkFlag?(w.checkFlag=x.checkFlag=w.disabled=x.disabled=!0,S.disabled=!1):(S.disabled=!0,x.disabled=!1)}),w.checkFlag=I?I.ComputationMode.Clash:ne.ComputationMode.Clash,x.checkFlag=I?I.ComputationMode.Contact:ne.ComputationMode.Contact,C.checkFlag=I?I.ComputationMode.Clearance:ne.ComputationMode.Clearance;var de=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"});(v=new i({type:"checkbox",label:c.isrSpecFasteners})).inject(de),(F=new i({type:"checkbox",label:c.isrSpecCheckItfWithFastenedParts,disabled:!0})).inject(de),F.elements.container.setStyles({marginLeft:"28px"}),v.addEventListener("change",function(){v.checkFlag?F.disabled=!1:F.disabled=!0}),(y=new i({type:"checkbox",label:c.isrSpecPathways})).inject(de),(L=new i({type:"checkbox",label:c.isrSpecElecBranches})).inject(de),v.checkFlag=I?I.Fasteners.FstChecked:ne.Fasteners.FstChecked,F.checkFlag=I?I.Fasteners.CheckItfWithFastenedParts:ne.Fasteners.CheckItfWithFastenedParts,y.checkFlag=I?I.PathwaysChecked:ne.PathwaysChecked,L.checkFlag=I?I.ElecChecked:ne.ElecChecked,(Q=new a({header:c.isrSpecAppRulesHeader,body:de,style:"divided"}).inject(u)).elements.bodyContainer.setStyles({padding:"0 10px"}),Q.expandedFlag=I?I.AppRulesExpanded:ne.AppRulesExpanded;var ce=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(u);if(!h){var ue=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(ce);(O=new i({type:"checkbox",label:c.isrSpecKnwRule}).inject(ue)).elements.container.setStyles({marginRight:"5px"}),(H=e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(ue)).setStyles({marginLeft:"5px",marginRight:"5px"}),H.hide(),V=new n({disabled:!0,selectAllOnFocus:!0,autoCommitFlag:!0,placeholder:c.isrSpecSelectRuleSet}).inject(ue),b||(j=new l({icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",disabled:!0,onClick:function(){require("DS/PADServices/views/LandingPage").launchSearch({title:c.isrSpecRuleSetSearchPageTitle,precondition:'flattenedtaxonomies:"types/PLMRuleset"',showApplyButton:!0,ok:function(e){ie.call(this,e.map(function(e){return{id:e.resourceid,type:e["ds6w:type_value"],alias:e["ds6w:label"]}}))}.bind(f)})}}).inject(ue),O.addEventListener("change",function(){le(),O.checkFlag?(j.disabled=!1,""===V.value?(r.publish({event:"onKnwInfoChange",data:"KnwRuleInfoInsufficient"}),H.show()):(r.publish({event:"onKnwInfoChange",data:"KnwRuleInfoSufficient"}),H.hide())):(V.disabled=j.disabled=!0,r.publish({event:"onKnwInfoChange",data:"KnwRuleInfoSufficient"}),H.hide())})),O.checkFlag=ne.KnwRulesChecked}var fe=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(ce);P=new i({type:"checkbox",label:c.isrSpecEnggCnx}).inject(fe),(_=e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(fe)).setStyles({marginLeft:"10px"}),_.hide();var pe=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(ce),ge=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap PIMwebIsrPanelFlexEngCnx"}).inject(pe),he=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap PIMwebIsrPanelFlexEngCnx"}).inject(pe);(M=new i({type:"checkbox",label:c.isrSpecEnggCnxNoClash,disabled:!0}).inject(ge)).elements.container.setStyles({marginLeft:"28px"}),(E=new i({type:"checkbox",label:c.isrSpecEnggCnxContact,disabled:!0}).inject(he)).elements.container.setStyles({marginLeft:"28px"}),(R=new i({type:"checkbox",label:c.isrSpecEnggCnxClearance,disabled:!0}).inject(ge)).elements.container.setStyles({marginLeft:"28px"}),(D=new i({type:"checkbox",label:c.isrSpecEnggCnxNoCheck,disabled:!0}).inject(he)).elements.container.setStyles({marginLeft:"28px"}),P.addEventListener("change",function(){le(),P.checkFlag?M.disabled=E.disabled=R.disabled=D.disabled=!1:(M.disabled=!0,E.disabled=!0,R.disabled=!0,D.disabled=!0),ae()}),M.addEventListener("change",function(){ae()}),E.addEventListener("change",function(){ae()}),R.addEventListener("change",function(){ae()}),D.addEventListener("change",function(){ae()}),P.setPropertyFromUIInteraction("checkFlag",ne.EngineeringCnx.EnggCnxChecked),M.checkFlag=ne.EngineeringCnx.CheckNoClash,E.checkFlag=ne.EngineeringCnx.CheckContact,R.checkFlag=ne.EngineeringCnx.CheckClearance,D.checkFlag=ne.EngineeringCnx.NoCheck,(G=new i({type:"checkbox",label:c.isrChkIntermediateReps,value:0,checkFlag:!1})).inject(ce);var be,me,Ie=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(u);if((W=new i({type:"checkbox",label:c.isrComputeBetweenIntermediateReps,value:0,disabled:!0,checkFlag:!1})).inject(Ie),Ie.setStyles({marginLeft:"10px"}),Ie.inject(ce),G.addEventListener("change",function(){G.checkFlag?W.disabled=!1:W.disabled=!0}),(X=new a({header:c.isrUserDefinedRulesHeader,body:ce,style:"divided"}).inject(u)).elements.bodyContainer.setStyles({padding:"0 10px"}),X.expandedFlag=I?I.UsrDefRulesExpanded:ne.UsrDefRulesExpanded,h||(be=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(u),(T=new i({type:"checkbox",label:c.isrSpecRecomputeOnlyModified})).inject(be),(k=new i({type:"checkbox",label:c.isrSpecDeleteOutOfScopeIsr})).inject(be),k.elements.container.setStyles({marginLeft:"28px"}),(B=new a({header:c.isrUpdateRulesHeader,body:be,style:"divided"}).inject(u)).elements.bodyContainer.setStyles({padding:"0 10px"}),B.expandedFlag=I?I.UpdateRulesExpanded:ne.UpdateRulesExpanded,T.addEventListener("change",function(){T.checkFlag?k.disabled=!1:(k.disabled=!0,k.checkFlag=!1)}),T.checkFlag=ne.ReuseExistingItf.RecomputeOnlyModItf,k.checkFlag=ne.ReuseExistingItf.DeleteOutOfScopeItf),h){var we=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"});(A=new i({type:"checkbox",label:c.isrSpecPenVol})).inject(we),(N=new i({type:"checkbox",label:c.isrSpecPenVec})).inject(we),(U=new i({type:"checkbox",label:c.isrSpecMinDist})).inject(we),(z=new a({header:c.isrNonPersistQuantifiersHeader,body:we,style:"divided"}).inject(u)).elements.bodyContainer.setStyles({padding:"0 10px"}),z.expandedFlag=I?I.StoredQuantifExpanded:ne.StoredQuantifExpanded,A.checkFlag=I&&I.ComputeQuantifer?I.ComputeQuantifer.PenVolume:ne.ComputeQuantifer.PenVolume,N.checkFlag=I&&I.ComputeQuantifer?I.ComputeQuantifer.PenVector:ne.ComputeQuantifer.PenVector,U.checkFlag=I&&I.ComputeQuantifer?I.ComputeQuantifer.MinDist:ne.ComputeQuantifer.MinDist}else!function(){var t=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}),n=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(t);n.innerHTML=c.isrSpecStoredResQuantifiers,n.setStyles({fontWeight:"normal"});var l=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t),r=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(l);r.innerHTML=c.isrSpecStoredResClash,r.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(J=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecPenVec,c.isrSpecPenVol,c.isrSpecStoredResVecAndVol],enableSearchFlag:!1,selectedIndex:I&&I.StoredResults?I.StoredResults.ClashQuantifier:ne.StoredResults.ClashQuantifier,displayStyle:"normal"})).inject(l),J.elements.container.setStyles({width:"30%"});var f=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(t);f.setStyles({paddingTop:"5px"});var p=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(f);p.innerHTML=c.isrSpecStoredResClearance,p.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),($=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecMinDist],enableSearchFlag:!1,selectedIndex:I&&I.StoredResults?I.StoredResults.ClearanceQuantifier:ne.StoredResults.ClearanceQuantifier,displayStyle:"normal"})).inject(f),$.elements.container.setStyles({width:"30%"});var g=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(t);g.innerHTML=c.isrSpecStoredResGeometries,g.setStyles({fontWeight:"normal"}),(Y=new d({type:"radio"})).addChild(new i({type:"radio",label:c.isrSpecMainIsrType,value:1,checkFlag:I&&I.StoredResults?1===I.StoredResults.GeometryDetail:1===ne.StoredResults.GeometryDetail})),Y.addChild(new i({type:"radio",label:c.isrSpecAllForEachIsr,value:2,checkFlag:I&&I.StoredResults?2===I.StoredResults.GeometryDetail:2===ne.StoredResults.GeometryDetail})),Y.inject(t),Y.elements.container.setStyles({marginLeft:"25px"});var h=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t),b=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(h);b.innerHTML=c.isrSpecStoredResClash,b.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(Z=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecStoredResCurve,c.isrSpecStoredResVolume,c.isrSpecStoredResCurveAndVol],enableSearchFlag:!1,selectedIndex:I&&I.StoredResults?I.StoredResults.ClashGeometry:ne.StoredResults.ClashGeometry,displayStyle:"normal"})).inject(h),Z.elements.container.setStyles({width:"30%"});var m=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t);m.setStyles({paddingTop:"5px"});var w=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(m);w.innerHTML=c.isrSpecStoredResContact,w.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(q=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecStoredResTriangles],enableSearchFlag:!1,selectedIndex:I&&I.StoredResults?I.StoredResults.ContactGeometry:ne.StoredResults.ContactGeometry,displayStyle:"normal"})).inject(m),q.elements.container.setStyles({width:"30%"});var x=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t);x.setStyles({paddingTop:"5px"});var C=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(x);C.innerHTML=c.isrSpecStoredResClearance,C.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(ee=new o({elementsList:[c.isrSpecStoredResNone,c.isrSpecStoredResTriangles,c.isrSpecStoredResArea],enableSearchFlag:!1,displayStyle:"normal"})).inject(x),ee.elements.container.setStyles({width:"30%"});var S=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(x);S.innerHTML=c.isrSpecStoredResAccuracy,S.setStyles({width:"16%",fontWeight:"normal",marginRight:"5px",textAlign:"right"}),(te=new s({value:I&&I.StoredResults?I.StoredResults.Accuracy.value:ne.StoredResults.Accuracy.value,units:I&&I.StoredResults?I.StoredResults.Accuracy.units:ne.StoredResults.Accuracy.units,stepValue:1})).inject(x),te.elements.container.setStyles({width:"20%"}),ee.addEventListener("change",function(){te.disabled=!(ee.value===c.isrSpecStoredResArea)}),ee.selectedIndex=I&&I.StoredResults?I.StoredResults.ClearanceGeometry:ne.StoredResults.ClearanceGeometry,(K=new a({header:c.isrStoredResultsHeader,body:t,style:"divided"}).inject(u)).elements.bodyContainer.setStyles({padding:"0 10px"}),K.expandedFlag=I&&I.StoredResultsExpanded?I.StoredResultsExpanded:ne.StoredResultsExpanded}();"Create"!==t.type&&t.specInfo&&(me=t.specInfo,w.checkFlag=me.ComputationMode.Clash,x.checkFlag=me.ComputationMode.Contact,C.checkFlag=me.ComputationMode.Clearance,S.value=me.ComputationMode.ClearanceValue,v.checkFlag=me.Fasteners.FstChecked,F.checkFlag=me.Fasteners.CheckItfWithFastenedParts,P.checkFlag=me.EngineeringCnx.EnggCnxChecked,M.checkFlag=me.EngineeringCnx.CheckNoClash,E.checkFlag=me.EngineeringCnx.CheckContact,R.checkFlag=me.EngineeringCnx.CheckClearance,D.checkFlag=me.EngineeringCnx.NoCheck,h||(O.checkFlag=me.KnowledgeRule.KnwRulesChecked),me.KnowledgeRule.RuleSet&&ie(me.KnowledgeRule.RuleSet),L.checkFlag=me.checkElec,y.checkFlag=me.checkPathways,G.checkFlag=me.CheckInterRep,W.checkFlag=me.CompBetweenIntermediateReps,h?(A.checkFlag=me.ComputeQuantifer.PenVolume,N.checkFlag=me.ComputeQuantifer.PenVector,U.checkFlag=me.ComputeQuantifer.MinDist):(T.checkFlag=me.ReuseExistingItf.RecomputeOnlyModItf,k.checkFlag=me.ReuseExistingItf.DeleteOutOfScopeItf,J.selectedIndex=me.StoredResults.ClashQuantifier,$.selectedIndex=me.StoredResults.ClearanceQuantifier,Z.selectedIndex=me.StoredResults.ClashGeometry,ee.selectedIndex=me.StoredResults.ClearanceGeometry,q.selectedIndex=me.StoredResults.ContactGeometry,te.value=me.StoredResults.Accuracy.value,te.units=me.StoredResults.Accuracy.units,Y.value=[me.StoredResults.GeometryDetail]),r.publish({event:"onSpecTabComplete"})),b&&oe(),this.getSpecInfo=function(){var e={};return e.ComputationMode={Clash:w.checkFlag,Contact:x.checkFlag,Clearance:C.checkFlag,ClearanceValue:S.value},e.Fasteners={FstChecked:v.checkFlag,CheckItfWithFastenedParts:F.checkFlag},e.EngineeringCnx={EnggCnxChecked:P.checkFlag,CheckNoClash:M.checkFlag,CheckContact:E.checkFlag,CheckClearance:R.checkFlag,NoCheck:D.checkFlag},e.checkPathways=y.checkFlag,e.CheckElec=L.checkFlag,h||(e.KnowledgeRule={KnwRulesChecked:O.checkFlag,RuleSet:f.ruleSet},e.ReuseExistingItf={RecomputeOnlyModItf:T.checkFlag,DeleteOutOfScopeItf:k.checkFlag}),h?e.ComputeQuantifer={PenVolume:A.checkFlag,PenVector:N.checkFlag,MinDist:U.checkFlag}:e.StoredResults={ClashQuantifier:J.selectedIndex,ClearanceQuantifier:$.selectedIndex,GeometryDetail:Y.value[0],ClashGeometry:Z.selectedIndex,ContactGeometry:q.selectedIndex,ClearanceGeometry:ee.selectedIndex,Accuracy:{value:te.value,units:te.units}},e.CheckInterRep=!!G&&G.checkFlag,e.CompBetweenIntermediateReps=!!W&&W.checkFlag,e},this.getPIMwebIsrSpecPrefs=function(){var e={ComputationMode:{Clash:w.checkFlag,Contact:x.checkFlag,Clearance:C.checkFlag,ClearanceValue:S.value},Fasteners:{FstChecked:v.checkFlag,CheckItfWithFastenedParts:F.checkFlag},PathwaysChecked:y.checkFlag,ElecChecked:L.checkFlag,ComputeQuantifer:!h&&m&&m.ComputeQuantifer?m.ComputeQuantifer:h?{PenVolume:A.checkFlag,PenVector:N.checkFlag,MinDist:U.checkFlag}:ne.ComputeQuantifer,AppRulesExpanded:Q.expandedFlag,UsrDefRulesExpanded:X.expandedFlag,UpdateRulesExpanded:B.expandedFlag,StoredResultsExpanded:K?K.expandedFlag:m&&m.StoredResultsExpanded?m.StoredResultsExpanded:ne.StoredResultsExpanded,StoredQuantifExpanded:z?z.expandedFlag:m&&m.StoredQuantifExpanded?m.StoredQuantifExpanded:ne.StoredQuantifExpanded};return h||(e.StoredResults={ClashQuantifier:J.selectedIndex,ClearanceQuantifier:$.selectedIndex,GeometryDetail:Y.value[0],ClashGeometry:Z.selectedIndex,ContactGeometry:q.selectedIndex,ClearanceGeometry:ee.selectedIndex,Accuracy:{value:te.value,units:te.units}}),e},this.disableTab=function(){oe()}}})}),define("DS/PIMwebUX/PIMwebIsrPanelIsrTab",["UWA/Core","UWA/Class","DS/Controls/LineEditor","DS/Controls/Editor","DS/CoreEvents/Events","DS/Controls/ComboBox","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelIsrTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,n,i,l,a,o){"use strict";return t.extend({init:function(t){var s,r,d,c,u,f,p=t.parent,g=t.ctrl,h=t.dialog,b=[];g.getCreationParams().then(function(t){if(t&&t.types&&t.title&&t.name){d=t.name?t.name:"";var m=Object.keys(t.types).length;if(m){for(var I=0;I<m;I++)b.push(t.types[Object.keys(t.types)[I]]);if(l.publish({event:"onIsrTypeInitDone",data:b[0]}),g.setAllNlsType(t.types),f=e.createElement("div",{class:"PIMwebIsrPanelContextTabContent"}).inject(p),b.length>1){h.height=h.height+25,h.minHeight=h.minHeight+25;var w=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebFirstTitle"}).inject(f),x=e.createElement("div").inject(w);e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(x).innerHTML=o.isrType,(c=new a({elementsList:b,enableSearchFlag:!1})).inject(w),c.elements.container.setStyles({width:"100%"}),c.addEventListener("change",function(){l.publish({event:"onIsrTypeChange",data:c.value})})}var C;C=c?e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f):e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection  PIMwebFirstTitle"}).inject(f);var S=e.createElement("div").inject(C),v=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(S);v.innerHTML=o.isrTitle,v.setStyles({marginRight:"5px"}),u=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(S),e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(u),u.hide(),(s=new n({placeholder:o.titlePlaceholder,value:t.title?t.title:"",selectAllOnFocus:!0,autoCommitFlag:!0}).inject(C)).elements.container.setStyles({width:"100%"}),s.elements.container.childNodes[0].setStyles({width:"100%"}),s.addEventListener("change",function(){l.publish({event:"onTitleChange",data:s.value})}),l.publish({event:"onTitleChange",data:s.value});var F,y=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f),L=e.createElement("div").inject(y);e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(L).innerHTML=o.isrDescription,(r=new i({nbRows:7,newLineMode:"shiftEnter",placeholder:o.descriptionPlaceholder,value:"",selectAllOnFocus:!0,autoCommitFlag:!0}).inject(y)).elements.container.setStyles({width:"100%",resize:"both"}),r.elements.container.childNodes[0].setStyles({width:"100%",resize:"both"}),localStorage.getItem("PIMwebIsrSpecs")&&(F=JSON.parse(localStorage.getItem("PIMwebIsrSpecs"))),F&&F.descWidth&&F.descHeight&&r.elements.container.childNodes[0].setStyles({width:F.descWidth,height:F.descHeight})}}}),this.getIsrInfo=function(){return{isrType:c?c.value:1===b.length?b[0]:null,isrTitle:s.value,isrName:d,isrDesc:r.value}},this.getPIMwebIsrTabPrefs=function(){var e={};return r&&(e.descWidth=r.elements.container.childNodes[0].getSize().width,e.descHeight=r.elements.container.childNodes[0].getSize().height),e},this.setIsrTitleValidity=function(e){e?u.hide():u.show()}}})}),define("DS/PIMwebUX/PIMwebDetailedItfListUI",["UWA/Core","UWA/Class","DS/DataGridView/DataGridView","DS/Tree/TreeDocument","DS/TreeModel/TreeNodeModel","DS/PIMwebUX/PIMwebUnitsUX","DS/WebappsUtils/WebappsUtils","i18n!DS/PIMwebUX/assets/nls/PIMwebItfListUI","css!DS/PIMwebUX/assets/css/PIMwebItfListUI"],function(e,t,n,i,l,a,o,s){"use strict";var r="NotAnalyzed",d="OK",c="KO",u="Clash",f="Contact",p="Clearance",g="NoInterference",h="Undefined",b="rgb(204, 9, 47)",m="rgb(255, 138, 46)",I="rgb(111, 188, 75)",w="rgb(0, 157, 219)",x="rgb(254, 224, 0)",C="rgb(111, 188, 75)",S="rgb(204, 9, 47)",v="rgb(254, 224, 0)",F={iconName:"presentation-slide",fontIconFamily:window.WUXManagedFontIcons.Font3DS},y=o.getWebappsAssetUrl("PIMwebUX","icons/22/"),L=["itfQuantifier","itfPenVec","itfMinDist","itfPenVol","itfTolerance"],P=["itfSystemType","itfUserType","itfAnalysis","itfPrevAnalysis","itfLblFstType1","itfLblFstType2","itfLblCollabSpace1Ref","itfLblCollabSpace2Ref","itfLblCollabSpace1Shape","itfLblCollabSpace2Shape","itfLblOrganization1Ref","itfLblOrganization2Ref","itfLblOrganization1Shape","itfLblOrganization2Shape","itfLblMaturity1Ref","itfLblMaturity2Ref","itfLblMaturity1Shape","itfLblMaturity2Shape","itfLblRevision1Ref","itfLblRevision2Ref","itfLblRevision1Shape","itfLblRevision2Shape","itfOwner","itfOwnerID","itfLblInst1Owner","itfLblInst2Owner","itfLblRef1Owner","itfLblRef2Owner","itfLblShape1Owner","itfLblShape2Owner","itfLblInst1OwnerID","itfLblInst2OwnerID","itfLblRef1OwnerID","itfLblRef2OwnerID","itfLblShape1OwnerID","itfLblShape2OwnerID","current","organization","project","revision","policy","owner","itfCurrent","V_Context_Validity_Status","ISUPTODATE"],M={EnumItfType:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus1:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus2:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}}};M.EnumItfType.semantics.possibleValues[s.Clash]=u,M.EnumItfType.semantics.possibleValues[s.Contact]=f,M.EnumItfType.semantics.possibleValues[s.Clearance]=p,M.EnumItfType.semantics.possibleValues[s.NoInterference]=g,M.EnumItfType.semantics.possibleValues[s.Undefined]=h,M.EnumItfStatus1.semantics.possibleValues[s.itfOK]=d,M.EnumItfStatus1.semantics.possibleValues[s.itfKO]=c,M.EnumItfStatus1.semantics.possibleValues[s.itfToAnalyze]=r,M.EnumItfStatus2.semantics.possibleValues[s.itfOK]=d,M.EnumItfStatus2.semantics.possibleValues[s.itfKO]=c,M.EnumItfStatus2.semantics.possibleValues[s.itfToReAnalyze]=r;var E,R,D,O,V,T=function(e,t){var n=s[e],i=s[t];return n===i?0:n<i?-1:1},k=function(e,t,n,i){return E=n.options.grid.itfPrevAnalysis,R=i.options.grid.itfPrevAnalysis,D=t===r?""===R||void 0===R?"itfToAnalyze":"itfToReAnalyze":t===d?"itfOK":"itfKO",O=s[e===r?""===E||void 0===E?"itfToAnalyze":"itfToReAnalyze":e===d?"itfOK":"itfKO"],V=s[D],O===V?0:O<V?-1:1};function A(e,t){return e||t?e?t?e===t?0:e<t?-1:1:1:-1:0}function N(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfUserType)return"EnumItfType"}function U(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfAnalysis){var t=e.nodeModel.options.grid.itfPrevAnalysis;return""===t||void 0===t?"EnumItfStatus1":"EnumItfStatus2"}}function j(e){if(e&&-1!==e.rowID&&e.nodeModel)return e.nodeModel.options.grid.itfLblSlide?"url":void 0}function G(e){var t=e.cellModel;return t===u?b:t===f?m:t===p?I:t===g?w:t===h?x:null}function W(e){var t=e.cellModel;return t===d?C:t===c?S:t===r?v:null}function Q(e,t){return e<t?-1:e>t?1:0}return t.extend({init:function(t){var o,c,u={},f=null,p=t.readOnly,g=t.cbDnD?t.cbDnD:{},h=t.parent,b=this,m="PIMwebItfListColPref"+(t.suffix?t.suffix:""),I=!1,w=t.deforder,x=t.defCols,C={},S=!0,v=0;if(L=L.concat(t.filterCols?t.filterCols.addColswithNumber:[]),P=P.concat(t.filterCols?t.filterCols.addColsWithSet:[]),t.isWebInWin)I=!0;else if(t.filterCols&&!x&&!t.filterCols.addColsWithSet){const e=P.indexOf("label");e>-1&&P.splice(e,1)}function E(e){(e||e.length||e.volume)&&(e.length.unit&&a.length[e.length.unit]&&(C.length={val:e.length.unit,ratio:a.length[e.length.unit],decimalRW:e.length.decimalPlaceRW,decimalRO:e.length.decimalPlaceRO}),e.volume.unit&&a.volume[e.volume.unit]&&(C.volume={val:e.volume.unit,ratio:a.volume[e.volume.unit],decimalRW:e.volume.decimalPlaceRW,decimalRO:e.volume.decimalPlaceRO}),e.highExponent&&(C.highExponent=e.highExponent),e.lowExponent&&(C.lowExponent=e.lowExponent))}function R(e,t){if(!("number"!=typeof e||e<=0)){var n=t?C.volume:C.length,i=e;if(I){var l=Number((i*(t?1:.001)*n.ratio).toFixed(n.decimalRW)),a=1-Math.floor(Math.log(i)/Math.log(10)+1),o=n.decimalRW+a+C.highExponent+1;i=0!==l?l:Number((i*(t?1:.001)*n.ratio).toFixed(o))}else i&&(i=Number((i*(t?1:.001)*n.ratio).toFixed(n.decimalRO)));return i}}function D(e){if("itfLblSlide"===e)return this.grid[e]?this.grid[e]:0;if("label"===e)return this.label;if(L.indexOf(e)>-1){var t="itfPenVol"===e||S&&"itfQuantifier"===e&&"Clash"===this.grid.itfSystemType;return this.grid[e]?R(this.grid[e],t):void 0}if("itfUserType"===e)return s[this.grid[e]];if("itfAnalysis"===e){var n=this.grid[e]===r?""===this.grid.itfPrevAnalysis?"itfToAnalyze":"itfToReAnalyze":this.grid[e]===d?"itfOK":"itfKO";return s[n]}return s[this.grid[e]]?s[this.grid[e]]:this.grid[e]}function O(e){if(e.nodeModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===t)return e.nodeModel.options.grid[t]?{icon:F,label:e.nodeModel.options.grid[t]}:void 0;var n="itfPenVol"===t||S&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType;return R(e.nodeModel.options.grid[t],n)}}function V(e){if(e.nodeModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);return s[e.nodeModel.options.grid[t]]||""}}function X(e){if(e.nodeModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);return s["itf"+e.nodeModel.options.grid[t]]||""}}function B(e){if("number"==typeof e.cellModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);return{units:("itfPenVol"===t||S&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType?C.volume:C.length).val}}}function z(e){if(-1!==e.rowID&&e.cellModel)return O(e)+" "+B(e).units}function K(e){return!e.cellModel}function H(e){var t="",n=f.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===n)return-1===e.rowID?s.itfLblSlide:e.nodeModel.options.grid.itfLblSlide?String(e.nodeModel.options.grid.itfLblSlide):"";if(-1!==e.rowID&&e.cellModel){if("tree"===n)t+=e.nodeModel.options.label,e.nodeModel.getParents().forEach(function(e){t=e.options.label+"|"+t});else if("itfUserType"===n)t=s[e.cellModel];else if("itfAnalysis"===n){var i=e.nodeModel.options.grid.itfPrevAnalysis,l=e.cellModel;t=s[l===r?""===i?"itfToAnalyze":"itfToReAnalyze":l===d?"itfOK":"itfKO"]}return t}}function _(){setTimeout(function(){f.reapplySortModel();var t=JSON.parse(localStorage.getItem(m));t&&t.filterModel&&!e.equals(t.filterModel,{})&&(c.setFilterModel({}),c.setFilterModel(t.filterModel))},10)}function q(e){return!p&&(!("itfCtxName"===f.columns[e.columnID].dataIndex&&e.nodeModel&&e.nodeModel.getNumberOfChildren()>0)&&((!e.nodeModel||!e.nodeModel.options.grid.isNonEditable&&!e.nodeModel.options.grid.isNonPersistentPIM)&&(!I||(void 0===f.columns[e.columnID].editableFlag||f.columns[e.columnID].editableFlag))))}function J(e,t){if(!p){var n=f.columns[e.columnID].dataIndex,i=[];"tree"===n&&e.nodeModel.updateOptions({label:t}),(i=f.getTreeDocument().getSelectedNodes().filter(function(e){return e.options.grid.itfuid&&!e.options.grid.isNonEditable})).length||i.push(e.nodeModel),c.withTransactionUpdate(function(){i.forEach(function(e){if(e.options.grid.hasOwnProperty(n)){var i={};i[n]=t,e.options.grid.tree===e.options.grid.itfCtxName&&(i["tree"===n?"itfCtxName":"tree"]=e.options.grid.itfName=t,"itfCtxName"===n&&e.updateOptions({label:t})),e.updateOptions({grid:i})}})}),i.forEach(function(e){if(b.onCellEdit&&e.options.grid.hasOwnProperty(n)){var i=e.options.grid,l="tree"===n?i.tree!==i.itfCtxName?"itfMetricName":"itfCtxName":n,a=e.getChildren()&&e.getChildren().length&&!I?e.getChildren()[0].options.grid.itfuid:i.itfuid;b.onCellEdit({id:a,actualId:i.itfuid,param:l,newValue:t})}})}}function Y(e){if(Array.isArray(e)&&"function"==typeof b.onSelect){var t=[],n=[];e.forEach(function(e){e.hasChildren()||-1!==t.indexOf(e.options.grid.itfuid)?e.processDescendants({processNode:function(e){var n=e.nodeModel;-1!==t.indexOf(n.options.grid.itfuid)||n.getChildren()||n.isFiltered()||n.isSelected()||t.push(e.nodeModel.options.grid.itfuid)}}):t.push(e.options.grid.itfuid),e.options.grid&&e.options.grid.itfuid&&n.push(e.options.grid.itfuid)}),b.onSelect({idsSelected:t,actualIdsSelected:n})}}function Z(e){if(Array.isArray(e)&&"function"==typeof b.onUnselect){var t=[],n=[];e.forEach(function(e){0===e.getParents().filter(function(e){return e.isSelected()}).length&&(e.hasChildren()||-1!==t.indexOf(e.options.grid.itfuid)?e.processDescendants({processNode:function(e){var n=e.nodeModel,i=n&&n.getParents().some(function(e){return e.isSelected()});!n||i||-1!==t.indexOf(n.options.grid.itfuid)||n.getChildren()||n.isSelected()||t.push(e.nodeModel.options.grid.itfuid)}}):t.push(e.options.grid.itfuid)),e.options.grid&&e.options.grid.itfuid&&n.push(e.options.grid.itfuid)}),I?b.onUnselect(t,n):b.onUnselect(t,null,n)}}function $(e){e&&(e.itfQuantifier=void 0,"Clash"===e.itfSystemType?e.itfQuantifier=S?e.itfPenVol:e.itfPenVec:"Clearance"===e.itfSystemType&&(e.itfQuantifier=e.itfMinDist))}function ee(e){Object.keys(e).forEach(function(t){var n=e[t];n&&n.itfuid&&"Clash"===n.itfSystemType&&(n.itfPenVol&&n.itfPenVec?v=3:n.itfPenVol?v=2===v?3:1:n.itfPenVec&&(v=1===v?3:2),S=3===v||1===v),3!==v&&e[t]&&("object"==typeof e[t]||Array.isArray(e[t]))&&ee(e[t])})}function te(e,t){if(void 0!==e.itfuid){$(e);var n={label:e.itfName,grid:e,getAttributeValueForFiltering:D};e.icons&&e.itfName&&(n.icons=e.icons.map(e=>y+e));var i=new l(n);return u[e.itfuid]=i,window.__karma__&&(i.toChangeValueForODT=J),t&&t.addChild(i),i}}function ne(e){3!==v&&ee(e);var t=[];Object.keys(e).forEach(function(n){!function e(n,i){var l=i,a=l===c;if(n.hasOwnProperty("row")&&(l=te(n.row,a?void 0:l),a&&t.push(l)),n.hasOwnProperty("children")){var o=n.children;Object.keys(o).forEach(function(t){o[t].hasOwnProperty("row")&&e(o[t],l)})}}(e[n],c)}),t.length&&c.addRoot(t)}E(e.extend({length:{unit:"mm",decimalRW:3,decimalRO:3},volume:{unit:"mm3",decimalRW:3,decimalRO:3}},t.units)),this.updateInterferences=function(e){0===Object.keys(u).length?ne(e):c.withTransactionUpdate(function(){function t(e,t){!e.search({match:function(e){if(e.nodeModel.options.grid.itfuid===t)return!0}}).length&&u[t]&&(e.addChild(u[t]),3!==v&&ee([u[t].options.grid]))}Object.keys(e).forEach(function(n){e[n].hasOwnProperty("row")&&function e(n){Object.keys(n).forEach(function(i){if(n[i]&&n[i].itfuid&&"object"==typeof n[i]){var l=n[i];3!==v&&ee([l.itfuid]),u.hasOwnProperty(l.itfuid)&&($(l),u[l.itfuid].updateOptions({label:l.itfName,grid:l})),u[l.itfuid]||te(l,l.childOf?void 0:c),l.childIds&&n.children&&l.childIds.length===Object.keys(n.children).length&&Object.keys(n.children).forEach(function(e){u[l.childIds[e]]?n.children[e]&&n.children[e].row&&t(u[l.itfuid],n.children[e].row.itfuid):te(n.children[e],u[l.itfuid])}),l.childOf&&u[l.childOf]&&t(u[l.childOf],l.itfuid)}if(n.hasOwnProperty("row")&&e(n[i]),n.hasOwnProperty("children")){var a=n.children;Object.keys(a).forEach(function(t){a[t].hasOwnProperty("row")&&e(a[t])})}})}(e[n])})}),_()},this.showSlideColumn=function(e){o.forEach(function(t){"itfLblSlide"===t.dataIndex&&f.layout.setColumnVisibleFlag(t.dataIndex,e,{isUserInteraction:!0})})},this.removeInterferences=function(){v=0,S=!0,f.getNodesXSO().empty(),c.empty(),u={}},this.getSelectedInterferences=function(e){return e?f.getTreeDocument().getSelectedNodes().map(function(e){return e.options.grid.itfuid}).filter(function(e){return e}):this.getLeafNodeIds(!0)},this.getSelectedRows=function(){var e=[];return f.getNodesXSO().get().forEach(function(t){var n=f.layout.getCellsFromNodeModel(t,!0);n&&e.push(f.getCellInfosAt(n[0]).rowID)}),e.sort(Q)},this.selectRows=function(e){var t=e.map(function(e){return f.model[e]});c.withTransactionUpdate(function(){f.unselectAll(),f.setActiveCell(-1,!1,!1),t.forEach(function(e){f.selectNodeModel(e,!0,!1)}),f.ensureNodeModelVisible(t[0],!1,!0)})},this.selectRowsByUID=function(e){var t,n=this.getSelectedInterferences();if(n.length===e.length&&e.every(function(e,t){return e===n[t]}))return 1;f.unselectAll(),f.setActiveCell(-1,!1,!1),e.forEach(function(e){e&&c.search({match:function(n){var i=n.nodeModel.options.grid;(i.itfuid===e||i.childIds&&1===i.childIds.length&&i.childIds.indexOf(e)>-1)&&(f.selectNodeModel(n.nodeModel,!0,!1),t||(t=n.nodeModel))}})}),t&&f.ensureNodeModelVisible(t,!1,!0)},this.selectOrUnselectAll=function(e){e?f.selectAllVisibleNodes():f.unselectAll()},this.selectOrUnselectRows=function(e,t,n,i){var l=e.map(function(e){return f.model[e]});c.withTransactionUpdate(function(){l.forEach(function(e){t?f.selectNodeModel(e,n,i):f.unselectNodeModel(e)})}),f.ensureNodeModelVisible(l[0],!1,!0),i||f.setActiveCell(f.layout.getCellsFromNodeModel(l[0],!0)[0],!1,!0)},this.getNumberOfRows=function(){return f.model.length},this.getVisibleRows=function(){if(f)return f.model.map(function(e){return e.options.grid.itfuid})},this.getInternalChildInfo=function(e){var t;if(e)return c.search({match:function(n){var i=n.nodeModel.options.grid;(i.itfuid===e||i.childIds&&1===i.childIds.length&&i.childIds.indexOf(e)>-1)&&(t=i)}}),t},this.IsPenVolInQuantCol=function(){return S},this.toggleReadOnly=function(){c.withTransactionUpdate(function(){p=!p;var e=["tree","itfCtxName","itfDescription","itfUserType","itfAnalysis"];o.forEach(function(t){e.indexOf(t.dataIndex)>-1&&(t[f?"editableFlag":"isEditable"]=!p)})})},this.getRowInternalData=function(e){return e<=f.model.length?f.model[e].options.grid:{}},this.getColumns=function(){if(!f)return{};var e=[];return f.columns.forEach(function(t){e.push({dataIndex:t.dataIndex,text:t.text,editableFlag:t.editableFlag,visibleFlag:t.visibleFlag})}),e},this.getRowData=function(e,t,n){if(e>f.model.length)return[];var i=[],l=f.model[e].options.grid,a=f.layout.getLeafColumns();return t||(a=f.layout.getVisibleOrderedColumnsIndexes().map(function(e){return a[e]})),a.forEach(function(t){if(l[t.dataIndex]){var a=n?t.text:t.dataIndex;if("function"==typeof t.getCellValueForExport){var o=f.layout.getCellIDFromCoordinates({rowID:e,columnID:f.layout.getColumnIndex(t.dataIndex)});if(void 0!==f.getCellInfosAt(o).cellModel){var s=t.getCellValueForExport(f.getCellInfosAt(o));i[a]=s||" "}}else"time"===t.typeRepresentation?i[a]=new Date(l[t.dataIndex]).toLocaleString():i[a]=l[t.dataIndex]?l[t.dataIndex]:" "}}),n||(i.itfuid=l.itfuid?l.itfuid:void 0),i},this.getRowInfosFromMousePosition=function(e){var t=f.layout.getCellIDFromPositionInView(e),n=f.getCellInfosAt(t).rowID;return n>=0?b.getRowData(n,!1,!0):[]},this.ensureSelectedLineVisibility=function(){var e=f.getNodesXSO().get();e&&0!==e.length&&f.ensureNodeModelVisible(e[0],!1,!0)},this.setUnits=E,this.exportAsCSV=function(e){return f.getAsCSV(e)},this.switchQuantifierColumnVal=function(e){S=e.isPenVolume,c.getAllDescendants().forEach(function(t){"Clash"===t.options.grid.itfSystemType&&(t.options.grid.itfQuantifier=e.isPenVolume?t.options.grid.itfPenVol:t.options.grid.itfPenVec,t.updateOptions({grid:t.options.grid}))}),_()},this.reApplyFilterAndSort=_,this.updateDataGridView=function(e){setTimeout(function(){f.invalidateLayout(e)},0)},this.getLeafNodeIds=function(e){var t=e?f.getTreeDocument().getSelectedNodes():[c],n=[];return 1!==t.length||t[0].getChildren()?t.forEach(function(e){!e.getChildren()&&e.options.grid.itfuid?n.push(e.options.grid.itfuid):e.processDescendants({processNode:function(e){e.nodeModel.getChildren()||e.nodeModel.isFiltered()||!e.nodeModel.options.grid.itfuid||n.push(e.nodeModel.options.grid.itfuid)}})}):n.push(t[0].options.grid.itfuid),n},this.updateModel=function(e,t,n){var i={},l=[];i[t]=n,c.search({match:function(a){e&&a.nodeModel.options.grid.itfuid===e&&("tree"===t&&a.nodeModel.updateOptions({label:n}),a.nodeModel.updateOptions({grid:i}),l.push(a.nodeModel))}}),l.forEach(function(e){"function"==typeof e.onAttributeChangeFromUI&&e.onAttributeChangeFromUI({dataIndex:t,newValue:n})})},this.expandOrCollapse=function(e,t,n,i){var l=e?f.model:n||t.map(function(e){return f.model[e]}),a=[];return l.forEach(function(e){e.canBeExpanded()&&(i&&!e.isExpanded()||!i&&e.isExpanded())&&(n||e.getAllDescendants().forEach(function(e){e.canBeExpanded()&&e.options.grid.itfuid&&(i&&!e.isExpanded()||!i&&e.isExpanded())&&(a.push(e),i?e.expand():e.collapse())}),a.push(e),i?e.expand():e.collapse())}),a},this.onSelect=null,this.onUnselect=null,this.onCellEdit=null,this.contextualEvent=null,function(){!function(){if(!o){var e={itfLblSlide:{dataIndex:"itfLblSlide",icon:F,editableFlag:!1,getCellValue:O,getCellTypeRepresentation:j,getCellValueForExport:H,compareFunction:A,getCellSelectableState:K,pinned:"left",visibleFlag:!1,width:"50"},tree:{dataIndex:"tree",text:s.itfName,editableFlag:!p,getCellEditableState:q,setCellValue:J,getCellValueForExport:H,alwaysVisibleFlag:!0,width:"15%"},itfCtxName:{dataIndex:"itfCtxName",text:s.itfCtxName,editableFlag:!p,getCellEditableState:q,setCellValue:J,visibleFlag:!1,width:"auto"},itfSystemType:{dataIndex:"itfSystemType",text:s.itfSystemType,getCellValue:V,editableFlag:!1,width:"auto"},itfUserType:{dataIndex:"itfUserType",text:s.itfUserType,editableFlag:!p,getCellEditableState:q,setCellValue:J,width:"auto",compareFunction:T,getCellKPIColor:G,getCellTypeRepresentation:N,editionPolicy:"EditionOnOver",getCellValueForExport:H},itfAnalysis:{dataIndex:"itfAnalysis",text:s.itfAnalysis,editableFlag:!p,getCellEditableState:q,setCellValue:J,width:"auto",compareFunction:k,getCellKPIColor:W,getCellTypeRepresentation:U,editionPolicy:"EditionOnOver",getCellValueForExport:H},itfPrevAnalysis:{dataIndex:"itfPrevAnalysis",text:s.itfPrevAnalysis,getCellValue:X,editableFlag:!1,width:"auto"},itfLblInst1Path:{dataIndex:"itfLblInst1Path",text:s.itfLblInst1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Path:{dataIndex:"itfLblInst2Path",text:s.itfLblInst2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Path:{dataIndex:"itfLblRef1Path",text:s.itfLblRef1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2Path:{dataIndex:"itfLblRef2Path",text:s.itfLblRef2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst1:{dataIndex:"itfLblFstInst1",text:s.itfLblFstInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1:{dataIndex:"itfLblInst1",text:s.itfLblInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst2:{dataIndex:"itfLblFstInst2",text:s.itfLblFstInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2:{dataIndex:"itfLblInst2",text:s.itfLblInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstType1:{dataIndex:"itfLblFstType1",text:s.itfLblFstType1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef1:{dataIndex:"itfLblFstRef1",text:s.itfLblFstRef1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1:{dataIndex:"itfLblRef1",text:s.itfLblRef1,editableFlag:!1,width:"auto"},itfLblFstType2:{dataIndex:"itfLblFstType2",text:s.itfLblFstType2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef2:{dataIndex:"itfLblFstRef2",text:s.itfLblFstRef2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2:{dataIndex:"itfLblRef2",text:s.itfLblRef2,editableFlag:!1,width:"auto"},itfFeatName1:{dataIndex:"itfFeatName1",text:s.itfFeatName1,editableFlag:!1,width:"auto",visibleFlag:!1},itfFeatName2:{dataIndex:"itfFeatName2",text:s.itfFeatName2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape1:{dataIndex:"itfLblShape1",text:s.itfLblShape1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2:{dataIndex:"itfLblShape2",text:s.itfLblShape2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1Owner:{dataIndex:"itfLblInst1Owner",text:s.itfLblInst1Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Owner:{dataIndex:"itfLblInst2Owner",text:s.itfLblInst2Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Owner:{dataIndex:"itfLblRef1Owner",text:s.itfLblRef1Owner,editableFlag:!1,width:"auto"},itfLblRef2Owner:{dataIndex:"itfLblRef2Owner",text:s.itfLblRef2Owner,editableFlag:!1,width:"auto"},itfLblShape1Owner:{dataIndex:"itfLblShape1Owner",text:s.itfLblShape1Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2Owner:{dataIndex:"itfLblShape2Owner",text:s.itfLblShape2Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1OwnerID:{dataIndex:"itfLblInst1OwnerID",text:s.itfLblInst1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2OwnerID:{dataIndex:"itfLblInst2OwnerID",text:s.itfLblInst2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity1Ref:{dataIndex:"itfLblMaturity1Ref",text:s.itfLblMaturity1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity2Ref:{dataIndex:"itfLblMaturity2Ref",text:s.itfLblMaturity2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization1Ref:{dataIndex:"itfLblOrganization1Ref",text:s.itfLblOrganization1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization2Ref:{dataIndex:"itfLblOrganization2Ref",text:s.itfLblOrganization2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace1Ref:{dataIndex:"itfLblCollabSpace1Ref",text:s.itfLblCollabSpace1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace2Ref:{dataIndex:"itfLblCollabSpace2Ref",text:s.itfLblCollabSpace2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1OwnerID:{dataIndex:"itfLblRef1OwnerID",text:s.itfLblRef1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2OwnerID:{dataIndex:"itfLblRef2OwnerID",text:s.itfLblRef2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision1Ref:{dataIndex:"itfLblRevision1Ref",text:s.itfLblRevision1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision2Ref:{dataIndex:"itfLblRevision2Ref",text:s.itfLblRevision2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity1Shape:{dataIndex:"itfLblMaturity1Shape",text:s.itfLblMaturity1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity2Shape:{dataIndex:"itfLblMaturity2Shape",text:s.itfLblMaturity2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization1Shape:{dataIndex:"itfLblOrganization1Shape",text:s.itfLblOrganization1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization2Shape:{dataIndex:"itfLblOrganization2Shape",text:s.itfLblOrganization2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace1Shape:{dataIndex:"itfLblCollabSpace1Shape",text:s.itfLblCollabSpace1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace2Shape:{dataIndex:"itfLblCollabSpace2Shape",text:s.itfLblCollabSpace2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape1OwnerID:{dataIndex:"itfLblShape1OwnerID",text:s.itfLblShape1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2OwnerID:{dataIndex:"itfLblShape2OwnerID",text:s.itfLblShape2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision1Shape:{dataIndex:"itfLblRevision1Shape",text:s.itfLblRevision1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision2Shape:{dataIndex:"itfLblRevision2Shape",text:s.itfLblRevision2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfQuantifier:{dataIndex:"itfQuantifier",text:s.itfQuantifier,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:O,getCellSemantics:B,getCellValueForExport:z},itfPenVol:{dataIndex:"itfPenVol",text:s.itfPenVol,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:O,getCellSemantics:B,getCellValueForExport:z},itfPenVec:{dataIndex:"itfPenVec",text:s.itfPenVec,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:O,getCellSemantics:B,getCellValueForExport:z},itfMinDist:{dataIndex:"itfMinDist",text:s.itfMinDist,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:O,getCellSemantics:B,getCellValueForExport:z},itfDescription:{dataIndex:"itfDescription",text:s.itfDescription,editableFlag:!p,getCellEditableState:q,setCellValue:J,width:"auto"},itfTolerance:{dataIndex:"itfTolerance",text:s.itfTolerance,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:O,getCellSemantics:B,getCellValueForExport:z},itfOwner:{dataIndex:"itfOwner",text:s.itfOwner,editableFlag:!1,width:"auto"},itfOwnerID:{dataIndex:"itfOwnerID",text:s.itfOwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfCurrent:{dataIndex:"itfCurrent",text:s.itfCurrent,editableFlag:!1,width:"auto",visibleFlag:!1}},t=w||["itfLblSlide","tree","itfCtxName","itfSystemType","itfUserType","itfAnalysis","itfPrevAnalysis","itfLblInst1Path","itfLblInst2Path","itfLblRef1Path","itfLblRef2Path","itfLblFstInst1","itfLblInst1","itfLblFstInst2","itfLblInst2","itfLblFstType1","itfLblFstRef1","itfLblRef1","itfLblFstType2","itfLblFstRef2","itfLblRef2","itfFeatName1","itfFeatName2","itfLblShape1","itfLblShape2","itfLblInst1Owner","itfLblInst2Owner","itfLblRef1Owner","itfLblRef2Owner","itfLblShape1Owner","itfLblShape2Owner","itfLblInst1OwnerID","itfLblInst2OwnerID","itfLblMaturity1Ref","itfLblMaturity2Ref","itfLblOrganization1Ref","itfLblOrganization2Ref","itfLblCollabSpace1Ref","itfLblCollabSpace2Ref","itfLblRef1OwnerID","itfLblRef2OwnerID","itfLblRevision1Ref","itfLblRevision2Ref","itfLblMaturity1Shape","itfLblMaturity2Shape","itfLblOrganization1Shape","itfLblOrganization2Shape","itfLblCollabSpace1Shape","itfLblCollabSpace2Shape","itfLblShape1OwnerID","itfLblShape2OwnerID","itfLblRevision1Shape","itfLblRevision2Shape","itfQuantifier","itfPenVol","itfPenVec","itfMinDist","itfDescription","itfTolerance","itfOwner","itfOwnerID","itfCurrent"];x&&(Object.assign(e.tree,x.tree),t.forEach(function(t){e[t]?Object.assign(e[t],x[t]):e[t]=x[t]})),o=t.map(function(t){return e[t]})}}();var t=Object.keys(g),l=t.length>0;c=new i({useAsyncPreExpand:!1,shouldAcceptDrag:function(){return l},shouldAcceptDrop:function(){return!1}});var a={identifier:m,treeDocument:c,defaultColumnDef:{width:"auto",height:80},columns:o,rowSelection:"multiple",cellSelection:{defaultValue:"none"},sortModel:[{dataIndex:"tree",sort:"asc"}],rowDragEnabledFlag:!I&&l,allowUnsafeHTMLContent:!1,cellDragEnabledFlag:!I&&l,activateAllCellsRenderedEventFlag:!0,placeholder:s.NoInterference,recId:"pimItfList",onContextualEvent:function(t){var n=[],i=t.cellInfos;if(t&&t.collectionView&&i)if(-1===i.rowID){if(-1===i.columnID)return[];var l,a=f.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID);if("tree"===a&&(a="label"),l=L.indexOf(a)>-1||"itfLblSlide"===a?"number":P.indexOf(a)>-1?"set":"stringRegexp",c.getFilterManager().getFilters().hasOwnProperty(a)){var o=c.getFilterManager().getFilters()[a];o&&o.defaultFilterModel&&(o.defaultFilterModel=[])}else c.getFilterManager().setPropertyFilterModel(a,{filterId:l});var r=(n=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!1,columnsManagement:!0,sizeColumnToFit:!0})).splice(n.length-1,1)[0];n.push({title:s.itfExpandAllRows,type:"PushItem",icon:{iconName:"flow-tree-expand-down",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){c.withTransactionUpdate(function(){c.expandAll()})}}}),n.push({title:s.itfCollapseAllRows,type:"PushItem",icon:{iconName:"flow-tree-expand-up",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){c.withTransactionUpdate(function(){c.collapseAll()})}}}),f.layout.getColumnAlwaysVisibleFlag(a)||n.push({title:s.itfHideColumn,type:"PushItem",action:{callback:function(){f.layout.setColumnVisibleFlag(f.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID),!1,{isUserInteraction:!0})}}}),n.push({type:"SeparatorItem",title:""}),I?n.push(Object.assign({},r,{id:"customView",action:{context:t.collectionView}})):n.push(r),"itfQuantifier"===f.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID)&&3===v&&n.push({title:s.itfClashVal,type:"PushItem",submenu:[{title:s.itfPenVol,type:"RadioItem",state:S?"selected":"unselected",action:{callback:function(){S||b.switchQuantifierColumnVal({isPenVolume:!0})}}},{title:s.itfPenVec,type:"RadioItem",state:S?"unselected":"selected",action:{callback:function(){S&&b.switchQuantifierColumnVal({isPenVolume:!1})}}}]})}else{if(!b.getSelectedInterferences().length)return[];var d=f.getNodesXSO().get();d.some(function(e){return e.canBeExpanded()&&(!e.isExpanded()||e.getAllDescendants().some(function(e){return e.canBeExpanded()&&!e.isExpanded()}))})&&n.push({title:s.itfExpandAll,type:"PushItem",icon:{iconName:"flow-tree-expand-down",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){c.withTransactionUpdate(function(){f.getNodesXSO().get().forEach(function(e){e.expandAll()})})}}}),d.some(function(e){return e.canBeExpanded()&&(e.isExpanded()||e.getAllDescendants().some(function(e){return e.canBeExpanded()&&e.isExpanded()}))})&&n.push({title:s.itfCollapseAll,type:"PushItem",icon:{iconName:"flow-tree-expand-up",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){c.withTransactionUpdate(function(){f.getNodesXSO().get().forEach(function(e){e.collapseAll()})})}}}),p||I||(n=n.concat(b.onContextualEvent()))}if(I&&t&&t.collectionView&&i){var u={isHeaderMenu:-1===i.rowID,isRowMenu:i.rowID>=0},g=e.clone(n,!1);b.contextualEvent(u,g),n=[]}return n}};if(t.forEach(function(e){a[e]=g[e]}),g=null,(f=new n(a)).getContent().addClassName("pimWebTreeListView"),f.getTypeRepresentationFactory().registerTypeRepresentations(M),window.__karma__&&(f.layout.addCellCoordinates=!0),I){var r=new e.createElement("div");f.inject(r),h.appendChild(r)}else h.content=f;f.addEventListener("DSpointerhit",function(e,t){var n=t&&t.columnID>=0?f.columns[t.columnID].dataIndex:null;if("itfLblSlide"===n){var i=t.nodeModel.options.grid.itfuid;b.onSelect({idsSelected:[i],cellClickedIdx:"itfLblSlide",idCellClicked:i})}n&&h&&h.isSmallWidth&&h.isSmallWidth()&&(p||"itfAnalysis"!==n&&"itfUserType"!==n&&"itfDescription"!==n&&"itfMetricName"!==n)&&h.collapsePanel()}),c.getFilterManager().subscribe("filterModelChange",function(){setTimeout(function(){!function(){let t=e.clone(c.getFilterManager().filterModel,!0);t=Object.keys(t).reduce((e,n)=>(t[n].filterModel&&Array.isArray(t[n].filterModel)&&t[n].filterModel.length>0&&(e[n]=t[n]),e),{}),localStorage.setItem(m,JSON.stringify({filterModel:t}))}(),b.ensureSelectedLineVisibility()},10)});var d=f.getNodesXSO();d.options.getElementID=void 0,d.onPostAdd(Y),d.onPostRemove(Z),c.getModelEvents().subscribe({event:"sortChildren"},function(){setTimeout(function(){b.ensureSelectedLineVisibility()},0)}),c.onPostCollapse(function(){b.updateDataGridView({updateCellLayout:!0,freePool:!0})}),c.onPostExpand(function(){b.updateDataGridView({updateCellLayout:!0,freePool:!0})})}()}})}),define("DS/PIMwebUX/PIMwebItfListUI",["UWA/Core","UWA/Class","DS/DataGridView/DataGridView","DS/Tree/TreeDocument","DS/TreeModel/TreeNodeModel","DS/PIMwebUX/PIMwebUnitsUX","i18n!DS/PIMwebUX/assets/nls/PIMwebItfListUI","css!DS/PIMwebUX/assets/css/PIMwebItfListUI"],function(e,t,n,i,l,a,o){"use strict";var s="NotAnalyzed",r="OK",d="KO",c="Clash",u="Contact",f="Clearance",p="NoInterference",g="Undefined",h="rgb(204, 9, 47)",b="rgb(255, 138, 46)",m="rgb(111, 188, 75)",I="rgb(0, 157, 219)",w="rgb(254, 224, 0)",x="rgb(111, 188, 75)",C="rgb(204, 9, 47)",S="rgb(254, 224, 0)",v={iconName:"presentation-slide",fontIconFamily:window.WUXManagedFontIcons.Font3DS},F=["itfQuantifier","itfPenVec","itfMinDist","itfPenVol","itfTolerance"],y={EnumItfType:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus1:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus2:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}}};y.EnumItfType.semantics.possibleValues[o.Clash]=c,y.EnumItfType.semantics.possibleValues[o.Contact]=u,y.EnumItfType.semantics.possibleValues[o.Clearance]=f,y.EnumItfType.semantics.possibleValues[o.NoInterference]=p,y.EnumItfType.semantics.possibleValues[o.Undefined]=g,y.EnumItfStatus1.semantics.possibleValues[o.itfOK]=r,y.EnumItfStatus1.semantics.possibleValues[o.itfKO]=d,y.EnumItfStatus1.semantics.possibleValues[o.itfToAnalyze]=s,y.EnumItfStatus2.semantics.possibleValues[o.itfOK]=r,y.EnumItfStatus2.semantics.possibleValues[o.itfKO]=d,y.EnumItfStatus2.semantics.possibleValues[o.itfToReAnalyze]=s;var L,P,M,E,R,D=function(e,t){var n=o[e],i=o[t];return n===i?0:n<i?-1:1},O=function(e,t,n,i){return L=n.options.grid.itfPrevAnalysis,P=i.options.grid.itfPrevAnalysis,M=t===s?""===P?"itfToAnalyze":"itfToReAnalyze":t===r?"itfOK":"itfKO",E=o[e===s?""===L?"itfToAnalyze":"itfToReAnalyze":e===r?"itfOK":"itfKO"],R=o[M],E===R?0:E<R?-1:1};function V(e,t){return e||t?e?t?e===t?0:e<t?-1:1:1:-1:0}function T(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfUserType)return"EnumItfType"}function k(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfAnalysis)return""===e.nodeModel.options.grid.itfPrevAnalysis?"EnumItfStatus1":"EnumItfStatus2"}function A(e){if(e&&-1!==e.rowID&&e.nodeModel)return e.nodeModel.options.grid.itfLblSlide?"url":void 0}function N(e){var t=e.cellModel;return t===c?h:t===u?b:t===f?m:t===p?I:t===g?w:null}function U(e){var t=e.cellModel;return t===r?x:t===d?C:t===s?S:null}function j(e,t){return e<t?-1:e>t?1:0}return t.extend({init:function(t){var d,c,u={},f=null,p=t.readOnly,g=t.cbDnD?t.cbDnD:{},h=t.parent,b=this,m="PIMwebItfListColPref"+(t.suffix?t.suffix:""),I=!1,w=t.deforder,x=t.defCols,C={},S=!0,L=0;function P(e){(e||e.length||e.volume)&&(e.length.unit&&a.length[e.length.unit]&&(C.length={val:e.length.unit,ratio:a.length[e.length.unit],decimalRW:e.length.decimalPlaceRW,decimalRO:e.length.decimalPlaceRO}),e.volume.unit&&a.volume[e.volume.unit]&&(C.volume={val:e.volume.unit,ratio:a.volume[e.volume.unit],decimalRW:e.volume.decimalPlaceRW,decimalRO:e.volume.decimalPlaceRO}),e.highExponent&&(C.highExponent=e.highExponent),e.lowExponent&&(C.lowExponent=e.lowExponent))}function M(e,t){if(!("number"!=typeof e||e<=0)){var n=t?C.volume:C.length,i=e;if(I){var l=Number((i*(t?1:.001)*n.ratio).toFixed(n.decimalRW)),a=1-Math.floor(Math.log(i)/Math.log(10)+1),o=n.decimalRW+a+C.highExponent+1;i=0!==l?l:Number((i*(t?1:.001)*n.ratio).toFixed(o))}else i&&(i=Number((i*(t?1:.001)*n.ratio).toFixed(n.decimalRO)));return i}}function E(e){if("itfLblSlide"===e)return this.grid[e]?this.grid[e]:0;if("label"===e)return this.label;if(F.indexOf(e)>-1){var t="itfPenVol"===e||S&&"itfQuantifier"===e&&"Clash"===this.grid.itfSystemType;return this.grid[e]?M(this.grid[e],t):void 0}return this.grid[e]}function R(e){if(e.nodeModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===t)return e.nodeModel.options.grid[t]?{icon:v,label:e.nodeModel.options.grid[t]}:void 0;var n="itfPenVol"===t||S&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType;return M(e.nodeModel.options.grid[t],n)}}function G(e){if(e.nodeModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);return o[e.nodeModel.options.grid[t]]||""}}function W(e){if(e.nodeModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);return o["itf"+e.nodeModel.options.grid[t]]||""}}function Q(e){if("number"==typeof e.cellModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);return{units:("itfPenVol"===t||S&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType?C.volume:C.length).val}}}function X(e){if(-1!==e.rowID&&e.cellModel)return R(e)+" "+Q(e).units}function B(e){var t="",n=f.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===n)return-1===e.rowID?o.itfLblSlide:e.nodeModel.options.grid.itfLblSlide?String(e.nodeModel.options.grid.itfLblSlide):"";if(-1!==e.rowID&&e.cellModel){if("itfUserType"===n)t=o[e.cellModel];else{var i=e.nodeModel.options.grid.itfPrevAnalysis,l=e.cellModel;t=o[l===s?""===i?"itfToAnalyze":"itfToReAnalyze":l===r?"itfOK":"itfKO"]}return t}}function z(){setTimeout(function(){f.reapplySortModel();var t=JSON.parse(localStorage.getItem(m));t&&t.filterModel&&!e.equals(t.filterModel,{})&&(c.setFilterModel({}),c.setFilterModel(t.filterModel))},10)}function K(e,t){if(!p){var n=f.columns[e.columnID].dataIndex,i=[];"tree"===n&&e.nodeModel.updateOptions({label:t}),(i=f.getTreeDocument().getSelectedNodes().filter(function(e){return e.options.grid.itfuid})).length||i.push(e.nodeModel),c.withTransactionUpdate(function(){i.forEach(function(e){var i={};i[n]=t,e.updateOptions({grid:i})})}),i.forEach(function(e){b.onCellEdit&&b.onCellEdit({id:e.options.grid.itfuid,param:"tree"===n?"itfCtxName":n,newValue:t})})}}function H(e){Array.isArray(e)&&"function"==typeof b.onSelect&&setTimeout(function(){I?b.onSelect(e):b.onSelect({idsSelected:e.map(function(e){return e.options.grid.itfuid})})},0)}function _(e){setTimeout(function(){Array.isArray(e)&&"function"==typeof b.onUnselect&&(I?b.onUnselect(e):b.onUnselect(e.map(function(e){return e.options.grid.itfuid})))},0)}function q(e){e&&(e.itfQuantifier=void 0,"Clash"===e.itfSystemType?e.itfQuantifier=S?e.itfPenVol:e.itfPenVec:"Clearance"===e.itfSystemType&&(e.itfQuantifier=e.itfMinDist))}t.isWebInWin&&(I=!0),P(e.extend({length:{unit:"mm",decimalRW:3,decimalRO:3},volume:{unit:"mm3",decimalRW:3,decimalRO:3}},t.units)),this.updateInterferences=function(e){var t=[];c.withTransactionUpdate(function(){e.forEach(function(e){u.hasOwnProperty(e.itfuid)?(q(e),u[e.itfuid].updateOptions({label:e.itfCtxName,grid:e})):t.push(e)}),function(e){if(e.length){var t=[],n=L;3!==n&&e.some(function(e){return"Clash"===e.itfSystemType&&(e.itfPenVol&&e.itfPenVec?L=3:e.itfPenVol?L=2===L?3:1:e.itfPenVec&&(L=1===L?3:2),n||(S=f&&2!==L),3===L)}),e.forEach(function(e){if(!u[e.itfuid]){q(e);var n=new l({label:e.itfCtxName,grid:e,getAttributeValueForFiltering:E});u[e.itfuid]=n,t.push(n),window.__karma__&&(n.toChangeValueForODT=K)}}),c.addRoot(t)}}(t),z()})},this.showSlideColumn=function(e){d.forEach(function(t){"itfLblSlide"===t.dataIndex&&f.layout.setColumnVisibleFlag(t.dataIndex,e,{isUserInteraction:!0})})},this.removeInterferences=function(){L=0,S=!0,f.getNodesXSO().empty(),c.empty(),u={}},this.getSelectedInterferences=function(){return f.getTreeDocument().getSelectedNodes().map(function(e){return e.options.grid.itfuid}).filter(function(e){return e})},this.getSelectedRows=function(){var e=[];return f.getNodesXSO().get().forEach(function(t){var n=f.layout.getCellsFromNodeModel(t,!0);n&&e.push(f.getCellInfosAt(n[0]).rowID)}),e.sort(j)},this.selectRows=function(e){var t=e.map(function(e){return f.model[e]});c.withTransactionUpdate(function(){f.unselectAll(),f.setActiveCell(-1,!1,!1),t.forEach(function(e){f.selectNodeModel(e,!0,!1)}),f.ensureNodeModelVisible(t[0],!1)})},this.selectRowsByUID=function(e){var t,n=this.getSelectedInterferences();if(n.length===e.length&&e.every(function(e,t){return e===n[t]}))return 1;f.unselectAll(),f.setActiveCell(-1,!1,!1),e.forEach(function(e){e&&c.search({match:function(n){n.nodeModel.options.grid.itfuid===e&&(f.selectNodeModel(n.nodeModel,!0,!1),t||(t=n.nodeModel))}})}),t&&f.ensureNodeModelVisible(t,!1)},this.getNumberOfRows=function(){return f.model.length},this.getVisibleRows=function(){if(f)return f.model.map(function(e){return e.options.grid.itfuid})},this.IsPenVolInQuantCol=function(){return S},this.toggleReadOnly=function(){c.withTransactionUpdate(function(){p=!p;var e=["tree","itfDescription","itfMetricName","itfUserType","itfAnalysis"];d.forEach(function(t){e.indexOf(t.dataIndex)>-1&&(t[f?"editableFlag":"isEditable"]=!p)})})},this.selectItf=function(e){f.getNodesXSO().empty(),e.forEach(function(e){c.search({match:function(t){e&&t.nodeModel.options.grid.itfuid===e&&(t.nodeModel.select(),f.ensureNodeModelVisible(t.nodeModel,!1))}})})},this.getRowData=function(e,t,n){var i=[],l=f.model[e].options.grid,a=f.layout.getLeafColumns();return t||(a=f.layout.getVisibleOrderedColumnsIndexes().map(function(e){return a[e]})),a.forEach(function(t){var a=n?t.text:t.dataIndex;if("function"==typeof t.getCellValueForExport){var o=f.layout.getCellIDFromCoordinates({rowID:e,columnID:f.layout.getColumnIndex(t.dataIndex)});if(void 0!==f.getCellInfosAt(o).cellModel){var s=t.getCellValueForExport(f.getCellInfosAt(o));i[a]=s||" "}}else"time"===t.typeRepresentation?i[a]=new Date(l[t.dataIndex]).toLocaleString():i[a]=l[t.dataIndex]?l[t.dataIndex]:" "}),n||(i.itfuid=l.itfuid?l.itfuid:void 0),i},this.getRowInfosFromMousePosition=function(e){var t=f.layout.getCellIDFromPositionInView(e),n=f.getCellInfosAt(t).rowID;return n>=0?b.getRowData(n,!1,!0):[]},this.ensureSelectedLineVisibility=function(){var e=f.getNodesXSO().get();e&&0!==e.length&&f.ensureNodeModelVisible(e[0],!1)},this.setUnits=P,this.exportAsCSV=function(e){return f.getAsCSV(e)},this.switchQuantifierColumnVal=function(e){S=e.isPenVolume,c.getAllDescendants().forEach(function(t){"Clash"===t.options.grid.itfSystemType&&(t.options.grid.itfQuantifier=e.isPenVolume?t.options.grid.itfPenVol:t.options.grid.itfPenVec,t.updateOptions({grid:t.options.grid}))}),z()},this.reApplyFilterAndSort=z,this.updateDataGridView=function(e){f.prepareUpdateView(),f.pushUpdateView(e,!0)},this.onSelect=null,this.onUnselect=null,this.onCellEdit=null,this.contextualEvent=null,function(){!function(){if(!d){var e={itfLblSlide:{dataIndex:"itfLblSlide",icon:v,editableFlag:!1,getCellValue:R,getCellTypeRepresentation:A,getCellValueForExport:B,compareFunction:V,pinned:"left",visibleFlag:!1,width:"50"},tree:{dataIndex:"tree",text:o.tree,editableFlag:!p,setCellValue:K,width:"15%"},itfSystemType:{dataIndex:"itfSystemType",text:o.itfSystemType,getCellValue:G,editableFlag:!1,width:"auto"},itfUserType:{dataIndex:"itfUserType",text:o.itfUserType,editableFlag:!p,setCellValue:K,width:"auto",compareFunction:D,getCellKPIColor:N,getCellTypeRepresentation:T,editionPolicy:"EditionOnOver",getCellValueForExport:B},itfAnalysis:{dataIndex:"itfAnalysis",text:o.itfAnalysis,editableFlag:!p,setCellValue:K,width:"auto",compareFunction:O,getCellKPIColor:U,getCellTypeRepresentation:k,editionPolicy:"EditionOnOver",getCellValueForExport:B},itfPrevAnalysis:{dataIndex:"itfPrevAnalysis",text:o.itfPrevAnalysis,getCellValue:W,editableFlag:!1,width:"auto"},itfLblInst1Path:{dataIndex:"itfLblInst1Path",text:o.itfLblInst1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Path:{dataIndex:"itfLblInst2Path",text:o.itfLblInst2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Path:{dataIndex:"itfLblRef1Path",text:o.itfLblRef1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2Path:{dataIndex:"itfLblRef2Path",text:o.itfLblRef2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst1:{dataIndex:"itfLblFstInst1",text:o.itfLblFstInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1:{dataIndex:"itfLblInst1",text:o.itfLblInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst2:{dataIndex:"itfLblFstInst2",text:o.itfLblFstInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2:{dataIndex:"itfLblInst2",text:o.itfLblInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstType1:{dataIndex:"itfLblFstType1",text:o.itfLblFstType1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef1:{dataIndex:"itfLblFstRef1",text:o.itfLblFstRef1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1:{dataIndex:"itfLblRef1",text:o.itfLblRef1,editableFlag:!1,width:"auto"},itfLblFstType2:{dataIndex:"itfLblFstType2",text:o.itfLblFstType2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef2:{dataIndex:"itfLblFstRef2",text:o.itfLblFstRef2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2:{dataIndex:"itfLblRef2",text:o.itfLblRef2,editableFlag:!1,width:"auto"},itfLblShape1:{dataIndex:"itfLblShape1",text:o.itfLblShape1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2:{dataIndex:"itfLblShape2",text:o.itfLblShape2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1Owner:{dataIndex:"itfLblInst1Owner",text:o.itfLblInst1Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Owner:{dataIndex:"itfLblInst2Owner",text:o.itfLblInst2Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Owner:{dataIndex:"itfLblRef1Owner",text:o.itfLblRef1Owner,editableFlag:!1,width:"auto"},itfLblRef2Owner:{dataIndex:"itfLblRef2Owner",text:o.itfLblRef2Owner,editableFlag:!1,width:"auto"},itfLblShape1Owner:{dataIndex:"itfLblShape1Owner",text:o.itfLblShape1Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2Owner:{dataIndex:"itfLblShape2Owner",text:o.itfLblShape2Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1OwnerID:{dataIndex:"itfLblInst1OwnerID",text:o.itfLblInst1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2OwnerID:{dataIndex:"itfLblInst2OwnerID",text:o.itfLblInst2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1OwnerID:{dataIndex:"itfLblRef1OwnerID",text:o.itfLblRef1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2OwnerID:{dataIndex:"itfLblRef2OwnerID",text:o.itfLblRef2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape1OwnerID:{dataIndex:"itfLblShape1OwnerID",text:o.itfLblShape1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2OwnerID:{dataIndex:"itfLblShape2OwnerID",text:o.itfLblShape2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfQuantifier:{dataIndex:"itfQuantifier",text:o.itfQuantifier,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:R,getCellSemantics:Q,getCellValueForExport:X},itfPenVol:{dataIndex:"itfPenVol",text:o.itfPenVol,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:R,getCellSemantics:Q,getCellValueForExport:X},itfPenVec:{dataIndex:"itfPenVec",text:o.itfPenVec,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:R,getCellSemantics:Q,getCellValueForExport:X},itfMinDist:{dataIndex:"itfMinDist",text:o.itfMinDist,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:R,getCellSemantics:Q,getCellValueForExport:X},itfDescription:{dataIndex:"itfDescription",text:o.itfDescription,editableFlag:!p,setCellValue:K,width:"auto"},itfTolerance:{dataIndex:"itfTolerance",text:o.itfTolerance,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:R,getCellSemantics:Q,getCellValueForExport:X},itfOwner:{dataIndex:"itfOwner",text:o.itfOwner,editableFlag:!1,width:"auto"},itfOwnerID:{dataIndex:"itfOwnerID",text:o.itfOwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfMetricName:{dataIndex:"itfMetricName",text:o.itfMetricName,editableFlag:!p,setCellValue:K,width:"auto"},itfCurrent:{dataIndex:"itfCurrent",text:o.itfCurrent,editableFlag:!1,width:"auto",visibleFlag:!1}},t=!0===I?w:["itfLblSlide","tree","itfSystemType","itfUserType","itfAnalysis","itfPrevAnalysis","itfLblInst1Path","itfLblInst2Path","itfLblRef1Path","itfLblRef2Path","itfLblFstInst1","itfLblInst1","itfLblFstInst2","itfLblInst2","itfLblFstType1","itfLblFstRef1","itfLblRef1","itfLblFstType2","itfLblFstRef2","itfLblRef2","itfLblShape1","itfLblShape2","itfLblInst1Owner","itfLblInst2Owner","itfLblRef1Owner","itfLblRef2Owner","itfLblShape1Owner","itfLblShape2Owner","itfLblInst1OwnerID","itfLblInst2OwnerID","itfLblRef1OwnerID","itfLblRef2OwnerID","itfLblShape1OwnerID","itfLblShape2OwnerID","itfQuantifier","itfPenVol","itfPenVec","itfMinDist","itfDescription","itfTolerance","itfOwner","itfOwnerID","itfMetricName","itfCurrent"];I&&(Object.assign(e.tree,x.tree),t.forEach(function(t){e[t]||(e[t]=x[t])})),d=t.map(function(t){return e[t]})}}();var t=Object.keys(g),l=t.length>0;c=new i({useAsyncPreExpand:!1,shouldAcceptDrag:function(){return l},shouldAcceptDrop:function(){return!1}});var a={identifier:m,treeDocument:c,defaultColumnDef:{width:"auto",height:80},columns:d,rowSelection:"multiple",cellSelection:{defaultValue:"none"},sortModel:[{dataIndex:"tree",sort:"asc"}],rowDragEnabledFlag:!I&&l,allowUnsafeHTMLContent:!1,cellDragEnabledFlag:!I&&l,activateAllCellsRenderedEventFlag:!0,placeholder:o.NoInterference,recId:"pimItfList",onContextualEvent:function(t){var n=[],i=t.cellInfos;if(!I&&t&&t.collectionView&&i){if(-1===i.rowID){var l=(n=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!1,columnsManagement:!0,sizeColumnToFit:!0})).splice(n.length-1,1)[0];n.push({type:"PushItem",title:o.itfHideColumn,action:{callback:function(){var e=f.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID);f.layout.setColumnVisibleFlag(e,!1,{isUserInteraction:!0})}}});var a,s=c.getFilterManager().filterModel,r=f.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID);"tree"===r&&(r="label"),a=Boolean(s[r]),n.push({type:"PushItem",title:a?o.itfRemoveFilter:o.itfAddFilter,action:{callback:a?function(){delete(s=e.extend({},s))[r],c.setFilterModel(s)}:function(){var e=F.indexOf(r)>-1||"itfLblSlide"===r?"number":"stringRegexp";c.getFilterManager().setPropertyFilterModel(r,{filterId:e})}}}),n.push({type:"SeparatorItem",title:""}),n.push(l),"itfQuantifier"===f.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID)&&3===L&&n.push({title:o.itfClashVal,type:"PushItem",submenu:[{title:o.itfPenVol,type:"RadioItem",state:S?"selected":"unselected",action:{callback:function(){S||b.switchQuantifierColumnVal({isPenVolume:!0})}}},{title:o.itfPenVec,type:"RadioItem",state:S?"unselected":"selected",action:{callback:function(){S&&b.switchQuantifierColumnVal({isPenVolume:!1})}}}]})}else if(!p){if(!b.getSelectedInterferences().length)return[];n=b.onContextualEvent()}}else{if(!b.getSelectedInterferences().length&&i.rowID>=0)return[];var d={column:{isPenVol:S,isQuantiColSubMenu:3===L},rows:[]};b.contextualEvent(t,d)}return n}};if(t.forEach(function(e){a[e]=g[e]}),g=null,(f=new n(a)).getContent().addClassName("pimWebTreeListView"),f.getTypeRepresentationFactory().registerTypeRepresentations(y),window.__karma__&&(f.layout.addCellCoordinates=!0),I){var s=new e.createElement("div");f.inject(s),h.appendChild(s)}else h.content=f;f.addEventListener("DSpointerhit",function(e,t){var n=t&&t.columnID>=0?f.columns[t.columnID].dataIndex:null;if("itfLblSlide"===n){var i=t.nodeModel.options.grid.itfuid;b.onSelect({idsSelected:[i],cellClickedIdx:"itfLblSlide",idCellClicked:i})}n&&h&&h.isSmallWidth&&h.isSmallWidth()&&(p||"itfAnalysis"!==n&&"itfUserType"!==n&&"itfDescription"!==n&&"itfMetricName"!==n)&&h.collapsePanel()}),c.getFilterManager().subscribe("filterModelChange",function(){!function(){let t=e.clone(c.getFilterManager().filterModel,!0);t=Object.keys(t).reduce((e,n)=>(t[n].filterModel&&Array.isArray(t[n].filterModel)&&t[n].filterModel.length>0&&(e[n]=t[n]),e),{}),localStorage.setItem(m,JSON.stringify({filterModel:t}))}(),setTimeout(function(){b.ensureSelectedLineVisibility()},0)});var r=f.getNodesXSO();r.options.getElementID=void 0,r.onPostAdd(H),r.onPostRemove(_),c.getModelEvents().subscribe({event:"sortChildren"},function(){setTimeout(function(){b.ensureSelectedLineVisibility()},0)})}()}})}),define("DS/PIMwebUX/PIMwebIsrPanelContextTab",["UWA/Core","UWA/Class","DS/Controls/Button","DS/Controls/LineEditor","DS/Controls/ComboBox","DS/Controls/Toggle","DS/CoreEvents/Events","DS/PIMwebUX/PIMwebIsrContextGroupView","DS/WebappsUtils/WebappsUtils","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelContextTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,n,i,l,a,o,s,r,d){"use strict";return t.extend({init:function(t){if(t){var a=this;a.productContext={},a.groups=[];var r,c,u,f,p,g,h,b,m,I,w,x,C,S,v,F=!!t.readOnly&&t.readOnly,y=t.parent,L=t.dialog,P=t.ctrl?t.ctrl:null,M=t.type,E=t.isNonPersistIsr,R=t.contextInfo?t.contextInfo:null,D=t.pad3DViewer,O=[],V=[],T=0,k={},A=null,N=!1;P&&(O=P.getAddedVPMRefRoots()),O.length&&P?P.getLoadedVPMRefRootData(O).then(function(e){(V=e).length&&Y()}):Y(),this.getContextInfo=function(){var e="betweenAllComponents";return u&&(u.value===d.isrBetweenAllComponents?e="betweenAllComponents":u.value===d.isrInsideGroups?e="insideGroups":u.value===d.isrGroupsAgainstContext?e="groupsAgainstContext":u.value===d.isrGroupsAgainstGroups&&(e="groupsAgainstGroups")),{ProductContext:a.productContext,FilterContext:k,Config:e,Groups:function(){for(var e=[],t=0;t<a.groups.length;t++)e.push(a.groups[t].getGroupInfo());return e}()}},this.createGroupViewWithInfo=function(e,t){q(e,t)},this.addInfoInGroup=function(e,t){!function(e,t){if(e&&e.model){for(var n=0;n<a.groups.length;n++)a.groups[n].id===e.id&&a.groups[n].addInfoInGroup(t);X()}}(e,t)},this.disableTab=function(){J()}}function U(){"customFacetMode"===M||E||(a.productContext&&Object.keys(a.productContext).length?(w.hide(),o.publish({event:"onContextInfoChange",data:"ContextInfoSufficient"})):(w.show(),o.publish({event:"onContextInfoChange",data:"ContextInfoInsufficient"})))}function j(e){if(e&&0!==e.length&&e[0]!==A){var t=[];if(A){for(var n=0;n<r.elementsList.length;n++)r.elementsList[n]!==A.alias&&t.push(r.elementsList[n]);A=null}else t=r.elementsList;if(P)-1===P.getLoadedRoots().indexOf(e[0].id)&&(N=!0,A=e[0]);-1===t.indexOf(e[0].alias)&&t.push(e[0].alias),r.elementsList=[],r.elementsList=t.map(function(e){return e}),r.value=e[0].alias,r.selectedIndex=t.indexOf(e[0].alias),N=!1,f&&(f.disabled=!1),1===r.elementsList.length&&(r.disabled=!0),U()}}function G(e){e&&0!==e.length&&(k=e[0],c.value=k.alias,p&&(p.disabled=!1))}function W(){k={},c.value="",p&&(p.disabled=!0)}function Q(){a.groups.splice(0,a.groups.length),T=0,o.unsubscribe(v),v=void 0,m.innerHTML=d.isrCtxNoGroupDefine,x.show()}function X(){!function(){for(var e=0;e<a.groups.length;e++)if(a.groups[e].isEmpty)return!1;return!0}()?((u.value===d.isrInsideGroups||u.value===d.isrGroupsAgainstContext)&&a.groups.length>=1||u.value===d.isrGroupsAgainstGroups&&a.groups.length>=2||u.value===d.isrBetweenAllComponents?x.hide():x.show(),o.publish({event:"onGroupInfoChange",data:"GroupInfoInsufficient"})):(u.value===d.isrInsideGroups||u.value===d.isrGroupsAgainstContext)&&a.groups.length>=1||u.value===d.isrGroupsAgainstGroups&&a.groups.length>=2||u.value===d.isrBetweenAllComponents?(x.hide(),o.publish({event:"onGroupInfoChange",data:"GroupInfoSufficient"})):(x.show(),o.publish({event:"onGroupInfoChange",data:"GroupInfoInsufficient"}))}function B(){for(v=o.subscribe({event:"onAllContextGroupRemoved"},Q);a.groups.length;)a.groups[a.groups.length-1].removeGroupView();o.publish({event:"onAllContextGroupRemoved"}),X()}function z(){N?a.productContext=A:r.value&&""!==r.value&&(A&&A.alias===r.value?a.productContext=A:(A&&A.alias!==r.value&&(A=null,r.elementsList=V.map(function(e){return e.alias})),V.map(function(e){r.value===e.alias&&(a.productContext=e,e.filterAlias?G([{id:e.filterId,alias:e.filterAlias,type:e.filterType,icon:e.filterIcon}]):c.value="",f&&(f.disabled=!1))}))),1===r.elementsList.length&&(r.disabled=!0),U();for(var e=!0,t=0;t<V.length;t++){var n=V[t];if(r.value===n.alias&&c.value===n.filterAlias){e=!1;break}}e&&W(),B()}function K(e){for(var t=0;t<a.groups.length;t++)if(a.groups[t]===e)return a.groups.splice(t,1),0===a.groups.length?(T=0,m.innerHTML=d.isrCtxNoGroupDefine,x.show()):m.innerHTML=a.groups.length.toString().concat(" ",a.groups.length>1?d.isrCtxGroupsDefined:d.isrCtxGroupDefined),void X()}function H(e){for(var t=0;t<a.groups.length;t++)a.groups[t].id===e.id&&(a.groups[t]=e);X()}function _(e){var t={htmlParent:b,parentTab:a,groupTitle:"Group",dialog:L,pad3DViewer:D,productContext:a.productContext,ctrl:P,id:++T,readOnly:F};e&&(t.isFilter=e);var n=new s(t);a.groups.push(n),m.innerHTML=a.groups.length.toString().concat(" ",a.groups.length>1?d.isrCtxGroupsDefined:d.isrCtxGroupDefined),o.subscribe({event:"onEmptyGroup"},H),o.subscribe({event:"onFilterAddedInGroup"},H),o.subscribe({event:"onElemAddedInGroup"},H),o.subscribe({event:"onGroupViewCreated"},H),o.subscribe({event:"onContextGroupRemoved"},K),X()}function q(e,t){_(t),a.groups[a.groups.length-1].addInfoInGroup(e),X()}function J(){for(var e=S.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].style.userSelect="none",e[t].setAttribute("disabled",!0),e[t].style.pointerEvents="none",(e[t].hasClassName("fonticon-product")||e[t].hasClassName("fonticon-filter")||e[t].hasClassName("fonticon-remove")||e[t].hasClassName("fonticon-trash"))&&e[t].getParent().addClassName("disabled")}function Y(){var s,v,L,D;S=e.createElement("div",{class:"PIMwebIsrPanelContextTabContent"}).inject(y),E||(!function(){var i=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebFirstTitle"}).inject(S),a=e.createElement("div").inject(i);(I=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(a)).innerHTML=d.isrCtxProduct,I.setStyles({marginRight:"5px"}),w=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(a),e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(w),w.hide();var o=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(i);(r=new l({elementsList:V.map(function(e){return e.alias}),enableSearchFlag:!1,placeholder:d.isrSelectProductCtx})).inject(o),r.elements.container.setStyles({width:"100%"}),r.addEventListener("change",function(){z()}),1===r.elementsList.length&&(r.disabled=!0),"Create"===t.type&&new n({icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){P&&P.searchProducts().then(function(e){j(e)})}}).inject(o)}(),s=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(S),v=e.createElement("div").inject(s),L=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(v),D=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(s),L.innerHTML=d.isrCtxFilter,(c=new i({disabled:!0,selectAllOnFocus:!0,autoCommitFlag:!0,placeholder:d.isrSelectFilterCtx}).inject(D)).elements.container.setStyles({width:"100%"}),c.elements.container.childNodes[0].setStyles({width:"100%"}),F||(p=new n({disabled:!0,icon:{iconName:"remove",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){W()}}).inject(D),f=new n({disabled:!0,icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){P&&P.searchFilters(a.productContext.id).then(function(e){G(e)})}}).inject(D)),r.value&&""!==r.value&&V.map(function(e){r.value===e.alias&&(a.productContext=e,e.filterAlias?G([{id:e.filterId,alias:e.filterAlias,type:e.filterType,icon:e.filterIcon}]):c.value="",f&&(f.disabled=!1))}),U()),function(){var t=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebGroupHdrSection"}).inject(S),i=e.createElement("div").inject(t);(C=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(i)).innerHTML=d.isrCtxGroups,C.setStyles({marginRight:"5px"}),x=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(i),e.createElement("span",{class:"PIMwebIsrPanelLabel wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(x),x.hide();var o=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(t),s=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(o);s.innerHTML=d.isrCtxLblCheck,s.setStyles({marginRight:"5px",fontWeight:"normal"}),(u=new l({elementsList:[d.isrInsideGroups,d.isrGroupsAgainstGroups,d.isrGroupsAgainstContext,d.isrBetweenAllComponents],enableSearchFlag:!1,value:d.isrBetweenAllComponents,displayStyle:"normal"})).inject(o),u.elements.container.setStyles({width:"90%"}),u.addEventListener("change",function(){u.value===d.isrInsideGroups||u.value===d.isrGroupsAgainstGroups||u.value===d.isrGroupsAgainstContext?(h.inject(g),m.show()):(m.hide(),B(),h.remove()),X()});var r=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(t);if(e.createElement("div").inject(r).setStyles({width:"10%"}),(m=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(r)).setStyles({width:"90%",fontWeight:"normal"}),m.hide(),g=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebGroupsMainSection"}).inject(S),h=e.createElement("div"),m.innerHTML=d.isrCtxNoGroupDefine,b=e.createElement("div").inject(h),!F){var c=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(h);new n({label:d.isrCtxAddNewGroup,icon:{iconName:"group-add",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){_()}}).inject(c).elements.container.setStyles({marginRight:"5px",paddingLeft:"5px",paddingRight:"5px"}),new n({label:d.isrCtxAddMoreGroups,icon:{iconName:"group-add",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){P&&P.addMoreGroups(a.productContext.id)}}).inject(c).elements.container.setStyles({marginRight:"5px",paddingLeft:"5px",paddingRight:"5px"}),new n({label:d.isrCtxDeleteAllGroups,icon:{iconName:"group-delete ",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){B()}}).inject(c).elements.container.setStyles({marginRight:"0px",paddingLeft:"5px",paddingRight:"5px"})}}(),"Create"!==M&&R&&(!function(e){if(e&&(E||(e.ProductContext&&j([e.ProductContext]),r.disabled=!0,e.FilterContext&&G([e.FilterContext])),"betweenAllComponents"===e.Config?u.value=d.isrBetweenAllComponents:"insideGroups"===e.Config?u.value=d.isrInsideGroups:"groupsAgainstContext"===e.Config?u.value=d.isrGroupsAgainstContext:"groupsAgainstGroups"===e.Config&&(u.value=d.isrGroupsAgainstGroups),e.Groups))for(var t=0;t<e.Groups.length;t++)e.Groups[t].Elements&&q(e.Groups[t].Elements,e.Groups[t].isFilter)}(R),E||o.publish({event:"onContextTabComplete"})),F&&J()}}})}),define("DS/PIMwebUX/PIMwebIsrPanelView",["UWA/Core","UWA/Class","DS/PIMwebUX/PIMwebIsrPanelIsrTab","DS/PIMwebUX/PIMwebIsrPanelContextTab","DS/PIMwebUX/PIMwebIsrPanelSpecTab","DS/Controls/Button","DS/Controls/Tab","DS/Controls/LineEditor","DS/Controls/ComboBox","DS/Controls/ButtonGroup","DS/WebappsUtils/WebappsUtils","DS/CoreEvents/Events","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelView","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,n,i,l,a,o,s,r,d,c,u,f){"use strict";return t.extend({init:function(t){var a=e.createElement("div",{class:"PIMwebIsrPanelMainDiv"});t.isWeb?t.parent.content=a:t.parent.appendChild(a);var s,r,d,c,p,g=t.type,h=t.pad3DViewer,b=t.parent,m=t.ctrl,I=!!t.isNonPersistIsr&&t.isNonPersistIsr,w=!!t.readOnly&&t.readOnly,x=t.isrAlreadyLoaded,C=-1,S=-1,v=-1,F=null,y=[];function L(e){C<0||!F.tabBar.buttonGroup.getButton(C)||(F.tabBar.buttonGroup.getButton(C).label=e)}"Create"!==g?(c=t.contextInfo,p=t.specInfo,S=0,v=1,y=["6w-what","6w-how"]):(C=0,S=1,v=2,y=["interference-simulation","6w-what","6w-how"]),b.addEventListener("stopResize",function(){F.tabPanelContainer.setStyles({width:b.width-20+"px",height:b.height-90+"px"})});var P,M,E,R,D,O=e.createElement("div",{class:"PIMwebIsrPanelTabSection"}).inject(a);(F=new o({displayStyle:"strip"})).tabBar.pinFlag=!1,F.tabPanelContainer.setStyles({width:b.width-20+"px",height:b.height-90+"px",overflow:"auto"}),"Create"===g&&(u.subscribe({event:"onIsrTypeInitDone"},function(e){L(e),u.unsubscribe({event:"onIsrTypeInitDone"})}),F.add({label:f.isrTabTitle,content:(P=e.createElement("div",{class:"PIMwebIsrPanelIsrTab"}),s=new n({type:g,parent:P,pad3DViewer:h,dialog:b,ctrl:m}),P),icon:{iconName:"interference-simulation",fontIconFamily:WUXManagedFontIcons.Font3DS}})),F.add({label:f.contextTabTitle,content:(M=e.createElement("div",{class:"PIMwebIsrPanelContextTab"}),E={type:g,parent:M,pad3DViewer:h,dialog:b,ctrl:m,readOnly:w,isNonPersistIsr:I},"Create"!==g&&(E.contextInfo=c),r=new i(E),M),icon:{iconName:"6w-what",fontIconFamily:WUXManagedFontIcons.Font3DS}}),F.add({label:f.specTabTitle,content:(R=e.createElement("div",{class:"PIMwebIsrPanelSpecTab"}),D={type:g,parent:R,pad3DViewer:h,dialog:b,ctrl:m,readOnly:w,isNonPersistIsr:I},"Create"!==g&&(D.specInfo=p),d=new l(D),R),icon:{iconName:"6w-how",fontIconFamily:WUXManagedFontIcons.Font3DS}}),F.inject(O),F.value=[0],F.tabBar.centeredFlag=!1;var V=e.createElement("div",{id:"Footer"}).inject(F.tabPanelContainer);if(V.innerHTML="                                                                                         ",V.setStyles({color:"#FFFFFF","font-weight":"bold","font-style":"italic",margin:"0","margin-top":"35px"}),"Create"===g&&x){var T=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(F.tabPanelContainer);T.innerHTML=f.warningMessage,T.setStyles({color:"#e87b00","font-weight":"normal","font-style":"italic",margin:"0","margin-top":"10px"}),b.height=b.height+15,b.minHeight=b.minHeight+15}function k(e,t){if(!(e<0)&&F.tabBar.buttonGroup.getButton(e)){var n=t?y[e]:"required";F.tabBar.buttonGroup.getButton(e).icon={iconName:n,fontIconFamily:WUXManagedFontIcons.Font3DS},t||F.tabBar.buttonGroup.getButton(e).elements.button.getChildren()[0].getChildren()[0].addClassName("PIMwebInvalidIcon")}}this.getIsrInfo=function(){if(s)return s.getIsrInfo()},this.getContextInfo=function(){return r.getContextInfo()},this.getSpecInfo=function(){return d.getSpecInfo()},this.setIsrTabValidity=function(e){k(C,e)},this.setContextTabValidity=function(e){k(S,e)},this.setSpecTabValidity=function(e){k(v,e)},this.setIsrTitleValidity=function(e){s&&s.setIsrTitleValidity(e)},this.checkContextInfoValidity=function(){var e;e=r.getContextInfo(),Object.keys(e.ProductContext).length||k(S,!1)},this.writePIMwebIsrPrefs=function(){var e=d.getPIMwebIsrSpecPrefs(),t={},n={};s&&(t=s.getPIMwebIsrTabPrefs()),localStorage.getItem("PIMwebIsrSpecs")&&(n=JSON.parse(localStorage.getItem("PIMwebIsrSpecs")));var i=Object.assign(n,e,t);localStorage.setItem("PIMwebIsrSpecs",JSON.stringify(i))},this.createGroupViewWithInfo=function(e){r.createGroupViewWithInfo(e)},this.addInfoInGroup=function(e,t){r.addInfoInGroup(e,t)},this.setIsrTabTitle=function(e){L(e)},this.disableAllTabs=function(){r&&r.disableTab(),d&&d.disableTab()},this.destroy=function(){u.unsubscribe({event:"onIsrTypeInitDone"}),s=d=r=null,h.getFrameWindow().getContextualUIManager().activateContextualBarOnLeftClic()}}})});