define("DS/CfgResizableTable/CfgResizableTable",["DS/ENOXSplitViewVertical/js/ENOXSplitViewVertical","css!DS/CfgResizableTable/CfgResizableTable.css","css!DS/CfgResizableTable/CfgResizableTable_ellipsis.css","css!DS/UIKIT/UIKIT.css"],function(t,e,s){"use strict";var n=function(){};return n.prototype.init=function(e,i,s,n){this._treeListView=i,this._jsonModel=e,this._privateChannel=s,this._splitViewVertical=new t,console.log("nbtop");var l=50*this._jsonModel.title_columns.length+5,o={originalTop:l,sizeType:"px",modelEvents:s,resizable:!0,withoverflowhidden:!0};this._splitViewVertical.init(o),this._privateChannel.publish({event:"splitview-vertical-set-max-top-size",data:l}),this._rightColumnsWidth=[],this._leftColumnsWidth=[],this._options={},this._options.resizable=!1!==n.resizable&&!0!==n.resizable||n.resizable,this._options.classification=(!1===n.classification||!0===n.classification)&&n.classification,this._options.cell_height=n.cell_height?n.cell_height:50,this._options.cell_width=n.cell_width?n.cell_width:110,this._options.cell_minwidth=n.cell_minwidth?n.cell_minwidth:50,this._options.cell_maxwidth=n.cell_maxwidth?n.cell_maxwidth:300,this._initDivs()},n.prototype._initDivs=function(){this._container=document.createElement("div"),this._container.classList.add("cfg-resizable-table"),this._arrayTopRightResizer=[],this._arrayTopRightCells=[],this._arrayLeftCells=[],this._arrayTopLeftResizer=[],this._generateTopLeftHeader(),this._generateTopRightHeader(),this._generateBotLeftHeader(),this._generateBotRightContainer(),this._resizeLeftAndRight(2*this._options.cell_width),this._initScrollerSync(),this._splitViewVertical.inject(this._container),this._splitViewVertical.getTop().appendChild(this._topLeftContainer),this._splitViewVertical.getTop().appendChild(this._topRightContainer),this._splitViewVertical.getBot().appendChild(this._botLeftContainer),this._splitViewVertical.getBot().appendChild(this._botRightContainer),this._container.querySelector(".bot-container").style.maxHeight=50*this._jsonModel.lines.length+17+"px"},n.prototype.inject=function(t){t.appendChild(this._container)},n.prototype.destroy=function(){},n.prototype._generateTopLeftHeader=function(){this._topLeftContainer=document.createElement("div"),this._topLeftContainer.classList.add("mr-top-left"),this._topLeftTable=document.createElement("div"),this._topLeftContainer.appendChild(this._topLeftTable),this._topLeftTable.classList.add("mr-top-left-table");var t=0;for(t=0;t<this._jsonModel.title_columns.length;t+=1){var e=document.createElement("div");e.classList.add("mr-row");var i=this._generateTopLeftEmptyCell();0===t&&this._leftColumnsWidth.push(this._options.cell_width);var s=this._generateTopLeftResizerEmpty(),n=this._generateTopLeftCell(t);0===t&&this._leftColumnsWidth.push(this._options.cell_width);var l=this._generateTopLeftResizerOnName(t);e.appendChild(i),e.appendChild(s),e.appendChild(n),e.appendChild(l),this._topLeftTable.appendChild(e)}},n.prototype._generateTopLeftEmptyCell=function(){var t=document.createElement("div");t.classList.add("mr-cell-header"),t.classList.add("mr-cell-empty"),t.style.width=this._options.cell_width+"px",t.classList.add("ellipsis");var e=document.createElement("p");return e.innerHTML="",t.appendChild(e),t.onclick=function(){console.log("daaaang : nothing on an empty cell dude")},this._arrayLeftCells[0]||(this._arrayLeftCells[0]=[]),this._arrayLeftCells[0].push(t),t},n.prototype._generateTopLeftCell=function(t){var e=this,i=document.createElement("div");i.classList.add("mr-cell-header"),i.style.width=this._options.cell_width+"px",i.classList.add("ellipsis"),i.classList.add("mr-cell-criteria");var s=document.createElement("p");return s.innerHTML=this._jsonModel.title_columns[t].value,s.setAttribute("title",this._jsonModel.title_columns[t].value),i.appendChild(s),i.onclick=function(){console.log("daaaang : "+e._jsonModel.title_columns[t].value)},this._arrayLeftCells[1]||(this._arrayLeftCells[1]=[]),this._arrayLeftCells[1].push(i),i},n.prototype._generateTopLeftResizerEmpty=function(){var t=document.createElement("div");t.classList.add("mr-resizer"),t.style.left=this._options.cell_width-5+"px",t.onclick=function(){debug&&console.log(i)},this._arrayTopLeftResizer[0]||(this._arrayTopLeftResizer[0]=[]),this._arrayTopLeftResizer[0].push(t);var e=this,s=null,n=null,l=null,o=!1,r=null,a=null,h=!1,d=function(t){t.target,r=parseInt(e._topLeftContainer.style.width),s=t.target.previousSibling.offsetWidth,t.target.previousSibling,a=parseInt(e._arrayLeftCells[0][0].style.width),l=t.clientX?t.clientX:t.touches[0].clientX,o=!0,e.__pauseEvent(t),"touchstart"===t.type?(document.addEventListener("touchmove",c),document.addEventListener("touchend",p)):"mousedown"===t.type&&(document.addEventListener("mousemove",c),document.addEventListener("mouseup",p)),e._container.classList.add("resizing")},c=function(t){h=!0;var i=t.clientX?t.clientX:t.touches[0].clientX;if(o){if(n=s+(i-l),Math.abs(n-s)<5)return void(h=!1);n<e._options.cell_minwidth?n=e._options.cell_minwidth:n>e._options.cell_maxwidth&&(n=e._options.cell_maxwidth),e._resizeLeftAndRight(r+(n-s));var d=0;for(d=0;d<e._arrayLeftCells[0].length;d+=1)e._arrayLeftCells[0][d].classList.contains("mr-cell-header-option")?e._arrayLeftCells[0][d].style.width=r+(n-s)+"px":e._arrayLeftCells[0][d].style.width=a+(n-s)+"px"}},p=function(t){var i,l;if(e._container.classList.remove("resizing"),o=!1,"touchend"===t.type?(document.removeEventListener("touchmove",c),document.removeEventListener("touchend",p)):"mouseup"===t.type&&(document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",p)),h)for(e._container.style.maxWidth=parseInt(e._container.style.maxWidth)+(n-s)+"px",i=0;i<=1;i+=1)for(l=0;l<e._arrayTopLeftResizer[i].length;l+=1)e._arrayTopLeftResizer[i][l].style.left=parseInt(e._arrayTopLeftResizer[i][l].style.left)+(n-s)+"px"};return t.addEventListener("mousedown",d),t.addEventListener("touchstart",d),t},n.prototype._generateTopLeftResizerOnName=function(t){var e=document.createElement("div");e.classList.add("mr-resizer"),e.style.left=2*this._options.cell_width-5+"px",e.onclick=function(){console.log(t)},this._arrayTopLeftResizer[1]||(this._arrayTopLeftResizer[1]=[]),this._arrayTopLeftResizer[1].push(e);var i=this,s=null,n=null,l=null,o=!1,r=null,a=null,h=null,d=!1,c=function(t){r=parseInt(i._topLeftContainer.style.width),a=parseInt(i._arrayLeftCells[1][0].style.width),h=parseInt(i._arrayLeftCells[0][0].style.width),t.target,s=t.target.previousSibling.offsetWidth,t.target.previousSibling,l=t.clientX?t.clientX:t.touches[0].clientX,o=!0,i.__pauseEvent(t),"touchstart"===t.type?(document.addEventListener("touchmove",p),document.addEventListener("touchend",_)):"mousedown"===t.type&&(document.addEventListener("mousemove",p),document.addEventListener("mouseup",_)),i._container.classList.add("resizing")},p=function(t){var e=t.clientX?t.clientX:t.touches[0].clientX;if(d=!0,o&&(n=s+(e-l),console.log(n-s),Math.abs(n-s)<5))d=!1;else{n<i._options.cell_minwidth?n=i._options.cell_minwidth:n>i._options.cell_maxwidth&&(n=i._options.cell_maxwidth),i._resizeLeftAndRight(r+(n-s));var c=0;for(c=0;c<i._arrayLeftCells[1].length;c+=1)i._arrayLeftCells[1][c].classList.contains("mr-cell-header-option")?i._arrayLeftCells[1][c].style.width=h+a+(n-s)+"px":i._arrayLeftCells[1][c].style.width=a+(n-s)+"px"}},_=function(t){if(i._container.classList.remove("resizing"),o=!1,"touchend"===t.type?(document.removeEventListener("touchmove",p),document.removeEventListener("touchend",_)):"mouseup"===t.type&&(document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",_)),d){i._container.style.maxWidth=parseInt(i._container.style.maxWidth)+(n-s)+"px";var e=0;for(e=0;e<i._arrayTopLeftResizer[1].length;e+=1)i._arrayTopLeftResizer[1][e].style.left=parseInt(i._arrayTopLeftResizer[1][e].style.left)+(n-s)+"px"}};return e.addEventListener("mousedown",c),e.addEventListener("touchstart",c),e},n.prototype._generateTopRightHeader=function(){this._topRightContainer=document.createElement("div"),this._topRightContainer.classList.add("mr-top-right"),this._topRightTable=document.createElement("div"),this._topRightContainer.appendChild(this._topRightTable),this._topRightTable.classList.add("mr-top-right-table");var t=0,e=0,i=0,s=this._jsonModel.columns&&this._jsonModel.columns.length>0?this._jsonModel.columns[0].length:0;for(e=0;e<s;e++){var n=document.createElement("div");for(n.classList.add("mr-row"),t=0;t<this._jsonModel.columns.length;t+=1){0===i&&this._rightColumnsWidth.push(this._options.cell_width);var l=this._generateTopRightCell(t,e),o=this._generateTopRightResizer(t);n.appendChild(l),n.appendChild(o)}i++,this._topRightTable.appendChild(n)}this._topRightTable.style.width=this._options.cell_width*this._jsonModel.columns.length+"px",this._container.style.maxWidth=this._options.cell_width*(2+this._jsonModel.columns.length)+17+5+"px"},n.prototype._generateTopRightCell=function(t,e){var i=document.createElement("div");i.classList.add("mr-cell-header"),i.style.width=this._options.cell_width+"px",i.classList.add("ellipsis");var s=document.createElement("p");return s.innerHTML=this._jsonModel.columns[t][e],s.setAttribute("title",this._jsonModel.columns[t][e]),i.appendChild(s),i.onclick=function(){console.log("i : "+t," - j : "+e)},this._arrayTopRightCells[t]||(this._arrayTopRightCells[t]=[]),this._arrayTopRightCells[t].push(i),i},n.prototype._generateTopRightResizer=function(t){var e=document.createElement("div");e.classList.add("mr-resizer"),e.setAttribute("data-resizer-idx",t),e.style.left=this._options.cell_width*(t+1)-5+"px",e.onclick=function(){console.log("clicked on resizer : "+t)},this._arrayTopRightResizer[t]||(this._arrayTopRightResizer[t]=[]),this._arrayTopRightResizer[t].push(e);var i=this,s=null,n=null,l=null,o=!1,r=null,a=null,h=!1,d=function(t){a=parseInt(i._topRightTable.style.width),r=t.target,s=t.target.previousSibling.offsetWidth,t.target.previousSibling,l=t.clientX?t.clientX:t.touches[0].clientX,o=!0,i.__pauseEvent(t),"touchstart"===t.type?(document.addEventListener("touchmove",c),document.addEventListener("touchend",p)):"mousedown"===t.type&&(document.addEventListener("mousemove",c),document.addEventListener("mouseup",p)),i._container.classList.add("resizing")},c=function(t){h=!0;var e=t.clientX?t.clientX:t.touches[0].clientX;if(o&&(n=s+(e-l),Math.abs(n-s)<5))h=!1;else{n<i._options.cell_minwidth?n=i._options.cell_minwidth:n>i._options.cell_maxwidth&&(n=i._options.cell_maxwidth),i._topRightTable.style.width=a+(n-s)+"px";var d=0,c=0,p=r.getAttribute("data-resizer-idx"),_=i._arrayTopRightCells[p];for(i._rightColumnsWidth[p]=n,c=0;c<_.length;c+=1)i._arrayTopRightCells[p][c].style.width=i._rightColumnsWidth[p]+"px";var u=0;for(d=0;d<parseInt(p);d++)u+=i._rightColumnsWidth[d];for(d=parseInt(p);d<i._jsonModel.columns.length;d+=1)for(u+=i._rightColumnsWidth[d],_=i._arrayTopRightResizer[d],c=0;c<_.length;c+=1)i._arrayTopRightResizer[d][c].style.left=u-5+"px"}},p=function(t){if(i._container.classList.remove("resizing"),o=!1,"touchend"===t.type?(document.removeEventListener("touchmove",c),document.removeEventListener("touchend",p)):"mouseup"===t.type&&(document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",p)),n<i._options.cell_minwidth?n=i._options.cell_minwidth:n>i._options.cell_maxwidth&&(n=i._options.cell_maxwidth),h){var e=r.getAttribute("data-resizer-idx");i._container.style.maxWidth=parseInt(i._topLeftContainer.style.width)+a+(n-s)+17+5+"px",i._botRightTable.style.width=parseInt(i._botRightTable.style.width)+(n-s)+"px",i._treeListView&&i._treeListView.getManager().setColumnWidth("col"+e,i._rightColumnsWidth[e])}};return e.addEventListener("mousedown",d),e.addEventListener("touchstart",d),e},n.prototype._generateBotLeftHeader=function(){this._botLeftContainer=document.createElement("div"),this._botLeftContainer.classList.add("mr-bot-left"),this._botLeftTable=document.createElement("div"),this._botLeftTable.classList.add("mr-bot-left-table"),this._botLeftContainer.appendChild(this._botLeftTable);var t=0;for(t=0;t<this._jsonModel.lines.length;t+=1){var e=this._generateBotLeftRow(t);this._botLeftTable.appendChild(e)}},n.prototype._generateBotLeftRow=function(t){var e=document.createElement("div");if(e.classList.add("mr-row"),"option"===this._jsonModel.lines[t].type){var i=document.createElement("div");i.classList.add("ellipsis"),i.classList.add("mr-cell-header"),i.classList.add("mr-cell-header-option"),i.style.width=2*this._options.cell_width+"px";var s=document.createElement("p");s.innerHTML=this._jsonModel.lines[t].value,s.setAttribute("title",this._jsonModel.lines[t].value),i.appendChild(s),i.onclick=function(){console.log("i : "+t)},e.appendChild(i),this._arrayLeftCells[1]||(this._arrayLeftCells[1]=[]),this._arrayLeftCells[1].push(i),this._arrayLeftCells[0]||(this._arrayLeftCells[0]=[]),this._arrayLeftCells[0].push(i)}else{var n=this._jsonModel.lines[t].value,l=document.createElement("div");l.classList.add("mr-cell-header"),l.classList.add("mr-cell-criteria"),l.classList.add("ellipsis"),l.style.width=this._options.cell_width+"px",(s=document.createElement("p")).innerHTML=n,s.setAttribute("title",n),l.appendChild(s),l.onclick=function(){console.log("i : "+t)};var o=document.createElement("div");o.classList.add("mr-cell-header"),o.classList.add("ellipsis"),o.style.width=this._options.cell_width+"px",(s=document.createElement("p")).innerHTML=this._jsonModel.lines[t].variantValue,s.setAttribute("title",this._jsonModel.lines[t].variantValue),o.appendChild(s),o.onclick=function(){console.log("i : "+t)},e.appendChild(l),e.appendChild(o),this._arrayLeftCells[0]||(this._arrayLeftCells[0]=[]),this._arrayLeftCells[0].push(l),this._arrayLeftCells[1]||(this._arrayLeftCells[1]=[]),this._arrayLeftCells[1].push(o)}return e},n.prototype._generateBotRightContainer=function(){this._botRightContainer=document.createElement("div"),this._botRightContainer.classList.add("mr-bot-right"),this._botRightTable=document.createElement("div"),this._botRightTable.classList.add("mr-bot-right-table"),this._botRightTable.style.height=50*this._jsonModel.lines.length+"px",this._botRightContainer.appendChild(this._botRightTable),this._botRightTable.style.width=this._options.cell_width*this._jsonModel.columns.length+5+"px",this._fillBotRightTable()},n.prototype.__pauseEvent=function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1},n.prototype._resizeLeftAndRight=function(t){this._topLeftContainer.style.width=t+"px",this._topRightContainer.style.width="calc(100% - "+t+"px)",this._botLeftContainer.style.width=t+"px",this._botRightContainer.style.width="calc(100% - "+t+"px)",this.__leftWidth=t},n.prototype._initScrollerSync=function(){var t=this;t._botRightContainer.addEventListener("scroll",function(){t._botLeftContainer.scrollTop=t._botRightContainer.scrollTop,t._topRightContainer.scrollLeft=t._botRightContainer.scrollLeft}),t._topRightContainer.addEventListener("scroll",function(){t._topLeftContainer.scrollTop=t._topRightContainer.scrollTop})},n.prototype._fillBotRightTable=function(){this._treeListView&&(this._treeListView.getManager().enablePerformanceAnalysis(),this._treeListView.inject(this._botRightTable),this._botRightTable.querySelector(".wux-tree-treelistview").style.height="100%",this._botRightTable.querySelector(".wux-datagrid").style.height="100%",this._botRightTable.querySelector(".wux-layouts-gridengine").style.height="100%")},n.prototype.getTreeListView=function(){return this._treeListView},n.prototype.getResizableModel=function(){return this._jsonModel},n});