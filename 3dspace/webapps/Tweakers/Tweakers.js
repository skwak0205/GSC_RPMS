define("DS/Tweakers/TweakerUtils",["UWA/Core","UWA/Element","DS/Core/Core","DS/Controls/Popup","DS/Controls/Button","DS/Core/PointerEvents","DS/Windows/Dialog","DS/Utilities/KeyboardUtils","DS/Utilities/Dom","DS/WebRecordEnabler/Adapter"],function(e,t,i,n,o,a,s,r,l,u){"use strict";function d(e,t,i,n){e.extendedViewContainer||(e.extendedViewContainer=function(e,t,i,n){var a=void 0;e.extendedView=i.extended?i.extended:i.getExtended();var r=function(e){e.stopPropagation(),a.visibleFlag=!1,t.onHide({cancelFlag:!0})};a=new s({title:t.dialogOptions.title?t.dialogOptions.title:t.name,icon:t.dialogOptions.icon,content:e.extendedView,resizableFlag:!0,height:t.dialogOptions.height?t.dialogOptions.height:240,width:t.dialogOptions.width?t.dialogOptions.width:200,identifier:t.dialogOptions.identifier?t.dialogOptions.identifier:"",buttons:{Ok:new o({onClick:function(e){e.stopPropagation(),a.visibleFlag=!1,t.onHide()}}),Cancel:new o({onClick:r})},autoCloseFlag:!1,touchMode:t.touchMode});var u=t.name?"wux-tweakers-aggregate-view-dialog-"+t.name.toLowerCase():"";a.getContent().addClassName("wux-tweakers-aggregate-view-dialog "+u),l.addEventOnElement(a,a,"close",r);var d=v.call(this,t.getContent());d?d.addWindow(a):document.body&&(a.inject(document.body),a.getContent().setStyle("z-index",1e3));var p=w.call(this,t.getContent());return p&&p.modalFlag&&(t.dialogOptions.modalFlag=!0),a.modalFlag=t.dialogOptions.modalFlag,a.position={at:"center center",my:"center center"},a}(e,t,i)),e.extendedViewContainer.visibleFlag=!0}function p(e,t,i,o){e.extendedViewContainer||(e.extendedViewContainer=function(e,t,i,o){var s=t.name?"wux-tweakers-aggregate-view-popup-"+t.name.toLowerCase():"",u=new n({target:e,position:"bottom",offset:{x:0,y:o.overlapContainer?-e.offsetHeight:0},alignment:"far",className:"wux-controls-popup wux-tweakers-aggregate-view-popup "+s,touchMode:t.touchMode,constraint:"screen"}),d=function(t){!u.visibleFlag||u.isElementInside(t.target)||e.openExtendedViewButton&&e.openExtendedViewButton.getContent().contains(t.target)||(u.hide(),l.removeEventOnElement(u,document.body,a.POINTERDOWN,d))};l.addEventOnElement(u,u,"show",function(e){e.stopPropagation(),l.addEventOnElement(u,document.body,a.POINTERDOWN,d)});var p=!1;return l.addEventOnElement(u,u,"hide",function(e){e.stopPropagation(),t.onHide({cancelFlag:p})}),l.addEventOnElement(u,u,"keydown",function(t){t.altKey||t.shiftKey||t.ctrlKey||t.keyCode!==r.ESCAPE&&t.keyCode!==r.ENTER||(t.stopPropagation(),e.openExtendedViewButton._preventButtonClickListener=t.keyCode===r.ENTER,p=t.keyCode===r.ESCAPE,u.hide(),p=!1,i.viewModule.focus&&i.viewModule.focus({preventScroll:!0}))}),e.extendedView=i.extended?i.extended:i.getExtended(),u.setBody(e.extendedView),l.addEventOnElement(u,u,"keydown",function(i){"keydown"===i.type&&i.keyCode===r.TAB&&(e.extendedView._resetFocus instanceof Function&&e.extendedView._resetFocus(),e.extendedViewContainer.visibleFlag=!1,t.focus({preventScroll:!0}),i.stopPropagation(),i.preventDefault())}),u}(e,t,i,o));var s="176px";o&&o.getExtendedViewHeight&&(s=o.getExtendedViewHeight()),e.extendedViewContainer.getContent().setStyle("height",s),e.extendedViewContainer.getContent().setStyle("width",e.offsetWidth+"px"),e.extendedViewContainer.visibleFlag=!0,o&&o.onPopupDisplay instanceof Function&&o.onPopupDisplay.call()}var h=[],c={init:function(){},addTypeRepresentationDirectory:function(e){h.push(e)},removeTypeRepresentationDirectory:function(e){var t=h.indexOf(e);-1!==t&&h.splice(t,1)},getTypePath:function(e){for(var t=!1,i=0;!t&&i<h.length;){if(h&&h[i].getRegisteredTypeRepresentation(e)){t=!0;var n=h[i].getRegisteredTemplate(h[i].getRegisteredTypeRepresentation(e).stdTemplate),o=h[i].getRegisteredTypeRepresentation(e).semantics;return{path:n.path,options:o}}if(h&&h[i].getRegisteredEnumeration(e))return{path:"DS/Tweakers/TweakerEnum",options:h[i].getRegisteredEnumeration(e)};i++}},_isFromType:function(e,t){var i=this.getTypePath(e);if(!i)return t;var n=!0;switch(i.path){case"DS/Tweakers/TweakerBoolean":n=null!==/^(true|false|\d+(.\d+)?)$/i.exec(t);break;case"DS/Tweakers/TweakerString":case"DS/Tweakers/TweakerColor":case"DS/Tweakers/TweakerDate":n="string"==typeof t;break;case"DS/Tweakers/TweakerNumber":n=i.options&&0===i.options.decimals?parseInt(t,10)===t:parseFloat(t)===t;break;case"DS/Tweakers/TweakerArray":n="undefined"!==t.length;break;default:n=!0}return n},_getValueFromString:function(e,t,i){var n,o=this.getTypePath(e);if(!o)return t;switch(o.path){case"DS/Tweakers/TweakerBoolean":n=null!==/(true|\d*[1-9]\d*(\.\d+)?|0\.\d*[1-9]\d*)/i.exec(t);break;case"DS/Tweakers/TweakerString":case"DS/Tweakers/TweakerColor":case"DS/Tweakers/TweakerDate":n=t?t.toString():"";break;case"DS/Tweakers/TweakerNumber":if(""===t){n=0;break}n=o.options&&0===o.options.decimals?parseInt(t):parseFloat(t);break;case"DS/Tweakers/TweakerArray":case"DS/Tweakers/TweakerObject":try{n=JSON.parse(t)}catch(e){n=void 0}break;case"DS/Tweakers/TweakerEnum":if(""===t){n=void 0;break}if(!o.options)return;var a=o.options;if("function"==typeof a)return t;for(var s in a)if(a[s].toString()==t)return a[s];if(!0===i)for(var s in a)if(s.toString()==t)return a[s];break;default:n=t}return n},_getStringRepresentationFromValue:function(e,t){var i,n=this.getTypePath(e);if(!n)return t;switch(n.path){case"DS/Tweakers/TweakerEnum":if(""===t){i=void 0;break}if(!n.options)return;var o=n.options;if("function"==typeof o)return t;for(var a in o)if(o[a]==t)return a;break;default:i=t}return i},_buildTweakerAggregateView:function(t,i,n){var s=e.extend({hasButton:!0,overlapContainer:!1,displayExtendedOnInlinedClicked:!0,displayExtendedOnKeyDown:!0,getExtendedViewHeight:null,immediateOpenFlag:!1},n);if(t&&i&&(i.inlined||s.hasButton&&(i.extended||i.getExtended))){var u=e.Element("div",{class:"wux-tweakers-aggregate-view-container"});if(i.inlined&&(u.inlinedView=i.inlined,i.inlined.addClassName("wux-tweakers-aggregate-view-inline"),u.appendChild(i.inlined)),s.hasButton&&(u.openExtendedViewButton=new o({label:"...",clickMode:0}),u.openExtendedViewButton.getContent().addClassName("wux-tweakers-aggregate-view-open"),u.openExtendedViewButton.inject(u)),i.extended||i.getExtended){var h=void 0,c=function(e){var n=t.augmentedDisplay;u.extendedViewContainer&&h!==n&&(u.extendedViewContainer.destroy(),u.extendedViewContainer=null),h=n,u.extendedViewContainer&&!1!==u.extendedViewContainer.visibleFlag?u.extendedViewContainer.visibleFlag=!1:("dialog"===n?d(u,t,i):"popup"===n&&p(u,t,i,s),t.onShow(),u.extendedView.focus&&u.extendedView.focus({preventScroll:!0}))};s.hasButton&&(u.openExtendedViewButton.onClick=function(e){u.openExtendedViewButton._preventButtonClickListener?u.openExtendedViewButton._preventButtonClickListener=!1:c()},u.openExtendedViewButton.addEventListener("keydown",function(e){e.keyCode===r.ESCAPE&&u.extendedViewContainer&&!0===u.extendedViewContainer.visibleFlag&&c()})),s.displayExtendedOnInlinedClicked&&u.inlinedView&&l.addEventOnElement(u,u.inlinedView,a.POINTERHIT,c),s.displayExtendedOnKeyDown&&u.addEventListener("keydown",function(e){!r.isAlphaNumeric(e.keyCode)||e.ctrlKey||e.shiftKey||e.altKey||c()}),s.immediateOpenFlag&&setTimeout(()=>{c()},1)}return u}},_buildInlineEditor:function(t,i,n,a){var s=e.createElement("div",{class:"wux-tweakers-multirep wux-tweakers-multirep-inline-editor"});if(i)if(s.inlinedView=i,i._view){var u=i._view;u.getContent().addClassName("wux-tweakers-multirep-tweakerstring"),u.inject(s)}else i.addClassName("wux-tweakers-multirep-tweakerstring"),s.appendChild(i);a.hasNoButton||(s.editBtn=new o({label:"..."}),s.editBtn.getContent().addClassName("wux-tweakers-multirep-button"),s.editBtn.inject(s)),s.embeddedContainer=void 0;var d=void 0;if(n){var p=function(e){if("A"!==e.target.tagName&&("keydown"!==e.type||r.isAlphaNumeric(e.keyCode)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey)){if(e.stopPropagation(),d&&d!==t.augmentedDisplay&&s.embeddedContainer.destroy(),d=t.augmentedDisplay,"dialog"===t.augmentedDisplay){if(s.embeddedContainer||(s.embeddedContainer=c._buildDialog(s,t,n,a),t.onShow()),!s.embeddedContainer)return;!1===s.embeddedContainer.visibleFlag&&(s.embeddedContainer.visibleFlag=!0,t.onShow())}else if("popup"===t.augmentedDisplay){if(!s.embeddedContainer){s.embeddedContainer=c._buildPopup(s,t,i,n,a);n._view&&l.addEventOnElement(t,n._view.getContent(),"keydown",function(e){"keydown"===e.type&&e.keyCode===r.TAB&&(n._view&&n._view._resetFocus(),s.embeddedContainer.visibleFlag=!1,t.focus({preventScroll:!0}),e.stopPropagation(),e.preventDefault())})}if(!s.embeddedContainer)return;s.embeddedContainer.getContent().setStyle("height","176px"),s.embeddedContainer.getContent().setStyle("width",s.offsetWidth+"px"),s.embeddedContainer.toggle()}("keydown"!==e.type||e.keyCode!==r.ENTER&&e.keyCode!==r.SPACE)&&n._view&&n._view.focus&&n._view.focus({preventScroll:!0})}};l.addEventOnElement(t,s,"click",p),a.hasNoButton||(l.addEventOnElement(t,s.editBtn,"buttonclick",function(e){e.stopPropagation()}),l.addEventOnElement(t,s.editBtn,"click",p),l.addEventOnElement(t,s.editBtn,"keydown",p),l.addEventOnElement(t,s.editBtn,"keyup",function(e){"keyup"!==e.type||e.keyCode!==r.ENTER&&e.keyCode!==r.SPACE||n._view&&n._view.focus&&n._view.focus({preventScroll:!0})}))}return s},_buildPopup:function(e,t,i,o,s){if(o){var d=t.name?t.name.toLowerCase().replace("tweaker",""):"multi-rep",p=s.hasNoButton?i:e.editBtn,h=new n({target:p,position:"bottom",offset:{x:0,y:s.offset?-i.offsetHeight:0},alignment:"far",className:"wux-controls-popup wux-controls-popup-tweaker-"+d,touchMode:t.touchMode,constraint:"screen"});u.ignoreForRecord(h.getContent()),h.getContent().setStyle("height","176px"),h.getContent().setStyle("width",e.offsetWidth+"px"),h._updateView();var c=function(t){!h.visibleFlag||h.isElementInside(t.target)||e.editBtn&&e.editBtn.getContent().contains(t.target)||(h.hide(),document.body.removeEventListener(a.POINTERDOWN,c))},v=!1;l.addEventOnElement(t,h,"show",function(e){e.stopPropagation(),l.addEventOnElement(t,document.body,a.POINTERDOWN,c),t.onShow()}),l.addEventOnElement(t,h,"hide",function(e){e.stopPropagation(),t.onHide({cancelFlag:v})}),l.addEventOnElement(t,h,"keydown",function(t){t.altKey||t.shiftKey||t.ctrlKey||(t.keyCode===r.ESCAPE?(v=!0,h.hide(),v=!1,e.editBtn&&e.editBtn.focus&&e.editBtn.focus({preventScroll:!0})):t.keyCode===r.ENTER&&(h.hide(),e.editBtn&&e.editBtn.focus&&e.editBtn.focus({preventScroll:!0})))});var w=o._view?o._view:o;return h.setBody(w),h}},_buildDialog:function(e,t,i){var n=void 0,a=function(e){e.stopPropagation(),n.visibleFlag=!1,t.onHide({cancelFlag:!0})};n=new s({title:t.dialogOptions.title?t.dialogOptions.title:t.name,icon:t.dialogOptions.icon,content:i,resizableFlag:!0,height:t.dialogOptions.height?t.dialogOptions.height:240,width:t.dialogOptions.width?t.dialogOptions.width:200,identifier:t.dialogOptions.identifier?t.dialogOptions.identifier:"",buttons:{Ok:new o({onClick:function(e){e.stopPropagation(),n.visibleFlag=!1;document.createEvent("Event");t.onHide()}}),Cancel:new o({onClick:a})},autoCloseFlag:!1,touchMode:t.touchMode}),u.ignoreForRecord(n.getContent());var r=t.name?t.name.toLowerCase().replace("tweaker",""):"multi-rep";n.getContent().addClassName("wux-tweakers-multirep-"+r),l.addEventOnElement(t,n,"close",a);var d=v.call(this,t.getContent());d?d.addWindow(n):document.body&&(n.inject(document.body),n.getContent().setStyle("z-index",1e3));var p=w.call(this,t.getContent());return p&&p.modalFlag&&(t.dialogOptions.modalFlag=!0),n.modalFlag=t.dialogOptions.modalFlag,n.position={at:"center center",my:"center center"},n},enableLiveChangeOnTreeListView:function(e){e.getManager()._getParent().elements.formContainer.addEvent("liveChange",e.getManager()._onCellChange.bind(e.getManager()))},onLoad:function(){},_setModelViewForDataColumnOneColumnCase:function(t,i,n,o,a){var s=i.cellView.getContent(),r=i.nodeModel.options,l=r.grid,u=void 0!==l.data?l.data:void 0!==l.defaultValue?l.defaultValue:void 0,d=function(){var e="",n=i.nodeModel.options.grid;return""!==t.valueType&&void 0!==t.valueType?(e=t.valueType+"."+(n.path?n.path:n.name),void 0!==n.type&&""!==n.type?e+="#"+n.type:void 0!==n.defaultType&&""!==n.defaultType&&(e+="#"+n.defaultType)):e=n.data&&"string"==typeof n.data&&0===n.data.indexOf("[")?"array":n.type||n.typeRep,e}(),p=void 0;(void 0!==l.readOnly||t.readOnly&&t.permanentReadOnly)&&(p=l.readOnly||t.readOnly&&t.permanentReadOnly);var h={typePath:d,readOnly:p,disabled:r.disabled,touchMode:l.touchMode,required:l.required,label:l.label?l.label:void 0,icon:l.semantics&&l.semantics.icon?l.semantics.icon:void 0,context:"inlinedTemplate",onViewCreated:function(e){void 0!==e&&(s.setContent(e),n&&(e.executionContext=n),s&&(e.readOnly||s.setAttribute("draggable",!1)),o&&o.call())},onFailure:function(e){l._buildFailure=!0,"function"==typeof t.onFailure&&t.onFailure(e),a&&a.call()}};if("oneColumn"===t.displayMode){var c,v,w,y,_;_=e.createElement("div"),(w=e.createElement("div",{class:"label"})).inject(_),(c=e.createElement("div",{class:"label",styles:{width:"50%",display:"inline-block","text-align":"left"}})).inject(w),(v=e.createElement("div",{class:"label",styles:{width:"50%",display:"inline-block","text-align":"right"}})).inject(w),(y=e.createElement("div",{class:"tweaker"})).inject(_),s.setContent(_);var f=i.nodeModel.options.grid;c.innerHTML=f.name,v.innerHTML="",t.typeDisplayFlag&&!t.authoringFlag&&(v.innerHTML=t._getTweakerTypeFromCellInfos(i)),s=y}return{generateViewOptions:h,data:u}},_getOrCreateFakeInputForFindHighlight:function(t,i,n){var o=t;if(o&&void 0===o.highlightModel)return i._fakeInputForhighlight&&(i._fakeInputForhighlight.style.display="none"),null;if(i._fakeInputForhighlight)return i._fakeInputForhighlight.textContent=o.value,i._fakeInputForhighlight.style.display="",i._fakeInputForhighlight;i._fakeInputForhighlight=new e.Element("span",{class:"wux-tweakers-fake-input-for-highlight",contenteditable:!0,tabindex:0}).inject(i.getContent()),i._fakeInputForhighlight.textContent=o.value;var a=n,s=i._fakeInputForhighlight;o.value;return l.addEventOnElement(t,i._fakeInputForhighlight,"click",function(e){s.style.display="none"},!0),l.addEventOnElement(t,n,"focus",function(e){s.style.display="none"}),l.addEventOnElement(t,n,"blur",function(e){o&&o.value===a.value&&o.highlightModel&&(s.style.display="")}),i._fakeInputForhighlight}};function v(e){var t=e.getParent(".wux-windows-immersive-frame");return t?t.dsModel:null}function w(e){var t=e.getParent(".wux-windows-window");return t?t.dsModel:null}return c}),define("DS/Tweakers/ModelProxy",["DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel"],function(e,t){"use strict";function i(e){var t={};return this.forEach(function(i){var n=i[e];t[n]?t[n].push(i):t[n]=[i]}),t}function n(e,i){for(var o in e){var a=e[o],s=this;Array.isArray(a)?a.forEach(function(e,n,o){s.addChild(new t({label:e[i],grid:e}))}):("none"!==o&&(s=new t({label:o}),this.addChild(s)),n.call(s,a,i))}}return{selectFilter:function(e){return void 0===e.pattern||""===e.pattern||void 0===e.criteria?this:this.filter(function(e){return void 0!==e[this.criteria]&&e[this.criteria].indexOf(this.pattern)>-1},e)},fillFilter:function(e){return this.map(function(e,t,i){var n=e;for(var o in this)void 0===n[o]&&(n[o]=this[o]);return n},e)},hierarchyFilter:function(e){var t=i.call(this,e.criteria);return void 0!==e.child&&void 0!==t&&function e(t){if(void 0!==t.criteria)for(var n in this)this[n]=i.call(this[n],t.criteria),void 0!==t.child&&void 0!==this[n]&&e.call(this[n],t.child)}.call(t,e.child),t},modelToTreeDocument:function(e,i,o){function a(e,i,n){e.forEach(function(e,o,s){var r=new t({label:e[i],grid:e});n?n.addChild(r):n.addRoot(r),e.properties&&a(e.properties,i,r)})}switch(i){case"flat":a(e,o,this);break;case"hierarchical":for(var s in e){var r=this;"undefined"!==s&&(r=new t({label:s}));var l=e[s];Array.isArray(l)?a(l,o,r):n.call(r,l,o),r!==this&&this.addChild(r)}}},modelToBreadCrumbModel:function(e,t){(function e(t,i){var n=this;for(var o in t){var a=t[o];if("none"===o)a.forEach(function(e,t,o){n.push({label:e[i]})});else{var s=[],r={label:o};Array.isArray(a)?a.forEach(function(e,t,n){s.push({label:e[i]})}):e.call(s,a,i),r.children=s,n.push(r)}}}).call(this,e,t)}}});var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerBase",["require","exports","UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Core/WebUXComponents","DS/WebRecordEnabler/Adapter","DS/Controls/Abstract","DS/Utilities/WUXUWAUtils"],function(e,t,i,n,o,a,s,r,l){"use strict";function u(e){this._currentPossibleValue=void 0;var t=this.possibleValues;if(!this.allowFreeInputFlag&&t&&Array.isArray(t)){if(this.allowMultipleValuesFlag&&Array.isArray(e)){var n=this,o=e.filter(function(e){return t.some(function(t){var i=t,o=e;return t instanceof Object&&t.hasOwnProperty("value")&&(i=i.value),e instanceof Object&&e.hasOwnProperty("value")&&(o=e.value),0===n.compare(n._upgradeValue(i),o)})});return o&&o.length!==e.length?{isValidValue:!0,newValue:o}:{isValidValue:!0}}if(t.length>0){for(var a=void 0,s=0;s<t.length;s++){var r=t[s];if("object"==typeof r){if(r.hasOwnProperty("value")){var l="object"===i.typeOf(e)&&e.hasOwnProperty("value")?e.value:e;if(0===this.compare(this._upgradeValue(r.value),l)){a=r;break}}else if(void 0!==r.label&&null!==r.label){l="object"===i.typeOf(e)?e.label:e;if(0===this.compare(this._upgradeValue(r.label),l)){a=r;break}}}else if(0===this.compare(this._upgradeValue(r),e)){a=r;break}}if(this._currentPossibleValue=a,(void 0===e||""===e)&&(this.allowResetToUndefinedByUIFlag||!this._isCurrentlyCalledFromUIInteraction()))return{isValidValue:!0};if(void 0===a)return this._currentPossibleValue=t[0],"object"==typeof t[0]?void 0!==t[0].value?{isValidValue:!0,newValue:t[0].value}:t[0].label?{isValidValue:!0,newValue:t[0].label}:{isValidValue:!0,newValue:t[0]}:{isValidValue:!0,newValue:t[0]}}}return{isValidValue:!0}}var d=function(t){function a(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.apply(this,e)||this;return n.blackBoxFlag=!0,l.extendingClassFlag,n}return __extends(a,t),Object.defineProperty(a,"publishedProperties",{get:function(){return{value:{defaultValue:void 0,type:"object",advancedSetter:!0,recordFlag:!0},icon:{defaultValue:void 0,type:"object"},highlightModel:{defaultValue:void 0,type:"object"},minValue:{defaultValue:void 0,type:"object"},maxValue:{defaultValue:void 0,type:"object"},possibleValues:{defaultValue:void 0,type:"object"},allowFreeInputFlag:{defaultValue:!1,type:"boolean"},allowMultipleValuesFlag:{defaultValue:!1,type:"boolean"},valueType:{defaultValue:"",type:"string"},referenceValue:{defaultValue:void 0,type:"object"},showReferenceValueFlag:{defaultValue:!1,type:"boolean"},readOnly:{defaultValue:!1,type:"boolean"},displayStyle:{defaultValue:void 0,type:"string"},escapeHTML:{defaultValue:!1,type:"boolean"},augmentedDisplay:{defaultValue:"popup",type:"string"},editorTitle:{defaultValue:"",type:"string"},dialogOptions:{defaultValue:{width:200,height:240,modalFlag:!1,title:void 0,icon:void 0,identifier:void 0},type:"object"},allowUnsafeHTMLContent:{defaultValue:!1,type:"boolean"},handleEditionCancel:{defaultValue:!0,type:"boolean"},placeholder:{defaultValue:"",type:"string"},allowResetToUndefinedByUIFlag:{defaultValue:!1,type:"boolean"},executionContext:{defaultValue:void 0,type:"object",noNeedToApplyFlag:!0},alignment:{defaultValue:void 0,type:"string"},numeric:{defaultValue:!1,type:"boolean"},validState:{defaultValue:!0,type:"boolean",readOnly:!0,category:"Behavior"},getDisplayedInformation:{defaultValue:void 0,type:"function",category:"Behavior"},emphasize:{defaultValue:void 0,type:"string"}}},enumerable:!1,configurable:!0}),a.prototype._preBuildView=function(){this.elements.container?this.elements.container.addClassName("wux-tweakers"):this.elements.container=new i.Element("div",{class:"wux-tweakers"}),this.elements.container.dsModel=this,this._iconClassName="wux-tweakers-icon",this._eventsDisabledCounter=0,this._currentValueLabel=null,this._currentValueIcon=null,this.disableEvents()},a.prototype._postBuildView=function(){void 0===this.referenceValue&&(this.referenceValue=i.clone(this.value,!1)),this._applyDisabled(),this.enableEvents()},a.prototype.compare=function(e,t){return n.compare(e,t)},a.prototype.getStringFromValue=function(e){if(null==e)return"";if(this.allowMultipleValuesFlag&&Array.isArray(e)){for(var t="",i=0;i<e.length;i++)i>0&&(t+=" | "),t+=this.getStringFromValue(e[i]);return t}if(this.possibleValues){var n=this._getEntryInPossibleValues(e);return n instanceof Object&&n.hasOwnProperty("label")?n.label.toString():e.toString()}return e.toString()},a.prototype.isValueDisplayedAsString=function(e){return this.baseViewModule.prototype.isValueDisplayedAsString(e)},a.prototype.computeContentSize=function(){var e;if(this.elements._viewModule&&this.elements._viewModule.computeTweakerContentLength)e=this.elements._viewModule.computeTweakerContentLength();else{var t=this.readOnly?this.getContent().innerText.length>0?this.getContent().innerText:this.getContent().textContent:this.value,i=this.getEditedState();e=o.computeStringWidth(t,this.getFontSize(),this.getFontFamily(),i,i)}this.readOnly&&(e+=2*this.getTweakerPadding(),this.getEditedState()&&(e+=5));return Math.ceil(e)},a.prototype.getFontSize=function(){var e=window.getComputedStyle(this.getContent(),null).getPropertyValue("font-size");return parseFloat(e)},a.prototype.getFontFamily=function(){return"Arial"},a.prototype.getTweakerPadding=function(){return this._getCurrentTouchMode()?14:7},a.prototype._preEditValue=function(e,t){var i=this._upgradeValue(t);if(this.possibleValues){var o=u.call(this,i);if(!o.isValidValue)return!1;if(o.newValue)return{validValue:o.newValue}}else{var a=this.minValue;if(a)if(i&&Array.isArray(i)){for(var s=[],r=!1,l=0;l<i.length;++l)-1===this.compare(i[l],a)?(s.push(a),r=!0):s.push(i[l]);r&&(i=s)}else if(-1===this.compare(i,a))return{validValue:a};var d=this.maxValue;if(d)if(i&&Array.isArray(i)){for(s=[],r=!1,l=0;l<i.length;++l)1===this.compare(i[l],d)?(s.push(d),r=!0):s.push(i[l]);r&&(i=s)}else if(1===this.compare(i,d))return{validValue:d}}return 0===n.compare(i,t)||{validValue:i}},a.prototype._applyValue=function(e,t){this._updateEditedState(),this._updateValidState(),this.elements._viewModule?this.isDirty("readOnly")||this.isDirty("displayStyle")||this.elements._viewModule.setValue(this._properties.value.value,e):void 0!==this.elements.internalView&&(this.readOnly&&(this._properties.value.value=this.value&&this.escapeHTML?i.String.escapeHTML(this.value):this.value),this.elements.internalView.value=this.value),2===this._preEditState?(this._liveChangeOccurred=!0,this.getEventsAllowedState()&&this.fire("liveChange")):this.onChange()},a.prototype._applyDisabled=function(e){if(t.prototype._applyDisabled.call(this,e),this.elements._viewModule&&this.elements._viewModule._view)if(Array.isArray(this.elements._viewModule._view))for(var i=this.elements._viewModule._view.length-1;i>=0;i--)this.elements._viewModule._view[i].disabled=this.disabled;else this.elements._viewModule._view.disabled=this.disabled;this.elements._viewModule&&this.elements._viewModule.setDisabled&&this.elements._viewModule.setDisabled(this.disabled)},a.prototype._applyIcon=function(e){this.possibleValues||(this._currentValueIcon=this.icon),this.elements._viewModule&&this.elements._viewModule.setIcon&&this.elements._viewModule.setIcon(this.icon)},a.prototype._updateIconFromPossibleValues=function(){"object"==typeof this._currentPossibleValue&&(this.readOnly&&void 0!==this._currentPossibleValue.icon_readOnly?this._currentValueIcon=this._currentPossibleValue.icon_readOnly:this._currentValueIcon=this._currentPossibleValue.icon)},a.prototype._applyMinValue=function(e){this._properties.minValue.value=this._upgradeMinMaxValue(this._properties.minValue.value),this.maxValue&&-1===this.compare(this.maxValue,this.minValue)&&(this.maxValue=this.minValue);var t=this.minValue;if(t){var i=this.value;if(Array.isArray(i)){for(var n=[],o=!1,a=0;a<i.length;++a)-1===this.compare(i[a],t)?(n.push(t),o=!0):n.push(i[a]);o&&(this.value=n)}else-1===this.compare(i,t)&&(this.value=t)}this.elements._viewModule?this.elements._viewModule.setMinValue(t):void 0!==this.elements.internalView&&(this.elements.internalView.minValue=t)},a.prototype._applyMaxValue=function(e){this._properties.maxValue.value=this._upgradeMinMaxValue(this._properties.maxValue.value),this.minValue&&1===this.compare(this.minValue,this.maxValue)&&(this.minValue=this.maxValue);var t=this.maxValue;if(t){var i=this.value;if(Array.isArray(i)){for(var n=[],o=!1,a=0;a<i.length;++a)1===this.compare(i[a],t)?(n.push(t),o=!0):n.push(i[a]);o&&(this.value=n)}else 1===this.compare(i,t)&&(this.value=t)}this.elements._viewModule?this.elements._viewModule.setMaxValue(t):void 0!==this.elements.internalView&&(this.elements.internalView.maxValue=t)},a.prototype._applyReferenceValue=function(e){this._properties.referenceValue.value=this._upgradeValue(this._properties.referenceValue.value),this._updateEditedState()},a.prototype._applyShowReferenceValueFlag=function(e){this._updateEditedState()},a.prototype._applyReadOnly=function(e){this._updateIconFromPossibleValues(),!this.elements._viewModule&&this.elements.internalView||void 0===e?void 0!==this.elements.internalView&&(this.elements.internalView.disabled=this.readOnly):this.isDirty("displayStyle")||this._applyDisplayStyle()},a.prototype._applyTouchMode=function(e){t.prototype._applyTouchMode.call(this,e);var i=this._getCurrentTouchMode();this.elements._viewModule?this.elements._viewModule.setTouchMode(i):void 0!==this.elements.internalView&&(this.elements.internalView.touchMode=i)},a.prototype._applyEmphasize=function(e){this.elements._viewModule&&this.elements._viewModule.setEmphasize&&this.elements._viewModule.setEmphasize(this.emphasize,e)},a.prototype._applyAllowUnsafeHTMLContent=function(e){this.elements._viewModule&&this.elements._viewModule.setAllowUnsafeHTMLContent&&this.elements._viewModule.setAllowUnsafeHTMLContent(this.allowUnsafeHTMLContent,e)},a.prototype._applyDisplayStyle=function(e){this.elements.container&&(this._createViewModule(),this._properties.possibleValues.dirty=!1)},a.prototype._createViewModule=function(){this._destroyViewModule(),this._importingViewmodule=!1;var t=this._resolveViewModuleToApply(this.displayStyle);if(t&&t.id&&t.definition){var i=function(e,t){this.elements._viewModule=new e(this,t),this.elements._viewModule.inject(this.elements.container),this.elements.internalView=this.elements._viewModule._view?this.elements._viewModule._view:this.elements.container,this._isFocused()&&(this.elements._viewModule&&this.elements._viewModule.focus?this.elements._viewModule.focus({preventScroll:!0}):this.elements.internalView&&this.elements.internalView.focus&&this.elements.internalView.focus({preventScroll:!0}))};if(t.definition.classObject)i.call(this,t.definition.classObject,t.definition.options);else if(t.definition.classPath){var n=this,o=t.definition.classPath.split("/");if(o&&3===o.length){var a=o[0]+"/"+o[1]+"/"+o[1];n._importingViewmodule=!0,new Promise(function(t,i){e([a],t,i)}).then(function(o){new Promise(function(i,n){e([t.definition.classPath],i,n)}).then(function(e){t.definition.classObject=e,n._importingViewmodule&&(i.call(n,t.definition.classObject,t.definition.options),n.fire("viewBuilt"),n._importingViewmodule=!1)})})}else console.warn("Invalid classPath : "+t.definition.classPath)}}},a.prototype._isViewBuilt=function(){return!0!==this._importingViewmodule},a.prototype._destroyViewModule=function(){if(this.elements._viewModule){this.onPostEdit();var e=this.elements._viewModule;this.elements._viewModule=void 0,e.destroy()}},a.prototype.cleanContent=function(){this._importingViewmodule=!1},a.prototype._applyHighlightModel=function(e){this.elements._viewModule&&this.elements._viewModule.setHighlightModel&&this.elements._viewModule.setHighlightModel(this.highlightModel)},a.prototype._applyPlaceholder=function(e){this.elements._viewModule&&this.elements._viewModule.setPlaceholder&&this.elements._viewModule.setPlaceholder(this.placeholder)},a.prototype._applyGetDisplayedInformation=function(e){this.elements._viewModule&&this.elements._viewModule.setGetDisplayedInformation&&this.elements._viewModule.setGetDisplayedInformation(this.getDisplayedInformation)},a.prototype._applyAllowResetToUndefinedByUIFlag=function(e){this.elements._viewModule&&this.elements._viewModule.setAllowResetToUndefinedByUIFlag&&this.elements._viewModule.setAllowResetToUndefinedByUIFlag(this.allowResetToUndefinedByUIFlag)},a.prototype._applyAlignment=function(e,t){this.alignment||!this.numeric?this.elements.container&&("near"===this.alignment?this.elements.container.setAttribute("alignment","near"):"center"===this.alignment?this.elements.container.setAttribute("alignment","center"):"far"===this.alignment?this.elements.container.setAttribute("alignment","far"):this.elements.container.removeAttribute("alignment")):this.alignment="far"},a.prototype._applyNumeric=function(e,t){!this.alignment&&this.numeric&&(this.alignment="far")},a.prototype.getEditedState=function(){var e=!1;if(this.showReferenceValueFlag&&void 0!==this.referenceValue){var t=this.value,i=this.referenceValue,o=this.isDirty("value")?this._upgradeValue(t):t,a=this.isDirty("referenceValue")?this._upgradeValue(i):i;e=0!==n.compare(o,a)}return e},a.prototype._updateEditedState=function(){this.elements.container&&(this.getEditedState()?this.elements.container.classList.add("wux-tweakers-edited"):this.elements.container.classList.remove("wux-tweakers-edited")),this.elements._viewModule&&this.elements._viewModule.usesReferenceValueLabel()&&this.elements._viewModule.updateReferenceValueLabel()},a.prototype.destroy=function(){this.elements._viewModule&&(this.elements.internalView=void 0,delete this.elements.internalView),t.prototype.destroy.call(this)},a.prototype._applyEscapeHTML=function(e){var t=this.elements.internalView;void 0!==t&&void 0!==t&&(this.elements.internalView.escapeHTML=this.escapeHTML)},a.prototype._applyAllowMultipleValuesFlag=function(e){this.elements._viewModule&&this.elements._viewModule.setAllowMultipleValuesFlag&&this.elements._viewModule.setAllowMultipleValuesFlag(this.allowMultipleValuesFlag)},a.prototype._applyPossibleValues=function(e){var t=this.possibleValues;if(!(Array.isArray(e)&&Array.isArray(t)&&i.equals(t,e))){if(this._currentPossibleValue=void 0,this.elements._viewModule&&(t&&!e||!t&&e)){var n=this._resolveViewModuleToApply(this.displayStyle);if(n&&n.definition&&(n.definition.classObject&&!(this.elements._viewModule instanceof n.definition.classObject)||n.definition.classPath))return void this._createViewModule()}if(this.elements._viewModule&&this.elements._viewModule.setPossibleValues(t),!this.isDirty("value")){this._currentValueLabel;var o=u.call(this,this.value);o.isValidValue&&Object.keys(o).indexOf("newValue")>-1&&o.newValue!==this.value?this.value=o.newValue:this.elements._viewModule&&this.elements._viewModule.setValue(this.value)}}},a.prototype._getEntryInPossibleValues=function(e){for(var t,n=0;n<this.possibleValues.length;n++){var o=this.possibleValues[n],a=e,s=o;if("object"==typeof o)if(o.hasOwnProperty("value"))a="object"===i.typeOf(e)&&e.hasOwnProperty("value")?e.value:e,s=o.value;else if(o.hasOwnProperty("label")){"object"===i.typeOf(e)&&e.label;s=o.label}if(0===this.compare(this._upgradeValue(s),a)||0===this.compare(s,a)){t=o;break}}return t},a.prototype._applyProperties=function(e){if(t.prototype._applyProperties.call(this,e),this.isDirty("allowUnsafeHTMLContent")&&this._applyAllowUnsafeHTMLContent(e.allowUnsafeHTMLContent),this.isDirty("highlightModel")&&this._applyHighlightModel(e.highlightModel),this.isDirty("touchMode")&&this._applyTouchMode(e.touchMode),this.isDirty("escapeHTML")&&this._applyEscapeHTML(e.escapeHTML),this.isDirty("allowMultipleValuesFlag")&&this._applyAllowMultipleValuesFlag(e.allowMultipleValuesFlag),this.isDirty("possibleValues")&&this._applyPossibleValues(e.possibleValues),this.isDirty("minValue")&&this._applyMinValue(e.minValue),this.isDirty("maxValue")&&this._applyMaxValue(e.maxValue),this.isDirty("value"))if(this._preEditValue){var i=this._preEditValue(e.value,this.value);!1!==i&&("object"==typeof i&&Object.keys(i).indexOf("validValue")>=0&&(this._properties.value.value=i.validValue),this._applyValue(e.value,this.value))}else this._applyValue(e.value,this.value);this.isDirty("readOnly")&&this._applyReadOnly(e.readOnly),this.isDirty("referenceValue")&&this._applyReferenceValue(e.referenceValue),this.isDirty("showReferenceValueFlag")&&this._applyShowReferenceValueFlag(e.showReferenceValueFlag),this.isDirty("icon")&&this._applyIcon(this.icon),this.isDirty("allowResetToUndefinedByUIFlag")&&this._applyAllowResetToUndefinedByUIFlag(e.allowResetToUndefinedByUIFlag),this.isDirty("placeholder")&&this._applyPlaceholder(e.placeholder),this.isDirty("displayStyle")&&this._applyDisplayStyle(e.displayStyle),this.isDirty("disabled")&&this._applyDisabled(e.disabled),this.isDirty("alignment")&&this._applyAlignment(e.alignment),this.isDirty("numeric")&&this._applyNumeric(e.numeric),this.isDirty("getDisplayedInformation")&&this._applyGetDisplayedInformation(e.getDisplayedInformation),this.isDirty("emphasize")&&this._applyEmphasize(e.emphasize)},a.prototype.handleEvents=function(){},a.prototype._upgradeValue=function(e){return e},a.prototype._upgradeMinMaxValue=function(e){return this._upgradeValue(e)},a.prototype.resetToReferenceValue=function(){this.value=this.referenceValue},a.prototype.setValueAsReference=function(){this.referenceValue=i.clone(this.value,!1)},a.prototype._getElementToFocus=function(){return this.elements._viewModule&&this.elements._viewModule._getElementToFocus?this.elements._viewModule._getElementToFocus():this.elements.internalView?this.elements.internalView._getElementToFocus?this.elements.internalView._getElementToFocus():this.elements.internalView:null},a.prototype._onFocusReceived=function(){t.prototype._onFocusReceived.call(this),this.getContent()!==document.activeElement&&o.isActiveElementInContainer(this.getContent())||(this.elements._viewModule&&this.elements._viewModule.focus?this.elements._viewModule.focus({preventScroll:!0}):this.elements.internalView&&this.elements.internalView.focus&&this.elements.internalView.focus({preventScroll:!0}))},a.prototype._giveFocus=function(){t.prototype._giveFocus.call(this),this.getContent()!==document.activeElement&&o.isActiveElementInContainer(this.getContent())||(this.elements._viewModule&&this.elements._viewModule._giveFocus?this.elements._viewModule._giveFocus():this.elements.internalView&&this.elements.internalView._giveFocus&&this.elements.internalView._giveFocus())},a.prototype._resolveViewModuleToApply=function(e){var t={id:"",definition:void 0},i=this;function n(e){var n=Object.getPrototypeOf(i),o="";for(e.id&&i.displayStyle&&(o=i.displayStyle),e.hasPossibleValues&&(o+=(0===o.length?"":"_")+"hasPossibleValues"),e.allowMultipleValues&&(o+=(0===o.length?"":"_")+"allowMultipleValues"),e.readOnly&&(o+=(0===o.length?"":"_")+"readOnly");n&&!t.definition;){var a=n.VIEW_MODULES;if(a){var s=a[o];s&&(s.classObject||s.classPath)&&(t.id=o,t.definition=s)}n=Object.getPrototypeOf(n)}}var o=this.readOnly,a=!!(Array.isArray(this.possibleValues)||this.possibleValues instanceof Function);return n({id:!0,hasPossibleValues:a,allowMultipleValues:this.allowMultipleValuesFlag,readOnly:o}),n({id:!0,hasPossibleValues:a,readOnly:o}),n({id:!0,readOnly:o}),n(o?{readOnly:!0}:{id:!0}),t},a.prototype.applyPropertiesOnView=function(e){if(this.elements._viewModule){var t=this.elements._viewModule.getModifiableOptions();for(var i in this.elements._viewModule.prepareUpdate(),e)if(-1!==t.indexOf(i)){var n="set"+i.substring(0,1).toUpperCase()+i.substring(1,i.length);this.elements._viewModule[n](e[i])}this.elements._viewModule.pushUpdate()}},a.prototype.disableEvents=function(){this._eventsDisabledCounter++},a.prototype.enableEvents=function(){this._eventsDisabledCounter--},a.prototype.getEventsAllowedState=function(){return 0===this._eventsDisabledCounter},a.prototype.onChange=function(e){2===this._preEditState&&(this._cancelableValue=i.clone(this.value,!1)),this._updateEditedState(),this.getEventsAllowedState()&&this.fire("change",e),this._liveChangeOccurred=!1},a.prototype.onPreEdit=function(){this._preEditState||(this._cancelableValue=i.clone(this.value,!1),this._preEditState=1,this._liveChangeOccurred=!1)},a.prototype.onPostEdit=function(e){this._preEditState&&(this._popupOpenedState||(this._cancelableValue=void 0,this._liveChangeOccurred&&this.onChange(),2===this._preEditState&&this.getEventsAllowedState()&&this.fire("postEdit",e),this._liveChangeOccurred=!1,this._preEditState=0))},a.prototype.onCancelEdit=function(e){this._preEditState&&(this._cancelableValue===this.value?this.onPostEdit():(this.handleEditionCancel&&this.setPropertyFromUIInteraction("value",this._cancelableValue),this._preEditState=0,this._cancelableValue=void 0,this.getEventsAllowedState()&&this.fire("cancelEdit",e)))},a.prototype.onShow=function(e){this._popupOpenedState=!0,this.onPreEdit(),this.getEventsAllowedState()&&this.fire("show",e)},a.prototype.onHide=function(e){this._popupOpenedState=!1,e&&e.cancelFlag?this.onCancelEdit():this.onPostEdit(),this.getEventsAllowedState()&&this.fire("hide",e)},a.prototype._isValueValid=function(e){return!0},a.prototype._updateValidState=function(){if(this._properties.value){var e=this._isValueValid(this._properties.value.value);this._properties.validState&&e!==this._properties.validState.value&&(this._properties.validState.value=e,this.fire("validStateChange"))}},a.prototype._updateInformationToDisplay=function(e){this._currentValueIcon=this.icon,this._currentValueLabel=null;var t,i=void 0;if(t=this.getStringFromValue(e),i=this.icon,this._currentPossibleValue&&(this._currentPossibleValue.hasOwnProperty("label")?t=this._currentPossibleValue.label:this._currentPossibleValue.hasOwnProperty("labelItem")?t=this._currentPossibleValue.labelItem:this._currentPossibleValue.hasOwnProperty("value")&&(t=this.getStringFromValue(this._currentPossibleValue.value)),this.readOnly?this._currentPossibleValue.hasOwnProperty("icon_readOnly")?i=this._currentPossibleValue.icon_readOnly:this._currentPossibleValue.hasOwnProperty("icon")&&(i=this._currentPossibleValue.icon):this._currentPossibleValue.hasOwnProperty("icon")?i=this._currentPossibleValue.icon:this._currentPossibleValue.hasOwnProperty("icon_readOnly")&&(i=this._currentPossibleValue.icon_readOnly)),this.getDisplayedInformation){var n=this.getDisplayedInformation.call(this);n.hasOwnProperty("label")&&(t=n.label),n.hasOwnProperty("icon")&&(i=n.icon)}this._currentValueLabel=t,this._currentValueIcon=i},a}(r),p=function(e,t){this._tweaker=e,this._options=Object.assign({},t),this._cptUpdate=0,this._view=void 0,this.buildView(),this.handleEvents()};p.prototype._destroyViewItem=function(e){if(this[e]){if(this._view){var t=this._view.indexOf(this[e]);t>-1&&this._view.splice(t,1)}this[e].destroy(),delete this[e]}},p.prototype.buildView=function(){},p.prototype.handleEvents=function(){},p.prototype.inject=function(e){if(this._view)if(Array.isArray(this._view))for(var t=this._view.length-1;t>=0;t--)this._view[t].inject(e,"top");else this._view.inject(e,"top")},p.prototype.destroy=function(){if(this._referenceValueLabel&&(this._referenceValueLabel.destroy(),this._referenceValueLabel=void 0),this._view)if(Array.isArray(this._view))for(var e=0;e<this._view.length;e++)this._view[e].remove(),this._view[e].destroy();else this._view.remove(),this._view.destroy();delete this._view},p.prototype.getModifiableOptions=function(){return[]},p.prototype.setTouchMode=function(e){if(this._view)if(Array.isArray(this._view))for(var t=0;t<this._view.length;t++)this._view[t].touchMode=e;else this._view.touchMode=e},p.prototype.setValue=function(e,t){},p.prototype.setTweakerValue=function(e){var t=this._tweaker;t&&(t._preEditState&&1===t._preEditState&&t.getEventsAllowedState()&&(t.fire("preEdit"),t._preEditState=2),t.setPropertyFromUIInteraction("value",e))},p.prototype.setPossibleValues=function(e){},p.prototype.setGetDisplayedInformation=function(e){},p.prototype.setAllowUnsafeHTMLContent=function(e){},p.prototype.setPlaceholder=function(e){},p.prototype.setAllowResetToUndefinedByUIFlag=function(e){},p.prototype.setMinValue=function(e){if(this._view)if(Array.isArray(this._view))for(var t=0;t<this._view.length;t++)this._view[t].minValue=e;else this._view.minValue=e},p.prototype.setMaxValue=function(e){if(this._view)if(Array.isArray(this._view))for(var t=0;t<this._view.length;t++)this._view[t].maxValue=e;else this._view.maxValue=e},p.prototype.usesReferenceValueLabel=function(){return!1},p.prototype.updateReferenceValueLabel=function(){var e,t=this._tweaker;if(t)if(t.getEditedState()){if(this._referenceValueLabel||(this._referenceValueLabel=i.createElement("div",{class:"wux-tweakers-reference-value"})),e=this._formatReferenceValue?this._formatReferenceValue(t.referenceValue):t.getStringFromValue(t.referenceValue),n.getUnsafeHTMLContentValueToApply(t.allowUnsafeHTMLContent)?this._referenceValueLabel.innerHTML=e:this._referenceValueLabel.textContent=e,!this._referenceValueLabel.parentNode){var o=this._options.useCustomContainerDiv?this._options.useCustomContainerDiv:this._tweaker.elements.container;this._referenceValueLabel.inject(o)}}else this._referenceValueLabel&&(this._referenceValueLabel.destroy(),this._referenceValueLabel=void 0)},p.prototype.prepareUpdate=function(e){this._cptUpdate++},p.prototype.pushUpdate=function(e){this._cptUpdate--,0===this._cptUpdate&&this._updateView()},p.prototype._updateView=function(){},p.prototype.computeTweakerContentLength=function(){if(this._tweaker.readOnly||!this._view){var e=0;this._tweaker.icon&&this._icon&&(e+=this._icon.offsetWidth+7),!this._tweaker.validState&&this._iconInvalid&&(e+=this._iconInvalid.offsetWidth+7);var t=this._tweaker.readOnly?this._tweaker.getContent().innerText.length>0?this._tweaker.getContent().innerText:this._tweaker.getContent().textContent:this._tweaker.value,i=this._tweaker.getEditedState();e+=o.computeStringWidth(t,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),i,i);for(var n=0,a=0,s=new RegExp("<mark.*?>(.*?)</mark","ig"),r=s.exec(this._tweaker.getContent().innerHTML);null!==r;)n+=o.computeStringWidth(r[1],this._tweaker.getFontSize(),this._tweaker.getFontFamily(),!1,i),a+=o.computeStringWidth(r[1],this._tweaker.getFontSize(),this._tweaker.getFontFamily(),!0,i),r=s.exec(this._tweaker.getContent().innerHTML);return e+=a-n}e=0;if(Array.isArray(this._view))for(var l=this._view.length-1;l>=0;l--){var u=this._view[l],d=u.getContent?u.getContent():u,p=parseInt(d.offsetWidth.toString());p||(p=parseInt(window.getComputedStyle(d).minWidth)),e+=p}else{d=this._view.getContent?this._view.getContent():this._view;(e=parseInt(d.offsetWidth.toString()))||(e=parseInt(window.getComputedStyle(d).minWidth))}return e},p.prototype.valueMustBeValidated=function(){return!1},p.prototype.validateValue=function(){return!1},p.prototype.isValueDisplayedAsString=function(e){return!0},p.prototype.focus=function(e){var t=this._getElementToFocus?this._getElementToFocus():void 0;t&&t.focus&&t.focus(e)};var h=function(e,t){this._currentMode=0,p.call(this,e,t)};return n.applyMixin(h,p),h.prototype.buildView=function(){this.formatHTMLValue(this._tweaker.value),this.setEmphasize(this._tweaker.emphasize)},h.prototype.setEmphasize=function(e,t){if(t||e){if(t){var i="wux-tweakers-emphasize-"+t;this._tweaker.getContent().classList.remove(i)}if(e){var n="wux-tweakers-emphasize-"+e;this._tweaker.getContent().classList.add(n)}}},h.prototype._cleanContainerProperties=function(){var e=this._tweaker;e.elements.container&&(e.elements.container.textContent="",e.elements.container.removeClassName("wux-tweakers-string-label"),e.elements.container.removeClassName("wux-tweakers-labelonly"),e.elements.container.removeClassName("wux-tweakers-icon"),e.elements.container.removeAttribute("wrap"),o.cleanIcon(e.elements.container))},h.prototype.destroy=function(){this._cleanContainerProperties(),p.prototype.destroy.call(this)},h.prototype.setSuffix=function(e){this._tweaker&&this._tweaker.elements.container&&this.formatHTMLValue(this._tweaker.value)},h.prototype.setAllowUnsafeHTMLContent=function(e,t){if(1&this._currentMode&&t!==e){var i=void 0;i=1===this._currentMode?this._tweaker.elements.container:this._label,n.getUnsafeHTMLContentValueToApply(!0===e)?i.innerHTML=i.textContent:i.textContent=i.innerHTML}},h.prototype.setHighlightModel=function(e){void 0!==this._tweaker.value&&null!==this._tweaker.value&&this.formatHTMLValue(this._tweaker.value)},h.prototype.removeHighlightModel=function(){this.setHighlightModel(void 0)},h.prototype._shouldFormatHTMLValue=function(e){if(void 0===this._previousFormatHTMLValueProperties&&(this._previousFormatHTMLValueProperties={}),0===Object.keys(this._previousFormatHTMLValueProperties).length)return!0;var t=this._tweaker;return this._previousFormatHTMLValueProperties.suffix!==t._suffix||(this._previousFormatHTMLValueProperties.valueIcon!==t._currentValueIcon||(this._previousFormatHTMLValueProperties.valueLabel!==t._currentValueLabel||(this._previousFormatHTMLValueProperties.stringValue!==t.getStringFromValue(e)||JSON.stringify(this._previousFormatHTMLValueProperties.highlightModel)!==JSON.stringify(t.highlightModel))))},h.prototype.formatHTMLValue=function(e){var t=this._tweaker;if(t){var a=this._options.useCustomContainerDiv?this._options.useCustomContainerDiv:t.elements.container;t._updateInformationToDisplay(e);var s=t.highlightModel,r=this._options.hyperlink&&void 0!==t.value&&null!==t.value&&""!==t.value,l=t.validState,u=1;t._currentValueIcon?u=void 0!==e&&""!==e?3:2:l||(u=3),(1===this._currentMode&&1!==u||2===this._currentMode&&2!==u)&&this._cleanContainerProperties(),this._label&&3!==u&&!r&&(this._label.destroy(),this._label=void 0),!this._icon||t._currentValueIcon&&2!==u||this._destroyViewItem("_icon"),this._iconInvalid&&l&&(this._destroyViewItem("_iconInvalid"),t.elements.container.removeAttribute("with-validsign")),!t._currentValueIcon&&l&&t.elements.container.removeAttribute("has-icon");var d=null;if(1&u){if((d=this._label)||(r?(this._label=i.createElement("a"),d=this._label):3===u?(this._label=i.createElement("span"),d=this._label):d=this._getLabelDivToConsiderForHighlight?this._getLabelDivToConsiderForHighlight():a),!d)return;d.classList.add("wux-tweakers-string-label"),d===a?d.classList.add("wux-tweakers-labelonly"):d.classList.remove("wux-tweakers-labelonly"),this._options.wrap&&d.setAttribute("wrap","");var p=null===t._currentValueLabel?t.getStringFromValue(e):t._currentValueLabel;if(t._suffix)p+=this._getSuffixToConsiderForHighlight?this._getSuffixToConsiderForHighlight():" "+t._suffix;var h=n.getUnsafeHTMLContentValueToApply(t.allowUnsafeHTMLContent);if(h){if(s)for(var c=s.indexes.length-1;c>=0;c--){var v=s.indexes[c],w=(f=c===s.selectedIndex)?"<mark class='".concat("wux-tweakers-tweakerbase-highlight"," ").concat("wux-tweakers-tweakerbase-selectedHighlight","'>"):"<mark class='".concat("wux-tweakers-tweakerbase-highlight","'>");p=n.spliceString(p,v+s.label.length,0,"</mark>"),p=n.spliceString(p,v,0,w)}d.innerHTML=p}else if(s){var y=p.length;p=p.toString(),d.setContent();for(c=s.indexes.length-1;c>=0;c--){v=s.indexes[c];var _,f=c===s.selectedIndex;if(v+s.label.length<y)(_=new i.Element("span")).textContent=p.slice(v+s.label.length,y),_.inject(d,"top"),y=v+s.label.length;var g=v+s.label.length;v+s.label.length>y&&(g=y);var m=new i.Element("mark");m.addClassName("wux-tweakers-tweakerbase-highlight"),f&&m.addClassName("wux-tweakers-tweakerbase-selectedHighlight"),m.textContent=p.slice(v,g),m.inject(d,"top"),y=v}if(0!==y)(_=new i.Element("span")).textContent=p.slice(0,y),_.inject(d,"top")}else d.textContent=p;if(r)d.set("href",e);else if(!s&&!h){var b=d.innerHTML,V=o.hyperlinkifyText(b);V!==b&&(d.innerHTML=V)}}var k=null,C=null;switch(2&u&&(t._currentValueIcon&&((k=this._icon)||3!==u?2===u&&(k=a):(this._icon=i.createElement("span"),k=this._icon),k.classList.add(t._iconClassName),o.generateIcon(t._currentValueIcon,{target:k})),l||(C=this._iconInvalid)||(this._iconInvalid=C=i.createElement("span"),C.classList.add("wux-tweakers-icon"),C.classList.add("wux-tweakers-iconinvalidattention"),o.generateIcon("attention",{target:C}),t.elements.container.setAttribute("with-validsign","")),t.elements.container.setAttribute("has-icon","")),u){case 1:r&&this._label.inject(a);break;case 3:C&&C.inject(a),this._icon&&this._icon.inject(a),this._label.inject(a)}this._currentMode=u,this.updateReferenceValueLabel()}},h.prototype.setValue=function(e,t){this._tweaker&&this.formatHTMLValue(e)},h.prototype.setIcon=function(e){this.formatHTMLValue(this._tweaker.value)},h.prototype.usesReferenceValueLabel=function(){return!0},d.prototype.baseViewModule=p,d.prototype.VIEW_MODULES={readOnly:{classObject:h}},d.prototype.registerViewModule=function(e,t){},a.addClass(d,"tweakerBase"),d.prototype.markForRecordFlag=!0,s.register(d,"DS/ControlsRec/AbstractRec"),d}),define("DS/Tweakers/TypeEnums",["require","exports","i18n!DS/Tweakers/assets/nls/translation"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0,t.Layout=Object.freeze({TagCloud:Object.freeze({value:"tagcloud",label:i.get("tagcloud"),icon:Object.freeze({iconName:"view-tag-cloud",fontIconFamily:1})}),SmallThumbnail:Object.freeze({value:"smallthumbnail",label:i.get("smallthumbnail"),icon:Object.freeze({iconName:"view-small-thb",fontIconFamily:1})}),BigThumbnail:Object.freeze({value:"bigthumbnail",label:i.get("bigthumbnail"),icon:Object.freeze({iconName:"view-big-thb",fontIconFamily:1})}),ImageWallThumbnail:Object.freeze({value:"imagewallthumbnail",label:i.get("imagewallthumbnail"),icon:Object.freeze({iconName:"view-imagewall-thb",fontIconFamily:1})}),SmallTile:Object.freeze({value:"smalltile",label:i.get("smalltile"),icon:Object.freeze({iconName:"view-small-tile",fontIconFamily:1})}),BigTile:Object.freeze({value:"bigtile",label:i.get("bigtile"),icon:Object.freeze({iconName:"view-big-tile",fontIconFamily:1})}),TextualTile:Object.freeze({value:"textualtile",label:i.get("textualtile"),icon:Object.freeze({iconName:"view-textual-tile",fontIconFamily:1})}),DataGridView:Object.freeze({value:"datagridview",label:i.get("datagridview"),icon:Object.freeze({iconName:"view-list",fontIconFamily:1})}),Mixed:Object.freeze({value:"mixed",label:i.get("mixed"),icon:Object.freeze({iconName:"view-mixed",fontIconFamily:1})}),Large:Object.freeze({value:"large",label:i.get("large"),icon:Object.freeze({iconName:"view-3dswym-large",fontIconFamily:1})}),GraphList:Object.freeze({value:"graphlist",label:i.get("graphlist"),icon:Object.freeze({iconName:"graph-egraph-list",fontIconFamily:1})}),List:Object.freeze({value:"list",label:i.get("list"),icon:Object.freeze({iconName:"list",fontIconFamily:1})}),Kanban:Object.freeze({value:"kanban",label:i.get("kanban"),icon:Object.freeze({iconName:"compare-on",fontIconFamily:1})}),Graph:Object.freeze({value:"graph",label:i.get("graph"),icon:Object.freeze({iconName:"graph-linear",fontIconFamily:1})}),Gantt:Object.freeze({value:"gantt",label:i.get("gantt"),icon:Object.freeze({iconName:"chart-gantt",fontIconFamily:1})}),Map:Object.freeze({value:"map",label:i.get("map"),icon:Object.freeze({iconName:"map",fontIconFamily:1})})})}),define("DS/Tweakers/TweakerBlob",["UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/TweakerBase","DS/Controls/Button","DS/Controls/TooltipModel","i18n!DS/Tweakers/assets/nls/translation"],function(e,t,i,n,o,a,s){"use strict";var r=n.inherit({name:"tweakerBlob",publishedProperties:{placeholder:{defaultValue:"",type:"string",category:"Appearance"},blob:{defaultValue:void 0,type:"object",category:"Model"},displayStyle:{defaultValue:"label",type:"string",category:"Appearance"}},_applyPlaceholder:function(){this.elements._viewModule&&this.elements._viewModule.setPlaceholder(this.placeholder)},_applyBlob:function(){var e=this;if(e.blob){var t=new FileReader;t.onloadend=function(t){e.value!==t.target.result&&(e.value=t.target.result)},t.readAsDataURL(e.blob)}this.elements._viewModule&&this.elements._viewModule.setBlob(this.blob)},_applyValue:function(){this.blob=this._dataURLtoBlob(this.value),this.onChange()},_applyDisabled:function(e){this._parent(),this.elements._viewModule&&this.elements._viewModule.setDisabled&&this.elements._viewModule.setDisabled(this.disabled)},_dataURLtoBlob:function(e){if(e){var t=e.split(","),i=t[0].match(/:(.*?);/);if(i&&!(i.length<2)){for(var n=t[0].match(/:(.*?);/)[1],o=atob(t[1]),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);return new Blob([s],{type:n})}}}}),l=function(e,t){n.prototype.baseViewModule.call(this,e,t)};t.applyMixin(l,n.prototype.baseViewModule),l.prototype.setBlob=function(){},l.prototype.setBlobName=function(){},l.prototype.setDisabled=function(){},l.prototype.setPlaceholder=function(){};var u=function(e,t){this._inlinedView=void 0,l.call(this,e,t)};t.applyMixin(u,l),u.prototype.buildView=function(){var t=this,i=t._tweaker,n=i._getCurrentTouchMode();i.elements.container.addClassName("wux-tweakers-blob");var a=e.createElement("div",{class:"wux-tweakers-blob-main"});t._inlinedView=e.createElement("div",{class:"wux-tweakers-blob-inlinedView"}),!0===n?t._inlinedView.setAttributeNode(document.createAttribute("touch-mode")):t._inlinedView.removeAttribute("touch-mode"),t._inlinedView._spanText=document.createElement("span"),t._inlinedView._spanText.classList.add("wux-tweakers-blob-span-text"),t._inlinedView._spanText.classList.add("wux-tweakers-blob-span-text-placeholder"),t._inlinedView._spanText.textContent=i.placeholder,t._inlinedView.appendChild(t._inlinedView._spanText),t._inlinedView._placeholderDnD=document.createElement("div"),t._inlinedView._placeholderDnD.className="wux-tweakers-blob-draggable-div",t._inlinedView._placeholderDnD.style.display="none",t._inlinedView.appendChild(t._inlinedView._placeholderDnD);var s=document.createElement("span");s.className="wux-ui-3ds wux-ui-3ds-doc-add wux-ui-3ds-lg wux-tweakers-blob-span",t._inlinedView._placeholderDnD.appendChild(s),t._inlinedView.inject(a),t._editBtn=new o({showLabelFlag:!1,icon:{iconName:"upload",iconSize:"1x",fontIconFamily:WUXManagedFontIcons.Font3DS},touchMode:n}),t._editBtn.getContent().addClassName("wux-tweakers-multirep-button"),t._editBtn.inject(a),t._editBtn._blobFinderInput=document.createElement("input"),t._editBtn._blobFinderInput.type="file",t._editBtn._blobFinderInput.title=" ",t._editBtn._blobFinderInput.className="wux-tweakers-blobFinder-input",this._updateInputTooltip(),t._editBtn.getContent().appendChild(t._editBtn._blobFinderInput),t._editBtn.getContent().addClassName("wux-tweakers-multirep-button-line-editor"),t._view=a,t.setBlob(this._tweaker.blob)},u.prototype.handleEvents=function(){var e=this,t=e._tweaker,n=e._view;function o(n){var o;n.stopPropagation(),n.dataTransfer?(n.preventDefault(),o=n.dataTransfer.files[0],t._blobName=n.dataTransfer.files[0].name,e._inlinedView.removeClassName("wux-tweakers-blob-ondragover"),e._inlinedView._placeholderDnD.style.display="none"):e._editBtn._blobFinderInput.files&&e._editBtn._blobFinderInput.files.length&&(o=e._editBtn._blobFinderInput.files[0],t._blobName=e._editBtn._blobFinderInput.files[0].name);var a=new FileReader;a.onloadend=function(n){t.value===n.target.result&&n.target.result?e.setBlob(t.blob):(i.pushUserInteractionContext(),e.setTweakerValue(n.target.result),e.setBlob(t.blob),i.popUserInteractionContext())},o&&a.readAsDataURL(o)}i.addEventOnElement(e,e._editBtn._blobFinderInput,"change",o),i.addEventOnElement(e,n,"dragover",function(t){t.preventDefault(),e._inlinedView.addClassName("wux-tweakers-blob-ondragover"),e._inlinedView._placeholderDnD.style.display="block"}),i.addEventOnElement(e,n,"drop",o),i.addEventOnElement(e,n,"dragleave",function(t){t.preventDefault(),e._inlinedView.removeClassName("wux-tweakers-blob-ondragover"),e._inlinedView._placeholderDnD.style.display="none"})},u.prototype.setPlaceholder=function(e){this._view&&this._inlinedView&&this._inlinedView._spanText&&!this.blob&&(this._inlinedView._spanText.textContent=e,this._updateInputTooltip())},u.prototype.setBlob=function(e){this._view&&(this._tweaker.value&&this._tweaker.blob&&!this._tweaker._blobName?this._tweaker._blobName="No name":this._tweaker.value||this._tweaker.blob||(this._tweaker._blobName=this._tweaker.placeholder,this._editBtn._blobFinderInput.value=""),this._inlinedView&&this._inlinedView._spanText&&(this._inlinedView._spanText.textContent=this._tweaker._blobName,this._updateInputTooltip()),this._inlinedView._spanText.textContent===this._tweaker.placeholder?this._inlinedView._spanText.classList.add("wux-tweakers-blob-span-text-placeholder"):this._inlinedView._spanText.classList.remove("wux-tweakers-blob-span-text-placeholder"))},u.prototype.setTouchMode=function(e){this._view&&(!0===e?this._inlinedView.setAttributeNode(document.createAttribute("touch-mode")):this._inlinedView.removeAttribute("touch-mode"),this._editBtn.touchMode=e)},u.prototype.setDisabled=function(e){this._view&&(!0===e?(this._inlinedView.setAttributeNode(document.createAttribute("disabled")),this._inlinedView.getAttributeNode("focused")&&this._inlinedView.removeAttribute("focused")):this._inlinedView.removeAttribute("disabled"),this._editBtn.disabled=e,this._view.style.pointerEvents=e?"none":"auto")},u.prototype.destroy=function(){this._tweaker.elements.container&&this._tweaker.elements.container.removeClassName("wux-tweakers-blob"),this._inlinedView&&(this._inlinedView.remove(),this._inlinedView.destroy()),this._editBtn&&(this._editBtn.remove(),this._editBtn.destroy()),l.prototype.destroy.call(this)},u.prototype._updateInputTooltip=function(){let e;e=this._inlinedView._spanText.textContent!=this._tweaker.placeholder?this._inlinedView._spanText.textContent:s.get("inputNoFileChosen"),this._editBtn&&(void 0===this._editBtn.tooltipInfos?this._editBtn.tooltipInfos=new a({shortHelp:e}):this._editBtn.tooltipInfos.shortHelp=e)};var d=function(e,t){l.call(this,e,t)};return t.applyMixin(d,l),d.prototype.buildView=function(){var e=this._tweaker,t=e.elements.container;t.addClassName("wux-tweakers-string-label"),t.addClassName("wux-tweakers-labelonly"),e.value&&!e._blobName&&(e._blobName="No name"),e._blobName&&(t.textContent=e._blobName)},d.prototype.setBlob=function(e){var t=this._tweaker,i=t.elements.container;this._tweaker.blob&&!this._tweaker._blobName?this._tweaker._blobName="No name":this._tweaker.value||this._tweaker.blob||(this._tweaker._blobName=this._tweaker.placeholder),i.textContent=t._blobName},d.prototype.destroy=function(){this._tweaker.elements.container&&(this._tweaker.elements.container.textContent="",this._tweaker.elements.container.removeClassName("wux-tweakers-string-label"),this._tweaker.elements.container.removeClassName("wux-tweakers-labelonly")),l.prototype.destroy.call(this)},r.prototype.baseViewModule=l,r.prototype.VIEW_MODULES={readOnly:{classObject:d},label:{classObject:u}},r.prototype.registerViewModule=function(e,t){},r}),define("DS/Tweakers/TweakerFunction",["UWA/Core","DS/Tweakers/TweakerBase","DS/Controls/Button","DS/Controls/Flyout","DS/Controls/ComboBox","DS/Controls/Popup","DS/Menu/Menu","DS/Utilities/Utils","DS/Utilities/Dom","UWA/Class/Promise"],function(e,t,i,n,o,a,s,r,l,u){"use strict";function d(e){return{context:e._tweaker.executionContext,dsModel:e._tweaker}}function p(){var e=this;if(e._tweaker.value&&"function"==typeof e._tweaker.value)e._tweaker.value(d(e));else if(e._tweaker.value&&(e._tweaker.value.module||e._tweaker.defaultModule)){var t=e._tweaker.value&&e._tweaker.value.module?e._tweaker.value.module:e._tweaker.defaultModule,i=e._tweaker.value&&e._tweaker.value.func?e._tweaker.value.func:e._tweaker.defaultFunction,n=e._tweaker.value.argument;n||(n={}),[].push(f.call(e,t,i,n))}}var h=t.inherit({name:"tweakerFunction",publishedProperties:{label:{defaultValue:"",type:"string"},icon:{defaultValue:"",type:"string"},count:{defaultValue:null,type:"string"},emphasize:{defaultValue:"secondary",type:"string"},defaultModule:{defaultValue:void 0,type:"string"},defaultFunction:{defaultValue:void 0,type:"string"},displayStyle:{defaultValue:"button",type:"string",category:"Appearance"}},_applyEmphasize:function(){this.elements._viewModule&&this.elements._viewModule.setEmphasize&&this.elements._viewModule.setEmphasize(this.emphasize)},_applyIcon:function(){this.elements._viewModule&&this.elements._viewModule.setIcon&&this.elements._viewModule.setIcon(this.icon)},_applyCount:function(){this.elements._viewModule&&this.elements._viewModule.setCount&&this.elements._viewModule.setCount(this.count)},_applyLabel:function(){this.elements._viewModule&&this.elements._viewModule.setLabel&&this.elements._viewModule.setLabel(this.label)},_applyDefaultModule:function(){this.elements._viewModule&&this.elements._viewModule.setDefaultModule&&this.elements._viewModule.setDefaultModule(this.defaultModule)},_applyDefaultFunction:function(){this.elements._viewModule&&this.elements._viewModule.setDefaultFunction&&this.elements._viewModule.setDefaultFunction(this.defaultFunction)},_applyProperties:function(e){this._parent(e),this.isDirty("emphasize")&&this._applyEmphasize(e.emphasize),this.isDirty("label")&&this._applyLabel(e.label),this.isDirty("icon")&&this._applyIcon(e.icon),this.isDirty("count")&&this._applyCount(e.count),this.isDirty("value")&&this._applyValue(e.value),this.isDirty("defaultModule")&&this._applyDefaultModule(e.defaultModule),this.isDirty("defaultFunction")&&this._applyDefaultFunction(e.defaultFunction)}}),c=function(e,i){t.prototype.baseViewModule.call(this,e,i)};r.applyMixin(c,t.prototype.baseViewModule),c.prototype.buildView=function(e){var t=this._options.viewOptions||{};t.touchMode=this._tweaker.touchMode,t.label=this._tweaker.label,t.icon=this._tweaker.icon,t.emphasize=this._tweaker.emphasize,t.disabled=this._tweaker.disabled,this._view=new i(t),this._view.getContent().addClassName("wux-tweaker-function")},c.prototype.setIcon=function(e){this._view&&(this._view.icon=e)},c.prototype.setLabel=function(e){this._view&&(this._view.label=e)},c.prototype.computeTweakerContentLength=function(){if(this._view){var e=parseInt(window.getComputedStyle(this._view.getContent()).width);if(isNaN(e)){var t=this._view.getContent().getDimensions();e=t&&void 0!==t.minWidth?t.minWidth:0}return e}return this._parent()},c.prototype.setDisabled=function(e){this._view&&(this._view.disabled=e)},c.prototype.setEmphasize=function(e){this._view&&(this._view.emphasize=e)},c.prototype.setValue=function(e){this._tweaker,this._view},c.prototype.setDefaultFunction=function(e){this._view&&(this._view.value||(this._view.value={},this._view.value.action||(this._view.value.action={})),this._view.value.action.func=e)},c.prototype.setDefaultModule=function(e){this._view&&(this._view.value||(this._view.value={},this._view.value.action||(this._view.value.action={})),this._view.value.action.module=e)},c.prototype.isValueDisplayedAsString=function(e){return!1};var v=function(e,t){c.call(this,e,t)};r.applyMixin(v,c),v.prototype.buildView=function(){c.prototype.buildView.call(this),this._options.hasIcon&&(this._view.displayStyle="smartIcon")},v.prototype.handleEvents=function(){var e=this;this._view.addEventListener("buttonclick",function(){p.call(e)})},v.prototype.computeTweakerContentLength=function(){if(this._view){var e=0;if(this._view.showLabelFlag){const t=this._view.label,i=this._tweaker.getEditedState();e=l.computeStringWidth(t,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),i,i)}this._view.icon&&this._view.elements.iconPlaceholder&&(e+=this._view.elements.iconPlaceholder.offsetWidth);var t=getComputedStyle(this._view.getContent());return e+parseInt(t.paddingLeft)+parseInt(t.paddingRight)}return this._parent()};var w=function(e,t){c.call(this,e,t),this.elements={}};r.applyMixin(w,c),w.prototype.buildView=function(){var e;if(void 0!==this._tweaker.value){var t=this._tweaker._getEntryInPossibleValues(this._tweaker.value);t&&t.icon&&(e=t.icon)}var i=this;w.prototype.getExtendedView=function(){return{menuModel:i._getMenuItemsFromPossibleValues()}},this._view=new n({type:n.TYPE.STANDARD,showLabelFlag:!1,icon:e,onClick:function(){i.executeFunction()},touchMode:this._tweaker.touchMode,getExtendedView:this.getExtendedView}),this._view.getContent().addClassName("wux-tweaker-function")},w.prototype.executeFunction=function(){var e=this;if(e._tweaker.value&&e._tweaker.value.func&&(e._tweaker.value.module||e._tweaker.defaultModule)){var t=e._tweaker.value.module?e._tweaker.value.module:e._tweaker.defaultModule,i=e._tweaker.value.func?e._tweaker.value.func:e._tweaker.defaultFunction,n=e._tweaker.value.argument;[].push(f.call(e,t,i,n))}else"function"==typeof e._tweaker.value&&e._tweaker.value(d(e))},w.prototype._getMenuItemsFromPossibleValues=function(){var e=this,t=[];if(this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues))for(var i=0;i<this._tweaker.possibleValues.length;i++){let o=this._tweaker.possibleValues[i].value,a=this._tweaker.possibleValues[i].icon,s=this._tweaker.possibleValues[i].label,r=this._tweaker.possibleValues[i].tooltip;var n=0===this._tweaker.compare(o,this._tweaker.value)?"selected":"";t.push({type:"CheckItem",icon:a,title:s,state:n,tooltip:r,action:{callback:function(){e._tweaker.value=o,e.executeFunction()}}})}return t},w.prototype.setIcon=function(){},w.prototype.setTouchMode=function(){this._view.touchMode=this._tweaker.touchMode},w.prototype.setValue=function(){var e;if(void 0!==this._tweaker.value){var t=this._tweaker._getEntryInPossibleValues(this._tweaker.value);t&&t.icon&&(e=t.icon)}this._view.icon=e},w.prototype.handleEvents=function(){};var y=function(e,t){c.call(this,e,t)};r.applyMixin(y,c),y.prototype.buildView=function(){var e=this._options.viewOptions||{};this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues)&&(e.elementsList=this._tweaker.possibleValues.map(function(e){return{value:e.value,label:e.label,icon:e.icon}})),e.touchMode=this._tweaker.touchMode,e.enableSearchFlag=!1,e.actionOnClickFlag=!0,e.popupSizeAdjustPolicy=a.SizeAdjustPolicyEnum.AdjustToVisibleContents,this._view=new o(e),this.setValue(this._tweaker.value)},y.prototype.computeTweakerContentLength=function(){var e=this._tweaker._getCurrentTouchMode()?54:31,t=l.computeStringWidth(this._view.label,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),this._tweaker.getEditedState())+e;if(this._view.elements.iconPlaceholder){this._view.elements.iconPlaceholder.offsetWidth>0&&(t=t+this._view.elements.iconPlaceholder.offsetWidth+11)}return t},y.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i&&t&&(l.addEventOnElement(t,i,"show",function(e){e.stopPropagation(),t.onShow()}),l.addEventOnElement(t,i,"hide",function(e){e.stopPropagation(),t.onHide({cancelFlag:!!e.options.cancelPopupSelection})}),l.addEventOnElement(t,i,"click",function(n){n.stopPropagation(),e.setTweakerValue(i.value),p.call(e),t.onPostEdit()}))},y.prototype.setValue=function(e){var t=this._view;t&&(t.value=null==e?{}:e)},y.prototype.setLabel=function(e){},y.prototype.setPossibleValues=function(e){this._view&&e&&(this._view.elementsList=e.map(function(e){return{value:e.value,label:e.label,icon:e.icon}}))},y.prototype.setPlaceholder=function(e){this._view&&(this._view.placeholder=e)},y.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._view&&(this._view.reachablePlaceholderFlag=e)},y.prototype.setDefaultFunction=function(e){},y.prototype.setDefaultModule=function(e){};var _=function(e,t){c.call(this,e,t)};r.applyMixin(_,c),_.prototype.buildView=function(){c.prototype.buildView.call(this),this._options.hasIcon&&(this._view.displayStyle="smartIcon"),!1!==this._options.hasArrow&&(this._view.arrowSpan=document.createElement("span"),this._view.arrowSpan.className="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-expand-down",this._options.hasIcon?(this._view.arrowSpan.classList.add("arrow-icon"),this._view.getContent().addClassName("arrow-icon")):(this._view.arrowSpan.classList.add("arrow"),this._view.getContent().style.paddingRight="0px")),this._options.viewOptions&&this._options.viewOptions.bigIcon?this._view.getContent().setAttribute("wux-ui-tweaker-big-icon",""):this._view.getContent().removeAttribute("wux-ui-tweaker-big-icon"),!0===this._options.hasCount&&(this._view.count=document.createElement("span"),this._view.count.className="wux-tweaker-function-counter",this._view.count.innerText=this.validateCount(this._tweaker.count),this._view.getContent().addClassName("wux-tweaker-function-displaycount")),this.setLabel(this._tweaker.label)},_.prototype.setLabel=function(e){this._view&&(this._view.label=e,!0===this._options.hasCount&&this._view.getContent().appendChild(this._view.count),!1!==this._options.hasArrow&&this._view.getContent().appendChild(this._view.arrowSpan))},_.prototype.validateCount=function(e){var t=parseInt(e);return t?t>999?"999+":t<0?0:t:""},_.prototype.setCount=function(e){this._view&&this._view.count&&(this._view.count.innerText=this.validateCount(e))},_.prototype.handleEvents=function(){var e=this,t=this._view;t.addEventListener("buttonclick",function(i){var n=[],o=[],a=e._view.getContent().getBoundingClientRect();if(e._tweaker.value.action&&(e._tweaker.value.action.module||e._tweaker.defaultModule)){var r=e._tweaker.value&&e._tweaker.value.module?e._tweaker.value.module:e._tweaker.defaultModule,l=e._tweaker.value&&e._tweaker.value.func?e._tweaker.value.func:e._tweaker.defaultFunction,p=e._tweaker.value.argument;n.push(f.call(e,r,l,p))}else if(e._tweaker.value.menu&&e._tweaker.value.menu.length>0)e._tweaker.value.menu.forEach(function(t){if(t.action&&(t.action.module||e._tweaker.defaultModule)){var i=t.action&&t.action.module?t.action.module:e._tweaker.defaultModule,a=t.action&&t.action.func?t.action.func:e._tweaker.defaultFunction,s=t.action.argument;let n=d(e);t.action={func:a,module:i,argument:s,context:n}}g.call(e,t,n),u.all(n).then(function(){o.push(t)}).catch(function(e){throw new Error("Issue with menu format")})}),u.all(n).then(function(){s.show(o,{position:{x:a.left,y:a.top+a.height}}),e._tweaker.fire("show")}).catch(function(){throw new Error("Issue with menu format")});else if(e._options.contextMenuFallback){var h=document.createEvent("HTMLEvents");h.initEvent("contextmenu",!0,!1),h.pageX=a.left+ +a.width/2,h.pageY=a.top+a.height,h.dispatchContext="ctxMenuClick",t.getContent().dispatchEvent(h)}})};var f=function(e,t,i){let n=d(this);return r.attachSimpleCallback(e,t,i,n)},g=function(e,t){var i=this;if(e&&e.submenu&&Array.isArray(e.submenu)&&e.submenu.length>0){var n=i._tweaker.defaultModule,o=i._tweaker.defaultFunction;let a=d(i);e.submenu.forEach(function(e){if(e.action&&(e.action.module||n)){var s=e.action.module?e.action.module:n,r=e.action.func?e.action.func:o,l=e.action.argument;e.action={func:r,module:s,argument:l,context:a},e&&e.submenu&&Array.isArray(e.submenu)&&e.submenu.length>0&&(e.action&&(e.action.func||(e.func=i._tweaker.defaultFunction),e.action.module||(e.module=i._tweaker.defaultModule)),g.call(i,e,t))}else e&&e.submenu&&Array.isArray(e.submenu)&&e.submenu.length>0&&g.call(i,e,t)})}};return h.prototype.baseViewModule=c,h.prototype.VIEW_MODULES={button_readOnly:{classObject:v},button:{classObject:v},button_hasPossibleValues:{classObject:y},buttonIcon_readOnly:{classObject:v,options:{hasIcon:!0,viewOptions:{showLabelFlag:!1}}},buttonIcon:{classObject:v,options:{hasIcon:!0,viewOptions:{showLabelFlag:!1}}},buttonIcon_hasPossibleValues:{classObject:w},buttonIcon_hasPossibleValues_readOnly:{classObject:w},menu_readOnly:{classObject:_},menu:{classObject:_},menuIcon_readOnly:{classObject:_,options:{hasIcon:!0,viewOptions:{showLabelFlag:!1}}},menuIcon:{classObject:_,options:{hasIcon:!0,viewOptions:{showLabelFlag:!1}}},menuIconWithCount:{classObject:_,options:{hasIcon:!0,hasCount:!0,viewOptions:{showLabelFlag:!1}}},chevronMenuIcon:{classObject:_,options:{hasIcon:!0,hasArrow:!1,contextMenuFallback:!0,viewOptions:{bigIcon:!0,showLabelFlag:!1}}},chevronMenuIcon_readOnly:{classObject:_,options:{hasIcon:!0,hasArrow:!1,contextMenuFallback:!0,viewOptions:{bigIcon:!0,showLabelFlag:!1}}},threeDotsMenu:{classObject:_,options:{hasIcon:!0,hasArrow:!1,viewOptions:{showLabelFlag:!1}}}},h.prototype.registerViewModule=function(e,t){},h});__extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerImage",["require","exports","UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/TweakerBase","DS/Core/WebUXComponents","DS/WebRecordEnabler/Adapter","DS/Utilities/WUXUWAUtils"],function(e,t,i,n,o,a,s,r,l){"use strict";var u=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return l.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{displayStyle:{defaultValue:"simple",type:"string",category:"Appearance"}}},enumerable:!1,configurable:!0}),t.prototype.getTweakerPadding=function(){return 0},t}(a),d=function(e,t){a.prototype.baseViewModule.call(this,e,t)};n.applyMixin(d,a.prototype.baseViewModule),d.prototype.isValueDisplayedAsString=function(e){return!1};var p=function(e,t){d.call(this,e,t)};return n.applyMixin(p,d),p.prototype.buildView=function(){this._tweaker.elements.container.addClassName("wux-tweakers-image"),this._view=i.createElement("img",{class:"wux-tweakers-image-img"}),this.setValue(this._tweaker.value)},p.prototype.setValue=function(e){this._view&&(e?(o.generateIcon(e,{target:this._view}),this._view.getParent()||this._view.inject(this._tweaker.elements.container)):this._view.remove())},p.prototype.handleEvents=function(){},p.prototype.destroy=function(){this._tweaker&&this._tweaker.elements.container&&this._tweaker.elements.container.removeClassName("wux-tweakers-image"),d.prototype.destroy.call(this)},p.prototype.computeTweakerContentLength=function(){var e=0;return this._view&&(e+=this._view.offsetWidth),e},u.prototype.baseViewModule=d,u.prototype.VIEW_MODULES={simple:{classObject:p},simple_readOnly:{classObject:p}},u.prototype.registerViewModule=function(e,t){},s.addClass(u,"tweakerImage"),u.prototype.markForRecordFlag=!0,r.register(u,"DS/ControlsRec/AbstractRec"),u}),define("DS/Tweakers/TweakerTreeNodeModel",["UWA/Core","DS/Tweakers/TweakerBase","DS/Controls/Abstract","DS/Core/PointerEvents","DS/CoreEvents/ModelEvents","DS/Utilities/Dom","DS/Controls/TooltipModel","UWA/Utils/Client"],function(e,t,i,n,o,a,s,r){"use strict";var l={};r.Engine;function u(t,i){var n=window.getComputedStyle(i,null).getPropertyValue("font-size"),o=parseFloat(n),a=new e.Element("span",{html:t,styles:{opacity:1,fontSize:o,padding:5}}).inject(i),s=a.getDimensions().width;return a.remove(),s}var d=i.inherit({name:"TweakerTreeNodeModel",publishedProperties:{value:{defaultValue:null,type:"object"},height:{defaultValue:38,type:"number"},readOnly:{defaultValue:!0,type:"boolean"}},_postBuildView:function(){this.elements.container.addClassName("wux-layouts-treeview-cell"),this.elements.layout=new e.Element("ul",{class:"wux-ui-stack-h",styles:{width:"inherit",height:this.height,display:"inline-block"}}).inject(this.elements.container),this.elements.linksContainer=new e.Element("li",{class:"wux-layouts-treeview-links"}).inject(this.elements.layout),this.elements.nodeContainer=new e.Element("li",{class:"wux-layouts-treeview-node"}).inject(this.elements.layout),this.elements.expanderContainer=new e.Element("li",{class:"wux-layouts-treeview-expander"}).inject(this.elements.nodeContainer),this.elements.iconsContainer=new e.Element("li",{class:"wux-layouts-treeview-icons"}).hide().inject(this.elements.nodeContainer),this.elements.badgeTopRight=new e.Element("li",{class:"wux-layouts-treeview-badge wux-layouts-treeview-badge-top-right"}).inject(this.elements.iconsContainer),this.elements.badgeTopLeft=new e.Element("li",{class:"wux-layouts-treeview-badge wux-layouts-treeview-badge-top-left"}).inject(this.elements.iconsContainer),this.elements.badgeBottomRight=new e.Element("li",{class:"wux-layouts-treeview-badge wux-layouts-treeview-badge-bottom-right"}).inject(this.elements.iconsContainer),this.elements.badgeBottomLeft=new e.Element("li",{class:"wux-layouts-treeview-badge wux-layouts-treeview-badge-bottom-left"}).inject(this.elements.iconsContainer),this.elements.labelContainer=new e.Element("li",{class:"wux-layouts-treeview-label"}).inject(this.elements.nodeContainer),this._observeEvents(),this._parent()},_applyValue:function(e){this.value&&this.value.options&&(this.setLabel(this.value.options.label),this.setIcons(this.value.options.icons),this._setExpanderState(this.value._expandState),this._setDepth(this.value._nodeDepth))},isInEditionMode:function(){return!this.disabled&&!this.readOnly},switchToReadView:function(){this.readOnly=!0},notifyModelUpdate:function(){this.value.notifyModelUpdate()},_applyReadOnly:function(e){this._parent(e),this.setLabel(this.value.options.label)},setLabel:function(t){var i=this;function n(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),i.elements.container.scrollLeft=0,!1}function o(e){i.isInEditionMode()&&(document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),e.target.value!==i.value.options.label&&(i.value.options.label=e.target.value,i.notifyModelUpdate(),i._applyProperties()),i.switchToReadView(),i.fire("change"))}if(this.isInEditionMode()){var a=i.getContent().getDimensions().width,s=new e.Element("input",{type:"text",value:t,tabindex:"-1",class:"wux-tree-label-input wux-ui-state-clearable",styles:{"box-sizing":"border-box"},events:{dragstart:function(e){e.preventDefault(),e.stopPropagation()},keypress:function(e){i.elements.container.scrollLeft=0},keydown:function(e){i.elements.container.scrollLeft=0;var t=u(this.value,i.elements.labelContainer)+20,n=a-r;n<0&&(n=0),this.style.width=Math.min(t,a-r-0)+"px",this.style.maxWidth=n+"px"},keyup:function(t){i.elements.container.scrollLeft=0,"return"===e.Event.whichKey(event)&&(o.call(this,event),i.switchToReadView())},change:function(e){},focusin:function(e){e.preventDefault()},focus:function(e){e.preventDefault(),e.stopPropagation()},blur:function(e){o(e)},click:function(e){e.stopPropagation(),this.offsetWidth-18<e.clientX-this.getBoundingClientRect().left&&(this.value=i.value.options.label,i.switchToReadView(),i._lastClickTime=Date.now())},mouseup:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()}}});i.elements.container.addEventListener("scroll",n,!0),r=i.elements.labelContainer.getPosition().x,i.elements.container.scrollLeft=0,setTimeout(function(){if(i._cellReadWriteView){i.elements.container.scrollLeft=0;var e=i.getContent().getDimensions().width,t=u(s.value,i.elements.labelContainer)+20;s.style.width=t+"px";var n=s.getPosition().x;s.style.maxWidth=e-n-0+"px",i._cellReadWriteView.setSelectionRange(0,i._cellReadWriteView.value.length)}},1),s.setAttribute("size",s.value.length),this.elements.labelContainer.textContent="",this.elements.labelContainer.setContent(s),this._cellReadWriteView=s,s.focus()}else{var r;i.elements.container.removeEventListener("scroll",n),this.elements.labelContainer.setContent(t)}},setIcons:function(t){var i,n=this,o="";t instanceof Array&&(t&&t.length>0?(i=this._icons&&this._icons.length===t.length&&this._icons.every(function(e,i){return e===t[i]}))||(this._icons=e.clone(t),t&&t.forEach(function(e,t){o+=n.addIcon(e)})):(i=this._icons&&this._icons.length===t.length&&this._icons.every(function(e,i){return e===t[i]}))||(this._icons=e.clone(t)));"string"==typeof t&&(o+=n.addIcon(t,"css")),i||(this.elements.iconsContainer.innerHTML=o),""!==o&&this.elements.iconsContainer.show()},select:function(){this._lastClickTime=Date.now(),this._parent()},addIcon:function(e,t){var i;switch(t){default:i='<div class="wux-layouts-treeview-icon" style="display:inline-flex;background-image:url('+e+')"></div>';break;case"css":i='<div class="wux-layouts-treeview-icon" style="display:inline-flex;" wux-icon-name="'+e+'" ></div>'}return i},_observeEvents:function(){var e=this;this.elements.expanderContainer.addEvent(n.POINTERUP,function(t){if(t.stopPropagation(),1===t.which){var i=e.value;i.options.children&&"noExpandState"!==e._expandState&&"expandingState"!==e._expandState&&(i.isExpanded()&&"partiallyExpandedState"!==i._expandState?i.collapse():(e._setExpanderState("expandingState"),i.expand()))}})},handleEvents:function(){},_setExpanderState:function(e){if(e){this.elements.expanderContainer.setAttribute("data-wux-state",{noExpandState:"noChildren",noExpandStateButCouldBeExpand:"noChildren",noExpandStateButCouldBeCollapse:"noChildren",expandingState:"expanding",partiallyExpandedState:"partiallyExpanded",collapseState:"expanded",expandState:"collapsed"}[e])}},_setDepth:function(e){var t=this.value;void 0===e&&(e=t.getParents().length);this.elements.container.setStyle("padding-left",20);var i,n,o,a,s="";for(i=0;i<e;i++)s=s+(n=(a=t.getNthParent(e-1-i))&&a.isLastChild()&&i<=e-2?"transparent":"")+(o=i===e-1&&t.isLastChild()?"50%":"100%");if(void 0===l[s]){var r="";for(i=0;i<e;i++)n=(a=t.getNthParent(e-1-i))&&a.isLastChild()&&i<=e-2?"border-color:transparent":"",o=i===e-1&&t.isLastChild()?"50%":"100%",r=r+'<li class="wux-layouts-treeview-link" data-parentislastchild="'+(t.getParent()&&t.getParent().isLastChild()&&i<=e-1?"true":"false")+'" data-islastchild="'+(t.isLastChild()?"true":"false")+'" data-depth="'+i+"/"+(e-1)+'" style="'+n+";height: "+o+";margin-right:"+(i===e-1?0:25)+"px;margin-left:"+(0===i?25:0)+'px"></li>';this.elements.linksContainer.innerHTML=r,l[s]=r,this.elements.linksContainer.inject(this.elements.layout,"top")}else this.elements.linksContainer.innerHTML=l[s];this.getContent().setAttribute("data-node-depth",e)}});return t.inherit({name:"TweakerTreeNodeModel",publishedProperties:{value:{defaultValue:null,type:"object"}},_postBuildView:function(){if(void 0!==this.elements.container){this.elements.internalView=new d;var e=this;this.elements.internalView.elements.labelContainer.addEventListener(n.POINTERUP,function(){var t=0;if(void 0===e.elements.internalView._lastClickTime){e.elements.internalView._lastClickTime=Date.now();var i=e.value.getTreeDocument(),n=i.getXSO().onChange(function(){delete e.elements.internalView._lastClickTime,console.log("-"),i.getXSO()._modelEvents.unsubscribe(n)})}else t=Date.now()-e.elements.internalView._lastClickTime;console.log(t,e.value.isSelected()),t>300&&(e.elements.internalView.readOnly=!1,e.elements.internalView._lastClickTime=void 0)}),this.elements.internalView.inject(this.elements.container)}this._parent()},_applyReadOnly:function(){},handleEvents:function(){}})}),define("DS/Tweakers/TweakerParentTreeNodeModel",["DS/Tweakers/TweakerBase","DS/Utilities/Utils","DS/Utilities/Dom"],function(e,t,i){"use strict";var n=e.inherit({name:"tweakerParentTreeNodeModel",publishedProperties:{value:{defaultValue:void 0,type:"DS/TreeModel/TreeNodeModel"}}});n.prototype.managePreselection=function(e){return this.elements._viewModule.managePreselection(e)},n.prototype.manageSelection=function(e,t,i){return this.elements._viewModule.manageSelection(e,t,i)};var o=function(t,i){e.prototype.baseViewModule.call(this,t,i)};return t.applyMixin(o,e.prototype.baseViewModule),o.prototype.buildView=function(){this._view=UWA.createElement("div",{class:"wux-ui-tweakerParentTreeNodeModel"}),this.setValue(this._tweaker.value)},o.prototype.destroy=function(){this._view.destroy()},o.prototype.handleEvents=function(){var e=this;i.addEventOnElement(this,this._view,"mouseleave",function(t){e._getTreeNodeModelFromEvent(t)===e._tweaker.value&&e.preselectedNode&&(e.preselectedNode.unPreSelect(),e.preselectedNode=void 0)})},o.prototype._getTreeNodeModelFromEvent=function(e){for(var t=this._tweaker.value,n=0;n<this._icons.length;n++)if(i.isElementInside(e.target,this._icons[n])){t=t.getVisibleChildren()[n];break}return t},o.prototype.managePreselection=function(e){var t=this._getTreeNodeModelFromEvent(e);return t===this._tweaker.value?(this.preselectedNode&&(this.preselectedNode.unPreSelect(),this.preselectedNode=void 0),!1):(this.preselectedNode!==t&&(this.preselectedNode&&this.preselectedNode.unPreSelect(),t.preSelect(),this.preselectedNode=t),!0)},o.prototype.manageSelection=function(e,t,i){var n=this._getTreeNodeModelFromEvent(e);if(n===this._tweaker.value)return!1;if(e.shiftKey){var o,a=!1;i.nodeModel._getRowID()<this._tweaker.value._getRowID()?(o=!0,this._latestNodeSelected=void 0):i.nodeModel._getRowID()>this._tweaker.value._getRowID()?(o=!1,this._latestNodeSelected=void 0):this._latestNodeSelected&&this._latestNodeSelected!==n&&(o=!1,a=!0);for(var s=this._tweaker.value.getChildren(),r=0;r<s.length;r++)s[r]===n||a&&s[r]===this._latestNodeSelected?(s[r].select(),n!==this._latestNodeSelected&&(o=!o)):o?s[r].select():s[r].unselect()}else{if(t&&n.isSelected())n.unselect();else{var l=!t;n.select(l)}this._latestNodeSelected=n}return!0},o.prototype.setValue=function(e){var t=this,n=e.getVisibleChildren();if(this._selectedNodes=[],this.preselectedNode=void 0,this._view.textContent="",this._icons=[],this._listenerTokensForNodeModelUpdate&&this._listenerTokensForNodeModelUpdate.length>0)for(var o=0;o<this._listenerTokensForNodeModelUpdate.length;o++)this._listenerTokensForNodeModelUpdate[o].node.removeEventListener(this._listenerTokensForNodeModelUpdate[o].token);this._listenerTokensForNodeModelUpdate=[],e.onSelect(function(){t._view.setAttribute("is-selected",!0)}),e.onUnselect(function(){t._view.setAttribute("is-selected",!1)});for(o=0;o<n.length;o++)!function(){t._icons.push(i.generateIcon({className:"wux-tweakers-clickable-icon",iconPath:n[o].getIcons()[0]}).inject(t._view));var e,a=n[o],s=t._icons[o];s.setAttribute("node-is-hidden",a._specTreeVisibility?"":"true"),a.onSelect(function(){s.setAttribute("is-selected",!0)}),a.onUnselect(function(){s.setAttribute("is-selected",!1)}),a.onPreselect(function(){if(t.preselectedNode){if(t.preselectedNode===a)return;t.preselectedNode.unPreSelect()}s.setAttribute("is-preselected",!0),t.preselectedNode=a}),a.onUnpreselect(function(){t.preselectedNode===a&&(t.preselectedNode=null),s.setAttribute("is-preselected",!1)}),e=a.addEventListener("nodeModelUpdate",function(){s.setAttribute("node-is-hidden",a._specTreeVisibility?"":"true")}),t._listenerTokensForNodeModelUpdate.push({node:a,token:e})}()},n.prototype.VIEW_MODULES={clickableIcons:{classObject:o},clickableIcons_readOnly:{classObject:o}},n});__extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerFile",["require","exports","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/TweakerBase","DS/Controls/FilePicker","DS/Core/WebUXComponents","DS/WebRecordEnabler/Adapter"],function(e,t,i,n,o,a,s,r){"use strict";var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{placeholder:{defaultValue:"",type:"string",category:"Appearance"},displayStyle:{defaultValue:"filePicker",type:"string",category:"Appearance"}}},enumerable:!1,configurable:!0}),t.prototype._applyPlaceholder=function(e){this.elements._viewModule&&this.elements._viewModule.setPlaceholder&&this.elements._viewModule.setPlaceholder(this.placeholder)},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("placeholder")&&this._applyPlaceholder(t.placeholder)},t.prototype.getStringFromValue=function(e){return e?e.name:""},t}(o),u=function(e,t){o.prototype.baseViewModule.call(this,e,t)};i.applyMixin(u,o.prototype.baseViewModule),u.prototype.setValue=function(){},u.prototype.setDisabled=function(){},u.prototype.setPlaceholder=function(){};var d=function(e,t){u.call(this,e,t)};return i.applyMixin(d,u),d.prototype.buildView=function(){var e=this._tweaker,t=e._getCurrentTouchMode();e.elements.container.classList.add("wux-tweakerfile"),this._filePicker=new a({disabled:e.disabled,touchMode:t,placeholder:e.placeholder,value:e.value}),this._view=this._filePicker},d.prototype.handleEvents=function(){var e=this;n.addEventOnElement(e,e._filePicker,"change",function(t){t.stopPropagation(),n.pushUserInteractionContext(),e.setTweakerValue(t.target.dsModel.value),n.popUserInteractionContext()})},d.prototype.setPlaceholder=function(e){this._view&&(this._filePicker.placeholder=e)},d.prototype.setValue=function(e,t){this._view&&(this._filePicker.value=e)},d.prototype.setTouchMode=function(e){this._view&&(this._filePicker.touchMode=e)},d.prototype.destroy=function(){this._tweaker.elements.container&&this._tweaker.elements.container.classList.remove("wux-tweakerfile"),u.prototype.destroy.call(this)},l.prototype.baseViewModule=u,l.prototype.VIEW_MODULES={filePicker:{classObject:d}},s.addClass(l,"TweakerFile"),l.prototype.markForRecordFlag=!0,r.register(l,"DS/ControlsRec/AbstractRec"),l});__extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerBoolean",["require","exports","UWA/Core","DS/Tweakers/TweakerBase","DS/Controls/Toggle","DS/Utilities/Dom","DS/Utilities/Utils","DS/Core/WebUXComponents","DS/WebRecordEnabler/Adapter","DS/Utilities/WUXUWAUtils"],function(e,t,i,n,o,a,s,r,l,u){"use strict";var d=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return u.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{value:{defaultValue:!1,type:"boolean",advancedSetter:!0},valueType:{defaultValue:"boolean",type:"string"},displayStyle:{defaultValue:"checkbox",type:"string"},label:{defaultValue:"",type:"string"}}},enumerable:!1,configurable:!0}),t.prototype._upgradeValue=function(e){return void 0===e?e:"boolean"==typeof e?e:("string"!=typeof e||!e.match(/^0+$/)&&!e.match(/^false$/i))&&0!==e&&("undefined"===e?void 0:Boolean(e))},t.prototype._applyProperties=function(t){e.prototype._applyProperties.call(this,t),this.isDirty("label")&&this._applyLabel(t.label)},t.prototype._applyLabel=function(e,t){this.elements._viewModule&&this.elements._viewModule.setLabel(this._properties.label.value,e)},t}(n);function p(e){var t=[{value:"checked",icon:"check"},{value:"unchecked",icon:"wrong"},{value:"checked_mixed",icon:"minus"},{value:"unchecked_mixed",icon:"minus"}];if(!e||0===e.length)return t;for(var i=0;i<e.length;i++)"true"===e[i].value||!0===e[i].value?t[0].icon=e[i].icon||"":"false"===e[i].value||!1===e[i].value?t[1].icon=e[i].icon||"":"undefined"!==e[i].value&&void 0!==e[i].value||(t[2].icon=e[i].icon||"",t[3].icon=e[i].icon||"");return t}var h=function(e,t){n.prototype.baseViewModule.call(this,e,t)};s.applyMixin(h,n.prototype.baseViewModule),h.prototype.isValueDisplayedAsString=function(e){return!1};var c=function(e,t){h.call(this,e,t)};s.applyMixin(c,h),c.prototype.buildView=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions.displayStyle;this._tweaker.getContent().classList.add("wux-tweakers-boolean","wux-tweakers-boolean-".concat(e.toLocaleLowerCase()));var t=this._options.viewOptions||{};t.type=e,t.touchMode=this._tweaker._getCurrentTouchMode(),t.fireOnlyFromUIInteractionFlag=!0,t.label=this._tweaker.label?this._tweaker.label:"","toggleIcon"===t.type&&(t.iconsReference=p.call(this,this._tweaker.possibleValues)),this._view=new o(t),"toggleIcon"===t.type&&this._view.getContent().addClassName("wux-ui-style-smartIcon"),this.setValue(this._tweaker.value)}},c.prototype.destroy=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions.displayStyle;this._tweaker.getContent().classList.remove("wux-tweakers-boolean","wux-tweakers-boolean-".concat(e.toLocaleLowerCase()))}h.prototype.destroy.call(this)},c.prototype.setPossibleValues=function(e){"toggleIcon"===this._options.viewOptions.displayStyle&&(this._view.iconsReference=p.call(this,e))},c.prototype.computeTweakerContentLength=function(){return this._tweaker._getCurrentTouchMode()?19:14},c.prototype.handleEvents=function(){var e=this._view,t=this._tweaker,i=this;e.addEventListener("change",function(n){n.stopPropagation(),t.allowResetToUndefinedByUIFlag&&!e.checkFlag&&t.value?(e.mixedState=!0,i.setTweakerValue(void 0)):i.setTweakerValue(e.checkFlag)})},c.prototype.setValue=function(e,t){this._view&&(void 0===this._tweaker.value||null===this._tweaker.value?(this._view.mixedState=!0,this._view.checkFlag=!1):(this._view.mixedState=!1,this._view.checkFlag=this._tweaker.value))},c.prototype.setTouchMode=function(e,t){this._view&&(this._view.touchMode=e)},c.prototype.setLabel=function(e,t){this._view.label!==e&&(this._view.label=e||"")};var v=function(e,t){this._tweakerView=void 0,this._labelView=void 0,h.call(this,e,t)};return s.applyMixin(v,h),v.prototype.buildView=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions.displayStyle;this._tweaker.getContent().classList.add("wux-tweakers-boolean-readonly","wux-tweakers-boolean-".concat(e.toLocaleLowerCase())),this._view=i.createElement("div"),this._tweakerView=i.createElement("div"),this._tweakerView.inject(this._view),this.setTouchMode(this._tweaker._getCurrentTouchMode()),this.setValue(this._tweaker.value),this.setLabel(this._tweaker.label)}},v.prototype.destroy=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions.displayStyle;this._tweaker.getContent().classList.remove("wux-tweakers-boolean-readonly","wux-tweakers-boolean-".concat(e.toLocaleLowerCase()))}h.prototype.destroy.call(this)},v.prototype.setValue=function(e,t){if(this._view){this._tweaker._updateInformationToDisplay(e);var i=this._tweaker._currentValueIcon;void 0===i&&(i=void 0===this._tweaker.value||null===this._tweaker.value?"minus":this._tweaker.value?"check":"wrong"),a.generateIcon(i,{target:this._tweakerView})}},v.prototype.setTouchMode=function(e,t){this._view&&(e?this._view.setAttributeNode(document.createAttribute("touch-mode")):this._view.removeAttribute("touch-mode"))},v.prototype.computeTweakerContentLength=function(){return this._tweaker._getCurrentTouchMode()?19:14},v.prototype.setLabel=function(e,t){if(this._labelView&&!e)return this._labelView=void 0,void this._view.removeChild(this._view.querySelector("label"));!this._labelView&&e&&(this._labelView=i.createElement("label",{class:"wux-label"}),this._labelView.inject(this._view)),this._labelView&&this._labelView.innerText!==e&&(this._labelView.innerText=e)},d.prototype.baseViewModule=h,d.prototype.VIEW_MODULES={switch:{classObject:c,options:{viewOptions:{displayStyle:"switch"}}},readOnly:{classObject:v,options:{viewOptions:{displayStyle:"switch"}}},checkbox:{classObject:c,options:{viewOptions:{displayStyle:"checkbox"}}},radio:{classObject:c,options:{viewOptions:{displayStyle:"radio"}}},toggleIcon_readOnly:{classObject:v,options:{viewOptions:{readOnly:!0,displayStyle:"toggleIcon"}}},toggleIcon:{classObject:c,options:{viewOptions:{displayStyle:"toggleIcon"}}}},d.prototype.registerViewModule=function(e,t){},r.addClass(d,"TweakerBoolean"),d.prototype.markForRecordFlag=!0,l.register(d,"DS/ControlsRec/AbstractRec"),d}),define("DS/Tweakers/TweakerRange",["UWA/Core","DS/Utilities/Utils","DS/Tweakers/TweakerBase"],function(e,t,i){"use strict";var n=i.inherit({name:"tweakerBase",publishedProperties:{stepValue:{defaultValue:void 0,type:"object"}},_applyStepValue:function(e){this.elements._viewModule&&this.elements._viewModule.setStepValue?this.elements._viewModule.setStepValue(this.stepValue):void 0!==this.elements.internalView&&(this.elements.internalView.stepValue=this.stepValue)},_applyProperties:function(e){this._parent(e),this.isDirty("stepValue")&&this._applyStepValue(e.stepValue)}}),o=function(e,t){i.prototype.baseViewModule.call(this,e,t)};return t.applyMixin(o,i.prototype.baseViewModule),o.prototype.setStepValue=function(e){this._view&&(this._view.stepValue=e)},n.prototype.baseViewModule=o,n.prototype.VIEW_MODULES={},n.prototype.registerViewModule=function(e,t){},n}),define("DS/Tweakers/TweakerNumber",["UWA/Core","DS/Utilities/Utils","DS/Tweakers/TweakerBase","DS/Tweakers/TweakerRange","DS/Controls/SpinBox","DS/Controls/Slider","DS/Controls/ProgressBar","DS/Controls/ColoredSlider","DS/Controls/Button","DS/Controls/ComboBox","DS/Utilities/KeyboardUtils","DS/Utilities/Dom","DS/Tweakers/TweakerUtils","i18n!DS/Tweakers/assets/nls/translation"],function(e,t,i,n,o,a,s,r,l,u,d,p,h,c){"use strict";var v=n.inherit({name:"tweakerNumber",publishedProperties:{decimals:{defaultValue:5,type:"number"},units:{defaultValue:"",type:"string"},colorFrom:{defaultValue:"#000",type:"string"},colorTo:{defaultValue:"#fff",type:"string"},displayStyle:{defaultValue:"spinBox",type:"string"},value:{defaultValue:0,type:"number",advancedSetter:!0,recordFlag:!0},valueType:{defaultValue:"number",type:"string"},minValue:{defaultValue:void 0,type:"number"},maxValue:{defaultValue:void 0,type:"number"},stepValue:{defaultValue:.1,type:"number"},referenceValue:{defaultValue:void 0,type:"number"},highExponentProperty:{defaultValue:6,type:"integer",category:"Behavior"},lowExponentProperty:{defaultValue:6,type:"integer",category:"Behavior"}},_preBuildView:function(){this._parent(),this.elements.container.addClassName("wux-tweakers-number")},_applyDecimals:function(e){this.elements._viewModule&&this.elements._viewModule.setDecimals&&this.elements._viewModule.setDecimals(this.decimals)},_applyHighExponentProperty:function(e){this.elements._viewModule&&this.elements._viewModule.setHighExponentProperty&&this.elements._viewModule.setHighExponentProperty(this.highExponentProperty)},_applyLowExponentProperty:function(e){this.elements._viewModule&&this.elements._viewModule.setLowExponentProperty&&this.elements._viewModule.setLowExponentProperty(this.lowExponentProperty)},_applyUnits:function(e){this._suffix=this.units,this.elements._viewModule&&this.elements._viewModule.setSuffix&&this.elements._viewModule.setSuffix(this.units)},_applyColorFrom:function(){this.elements._viewModule&&this.elements._viewModule.setColorFrom&&this.elements._viewModule.setColorFrom(this.colorFrom)},_applyColorTo:function(){this.elements._viewModule&&this.elements._viewModule.setColorTo&&this.elements._viewModule.setColorTo(this.colorTo)},_applyProperties:function(e){this._parent(e),this.isDirty("decimals")&&this._applyDecimals(e.decimals),this.isDirty("highExponentProperty")&&this._applyHighExponentProperty(e.highExponentProperty),this.isDirty("lowExponentProperty")&&this._applyLowExponentProperty(e.lowExponentProperty),this.isDirty("units")&&this._applyUnits(e.units),this.isDirty("colorFrom")&&this._applyColorFrom(e.colorFrom),this.isDirty("colorTo")&&this._applyColorTo(e.colorTo)},getStringFromValue:function(e){var t=function(e){return 1.1.toLocaleString(e).substring(1,2)}.call(this,WUX.currentLanguage);return null==e?"":e.toString().replace(".",t)},_upgradeValue:function(e){return t.upgradeValueAsNumber.call(this,e)},onPostEdit:function(e){this.elements._viewModule&&this.elements._viewModule.valueMustBeValidated()&&this.elements._viewModule.validateValue(),this._parent(e)}}),w=function(e,t){n.prototype.baseViewModule.call(this,e,t)};t.applyMixin(w,n.prototype.baseViewModule),w.prototype.setDecimals=function(e){},w.prototype.setSuffix=function(e){},w.prototype.setColorFrom=function(e){},w.prototype.setColorTo=function(e){},w.prototype._getElementToFocus=function(){return this._view._getElementToFocus()};var y=function(e,t){w.call(this,e,t)};t.applyMixin(y,w),y.prototype.buildView=function(){var e=this._options.viewOptions||{};e.minValue=this._tweaker.minValue,e.maxValue=this._tweaker.maxValue,e.stepValue=this._tweaker.stepValue,e.pageStepValue=10*this._tweaker.stepValue,e.decimals=this._tweaker.decimals,e.units=this._tweaker.units,e.touchMode=this._tweaker._getCurrentTouchMode(),e.selectAllOnFocus=!0,e.fireOnlyFromUIInteractionFlag=!0,e.allowUndefinedFlag=this._tweaker.allowResetToUndefinedByUIFlag,"spinBoxLite"===this._tweaker.displayStyle&&(e.displayStyle="lite"),this._view=new o(e),this._tweaker.getContent().addClassName("wux-tweakers-number"),this.setValue(this._tweaker.value),this._tweaker&&this._tweaker.highlightModel&&i.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value)},y.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i&&t&&!t.readOnly&&(p.addEventOnElement(t,i,"beginEdit",function(e){e.stopPropagation(),t.onPreEdit(null,"beginEdit")}),p.addEventOnElement(t,i,"uncommittedChange",function(e){e.stopPropagation()}),p.addEventOnElement(t,i,"change",function(t){t.stopPropagation(),e.setTweakerValue(i.value)}),p.addEventOnElement(t,i,"endEdit",function(e){e.stopPropagation(),t.onPostEdit(null,"endEdit")}),p.addEventOnElement(t,i,"focus",function(e){e.stopPropagation()}))},y.prototype.setValue=function(e){var t=this._tweaker;if(this._view&&t){var i=parseFloat(e);isNaN(i)?this._view.value=void 0:this._view.value=i}},y.prototype.computeTweakerContentLength=function(){return this._tweaker.touchMode?200:150},y.prototype.setReadOnly=function(e){this._view&&(this._view.destroy(),this._view=void 0),this.buildView(),this.handleEvents(),this.inject(this._tweaker.getContent()),this._tweaker.elements.internalView=this._view},y.prototype.setDecimals=function(e){this._view&&(this._view.decimals=e)},y.prototype.setHighExponentProperty=function(e){this._view&&(this._view.highExponentProperty=e)},y.prototype.setLowExponentProperty=function(e){this._view&&(this._view.lowExponentProperty=e)},y.prototype.setSuffix=function(e){this._view&&this._tweaker&&(this._view.units=e)},y.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._view&&(this._view.allowUndefinedFlag=e)},y.prototype.setHighlightModel=function(e){void 0!==this._tweaker.value&&null!==this._tweaker.value&&i.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value)},y.prototype.removeHighlightModel=function(){this._view&&this._view._fakeInputForhighlight&&(this._view._fakeInputForhighlight.style.display="none"),i.prototype.VIEW_MODULES.readOnly.classObject.prototype.setHighlightModel.call(this,void 0)},y.prototype._shouldFormatHTMLValue=function(e){return i.prototype.VIEW_MODULES.readOnly.classObject.prototype._shouldFormatHTMLValue.call(this,e)},y.prototype._cleanContainerProperties=function(){return i.prototype.VIEW_MODULES.readOnly.classObject.prototype._cleanContainerProperties.call(this)},y.prototype._getLabelDivToConsiderForHighlight=function(){return h._getOrCreateFakeInputForFindHighlight(this._tweaker,this._view,this._view._myInput)},y.prototype.valueMustBeValidated=function(){var e=!1;if(this._view&&this._view.editHasBegun&&this._view.elements.inputField){var t=parseFloat(this._view.elements.inputField.value);this._view.lastValueWhenEnter!==t&&(e=!0)}return e},y.prototype.validateValue=function(){var e=!1;return this._view&&this._view.elements.inputField&&(e=this._view._validateValue(this._view.elements.inputField.value))&&this.setTweakerValue(this._view.value),e};var _=function(e,t){w.call(this,e,t)};t.applyMixin(_,w),_.prototype.buildView=function(){var e=this._options.viewOptions||{};e.minValue=this._tweaker.minValue,e.maxValue=this._tweaker.maxValue,e.stepValue=this._tweaker.stepValue,e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,e.handleEditionCancel=!1,this._view=new a(e),this._tweaker.getContent().addClassName("wux-tweakers-number"),this.setValue(this._tweaker.value)},_.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i&&t&&!t.readOnly&&(p.addEventOnElement(t,i,"beginEdit",function(e){e.stopPropagation(),t.onPreEdit(null,"beginEdit")}),p.addEventOnElement(t,i,"change",function(t){t.stopPropagation(),e.setTweakerValue(i.value)}),p.addEventOnElement(t,i,"endEdit",function(e){e.stopPropagation(),t.onPostEdit(null,"endEdit")}),p.addEventOnElement(t,i,"keydown",function(e){e.keyCode===d.ESCAPE&&(t.onCancelEdit(),t.onPreEdit(null,"cancelEdit-preEdit"))}))},_.prototype.setValue=function(e){this._view&&(this._view.value=e)},_.prototype.computeTweakerContentLength=function(){return this._tweaker.touchMode?200:150};var f=function(e,t){_.call(this,e,t)};t.applyMixin(f,_),f.prototype.buildView=function(){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.colorFrom=this._tweaker.colorFrom,e.colorTo=this._tweaker.colorTo,e.minValue=this._tweaker.minValue,e.maxValue=this._tweaker.maxValue,e.stepValue=this._tweaker.stepValue,e.fireOnlyFromUIInteractionFlag=!0,e.handleEditionCancel=!1,this._view=new r(e),this._tweaker.getContent().addClassName("wux-tweakers-number"),this.setValue(this._tweaker.value)},f.prototype.setValue=function(e){var t=this._tweaker;if(this._view&&t){var i=parseFloat(e);isNaN(i)?this._view.value=void 0:this._view.value=i}},f.prototype.setColorFrom=function(e){this._view&&this._tweaker&&!this._tweaker.readOnly&&(this._view.colorFrom=e)},f.prototype.setColorTo=function(e){this._view&&this._tweaker&&!this._tweaker.readOnly&&(this._view.colorTo=e)},f.prototype.computeTweakerContentLength=function(){return this._tweaker.touchMode?200:150};var g=function(e,t){w.call(this,e,t)};t.applyMixin(g,w),g.prototype.buildView=function(){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,this._view=new s(e),this.setValue(this._tweaker.value),this._tweaker.getContent().addClassName("wux-tweakers-number"),this._tweaker&&this._tweaker.highlightModel&&i.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker._currentValueLabel+"%")},g.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i&&t&&p.addEventOnElement(t,i,"change",function(t){t.stopPropagation(),e.setTweakerValue(i.value)})},g.prototype.setValue=function(e){this._view&&(this._view.value=e,this._tweaker&&this._tweaker.highlightModel&&(this._previousFormatHTMLValueProperties={},i.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value+"%")))},g.prototype.computeTweakerContentLength=function(){return this._tweaker.touchMode?200:150},g.prototype.setHighlightModel=function(e){void 0!==this._tweaker.value&&null!==this._tweaker.value&&i.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value)},g.prototype._getLabelDivToConsiderForHighlight=function(){return this._view.elements.linearStatus},g.prototype._getSuffixToConsiderForHighlight=function(){return this._tweaker._suffix},g.prototype.removeHighlightModel=function(){i.prototype.VIEW_MODULES.readOnly.classObject.prototype.setHighlightModel.call(this,void 0)},g.prototype._shouldFormatHTMLValue=function(e){return i.prototype.VIEW_MODULES.readOnly.classObject.prototype._shouldFormatHTMLValue.call(this,e)},g.prototype._cleanContainerProperties=function(){return i.prototype.VIEW_MODULES.readOnly.classObject.prototype._cleanContainerProperties.call(this)};var m=function(e,t){w.call(this,e,t)};t.applyMixin(m,w),m.prototype.buildView=function(){this._tweaker.getContent().addClassName("wux-tweakers-number wux-tweakers-number-pagination");var t=this._tweaker._getCurrentTouchMode();this._buttonFirstPage=new l({touchMode:t,icon:{iconName:"to-start",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon"}),this._buttonPrevious=new l({touchMode:t,icon:{iconName:"expand-left",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon"}),this._buttonNext=new l({touchMode:t,icon:{iconName:"expand-right",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon"}),this._buttonLastPage=new l({touchMode:t,icon:{iconName:"to-end",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon"}),this._comboBox=new u({enableSearchFlag:!0,displayStyle:"lite"}),this.setElementsList(),this._label=new e.Element("span"),this.buildLabel(),this._view=[this._buttonFirstPage,this._buttonPrevious,this._label,this._buttonNext,this._buttonLastPage],this._tweaker.getContent().addClassName("wux-tweakers-number"),this.handleDisabledButtons()},m.prototype._getElementToFocus=function(){return this._buttonNext.getContent()},m.prototype.handleEvents=function(){var e=this,t=this._tweaker;this._view&&t&&(p.addEventOnElement(t,this._buttonFirstPage,"buttonclick",function(i){i.stopPropagation(),e.setTweakerValue(t.minValue)}),p.addEventOnElement(t,this._buttonPrevious,"buttonclick",function(i){i.stopPropagation(),e.setTweakerValue(t.value-1)}),p.addEventOnElement(t,this._buttonNext,"buttonclick",function(i){i.stopPropagation(),e.setTweakerValue(t.value+1)}),p.addEventOnElement(t,this._buttonLastPage,"buttonclick",function(i){i.stopPropagation(),e.setTweakerValue(t.maxValue)}),p.addEventOnElement(t,this._comboBox,"change",function(t){t.stopPropagation(),e.setTweakerValue(e._comboBox.value)}))},m.prototype.setValue=function(e){this._view&&(void 0===this._tweaker.maxValue?this.buildLabel():this._comboBox.value=e,this.handleDisabledButtons())},m.prototype.buildLabel=function(){var e=this._tweaker,t=c.get("PaginationLabel");for(this._label.innerHTML="";t;)0!==t.indexOf("{")?-1===t.indexOf("{")?(this._label.appendText(t),t=""):(this._label.appendText(t.substring(0,t.indexOf("{"))),t=t.substring(t.indexOf("{"),t.length)):("{1}"===t.substring(0,t.indexOf("}")+1)?void 0!==e.maxValue?this._comboBox.inject(this._label):this._label.appendText(e.value):"{2}"===t.substring(0,t.indexOf("}")+1)&&(void 0!==e.maxValue?this._label.appendText(e.maxValue):this._label.appendText(c.get("Undefined"))),t=t.substring(t.indexOf("}")+1,t.length))},m.prototype.setElementsList=function(){var e=[],t=this._tweaker;if(t.maxValue&&t.minValue){for(var i=t.minValue;i<=t.maxValue;i++)e.push({valueItem:i,labelItem:i.toString()});this._comboBox.setProperties({elementsList:e,value:t.value})}},m.prototype.handleDisabledButtons=function(){var e=this._tweaker;e.value===e.minValue&&e.value===e.maxValue?(this._buttonFirstPage.disabled=!0,this._buttonPrevious.disabled=!0,this._buttonNext.disabled=!0,this._buttonLastPage.disabled=!0):e.value===e.minValue?(this._buttonFirstPage.disabled=!0,this._buttonPrevious.disabled=!0,this._buttonNext.disabled=!1,this._buttonLastPage.disabled=void 0===e.maxValue):e.value===e.maxValue?(this._buttonFirstPage.disabled=!1,this._buttonPrevious.disabled=!1,this._buttonNext.disabled=!0,this._buttonLastPage.disabled=!0):(this._buttonFirstPage.disabled=!1,this._buttonPrevious.disabled=!1,this._buttonNext.disabled=!1,this._buttonLastPage.disabled=void 0===e.maxValue)},m.prototype.setMinValue=function(){this.handleDisabledButtons(),this.setElementsList()},m.prototype.setMaxValue=function(){this.setElementsList(),this.buildLabel(),this.handleDisabledButtons()};var b=function(e,t){w.call(this,e,t)};return t.applyMixin(b,w),b.prototype.buildView=function(){this._tweaker.getContent().addClassName("wux-tweakers-number-sliderAndSpinBox");var e=this._options.viewOptions||{};e.fireOnlyFromUIInteractionFlag=!0,this._sliderVM=new _(this._tweaker,e),this._sliderVM._view.inject(this._tweaker.getContent()),this._spinBoxVM=new y(this._tweaker,e),this._spinBoxVM._view.inject(this._tweaker.getContent()),this._tweaker.getContent().addClassName("wux-tweakers-number")},b.prototype._getElementToFocus=function(){return this._spinBoxVM._getElementToFocus()},b.prototype.setValue=function(e){this._sliderVM.setValue(e),this._spinBoxVM.setValue(e)},b.prototype.setMinValue=function(e){this._sliderVM.setMinValue(e),this._spinBoxVM.setMinValue(e)},b.prototype.setMaxValue=function(e){this._sliderVM.setMaxValue(e),this._spinBoxVM.setMaxValue(e)},b.prototype.setTouchMode=function(e){this._sliderVM.setTouchMode(e),this._spinBoxVM.setTouchMode(e)},b.prototype.destroy=function(){this._tweaker.elements.container.removeClassName("wux-tweakers-number-sliderAndSpinBox"),this._sliderVM.destroy(),this._spinBoxVM.destroy(),w.prototype.destroy.call(this)},v.prototype.baseViewModule=w,v.prototype.VIEW_MODULES={spinBox:{classObject:y},slider:{classObject:_},progress:{classObject:_},progress_readOnly:{classObject:g},colorSlider:{classObject:f},pagination:{classObject:m},sliderAndSpinBox:{classObject:b},spinBoxLite:{classObject:y}},v.prototype.registerViewModule=function(e,t){},v}),define("DS/Tweakers/TweakerVector",["UWA/Core","DS/Utilities/Utils","DS/Tweakers/TweakerRange","DS/Controls/SpinBox"],function(e,t,i,n){"use strict";var o=i.inherit({name:"TweakerVector",publishedProperties:{units:{defaultValue:"",type:"string",category:"Appearance"},definition:{defaultValue:["x","y"],type:"array",category:"Model"},value:{defaultValue:void 0,type:"array",category:"Model",advancedSetter:!0},displayStyle:{defaultValue:"spinBoxes",type:"string",category:"Appearance"}},_preBuildView:function(){this._parent(),this.elements.container.addClassName("wux-tweakers-vector-view")},_upgradeValue:function(i){if(null==i)return i;var n=i;if(i instanceof Array)n=i;else if("string"==typeof i)try{n=JSON.parse(i)}catch(e){n=t.upgradeValueAsNumber(i)}else n=t.upgradeValueAsNumber(i);if(void 0===n)return this.value;n instanceof Array||(n=[n]);for(var o=this.definition.length,a=e.clone(n),s=a.length,r=0;a.length<o;++r)a.push(a[r%s]);return a.length=o,a.forEach(function(e,i){a[i]=t.upgradeValueAsNumber(e)}),a},compare:function(e,t){if(void 0===e&&void 0!==t)return 2;if(void 0!==e&&void 0===t)return-2;if(void 0===e&&void 0===t)return 0;for(var i=0,n=0;n<e.length;n++)i+=e[n]*e[n];var o=0;for(n=0;n<t.length;n++)o+=t[n]*t[n];return i===o?0:i<o?-1:1},_applyUnits:function(e){this.elements._viewModule&&this.elements._viewModule.setUnits(this.units)},_applyDefinition:function(e){this.value=this._upgradeValue(this.value),this.elements._viewModule&&this.elements._viewModule.setDefinition(this.definition,e)},_applyProperties:function(e){this._parent(e);var t=!(this.isDirty("displayStyle")||this.isDirty("readOnly"));t&&this.isDirty("definition")&&this._applyDefinition(e.definition),t&&this.isDirty("units")&&this._applyUnits(e.units)}}),a=function(e,t){i.prototype.baseViewModule.call(this,e,t)};t.applyMixin(a,i.prototype.baseViewModule),a.prototype.setUnits=function(e){},a.prototype.setDefinition=function(e){};var s=function(e,t){this._labelsDiv=[],this._spinBoxes=[],a.call(this,e,t)};return t.applyMixin(s,a),s.prototype.buildView=function(){this.setDefinition(this._tweaker.definition)},s.prototype.handleEvents=function(){},s.prototype.destroy=function(){this._labelsDiv.forEach(function(e){e.remove()}),this._labelsDiv=[],this._spinBoxes.forEach(function(e){e.remove(),e.destroy()}),this._spinBoxes=[]},s.prototype.setValue=function(e){var t=e||[];this._updateFromAPI=!0;for(var i=0;i<t.length&&i<this._spinBoxes.length;i++)this._spinBoxes[i].value=t[i];for(;i<this._spinBoxes.length;i++)this._spinBoxes[i].value=void 0},s.prototype.setTouchMode=function(e){this._spinBoxes.forEach(function(t){t.touchMode=e})},s.prototype.setUnits=function(e){this._spinBoxes.forEach(function(t){t.units=e})},s.prototype.setDefinition=function(t,i){var o=this._tweaker,a=o.getContent(),s=i?i.length:0,r=t.length-s;if(r>0){var l=this._options.viewOptions||{};l.touchMode=o._getCurrentTouchMode(),l.units=o.units,l.fireOnlyFromUIInteractionFlag=!0;for(var u=o.value||[],d=0;d<r;d++){var p=e.createElement("label",{class:"wux-tweakers-vector-label",tabindex:-1});p.inject(a),this._labelsDiv.push(p),l.value=s+d<u.length?u[s+d]:void 0;var h=new n(l);h.getContent().addClassName("wux-tweakers-vector-spinBox"),h._indexToModify=s+d,h.addEventListener("change",function(e){e.stopPropagation(),o.value||(o._properties.value.value=Array.apply(void 0,Array(o.definition.length))),o.value.length>e.dsModel._indexToModify&&(o.value[e.dsModel._indexToModify]=e.dsModel.value),o._applyValue()}),h.addEventListener("beginEdit",function(e){e.stopPropagation(),o.onPreEdit(null,"beginEdit")}),h.addEventListener("uncommittedChange",function(e){e.stopPropagation()}),h.addEventListener("endEdit",function(e){e.stopPropagation(),o.onPostEdit(null,"endEdit")}),h.inject(a),this._spinBoxes.push(h)}}else if(r<0){r*=-1,this._labelsDiv.splice(t.length,r).forEach(function(e){e.remove()}),this._spinBoxes.splice(t.length,r).forEach(function(e){e.remove(),e.destroy()})}this._labelsDiv.forEach(function(e,i){var n=t[i];e.textContent=n||""})},o.prototype.baseViewModule=a,o.prototype.VIEW_MODULES={readOnly:{classObject:s,options:{viewOptions:{disabled:!0}}},spinBoxes:{classObject:s}},o}),define("DS/Tweakers/TweakerDate",["UWA/Core","DS/Core/Core","DS/Tweakers/TweakerRange","DS/Controls/DatePicker","DS/Controls/TimePicker","DS/Utilities/Utils","DS/Tweakers/TweakerUtils","DS/Utilities/Dom","DS/Utilities/KeyboardUtils","DS/Utilities/DateUtils"],function(e,t,i,n,o,a,s,r,l,u){"use strict";const d="Invalid Date";let p;function h(){p.prototype._intlDateFormat||t.onlanguagechange(h),p.prototype._intlDateFormat={}}p=i.inherit({name:"tweakerDate",publishedProperties:{value:{defaultValue:void 0,type:"date",advancedSetter:!0},minValue:{defaultValue:void 0,type:"date"},maxValue:{defaultValue:void 0,type:"date"},timePickerFlag:{defaultValue:!1,type:"boolean"},timePickerPrecision:{defaultValue:"min",type:"string"},displayStyle:{defaultValue:"date",type:"string"}},_applyTimePickerFlag:function(e,t){this.elements._viewModule&&this.elements._viewModule.setTimePickerFlag?this.elements._viewModule.setTimePickerFlag(t):this.readOnly&&this.elements._viewModule&&this.elements._viewModule.setValue(this.value)},_applyTimePickerPrecision:function(e,t){this.elements._viewModule&&this.elements._viewModule.setTimePickerPrecision?this.elements._viewModule.setTimePickerPrecision(t):this.readOnly&&this.timePickerFlag&&this.elements._viewModule&&this.elements._viewModule.setValue(this.value)},_applyProperties:function(e){this._parent(e),this.isDirty("timePickerFlag")&&this._applyTimePickerFlag(e.timePickerFlag,this.timePickerFlag),this.isDirty("timePickerPrecision")&&this._applyTimePickerPrecision(e.timePickerPrecision,this.timePickerPrecision)},compare(e,t){const i=e instanceof Date,n=t instanceof Date;return i||n?void 0===e&&t?2:e&&void 0===t?-2:i&&n?u.compare(e,t):this._parent(e,t):_parent.compare(e,t)},getStringFromValue:function(e){if(!e)return"";if(Array.isArray(e)&&"date"===this.displayStyle)return this._parent(e);var i=Date.parse(e);if(isNaN(i))return d;var n={year:"numeric",month:"short",day:"numeric"};if("date"===this.displayStyle?this.timePickerFlag&&(n.hour="numeric",n.minute="numeric","sec"===this.timePickerPrecision&&(n.second="numeric")):"time"===this.displayStyle&&(n={hour:"numeric",minute:"numeric"},"sec"===this.timePickerPrecision&&(n.second="numeric")),e&&!e.toLocaleDateString&&(e=this._upgradeValue(e),Array.isArray(e)&&"date"===this.displayStyle))return this._parent(e);p.prototype._intlDateFormat||h();var o=function(e){for(var t="",i=Object.keys(e),n=0;n<i.length;n++)t+=i[n]+e[i[n]];return t}(n);return p.prototype._intlDateFormat[o]||(p.prototype._intlDateFormat[o]=new Intl.DateTimeFormat(t.currentLanguage,n)),p.prototype._intlDateFormat[o].format(e)},_upgradeValue:function(e){var t=e;if(""===t&&this.allowResetToUndefinedByUIFlag&&(t=void 0),null!=t)if(this.allowMultipleValuesFlag&&"date"===this.displayStyle)if(Array.isArray(t)){let e=!0;for(let i=0,n=t.length;i<n;++i){let n=t[i];if(null!=n&&!(n instanceof Date)){if((n=new Date(n))instanceof Date&&n.toString()===d){e=!1;break}t[i]=n}}if(!e)return this.value}else if(t instanceof Date){if(t.toString()===d)return this.value;t=[t]}else{if((t=new Date(t))instanceof Date&&t.toString()===d)return this.value;t=[t]}else t instanceof Date||(t=new Date(t));return t instanceof Date&&t.toString()===d?this.value:t},_upgradeMinMaxValue:function(e){if(null==e)return;let t=e;return e instanceof Date||(t=new Date(e)),t instanceof Date&&(isNaN(t.getTime())||t.toString()===d)?void 0:t}});var c=function(e,t){i.prototype.baseViewModule.call(this,e,t)};a.applyMixin(c,i.prototype.baseViewModule),c.prototype.handleEvents=function(){let e=this._view,t=this._tweaker;if(!e||!t)return;if(t.readOnly)return;let i=this;e.addEventListener("change",function(t){t.stopPropagation(),i.setTweakerValue(e.value)}),e.addEventListener("liveChange",function(t){t.stopPropagation(),i.setTweakerValue(e.value)}),e.addEventListener("show",function(e){e.stopPropagation(),t.onShow()}),e.addEventListener("hide",function(e){e.stopPropagation(),t.onHide()})},c.prototype.setTimePickerFlag=function(){},c.prototype.setTimePickerPrecision=function(){};var v=function(e,t){c.call(this,e,t)};a.applyMixin(v,c),v.prototype.buildView=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions||{};e.precision=this._tweaker.timePickerPrecision,e.touchMode=this._tweaker.touchMode,e.fireOnlyFromUIInteractionFlag=!0,e.allowUndefinedFlag=this._tweaker.allowResetToUndefinedByUIFlag,this._view=new o(e),this.setValue(this._tweaker.value)}},v.prototype.setAllowResetToUndefinedByUIFlag=function(){this._view.allowUndefinedFlag=this._tweaker.allowResetToUndefinedByUIFlag},v.prototype.destroy=function(){this._view&&(this._view.popupVisibleFlag=!1),c.prototype.destroy.call(this)},v.prototype.setValue=function(e){this._view&&(this._view.value=e)},v.prototype.setTimePickerPrecision=function(e){this._view&&(this._view.precision=e)};var w=function(e,t){c.call(this,e,t)};a.applyMixin(w,c),w.prototype.buildView=function(){if(this._tweaker.elements.container){var e=this._options.viewOptions||{};e.value=this._tweaker.value,e.timePickerFlag=this._tweaker.timePickerFlag,e.timePickerPrecision=this._tweaker.timePickerPrecision,e.minValue=this._tweaker.minValue,e.maxValue=this._tweaker.maxValue,e.touchMode=this._tweaker.touchMode,e.disabled=this._tweaker.disabled,e.fireOnlyFromUIInteractionFlag=!0,e.allowUndefinedFlag=this._tweaker.allowResetToUndefinedByUIFlag,this._view=new n(e),this._tweaker.getContent().addClassName("wux-tweakers-date")}},w.prototype.setAllowResetToUndefinedByUIFlag=function(){this._view.allowUndefinedFlag=this._tweaker.allowResetToUndefinedByUIFlag},w.prototype.destroy=function(){this._view&&(this._view.popupVisibleFlag=!1),this._tweaker.elements.container&&this._tweaker.getContent().removeClassName("wux-tweakers-date"),c.prototype.destroy.call(this)},w.prototype.setValue=function(e){this._view&&(this._view.value=e)},w.prototype.setTimePickerPrecision=function(e){this._view&&this._view.timePickerPrecision&&(this._view.timePickerPrecision=e)},w.prototype.setTimePickerFlag=function(e){this._view&&this._view.timePickerFlag&&(this._view.timePickerFlag=e)};var y=function(e,t){w.call(this,e,t)};return a.applyMixin(y,w),y.prototype.buildView=function(){if(this._tweaker.elements.container){this._tweaker.elements.container.addClassName("wux-tweakers-date"),this._viewInlined=e.createElement("div",{class:"wux-tweakers-string-label wux-tweakers-date-inlineview"});var t=this;this._view=s._buildTweakerAggregateView(this._tweaker,{viewModule:this,inlined:this._viewInlined,getExtended:function(){if(!t._viewExtended){let e=t._options.viewOptions||{};e.value=t._tweaker.value,e.allowMultipleValuesFlag=!0,e.timePickerFlag=t._tweaker.timePickerFlag,e.timePickerPrecision=t._tweaker.timePickerPrecision,e.minValue=t._tweaker.minValue,e.maxValue=t._tweaker.maxValue,e.touchMode=t._tweaker._getCurrentTouchMode(),e.disabled=t._tweaker.disabled,e.fireOnlyFromUIInteractionFlag=!0,e.allowUndefinedFlag=!0,t._viewExtended=new n(e),r.addEventOnElement(t,t._viewExtended,"change",function(e){e.stopPropagation(),t.setTweakerValue(t._viewExtended.value)}),r.addEventOnElement(t,t._viewExtended.getContent(),"keydown",function(e){!e.actionPerformed||e.keyCode!==l.TAB&&e.keyCode!==l.ENTER&&e.keyCode!==l.ESCAPE||e.stopPropagation()})}return t._viewExtended}},{overlapContainer:!0,hasButton:!this._options.readOnly,getExtendedViewHeight:()=>"auto",onPopupDisplay:function(){t._view.extendedViewContainer&&t._view.extendedViewContainer.getContent().setStyle("min-height",t._view.offsetHeight)}}),this._view.addClassName("wux-tweakers-string-lineeditordots"),this.setTouchMode(this._tweaker._getCurrentTouchMode()),this.setValue(this._tweaker.value)}},y.prototype.computeTweakerContentLength=function(){const e=this._tweaker;if(!e)return;let t=this._tweaker._getCurrentTouchMode()?78:42;const i=e.getStringFromValue(this._tweaker.value);return r.computeStringWidth(i,e.getFontSize(),e.getFontFamily(),e.getEditedState())+t},y.prototype.setValue=function(e){if(void 0===e)return this._viewInlined.textContent="",void(this._viewExtended&&(this._viewExtended.value=e));Array.isArray(e)&&(this._viewExtended&&(this._viewExtended.value=e),this._viewInlined.textContent=this._tweaker.getStringFromValue(e))},y.prototype.setTimePickerFlag=function(e){this._view&&(this._viewInlined.textContent=this._tweaker.getStringFromValue(this._tweaker.value),this._viewExtended&&(this._viewExtended.timePickerFlag=e))},y.prototype.setTimePickerPrecision=function(e){this._view&&(this._viewInlined.textContent=this._tweaker.getStringFromValue(this._tweaker.value),this._viewExtended&&(this._viewExtended.timePickerPrecision=e))},y.prototype.setTouchMode=function(e){w.prototype.setTouchMode.call(this,e),!0===e?(this._view.setAttributeNode(document.createAttribute("touch-mode")),this._viewInlined&&this._viewInlined.setAttributeNode(document.createAttribute("touch-mode"))):(this._view.removeAttribute("touch-mode"),this._viewInlined&&this._viewInlined.removeAttribute("touch-mode")),this._viewExtended&&(this._viewExtended.touchMode=e)},y.prototype.destroy=function(){this._view&&(this._view.popupVisibleFlag=!1),this._viewInlined&&this._viewInlined.destroy(),delete this._viewInlined,this._viewExtended&&this._viewExtended.destroy(),delete this._viewExtended,w.prototype.destroy.call(this)},p.prototype.baseViewModule=c,p.prototype.VIEW_MODULES={time:{classObject:v},date:{classObject:w},date_allowMultipleValues:{classObject:y}},p.prototype.registerViewModule=function(e,t){},p}),define("DS/Tweakers/StringViewModules",["UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/TweakerBase","DS/Controls/TooltipModel","DS/Controls/LineEditor","DS/Controls/Editor","DS/Controls/ColorPicker","DS/Controls/ComboBox","DS/Controls/ButtonGroup","DS/Controls/Button","DS/Controls/Label","DS/Controls/SelectionChipsEditor","DS/Utilities/KeyboardUtils","DS/Tweakers/TweakerUtils","DS/Menu/Menu"],function(e,t,i,n,o,a,s,r,l,u,d,p,h,c,v,w){"use strict";function y(e,t){return"string"==typeof t?t:"object"===e?JSON.stringify(t):"integer"!==e&&"number"!==e||!(Number.isNan&&!0===Number.isNaN(t)||void 0!==isNaN&&!0===isNaN(t))?"integer"===e||"number"===e?t.toString():t:"NaN"}var _=function(e,t){n.prototype.baseViewModule.call(this,e,t)};t.applyMixin(_,n.prototype.baseViewModule),_.prototype.isValueDisplayedAsString=function(e){return"icon"!==e};var f=function(e,t){_.call(this,e,t)};t.applyMixin(f,_),f.prototype.buildView=function(){this._view=[],this._tweaker._updateInformationToDisplay(this._tweaker.value),this.setIcon(this._tweaker._currentValueIcon);var e=this._options.viewOptions||{};e.escapeHTML=this._tweaker.escapeHTML,e.touchMode=this._tweaker._getCurrentTouchMode(),e.disabled=this._tweaker.readOnly,e.placeholder=this._tweaker.placeholder,e.selectAllOnFocus=!0,e.fireOnlyFromUIInteractionFlag=!0,e.autoCommitFlag=!0,e.pattern=this._tweaker.pattern,e.autoCorrectFlag=this._tweaker.autoCorrectFlag,e.displayClearFieldButtonFlag=this._tweaker.allowResetToUndefinedByUIFlag,this._editor=new a(e),this._view.push(this._editor),this.setValue(this._tweaker.value),this._updateValidState()},f.prototype.computeTweakerContentLength=function(){let e=0,t=this._tweaker.touchMode;this._icon&&!this._icon.isHidden()&&(e+=this._icon.offsetWidth),this._iconValidity&&!this._iconValidity.isHidden()&&(e+=this._iconValidity.childNodes[0].offsetWidth),this._icon&&!this._icon.isHidden()&&this._iconValidity&&!this._iconValidity.isHidden()&&(e+=7),e+=7,e+=8,e+=this._tweaker.allowResetToUndefinedByUIFlag?t?37:21:6;let n=i.computeStringWidth(this._editor.value,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),this._tweaker.getEditedState())+e;return Math.max(n,t?130:100)},f.prototype.handleEvents=function(){var e=this,t=this._tweaker,n=this._editor;n&&t&&(i.addEventOnElement(t,n,"blur",function(i){i.stopPropagation(),t.onPostEdit(),e._iconWasInvalidDuringModification=!1,e._updateValidState()}),i.addEventOnElement(t,n,"uncommittedChange",function(i){i.stopPropagation(),e._preEditState||t.validState||(e._iconWasInvalidDuringModification=!0),t.onPreEdit()}),i.addEventOnElement(t,n,"clear",function(){t.value=void 0}),n._myInput&&i.addEventOnElement(t,n._myInput,"keydown",function(e){e.keyCode===c.ESCAPE&&t.onCancelEdit(),e.keyCode!==c.ENTER||e.ctrlKey||e.shiftKey||e.altKey||!t._liveChangeOccurred||t.onChange()}),i.addEventOnElement(t,n,"change",function(i){i.stopPropagation();var o=n.value,a=void 0;a=null==o?o:function(e,t){let i;switch(e){case"integer":return i=parseInt(t,10),isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"number":return i=parseFloat(t),isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"boolean":return null!==/true/i.exec(t)||"1"===t;case"string":return t?t.toString():"";case"object":return JSON.parse(t);default:return t}}.call(t,t.valueType,o),e.setTweakerValue(a)}))},f.prototype.setValue=function(e){let t=this._tweaker,i=this._editor;if(i&&t){var n=this._options.viewOptions||{};i.value=null==e?e:y(t.valueType,e),"user"!==n.displayStyle||t._currentValueIcon||this.setIcon(t._currentValueIcon),this._updateValidState()}},f.prototype.setIcon=function(t){if(this._tweaker){var n=this._options.viewOptions||{};this._icon||!t&&"user"!==n.displayStyle||(this._icon=e.createElement("span",{class:this._tweaker._iconClassName}),this._view.splice(this._iconValidity?1:0,0,this._icon)),t?(this._icon.classList.remove("wux-user-icon"),this._icon.style.backgroundColor&&(this._icon.style.backgroundColor=null),this._icon.textContent="",this._tweaker._currentValueIcon=t,this._currentMode=1,i.generateIcon(this._tweaker._currentValueIcon,{target:this._icon,roundFlag:"user"===n.displayStyle}),this._icon.parentNode||this._icon.inject(this._tweaker.elements.container,"top"),this._iconValidity&&this._iconValidity.inject(this._tweaker.elements.container,"top"),this._icon.show(),this._tweaker.elements.container.setAttribute("has-icon","")):this._tweaker&&"user"===n.displayStyle?(this._icon.className=this._tweaker._iconClassName,this._tweaker.icon={userName:this._tweaker.value?this._tweaker.value.label:""},i.generateIcon(this._tweaker.icon,{target:this._icon,roundFlag:!0}),this._icon.parentNode||this._icon.inject(this._tweaker.elements.container,"top"),this._icon.show(),this._tweaker.elements.container.setAttribute("has-icon","")):(this._icon&&this._destroyViewItem("_icon"),this._iconValidity&&!this._iconValidity.isHidden()||this._tweaker.elements.container.removeAttribute("has-icon"))}},f.prototype._getElementToFocus=function(){return this._editor._getElementToFocus()},f.prototype._giveFocus=function(){this._editor&&this._editor._giveFocus()},f.prototype.setPlaceholder=function(e){this._editor&&(this._editor.placeholder=e)},f.prototype.setHighlightModel=function(e){void 0!==this._tweaker.value&&null!==this._tweaker.value&&n.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value)},f.prototype.removeHighlightModel=function(){n.prototype.VIEW_MODULES.readOnly.classObject.prototype.setHighlightModel.call(this,void 0)},f.prototype._shouldFormatHTMLValue=function(e){return n.prototype.VIEW_MODULES.readOnly.classObject.prototype._shouldFormatHTMLValue.call(this,e)},f.prototype._cleanContainerProperties=function(){return n.prototype.VIEW_MODULES.readOnly.classObject.prototype._cleanContainerProperties.call(this)},f.prototype._getLabelDivToConsiderForHighlight=function(){return v._getOrCreateFakeInputForFindHighlight(this._tweaker,this._editor,this._editor._myInput)},f.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._editor&&(this._editor.displayClearFieldButtonFlag=e)},f.prototype.setPattern=function(e){this._editor&&(this._editor.pattern=e,this._updateValidState())},f.prototype.setAutoCorrectFlag=function(e){this._editor&&(this._editor.autoCorrectFlag=e)},f.prototype._updateValidState=function(){let t=this._tweaker,n=t&&t.validState,o=t&&t.elements.container,a=this._editor&&this._editor.elements.container;if(a&&o)if(a.removeAttribute("with-validsign"),n)this._iconWasInvalidDuringModification&&this._iconValidity?(o.setAttribute("with-validsign",""),this._iconValidity.firstChild.hide(),this._iconValidity.childNodes[1].show()):(o.removeAttribute("with-validsign"),this._iconValidity&&this._destroyViewItem("_iconValidity"),this._icon&&!this._icon.isHidden()||o.removeAttribute("has-icon"));else{if(o.setAttribute("with-validsign",""),this._iconValidity)this._iconValidity.childNodes[0].show(),this._iconValidity.childNodes[1].hide(),this._iconValidity.show();else{this._iconValidity=e.createElement("div",{styles:{display:"contents"}}),this._iconValidity.inject(o,"top"),this._view.splice(0,0,this._iconValidity);let t=e.createElement("span",{class:"wux-tweakers-icon wux-tweakers-iconinvalidattention"});i.generateIcon("attention",{target:t}),t.inject(this._iconValidity);let n=e.createElement("span",{class:"wux-tweakers-icon wux-tweakers-iconinvalidstatusok"});i.generateIcon("status-ok",{target:n}),n.hide(),n.inject(this._iconValidity)}o.setAttribute("has-icon","")}},f.prototype.destroy=function(){_.prototype.destroy.call(this),delete this._editor,delete this._icon,delete this._iconValidity};var g=function(e,t){f.call(this,e,t)};t.applyMixin(g,f),g.prototype.buildView=function(){var e=this._options.viewOptions||{};e.escapeHTML=this._tweaker.escapeHTML,e.disabled=this._tweaker.readOnly,e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,e.selectAllOnFocus=!0,e.autoCommitFlag=!0,e.nbRows=0,e.widthInCharNumber=0,this._editor=new s(e),this._view=this._editor,this._tweaker.getContent().addClassName("wux-tweakers-editor"),this.setValue(this._tweaker.value)},g.prototype.destroy=function(){this._tweaker.elements.container&&this._tweaker.getContent().removeClassName("wux-tweakers-editor"),f.prototype.destroy.call(this)},g.prototype._getElementToFocus=function(){return this._view._getElementToFocus()},g.prototype._giveFocus=function(){this._view._giveFocus()},g.prototype._resetFocus=function(){this._view._resetFocus()},g.prototype.setValue=function(e){var t=this._view;t&&(t.value=e)},g.prototype._updateValidState=function(){};var m=function(e,t){this._readOnlyInline=void 0,this._standardEditor=void 0,_.call(this,e,t)};t.applyMixin(m,_),m.prototype.buildView=function(){this._readOnlyInlineContainer=new e.createElement("div"),this._readOnlyInline=new n.prototype.VIEW_MODULES.readOnly.classObject(this._tweaker,{useCustomContainerDiv:this._readOnlyInlineContainer}),this._standardEditor=new g(this._tweaker),this._view=v._buildTweakerAggregateView(this._tweaker,{viewModule:this,inlined:this._readOnlyInlineContainer,extended:this._standardEditor},{overlapContainer:!0}),this._view.addClassName("wux-tweakers-string-lineeditordots"),this._view.openExtendedViewButton.getContent().addClassName("wux-tweakers-multirep-button-line-editor"),this.setValue(this._tweaker.value),this.setTouchMode(this._tweaker._getCurrentTouchMode()),this.updateReferenceValueLabel()},m.prototype._getElementToFocus=function(){return this._view.openExtendedViewButton.getContent()},m.prototype._giveFocus=function(){this._view.openExtendedViewButton.getContent().focus()},m.prototype.setTouchMode=function(e){this._view&&(!0===e?this._readOnlyInlineContainer.setAttributeNode(document.createAttribute("touch-mode")):this._readOnlyInlineContainer.removeAttribute("touch-mode"),!0===e?this._view.setAttributeNode(document.createAttribute("touch-mode")):this._view.removeAttribute("touch-mode"),this._readOnlyInline.setTouchMode(e),this._standardEditor.setTouchMode(e),this._view.openExtendedViewButton.touchMode=e,this._view.extendedViewContainer&&(this._view.extendedViewContainer.touchMode=e))},m.prototype.setValue=function(e){var t=this._tweaker;if(this._view&&t){var i=e;e&&(i=e.replace(/(\r\n|\n|\r)/gm," ")),this._readOnlyInline.setValue(i),this._standardEditor.setValue(e)}},m.prototype.usesReferenceValueLabel=function(){return!0},m.prototype.updateReferenceValueLabel=function(){this._readOnlyInline._formatReferenceValue=function(e){return e.replace(/(\r\n|\n|\r)/gm," ")},this._readOnlyInline.updateReferenceValueLabel()},m.prototype.destroy=function(){this._view&&this._view.remove(),this._readOnlyInlineContainer&&this._readOnlyInlineContainer.destroy(),this._readOnlyInline&&this._readOnlyInline.destroy(),this._standardEditor&&this._standardEditor.destroy(),this._view.extendedViewContainer&&(this._view.extendedViewContainer.visibleFlag=!1,this._view.extendedViewContainer.destroy()),this._view.openExtendedViewButton&&this._view.openExtendedViewButton.destroy(),this._view&&this._view.destroy(),delete this._view,i.removeAllEventsOnElement(this),_.prototype.destroy.call(this)};var b=function(e,t){this._standardEditor=void 0,_.call(this,e,t)};t.applyMixin(b,_),b.prototype.buildView=function(){this._readOnlyInlineContainer=new e.createElement("div"),this._readOnlyInline=new n.prototype.VIEW_MODULES.readOnly.classObject(this._tweaker,{useCustomContainerDiv:this._readOnlyInlineContainer});var t=new e.Element("div");t.addClassName("wux-tweakers-string-readonly-editor"),this._readOnlyStandard=new n.prototype.VIEW_MODULES.readOnly.classObject(this._tweaker,{useCustomContainerDiv:t}),this._view=v._buildTweakerAggregateView(this._tweaker,{inlined:this._readOnlyInlineContainer,extended:t},{overlapContainer:!0,hasButton:!1}),this._tweaker.getContent().addClassName("wux-tweakers-labelonly"),this.setValue(this._tweaker.value),this.setTouchMode(this._tweaker._getCurrentTouchMode()),this.updateReferenceValueLabel()},b.prototype.setTouchMode=function(e){this._view&&(!0===e?this._readOnlyInlineContainer.setAttributeNode(document.createAttribute("touch-mode")):this._readOnlyInlineContainer.removeAttribute("touch-mode"),!0===e?this._view.setAttributeNode(document.createAttribute("touch-mode")):this._view.removeAttribute("touch-mode"),this._readOnlyInline.setTouchMode(e),this._readOnlyStandard.setTouchMode(e),this._view.extendedViewContainer&&(this._view.extendedViewContainer.touchMode=e))},b.prototype.setValue=function(t){this._tweaker.escapeHTML&&t&&(t=e.String.escapeHTML(t));var i=t;t&&(i=t.replace(/(\r\n|\n|\r)/gm," ")),this._readOnlyInline.setValue(i),this._readOnlyStandard.setValue(t)},b.prototype.setHighlightModel=function(e){void 0!==this._tweaker.value&&null!==this._tweaker.value&&n.prototype.VIEW_MODULES.readOnly.classObject.prototype.formatHTMLValue.call(this,this._tweaker.value)},b.prototype.removeHighlightModel=function(){n.prototype.VIEW_MODULES.readOnly.classObject.prototype.setHighlightModel.call(this,void 0)},b.prototype._shouldFormatHTMLValue=function(e){return n.prototype.VIEW_MODULES.readOnly.classObject.prototype._shouldFormatHTMLValue.call(this,e)},b.prototype._cleanContainerProperties=function(){return n.prototype.VIEW_MODULES.readOnly.classObject.prototype._cleanContainerProperties.call(this)},b.prototype.usesReferenceValueLabel=function(){return!0},b.prototype.updateReferenceValueLabel=function(){this._readOnlyInline._formatReferenceValue=function(e){return e.replace(/(\r\n|\n|\r)/gm," ")},this._readOnlyInline.updateReferenceValueLabel()},b.prototype.destroy=function(){this._view&&this._view.remove(),this._readOnlyInlineContainer&&this._readOnlyInlineContainer.destroy(),this._readOnlyInline&&this._readOnlyInline.destroy(),this._readOnlyStandard&&this._readOnlyStandard.destroy(),this._view.extendedViewContainer&&(this._view.extendedViewContainer.visibleFlag=!1,this._view.extendedViewContainer.destroy()),this._view&&this._view.destroy(),delete this._view,_.prototype.destroy.call(this)},b.prototype._getLabelDivToConsiderForHighlight=function(){return this._tweaker?this._tweaker.elements.container:null};var V=function(e,t){_.call(this,e,t)};function k(e){return e.map(function(e,t){if("string"==typeof e)return e;if("object"==typeof e){const t=e.hasOwnProperty("label"),i=e.hasOwnProperty("value"),n=e.hasOwnProperty("description");let o={};return e.hasOwnProperty("icon")&&(o.icon=e.icon),i?o.value=e.value:t&&(o.value=e.label),t?o.label=e.label:i&&(o.label=e.value),n?o.description=e.description:t?o.description=e.label:i&&(o.description=e.value),o}})}t.applyMixin(V,_),V.prototype.buildView=function(){var e=this._options.viewOptions||{};this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues)&&(e.elementsList=k(this._tweaker.possibleValues)),e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,e.reachablePlaceholderFlag=this._tweaker.allowResetToUndefinedByUIFlag,e.placeholder=this._tweaker.placeholder,e.getMainElementCustomization=this._tweaker.getDisplayedInformation,this._view=new l(e),this.setValue(this._tweaker.value)},V.prototype.computeTweakerContentLength=function(){var e=this._tweaker.touchMode?54:31,t=i.computeStringWidth(this._view.label,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),this._tweaker.getEditedState())+e;if(this._view.elements.iconPlaceholder){this._view.elements.iconPlaceholder.offsetWidth>0&&(t=t+this._view.elements.iconPlaceholder.offsetWidth+11)}return t},V.prototype.handleEvents=function(){var e=this,t=this._tweaker,n=this._view,o=!1;n&&t&&(i.addEventOnElement(t,n,"show",function(e){e.stopPropagation(),t.onShow()}),i.addEventOnElement(t,n,"hide",function(e){e.stopPropagation(),t.onHide({cancelFlag:Boolean(e.options.cancelPopupSelection)})}),i.addEventOnElement(t,n,"preselectionChange",function(t){var i;t.stopPropagation(),(i=n._getAllDescendants()[n.preselectedIndex].options.grid.valueItem)||(i=n._getAllDescendants()[n.preselectedIndex].options.label),o=!0,e.setTweakerValue(i),o=!1}),i.addEventOnElement(t,n,"change",function(i){i.stopPropagation(),o||(e.setTweakerValue(n.value),t.onPostEdit())}))},V.prototype.setValue=function(e){var t=this._view;t&&(t.value=null==e?void 0:e)},V.prototype.setPossibleValues=function(e){this._view&&e&&(this._view.elementsList=k(e))},V.prototype.setPlaceholder=function(e){this._view&&(this._view.placeholder=e)},V.prototype.setGetDisplayedInformation=function(e){this._view&&(this._view.getMainElementCustomization=e)},V.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._view&&(this._view.reachablePlaceholderFlag=e)};var C=function(e,t){_.call(this,e,t)};t.applyMixin(C,_),C.prototype.buildView=function(){this._view=e.createElement("div",{class:"wux-tweakers-string-icon-view"}),this.setValue(this._tweaker.value),this.setTouchMode()},C.prototype.setTouchMode=function(){this._tweaker._getCurrentTouchMode()?this._view.setAttributeNode(document.createAttribute("touch-mode")):this._view.removeAttribute("touch-mode")},C.prototype.setEmphasize=function(e,t){n.prototype.VIEW_MODULES.readOnly.classObject.prototype.setEmphasize.call(this,e,t)},C.prototype.setValue=function(t,n){var o=this._view;if(!o)return;this._view.className="";let a=o.getChildren();if(null!=t)if(Array.isArray(t)){let n;if(this._view.addClassName("wux-tweakers-string-icons-view"),t.forEach((t,s)=>{a&&a[s]?n=a[s]:(n=e.createElement("div",{class:"wux-tweakers-string-icon-view"})).inject(o),i.generateIcon(t,{target:n})}),a=o.getChildren(),Array.isArray(a))for(let e=t.length;e<a.length;e++)a[e].remove()}else this._view.addClassName("wux-tweakers-string-icon-view"),i.generateIcon(t,{target:o});else o.hasClassName("wux-tweakers-string-icons-view")?(o.removeClassName("wux-tweakers-string-icons-view"),a.forEach(e=>{e.remove()})):(o.removeClassName("wux-tweakers-string-icon-view"),i.cleanIcon(o))};var T=function(e,t){_.call(this,e,t)};t.applyMixin(T,_),T.prototype.buildView=function(){if(this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues)){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.label=this._tweaker.label,e.icon=this._tweaker.icon,e.emphasize=this._tweaker.emphasize,e.disabled=this._tweaker.disabled,e.displayStyle="smartIcon",this._view=new d(e)}this.setValue(this._tweaker.value)},T.prototype.handleEvents=function(){var e=this;i.addEventOnElement(this._view,this._view,"buttonclick",function(){var t=e._view.getContent().getBoundingClientRect(),i=e._getMenuItemsFromPossibleValues();w.show(i,{position:{x:t.left,y:t.top+t.height}})})},T.prototype.setValue=function(e,t){var i=this._tweaker._getEntryInPossibleValues(e);"object"==typeof i.icon?this._view.icon=Object.assign({},i.icon):this._view.icon=i.icon},T.prototype._getMenuItemsFromPossibleValues=function(){var e=this,t=[];if(this._tweaker.possibleValues&&Array.isArray(this._tweaker.possibleValues))for(var i=0;i<this._tweaker.possibleValues.length;i++){let o=this._tweaker.possibleValues[i].value,a=this._tweaker.possibleValues[i].icon,s=this._tweaker.possibleValues[i].label,r=this._tweaker.possibleValues[i].tooltip;var n=0===this._tweaker.compare(o,this._tweaker.value)?"selected":"";t.push({type:"CheckItem",icon:a,state:n,title:s,tooltip:r,action:{callback:function(){e._tweaker.value=o}}})}return t},C.prototype.setPossibleValues=function(){this.setValue(this.tweaker.value)},C.prototype.setTouchMode=function(e){this._view&&(this._view.touchMode=e)};var M=function(e,t){_.call(this,e,t)};t.applyMixin(M,_),M.prototype.buildView=function(){var e=this._options.viewOptions||{};e.disabled=this._tweaker.readOnly,e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,this._view=new u(e),this.setPossibleValues(this._tweaker.possibleValues),this.setValue(this._tweaker.value)},M.prototype.handleEvents=function(){var e=this,t=this._tweaker,n=this._view;i.addEventOnElement(t,n,"change",function(t){t.stopPropagation(),e.setTweakerValue(n.value[0])})},M.prototype.setPossibleValues=function(e){var t=this._tweaker,i=this._view;if(i&&t&&e){for(var n=i.getButtonCount(),a=0;a<n;a++){var s=i.getButton(0);i.removeChild(s),s.destroy()}if(e&&Array.isArray(e))e.forEach(function(e){if("string"==typeof e)i.addChild(new d({type:"radio",label:e,value:e}));else{e.type="radio";const t=new d(e);e.description&&(t.tooltipInfos=new o({shortHelp:e.description})),i.addChild(t)}});else if("object"==typeof e)for(var r in e)"string"==typeof r?i.addChild(new d({type:"radio",label:r,value:r})):(r.type="radio",i.addChild(new d(r)))}},M.prototype.setValue=function(e){var t=this._tweaker,i=this._view;i&&t&&(i.value=[e])};var E=function(e,t){_.call(this,e,t)};t.applyMixin(E,_),E.prototype.buildView=function(){var e=this._options.viewOptions||{};e.disabled=this._tweaker.readOnly,e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,this._view=new r(e),this.setValue(this._tweaker.value)},E.prototype.handleEvents=function(){var e=this,t=this._tweaker,n=this._view;i.addEventOnElement(t,n,"show",function(e){e.stopPropagation(),t.onShow()}),i.addEventOnElement(t,n,"hide",function(e){e.stopPropagation(),t.onHide()}),i.addEventOnElement(t,n,"keydown",function(e){e.keyCode===c.ESCAPE&&t.onCancelEdit()}),i.addEventOnElement(t,n,"liveChange",function(i){i.stopPropagation(),t.onPreEdit(),e.setTweakerValue(n.value)}),i.addEventOnElement(t,n,"change",function(i){i.stopPropagation(),e.setTweakerValue(n.value),t.onPostEdit()})},E.prototype.setValue=function(t){var i=this._tweaker,n=this._view;if(n&&i){var o=t;i.readOnly&&i.escapeHTML&&t&&(o=e.String.escapeHTML(this.value),i._properties.value.value=o),n.value=y(this.valueType,o)}};var O=function(e,t){_.call(this,e,t)};t.applyMixin(O,_),O.prototype.buildView=function(){this._tweaker.elements.container.addClassName("wux-tweakers-color-square"),this.setValue(this._tweaker.value)},O.prototype.destroy=function(){this._tweaker.elements.container&&(this._tweaker.elements.container.style.backgroundColor="",this._tweaker.elements.container.removeClassName("wux-tweakers-color-square")),_.prototype.destroy.call(this)},O.prototype.setValue=function(e){this._tweaker&&(this._tweaker.elements.container.style.backgroundColor="#"+e)},O.prototype.setTouchMode=function(){};var S=function(e,t){_.call(this,e,t)};t.applyMixin(S,_),S.prototype.createOrUpdateLabelFromValue=function(e,t){let i={value:e,icon:this._tweaker.icon?this._tweaker.icon:void 0,emphasize:this._tweaker.emphasize};return void 0===t?(t=new p(i),this._tweaker.allowMultipleValuesFlag?Array.isArray(this._view)&&this._view.push(t):this._view=t):t.setProperties(i),t},S.prototype.buildView=function(){if(this._tweaker.elements.container.addClassName("wux-tweakers-label"),this._tweaker.allowMultipleValuesFlag){if(Array.isArray(this._tweaker.value)){this._view=[];for(let e=0;e<this._tweaker.value.length;e++)this.createOrUpdateLabelFromValue(this._tweaker.value[e])}}else this.createOrUpdateLabelFromValue(this._tweaker.value)},S.prototype.destroy=function(){this._tweaker.elements.container&&this._tweaker.elements.container.removeClassName("wux-tweakers-label"),_.prototype.destroy.call(this)},S.prototype.setValue=function(e){if(this._tweaker&&this._view)if(Array.isArray(this._view)){let t=e&&Array.isArray(e)?e.length:0;for(let e=0;e<this._tweaker.value.length;e++)this.createOrUpdateLabelFromValue(this._tweaker.value[e],this._view[e]);this._view.length=t}else this._view.value=e},S.prototype.setIcon=function(e){this._tweaker&&this._view&&(this._view.icon=e)},S.prototype.setEmphasize=function(e,t){this._tweaker&&this._view&&(this._view.emphasize=e)},S.prototype.setTouchMode=function(e){this._view&&(this._view.touchMode=e)};let x=function(e,t){_.call(this,e,t)};return t.applyMixin(x,_),x.prototype.buildView=function(){this._tweaker.elements.container.addClassName("wux-tweakers-selectionchipseditor");let t=this._options.viewOptions||{};t.placeholder=this._tweaker.placeholder,t.value=this._tweaker.value,t.disabled=this._tweaker.disabled,t.touchMode=this._tweaker._getCurrentTouchMode(),t.fireOnlyFromUIInteractionFlag=!0,this._viewInlined=e.createElement("div",{class:"wux-tweakers-string-label"});var n=this;this._view=v._buildTweakerAggregateView(this._tweaker,{viewModule:this,inlined:this._viewInlined,getExtended:function(){return n._viewExtended||(n._viewExtended=new h(t),i.addEventOnElement(n,n._viewExtended,"change",function(e){e.stopPropagation(),n.setTweakerValue(n._viewExtended.value)}),i.addEventOnElement(n,n._viewExtended.getContent(),"keydown",function(e){!e.actionPerformed||e.keyCode!==c.TAB&&e.keyCode!==c.ENTER&&e.keyCode!==c.ESCAPE||e.stopPropagation()})),n._viewExtended}},{overlapContainer:!0,hasButton:!this._options.readOnly,getExtendedViewHeight:()=>"auto",onPopupDisplay:function(){n._view.extendedViewContainer&&n._view.extendedViewContainer.getContent().setStyle("min-height",n._view.offsetHeight),n._viewExtended&&n._viewExtended.focus({preventScroll:!0})}}),this._view.addClassName("wux-tweakers-string-lineeditordots"),this.setTouchMode(t.touchMode),this.setValue(t.value)},x.prototype.destroy=function(){this._tweaker.elements.container&&this._tweaker.elements.container.removeClassName("wux-tweakers-selectionchipseditor"),this._viewInlined&&this._viewInlined.destroy(),delete this._viewInlined,this._viewExtended&&this._viewExtended.destroy(),delete this._viewExtended,_.prototype.destroy.call(this)},x.prototype.computeTweakerContentLength=function(){const e=this._tweaker;if(!e)return;let t=this._tweaker._getCurrentTouchMode()?68:37;const n=e.getStringFromValue(this._tweaker.value);return i.computeStringWidth(n,e.getFontSize(),e.getFontFamily(),e.getEditedState())+t},x.prototype.setValue=function(e){this._viewInlined&&(this._viewInlined.textContent=this._tweaker.getStringFromValue(e)),this._viewExtended&&(this._viewExtended.value=e)},x.prototype.setPlaceholder=function(e){this._viewExtended&&(this._viewExtended.placeholder=e)},x.prototype.setTouchMode=function(e){_.prototype.setTouchMode.call(this,e),!0===e?this._view.setAttributeNode(document.createAttribute("touch-mode")):this._view.removeAttribute("touch-mode"),this._viewExtended&&(this._viewExtended.touchMode=e)},{Base:_,LineEditor:f,ComboBox:V,Icon:C,IconWithPossibleValues:T,ButtonGroup:M,ColorPicker:E,ColorSquare:O,Editor:g,LineEditorDotsEditor:m,StringDotsEditor:b,Label:S,SelectionChipsEditor:x}}),define("DS/Tweakers/TweakerURLObject",["UWA/Core","DS/Tweakers/TweakerBase","DS/Tweakers/StringViewModules","DS/Utilities/Dom","DS/Utilities/Utils","DS/Controls/LineEditor","DS/Controls/Button","DS/Utilities/Dom","DS/Core/PointerEvents"],function(e,t,i,n,o,a,s,r,l){"use strict";var u=t.inherit({name:"TweakerURLObject",publishedProperties:{value:{defaultValue:void 0,type:"object"},displayStyle:{defaultValue:"clickableLabel",type:"string"},hyperlinkTarget:{defaultValue:"_blank",type:"string"}},_preBuildView:function(){this._parent(),this._iconClassName="wux-tweakers-string-icon",this._pipeClassName="wux-tweakers-string-pipe"},getStringFromValue:function(e){let t="";if(Array.isArray(e)){t=e[0]&&e[0].label||"";for(let i=1;i<e.length;i++)t+=" | "+(e[i].label||"")}else t=e&&(e.label||"")+(e.subLabel?" "+e.subLabel:"")||"";return t},_applyProperties:function(e){this._parent(e),this.isDirty("hyperlinkTarget")&&this._applyHyperlinkTarget(e.hyperlinkTarget,this.hyperlinkTarget)},_applyHyperlinkTarget:function(){this.elements._viewModule&&this.elements._viewModule.setHyperLinkTarget&&this.elements._viewModule.setHyperLinkTarget(this.hyperlinkTarget)}}),d=function(e,i){t.prototype.baseViewModule.call(this,e,i)};o.applyMixin(d,t.prototype.baseViewModule);var p=function(e,t){i.LineEditor.call(this,e,t)};o.applyMixin(p,i.LineEditor),p.prototype.buildView=function(){if(this._tweaker){var e=this._tweaker.value,t=e?e.icon:void 0;this._tweaker._currentValueIcon=t,i.LineEditor.prototype.buildView.call(this),this._tweaker.elements.container&&this._tweaker.getContent().addClassName("wux-tweakers-urlobject")}},p.prototype.setValue=function(e){if(this._tweaker){var t=e?e.label:"",n=e?e.icon:void 0;this._tweaker._currentValueIcon=n,i.LineEditor.prototype.setValue.call(this,t),this.setIcon(n)}},p.prototype.setTweakerValue=function(t){if(this._tweaker){var n=e.clone(this._tweaker.value,!1);n||(n={}),n.label=t,i.LineEditor.prototype.setTweakerValue.call(this,n)}};var h=function(e,t){d.call(this,e,t),this._options.hyperlinks=[],this.hyperlinkTargets=[]};o.applyMixin(h,d),h.prototype.buildView=function(){this._tweaker.elements.container&&(this._initViewElements(),this.setValue(this._tweaker.value),this.setTouchMode(this._tweaker.touchMode),this.setHyperLinkTarget(this._tweaker.hyperlinkTargets&&this._tweaker.hyperlinkTargets.length>0&&this._tweaker.hyperlinkTargets||this._tweaker.hyperlinkTarget),this._tweaker.highlightModel&&this.setHighlightModel(this._tweaker.highlightModel))},h.prototype._initViewElements=function(){this._view=[],this._tweaker.getContent().addClassName("wux-tweakers-urlobject"),this._mainIcons=[],this._labels=[],this._pipes=[]},h.prototype.setValue=function(t){let i,o,a,s,r,l=Array.isArray(t)?t:[t];this._options.hyperLinks=[];for(let e=l.length;e<this._pipes.length;e++)this._pipes&&this._pipes[e]&&this._pipes[e].hide();l.forEach((t,l)=>{i=t?t.url:void 0,o=t?t.parameters:void 0,a=t?t.icon:void 0,s=t?t.label:"",r=t?t.func:void 0,l>0&&(this._pipes[l]?this._pipes&&this._pipes[l]&&this._pipes[l].show():(this._pipes[l]=e.createElement("span",{text:"|",class:this._tweaker._pipeClassName}),this._view.push(this._pipes[l]))),this._mainIcons[l]?n.cleanIcon(this._mainIcons[l]):(this._mainIcons[l]=e.createElement("span",{class:this._tweaker._iconClassName}),this._view.push(this._mainIcons[l]));let u=this._options&&this._options.viewOptions&&"user"===this._options.viewOptions.displayStyle;!a&&u&&(a={userName:s});let d=n.generateIcon(a,{target:this._mainIcons[l],roundFlag:u});this._mainIcons[l].setStyle("display",d?"":"none"),d?(this._mainIcons[l].show(),this._tweaker.elements.container.setAttribute("has-icon","")):(this._mainIcons[l].hide(),this._tweaker.elements.container.removeAttribute("has-icon","")),this._labels[l]||(this._labels[l]=e.createElement("a",{class:"wux-tweakers-string-label"}),this._view.push(this._labels[l])),this._tweaker.highlightModel||(this._labels[l].textContent=s),this._labels[l].show(),i?(this._labels[l].href=i+(o||""),t.target&&t.target!==this.hyperlinkTargets[l]&&(this.hyperlinkTargets[l]=t.target)):this._labels[l].removeAttribute("href"),r?this._labels[l].setAttribute("has-function",""):this._labels[l].removeAttribute("has-function")});for(let e=l.length;e<this._labels.length;e++)this._mainIcons[e].hide(),this._labels[e].hide(),this._pipes[e]&&this._pipes[e].hide();this.inject(this._tweaker.elements.container),this.updateReferenceValueLabel()},h.prototype._getElementToFocus=function(){return null},h.prototype.handleEvents=function(){var e=this._tweaker;for(let t=0;this._labels&&t<this._labels.length;t++)n.addEventOnElement(this,this._labels[t],l.POINTERHIT,function(t){if(e.value&&e.value.func)if("function"==typeof e.value.func)e.value.func({context:e.executionContext});else if(e.value.module){var i=e.value.module,n=e.value.func,o=e.value.argument;o||(o={}),o.context=e.executionContext,require([i],function(e){if(e){var t=e[n];t&&"function"==typeof t&&t(o)}})}})},h.prototype.setTouchMode=function(e,t){this._view&&(this._view.touchMode=e)},h.prototype.setHyperLinkTarget=function(e,t){if(!this._view)return;Array.isArray(e);let i=Array.isArray(e)?e:[e];this._labels.forEach((e,t)=>{e&&e.setAttribute("target",i[t]||i[0])})},h.prototype.usesReferenceValueLabel=function(){return!0},h.prototype.computeTweakerContentLength=function(){var e=0,t=Array.isArray(this._tweaker.value)?this._tweaker.value:[this._tweaker.value];let i,n,o,a,s,r=this._options&&this._options.viewOptions&&"user"===this._options.viewOptions.displayStyle;return t.forEach((t,l)=>{i=this._icons&&this._icons[l]||void 0,o=i?i.offsetWidth+7:0,n=this._mainIcons&&this._mainIcons[l]||void 0,a=n?n.offsetWidth+7:r?22:0;let u=this._tweaker.getFontSize(),d=this._tweaker.getFontFamily(),p=this._tweaker.getEditedState();s=this._getTextWidth(l,u,d,p,t),e+=o+a+s+(l>0?15:0)}),e},h.prototype._getTextWidth=function(e,t,i,n,o){return this._labels&&this._labels[e]&&o?r.computeStringWidth(o.label,t,i,n,n):0},h.prototype.setHighlightModel=function(e){if(void 0!==this._tweaker.value&&null!==this._tweaker.value){this._options.viewOptions;const e=o.getUnsafeHTMLContentValueToApply(this._tweaker.allowUnsafeHTMLContent);this._labels.forEach(t=>{t&&this._tweaker.value.label&&o.highlightContent(t,{highlightModel:this._tweaker.highlightModel,newValue:this._tweaker.value.label,allowUnsafeHTMLContent:e})})}},h.prototype.removeHighlightModel=function(){t.prototype.VIEW_MODULES.readOnly.classObject.prototype.setHighlightModel.call(this,void 0)},h.prototype._shouldFormatHTMLValue=function(e){return t.prototype.VIEW_MODULES.readOnly.classObject.prototype._shouldFormatHTMLValue.call(this,e)},h.prototype._cleanContainerProperties=function(){return t.prototype.VIEW_MODULES.readOnly.classObject.prototype._cleanContainerProperties.call(this)};var c=function(e,t){h.call(this,e,t)};o.applyMixin(c,h),c.prototype._initViewElements=function(){h.prototype._initViewElements.call(this),this._tweaker.getContent().addClassName("wux-tweakers-urlobject-detailed"+this._options.viewOptions.displayStyle),this._labelAndSubElementsContainers=[],this._subIconAndSubLabelContainers=[],this._subIcons=[],this._subLabels=[]},c.prototype._getTextWidth=function(e,t,i,n,o){let a=h.prototype._getTextWidth.call(this,e,14,i,n,o),s=this._subLabels&&this._subLabels[e]?r.computeStringWidth(this._subLabels[e].innerText,12,i,n,n):0,l=this._subIcons&&this._subIcons[e]?this._subIcons[e].offsetWidth+(s&&3):0;return Math.max(a,s+l)},c.prototype.setValue=function(t){let i,o,a,s,r,l,u,d=Array.isArray(t)?t:[t];this._options.hyperLinks=[],d.forEach((t,d)=>{i=t?t.url:void 0,o=t?t.parameters:void 0,a=t?t.icon:void 0,s=t?t.label:"",r=t?t.subIcon:void 0,l=t?t.subLabel:void 0,u=t?t.func:void 0,d>0&&(this._pipes[d]?this.pipes[d].show():(this._pipes[d]=e.createElement("span",{text:"|",class:this._tweaker._pipeClassName}),this._view.push(this._pipes[d]))),this._mainIcons[d]?n.cleanIcon(this._mainIcons[d]):(this._mainIcons[d]=e.createElement("span",{class:this._tweaker._iconClassName}),this._view.push(this._mainIcons[d]));let p=this._options&&this._options.viewOptions&&"user"===this._options.viewOptions.displayStyle;!a&&p&&(a={userName:s});let h=n.generateIcon(a,{target:this._mainIcons[d],roundFlag:p});this._mainIcons[d].setStyle("display",h?"":"none"),this._labelAndSubElementsContainers[d]||(this._labelAndSubElementsContainers[d]=e.createElement("div",{class:"wux-tweakers-string-label-sublabel-container"}),this._view.push(this._labelAndSubElementsContainers[d])),this._labelAndSubElementsContainers[d].show(),this._labels[d]||(this._labels[d]=e.createElement("a",{class:"wux-tweakers-string-label"}).inject(this._labelAndSubElementsContainers[d])),this._labels[d].textContent=s,this._labels[d].show(),i?(this._labels[d].href=i+(o||""),t.target&&t.target!==this._tweaker.hyperlinkTargets[d]&&(this.hyperlinkTargets[d]=t.target)):this._labels[d].removeAttribute("href"),u?this._labels[d].setAttribute("has-function",""):this._labels[d].removeAttribute("has-function"),this._subIconAndSubLabelContainers[d]||(this._subIconAndSubLabelContainers[d]=e.createElement("div",{class:"wux-tweakers-string-icon-sublabel-container"}).inject(this._labelAndSubElementsContainers[d])),this._subIconAndSubLabelContainers[d].show(),this._subIcons[d]||(this._subIcons[d]=e.createElement("div").inject(this._subIconAndSubLabelContainers[d]));let c=n.generateIcon(r,{target:this._subIcons[d]});this._subIcons[d].setStyle("display",c?"":"none"),this._subLabels[d]||(this._subLabels[d]=e.createElement("span",{class:"wux-tweakers-string-sublabel"}).inject(this._subIconAndSubLabelContainers[d])),this._subLabels[d]&&(this._subLabels[d].textContent=l),this._subLabels[d].show()});for(let e=d.length;e<this._labels.lenght;e++)this._mainIcons[e].hide(),this._labelAndSubElementsContainers[e].hide(),this._labels[e].hide(),this._subIconAndSubLabelContainers[e].hide(),this._subIcons[e].hide(),this._subLabels[e].hide()},c.prototype.setHighlightModel=function(e){if(void 0!==this._tweaker.value&&null!==this._tweaker.value){this._options.viewOptions;const e=o.getUnsafeHTMLContentValueToApply(this._tweaker.allowUnsafeHTMLContent);this._labels.forEach((t,i)=>{this._labels[i]&&this._tweaker.value.label&&o.highlightContent(this._labels[i],{highlightModel:this._tweaker.highlightModel,newValue:this._tweaker.value.label,allowUnsafeHTMLContent:e}),this._subLabels[i]&&this._tweaker.value.subLabel&&o.highlightContent(this._subLabels[i],{highlightModel:this._tweaker.highlightModel,newValue:this._tweaker.value.subLabel,allowUnsafeHTMLContent:e})})}};var v=function(e,t){d.call(this,e,t)};return o.applyMixin(v,d),v.prototype.buildView=function(){var e=this;if(this._tweaker.elements.container){var t=this._options.viewOptions||{};t.escapeHTML=this._tweaker.escapeHTML,t.touchMode=this._tweaker._getCurrentTouchMode(),t.disabled=this._tweaker.readOnly,t.selectAllOnFocus=!0,t.fireOnlyFromUIInteractionFlag=!0,t.autoCommitFlag=!0,t.displayClearFieldButtonFlag=!0,this._view=[],this._tweaker.getContent().addClassName("wux-tweakers-urlobject"),this._view._lineEditor=new a(t),this._view._lineEditor.getContent().addClassName("wux-tweakers-urlobject-editor"),this._view.push(this._view._lineEditor),this._view._editBtn=new s({label:"..."}),this._view._editBtn.getContent().addClassName("wux-tweakers-urlobject-button"),this._view.push(this._view._editBtn),this._view._giveFocus=function(){e._view._lineEditor._giveFocus()},this.setTouchMode(this._tweaker.touchMode),this.setValue(this._tweaker.value)}},v.prototype.handleEvents=function(){var t=this._view,n=(this._tweaker,this),o=n._view._lineEditor;t._editBtn.onClick=function(t){if(n._tweaker.value&&"function"==typeof n._tweaker.value)n._tweaker.value({context:n._tweaker.context});else if(n._tweaker.value&&n._tweaker.value.module){var i=n._tweaker.value.module,o=n._tweaker.value.func,a=n._tweaker.value.argument;a||(a={}),a.context=n._tweaker.executionContext,function(t,i,o){require([t],function(t){if(t){var a=t[i];if(a&&"function"==typeof a){var s=e.clone(o,!1);s||(s={}),s.context=n._tweaker.executionContext,a(s)}}})}(i,o,a)}},this._view=o,i.LineEditor.prototype.handleEvents.call(this),this._view=t,this._view._giveFocus=function(){n._view._lineEditor._giveFocus()}},v.prototype._getElementToFocus=function(){return this._view._lineEditor._getElementToFocus()},v.prototype.setValue=function(e,t){if(this._view&&this._tweaker){var i=this._tweaker.value;this._view._lineEditor.value=i?i.label:void 0,this.updateReferenceValueLabel()}},v.prototype.setTweakerValue=function(i){if(this._tweaker){var n=e.clone(this._tweaker.value,!1);void 0===n&&(n={}),n.label=i,t.prototype.baseViewModule.prototype.setTweakerValue.call(this,n)}},v.prototype.setTouchMode=function(e,t){this._view&&(this._view.touchMode=e)},v.prototype.usesReferenceValueLabel=function(){return!0},u.prototype.baseViewModule=d,u.prototype.VIEW_MODULES={clickableLabel:{classObject:p},clickableLabel_readOnly:{classObject:h,options:{viewOptions:{displayStyle:"clickableLabel"}}},clickableLabel_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString",options:{viewOptions:{typeRepresentation:"url",immediateOpenFlag:!0}}},clickableLabel_hasPossibleValues_readOnly:{classObject:h,options:{viewOptions:{displayStyle:"url"}}},searchableLink:{classObject:v},searchableLink_readOnly:{classObject:h,options:{viewOptions:{displayStyle:"searchableLink"}}},user:{classObject:p,options:{viewOptions:{displayStyle:"user"}}},user_readOnly:{classObject:h,options:{viewOptions:{displayStyle:"user"}}},user_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString",options:{viewOptions:{typeRepresentation:"user",immediateOpenFlag:!0}}},user_hasPossibleValues_readOnly:{classObject:h,options:{viewOptions:{displayStyle:"user"}}},detailedUser_readOnly:{classObject:c,options:{viewOptions:{displayStyle:"user"}}},detailedUser_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString",options:{viewOptions:{typeRepresentation:"detailedUser",columnOptions:{autoRowHeightFlag:!0},immediateOpenFlag:!0}}},detailedUser_hasPossibleValues_readOnly:{classObject:c,options:{viewOptions:{displayStyle:"user"}}},detailedInfo_readOnly:{classObject:c,options:{viewOptions:{displayStyle:"info"}}},detailedInfo_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString",options:{viewOptions:{typeRepresentation:"detailedInfo",columnOptions:{autoRowHeightFlag:!0},immediateOpenFlag:!0}}},detailedInfo_hasPossibleValues_readOnly:{classObject:c,options:{viewOptions:{displayStyle:"info"}}}},u.prototype.registerViewModule=function(e,t){},u});__extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerLayout",["require","exports","DS/Tweakers/TweakerBase","DS/Tweakers/StringViewModules","DS/Core/WebUXComponents","DS/WebRecordEnabler/Adapter","DS/Utilities/WUXUWAUtils"],function(e,t,i,n,o,a,s){"use strict";var r=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return s.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{displayStyle:{defaultValue:"layoutModes",type:"string"}}},enumerable:!1,configurable:!0}),t.prototype._preBuildView=function(){e.prototype._preBuildView.call(this),this.elements.container.addClassName("wux-tweakers-layout")},t.prototype._upgradeValue=function(e){if(null==e||"string"==typeof e||"object"==typeof e)return e},t}(i);return r.prototype.baseViewModule=n.Base,r.prototype.VIEW_MODULES={layoutModes:{classObject:n.Icon},layoutModes_hasPossibleValues:{classObject:n.IconWithPossibleValues}},r.prototype.registerViewModule=function(e,t){},o.addClass(r,"TweakerLayout"),r.prototype.markForRecordFlag=!0,a.register(r,"DS/ControlsRec/AbstractRec"),r});__extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();define("DS/Tweakers/TweakerString",["require","exports","UWA/Core","DS/Utilities/Utils","DS/Tweakers/TweakerBase","DS/Tweakers/StringViewModules","DS/Core/WebUXComponents","DS/WebRecordEnabler/Adapter","DS/Utilities/WUXUWAUtils"],function(e,t,i,n,o,a,s,r,l){"use strict";function u(e,t){return!e||"string"!=typeof e||Boolean(e.match("^(?:"+t+")$"))}var d=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.apply(this,t)||this;return l.extendingClassFlag,n}return __extends(t,e),Object.defineProperty(t,"publishedProperties",{get:function(){return{displayStyle:{defaultValue:"lineEditor",type:"string"},value:{defaultValue:"",type:"string",advancedSetter:!0,recordFlag:!0},placeholder:{defaultValue:"",type:"string"},pattern:{defaultValue:"",type:"string",category:"Behavior"},autoCorrectFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},minLengthBeforeSearch:{defaultValue:0,type:"integer",category:"Behavior"},typeDelayBeforeSearch:{defaultValue:500,type:"integer",category:"Behavior"},keepSearchResultsFlag:{defaultValue:!0,type:"boolean",category:"Behavior"}}},enumerable:!1,configurable:!0}),t.prototype.buildView=function(){e.prototype.buildView.call(this),this.elements.container.addClassName("wux-tweakers-string")},t.prototype._applyProperties=function(t){this.isDirty("pattern")&&!this.isDirty("value")&&this._updateValidState(),e.prototype._applyProperties.call(this,t),this.isDirty("minLengthBeforeSearch")&&this._applyMinLengthBeforeSearch(t.minLengthBeforeSearch),this.isDirty("typeDelayBeforeSearch")&&this._applyTypeDelayBeforeSearch(t.typeDelayBeforeSearch),this.isDirty("keepSearchResultsFlag")&&this._applyKeepSearchResultsFlag(t.keepSearchResultsFlag)},t.prototype._applyMinLengthBeforeSearch=function(e){this.elements._viewModule&&this.elements._viewModule.setMinLengthBeforeSearch&&this.elements._viewModule.setMinLengthBeforeSearch(this.minLengthBeforeSearch)},t.prototype._applyTypeDelayBeforeSearch=function(e){this.elements._viewModule&&this.elements._viewModule.setTypeDelayBeforeSearch&&this.elements._viewModule.setTypeDelayBeforeSearch(this.typeDelayBeforeSearch)},t.prototype._applyKeepSearchResultsFlag=function(e){this.elements._viewModule&&this.elements._viewModule.setKeepSearchResultsFlag&&this.elements._viewModule.setKeepSearchResultsFlag(this.keepSearchResultsFlag)},t.prototype._applyPattern=function(e){this._updateValidState(),this.readOnly&&this.elements._viewModule.formatHTMLValue?this.elements._viewModule.formatHTMLValue(this.value):this.elements._viewModule&&this.elements._viewModule.setPattern&&this.elements._viewModule.setPattern(this.pattern)},t.prototype._upgradeValue=function(e){if(!this.allowMultipleValuesFlag||!Array.isArray(e)){if("string"!=typeof e)return function(e){return null==e||"string"==typeof e?e:n.equalsToNaN(e)?this?this.value:void 0:"object"!=typeof e||e instanceof Array||e instanceof Date?String(e):void 0!==e.iconName&&void 0!==e.fontIconFamily?e:JSON.stringify(e,function(e,t){return""!==e&&"object"==typeof t?t.toString():t})}.call(this,e);if(this.escapeHTML)return i.String.escapeHTML(e)}return e},t.prototype._isValueValid=function(e){var t=this.pattern;if(t){if("string"==typeof e)return u(e,t);if(Array.isArray(e))for(var i=0,n=e.length;i<n;++i)if("string"==typeof e[i]&&!u(e[i],t))return!1}return!0},t}(o);return d.prototype.baseViewModule=a.Base,d.prototype.VIEW_MODULES={lineEditor:{classObject:a.LineEditor},lineEditor_hasPossibleValues:{classPath:"DS/TweakersEx/AutoCompleteViewModuleTweakerString"},lineEditor_hasPossibleValues_allowMultipleValues:{classPath:"DS/TweakersEx/AutoCompleteInlineViewModuleTweakerString"},password:{classObject:a.LineEditor,options:{viewOptions:{displayStyle:"password"}}},password_readOnly:{classObject:a.LineEditor,options:{viewOptions:{displayStyle:"password"}}},link:{classObject:a.LineEditor},link_readOnly:{classObject:o.prototype.VIEW_MODULES.readOnly.classObject,options:{hyperlink:1}},combo:{classObject:a.ComboBox,options:{viewOptions:{enableSearchFlag:!1,actionOnClickFlag:!1}}},icon:{classObject:a.Icon},icon_hasPossibleValues:{classObject:a.IconWithPossibleValues},icon_readOnly:{classObject:a.Icon},buttonGroup:{classObject:a.ButtonGroup},buttonGroup_readOnly:{classObject:a.ButtonGroup},color:{classObject:a.ColorPicker},color_readOnly:{classObject:a.ColorSquare},editor_readOnly:{classObject:o.prototype.VIEW_MODULES.readOnly.classObject,options:{wrap:1}},editor:{classObject:a.Editor},editorInline:{classObject:a.LineEditorDotsEditor},editorInline_readOnly:{classObject:a.StringDotsEditor},editor2Inline:{classObject:a.LineEditorDotsEditor,options:{viewOptions:{displayPopupOnCreation:!0}}},editor2Inline_readOnly:{classObject:o.prototype.VIEW_MODULES.readOnly.classObject},tag:{classObject:a.LineEditor},tag_readOnly:{classObject:a.Label},tag_allowMultipleValues:{classObject:a.SelectionChipsEditor},tag_allowMultipleValues_readOnly:{classObject:a.Label},lineEditor_allowMultipleValues:{classObject:a.SelectionChipsEditor}},d.prototype.registerViewModule=function(e,t){},s.addClass(d,"TweakerString"),d.prototype.markForRecordFlag=!0,r.register(d,"DS/ControlsRec/AbstractRec"),d}),define("DS/Tweakers/TweakerColor",["UWA/Core","DS/Utilities/Utils","DS/Tweakers/TweakerString","DS/Controls/ColorPicker","DS/Controls/ColorChooser","DS/Controls/ColorCanvas","DS/Utilities/KeyboardUtils","DS/Utilities/Dom","DS/Utilities/Color"],function(e,t,i,n,o,a,s,r,l){"use strict";var u=i.inherit({name:"TweakerColor",publishedProperties:{value:{defaultValue:"ffffff",type:"string",advancedSetter:!0},valueType:{defaultValue:"color",type:"string"},displayStyle:{defaultValue:"colorpicker",type:"string"},showAlphaFlag:{defaultValue:!1,type:"boolean"}},_applyValue:function(e,t){return this.showAlphaFlag?this.value=l.addAlphaComponentToHex(t):this.value=l.removeAlphaComponentFromHex(t),this._parent(e,this.value)},_upgradeValue:function(e){return t.upgradeValueAsColor.call(this,e)}}),d=function(e,t){i.prototype.baseViewModule.call(this,e,t)};t.applyMixin(d,i.prototype.baseViewModule),d.prototype.computeTweakerContentLength=function(){return this._tweaker._getCurrentTouchMode()?38:22},d.prototype.isValueDisplayedAsString=function(e){return!1};var p=function(e,t){d.call(this,e,t)};t.applyMixin(p,d),p.prototype.buildView=function(){this._tweaker.elements.container.addClassName("wux-tweakers-color-square"),this.setValue(this._tweaker.value)},p.prototype.destroy=function(){this._tweaker.elements.container&&(this._tweaker.elements.container.style.backgroundColor="",this._tweaker.elements.container.removeClassName("wux-tweakers-color-square"))},p.prototype.setValue=function(e){var t=this._tweaker;t&&("string"==typeof e&&"#"===e.charAt(0)&&(e=e.substr(1)),t.elements.container.style.backgroundColor=e?"#"+e:"")},p.prototype.setTouchMode=function(e){};var h=function(e,t){d.call(this,e,t)};t.applyMixin(h,d),h.prototype.buildView=function(){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.value=this._tweaker.value,e.fireOnlyFromUIInteractionFlag=!0,e.handleEditionCancel=!1,e.showAlphaFlag=this._tweaker.showAlphaFlag,this._view=new n(e),this._tweaker.elements.container.addClassName("wux-tweakers-color")},h.prototype.destroy=function(){this._view&&(this._view.popupVisibleFlag=!1),d.prototype.destroy.call(this)},h.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view,n=!1;i.addEventListener("show",function(e){!n&&i.elements._popup&&(i.elements._popup.addEventListener("beginEdit",function(e){e.stopPropagation()}),n=!0),e.stopPropagation(),t.onShow()}),i.addEventListener("hide",function(e){e.stopPropagation(),t.onHide(e.options)}),i.addEventListener("change",function(t){t.stopPropagation(),e.setTweakerValue(i.value)}),i.addEventListener("liveChange",function(t){t.stopPropagation(),e.setTweakerValue(i.value)}),r.addEventOnElement(this,i,"keydown",function(e){e.keyCode===s.ESCAPE&&t.onCancelEdit()})},h.prototype.setValue=function(e){var t=this._view;t&&("string"==typeof e&&"#"===e.charAt(0)&&(e=e.substr(1)),t.value=e)};var c=function(e,t){d.call(this,e,t)};t.applyMixin(c,d),c.prototype.buildView=function(){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.value=this._tweaker.value,e.fireOnlyFromUIInteractionFlag=!0,e.handleEditionCancel=!1,e.showAlphaFlag=this._tweaker.showAlphaFlag,this._view=new o(e),this._tweaker.value!==this._view.value&&(this._tweaker.value=this._view.value)},c.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i.addEventListener("beginEdit",function(e){e.stopPropagation(),t.onPreEdit()}),i.addEventListener("endEdit",function(e){e.stopPropagation(),t.onPostEdit()}),i.addEventListener("change",function(t){t.stopPropagation(),e.setTweakerValue(i.value)}),r.addEventOnElement(this,i,"keydown",function(e){e.keyCode===s.ESCAPE&&t.onCancelEdit()})},c.prototype.setValue=function(e){var t=this._tweaker,i=this._view;i&&t&&("string"==typeof e&&"#"===e.charAt(0)&&(e=e.substr(1)),i.value=e,i.value!==e&&(t.value=i.value))};var v=function(e,t){d.call(this,e,t)};t.applyMixin(v,d),v.prototype.buildView=function(){var e=this._options.viewOptions||{};e.touchMode=this._tweaker._getCurrentTouchMode(),e.value=this._tweaker.value,e.fireOnlyFromUIInteractionFlag=!0,e.handleEditionCancel=!1,this._view=new a(e)},v.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i.addEventListener("beginEdit",function(e){e.stopPropagation(),t.onPreEdit()}),i.addEventListener("endEdit",function(e){e.stopPropagation(),t.onPostEdit()}),i.addEventListener("change",function(t){t.stopPropagation(),e.setTweakerValue(i.value)}),r.addEventOnElement(this,i,"keydown",function(e){e.keyCode===s.ESCAPE&&t.onCancelEdit()})},v.prototype.setValue=function(e){var t=this._view;t&&("string"==typeof e&&"#"===e.charAt(0)&&(e=e.substr(1)),t.value=e)};var w=function(e,t){d.call(this,e,t)};return t.applyMixin(w,d),w.prototype.buildView=function(){this._view=e.createElement("div",{class:"wux-tweakers-color-colorbar"});var t=this._options.viewOptions||{};t.handleEditionCancel=!1,this._colorPickerVM=new h(this._tweaker,t),this._colorPickerVM._view.inject(this._view),this._colorCanvasVM=new v(this._tweaker,t),this._colorCanvasVM._view.inject(this._view)},w.prototype.handleEvents=function(){var e=this,t=this._tweaker;t.addEventListener("show",function(t){e._colorCanvasVM._view.elements._pickerCursor.hide()}),t.addEventListener("hide",function(t){e._colorCanvasVM._view.elements._pickerCursor.show()})},w.prototype.setValue=function(e){var t=this._tweaker;if(this._view&&t){t.disableEvents();var i=!1;this._colorPickerVM.setValue(e),i=i||this._colorPickerVM._updateFromView,this._colorCanvasVM.setValue(e),i=i||this._colorCanvasVM._updateFromView,t.enableEvents()}},w.prototype.setTouchMode=function(e){this._colorCanvasVM.setTouchMode(e),this._colorPickerVM.setTouchMode(e)},w.prototype.destroy=function(){this._colorPickerVM.destroy(),this._colorCanvasVM.destroy(),d.prototype.destroy.call(this)},u.prototype.baseViewModule=d,u.prototype.VIEW_MODULES={readOnly:{classObject:p},colorpicker:{classObject:h},std_readOnly:{classObject:p},std:{classObject:c},colorBar_readOnly:{classObject:p},colorBar:{classObject:w},canvas:{classObject:v}},u.prototype.registerViewModule=function(e,t){},u}),define("DS/Tweakers/TweakerMultiRep",["UWA/Core","DS/Core/PointerEvents","DS/Tweakers/TweakerBase","DS/Tweakers/TweakerString","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/Popup","DS/Utilities/Dom"],function(e,t,i,n,o,a,s,r){"use strict";function l(e){e.stopPropagation(),this.editor&&(this.lastEditor=this.editor),"dialog"===this.augmentedDisplay?(this._dialog||(this._popup&&this._popup.destroy(),this._dialog=this._buildDialog()),this._dialog.visibleFlag=!0):(this._dialog&&this._dialog.destroy(),!this._popup&&this.elements.editBtn&&(this._popup=this._buildPopup(this.elements.editBtn),this.elements.editBtn._popup=this._popup),this._popup.getContent().setStyle("height","176px"),this._popup.getContent().setStyle("width",this.internalTweakerString.getContent().offsetWidth+this.elements.editBtn.getContent().offsetWidth+"px"),this._popup._updateView(),this._popup.toggle())}function u(e){var t=e.getParent(".wux-windows-window");if(t)return t.dsModel;var i=e.getParent(".wux-controls-popup");return i?u(i.dsModel.target.getContent()):null}return i.inherit({name:"TweakerMultiRep",editor:void 0,publishedProperties:{displayStyle:{defaultValue:"inline",type:"string"},liveChangeFlag:{defaultValue:!1,type:"boolean"}},_preEditValue:function(e,t){return!0},_postBuildView:function(){switch(this.displayStyle){case"inline":this._buildInlineEditor();break;case"std":this._buildStdEditor()}this._preEditValue(null,this.value)&&this._applyValue(this.value),this._applyReadOnly()},_applyValue:function(t){switch(this.displayStyle){case"inline":this._applyValueInline(t),this.editor&&!e.equals(this.value,this.editor.value)&&("dialog"===this.augmentedDisplay?this.editor.value=this._copyValueForDialog():void 0!==this.value&&null!==this.value&&(this.editor.value=this.value)),this._manageEditButtonVisibility();break;case"std":this._applyValueStd(t)}},_applyValueInline:function(){},_applyTouchMode:function(){this._parent(),this.elements.editBtn&&(this.elements.editBtn.touchMode=this.touchMode),this.internalTweakerString&&(this.internalTweakerString.touchMode=this.touchMode)},_applyDialogOptions:function(){if(this._dialog){this._dialog.title=this.dialogOptions.title,this._dialog.icon=this.dialogOptions.icon,this._dialog.width=this.dialogOptions.width,this._dialog.height=this.dialogOptions.height;var e=u.call(this,this.getContent());e&&e.modalFlag&&(this.dialogOptions.modalFlag=!0),this._dialog.modalFlag=this.dialogOptions.modalFlag}},_applyValueStd:function(e){this.elements.internalView&&(this.elements.internalView.value=this.value)},_applyReadOnly:function(){switch(this.displayStyle){case"inline":this.internalTweakerString&&(this.internalTweakerString.readOnly=this.readOnly,this.readOnly&&this.elements.editBtn?this.elements.editBtn.getContent().removeClassName("wux-tweakers-multirep-button-line-editor"):this.elements.editBtn.getContent().addClassName("wux-tweakers-multirep-button-line-editor"),this._manageEditButtonVisibility()),this.editor&&(this.editor.readOnly=this.readOnly);break;case"std":this._parent()}},_buildInlineEditor:function(){var t=this;this.elements.internalView&&(r.removeEventOnElement(this,this.elements.editBtn,"click",l.bind(t)),this.elements.editBtn.destroy(),this.elements.internalView.remove()),this.elements.internalView=e.createElement("div"),this.elements.internalView.addClassName("wux-tweakers-multirep wux-tweakers-multirep-inline-editor"),this.internalTweakerString=new n({readOnly:this.readOnly,touchMode:this.touchMode}),this.internalTweakerString.inject(this.elements.internalView),this.elements.internalView.inject(this.elements.container),this.internalTweakerString.getContent().addClassName("wux-tweakers-multirep-tweakerstring"),this.internalTweakerString.getContent().addEventListener("change",function(e){if(e.stopPropagation(),(!t._dialog||!t._dialog.visibleFlag)&&(t.editor&&t.editor._changeOptions&&(t._changeOptions=t.editor._changeOptions),t._processValueFromString(t.internalTweakerString.value),t._preEditValue(null,t.value)))if(t._applyValue(t.value),t._popup&&t._popup.visibleFlag)"[]"!==t.internalTweakerString.value&&JSON.stringify(t._changeOptions)!==t.internalTweakerString.value&&t.fire("liveChange",t._changeOptions);else if(!t._popup||t._popup&&!t._popup.visibleFlag){if(t._lockUI)return;t.fire("change",t._changeOptions)}}),this.elements.editBtn=new o({label:"...",touchMode:this.touchMode}),this.elements.editBtn.getContent().addClassName("wux-tweakers-multirep-button"),r.addEventOnElement(this,this.elements.editBtn,"click",l.bind(t)),this.elements.editBtn.inject(this.elements.internalView),this._manageEditButtonVisibility()},_manageEditButtonVisibility(){if(!this.elements.editBtn)return;this._checkOnNodeRendered=!1;let e=!0;this.readOnly&&(void 0===this.value||null===this.value?e=!1:Array.isArray(this.value)&&0===this.value.length?e=!1:"object"==typeof this.value&&0===Object.keys(this.value).length?e=!1:this.internalTweakerString&&(this.getContent().isConnected?this.internalTweakerString.computeContentSize()<this.getContent().offsetWidth&&(e=!1):(this._checkOnNodeRendered=!0,this._cbSet||(this._cbSet=!0,this.elements.editBtn.getContent().setStyle("visibility","hidden"),r.onNodeRendered(this.getContent(),()=>{this._cbSet=!1,this._checkOnNodeRendered?(this.elements.editBtn.visibleFlag=this.internalTweakerString.computeContentSize()>this.getContent().offsetWidth,this.elements.editBtn.getContent().setStyle("visibility","visible")):this.elements.editBtn.getContent().setStyle("visibility","visible")},{once:!0}))))),this.elements.editBtn.visibleFlag=e},_processValueFromString:function(e){},_processValueFromCopy:function(e){console.log("Override the method _processValueFromCopy of the TweakerMultirep to correctly manage the update of the value"),this.value=e},_copyValueForDialog:function(){return console.log("Override the method _copyValueForDialog of the TweakerMultirep to correctly manage the update of the value"),this.value},_buildStdEditor:function(){},_buildEditor:function(e){},_buildDialog:function(){var e=this;e.editor=e._buildEditor({displayStyle:"std",value:e._copyValueForDialog(),readOnly:e.readOnly,valueType:e.valueType,liveChangeFlag:e.liveChangeFlag});var t=function(t){e._dialog.visibleFlag=!1,e.editor&&(e._dialog.destroy(),e._dialog=void 0),e.fire("cancelEdit")},i=new a({title:e.dialogOptions.title?e.dialogOptions.title:e.editorTitle,icon:e.dialogOptions.icon,content:e.editor,resizableFlag:!0,height:e.dialogOptions.height?e.dialogOptions.height:240,width:e.dialogOptions.width?e.dialogOptions.width:200,identifier:e.dialogOptions.identifier?e.dialogOptions.identifier:"",buttons:{Ok:new o({onClick:function(t){var i=e.value;e.editor&&(e._processValueFromCopy(e.editor.value),e._applyValue()),t.dsModel.dialog.visibleFlag=!1,i=JSON.stringify(i,function(e,t){return void 0===t?null:t});var n=JSON.stringify(e.editor.value,function(e,t){return void 0===t?null:t});e.editor&&(e._dialog.destroy(),e._dialog=void 0),i!==n&&e.fire("change",e.value)}}),Cancel:new o({onClick:t})},autoCloseFlag:!1});i.addEventListener("close",t);var n=function e(t){var i=t.getParent(".wux-windows-immersive-frame");if(i)return i.dsModel;var n=t.getParent(".wux-controls-popup");if(n)return e(n.dsModel.target.getContent());return null}.call(this,e.getContent());n?n.addWindow(i):document.body&&(i.inject(document.body),i.getContent().setStyle("z-index",1e3));var s=u.call(this,e.getContent());if(s&&s.modalFlag&&(e.dialogOptions.modalFlag=!0),i.modalFlag=e.dialogOptions.modalFlag,!n){var r=e.getContent().getParent(".wux-controls-popup");r&&i.getContent().parentElement.setStyle("z-index",parseInt(r.getStyle("zIndex"))+1)}return i.position={at:"center center",my:"center center"},e._dialog=i,(e.value&&0===e.value.length||!e.value||null===e.value)&&e._placeholderView?e._placeholderView():e.elements._placeholder&&(e.elements._placeholder.style.display="none"),e._dialog.addEventListener("change",function(e){e.stopPropagation()}),i},_buildPopup:function(e){var i=this;i.editor=i._buildEditor({displayStyle:"std",value:i.value,readOnly:i.readOnly,valueType:i.valueType}),i.editor&&i.editor.addEventListener("change",function(e){e.stopPropagation(),i.editorInitialValue=i.editor.value,e.stopPropagation(),i._popup&&i._popup.visibleFlag?i.value!==i.editor.value?i.value=i.editor.value:i.fire("liveChange",i.editor._changeOptions):(!i._popup||i._popup&&!i._popup.visibleFlag)&&(i.value!==i.editor.value?i.value=i.editor.value:i.fire("change",i.editor._changeOptions))});var n=this.name?this.name.toLowerCase().replace("tweaker",""):void 0,o="wux-controls-popup wux-controls-popup-tweaker-multi-rep";n&&(o=o+" wux-controls-popup-tweaker-"+n);var a=new s({target:e,position:"bottom",alignment:"far",className:o,constraint:"screen"});function l(e){!a.visibleFlag||a.isElementInside(e.target)||i.elements.editBtn&&i.elements.editBtn.getContent().contains(e.target)||(a.hide(),document.body.removeEventListener(t.POINTERDOWN,l))}return a.getContent().setStyle("height","176px"),a.getContent().setStyle("width",i.internalTweakerString.getContent().offsetWidth+i.elements.editBtn.getContent().offsetWidth-parseInt(a.getContent().getStyle("padding-right"))-parseInt(a.getContent().getStyle("padding-left"))+"px"),r.addEventOnElement(this,a,"show",function(e){if(e.target&&e.target.dsModel===a){if(i.value)try{i.initialValue=JSON.parse(JSON.stringify(i.value))}catch(e){i.initialValue=void 0}if(i._applyValue(),i._applyValueStd(),i._popup.getBody()){var n=i._popup.getBody().doc;n&&i.doc&&n.getChildren()!==i.doc.getChildren()?(n=i.doc,i.value&&0===i.value.length||!i.value||null===i.value?i._placeholderView.call(i):(i.elements._placeholder&&(i.elements._placeholder.style.display="none"),a.setBody(i.editor))):n||(i.value&&0===i.value.length||!i.value||null===i.value?i._placeholderView():(i.elements._placeholder&&(i.elements._placeholder.style.display="none"),a.setBody(i.editor)))}r.addEventOnElement(a,document.body,t.POINTERDOWN,l),i.internalTweakerString.getContent().addEventListener("focus",l),i.editor&&i.editor._applyDisplayRowIndexes&&i.editor._applyDisplayRowIndexes()}}),r.addEventOnElement(this,a,"hide",function(e){i._applyValueInline(),(i.value&&i.initialValue&&JSON.stringify(i.value)!==JSON.stringify(i.initialValue)||!i.initialValue&&i.value)&&i.fire("change")}),a.setBody(i.editor),a},_applyDisplayRowIndexes:function(){},_applyProperties:function(e){this.isDirty("value")&&this._preEditValue(e.value,this.value)&&this._applyValue(e.value),this.isDirty("dialogOptions")&&this._applyDialogOptions(e.dialogOptions),this.isDirty("readOnly")&&this._applyReadOnly(e.readOnly),this.isDirty("touchMode")&&this._applyTouchMode(e.touchMode)}})}),define("DS/Tweakers/TweakerEnum",["UWA/Core","DS/Utilities/Utils","DS/Tweakers/TweakerBase","DS/Controls/TooltipModel","DS/Controls/ComboBox","DS/Controls/ButtonGroup","DS/Controls/Toggle","DS/Controls/Button","DS/Tweakers/TweakerUtils","DS/Utilities/Dom"],function(e,t,i,n,o,a,s,r,l,u){"use strict";var d=i.inherit({name:"tweakerEnum",publishedProperties:{displayStyle:{defaultValue:"combo",type:"string"},valueType:{defaultValue:"enumString",type:"string"}},_buildView:function(){this._viewCreated=!1},_postBuildView:function(){this._viewCreated=!0,this._applyDisplayStyle(),this._parent()},_applyDisplayStyle:function(e){this._viewCreated&&this._parent(e)},getStringFromValue:function(e){return h(this.valueType,e,this.possibleValues)}});function p(e,t,i){switch(e){case"enumInteger":return parseInt(t,10);case"number":return parseFloat(t);case"boolean":return null!==/true/i.exec(t)||"1"===t;case"enumString":return t;case"enumCustom":for(var n in i)if(i[n].toString()==t)return i[n];break;case"enumValueToProperty":for(var n in i)if(n.toString()==t)return n;break;case"object":return JSON.parse(t);default:return t}}function h(e,t,i){if(void 0===t)return"";if("object"===e)return JSON.stringify(t);if(("enumInteger"===e||"number"===e)&&(Number.isNan&&!0===Number.isNaN(t)||void 0!==isNaN&&!0===isNaN(t)))return"NaN";if("enumInteger"===e||"number"===e||"enumString"===e)return t.toString();if("enumCustom"===e)for(var n in i){if(n==t)return n;if(i[n]==t)return n}else{if("enumValueToProperty"!==e)return l._getValueFromString(e,t);for(var n in i)if(n==t)return i[n]}}var c=function(e,t){i.prototype.baseViewModule.call(this,e,t)};t.applyMixin(c,i.prototype.baseViewModule),c.prototype._getElementToFocus=function(){return this._view._getElementToFocus()};var v=function(e,t){this._loadEntriesBinded=function(){this._view&&(this._view.elementsList=this._tweaker.possibleValues.call(this._tweaker).slice(0))}.bind(this),c.call(this,e,t)};t.applyMixin(v,c),v.prototype.buildView=function(){var e=this._options.viewOptions||{},t=this._tweaker;e.touchMode=t._getCurrentTouchMode(),e.disabled=t.readOnly,e.fireOnlyFromUIInteractionFlag=!0,e.reachablePlaceholderFlag=t.allowResetToUndefinedByUIFlag,e.placeholder=t.placeholder,this._view=new o(e),this.setPossibleValues(this._tweaker.possibleValues),this.setValue(this._tweaker.value)},v.prototype.computeTweakerContentLength=function(){var e=this._tweaker.touchMode?54:31,t=u.computeStringWidth(this._view.label,this._tweaker.getFontSize(),this._tweaker.getFontFamily(),this._tweaker.getEditedState())+e;return this._view.elements.iconPlaceholder&&(t=t+this._view.elements.iconPlaceholder.offsetWidth+11),t},v.prototype.handleEvents=function(){var e=this,t=this._tweaker,i=this._view;i.addEventListener("change",function(n){n.stopPropagation(),e.setTweakerValue(p(t.valueType,i.value,t.possibleValues))}),i.addEventListener("show",function(e){e.stopPropagation(),t.onShow()}),i.addEventListener("hide",function(e){e.stopPropagation(),t.onHide({cancelFlag:!!e.options.cancelPopupSelection})}),i.addEventListener("preselectionChange",function(n){if(n.stopPropagation(),i.preselectedIndex>=0){var o=i._getAllDescendants()[i.preselectedIndex].options.grid.valueItem;void 0===o&&(o=i._getAllDescendants()[i.preselectedIndex].options.label),e.setTweakerValue(p(t.valueType,o,t.possibleValues))}else e.setTweakerValue(void 0)}),"enumDyn"===t.valueType&&"function"==typeof t.possibleValues&&i.addEventListener("preDropdown",this._loadEntriesBinded)},v.prototype.destroy=function(){this._view.removeEventListener("preDropdown",this._loadEntriesBinded),c.prototype.destroy.call(this)},v.prototype.getModifiableOptions=function(){return["enableSearchFlag","mainElementVisibleFlag","expanderIcon"]},v.prototype.setEnableSearchFlag=function(e){this._view&&(this._view.enableSearchFlag=e)},v.prototype.setPlaceholder=function(e){this._view&&(this._view.placeholder=e)},v.prototype.setAllowResetToUndefinedByUIFlag=function(e){this._view&&(this._view.reachablePlaceholderFlag=e)},v.prototype.setMainElementVisibleFlag=function(e){this._view&&(this._view.mainElementVisibleFlag=e)},v.prototype.setExpanderIcon=function(e){this._view&&(this._view.expanderIcon=e)},v.prototype.setValue=function(e){var t=this._tweaker,i=this._view;"function"!=typeof t.possibleValues||i._isPopupOpened()||(this._lockValueUpdate=!0,i.elementsList=t.possibleValues.call(t).slice(0));var n=i.elementsList;if(n&&0!==n.length&&""!==e&&void 0!==e){if(null==e)return;for(var o=e.toString(),a=0;a<n.length;a++)if(e===n[a]||e===n[a].value||o===n[a]||o===n[a].value){i.selectedIndex=a;break}}else i.selectedIndex=-1},v.prototype.setPossibleValues=function(t){this._view&&(this._view.removeEventListener("preDropdown",this._loadEntriesBinded),"enumDyn"===this._tweaker.valueType&&"function"==typeof t?this._view.addEventListener("preDropdown",this._loadEntriesBinded):this._view.elementsList=function(){var t=this._tweaker;if(void 0!==t.possibleValues){if("enumString"===t.valueType){if("object"===e.typeOf(t.possibleValues)){var i=[];for(var n in t.possibleValues)t.possibleValues.hasOwnProperty(n)&&i.push({value:t.possibleValues[n],label:n});return i}return"array"===e.typeOf(t.possibleValues)?t.possibleValues.map(function(e){return"string"==typeof e?e:{label:void 0===e.label?e.value:e.label,value:e.value,icon:e.icon,description:e.description}}):t.possibleValues}if("enumDyn"===t.valueType&&"function"==typeof t.possibleValues)return[];var o=[];if(t.possibleValues.constructor===Array)for(var a=0;a<t.possibleValues.length;a++)o.push(h(t.valueType,t.possibleValues[a],t.possibleValues));else if("enumValueToProperty"===t.valueType)for(var n in t.possibleValues)o.push({label:t.possibleValues[n],value:n});else for(var n in t.possibleValues)o.push({label:h(t.valueType,n,t.possibleValues),value:t.possibleValues[n]});return o}return[]}.call(this))};var w=function(e,t){c.call(this,e,t)};return t.applyMixin(w,c),w.prototype.buildView=function(){var e=this._options.viewOptions;e.disabled=this._tweaker.readOnly,e.touchMode=this._tweaker._getCurrentTouchMode(),e.fireOnlyFromUIInteractionFlag=!0,this._view=new a(e);var t=this._tweaker.value;this.setPossibleValues(this._tweaker.possibleValues),this.setValue(t)},w.prototype.handleEvents=function(){var e=this,t=(this._tweaker,this._view);t.addEventListener("change",function(i){i.stopPropagation(),e.setTweakerValue(t.value)})},w.prototype.setPossibleValues=function(e){var t=this._tweaker,i=this._view;if(i&&t&&e){for(var o=i.getButtonCount(),a=0;a<o;a++){var s=i.getButton(0);i.removeChild(s),s.destroy()}if("enumString"===t.valueType)e.forEach(function(e){if("object"==typeof e){const t=new r({type:i.type,label:e.label,value:e.value,icon:e.icon});e.description&&(t.tooltipInfos=new n({shortHelp:e.description})),i.addChild(t)}else i.addChild(new r({type:i.type,label:e,value:e}))});else if("enumDyn"===t.valueType);else if("enumValueToProperty"===t.valueType)for(var l in e)i.addChild(new r({type:i.type,label:e[l],value:l}));else for(var l in e)i.addChild(new r({type:i.type,label:l,value:e[l]}))}},w.prototype.setValue=function(e){var t=this._tweaker,i=this._view;i&&t&&(i.value=e)},d.prototype.baseViewModule=c,d.prototype.VIEW_MODULES={combo:{classObject:v,options:{viewOptions:{enableSearchFlag:!1}}},comboLite:{classObject:v,options:{viewOptions:{enableSearchFlag:!1,mainElementVisibleFlag:!1,displayStyle:"lite"}}},searchableCombo:{classObject:v},buttonGroup:{classObject:w},buttonGroup_readOnly:{classObject:w}},d.prototype.registerViewModule=function(e,t){},d}),define("DS/Tweakers/TypeRepresentationDirectory",["UWA/Core","UWA/Class","DS/Core/Core","DS/Utilities/Array","DS/CoreEvents/ModelEvents","DS/Tweakers/TweakerUtils","text!DS/Tweakers/assets/defaultTypeRepresentations.json","text!DS/Tweakers/assets/typeTemplates.json"],function(e,t,i,n,o,a,s,r){"use strict";var l=function(e){var t,i=this;for(var n in e)t=n,i._callOnTemplateRequired(t,function(t){0===Object.keys(this._templatesToRequire).length&&i._modelEvents.publish({context:i,event:"templatesRequired",data:Object.keys(e)})})},u=function(e){e&&(e._childrenDirectories.push(this),e.getModelEvents()._addParent(this.getModelEvents()))},d=function(t){this._options=e.extend({preLoadTemplates:!1,parentDirectory:p},t),this._typeRepresentations={},this._enumerations={},this._templates={},this._modelEvents=new o,this._templatesToRequire={},this._bufferTemplateLoaded={},this._childrenDirectories=[],u.call(this,this._options.parentDirectory),a.addTypeRepresentationDirectory(this)};d.prototype.destroy=function(){(function(){var e=this._options.parentDirectory;if(this._options.parentDirectory){var t=e._childrenDirectories.indexOf(this);-1!==t&&e._childrenDirectories.splice(t,1),e.getModelEvents()._unsetParent(this.getModelEvents());var i=this;this._childrenDirectories.forEach(function(t){i.getModelEvents()._unsetParent(t.getModelEvents()),u.call(t,e)}),this._options.parentDirectory=void 0}}).call(this),a.removeTypeRepresentationDirectory(this)},d.prototype.setPreLoadTemplates=function(e){this._options.preLoadTemplates=e,this._options.preLoadTemplates&&l.call(this,this._templatesToRequire)},d.prototype.getNumberOfTemplatesToRequire=function(){return Object.keys(this._templatesToRequire).length},d.prototype.getModelEvents=function(){return this._modelEvents},d.prototype.registerTypeRepresentations=function(t){if(void 0!==t){var i=typeof t;if("string"!==i&&"object"!==i)throw new Error("Cannot register type representations");var n=t;"string"===i&&(n=JSON.parse(t)),e.merge(this._typeRepresentations,n)}},d.prototype.getRegisteredTypeRepresentation=function(e){if(e){if(this._typeRepresentations[e])return this._typeRepresentations[e];if(this._parentDirectory)return this._parentDirectory.getRegisteredTypeRepresentation(e)}},d.prototype.registerEnumerations=function(t){if(void 0!==t){var i=typeof t;if("string"!==i&&"object"!==i)throw new Error("Cannot register type representations");var n=t;"string"===i&&(n=JSON.parse(t)),e.merge(this._enumerations,n)}},d.prototype.getRegisteredEnumeration=function(e){if(e){if(this._enumerations[e])return this._enumerations[e];if(this._parentDirectory)return this._parentDirectory.getRegisteredTypeRepresentation(e)}},d.prototype.registerTemplates=function(t){if(void 0!==t){var i=typeof t;if("string"!==i&&"object"!==i)throw new Error("Cannot register templates");var n=t;for(var o in"string"===i&&(n=JSON.parse(t)),n)n[o].path||delete n[o];var a=Object.keys(n),s=this;if(a.forEach(function(e){void 0!==s.getRegisteredTemplate(e)&&delete n[e]}),0===a.length)return;e.merge(this._templatesToRequire,n),e.merge(this._templates,n),this._options.preLoadTemplates&&l.call(this,n)}},d.prototype.getRegisteredTemplate=function(e){if(e){if(this._templates[e])return this._templates[e];if(this._parentDirectory)return this._parentDirectory.getRegisteredTypeTemplate(e)}},d.prototype._callOnTemplateRequired=function(e,t){var i=this.getRegisteredTemplate(e);if(i)if(i.src)t.call(this,i.src);else{var n=i.path;if(this._bufferTemplateLoaded[n])this._bufferTemplateLoaded[n].templateIdentifiers.push(e),this._bufferTemplateLoaded[n].templateDefinitions.push(i),this._bufferTemplateLoaded[n].callbacks.push(t);else{this._bufferTemplateLoaded[n]={templateIdentifiers:[e],templateDefinitions:[i],callbacks:[t]};var o=this;require([n],function(e){for(var t=0;t<o._bufferTemplateLoaded[n].templateIdentifiers.length;t++)delete o._templatesToRequire[o._bufferTemplateLoaded[n].templateIdentifiers[t]],o._bufferTemplateLoaded[n].templateDefinitions[t].src=e,o._bufferTemplateLoaded[n].callbacks[t].call(o,e);o._options.preLoadTemplates||o._modelEvents.publish({context:o,event:"templatesRequired",data:o._bufferTemplateLoaded[n].templateIdentifiers}),delete o._bufferTemplateLoaded[n]})}}};var p=new d({preLoadTemplates:!1,parentDirectory:void 0});return p.registerTypeRepresentations(s),p.registerTemplates(r),p.registerEnumerations({allSupportedTypes:function(e){var t=e||p,i=[],o=t;do{[t._typeRepresentations,t._enumerations].forEach(function(e){for(var t in e)n.pushUnique(i,t)}),o=o._options.parentDirectory}while(o);return i.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})}}),d.WebUXTypeRepresentationDirectory=p,d}),define("DS/Tweakers/TypeRepresentationFactory",["UWA/Core","UWA/Class","UWA/Class/Promise","DS/Core/Core","DS/Utilities/ReusableContentsManager","DS/Tweakers/TypeRepresentationDirectory"],function(e,t,i,n,o,a){"use strict";function s(e,t){this.onFailure&&"function"==typeof this.onFailure&&this.onFailure({message:e,data:t,typePath:this.typePath,typeRep:this.typeRep})}function r(e){return"true"==e}function l(e){if(Array.isArray(e)){if(e.every(function(e){return"string"==typeof e}))return"enumString";if(e.every(function(e){return"number"==typeof e}))return"enumInteger"}else if("function"==typeof e)return"enumDyn";return"enumCustom"}var u=t.extend({init:function(t){this._parent(t),this.options=e.extend({directory:a.WebUXTypeRepresentationDirectory,onReady:function(){},preLoadTemplates:!0},t),this._reusablesManager=new o,this._isReady=!1,Object.defineProperty(u.prototype,"onReady",{get:function(){return this.options.onReady},set:function(e){this.options.onReady=e,this._isReady&&e.call(this)},enumerable:!0,configurable:!0});var i=this,n=function(){i._isReady=!0,i.options.onReady&&i.options.onReady.call(i)};if(this.options.preLoadTemplates&&0!==this.options.directory.getNumberOfTemplatesToRequire())var s=this.options.directory.getModelEvents(),r=s.subscribe({event:"templatesRequired"},function(){s.unsubscribe(r),n()});else n();this.options.directory.setPreLoadTemplates(this.options.preLoadTemplates),Object.defineProperty(u.prototype,"typeReps",{get:function(){return this.options.directory._typeRepresentations},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"typeEnums",{get:function(){return this.options.directory._enumerations},enumerable:!0,configurable:!0})},destroy:function(){this._reusablesManager.destroy(),this._parent()},generateTweaker:function(t,i){if(void 0!==i&&void 0!==i.typeRep){var n=this.getTemplateIdentifierFromTypeRep(i.typeRep,i.context);if(void 0!==n){"string"!=typeof n&&(n=i.readOnly&&n.readOnly?n.readOnly:n.default);var o=this.options.directory.getRegisteredTemplate(n);if(void 0!==o){var a=this,l=(i.semantics?e.merge(i.semantics,i.typeRep.semantics):i.typeRep.semantics)||{};if(l.readOnly=void 0!==i.readOnly?i.readOnly:r(l.readOnly),l.touchMode=void 0!==i.touchMode?i.touchMode:l.touchMode,l.icon=void 0!==i.icon?i.icon:l.icon,l.escapeHTML=void 0!==i.escapeHTML?i.escapeHTML:r(l.escapeHTML),!l.hasOwnProperty("valueType")&&void 0===i.valueType&&void 0!==i.typePath){var u,d,p=i.typePath.indexOf("<"),h=i.typePath.indexOf(">");if(-1!==p&&-1!==h&&p<h)u=i.typePath.substring(p+1,h);else if("array"===i.typePath||i.typeRep&&i.context&&"array"===i.typeRep[i.context]&&(!i.semantics||"auto"!==i.semantics.valueType))u="auto";else{u=""!==i.typePath?i.typePath:e.typeOf(t);var c=this._getTypeData(i.typePath).realType;d=c||(""!==i.typePath?i.typePath:e.typeOf(t))}l.valueType=u,l.realType=d}this.options.directory._callOnTemplateRequired(n,function(r){!i.needToCreateViewAfterRequireEnded||i.needToCreateViewAfterRequireEnded&&!0===i.needToCreateViewAfterRequireEnded.call(a)?function(t,i,n,o,a,r){var l=this;if(void 0!==n){this._currentValue=o,this._currentOptions=r,this._currentSemantics=a,this._reusablesManager.isRegistered(t)||this._reusablesManager.register({id:t,buildContent:function(){var t={};return e.merge(t,i.options),e.merge(t,l._currentOptions),t.value=l._currentValue,t=e.extend(t,l._currentSemantics),new n(t)},cleanContent:function(e){e.cleanContent()}});var u=this._reusablesManager.use(t).component;if(void 0!==u){u.disableEvents&&u.disableEvents(),e.merge(a,i.options),e.merge(a,r),a.realPath=r.realPath,u.failureCapture&&(a.onFailure=r.onFailure);var d=u.getPublishedPropertiesDefaultValue();e.merge(a,d),a.value=o,void 0===a.referenceValue&&(a.referenceValue=e.clone(o,!1)),a&&u.setProperties&&u.setProperties(a),u.enableEvents&&u.enableEvents(),u._isViewBuilt()?r.onViewCreated(u):u.addEventListener("viewBuilt",function(){r.onViewCreated(u)},{once:!0})}else s.call(r,"",o)}}.call(a,n,o,r,t,l,i):s.call(i,"No need to create view",t)})}else s.call(i,"Cannot retrieve a view template for the given typePath",t)}else s.call(i,"Cannot generate view with the typeRep found for the given typePath",t)}},generateView:function(t,n){if(void 0===n.onViewCreated&&void 0===n.onFailure){var o=this;return new i(function(e,i){n.onViewCreated=function(t){e(t)},n.onFailure=function(e){i(e)},o.generateView(t,n)})}n=n||{};var a=this._getTypeData(n.typePath,n.semantics,t);n.semantics=n.semantics||{},e.merge(n.semantics,a.semantics),null!==a.typePath&&void 0!==a.typePath?void 0!==a.typeRep?(n.typeRep=a.typeRep,n.typePath=a.typePath,this.generateTweaker(t,n)):s.call(n,"Cannot generate view with the given typePath",t):s.call(n,"Cannot generate view with an undefined typePath and undefined data",t)},getTemplateIdentifierFromTypeRep:function(e,t){var i;if(e){var n=t||"stdTemplate";void 0===e[n]&&(n="stdTemplate"),i=e[n]}return i},_getTypeData:function(t,i,n){var o,a,s=this,r="";function u(e,t){var i=l(e),n=s.options.directory.getRegisteredTypeRepresentation(i);return(t=t||{}).possibleValues=e,{semantics:t,finalPath:i,typeRep:n}}if(!1!==(t=t||e.typeOf(n))&&!0!==t||(t=e.typeOf(t)),null!=t){var d,p=t.split("#");2===p.length&&(t=p[0],d=p[1]);var h=t.split("."),c="";if(h.every(function(e,t,n){if(r+=String(e),t!==n.length-1&&(r+="."),void 0!==o)if(o.children){if("string"==typeof(o=o.children[e])&&0===o.indexOf("#")){var d=o.slice(1);if(a=d,void 0===(o=s.options.directory.getRegisteredTypeRepresentation(d))||""===o)if(h=s.options.directory.getRegisteredEnumeration(d)){var p=u(h,i);return i=p.semantics,o=p.typeRep,c=p.finalPath,void 0!==o||t!==n.length-1}}void 0!==o?c+="."+e:c=""}else o=void 0,c="";else{o=s.options.directory.getRegisteredTypeRepresentation(e),c=e;var h=s.options.directory.getRegisteredEnumeration(e);(void 0!==o&&h||void 0===o&&h)&&(void 0===o&&(c=l(h),o=s.typeReps[c]),(i=i||{}).possibleValues=h)}return void 0!==o||t!==n.length-1}),void 0===o||""===o){var v=s.options.directory.getRegisteredEnumeration(d);if(v){var w=u(v,i);i=w.semantics,o=w.typeRep,c=w.finalPath}}if(o&&o.children){var y=(i=i||{}).configuration||{};Object.getOwnPropertyNames(o.children).forEach(function(e){var o,a;y[e]={},(t+"."+e).contains(e)||(a=(o=s._getTypeData(t+"."+e,i,n)).semantics&&o.semantics.configuration?o.semantics.configuration:{},Object.getOwnPropertyNames(a).forEach(function(t){y[e+"."+t]||(y[e+"."+t]={})}))}),i.configuration=y}t===r&&void 0===o&&-1!==t.indexOf(".")&&(void 0!==d&&(o=s.options.directory.getRegisteredTypeRepresentation(d)),void 0===o&&(o=s.options.directory.getRegisteredTypeRepresentation(e.typeOf(n))),c=""),void 0===o&&-1!==t.indexOf("<")&&-1!==t.indexOf(">")&&void 0===(o=s.options.directory.getRegisteredTypeRepresentation(t.substring(0,t.indexOf("<"))))&&(o=s.options.directory.getRegisteredTypeRepresentation("array")),t=c}return{typeRep:o,typePath:t,semantics:i,realType:a}},registerTypeRepresentations:function(e){this.options.directory.registerTypeRepresentations(e)},getRegisteredTypeRepresentation:function(e){return this.options.directory.getRegisteredTypeRepresentation(e)},registerTypeTemplates:function(e){this.options.directory.registerTemplates(e)},getRegisteredTypeTemplate:function(e){return this.options.directory.getRegisteredTemplate(e)},registerEnum:function(e,t){var i={};i[e]=t,this.options.directory.registerEnumerations(i)},getRegisteredEnum:function(e){return this.options.directory.getRegisteredEnumeration(e)}});return u}),define("DS/Tweakers/TweakerVariant",["UWA/Core","DS/Utilities/Utils","DS/Utilities/Dom","DS/Tweakers/TweakerBase","DS/Tweakers/TweakerEnum","DS/Tweakers/TypeRepresentationFactory"],function(e,t,i,n,o,a){"use strict";var s=n.inherit({name:"TweakerVariant",publishedProperties:{valueTypes:{defaultValue:void 0,type:"string"},currentType:{defaultValue:void 0,type:"string"},displayStyle:{defaultValue:"editors",type:"string"}},_postBuildView:function(){this._parent(),void 0!==this.elements.container&&this.elements.container.addClassName("wux-tweakers-variant")},_applyProperties:function(e){this._parent(e),this.isDirty("valueTypes")&&this._applyValueTypes(),this.isDirty("currentType")&&this._applyCurrentType()},_applyCurrentType:function(){this.elements._viewModule&&this.elements._viewModule.setCurrentType&&this.elements._viewModule.setCurrentType(this.currentType)},_applyValueTypes:function(){this.elements._viewModule&&this.elements._viewModule.setValueTypes&&this.elements._viewModule.setValueTypes(this.valueTypes)}}),r=function(e,t){n.prototype.baseViewModule.call(this,e,t)};t.applyMixin(r,n.prototype.baseViewModule),r.prototype.setValueTypes=function(){},r.prototype.setCurrentType=function(){},r.prototype._getElementToFocus=function(){return this._view._getElementToFocus()};var l=function(e,t){r.call(this,e,t)};t.applyMixin(l,r),l.prototype.buildView=function(){this._view=[];var t=e.createElement("div",{class:"wux-tweakers-variant-typeContainer"}),i=new o({value:this._tweaker.currentType,touchMode:this._tweaker._getCurrentTouchMode(),displayStyle:"comboLite"});i.getContent().addClassName("wux-tweakers-variant-typeCustomizer"),i.applyPropertiesOnView({expanderIcon:"cog"}),i.elements._viewModule._view.elements.icon.style.fontSize="1.2em",this._view.push(t),this._view.push(i),this.setCurrentType(this._tweaker.currentType)},l.prototype._getElementToFocus=function(){return this._view[1]._getElementToFocus()},l.prototype.handleEvents=function(){var e=this;i.addEventOnElement(this._view[1],this._view[1],"change",function(t){t.stopPropagation(),e._tweaker.currentType=t.dsModel.value})},l.prototype.setValue=function(e){!this._view||this._view.length<3||(this._view[2].value=e)},l.prototype.setValueTypes=function(e){!this._view||this._view.length<2||void 0===e||this._view[1].setProperties({possibleValues:e.trim().split("|"),value:this._tweaker.currentType})},l.prototype.setCurrentType=function(e){if(this._view&&!(this._view.length<2)){this._view[1].value=e;var t=parseInt(Date.now());if(this._currentTimeStamp=t,this._view.length>2){var n=this._view.pop();n.remove(),n.destroy()}var o=this,s={touchMode:this._tweaker._getCurrentTouchMode(),typePath:e,context:"inlinedTemplate",onViewCreated:function(e){void 0!==e&&(o._view.push(e),e.inject(o._view[0]),i.addEventOnElement(e,e,"preEdit",function(e){e.stopPropagation(),o._tweaker.onPreEdit()}),i.addEventOnElement(e,e,"postEdit",function(e){e.stopPropagation(),o._tweaker.onPostEdit()}),["liveChange","change"].forEach(function(t){i.addEventOnElement(e,e,t,function(t){t.stopPropagation(),o.setTweakerValue(e.value)})}),o.setTweakerValue(e.value),o._tweaker.fire("currentTypeChange"))},needToCreateViewAfterRequireEnded:function(){return o._currentTimeStamp===t},semantics:{allowResetToUndefinedByUIFlag:this._tweaker.allowResetToUndefinedByUIFlag}};void 0!==WUX.typeRepFactory?WUX.typeRepFactory.generateView(this._tweaker.value,s):WUX.typeRepFactory=new a({onReady:function(){this.generateView(o._tweaker.value,s)}})}},l.prototype.setTouchMode=function(e){if(this._view&&!(this._view.length<2)){var t=this._tweaker._getCurrentTouchMode();this._view[1].touchMode=t,this._view.length>2&&(this._view[2].touchMode=t)}};var u=function(e,t){r.call(this,e,t)};return t.applyMixin(u,r),u.prototype.buildView=function(){this.setCurrentType(this._tweaker.currentType)},u.prototype.setValue=function(e){this._view&&(this._view.value=e)},u.prototype.setCurrentType=function(e){var t=parseInt(Date.now());this._currentTimeStamp=t,void 0!==this._view&&(this._view.remove(),this._view.destroy(),this._view=void 0);var i=this,n={touchMode:this._tweaker._getCurrentTouchMode(),readOnly:!0,typePath:e,context:"inlinedTemplate",onViewCreated:function(e){void 0!==e&&(i._view=e,i.inject(i._tweaker.elements.container),i.setTweakerValue(e.value),i._tweaker.fire("currentTypeChange"))},needToCreateViewAfterRequireEnded:function(){return i._currentTimeStamp===t},semantics:{allowResetToUndefinedByUIFlag:this._tweaker.allowResetToUndefinedByUIFlag}};void 0!==WUX.typeRepFactory?WUX.typeRepFactory.generateView(this._tweaker.value,n):WUX.typeRepFactory=new a({onReady:function(){this.generateView(i._tweaker.value,n)}})},u.prototype.setTouchMode=function(e){this._view&&(this._view.touchMode=this._tweaker._getCurrentTouchMode())},s.prototype.baseViewModule=r,s.prototype.VIEW_MODULES={readOnly:{classObject:u},editors:{classObject:l}},s.prototype.registerViewModule=function(e,t){},s}),define("DS/Tweakers/TweakerArray",["UWA/Core","DS/Tweakers/TweakerMultiRep","DS/Controls/Button","DS/Utilities/KeyboardUtils","DS/Tree/TreeListView","DS/TreeModel/TreeNodeModel","DS/Tweakers/TypeRepresentationFactory","DS/Tweakers/TweakerUtils","DS/Utilities/Dom"],function(e,t,i,n,o,a,s,r,l){"use strict";var u=t.inherit({name:"tweakerArray",doc:void 0,publishedProperties:{editorTitle:{defaultValue:"Array Editor",type:"string"},valueType:{defaultValue:"string",type:"string"},value:{defaultValue:[],type:"array",advancedSetter:!0},displayRowIndexes:{defaultValue:!0,type:"boolean"},itemEditionTrigger:{defaultValue:"double click",type:"string"}},buildView:function(){this._parent(),void 0!==this.elements.container&&this.elements.container.addClassName("wux-tweakers-array"),this.dialogOptions.title||(this.dialogOptions.title=this.editorTitle)},_preEditValue:function(t,i){return void 0===i||"array"===e.typeOf(i)&&0===i.length||null===i||!("typedarray"!==e.typeOf(i)&&!w.call(this,this.valueType,i))&&this._parent(t,i)},_convertValueToStringRepresentation:function(){var e=[];for(var t in this.value){if(!this.value.hasOwnProperty(t))break;e.push(r._getStringRepresentationFromValue(this.valueType,this.value[t]))}return e},_applyValueInline:function(t){var i="",n=this._convertValueToStringRepresentation();if(this.value&&this.value.length>0)if("string"==typeof this.value&&0===this.value.indexOf("["))i=this.value;else{for(var o in i="[",this.value){if(!this.value.hasOwnProperty(o))break;var a="";if("object"==typeof this.value[o])try{a=JSON.stringify(this.value[o])}catch(e){return""}else a="string"==typeof this.value[o]?'"'+(a=this.value[o].replace(/\\"/g,'"')).replace(/"/g,'\\"')+'"':n?"string"==typeof n[o]?'"'+(a=n[o].replace(/\\"/g,'"')).replace(/"/g,'\\"')+'"':n[o]:this.value[o];i+=a+","}","===i.slice(-1)&&(i=i.substring(0,i.length-1)),i+="]"}else void 0===this.value||null===this.value?i="":this.value&&0===this.value.length&&(i="[]");this.internalTweakerString&&this.internalTweakerString.value!==i&&(this.internalTweakerString.value=i),this.editor&&!e.equals(this.value,this.editor.value)&&(this.editor._isValueBeingSet=!0,"dialog"===this.augmentedDisplay?this.editor.value=this._copyValueForDialog():this.editor.value=this.value,this.editor._isValueBeingSet=!1),this._updateEditorColumnsOption()},_applyValueStd:function(e){var t=this,i="in place"===t.itemEditionTrigger;if(this._isValueBeingSet=!0,t.doc||t._buildStdEditor(),t.doc){if(t.editor.getManager().prepareUpdateView(),void 0===t.value||null===t.value||t.value&&0===t.value.length)if(1!==(o=t.doc.getRoots()).length){t.doc.empty();var n=new a({grid:{data:void 0},inEdition:i});t.doc.addRoot(n)}else o[0].updateOptions({grid:{data:void 0},inEdition:i});if(t.value&&t.value.length>0){for(var o=t.doc.getRoots(),s=0;s<t.value.length;s++)if(o&&s<o.length&&t.value[s]!==o[s].options.grid.data)o[s].updateOptions({grid:{data:t.value[s]},inEdition:i});else if(!o||s>=o.length){n=new a({grid:{data:t.value[s]},inEdition:i});t.doc.addChild(n)}if(o&&o.length>t.value.length)for(;t.value.length!==o.length;)t.doc.removeRoot(o[t.value.length])}t.editor.getManager().pushUpdateView()}this._isValueBeingSet=!1,this._updateEditorColumnsOption()},_applyReadOnly:function(e){switch(this.displayStyle){case"inline":this._parent();break;case"std":this._parent(),this._updateEditorColumnsOption()}},_applyValueType:function(e){this.editor&&(this.editor.valueType=this.valueType),this._updateEditorColumnsOption()},_applyDisplayRowIndexes:function(){this.editor&&this.editor.getManager().setHeadersDimensions({width:this.displayRowIndexes?5*(this.editor.getManager().getDocument().getRoots().length-1).toString().length+20:void 0,height:0})},_applyItemEditionTrigger:function(e){var t=this;t.doc&&t.doc.getAllDescendants().forEach(function(e){var i="in place"===t.itemEditionTrigger;e.options.inEdition!==i&&(e.options.inEdition=i)})},_handleEvents:function(){var e=this;l.addEventOnElement(this,this.getContent(),"change",function(t){e.internalTweakerString&&e._applyValueInline()})},_applyProperties:function(e){this.isDirty("valueType")&&this._applyValueType(e.valueType),this.isDirty("displayRowIndexes")&&this._applyDisplayRowIndexes(),this._preEditValue(null,this.value)||(this.value=[]),this._parent(e)},_updateEditorColumnsOption:function(){this.editor&&"std"===this.displayStyle&&(this.editor.getManager().setColumnOptions("data",{isEditable:!this.readOnly}),this.editor.getManager().setColumnOptions("column_action",{isHidden:"typedarray"===e.typeOf(this.value)||this.readOnly}),this.editor.getManager().updateView(!0))},_buildInlineEditor:function(){this._parent(),this.elements.internalView.addClassName("wux-tweakers-array-inline-editor")},_applyLiveChangeFlag:function(){this.editor&&this.liveChangeFlag&&r.enableLiveChangeOnTreeListView(this.editor)},_applyTouchMode:function(){this._parent(),this.editor&&(this.editor.defaultCellHeight=this.touchMode?44:30)},_buildStdEditor:function(){var t=this,r={defaultCellHeight:this.touchMode?44:30,height:"auto",isSortable:!1,apiVersion:2,resize:{columns:!0},selection:{toggle:!1,canMultiSelect:!1,unselectAllOnEmptyArea:!1},show:{rowHeaders:t.displayRowIndexes,columnHeaders:!1},headersDimensions:{width:25,height:0},columns:[{dataIndex:"tree",isHidden:!0,isEditable:!0},{dataIndex:"data",text:"Value",width:"auto",onCellRequest:function(i){if(i.nodeModel&&i.nodeModel.options){var n=i.nodeModel.options,o=n.grid,a=o.data,r=t.valueType;i.cellView.getContent();if("typedarray"===r)r=(t.value&&t.value.constructor&&t.value.constructor.name?t.value.constructor.name.toLocaleLowerCase():"String").replace("array","");else"auto"===r&&(r=e.typeOf(a));var u={typePath:r,touchMode:t.touchMode,context:"inlinedTemplate",readOnly:!n.inEdition,onViewCreated:function(e){void 0!==e&&(i.cellView._setReusableContent(e),l.onNodeRendered(e.getContent(),function(){n.giveFocus&&(n.inEdition?(l.pushUserInteractionContext(),e.focus({preventScroll:!0}),l.popUserInteractionContext()):i.cellView.getGridEngine()._giveFocus(!0),i.cellView&&n.inEdition&&i.cellView.getContent().setAttribute("draggable",!1))}))}};void 0===WUX.typeRepFactory||o._buildFailure?(WUX.typeRepFactory=new s,WUX.typeRepFactory.onReady=function(){o._buildFailure||WUX.typeRepFactory.generateView(a,u)}):WUX.typeRepFactory.generateView(a,u)}},onCellChange:function(e){if(e.event&&e.event.dsModel)return e.event.dsModel.value}},{dataIndex:"column_action",isEditable:!1,width:50,text:"",isHidden:"typedarray"===e.typeOf(this.value)||t.readOnly,onCellRequest:function(e){if(!e.isHeader){var n=e.cellView.getContent(),o=new i({icon:"plus",displayStyle:"lite"});o.getContent().addClassName("wux-tweakers-array-add-element"),o.getContent().setStyle("margin-right","5"),l.addEventOnElement(n,o.getContent(),"click",function(i){(function(){var e=this,t=new a({grid:{data:_.call(e,e.valueType,"date"===e.valueType?new Date:"")}}),i=0,n=e.doc.getSelectedNodes();if(0!==n.length){var o=n[0],s=o._getLocalID();i=s+1}var r=e.doc.getNthRoot(i);e.doc.insertBefore(t,r),e._applyDisplayRowIndexes()}).call(t),d.call(t,e.rowID),i.stopPropagation()}),o.visibleFlag=e.nodeModel.isSelected(),n.setContent(o),e.btnPlus=o;var s=new i({icon:"minus",displayStyle:"lite"});s.getContent().addClassName("wux-tweakers-array-remove-element"),l.addEventOnElement(n,s.getContent(),"click",function(i){(function(){var e=this,t=e.doc.getChildren().length;if(t>1){var i=e.doc.getSelectedNodes();0!==i.length?(i[0]._getRowID(),e.doc.removeRoot(i[0])):(e.doc.getNthRoot(t-1)._getRowID()+1,e.doc.removeRoot(e.doc.getNthRoot(t-1)))}else if(1==t){var i=e.doc.getSelectedNodes();0!==i.length?e.doc.removeRoot(i[0]):e.doc.removeRoot(e.doc.getNthRoot(t-1)),e._placeholderView()}e._applyDisplayRowIndexes()}).call(t),d.call(t,e.rowID),i.stopPropagation()}),s.visibleFlag=e.nodeModel.isSelected(),n.addContent(s),e.btnMinus=s}}}],shouldAcceptDrag:function(t){var i=!(!t||!t.nodeModel)&&t.nodeModel.options.inEdition;return!this.readOnly&&"typedarray"!==e.typeOf(this.value)&&!i},shouldDisplayTooltip:function(e){if(e.isHeader)return{shortHelp:""};if("tree"===e.dataIndex)return{shortHelp:e.nodeModel.getLabel()};if("data"===e.dataIndex){const t=e.nodeModel.getAttributeValue("data");return{shortHelp:JSON.stringify(t)}}},onDragOverCell:function(i,n){if(t.readOnly||"typedarray"===e.typeOf(t.value))return!1;"middle"===n.dropPosition&&(n.dropPosition="top"),n.manager.setDragOverStateForNode(n.nodeModel,n.dropPosition)},onDropCell:function(i,n){if(t.readOnly||"typedarray"===e.typeOf(t.value))return!1;var o=this.unserializeDragAndDropEvent(i);if(o){var a=o.source.uuid;if(this._uxid!==a)return!1}return"middle"===n.dropPosition&&(n.dropPosition="top"),t._cellJustDropped=!0,!0},onDragEnterBlank:function(i,n){return!t.readOnly&&"typedarray"!==e.typeOf(t.value)},onDropBlank:function(i,n){if(t.readOnly||"typedarray"===e.typeOf(t.value))return!1;var o=this.unserializeDragAndDropEvent(i);if(o){var a=o.source.uuid;if(this._uxid!==a)return!1}return t._cellJustDropped=!0,!0}};r.headersDimensions={width:25,height:0},t.editor=new o(r),t._applyLiveChangeFlag(),l.addEventOnElement(t,t.editor.getManager(),"click",function(e,i){d.call(t,i?i.data.rowID:null),p.call(t,i,e,"click")}),l.addEventOnElement(t,t.editor.getManager(),"dblclick",function(e,i){p.call(t,i,"double click")}),l.addEventOnElement(t,t.editor.getManager(),"liveChange",function(e,i){(function(e){var t=this;if(e.cellView._reusableContent&&void 0!==t.doc){for(var i=t.doc.getRoots(),n=[],o=0;o<i.length;o++){var a=i[o];if("addItem"!==a.options.grid.type)if("string"==typeof a.options.grid.data){if(s=e.nodeModel===a?_.call(t,"typedarray"!==t.valueType?t.valueType:"number",e.cellView._reusableContent.value):_.call(t,"typedarray"!==t.valueType?t.valueType:"number",a.options.grid.data),!y.call(t,t.valueType,s))return void t._applyValue(t.value);n.push(s)}else if(y.call(t,t.valueType,e.cellView._reusableContent.value)||y.call(t,t.valueType,a.options.grid.data)){var s;e.nodeModel===a?n.push(e.cellView._reusableContent.value):n.push(a.options.grid.data)}else n.push(void 0)}if(t._dialog&&t._dialog.visibleFlag||t._popup&&t._popup.visibleFlag){var r=t.editor.value;t.editor.value=n,JSON.stringify(r)!==JSON.stringify(t.editor.value)&&t.fire("liveChange",t.editor.value)}}}).call(t,i)}),l.addEventOnElement(t,t.editor.getContent(),"mouseover",function(e,i){d.call(t,i?i.data.rowID:null)}),l.addEventOnElement(t,t.editor.getContent(),"mouseleave",function(e){d.call(t)}),l.addEventOnElement(t,t.editor.getContent(),"keyup",function(e){if(e.keyCode===n.DELETE&&t.doc&&t.doc.getXSO()){for(var i=t.doc.getXSO().get(),o=i[0]._getRowID(),a=0;a<i.length;a++)t.doc.removeRoot(i[a]);t.doc.getAllDescendants()[o].select()}}),l.addEventOnElement(t,t.editor.getContent(),"keydown",function(e){if(n.previous(e.keyCode)){var i=t.doc.getXSO().get()[0]._getRowID();if(o=t.doc.getAllDescendants()[i-1])t.doc.getXSO().empty(),o.select(),(a=t.editor.getManager().nodePositionInVisibleViewport(o))<0?t.editor.getManager().scrollToNode(o,"top"):a>0?t.editor.getManager().scrollToNode(o,"bottom"):t.editor.getManager().updateView()}else if(n.next(e.keyCode)){var o,a;i=t.doc.getXSO().get()[0]._getRowID();if(o=t.doc.getAllDescendants()[i+1])t.doc.getXSO().empty(),o.select(),(a=t.editor.getManager().nodePositionInVisibleViewport(o))<0?t.editor.getManager().scrollToNode(o,"top"):a>0?t.editor.getManager().scrollToNode(o,"bottom"):t.editor.getManager().updateView()}else if(e.keyCode===n.F2){var s,r=t.doc.getSelectedNodes();if(0===r.length)return;s=r[0],"in place"!==t.itemEditionTrigger&&(s.options.inEdition?h.call(t,s,!1,!0):c.call(t,s))}}),t.doc=t.editor.getDocument(),t.doc.onNodeModelUpdate(function(e){t._isValueBeingSet||v.call(t)}),t.doc.addModelEventListener("addChild",function(e){t._isValueBeingSet||(t._cellJustDropped||c.call(t,e.data.nodeModel),t._cellJustDropped=!1,t._applyDisplayRowIndexes(),v.call(t))}),t.doc.addModelEventListener("removeChild",function(e){t._isValueBeingSet||(t._applyDisplayRowIndexes(),v.call(t))}),t.editor.getContent().addClassName("wux-tweakers-array-editor"),t.elements.internalView=e.createElement("div",{class:"wux-tweakers-array-container"}),t.editor.inject(t.elements.internalView),t.elements.internalView.inject(t.elements.container)},_buildEditor:function(e){return new u(e)},_processValueFromString:function(e){function t(e){var t,i,n,o;function a(){var e,t,a,s,r,l,u,d,p,h,c;for(e="",t=1,a=i[0],u=","!==(s=n[a]||","),d='"'===s,c="{"===a||"["===a,r=!1;!r&&t<=i.length&&(e=(l=i.indexOf(s,t)+(u?1:0))>0?i.slice(0,l):i,c&&(p=(e.match(new RegExp("["===a?"\\[":a,"g"))||[]).length,h=(e.match(new RegExp("]"===s?"\\]":s,"g"))||[]).length),c&&p!==h||1!==e.length&&d&&e.slice(-2)[0]===o||(r=!0),l!==t);)t=l;return(i=t>0?i.slice(t+(u?0:1),i.length):"").startsWith(",")&&(i=i.slice(1)),'"'===a&&'"'===s&&(e=e.slice(1,-1)),e=e.replace(/\\"/g,'"')}for(t=[],n={'"':'"',"{":"}","[":"]"},o="\\",i=e;i&&i.length>0;){var s=i.length,r=a();if(s===i.length)break;t.push(r)}return t}if(this._isValueBeingSet=!0,"string"==typeof e){if(""===e)return this.value&&(this.value.length=0),void(this._isValueBeingSet=!1);var i;i=0===e.indexOf("[")?t(e.substring(1,Math.max(1,e.length-1))):t(e);for(var n=0;n<i.length;n++)if("string"==typeof i[n]){var o=i[n].replace(/\\"/g,'"');i[n]=_.call(this,this.valueType,o,!0)}else i[n]=_.call(this,this.valueType,i[n],!0);if(!w.call(this,this.valueType,i))return;Array.isArray(i)&&this._processValueFromCopy(i)}this._isValueBeingSet=!1},_processValueFromCopy:function(t){if(!e.equals(this.value,t)&&(!t||0===t.length||w.call(this,this.valueType,t))){var i=this.value;if(null==i&&!this._lockUI&&t&&(i=[]),"typedarray"===e.typeOf(t)){if("typedarray"===e.typeOf(i)&&t.length===i.length)for(var n=0;n<t.length;n++)i[n]!==t[n]&&(i[n]=t[n])}else if(Array.isArray(t))if("typedarray"===e.typeOf(i)){if(t.length===i.length)for(n=0;n<t.length;n++)i[n]!==t[n]&&(i[n]=t[n])}else if(void 0!==t&&null!=i){"typedarray"!==e.typeOf(i)&&"array"!==e.typeOf(i)&&(i=[]);for(n=0;n<t.length;n++){var o=t[n];null!==o&&(n<i.length&&i[n]!==o?i[n]=o:n>=i.length&&i.push(o))}i.length>t.length&&i.splice(t.length,i.length-t.length)}this.value=i}},_copyValueForDialog:function(){return this.value?this.value.slice():void 0},_placeholderView:function(){var t=this,i="in place"===t.itemEditionTrigger;t.elements._placeholder||(t.elements._placeholder=e.createElement("div",{class:"wux-tweakers-array-placeholder"}),e.createElement("span",{class:"wux-tweakers-array-placeholder-span"}).inject(t.elements._placeholder).setContent("Click here to add items"),e.createElement("span",{class:"wux-tweakers-array-placeholder-icon wux-ui-3ds wux-ui-3ds-list-add wux-ui-3ds-3x"}).inject(t.elements._placeholder),l.addEventOnElement(t,t.elements._placeholder,"click",function(e){t.doc||t._buildStdEditor(),t.elements._placeholder.style.display="none",t._lockUI=!0,t.doc.empty(),t._lockUI=!1;var n=new a({grid:{data:_.call(t,t.valueType,"date"===t.valueType?new Date:"")},inEdition:i});t.doc.addRoot(n),t._popup?t._popup.setBody(t.editor):t._dialog&&(t._dialog.content=t.editor)}));t._popup?t._popup.setBody(t.elements._placeholder):t._dialog&&(t._dialog.content=t.elements._placeholder),t.elements._placeholder.style.display="block"}});function d(e){var t=this;function i(e,t){e.btnMinus.visibleFlag=t,e.btnPlus.visibleFlag=t}function n(e,t){return e&&(e===t||e.nodeModel.isSelected())}var o,a,s,r=null!==(o=e)&&isFinite(o)&&(s=(a=t.editor.getManager().getCell(o,"column_action"))?a.getView():null)?s.getCellInfos():null;t._lastSelectedCellInfos&&!n(t._lastSelectedCellInfos,r)&&(i(t._lastSelectedCellInfos,!1),t._lastSelectedCellInfos=null),t._lastHoveredCellInfos&&!n(t._lastHoveredCellInfos,r)&&(i(t._lastHoveredCellInfos,!1),t._lastHoveredCellInfos=null),r&&r.btnMinus&&r.btnPlus&&(i(r,!0),r.nodeModel.isSelected()?t._lastSelectedCellInfos=r:t._lastHoveredCellInfos=r)}function p(e,t){var i;e?(i=e.nodeModel,!this.readOnly&&this.itemEditionTrigger===t&&i?c.call(this,i):this._currentlyInEdition&&this._currentlyInEdition!==i&&2!==e.columnID&&h.call(this,this._currentlyInEdition,!1,!0)):h.call(this,this._currentlyInEdition,!1,!0)}function h(e,t,i){e&&(e.options.inEdition=t,e.options.giveFocus=i,this._currentlyInEdition=t?e:null,e.notifyModelUpdate(),this.editor.getManager().updateView())}function c(e){this.doc&&(this.doc.prepareUpdate(),this._currentlyInEdition&&("in place"===this.itemEditionTrigger?this._currentlyInEdition=null:h.call(this,this._currentlyInEdition,!1,!1)),h.call(this,e,!0,!0),this.doc.unselectAll(),e.select(),this.doc.pushUpdate())}function v(){var e=this;if(void 0!==e.doc){for(var t=e.doc.getRoots(),i=[],n=0;n<t.length;n++){var o=t[n];if("addItem"!==o.options.grid.type)if("string"==typeof o.options.grid.data){var a=_.call(e,"typedarray"!==e.valueType?e.valueType:"number",o.options.grid.data);if(!y.call(e,e.valueType,a))return void e._applyValue(e.value);i.push(a)}else y.call(e,e.valueType,o.options.grid.data)?i.push(o.options.grid.data):i.push(void 0)}(e._dialog&&e._dialog.visibleFlag||e._popup&&e._popup.visibleFlag)&&(e._lockUI||void 0===i||JSON.stringify(i)===JSON.stringify(e._changeOptions)||(e.fire("liveChange",i),e._changeOptions=i,e.editor.value=i)),(!e._dialog||e._dialog&&!e._dialog.visibleFlag)&&(e._processValueFromCopy(i),e._applyValue(e.value))}}function w(e,t){if(t&&t.length>0)for(var i=0;i<t.length;i++){var n=t[i];if(!y.call(this,e,n))return!1}return!0}function y(t,i){return void 0===i||("auto"===t&&(t=e.typeOf(i)),r._isFromType(t,i))}function _(t,i,n){switch(t){case"auto":if("string"===e.typeOf(i))try{return parsedValue=JSON.parse(i),parsedValue}catch(e){return i}return i;default:return r._getValueFromString(t,i,n)}}return u}),define("DS/Tweakers/GeneratedToolbar",["UWA/Core","DS/Utilities/Dom","DS/Controls/Abstract","DS/Controls/Toolbar","DS/Controls/TooltipModel","DS/Tweakers/TypeRepresentationFactory","DS/Tree/TreeListView","DS/Tree/TreeNodeView","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Menu/Menu","UWA/Class/Promise","DS/Utilities/Utils"],function(e,t,i,n,o,a,s,r,l,u,d,p,h){"use strict";function c(t,i,n){for(var o in i)n&&-1!==n.indexOf(o)||(h.isPlainObject(i[o])?t[o]=e.clone(i[o]):t[o]=i[o])}function v(e,t){let i={};return c(i,t.options.grid.semantics),t.options.tooltip?"string"==typeof t.options.tooltip?t._associatedView&&t._associatedView.tooltipInfos?(t._associatedView.tooltipInfos.setProperties({title:void 0,shortHelp:t.options.tooltip,shortHelpImage:void 0,longHelp:void 0,longHelpImage:void 0}),i.tooltipInfos=t._associatedView.tooltipInfos):i.tooltipInfos=new o({shortHelp:t.options.tooltip}):t._associatedView&&t._associatedView.tooltipInfos?(t._associatedView.tooltipInfos.setProperties(t.options.tooltip),i.tooltipInfos=t._associatedView.tooltipInfos):i.tooltipInfos=new o(t.options.tooltip):t.options.displayLabel||(i.tooltipInfos=new o({shortHelp:t.getLabel()})),c(i,t.options,["grid","children"]),t.options.grid&&"boolean"===t.options.grid.typeRep&&delete i.label,!1===i.displayLabel&&delete i.label,i.executionContext=m(e,t),i}function w(){var t=this;if(0===this._updateCounter){var i,n=0,o=0;(t=this)._toolbar.clear(),t.items&&(i={near:{},center:{},far:{}},t.items.getChildren().forEach(function(e){var t,n;t=e.options.position,n=e.options.category||"other",t&&void 0!==i[t]||(t="near"),i[t][n]||(i[t][n]=[]),i[t][n].push(e)}),t.promises=[],t.array1=a(this.items,i.near),t.array2=a(this.items,i.center),t.array3=a(this.items,i.far),p.allSettled(t.promises).then(function(e){t._toolbar._enableCalculus("tweakersBuilt"),t._toolbar._onResize(),t._isReady=!0,t._toolbar.fire("onReady"),t._toolbar.fire("dimensionsChanged")}),t.__isModelCommandsOnly="Basic"!==t.popupDisplayStyle&&function(e){let t=!0;return e.processDescendants({processNode:function(e){if(e){let i=e.nodeModel.getAttributeValue("typeRep");M.includes(i)||(t=!1)}}}),t}.call(t,t.items),t._applyOverflowManagement())}function a(e,t){n=0;var i=[];for(var o in t){if(!t[o]||0===t[o].length)return;t[o].forEach(function(t){var n=s(e,t,o);i.push(n)}),0}return i}function s(i,a,s){var r,l,u,d={};if(d.id=a._ID,(r=e.createElement("div",{class:"wux-generated-toolbar-items"})).toolbarProperties=r.toolbarProperties||{},r.toolbarProperties.order=o,o++,r._treeNodeModel=a,(u=a.options.label)&&a.options.displayLabel&&(a.options._associatedLabel=e.createElement("div",{class:"wux-generated-toolbar-items-label",html:u}).inject(r)),l=e.createElement("div",{class:"wux-generated-toolbar-items-tweaker"}).inject(r),!a.__generatedToolbarNodeModelUpdate){var p=function(e){if(a._associatedView){var i=v(t,a);i.value=a.options.grid.data;var n=t.typeRepresentationFactory.getRegisteredTypeRepresentation(a.options.grid.typeRep),o=t.typeRepresentationFactory.getTemplateIdentifierFromTypeRep(n,"inlinedTemplate"),s=t.typeRepresentationFactory.getRegisteredTypeTemplate(o);h.setTweakerProperties(a._associatedView,i,n,s);var r=t._getToolbarItem(a);void 0!==a.options.visibleFlag&&(r.visibleFlag=a.options.visibleFlag),t._manageToolbarItemVisibility(r),t._toolbar.modelModified(),t._toolbar._onResize(),a.options.onNodeUpdate&&("function"==typeof a.options.onNodeUpdate?a.options.onNodeUpdate.call(t,a):"object"==typeof a.options.onNodeUpdate&&a.options.onNodeUpdate.func&&a.options.onNodeUpdate.module&&h.attachSimpleCallback(a.options.onNodeUpdate.module,a.options.onNodeUpdate.func,a.options.onNodeUpdate.argument,b(t,a)))}else a._hasBeenUpdatedSinceViewGeneration=!0};a.__generatedToolbarNodeModelUpdate=a.addEventListener("nodeModelUpdate",p)}return t.promises.push(t.typeRepresentationFactory.generateView(a.options.grid.data,{typePath:a.options.grid.typeRep,readOnly:a.options.readOnly,touchMode:t._getCurrentTouchMode(),disabled:a.options.disabled,context:"inlinedTemplate",semantics:v(t,a)}).then(function(e){void 0!==e&&(l.setContent(e),d.tweaker=e,e.executionContext=m(t,a),a._associatedView=e,a._hasBeenUpdatedSinceViewGeneration&&p(),e.addEventListener("change",function(){i&&a&&(i.prepareUpdate(),a.setAttribute("data",e.value),i.pushUpdate())}))})),t._toolbar.add("element",{element:r,position:a.options.position||"near",priority:a.options.priority,category:s,index:n,visibleFlag:void 0===a.options.visibleFlag||a.options.visibleFlag,id:a.options.id}),n++,d}}function y(e,t){t&&t.options.onNodeLiveUpdate&&("function"==typeof t.options.onNodeLiveUpdate?t.options.onNodeLiveUpdate.call(this,t,e.value):"object"==typeof t.options.onNodeLiveUpdate&&t.options.onNodeLiveUpdate.func&&t.options.onNodeLiveUpdate.module&&h.attachSimpleCallback(t.options.onNodeLiveUpdate.module,t.options.onNodeLiveUpdate.func,t.options.onNodeLiveUpdate.argument,b(me,item)))}function _(){this._popupTreeListView&&this._popupTreeListView.hide(),this._toolbar.enablePopupBehavior()}function f(){var e=this;this.items.processDescendants({onlyVisibleNodes:!0,processNode:function(e){e.nodeModel.hide()}}),this._toolbar.enablePopupBehavior({moveFromToolbarToPopup:function(e){e.data={labelWidth:0,tweakerWidth:0};var i=e.element._treeNodeModel.options.label;if(i){var n=window.getComputedStyle(e.element,null);e.data.labelWidth=t.computeStringWidth(i,parseFloat(n.getPropertyValue("font-size")),n.getPropertyValue("font-family"),!1)}var o=k(e.element);o&&(e.data.tweakerWidth=o.computeContentSize()),this._moveFromToolbarToPopupDefault(e)},moveFromPopupToToolbar:function(e){this._moveFromPopupToToolbarDefault(e)},showEverything:function(){e.items.prepareUpdate();for(var t=0;t<this.getNumberOfItems();t++){var i=this.getItemFromIndex(t);"popup"===i.container&&this._moveFromPopupToToolbar(i)}e.items.pushUpdate()},onPopupCreationFunction:function(){this._promisesArray=[];const e=r.extend({updateInternalParameters:function(){this._parent();var e=this.getCellInfos();e.isHeader||(this.getContent().setAttribute("has-children",!1),void 0!==e.nodeModel.options.tooltip||e.nodeModel.options.displayLabel?"string"==typeof e.nodeModel.options.tooltip?this.getContent().tooltipInfos=new o({shortHelp:e.nodeModel.options.tooltip}):this.getContent().tooltipInfos=new o(e.nodeModel.options.tooltip):this.getContent().tooltipInfos=new o({shortHelp:e.nodeModel.getLabel()}))},_setTooltip:function(e,t){}}),i=this,n={apiVersion:2,height:"inherit",rootMargin:0,defaultCellWidth:20,defaultCellHeight:38,isSortable:!1,enableDragAndDrop:!1,selection:!1,resize:{columns:!0},cellClass:e,show:{rowHeaders:!1,columnHeaders:!1},expanderStyle:"triangle",performances:{buildLinks:!1},columns:[{dataIndex:"tree",text:"Label",isDraggable:!1,isHidden:!1,width:"40%"},{dataIndex:"data",text:"Value",isEditable:!0,width:"auto",onCellRequest:function(e){!e.isHeader&&e.nodeModel&&e.nodeModel.options&&i._promisesArray.push(new Promise(function(t,n){const o=e.cellView.getContent(),a=e.nodeModel,s=a.options;var r={typePath:s.grid.typeRep,readOnly:s.readOnly,touchMode:s.touchMode,disabled:s.disabled,context:"inlinedTemplate",icon:s.grid.semantics&&s.grid.semantics.icon?s.grid.semantics.icon:void 0,semantics:v(i,a),onViewCreated:function(e){void 0!==e&&(o.setContent(e),e.executionContext=m(i,a),o&&!e.readOnly&&o.setAttribute("draggable",!1),e._associatedNode=a,t.call())},onFailure:function(){n.call()}};i.typeRepresentationFactory.generateView(s.grid.data,r)}))},setValue:function(e){e.nodeModel.setAttribute("data",e.value)},getValue:function(e){return e.nodeModel.options.grid.data}}],treeDocument:i.items};this._popupTreeListView=new s(n),this._popupTreeListView.getContent().addClassName("wux-toolbar-popup-treeList"),this._popupTreeListView.inject(this._toolbar.getPopupContent()),this._toolbar._isPopupContentManaged=!0,this._popupTreeListView.getManager().loadDocument(this.items),this.elements.dropdownPopup.addEventListener("show",function(e){e.target===i.elements.dropdownPopup.getContent()&&(i._promisesArray.length>0?p.allSettled(i._promisesArray).then(function(){i._promisesArray=[],i._popupTreeListView.getManager().onPostUpdateViewOnce(function(){i._managePopupWidth()})}):i._managePopupWidth())}),t.addEventOnElement(this,this.elements.dropdownPopup,"dimensionsChanged",function(e){e.target!==i.elements.dropdownPopup.getContent()&&t.firstParentWithClass(e.target,"wux-tweakers")&&h.debounce(i._managePopupWidth,100)()}),t.addEventOnElement(this,this.elements.dropdownPopup,"liveChange",function(e){const t=k(e.target),n=t._associatedNode;y.call(i,t,n)})}.bind(this),popupBeforeDisplayCallback:function(){e.elements.dropdownPopup&&e.elements.dropdownPopup.getContent().setStyle("visibility","hidden")},popupPostOverlapCallback:function(){return e.elements.dropdownPopup&&e._managePopupWidth(),!0}})}function g(){t.addEventOnElement(this,this._toolbar.getContent(),"dropDownButtonClick",function(){let t=this;if(this._currentMenuModel)d.hide();else{let i=this._toolbar.elements.dropDownButton.getContent().getBoundingClientRect();this._currentMenuModel=function(t,i){let n,o=t,a=[];return i.processDescendants({onlyVisibleNodes:!0,processNode:function(i){let s=i.nodeModel,r=function(t,i){let n=v(t,i),o=t.typeRepresentationFactory.getRegisteredTypeRepresentation(i.getAttributeValue("typeRep"));var a=t.typeRepresentationFactory.getTemplateIdentifierFromTypeRep(o,"inlinedTemplate"),s=t.typeRepresentationFactory.getRegisteredTypeTemplate(a);o&&o.semantics&&e.merge(n,o.semantics),s&&s.options&&e.merge(n,s.options);let r=i.getAttributeValue("data");if(!n.possibleValues)return{icon:n.icon,label:n.label,tooltip:n.tooltip,disabled:n.disabled,value:r};if(Array.isArray(n.possibleValues))for(var l=0;l<n.possibleValues.length;l++)if(0===h.compare(n.possibleValues[l].value,r))return n.possibleValues[l]}(t,s),l=r.value,u=s.options.category;n&&u&&u!==n&&a.push({type:"SeparatorItem"}),n=u;let d={type:"PushItem",title:r.label,icon:r.icon};if(r.tooltip&&(d.tooltip=r.tooltip),r.disabled&&(d.state="disabled"),"object"==typeof l&&l.menu)d.submenu=l.menu;else{("function"==typeof l||"object"==typeof l&&l.func&&l.module)&&(d.action={callback:V(o,l,s)});let e=v(t,s).possibleValues;if(e){let t=[];for(var p=0;p<e.length;p++){let i=e[p],n=i.value,a={title:i.label,icon:i.icon,type:"RadioItem",action:{callback:function(){let e=s.getTreeDocument();e.prepareUpdate(),s.setAttribute("data",n),e.pushUpdate(),V(o,n,s).call()}}};i.tooltip&&(a.tooltip=i.tooltip),n===l&&(a.state="selected"),t.push(a)}d.submenu=t}}a.push(d)}}),a}(this,this.items),d.show(this._currentMenuModel,{layout:"TopLeft",position:{x:i.left,y:i.top+i.height},submenu:"outside"},{onHide:function(){t._currentMenuModel=void 0}})}}.bind(this))}function m(e,t){return{executionContext:e.executionContext,toolbar:e,nodeModel:t,value:t.getAttributeValue("data")}}function b(e,t){return{context:m(e,t),dsModel:void 0}}function V(e,t,i){return function(){"function"==typeof t?t.call(e,b(e,i)):"object"==typeof t&&t.func&&t.module&&h.attachSimpleCallback(t.module,t.func,t.argument,b(e,i))}}var k=function(e){if(e.hasClassName("wux-tweakers"))return e.dsModel;var t=e.getChildren();if(t)for(var i=0;i<t.length;i++){var n=k(t[i]);if(n)return n}};function C(e){var t=e;if("string"==typeof e&&(t=JSON.parse(e)),t.entries){var i=[],n=t.entries,o=n.length,a=0,s=0,r=null,l=null,d=0;for(a=0;a<o;++a){if(!(r=n[a]).dataElements)throw new Error("Missing dataElements on",r);if(!r.dataElements.typeRepresentation)throw new Error("Missing dataElements.typeRepresentation on",r);if(r.grid)throw new Error("grid is a reserved keyword");if(r.grid={},Object.defineProperty(r.grid,"typeRep",Object.getOwnPropertyDescriptor(r.dataElements,"typeRepresentation")),delete r.dataElements.typeRepresentation,r.grid.semantics={},void 0!==r.dataElements.icon&&null!==r.dataElements.icon&&(Object.defineProperty(r.grid.semantics,"icon",Object.getOwnPropertyDescriptor(r.dataElements,"icon")),delete r.dataElements.icon),void 0!==r.dataElements.readOnly&&null!==r.dataElements.readOnly&&Object.defineProperty(r.grid,"readOnly",Object.getOwnPropertyDescriptor(r.dataElements,"readOnly")),void 0!==r.dataElements.disabled&&null!==r.dataElements.disabled&&Object.defineProperty(r.grid,"disabled",Object.getOwnPropertyDescriptor(r.dataElements,"disabled")),void 0!==r.dataElements.value&&null!==r.dataElements.value&&Object.defineProperty(r.grid,"data",Object.getOwnPropertyDescriptor(r.dataElements,"value")),r.dataElements.hasOwnProperty("value")&&delete r.dataElements.value,void 0===r.grid.data&&r.children)for(r.grid.data={},Object.defineProperty(r.grid.data,"menu",Object.getOwnPropertyDescriptor(r,"children")),delete r.children,d=r.grid.data.menu.length,s=0;s<d;++s)if(y(l=r.grid.data.menu[s]),l.children&&l.children.length>0){Object.defineProperty(l,"submenu",Object.getOwnPropertyDescriptor(l,"children")),delete l.children;for(var p=l.submenu,h=p.slice(0,p.length),c=null;h.length>0;)(c=h.splice(0,1)[0]).children&&c.children.length>0&&(h=h.concat(c.children),Object.defineProperty(c,"submenu",Object.getOwnPropertyDescriptor(c,"children")),delete c.children),y(c)}var v=null;for(v in r.dataElements)Object.defineProperty(r,v,Object.getOwnPropertyDescriptor(r.dataElements,v)),delete r.dataElements[v];if(delete r.dataElements,r.action){for(v in void 0===r.grid.data&&(r.grid.data={}),r.action)Object.defineProperty(r.grid.data,v,Object.getOwnPropertyDescriptor(r.action,v)),delete r.action[v];delete r.action}var w=new u(r);w.hide(),w._ID=r.id,i.push(w)}return{nodes:i,typeReps:t.typeRepresentations,enums:t.enums}}function y(e){if(e.dataElements){var t=null,i=null,n={label:"title",typeRepresentation:"type"};for(t in e.dataElements)i=t,n.hasOwnProperty(t)&&(i=n[t]),Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(e.dataElements,t)),delete e.dataElements[t]}}}var T=function(e,t){this._documentListeners.push(this.items.subscribe({event:e},t))};const M=["function","functionIcon","functionMenu","functionMenuIcon","chevronMenuIcon","threeDotsMenu"];return i.inherit({name:"generatedToolbar",publishedProperties:{overflowManagement:{defaultValue:"scroll",type:"string",category:"Behavior"},direction:{defaultValue:"horizontal",type:"string",category:"Appearance"},items:{defaultValue:null,type:"DS/Treeitems/TreeDocument",category:"Model"},typeRepresentationFactory:{defaultValue:null,type:"DS/Tweakers/TypeRepresentationFactory",category:"Model"},executionContext:{defaultValue:void 0,type:"object"},popupDisplayStyle:{defaultValue:"TreeListView",type:"string",category:"Appearance"}},_updateCounter:0,_toolbar:null,_popupTreeListView:null,createTreeDocument:function(e){var t=null,i=C(e);return i&&((t=new l).prepareUpdate(),t.addRoot(i.nodes),t.pushUpdate()),t},updateModel:function(e){this.items&&this.items.empty();var t=C(e);t&&(this.items||(this.items=new l),this.items.prepareUpdate(),this.items.addRoot(t.nodes),this.items.pushUpdate())},buildView:function(){var e=this;this._toolbar=new n,this._toolbar._customDropDownManagement=!0,this._toolbar._enableCalculus=function(e){"tweakersBuilt"===e&&(this._isCalculusEnabled=!0)},this._toolbar._enableSizeCalculus=function(t){if(this._isCalculusEnabled){var i=k(t.element),n=e._getNodeModelFromTweaker(i);if(n&&!1!==n.options.visibleFlag)return!0}return!1},this._toolbar.addEventListener("itemRemoved",function(e){if(e&&e.options&&e.options.item&&e.options.item.element){let t=e.options.item.element._treeNodeModel;t&&t.__generatedToolbarNodeModelUpdate&&(t.removeEventListener(t.__generatedToolbarNodeModelUpdate),t.__generatedToolbarNodeModelUpdate=void 0)}}),this._properties.typeRepresentationFactory.value=new a,this.elements=this._toolbar.elements,this._documentListeners=[]},_postBuildView:function(){"Basic"===this.popupDisplayStyle?_.call(this):this.__isModelCommandsOnly?g.call(this):f.call(this)},handleEvents:function(){var e=this;t.addEventOnElement(this,this._toolbar,"dimensionsChanged",function(){e._manageAllToolbarItemsVisibility()}),t.addEventOnElement(this,this._toolbar,"liveChange",function(t){const i=k(t.target),n=e._getNodeModelFromTweaker(i);y.call(e,i,n)})},_applyProperties:function(e){this.isDirty("disabled")&&this._applyDisabled(e?e.disabled:void 0),!this.isDirty("visibleFlag")||e&&void 0===e.visibleFlag||this._applyVisibleFlag(e?e.visibleFlag:void 0),this.isDirty("domId")&&this._applyDomId(e?e.domId:void 0),this.isDirty("direction")&&this._applyDirection(e.direction),this.isDirty("overflowManagement")&&this._applyOverflowManagement(e.overflowManagement),this.isDirty("popupDisplayStyle")&&this._applyPopupDisplayStyle(e.popupDisplayStyle),this.isDirty("items")&&this._applyItems(e.items)},_applyPopupDisplayStyle:function(e){"Basic"===this.popupDisplayStyle?(this._toolbar._customDropDownManagement=!1,_.call(this)):this.__isModelCommandsOnly?g.call(this):f.call(this)},_applyOverflowManagement:function(e){let t="scroll"===this.overflowManagement?this.overflowManagement:this.__isModelCommandsOnly?"custom":"dropdown";this._toolbar.overflowManagement=t},_applyDirection:function(e){this._toolbar.direction=this.direction},_applyItems:function(e){if(e&&function(e){this._documentListeners.forEach(function(t){e.unsubscribe(t)})}.call(this,e),this.items){var t=this,i=!0,n=function(){i&&w.call(t)};T.call(this,"addChild",n),T.call(this,"removeChild",n),T.call(this,"empty",function(){i=!1}),T.call(this,"modelUpdate",function(){i||(i=!0,w.call(t))})}w.call(this)},_applyTouchMode:function(){this._parent(),w.call(this)},isReady:function(){return!!this._isReady},_managePopupWidth:function(){for(var t=this,i=0,n=0,o=t.elements.dropdownPopup.getContent().offsetHeight<t._toolbar._getNbElementsInPopup()*t._popupTreeListView.getManager()._getCellHeight(0)?e.Utils.Client.getScrollbarWidth():0,a=0;a<t._toolbar.getNumberOfItems();a++){var s=t._toolbar.getItemFromIndex(a);if("popup"===s.container&&s.element._treeNodeModel&&!1!==s.element._treeNodeModel.options.visibleFlag){s.data&&s.data.labelWidth&&(i=Math.max(i,s.data.labelWidth));var r=t._popupTreeListView.getManager()._getCellView(s.element._treeNodeModel._getRowID(!0),"data");if(!r)return void t._popupTreeListView.getManager().onPostUpdateViewOnce(function(){t._managePopupWidth()});var l=r.getContent().getElementsByClassName("wux-tweakers"),u=0;l.length>0&&(u=l[0].dsModel.computeContentSize(),!l[0].dsModel.readOnly&&l[0].dsModel.getTweakerPadding&&(u+=2*l[0].dsModel.getTweakerPadding())),n=Math.max(n,u)}}n+=10;var d=t._popupTreeListView.getManager();i>0&&(i+=20);var p=i+n+o;if(parseInt(t.elements.dropdownPopup.getContent().style.width)!==p){d.prepareUpdateView(),0===i?d.hideColumn("tree"):(d.showColumn("tree"),d.setColumnWidth("tree",Math.round(i))),d.setColumnWidth("data",n),t.elements.dropdownPopup.getContent().style.width=p+"px",d.pushUpdateView();var h=document.createEvent("Event");h.initEvent("dimensionsChanged",!0,!1),t.elements.dropdownPopup.getContent().dispatchEvent(h)}t.elements.dropdownPopup.getContent().setStyle("visibility","visible")},prepareUpdateView:function(){this._updateCounter++},pushUpdateView:function(){this._updateCounter--,0===this._updateCounter&&w.call(this)},updateNodeModel:function(e,t){if(this.items){var i=void 0,n=this.items.getChildren().length,o=this.getNodeModelByID(e);if(o)return o.updateOptions(t),!0;for(var a=0;a<n;a++)if((i=this.items.getChildren()[a]).options.grid.data&&i.options.grid.data.menu)for(var s=i.options.grid.data.menu,r=s.length,l=0;l<r;l++){var u=s[l];u.id===e?Object.keys(t).forEach(function(e){var i=t[e];return u[e]=i,!0}):u.submenu&&this.updateNodeModelSubMenu(u,e,t)}}},updateNodeModelSubMenu:function(e,t,i){if(e.submenu)for(var n=e.submenu,o=n.length,a=0;a<o;a++){(e=n[a]).id===t?Object.keys(i).forEach(function(t){var n=i[t];return e[t]=n,!0}):e.submenu&&this.updateNodeModelSubMenu(e,t,i)}},getNodeModelByID:function(e){if(this.items)for(var t=void 0,i=this.items.getRoots(),n=0;n<i.length;n++)if((t=i[n])._ID===e)return t},_getNodeModelFromTweaker:function(e){if(this.items)for(var t=void 0,i=this.items.getRoots(),n=0;n<i.length;n++)if((t=i[n])._associatedView===e)return t},_getToolbarItem:function(e){for(var t=e._associatedView.getContent();t!==this._toolbar.getContent()&&!t.hasClassName("wux-toolbar-items");)t=t.getParent();return this._toolbar.getItemFromElement(t)},_manageOverflowButtonVisibility:function(){if("scroll"!==this.overflowManagement){var e=!1;this.items.processDescendants({onlyVisibleNodes:!0,processNode:function(t){return e=!0,{stopProcessing:!0}}}),e?this.elements.dropdownButtonContainer.show():this.elements.dropdownButtonContainer.hide()}},_manageAllToolbarItemsVisibility:function(){this.items.prepareUpdate();for(var e=0;e<this._toolbar._elementsArray.length;e++)this._manageToolbarItemVisibility(this._toolbar._elementsArray[e]);this.items.pushUpdate(),this._manageOverflowButtonVisibility()},_manageToolbarItemVisibility:function(e){return"scroll"!==this.overflowManagement&&("popup"===e.container?!1===e.element._treeNodeModel.options.visibleFlag?e.element._treeNodeModel.isHidden()||(this.items.prepareUpdate(),e.element._treeNodeModel.hide(),this.items.pushUpdate()):e.element._treeNodeModel.isHidden()&&(this.items.prepareUpdate(),e.element._treeNodeModel.show(),this.items.pushUpdate()):e.element._treeNodeModel.isHidden()||(this.items.prepareUpdate(),e.element._treeNodeModel.hide(),this.items.pushUpdate())),!1===e.element._treeNodeModel.options.visibleFlag?(e.element._treeNodeModel.options._associatedLabel&&e.element._treeNodeModel.options._associatedLabel.hide(),e.element.addClassName("wux-toolbar-items-invisible")):(e.element._treeNodeModel.options._associatedLabel&&e.element._treeNodeModel.options._associatedLabel.show(),e.element.removeClassName("wux-toolbar-items-invisible")),!1}})}),define("DS/Tweakers/CustomTreeNodeViewTweaker",["DS/Tree/TreeNodeView","DS/Tweakers/TypeRepresentationFactory","DS/Utilities/DocUtils","DS/Controls/TooltipModel","DS/Utilities/Utils","DS/Tweakers/TweakerUtils"],function(e,t,i,n,o,a){"use strict";return function(s){var r=this;s=s||{},r.updateNodeParent=function(e,t){var i=e.getParent(),n=i.options.grid,a=o.getObjectPropertyInfo(s.value,n.path);if(a.valid&&a.value!==n.data&&(n.data=a.value),i&&!i._isTrueRoot()){var l=t.getCell(i._getRowID(),"data");if(l){var u=l.getView();u&&u.updateView()}r.updateNodeParent(i,t)}},r.updateNodeChildren=function(e,t,i){var n=e.getChildren();n&&n.forEach(function(e){if(e){var n=e.options.grid;if(n&&void 0!==n.path){var a=o.getObjectPropertyInfo(i,n.path),s=t.getCell(e._getRowID(),"data");if(s&&a.valid&&a.value!==n.value){var l=s.getView();n.data=a.value,l&&l.updateView()}r.updateNodeChildren(e,t,i)}}})},r.customTreeNodeView=e.extend({init:function(e){this._parent(e)},updateInternalParameters:function(){this._parent();var e=this.getCellInfos();if(s._portalTweaker&&("tree"===e.dataIndex||"oneColumn"===s.displayMode&&"data"===e.dataIndex)&&i.getWebUXPropertyDocumentation(e.nodeModel.options.label,s.realPath?s.realPath:s.valueType,function(t){var i={title:t&&t.property?t.property:"",longHelp:t&&t.doc?t.doc:e.nodeModel.options.label};e.cellView._setTooltip(e.cellView.elements.labelContainer,i)}),!e.isHeader){var t=e.nodeModel;this.getContent().setAttribute("has-children",t.hasChildren()),this.getContent().setAttribute("is-required",t.options.grid.required||!1),"left"===s.labelDisplay||s.authoringFlag?(this.getContent().addClassName("wux-left-labelDisplay"),this.getContent().removeClassName("wux-right-labelDisplay")):"right"===s.labelDisplay&&(this.getContent().addClassName("wux-right-labelDisplay"),this.getContent().removeClassName("wux-left-labelDisplay")),e.cellView&&e.cellView.elements.labelContainer&&e.cellView._setTooltip(e.cellView.elements.labelContainer,{shortHelp:t.options.tooltip})}},_setTooltip:function(e,t){var i,o,a,s=this,r=t.title?t.title:"";i=s.getCellInfos().dataIndex,o=s.getCellModel().options,a=t.longHelp,"tree"!==i&&a===String(o.value)||"tree"===i&&a===String(o.value.options.grid.name)&&""===r||(s.getContent().tooltipInfos=new n({title:r,shortHelp:t.shortHelp,longHelp:t.longHelp,mouseRelativePosition:!0}))}}),this.treeOptions={defaultCellHeight:38,isSortable:!1,cellClass:this.customTreeNodeView,apiVersion:2,show:{rowHeaders:!1,columnHeaders:!1},expanderStyle:"triangle",performances:{buildLinks:!1},treeDocument:s.doc,resize:{columns:!0},selection:!1,columns:[{dataIndex:"tree",text:"Label",isDraggable:!1,isHidden:!1,width:"40%"},{dataIndex:"type",isHidden:!0},{dataIndex:"tweakerType",isHidden:!0},{dataIndex:"data",text:"Value",isEditable:!0,width:"auto",onCellRequest:function(e){if(!e.isHeader&&e.nodeModel&&e.nodeModel.options&&!e.nodeModel.options.temporary){var i=function(i,n){var o=a._setModelViewForDataColumnOneColumnCase(r,e,s.tweakersExecutionContext,i,n),l=e.nodeModel.options.grid;void 0===WUX.typeRepFactory||l._buildFailure?WUX.typeRepFactory=new t({onReady:function(){this.generateView(o.data,o.generateViewOptions)}}):WUX.typeRepFactory.generateView(o.data,o.generateViewOptions)};s.promisesArray?s.promisesArray.push(new Promise(function(e,t){i(e)})):i()}},setValue:function(e){e.nodeModel.setAttribute("data",e.value)},getValue:function(e){return e.nodeModel.options.grid.data}},{dataIndex:"remove",isHidden:!0}]}}}),define("DS/Tweakers/TweakerObjectBase",["UWA/Core","DS/Tweakers/TweakerMultiRep","DS/Controls/Button","DS/Tree/TreeListView","DS/TreeModel/TreeNodeModel","DS/Tree/TreeNodeView","DS/TreeModel/TreeDocument","DS/Tweakers/TypeRepresentationFactory","DS/Tweakers/ModelProxy","DS/Utilities/DocUtils","DS/Utilities/Utils","DS/Controls/TooltipModel","DS/Tweakers/CustomTreeNodeViewTweaker","DS/Tweakers/TweakerUtils"],function(e,t,i,n,o,a,s,r,l,u,d,p,h,c){"use strict";function v(e){if(e){var t=e.getChildren()?e.getLastChild():null,i=e.options.grid,n=t&&t.options.temporary,a=e._isTrueRoot()?this.value:i.data;"object"===i.type||"object"==typeof a?n||function(e){if(e){var t=e.options.grid,i=!e._isTrueRoot();e.prepareUpdate(),e.addChild(new o({label:"Add property to <b>"+(i?t.name:"current object")+"</b>",temporary:!0})),e.isExpanded()||e.expand(),e.pushUpdate()}}(e):n&&(e.prepareUpdate(),t.remove(),e.pushUpdate())}}return t.inherit({name:"tweakerObjectBase",doc:void 0,publishedProperties:{editorTitle:{defaultValue:"Object Editor",type:"string",category:"Appearance"},hierarchyCriteria:{defaultValue:"category",type:"string",category:"Behavior"},configuration:{defaultValue:void 0,type:"objet",category:"Behavior"},recursionDepth:{defaultValue:0,type:"integer",category:"Behavior"},permanentReadOnly:{defaultValue:!0,type:"boolean",category:"Behavior"},uiOptions:{defaultValue:{height:"inherit",maxHeight:"100%",rootMargin:7},type:"object",category:"Appearance"},labelDisplay:{defaultValue:"left",type:"string",category:"Appearance"},failureCapture:{defaultValue:!0,type:"boolean",category:"Behavior"},onFailure:{defaultValue:void 0,type:"function",category:"Behavior"},displayMode:{defaultValue:"twoColumns",type:"string",category:"Appearance"},authoringFlag:{defaultValue:!1,type:"boolean",category:"Behavior"},authoringFilters:{defaultValue:void 0,type:"object",category:"Behavior"},typeDisplayFlag:{defaultValue:!1,type:"boolean",category:"Appearance"}},buildView:function(){this._parent(),void 0!==this.elements.container&&this.elements.container.addClassName("wux-tweakers-object"),this.dialogOptions.title||(this.dialogOptions.title=this.editorTitle)},buildPropertyList:function(){return[]},_applyHierarchyCriteria:function(){this._applyValue()},_applyRecursionDepth:function(){this._applyValue()},_applyConfiguration:function(e){this.configuration?d.isObjectEmpty(this.configuration)&&!e||this._applyValue():this.configuration={}},_applyProperties:function(e){this._parent(e),this.isDirty("labelDisplay")&&this._applyLabelDisplay(),this.isDirty("displayMode")&&this._applyDisplayMode(),this.isDirty("configuration")&&this._applyConfiguration(),this._applyLiveChangeFlag()},_applyValueStd:function(e){var t=this;if(t.doc&&!t._preventEditorRefresh){t.doc.prepareUpdate(),t.doc.empty();var i=t.buildPropertyList();!function e(t){for(var i=0;i<t.length;i++){var n=t[i],o=(n.name,null!=n.referenceValue?n.referenceValue:n.defaultValue);if(null==o&&n.type)switch(n.type){case"string":o="";break;case"number":o=0}"string"==typeof t[i]&&(t[i]={name:t[i]}),t[i].data=o,t[i].properties&&e(t[i].properties)}}(i),t.hierarchyCriteria?(l.modelToTreeDocument.call(t.doc,l.hierarchyFilter.call(i,{criteria:t.hierarchyCriteria}),"hierarchical","name"),"flat"!==t.hierarchyCriteria&&t.doc.expandNLevels({numberOfLevelsToExpand:0}),t.authoringFlag&&t._applyAuthoringFlag()):l.modelToTreeDocument.call(t.doc,i,"flat","name"),t.doc.pushUpdate()}},_processValueFromString:function(e){try{if(e){var t=JSON.parse(e);(this.authoringFlag||d.arePrototypesEqual(this.value,t))&&(this.value=JSON.parse(e))}}catch(e){this.value=void 0}},_createFlattenedObject:function(e){for(var t={},i=this.buildPropertyList(e),n=0;n<i.length;n++)t[i[n].name]=e&&"object"==typeof e?e[i[n].name]:void 0;return t},_copyValueForDialog:function(){return this.value?JSON.parse(JSON.stringify(this.value)):void 0},_buildInlineEditor:function(){this._parent(),this.elements.internalView.addClassName("wux-tweakers-object-inline-editor")},onPostUpdateView:function(e){if(this.editor){var t=this.editor.getManager();if(t)return t.onPostUpdateView(e)}},onPostUpdateViewOnce:function(e){if(this.editor){var t=this.editor.getManager();if(t)return t.onPostUpdateViewOnce(e)}},_applyValueInline:function(){if(this.internalTweakerString||this._buildInlineEditor(),this.internalTweakerString)try{this.internalTweakerString.value=JSON.stringify(this.value)}catch(e){this.internalTweakerString.value=""}this.editor&&!e.equals(this.value,this.editor.value)&&(this.editor._isValueBeingSet=!0,"dialog"===this.augmentedDisplay?this.editor.value=this._copyValueForDialog():this.editor.value=this.value)},_handleEvents:function(){var e=this;this.getContent().addEventListener("liveChange",function(t){e._changeOptions&&(t.options=e._changeOptions)}),this.getContent().addEventListener("change",function(t){e.internalTweakerString&&e._applyValueInline(),e._changeOptions&&(t.options=e._changeOptions)})},_applyLabelDisplay:function(){this.editor&&(this.customTreeNodeView&&(this.customTreeNodeView.labelDisplay=this.authoringFlag?"left":this.labelDisplay),this.editor.getManager().updateView(!0))},_applyLiveChangeFlag:function(){this.editor&&this.liveChangeFlag&&c.enableLiveChangeOnTreeListView(this.editor)},_applyTypeDisplayFlag:function(){var e=this;if(e.editor){var t=e.editor.getManager();t.prepareUpdateView(),"std"!==e.displayStyle||e.authoringFlag||(e.typeDisplayFlag?"twoColumns"===this.displayMode?(t.showColumn("tweakerType"),t.setColumnOptions("tree",{width:"30%"}),t.setColumnOptions("tweakerType",{width:"10%"}),t.setColumnOptions("data",{width:"60%"})):"oneColumn"===this.displayMode&&(t.hideColumn("tweakerType"),t.setColumnOptions("data",{width:"100%"})):(t.hideColumn("tweakerType"),"twoColumns"===this.displayMode?(t.setColumnOptions("tree",{width:"40%"}),t.setColumnOptions("data",{width:"60%"})):"oneColumn"===this.displayMode&&t.setColumnOptions("data",{width:"100%"}))),t.pushUpdateView(!0)}},_applyDisplayMode:function(){function e(e,t){t=t||{},e.setOption("defaultCellHeight",t.cellHeight||38),e.setColumnOptions("tree",{width:t.widthTree||"40%"}),e.setColumnOptions("data",{width:t.widthTweaker||"53%"}),e._needToIndexRowsPosition()}if(this.editor){var t=this.editor.getManager();t.prepareUpdateView(),"std"===this.displayStyle&&(this.customTreeNodeView&&(this.customTreeNodeView.displayMode=this.displayMode),"oneColumn"===this.displayMode?(e(t,{cellHeight:60,widthTree:"0%",widthTweaker:"100%"}),t.hideColumn("tree"),t.hideColumn("tweakerType"),t.setColumnOptions("data")):(this.typeDisplayFlag&&!this.authoringFlag?(e(t,{widthTree:"30%"}),t.showColumn("tweakerType")):e(t),t.showColumn("tree"))),t.pushUpdateView(!0)}},_applyAuthoringFlag:function(){var e=this;if("inline"!==e.displayStyle){if(!e.editor)return;var t=e.editor.getManager();t.prepareUpdateView(),e.customTreeNodeView&&(e.customTreeNodeView.labelDisplay=e.authoringFlag?"left":e.labelDisplay),e.doc.prepareUpdate(),e.authoringFlag?(t.showColumn("remove"),t.showColumn("type"),t.hideColumn("tweakerType"),t.setColumnOptions("data",{width:"25%"}),e.doc.getAllDescendants().forEach(function(t){v.call(e,t)}),v.call(e,e.doc._getTrueRoot()),e._initTypeRepForProp()):(t.hideColumn("remove"),t.hideColumn("type"),e.typeDisplayFlag&&"twoColumns"===e.displayMode?(t.setColumnOptions("tweakerType",{width:"15%"}),t.showColumn("tweakerType")):"oneColumn"===e.displayMode?t.setColumnOptions("data",{width:"100%"}):t.setColumnOptions("data",{width:"53%"}),e.doc.getAllDescendants().forEach(function(e){e.options.temporary&&e.remove()})),e.doc.pushUpdate(),t.pushUpdateView()}else e.editor&&(e.editor.authoringFlag=e.authoringFlag)},_checkAuthoringFilters:function(){if(this.authoringFilters)for(var e in this.authoringFilters)if(this.authoringFilters[e].types)for(var t in this.authoringFilters[e].types)void 0===WUX.typeRepFactory.getRegisteredTypeRepresentation(this.authoringFilters[e].types[t])&&(console.warn("[WEBUX][TweakerObjectBase] The required type representation ("+this.authoringFilters[e].types[t]+") is not registered in the TypeRepresentationFactory. The field will not be added."),delete this.authoringFilters[e].types[t]);else console.warn("[WEBUX][TweakerObjectBase] No type defined for the authoring filter ("+e+").")},_initTypeRepForProp:function(){var e=this;this._filterForProp={},this.doc&&this.doc.getAllDescendants().forEach(function(t){var i=t.options.grid;WUX.typeRepFactory=new r;var n="filteredType"+i.path;if(n=n.split(".").join("_"),WUX.typeRepFactory.typeEnums.customAllSupportedTypes=void 0,e._checkAuthoringFilters(),e.configuration[i.path]&&e.configuration[i.path].authoringFilters){if(e.configuration[i.path]&&e.configuration[i.path].authoringFilters){Array.isArray(e.configuration[i.path].authoringFilters)||(e.configuration[i.path].authoringFilters=[e.configuration[i.path].authoringFilters]);var o,a=0;e.configuration[i.path].authoringFilters[a];o=function(){for(var t=[],n=Object.keys(e.authoringFilters),o=0;o<n.length;o++){var s=n[o];for(a=0;a<e.configuration[i.path].authoringFilters.length;a++)if(s===e.configuration[i.path].authoringFilters[a])for(var r=0;r<e.authoringFilters[s].types.length;r++)t.push(e.authoringFilters[s].types[r])}return t.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})},WUX.typeRepFactory.registerEnum(n,o);var s={};s[n]={stdTemplate:"enumSearchableCombo"};WUX.typeRepFactory.registerTypeRepresentations(s);if(e._filterForProp&&!e._filterForProp[n]){var l,u="default",d=0;if(i.authoringFilters instanceof Array)for(var p=0;p<i.authoringFilters.length;p++){var h=i.authoringFilters[p];e.authoringFilters[h].defaultType&&e.authoringFilters[h].defaultTypeWeight?e.authoringFilters[h].defaultTypeWeight>d&&(u=e.authoringFilters[h].defaultType,d=e.authoringFilters[h].defaultTypeWeight,e.authoringFilters[h].defaultValue&&(l=e.authoringFilters[h].defaultValue)):e.authoringFilters[h].defaultType&&0===d&&(u=e.authoringFilters[h].defaultType,e.authoringFilters[h].defaultValue&&(l=e.authoringFilters[h].defaultValue))}else"string"==typeof i.authoringFilters&&(void 0!==e.authoringFilters[i.authoringFilters].defaultType&&(u=e.authoringFilters[i.authoringFilters].defaultType),void 0!==e.authoringFilters[i.authoringFilters].defaultValue&&(l=e.authoringFilters[i.authoringFilters].defaultValue));"default"!==u&&(i.defaultType=u),void 0!==l&&(i.defaultValue=l),WUX.typeRepFactory.generateView(i.type?i.type:u,{typePath:n,context:"inlinedTemplate",onViewCreated:function(t){void 0!==t&&(e._filterForProp[n]=t)}})}}}else{if(e.authoringFilters&&e.authoringFilters.allSupportedTypes){void 0!==e.authoringFilters.allSupportedTypes.defaultType&&(i.defaultType=e.authoringFilters.allSupportedTypes.defaultType),void 0!==e.authoringFilters.allSupportedTypes.defaultValue&&(i.defaultValue=e.authoringFilters.allSupportedTypes.defaultValue),WUX.typeRepFactory.registerEnum("customAllSupportedTypes",function(){for(var t=[],i=Object.keys(e.authoringFilters),n=0;n<i.length;n++){var o=i[n];if("allSupportedTypes"===o)for(var a=0;a<e.authoringFilters[o].types.length;a++){var s=e.authoringFilters[o].types[a];s&&t.push(s)}}return t.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})});WUX.typeRepFactory.registerTypeRepresentations({customAllSupportedTypes:{stdTemplate:"enumSearchableCombo"}})}if(e._filterForProp&&!e._filterForProp[n]){var c="allSupportedTypes";void 0!==WUX.typeRepFactory.typeEnums.customAllSupportedTypes&&(c="customAllSupportedTypes");var v=WUX.typeRepFactory._getTypeData(e.valueType+"."+i.path).realType||"default",w=i.type?i.type:e.authoringFilters&&e.authoringFilters.allSupportedTypes&&e.authoringFilters.allSupportedTypes.defaultType?e.authoringFilters.allSupportedTypes.defaultType:v;WUX.typeRepFactory.generateView(w,{typePath:c,context:"inlinedTemplate",onViewCreated:function(t){void 0!==t&&(e._filterForProp[n]=t)}})}}})},_buildStdEditor:function(){var t=this,o=window.location.pathname.indexOf("WUXPortalUI");t._portalTweaker=o>=0,t.doc=new s({shouldAcceptDrag:function(e){return!1}}),t.configuration||(t.configuration={}),t.customTreeNodeView=new h(t);var a=e.clone(this.uiOptions);"auto"===a.height?a.height="inherit":"inherit"===a.height&&(a.height="auto");var l=e.merge(t.customTreeNodeView.treeOptions,a);l.performances.resizeDebounceTimeout=500,t.editor=new n(l);var u=t.editor.getManager();t.liveChangeFlag&&c.enableLiveChangeOnTreeListView(t.editor),u.onNodeClick(function(e){if("tree"===e.dataIndex&&!t.authoringFlag){var i=e.cellView.getCellInfos().nodeModel;i.isExpanded()?i.collapse():i.expand()}}),t.doc.onNodeModelUpdate(function(e){if(e.target){var i=e.target.options.grid.name,n=e.target.options.grid.path,o=void 0===e.target.options.grid.data&&void 0!==e.target.options.grid.defaultValue?e.target.options.grid.defaultValue:e.target.options.grid.data;if(t.onNodeUpdate){var a=!e.target.getParent(),s=d.getObjectPropertyInfo(t.value,n).value;t.onNodeUpdate(i,n,o,{removed:a});t.authoringFlag&&("object"==typeof o&&s!==o||"object"==typeof s&&"object"!=typeof o||void 0===o)?t._applyValueStd():(t.customTreeNodeView.updateNodeParent(e.target,u),t.customTreeNodeView.updateNodeChildren(e.target,u,t.value)),t._changeOptions={propertyChangePath:n,propertyChangeName:i,propertyChangeValue:o}}}}),t.editor.getContent().addClassName("wux-tweakers-object-editor-full"),t.elements.internalView=e.createElement("div",{class:"wux-tweakers-object-container-full"}),t.editor.inject(t.elements.internalView),t.elements.internalView.inject(t.elements.container),u.setColumnOptions("remove",{dataIndex:"remove",isEditable:!1,width:30,text:"Remove",isHidden:!0,onCellRequest:function(e){var n=e.nodeModel,o=n.options.grid;if(!e.isHeader&&!n.options.temporary){var a=e.cellView.getContent(),s=new i({icon:"close",displayStyle:"lite",tooltipInfos:new p({shortHelp:"Remove this property"})});s.getContent().addEvent("click",function(){if(t.value&&o.path){var e=o.path,i=e.split("."),a=i[i.length-1];for(var s in t.configuration)t.configuration.hasOwnProperty(s)&&s.startsWith(e)&&delete t.configuration[s];n.prepareUpdate(),d.removeObjectProperty(t.value,e)&&n.remove(),n.pushUpdate(),t.fire("change",{propertyChangeName:a,propertyChangePath:e})}}),a.setContent(s),e.removeButton=s}}}),u.setColumnOptions("tweakerType",{dataIndex:"tweakerType",isEditable:!1,width:"auto",text:"TweakerType",isHidden:!0,onCellRequest:function(e){var i=t._getTweakerTypeFromCellInfos(e);e.cellView.getContent().setText(i)}}),u.setColumnOptions("data",{dataIndex:"data",text:"Value",isEditable:!0,width:"auto",onCellRequest:function(e){if(!e.isHeader&&e.nodeModel&&e.nodeModel.options&&!e.nodeModel.options.temporary){var i=c._setModelViewForDataColumnOneColumnCase(t,e),n=e.nodeModel.options.grid;void 0===WUX.typeRepFactory||n._buildFailure?(WUX.typeRepFactory=new r,WUX.typeRepFactory.onReady=function(){WUX.typeRepFactory.generateView(i.data,i.generateViewOptions)}):WUX.typeRepFactory.generateView(i.data,i.generateViewOptions)}}}),u.setColumnOptions("type",{dataIndex:"type",isEditable:!1,width:"auto",text:"Type",isHidden:!0,onCellRequest:function(e){if(!e.isHeader&&!e.nodeModel.options.temporary){void 0===WUX.typeRepFactory&&(WUX.typeRepFactory=new r);var i="filteredType"+e.nodeModel.options.grid.path;if(i=i.split(".").join("_"),t._filterForProp&&t._filterForProp[i])e.cellView.getContent().setContent(t._filterForProp[i]);else{var n="allSupportedTypes";void 0!==WUX.typeRepFactory.typeEnums.customAllSupportedTypes&&(n="customAllSupportedTypes"),WUX.typeRepFactory.generateView(e.nodeModel.options.grid.type||"default",{typePath:n,context:"inlinedTemplate",onViewCreated:function(n){void 0!==n&&t._filterForProp&&(t._filterForProp[i]=n,e.cellView.getContent().setContent(t._filterForProp[i]))}})}}},onCellChange:function(e){if(e.event&&e.event.dsModel)return e.event.dsModel.value},setValue:function(e){var i=e.nodeModel,n=i.options.grid;"default"===e.value||"defaultRep"===e.value||"uwaObject"===e.value?(n.type=void 0,t.configuration[n.path]&&(t.configuration[n.path].type=void 0)):(n.type=e.value,t.configuration[n.path]||(t.configuration[n.path]={}),t.configuration[n.path].type=e.value);var o=u.getCell(e.rowID,"data");if(o){var a=o.getView();a&&a.updateView()}v.call(t,i)},getValue:function(e){return e.nodeModel.options.grid.type}}),u.setColumnOptions("tree",{onCellRequest:function(e){if(!e.isHeader){var n=e.cellView,o=e.nodeModel;if(o){if(void 0===t.editor.options.shouldDisplayTooltip&&n.getContent().setAttribute("title",o.getLabel()),t.authoringFlag){var a=n.elements.labelContainer,s=o.options,l=s.grid;if(a.style.display="inline-block",s.temporary){var u=new i({icon:"plus",label:s.label,allowUnsafeHTMLLabel:!0,displayStyle:"lite",tooltipInfos:new p({shortHelp:"Add a new property"})});u.onClick=function(){var e=o.getParent(),i=e.options.grid.data,n=e.options.grid.path||"",a=t.authoringFilters&&t.authoringFilters.allSupportedTypes&&void 0!==t.authoringFilters.allSupportedTypes.defaultType?t.authoringFilters.allSupportedTypes.defaultType:"default",s=e.options.grid.name||"";if("object"==typeof i&&void 0!==i||(s.length>0?(i={},e.prepareUpdate(),e.options.grid.data=i,e.pushUpdate(),d.setObjectProperty(t.value,n,i)):i=t.value),e&&void 0!==i){var r,l,u,p="NewProp",h=1;if(i.hasOwnProperty(p)){do{u=p+"_"+h,h++}while(i.hasOwnProperty(u));p=u}r=n+(n.length>0?".":"")+p,l=t.authoringFilters&&t.authoringFilters.allSupportedTypes&&void 0!==t.authoringFilters.allSupportedTypes.defaultValue?t.authoringFilters.allSupportedTypes.defaultValue:void 0;var c=t.getPropertyDefinition({propPath:r,propName:p,propValue:l});c.data=l,c.type=a,e.prepareUpdate(),o.updateOptions({temporary:!1,label:p,grid:c}),d.addObjectProperty(t.value,r,l),v.call(t,e||t.doc._getTrueRoot()),e.pushUpdate(),t.fire("change",{propertyChangeName:p,propertyChangePath:r})}},a.setContent(u),e.addButton=u}else void 0===WUX.typeRepFactory&&(WUX.typeRepFactory=new r),WUX.typeRepFactory.generateView(l.name,{typePath:"string",context:"inlinedTemplate",onViewCreated:function(e){void 0!==e&&a.setContent(e)}})}else n.setLabel(o.getLabel());n.setIcons(o.getIcons()),n.setBadges(o.getBadges()),n._setExpanderState(o._expandState),n._setDepth(o._nodeDepth),e.cellView.elements.container.setContent(e.cellView.elements.layout)}}},onCellChange:function(e){var i=e.event?e.event.dsModel:null,n=e.nodeModel.options.grid;if(i){var o=n.path,a=o.split("."),s=a[a.length-1],r=i.value,l="";return a.length>1&&(l+=o.substr(0,o.length-s.length)),l+=r,t.value&&r.length>0&&l&&!d.isPropertyInObject(t.value,l)?{name:r,path:l}:(i.value=s,{name:s,path:o})}return null},setValue:function(e){var i=e.nodeModel,n=i.options.grid,o=e.value.name,a=e.value.path,s=n.path;if(a!==s){for(var r in t.doc.prepareUpdate(),function e(t){t&&!t.options.temporary&&(t.options.grid.path.substr(0,s.length)===s&&(t.prepareUpdate(),t.options.grid.path=a+t.options.grid.path.substr(s.length),t.pushUpdate()),t.getAllDescendants().forEach(function(t){e(t)}))}(i),t.configuration)if(t.configuration.hasOwnProperty(r)&&r.startsWith(s)){var l=a+r.substr(s.length);t.configuration[l]=t.configuration[r],delete t.configuration[r]}i.prepareUpdate(),i.options.label=n.name=o,d.removeObjectProperty(t.value,s),d.addObjectProperty(t.value,a,n.data),t.customTreeNodeView.updateNodeParent(i,u),i.pushUpdate(),t.doc.pushUpdate()}}}),t.authoringFlag&&t._applyAuthoringFlag(),t._applyDisplayMode(),t._applyTypeDisplayFlag()},_getTweakerTypeFromCellInfos:function(t){var i=this,n=void 0,o=t.nodeModel.options.grid,a=o.data,s="filteredType"+o.path;s=s.split(".").join("_");var l="allSupportedTypes";i.authoringFilters&&i.configuration&&i.configuration[o.path]&&i.configuration[o.path].authoringFilters&&(Array.isArray(i.configuration[o.path].authoringFilters)||(i.configuration[o.path].authoringFilters=[i.configuration[o.path].authoringFilters]),i.configuration[o.path].authoringFilters[0]&&(l=i.configuration[o.path].authoringFilters[0])),void 0===WUX.typeRepFactory&&(WUX.typeRepFactory=new r);var u=WUX.typeRepFactory._getTypeData(i.valueType+"."+o.path).realType;return i._filterForProp&&i._filterForProp[s]?n=i._filterForProp[s].value:i.authoringFilters&&i.authoringFilters[l]&&i.authoringFilters[l].defaultType in i.authoringFilters[l].types?n=i.authoringFilters[l].defaultType:""!==u&&void 0!==u?n=u:i.configuration&&i.configuration[o.path]&&(n=i.configuration[o.path].type),n||(n=e.typeOf(a)),n}})}),define("DS/Tweakers/TweakerWUXAbstract",["UWA/Core","DS/Tweakers/TweakerObjectBase"],function(e,t){"use strict";return t.inherit({name:"tweakerWUXAbstract",doc:void 0,publishedProperties:{},buildView:function(){this._parent()},buildPropertyList:function(){if(this.value){var e=[];for(var t in this.value.publishedProperties){var i=this.value;do{i=Object.getPrototypeOf(i)}while(!i.hasOwnProperty(t));var n=this.value.publishedProperties[t];!1!==n.uiDisplay&&e.push({name:t,className:i.name,referenceValue:this.value[t],defaultValue:n.defaultValue,type:n.type,category:n.category,readOnly:n.readOnly,touchMode:this.value.touchMode})}return e}return[]},onNodeUpdate:function(t,i,n){if("array"===e.typeOf(this.value[t])||"object"===e.typeOf(this.value[t]))if(JSON.stringify(this.value[t])!==JSON.stringify(n))this.value[t]=n,this.fire("change");else{var o="_apply"+t.substring(0,1).toUpperCase()+t.substring(1,t.length);this.value[o]?this.value[o]():this.value._applyProperties()}if(!1===e.equals(this.value[t],n))this.value[t]=n,this.fire("change");else if("object"===e.typeOf(this.value[t])||"array"===e.typeOf(this.value[t])){o="_apply"+t.substring(0,1).toUpperCase()+t.substring(1,t.length);this.value[o]?this.value[o]():this.value._applyProperties()}}})}),define("DS/Tweakers/TweakerObject",["UWA/Core","DS/Tweakers/TweakerObjectBase","DS/Utilities/Utils","DS/Utilities/Array"],function(e,t,i,n){"use strict";function o(e){e=e||{};for(var t=0;t<this.filter.parameters.exceptions.length;t++)if(this.filter.parameters.exceptions[t]===e.propName)return!e.isAllExcept;return e.isAllExcept}function a(e){if("object"!=typeof e||null==e)return!1;var t=Object.getPrototypeOf(e);if(!t)return!1;var i=Object.getPrototypeOf(t);return!(t&&i&&t!==i)}var s=t.inherit({name:"tweakerObject",doc:void 0,publishedProperties:{filter:{type:"object",defaultValue:{mode:"standard",parameters:{matchingRegexp:"",displayFunctions:!0,displayChainOfPrototypes:!1}}}},buildView:function(){this._parent()},_applyFilter:function(){this._applyValue()},buildPropertyList:function(){function t(e,n,l,u){var d=e;do{Object.getOwnPropertyNames(d).forEach(function(e){var r=l&&u?u+"."+e:e,p=i._treatProperty({propName:e,propPath:r,propValue:d[e]});p&&a(d[e])&&n!==i.recursionDepth&&t(d[e],n+1,p,r),l?(l.properties=l.properties||[],l.properties=l.properties.concat(p)):o=o.concat(p),p&&p.name&&(s[r]=!0)}),d=Object.getPrototypeOf(d)}while(r&&d)}var i,o,s,r;if(i=this,s={},o=[],void 0!==this.value&&null!==this.value&&("string"==typeof this.filter.mode&&(r=!0,"standard"===this.filter.mode&&(r=this.filter.parameters.displayChainOfPrototypes),t(this.value,0)),"function"==typeof this.filter.mode))return this.filter.mode.call(this);if(i.configuration&&(void 0===this.value||a(this.value))){var l=e.clone(this.value)||{};for(var u in i.configuration){if(s[u])break;for(var d=u.split("."),p=l,h=0;h<d.length;h++){var c=d[h];h<d.length-1?void 0!==p[c]&&null!==p[c]&&"object"==typeof p[c]||(p[c]={}):p[c]=void 0,p=p[c]}}n.clear(o),t(l,0)}return o},_buildEditor:function(e){return this._parent(e),e.value=this._createFlattenedObject(e.value),e.authoringFlag=this.authoringFlag,e.authoringFlag&&(e.readOnly=!1),e.recursionDepth=this.recursionDepth,e.configuration=this.configuration,e.typeDisplayFlag=this.typeDisplayFlag,void 0===this.value&&void 0!==e.value&&0!==Object.keys(e.value).length&&(this._lockUI=!0,this.value=this._createFlattenedObject(e.value),this._lockUI=!1),e.authoringFilters=this.authoringFilters,new s(e)},_applyProperties:function(e){this._parent(e)},getStringFromValue:function(e){var t="{/n";for(var i in e)t=t+i+": "+e[i]+"/n";return t+="}"},_treatProperty:function(e){return(e=e||{}).propPath=e.propPath||e.propName,e.filterMode=this.filter.mode,this.isPropertyValidWithMode(e)?this.getPropertyDefinition(e):[]},isPropertyValidWithMode:function(e){(e=e||{}).propPath=e.propPath||e.propName;var t=function(e){return e=e||{},new RegExp("^__").test(e.propName)||"constructor"===e.propName?-1:this.configuration&&this.configuration[e.propPath]&&void 0!==this.configuration[e.propPath].uiDisplay?this.configuration[e.propPath].uiDisplay?1:-1:this.filter.parameters.matchingRegexp&&!new RegExp(this.filter.parameters.matchingRegexp).test(e.propName)?-1:0}.call(this,e);if(0!==t)return t>0;switch(e.filterMode){case"standard":return function(e){return e=e||{},!!this.filter.parameters.displayFunctions||(this.configuration&&this.configuration[e.propName]&&this.configuration[e.propName].type?"function"!==this.configuration[e.propName].type:"function"!=typeof e.propValue)}.call(this,e);case"noneExcept":return e.isAllExcept=!1,o.call(this,e);case"allExcept":return e.isAllExcept=!0,o.call(this,e);default:return[]}},getPropertyDefinition:function(t){(t=t||{}).propPath=t.propPath||t.propName;var i={name:t.propName,path:t.propPath,referenceValue:t.propValue,touchMode:t.touchMode};return this.configuration&&this.configuration[t.propPath]&&(i=e.merge(i,this.configuration[t.propPath])),i},onNodeUpdate:function(e,t,n,o){if(null!=t)return this._preventEditorRefresh=!0,o&&o.removed?i.removeObjectProperty(this.value,t):i.setObjectProperty(this.value,t,n)||(void 0===this.value&&(this.value={}),i.addObjectProperty(this.value,t,n)),this._preventEditorRefresh=!1,n=this.value}});return s}),define("DS/Tweakers/TweakerUWAObject",["UWA/Core","DS/Tweakers/TweakerObject"],function(e,t){"use strict";return t.inherit({name:"tweakerUWAObject",doc:void 0,publishedProperties:{},buildView:function(){this._parent()},buildPropertyList:function(){return void 0!==this.value&&null!==this.value&&"onlyOptions"===this.filter.mode?this._treatProperty({propName:"options",propValue:this.value.options}):this._parent()},_treatProperty:function(e){if("options"===(e=e||{}).propName&&"object"==typeof e.propValue){var t=[],i=this;return Object.getOwnPropertyNames(e.propValue).forEach(function(n){t=t.concat(i._treatProperty({propName:n,propValue:e.propValue[n]}))}),t}return this._parent(e)},isPropertyValidWithMode:function(e){return"defaultOptions"!==e.propName&&"elements"!==e.propName&&("onlyOptions"===e.filterMode?(e.filterMode="standard",this._parent(e)):this._parent(e))},onNodeUpdate:function(t,i,n){void 0!==this.value[t]?!1===e.equals(this.value[t],n)&&(this.value[t]=n,this.fire("change")):!1===e.equals(this.value.options[t],n)&&(this.value.options[t]=n,this.fire("change"))}})});