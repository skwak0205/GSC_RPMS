window.top.performance.mark("PIM_jsAppLoad"),
/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/PIMwebI3Dapp/PIMwebAppMain",["UWA/Core"],function(e){"use strict";var t,i,n;function o(e){var t=e.getValue("xsceneStoredObjects");return t&&"string"==typeof t||(t='{"products":{},"filters":{}}'),JSON.parse(t)}function a(e){e&&e.length&&(this.showWelcomePanel(!1),this.pad3DViewer.addRootNodesFromContent({json3DXContent:{protocol:"3DXContent",version:"1.1",source:"X3DSEAR_AP",data:{items:e.map(function(e){return{envId:require("DS/PADUtils/PADUtilsServices").getPlatformId(),objectId:e.id,objectType:e.type,displayName:e.displayName}})}}}))}function r(e){a.call(this,e.map(function(e){return{id:e.resourceid,type:e["ds6w:type_value"],displayName:e["ds6w:label"]}}))}function s(e){if(e&&e.length){t.publish({event:"ENXViews/LandingPage/addOrRefresh",data:{objects:e.map(function(e){return{resourceid:e,openWithFilter:!1,loading:!0,fromCustom:!0}})}});var i=setInterval(function(){this.isAppReady&&(clearInterval(i),require(["DS/PIMwebViewModel/PIMwebUtils"],function(i){i._fetchForWelcomePanel({ids:e,onComplete:function(e){var i=((e?JSON.parse(e):{}).results||[]).map(function(e){var t={};e.attributes.forEach(function(e){t[e.name]=e.value});var i=t["ds6w:type"],n={resourceid:t.resourceid,label:t["ds6w:label"],icons:[t.type_icon_url],thumbnail:t.preview_url,grid:t,subLabel:t["ds6w:responsible"]+" | "+new Date(t["ds6w:modified"]).toLocaleString(),description:t["ds6w:identifier"],openWithFilter:!1,fromCustom:!0,loading:void 0,item2Load:{}};n.item2Load[n.resourceid]={};var o=!!this.pimCtrl&&this.pimCtrl.getLoadedData();return n.opened=!!o[n.resourceid]||Object.keys(o).some(function(e){return o[e].indexOf(n.resourceid)>=0}),"SIMItfSimulation"!==i&&"PLMPIMMetricReference"!==i||(n.addRemoveFromViewCtx=!0),n}.bind(this));t.publish({event:"ENXViews/LandingPage/addOrRefresh",data:{objects:i}})}.bind(this),onFailure:function(){}})}.bind(this)))}.bind(this),100)}}function l(e){this.isAppReady=!1,this.params=e,this.welcomePanel=this.pad3DViewer=this.pimCtrl=null,this.tokensWelcomePanel=[]}return l.prototype={constructor:l,initialize:function(){return new Promise(function(e){require(["DS/PADServices/views/LandingPage","DS/PADServices/utils/GlobalModelEvents","i18n!DS/PIMwebI3Dapp/assets/nls/PIMwebI3Dapp"],function(i,n,l){t=n,this.tokensWelcomePanel.push(t.subscribe({event:"ENXViews/LandingPage/refreshCustom"},function(e){var t=o(this.params.widget),i=[].concat(Object.keys(t.isr||{}),Object.keys(t.itf||{}));s.call(this,e.filter(function(e){return i.indexOf(e)>-1}))}.bind(this))),this.tokensWelcomePanel.push(t.subscribe({event:"ENXViews/LandingPage/openCustom"},function(e){var t=this.params.widget.getValue("xsceneStoredObjects"),i=[];t=t?JSON.parse(t):{},e.customitem2open.forEach(function(e){t.isr&&t.isr[e]?i.push({id:e,type:"SIMItfSimulation"}):t.itf&&t.itf[e]&&i.push({id:e,type:"PLMPIMMetricReference"})}),a.call(this,i)}.bind(this))),this.tokensWelcomePanel.push(t.subscribe({event:"ENXViews/LandingPage/removeFromView"},function(e){if(e&&e.customitem2remove&&e.customitem2remove.length){var t=this.pimCtrl.getLoadedData(),i=[];e.customitem2remove.forEach(function(e){t[e]&&-1===i.indexOf(e)?i.push(e):Object.keys(t).forEach(function(n){t[n].indexOf(e)>-1&&-1===i.indexOf(n)&&i.push(n)})}),i.forEach(this.pimCtrl.removeIsr,this.pimCtrl)}}.bind(this))),this.tokensWelcomePanel.push(t.subscribe({event:"ENXViews/LandingPage/removeFromStore"},function(e){var i=this.params.widget.getValue("xsceneStoredObjects"),n=[];i=i?JSON.parse(i):{},e.customitem2remove.forEach(function(e){i.isr&&i.isr[e]&&-1===n.indexOf(e)?(n.push(e),delete i.isr[e]):i.itf&&i.itf[e]&&-1===n.indexOf(i.itf[e])&&(n.push(i.itf[e]),delete i.itf[e])}),this.params.widget.setValue("xsceneStoredObjects",JSON.stringify(i)),t.publish({event:"ENXViews/LandingPage/removeFromView",data:{customitem2remove:n}})}.bind(this))),this.tokensWelcomePanel.push(t.subscribe({event:"ENXViews/WelcomePanel/action/welcomePanelIsr"},function(){i.launchSearch({title:l.isr,precondition:'flattenedtaxonomies:"types/SIMItfSimulation"',showApplyButton:!1,ok:r.bind(this)})}.bind(this))),this.tokensWelcomePanel.push(t.subscribe({event:"ENXViews/WelcomePanel/action/welcomePanelItf"},function(){i.launchSearch({title:l.itf,precondition:'flattenedtaxonomies:"types/PLMPIMMetricReference"',showApplyButton:!1,ok:r.bind(this)})}.bind(this))),this.tokensWelcomePanel.push(t.subscribe({event:"ENXViews/WelcomePanel/action/welcomPanelPrefCmd"},function(){require(["DS/CATWebUXPreferences/CATWebUXPreferencesManager"],function(e){var t=e.givePreferenceManager({context:this.pad3DViewer.getFrameWindow()});if(t){var i=t.subscribe("onPreferencesPanelDestroyed",function(){t.unsubscribe(i),this.showWelcomePanel(!0)}.bind(this));this.showWelcomePanel(!1),t.displayPreferencePanel(this.pad3DViewer.getFrameWindow())}}.bind(this))}.bind(this)));var d=i.getDefaultActivities();d.activities[0].section.actions.splice(2,0,{id:"welcomePanelIsr",title:l.isr,icon:"interference-simulation"}),d.activities[0].section.actions.splice(3,0,{id:"welcomePanelItf",title:l.itf,icon:"interference-metric"}),d.activities.push({section:{id:"customizeAppSection",title:l.customApp,actions:[{id:"welcomPanelPrefCmd",title:l.prefs,icon:"cog"}]}}),this.welcomePanel=new i({widget:this.params.widget,readOnlyApp:!0,renderDiv:this.params.renderDiv,externalViewerMgt:!0,externalViewerMgtCB:function(e,t){!0!==t&&this.showWelcomePanel("viewer"!==e)}.bind(this),globalSearchPrecond:'flattenedtaxonomies:"types/SIMItfSimulation" OR flattenedtaxonomies:"types/PLMPIMMetricReference" OR flattenedtaxonomies:"types/VPMReference" OR flattenedtaxonomies:"types/VPMRepReference" OR flattenedtaxonomies:"types/ENOStrRefinementSpecification"',defaultActionId:d.defaultActionId,activities:d.activities,onLandingPageReady:this.params.onLandingPageReady}),this.welcomePanel.initialize().then(function(){var t=o(this.params.widget);s.call(this,[].concat(Object.keys(t.isr||{}),Object.keys(t.itf||{}))),e()}.bind(this))}.bind(this))}.bind(this))},setViewer:function(e){this.pad3DViewer=e,!this.params.initApp&&this.showWelcomePanel(!1);var t=e.render().getContent(),i=t.parentNode;t.style.position="relative",!this.params.renderDiv.parentNode&&i&&i!==this.params.renderDiv&&i.insertBefore(this.params.renderDiv,i.firstChild),this.params.renderDiv.insertBefore(t,this.params.renderDiv.firstChild),this.params.renderDiv.insertBefore(this.welcomePanel.elements.mainBody,this.params.renderDiv.firstChild),this.welcomePanel.setViewer(e,!this.params.initApp)},appReady:function(e){if(this.pimCtrl=e,this.isAppReady=!0,this.params.initApp){let a=this.params.widget.getValue("X3DContentId"),r=this.params.widget.id.indexOf("preview")>-1;if(this.params.widget.deleteValue("X3DContentId"),a)e.appInitFromTransition({x3dContent:JSON.parse(a),onNoActionDone:function(){this.addRootNodesFromContent({json3DXContent:JSON.parse(a),dispatch:!1})}.bind(this.pad3DViewer)});else if(!0===this.params.widget.getValue("autoreload")||!0===this.params.widget.getValue("autoreloadPreviewApp")&&!r){var t=this.params.widget.getValue("ItfSimuInSession");if((t=t?JSON.parse(t):null)&&!Array.isArray(t)&&"object"==typeof t){var i=Object.keys(t);if(1===i.length){var n={},o=i[0];Array.isArray(t[o])&&t[o].length?n.metricID=t[o]:n.isrID=o,this.showWelcomePanel(!1),e.load(n)}}}r?this.params.widget.setValue("autoreloadPreviewApp",!0):this.params.widget.deleteValue("autoreloadPreviewApp")}var a=this.welcomePanel.appReady();return this.welcomePanel.redraw(),a},dispose:function(){if(this.showWelcomePanel(!1),this.welcomePanel)return this.pad3DViewer=this.params=this.pimCtrl=null,this.tokensWelcomePanel.forEach(t.unsubscribe,t),this.tokensWelcomePanel.length=0,this.welcomePanel.dispose()},showWelcomePanel:function(e){this.welcomePanel&&(this.welcomePanel.elements.mainBody.style.position="relative",this.welcomePanel.elements.mainBody.style.display=e?"":"none",e&&this.welcomePanel.redraw())}},Object.freeze({getApp:function(t){if(!t||!t.data)throw new Error("App identification is missing! Unable to init app");if("I3D"!==t.data&&"I3S"!==t.data)throw new Error("Invalid app id: "+t.data);if("I3D"===t.data&&i)return i;if("I3S"===t.data&&n)return n;var o,a,r,s,d,c,p,u,f=t.widget,m=t.pad3DViewer,w=t.appMainDiv,h=m?m.getCommandContext():null,P={},b={module:"PIMweb"+t.data+"app",file:"PIMweb"+t.data+"appWkb.xml"};function g(e,t,i){window.top.performance.measure(f.id+e,i?f.id+t:t)}function D(e){window.top.performance.mark(f.id+e)}function v(){m&&m.getContentName({callbacks:{onComplete:function(e){f.setTitle(e.contentName)},onFailure:function(){}}})}function I(e){a&&o&&!s&&(r&&r(w),r=null,p.appReady(a),g("_PIM_Global widget creation time","PIM_jsAppLoad",!1),f.dispatchEvent("onWidgetAndAppReady","1"===f.getValue("widgetForODTReplay")?[{pad3DViewer:e}]:void 0))}""!==window.location.search&&(e.extend(P,e.Utils.parseQuery(window.location.search)),P.widgetDomain&&e.extend(P,e.Utils.parseQuery(P.widgetDomain))),"testWkb"in P&&(b={module:"PIMwebI3Dtst",file:"PIMwebI3DappTestWkb.xml"});var A,M,S,y=function(){require(["DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext","DS/PADUtils/PADCommandProxy"],function(e,t){(A=e).renderDiv||A.initialize2(m.getFrameWindow().getViewerFrame(),t.appId(),f.getValue("changeControlActivation")?"show":"hide","top-right",function(){A.addEvent("onAuthoringCtxVisible",function(e){e.showAuthoringContext&&f.setValue("changeControlActivation",!0)})})})},C=function(e){require(["DS/PADUtils/PADSettingsMgt","DS/PADUtils/PADCommandProxy","DS/PADUtils/PADSharedSettings","i18n!DS/PADUtils/assets/nls/PADUtils"],function(t,i,n,o){var a,r=[];S=function(){f.setPreferences([]),a.destroy(),r.forEach(function(e){e.cb&&t.removeEvent(e.cb,e.padFct)}),S=function(){}},M=function(){r.forEach(function(e){var i=e.preference.name,n=f.getValue(i),o=t.getSetting(i);(n="boolean"===e.preference.type&&"boolean"!=typeof n?"true"===n:n)!==o&&t.setSetting(i,n),e.fct&&e.fct(n)}),t.updateWidgetPreferences(),!a&&r.length&&(a=i.create({events:{onPreferenceModification:function(e){r.some(function(i){if(e.name===i.preference.name){if("boolean"!=typeof e.value&&"string"!=typeof e.value)throw new Error("Value must be a string or a boolean");if(t.getSetting(e.name)!==e.value){if("boolean"===i.preference.type&&"boolean"!=typeof e.value)throw new Error("Preference is a boolean type so value must be a boolean");i.debounce=!0,f.setValue(e.name,e.value),t.setSetting(e.name,e.value)}return i.fct&&i.fct(e.value),!0}})}}}),r.forEach(function(e){e.cb&&t.addEvent(e.cb,e.padFct=function(t){e.debounce?e.debounce=!1:a.preferenceModification({name:e.preference.name,value:t})})}))},f.setPreferences([]),t.setSetting("syncAutoReload",!0),n.destroy(),n.addSharedSettings(f),r.push({preference:{name:"changeControlActivation",type:"boolean",label:o.changeControlActivation_label,defaultValue:!1},fct:function(e){A&&A[e?"show":"hide"]()},cb:"onChangeControlActivation",debounce:!1}),r.push({preference:{name:"changeControlPosition",type:"list",label:o.changeControlPosition_label,defaultValue:"top-right",options:[{label:o["top-right_label"],value:"top-right"},{label:o["top-left_label"],value:"top-left"},{label:o["bottom-left_label"],value:"bottom-left"},{label:o["bottom-right_label"],value:"bottom-right"}]},fct:function(e){A&&A.setPosition(e)}}),t.setSetting("authorizeChangeControl",!0),e&&y(),r.forEach(function(e){f.mergePreferences([e.preference])}),M(),f.addEvent("endEdit",M)})};function V(e){e.unsubscribe(d),d=null,v(),y(),require("DS/PADUtils/PADUtilsServices").isCloud()&&!window.__preventPrefPanel&&e.getViewer().displayIntroductoryControlPreferencePanel(),D("_PIM_beforeAppComponentLoad"),require(["DS/PIMwebViewController/PIMwebItfCtrl"],function(t){g("_PIM_AppComponentLoading","_PIM_beforeAppComponentLoad",!0),(a=t.getItfCtrl({pad3DViewer:e})).activate({readOnly:!1}),I(e)})}function _(e){e.unsubscribe(c),c=null,D("_PIM_ownCommands"),g("_PIM_Action Bar merge app commands","_PIM_ownCommands",!0),D("_PIM_beforeDefaultCmdLoad"),h=m.getCommandContext(),(o=require("DS/ApplicationFrame/CommandsManager")).setDefaultCommand({ID:"PIMwebDefaultHdr",className:"DS/PIMwebViewController/PIMwebDefaultCmd",context:h}),g("_PIM_Default Cmd Init","_PIM_beforeDefaultCmdLoad",!0),I(e)}function W(e){g("_PIM_PAD3DViewer creation","_PIM_PAD3DViewerReady",!0),e.unsubscribe(s),s=null,I(e)}function E(t){return w||(w=e.createElement("div",{class:"appMain",styles:{width:"auto",height:"100%"}})),(p=new l({widget:f,readOnlyApp:!1,renderDiv:w,initApp:t&&t.initApp,onLandingPageReady:t&&t.onLandingPageReady})).initialize()}function x(){if(!m){g("_PIM_UWA widget loading","_PIM_widgetLoad",!0),D("_PIM_LoadJSPAD3DViewer");var i=new Promise(function(e){E({initApp:!0,onLandingPageReady:function(){r(w),r=null}}).then(e)}),n=new Promise(function(e){require(["DS/ENOPAD3DViewer/PAD3DViewer","DS/CATWebUXPreferences/CATWebUXPreferencesManager","text!DS/PIMwebI3Dapp/assets/json/PIMwebI3DWindowOptions.json"],function(t,i,n){g("_PIM_PAD3DViewer load JS","_PIM_LoadJSPAD3DViewer",!0),D("_PIM_PAD3DViewerReady"),u=i,e([t,n])})}),o=new Promise(e=>{require(["DS/ENOXInterWdgCom/LinkManager"],t=>{t.initializeWidgetLink(f,{appIds:[],uses:["ENXContent"],implements:["ENXContent"],open:!0}).then(e)})});Promise.all([i,n,o]).then(function(i){var n=require("DS/PADUtils/PADSettingsMgt"),o=e.extend({context:"Default",workbench:b.file,workbenchModule:b.module},JSON.parse(i[1][1])),a={widget:f,windowOptions:o,enableFiltering:!0,binaryPrimitives:!0,enableSidePanel:!0,visuProgressiveTileModel:!0,readyCB:C};o.mouseProfile=require("DS/PADUtils/PADUtilsServices").isCloud()?window.__mouseProfile:"CATIA",m=new i[1][0](a),o.mouseProfile&&m.getViewpoint().setDefaultController(!0,o.mouseProfile),u.getPreferenceManager({context:m.getFrameWindow()}).removeAllPreferences(),p.setViewer(m),m.setOption("propertiesFacet",n.getSetting("propertiesFacet")),m.setAuthorizedRootTypes(n.getSetting("ups_authorized_root_types")),m.setDefaultContextualBarVisibility(!0),m.setDefaultContextualMenuVisibility(!0),m.setOpenWithMenuAvailability(!0),d=m.subscribe({event:"onViewerReady"},V),c=m.subscribe({event:"onActionBarReady"},_),s=m.subscribe({event:"onReady"},W),m.subscribe({event:"onRootAdded"},v),m.subscribe({event:"onRootRemoved"},v),m.subscribe({event:"onRootAttached"},v),m.subscribe({event:"onRootDetached"},v),m.subscribe({event:"onContentNameModified"},v),m.setupWidgetLink(),n.setSetting("settypes",!0),"1"===f.getValue("widgetForODTReplay")&&f.dispatchEvent("onPAD3DViewerCreated",[{pad3DViewer:m}]),t.done&&t.done({appMainDiv:w,pad3DViewer:m})})}}function O(){m&&m.refresh()}function R(){p&&p.dispose(),p=null,a&&a.dereference(),i=n=f=m=r=w=o=a=u=null}function L(e){m&&m.search({searchQuery:e})}m?f.addEvent("onDestroy",R):(g("_PIM_JS dependencies loading","PIM_jsAppLoad",!1),D("_PIM_widgetLoad"),t.viewerAttachment?(r=t.viewerAttachment,x()):(r=function(e){f.setBody(e)},f.addEvent("onLoad",x)),f.addEvent("onRefresh",O),f.addEvent("onDestroy",function(){var e=m;R(),e&&e.destroy()}),f.addEvent("onSearch",L),f.setMetas({helpPath:"PIMwebI3Dapp/assets/help"}));var U=Object.freeze({setUp:function(e){Promise.all([o?Promise.resolve():new Promise(function(e){require(["DS/ApplicationFrame/CommandsManager"],function(t){o=t,e()})}),u?Promise.resolve():new Promise(function(e){require(["DS/CATWebUXPreferences/CATWebUXPreferencesManager"],function(t){u=t,e()})})]).then(function(){f.addEvent("onRefresh",O),f.addEvent("onSearch",L),f.setMetas({helpPath:"PIMwebI3Dapp/assets/help"});var t={lastCommand:[],currentCommand:null,defaultCommand:null};h?o._commandsState[h]=t:o._commandsState=t,o.resetDefaultCommand(h),o._isCommandEnding=!1,o._ignoreCommandBeginWhileEndingCommand=!1,["_commands","_cmdCheckHeader"].forEach(function(e){var t=h?o[e][h]:o[e];Object.keys(t).forEach(function(e){var i=t[e];i&&i._destroy&&i._destroy(),delete t[e]})}),e.sourceApp&&e.sourceApp.pad3DViewer!==m&&(a&&a.dereference(),a=null,m=e.sourceApp.pad3DViewer),m.setOption("propertiesFacet",require("DS/PADUtils/PADSettingsMgt").getSetting("propertiesFacet")),m.getBIController().toggleBetweenStandaloneAndSlaveMode("DUAL"),C(m),v(),m.setDefaultContextualBarVisibility(!0),m.setDefaultContextualMenuVisibility(!0),m.setOpenWithMenuAvailability(!0),u.getPreferenceManager({context:m.getFrameWindow()}).removeAllPreferences();var i=new Promise(function(e){var t=m.subscribe({event:"onActionBarReady"},function(){m.unsubscribe(t),o.setDefaultCommand({ID:"PIMwebDefaultHdr",className:"DS/PIMwebViewController/PIMwebDefaultCmd",context:h}),e()});m.loadActionBar({merge:!1,file:b.file,module:b.module})}),n=new Promise(function(e){a?e():require(["DS/PIMwebViewController/PIMwebItfCtrl"],function(t){(a=t.giveItfCtrl({pad3DViewer:m}))||(f.deleteValue("ItfSimuInSession"),a=t.getItfCtrl({pad3DViewer:m})),e()})}).then(function(){a.activate({readOnly:!1}),E().then(function(){p.setViewer(m),p.appReady(a)}),e.sourceApp&&e.sourceApp.issues&&e.sourceApp.issues.length>0&&a.appInitFromTransition({issues:e.sourceApp.issues,onNoActionDone:function(){}})});Promise.all([i,n]).then(function(){e.done({appMainDiv:w,pad3DViewer:m})})})},dispose:function(e){if(f.removeEvent("onRefresh",O),f.removeEvent("onSearch",L),f.removeEvent("endEdit",M),S(),p&&p.dispose(),p=null,m&&m.setOpenWithMenuAvailability(!1),a&&a.deactivate(),e){var t=f.getValue("ItfSimuInSession");(t=t?JSON.parse(t):null)&&!Array.isArray(t)&&"object"==typeof t&&1===Object.keys(t).length&&(e.preferredType="SIMItfSimulation")}var i=u.givePreferenceManager({context:m.getFrameWindow()});i&&i.removeAllPreferences(),u.unreferencePreferenceManager({context:m.getFrameWindow()})},onWillLeave:function(){}});return"I3D"===t.data?i=U:n=U,U}})}),define("DS/PIMwebI3Dapp/PIMwebI3DappInitAdapt",["DS/WAfrContainer/App"],function(e){"use strict";var t,i={I3D:null,I3S:null};return e.extend({setUp:function(e,n){var o=this;if(e.sourceApp){if(!e.sourceApp.pad3DViewer)return window.console.log("pad3DViewer property must be valuated"),void e.done();this.pad3DViewer=e.sourceApp.pad3DViewer,this.appMainDiv=e.sourceApp.appMainDiv,new Promise(function(t){i[n]?t(i[n]):require(["DS/PIMwebI3Dapp/PIMwebAppMain"],function(o){i[n]=o.getApp({widget:window.widget,pad3DViewer:e.sourceApp.pad3DViewer,appMainDiv:e.sourceApp.appMainDiv,data:n}),t(i[n])})}).then(function(i){e.sourceApp&&!e.sourceApp.isDisposeCalled()&&e.sourceApp.dispose(e);var n=e.done;e.done=function(i){var a;o.appMainDiv||(o.appMainDiv=i.appMainDiv),e.done=n,"ENX3DIR_AP"===e.sourceApp.options.id&&((a=o).switchApp&&require(["DS/CATWebUXComponents/CATWebUXInfoFlag","DS/CATWebUXSlideShow/CATWebUXSlideShowController","i18n!DS/PIMwebI3Dapp/assets/nls/PIMwebI3Dapp","DS/Utilities/TouchUtils"],function(e,i,n,o){var r=new e({frameWindow:a.pad3DViewer.getFrameWindow(),viewer:a.pad3DViewer.getViewer(),dockingSide:"left"});r.display({label:n.backToIssue,style:"webUXStyle",fontIcon:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to-start",onClickCB:function(){t(),t=null,a.switchApp("ENX3DIR_AP")},compactDisplay:function(e){var t=document.querySelector(".pimWebOpacitySlider");if(t&&!t.isHidden())return e.flagOffset+e.flagWidth>.5*(e.freeZoneWidth-(o.getTouchMode()?470:398))}});var s,l=i.getSlideShowController({context:a.pad3DViewer.getFrameWindow(),id:"PIMwebSlideShow",params:{activateRotation:!0}});l&&(s=l.subscribe("onActiveStateModified",function(e){r.setVisibleFlag(!e.state)})),t=function(){r.clean();var e=i.giveSlideShowController({context:a.pad3DViewer.getFrameWindow(),id:"PIMwebSlideShow"});e&&e.unsubscribe(s)}})),e.done()},i.setUp(e)})}else require(["DS/PIMwebI3Dapp/PIMwebAppMain"],function(t){i[n]=t.getApp({widget:window.widget,viewerAttachment:e.done,data:n,done:function(e){o.pad3DViewer=e.pad3DViewer,o.appMainDiv=e.appMainDiv}})})},dispose:function(e,n){t&&t(),t=null,i[n].dispose(e),this._parent(e)},onWillEnter:function(e){return require(["DS/PIMwebViewModel/PIMwebUtils"],function(t){t._sendUsageProbe("appTransitionFrom",e.options.id,"resolved")}),this._parent(e)},onWillLeave:function(e,t){return i[t]&&i[t].onWillLeave&&i[t].onWillLeave(e),require(["DS/PIMwebViewModel/PIMwebUtils"],function(t){t._sendUsageProbe("appTransitionTo",e.options.id,"resolved")}),this._parent(e)}})}),define("DS/PIMwebI3Dapp/PIMwebI3DappInit",["DS/PIMwebI3Dapp/PIMwebI3DappInitAdapt"],function(e){"use strict";return e.extend({setUp:function(e){this._parent(e,"I3D")},dispose:function(e){this._parent(e,"I3D")},onWillEnter:function(e){return this._parent(e,"I3D")},onWillLeave:function(e){return this._parent(e,"I3D")}})});