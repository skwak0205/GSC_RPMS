define("DS/MPFKYCDocumentModel/UboDocumentModel",["DS/MPFModel/MPFModel"],function(e){"use strict";var t,o={KYC_TYPE:"kyc_type",FILENAME:"filename",STATE:"kyc_status"},n={ID:"kyc_ubo_id",ID_BACK:"kyc_ubo_id_back",ADDRESS:"kyc_ubo_address",KYC_PERSON_ID:"kyc_person_id",KYC_PERSON_ADDRESS:"kyc_person_address"},r={UPLOADED:"uploaded",VALIDATED:"validated",REJECTED:"rejected"};return(t=e.extend({idAttribute:o.KYC_TYPE,setup:function(e,t){this._type="UboDocumentModel",this._parent(e,t)},getKycType:function(){return this.get(o.KYC_TYPE)},setKycType:function(e){return this.set(o.KYC_TYPE,e)},getFileName:function(){return this.get(o.FILENAME)},setFileName:function(e){return this.set(o.FILENAME,e)},getState:function(){return this.get(o.STATE)}})).Fields=Object.freeze(o),t.DocumentTypes=Object.freeze(n),t.States=Object.freeze(r),t}),define("DS/MPFKYCDocumentModel/KycDocumentModel",["UWA/Core","UWA/Promise","DS/MPFModel/MPFModel"],function(e,t,o){"use strict";var n,r={},c={};return r.id="kyc_id",r.idStripe="kyc_id_stripe",r.address="kyc_address",r.idPro="kyc_id_pro",r.statutes="kyc_statutes",r.bank="kyc_bank",r.kbis="kyc_kbis",r.tax="kyc_tax",r.kyc_ubo1_id="kyc_ubo1_id",r.kyc_ubo2_id="kyc_ubo2_id",r.kyc_ubo3_id="kyc_ubo3_id",r.kyc_ubo4_id="kyc_ubo4_id",r.kyc_ubo1_address="kyc_ubo1_address",r.kyc_ubo2_address="kyc_ubo2_address",r.kyc_ubo3_address="kyc_ubo3_address",r.kyc_ubo4_address="kyc_ubo4_address",c.KYC_STATUS="kycStatus",c.FILENAME="fileName",c.KYC_MESSAGE="kycMessage",c.KYC_TYPE="kycType",c.KYC_UPLOADED="kycUploaded",(n=o.extend({idAttribute:"kycType",defaults:{kycStatus:null,fileName:null,kycMessage:null,kycType:null,kycUploaded:null},setup:function(e,t){this._parent(e,t),this._type="KycDocumentModel"},parse:function(e){return{kycStatus:e.kyc_status,fileName:e.filename,kycMessage:e.kyc_message,kycType:e.kyc_type,kycUploaded:e.kyc_uploaded}},toJSON:function(e){return{kyc_status:this.get(c.KYC_STATUS),filename:this.get(c.FILENAME),kyc_message:this.get(c.KYC_MESSAGE),kyc_type:this.get(c.KYC_TYPE),kyc_uploaded:this.get(c.KYC_UPLOADED)}},isNew:function(){var e;return!("string"==typeof(e=this.get(c.KYC_UPLOADED))&&e.length>0)},saveFile:function(e,o){var n,r=t.deferred();return(n=new FormData).append("file",e),o||(o={}),o.method="POST",o.data=n,o.onComplete=r.resolve,o.onFailure=function(e,t,o){r.reject({model:e,response:t,options:o})},this.save(null,o),r.promise},getStatus:function(){return this.get(c.KYC_STATUS)}})).DocumentTypes=Object.freeze(r),n.Fields=Object.freeze(c),n}),define("DS/MPFKYCDocumentModel/ShopKycDocumentDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(e,t){"use strict";return t.extend({init:function(e){this._parent(e,"/mdshop/shops/{0}/kyc")},urlGet:function(t){var o,n=[];return n.push(e.String.format(this.resourcePath,t.parentResourceId)),"function"!=typeof t.isNew||t.isNew()||(n.push("/"),n.push(t.get("kycType"))),o=n.join(""),this.connector.url(o)},urlPost:function(t){var o,n=[];return n.push(e.String.format(this.resourcePath,t.parentResourceId)),n.push("/"),n.push(t.get("kycType")),o=n.join(""),this.connector.url(o)},urlPut:null,urlPatch:null,urlDelete:null,doPut:null,doPatch:null,doDelete:null})}),define("DS/MPFKYCDocumentModel/UboDocumentDataProxy",["UWA/String","DS/MPFDataProxy/DataProxy","DS/MPFServices/ObjectService","DS/MPFError/NotImplementedError","DS/MPFModel/MPFCollection"],function(e,t,o,n,r){"use strict";return t.extend({init:function(e){this._parent(e,"/mdpeoplecompany/personkycs/{0}")},urlGet:function(t){return o.requiredOfPrototype(t,r,"GET only implemented for collections"),this.connector.url(e.format(this.resourcePath,t.parentResourceId))},urlPost:function(t){var o=t.parentResourceId||t.collection.parentResourceId;return this.connector.url(e.format(this.resourcePath,o)+"/"+t.getKycType())},urlPatch:n.emit,urlPut:function(e){return this.urlPost(e)},urlDelete:n.emit})}),define("DS/MPFKYCDocumentModel/KycDocumentStatus",[],function(){"use strict";function e(e){this.status=e}return e.prototype.toString=function(){return this.status},e.NONE=new e("none"),e.CREATED=new e("created"),e.UPLOADED=new e("uploaded"),e.VALIDATED=new e("validated"),e.NOK=new e("nok"),e.fromString=function(t){var o;return o=e.NONE,e.CREATED.toString()===t?o=e.CREATED:e.UPLOADED.toString()===t?o=e.UPLOADED:e.VALIDATED.toString()===t?o=e.VALIDATED:e.NOK.toString()===t&&(o=e.NOK),o},Object.freeze(e)}),define("DS/MPFKYCDocumentModel/KycDocumentService",["DS/MPFError/BadArgumentError","DS/MPFKYCDocumentModel/KycDocumentModel","DS/MPFKYCDocumentModel/KycDocumentStatus"],function(e,t,o){"use strict";var n={isKycDocument:function(e){return t.prototype.isPrototypeOf(e)},isEditable:function(t){var r;if(!n.isKycDocument(t))throw new e("kycDocument param must be a KycDocumentModel");return(r=o.fromString(t.getStatus()))===o.NONE||r===o.NOK}};return Object.freeze(n)}),define("DS/MPFKYCDocumentModel/UboDocumentCollection",["DS/MPFModel/MPFCollection","DS/MPFKYCDocumentModel/UboDocumentModel"],function(e,t){"use strict";return e.extend({model:t,setup:function(e,t){this.constraints=t.constraints||null,this._parent(e,t)},hasDocument:function(e){return!(!this.get(e)||this.get(e).getState()!==t.States.UPLOADED&&this.get(e).getState()!==t.States.VALIDATED)},isComplete:function(){return this.hasDocument(t.DocumentTypes.ID)&&this.hasDocument(t.DocumentTypes.ADDRESS)}})}),define("DS/MPFKYCDocumentModel/UboDocumentFactory",["DS/MPFModelFactory/Factory","DS/MPFKYCDocumentModel/UboDocumentModel","DS/MPFKYCDocumentModel/UboDocumentCollection","DS/MPFKYCDocumentModel/UboDocumentDataProxy"],function(e,t,o,n){"use strict";const r={UBO_DOCUMENT:"UboDocument"},c=e.extend({createModel:function(e,o){var n=r.UBO_DOCUMENT;return this._parent(t,n,e,o)},createCollection:function(e,t){var n=r.UBO_DOCUMENT;return this._parent(o,n,e,t)},getDataProxy:function(){return this.dataProxies[r.UBO_DOCUMENT]||(this.dataProxies[r.UBO_DOCUMENT]=new n(this.connector)),this.dataProxies[r.UBO_DOCUMENT]}});return c.Types=r,c}),define("DS/MPFKYCDocumentModel/KycDocumentCollection",["UWA/Core","DS/MPFModel/MPFCollection","DS/MPFKYCDocumentModel/KycDocumentModel"],function(e,t,o){"use strict";return t.extend({model:o,uploadDocument:function(e,t){var n;return(n=new o({kycType:e},{dataProxy:this.dataProxy})).parentResourceId=this.parentResourceId,this.push(n),n.saveFile(t)}})}),define("DS/MPFKYCDocumentModel/KycDocumentFactory",["DS/MPFKYCDocumentModel/KycDocumentModel","DS/MPFKYCDocumentModel/KycDocumentCollection","DS/MPFKYCDocumentModel/ShopKycDocumentDataProxy"],function(e,t,o){"use strict";function n(e){this.connector=e,this.dataProxies={}}return n.prototype.createModel=function(t,o,n){return n||(n={}),o||(o={}),n.dataProxy=this._getDataProxy(t),new e(o,n)},n.prototype.createCollection=function(e,o,n){return n||(n={}),o||(o=[]),n.dataProxy=this._getDataProxy(e),new t(o,n)},n.prototype._getDataProxy=function(e){var t=null;return"shop"===e&&(this.dataProxies.shop||(this.dataProxies.shop=new o(this.connector)),t=this.dataProxies.shop),t},n});