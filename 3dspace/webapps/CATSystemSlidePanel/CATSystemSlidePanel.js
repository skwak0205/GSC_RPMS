define("DS/CATSystemSlidePanel/SlidePanel",["require","exports","DS/CATSystemCommon/Utils","DS/CATSystemCommon/DeviceDetector","DS/CATSystemCommon/TouchEvent","DS/UIKIT/Tooltip","UWA/Core","css!./SlidePanel.css"],function(t,e,s,i,n,o,a){"use strict";class h{constructor(t,e,s,i){if(this.maxWidth=50,this.maxHeigth=50,"top"!==i&&"left"!==i&&"right"!==i&&"bottom"!==i)throw new Error("Unknown position "+i);this.position=i,this.sizeRatio=t,this.size=2,this.tabs=[],this.tabsById={},this.container=document.createElement("div"),this.container.className="syc-panel "+this.position,this.closeTabButton=document.createElement("div"),this.closeTabButton.className="syc-panel-close fonticon fonticon-cancel syc-hidden",this.tabLabelContainer=document.createElement("div"),this.tabLabelContainer.className="syc-panel-tab-labels",this.contents=document.createElement("div"),this.contents.className="syc-panel-contents",this.contents.addEventListener("transitionend",()=>{this.isVisible()?this.tabContents.style.overflowY="auto":this.tabContents.style.overflowY="hidden",this.contents.classList.remove("syc-animation")}),this.buttons=document.createElement("div"),this.buttons.className="syc-panel-buttons",this.tabContents=document.createElement("div"),this.tabContents.className="syc-panel-tab-contents",this.container.appendChild(this.tabLabelContainer),this.container.appendChild(this.contents),this.contents.appendChild(this.buttons),this.contents.appendChild(this.tabContents),this.buttons.appendChild(this.closeTabButton),this.updateSize(e,s),this.attachEvent()}showTab(t,e=!0){const i=this.selectedTabId?this.tabsById[this.selectedTabId]:void 0;i&&(i.content&&i.content.classList.add("syc-hidden"),i.label.classList.remove("selected")),t.content&&t.content.classList.remove("syc-hidden"),t.label.classList.add("selected"),t.closeable?this.closeTabButton.classList.remove("syc-hidden"):this.closeTabButton.classList.add("syc-hidden"),this.selectedTabId=t.id,e&&(0,s.dispatchCustomEvent)(this.container,"syc-tab-show",{tabId:t.id})}createTab(t,e,i=!1,n=!0){var o;let a;a="string"==typeof t?{id:t,content:e,closeable:i}:t;const c=new h.Tab(a.id,this,null!==(o=a.content)&&void 0!==o?o:null,a.closeable,a.data);return a.fontIcon&&c.setFontIcon(a.fontIcon),a.tooltip&&c.setTooltip(a.tooltip),this.tabsById[c.id]=c,this.tabs.push(c),this.tabLabelContainer.appendChild(c.label),c.content&&this.tabContents.appendChild(c.content),a.disableFirstShow||1!==this.tabs.length?this.hasMultipleTabContent()&&this.container.classList.add("syc-tab-multiple"):this.showTab(c),n&&(0,s.dispatchCustomEvent)(this.container,"syc-tab-add",{tabId:c.id}),c}getTab(t){if(t){const e=this.tabsById[t];if(e)return e}}hasMultipleTabContent(){let t=0;for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].content&&t++,t>1)return!0;return!1}deleteTab(t,e=!0){const i=this.tabsById[t];if(!i)return;let n;for(delete this.tabsById[t],n=0;n<this.tabs.length;n++)if(this.tabs[n].id===t){this.tabs.splice(n,1);break}return this.tabLabelContainer.removeChild(i.label),i.content&&this.tabContents.removeChild(i.content),this.hasMultipleTabContent()||this.container.classList.remove("syc-tab-multiple"),this.selectedTabId===i.id&&this.tabs.length>0&&this.showTab(this.tabs[n-1]),e&&(0,s.dispatchCustomEvent)(this.container,"syc-tab-remove",{tabId:i.id}),i}isVisible(){return this.size>0}toggle(t=!0,e=!0){return this.size>0?(this.close(t),!1):(this.open(t),!0)}open(t=!0,e=!0){t&&this.container.parentElement?this.contents.classList.add("syc-animation"):this.tabContents.style.overflowY="auto",this.size=this.sizeRatio*this.getMaxSize(),this.updateElementSize(),e&&((0,s.dispatchCustomEvent)(this.container,"syc-panel-resizing",{}),(0,s.dispatchCustomEvent)(this.container,"syc-panel-resize",{}))}close(t=!0,e=!0){t&&this.container.parentElement?this.contents.classList.add("syc-animation"):this.tabContents.style.overflowY="hidden",this.size=0,this.updateElementSize(),e&&((0,s.dispatchCustomEvent)(this.container,"syc-panel-resizing",{}),(0,s.dispatchCustomEvent)(this.container,"syc-panel-resize",{}))}updateSize(t,e){t>=50&&e>=50&&(this.maxWidth=t,this.maxHeigth=e,this.isVisible()&&(this.size=this.sizeRatio*this.getMaxSize()),this.updateElementSize())}updateElementSize(){"top"===this.position||"bottom"===this.position?(this.contents.style.width=this.maxWidth+"px",this.contents.style.height=this.size+"px"):(this.contents.style.width=this.size+"px",this.contents.style.height=this.maxHeigth+"px")}getMaxSize(){switch(this.position){case"bottom":case"top":return this.maxHeigth}return this.maxWidth}attachEvent(){const t=t=>{t.preventDefault();const e=function(t,e){for(;t&&!t.classList.contains(e);)t=t.parentElement;return t}(t.target,"syc-tab-label");if(e){const i=e.getAttribute("syc-tab-id");if(!i)return;const o=this.size,a="left"===this.position||"right"===this.position?"width":"height",h="left"===this.position||"right"===this.position?0:1,c="left"===this.position||"top"===this.position?1:-1,l=this.getMaxSize(),d=this.selectedTabId!==i;let r=!1;const b=this.tabsById[i];d&&this.showTab(this.tabsById[i]);const p=t=>{const e=o+t[h]*c;this.size=e>l-80?l-80:e<0?0:e,0===this.size?this.tabContents.style.overflowY="hidden":this.tabContents.style.overflowY="auto",this.contents.style[a]=this.size+"px",(0,s.dispatchCustomEvent)(this.container,"syc-panel-resizing",{})},m=()=>{!r&&n.getCancelTap()&&(r=!0),p(n.getDragVector())},u="clientX"in t?[t.clientX,t.clientY]:[t.touches[0].clientX,t.touches[0].clientY],v=t=>{b.tooltip&&b.tooltip.hide(),!r&&(Math.abs(t.clientX-u[0])||Math.abs(t.clientY-u[1]))>5&&(r=!0),p([t.clientX-u[0],t.clientY-u[1]])};let y=()=>{r?(this.size>0&&(this.sizeRatio=this.size/l),(0,s.dispatchCustomEvent)(this.container,"syc-panel-resizing",{}),(0,s.dispatchCustomEvent)(this.container,"syc-panel-resize",{})):d||(this.toggle(),b.tooltip&&b.tooltip.hide()),document.removeEventListener("touchend",y),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",m),document.removeEventListener("mousemove",v)};document.addEventListener("touchend",y),document.addEventListener("mouseup",y),document.addEventListener("touchmove",m),document.addEventListener("mousemove",v)}};this.tabLabelContainer.addEventListener("touchstart",t),this.tabLabelContainer.addEventListener("mousedown",t);this.closeTabButton.addEventListener("pointerup",()=>{this.selectedTabId&&this.deleteTab(this.selectedTabId)})}}return function(t){t.Tab=class{constructor(t,e,s,i=!1,n){this.panel=e,this.id=t,this.data=n,s&&(this.content=s,this.content.classList.add("syc-tab-content"),this.content.classList.add("syc-hidden")),this.label=document.createElement("div"),this.label.classList.add("syc-tab-label"),this.label.setAttribute("syc-tab-id",t),this.closeable=i,this.icon=document.createElement("span"),this.icon.className="syc-tab-label-icon";const o=document.createElement("span");o.className="syc-icon-opening",this.icon.appendChild(o);const a=document.createElement("span");a.className="syc-icon-closing",this.icon.appendChild(a),this.label.appendChild(this.icon)}setTooltip(t){if(this.tooltipTitle=t,!i.TouchCompatible&&(this.tooltip&&this.tooltip.destroy(),this.panel&&this.tooltipTitle)){const t=new o({target:a.extendElement(this.label),body:this.tooltipTitle,position:function(t){switch(t){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right";default:throw new Error("Unknown position")}}(this.panel.position),delay:{show:200},trigger:"hover"});this.tooltip=t,this.label.addEventListener("dragenter",()=>t.show()),this.label.addEventListener("dragleave",()=>t.hide()),this.label.addEventListener("dragend",()=>t.hide())}}setIconClassName(t){this.icon&&this.label.removeChild(this.icon),this.icon=document.createElement("span"),this.icon.className="syc-tab-label-icon "+t,this.label.appendChild(this.icon)}setFontIcon(t){this.setIconClassName(`fonticon fonticon-${t}`)}setIconUrl(t){this.icon&&this.label.removeChild(this.icon),this.icon=document.createElement("span"),this.icon.className="syc-tab-label-icon";const e=document.createElement("img");e.setAttribute("src",t),this.icon.appendChild(e),this.label.appendChild(this.icon)}show(){this.panel.showTab(this)}isVisible(){return this.panel.selectedTabId===this.id}remove(){this.panel.deleteTab(this.id)}}}(h||(h={})),h});