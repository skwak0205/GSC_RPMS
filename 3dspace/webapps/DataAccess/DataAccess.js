define("DataAccess/zxExpandTask",[],function(){"use strict";return function(e,t){this.oid=e,this.serverdefinition=t;var n=null;this.generateMQL=function(){return this.serverdefinition.rawmode?this.generateRawMQL():this.generateProcMQL()},this.generateRawMQL=function(){return"start transaction ;\nexpand businessobject  %oid% from relationship PLMInstance recurse to all size 1000 terse select bus physicalid type select relationship id physicalid dump | tcl;\nabort transaction ;\n"},this.generateProcMQL=function(){return'<?xml version="1.0" encoding="utf-8"?>\n<executeSequence xmlns="http://www.3ds.com/xmql/query">\n\t<execute>\n\t\t<function>expand_bus</function>\n\t\t<version>2.0.0</version>\n\t\t<params>\n\t\t\t<param name="label">expand</param>\n\t\t\t<param name="rootid">%oid%</param>\n\t\t\t<param name="from">true</param>\n\t\t\t<param name="to">false</param>\n\t\t\t<param name="typepattern">*</param>\n\t\t\t<param name="relpattern">PLMInstance</param>\n\t\t\t<param name="fixedpointskw"/>\n\t\t\t<param name="fixedpointsids"/>\n\t\t\t<param name="withroots"/>\n\t\t\t<param name="preventduplicates"/>\n\t\t\t<param name="recurselevel">all</param>\n\t\t\t<param name="size">1000</param>\n\t\t\t<param name="terse">true</param>\n\t\t\t<param name="selectbo">["physicalid", "type"]</param>\n\t\t\t<param name="wherebokw"/>\n\t\t\t<param name="wherebo"/>\n\t\t\t<param name="selectrel">["id","physicalid"]</param>\n\t\t\t<param name="dump">|</param>\n\t\t</params>\n\t</execute>\n</executeSequence>\n'};var r=this.generateMQL();this.run=function(i,s,o,c,u){n=i,console.log("running zxxMQLExpandTask");var l=t.xmqlServiceUri(),p=r.replace("%oid%",this.oid);s.executePostHttpRequest(l,t.rawmode,p,function(t){console.log("callback has been called"),new a(e,i,t,function(){c(this)})})},this.dataSet=function(){return n};var i=function(e,t){var n=t,r=new Array;this.setFatherLevel=function(e){var t=r.length-1;if(e>t);else if(e<t){for(var n=t;n!=e;)r.pop(),n-=1;r.pop()}},this.lastNode=function(){return r[r.length-1]},this.pushNode=function(e){r.push(e)},this.pushNode(n.rootNode()),this.registerRelationship=function(e,t){n.registerRelationship(t);var r=n.findNodeByPhysicalId(t.to.phyid);this.pushNode(r)}},a=function(e,t,n,r){var a=new i(e,t),s=function(e){var t=/\{([^\}]*)}/g;e=e.substring(1,e.length-1);var n,r=-1,i=0,s=new Object;s.to=new Object;for(var o=-1;null!==(n=t.exec(e));){var c=n[0].substring(1,n[0].length-1);0===i?(o=c,a.setFatherLevel(o)):1===i?s.plmtype=c:2===i||(3===i?s.to.ident=c:4===i?(c=c.substring(1,c.length),s.to.phyid=c):5===i?(c=c.substring(1,c.length),s.to.plmtype=c):6===i?(c=c.substring(1,c.length),s.ident=c):7===i&&(c=c.substring(1,c.length),s.phyid=c)),i+=1,t.lastIndex===r&&(isILinenfiniteLoop=!0),r=t.lastIndex}var u=a.lastNode();s.from=u,a.registerRelationship(o,s)};!function(e){for(var t,i=/[^\r\n]+/g,a=-1,o=!1;null!==(t=i.exec(n))&&!o;)s(t[0]),i.lastIndex===a&&(o=!0),a=i.lastIndex;r()}()}}}),define("DataAccess/zxMQLSelectTaskDefinition",[],function(){"use strict";return function(e,t,n,r){var i=e,a=t;this.boOrRel=r,this.injectRowInto=n,this.typeRequested=function(){return i},this.attributes=function(){return a},this.marshallAsMQLListOfAttributes=function(){for(var e="",t=0;t<a.length;t++)e=e+" "+a[t];return e},this.marshallAsMQLListAttributesAsJSON=function(){if(0===a.length)throw"no fetch attributes selected";return JSON.stringify(a)}}}),define("DataAccess/zxPLMDataHelper",[],function(){"use strict";return function(e){var t=e,n=t.threedexpServiceUri(),r=function(){return"start transaction ;\nget checkout ticket nozip mcsurl %1 \n store %2 \nbusinessobjectproxy physicalid %3 format %4 filename %5 tcl;\nabort transaction ;\n"},i=function(){return'<?xml version="1.0" encoding="utf-8"?>\n<executeSequence xmlns="http://www.3ds.com/xmql/query">\n\t<execute>\n\t\t<function>get_checkout_ticket</function>\n\t\t<version>2.1.0</version>\n\t\t<params>\n\t\t\t<param name="label">checkout</param>\n\t\t\t<param name="zip">false</param>\n\t\t\t<param name="mcsurl">%1</param>\n\t\t\t<param name="bops">[{"store": "%2", "bops": [{"physicalid": "%3", "format": "%4", "filename": "%5"}]}]</param>\n\t\t</params>\n\t</execute>\n</executeSequence>\n'},a=t.rawmode?r():i();this.transformSelectedSDByRoleAndFormatIntoTicketRequest=function(e,t,n,r,i){return 0==t.indexOf("SDv2")?this.transformSelectedSDv2ByRoleAndFormatIntoTicketRequest(e,t,n,r,i):0==t.indexOf("SDV0")?this.transformSelectedSDv0ByRoleAndFormatIntoTicketRequest(e,t,n,r,i):"E_NOTIMPLEMENTED"},this.transformSelectedSDv0ByRoleAndFormatIntoTicketRequest=function(e,t,n,r,i){var a=l(t),o=c(a,n,r);return s(e,o,i)},this.transformSelectedSDv2ByRoleAndFormatIntoTicketRequest=function(e,t,n,r,i){var a=d(t),o=c(a,n,r);return s(e,o,i)},this.transformSDObjectIntoTicketRequest=function(e){return null!=e.persistancyname&&e.persistancyname.length>2?o(e.phyid,e,e.storeIdentifier,e.persistancyname):s(e.phyid,e,e.storeIdentifier)},this.transformSelectedSDByRoleAndFormatIntoSDObject=function(e,t,n,r,i){var a=null;return 0==t.indexOf("SDv2")?null==(a=this.transformSelectedSDv2ByRoleAndFormatIntoSDObject(e,t,n,r,i))?null:(a.phyid=e,a.storeIdentifier=i,a):0==t.indexOf("SDV0")?null==(a=this.transformSelectedSDv0ByRoleAndFormatIntoSDObject(e,t,n,r,i))?null:(a.phyid=e,a.storeIdentifier=i,a):"E_NOTIMPLEMENTED"},this.transformSelectedSDByRoleAndFormatAndTypeLateIntoSDObjects=function(e,t,n,r,i,a){var s=null;if(void 0!==t){if(0==t.indexOf("SDv2")){if(null==(s=this.transformSelectedSDv2ByRoleAndFormatAndTypeLateIntoSDObjects(e,t,n,r,i,a)))return null;for(var o=0;o<s.length;o++)s[o].phyid=e,s[o].storeIdentifier=a;return s}t.indexOf("SDV0")}else console.log("##WARNING: Does not contain any data or data deleted");return"E_NOTIMPLEMENTED"},this.transformSelectedSDv0ByRoleAndFormatIntoSDObject=function(e,t,n,r,i){var a=l(t);return c(a,n,r)},this.transformSelectedSDv2ByRoleAndFormatIntoSDObject=function(e,t,n,r,i){var a=d(t);return c(a,n,r)},this.transformSelectedSDv2ByRoleAndFormatAndTypeLateIntoSDObjects=function(e,t,n,r,i,a){var s=d(t);return u(s,n,r,i)};var s=function(e,t,r){var i='"'+e+"_"+t.role+"."+t.format+'"';return a.replace("%1",n).replace("%2",r).replace("%3",e).replace("%4",t.format).replace("%5",i)},o=function(e,t,r,i){var s=i.slice(1,i.length-1),o=e+"_"+t.role+"."+t.format+"="+s;return a.replace("%1",n).replace("%2",r).replace("%3",e).replace("%4",t.format).replace("%5",o)},c=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(i.role==t&&i.format==n)return i}return null},u=function(e,t,n,r){for(var i=new Array,a=0;a<e.length;a++){var s=e[a];s.role==t&&s.format==n&&s.latetype==r&&i.push(s)}return i},l=function(e){for(var t,n=/[^:]+/g,r=-1,i=[];null!==(t=n.exec(e));){var a=p(t[0]);i.push(a),n.lastIndex===r&&(isILinenfiniteLoop=!0),r=n.lastIndex}return i},p=function(e){return function(e,t){var n,r=/[^,]+/g,i=-1,a=0,s=new Object;for(s.sdtype=e;null!==(n=r.exec(t));)0===a?s.format=n[0]:1===a?s.role=n[0]:2===a?s.latetype=n[0]:3===a&&(s.watermarkstamp=n[0]),a+=1,r.lastIndex===i&&(isILinenfiniteLoop=!0),i=r.lastIndex;return s}(e.slice(3,4),e.slice(5,e.length-1))};var d=function(e){for(var t,n=/[^:]+/g,r=-1,i=[];null!==(t=n.exec(e));){var a=f(t[0]);i.push(a),n.lastIndex===r&&(isILinenfiniteLoop=!0),r=n.lastIndex}return i},f=function(e){return function(e,t){var n,r=/[^,]+/g,i=-1,a=0,s=new Object;for(s.sdtype=e;null!==(n=r.exec(t));)0===a?s.format=n[0]:1===a?s.role=n[0]:2===a?s.latetype=n[0]:3===a?s.watermarkstamp=n[0]:4===a?s.synchrostamp=n[0]:5===a?s.persistancytype=n[0]:6===a&&(s.persistancyname=n[0]),a+=1,r.lastIndex===i&&(isILinenfiniteLoop=!0),i=r.lastIndex;return s}(e.slice(3,4),e.slice(5,e.length-1))}}}),define("DataAccess/zxTreeTarget",[],function(){"use strict";return function(e,t){var n={},r=e,i=t,a=i("Node");a.ident=r.physicalid,this.rootNode=function(){return a},this.registerRelationship=function(e){var t=this.findNodeByPhysicalId(e.phyid);t.boid=e.ident,t.id=e.phyid,t.plmtype=e.plmtype;var n=this.findNodeByPhysicalId(e.to.phyid);n.boid=e.to.ident,n.id=e.to.phyid,n.plmtype=e.to.plmtype,e.from.add(t),t.add(n)},this.countObjects=function(){var e=0;for(var t in n)n.hasOwnProperty(t)&&e++;return e},this.dumpObjects=function(){for(var e in n)n.hasOwnProperty(e)&&console.log(n[e]);return 0},this.findNodeByPhysicalId=function(e){return void 0===n[e]&&(n[e]=i("Node"),n[e].id=e),n[e]},this.findNodeByType=function(e){var t=new Array;for(var r in n)n[r].plmtype==e&&t.push(n[r]);return t},this.findNodeByPLMTypeExpressedAsPhyIdSeparatedByComma=function(e){var t="";for(var r in n)n[r].plmtype==e&&(""!=t&&(t+=","),t+=n[r].id);return t},this.findNodeByPLMTypeExpressedAsPhyIdAsJSON=function(e){var t=this.findNodeByType(e),n=[];return t.length>0?(t.forEach(function(e,t){n.push(e.id)}),JSON.stringify(n)):[]}}}),define("DataAccess/zxFCSPrepDownloadTaskDefinition",[],function(){"use strict";return function(e){var t=e;this.typeRequested=function(){return t}}}),define("DataAccess/zxDataAccessObjectFactory",[],function(){"use strict";var e=function(){};return e.createServerDefinition2=function(e,t,n,r){var i=new Object;return void 0===e?(console.log("No Hostname in CreateServerDefinition"),null):(i.hostname=e,void 0===t?(console.log("No RootUri in CreateServerDefinition"),null):(i.rooturi=t,i.isSecure=!1,void 0!==n&&n&&(i.isSecure=!0),i.port=-1,void 0!==r&&(i.port=r),i.xmqlServiceUri=function(){var e="http://";this.isSecure&&(e="https://");var t=e+this.hostname;return-1!=this.port&&(t+=":"+this.port),t+="/"+this.rooturi+"/i3dx/services/xmql?raw=true"},i.threedexpServiceUri=function(){var e="http://";this.isSecure&&(e="https://");var t=e+this.hostname;return-1!=this.port&&(t+=":"+this.port),t+="/"+this.rooturi},i))},e.createServerDefinition=function(e,t,n){var r=new Object;return r.hostname=e,r.port=t,r.rooturi=n,r.xmqlServiceUri=function(){return"http://"+this.hostname+":"+this.port+"/"+this.rooturi+"/i3dx/services/xmql?raw=true"},r.threedexpServiceUri=function(){return"http://"+this.hostname+":"+this.port+"/"+this.rooturi},r},e.createDisplayObjectSpecification=function(e,t){var n=new Object;return n.physicalid=e,n.serverdefinition=t,n},e.createDisplayObjectSpecification2=function(e,t){var n=new Object;return n.physicalid=e.identifier,n.use=e.use,n.serverdefinition=t,n},e.createSimLWObjectSpecification=function(e,t){var n=new Object;return n.physicalid=e,n.serverdefinition=t,n},e}),define("DataAccess/zxNode",[],function(){"use strict";return function(){this.add=function(e){}}}),define("DataAccess/zxXHRWithProxyAbstraction",["DS/DataAccess/zxXHRWithProxyAbstraction"],function(e){return console.info("This module is deprecateed. use DS/DataAccess/zxXHRWithProxyAbstraction instead of DataAccess/zxXHRWithProxyAbstraction"),e}),define("DS/DataAccess/zxXHRWithProxyAbstraction",["UWA/Core","UWA/Data","UWA/Utils","UWA/Utils/Client","UWA/Ajax","UWA/Json","DS/WAFData/WAFData"],function(e,t,n,r,i,a,s){"use strict";var o=function(){this.executeGetHttpRequest=function(e,n,r,i){if(2===o.proxyUsage){console.log("gestion WAFData");var a=new Object;a.headers=new Object,a.data=new Object,a.data.GET=r,a.method="GET",a.async=!0,a.onComplete=i,a.type=n;s.authenticatedRequest(e,a)}else{1===o.proxyUsage&&(e=t(e,o.server,o.sport));var c=new XMLHttpRequest;c.open("GET",e,!0),c.onload=function(e){i(this.response)},c.setRequestHeader("X-Requested-With","XMLHttpRequest"),"arraybuffer"===n&&(c.responseType=n),c.send(r)}},this.executePostHttpRequest=function(n,r,i,a){if(2==o.proxyUsage){console.log("gestion WAFData");var c={timeout:1e5,method:"POST",data:i,type:"text",headers:{"Content-type":r,Accept:"text/plain"},onComplete:a,onFailure:function(t){e.log("arguments onFailure"),e.log(arguments)}};o.proxymode&&(c.proxy=o.proxymode);s.authenticatedRequest(n,c)}else{1==o.proxyUsage&&(n=t(n,o.server,o.sport));var u=new XMLHttpRequest;u.open("POST",n),u.onload=function(e){a(this.response)},u.setRequestHeader("Content-type",r),u.setRequestHeader("Accept","text/plain"),u.send(i)}},this.executePostHttpRequest2=function(n,r,i,a,c){if(2==o.proxyUsage){console.log("gestion WAFData");var u={timeout:1e5,method:"POST",data:i,type:"text",headers:{"Content-type":r,Accept:"text/plain"},onComplete:a,onFailure:function(t){e.log("arguments onFailure"),e.log(arguments)}};null!=c.responseType&&(u.type=c.responseType),o.proxymode&&(u.proxy=o.proxymode);s.authenticatedRequest(n,u)}else{1==o.proxyUsage&&(n=t(n,o.server,o.sport));var l=new XMLHttpRequest;l.open("POST",n),l.onload=function(e){a(this.response)},l.setRequestHeader("Content-type",r),l.setRequestHeader("Accept","text/plain"),null!=c.responseType&&(l.responseType=c.responseType),l.send(i)}},this.executeSyncPostHttpRequest=function(e,n,r){if(2==o.proxyUsage){var i;console.log("gestion WAFData");var a={timeout:1e5,method:"POST",data:r,type:"text",async:!1,headers:{"Content-type":n,Accept:"text/plain"},onComplete:function(e){console.warn("retour >data",e),i=e},onFailure:function(e){console.log("arguments onFailure"),console.log(arguments)}};o.proxymode&&(a.proxy=o.proxymode);s.authenticatedRequest(e,a);return i}1==o.proxyUsage&&(e=t(e,o.server,o.sport));var c=new XMLHttpRequest;return c.open("POST",e,!1),c.setRequestHeader("Content-type",n),c.setRequestHeader("Accept","text/plain"),c.send(r),c.responseText},this.transformUrlIntoRealUrl=function(e){if(2==o.proxyUsage){console.log("gestion WAFData");new Object;return e}return 1==o.proxyUsage?e=t(e,o.server,o.sport):e},this.asyncTransformFCSUrlIntoRealUrl=function(e,t,n){var r=e.indexOf("v23"),i=e.slice(3,r),a=e.slice(r+3,e.length),s="application/xml";"boolean"==typeof t&&t&&(s="application/xmql"),this.executePostHttpRequest(i,s,a,function(e){var t=/\{\{([^\}]*)\}\{([^\}]*)\}\}/.exec(e),r=t[1],i="posthttp:"+t[2]+":postparams:__fcs__jobTicket="+encodeURIComponent(r);n(i)})};var t=function(e,t,n){var r=e.indexOf("/"),i=e.indexOf("/",r+2);return e.slice(0,r)+"//"+t+":"+n+e.slice(i,e.length)}};return o.useNoProxy=function(){o.proxyUsage=0,o.server=null,o.sport=null},o.useProxyDefinedBy=function(e,t){o.proxyUsage=1,o.server=e,o.sport=t},o.useUWAProxy=function(e){o.proxyUsage=2,o.server=null,o.sport=null,o.proxymode=e},o}),define("DataAccess/zxTaskPlanner",[],function(){"use strict";return function(){var e=new Array,t=0,n=null;this.addSequentialTask=function(t){var n=new Array;n.push(t),e.push(n)},this.addEndingTask=function(e){n=e},this.endingTask=function(){return n},this.next=function(){return t<e.length?e[(t+=1)-1]:null},this.resetIterator=function(){t=0},this.tasksCount=function(){return e.length},this.currentTaskIndex=function(){return t}}}),define("DataAccess/zxTicketGeneratorTask",[],function(){"use strict";return function(e,t){var n=e,r=t;this.generateUrl=function(){return"fcs"+r.xmqlServiceUri()+"v23"+n}}}),define("DataAccess/zxStreamUnStreamerTaskDefinition",[],function(){"use strict";return function(e,t,n){var r=e;this.streamReceived=t,this.streamNumber=n,this.responseType=null,this.typeRequested=function(){return r}}}),define("DataAccess/zxSelectTask",[],function(){"use strict";return function(e,t){var n=e,r=t,i=function(e,t,n,r){var i=e,a=t,s=function(e,t){var n=/\{([^\}]*)}/g;t=t.substring(1,t.length-1);for(var r,s=-1,o=new Array;null!==(r=n.exec(t));)0==r[0].indexOf("{{")&&(r[0]=r[0].substring(2,r[0].length)),0==r[0].indexOf("{")&&(r[0]=r[0].substring(1,r[0].length)),r[0].indexOf("}")==r[0].length-1&&(r[0]=r[0].substring(0,r[0].length-1)),o.push(r[0]),n.lastIndex===s&&(isILinenfiniteLoop=!0),s=n.lastIndex;i.injectRowInto(o,a)};!function(e){for(var t,a=/[^\r\n]+/g,o=-1,c=!1;null!==(t=a.exec(n))&&!c;)s(i,t[0]),a.lastIndex===o&&(c=!0),o=a.lastIndex;r()}()},a=function(){var e="start transaction ;\n";return 0==n.boOrRel?e+="query connection type %1  where \"physicalid matchlist '%2'','\"  select %3 dump | tcl;\n":e+="temporary query businessobject  %1 * *  where \"physicalid matchlist '%2'','\"  select %3 dump | tcl;\n",e+="abort transaction ;\n"},s=function(){var e='<?xml version="1.0" encoding="utf-8"?>\n';return e+='<executeSequence xmlns="http://www.3ds.com/xmql/query">\n',e+="\t<execute>\n",0==n.boOrRel?e+="\t\t<function>query_connection</function>\n":e+="\t\t<function>query_bus</function>\n",e+="\t\t<version>2.2.1</version>\n",e+="\t\t<params>\n",e+='\t\t\t<param name="label">select</param>\n',0!=n.boOrRel&&(e+='\t\t\t<param name="name">*</param>\n',e+='\t\t\t<param name="revision">*</param>\n'),e+='\t\t\t<param name="vault">*</param>\n',e+='\t\t\t<param name="orderbykw"/>\n',e+='\t\t\t<param name="orderby"/>\n',e+='\t\t\t<param name="limitkw"/>\n',e+='\t\t\t<param name="limit"/>\n',e+='\t\t\t<param name="rootids">[]</param>\n',e+="\t\t\t<param name=\"where\">physicalid matchlist '%2'','</param>\n",e+='\t\t\t<param name="select">%3</param>\n',e+='\t\t\t<param name="type">%1</param>\n',e+='\t\t\t<param name="notsubstitute">false</param>\n',e+='\t\t\t<param name="dump">|</param>\n',e+="\t\t</params>\n",e+="\t</execute>\n",e+="</executeSequence>\n"},o=r.rawmode?a():s();this.run=function(e,t,a,s,c){var u=r.xmqlServiceUri(),l=n.typeRequested(),p=e.findNodeByPLMTypeExpressedAsPhyIdAsJSON(l),d=o.replace("%1",l);d=(d=(d=d.replace("%4",p)).replace("%3",n.marshallAsMQLListAttributesAsJSON())).replace("%2",e.findNodeByPLMTypeExpressedAsPhyIdSeparatedByComma(n.typeRequested())),t.executePostHttpRequest(u,r.rawmode,d,function(t){new i(n,e,t,function(){s(this)})})}}}),define("DataAccess/zxPlanRunner",["DS/DataAccess/zxXHRWithProxyAbstraction"],function(e){"use strict";return function(t,n,r,i,a){var s=n,o=t,c=new function(){this.executePostHttpRequest=function(t,n,r,i){var a="application/xml";"boolean"==typeof n&&n&&(a="application/xmql"),(new e).executePostHttpRequest(t,a,r,i)}},u=function(e){if(null!==r){var n=t.currentTaskIndex()/t.tasksCount()*100;r(n)}console.log("onNextTask");var i=t.next();null==i?l():i[0].run(s,c,r,u,a)},l=function(){console.log("----------------Finished--------\x3e");var e=t.endingTask()(s);i(e)};this.executePlan=function(){console.log("Beginning zxPlanRunner runPlan"),o.next()[0].run(s,c,null,u,null),console.log("Ending zxPlanRunner runPlan")}}}),define("DataAccess/zxStreamUnstreamerTask",["DS/DataAccess/zxXHRWithProxyAbstraction"],function(e){"use strict";return function(t,n){var r=t,i=n;this.run=function(t,n,a,s,o){for(var c=new e,u=t.findNodeByType(r.typeRequested()),l=0;l<u.length;l++){var p=new Array;if(null!=u[l].ticketRequest)p.push(u[l].ticketRequest);else if(null!=u[l].ticketRequests)for(var d=u[l].ticketRequests,f=0;f<d.length;f++)p.push(d[f]);if(r.streamNumber(p.length),!window.ODTNoFCSCalls)for(var h=p.length,m=0;m<p.length;m++){var v=p[m].generateUrl();c.asyncTransformFCSUrlIntoRealUrl(v,i.rawmode,function(e){if("posthttp"==e.slice(0,8)){var t=e.indexOf(":postparams:"),n=e.slice(9,t),i=e.slice(t+12,e.length),a=new Object;null!=r.responseType&&(console.log("registering otherParams reponsetype "+r.responseType),a.responseType=r.responseType),c.executePostHttpRequest2(n,"application/x-www-form-urlencoded",i,function(e){r.streamReceived(e),0==(h-=1)&&s(this)},a)}})}(window.ODTNoFCSCalls||0===p.length)&&s(this)}}}}),define("DataAccess/zxFCSPrepDownloadTask",["DataAccess/zxPLMDataHelper","DataAccess/zxTicketGeneratorTask"],function(e,t){"use strict";return function(n,r){var i=n,a=r,s=null;this.run=function(n,r,o,c,u){s=n;for(var l=new e(a),p=(a.xmqlServiceUri(),i.typeRequested()),d=s.findNodeByType(p),f=0;f<d.length;f++)if(null!=d[f].sdObject){var h=l.transformSDObjectIntoTicketRequest(d[f].sdObject);d[f].ticketRequest=new t(h,a)}else if(null!=d[f].sdObjects){for(var m=d[f].sdObjects,v=new Array,x=0;x<m.length;x++){h=l.transformSDObjectIntoTicketRequest(m[x]);var y=new t(h,a);v.push(y)}d[f].ticketRequests=v}c(this)}}}),define("DataAccess/zxDOSRunner",["DataAccess/zxTreeTarget","DataAccess/zxPlanRunner","DataAccess/zxTaskPlanner","DataAccess/zxExpandTask","DataAccess/zxMQLSelectTaskDefinition","DataAccess/zxSelectTask","DataAccess/zxPLMDataHelper","DataAccess/zxTicketGeneratorTask","DataAccess/zxFCSPrepDownloadTaskDefinition","DataAccess/zxFCSPrepDownloadTask","DataAccess/zxStreamUnStreamerTaskDefinition","DataAccess/zxStreamUnstreamerTask"],function(e,t,n,r,i,a,s,o,c,u,l,p){"use strict";return function(o,d){var f,h,m=(f=o,h=new Object,void 0===f.serverdefinition.hostname?null:(h.hostname=f.serverdefinition.hostname,void 0===f.serverdefinition.rooturi?null:(h.rooturi=f.serverdefinition.rooturi,h.isSecure=!1,void 0!==f.serverdefinition.protocol&&"https"===f.serverdefinition.protocol&&(h.isSecure=!0),h.port=-1,void 0!==f.serverdefinition.port&&(h.port=f.serverdefinition.port),h.rawmode=!1,h.xmqlServiceUri=function(){var e="http://";this.isSecure&&(e="https://");var t=e+this.hostname;return-1!=this.port&&(t+=":"+this.port),t+="/"+this.rooturi+"/i3dx/services/xmql","boolean"==typeof h.rawmode&&h.rawmode&&(t+="?raw=true"),t},h.threedexpServiceUri=function(){var e="http://";this.isSecure&&(e="https://");var t=e+this.hostname;return-1!=this.port&&(t+=":"+this.port),t+="/"+this.rooturi},f.serverdefinition=h,f))),v=new e(m,d),x=null,y=null,S=null,g=d;this.run=function(e,n,r){x=e,y=n,S=r;var i=(new D).buildPlan(m);new t(i,v,x,y,S).executePlan()};var D=function(){this.buildPlan=function(e){console.log("---\x3ezxDOSPlanifier:Beginning BuildPlan");var t=new n,o=new r(e.physicalid,e.serverdefinition);t.addSequentialTask(o);var d=new Array;d.push("physicalid"),d.push("attribute[LPAbstractInstance.V_matrix_1]"),d.push("attribute[LPAbstractInstance.V_matrix_2]"),d.push("attribute[LPAbstractInstance.V_matrix_3]"),d.push("attribute[LPAbstractInstance.V_matrix_4]"),d.push("attribute[LPAbstractInstance.V_matrix_5]"),d.push("attribute[LPAbstractInstance.V_matrix_6]"),d.push("attribute[LPAbstractInstance.V_matrix_7]"),d.push("attribute[LPAbstractInstance.V_matrix_8]"),d.push("attribute[LPAbstractInstance.V_matrix_9]"),d.push("attribute[LPAbstractInstance.V_matrix_10]"),d.push("attribute[LPAbstractInstance.V_matrix_11]"),d.push("attribute[LPAbstractInstance.V_matrix_12]");var f=new i("VPMInstance",d,function(e,t){var n=t.findNodeByPhysicalId(e[1]),r=g("Matrix");r.set(e[2],e[5],e[8],1e3*e[11],e[3],e[6],e[8],1e3*e[12],e[4],e[7],e[10],1e3*e[13],0,0,0,1),n.setMatrix(r)},0),h=new a(f,e.serverdefinition);t.addSequentialTask(h);var m=new Array;m.push("physicalid"),m.push("attribute[StreamDescriptors]"),m.push("format.file.store");var v=new s(e.serverdefinition),x=new i("3DShape",m,function(e,t){var n=t.findNodeByPhysicalId(e[3]),r=v.transformSelectedSDByRoleAndFormatIntoSDObject(e[3],e[4],"''","2",e[5]);n.sdObject=r},1),y=new a(x,e.serverdefinition);t.addSequentialTask(y);var S=new c("3DShape"),D=new u(S,e.serverdefinition);if(t.addSequentialTask(D),"Structure.Review"==e.use){var A=new i("Review",m,function(e,t){var n=t.findNodeByPhysicalId(e[3]),r=v.transformSelectedSDByRoleAndFormatIntoSDObject(e[3],e[4],"''","1",e[5]);n.sdObject=r},1),w=new a(A,e.serverdefinition);t.addSequentialTask(w);var b=new c("Review"),T=new u(b,e.serverdefinition);t.addSequentialTask(T);var R=new l("Review",function(e){console.log("Specs::blob received length of "+e.length)},function(e){console.log("Specs::numberTotalOfStreams To receive:"+e)}),P=new p(R,e.serverdefinition);t.addSequentialTask(P)}return t.addEndingTask(function(e){return{rootNode:e.rootNode(),geometryNodes:e.findNodeByType("3DShape")}}),console.log("---\x3ezxDOSPlanifier:Beginning BuildPlan Done"),t}}}}),define("DataAccess/zxSimuliaLightweightRunner",["DS/DataAccess/zxSimuliaLightweightRunner"],function(e){return console.info("This module is deprecateed. use DS/DataAccess/zxSimuliaLightweightRunner instead of DataAccess/zxSimuliaLightweightRunner"),e}),define("DS/DataAccess/zxSimuliaLightweightRunner",["DataAccess/zxTaskPlanner","DataAccess/zxPlanRunner","DataAccess/zxTreeTarget","DataAccess/zxExpandTask","DataAccess/zxNode","DataAccess/zxMQLSelectTaskDefinition","DataAccess/zxSelectTask","DataAccess/zxPLMDataHelper","DataAccess/zxFCSPrepDownloadTaskDefinition","DataAccess/zxFCSPrepDownloadTask","DataAccess/zxStreamUnStreamerTaskDefinition","DataAccess/zxStreamUnstreamerTask","DS/VisuDataAccess/Ox4TypeHelper"],function(e,t,n,r,i,a,s,o,c,u,l,p,d){"use strict";return function(f,h,m,v){var x=f.serverurl;if(!x){var y=f.serverdefinition.port;x=f.serverdefinition.protocol+"://"+f.serverdefinition.hostname+(y?":"+y:"")+"/"+f.serverdefinition.rooturi}d.InitWithUrl(x,f.tenant,f.requiredAuth,f.proxyurl);var S,g,D=(S=f,g=new Object,void 0===S.serverdefinition.hostname?null:(g.hostname=S.serverdefinition.hostname,void 0===S.serverdefinition.rooturi?null:(g.rooturi=S.serverdefinition.rooturi,g.isSecure=!1,void 0!==S.serverdefinition.protocol&&"https"===S.serverdefinition.protocol&&(g.isSecure=!0),g.port=-1,void 0!==S.serverdefinition.port&&(g.port=S.serverdefinition.port),g.rawmode=!1,g.xmqlServiceUri=function(){var e="http://";this.isSecure&&(e="https://");var t=e+this.hostname;return-1!=this.port&&(t+=":"+this.port),t+="/"+this.rooturi+"/i3dx/services/xmql","string"==typeof S.tenant&&(t+="?tenant="+S.tenant),"boolean"==typeof g.rawmode&&g.rawmode&&(t+="?raw=true"),t},g.threedexpServiceUri=function(){var e="http://";this.isSecure&&(e="https://");var t=e+this.hostname;return-1!=this.port&&(t+=":"+this.port),t+="/"+this.rooturi},S.serverdefinition=g,S))),A=null,w=null,b=null,T=h,R=v,P=m,q=new n(D,function(e){if("Node"===e)return new i});this.run=function(e,n,r){console.log("---\x3e Entering zxSimLWRunner"),A=e,w=n,b=r,(new I).buildPlan(D,function(e){null!==e?new t(e,q,A,w,b).executePlan():b({msg:"Connection failed"})})};var I=function(){this.buildPlan=function(t,n){console.log("---\x3ezxSimLWTaskPlanner:Beginning BuildPlan"),console.log(t),console.log(t.physicalid),d.GetParentsBusType("DesignSight",function(i){if(i){var d=new e,f=new r(t.physicalid,t.serverdefinition);d.addSequentialTask(f);var h=new Array;h.push("physicalid"),h.push("attribute[StreamDescriptors]"),h.push("format.file.store");var m=new o(t.serverdefinition),v=new a("dsc_Result_Rep",h,function(e,t){for(var n=t.findNodeByPhysicalId(e[3]),r=m.transformSelectedSDByRoleAndFormatAndTypeLateIntoSDObjects(e[3],e[4],"'EXTENDED'","2","CATNonCATIADocument",e[5]),i=new Array,a=0;a<r.length;a++)T(r[a].persistancyname)&&i.push(r[a]);n.sdObjects=i},1),x=new s(v,t.serverdefinition);d.addSequentialTask(x);var y=new c("dsc_Result_Rep"),S=new u(y,t.serverdefinition);d.addSequentialTask(S);var g=new l("dsc_Result_Rep",R,P);g.responseType="arraybuffer";var D=new p(g,t.serverdefinition);d.addSequentialTask(D),d.addEndingTask(function(e){return{rootNode:null,geometryNodes:null}}),console.log("---\x3ezxSimLWRunner:Beginning BuildPlan Done"),n(d)}else n(null)})}}}});