define("DS/IPClassifyNav/models/xNavNodeModel",["DS/Tree/TreeNodeModel","DS/WebappsUtils/WebappsUtils","i18n!DS/IPClassifyNav/assets/nls/IPClassifyNav.json","DS/PADServices/utils/AttributesMgtV2"],function(e,t,i,o){"use strict";var n={label:"",icons:[],grid:{},padgrid:{},resourceid:"",type:"",relationid:"",relationtype:"",relationOrder:-1,did:"",relcount:null,isPADHidden:!1,padstate:"collapsed",children:[],thumbnail:null,useAsyncPreExpand:!0,contextualMenu:[{type:"SeparatorItem"}]};function s(s){if(this.options=UWA.clone(n),s&&s.grid){this.options.subLabel=s.grid["ds6w:responsible"],this.options.description=s.grid["ds6w:identifier"],this.options.thumbnail=s.thumbnail?s.thumbnail:t.getWebappsAssetUrl("PADUtils","icons/32/I_DefaultThumbnail.png");var a=s.grid["ds6w:reserved"]?s.grid["ds6w:reserved"]:s.padgrid&&s.padgrid["ds6w:reserved"]?s.padgrid["ds6w:reserved"]:null;if(null!==a)if("boolean"==typeof a?a:"TRUE"===a.toUpperCase())this._isLockedByMe(s)?(this.options.statusbarIcons=["key"],this.options.statusbarIconsTooltips=[i.tooltip_reserved]):(this.options.statusbarIcons=["lock"],this.options.statusbarIconsTooltips=[i.tooltip_reserved]);else this.options.statusbarIcons=["lock-open"],this.options.statusbarIconsTooltips=[i.tooltip_unreserved]}s&&UWA.is(s.relcount)&&0===s.relcount&&(s.children=null),this.options.acceptNodeDropAt=function(e,t){return this.isRoot()?0===t:-1===t||1===t},this.options=UWA.extend(this.options,s),this.options.relationOrder||(this.options.relationOrder=-1),this.options.grid||(this.options.grid={}),this.options.grid.instanceName&&(console.warn("xNavNodeModel: Please use ds6w:label-Instance instead of instanceName"),this.options.grid["ds6w:label-Instance"]=this.options.grid.instanceName,delete this.options.grid.instanceName);for(var r=this.options,l=o.getColumnsOrder(),d=Object.keys(r.grid),c=0;Array.isArray(l)&&c<l.length;c++)"tree"!==l[c]&&-1===d.indexOf(l[c])&&(r.grid[l[c]]=void 0);var p=o.getAdditionalColumns();for(c=0;Array.isArray(p)&&c<p.length;c++)r.grid&&void 0===r.grid[p[c]]&&(r.grid[p[c]]="");e.call(this,this.options)}return s.prototype=Object.create(e.prototype),s.prototype.getOccurencePath=function(e){if(UWA.is(e,"function")&&e(this),!this.isRoot()&&this.getParent()){var t=this.getParent().getOccurencePath(e);return t.push(this.options.relationid),t.push(this.options.resourceid),t}return[this.options.resourceid]},s.prototype.getOccurencePathWithType=function(){if(!this.isRoot()&&this.getParent()){var e=this.getParent().getOccurencePathWithType();return e.push({resourceid:this.options.relationid,type:this.options.relationtype}),e.push({resourceid:this.options.resourceid,type:this.options.type}),e}return[{resourceid:this.options.resourceid,type:this.options.type}]},s.prototype.getNodeByPath=function(e,t,i,o){if(("number"!=typeof t||t<0)&&(t=0),("number"!=typeof i||i<0||i>=e.length)&&(i=e.length-1),this.options.resourceid instanceof Array&&this.options.resourceid.indexOf(e[t])>=0||this.options.resourceid===e[t]){if(t!==i&&(this.isExpanded()||this.childComputed||void 0!==o&&!1!==o)){var n=e[t+1],s=this.getChildren();if(s&&0!==s.length){for(var a=null,r=0;r<s.length&&null===a;r++){var l=s[r];n===l.options.relationid&&(a=l)}return null===a?this:a.getNodeByPath(e,t+2,i,o)}return this}return this}},s.prototype.getID=function(){return this.options.resourceid},s.prototype.getRelationID=function(){return!0===this.options.nonPSNode?null:this.options.relationid},s.prototype.setRelationID=function(e,t){this.options.relationid=e,this.options.relationtype=t},s.prototype.getNodesById=function(e){var t={listOfFoundNodes:[]};return this._getNodesById(e,t),t.listOfFoundNodes},s.prototype._removeFilterInfo=function(){delete this.options._filterInfo},s.prototype._removeChildrenFilterInfo=function(){delete this.options._childrenFilterInfo},s.prototype._getFilterInfo=function(e){return!this.options._filterInfo&&Boolean(e)&&(this.options._filterInfo={}),this.options._filterInfo},s.prototype._getChildrenFilterInfo=function(e){return!this.options._childrenFilterInfo&&Boolean(e)&&(this.options._childrenFilterInfo={}),this.options._childrenFilterInfo},s.prototype._getNodesById=function(e,t){var i=!1;if(this.getID()===e)t.listOfFoundNodes.push(this),i=!0;else{var o=this.getChildren();if(o)for(var n=0;o&&n<o.length;n++)i="function"==typeof o[n]._getNodesById&&o[n]._getNodesById(e,t)||i}return i},s.prototype._isLockedByMe=function(e){var t=!0,i=e.grid["ds6w:reservedBy"]?e.grid["ds6w:reservedBy"]:e.padgrid&&e.padgrid["ds6w:reservedBy"]?e.padgrid["ds6w:reservedBy"]:"",o=e.grid["ds6w:displayName"]?e.grid["ds6w:displayName"]:e.padgrid&&e.padgrid["ds6w:displayName"]?e.padgrid["ds6w:displayName"]:"",n=require("DS/PADUtils/PADUtilsServices"),s=n.getUserLogin()?n.getUserLogin():"",a=n.getUserName()?n.getUserName():"";t=!0;return i.trim().length>0?(t=i.toUpperCase().trim()===s.toUpperCase().trim()||!1)||(t=i.toUpperCase().trim()===a.toUpperCase().trim()||!1):o.trim().length>0&&(t=a.toUpperCase().trim()===o.toUpperCase().trim()||!1),t},s.prototype.updateNlsAttributes=function(e){var t={};for(var i in e)for(var o in t.grid||(t.grid={}),e[i])this.options.grid[i]===o&&(t.grid[i]=e[i][o]);t.grid=UWA.extend(this.options.grid,t.grid,!0),this.updateOptions(t)},s.prototype.getDepth=function(){for(var e=this,t=0;!e.isRoot();)e=e.getParent(),t++;return t},s.prototype.getLeaves=function(){var e=[];return this.processDescendants({processNode:function(){!1===this.hasChildren()&&e.push(this)}}),e},s.prototype.getAttribute=function(e){var t;return this.options.grid[e]&&(t=this.options.grid[e]),t},s.prototype.updateOptions=function(o){if(o.grid){this.options.thumbnail||o.thumbnail||(o.thumbnail=t.getWebappsAssetUrl("PADUtils","icons/32/I_DefaultThumbnail.png")),o.subLabel=o.grid["ds6w:responsible"]?o.grid["ds6w:responsible"]:this.options.grid&&this.options.grid["ds6w:responsible"]?this.options.grid["ds6w:responsible"]:"",o.description=o.grid["ds6w:identifier"]?o.grid["ds6w:identifier"]:this.options.grid&&this.options.grid["ds6w:identifier"]?this.options.grid["ds6w:identifier"]:"";var n=o.grid["ds6w:reserved"]?o.grid["ds6w:reserved"]:o.padgrid&&o.padgrid["ds6w:reserved"]?o.padgrid["ds6w:reserved"]:null;if(null!==n)if("boolean"==typeof n?n:"TRUE"===n.toUpperCase())this._isLockedByMe(o)?(this.options.statusbarIcons=["key"],this.options.statusbarIconsTooltips=[i.tooltip_reserved]):(this.options.statusbarIcons=["lock"],this.options.statusbarIconsTooltips=[i.tooltip_reserved]);else o.statusbarIcons=["lock-open"],o.statusbarIconsTooltips=[i.tooltip_unreserved]}this.options.edit&&(o.edit=this.options.edit),e.prototype.updateOptions.call(this,o)},s.prototype.getPLMValue=function(e){var t=null;return o.getTreeColumn()===e?t=this.getLabel():void 0!==this.options.grid[e]?t=this.options.grid[e]:this.options.padgrid&&void 0!==this.options.padgrid[e]&&(t=this.options.padgrid[e]),t},s.prototype.isNONPSNode=function(){return!!this.options.nonPSNode&&this.options.nonPSNode},s}),define("DS/IPClassifyNav/commands/view/_xNavSelectAll",[],function(){"use strict";return{execute:function(e){e.xnav_app;var t=e.model,i=t.getRoots();if(i.length){t.prepareBroadcastSelect(),t.prepareUpdate(),t._selected_paths=[];var o=[];i.forEach(function(e){e.select(),e.processDescendants({processNode:function(){this.isVisible()&&o.push(this)}})}),t.multiselect(o),t.pushUpdate(),t.pushBroadcastSelect()}}}}),define("DS/IPClassifyNav/commands/xNavActionBarCmds",["DS/ApplicationFrame/Command","DS/PADUtils/PADContext","DS/PADUtils/PADUtilsServices","DS/PADServices/utils/PADTrackerManager","DS/PADUtils/PADSettingsMgt"],function(e,t,i,o,n){"use strict";var s=["ExpandAll","CollapseAll","ExpandN","SelectChildren","SelectParent","SelectSiblings","SelectLeaves","ReframeOn"],a=["ReframeAll","ReframeOn","ToggleOverview","LayoutDown","LayoutRight","LayoutUp","LayoutLeft","SwapThumbState"],r=["RootPanel","Home","Print","PrintOptions","ExportCSV","ExportCSVOptions","CleanAll"],l=["Print","PrintOptions","ExportCSV","ExportCSVOptions"],d=["ExpandAll","CollapseAll","ExpandN"],c=["Print","ExportCSV","CleanAll"],p=["Print","PrintOptions","ExportCSV","ExportCSVOptions"];function u(e,t){return-1!==e.indexOf(t)}return e.extend({init:function(e){this._parent(e);var o=this,n=(v=t.get()).options.model?v.options.model:v.getPADTreeDocument();if(i.isMobileDevice()&&-1!==p.indexOf(this.options.ID))this.disable();else if(-1!==s.indexOf(this.options.ID)&&-1!==a.indexOf(this.options.ID)){this._check_view(!0),v.addEvent("onToggleView",function(){o._check_view(!0)});try{n.getXSO().onPostAdd(function(){o._check_view(!0)}),n.getXSO().onPostRemove(function(){o._check_view(!0)}),n.getXSO().onEmpty(function(){o._check_view(!0)})}catch(e){console.log(e)}}else if(-1!==s.indexOf(this.options.ID)){this._check_select();try{n.getXSO().onPostAdd(this._check_select.bind(this)),n.getXSO().onPostRemove(this._check_select.bind(this)),n.getXSO().onEmpty(this._check_select.bind(this))}catch(e){console.log(e)}}else if(-1!==a.indexOf(this.options.ID))this._check_view(),v.addEvent("onToggleView",this._check_view.bind(this));else if(-1!==r.indexOf(this.options.ID)){this._check_roots();var d=this._check_roots.bind(this);n.addEventListener("addChild",d),n.addEventListener("removeChild",d),u(l,this.options.ID)&&(this._check_roots(),v.addEvent("onRootsVisibility",this._check_roots.bind(this)))}else if(c.indexOf(this.options.ID)&&-1!==c.indexOf(this.options.ID)){this._parent(e);var v;n=(v=t.get()).options.model?v.options.model:v.getPADTreeDocument();this.disable(),v.getPADTreeDocument().getModelEvents().subscribe({event:"onRootAdded"},this._check_added_roots.bind(this))}},execute:function(){var e=this,i=t.get(),n=i.options.model?i.options.model:i.getPADTreeDocument();switch(this.options.ID){case"treelistview":case"graphview":case"tileview":case"thumbnailview":case"treeview":require(["DS/IPClassifyNav/commands/_xNavSwitchView"],function(t){t.execute({command_id:e.options.ID,xnav_app:i})});break;case"SelectAll":require(["DS/IPClassifyNav/commands/view/_xNavSelectAll"],function(e){e.execute({xnav_app:i,model:n})});break;case"SelectInversion":require(["DS/IPClassifyNav/commands/view/_xNavSelectInversion"],function(e){e.execute({xnav_app:i,model:n})});break;case"SelectSiblings":require(["DS/IPClassifyNav/commands/view/_xNavSelectSiblings"],function(e){e.execute({xnav_app:i,model:n})});break;case"ReframeAll":case"ReframeOn":case"ToggleOverview":case"LayoutDown":case"LayoutRight":case"LayoutUp":case"LayoutLeft":case"SwapThumbState":break;default:throw new Error("Unknown command")}var s=o.getPADTracker({eventCategory:"usage",eventAction:"command-2D"});s.setEventData({eventLabel:this.options.ID}),s.trackPageEvent()},_check_roots:function(){t.get().getPADTreeDocument().getRoots().length>0?this.enable():this.disable()},_check_added_roots:function(e){t.get().getPADTreeDocument();0===e.data.nb_root?this.disable():this.enable()},_check_select:function(){try{if(!0===!!t.get().getPADTreeDocument().getXSO().get().length){var e=t.get().getPADTreeDocument().getXSO().get();u(d,this.options.ID)&&!function(e){for(var t=0,i=0;i<e.length;i++)null!==e[i].getChildren()&&t++;return t>0}(e)?this.disable():this.enable(),this.enable()}else this.disable()}catch(e){console.log(e)}},_check_view:function(e){if(!0===e)try{var i=!!t.get().getPADTreeDocument().getXSO().get().length;"graphview"===t.get().options.active_view&&!0===i?this.enable():this.disable()}catch(e){console.log(e)}else{switch(t.get().options.active_view){case"tileview":case"thumbnailview":t.get().getPADTreeDocument()._pagerview&&t.get().getPADTreeDocument()._pagerview.hide();break;case"treelistview":case"graphview":t.get().getPADTreeDocument()._pagerview&&t.get().getPADTreeDocument()._pagerview.show()}"graphview"===t.get().options.active_view?this.enable():this.disable()}}})}),define("DS/IPClassifyNav/commands/_xNavSwitchView",[],function(){"use strict";return{execute:function(e){e.xnav_app.toggleView(e.command_id)}}}),define("DS/IPClassifyNav/views/xNavResponsiveTilesView",["UWA/Controls/Abstract","UWA/Core","UWA/Class/Options","UWA/Class/Events","DS/ApplicationFrame/CommandsManager","DS/CollectionView/ResponsiveTilesCollectionView"],function(e,t,i,o,n,s){"use strict";return e.extend(i,o,{name:"xNavResponsiveTileView",defaultOptions:{grid:null,model:null},init:function(e){this._parent(e),this.options=UWA.extend(this.options,e,!0),this.elements.container=UWA.createElement("div",{class:this.getClassNames()});var t=UWA.extend(e,{height:"inherit",displayedOptionalCellProperties:["contextualMenu","statusbarIcons","activeFlag"],useDragAndDrop:!0,allowUnsafeHTMLContent:!1},!0),i=this.options.grid=new s(t);e.onContextualEvent&&(i.onContextualEvent=e.onContextualEvent),i.getContent().inject(this.elements.container),this.getOption("renderTo")&&!0===e.isActiveView&&this.elements.container.inject(this.getOption("renderTo")),i.onCellsCopy(function(e){n.getCommand("Copy").begin()}),i.onCellsPaste(function(e){n.getCommand("Paste").begin()}),i.onCellsCut(function(e){n.getCommand("Cut").begin()}),UWA.is(i.onCellsEscape,"function")&&i.onCellsEscape(function(e){n.getCommand("Uncut").begin()}),i.selectionBehavior=UWA.extend({enableFeedbackForActiveCell:!0},i.selectionBehavior),i.onPostCellRequest(function(e){e.nodeModel&&e.nodeModel.options.isBeingCut?e.cellView.getContent().addClassName("pad-state-is-being-cut"):e.cellView.getContent().removeClassName("pad-state-is-being-cut")})},setModel:function(e){this.options.model=e,this.options.grid.loadGridViewModel(e),this.elements.container.inject(this.getOption("renderTo")),this.options.isActiveView=!0,this.options.grid.layout.invalidate(),null!==e.options.viewport.thumbnails&&void 0!==e.options.viewport.thumbnails&&this.options.grid.setScrollerPosition(e.options.viewport.thumbnails)},unsetModel:function(){this.getScrollerPosition&&(this.options.model.options.viewport.thumbnails=this.getScrollerPosition()),this.getOption("renderTo").removeChild(this.elements.container),this.options.isActiveView=!1,this.options.grid.unloadGridViewModel()},updateView:function(){this.options.grid.layout.invalidate({updateCellContent:!0})}})}),define("DS/IPClassifyNav/views/xNavGraphView",["css!DS/IPClassifyNav/IPClassifyNav","UWA/Core","UWA/Controls/Abstract","UWA/Class/Options","UWA/Class/Events","DS/etree/syncwidget","css!egraph/views","css!etree/syncviews","css!DS/etree/overviewui.css"],function(e,t,i,o,n,s,a,r){}),define("DS/IPClassifyNav/utils/xNavCustoStorageOptim",["UWA/Core","DS/PADUtils/PADSettingsMgt"],function(e,t){"use strict";var i={dataIndex:void 0,text:void 0,isDraggable:!0,width:150,minWidth:10,maxWidth:999,visibleFlag:!0,isHidden:!1,isSortable:void 0,type:void 0,isAdditionalColumn:void 0,xnav_options:{name:void 0,dataIndex:void 0,tree:void 0,hardcoded:void 0,exportable:{lock:!1,value:!0},layout:{removable:void 0,hidden:void 0,width:150,minWidth:void 0,maxWidth:void 0},kind:void 0}},o={dataIndex:void 0,text:void 0,isDraggable:!0,width:150,minWidth:10,maxWidth:999,visibleFlag:void 0,sortableFlag:void 0,pinned:void 0,kind:void 0,isAdditionalColumn:void 0,customisation:{layout:{width:200,minWidth:100,maxWidth:300,removable:!0,pinEditable:!0},exportable:{lock:!1,value:!0},titleModified:void 0}};function n(e,t){var i={};if(void 0===t)i=e;else for(var o=Object.getOwnPropertyNames(e),s=0;s<o.length;s++)if(UWA.is(e[o[s]],"object")){var a=n(e[o[s]],t[o[s]]);Object.getOwnPropertyNames(a).length>0&&(i[o[s]]=a)}else e[o[s]]!==t[o[s]]&&"text"!==o[s]&&(i[o[s]]=e[o[s]]);return i}function s(e,t,i){var o={};if(void 0===e)o=t;else{for(var n=Object.getOwnPropertyNames(t),a=Object.getOwnPropertyNames(e),r=0;r<n.length;r++)if(UWA.is(t[n[r]],"object")){if("bi_color"!==i){var l=s(e[n[r]],t[n[r]],i);Object.getOwnPropertyNames(l).length>0&&(o[n[r]]=l)}}else void 0===e[n[r]]?o[n[r]]=t[n[r]]:o[n[r]]=e[n[r]];for(var d=0;d<a.length;d++)void 0===o[a[d]]&&(o[a[d]]=e[a[d]])}return o}return{convertCusto4Preference:function(e,s,a){var r={custoOptimized:!0,viewMode:e.viewMode,defaultCellHeight:e.defaultCellHeight,rowsHeader:e.rowsHeader,selectedTypes:e.selectedTypes,selectedExtensions:e.selectedExtensions,columnsOptimized:[],lang:t.getSetting("lang")};"treelistview"===a?r.custoFromTree=!0:"datagridview"===a&&(r.custoFromDGV=!0);for(var l=0;l<e.columns.length;l++){var d=e.columns[l],c=i;if("datagridview"===a&&(c=o),"ContextualMenuColumn"!==d.dataIndex){var p=n(d,c);s&&s[d.dataIndex]&&(p.text=d.text),r.columnsOptimized.push(p)}else r.ctxMenuColumn={pinned:d.pinned,columnIdx:d.columnIdx}}return r},convertPreference2Custo:function(n,a){var r={viewMode:n.viewMode,defaultCellHeight:n.defaultCellHeight,rowsHeader:n.rowsHeader,selectedTypes:n.selectedTypes,selectedExtensions:n.selectedExtensions,columns:[],ctxMenuColumn:n.ctxMenuColumn};n.custoFromTree||"treelistview"===a?r.custoFromTree=!0:"datagridview"===a&&(r.custoFromDGV=!0),n.lang&&n.lang!==t.getSetting("lang")&&function(e){for(var t=0;t<e.columnsOptimized.length;t++){var i=e.columnsOptimized[t];i.xnav_options&&i.xnav_options.titleModified&&(delete i.text,delete i.xnav_options.titleModified)}}(n);for(var l=0;l<n.columnsOptimized.length;l++){var d=n.columnsOptimized[l],c=i;"datagridview"===a&&(c=o);var p=s(d,e.clone(c),d.dataIndex);r.columns.push(p)}return r}}}),define("DS/IPClassifyNav/XNavComponent",["css!DS/IPClassifyNav/IPClassifyNav","i18n!DS/PADUtils/assets/nls/PADUtils.json","i18n!DS/IPClassifyNav/assets/nls/IPClassifyNav.json","UWA/Core","UWA/Controls/Abstract","UWA/Class/Options","UWA/Class/Events","DS/Core/Core","DS/UIKIT/Mask","DS/Utilities/Utils","DS/PADUtils/views/PADFilterCancel","text!DS/IPClassifyNav/assets/templates/XNavComponent.html","DS/PADUtils/views/PADAlert","DS/PADUtils/PADPromise","DS/PADUtils/PADSession","DS/PADUtils/PADTypesMgt","DS/PADUtils/PADSettingsMgt","DS/PADServices/utils/Storage","DS/PADServices/utils/GlobalModelEvents"],function(e,t,i,o,n,s,a,r,l,d,c,p,u,v,h,g,m,f,w){"use strict";function D(e,t){var i=this;require(["DS/IPClassifyNav/views/ViewLoader"],function(o){var n={component:i,x3dAppId:i.options.x3dAppId,renderTo:e.renderTo,amd:{treelistview:i.options.amd_custo.TreeListView,graphview:i.options.amd_custo.TreeGraph,tileview:i.options.amd_custo.TileGridView,thumbnailview:i.options.amd_custo.ThumbnailGridView,datagridview:i.options.amd_custo.DataGridView}};i.loader=new o(n),i.loader.loadView(i.options.active_view,function(){"graphview"===i.options.active_view&&i.options.views.graphview.reframeOn(),t()})})}return n.extend(s,a,{_dispatchReady_NotDone:!0,defaultOptions:{widget:null,elements:null,active_view:"treelistview",action_bar_opts:null,toolbar_opts:null,layout:{padshell:!1,title_update:!0,view_customization:null,store_roots_in_pref:!0,statusInfo:!0,drop_invite:"dynamic",keyboard_inputs:!0,withWelcomePanel:!1,triptychOpts:{left:{resizable:!0,originalState:"close",overMobile:!0,minWidth:300,withClose:!0},withtransition:!0,withoverflowhidden:!0,right:{resizable:!0,originalState:"close",overMobile:!0,minWidth:250,withClose:!1}},amdTreeView:"datagridview"},amd_custo:{TreeDocument:"DS/IPClassifyNav/models/xNavDocument",TreeListView:"DS/IPClassifyNav/views/xNavTreeListView",TreeGraph:"DS/IPClassifyNav/views/xNavGraphView",TileGridView:"DS/IPClassifyNav/views/xNavResponsiveTilesView",ThumbnailGridView:"DS/IPClassifyNav/views/xNavResponsiveThumbnailsView",DataGridView:"DS/IPClassifyNav/views/xNavDataGridView"},views:{treelistview:null,graphview:null,tileview:null,thumbnailview:null,datagridview:null},views_cb:{},isReady:{model:!1,actionbar:!1,treelistview:!1,graphview:!1,tileview:!1,thumbnailview:!1}},_probes:{},init:function(e){this._parent(e),this.options=o.extend(this.options,e,!0),this.elements.container=o.createElement("div",{class:"IPClassifyNav_component"}),this.options.flags={};var t=this;require(["DS/PADUtils/PADUtilsServices","DS/PADUtils/PADCommandProxy","DS/PADUtils/PADProbes","DS/PADUtils/PADWebInWinServices"],function(e,n,s,a){t._probes.probe_init=s.createProbe("init_xnavcomponent"),t.options.loadGraphSection=m.getSetting("loadGraphSection"),a.initialize({widget:widget}),widget&&widget.lang&&m.setSetting("lang",widget.lang),e.app_initialization(function(a){a&&!0===a.success?function(){t._commandProxy=n.create({events:{onDrop:function(i,o){e.updatePlatformId(i.tenant);var n=!0!==i.already_added_in_PS;o.originWidgetId&&(n=!0!==i.already_added_in_PS||o.originWidgetId!==e.getWidgetId()&&!0===m.getSetting("activateFUN076708")),n&&t.add({content:void 0===i.paths?"idslist":"pathslist",paths:void 0===i.paths?void 0:i.paths,pids:void 0===i.pids?void 0:i.pids,filters:i.filters,loadWithFilter:i.loadWithFilter,callback:null,broadcast:!1})},onRemove:function(e){t._onRemoveRoot(e)},onCleanAll:function(){t.empty(!1)},onRefreshModel:function(){o.is(t.refresh,"function")&&t.refresh(!1)}}}),!0!==m.getSetting("removeDetachRoot")&&t._commandProxy.addProxyEvents({onDetach:function(e){t.detachRoots(e)},onAttach:function(e){t.attachRoots(e)}}),t._probes.probe_model=s.createProbe("init_xnav_model"),function(e){var t=this,i={},n=v.getPromises(),s=n.slice(),a=new Promise(function(n){Promise.all(s).then(function(){require([t.options.amd_custo.TreeDocument],function(s){if((i=function(e){var t=this,i={};return e.forEach(function(e){o.is(t.options.views_cb[e],"function")?i[e]=t.options.views_cb[e]:o.is(t[e],"function")&&(i[e]=t[e].bind(t))}),i}.call(t,["doDnDDragStart","shouldAcceptDnDDrop","doDnDDrop"])).authorize_setStructure=t.options.authorize_setStructure,i.insert_replace=t.options.insert_replace,i.renderTo=t.options.renderTo,i.insert_replace=t.options.insert_replace,t.options.additionalColumnsModules){i.additionalColumnsModules=t.options.additionalColumnsModules;for(var a=require("DS/PADServices/utils/AttributesMgtV2"),r=0;r<t.options.additionalColumnsModules.length;r++)a.addAsyncAttributes(t.options.additionalColumnsModules[r].getManagedColumnNames())}t.options.model=new s(i),t.options.model.getModelEvents().subscribe({event:"titleRecalc"},function(e){t.setWidgetTitle(e.data)});var l=[],c=d.debounce(function(){t._commandProxy.remove({pids:l});var e=t.options.model,i=e.getRoots().length;o.is(e.detachedRoots,"array")&&(i+=e.detachedRoots.length),i||t.dropInvitContainer.show("drop"),t._onRemoveRoot({pids:l}),e&&e._pagerview&&(e._pagerview.hide(),e._pagerview=null),l=[]},250);t.options.model.getModelEvents().subscribe({event:"onRemoveRoot"},function(e){l.push(e.data.pid),c()}),t.options.model.getModelEvents().subscribe({event:"onCenterGraph"},function(e){t.options.views.treelistview?t.options.views.treelistview.getManager().scrollToNode(e.data,void 0,!1):t.options.views.datagridview.options.dgv.ensureNodeModelVisible(e.data),t.options.views.graphview&&t.options.views.graphview.reframeOn()}),t.options.model.getModelEvents().subscribe({event:"onRootAdded"},function(e){if(0!==e.data.nb_root?t.dropInvitContainer.hide():t.dropInvitContainer.show("drop"),o.is(widget)&&!0===t.getOption("layout").title_update){var i=t.getWidgetTitle();if(t.options.widget.setTitle(i),i){var n={TitleInfo:i};t._commandProxy.padRefresh(n)}}if(w.publish({event:"ENXModel/Root/manage",data:e.data}),t.getOption("layout").store_roots_in_pref&&t.dispatchEvent("onSaveRoots"),e.data.added_node&&!1===t.options.layout.withWelcomePanel){var s=e.data.added_node.getID();t.dispatchEvent("onAddPaths",{addedPaths:[[s]]})}}),t.options.model.addEventListener("beginBlockingTransaction",function(e){t.beginBlockingTransaction(e.data)}),t.options.model.addEventListener("endBlockingTransaction",function(){t.endBlockingTransaction()}),document.addEventListener("keyup",function(e){27===e.keyCode&&(t.options.model.originalSelection?delete t.options.model.originalSelection:(t.options.model.unselectAll(),t.uncut&&t.uncut.call(t)))}),document.addEventListener("keypress",function(e){if(!0===t.options.layout.keyboard_inputs){var i=t.options.model;require(["UWA/Event"],function(o){var n=o.whichKey(e);if("ctrl+a"===n&&i.withBroadcastSelect(function(){i.selectAll()}),"/"===n){var s=t.getSelectedNodes();s&&s.length>0&&s.forEach(function(e){e.collapseAll()})}if("shift+*"===n){var a=t.getSelectedNodes();a&&a.length>0&&a.forEach(function(e){e.expandAll()})}})}}),t.options.isReady.model=!0,t._probes.probe_model.end(),e&&e(),n()})})});a.name="build",n.push(a)}.call(t),t._probes.probe_view=s.createProbe("init_xnav_views"),function(){var e=this;e.elements.container.innerHTML=p;var t=v.getPromises(),i=t.slice(),n=new Promise(function(t,n){Promise.all(i).then(function(i){var n=[],s=new Promise(function(t,i){e.options.action_bar_opts||(e.options.isReady.actionbar=!0,t())});s.name="action bar",n.push(s);var a=e.elements.container.querySelector(".xnav_body");if(require(["DS/PADUtils/views/PADDnDInvite"],function(t){e.dropInvitContainer=new t({renderTo:e.elements.container,mode:e.options.layout.drop_invite,dropOnInvite:o.is(e.dropOnInvite,"function")?e.dropOnInvite.bind(e):void 0})}),!0===e.options.layout.statusInfo){var r=new Promise(function(t){require(["DS/PADUtils/views/PADStatusInfos"],function(i){e.elements.padstatus=new i({withProgress:!0,events:{onShow:function(){var t=require("DS/PADUtils/PADUtilsServices");e.elements.padstatus.setStatus(i.buildStatus({Tenant:t.getPlatformId(),tree_content:{nbObjectsInTree:e.options.model.getAllDescendants().length,nbObjectsSelected:e.options.model.getSelectedNodes().length}}))}}}),t()})});r.name="status Infos",n.push(r)}var l=new Promise(function(t,i){!0===e.options.layout.padshell?require(["DS/ENOXTriptych/js/ENOXTriptych"],function(i){var n,s=o.createElement("div",{class:"xnav_viewmain"}),a=o.clone(e.options.layout.triptychOpts);a.container=e.elements.container.querySelector(".xnav_body"),n=o.createElement("div",{class:"xnav_viewright rightSidePanel"}),e.elements.padshell=new i,e.elements.padshell.init(a,e.createRootListSlidder2(),s,n),e.elements.padshell.togglePanel=function(t){"left"===t?e.elements.padshell._modelEvents.publish({event:"triptych-toggle-panel",data:"left"}):(e.elements.padshell._modelEvents.publish({event:"triptych-toggle-panel",data:"right"}),e.elements.padshell._modelEvents.subscribe({event:"triptych-clicked-overlay"},function(e){e&&"right"===e&&w.publish({event:"onOverlayClick"})}))},e.elements.padshell.openPanel=function(t){e.elements.padshell._modelEvents.publish({event:"triptych-show-panel",data:t})},w.publish({event:"on2DTriptychReady"}),require(["DS/ApplicationFrame/CommandsManager"],function(e){var t=e.getCommandCheckHeader("RootPanel");t&&t.addCallback()}),D.call(e,{renderTo:s},t)}):D.call(e,{renderTo:e.elements.container.querySelector(".xnav_body")},t)});l.name="slidder",n.push(l);var d=new Promise(function(i,o){Promise.all(n).then(function(o){!0===e.options.isReady[e.options.active_view]&&e._probes.probe_view.end(),e.elements.padstatus&&(!0===e.options.layout.padshell?e.elements.padstatus.inject(e.elements.padshell.getMainPanelContainer()):e.elements.padstatus.inject(a)),t(),i()})});d.name="promiseResolve",n.push(d)})});n.name="buildSkeleton",t.push(n)}.call(t);var a=v.getPromises(),r=a.slice(),l=new Promise(function(e){Promise.all(r).then(function(){t.options.model.getVisibleAdditionalColumns=function(e){var i=[];if(t.options.views.treelistview)var n=t.getPADTreeListView().getManager();else n=t.options.views.datagridview;if(t.options.additionalColumnsModules&&t.options.additionalColumnsModules.length)for(var s=0;s<t.options.additionalColumnsModules.length;s++){for(var a=[],r=t.options.additionalColumnsModules[s],l=r.getManagedColumnNames(),d=0;d<l.length;d++)!0===e?o.is(n.isColumnExportable,"function")&&n.isColumnExportable(l[d])&&a.push(l[d]):o.is(n.isColumnHidden,"function")&&!n.isColumnHidden(l[d])&&a.push(l[d]);(a.length||!0===r.alwaysUpdate)&&i.push({module:r,columns:a})}return i},t.options.model.forceSyncModel4TreeListView=function(){"treelistview"===t.options.active_view&&t.options.views.treelistview.getManager().syncModel(!1)};var n=function(){t.options.views.treelistview&&(t.options.views.treelistview.previousClick.idClicked="",t.options.views.treelistview.previousClick.date="")};t.options.model.getXSO().onPostRemove(n),t.options.model.getXSO().onEmpty(n),t.options.views.treelistview&&t.options.views.treelistview.getManager().onHeavyDataColumnModelRequest(t.updateAttributesDelayed.bind(t)),t._dispatchReady(!0),w.subscribe({event:"ENXModel/Expand/expandStatus"},function(e){e.status&&!0===e.status.expandTooLarge&&u.displayNotification({msg:i.expandTooLarge,eventID:"warning"})}),e()})});l.name="dispatchReady",a.push(l)}():t._initialize_failure(function(){t.dispatchEvent("onReady",{error:!0})})})})},render:function(){return this.elements.container},toggleView:function(e){if("treeview"===e&&(e=this.options.layout.amdTreeView),e!==this.options.active_view){var t=this;this.loader.loadView(e,function(){t.options.views[t.options.active_view].unsetModel(),t.options.active_view=e,t.options.model.applyActiveView(t.options.active_view),t.options.views[t.options.active_view].setModel(t.options.model),t.dispatchEvent("onToggleView",t.options.active_view)})}},beginBlockingTransaction:function(e){l.mask(this.elements.container,e)},endBlockingTransaction:function(){l.unmask(this.elements.container)},onResize:function(){this.options.model.invalidateViewPort(),"graphview"===this.options.active_view&&this.options.views.graphview.setSize(),"minimized"===widget.getView().type?this._biFilter&&this._biFilter.deactivate():this._biFilter&&this._biFilter.activate(),this.dispatchEvent("onParentResize")},getPADTreeDocument:function(){return this.options.model},getRoots:function(){return this.options.model.getRoots()},getPADDGVView:function(){return this.options.views.datagridview},getPADTreeListView:function(){return console.warn("getPADTreeListView Deprecated: use getDGVView instead"),this.getDGVView()},getSelectedNodes:function(){return this.options.model.getSelectedNodes()},getMainHTMLClass:function(){return".xnav_body"},attachRoots:function(e){this.manageAttach(e)},detachRoots:function(e){this.manageDetach(e)},togglePanel:function(e,t){this.options.views.treelistview&&this.options.views.treelistview.padModalElement&&this.options.views.treelistview.padModalElement.close(),(this.elements.padshell?this.elements.padshell:this.elements.padinfo).togglePanel(e,t)},openPanel:function(e){this.elements.padshell.openPanel(e)},destroy:function(){var e=require("DS/PADUtils/PADUtilsServices");this._commandProxy.padDestroy({widgetId:e.getWidgetId()}),this._commandProxy.destroy(),this.options.model._commandProxy.destroy()},_dispatchReady:function(e){this._dispatchReady_NotDone&&!0===this.options.isReady.model&&!0===this.options.isReady.actionbar&&!0===this.options.isReady[this.options.active_view]&&(this.dispatchEvent.call(this,"onReady",{addInView:e}),this._probes.probe_init.end(),this._dispatchReady_NotDone=!1)},displayNotification:function(e){require(["DS/PADUtils/views/PADAlert"],function(t){t.displayNotification(e)})},getCurrentView:function(){return this.options.active_view},updateCurrentView:function(){this.options.views[this.options.active_view].updateView()},updateAttributesDelayed:function(e){var t=this;d.debounce(function(e){var i=e.displayNodesArray;if(void 0===i&&e&&e.collectionView&&e.collectionView.model){var o=e.collectionView;i=void 0!==e.startNodeIndex&&void 0!==e.endNodeIndex?o.model.slice(e.startNodeIndex,e.endNodeIndex+1):o.model}if(i.length){for(var n=[],s=0;s<i.length;s++)i[s]._canBeGrouped()&&n.push(i[s]);t.options.additionalColumnsModules&&t.options.additionalColumnsModules.length&&t.options.model.fillAttributesAsync4VisibleNodes(n,t.options.additionalColumnsModules),t.colorMap&&t.options.model.updateColorForNodes(n,t.colorMap,t.predicateKind);for(var a=require("DS/PADUtils/PADPredicatesNls"),r=0,l=n.length;r<l;r++)!0===n[r]._manageNLS&&a.updateNLS(n[r])}},200)(e)},getWidgetTitle:function(){var e=require("DS/PADUtils/PADUtilsServices"),i=e.getPlatformId(),o=e.getTenantsPreference(),n=this.getRoots(),s="";if(0===n.length)s="";else if(1===n.length){s=n[0].getLabel(),o.length>1&&(s+=" - "+i)}else s=n.length+t.multi_root_tile,o.length>1&&(s+=" - "+i);return s},setWidgetTitle:function(e){function t(e,t,o){var s=e||"";o&&(s=o+" - "+s),(t="OnPremise"===n.getTenantID()?"":t)&&(s+=" ("+t+")"),i._label=e,widget.setTitle(s)}var i=this,n=require("DS/WidgetServices/WidgetServices"),s=require("DS/PADUtils/PADUtilsServices"),a=n.getTenantID(),r=s.getTenantsPreference().filter(function(e){return e.value===a})[0];r=r?r.label:a;var l=widget.getPreference("pad_security_ctx").value;i._csName&&i._currentSC===l?t(e,r,i._csName):require(["DS/PADUtils/PADWSAccess","DS/PADUtils/PADSecurityCtxConverter"],function(n,s){n.getscandcollab({tenant:a,onComplete:function(n){(o.is(n,"string")?JSON.parse(n):n).collabspaces.forEach(function(e){l.endsWith("."+e.name)&&(i._currentSC=l,i._csName=e.title.trim())}),t(e,r,i._csName)},onFailure:function(e){}})})},_onRemoveRoot:function(e){var t=this,i=v.getPromises(),o=i.slice(),n=new Promise(function(i,n){Promise.all(o).then(function(o){w.publish({event:"ENXModel/Root/remove",data:{pids:e.pids,noDispatch:!0}}),0===t.options.model.getRoots().length&&t.dispatchEvent("onEmptyView"),t.getOption("layout").store_roots_in_pref&&t.dispatchEvent("onDeleteRoots",JSON.stringify(e.pids)),i()})});return n.name="removeroot",i.push(n),!1}})}),define("DS/IPClassifyNav/commands/view/_xNavSelectInversion",[],function(){"use strict";return{execute:function(e){e.xnav_app;var t=e.model,i=t.getRoots(),o=[],n=[];i.length&&(t.prepareBroadcastSelect(),t.prepareUpdate(),i.forEach(function(e){e.isSelected()?n.push(e):o.push(e),e.processDescendants({processNode:function(){this.isSelected()?n.push(this):o.push(this)}})}),t.multiunselect(n),t.multiselect(o),t.pushUpdate(),t.pushBroadcastSelect())}}}),define("DS/IPClassifyNav/views/xNavInitError",["css!DS/PADUtils/PADUtils","i18n!DS/PADUtils/assets/nls/PADUtils.json","UWA/Core","UWA/Controls/Abstract","UWA/Class/Options"],function(e,t,i,o,n){}),define("DS/IPClassifyNav/views/ViewLoader",["UWA/Class","UWA/Promise"],function(e,t){"use strict";var i={treelistview:"treelistview",graphview:"graphview",tileview:"tileview",thumbnailview:"thumbnailview",datagridview:"datagridview"};Object.freeze(i);var o=["onDragEnterBlank","onDragOverBlank","onDragEndBlank","onDragLeaveBlank","onDropBlank","onDragStartCell","onDragEnterCell","onDragOverCell","onDragEndCell","onDragLeaveCell","onDropCell","onDragEnterColumnHeader","onDragOverColumnHeader","onDragEndColumnHeader","onDragLeaveColumnHeader","onDropColumnHeader","onDragStartColumnHeader"],n=["onDragEnterBlank","onDragOverBlank","onDragEndBlank","onDragLeaveBlank","onDropBlank","onDragStartCell","onDragEnterCell","onDragOverCell","onDragEndCell","onDragLeaveCell","onDropCell","onDragEnterColumnHeader","onDragOverColumnHeader","onDragEndColumnHeader","onDragLeaveColumnHeader","onDropColumnHeader","onDragStartColumnHeader"],s=["onDragEnterBlank","onDragOverBlank","onDragEndBlank","onDragLeaveBlank","onDropBlank","onDragStartCell","onDragEnterCell","onDragOverCell","onDragEndCell","onDragLeaveCell","onDragStartRowHeader","onDragEndRowHeader","onDragEnterRowHeader","onDragLeaveRowHeader","onDragRowHeader","onDragOverRowHeader","onDropRowHeader","onDropCell","onDragEnterColumnHeader","onDragOverColumnHeader","onDragEndColumnHeader","onDragLeaveColumnHeader","onDropColumnHeader","onDragStartColumnHeader"];return e.extend({init:function(e){this.options=e},loadView:function(e,t){var i=this;this.options.component.options.views[e]?t():this.buildOptions(e,t).then(function(o){i.requireView(e,o,t)})},requireView:function(e,t,o){var n=this,s=this.options.amd[e],a=function(){n.postLoad(e),e!==i.treelistview&&o&&o()};require([s],function(o){var s=n.options.component;s.options.views[e]=new o(t),e===i.datagridview?s.options.views[e].initialize().then(function(){a()}):a()})},postLoad:function(e){var t=this.options.component;switch(t.options.views[e].isActiveView=t.options.active_view===e,e){case i.thumbnailview:t.options.views.thumbnailview.isActiveView&&t.options.views.thumbnailview.setModel(t.options.model),t.options.isReady.thumbnailview=!0;break;case i.datagridview:t.options.views.datagridview.isActiveView&&(t.options.views.datagridview.setModel(t.options.model),t.options.views.datagridview.options.dgv.onDragStartRowHeader=function(e,i){t.onDragStartRowHeader(e,i)},t.options.views.datagridview.options.dgv.onDropRowHeader=function(e,i){t.onDropRowHeader(e,i)}),t.options.isReady.datagridview=!0;break;case i.tileview:t.options.views.tileview.isActiveView&&t.options.views.tileview.setModel(t.options.model),t.options.isReady.tileview=!0}t.options.model.applyActiveView(e)},buildOptions:function(e,t){switch(e){case i.tileview:return this._buildTileViewOptions();case i.thumbnailview:return this._buildThumbnailViewOptions();case i.datagridview:return this._builddatagridViewOptions();default:throw new Error("Invalid View Trying to load")}},mapCallbacks:function(e,t){var i=t,o={};return e.forEach(function(e){UWA.is(i.options.views_cb[e],"function")?o[e]=i.options.views_cb[e]:UWA.is(i[e],"function")&&(o[e]=i[e].bind(i))}),o},_buildTileViewOptions:function(){var e=this;return new t(function(t,i){var n=e.options.component,s={x3dAppId:e.options.x3dAppId,renderTo:e.options.renderTo};s.active_view=UWA.clone(n.options.active_view),s.isActiveView="tileview"===s.active_view;var a=e.mapCallbacks(o,n);s=UWA.extend(s,a,!0),UWA.is(n.getOnContextualEvent)&&(s.onContextualEvent=n.getOnContextualEvent()),t(s)})},_buildThumbnailViewOptions:function(){var e=this;return new t(function(t,i){var o=e.options.component,s={x3dAppId:e.options.x3dAppId,renderTo:e.options.renderTo};s.active_view=UWA.clone(o.options.active_view),s.isActiveView="thumbnailview"===s.active_view;var a=e.mapCallbacks(n,o);s=UWA.extend(s,a,!0),UWA.is(o.getOnContextualEvent)&&(s.onContextualEvent=o.getOnContextualEvent()),t(s)})},_builddatagridViewOptions:function(){var e=this;return new t(function(t,i){var o=e.options.component,n={x3dAppId:e.options.x3dAppId,renderTo:e.options.renderTo,context:o};n.active_view=UWA.clone(o.options.active_view),n.isActiveView="datagridview"===n.active_view,n.view_customization=o.options.layout.view_customization,n.callbacks=e.mapCallbacks(s,o),o.options.additionalColumnsModules&&(n.additionalColumnsModules=o.options.additionalColumnsModules),n.onTenantChange=function(e){o.dispatchEvent("onTenantChange",e)},t(n)})}})}),define("DS/IPClassifyNav/views/xNavResponsiveThumbnailsView",["UWA/Controls/Abstract","UWA/Core","UWA/Class/Options","UWA/Class/Events","DS/CollectionView/ResponsiveThumbnailsCollectionView","DS/ApplicationFrame/CommandsManager"],function(e,t,i,o,n,s){"use strict";return e.extend(i,o,{name:"xNavResponsiveThumbnailView",defaultOptions:{grid:null,model:null},init:function(e){this._parent(e),this.options=UWA.extend(this.options,e,!0),this.elements.container=UWA.createElement("div",{class:this.getClassNames()});var t=UWA.extend(e,{height:"inherit",displayedOptionalCellProperties:["contextualMenu","statusbarIcons","activeFlag"],useDragAndDrop:!0,allowUnsafeHTMLContent:!1},!0),i=this.options.grid=new n(t);e.onContextualEvent&&(i.onContextualEvent=e.onContextualEvent),this._originalApplyAttributes=i._applyAttributesOnCell.bind(i),i._applyAttributesOnCell=this._applyAttributesOnCell.bind(this),i.getContent().inject(this.elements.container),this.getOption("renderTo")&&!0===e.isActiveView&&this.elements.container.inject(this.getOption("renderTo")),i.onCellsCopy(function(e){s.getCommand("Copy").begin()}),i.onCellsPaste(function(e){s.getCommand("Paste").begin()}),i.onCellsCut(function(e){s.getCommand("Cut").begin()}),UWA.is(i.onCellsEscape,"function")&&i.onCellsEscape(function(e){s.getCommand("Uncut").begin()}),i.selectionBehavior=UWA.extend({enableFeedbackForActiveCell:!0},i.selectionBehavior),i.onPostCellRequest(function(e){e.nodeModel&&e.nodeModel.options.isBeingCut?e.cellView.getContent().addClassName("pad-state-is-being-cut"):e.cellView.getContent().removeClassName("pad-state-is-being-cut")})},setModel:function(e){this.options.model=e,this.options.grid.loadGridViewModel(e),this.elements.container.inject(this.getOption("renderTo")),this.options.isActiveView=!0,this.options.grid.layout.invalidate(),null!==e.options.viewport.thumbnails&&void 0!==e.options.viewport.thumbnails&&this.options.grid.setScrollerPosition(e.options.viewport.thumbnails)},unsetModel:function(){this.getScrollerPosition&&(this.options.model.options.viewport.thumbnails=this.getScrollerPosition()),this.getOption("renderTo").removeChild(this.elements.container),this.options.isActiveView=!1,this.options.grid.unloadGridViewModel()},updateView:function(){this.options.grid.layout.invalidate({updateCellContent:!0})},_applyAttributesOnCell:function(e){var t=e;void 0===e.nodeModel&&(t.nodeModel=this.options.grid._getModelAt(e.cellID),t.cellView=this.options.grid._getViewAt(e.cellID)),t.nodeModel.options.isBeingCut?t.cellView.getContent().addClassName("pad-state-is-being-cut"):t.cellView.getContent().removeClassName("pad-state-is-being-cut"),this._originalApplyAttributes(e)}})}),define("DS/IPClassifyNav/models/Algos",[],function(){}),define("DS/IPClassifyNav/views/customize_views/_xNavDGVUtils",["DS/PADServices/utils/AttributesMgtV2","DS/PADServices/utils/GlobalUtils","DS/PADServices/utils/DictionaryAccess","DS/WebappsUtils/WebappsUtils","i18n!DS/IPClassifyNav/assets/nls/IPClassifyNav"],function(e,t,i,o,n){"use strict";function s(e){}s.prototype.buildColumns=function(t){return new Promise(function(t,o){var n=[],s=0,a=e.getColumnsOrder(void 0);e.updateAttributesWithKind(void 0).then(function(){for(s=0;s<a.length;s++){var o=e.getColumn(a[s],void 0);o&&n.push(this.buildColumnFromSetting(o))}var r=UWA.clone(n);i.updateColumnsWithNLS(r,function(e){var i={};i.columns=r,"success"===e.status&&(i.columns=e.columns),t(i)})}.bind(this)).catch(o)}.bind(this))},s.prototype.buildColumnFromSetting=function(e){var i=Object.assign({minWidth:50,editableFlag:!1,customisation:{exportable:{lock:!1,value:!0}}},e);if(!UWA.is(i.dataIndex)){if(!UWA.is(i.ds6w))throw new Error("Wrong column definition for ["+JSON.stringify(e)+"]");i.dataIndex=i.ds6w}switch(-1!==["hide_show","find_in_ctx"].indexOf(i.dataIndex)&&(i.customisation=UWA.extend(i.customisation,{exportable:{lock:!0,value:!1}})),i.kind&&("timestamp"===i.kind||"dateTime"==i.kind?i.typeRepresentation="datetime":i.typeRepresentation||(i.typeRepresentation=i.kind)),i.typeRepresentation||(i.typeRepresentation="string"),i.dataIndex){case"ds6w:cadMaster":i.typeRepresentation="image",i.alignment="center",i.getCellValue=function(e){if(!0!==e.isHeader&&e&&e.nodeModel&&e.nodeModel.options.grid)return{iconPath:e.nodeModel.options.grid["ds6w:cadMaster"]?a.get(e.nodeModel.options.grid["ds6w:cadMaster"]):a.get("3DEXPERIENCE"),iconSize:{height:"22px"}}},i.getCellValueForExport=function(e){var t="";return e&&e.nodeModel&&e.nodeModel.options.grid&&e.nodeModel.options.grid["ds6w:cadMaster"]&&(t=e.nodeModel.options.grid["ds6w:cadMaster"]),t};break;case"thumbnail":i.ds6w=void 0,i.alignment="center",i.typeRepresentation="image",i.sortableFlag=!1;break;case"tree":i.getCellKPIColor=function(e){if(!e.isHeader&&e.nodeModel){if(e.nodeModel.options.color)return e.nodeModel.options.color;if(e.nodeModel.options.grid.bi_color)return e.nodeModel.options.grid.bi_color}};break;case"hide_show":break;case"ds6w:reserved":i.alignment="center",i.typeRepresentation="functionIcon",i.getCellSemantics=function(e){if(!e.isHeader)return function(e){var i=!1,o=e.nodeModel.options.grid["ds6w:reserved"]?e.nodeModel.options.grid["ds6w:reserved"]:e.nodeModel.options.padgrid["ds6w:reserved"]?e.nodeModel.options.padgrid["ds6w:reserved"]:"";if(void 0!==o){var n=e.nodeModel.options.grid["ds6w:reservedBy"]?e.nodeModel.options.grid["ds6w:reservedBy"]:e.nodeModel.options.padgrid["ds6w:reservedBy"]?e.nodeModel.options.padgrid["ds6w:reservedBy"]:"",s=e.nodeModel.options.grid["ds6w:displayName"]?e.nodeModel.options.grid["ds6w:displayName"]:e.nodeModel.options.padgrid["ds6w:displayName"]?e.nodeModel.options.padgrid["ds6w:displayName"]:"";i="boolean"==typeof o?o:"TRUE"===o.toUpperCase();var a="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-key dgvpad_lock";if(a)if(i){var r=t.getUserLogin(),l=t.getUserName(),d=!0;n.trim().length>0?(d=n.toUpperCase().trim()===r.toUpperCase().trim()||!1)||(d=n.toUpperCase().trim()===l.toUpperCase().trim()||!1):s.trim().length>0&&(d=l.toUpperCase().trim()===s.toUpperCase().trim()||!1),a=d?"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-key dgvpad_lock":"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-lock dgvpad_lock_other"}else a="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-lock-open dgvpad_unlock";return{icon:{iconClasses:a},label:s}}return e.cellView.getContent().empty()}(e)}}return"rel"===i.ds6wFrom&&(i.icon={iconName:"flow-cascade dgv-header-icon",fontIconFamily:WUXManagedFontIcons.Font3DS}),i},s.prototype.buildColumnsFromStorage=function(t){var i=this;return new Promise(function(o,n){var s=[],a=0;e.updateAttributesWithKind(void 0,t).then(function(t){e.updateAttributesWithKind().then(function(){var n=[];for(a=0;a<t.length;a++)n.push(new Promise(function(o){var n=t[a].dataIndex;e.addAvailableColumn(n,t[a]).then(function(e){var t=i.buildColumnFromSetting(e);t&&s.push(t),o()})}));Promise.all(n).then(function(){var e=UWA.clone(s);o(e)})})})})},s.prototype.getTypeRepresentations=function(){var e={"positionMatrix-Instance":{stdTemplate:"functionIcon",semantics:{icon:{iconName:"part-position",fontIconFamily:WUXManagedFontIcons.Font3DS}}},blankPositionMatrix:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"",fontIconFamily:WUXManagedFontIcons.Font3DS}}},lastVersionCheck:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"check dgv-lastversion-check",fontIconFamily:WUXManagedFontIcons.Font3DS},label:"Last Version"}},lastVersionWrong:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"wrong dgv-lastversion-wrong",fontIconFamily:WUXManagedFontIcons.Font3DS},label:"Not Last Version"}},findInCtx:{stdTemplate:"functionIcon",semantics:{icon:{iconName:"search-filter dgv-findinctx",fontIconFamily:WUXManagedFontIcons.Font3DS}}}};return JSON.stringify(e)};const a=new Map,r=["CATIAV5","SOLIDWORKS","NX","CREO","SOLIDEDGE","ALTIUM","INVENTOR","AUTOCAD","CAAUPSAPP","CADENCEALLEGRO","3DEXPERIENCE","EPLAN"];for(var l=0;l<r.length;l++)a.set(r[l],o.getWebappsAssetUrl("PADServices","icons/cadmasters/I_CADMaster"+r[l]+".png"));return s}),define("DS/IPClassifyNav/commands/view/_xNavSelectSiblings",[],function(){"use strict";return{execute:function(e){e.xnav_app;var t=e.model,i=t.getSelectedNodes();t.prepareBroadcastSelect(),t.prepareUpdate(),t.unselectAll(),t.prepareBroadcastSelect();var o=[],n=[];i.forEach(function(e){var t=e.getParent(),i=JSON.stringify(e.getOccurencePath());o.push(i),t.getChildren().forEach(function(e){var t=JSON.stringify(e.getOccurencePath());-1===o.indexOf(t)&&i!==t&&(n.push(e),o.push(t))})}),t.multiselect(n),t.pushUpdate(),t.pushBroadcastSelect()}}}),define("DS/IPClassifyNav/models/xNavDocument",["UWA/Core","DS/Logger/Logger","DS/PADUtils/PADSettingsMgt","DS/PADUtils/PADUtilsServices","DS/Tree/TreeDocument","DS/IPClassifyNav/models/xNavNodeModel","DS/PADUtils/PADWSAccess","DS/PADUtils/PADPredicatesNls","DS/PADUtils/views/PADAlert","DS/PADUtils/PADCommandProxy","DS/PADUtils/PADTransactionManager","DS/PADUtils/PADSession","DS/PADUtils/PADProbes","DS/PADUtils/views/PADPager","DS/PADUtils/Utility","DS/PADServices/utils/GlobalModelEvents","DS/ApplicationFrame/CommandsManager","i18n!DS/PADUtils/assets/nls/PADUtils.json","i18n!DS/IPClassifyNav/assets/nls/IPClassifyNav.json"],function(e,t,i,o,n,s,a,r,l,d,c,p,u,v,h,g,m,f,w){"use strict";function D(e){var t=m.getCommand("ExpandAll");t&&(e?t.enable():t.disable())}return n.extend(c,{_broadcastSelect:!0,_selected_paths:[],id:"mainNodeModel",_insertFlag:!1,_pagerview:null,_selection:[],_selectedIdx:null,_focusOn:!1,_reframeFocus:!1,_currentApp:null,_emptyFromProxy:!1,_isVolumeFilter:!1,init:function(n){var s=n||{},a=this;if(this._logger=t.getLogger("DS/IPClassifyNav/models/xNavDocument"),a.renderTo=n.renderTo?n.renderTo:document.body,this._parent(s),this.options.viewport={graph:null,tree:null},this.onPreExpand(this.xnav_expand.bind(this)),this.forceSyncModel4TreeListView=function(){},this.addEvent("onTransactionEnd",function(e,t){t||(a.getModelEvents().publish({event:"setPathTags",context:a}),a.fromTransactionEnd=!0)}),!e.is(s.remove_broadcast)||!0===s.remove_broadcast){a._commandProxy=d.create({events:{onSelect:function(t,i){if(!a._insertFlag&&!0!==t.searchDone){var o=t.paths;a._selected_paths=e.clone(o);!function(){try{a._doNotBroadcastSelect=!0,a._selected_paths.length?a._selectOccurence("",!0,!0):i.appid===d.appId()&&(a._emptyFromProxy=!0,a.unselectAll());for(var e=[],t=0;t<a._selected_paths.length;t++)a.getNodeByOccurencePath(a._selected_paths[t])&&e.push(a._selected_paths[t]);a._selected_paths=e}finally{setTimeout(function(){a._doNotBroadcastSelect=!1},500)}}()}},onRefresh:function(t,i){if((e.is(t.authored.created,"array")||e.is(t.authored.modified,"array"))&&(t.authored.origin&&"reserve"===t.authored.origin||a.refreshNodeById({widgetId:i.originWidgetId,created:t.authored.created,modified:t.authored.modified})),e.is(t.authored.deleted,"array")){var o=[],n=[];if(t.authored.deleted.forEach(function(e){a.getNodesById(e).forEach(function(t){-1===n.indexOf(e)&&n.push(e)}),o=o.concat(a.getNodesById(e))}),a.deleteNodes(o,!0),n.length)require("DS/PADServices/utils/GlobalModelEvents").publish({event:"ENXViews/WelcomePanel/cleanup",data:{item2remove:n}})}}}});var r=function(){a._doNotBroadcastSelect||(a._selected_paths=[],a._commandProxy.select(a._buildSelectData()),!0===a._broadcastSelect&&!0===a.options.authorize_setStructure&&(o.setObject_on_compass({nodes_2_open:a.getXSO().get()}),!1===i.getSetting("settypes")?o.setStructure_4_open_in_cv5({nodes_2_open:a.getXSO().get(),selected_paths:a._selected_paths}):o.setTypesForOFW(a)))};this.getXSO().onPostAdd(function(){r(),a._focusOn=!1}),this.getXSO().onPostRemove?this.getXSO().onPostRemove(r):this.getXSO().onRemove(r),this.getXSO().onEmpty(function(){!1!==a._emptyFromProxy||a._pagerview?a._emptyFromProxy=!1:a._doNotBroadcastSelect=!1,r()}),this.getXSO().onPreEmpty(function(){!1===a._emptyFromProxy&&(a._doNotBroadcastSelect=!0)})}},broadcastSelect:function(e){this._broadcastSelect=e,!0===this._broadcastSelect&&!0===this.options.authorize_setStructure&&(o.setObject_on_compass({nodes_2_open:this.getSelectedNodes()}),!1===i.getSetting("settypes")?o.setStructure_4_open_in_cv5({nodes_2_open:this.getSelectedNodes(),selected_paths:this._selected_paths}):o.setTypesForOFW(this))},prepareBroadcastSelect:function(){this._doNotBroadcastSelect=!0},pushBroadcastSelect:function(){this._commandProxy.select(this._buildSelectData()),this.broadcastSelect(!0),this._doNotBroadcastSelect=!1},xnav_expand:function(t){var o=t.data,n=o.nodeModel,s=!!o.expandAll&&o.expandAll,r=o.numberOfLevelsToExpand?o.numberOfLevelsToExpand.toString():i.getSetting("expand_iter");if(void 0===n.options.fakeNodesTable){s&&(n._expandAllPending=!0,D(!1)),this.invalidateViewPort(),s&&(r="-1");parseInt(r);var d,c,p,u=this;if(n.childComputed){var v=n.getDepth();if(d=n,c=s?parseInt(r):v+parseInt(r),(p=function(e,t,i){if(-1===t||i<t){if(e.childComputed){if(e.hasChildren()){for(var o=e.getChildren(),n=!0,s=0;s<o.length&&!0===n;s++){var a=o[s];if(a.childComputed&&"noExpandState"!==a._expandState&&(a.getDepth()<t||-1===t)&&a.setState({state:"expanded"}),void 0===(n=p(a,t,i+1)))throw new Error("Undefined no_expand_needed flag")}return n}return!0}return!(-1===t||t>i)}return!0})(d,c,v))return t.target.preExpandDone({preventExpandAll:!0}),u._selectOccurence(),delete n._expandAllPending,void D(!0)}var h,g=e.extend({root_physicalid:n.getID(),expand_iter:r,intent:"explore_2D"},i.getWebAPI_Options("navigate"),!0);if(n.isRoot()||n.getRoot(),!0===i.getSetting("alwaysExpandPath")||i.getSetting("pgpFromServer")){var m=n.getOccurencePath();m.length-1,g.paths=[m],delete g.root_physicalid}h=i.getSetting("enopad_webapis"),u.prepareUpdate(),a.navigate({find_in_ctx:!1,enopad_webapis:h,data:g,onComplete:function(i){var o;try{o=u.startTransaction("expand");0===(e.is(i,"string")?JSON.parse(i):i).results.length&&l.displayNotification({msg:f.generic_service_failure,eventID:"error"})}catch(e){e.type&&"TimeoutError"===e.type?(l.displayNotification({msg:f.parseTimeout,eventID:"warning"}),markChildNotComputed([n])):l.displayNotification({msg:f.generic_service_failure,eventID:"error"})}finally{!1,o&&o.end(),delete n._expandAllPending,D(!0),t.target.preExpandDone({preventExpandAll:!0,state:void 0}),u.pushUpdate()}},onFailure:function(){t.target.preExpandDone({preventExpandAll:!1,state:"collapsed"}),delete n._expandAllPending,D(!0),l.displayNotification({msg:f.generic_service_failure,eventID:"error"}),u.pushUpdate()}})}},invalidateViewPort:function(){this.options.viewport={graph:null,tree:null,tiles:null,thumbnails:null,datagrid:null}},getNodesById:function(e){var t=[];return this.getRoots().forEach(function(i){var o=i.getNodesById(e);t=t.concat(o)}),t},getNodeByOccurencePath:function(e){for(var t=this.getRoots(),i=0;i<t.length;i++){var o=t[i].getNodeByPath(e,void 0,void 0,!0);if(o)return o}},getRoots:function(t){var i=this._parent();if(Boolean(t)&&e.is(this._getChildrenFilterInfo,"function")){var o=this._getChildrenFilterInfo();o&&e.is(o.childrenBeforeFiltering,"array")&&(i=o.childrenBeforeFiltering.slice(0))}return i},removeRoot:function(t,i,o){var n=this;if(this.wrapInTransaction(function(){n._doNotBroadcastSelect=!0,n.invalidateViewPort(),n.getRoots().indexOf(t)>=0&&n._parent(t),n._doNotBroadcastSelect=!1}),!e.is(i,"boolean")||!i){var s=this.getRoots().length;e.is(this.detachedRoots,"array")&&(s+=this.detachedRoots.length),this.getModelEvents().publish({event:"onRemoveRoot",data:{pid:t.getID(),remainingRoots:s}});var a=null;this.getRoots().length>0?a=this.getRoots()[0]:e.is(this.detachedRoots,"array")&&this.detachedRoots.length>0&&(a=this.detachedRoots[0]),this.getModelEvents().publish({event:"onRootAdded",data:{isremove:!0,added_node:a,nb_root:s}})}},searchRootById:function(e){for(var t,i=this.getRoots(!0),o=0;o<i.length;o++)if(i[o].options.resourceid===e){t=i[o];break}return t},deleteNodes:function(e,t){var i=this;this.wrapInTransaction(function(){i.withTransactionUpdate(function(){e.forEach(function(e){e.isRoot()&&i.removeRoot(e)})})})},_selectOccurence:function(e,t,i){var o=this.getRoots(),n=this._selected_paths;if(n.length>0){var s=!1;"FocusOn"!==e&&(this._doNotBroadcastSelect=!0),this.prepareUpdate();var a=[];if(o.forEach(function(e){for(var t=0;t<n.length;t++){var i=e.getNodeByPath(n[t]);if(i&&(s=!0,a.push(i),!i.isVisible())){for(var o=i.getParent();!o.isVisible();)o=o.getParent();o&&-1===a.indexOf(o)&&a.push(o)}}}),!0!==t||!0===s)for(var r=this.getSelectedNodes(),l=0;l<r.length;l++){var d=r[l];a.indexOf(d)<0&&d.unselect()}a.forEach(function(e){e.isSelected()||e.select()}),this.pushUpdate(),this._doNotBroadcastSelect=!1}},_buildSelectData:function(){var e=[];this._selected_paths;e=this.getXSO().get();var t,i={paths:[],tenant:o.getPlatformId()};i.attributes={},i.version="1.1";return t=function(e){var t=e.getID();this.attributes.hasOwnProperty(t)||(this.attributes[t]={type:e.options.type,label:e.options.label})}.bind(i),i.paths=e.map(function(e){return e.getOccurencePath(t)}),this._currentApp=o.getSharedId(),i.sharedID=this._currentApp,i.focusOn=!1,i},applyActiveView:function(e){this.options.active_view=e},multiselect:function(e){var t=this.getXSO();this.prepareUpdate(),t.add(e),this.pushUpdate()},multiunselect:function(e){var t=this.getXSO();this.prepareUpdate(),t.remove(e),this.pushUpdate()},fillAttributesAsync4VisibleNodes:function(t,i){this.options.additionalColumnsModules=i;var o=this;function n(e,t){for(var i=0;i<o.options.additionalColumnsModules.length;i++){for(var n=o.options.additionalColumnsModules[i],s=n.getManagedColumnNames(),a={},r=0;r<s.length;r++)a[s[r]]=e.options.grid[s[r]];if(!0===n.toBeUpdated(a,e)){var l=n.getName(),d=t[l];d||(d={pids:[]},t[l]=d);var c=e.getID();d.pids.push(c)}}}if(this.options.additionalColumnsModules&&this.options.additionalColumnsModules.length){var s=this.getVisibleAdditionalColumns();s.length&&require(["UWA/Promise"],function(i){for(var a={},r=0;r<t.length;r++)n(t[r],a);for(var l=[],d=0;d<s.length;d++){var c=s[d],p=c.module.getName();if(a[p]){var u=new i(function(t){c.module.updateAttributes(a[p],function(i){var o=e.is(i,"string")?JSON.parse(i):i;t(o)})});l.push(u)}}l.length&&i.all(l).then(function(i){o.withTransactionUpdate(function(){t.forEach(t=>{var n=t.getID(),s={grid:{}},a=!1;i.forEach(e=>{if(e.pids){var t=e.pids[n];if(t){a=!0;var i=t._root;if(i){for(var o in i)s[o]=i[o];delete t._root}for(var o in t)s.grid[o]=t[o]}}}),a&&t.updateOptions(function(t,i){var n=i;return e.is(o.filterAttributesForUpdate,"function")&&(n=o.filterAttributesForUpdate({node:t,node_opts:n})),n}(t,s))})})})})}}})}),define("DS/IPClassifyNav/views/customize_views/_xNavDGVParametrization",["i18n!DS/IPClassifyNav/assets/nls/IPClassifyNav.json","DS/Utilities/Utils","DS/IPClassifyNav/utils/xNavCustoStorageOptim","DS/PADUtils/Configuration","DS/PADServices/utils/AttributesMgtV2","DS/PADServices/utils/DictionaryAccess"],function(e,t,i,o,n,s){"use strict";function a(e){}return a.prototype.buildDGVOpts=function(e){var t=this;return e=e||{},new Promise(function(a){var r,l=function(e){var i=UWA.clone(o.getConfig("dgvOptions")),r=i&&i.dgv?i.dgv:{};if((e=UWA.extend(r,e)).onContextualEvent=t._onContextualEvent.bind(t),e.onDelayedModelDataRequest=t.options.context.updateAttributesDelayed.bind(t.options.context),t.options.callbacks)for(var l=Object.keys(t.options.callbacks),d=0;d<l.length;d++)e[l[d]]=t.options.callbacks[l[d]];s.updateColumnsWithNLS(e.columns,function(i){"success"===i.status&&(e.columns=i.columns),n.updateAttributesList(e.columns),t.completeDGVOptions(e).then(a)})};t.options.view_customization&&!0!==e.reset&&!0===t.options.view_customization.custoFromDGV?(!0===t.options.view_customization.custoOptimized&&(t.options.view_customization=i.convertPreference2Custo(t.options.view_customization,"datagridview")),(r=t.options.view_customization).columns=t.buildColumnsFromStorage(r.columns).then(function(e){r.columns=e,l(r)})):(r={},t.buildColumns("datagridview").then(function(e){r.columns=e.columns,l(r)}))})},a.prototype.completeDGVOptions=function(e){return Promise.resolve(e)},a.prototype.completeCB=function(){return Promise.resolve()},a.prototype.addColumnCB=function(e){var t=this;return new Promise(function(i){t.options.dgv.prepareUpdateView();var o=[];e.forEach(function(e){o.push(new Promise(function(i){n.addAvailableColumn(e.dataIndex,e).then(function(e){var o=t.buildColumnFromSetting(e);o&&("real"!=o.kind&&"real"!=o.typeRepresentation||(o.kind="float",o.typeRepresentation="float"),o.hasOwnProperty("dynamicattributesIndex")?t.options.dgv.addColumnOrGroup(o,o.dynamicattributesIndex):t.options.dgv.addColumnOrGroup(o),"thumbnail"===o.dataIndex&&(t.options.dgvLayout.cellHeight=80)),i()})}))}),Promise.all(o).then(function(){t.options.dgv.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0),i()}.bind(t))})},a.prototype.removeColumnCB=function(e){var t=this;this.options.dgv.prepareUpdateView(),e.forEach(function(e){var i=UWA.is(e,"string")?JSON.parse(e):e,o=t.options.dgv.getColumnOrGroup(i.dataIndex);o&&void 0!==o.dataIndex&&(t.options.dgv.removeColumnOrGroup(i.dataIndex),"thumbnail"===i.dataIndex&&("comfortable"===t.options.viewMode?t.options.dgvLayout.cellHeight=38:"compact"===t.options.viewMode&&(t.options.dgvLayout.cellHeight=26)),n.removeAvailableColumn(i.dataIndex))}),this.options.dgv.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0)},a.prototype.changeTitleCB=function(e,t){var i=this.options.dgv.getColumnOrGroup(e);i&&(this.options.dgv.prepareUpdateView(),i.text=t,i.customisation.titleModified=!0,this.options.dgv.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!0},!0))},a.prototype.changeDBAttributeCB=function(e){if(e&&0!=e.length){var t=this;this.options.dgv.prepareUpdateView(),e.forEach(function(e){var i=t.options.dgv.getColumnOrGroup(e.dataIndex);i&&void 0!==i.dataIndex&&(i.attrDBName=e.attrDBName)}),this.options.dgv.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0)}},a.prototype.changeVisibilityCB=function(e,t){this.options.dgvLayout.setColumnVisibleFlag(e,t,{isUserInteraction:!1})},a.prototype.changePinCB=function(e,t){this.options.dgvLayout.setColumnPinned(e,t,{isUserInteraction:!1})},a.prototype.moveColumnCB=function(e){e.move2perform&&this.options.dgvLayout.moveColumn(e.move2perform.fromID,e.move2perform.toID,{isUserInteraction:!1})},a.prototype.changeDgvLayout=function(e){void 0!==typeof e.rowsHeader&&(this.options.dgvLayout.rowsHeader=e.rowsHeader)},a.prototype.changeExportCB=function(e,t){this.options.dgv.prepareUpdateView();var i=this.options.dgv.getColumnOrGroup(e);i&&(i.customisation||(i.customisation={}),i.customisation.exportable||(i.customisation.exportable={}),!1===i.customisation.exportable.lock&&(i.customisation.exportable.value=t)),this.options.dgv.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0)},a.prototype.compactMode=function(e){"comfortable"===e.viewMode?(this.options.dgvLayout.cellHeight=38,this.options.viewMode="comfortable"):"compact"===e.viewMode&&(this.options.dgvLayout.cellHeight=26,this.options.viewMode="compact")},a.prototype.saveCustoView=function(e){var t=this;this._prepareOptsToStore({onComplete:function(i){var o=e?"onCustoViewChange":"onSaveAsTemplate";t.options.context.dispatchEvent(o,i)}})},a.prototype.modifyColumRendering=function(e){var t=UWA.is(e,"string")?JSON.parse(e):e,i=this.getColumnOrGroup(t.dataIndex);i&&(void 0===i.xnav_options&&(i.xnav_options=i.customisation),void 0!==t.exportable&&t.exportable!==i.xnav_options.exportable.value&&(i.xnav_options.exportable.value=t.exportable,i.customisation&&i.customisation.exportable&&(i.customisation.exportable.value=t.exportable)))},a.prototype.reset=function(e){var t=this;delete t.options.view_customization,this.buildDGVOpts({reset:!0}).then(function(i){var n=o.getConfig("dgvOptions")?o.getConfig("dgvOptions"):{};t.options.dgv.prepareUpdateView(),n.dgvLayout&&(t.options.dgvLayout.cellHeight=n.dgvLayout.cellHeight),t.options.dgvLayout.columns=i.columns,t.options.dgv.columns=i.columns,t.options.viewMode=n.viewMode,t.options.dgv.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!1},!0),t.options.dgvLayout.applyColumns(),t.saveCustoView(e)})},a.prototype._onContextualEvent=function(e){return new Promise(function(e){e()})},a.prototype.selectSingleInstance=function(e){this.options.dgv.treeDocument.getSelectedNodes().length>=1&&this.options.dgv.treeDocument.unSelectAll(),e.nodeModel.select()},a.prototype.eventHandlerOnGridView=function(e){var t=this;return new Promise(function(i){e.addEventListener("change",function(e,t){t&&t.nodeModel&&-1!==t.columnID&&(t.nodeModel.isSelected()?t.nodeModel.unselect():t.nodeModel.select())}),e.addEventListener("columnOrderChange",function(e){t.saveCustoView(!0)}),e.addEventListener("click",function(e,i){if(void 0!==i&&-1!==i.rowID){var o=e.dsModel.layout.getDataIndexFromColumnIndex(i.columnID);if("findinctx"===o);else if("hide_show"===o);else if("positionMatrix-Instance"===o);else if(t.options.clickEvent[o])t.options.clickEvent[o](i);else if(t.options.additionalColumnsModules&&!0===e.dsModel.layout.getColumnOptionValue(i.columnID,"isAdditionalColumn"))for(var n=0;n<t.options.additionalColumnsModules.length;n++){var s=t.options.additionalColumnsModules[n].getOnCellClickCB(o);if(s){s(i);break}}}}),t.completeCB(e).then(i)})},a.prototype._prepareOptsToStore=function(e){var o=this;t.debounce(function(e){o.options.dgvLayout.columns=o.options.dgv.columns;for(var t=o.options.dgvLayout.getOrderedColumnsIndexes(),s=[],a={},r=0;r<t.length;r++){var l=o.options.dgv.getColumnOrGroup(t[r]);l.columnIdx=r,s.push(l),l.customisation&&!0===l.customisation.titleModified&&(a[l.dataIndex]=!0)}o.options.dgv.columns=s;var d={viewMode:o.options.viewMode,defaultCellHeight:o.options.dgvLayout.cellHeight,rowsHeader:o.options.dgvLayout.rowsHeader,columns:s,selectedTypes:n.getSelectedTypes(),selectedExtensions:n.getSelectedExtensions()},c=i.convertCusto4Preference(d,a,"datagridview");e.onComplete(c)},500)(e)},a}),define("DS/IPClassifyNav/views/xNavDataGridView",["css!DS/IPClassifyNav/IPClassifyNav","UWA/Core","DS/DataGridView/DataGridView","DS/DataGridView/DataGridViewLayout","DS/PADUtils/PADCommandProxy","DS/IPClassifyNav/views/customize_views/_xNavDGVParametrization","DS/IPClassifyNav/views/customize_views/_xNavDGVUtils","DS/PADUtils/Configuration","DS/PADUtils/PADSettingsMgt","DS/PADServices/utils/GlobalUtils","DS/PADServices/utils/GlobalModelEvents"],function(e,t,i,o,n,s,a,r,l,d,c){"use strict";function p(e){this.name="xnav-dgv",this._version=.1,this._additionalColumnsAMD=e.additionalColumnsAMD,this._cbDefinition=e.callbacksDefinition||{},this.options={renderTo:null,context:null,viewMode:"",view_customization:null,modelEvents:null,subscribeTokens:[],dgv:null,dgvLayout:null,isActiveView:!1,clickEvent:{},doubleClickEvent:{}},this.options=Object.assign(this.options,e)}return p.prototype=Object.assign(p.prototype,s.prototype),p.prototype=Object.assign(p.prototype,a.prototype),p.prototype.initialize=function(){},p.prototype.destroy=function(){for(var e=0;e<this.options.subscribeTokens.length;e++)c.unsubscribe(this.options.subscribeTokens[e])},p.prototype.setModel=function(e){this.options.dgv.getContent().inject(this.options.renderTo),this.options.isActiveView=!0,this.options.dgv.treeDocument=e},p.prototype.unsetModel=function(){this.options.isActiveView&&(this.options.renderTo.removeChild(this.options.dgv.getContent()),this.options.isActiveView=!1,this.options.dgv.treeDocument=null)},p.prototype.isColumnHidden=function(e){var t=!0;return this.options.dgv&&this.options.dgv.getColumnOrGroup(e)&&"boolean"==typeof this.options.dgv.getColumnOrGroup(e).visibleFlag&&(t=!this.options.dgv.getColumnOrGroup(e).visibleFlag),t},p.prototype.showColumn=function(e){this.changeVisibilityCB(e,!0)},p.prototype.hideColumn=function(e){this.changeVisibilityCB(e,!1)},p.prototype.updateView=function(){this.options.dgv.updateView(!0)},p.prototype.changeColumnTitle=function(e,t){this.changeTitleCB(e,t)},p.prototype.setUseClipboardFlag=function(e){this.options.dgv.setUseClipboardFlag(e)},p});