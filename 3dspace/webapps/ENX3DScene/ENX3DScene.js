function ENX3DScene(e){"use strict";var t=function(e){var t=!1;return UWA.is(e,"boolean")?t=e:UWA.is(e,"string")&&(t="true"===e.toLowerCase()),t},i={widget:null,pad3DViewer:null,paddebug:!1,init:function(e){this.pcsPrefix=e.widget.id+"_"+e.widget.title,this.widget=e.widget,this.widget.addEvent("onLoad",this.onLoad.bind(this)),this.widget.addEvent("onRefresh",this.onRefresh.bind(this)),this.widget.addEvent("onSearch",this.onSearch.bind(this))},onRefresh:function(){this.pad3DViewer.refresh()},onLoad:function(){var e=this;require(["DS/PADUtils/PADSettingsMgt","DS/PADUtils/PADSharedSettings","text!DS/ENX3DScene/assets/json/ENOX3DSCSettingsMgt.json","DS/ENOPAD3DViewer/PAD3DViewer","DS/Selection/CSOManager","UWA/Utils/Client"],function(i,n,o,a,r,d){o=UWA.is(o,"string")?JSON.parse(o):o,i.setApp(o,"enx3dscene",!0);var l=d.Features.touchEvents&&!d.Features.pointerEvents?o.actionBarWkb.touch:o.actionBarWkb.standard;o.enx3dscene.layout_options.frmWindow_opts.workbench=l.file,o.enx3dscene.layout_options.frmWindow_opts.workbenchModule=l.module,null===e.pad3DViewer&&(!function(){e.widget.getValue("x3dSharedId")||e.widget.getValue("x3dAppId")||e.widget.addPreference({name:"x3dAppId",type:"hidden",defaultValue:"ENX3DScene_appId"}),i.setSetting("lang",e.widget.lang),n.addSharedSettings(e.widget,["x3dPlatformId","pad_security_ctx","storedObjectMgt"]);var t=widget.getValue("authorizeChangeControl");UWA.is(t,"string")&&"true"===t.toLowerCase()&&i.setSetting("authorizeChangeControl",t),e.widget.addEvent("endEdit",i.updateWidgetPreferences.bind(i)),e.widget.addEvent("endEdit",function(e){if(e&&!1===e.submitted){var t="top-right";t=sessionStorage.getItem("changeControlPosition3DNavigation")?sessionStorage.getItem("changeControlPosition3DNavigation"):i.getSetting("changeControlPosition");var n=require("DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext");!1===self.widget.getBool("changeControlActivation")?(n.hide(),self.widget.addPreference({name:"changeControlPosition",type:"hidden",defaultValue:t})):(n.show(),self.widget.addPreference({name:"changeControlPosition",defaultValue:t,type:"list",label:"changeControlPosition_label",options:[{label:"bottom-right_label",value:"bottom-right"},{label:"bottom-left_label",value:"bottom-left"},{label:"top-right_label",value:"top-right"}]}))}}),e.widget.mergePreferences(i.getWidgetPreferences()),i.addEvent("onEnox3dsc_activateBI",function(t){e.pad3DViewer&&e.pad3DViewer.getBIController()&&e.pad3DViewer.getBIController().toggleBetweenStandaloneAndSlaveMode(!0===t?"STANDALONE":"SLAVE")}),i.addEvent("onEnopad3dviewer_navigate_with_wrap",function(t){e.pad3DViewer&&e.pad3DViewer.getController()&&e.pad3DViewer.getController().setWrapUsage(t)}),i.addEvent("onEnopad3dviewer_CGRorTHB",function(t){e.pad3DViewer&&e.pad3DViewer.getController()&&e.pad3DViewer.setDefaultStreamToLoad(t)}),i.addEvent("onDisplay_sceneGraph",function(t){e.pad3DViewer&&e.pad3DViewer.displayTree(t)}),i.updateWidgetPreferences(),e.widget.getValue("ENOX3DSC_RootIds")||widget.addPreference({name:"ENOX3DSC_RootIds",type:"hidden",defaultValue:"[]"}),e.widget.getValue("ENOX3DSC_DetachedRootIds")||widget.addPreference({name:"ENOX3DSC_DetachedRootIds",type:"hidden",defaultValue:"[]"}),e.widget.getValue("x3dSharedId")||e.widget.getValue("x3dAppId")||e.widget.addPreference({name:"x3dAppId",type:"hidden",defaultValue:"ENOPAD_appId"})}(),e.pad3DViewer=new a({widget:e.widget,css_view_class:e.css_view_class,windowOptions:o.enx3dscene.layout_options.frmWindow_opts,allowAuthoring:!1,binaryPrimitives:!0,authorizeSet3DStructure:!0,selectiveLoading:UWA.is(i.getSetting("enopad3dviewer_selectiveLoading"),"boolean")?i.getSetting("enopad3dviewer_selectiveLoading"):"true"===i.getSetting("enopad3dviewer_selectiveLoading"),enableSidePanel:!0,propertiesFacet:UWA.is(i.getSetting("propertiesFacet"),"array")?i.getSetting("propertiesFacet"):[]}),e.pad3DViewer.subscribe({event:"onActionBarReady"},function(){e.widget.setBody(e.pad3DViewer.render()),!0===i.getSetting("authorizeChangeControl")&&require(["DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext","DS/PADUtils/PADCommandProxy"],function(t,n){var o=e.pad3DViewer.elements.triptych.getMainPanelContainer();t.initialize2(o,n.appId(),"hide",i.getSetting("changeControlPosition"),function(o){e.debouncePrefSynchro=!1,e._proxy=n.create({events:{onPreferenceModification:function(t){"changeControlActivation"===t.name&&(e.debouncePrefSynchro=!0,e.widget.setValue(t.name,t.value),i.setSetting(t.name,t.value))}}});var a=i.getSetting("changeControlActivation");a=void 0!==e.widget.getValue("changeControlActivation")?e.widget.getBool("changeControlActivation"):o.isAuthoringContextVisible;var r="top-right";r=sessionStorage.getItem("changeControlPosition3DNavigation")?sessionStorage.getItem("changeControlPosition3DNavigation"):i.getSetting("changeControlPosition"),t.setPosition(r),e.widget.addPreference({name:"changeControlActivation",defaultValue:a,type:"boolean",label:"changeControlActivation_label",onchange:"onChangeControlUpdate"}),!0===a?(t.show(),e.widget.addPreference({name:"changeControlPosition",defaultValue:r,type:"list",label:"changeControlPosition_label",options:[{label:"top-right_label",value:"top-right"},{label:"top-left_label",value:"top-left"},{label:"bottom-right_label",value:"bottom-right"},{label:"bottom-left_label",value:"bottom-left"}]})):(t.hide(),e.widget.addPreference({name:"changeControlPosition",type:"hidden",defaultValue:r})),i.addEvent("onChangeControlActivation",function(n){e.debouncePrefSynchro?e.debouncePrefSynchro=!1:e._proxy.preferenceModification({name:"changeControlActivation",value:n});var o="top-right";o=sessionStorage.getItem("changeControlPosition3DNavigation")?sessionStorage.getItem("changeControlPosition3DNavigation"):i.getSetting("changeControlPosition"),!0===n?(t.show(),e.widget.addPreference({name:"changeControlPosition",defaultValue:o,type:"list",label:"changeControlPosition_label",options:[{label:"top-right_label",value:"top-right"},{label:"top-left_label",value:"top-left"},{label:"bottom-right_label",value:"bottom-right"},{label:"bottom-left_label",value:"bottom-left"}]})):(t.hide(),e.widget.addPreference({name:"changeControlPosition",type:"hidden",defaultValue:o}))}),t.addEvent&&t.addEvent("onAuthoringCtxVisible",function(t){!0===t.showAuthoringContext&&(e.widget.setValue("changeControlActivation",!0),i.setSetting("changeControlActivation",!0))}),i.addEvent("onChangeControlPosition",function(e){t.setPosition(e),sessionStorage.setItem("changeControlPosition3DNavigation",e)}),e.widget.addEvent("onChangeControlUpdate",function(t,n){var o="top-right";o=sessionStorage.getItem("changeControlPosition3DNavigation")?sessionStorage.getItem("changeControlPosition3DNavigation"):i.getSetting("changeControlPosition");var a=require("DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext");!1===n?(a.hide(),e.widget.addPreference({name:"changeControlPosition",type:"hidden",defaultValue:o})):(a.show(),e.widget.addPreference({name:"changeControlPosition",defaultValue:o,type:"list",label:"changeControlPosition_label",options:[{label:"bottom-right_label",value:"bottom-right"},{label:"bottom-left_label",value:"bottom-left"},{label:"top-right_label",value:"top-right"}]})),e.widget.dispatchEvent("onEdit")})})}),e.widget.widgetDomain&&e.widget.widgetDomain.indexOf("debug_me")>0&&(console.warn("Debug mode activated"),e.pad3DViewer.displayTree(i.getSetting("display_sceneGraph")),e.pad3DViewer.getBIController()&&e.pad3DViewer.getBIController().toggleBetweenStandaloneAndSlaveMode(!0===i.getSetting("enox3dsc_activateBI")?"STANDALONE":"SLAVE")),e.pad3DViewer.getLevelSelectorCommand&&e.pad3DViewer.getLevelSelectorCommand(function(e){e&&e.displayLabels(!0)})}),e.pad3DViewer.subscribe({event:"onReady"},function(n){var o=JSON.parse(e.widget.getValue("ENOX3DSC_RootIds")),a=JSON.parse(e.widget.getValue("ENOX3DSC_DetachedRootIds"));e.widget.setValue("ENOX3DSC_RootIds","[]"),e.widget.setValue("ENOX3DSC_DetachedRootIds","[]");var r=e.widget.getValue("X3DContentId");e.widget.deleteValue("X3DContentId");var d=[];o.forEach(function(e){UWA.is(e,"array")?d.push({path:e,hidden:a.indexOf(e[0])>=0}):d.push({path:[e],hidden:a.indexOf(e)>=0})}),o.length>0?!0===i.getSetting("activate_loadPopUp")&&t(e.widget.getValue("storedObjectMgt"))?require(["DS/PADUtils/views/PADStoredObjMgt"],function(i){var n=e.widget.getValue("ENOX3DSC_objectInfos");n=UWA.is(n,"string")?JSON.parse(n):{},new i({render_div:".enopad3Dviewer_mainTriptych",objects3D:d,objectInfos:n,events:{onLoadObjects:function(i){e.pad3DViewer.addRoots({objects:i.objects3D},!1),e.widget.setValue("ENOX3DSC_objectInfos",JSON.stringify(i.objectInfos)),t(e.widget.getValue("storedObjectMgt"))!==i.showStoredObjectMgt&&e.widget.setValue("storedObjectMgt",i.showStoredObjectMgt)}}})}):e.pad3DViewer.addRoots({objects:d},!1):r&&setTimeout(function(){e.pad3DViewer.addRootNodesFromContent({json3DXContent:JSON.parse(r),dispatch:!1})},0),e.widget.dispatchEvent("onENOPADReady")}),e.pad3DViewer.subscribe({event:"onRootAdded"},function(t){if(t.rootLog){var i=t.rootLog;e.widget.setValue("ENOX3DSC_RootIds",JSON.stringify(i))}if(t.id&&t.hidden){var n=JSON.parse(e.widget.getValue("ENOX3DSC_DetachedRootIds"));n.push(t.id),e.widget.setValue("ENOX3DSC_DetachedRootIds",JSON.stringify(n))}e.pad3DViewer.getContentName({callbacks:{onComplete:function(t){e.widget.setTitle(t.contentName)}}})}),e.pad3DViewer.subscribe({event:"onRootRemoved"},function(t){if(t.rootLog){var i=t.rootLog;e.widget.setValue("ENOX3DSC_RootIds",JSON.stringify(i))}if(t.id){for(var n=JSON.parse(e.widget.getValue("ENOX3DSC_DetachedRootIds")),o=0;o<n.length;o++)if(n[o]===t.id){n.splice(o,1);break}e.widget.setValue("ENOX3DSC_DetachedRootIds",JSON.stringify(n))}e.pad3DViewer.getContentName({callbacks:{onComplete:function(t){e.widget.setTitle(t.contentName)}}})}),e.pad3DViewer.subscribe({event:"onRootAttached"},function(t){if(t.id){for(var i=JSON.parse(e.widget.getValue("ENOX3DSC_DetachedRootIds")),n=0;n<i.length;n++)if(i[n]===t.id){i.splice(n,1);break}e.widget.setValue("ENOX3DSC_DetachedRootIds",JSON.stringify(i))}e.pad3DViewer.getContentName({callbacks:{onComplete:function(t){e.widget.setTitle(t.contentName)}}})}),e.pad3DViewer.subscribe({event:"onRootDetached"},function(t){if(t.id){var i=JSON.parse(e.widget.getValue("ENOX3DSC_DetachedRootIds"));i.push(t.id),e.widget.setValue("ENOX3DSC_DetachedRootIds",JSON.stringify(i))}e.pad3DViewer.getContentName({callbacks:{onComplete:function(t){e.widget.setTitle(t.contentName)}}})}))})},onSearch:function(e){var t={searchQuery:e};this.pad3DViewer.search(t)},onDestroy:function(){this.pad3DViewer.destroy(),require("DS/PADUtils/PADSharedSettings").destroy()}};return i.init(e),i}function ENX3DSceneV2(e){"use strict";var t={widget:null,pad3DViewer:null,landingPage:null,mainDiv:null,paddebug:!1,init:function(e){this.pcsPrefix=e.widget.id?e.widget.id:"_"+e.widget.title,window.top.performance.mark(this.pcsPrefix+"_init"),window.top.performance.measure(this.pcsPrefix+"_call_init","ENX3DScene_app_load_html",this.pcsPrefix+"_init"),this.widget=e.widget,this.widget.addEvent("onLoad",this.onLoad.bind(this)),this.widget.addEvent("onRefresh",this.onRefresh.bind(this)),this.widget.addEvent("onSearch",this.onSearch.bind(this))},onRefresh:function(){this.pad3DViewer.refresh()},onLoad:function(){var e=this;window.top.performance.mark(this.pcsPrefix+"_onload"),window.top.performance.measure(this.pcsPrefix+"_call_onload",this.pcsPrefix+"_init",this.pcsPrefix+"_onload"),window.top.performance.measure(this.pcsPrefix+"_fromHtmlToOnLoad","ENX3DScene_app_load_html",this.pcsPrefix+"_onload");for(var t=-1,i=widget.preferences.length,n=0;n<i&&-1===t;n++)"storedObjectMgt"===widget.preferences[n].name&&(t=n);-1!==t&&widget.preferences.splice(t,1),require(["DS/PADUtils/PADSettingsMgt","DS/PADUtils/PADSharedSettings","text!DS/ENX3DScene/assets/json/ENOX3DSCSettingsMgt.json","DS/ENOPAD3DViewer/PAD3DViewer","DS/Selection/CSOManager","UWA/Utils/Client","DS/PADServices/utils/PADTrackerManager","DS/PADUtils/PADUtilsServices"],function(t,i,n,o,a,r,d,l){n=UWA.is(n,"string")?JSON.parse(n):n,t.setApp(n,"enx3dscene",!0);var s=n.actionBarWkb.welcome;n.enx3dscene.layout_options.frmWindow_opts.workbench=s.file,n.enx3dscene.layout_options.frmWindow_opts.workbenchModule=s.module,null===e.pad3DViewer&&(!function(){e.widget.getValue("x3dSharedId")||e.widget.getValue("x3dAppId")||e.widget.addPreference({name:"x3dAppId",type:"hidden",defaultValue:"ENX3DScene_appId"}),t.setSetting("lang",e.widget.lang),i.addSharedSettings(e.widget,["x3dPlatformId","showWelcomePanel","autoreload","synthesisModeOnInstance"]);var n=widget.getValue("authorizeChangeControl");UWA.is(n,"string")&&"true"===n.toLowerCase()&&t.setSetting("authorizeChangeControl",n),e.widget.addEvent("endEdit",t.updateWidgetPreferences.bind(t)),e.widget.addEvent("endEdit",function(e){if(e&&!1===e.submitted){var i="top-right";i=sessionStorage.getItem("changeControlPosition3DNavigation")?sessionStorage.getItem("changeControlPosition3DNavigation"):t.getSetting("changeControlPosition");var n=require("DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext");!1===self.widget.getBool("changeControlActivation")?(n.hide(),self.widget.addPreference({name:"changeControlPosition",type:"hidden",defaultValue:i})):(n.show(),self.widget.addPreference({name:"changeControlPosition",defaultValue:i,type:"list",label:"changeControlPosition_label",options:[{label:"top-right_label",value:"top-right"},{label:"top-left_label",value:"top-left"},{label:"bottom-left_label",value:"bottom-left"},{label:"bottom-right_label",value:"bottom-right"}]}))}}),e.widget.mergePreferences(t.getWidgetPreferences()),t.addEvent("onEnox3dsc_activateBI",function(t){e.pad3DViewer&&e.pad3DViewer.getBIController()&&e.pad3DViewer.getBIController().toggleBetweenStandaloneAndSlaveMode(!0===t?"STANDALONE":"SLAVE")}),t.addEvent("onEnopad3dviewer_navigate_with_wrap",function(t){e.pad3DViewer&&e.pad3DViewer.getController()&&e.pad3DViewer.getController().setWrapUsage(t)}),t.addEvent("onEnopad3dviewer_CGRorTHB",function(t){e.pad3DViewer&&e.pad3DViewer.getController()&&e.pad3DViewer.setDefaultStreamToLoad(t)}),t.addEvent("onDisplay_sceneGraph",function(t){e.pad3DViewer&&e.pad3DViewer.displayTree(t)}),t.updateWidgetPreferences(),e.widget.getValue("ENOX3DSC_RootIds")||widget.addPreference({name:"ENOX3DSC_RootIds",type:"hidden",defaultValue:"[]"}),e.widget.getValue("ENOX3DSC_DetachedRootIds")||widget.addPreference({name:"ENOX3DSC_DetachedRootIds",type:"hidden",defaultValue:"[]"}),e.widget.getValue("x3dSharedId")||e.widget.getValue("x3dAppId")||e.widget.addPreference({name:"x3dAppId",type:"hidden",defaultValue:"ENOPAD_appId"})}(),require(["DS/PADServices/views/LandingPage","i18n!DS/ENX3DScene/assets/nls/ENX3DScene"],function(i,a){e.mainDiv=UWA.createElement("div",{class:"appMain",styles:{width:"auto",height:"100%"}}),e.landingPage=new i({widget:e.widget,readOnlyApp:!0,renderDiv:e.mainDiv,appTitle:"3D Navigate",description:a.appDescription,onLandingPageReady:function(t){e.widget.setBody(e.mainDiv)}}),e.landingPage.initialize().then(function(i){window.top.performance.mark(e.pcsPrefix+"new pad3dviewer begin"),e.pad3DViewer=new o({widget:e.widget,css_view_class:e.css_view_class,windowOptions:n.enx3dscene.layout_options.frmWindow_opts,allowAuthoring:!1,binaryPrimitives:!0,authorizeSet3DStructure:!0,selectiveLoading:UWA.is(t.getSetting("enopad3dviewer_selectiveLoading"),"boolean")?t.getSetting("enopad3dviewer_selectiveLoading"):"true"===t.getSetting("enopad3dviewer_selectiveLoading"),enableSidePanel:!0,propertiesFacet:UWA.is(t.getSetting("propertiesFacet"),"array")?t.getSetting("propertiesFacet"):[],objects2Load:i,pcsPrefix:e.pcsPrefix}),e.landingPage.setViewer(e.pad3DViewer),e.pad3DViewer.subscribe({event:"onActionBarReady"},function(){window.top.performance.mark(e.pcsPrefix+"actionbarInitDone"),window.top.performance.measure(e.pcsPrefix+"actionbarInit",e.pcsPrefix+"frameWindowInitBegin",e.pcsPrefix+"actionbarInitDone"),e.landingPage.appReady(),!0===t.getSetting("authorizeChangeControl")&&require(["DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext","DS/PADUtils/PADCommandProxy"],function(i,n){var o=e.pad3DViewer.elements.triptych.getMainPanelContainer();i.initialize2(o,n.appId(),"hide",t.getSetting("changeControlPosition"),function(o){e.debouncePrefSynchro=!1,e._proxy=n.create({events:{onPreferenceModification:function(i){"changeControlActivation"===i.name&&(e.debouncePrefSynchro=!0,e.widget.setValue(i.name,i.value),t.setSetting(i.name,i.value))}}});var a=t.getSetting("changeControlActivation");a=void 0!==e.widget.getValue("changeControlActivation")?e.widget.getBool("changeControlActivation"):o.isAuthoringContextVisible;var r="top-right";r=sessionStorage.getItem("changeControlPosition3DNavigation")?sessionStorage.getItem("changeControlPosition3DNavigation"):t.getSetting("changeControlPosition"),i.setPosition(r),e.widget.addPreference({name:"changeControlActivation",defaultValue:a,type:"boolean",label:"changeControlActivation_label",onchange:"onChangeControlUpdate"}),!0===a?(i.show(),e.widget.addPreference({name:"changeControlPosition",defaultValue:r,type:"list",label:"changeControlPosition_label",options:[{label:"top-right_label",value:"top-right"},{label:"top-left_label",value:"top-left"},{label:"bottom-left_label",value:"bottom-left"},{label:"bottom-right_label",value:"bottom-right"}]})):(i.hide(),e.widget.addPreference({name:"changeControlPosition",type:"hidden",defaultValue:r})),t.addEvent("onChangeControlActivation",e._onChangeControlActivation.bind(e)),i.addEvent&&i.addEvent("onAuthoringCtxVisible",function(i){t.setSetting("changeControlActivation",i.showAuthoringContext,!0),e._onChangeControlActivation(i.showAuthoringContext),t.setSetting("changeControlDlgOpen",!0)}),t.addEvent("onChangeControlPosition",function(e){i.setPosition(e),sessionStorage.setItem("changeControlPosition3DNavigation",e)}),e.widget.addEvent("onChangeControlUpdate",function(i,n){var o="top-right";o=sessionStorage.getItem("changeControlPosition3DNavigation")?sessionStorage.getItem("changeControlPosition3DNavigation"):t.getSetting("changeControlPosition");var a=require("DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext");!1===n?(a.hide(),e.widget.addPreference({name:"changeControlPosition",type:"hidden",defaultValue:o})):(a.show(),e.widget.addPreference({name:"changeControlPosition",defaultValue:o,type:"list",label:"changeControlPosition_label",options:[{label:"top-right_label",value:"top-right"},{label:"top-left_label",value:"top-left"},{label:"bottom-left_label",value:"bottom-left"},{label:"bottom-right_label",value:"bottom-right"}]})),e.widget.dispatchEvent("onEdit")})})}),e.widget.widgetDomain&&e.widget.widgetDomain.indexOf("debug_me")>0&&(console.warn("Debug mode activated"),e.pad3DViewer.displayTree(t.getSetting("display_sceneGraph")),e.pad3DViewer.getBIController()&&e.pad3DViewer.getBIController().toggleBetweenStandaloneAndSlaveMode(!0===t.getSetting("enox3dsc_activateBI")?"STANDALONE":"SLAVE")),e.pad3DViewer.getLevelSelectorCommand&&e.pad3DViewer.getLevelSelectorCommand(function(e){e&&e.displayLabels(!0)});var i=e.widget.getValue("X3DContentId");e.widget.deleteValue("X3DContentId"),i&&setTimeout(function(){e.pad3DViewer.addRootNodesFromContent({json3DXContent:JSON.parse(i),dispatch:!1})},0),e.widget.dispatchEvent("onENOPADReady")}),e.pad3DViewer.subscribe({event:"onReady"},function(){window.top.performance.mark(e.pcsPrefix+"init_pad3dviewer_done"),window.top.performance.measure(e.pcsPrefix+"3d_app_init","ENX3DScene_app_load_html",e.pcsPrefix+"init_pad3dviewer_done"),window.top.performance.measure(e.pcsPrefix+"init_landingpage",e.pcsPrefix+"_onload",e.pcsPrefix+"new pad3dviewer begin"),window.top.performance.measure(e.pcsPrefix+"require_pad3dviewer",e.pcsPrefix+"new pad3dviewer begin",e.pcsPrefix+"frameWindowInitBegin");var t=d.getPADTracker({eventCategory:"performance",eventAction:"3d_app_init"}),i=e.pad3DViewer.getPCSTrackerResult(e.pcsPrefix+"3d_app_init");t.setEventData({eventLabel:"app_loading_duration",eventValue:i.duration});var n=e.pad3DViewer.getPCSTrackerResult(e.pcsPrefix+"_call_init"),o=e.pad3DViewer.getPCSTrackerResult(e.pcsPrefix+"_call_onload"),a=e.pad3DViewer.getPCSTrackerResult(e.pcsPrefix+"init_landingpage"),r=e.pad3DViewer.getPCSTrackerResult(e.pcsPrefix+"require_pad3dviewer"),l=e.pad3DViewer.getPCSTrackerResult(e.pcsPrefix+"actionbarInit"),s=e.pad3DViewer.getPCSTrackerResult(e.pcsPrefix+"frameWindowInit");t.addMultivaluedEventData("3d_app_init",{call_init_start:n?n.startTime:0,call_init_duration:n?n.duration:0,call_onload_start:o?o.startTime:0,call_onload_duration:o?o.duration:0,init_landingpage_start:a?a.startTime:0,init_landingpage_duration:a?a.duration:0,require_pad3dviewer_start:r?r.startTime:0,require_pad3dviewer_duration:r?r.duration:0,actionbarInit_start:l?l.startTime:0,actionbarInit_duration:l?l.duration:0,frameWindowInit_start:s?s.startTime:0,frameWindowInit_duration:s?s.duration:0}),t.trackPageEvent(),require(["DS/CATWebUXPreferences/CATWebUXPreferencesManager","DS/CATWebUXPreferences/CATWebUXPreferencesUtils"],function(t,i){var n=t.getPreferenceManager({context:e.pad3DViewer.getFrameWindow()}),o=[];if(n){n.setUnitsPreferencesDisplayFlag(!0),n.setDisplayPreferencesDisplayFlag(!0),n.setPreferredPreferenceContainersOrder(["MeasurePreferences","SectionPreferences"]),o.push(n.subscribe("CATWebUXPreferences_GravitationalEffects",function(t){e.pad3DViewer&&e.pad3DViewer.getViewer()&&e.pad3DViewer.getViewer().currentViewpoint&&e.pad3DViewer.getViewer().currentViewpoint.control&&(e.pad3DViewer.getViewer().currentViewpoint.control.lockZ=t)})),o.push(n.subscribe("CATWebUXPreferences_ProjectionType",function(t){e.pad3DViewer&&e.pad3DViewer.getViewer()&&e.pad3DViewer.getViewer().currentViewpoint&&e.pad3DViewer.getViewer().currentViewpoint.setProjectionType(t)}));var a=i.getPreference("CATWebUXPreferences_GravitationalEffects","boolean");"boolean"==typeof a&&(e.pad3DViewer.getViewer().currentViewpoint.control.lockZ=a);var r=i.getPreference("CATWebUXPreferences_ProjectionType","int");0!==r&&1!==r||e.pad3DViewer.getViewer().currentViewpoint.setProjectionType(r)}})})})}))})},onSearch:function(e){var t={searchQuery:e};this.pad3DViewer.search(t)},onDestroy:function(){this.landingPage.destroy(),require("DS/PADUtils/PADSharedSettings").destroy()},_onChangeControlActivation:function(e){var t=require("DS/PADUtils/PADSettingsMgt"),i=require("DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext");this.debouncePrefSynchro?this.debouncePrefSynchro=!1:this._proxy.preferenceModification({name:"changeControlActivation",value:e});var n="top-right";n=sessionStorage.getItem("changeControlPosition3DNavigation")?sessionStorage.getItem("changeControlPosition3DNavigation"):t.getSetting("changeControlPosition"),!0===e?(i.show(),this.widget.addPreference({name:"changeControlPosition",defaultValue:n,type:"list",label:"changeControlPosition_label",options:[{label:"top-right_label",value:"top-right"},{label:"top-left_label",value:"top-left"},{label:"bottom-left_label",value:"bottom-left"},{label:"bottom-right_label",value:"bottom-right"}]})):(i.hide(),this.widget.addPreference({name:"changeControlPosition",type:"hidden",defaultValue:n}))}};return t.init(e),t}