define("UWA/Services/Auth/Adapter/Exposition",["UWA/Core","UWA/Utils","UWA/Json","UWA/Services/Auth/Adapter/Abstract","UWA/Controls/Popup"],function(t,e,n,i,o){"use strict";var r=i.extend({defaultOptions:{},hasIdentity:function(t,e){this.request("hasidentity",function(n){n?t():e("No identity found.")},e)},getIdentity:function(t,e){this.request("getidentity",t,e)},clearIdentity:function(t){this.request("clearidentity",t,t)},authenticate:function(e,n){var i=this;this.request("authenticate",function(r){"redirect"===r.type&&new o({url:r.url,events:{onClose:function(){i.hasIdentity(e,n)},onBlocked:function(){t.is(n)&&n("Unable to open popup due popup blocker.")}}}).open()},n)},toQueryString:function(){var e=this.options;return t.Utils.toQueryString(t.merge({auth:e.provider},e.data))},getActionUrl:function(n){var i=this.options,o=t.clone(i.data||{}),r=t.hosts.exposition+"/services/auth/"+n+"/"+i.provider;return r+=(r.indexOf("?")>-1?"&":"?")+e.toQueryString(o)},request:function(e,i,o){var r=this.getActionUrl(e);n.request(r,{cache:-1,onFailure:o,onComplete:function(n){t.is(n[e])?i(n[e]):o("Invalid Auth response.")}})}});return t.namespace("Services/Auth/Adapter/Exposition",r,t)});