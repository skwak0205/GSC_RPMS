define("UWA/Services/ControlParser",["UWA/Core","UWA/Element"],function(t,n){"use strict";var e,o=Object.create(null);function r(t,n){var e=t.getAttribute(n)||t.getAttribute("data-"+n);return t.removeAttribute(n),t.removeAttribute("data-"+n),e}function a(t,n){n||(n=t.prototype.name),o[n]=t}function u(n,e){var r,a,u,l,i=o[n];t.owns(o,n)?t.is(i,"string")?(a=e,u=(r=(r=i).split(" "))[0],l=r[1]?r[1].split("."):[],(window.require||window.curl)([u],function(t){l.forEach(function(n){t=t[n]}),a(null,t)})):e(null,i):e("Control "+n+" not found")}return a("UWA/Controls/Tag","uwa-tag"),a("UWA/Controls/Input Text","uwa-text"),a("UWA/Controls/Input Button","uwa-button"),a("UWA/Controls/Input File","uwa-file"),a("UWA/Controls/Input Select","uwa-select"),a("UWA/Controls/Input Checkbox","uwa-checkbox"),a("UWA/Controls/Input Radio","uwa-radio"),a("UWA/Controls/ColorPicker","uwa-colorpicker"),a("UWA/Controls/DatePicker","uwa-datepicker"),e={register:a,parse:function(e,o){o||(o={});var a,l=n.getElements.call(e,"[uwa-control],[data-uwa-control]"),i=l.length,c={};function s(t,n,e,r){i--,e?(a=e,o.onError&&o.onError(e)):function(t,n){t.indexOf("[]",t.length-2)>-1?(t=t.slice(0,-2),c[t]||(c[t]=[]),c[t].push(n)):c[t]=n}(n,r),0===i&&(o.onComplete&&o.onComplete(c,a),!a&&o.onSuccess&&o.onSuccess(c))}l.forEach(function(n,e){var o,a,l;o=n,a=r(n,"uwa-control"),l=s.bind(null,e,r(n,"uwa-name")||"lostAndFound[]"),u(a,function(n,e){var r,u=function(t){var n=t.parentNode,e=t.nextSibling;return n&&n.removeChild(t),function(o){o||(o=t),o.inject?o.inject(e||n,e&&"before"):n.insertBefore(o,e)}}(o);if(!n){if(t.is(e,"class")){var i={element:o};o.className&&(i.className=o.className,o.className=""),r=new e(i)}else t.is(e,"function")&&(r=e(o));r?u(r):n="Can't build the control "+a}l(n,r)})})},_tests:{getControl:u}},t.namespace("Services/ControlParser",e,t)});