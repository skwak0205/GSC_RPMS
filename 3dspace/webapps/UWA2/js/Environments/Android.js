define("UWA/Environments/Android",["UWA/Core","UWA/String","UWA/Utils","UWA/Utils/Client","UWA/Element","UWA/Environment","UWA/Json","UWA/Data","UWA/Storage/Adapter/Android","UWA/Storage/Adapter/Object"],function(e,t,i,n,o,r,s,h){"use strict";e.is(window.jsProxy)?(h.allowCrossOriginRequest=!0,e.log=function(e){window.jsProxy.log("UWA:"+e)}):window.jsProxy={setData:function(){},getData:function(){},setPreferences:function(){},setTitle:function(){}},h.useOfflineCache=!0;var d=r.extend({name:"android",onInit:function(){var t=document.body,i=o.getElement.bind(t);this.android=window.jsProxy,this.html={viewport:window,wrapper:i(".module"),header:i(".moduleHeader"),content:i(".moduleWrapper"),body:i(".moduleContent"),edit:i(".moduleEdit"),footer:i(".moduleFooter"),counter:i(".counter"),title:i(".title"),icon:i(".icon"),shareAction:i(".share"),refreshAction:i(".refresh"),editAction:i(".edit")},this.html.scroller=e.createElement("div",{class:"moduleScroller"}).inject(this.html.content,"before"),this.html.content.inject(this.html.scroller),this.html.content.addEvent("resize",this.dispatchEvent.bind(this,"onResize"))},onResize:function(){var e=this.html,t=n.getSize(),i=e.content.getScrolls(),o=i.width,r=t.height,s=r+"x"+i.height;if(r>0&&s!==this.prevHeight&&(this.prevHeight=s,this.html.scroller&&(["header","footer"].forEach(function(t){r-=e[t]?e[t].offsetHeight:0}),i.height>r?(e.scroller.setStyle("height","auto"),e.scroller.setStyle("min-height",r+"px")):(e.scroller.setStyle("height",r+"px"),e.scroller.setStyle("min-height","")))),this.prevWidth===o)return!1;this.prevWidth=o},onInitConfig:function(){var e,t,i,n=this.data.currentAdapter.database,o=[],r=this.widget.getPreferences();for(e=0,t=r.length;e<t;e++)(i=r[e]).name="uwa-"+n+"-"+i.name,o.push(i);this.android.setPreferences(s.encode(o)),this.widget.data={}},onUpdateTitle:function(e){this._parent(e),this.android.setTitle(t.stripTags(e))}});return e.namespace("Environments/Android",d,e)});