define("UWA/Environments/Air",["UWA/Core","UWA/String","UWA/Utils","UWA/Element","UWA/Environment","UWA/Data","UWA/Storage/Adapter/Air","UWA/Storage/Adapter/Object"],function(i,n,e,t,o,r){"use strict";i.is(window.air)&&(i.log=function(i){air.trace(i)},r.allowCrossOriginRequest=!0,r.useJsonpRequest=!1),r.useOfflineCache=!0;var a=o.extend({name:"air",onInit:function(){var i=document.body,n=t.getElement.bind(i);this.html={wrapper:n(".module"),header:n(".moduleHeader"),content:n(".moduleWrapper"),body:n(".moduleContent"),edit:n(".moduleEdit"),footer:n(".moduleFooter"),counter:n(".counter"),title:n(".title"),icon:n(".icon"),shareAction:n(".share"),refreshAction:n(".refresh"),editAction:n(".edit")}},onResize:function(){var i=this.html.wrapper.getScrolls().height;i>0&&i!==this.prevHeight&&(this.prevHeight=i,window.nativeWindow&&(air.Capabilities.os.match(/windows/)&&(i+=5),window.nativeWindow.height=i,window.nativeWindow.height=i+(window.nativeWindow.height-window.nativeWindow.stage.stageHeight)))},onUpdateTitle:function(i){this._parent(i),window.nativeWindow&&(window.nativeWindow.title=n.stripTags(i))},onClose:function(){window.nativeWindow&&window.nativeWindow.close()},onMinimize:function(){window.nativeWindow&&window.nativeWindow.minimize()},onMaximize:function(){window.nativeWindow&&(this.maximized?window.nativeWindow.restore():(window.nativeWindow.maximize(),this.maximized=!0))},onMove:function(){window.nativeWindow&&window.nativeWindow.startMove()},onOpenURL:function(n){if(n=e.parseUrl(n),i.is(window.air)&&!n.subprotocol)try{return air.navigateToURL(new air.URLRequest(n.source)),!1}catch(e){i.log('Error during openExternalURL with url "'+n.source+'": '+e)}}});return i.namespace("Environments/Air",a,i)});