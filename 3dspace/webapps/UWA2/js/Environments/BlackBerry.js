define("UWA/Environments/BlackBerry",["UWA/Core","UWA/Utils","UWA/Element","UWA/Environment","UWA/Data","UWA/Storage/Adapter/Dom","UWA/Storage/Adapter/Cookies","UWA/Storage/Adapter/Object","UWA/Storage/Adapter/Html5"],function(e,t,r,n,i){"use strict";e.is(window.blackberry)&&(i.useJsonpRequest=!1,i.allowCrossOriginRequest=!0),i.useOfflineCache=!0;var o=n.extend({name:"blackberry",onInit:function(){var t=document.body,n=r.getElement.bind(t);this.html={viewport:window,wrapper:n(".module"),header:n(".moduleHeader"),content:n(".moduleWrapper"),body:n(".moduleContent"),edit:n(".moduleEdit"),footer:n(".moduleFooter"),counter:n(".counter"),title:n(".title"),icon:n(".icon"),shareAction:n(".share"),refreshAction:n(".refresh"),editAction:n(".edit")},this.html.scroller=e.createElement("div",{class:"moduleScroller"}).inject(this.html.content,"before"),this.html.content.inject(this.html.scroller),this.onResize()},initBlackBerryMenus:function(){if(e.is(window.blackberry)){var t=new blackberry.ui.menu.MenuItem(!0,0),r=new blackberry.ui.menu.MenuItem(!1,1,e.i18n("Edit"),this.dispatchEvent.bind(this,"toggleEdit")),n=new blackberry.ui.menu.MenuItem(!1,2,e.i18n("Refresh"),this.dispatchEvent.bind(this,"onRefresh")),i=new blackberry.ui.menu.MenuItem(!0,3);blackberry.ui.menu.clearMenuItems(),blackberry.ui.menu.addMenuItem(t),blackberry.ui.menu.addMenuItem(r),blackberry.ui.menu.addMenuItem(n),blackberry.ui.menu.addMenuItem(i),blackberry.ui.menu.setDefaultMenuItem(r)}},onRegisterWidget:function(e){this._parent(e),this.initBlackBerryMenus()},onResize:function(){var e=this.html,t=window.screen,r=e.content.getDimensions(),n=r.width,i=t.height,o=i+"x"+r.height;if(i>0&&o!==this.prevHeight&&(this.prevHeight=o,this.html.scroller&&(["header","footer"].forEach(function(t){i-=e[t]?e[t].offsetHeight:0}),r.height>i?(e.scroller.setStyle("height","auto"),e.scroller.setStyle("min-height",i+"px")):(e.scroller.setStyle("height",i+"px"),e.scroller.setStyle("min-height","")))),this.prevWidth===n)return!1;this.prevWidth=n},onOpenURL:function(r){if(r=t.parseUrl(r),e.is(window.blackberry)&&!r.subprotocol){var n=new blackberry.invoke.BrowserArguments(r.source);return blackberry.invoke.invoke(blackberry.invoke.APP_BROWSER,n),!1}}});return e.namespace("Environments/BlackBerry",o,e)});