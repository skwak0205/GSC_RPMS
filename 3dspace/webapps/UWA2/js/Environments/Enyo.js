define("UWA/Environments/Enyo",["UWA/Core","UWA/Internal/StringMap"],function(e,n){"use strict";e.Data.allowCrossOriginRequest=!1,e.Data.useOfflineCache=!0,e.extend(e.Environment.prototype,{name:"enyo",init:function(e){var t=this;this.data=new n,enyo.kind({name:"EnyoApp",kind:enyo.Control,components:[{kind:"AppMenu",components:[{kind:"EditMenu"},{caption:"Preferences",onclick:"toggleEdit"},{caption:"Refresh",onclick:"onRefresh"}]}],openAppMenu:function(){this.$.appMenu.open()},toggleEdit:function(){t.dispatchEvent("toggleEdit")},onRefresh:function(){t.dispatchEvent("onRefresh")}}),window.MyEnyoApp=new EnyoApp,this._parent(e)},onInit:function(){var n=e.extendElement(document.body),t=n.getElement.bind(n);this.html={wrapper:t(".module"),header:t(".moduleHeader"),title:t(".title"),icon:t(".icon"),refreshLink:t(".refresh"),editLink:t(".edit"),content:t(".moduleWrapper"),body:t(".moduleContent"),edit:t(".moduleEdit"),footer:t(".moduleFooter")},this.scroller||(this.scroller=new e.Controls.Scroller(this.html.content,{snap:!1,bounce:!0,lockDirection:!0,momentum:!0}),this.onResize()),e.Element.addEvent.apply(window,["resize",this.dispatchEvent.bind(this,"onResize")])},onRegisterWidget:function(){this.html.wrapper.handleExternalLinks(this.widget.openURL.bind(this.widget))},onResize:function(){var n=this.html,t=e.Utils.Client.getSize().height;["header","footer"].forEach(function(e){t-=n[e]?n[e].offsetHeight:0}),t!==this.prevHeight&&(this.prevHeight=t,this.scroller&&(this.scroller.setOptions({height:this.prevHeight}),this.scroller.onRefresh()))},onShowEdit:function(){this.scroller&&this.scroller.setPosition(0,0,0,!0),this.handleSelect()},onHideEdit:function(){this.scroller&&this.scroller.setPosition(0,0,0,!0)},onOpenURL:function(n){if(n=e.Utils.parseUrl(n),window.PalmServiceBridge&&!n.subprotocol)return(new window.PalmServiceBridge).call("palm://com.palm.applicationManager/open",JSON.stringify({id:"com.palm.app.browser",params:{target:n.source}})),!1},handleSelect:function(){var n=document.querySelectorAll("select"),t=function(e,n){var t,i,o,r=e.childNodes,l=[];for(t=0,i=r.length;t<i;t++)o=r[t],l.push({caption:o.innerHTML,value:o.value});(new(enyo.kind({kind:"HtmlContent",components:[{kind:"ListSelector",onChange:"onChangeValue",className:"listSelector",value:e.value,items:l}],onChangeValue:function(n,t){t!==e.value&&(e.value=t,"function"==typeof e.onchange&&e.onchange.call())}}))).renderInto(n),e.hide(),e.inject(n)};if(n)for(var i=0,o=n.length;i<o;i++){var r=e.extendElement(n[i]),l=r.getParent();t(r,l)}}})});