define("UWA/Controls/Notify",["UWA/Core","UWA/Controls/Abstract","UWA/Event","UWA/Fx"],function(t,e,s,n){"use strict";var i=e.extend({defaultOptions:{className:"",showOnInject:!0,closeOnClick:!0,transition:"quadOut",duration:500,fx:!0,from:"top",to:"bottom",max:0},messages:null,init:function(t){this.messages=[],this._parent(t),this.options.messages&&this.addMessage(this.options.messages),this.buildSkeleton()},buildSkeleton:function(){var e=this.elements,s=this.options;e.container=t.createElement("div",{class:"uwa-notify",events:{resize:this.dispatchAsEventListener("onResize")}}),s.className&&e.container.addClassName(s.className)},showMessage:function(t){var e,s,n=this.messages;return(s=t?(s=n.indexOf(t))>-1&&n.splice(s,1)[0]:n.shift())&&(e=this.injectItem(s)),e},addMessage:function(t,e){this.messages.push(t),e&&this.showMessage(t)},addMessages:function(t){var e=this;t.forEach(function(t){e.messages.push(t)})},getItems:function(){return this.getContent().getElements(".uwa-notify-item")},injectItem:function(e){var i,o,a=this,c=a.options,l=a.getContent(),r=a.getItems(),h=l.getOffsetParent().getDimensions(),u=0,m={},f={};return(o=t.createElement("div",{class:"uwa-notify-item",html:{tag:"div",class:"uwa-notify-msg",html:[{tag:"div",class:"uwa-notify-header"},{tag:"a",class:"uwa-notify-close",text:"Ã—",href:"#close"},{tag:"div",class:"uwa-notify-body",html:e},{tag:"div",class:"uwa-notify-footer"}]},styles:{visibility:"hidden",zIndex:String(100-r.length)}})).addEvent("click",function(t){var e="onClick";s.getElement(t).hasClassName("uwa-notify-close")&&(e="onClose"),a.dispatchEvent(e,[t,o])}),r.forEach(function(t){u+=t.getDimensions().outerHeight}),o.inject(l),a.updateItems(),o.getPosition(),i=o.getDimensions(),"top"===c.to?f.top=u+"px":"bottom"===c.to&&(f.top=h.innerHeight-i.outerHeight-u+"px"),"top"===c.from?m.top=-i.outerHeight+"px":m.top=i.outerHeight+h.outerHeight+"px",o.setStyles({left:h.innerWidth/2-i.width/2+"px",visibility:"visible"}),c.fx?(c.fade&&(m.opacity=0,f.opacity=1),o.setStyles(m),new n(o,{transition:c.transition,duration:c.duration,events:{onStart:function(){o.addClassName("moving")},onComplete:function(){o.removeClassName("moving")}}}).start(f)):o.setStyles(f),o},updateItems:function(){var t=this.options,e=this.getContent(),s=this.getItems(),n=e.getOffsetParent().getDimensions(),i=0;s.forEach(function(e){var s,o=e.getDimensions();"top"===t.to?s=i:"bottom"===t.to&&(s=n.innerHeight-o.outerHeight-i),i+=o.outerHeight,e.hasClassName("moving")||e.setStyles({left:n.innerWidth/2-o.width/2+"px",top:s+"px"})})},onPostInject:function(){this.options.showOnInject&&this.showMessage()},onResize:function(){this.updateItems()},onClose:function(t,e){var i=this;s.stop(t),e.hasClassName("closing")||new n(e,{events:{onStart:function(){e.addClassName("closing")},onComplete:function(){e.destroy(),i.updateItems()}}}).fade("out")},onClick:function(t,e){var n=s.getElement(t);(this.options.closeOnClick||n.hasClassName("uwa-notify-close"))&&this.dispatchEvent("onClose",[t,e])}});return t.namespace("Controls/Notify",i,t)});