define("UWA/Controls/FeedView/Channel",["UWA/Core","UWA/String","UWA/Controls/FeedView/Carousel","UWA/Controls/Pager","UWA/Event"],function(e,t,n,i,s){"use strict";var a=n.extend({eltMargin:20,displayPager:!1,viewName:"carousel channel",showItem:function(e){this._parent(e),this.presentedItem&&this.presentedItem.remove(),this.presentedItem=void 0,this.loadItemsImages()},buildItemImage:function(n,i){var s=this.options,a=s.images,r=n[i]||"",o=e.createElement("img"),l="",d=e.createElement("div",{class:"hentry"}),h=e.createElement("div",{class:"entry-image",html:o}),c=e.createElement("div",{class:"entry-title",html:{tag:"span",class:"title",html:n.title?t.stripTags(n.title):""}}),m=e.createElement("div",{class:"entry-share"}),p=e.createElement("div",{class:"item-date",text:n.date?t.parseRelativeTime(n.date.toString()):""}),g=e.createElement("div",{class:"item-dragAndFollow"}),u="",f=this.resizeItemImage.bind(this,d);return l=n.description||n.content||"",n[i]||(m.addClassName("no-image"),c.addClassName("no-image"),l=t.stripTags(l),l=t.cut(l,125),u=e.createElement("span",{class:"entry-description",text:l}),c.appendChild(u)),s.enableShare&&(s.shareFunction&&m.addEvent("click",this.share.bind(this)),h.appendChild(m)),d.appendChild(h),h.appendChild(c),d.appendChild(p),s.enableDragAndFollow&&d.appendChild(g),this.addItemImage({item:n,container:d,src:r,onLoad:function(){o.setAttribute("src",r),f()},onError:function(){o.destroy()},onLoading:function(){o.setAttribute("src",a.loader),f()}}),d},onResize:function(){this._parent();var e=this.elements.items.getChildren(),t=0;e.forEach(function(e){t+=e.offsetWidth+this.eltMargin},this),this.elements.items.setStyle("width",t+"px"),this.refreshScroller(),this.pager&&this.refreshPager()},buildPager:function(t){if(this.displayPager){var n=this,s=e.merge({_root:!1,events:{onOffsetChange:function(e){var t=n.options.source.getItems();n.showItem(t[e])}}},n.options.pager);n.pager=new i(s),n.pager.inject(n.container,t)}},share:function(e){s.stopPropagation(e),this.options.shareFunction()}});return e.namespace("Controls/FeedView_Channel",a,e)});