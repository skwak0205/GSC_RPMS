define("UWA/Controls/AutocompleteAdaptors/Data",["UWA/Core","UWA/Controls/AutocompleteAdaptors/Abstract","UWA/Json","UWA/Data","UWA/String","UWA/Promise"],function(t,e,n,r,o,a){"use strict";var i;return i=e.extend({options:{url:null,dataParser:null,format:"{name}",minLength:1},dataCache:null,init:function(t){this._parent(t),this.dataCache={}},getSuggestions:function(t){var e,n=this,o=n.dataCache;return new a(function(a,i){t.length>=n.options.minLength?o[t]?a(o[t]):n.options.url&&(e=n.options.url.replace("{text}",t),r.request(e,{method:"GET",type:"text",onComplete:function(e){(e=n.dataParse(e)).length>0&&(o[t]=e),a(e)},onFailure:i,onTimeout:i})):a([])})},renderSuggestion:function(t){var e=t.fullValue;return this.options.format.replace(/\{(\w+)\}/g,function(n,r){return o.escapeHTML(t[r]||e)})},dataParse:function(e){var r,o,a,i=this.options.dataParser;if(t.is(i,"function"))e=i(e);else{if(n.isJson(e))e=n.decode(e),a=!0;else for(r in e=n.xmlToJson(e))if(e.hasOwnProperty(r)){e=e[r];break}for(r in e)if(e.hasOwnProperty(r)&&(o||(o=r),Array.isArray(e[r]))){e=e[r],a=!0;break}!a&&o&&(e=[e[o]])}return Array.isArray(e)?e:[]}}),t.namespace("Controls/AutocompleteAdaptors/Data",i,t)});