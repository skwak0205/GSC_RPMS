define("UWA/Controls/Web",["UWA/Core","UWA/Utils","UWA/Controls/Abstract","UWA/Class/Timed"],function(e,t,s,n){"use strict";var a=function(){var e,t,s={};for(e=0,t=arguments.length;e<t;e++)s[arguments[e]]=!0;return s}("www.skateslate.com","www.pravdareport.com","blog.alteroot.org"),i=s.extend(n,{defaultOptions:{url:"about:blank",width:"100%",height:"",className:"uwa-web",scrolling:"auto",border:!1,sandbox:!1,withMessage:!1,unsecureWarningMessage:null},init:function(e){this._parent(e),this._frameOnload=this.dispatchAsEventListener("onLoad"),this.buildSkeleton()},buildSkeleton:function(){var t,s,n=this.elements,a=this.options;s={width:a.width,height:a.height,scrolling:a.scrolling,frameborder:a.border?1:0},a.sandbox&&(s.sandbox="allow-same-origin allow-forms allow-scripts allow-popups"),a.url||(a.url="about:blank"),n.container=e.createElement("div",{class:a.className}),n.iframe=t=e.createElement("iframe",s),t.onerror=this.dispatchAsEventListener("onError"),a.withMessage&&(n.container.addContent(e.createElement("div",{class:"uwa-web-message",html:n.loadingMessage=e.createElement("p",{class:"loading-message"})})),this.addEvent("onLoad",function(){this._shouldClearMessage()?n.loadingMessage.empty():this.setDelayed("websitemessage",function(){n.loadingMessage.setText(e.i18n("This website prevents embedding via iframe."))},1e3)}.bind(this))),n.container.addContent(t),this.setSrc(a.url)},setSrc:function(t){this._isSecureIFrame(t)?(this.elements.iframe.src=t,this.elements.iframe.addEvent("load",this._frameOnload),this.options.withMessage&&("about:blank"===t?this.elements.loadingMessage.empty():this.elements.loadingMessage.setText(e.i18n("Loadingâ€¦")))):(this.elements.iframe.removeEvent("load",this._frameOnload),this.elements.iframe.src="about:blank",this.elements.loadingMessage.setText(this.options.unsecureWarningMessage||e.i18n("This app is trying to load unsecure content.")))},setIFrameHeight:function(e){this.elements.iframe.setStyle("height",e)},isBlank:function(){return"about:blank"===this.elements.iframe.src},getIFrame:function(){return this.elements.iframe},_isSecureIFrame:function(e){var s=t.parseUrl(window.location.href),n=t.parseUrl(e);return"http"===s.protocol||s&&"https"===s.protocol&&n&&"https"===n.protocol},_shouldClearMessage:function(){var s=this.elements.iframe.src;if(this.isBlank()||/\.(png|jpe?g|gif|txt)$/i.test(s))return!0;var n=t.parseUrl(s).domain;return e.owns(a,n)}});return e.namespace("Controls/Web",i,e)});