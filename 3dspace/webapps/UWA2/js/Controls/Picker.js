define("UWA/Controls/Picker",["UWA/Core","UWA/Utils","UWA/Event","UWA/Class/Timed","UWA/Controls/Input","UWA/Controls/DropDown","UWA/Element"],function(t,n,e,o,i,s,a){"use strict";var l=i.extend(o,{name:"uwa-picker",options:{navigation:null,button:null,valueInput:"text",dropdownOptions:{global:!0},dropdownContainer:null},buildSkeleton:function(){var n=this.options,e=this.elements;this._parent(),n.valueInput&&n.button?e.content.addClassName(this.getClassNames("-split")):n.button?e.container.addClassName("button-only"):n.valueInput&&e.container.addClassName("value-only"),n.valueInput&&(e.content.setContent(e.value=t.createElement("div",{class:this.getClassNames("-value")})),"text"===n.valueInput&&e.value.addClassName(this.getClassNames("-text"))),n.button&&e.content.addContent(e.button=t.createElement("div",{class:this.getClassNames("-button"),html:n.button}))},buildContent:function(){},buildNavigation:function(e){return n.splat(e).map(function(n){return t.is(n,"element")?n:this.buildNavigationItem(n)},this)},buildNavigationItem:function(n){var e=this;return t.createElement("div",{text:n.label,class:this.getClassNames("-navigationlink"),events:{click:function(t){e.dispatchEvent("onNavigationClick",[t,n])}}})},syncInput:function(){var t=this.elements.value;t!==this.elements.input&&t.setText(this.getValue())},isOpen:function(){return Boolean(this.elements.dropdown&&this.elements.dropdown.isOpen())},focus:function(t){var n=this,e=n._parent;setTimeout(function(){var o=document.activeElement,i=n.elements.dropdown;o&&i&&a.isInjected.call(o,i.getInnerElement())?a.addEvent.call(o,"blur",function t(){a.removeEvent.call(o,"blur",t),n.focus(!1)}):(e.call(n,t),!1===t&&n.toggle(t))},0)},open:function(){return this.toggle(!0)},close:function(){return this.toggle(!1)},toggle:function(n){var o=this.elements,i=this.options;if((!0===n||void 0===n)&&!o.dropdown){var a=t.extend({target:o.button||o.content,autoPosition:["below-end","right-start","above-end","left-start"]},i.dropdownOptions);a._root=!1,a.className=this.getClassNames("-dropdown")+" "+(a.className||""),o.dropdown=new s.Pointy(a).addEvents({onShow:this.dispatchEvent.bind(this,"onOpen"),onHide:this.dispatchEvent.bind(this,"onClose")}),i.navigation&&(o.navigation=t.createElement("div",{class:this.getClassNames("-navigation"),html:this.buildNavigation(this.options.navigation)})),o.dropdown.getInnerElement().addEvent("mousedown",e.stopPropagation).addEvent("click",e.stopPropagation).addContent({tag:"div",class:this.getClassNames("-selector"),html:this.buildContent()},o.navigation),o.dropdown.inject(i.dropdownContainer||o.container)}o.dropdown&&o.dropdown.toggle(n)},onClick:function(){this.setDelayed("debounced-toggle",this.toggle,1)},onOpen:function(){this.elements.container.addClassName("open")},onClose:function(){this.elements.container&&this.elements.container.removeClassName("open")},onNavigationClick:function(t,n){this.setValue(n.value)}});return t.namespace("Controls/Picker",l,t)});