define("UWA/Controls/EnhancedTextarea",["UWA/Core","UWA/Class/Timed","UWA/Controls/Input"],function(t,e,n){"use strict";var s;return s=n.Text.extend(e,{name:"uwa-enhanced-textarea",options:{autoGrow:!1},_hiddenInput:!0,buildInput:function(){return t.createElement("textarea")},buildSkeleton:function(){this._parent();var e=this.elements;e.input.removeClassName("uwa-input-text"),e.caret=t.createElement("span",{class:this.getClassNames("-caret")}),e.input.addEvents({scroll:this.syncScroll.bind(this),mouseup:this.syncInput.bind(this),paste:this.syncInput.bind(this)}),e.container.addClassName("uwa-input-text").grab(e.input),this.isAutoGrow()&&e.container.addClassName("autogrow")},getCaretElement:function(){return this.elements.caret},isAutoGrow:function(){return this.options.autoGrow},syncInput:function(){this.setAnimate("sync-input",function(){var t=this.elements;t.content.empty(!0).addContent(this.buildContentMimic(),"Â "),this.isAutoGrow()?t.content.offsetHeight!==t.container.offsetHeight?(t.container.setStyle("height",t.content.offsetHeight),this.dispatchEvent("onResize")):(this.syncScroll(),this._hideInputScroll()):this.syncScroll()})},buildContentMimic:function(){var t=this.elements,e=this.getValue(),n=t.input.selectionStart,s=e.slice(0,n),i=e.slice(n);return[s,t.caret,i]},_hideInputScroll:function(){if(this.isAutoGrow()){var t=this.elements.input;t.setStyles({overflow:t.offsetHeight===t.scrollHeight?"hidden":null})}},syncScroll:function(){this.elements.content.scrollTop=this.elements.input.scrollTop},onMouseDown:function(){}}),t.namespace("Controls/EnhancedTextarea",s,t)});