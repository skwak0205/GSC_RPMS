define("UWA/Controls/Flash",["UWA/Core","UWA/Utils","UWA/Controls/Abstract"],function(e,t,a){"use strict";var s=a.extend({id:null,defaultOptions:{url:"",width:320,height:240,className:"uwa-swf",pluginspage:"http://www.macromedia.com/go/getflashplayer",flashVars:"",scale:"exactfit",wmode:"opaque",quality:"hight",allowScriptAccess:"sameDomain",bgcolor:!1,allowfullscreen:"true"},flashVersion:null,init:function(e){this._parent(e),e=this.options,this.id=e.id||t.random(10),this.flashVersion=this.detectFlashVersion(),this.buildSkeleton()},buildSkeleton:function(){function a(e){return String(e).replace(/(&amp;)|(&)/g,"%26")}var s,i,l,n=window.navigator,o=this.elements,r=this.options,c=r.flashVars||"",h=a(r.url||"");if(this.container=o.container=e.createElement("div",{class:r.className}),e.is(c,"string")||(c=a(t.toQueryString(c))),n.plugins&&n.mimeTypes&&n.mimeTypes.length)o.flashTag=e.createElement("embed",{id:this.id,type:"application/x-shockwave-flash",src:h,width:r.width,height:r.height,pluginspage:r.pluginspage,flashvars:c,scale:r.scale,quality:r.quality,allowScriptAccess:r.allowScriptAccess,wmode:r.wmode,allowfullscreen:r.allowfullscreen});else{for(i in l=[],s={movie:h,flashvars:c,quality:r.quality,allowScriptAccess:r.allowScriptAccess,wmode:r.wmode,allowfullscreen:r.allowfullscreen})s.hasOwnProperty(i)&&l.push({tag:"param",name:i,value:s[i]});o.flashTag=e.createElement("object",{id:this.id,width:r.width,height:r.height,classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",html:l})}return o.flashTag.inject(o.container),this.object=o.flashTag,0===this.flashVersion.major&&e.createElement("p",{text:e.i18n("You need Adobe Flash to display this Content."),styles:{textAlign:"center"}}).inject(o.container),this.container},getFlashContainer:function(){return void 0===this.object&&this.getContent(),this.object},getFlashVersion:function(){return this.flashVersion},detectFlashVersion:function(){var e,t,a,s=[0,0,0];if(navigator.plugins&&navigator.mimeTypes.length)(a=navigator.plugins["Shockwave Flash"])&&a.description&&(s=a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0)for(e=1,t=3;e;)try{t++,e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t),s=[t,0,0]}catch(t){e=null}else{try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),s=[6,0,21],e.AllowScriptAccess="always"}catch(e){if(6===s.major)return s}try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){e=null}}null!==e&&(s=e.GetVariable("$version").split(" ")[1].split(","))}return{major:s[0],minor:s[1],rev:s[2]}}});return e.namespace("Controls/Flash",s,e)});