define("UWA/String",["UWA/Core","UWA/Internal/Deprecate"],function(UWA,Deprecate){"use strict";var Module={},isEmailRegExp,escapeSimpleComment,escapeMultiComment,alphaUpperRegExp,separatorDotRegExp,separatorRegExp,alphaRegExp,alphaUppperLowerRegExp,numRegExp;function parseColorToArray(e){var r,t,a=!1,n=(e=e.replace(/\s+/g,"")).match(/^rgb(a?)\(((?:\d{1,3},)*\d{1,3})\)/);if(n)a=n[2].split(",").map(function(e){return parseInt(e,10)}),(!n[1]&&3!==a.length||n[1]&&4!==a.length)&&(a=!1);else if(n=e.match(/^#?((?:[a-f0-9]{3}){1,2})$/i)){r=3===n[1].length?1:2,a=[];for(var i=0;i<n[1].length;i+=r)t=parseInt(n[1].substr(i,r),16),1===r&&(t=16*t+t),a.push(t)}else"transparent"===e&&(a=[0,0,0,0]);return a}function FakeString(){return Deprecate.warn("UWA/String as a constructor","Use the native String instead."),String.apply(null,arguments)}return Module.isEmail=(isEmailRegExp=/^([a-zA-Z0-9_.\-+])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,function(e){return isEmailRegExp.test(e)}),Module.truncate=function(e,r,t){return r=r||30,t=void 0===t?"...":t,e.length>r?e.slice(0,r-t.length)+t:String(e)},Module.cut=function(e,r,t){if(r=r||30,t=void 0===t?"...":t,e.length<=r)return String(e);var a,n=-1,i=t.length;for(a=r-i;a>=0;a--)if(-1!==".,;!? ".indexOf(e.charAt(a))){n=a;break}return n<0&&(n=r-i),e.slice(0,n)+t},Module.escapeRegExp=function(e){return e.replace(/\\/g,"\\\\").replace(/([-.*+?^$()[\]{}|])/g,"\\$1")},Module.stripTags=function(e){return e.replace(/ on\w+="[^"]*"/g,"").replace(/<(?!\s*\/?\s*(div|br|dt|dd|th|td|p|pre|h1|h2|h3|h4|h5)\b)[^>]*>/gi,"").replace(/<\/?[^>]+>/gi," ").replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},Module.stripScripts=function(string,evaluate){var scripts="",text=string.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(e,r){return scripts+=r+"\n",""});return!0===evaluate?eval(scripts):UWA.is(evaluate,"function")&&evaluate(scripts.trim(),text),text},Module.stripComments=(escapeSimpleComment=/^\/\/.*/gm,escapeMultiComment=/^\/\*[\S\s]*?\*\//gm,function(e){return e.replace(escapeSimpleComment,"").replace(escapeMultiComment,"")}),Module.escapeHTMLEntities=function(){var e={},r={apos:39,minus:8722,circ:710,tilde:732,Scaron:352,lsaquo:8249,OElig:338,lsquo:8216,rsquo:8217,ldquo:8220,rdquo:8221,bull:8226,ndash:8211,mdash:8212,trade:8482,scaron:353,rsaquo:8250,oelig:339,Yuml:376,yuml:255,fnof:402,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,sbquo:8218,bdquo:8222,dagger:8224,Dagger:8225,hellip:8230,permil:8240,prime:8242,Prime:8243,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830,quot:34,amp:38,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,hibar:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254};function t(r){return e[r]||(e[r]=new RegExp("&"+r+";","g")),e[r]}return function(e){var a,n;if(function(e){return e.match(/&([a-z]+;)/gi)}(e))for(a in r)r.hasOwnProperty(a)&&(n=t(a),e=e.replace(n,"&#"+r[a]+";"));return String(e)}}(),Module.globToRegex=function(e){var r=Module.escapeRegExp(e).replace(/\\\*/g,".*").replace(/\\\?/g,".").replace(/\\\{/g,"(").replace(/\\\}/g,")").replace(/,/g,"|");return new RegExp("^"+r+"$")},Module.escapeHTML=function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},r=/[&<>"'/]/g,t=/[<>/]/g;function a(r){return e[r]}return function(e,n){return String(e).replace(n?t:r,a)}}(),Module.unescapeHTML=function(e){var r=document.createElement("div");return r.innerHTML=Module.stripTags(e).replace(/"/g,"&quot;"),r.childNodes[0]?r.childNodes[0].nodeValue:""},Module.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},Module.lcfirst=function(e){return e.charAt(0).toLowerCase()+e.substr(1)},Module.capitalize=function(e){for(var r=e.toUpperCase(),t=e.toLowerCase(),a=!1,n="",i=0;i<e.length;i++)r[i]===t[i]?(n+=e[i],a=!1):a?n+=e[i]:(n+=r[i],a=!0);return n},Module.camelCase=(alphaUpperRegExp=/([A-Z]+)/g,separatorDotRegExp=/[-_\s](.)/g,separatorRegExp=/[-_\s]/g,function(e){return e=String(e).replace(alphaUpperRegExp,function(e,r){return r.substr(0,1).toUpperCase()+r.toLowerCase().substr(1,r.length)}).replace(separatorDotRegExp,function(e,r){return r.toUpperCase()}).replace(separatorRegExp,"").trim(),Module.lcfirst(e)}),Module.unCamelCase=(alphaRegExp=/([a-z])([A-Z])/g,alphaUppperLowerRegExp=/\b([A-Z]+)([A-Z])([a-z])/,function(e,r){return r=r||"-",e.toString().replace(alphaRegExp,"$1"+r+"$2").replace(alphaUppperLowerRegExp,"$1"+r+"$2$3").toLowerCase()}),Module.rgbToHex=function(e,r){var t=parseColorToArray(e);return t&&(t=r?t.map(function(e){return parseInt(e.toString(16),10)}):0===t[3]?"transparent":"#"+t.slice(0,3).map(function(e){return("0"+e.toString(16)).slice(-2)}).join("")),t},Module.hexToRgb=function(e,r){var t=parseColorToArray(e);return t&&!r&&(t=(3===t.length?"rgb(":"rgba(")+t.join(", ")+")"),t},Module.format=(numRegExp=/\{(\d+)\}/g,function(e){var r=arguments;return e.replace(numRegExp,function(e,t){return r[Number(t)+1]})}),Module.parseRelativeTime=function(e,r){var t,a,n,i,u=new Date,o=UWA.i18n;return u=new Date(u.getFullYear(),u.getMonth(),u.getDate()).getTime(),"number"!=typeof r&&(r=0),a=(t=e.match(/^(\d\d\d\d)-(\d\d)-(\d\d) (\d\d):(\d\d):(\d\d)$/))?new Date(t[1],t[2]-1,t[3],t[4],t[5],t[6]).getTime():/^\d{13}$/.test(e)?parseInt(e,10):/^\d{10}$/.test(e)?1e3*parseInt(e,10):Date.parse(e.replace(/\//g,"-")),r*=3600,n=(new Date-a)/1e3+r,i=(u-a)/1e3+r,!isNaN(n)&&(n<60?o("less than a minute ago"):n<120?o("about a minute ago"):n<2700?Module.format(o("{0} minutes ago"),Math.round(n/60)):n<5400?o("about an hour ago"):i<0?Module.format(o("about {0} hours ago"),Math.round(n/3600)):i<86400?o("yesterday"):Module.format(o("{0} days ago"),Math.ceil(i/86400)))},Module.makeClickable=function(e){var r=/((\w+:\/\/(\w+(:\w+)?@)?)|\bwww\.)[^\s<$]+/,t=/([/:\w+_-]+(\.[\w+_-]+)*@[\w.-]+)/;return e.replace(/(^|[\s>])([^\s<>"']+?)(?=$|[\s<])/gm,function(e,a,n){if(r.test(n)){var i=n.replace(/([.!?:)\]]$)/,""),u=n;return/^www\./.test(i)&&(i="http://"+i),a+'<a href="'+i+'" target="_blank">'+u+"</a>"}if(t.test(n)){var o=n;return/^[\w]+:\/\//.test(o)||(o='<a href="mailto:'+o+'">'+o+"</a>"),a+o}return e})},Module.contains=function(e,r,t){var a;return UWA.is(t,"string")?(e=t+e+t,r=t+r+t):UWA.is(t,"number")&&(a=t),-1!==e.indexOf(r,a)},Module.highlight=function(e){return Deprecate.warn("UWA.String.highlight"),e},Module.test=function(e,r,t){return Deprecate.warn("UWA.String.test","Use regexp.test(string) instead"),("string"==typeof r?new RegExp(r,t):r).test(e)},Deprecate.uncurryAlias(Module,String.prototype,"UWA.String","String"),Object.assign(FakeString,Module),UWA.namespace("String",FakeString,UWA)});