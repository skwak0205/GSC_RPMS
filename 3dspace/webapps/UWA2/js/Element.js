define("UWA/Element",["UWA/Internal/Deprecate","UWA/Core","UWA/String","UWA/Array","UWA/Utils","UWA/Utils/Client","UWA/Dispatcher","UWA/Json","UWA/Event","vendors/webcomponents/MutationObserver"],function(t,e,n,i,r,o,a,s,l,c){"use strict";var d=Boolean("object"==typeof MooTools&&MooTools.version),h=o.getVendorProperty,u=document.documentElement,f=function(e,n){return t.warn("new Element(...)","Use Element.create instead"),f.create(e,n)};f.create=function(){return function(t,n){var i=function(t,e){var n,i;return"iframe"===t&&e&&void 0!==e.name?((n=document.createElement("div")).innerHTML="<"+t+' name="'+e.name+'"/>',i=n.firstChild,delete e.name):"object"===t&&e&&void 0!==e.classid?(e.html?(i=document.createElement("div"),f.setHTML.call(i,e.html),i=f.getHTML.call(i)):i="",(n=document.createElement("div")).innerHTML="<"+t+' classid="'+e.classid+'">'+i+"</"+t+">",i=n.firstChild,delete e.html,delete e.classid):i=document.createElement(t),i}(t,n);return f.extend(i),e.is(n,"object")&&f.set.call(i,n),i}}(),f.extend=function(){function n(e){var n="#document"===e.nodeName;for(var i in n&&t.warn("UWA.extendElement(document)"),f)f.hasOwnProperty(i)&&"create"!==i&&"extend"!==i&&(n&&i in e||(e[i]=f[i]))}var i={getProperty:window.Element.prototype.getProperty,getSize:function(){var t;return(t="body"===f.getTagName.call(this)?e.Utils.Client.getSize():f.getSize.call(this)).x=t.width,t.y=t.height,t},getCoordinates:function(t){var e=t?this.getPosition(t):this.getOffsets(),n=this.getSize(),i={left:e.x,top:e.y,width:n.x,height:n.y};return i.right=i.left+i.width,i.bottom=i.top+i.height,i}};return function(t){return t&&!t._isUwaExtended&&(d?function(t){delete t.fireEvent,n(t),e.extend(t,i)}(t):n(t),t._isUwaExtended=!0),t}}(),e.createElement=f.create,e.extendElement=f.extend;var m,g,p,v=(m=document.createElement("div"),g=/(^|,)/g,p=/(?:^|,)\s*[>+~]/,function(t,e,n,i){var r,o,a,s,l=i||p.test(e);return l?(n?(o=n.parentNode,s="uwa-private-get-element-selector-root-"+(1e8*Math.random()|0),n.setAttribute(s,"true"),r="["+s+"] ",i||o||(o=f.extend(m).grab(n))):(r="* ",o=n),e=e.replace(g,"$1"+r)):o=n,a=i?(f[t]||i[t]).call(i,e):(f[t]||o[t]).call(o,e),n&&l&&(n.removeAttribute(s),o===m&&o.removeChild(n)),a});function y(t){var e=t?t.indexOf(" "):-1;return e<0?{name:t}:{name:t.slice(0,e),selector:t.slice(e+1)}}var w,b,x,E,C,S,T,W,L=a.extend({Binding:a.Binding.extend({delegates:null,direct:!1,element:null,init:function(){this._parent.apply(this,arguments),this.delegates=[]},addDelegate:function(t){t?this.delegates.push(t):this.direct=!0},removeDelegate:function(t){t?this.delegates=this.delegates.filter(function(e){return e!==t}):this.direct=!1,this.direct||this.delegates.length||this.detach()},execute:function(t,e){var n,i,r,o;if(this.active){if(this.delegates.length)for(n=this.delegates.join(","),i=t[0],r=l.getElement(i);r&&r!==this.element&&!1!==o;)f.match.call(r,n,this.element)&&(i._uwaTarget=r,o=this._parent(t,e),i._uwaTarget=null),r=r.parentNode;this.direct&&!1!==o&&(o=this._parent(t,e))}return o},destroy:function(){this._parent(),delete this.element}}),init:function(t){this._parent(),this.element=t},addDelegation:function(t,e,n,i){var r=this.add(t,n,i);return r.addDelegate(e),r.element=this.element,r},removeDelegation:function(t,e){if(t){var n=this.bindings[this.indexOfListener(t)];n&&n.removeDelegate(e)}else i.invoke(this.bindings.slice(),"removeDelegate",e)},dispose:function(){this._parent(),delete this.element}});function O(t){var e="string"==typeof t.className?t.className:t.getAttribute("class");return e||""}function D(t,e){"string"==typeof t.className?t.className=e:t.setAttribute("class",e)}function N(t,e){"function"==typeof e?e=e():void 0===e&&(e=h(u,"on{}"+t,!0))&&(e=e.slice(2)),t!==e&&(f.Events[t]=function(n,i){if(!e)throw new Error("The event "+t+" is not supported on this platform");f.addEvent.call(i,e,n.handleEvent,!0),n.events[e]=n.handleEvent})}function H(){window.document&&(window.document.body&&e.extendElement(window.document.body),window.document.documentElement&&e.extendElement(window.document.documentElement))}return Object.assign(f,{set:function(t,i){var r,o;if(W||(W={html:f.setHTML,events:f.addEvents,id:function(t){this.id=t},class:function(t){this.className=t},value:function(t){this.value=t}},["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"].forEach(function(t){W[t.toLowerCase()]=function(e){this[t]=Boolean(e)}})),e.is(t,"object"))for(r in t)t.hasOwnProperty(r)&&f.set.call(this,r,t[r]);else o=f["set"+n.capitalize(t)],e.is(o,"function")?o.apply(this,Array.prototype.slice.call(arguments,1)):W.hasOwnProperty(t)&&!1!==W[t].call(this,i)||this.setAttribute(t,i);return this},setAttributes:function(t){var e;for(e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},getTagName:function(){var t=this.tagName||this.nodeName;return t?t.toLowerCase():""},setText:function(t){return f.empty.call(this),f.appendText.call(this,t)},appendText:function(t){var e=f.getDocument.call(this);return this.appendChild(e.createTextNode(t)),this},getText:function(){return"string"==typeof this.textContent?this.textContent:"string"==typeof this.innerText?this.innerText:""},setContent:function(){return f.empty.call(this),f.addContent.apply(this,arguments)},addContent:function(){return function(){var t=f.getDocument.call(this),n=t.createDocumentFragment();return function t(n,i,r){var o,a,s,l;for(e.is(n,"nodelist")&&(n=[].slice.call(n)),o=0,a=n.length;o<a;o++)if(l=n[o])if(l.nodeType)r.appendChild(l);else if("string"==typeof l||"number"==typeof l)if(/<|&#?\w+;/.test(l))for(s=i.createElement("div"),f.setHTML.call(s,l);s.firstChild;)r.appendChild(s.firstChild);else r.appendChild(i.createTextNode(l));else"function"!=typeof l.inject||Array.isArray(l)?"number"==typeof l.length?t(l,i,r):"object"==typeof l?(s=l.tag||"div",delete l.tag,r.appendChild(f.create(s,l)),l.tag=s):r.appendChild(i.createTextNode(l)):l.inject(r)}(arguments,t,n),this.appendChild(n),this}}(),setHTML:function(t){var i;if("string"!=typeof t)f.setContent.call(this,t);else try{i=n.escapeHTMLEntities(t).replace('<?xml version="1.0" encoding="UTF-8"?>',"").replace(/&(?!#?[a-z0-9]+;)/gi,"&#38;"),this.innerHTML=i}catch(i){e.log("UWA.Element.setHTML error cause: "+i+' with HTML value "'+t+'"');try{this.innerHTML=n.stripTags(String(t))}catch(e){f.setText.call(this,t)}}return this},getHTML:function(){var t=this.innerHTML;return o.Engine.ie&&(t=t.replace(/< *(\/ *)?(\w+)/g,function(t){return t.toLowerCase()})),t},inject:function(t,e){var n,i=f.getDocument.call(this);return"bottom"===(e=e||"bottom")?t.appendChild(this):"top"===e?t.insertBefore(this,t.firstChild):((n=t.parentNode)||11===t.nodeType||(n=i.createDocumentFragment()).appendChild(t),n&&("after"===e?n.lastChild===t?n.appendChild(this):n.insertBefore(this,t.nextSibling):"before"===e&&n.insertBefore(this,t))),this},grab:function(t,e){return f.inject.call(t,this,e),this},isInjected:u.contains?function(t){return(t=t||this.ownerDocument.documentElement)!==this&&(!t.contains||t.contains(this))}:u.compareDocumentPosition?function(t){return t=t||this.ownerDocument.documentElement,Boolean(16&t.compareDocumentPosition(this))}:function(t){var e=this;t=t||e.ownerDocument.documentElement;do{e=e.parentNode}while(e&&e.parentNode);return e===t},empty:function(t){for(var e;this.firstChild;)e=this.firstChild,t?f.destroy.call(e):this.removeChild(e);return this},remove:function(){var t=f.getParent.call(this);return t&&t.removeChild(this),this},destroy:function(){var t,e,n,i=f.remove,r=f.destroy,o=f.getChildren.call(this);for(e=0,n=o.length;e<n;e+=1)o[e].destroy&&r.call(o[e]);f.removeEvents.call(this),this!==(t=f.getDocument.call(this))&&this!==t.documentElement&&this!==t.body&&this!==f.getWindow.call(this)&&i.call(this)},getParent:function(t){var e=this.parentNode;if(t)for(;e&&1===e.nodeType&&!f.match.call(e,t);)e=e.parentNode;return e&&1!==e.nodeType&&(e=null),e?f.extend(e):null},getParents:function(t){for(var e=[],n=this;;){var i=n.getParent(t);if(!i)return e;e.push(i),n=i}},getClosest:function(t){return f.match.call(this,t)?this:f.getParent.call(this,t)},getChildren:function(){return Array.prototype.filter.call(this.childNodes,function(t){return 1===t.nodeType}).map(f.extend)},getDocument:function(){return 9===this.nodeType?this:this.ownerDocument||this.document},getWindow:function(){var t=f.getDocument.call(this);return t&&(t.defaultView||t.parentWindow)},getOffsetParent:function(){var t;function e(){var e=document.createElement("div"),n=document.createElement("div");e.style.height="0",e.appendChild(n),t=n.offsetParent===e}function n(t){return/^(?:body|html)$/i.test(t.tagName)}function i(t){return t&&("static"!==f.getStyle.call(t,"position")||n(t))}function r(t){return i(t)||/^(?:table|td|th)$/i.test(t.tagName)}return function(){var o,a=this,s=f.getDocument.call(a),l=a.offsetParent||s&&s.body,c=f.getStyle.call(a,"position");if(!n(a)&&"fixed"!==c)if(void 0===t&&e(),t){for(o="static"===c?r:i;void 0!==(a=a.parentNode);)if(o(a)){l=a;break}}else try{l=a.offsetParent}catch(t){}return l&&(l=f.extend(l)),l}}(),getElements:function(t){return Array.prototype.map.call(v("querySelectorAll",t,this),f.extend,e)},getElement:function(t){return f.extend(v("querySelector",t,this))},match:function(t,e){return v("matchesSelector",t,e,this)},hasClassName:function(t){var e=O(this);return Boolean(e&&n.contains(e,t," "))},addClassName:function(t){return f.hasClassName.call(this,t)||D(this,(O(this).trim()+" "+t).trim()),this},removeClassName:function(t){return D(this,O(this).replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)"),"$1").trim()),this},toggleClassName:function(t,n){var i=e.is(n)?n:!f.hasClassName.call(this,t);return e.Element[i?"addClassName":"removeClassName"].call(this,t)},setStyle:function(t,e){var n={};return n[t]=e,f.setStyles.call(this,n)},setStyles:function(){var t={},i={none:"",firefox:"-moz-",opera:"-o-",trident:"-ms-",webkit:"-webkit-"},r={columnCount:1,flex:1,flexGrow:1,flexShrink:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,widows:1,zIndex:1,zoom:1,fillOpacity:1,strokeOpacity:1};function a(t){var e=[];return t.replace(/['"]/g,"").split(",").forEach(function(t){e.push('"'+t.trim()+'"')}),e.join(", ")}function s(n){var r=function(e,n){var r,a,s,l,c=e+n;if(t[c])r=t[c];else{for(a in r=!1,l=document.createElement("div").style,i)if(s=i[a]+n,l[e]=s,l[e]===s&&""!==s&&!o.Engine.ie){r=s;break}t[c]=r}return r}("cursor",n);return n=!1!==r?r:o.Engine.opera?"move":"url("+e.hosts.uwa+e.paths.css+"/base/cursor/"+("grabbing"===n?"closedhand":"openhand")+".cur)"+(o.Engine.ie?"":" 4 4")+", move"}return function(t){var i,o,l,c,d=this.style,h=[];for(c in t)t.hasOwnProperty(c)&&(l=t[c],"opacity"===(c=n.camelCase(c))?f.setOpacity.call(this,l):(""!==l&&null!==l&&isFinite(l)&&void 0===r[c]?l+="px":"none"===l&&"userSelect"===c&&void 0!==d.MozUserSelect?l="-moz-none":"fontFamily"===c?l=a(l):"cursor"===c&&("grabbing"!==l&&"grab"!==l||(l=s(l))),h.push({name:f.getStyleName.call(this,c),value:l})));for(i=0,o=h.length;i<o;i++){c=h[i].name,l=h[i].value;try{d[c]=l||0===l?l:""}catch(t){e.log('Unable to set style "'+c+'" with value "'+l+'"')}}return this}}(),getStyle:function(t,e){return f.getStyles.call(this,[t],e)[t]},getStyles:function(){var t,e,n,i=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,r=/^margin/;return document.defaultView&&document.defaultView.getComputedStyle?t=function(t,n,o){var a,s,l,c,d,h,u,m=t.ownerDocument,g=m.defaultView,p=f.getWindow.call(t).getComputedStyle(t,null),v=t.style;if(g&&p)for(a=0,s=n.length;a<s;a++)c=n[a],""!==(d=p[h=f.getStyleName.call(t,c)])&&"auto"!==d||f.isInjected.call(t,m.documentElement)||(d=v[h]),void 0===e&&(u=void 0,(u=document.createElement("div")).style.margin="1%",document.body.appendChild(u),e="1%"===(window.getComputedStyle(u,null)||{marginTop:0}).marginTop,document.body.removeChild(u)),e&&r.test(h)&&i.test(d)&&(l=v.width,v.width=d,d=p.width,v.width=l),o[c]=void 0!==d?d:v[c]||"";return o}:document.documentElement.currentStyle&&(t=function(t,e,n){var r,o,a,s,l,c,d,h=t.currentStyle,u=t.runtimeStyle,m=t.style;for(r=0,o=e.length;r<o;r++)s=e[r],d=f.getStyleName.call(t,s),l=h&&h[d],i.test(l)&&(a=m.left,(c=u&&u.left)&&(u.left=h.left),m.left="fontSize"===d?"1em":l||0,l=m.pixelLeft+"px",m.left=a,c&&(u.left=c)),n[s]=void 0!==l?l:t.style[s]||"";return n}),function(e,i){var r={};return-1===e.indexOf("opacity")||n||(n=!0,r.opacity=f.getOpacity.call(this,i),e.splice(e.indexOf("opacity"),1),n=!1),r=!1===i?function(t,e,n){var i,r,o,a=t.style;for(i=0,r=e.length;i<r;i++)n[o=e[i]]=a[o]||"";return n}(this,e,r):t(this,e,r)}}(),getStyleName:function(){var t=o.Engine,e=t.name,i=["box-sizing","box-shadow","transform","transform-style","transition","transition-timing-function","transition-duration","transition-delay","transition-property","border-image","border-radius","text-stroke","font-smoothing","text-fillcolor","text-shadow","perspective","appearance","touch-callout","overflow-scrolling","mask","user-select"];return r.memoize(function(r,o){var a,s,l=[],c={firefox:"-moz",opera:"-o",ie:o?"-ms":"ms",chrome:"-webkit",safari:"-webkit"};if("string"==typeof r){if("float"===(r=n.unCamelCase(r)))a=t.ie?"style-float":"css-float";else if(-1!==i.indexOf(r)){if(c[e])a=c[e]+"-"+r,l.push(a);else for(s in c)c.hasOwnProperty(s)&&(a=c[s]+"-"+r,-1===l.indexOf(a)&&l.push(a));a=0===(l=l.filter(function(t){return void 0!==u.style[n.camelCase(t)]})).length?r:l.shift()}else a=r;o||(a=n.camelCase(a))}else a=r;return a},function(t){return t.join(".")})}(),getOpacity:(E=function(){},C=o.Features.opacityCSS,S=o.Features.filterCSS,T=/alpha\(opacity=([\d.]+)\)/i,S&&!C?E=function(t,e){var n,i=1;return(n=f.getStyle.call(t,"filter",e).replace(/ /g,"").match(T))&&(i=n[1]/100),i}:C&&(E=function(t,e){var n=1,i=t.style,r=f.getStyle;return void 0!==i.opacity?n=r.call(t,"opacity",e):void 0!==i.MozOpacity&&(n=r.call(t,"MozOpacity",e)),parseFloat(Math.round(100*n)/100,10)}),function(t){return E(this,t)}),setOpacity:function(){var t=function(){},e=o.Features.opacityCSS;return o.Features.filterCSS&&!e?t=function(t,e,n){var i;e.zoom=1,n=1===n?"":"alpha(opacity="+100*n+")",e.MsFilter=n,e.filter=n,i=e.display,e.display="none",t.offsetHeight,e.display=i}:e&&(t=function(t,e,n){void 0!==e.opacity?e.opacity=n:void 0!==e.MozOpacity&&(e.MozOpacity=n)}),function(e){var n=this.style;return null!==e&&(e=(e=parseFloat(e,10))>1?1:e<1e-5?0:e),t(this,n,e),this}}(),hide:function(){return f.setStyle.call(this,"display","none")},show:function(){var t,e,n;function i(t){return f.getStyle.call(t,"display")}return n=r.memoize(function(n){var r,o=document,a=o.body,s=o.createElement(n);return a.appendChild(s),r=i(s),a.removeChild(s),"none"!==r&&""!==r||(t||((t=o.createElement("iframe")).frameBorder=t.width=t.height=0),a.appendChild(t),e&&t.createElement||((e=(t.contentWindow||t.contentDocument).document).write(("CSS1Compat"===o.compatMode?"<!doctype html>":"")+"<html><body>"),e.close()),s=e.createElement(n),e.body.appendChild(s),r=i(s),a.removeChild(t)),r}),function(){var t;return this.style&&("none"===(t=this.style.display)&&(t=this.style.display=""),""===t&&(this.style.display="none"===i(this)&&n(this.nodeName)||"")),this}}(),toggle:function(t){var n=e.is(t)?t:f.isHidden.call(this);return e.Element[n?"show":"hide"].call(this)},isHidden:function(){return"none"===f.getStyle.call(this,"display")},setTranslate:(x=o.Features.transitionsCSS?o.Features.matrixCSS?function(t,e){return{transform:"translate3d("+e+"px,"+t+"px, 0)"}}:function(t,e){return{transform:"translate("+e+"px,"+t+"px)"}}:function(t,e){return{top:t,left:e}},function(t,e){var n;return n=x(t=t||0,e=e||0),f.setStyles.call(this,n),this}),getComputedSize:(b={borderWidth:["borderLeftWidth","borderRightWidth"],borderHeight:["borderBottomWidth","borderTopWidth"],paddingWidth:["paddingLeft","paddingRight"],paddingHeight:["paddingTop","paddingBottom"],marginWidth:["marginLeft","marginRight"],marginHeight:["marginTop","marginBottom"],innerWidth:["borderWidth","paddingWidth"],innerHeight:["borderHeight","paddingHeight"],outerWidth:["marginWidth"],outerHeight:["marginHeight"]},function(){var t,e,i,o,a=r.toArray(arguments),s=0;for(t=0;t<a.length;t++)i=n.camelCase(a[t]),b[i]?(a.splice(t,1),a=a.concat(b[i]),t--):a.splice(t,1,i);for(o=f.getStyles.call(this,a),t=0,e=a.length;t<e;t++)i=a[t],s+=parseFloat(o[i],10)||0;return s}),getScrolls:function(){var t;return function(){var n,i,r,a,s;return e.is(this,["window","document"])?i=o.getScrolls():(r=this.style,i={width:this.scrollWidth,height:this.scrollHeight,top:this.scrollTop,left:this.scrollLeft},void 0===t&&(a=document.createElement("div"),(s=document.createElement("div")).style.visibility="hidden",s.style.overflow="hidden",s.style.width="1px",a.style.overflow="visible",a.innerHTML="x",s.appendChild(a),u.appendChild(s),t=1===a.scrollWidth,u.removeChild(s)),t&&-1!==["","visible"].indexOf(f.getStyle.call(this,"overflow"))&&(n=r.overflow,r.overflow="hidden",i.width=this.scrollWidth,r.overflow=n)),i}}(),getOffsets:function(){var t,e,n,i,r,a=/^t(?:able|d|h)$/i;function s(t){var e=t.ownerDocument.defaultView;return e?e.getComputedStyle(t,null):t.currentStyle}function l(t,e){return f.getStyle.call(t,e)}function c(){var o,a,s,c=document.body,d=parseInt(l(c,"marginTop"),10),h=document.createElement("div");h.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",c.insertBefore(h,c.firstChild),a=(o=h.firstChild).firstChild,s=o.nextSibling.firstChild.firstChild,t=5!==a.offsetTop,e=5===s.offsetTop,a.style.position="fixed",a.style.top="20px",n=20===a.offsetTop||15===a.offsetTop,a.style.position=a.style.top="",o.style.overflow="hidden",o.style.position="relative",i=-5===a.offsetTop,r=c.offsetTop!==d,c.removeChild(h)}function d(e){var n=e.offsetTop,i=e.offsetLeft;return void 0===t&&c(),r&&(n+=parseFloat(l(e,"marginTop"))||0,i+=parseFloat(l(e,"marginLeft"))||0),{x:i,y:n}}return void 0!==document.documentElement.getBoundingClientRect?function(){if(this===this.ownerDocument.body)return d(this);var t,e,n,i,r,a,s,l=f.getWindow.call(this),c=l.webkitConvertPointFromNodeToPage;if(this.getBoundingClientRect){i=f.getDocument.call(this).body,r=u.clientTop||i.clientTop||0,a=u.clientLeft||i.clientLeft||0,s=o.getScrolls();try{n=this.getBoundingClientRect()}catch(t){}n&&f.isInjected.call(this,u)?(t=n.left+s.x-r,e=n.top+s.y-a):(t=n?n.left:0,e=n?n.top:0)}else c&&(t=(n=c(this,new l.WebKitPoint(0,0))).x,e=n.y);return{x:t,y:e}}:function(){if(this===this.ownerDocument.body)return d(this);var r,o=this,l=o.offsetParent,h=f.getDocument.call(o).body,m=s(o),g=o.offsetTop,p=o.offsetLeft;for(void 0===t&&c(),o=o.parentNode;o&&o!==h&&o!==u&&11!==o.nodeType&&(!n||"fixed"!==m.position);)r=s(o),p-=o.scrollLeft,g-=o.scrollTop,o===l&&(p+=o.offsetLeft,g+=o.offsetTop,!t||e&&a.test(o.nodeName)||(p+=parseFloat(r.borderLeftWidth)||0,g+=parseFloat(r.borderTopWidth)||0),l=o.offsetParent),i&&"visible"!==r.overflow&&(p+=parseFloat(r.borderLeftWidth)||0,g+=parseFloat(r.borderTopWidth)||0),m=r,o=o.parentNode;return"relative"!==m.position&&"static"!==m.position||(p+=h.offsetLeft,g+=h.offsetTop),n&&"fixed"===m.position&&(p+=Math.max(u.scrollLeft,h.scrollLeft),g+=Math.max(u.scrollTop,h.scrollTop)),{x:p,y:g}}}(),getPosition:function(t,n){var i,r,o,a,s,l,c,d=f.getOffsetParent,h=f.getOffsets,u=f.getComputedSize,m=f.getSize,g=f.isInjected,p={x:0,y:0};if(!(t=t||d.call(this))||!g.call(this))return p;if(c=h.call(this),t!==f.getDocument.call(this)&&(i=/^(?:body|html)$/i.test(t.nodeName)?p:h.call(t),c.x-=parseFloat(u.call(this,"marginLeft"))||0,c.y-=parseFloat(u.call(this,"marginTop"))||0,i.x+=parseFloat(u.call(t,"borderLeftWidth"))||0,i.y+=parseFloat(u.call(t,"borderTopWidth"))||0,c.x-=i.x,c.y-=i.y,l=e.typeOf(n)))for("string"===l&&(n={x:n,y:n}),r=m.call(this),o=0;o<2;o+=1)s=o?"width":"height","center"===n[a=o?"x":"y"]?c[a]+=r[s]/2:(1===o&&"right"===n[a]||0===o&&"bottom"===n[a])&&(c[a]+=r[s]);return c},setPosition:function(){var t={full:function(t,e){var n=f.getSize.call(this),i=t.x+t.width-e.x-n.width,r=t.y+t.height-e.y-n.height;i<0&&(e.x=Math.max(0,e.x+i)),r<0&&(e.y+=r)},"resize-max":function(t,e){f.setStyles.call(this,{maxWidth:t.x+t.width-e.x,maxHeight:t.y+t.height-e.y})},none:function(){}};return function(n,i){i=i||{};var a,s,l=f.getDocument.call(this).body,c=f.getOffsetParent.call(this)||l,d=f.getOffsets.call(c),h=f.getOffsets.call(i.relative||c);return a=function(t,n,i,r,a){var s,l;switch(e.typeOf(r)){case!1:break;case"object":l={x:r.x+i.x,y:r.y+i.y,width:r.width,height:r.height};break;case"element":s=r;break;default:for(s=f.getOffsetParent.call(t);s&&s!==n&&1===s.nodeType&&"visible"===f.getStyle.call(s,"overflow");)s=s.parentNode;s&&1===s.nodeType||(s=n)}return s&&(s===n?l=e.merge(o.getScrolls(),o.getSize()):((l=f.getOffsets.call(s)).width=s.offsetWidth,l.height=s.offsetHeight)),l&&(l.x+=a,l.y+=a,l.width-=2*a,l.height-=2*a),l}(this,l,h,i.boundary,i.boundaryMargin||0),"number"==typeof n.length&&(s=f.getSize.call(this),r.splat(n).forEach(function(t){var e=h.x+t.x,n=h.y+t.y;t.score=(Math.min(a.x+a.width,e+s.width)-Math.max(a.x,e))*(Math.min(a.y+a.height,n+s.height)-Math.max(a.y,n))}),n.sort(function(t,e){return e.score-t.score}),n=n[0]),n={x:n.x+h.x,y:n.y+h.y},a&&(i.fit?"string"==typeof i.fit&&e.owns(t,i.fit)&&(i.fit=t[i.fit]):i.fit=t.full,n.x=Math.max(a.x,Math.min(n.x,a.x+a.width)),n.y=Math.max(a.y,Math.min(n.y,a.y+a.height)),i.fit.call(this,a,n)),f.setStyles.call(this,{top:n.y-d.y,left:n.x-d.x}),this}}(),getSize:function(){var t,n,i,r,a,s,l;return e.is(this,["window","document"])?l=o.getSize():(s=f.getStyle.bind(this),i=this.style,r=this.offsetWidth,a=this.offsetHeight,"none"===s("display")&&0===r&&0===a&&(n=i.display,t=i.visibility,i.visibility="visible",i.display="block",r=this.offsetWidth,a=this.offsetHeight,i.display=n,i.visibility=t),l={width:r,height:a}),l},getDimensions:function(){var t,e=f.getSize.call(this),n=e.width,i=e.height,r=f.getStyles.call(this,["maxWidth","maxHeight","minWidth","minHeight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight","borderBottomWidth","borderTopWidth","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);for(t in r)r[t]=parseFloat(r[t],10)||0;return{width:n,height:i,maxWidth:r.maxWidth||-1,maxHeight:r.maxHeight||-1,minWidth:r.minWidth||-1,minHeight:r.minHeight||-1,innerWidth:n-(r.borderLeftWidth+r.borderRightWidth+r.paddingLeft+r.paddingRight),innerHeight:i-(r.borderBottomWidth+r.borderTopWidth+r.paddingTop+r.paddingBottom),outerWidth:n+r.marginLeft+r.marginRight,outerHeight:i+r.marginTop+r.marginBottom}},isInViewport:function(t,e,n,i){var r,a,s,l,c,d,h=f.getOffsets,u=h.call(t),m=h.call(this),g=t.offsetHeight,p=t.offsetWidth,v=this.offsetWidth,y=this.offsetHeight,w=m.y,b=m.x,x=w+this.offsetHeight,E=b+this.offsetWidth;return e?(l=b<u.x+p&&b+v>u.x,c=w<u.y+g&&w+y>u.y):(l=b>=u.x&&b+v<=u.x+p,c=w>=u.y&&w+y<=u.y+g),d="x"===i?l:"y"===i?c:l&&c,n&&(r=o.getScrolls(),a=o.getSize(),s={top:r.y,bottom:r.y+a.height,right:r.x+a.width,left:r.x},d=d&&w<s.bottom&&b<s.right&&x>s.top&&E>s.left),d},setData:function(t,i){var r,o=e.typeOf(i),a=e.typeOf(t);if("string"===a&&o)i=s.encode(i),this.dataset?this.dataset[n.camelCase(t)]=i:(t="data-"+n.unCamelCase(t),this.setAttribute?this.setAttribute(t,i):this[t]=i);else if("object"===a&&!o)for(r in t)t.hasOwnProperty(r)&&f.setData.call(this,r,t[r]);return this},getData:function(t){var i;return e.is(t,"string")&&(this.dataset?i=this.dataset[n.camelCase(t)]:(t="data-"+n.unCamelCase(t),i=this.getAttribute?this.getAttribute(t,i):this[t]=i)),e.is(i)?s.decode(i):void 0},removeData:function(t){return e.is(t,"string")&&(this.dataset?this.dataset.hasOwnProperty(n.camelCase(t))&&delete this.dataset[n.camelCase(t)]:(t="data-"+n.unCamelCase(t),this.removeAttribute?this.removeAttribute(t):this[t]=null)),this},handleExternalLinks:function(t){return f.addEvent.call(this,"click",function(e){if(!l.isDefaultPrevented(e)&&!l.whichKey(e)){for(var n,i=l.getElement(e),r=String(window.location).split("#")[0];i&&!n;)n="a"===f.getTagName.call(i)&&i.getAttribute("href")||f.getData.call(i,"href"),i=f.getParent.call(i);n&&0!==n.indexOf(r+"#")&&0!==n.indexOf("#")&&0!==n.indexOf("javascript")&&(t(n),l.stop(e))}}),this},addEvent:function(){return function(t,n,i,r,o){t=y(t);var a=n&&"function"==typeof n.handleEvent?n:this,s=function(t,n,i,r){e.is(t,"window")&&"resize"===n&&(i=!0);var o,a,s=t._events||{},l=!i&&f.Events[n],c=l?n+"Custom":n,h=s[c];return h||(a=new L(t),s[c]=h={dispatcher:a,handleEvent:function(t){if(d){var n=window.DOMEvent||window.Event;t=new n(t),["offsetY","offsetX","relatedTarget","button","metaKey","altKey","shiftKey","ctrlKey","clientY","clientX","screenY","screenX","which","pageY","pageX","layerY","layerX","charCode","keyCode","timeStamp","cancelable","bubbles","target","type","detail","wheelDelta","touches","changedTouches"].forEach(function(n){e.owns(t,n)||(t[n]=t.event[n])})}void 0===t.timeStamp&&(t.timeStamp=Date.now()),a.dispatch([t])},events:{},bindings:[],timers:[]},o=h.handleEvent,t._events=s,l?l(h,t,{target:t,type:n}):t.addEventListener?t.addEventListener(n,o,r||!1):(t.attachEvent("on"+n,o),window.attachEvent("onunload",function(){t.detachEvent("on"+n,o)}))),h}(this,t.name,i,o);return s.dispatcher.addDelegation(n,t.selector,a,r),"load"===t.name&&this.tagName&&"img"===this.tagName.toLowerCase()&&this.complete&&this.width>0&&s.dispatcher.dispatch(),this}}(),addEvents:function(t,e,n,i){var r;for(r in t)t.hasOwnProperty(r)&&f.addEvent.call(this,r,t[r],e,n,i);return this},triggerEvent:function(t){var e=(this._events||{})[t],n={target:this,timeStamp:Date.now(),type:t};return e&&e.handleEvent(n),this},removeEvent:function(t,n,i){if(!e.is(t))return f.removeEvents.call(this);t=y(t);var r,o,a,s,l,c=this._events&&this._events[t.name+"Custom"],d=c?t.name+"Custom":t.name,h=this._events&&this._events[d];if(h&&(s=h.dispatcher,n||t.selector?s.removeDelegation(n,t.selector):s.removeAll(),0===s.getNumListeners())){for(a in delete this._events[d],l=h.events)l.hasOwnProperty(a)&&f.removeEvent.call(this,a,l[a]);if(h.timers)for(r=0,o=h.timers.length;r<o;r++)clearTimeout(h.timers[r]);if(h.bindings)for(r=0,o=h.bindings.length;r<o;r++)h.bindings[r].dispose();c||(this.removeEventListener?this.removeEventListener(d,h.handleEvent,i):this.detachEvent("on"+d,h.handleEvent)),s.dispose()}return this},removeEvents:function(t,e){var n,i=void 0!==t,r=i?t:this._events;for(n in r)r.hasOwnProperty(n)&&f.removeEvent.call(this,n,i?t[n]:null,e);return this},fillParent:function(t,e){t=t||"height";var i=e||f.getParent.call(this),r=f.setStyle.bind(this),o=n.ucfirst(t);return i&&(r("height",1e4+"px"),r("height",i["offset"+o]-i["scroll"+o]+1e4+"px")),this},setSelectable:function(){function t(t){l.preventDefault(t)}return function(e){return this.setAttribute("unselectable",e?"off":"on"),f.setStyles.call(this,{userSelect:e?"":"none",touchCallout:e?"":"none"}),f[e?"removeEvent":"addEvent"].call(this,"selectstart",t),this}}(),requestFullscreen:(w=h(u,"requestFullscreen")||h(u,"requestFullScreen"),w?function(){return w.call(this)}:function(){throw new Error("Element#requestFullscreen is not available in this platform")})}),f.Events={mouseleave:function(){return function(t,e,n){var i=t.handleEvent;e.addEventListener?(t.handleEvent=function(t){var e=t.relatedTarget;this===e||function(t,e){var n=!1;if(t!==e){for(;e&&e!==t;)e=e.parentNode;n=t===e}return n}(this,e)||i.call(this,n)},f.addEvent.call(e,"mouseout",t.handleEvent),t.events.mouseout=t.handleEvent):(f.addEvent.call(e,"mouseleave",i,!0),t.events.onmouseleave=i)}}(),mouseenter:function(){return function(t,e,n){var i=t.handleEvent;e.addEventListener?(t.handleEvent=function(t){var e=t.relatedTarget;this===e||function(t,e){var n=!1;if(t!==e){for(;e&&e!==t;)e=e.parentNode;n=t===e}return n}(this,e)||i.call(this,n)},f.addEvent.call(e,"mouseover",t.handleEvent),t.events.mouseover=t.handleEvent):(f.addEvent.call(e,"mouseenter",i,!0),t.events.mouseenter=i)}}(),mousewheel:function(t,e){var n=t.handleEvent,i=o.Engine.firefox?"DOMMouseScroll":"mousewheel";t.handleEvent=function(t){(t=t||window.event).wheel=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3,n(t)},f.addEvent.call(e,i,t.handleEvent,!0),t.events[i]=t.handleEvent},update:function(t,e,n){new c(function(e){var i=e[0];t.handleEvent(Object.assign(n,{record:i}))}).observe(e,{childList:!0,subtree:!0})},resize:function(){var t,n=new a,i=200;function r(t){var n;return(n=e.is(t,["window","document"])?[(n=o.getSize()).width,n.height,0,0]:[t.scrollWidth,t.scrollHeight,t.offsetWidth,t.offsetHeight]).join("x")}function s(){clearTimeout(t),n.dispatch(),n.getNumListeners()>0&&(t=setTimeout(s,i))}return function(t,i,o){var a,l=r(i);t.bindings.length>0||(t.timers=[a],window===i&&e.is(window.orientationchange)&&(f.addEvent.call(i,"orientationchange",s),t.events.orientationchange=s),t.bindings=[n.add(function(){var n=r(i),s=e.is(i,["window","document"])||f.isInjected.call(i);l!==n&&s&&(l=n,clearTimeout(a),a=setTimeout(function(){t.handleEvent(o)},220))})],s())}}()},N("fullscreenchange"),N("fullscreenerror"),N("transitionEnd",function(){var t,n=document.createElement("fakeelement"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionEnd"};for(t in i)if(i.hasOwnProperty(t)&&e.is(n.style[t]))return i[t]}),u.matchesSelector||(f.matchesSelector=h(u,"matchesSelector")),document.exitFullscreen=h(document,"exitFullscreen")||h(document,"cancelFullScreen")||function(){throw new Error("Element#requestFullscreen is not available in this platform")},"fullscreenEnabled"in document||(document.fullscreenEnabled=h(document,"fullscreenEnabled")),function(){var t="fullscreenElement",e=h(document,t,!0)||h(document,"fullScreenElement",!0)||h(document,"currentFullScreenElement",!0);if(e&&e!==t)try{f.addEvent.call(document,"fullscreenchange",function(){document[t]=document[e]}),document[t]=document[e]}catch(t){}}(),H(),l.onDomReady(H),e.namespace("Element",f,e,!0)});