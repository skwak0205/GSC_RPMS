define("UWA/Color",["UWA/Core","UWA/Class"],function(r,a){"use strict";function t(r){return"#"===r.charAt(0)&&(r=r.substring(1)),3===r.length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16)}}function n(a){(a=r.clone(a)).r/=255,a.g/=255,a.b/=255;var t={},n=Math.min(a.r,a.g,a.b),o=Math.max(a.r,a.g,a.b),s=o-n,e=(o+n)/2;return t.l=e,o===n?(t.h=0,t.s=0):(t.h=e,t.s=e,t.s=t.l>.5?s/(2-o-n):s/(o+n),o===a.r?t.h=(a.g-a.b)/s+(a.g<a.b?6:0):o===a.g?t.h=(a.b-a.r)/s+2:o===a.b&&(t.h=(a.r-a.g)/s+4),t.h/=6),t.h=Math.round(360*t.h),t.s=Math.round(100*t.s),t.l=Math.round(100*t.l),t}function o(r){var a={},t=(1-Math.abs(r.l/50-1))*r.s/100,n=t*(1-Math.abs(r.h/60%2-1)),o=Math.floor(r.h/60),s=r.l/100-t/2;switch(o){case 0:a.r=t,a.g=n,a.b=0;break;case 1:a.r=n,a.g=t,a.b=0;break;case 2:a.r=0,a.g=t,a.b=n;break;case 3:a.r=0,a.g=n,a.b=t;break;case 4:a.r=n,a.g=0,a.b=t;break;case 5:case 6:a.r=t,a.g=0,a.b=n}return a.r=Math.round(255*(a.r+s)),a.g=Math.round(255*(a.g+s)),a.b=Math.round(255*(a.b+s)),a}function s(a,t){var n=(a=r.clone(a)).alpha;if(n>=1)return a;return["r","g","b"].forEach(function(r){a[r]=a[r]*n+t[r]*t.alpha*(1-n)}),a.alpha=Math.round(n+t.alpha*(1-n)),a}function e(r){var a=[r.r,r.g,r.b,r.alpha].map(function(r){return(r/=255)<.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)});return.2126*a[0]+.7152*a[1]+.0722*a[2]}function h(r,a){if(a.alpha>=1){r.alpha<1&&(r=s(r,a));var t=e(a)+.05,n=e(r)+.05,o=t/n;return n>t&&(o=1/o),{ratio:Math.round(o),min:o,max:o}}var i={r:255,g:255,b:255,alpha:1},l={r:0,g:0,b:0,alpha:1},u=s(a,l),c=s(a,i),b=h(r,l).ratio,g=h(r,i).ratio,p=Math.max(b,g),f=1;return u.luminance>r.luminance?f=b:c.luminance<r.luminance&&(f=g),{ratio:Math.round((f+p)/2,2),min:f,max:p}}var i=a.extend({_color:null,init:function(a){this._color=r.clone(a)},toHexString:function(){return"#"+[this._color.r,this._color.g,this._color.b].map(function(r){return 1===(r=(r=parseInt(r,10)).toString(16)).length?"0"+r:r}).join("")},toRGBString:function(){var r=this._color,a=r.alpha<1;return"rgb"+(a?"a":"")+"("+r.r+", "+r.g+", "+r.b+(a?", "+r.alpha:"")+")"},toHSLString:function(){var r=this._color,a=r.alpha<1;return"hsl"+(a?"a":"")+"("+r.h+", "+r.s+"%, "+r.l+(a?"%, "+r.alpha:"%")+")"},toObject:function(){return r.clone(this._color)},cloneWith:function(a){var t=Object.assign(this.toObject(),a);return r.owns(a,"h")||r.owns(a,"s")||r.owns(a,"l")?i.fromHSL(t.h,t.s,t.l,t.alpha):r.owns(a,"r")||r.owns(a,"g")||r.owns(a,"b")?i.fromRGB(t.r,t.g,t.b,t.alpha):new i(t)}});return i.fromRGB=function(r,a,t,o){var s={r:parseInt(r,10),g:parseInt(a,10),b:parseInt(t,10),alpha:void 0===o?1:parseFloat(o,10)};return Object.assign(s,n(s)),new i(s)},i.fromHSL=function(r,a,t,n){var s={h:parseInt(r,10),s:parseFloat(a,10),l:parseFloat(t,10),alpha:void 0===n?1:parseFloat(n,10)};return Object.assign(s,o(s)),new i(s)},i.parse=function(r){"transparent"===r&&(r="rgba(0, 0, 0, 0)");var a={},o=r.test(/^(#?)((?:[A-Fa-f0-9]{3}){1,2})$/m),s=r.match(/^(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/m);if(o)return(a=t(r)).alpha=1,Object.assign(a,n(a)),new i(a);if(s&&s.length>0){var e;s.shift();var h=s[0],l=s[5]?parseFloat(s[5],10):1;return"rgb"===h?e=i.fromRGB:"hsl"===h&&(e=i.fromHSL),e(s[2],s[3],s[4],l)}},i.checkContrast=function(r,a){var t,n=h(r.toObject(),a.toObject());return n.max>=0&&n.min<3?t="fail":n.max>=3&&n.min<4.5?t="aa-large":n.max>=4.5&&n.min<7?t="aa":n.max>=7&&n.min<22&&(t="aaa"),{ratio:n.ratio,status:t}},i.__test__={hexToRgb:t,rgbToHsl:n,hslToRgb:o,layerColors:s,getLuminance:e,getContrast:h},r.namespace("Color",i,r)});