define("UWA/Fx",["UWA/Core","UWA/String","UWA/Class","UWA/Class/Options","UWA/Class/Events","UWA/Class/Timed","UWA/Element","UWA/Color"],function(t,n,i,r,e,u,a,o){"use strict";function s(t){return-1!==["borderColor","backgroundColor","color"].indexOf(n.camelCase(t))}function c(t){var n=Number(t);return isNaN(n)&&(n=parseInt(t,10)),isNaN(n)?0:n}var h=i.extend(r,u,e,{defaultOptions:{transition:"linear",duration:500,unit:"px",wait:!1},element:null,from:null,to:null,current:null,init:function(t,n){this.element=t,this.from={},this.to={},this.queue=[],this.setOptions(n)},tween:function(t,n,i){var r={};return r[t]=[n,i],this.start(r)},fade:function(t){t=void 0!==t?t:"toggle";var n=a.getOpacity.call(this.element),i={opacity:[]};switch(t){case"in":i.opacity=[n,1];break;case"out":i.opacity=[n,0];break;case"show":i.opacity=[1,1];break;case"hide":i.opacity=[0,0];break;case"toggle":i.opacity=n<1?[n,1]:[n,0];break;default:i.opacity=[n,t]}return this.start(i)},start:function(t){return this.options.wait&&this.hasAnimate("fx")?this.queue.push(t):(this.stop(),this.setSteps(t),this.dispatchEvent("onStart"),this.startTime=Date.now(),this.current={},this.animate()),this},pause:function(){return this.clearAnimate("fx"),this},stop:function(){return this.pause(),this.from={},this.to={},this},setSteps:function(t){var i,r={},e={};for(i in t)if(t.hasOwnProperty(i))if(i=n.camelCase(i),Array.isArray(t[i])?(r[i]=t[i][0],e[i]=t[i][1]):(r[i]=a.getStyle.call(this.element,i),e[i]=t[i]),s(i)){var u=o.parse(r[i]).toObject(),h=o.parse(e[i]).toObject();r[i]=[u.r,u.g,u.b,u.alpha],e[i]=[h.r,h.g,h.b,h.alpha]}else r[i]=c(r[i]),e[i]=c(e[i]);this.from=r,this.to=e},compute:function(i,r){var e,u=this.options,a=u.transition,o=u.duration,s=t.typeOf(a);if("string"===s){if(!t.is(h.Transitions[a],"function"))throw new Error("Invalid UWA.FX transition option value.");a=h.Transitions[a]}else if("array"===s)a=h.Transitions.cubicBezier.apply(null,a);else if("function"!==s)throw new Error("Invalid UWA.FX transition option value.");if(e=o>0&&i!==r?a(this.currentTime,i,r-i,o):r,isNaN(e))throw new Error(n.format('Invalid UWA.FX transition computation value with from "{0}" to "{1}".',i,r));return e},animate:function(){var t,n=Date.now(),i=this.options.duration,r=this.startTime;n<r+i?this.currentTime=n-r:(this.currentTime=i,t=!0),this.dispatchEvent("onAnimate",[this.element,this.from,this.to]),t?(this.stop(),this.dispatchEvent("onComplete"),this.queue.length>0&&this.start(this.queue.shift()),this.lastTime=null):this.setAnimate("fx",this.animate),this.fps=1e3/(n-(this.lastTime||n)),this.lastTime=n},onAnimate:function(t,n,i){var r,e,u={};for(r in n)n.hasOwnProperty(r)&&(e=s(r)?"rgba("+Math.round(this.compute(n[r][0],i[r][0]))+","+Math.round(this.compute(n[r][1],i[r][1]))+","+Math.round(this.compute(n[r][2],i[r][2]))+","+this.compute(n[r][3],i[r][3])+")":this.compute(n[r],i[r]),this.current[r]!==e&&(u[r]=e));this.current=u,a.setStyles.call(t,u)}});return h.Transitions={linear:function(t,n,i,r){return i*t/r+n},quadIn:function(t,n,i,r){return i*(t/=r)*t+n},quadOut:function(t,n,i,r){return-i*(t/=r)*(t-2)+n},quadInOut:function(t,n,i,r){return(t/=r/2)<1?i/2*t*t+n:-i/2*(--t*(t-2)-1)+n},cubicIn:function(t,n,i,r){return i*(t/=r)*t*t+n},cubicOut:function(t,n,i,r){return i*((t=t/r-1)*t*t+1)+n},cubicInOut:function(t,n,i,r){return(t/=r/2)<1?i/2*t*t*t+n:i/2*((t-=2)*t*t+2)+n},quartIn:function(t,n,i,r){return i*(t/=r)*t*t*t+n},quartOut:function(t,n,i,r){return-i*((t=t/r-1)*t*t*t-1)+n},quartInOut:function(t,n,i,r){return(t/=r/2)<1?i/2*t*t*t*t+n:-i/2*((t-=2)*t*t*t-2)+n},quintIn:function(t,n,i,r){return i*(t/=r)*t*t*t*t+n},quintOut:function(t,n,i,r){return i*((t=t/r-1)*t*t*t*t+1)+n},quintInOut:function(t,n,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+n:i/2*((t-=2)*t*t*t*t+2)+n},sineIn:function(t,n,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+n},sineOut:function(t,n,i,r){return i*Math.sin(t/r*(Math.PI/2))+n},sineInOut:function(t,n,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+n},expoIn:function(t,n,i,r){return 0===t?n:i*Math.pow(2,10*(t/r-1))+n},expoOut:function(t,n,i,r){return t===r?n+i:i*(1-Math.pow(2,-10*t/r))+n},expoInOut:function(t,n,i,r){return 0===t?n:t===r?n+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+n:i/2*(2-Math.pow(2,-10*--t))+n},circIn:function(t,n,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+n},circOut:function(t,n,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+n},circInOut:function(t,n,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+n:i/2*(Math.sqrt(1-(t-=2)*t)+1)+n},backIn:function(t,n,i,r,e){return i*(t/=r)*t*(((e=e||1.70158)+1)*t-e)+n},backOut:function(t,n,i,r,e){return i*((t=t/r-1)*t*(((e=e||1.70158)+1)*t+e)+1)+n},backInOut:function(t,n,i,r,e){return e=e||1.70158,(t/=r/2)<1?i/2*(t*t*((1+(e*=1.525))*t-e))+n:i/2*((t-=2)*t*((1+(e*=1.525))*t+e)+2)+n},elasticIn:function(t,n,i,r,e,u){var a;return 0===t?n:1==(t/=r)?n+i:(u=u||.3*r,(e=e||1)<Math.abs(i)?(e=i,a=u/4):a=u/(2*Math.PI)*Math.asin(i/e),-e*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/u)+n)},elasticOut:function(t,n,i,r,e,u){var a;return 0===t?n:1==(t/=r)?n+i:(u=u||.3*r,(e=e||1)<Math.abs(i)?(e=i,a=u/4):a=u/(2*Math.PI)*Math.asin(i/e),e*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/u)+i+n)},elasticInOut:function(t,n,i,r,e,u){var a,o;return 0===t?o=n:2==(t/=r/2)?o=n+i:(u=u||r*(.3*1.5),(e=e||1)<Math.abs(i)?(e=i,a=u/4):a=u/(2*Math.PI)*Math.asin(i/e),o=t<1?e*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/u)*-.5+n:e*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/u)*.5+i+n),o},bounceIn:function(t,n,i,r){return i-h.Transitions.bounceOut(r-t,0,i,r)+n},bounceOut:function(t,n,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+n:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+n:i*(7.5625*(t-=2.625/2.75)*t+.984375)+n},bounceInOut:function(t,n,i,r){var e=h.Transitions;return t<r/2?.5*e.bounceIn(2*t,0,i,r)+n:.5*e.bounceOut(2*t-r,0,i,r)+.5*i+n},quinticBezier:function(){return function(t,n,i,r,e,u){var a,o,s,c,h,f,l,p,b=u-t,m={a:b-(a=t)-(p=5*((e-t)/b+a)-20*((c=(r-t)/b)+(o=(n-t)/b))+30*(s=(i-t)/b))-(l=10*(c-a)+30*(o-s))-(f=10*(s-a)-4*(h=5*(o-a)))-h,b:p,c:l,d:f,e:h};return function(t,n,i,r){var e,u,a=t/r,o=a*a,s=o*t;return m.a||m.c?m.b||m.d?(e=o,u=o*a):u=s:(m.b||m.d)&&(e=s),n+i*(m.a*o+m.b*o+m.c*u+m.d*e+m.e*a)}}}(),cubicBezier:function(){function t(t,n){return((n.ax*t+n.bx)*t+n.cx)*t}function n(t,n){return(3*n.ax*t+2*n.bx)*t+n.cx}function i(i,r,e){return function(t,n){return((n.ay*t+n.by)*t+n.cy)*t}(function(i,r,e){var u,a,o,s,c,h,f;for(s=i,u=0;u<8;u++){if(c=t(s,r)-i,Math.abs(c)<e)return s;if(h=n(s,r),Math.abs(h)<e)break;s-=c/h}if(o=1,(s=i)<(a=0))f=a;else if(s>o)f=o;else{for(;a<o;){if(c=t(s,r),Math.abs(c-i)<e)return s;i>c?a=s:o=s,s=.5*(o-a)+a}f=s}return f}(i,r,e),r)}return function(t,n,r,e){var u,a,o,s,c,h,f={ax:1-(o=3*(u=t))-(s=3*(r-u)-o),bx:s,cx:o,ay:1-(c=3*(a=n))-(h=3*(e-a)-c),by:h,cy:c};return function(t,n,r,e){var u=t/e,a=function(t){return 1e3/60/t/4}(e),o=i(u,f,a);return n*(1-o)+(n+r)*o}}}()},t.namespace("Fx",h,t)});