"undefined"==typeof define&&(define=function(e){PropertiesParser=e(),define=void 0}),define("DS/CSIJSONToolsWeb/CSIGrammarUpgraderPropertiesParser",[],function(){"use strict";const e=/^[a-z][A-Za-z0-9]*$/,t=/[^a-zA-Za-z0-9]/gi;var r=function(r){if(e.test(r))return r;let s=r.replaceAll(t,"");for(var a=0;s[a]>="0"&&s[a]<="9";)++a;return(s=s.slice(a)).replace(s[0],s[0].toLocaleLowerCase())};class s{constructor(e){this.properties_=void 0,this.parser_=e}parseV1(e){this.properties_=[];for(const t in e)if(e.hasOwnProperty(t)){const r=new i(this.parser_);r.parseV1(t,e[t]),this.properties_.push(r)}return this}parseV2(e){this.properties_=[];for(let t=0;t<e.length;++t){const r=new i(this.parser_);r.parseV2(e[t]),this.properties_.push(r)}return this}upgradeV2(){const e=[];if(void 0!==this.properties_)for(let t=0;t<this.properties_.length;++t)e[t]=this.properties_[t].upgradeV2();return e}}s.prototype.parseV3=s.prototype.parseV2,s.prototype.upgradeV3=s.prototype.upgradeV2;const a=["string","boolean","int8","uint8","int16","uint16","int32","uint32","int64","uint64","float","double","buffer","string[]","boolean[]","int8[]","uint8[]","int16[]","uint16[]","int32[]","uint32[]","int64[]","uint64[]","float[]","double[]","buffer[]"];class i{constructor(e){this.clear(),this.parser_=e}clear(){this.label="",this.desc="Please fill the description",this.typeType="",this.typeName="",this.array=!1,this.isOptional=!1,this.defaultValue="",this.subProperties=[]}getTypeFromString(e){this.typeName=e.replace("[]",""),a.indexOf(e)>=0?this.typeType="basic":this.typeType="type",e.indexOf["[]"]>=0&&(this.array=!0,this.typeType+="Array")}parseV1(e,t){return this.clear(),this.label=e,"string"==typeof t?this.getTypeFromString(t):"object"==typeof t?(t.hasOwnProperty("type")&&this.getTypeFromString(t.type),t.hasOwnProperty("desc")&&(this.desc=t.desc),t.hasOwnProperty("parameters")&&(this.typeType="parameters",this.subProperties=new s(this.parser_).parseV1(t.parameters).properties_),t.hasOwnProperty("parameters[]")&&(this.array=!0,this.typeType="parametersArray",this.subProperties=new s(this.parser_).parseV1(t["parameters[]"]).properties_),t.hasOwnProperty("defaultValue")&&("string"==typeof t.defaultValue?(this.defaultValue=t.defaultValue,this.isOptional=!0):(this.defaultValue=JSON.stringify(t.defaultValue),this.isOptional=!0))):(this.typeType="type",this.typeName="Unknown Type"),this}parseV2(e){if(this.clear(),e.hasOwnProperty("label")&&(this.label=e.label),e.hasOwnProperty("desc")&&(this.desc=e.desc),e.hasOwnProperty("basic")&&(this.typeType="basic",this.typeName=e.basic),e.hasOwnProperty("basicArray")&&(this.typeType="basicArray",this.typeName=e.basicArray,this.array=!0),e.hasOwnProperty("type")&&(this.typeType="type",this.typeName=e.type),e.hasOwnProperty("typeArray")&&(this.typeType="typeArray",this.typeName=e.typeArray,this.array=!0),e.hasOwnProperty("parameters")){this.typeType="parameters";for(let t=0;t<e.parameters.length;t++){const r=new i(this.parser_);r.parseV2(e.parameters[t]),this.subProperties.push(r)}}if(e.hasOwnProperty("parametersArray")){this.array=!0,this.typeType="parametersArray";for(let t=0;t<e.parametersArray.length;t++){const r=new i(this.parser_);r.parseV2(e.parametersArray[t]),this.subProperties.push(r)}}return e.hasOwnProperty("optional")&&(e.optional.isOptional,this.isOptional=!0,void 0!==e.optional.default_value&&(this.isOptional=!0,"string"==typeof e.optional.default_value?this.defaultValue=e.optional.default_value:this.defaultValue=JSON.stringify(e.optional.default_value))),this}upgradeV2(){this.label=r(this.label);const e={};return this.parser_.ParsingOrder.parameters.forEach(t=>{if(this.hasOwnProperty(t))e[t]=this[t];else if(this.typeType===t)this.typeName.length>0?e[this.typeType]=this.typeName:e[this.typeType]=this.subProperties.map(e=>e.upgradeV2());else if("optional"===t&&!0===this.isOptional){const r={};this.defaultValue.length>0?r.default_value=this.defaultValue:r.isOptional=!0,e[t]=r}}),e}}return i.prototype.parseV3=i.prototype.parseV2,i.prototype.upgradeV3=i.prototype.upgradeV2,new s});