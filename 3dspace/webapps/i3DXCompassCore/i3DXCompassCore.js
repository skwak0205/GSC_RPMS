define("DS/i3DXCompassCore/CacheManager",["UWA/Core","UWA/Class","UWA/Utils","UWA/Storage","UWA/Storage/Adapter/Dom"],function(e,t,s,i){"use strict";var r,n,o=new i({adapter:"Dom",database:"3DCompass"}),a={};return t.singleton({setup:function(e,t){r=e,e||(o=null),t&&(n=t)},CACHE_STRATEGY_STATIC:1,CACHE_STRATEGY_NO_WAIT:2,LONG_LIFE_TIME:864e5,setRequestCache:function(e,t,s){s&&s.cacheStrategy===this.CACHE_STRATEGY_STATIC?this.setLocalCache(e.url+JSON.stringify(s.data),t):this.setCache(e.url+JSON.stringify(s.data),t)},getRequestCache:function(e,t){var s=t.cacheTTL;return t&&t.cacheStrategy===this.CACHE_STRATEGY_STATIC?this.getLocalCache(e.url+JSON.stringify(t.data),s):this.getCache(e.url+JSON.stringify(t.data),s)},setLocalCache:function(e,t){a[e]=t},getLocalCache:function(e){return a[e]},setCache:function(e,t){if(o)try{o.set(this._getKeyUID(e),t)}catch(e){o=null}},getCache:function(e,t){var s=null;if(t||(t=864e5),o)try{s=o.get(this._getKeyUID(e),t)}catch(e){o=null}return s},_getKeyUID:function(e){return s.getCheckSum(e+n+r+void 0)},_getUser:function(){return r}})}),define("DS/i3DXCompassCore/Utils",["UWA/Core","UWA/Class","UWA/Utils"],function(e,t,s){"use strict";var i,r=null,n=(new Date).getTimezoneOffset(),o=null,a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},c={},u=["platform-management-2"],l=null,p=null;return{getVersion:function(){return"420.0.0"},getTimezoneOffset:function(){return n},isTouchActivate:function(){return null===o&&(o=e.Utils.Client.Features.touchEvents),o},isUrl:function(e){return(0===e.indexOf("http")||0===e.indexOf("https"))&&s.isValidUrl(e)},isBase64:function(e){return new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$").test(e)},isBase64Image:function(e){return e.indexOf("data:image")>-1&&e.indexOf(";base64,")>-1&&(e=e.split(";base64,")[1]),this.isBase64(e)},getFileName:function(e){var t=(e=e.replace(/\\/g,"/")).lastIndexOf("/");return e.substr(t+1)},getFileExtension:function(e){var t=e.lastIndexOf("."),s="";return t>-1&&(s=e.toLowerCase().substr(t+1)),s},msToHoursMin:function(e){var t=Math.floor(e/36e5);return{hours:t,minutes:Math.round((e-36e5*t)/6e4)}},escapeDomSelector:function(e){return e=(e=(e=e.replace(/:/g,"\\:")).replace(/\./g,"\\.")).replace(/@/g,"\\@")},escape:function(e){var t;for(t in a)a.hasOwnProperty(t)&&e&&(e=e.replace(new RegExp(t,"g"),a[t]));return e},unescape:function(e){var t;for(t in a)a.hasOwnProperty(t)&&e&&(e=e.replace(new RegExp(a[t],"g"),t));return e},getTextFromHtml:function(t){var s=document.createElement("div");return e.is(t,"string")&&""!==t&&(t=this.unescape(t),t=this.escape(t),s.innerHTML=t,t=s.childNodes[0].nodeValue),t},getUUID:function(){return s.getCheckSum(s.getUUID())},detectOs:function(){var e=navigator.userAgent.toLowerCase();return null===r&&(r=e.indexOf("windows")>-1?"windows":e.match(/(ipad|iphone|ipod)/g)?"ios":e.indexOf("mac")>-1?"macos":e.indexOf("android")>-1?"android":e.indexOf("linux")>-1?"linux":"unknown"),r},merge:function(e,t){var s,i=Object.prototype.hasOwnProperty;for(s in t)i.call(t,s)&&void 0===e[s]&&(e[s]=t[s]);return e},removeUselessPort:function(e){return"string"==typeof e&&(e=e.replace(":443/","/").replace(":80/","/")),e},isEmptyString:function(e){return!e||"string"!=typeof e||!e.trim()},isBetaModeActivated:function(t){var s=!1,i="3DCompass-"+t;if(void 0===c[i])try{s=!!e.is(localStorage.getItem(i)),c[i]=s}catch(t){e.log(t)}else s=c[i];return s},i18n:function(t){var s=e.i18n(t);return s&&(s=s.replace("3DEXPERIENCE","<b>3D</b>EXPERIENCE")),s},getParentModule:function(){var e={};return function(t,s){if(!e[t]&&function(){var e;try{parent.document,e=!0}catch(t){e=!1}return e}())try{parent.require([t],function(i){e[t]=i,s(i)})}catch(i){try{require([t],function(i){e[t]=i,s(i)})}catch(e){}}else e[t]?setTimeout(function(){s(e[t])},0):require([t],function(i){e[t]=i,s(i)})}}(),getRoleColor:function(e,t){var s={"-1":"pending",0:"member",1:"admin",2:"deny",3:"contractor"};return!0===t?"color-indicator-"+(s[e]||s[-1]):{"-1":"pending",0:"warning",1:"info",2:"error",3:"contractor"}[e]},getAgreementValue:function(e){return e?"1":"0"},isCheckedAgreement:function(e){return"1"===e},scrollToElement:function(e){!this.isFrame()&&document.body&&(document.body.scrollTop=document.body.getElement(e).getPosition().y+64)},scrollToElementInIframe:function(e){document.body.getElement(".scroller-content")&&(document.body.getElement(".scroller-content").scrollTop=document.body.getElement(e).getPosition().y+64)},extractEmails:function(e){return e.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)},manageSupportOfMultiModal:function(){document.body.addClassName("platform-management-modal-open"),setTimeout(function(){document.body.getElement(".platform-management-2.modal")&&document.body.addClassName("modal-open"),document.body.removeClassName("platform-management-modal-open")},50)},getPlatformManagementWrapperClassName:function(t){return 1===u.length&&(u.push(this.detectOs()),this.isTouchActivate()&&u.push("is-touch"),u=u.join(" ")),e.is(t,"string")?u+" "+t:u},isFrame:function(){return null===l&&(l=document.location!==top.location),l},downScaleCanvas:function(e,t){if(1===t)return e;if(t<0||t>1)throw new Error("scale must be a positive number <1 ");var s=t*t,i=e.width,r=e.height,n=Math.ceil(i*t),o=Math.ceil(r*t),a=0,c=0,u=0,l=0,p=0,f=0,h=0,d=0,m=0,g=0,C=0,D=0,y=0,S=0,A=0,x=!1,U=!1,v=e.getContext("2d").getImageData(0,0,i,r).data,P=new Float32Array(4*i*r),O=0,M=0,T=0,b=0;for(c=0;c<r;c++)for(p=c*t,f=4*(m=Math.floor(p))*n,(U=m!==Math.floor(p+t))&&(S=m+1-p,A=p+t-m-1),a=0;a<i;a++,u+=4)l=a*t,h=f+4*(d=Math.floor(l)),(x=d!==Math.floor(l+t))&&(D=d+1-l,y=l+t-d-1),O=v[u],M=v[u+1],T=v[u+2],b=v[u+3],x||U?x&&!U?(g=D*t,P[h]+=O*g,P[h+1]+=M*g,P[h+2]+=T*g,P[h+3]+=b*g,C=y*t,P[h+4]+=O*C,P[h+5]+=M*C,P[h+6]+=T*C,P[h+7]+=b*C):U&&!x?(g=S*t,P[h]+=O*g,P[h+1]+=M*g,P[h+2]+=T*g,P[h+3]+=b*g,C=A*t,P[h+4*n]+=O*C,P[h+4*n+1]+=M*C,P[h+4*n+2]+=T*C,P[h+4*n+3]+=b*C):(g=D*S,P[h]+=O*g,P[h+1]+=M*g,P[h+2]+=T*g,P[h+3]+=b*g,C=y*S,P[h+4]+=O*C,P[h+5]+=M*C,P[h+6]+=T*C,P[h+7]+=b*C,C=D*A,P[h+4*n]+=O*C,P[h+4*n+1]+=M*C,P[h+4*n+2]+=T*C,P[h+4*n+3]+=b*C,C=y*A,P[h+4*n+4]+=O*C,P[h+4*n+5]+=M*C,P[h+4*n+6]+=T*C,P[h+4*n+7]+=b*C):(P[h]+=O*s,P[h+1]+=M*s,P[h+2]+=T*s,P[h+3]+=b*s);var w=document.createElement("canvas");w.width=n,w.height=o;var E=w.getContext("2d"),X=E.getImageData(0,0,n,o),F=X.data,R=0;for(u=0,h=0;R<n*o;u+=4,h+=4,R++)F[h]=Math.ceil(P[u]),F[h+1]=Math.ceil(P[u+1]),F[h+2]=Math.ceil(P[u+2]),F[h+3]=Math.ceil(P[u+3]);return E.putImageData(X,0,0),w},isEmail:function(e){return/^([a-zA-Z0-9_.\-'+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},getLang:function(){return p||this.getWidget().lang},setLang:function(e){p=e},getWidget:function(){return i},setWidget:function(e){i=e},isValidFilePathTxt:function(e){if(e.indexOf(";")>-1){return/^((([^/\\:*?"><|]*[^/\\:*?"><| ])?(([a-zA-Z]:)|(%[^%]+%)|(\$[^$]+))((\\|\/)[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|([^/\\:*?"><|]*[^/\\:*?"><| ])(\\\\[^/\\:*?"><| ]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\[[a-z0-9]+\])(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+)\.txt;){1,}(([^/\\:*?"><|]*[^/\\:*?"><| ])?(([a-zA-Z]:)|(%[^%]+%)|(\$[^$]+))((\\|\/)[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|([^/\\:*?"><|]*[^/\\:*?"><| ])(\\\\[^/\\:*?"><| ]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\[[a-z0-9]+\])(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+)\.txt$/.test(e)}if(-1===e.indexOf(";")){return e.endsWith(".txt")&&/^(([^/\\:*?"><|]*[^/\\:*?"><| ])?(([a-zA-Z]:)|(%[^%]+%)|(\$[^$]+))((\\|\/)[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|([^/\\:*?"><|]*[^/\\:*?"><| ])(\\\\[^/\\:*?"><| ]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+|(\[[a-z0-9]+\])(\\\\[.\w-]+)(\\[^/\\:*?"><| ]([^/\\:*?"><|]*[^/\\:*?"><| ])?)+)\.txt$/.test(e)}},isValidFilePathTxtLinux:function(e){if(e.indexOf(";")>-1){return/^(([^/\\:*?"><|]*[^/\\:*?"><| ])?[\$\/]([^/:?"'<>|\\ $]+\/)*[^/:?"'<>|\\ $]+.txt;){1,}([^/\\:*?"><|]*[^/\\:*?"><| ])?[\$\/]([^/:?"'<>|\\ $]+\/)*[^/:?"'<>|\\ $]+.txt$/.test(e)}if(-1===e.indexOf(";")){return/^([^/\\:*?"><|]*[^/\\:*?"><| ])?[\$\/]([^/:?"'<>|\\ $]+\/)*[^/:?"'<>|\\ $]+.txt$/.test(e)}},isValidPathLinux:function(e){return/^([^/\\:*?"><|]*[^/\\:*?"><| ])?[\$\/]([^/:?"'<>|\\ $]+\/)*[^/:?"'<>|\\ $]+$/.test(e)},isValidScript:function(e){var t=['"',"*",":","<",">","?","\\","|",127].detect(function(t){return e.indexOf(t)>-1});return e.endsWith(".bat")&&!t},isValidScriptLinux:function(e){var t=['"',"*",":","<",">","?","\\","|",127].detect(function(t){return e.indexOf(t)>-1});return e.endsWith(".sh")&&!t},isHttpsUrl:function(e){return 0===e.indexOf("https")&&s.isValidUrl(e)},isUNC:function(e){var t=(e.match(new RegExp("%","g"))||[]).length;return t>0&&t%2==0||/^[\\\/]{2,}[^\\\/]+[\\\/]+[^\\\/]+/.test(e)}}}),define("DS/i3DXCompassCore/UsageTracker",["UWA/Core","DS/Usage/TrackerAPI"],function(e,t){"use strict";return{_IDS:{compass:{quadrant:{north:"compass.quadrant.north",east:"compass.quadrant.east",south:"compass.quadrant.south",west:"compass.quadrant.west",play:"compass.quadrant.play"},cross:"compass.cross",role:"compass.role",roleFavorite:"compass.role.favorite",app:"compass.app",appFavorite:"compass.app.favorite",section:"compass.section"}},inc:function(e,t,s,i){},sync:function(e,s){t.getTracker("3DCompass-"+e).set(s)}}}),define("DS/i3DXCompassCore/Controls/Gauge",["UWA/Core","UWA/Controls/Abstract"],function(e,t){"use strict";return t.extend({defaultOptions:{backgroundColor:"#ecf0f1",separatorColor:"#2c3e50",lowColor:"#EA4F37",mediumColor:"#e87b00",highColor:"#edca00",fullColor:"#57b847",lowPercent:25,mediumPercent:50,highPercent:75,height:80,width:80,text:"",percent:0,className:"",reversed:!1},init:function(e){this._parent(e),this.buildContainer()},toUrl:function(){return this.url},buildContainer:function(){var t,s,i,r=e.createElement("canvas",{height:this.options.height,width:this.options.width,styles:{width:"100%",height:"auto"}}),n=r.getContext("2d"),o=r.width,a=r.height,c=this.options.percent/100*360,u=this.options.fullColor;n.clearRect(0,0,o,a),n.beginPath(),n.strokeStyle=this.options.backgroundColor,n.lineWidth=4,n.arc(a/2,o/2,a/2-2,0,2*Math.PI,!1),n.stroke(),s=c*Math.PI/180,n.beginPath(),u=this.options.percent<this.options.lowPercent?this.options.reversed?this.options.fullColor:this.options.lowColor:this.options.percent<this.options.mediumPercent?this.options.reversed?this.options.highColor:this.options.mediumColor:this.options.percent<this.options.highPercent?this.options.reversed?this.options.mediumColor:this.options.highColor:this.options.reversed?this.options.lowColor:this.options.fullColor,n.strokeStyle=u,n.lineWidth=4,n.arc(o/2,a/2,a/2-2,-90*Math.PI/180,s-90*Math.PI/180,!1),n.stroke(),n.fillStyle=u,n.font=Math.floor(this.options.width/4)+"px arial",t=Math.floor(c/360*100)+"%",i=n.measureText(t).width,n.fillText(t,o/2-i/2,a/2+.7*Math.floor(this.options.width/4)/2),this.url=r.toDataURL(),this.elements.container=e.createElement("div",{class:this.options.className||"",styles:{width:"100%",height:"auto"},html:[""!==this.options.text?{styles:{"text-align":"center",padding:"5px"},text:this.options.text}:null,{tag:"img",src:this.url,styles:{width:"100%",height:"auto"}}]})}})}),define("DS/i3DXCompassCore/Controls/PlatformNotify",["UWA/Core","DS/UIKIT/Alert"],function(e,t){"use strict";return{message:function(e,s){(!this.notifier||document.body.getElement&&!document.body.getElement(".platform-management-notify"))&&(this.notifier=new t({closable:!0,visible:!0,autoHide:!0,hideDelay:3e3,className:"platform-management-notify"}).inject(document.body,"top")),this.notifier.add({className:s,message:e})},success:function(e){this.message(e,"success")},alert:function(e){this.message(e,"error")},warn:function(e){this.message(e,"warning")},info:function(e){this.message(e,"info")}}}),define("DS/i3DXCompassCore/Csrf",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/i3DXCompassCore/CacheManager","DS/i3DXCompassCore/Utils","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassCore/Controls/PlatformNotify"],function(e,t,s,i,r,n,o){"use strict";var a=null,c=null;return{request:function(t,i,n){var a,c,u={Accept:"application/json","Accept-Language":r.getLang()},l=function(t){"function"==typeof n.onFailure?n.onFailure.apply(this,arguments):(e.log("ERROR"),e.log(t))};return a={os:r.detectOs()},u["X-Utc-Offset"]=r.getTimezoneOffset(),c={timeout:15e3,method:"GET",type:"json",headers:u,proxy:"passport",data:a,cache:-1,onComplete:function(t){var s;t.code&&"0"!==t.code||t.error?(s=t.message&&""!==t.message?t.message:t.error&&t.error.type?t.error.type:t.error?t.error:t,t.error&&"java.net.SocketTimeoutException: Read timed out"===t.error.status&&o.warn(e.i18n.get("Action is still pending... Please wait a few seconds and refresh your widget")),"function"==typeof n.onFailure?n.onFailure(t):o.alert(s)):"function"==typeof n.onComplete&&n.onComplete(t)},onFailure:l,onTimeout:function(t){o.warn(e.i18n.get("Action is still pending... Please wait a few seconds and refresh your widget")),l(t)}},s.authenticatedRequest(t,c)},formatUrl:function(e){return null!==a&&""!==a||(a=n.getApplicationConfiguration("app.urls.myapps"))||(n.getAllApplicationConfigurations(!0),void 0===(a=n.getApplicationConfiguration("app.urls.myapps"))&&(a=window.origin+"/enovia")),0===e.indexOf("http")?e:a+"/resources/AppsMngt/"+e},getTokenCSRF:function(e){return null===c&&"Pending"!==c?this.getOrGenerateTokenCSRF(e):c},getOrGenerateTokenCSRF:function(t){c="Pending",this.request(this.formatUrl("security/csrf"),{},{onComplete:function(e){c=e["X-DS-CSRFTOKEN"],t&&t.context.sync?t.context.sync(t.method,t.collection,t.options):t&&t.context.request&&(t.url?t.context.request(t.url,t.params,t.callbacks,t.method):t.context.request(t.options))},onFailure:function(s){e.log(s),c=null,t&&t.callbacks&&"function"==typeof t.callbacks.onFailure&&t.callbacks.onFailure(s)}})}}}),define("DS/i3DXCompassCore/RequestOptions",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/i3DXCompassCore/CacheManager","DS/i3DXCompassCore/Utils","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassCore/Controls/PlatformNotify","DS/i3DXCompassCore/Csrf"],function(e,t,s,i,r,n,o,a){"use strict";var c,u,l=null;return{_fetched:!1,_inProgress:!1,isFetched:function(){return this._fetched},isInProgress:function(){return this._inProgress},options:{timeout:6e4,type:"json",headers:{Accept:"application/json","X-Utc-Offset":r.getTimezoneOffset()},data:{os:r.detectOs(),debug:(void 0===u&&(u=-1!==window.location.search.indexOf("debug")),!1!==u||null)},proxy:"passport"},setup:function(e,t){return t=this.mergeOptions(t||{}),this.options=t,this.url&&("function"==typeof this.url?this.urlRoot&&this.collection.url&&(this.url=this.formatUrl(this.url())):this.url=this.formatUrl(this.url)),this._parent(e,t)},setupLanguage:function(e){c=e},sync:function(t,r,n){var u=this,l=n.onComplete,p=n.onFailure,f=null;if(u._inProgress=!0,n=this.mergeOptions(n),c&&!n.headers["Accept-Language"]&&(n.headers["Accept-Language"]=c),"patch"===t?(t="update",n.attrs&&(n.data=e.merge(n.data,n.attrs))):"update"!==t&&"create"!==t||(n.data=e.merge(n.data,r.toJSON(n))),"update"!==t&&"create"!==t&&"delete"!==t||(n.headers["X-DS-CSRFTOKEN"]=a.getTokenCSRF(),n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8"),n.cache&&n.headers["Accept-Language"]&&n.data&&(n.data["Accept-Language"]=n.headers["Accept-Language"]),n.onComplete=function(e){var s;u._inProgress=!1,e&&(e.code&&e.code.indexOf&&-1!==e.code.indexOf("CSRF")||e.indexOf&&-1!==e.indexOf("CSRF"))?a.getOrGenerateTokenCSRF({context:u,method:t,collection:r,options:n}):e&&(e.code&&"0"!==e.code||e.error)?(s=e.message&&""!==e.message?e.message:e.error&&e.error.type?e.error.type:e.error?e.error:e,p?p(e):o.alert(s)):("read"===t&&(u._fetched=!0,(n.cacheTTL||n.cacheStrategy===i.CACHE_STRATEGY_STATIC)&&i.setRequestCache(u,e,n)),l&&(f&&JSON.stringify(f)===JSON.stringify(e)||l(e)))},n.onFailure=function(s,i){u._inProgress=!1,i&&(i.code&&i.code.indexOf&&-1!==i.code.indexOf("CSRF")||i.indexOf&&-1!==i.indexOf("CSRF"))||s&&(s.code&&s.code.indexOf&&-1!==s.code.indexOf("CSRF")||s.indexOf&&-1!==s.indexOf("CSRF"))?a.getOrGenerateTokenCSRF({context:u,method:t,collection:r,options:n,callbacks:{onFailure:p,onComplete:l}}):p?p(s):(e.log("ERROR"),e.log(s))},n.onTimeout=function(t){o.warn(e.i18n("Action is still pending... Please wait a few seconds and refresh your widget")),p&&p(t)},n.cacheTTL&&!n.cacheStrategy&&(n.cacheStrategy=i.CACHE_STRATEGY_NO_WAIT),(f=i.getRequestCache(this,n))&&setTimeout(function(){l(f)},5),!f||n.cacheStrategy!==i.CACHE_STRATEGY_STATIC)return this._requestOptions=e.merge({ajax:s.authenticatedRequest},n),this._parent(t,r,this._requestOptions)},formatUrl:function(e){return null!==l&&""!==l||(l=n.getApplicationConfiguration("app.urls.myapps"))||(n.getAllApplicationConfigurations(!0),void 0===(l=n.getApplicationConfiguration("app.urls.myapps"))&&(l=window.origin+"/enovia")),0===e.indexOf("http")?e:this.getOptionsUrl(l)+(this.options.backendPath||this.getBackPath("/resources/AppsMngt/"))+e},getBackendAsset:function(e){return r.removeUselessPort(this.formatUrl(e).replace("/resources/AppsMngt/","/widget/images/MyApps/"))},getOptionsUrl:function(e){return e},getBackPath:function(e){return e},mergeOptions:function(e){var t=r.merge(e.data||{},this.options.data);return(e=r.merge(e||{},this.options)).data=t,e}}}),define("DS/i3DXCompassCore/Model/i3DXCompassModel",["UWA/Core","UWA/Class/Model","DS/i3DXCompassCore/RequestOptions"],function(e,t,s){"use strict";return t.extend(s)}),define("DS/i3DXCompassCore/Model/UserRightModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/CacheManager"],function(e,t,s){"use strict";return t.extend({url:"environment/listroles",sync:function(t,i,r){return this._parent(t,i,e.merge(r,{cache:s.LONG_LIFE_TIME}))}})}),define("DS/i3DXCompassCore/Model/PlatformModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Utils"],function(e,t,s){"use strict";return t.extend({url:"platform",getId:function(){return this.get("id")},canCrossCompany:function(){return this.get("crossCompany")},canCrossCompanyExtended:function(){return this.get("crossCompanyExtended")},getCrossCompanyRoles:function(){return this.get("crossCompanyRoles")||[]},isOnPremise:function(){var e=this.get("isOnPremise");return void 0===e&&this.get("id")&&(e=this.get("id").toLowerCase()==="OnPremise".toLowerCase()),e},hasError:function(){return s.isBetaModeActivated("subscription-error")||this.get("subscriptionError")},isPlatform:function(){return!0===this.get("platform")}})}),define("DS/i3DXCompassCore/Model/ProcessModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Utils","DS/i3DXCompassCore/Controls/Gauge"],function(e,t,s,i){"use strict";return t.extend({idAttribute:"uid",url:"role",hasFree:function(e){return void 0===e&&(e=0),!1===this.get("withLicenses")||this.canCrossCompany()||this.isTPA()||this.isCustom()||0!==this.get("free")&&this.get("free")>=e},isOption:function(){return this.get("option")},isCasual:function(){return this.get("casual")>0},isTPA:function(){return e.is(this.get("type"))&&"WA"!==this.get("type")&&"WU"!==this.get("type")},isSelfExp:function(){return!0===this.get("selfexp")},getPercent:function(){var e=100*(this.get("total")-this.get("free"))/this.get("total");return Math.min(e,100)},getType:function(){return this.isTPA()?"apps":"license"},getDisplayType:function(){return this.isTPA()?this.escape("type"):null},isDisabled:function(e,t){var s=!1;return this.isSelfExp()?s=!this.get("granted")||!(!0===this.get("remove")&&""===this.get("expire")):e?s=!this.get("granted")||!1===this.get("remove"):this.isCustom()?s=!1:this.isTPA()?s=!1===this.get("private"):(s=!1===this.get("granted")&&!this.hasFree()||!0===this.get("granted")&&!1===this.get("remove"))||!t||this.hasFree(t)||(s=!0),s},getCasual:function(){return this.isCustom()?null:this.get("casual")},isCustom:function(){var t=e.is(this.get("custom"))?this.get("custom"):this.get("icon");return!this.isTPA()&&t},getIcon:function(){return this.isTPA()?this.get("icon")||s.getAsset("3DExpPlatform_Default.png"):this.isCustom()||0===this.get("total")?this.get("icon")||s.getAsset("ROLE_64_granted.png"):this.isSelfExp()?s.getAsset("selfexp-logo.png"):new i({height:120,width:120,reversed:!0,percent:this.getPercent()}).toUrl()},canCrossCompany:function(){return!0===this.get("crossCompany")},isWA:function(){return"WA"===this.get("type")},isWU:function(){return"WU"===this.get("type")},_hasPrereq:function(){return this.get("prereq")&&this.get("prereq").process&&this.get("prereq").process.length>0},isAssignDisabled:function(e,t){var s=!1;return!1===e&&(s=0===this.get("free")),void 0!==t&&(s=this.get("free")<t),this.get("licensedDisabled")||s},isAssignSelected:function(){}})}),define("DS/i3DXCompassCore/Collection/i3DXCompassCollection",["UWA/Core","UWA/Class/Collection","DS/i3DXCompassCore/RequestOptions"],function(e,t,s){"use strict";return t.extend(s)}),define("DS/i3DXCompassCore/Collection/PaginatedCollection",["UWA/Core","DS/i3DXCompassCore/Collection/i3DXCompassCollection","DS/i3DXCompassCore/Utils"],function(e,t,s){"use strict";return t.extend({options:{data:{query:null,platform:null,sort:null,sort_direction:null,offset:null}},count:0,setParams:function(e){return this.options.data=s.merge(e,this.options.data),this},getParams:function(){return this.options.data},setPlatform:function(e){return this.getParams().platform=e,this},setSortField:function(e){return this.getParams().sort=e,this},setQuery:function(e){return this.getParams().query=e,this},getOffset:function(){return this.getParams().offset||0},setOffset:function(e){return this.getParams().offset=e,this},setLimit:function(e){return this.getParams().limit=e,this},getQuery:function(){return this.getParams().query},setMaxLimit:function(e){return this.count=e,this},setSortDirection:function(e){return this.getParams().sort_direction=e,this},getLimit:function(){return this.getParams().limit||this.size()},getMaxLimit:function(){return this.count},getPreviousOffset:function(){var e=this.getOffset();return this.hasPrevious()&&(e=parseInt(this.getOffset(),10)-parseInt(this.getLimit(),10)),e},getNextOffset:function(){var e=this.getOffset();return this.hasNext()&&(e=parseInt(this.getOffset(),10)+parseInt(this.getLimit(),10)),e},hasNext:function(){return this.getOffset()+this.getLimit()<this.getMaxLimit()},hasPrevious:function(){return this.getOffset()-this.getLimit()>0},hasPagination:function(){return this.getMaxLimit()>this.getLimit()}})}),define("DS/i3DXCompassCore/Model/ImportModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Collection/PaginatedCollection"],function(e,t,s){"use strict";return t.extend({url:"massivesynchro",_users:null,_status:null,canRetry:function(){return 0!==this.get("status")&&4!==this.get("status")&&3!==this.get("status")},inProgress:function(){return 3===this.get("status")},fileUploadError:function(){return 4===this.get("status")},setup:function(){var e=this;this._parent.apply(this,arguments),this._users=new s([],{url:this.url,data:{offset:0,limit:25}}),this._status=new s,this._users.setMaxLimit(this.get("count")),this.addEvent("onChange:users",function(t,s){e._users.set(s)}),this.addEvent("onChange:count",function(t,s){e._users.setMaxLimit(s)}),this.addEvent("onChange:statuslist",function(t,s){e._status.set(s)})}})}),define("DS/i3DXCompassCore/Model/AppModel",["UWA/Core","DS/i3DXCompassCore/Model/ProcessModel"],function(e,t){"use strict";return t.extend({url:"app/custom"})}),define("DS/i3DXCompassCore/Collection/AppsCollection",["UWA/Core","DS/i3DXCompassCore/Collection/PaginatedCollection","DS/i3DXCompassCore/Model/AppModel"],function(e,t,s){"use strict";return t.extend({url:"app/custom",model:s,parse:function(e){return this.setMaxLimit(e.count),e.data}})}),define("DS/i3DXCompassCore/Collection/ProcessCollection",["UWA/Core","DS/i3DXCompassCore/Collection/PaginatedCollection","DS/i3DXCompassCore/Model/ProcessModel"],function(e,t,s){"use strict";return t.extend({url:"role",model:s,parse:function(e){return this.setMaxLimit(e.count),e.data||e.roles},toJSONString:function(e){var t=[];return this.forEach(function(s){var i={id:s.get("uid")};!1===e&&(i.licensed=!1),t.push(i)}),JSON.stringify(t)}})}),define("DS/i3DXCompassCore/Model/CustomRoleModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/i3DXCompassCore/Utils"],function(e,t,s){"use strict";return t.extend({idAttribute:"uid",url:"role",hasFree:function(e){return void 0===e&&(e=0),!1===this.get("withLicenses")||this.canCrossCompany()||this.isTPA()||this.isCustom()||0!==this.get("free")&&this.get("free")>=e},isOption:function(){return this.get("option")},isCasual:function(){return this.get("casual")>0},isTPA:function(){return!1},isSelfExp:function(){return!0===this.get("selfexp")},getPercent:function(){var e=100*(this.get("total")-this.get("free"))/this.get("total");return Math.min(e,100)},getType:function(){return this.isTPA()?"apps":"license"},getNbApp:function(){return this.get("relationships").applications.data.length},getDisplayType:function(){return this.isTPA()?this.escape("type"):null},isDisabled:function(e,t){var s=!1;return this.isSelfExp()?s=!this.get("granted")||!(!0===this.get("remove")&&""===this.get("expire")):e?s=!this.get("granted")||!1===this.get("remove"):this.isCustom()?s=!1:this.isTPA()?s=!1===this.get("private"):(s=!1===this.get("granted")&&!this.hasFree()||!0===this.get("granted")&&!1===this.get("remove"))||!t||this.hasFree(t)||(s=!0),s},getCasual:function(){return this.isCustom()?null:this.get("casual")},getTitle:function(){return this.get("attributes").name},isCustom:function(){return this.get("attributes").custom},getIcon:function(){return this.isTPA()?this.get("icon")||s.getAsset("3DExpPlatform_Default.png"):this.isCustom()||0===this.get("total")?this.get("attributes").icon||s.getAsset("ROLE_64_granted.png"):void 0},canCrossCompany:function(){return!0===this.get("crossCompany")},isWA:function(){return!1},isWU:function(){return!1},_hasPrereq:function(){return!1},isAssignDisabled:function(e,t){var s=!1;return!1===e&&(s=0===this.get("free")),void 0!==t&&(s=this.get("free")<t),this.get("licensedDisabled")||s},isAssignSelected:function(){}})}),define("DS/i3DXCompassCore/Collection/CustomRoleCollection",["DS/i3DXCompassCore/Collection/ProcessCollection","DS/i3DXCompassCore/Model/CustomRoleModel"],function(e,t){"use strict";return e.extend({url:"api/custom/roles",model:t,parse:function(e){return this.setMaxLimit(e.count),e.data||e.roles}})}),define("DS/i3DXCompassCore/Utils/Ajax",["UWA/Core","UWA/Class","UWA/Data","DS/i3DXCompassCore/Controls/PlatformNotify","UWA/Class/Options","DS/i3DXCompassCore/Utils","UWA/Storage","DS/WAFData/WAFData","DS/i3DXCompassCore/Csrf","i18n!DS/i3DXCompassCore/assets/nls/i3DXCompassCore","UWA/Storage/Adapter/Dom"],function(e,t,s,i,r,n,o,a,c,u){"use strict";return t.extend(r,{defaultOptions:{url:"",callbacks:{},params:{}},init:function(e){this.setOptions(e)},request:function(t,s,r,o){var l,p,f,h=this,d={Accept:"application/json","Accept-Language":n.getLang()},m="passport";return s=e.merge({os:n.detectOs()},s),f=function(i,n){n&&(n.code&&n.code.indexOf&&-1!==n.code.indexOf("CSRF")||n.indexOf&&-1!==n.indexOf("CSRF"))||i&&(i.code&&i.code.indexOf&&-1!==i.code.indexOf("CSRF")||i.indexOf&&-1!==i.indexOf("CSRF"))?c.getOrGenerateTokenCSRF({context:h,url:t,params:s,callbacks:r,method:o}):"function"==typeof r.onFailure?r.onFailure.apply(this,arguments):(e.log("ERROR"),e.log(i))},o=o||"GET",null===s.proxy?m=null:s.proxy&&(m=s.proxy),l=s,"POST"!==o&&"PUT"!==o&&"DELETE"!==o||(d["X-DS-CSRFTOKEN"]=c.getTokenCSRF(),d["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8"),d["X-Utc-Offset"]=n.getTimezoneOffset(),p={timeout:15e3,method:o,type:s.responseType||"json",headers:d,proxy:m,data:l,cache:-1,onComplete:function(e){var n;e&&(e.code&&e.code&&e.code.indexOf&&-1!==e.code.indexOf("CSRF")||e.indexOf&&-1!==e.indexOf("CSRF"))?c.getOrGenerateTokenCSRF({context:h,url:t,params:s,callbacks:r,method:o}):e.code&&"0"!==e.code||e.error?(n=e.message&&""!==e.message?e.message:e.error&&e.error.type?e.error.type:e.error?e.error:e,e.error&&"java.net.SocketTimeoutException: Read timed out"===e.error.status&&i.warn(u.get("Action is still pending... Please wait a few seconds and refresh your widget")),"function"==typeof r.onFailure?r.onFailure(e):i.alert(n)):"function"==typeof r.onComplete&&r.onComplete(e)},onFailure:f,onTimeout:function(e){i.warn(u.get("Action is still pending... Please wait a few seconds and refresh your widget")),f(e)}},a.authenticatedRequest(t,p)},get:function(){return this.request(this.options.url,this.options.params,this.options.callbacks,"GET")},post:function(){return this.request(this.options.url,this.options.params,this.options.callbacks,"POST")},put:function(){this.request(this.options.url,this.options.params,this.options.callbacks,"PUT")},doDelete:function(){return this.request(this.options.url,this.options.params,this.options.callbacks,"DELETE")},create:function(){return this.post()},update:function(){return this.put()}})}),define("DS/i3DXCompassCore/Utils/Data",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/WebappsUtils/WebappsUtils","DS/i3DXCompassCore/Utils/Ajax","DS/i3DXCompassCore/Utils"],function(e,t,s,i){"use strict";var r={proxy:{baseUrl:"",baseUrlBackend:"{0}/resources/AppsMngt/",getpreferences:"{0}user/getPreferences",setpreferences:"{0}user/setPreferences",licensesUser:"{0}licenses/user/",removeAllRoles:"{0}/licenses/allroles",faillurePage:"{0}uploadfile/message?error=true",faillurePageImport:"{0}massivesynchro/upload/result?success=false",eServiceError:"{0}/enovia/eServiceError.jsp",removefile:"{0}environment/removefile",platformInvite:"{0}platform/invite",userSupportMode:"{0}user/supportmode",massiveSynchroStart:"{0}massivesynchro/start",massiveSynchroFile:"{0}massivesynchro/file"},formatUrl:function(e){return""===r.proxy.baseUrl&&(r.proxy.baseUrl=t.getApplicationConfiguration("app.urls.myapps"),r.proxy.baseUrl||(t.getAllApplicationConfigurations(!0),r.proxy.baseUrl=t.getApplicationConfiguration("app.urls.myapps")),r.proxy.baseUrlBackend=r.proxy.baseUrlBackend.format(r.proxy.baseUrl)),e.format(r.proxy.baseUrlBackend)}};return{get:function(e){return r.proxy[e]?r.formatUrl(r.proxy[e]):""},getUrl:function(e){return r.proxy[e]?r.formatUrl(r.proxy[e]):""},createLicensesUser:function(e,t){return new i({url:r.formatUrl(r.proxy.licensesUser),params:e,callbacks:t}).create()},updateLicensesUser:function(e,t){return new i({url:r.formatUrl(r.proxy.licensesUser),params:e,callbacks:t}).update()},deleteLicensesUser:function(e){return new i({url:r.formatUrl(r.proxy.licensesUser),params:e.params||{},callbacks:e.callbacks||{}}).doDelete()},removeAllRoles:function(e){return new i({url:r.formatUrl(r.proxy.removeAllRoles),params:e.data||{},callbacks:e.callbacks||{}}).doDelete()},removeFile:function(e,t){return new i({url:r.formatUrl(r.proxy.removefile),params:e,callbacks:t}).get()},getPreferences:function(t,s){return t=e.merge({responseType:"text"},t),new i({url:r.formatUrl(r.proxy.getpreferences),params:t,callbacks:s}).get()},setSupportMode:function(e){return new i({url:r.formatUrl(r.proxy.userSupportMode),params:e.params,callbacks:e.callbacks}).create()},platformInvite:function(e,t){return new i({url:r.formatUrl(r.proxy.platformInvite),params:e,callbacks:t}).create()},startImport:function(e){return new i({url:r.formatUrl(r.proxy.massiveSynchroStart),params:e.params||{},callbacks:e.callbacks||{}}).post()},getImportFile:function(e){return new i({url:r.formatUrl(r.proxy.massiveSynchroFile),params:e.params||{},callbacks:e.callbacks||{}}).get()}}}),define("DS/i3DXCompassCore/Model/PreferencesModel",["UWA/Core","UWA/Class/Model","UWA/Utils","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassCore/Utils/Data","DS/i3DXCompassCore/Utils","DS/i3DXCompassCore/CacheManager"],function(e,t,s,i,r,n,o){"use strict";return new(t.extend({backendModel:new t,defaults:{membersMaxPerPage:"25",membersSortField:"Last Name",membersSortDirection:"asc",membersDisplayPicture:"true",processesMaxPerPage:"25",processesSortDirection:"asc",advancedMode:!1,displayMode:"grid"},isGridLayout:function(){return this._displayMode||(this._displayMode=o.getCache("displayMode-"+n.getWidget(),0)||this.get("displayMode")),"grid"===this._displayMode},shouldLoadPicture:function(){return!0===this.get("membersDisplayPicture")||"true"===this.get("membersDisplayPicture")},setLayout:function(e){this._displayMode=e,o.setCache("displayMode-"+n.getWidget(),e),n.getWidget().setValue("displayMode",e)},isFetched:!1,setup:function(){return this.createUid(),this},createUid:function(){return this.id=o._getKeyUID("pm-preferences"),this.id},sync:function(e,t,s){switch(e){case"read":this.isFetched||this.fetchLocal()?(this.isFetched=!0,s.onComplete.call(this)):this.fetchRemote(s.onComplete)}},fetchLocal:function(){var t,s=!1;try{(t=sessionStorage.getItem(this.id))&&(this.set(JSON.parse(t)),s=!0)}catch(t){e.log(t)}return s},fetchRemote:function(e){var t=this;r.getPreferences({name:"pm-preferences"},{onComplete:function(i){var r;""!==i&&(r=JSON.parse(s.base64Decode(i.replace("_","="))))&&(t.set(r),this.isFetched=!1),t.saveLocal(),e.call(t)}})},saveLocal:function(){var t=!1;try{sessionStorage.setItem(this.id,JSON.stringify(this.toJSON())),t=!0}catch(t){e.log(t)}return t},clear:function(){var t=this._parent();try{sessionStorage.removeItem(this.id)}catch(t){e.log(t)}return this.isFetched=!1,this.set(this.defaults),t}}))}),define("DS/i3DXCompassCore/Model/MemberDetailsModel",["UWA/Core","DS/i3DXCompassCore/Model/i3DXCompassModel","DS/WebappsUtils/WebappsUtils","DS/i3DXCompassCore/Utils","DS/i3DXCompassCore/Utils/Data"],function(e,t,s,i,r){"use strict";return t.extend({url:"user",idAttribute:"id",defaults:{user:"",firstname:"",lastname:"",email:"",platform:"",platformName:"",role:"",agreement:"",active:null,supportMode:null,legal:null,processes:null,apps:null,remove:!0,deny:!1},setup:function(e,t){return this.get("email")&&this.set("email",this.get("email").toLowerCase()),this._parent(e,t)},getUserFullName:function(t){var s=this.escape("firstname")?e.String.ucfirst(this.escape("firstname")):"",i=this.escape("lastname")?e.String.ucfirst(this.escape("lastname")):"",r="";return""===s&&(s=this.escape("firstName")?e.String.ucfirst(this.escape("firstName")):""),""===i&&(i=this.escape("lastName")?e.String.ucfirst(this.escape("lastName")):""),""!==s.trim()&&""!==i.trim()?r=s.trim()+" "+i.trim():this.escape("email")&&""!==this.escape("email").trim()?r=this.escape("email").trim():this.escape("id")&&""!==this.escape("id").trim()&&(r=this.escape("id").trim()),t&&this.escape("id").length<=4&&(r=r+" - "+this.escape("id").toUpperCase()),r},getUserId:function(){return this.get("id")||this.get("id")||this.get("email").toLowerCase()},getProfile:function(t,r){var n;return t&&""!==r&&e.is(r)?n=e.String.format("{0}/api/media/streammediasprite/idList/{1}?{2}",r,this.getSpriteItem(),this.get("cacheBuster")?""+this.get("cacheBuster"):this.get("agreement")):(n=i.isCheckedAgreement(this.get("agreement"))?"default-profile-contractor.png":"default-profile.png",n=s.getWebappsAssetUrl("PlatformManagement","")+n),n},getSpriteItem:function(){return(""===this.get("firstname")?this.get("email"):this.get("id"))+":7:6"},isDeny:function(){return"2"===this.get("role")},isContractor:function(){return i.isCheckedAgreement(this.get("agreement"))},isCasual:function(){return this.get("casual")>0},removeLicense:function(t,s,i){r.deleteLicensesUser(e.merge({params:{user:this.get("id"),licenses:s.canCrossCompany()?JSON.stringify([{id:t.get("uid"),licensed:t.get("licensed"),restricted:t.get("restricted")}]):JSON.stringify([{id:t.get("uid")}]),type:t.getType(),platform:s.getId()}},{callbacks:i}))},addLicense:function(e,t,s,i){r.createLicensesUser({user:this.get("id"),licenses:JSON.stringify(e),type:t,platform:s.getId()},i)},updateLicense:function(e,t,s,i){r.updateLicensesUser({user:this.get("id"),licenses:JSON.stringify(e),type:t,platform:s.getId()},i)}})}),define("DS/i3DXCompassCore/Collection/MemberCollection",["UWA/Core","DS/i3DXCompassCore/Collection/PaginatedCollection","DS/i3DXCompassCore/Model/MemberDetailsModel"],function(e,t,s){"use strict";return t.extend({url:"user",model:s,sync:function(e,t,s){return this._parent(e,t,s)},parse:function(e){return this.setMaxLimit(e.count),e.tag&&this.setTags(e.tag),e.data||e.users},setTags:function(e){this.tags=e},getTags:function(){return this.tags}})});