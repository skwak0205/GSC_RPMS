define("DS/MPFPaginationComponent/PaginationComponent",["UWA/Core","UWA/Class/View","DS/MPFModel/MPFCollection","DS/MPFServices/ObjectService","css!DS/MPFPaginationComponent/MPFPaginationComponent.css"],function(e,t,i,s){"use strict";var a,n={};return n.CHANGE_PAGE="changePage",(a=t.extend({className:"mpf-pagination",tagName:"nav",setup:function(e){e||(e={}),s.requiredOfPrototype(this.collection,i,"options.collection must be a MPFCollection"),this.pageSize=e.pageSize||20,this.pageCount=this._computePageCount(),this.currentPage=e.currentPage||1,this.backArrow=this._createBackArrow(),this.nextArrow=this._createNextArrow(),this.pages=this._createPages(),this._refreshControls(),this.listenTo(this.collection,"onReset",this._onCollectionUpdate.bind(this))},render:function(){return this.container.setContent(e.createElement("ol",{class:"mpf-page-selection",html:[this.backArrow,this.pages,this.nextArrow]})),this},destroy:function(){this.stopListening(this.collection),this.collection=null,this._parent()},_createBackArrow:function(){return e.createElement("li",{class:"mpf-pagination-item",html:{tag:"a",class:"mpf-link fonticon fonticon-chevron-left"},events:{click:this._goToPreviousPage.bind(this)}})},_goToPreviousPage:function(){var e;(e=this.currentPage-1)>0&&this.changePage(e)},_createNextArrow:function(){return e.createElement("li",{class:"mpf-pagination-item",html:{tag:"a",class:"mpf-link fonticon fonticon-chevron-right"},events:{click:this._goToNextPage.bind(this)}})},_goToNextPage:function(){var e;(e=this.currentPage+1)<=this.pageCount&&this.changePage(e)},_createPages:function(){var t,i,s,a,n,r=[];for(i=Math.max(2,this.currentPage-5),s=Math.max(2,this.currentPage-2),a=Math.min(this.pageCount,this.currentPage+5+1),n=Math.min(this.pageCount,this.currentPage+2+1),r.push(this._createPage(1)),i>2&&r.push(this._createEllipsis()),s>2&&r.push(this._createEllipsis({xsOnly:!0})),t=i;t<a;t++)r.push(this._createPage(t));return a<this.pageCount&&r.push(this._createEllipsis()),n<this.pageCount&&r.push(this._createEllipsis({xsOnly:!0})),this.pageCount>1&&r.push(this._createPage(this.pageCount)),e.createElement("li",{class:"mpf-pagination-item",html:{tag:"ol",class:"mpf-pages",html:r}})},_createEllipsis:function(t){var i;return i=["mpf-pagination-item"],t&&!0===t.xsOnly?i.push("mpf-visible-xs"):i.push("mpf-hidden-xs"),e.createElement("li",{class:i.join(" "),text:"â€¦"})},_createPage:function(t){var i,s,a,n,r;return s=["mpf-pagination-item"],a=Math.abs(this.currentPage-t),n=1===t,r=t===this.pageCount,!n&&!r&&a>2&&s.push("mpf-hidden-xs"),(i=e.createElement("li",{class:s.join(" "),html:[{tag:"a",class:"mpf-link",text:t}],events:{click:this.changePage.bind(this,t)}})).setData("pageNumber",t),i},_computePageCount:function(){var e;return e=this.collection.getTotalModelCount(),Math.ceil(e/this.pageSize)},changePage:function(e,t){t||(t={}),e>0&&e<=this.pageCount&&(this.currentPage=e,!0!==t.silent&&this.dispatchEvent(n.CHANGE_PAGE,{page:this.currentPage}),this._refreshControls())},_refreshControls:function(){this.backArrow.removeClassName("mpf-disabled"),this.nextArrow.removeClassName("mpf-disabled"),1===this.currentPage&&this.backArrow.addClassName("mpf-disabled"),this.currentPage===this.pageCount&&this.nextArrow.addClassName("mpf-disabled"),this._highlightSelectedPage()},_highlightSelectedPage:function(){this.pages.getElements(".mpf-pagination-item").forEach(function(e){e.getData("pageNumber")===this.currentPage?e.addClassName("mpf-selected"):e.removeClassName("mpf-selected")},this)},_onCollectionUpdate:function(){this.pageCount=this._computePageCount(),this.backArrow=this._createBackArrow(),this.nextArrow=this._createNextArrow(),this.pages=this._createPages(),this._refreshControls(),this.render()}})).Events=Object.freeze(n),a});