define("DS/CAT3DExpAmbienceModelWebMedia/extensions/CATE3DXAmbienceAssetMedia",["UWA/Core","DS/CAT3DExpAmbienceModelWeb/extensions/CATE3DXAmbienceAsset","DS/Visualization/ModelLoader","DS/Visualization/Node3D"],function(e,t,i,n){"use strict";return t.extend({_getAmbienceFromAsset:function(t){if(!(t instanceof Blob))return e.Promise.reject(new Error("Cant retrieve ambience asset for object "+this.GetObject().GetID()));var r=e.Promise.deferred(),o=new i,s=URL.createObjectURL(t);return o.setFileType(this._getFileType(t)),o.setOnLoadedCallback(function(e){URL.revokeObjectURL(s),r.resolve(e.ambiance)}),o.loadModel(s,new n),r.promise},_getFileType:function(e){for(var t in this._typeExtMap)if(e.name.endsWith(t))return this._typeExtMap[t]},_typeExtMap:{".cgr":"cgr",".xcgr":"cgr",".3dxml":"xmlv43",".3dx":"3dx",".3dxc":"3dxc"}})});