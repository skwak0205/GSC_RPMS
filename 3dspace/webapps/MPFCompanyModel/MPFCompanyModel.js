define("DS/MPFCompanyModel/CheckVatDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError"],function(t,e){"use strict";return t.extend({init:function(t,e){this._parent(t,"/mdpeoplecompany/check-vat",e)},buildPath:function(t){return this.resourcePath},urlPatch:e.emit,urlGet:e.emit,urlPut:e.emit,urlDelete:e.emit,doPatch:e.emit,doGet:e.emit,doPut:e.emit,doDelete:e.emit})}),define("DS/MPFCompanyModel/MeCompanyDataProxy",["DS/MPFDataProxy/DataProxy"],function(t){"use strict";return t.extend({init:function(t){this._parent(t,"/me/companies")},url:function(){return this.connector.url(this.resourcePath)},request:function(t,e){var r;if("GET"===(r=e.method)||"POST"===r)return this._parent(t,e);"function"==typeof e.onFailure&&e.onFailure(r+" is not supported for "+this.path)}})}),define("DS/MPFCompanyModel/CompanyHelper",[],function(){"use strict";return{getCompanyFromPerson:function(t,e){var r,n,i;return(r=t.getCompany())&&(n=this.getIdFromUrl(r))&&(i=e.createModel("company",{id:n})),i},getIdFromUrl:function(t){return(t.match(/[0-9A-Z]{32}$/)||[""])[0]}}}),define("DS/MPFCompanyModel/CompanyIndustryListDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError"],function(t,e){"use strict";return t.extend({init:function(t){this._parent(t,"/formats/industries")},urlPost:e.emit,urlPut:e.emit,urlPatch:e.emit,urlDelete:e.emit})}),define("DS/MPFCompanyModel/CompanyMemberDataProxy",["DS/MPFDataProxy/DataProxy","UWA/Core"],function(t,e){"use strict";return t.extend({init:function(t){this._parent(t,"/mdpeoplecompany/companies/{0}/members")},request:function(t,e){"POST"!==e.method&&"PUT"!==e.method||(e.method="PATCH"),this._parent(t,e)},url:function(t,r,n){return this.connector.url(e.String.format(this.resourcePath,t.parentResourceId))},urlPatch:function(t){return this.connector.url(this.delegate.resourcePath+"/"+t.get("id"))}})}),define("DS/MPFCompanyModel/MatchingCompaniesDataProxy",["DS/MPFDataProxy/DataProxy","DS/MPFError/NotImplementedError"],function(t,e){"use strict";return t.extend({init:function(t,e){this._parent(t,"/mdpeoplecompany/matching-companies",e)},buildPath:function(t){return this.resourcePath},urlPatch:e.emit,urlGet:e.emit,urlPut:e.emit,urlDelete:e.emit,doPatch:e.emit,doGet:e.emit,doPut:e.emit,doDelete:e.emit})}),define("DS/MPFCompanyModel/CompanyModel",["UWA/Core","DS/MPFModel/MPFModel","DS/MPFModel/ModelValidator","DS/MPFAddressModel/AddressFactory","DS/MPFAddressModel/AddressModel","i18n!DS/MPFCompanyModel/assets/nls/Company"],function(t,e,r,n,i,o){"use strict";var s,a={},d={},u={},c={};function l(t,e){var r,n,i,o=!0;switch(e){case"FRA":r=/^(FR)([A-HJ-NP-Z]\d{10})$/,n=/^(FR)(\d[A-HJ-NP-Z]\d{9})$/,i=/^(FR)([A-HJ-NP-Z]{2}\d{9})$/,o=/^(FR)(\d{11})$/.test(t)||r.test(t)||n.test(t)||i.test(t);break;case"GBR":r=/^(GB)?(\d{12})$/,n=/^(GB)?(GD\d{3})$/,i=/^(GB)?(HA\d{3})$/,o=/^(GB)?(\d{9})$/.test(t)||r.test(t)||n.test(t)||i.test(t);break;case"BEL":o=/^(BE)(0?\d{9})$/.test(t);break;case"ITA":o=/^(IT)(\d{11})$/.test(t);break;case"DEU":o=/^(DE)([1-9]\d{8})$/.test(t);break;default:o=!0}return o}return d.NAME="name",d.CEO_FIRST_NAME="ceoFirstName",d.CEO_LAST_NAME="ceoLastName",d.CEO_DATE_OF_BIRTH="ceoDateOfBirth",d.CEO_PERSONAL_ID_NUMBER="ceoPersonalId",d.TAX_REGISTRATION_ID="taxRegistrationId",d.VAT_ID="vatId",d.REGISTRATION_ID="registrationId",d.IS_SELLER_DUE_TO_ONLINE_TAX="isSellerDueToOnlineTax",d.COUNTRY="country",d.EMP_NAME="PrivateMPName",d.EMP_FILTER="PrivateMPFilter",d.EMP_PROJECT_NAME="PrivateMPProjectName",d.EMP_ALLOW_PUBLIC_SELLERS="PrivateMPAllowPublicSellers",d.EMP_URL="PrivateMPURL",d.UBO_PERSONS="uboPersons",d.NO_SHAREHOLDER="isSingleStakeHolder",d.DRUPAL_ID="drupalId",d.SITE_ID="siteId",d.BUSINESS_TYPE="businessType",d.INDUSTRY="industry",d.DESCRIPTION="description",d.BUSINESS_WEBSITE_URL="businessWebSiteUrl",d.EXECUTIVES_PROVIDED="executivesProvided",d.DIRECTORS_PROVIDED="directorsProvided",d.OWNERS_PROVIDED="ownersProvided",d.MATCHING_COMPANIES="matchingCompanies",d.BILL_TO_ADDRESS="billToAddress",d.NO_VAT_ID="noVatId",u.ADDRESSES="addresses",c.COMPANY="Company",c.NON_PROFIT="NonProfil&Education",a[d.NAME]=null,a[d.CEO_FIRST_NAME]=null,a[d.CEO_LAST_NAME]=null,a[d.TAX_REGISTRATION_ID]=null,a[d.REGISTRATION_ID]=null,a[d.IS_SELLER_DUE_TO_ONLINE_TAX]=null,a[d.BUSINESS_TYPE]=c.COMPANY,(s=e.extend({defaults:a,setup:function(t,e){this._parent(t,e),this.addressFactory=e.addressFactory,this._type="CompanyModel",this.owner=null,this.addresses=null,this.constraints=e.constraints,this.validator=this._createValidator()},parse:function(e){var r,i,o,s=this;if(Array.isArray(e))o=e,(e={})[d.MATCHING_COMPANIES]=o.map(function(e){return e.billToAddress=t.is(s.addressFactory)?s.addressFactory.createModel(n.Types.COMPANY,e.billToAddress,{parse:!0}):e.billToAddress,s.parse(e)});else{if(e.taxRegistrationId=t.is(e.taxRegistrationId)?e.taxRegistrationId:e.taxId,delete e.taxId,t.is(e.taxRegistrationId,"string")&&(e.taxRegistrationId=e.taxRegistrationId.trim()),"object"==typeof(r=e.owner)&&(this.owner=r),delete e.owner,i=e.addresses,this.addressFactory&&"array"===t.typeOf(i))if(i.length>0&&"string"==typeof i[0]){this.addresses=this.addressFactory.createCollection("address");for(var a=0;a<i.length;a++){var u=this.addressFactory.createModel("address");u.set("id",i[a].split("/")[i[a].split("/").length-1]),u.fetch(),this.addresses.add(u)}}else this.addresses=this.addressFactory.createCollection("company",i,{parse:!0});e.hasOwnProperty("PrivateMPFilter")&&"string"==typeof e.PrivateMPFilter&&(e.PrivateMPFilter=""===e.PrivateMPFilter?[]:e.PrivateMPFilter.split(",")),delete e.addresses}return e},toJSON:function(){var e,r=this._parent();for(e in r)r.hasOwnProperty(e)&&null===r[e]&&delete r[e];return r.hasOwnProperty("PrivateMPFilter")&&(r.PrivateMPFilter=r.PrivateMPFilter.join()),r.hasOwnProperty(d.BILL_TO_ADDRESS)&&(i.prototype.isPrototypeOf(r[d.BILL_TO_ADDRESS])?r[d.BILL_TO_ADDRESS]=r[d.BILL_TO_ADDRESS].toJSON():t.is(r[d.BILL_TO_ADDRESS],"object")&&(r[d.BILL_TO_ADDRESS].zipcode=r[d.BILL_TO_ADDRESS][i.Fields.POSTAL_CODE],delete r[d.BILL_TO_ADDRESS][i.Fields.POSTAL_CODE])),r},validate:function(t){return this.validator.validate(t)},validTaxRegID:l,_isCeoPersonalIdNumberValid:function(t){var e,r=!0;if(e=this.getCountryFromAddress(),t&&e)switch(e){case"USA":r=t.test(/^(\d{4}|\d{9})$/);break;case"CAN":r=t.test(/^\d{9}$/)}return r},getID:function(){return this.getId()},setID:function(t){return this.setId(t)},getId:function(){return this.get("id")},setId:function(t){return this.set("id",t)},getOwner:function(){return this.owner},setOwner:function(t){this.owner=t},getAddresses:function(){return this.addresses},setAddresses:function(t){this.addresses=t},getName:function(){return this.get(d.NAME)},setName:function(t){return this.set(d.NAME,t)},getCeoFirstName:function(){return this.get(d.CEO_FIRST_NAME)},setCeoFirstName:function(t){return this.set(d.CEO_FIRST_NAME,t)},getCeoLastName:function(){return this.get(d.CEO_LAST_NAME)},setCeoLastName:function(t){return this.set(d.CEO_LAST_NAME,t)},getCeoFullName:function(){return this.getCeoFirstName()+" "+this.getCeoLastName()},getCeoDateOfBirth:function(){return this.get(d.CEO_DATE_OF_BIRTH)},getCeoPersonalIdNumber:function(){return this.get(d.CEO_PERSONAL_ID_NUMBER)},getRegistrationId:function(){return this.get(d.REGISTRATION_ID)},setRegistrationId:function(t){return this.set(d.REGISTRATION_ID,t)},getTaxRegistrationId:function(){return this.get(d.TAX_REGISTRATION_ID)},setTaxRegistrationId:function(t){return this.set(d.TAX_REGISTRATION_ID,t)},hasNoVatId:function(){return"TRUE"===this.get(d.NO_VAT_ID)},setNoVatId:function(t){return this.set(d.NO_VAT_ID,t?"TRUE":"FALSE")},getIsSellerDueToOnlineTax:function(){return this.get(d.IS_SELLER_DUE_TO_ONLINE_TAX)},setIsSellerDueToOnlineTax:function(t){this.set(d.IS_SELLER_DUE_TO_ONLINE_TAX,!0===t)},getCountry:function(){return this.get(d.COUNTRY)},setCountry:function(t){return this.set(d.COUNTRY,t)},getCountryFromAddress:function(){var t,e;return(e=(t=this.getAddresses())&&t.first())&&e.getCountry()},getEmpProjectName:function(){return this.get(d.EMP_PROJECT_NAME)},getEmpName:function(){return this.get(d.EMP_NAME)},getEmpUrl:function(){return this.get(d.EMP_URL)},getUboPersons:function(){return this.get(d.UBO_PERSONS)},getNoShareHolder:function(){var t;return!0===(t=this.get(d.NO_SHAREHOLDER))||"TRUE"===t||"true"===t},getOwnersProvided:function(){var t;return!0===(t=this.get(d.OWNERS_PROVIDED))||"TRUE"===t||"true"===t},getEMPAllowPublicSellers:function(){return"TRUE"===this.get(d.EMP_ALLOW_PUBLIC_SELLERS)},getDrupalId:function(){return this.get(d.DRUPAL_ID)},getSiteId:function(){return this.get(d.SITE_ID)},getMatchingCompanies:function(){return this.get(d.MATCHING_COMPANIES)},getBillToAddress:function(){return this.get(d.BILL_TO_ADDRESS)},isNonProfit:function(){return this.get(d.BUSINESS_TYPE)===c.NON_PROFIT},_createValidator:function(){return new r({model:this,validations:[{attribute:d.NAME,required:!0,requiredError:o.get("errorName")},{attribute:d.EMP_NAME,pattern:/^[A-Za-z0-9 ]*$/,required:!1,invalidError:o.get("noSpecialCharacterMessage")},{attribute:d.REGISTRATION_ID,pattern:/^(?!http:\/\/|https:\/\/|www\.).*(?!\.\w+)$/,required:!1,invalidError:o.get("errorRegistrationIdFormat")},{attribute:d.REGISTRATION_ID,pattern:/^.{0,30}$/,required:!1,invalidError:o.get("errorRegistrationIdFormat")},{attribute:d.TAX_REGISTRATION_ID,pattern:/^(?!http:\/\/|https:\/\/|www\.).*(?!\.\w+)$/,required:!1,invalidError:o.get("errorTaxRegId")},{attribute:d.CEO_FIRST_NAME,pattern:/^.{0,255}$/,required:!1,invalidError:o.get("errorCeoFirstName")},{attribute:d.CEO_LAST_NAME,pattern:/^.{0,255}$/,required:!1,invalidError:o.get("errorCeoLastName")},{attribute:d.BUSINESS_WEBSITE_URL,pattern:/^.+\..+$/,required:!1,invalidError:o.get("invalidURL")}]})}})).Fields=Object.freeze(d),s.Expands=Object.freeze(u),s.BusinessTypes=Object.freeze(c),s.validateTaxRegistrationId=l,s}),define("DS/MPFCompanyModel/CompanyDataProxy",["UWA/Core","DS/MPFDataProxy/DataProxy"],function(t,e){"use strict";return e.extend({init:function(t,e){this._parent(t,"/mdpeoplecompany/companies",e)},urlGet:function(t,e){return e||(e={}),e.expand||(e.expand=["addresses","registrations"]),this._parent(t,e)}})}),define("DS/MPFCompanyModel/CompanyIndustryListModel",["DS/MPFModel/MPFModel"],function(t){"use strict";var e;return(e=t.extend({setup:function(t,e){this._type="CompanyIndustryListModel",this._parent(t,e)}})).Fields=Object.freeze({}),e}),define("DS/MPFCompanyModel/CompanyIndustryListFactory",["DS/MPFModelFactory/Factory","DS/MPFCompanyModel/CompanyIndustryListModel","DS/MPFCompanyModel/CompanyIndustryListDataProxy","DS/MPFError/NotImplementedError"],function(t,e,r,n){"use strict";var i={STRIPE:"Stripe"},o=t.extend({createModel:function(t,r,n){return t=t||i.STRIPE,this._parent(e,t,r,n)},createCollection:n.emit,getDataProxy:function(){return this.dataProxies[i.STRIPE]||(this.dataProxies[i.STRIPE]=new r(this.connector)),this.dataProxies[i.STRIPE]}});return o.Types=i,o}),define("DS/MPFCompanyModel/CompanyCollection",["DS/MPFModel/MPFCollection","DS/MPFCompanyModel/CompanyModel"],function(t,e){"use strict";return t.extend({model:e})}),define("DS/MPFCompanyModel/CompanyFactory",["UWA/Promise","DS/MPFModelFactory/Factory","DS/MPFCompanyModel/CompanyDataProxy","DS/MPFCompanyModel/MeCompanyDataProxy","DS/MPFCompanyModel/MatchingCompaniesDataProxy","DS/MPFCompanyModel/CheckVatDataProxy","DS/MPFCompanyModel/CompanyModel","DS/MPFCompanyModel/CompanyCollection","DS/MPFCompanyConstraintsModel/CompanyConstraintsCollection","DS/MPFCompanyConstraintsModel/CompanyConstraintsDataProxy"],function(t,e,r,n,i,o,s,a,d,u){"use strict";var c,l={COMPANY:"COMPANY",MATCHING_COMPANIES:"MATCHING_COMPANIES",CHECK_VAT:"CHECK_VAT",ME:"ME",CONSTRAINTS:"CONSTRAINTS"};return(c=e.extend({init:function(t,e){this._parent(t,e),this.addressFactory=e&&e.addressFactory,this.companyConstraints=new d([],{dataProxy:this.getDataProxy("constraints")})},whenReady:function(){return this.companyConstraints.size()>0?t.resolve(this.companyConstraints):this.companyConstraints.fetchPromise()},createModel:function(t,e,r){return r||(r={}),r.addressFactory=r.addressFactory||this.addressFactory,r.constraints=r.constraints||this.companyConstraints,this._parent(s,t,e,r)},createCollection:function(t,e,r){return r||(r={}),r.addressFactory=r.addressFactory||this.addressFactory,r.constraints=r.constraints||this.companyConstraints,this._parent(a,t,e,r)},getDataProxy:function(t){var e;return(t=t&&t.toUpperCase())===l.ME?(this.dataProxies.me||(this.dataProxies.me=new n(this.connector)),e=this.dataProxies.me):t===l.CONSTRAINTS?(this.dataProxies.constraints||(this.dataProxies.constraints=new u(this.connector)),e=this.dataProxies.constraints):t===l.MATCHING_COMPANIES?(this.dataProxies.matchingCompanies||(this.dataProxies.matchingCompanies=new i(this.connector)),e=this.dataProxies.matchingCompanies):t===l.CHECK_VAT?(this.dataProxies.checkVat||(this.dataProxies.checkVat=new o(this.connector)),e=this.dataProxies.checkVat):(this.dataProxies.company||(this.dataProxies.company=new r(this.connector)),e=this.dataProxies.company),e}})).Types=Object.freeze(l),c});