define("DS/CfgWebinWinInterop/scripts/CfgWIWUtility",["DS/CfgBaseUX/scripts/CfgUtility","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX"],function(e,t){"use strict";return{retrieveModeldetails:function(e){var t=this;return new Promise(function(i,n){t.searchModeldetails(e).then(function(e){var n=t.convertSearchResponseToJson(e);UWA.is(n)&&n.length>0&&UWA.is(n[0].preview_url)&&""!=n[0].preview_url?i(n):t.getPrimaryImageFromLegacyDico(n).then(function(e){i(n)})})})},searchModeldetails:function(t){return new Promise(function(i,n){var o={with_indexing_date:!0,label:"model-info",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6w:description","ds6w:identifier","ds6w:modified","ds6w:created","ds6w:responsible","ds6w:lastModifiedBy","ds6wg:marketing_Name"],select_file:["icon","thumbnail_2d"],order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:enoviaServerFilterWidget.tenant},s="";t.forEach(function(e,t){s=0==t?"physicalid:"+e:s+" OR physicalid:"+e}),o.query=s;o=JSON.stringify(o);e.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",o,function(e){i(e)},function(){n()},!0,{isfederated:"true"})})},getPrimaryImageFromLegacyDico:function(t){return new Promise(function(i,n){var o=0;t.forEach(function(s,r){var a="/resources/modeler/browsing/browseservice/pid:"+s.physicalID+"/configurationdictionary?";a+="image=1",e.makeWSCall(a,"POST","enovia","application/x-www-form-urlencoded","",function(e){""!=e.image&&(s.preview_url=e.image),(o+=1)==t.length&&i(e)},function(e){n(e)},!0)})})},convertSearchResponseToJson:function(t){var i=[];return t&&t.results&&t.results.forEach(function(t,n){var o={id:"temp",data:[],basicData:[]};o.basicData=t.attributes,t.attributes.forEach(function(t,i){if("resourceid"==t.name&&(o.physicalID=t.value),"ds6w:label"==t.name){var n=[];n.push(t.value),o.data.push({name:"Marketing Name",value:n})}if("preview_url"==t.name&&(o.preview_url=t.value),"ds6w:who/ds6w:responsible"==t.name&&o.basicData.push({name:"owner",value:t.value}),"ds6w:identifier"==t.name&&o.basicData.push({name:"name",value:t.value}),"ds6w:what/ds6w:status"==t.name){var s=[];e.isDefined(t.dispValue)?(s.push(""),s.push(t.dispValue)):s=t.value.split("Model."),o.basicData.push({name:"current",value:s})}}),i.push(o)}),i}}}),define("DS/CfgWebinWinInterop/scripts/CfgWIWPropertiesDialog",["DS/EditPropWidget/constants/EditPropConstants","DS/CfgBaseUX/scripts/CfgPropertiesView"],function(e,t){return{destroy(){widget.body.empty()},createPropertiesComponentInNative({itemID:i,mainContent:n}){this.propertiesOptions={itemID:i,parentDiv:n,displayType:e.STANDARD,setCloseButton:!1,readOnly:!0,extraNotif:!1,editMode:!1},t.createPropertiesComponent(this.propertiesOptions)}}}),define("DS/CfgWebinWinInterop/scripts/CfgWIWConfigurationRevisionDialogs",["DS/CfgBaseUX/scripts/CfgUtility","DS/CoreEvents/ModelEvents","DS/CfgBaseUX/scripts/CfgData","DS/CfgBaseUX/scripts/CfgContainerView","DS/CfgConfigurationRevisionUX/scripts/views/instance/CfgConfigurationRevisionVersionExplorerView","i18n!DS/CfgWebinWinInterop/assets/nls/CfgWebinWinInterop","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUXNLS","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css"],(e,t,i,n,o,s,r)=>{const a={destroy(){widget.body.empty()},async launchAddtoCRDialog(n){this.options=n,i.clear(),i.cfgAddInsToCfgRevActionEvents=new t,this.subscribeAddInstancesToCRActionEvents(),await this.isCRDefinedOnRoot()?(await this.createCRVersionExplorerView(),this.sendEventToWIW("AllowedSemanticsOK")):(this.sendEventToWIW("AllowedSemanticsKO"),e.showwarning(r.CfgRevMessageAttachModel,"error"))},async isCRDefinedOnRoot(){let t=await e.getAllowedSemantics(this.options.parentId);return e.isBaselineMode(this.options.parentId,t)&&0==e.isFirstSemantic(this.options.parentId,t)},async createCRVersionExplorerView(){const e={selectedInstanceList:this.options.instancesList,iRootId:this.options.parentId};this.CfgConfigurationRevisionVersionExplorerViewObj=await new o(e);const t=new UWA.Element("div",{html:this.CfgConfigurationRevisionVersionExplorerViewObj.render(),class:"wiwCfgCRVEContainer"});this.createAddInstancesToCRDialog(t)},createAddInstancesToCRDialog(e){const t={isHeader:!1,isFooter:!0,firstButtonText:s.OK_Button,secondButtonText:s.Cancel_Button,onButtonClickCB:this.onOkCancelClicked};this.instanceCRDialog=new n(t).render(),this.instanceCRDialog.inject(this.options.mainContent),this.instanceCRDialog.enableDisableFirstorSecondButton("firstButton",!0),e.inject(this.instanceCRDialog._body)},async onOkCancelClicked(e){"firstButton"===e.buttonId&&await a.CfgConfigurationRevisionVersionExplorerViewObj.saveContent(),"secondButton"===e.buttonId&&a.sendEventToWIW("Close")},sendEventToWIW(t,i=""){let n={eventName:"cfgAddInstancesToCR",operation:`${t}`,operationVersion:"1.0",content:`${i}`};e.sendNotificationWebInWin(n)},subscribeAddInstancesToCRActionEvents(){i.cfgAddInsToCfgRevActionEvents.subscribe({event:"enableOkButtonInInstanceCRDialog"},()=>this.instanceCRDialog.enableDisableFirstorSecondButton("firstButton",!1)),i.cfgAddInsToCfgRevActionEvents.subscribe({event:"disableOkButtonInInstanceCRDialog"},()=>this.instanceCRDialog.enableDisableFirstorSecondButton("firstButton",!0))}};return a}),define("DS/CfgWebinWinInterop/scripts/CfgWIWConfigurationContextDialog",["DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/CfgConfigurationContextUX/CfgEditMultipleConfigurationContextDialog","i18n!DS/CfgEvolutionUX/assets/nls/CfgEvolutionUX","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css"],function(e,t,i,n,o){"use strict";return{destroy:function(){widget.body.empty()},getOptions:function(){return{}},initConfigurationContext:function(t){this.nativeOptions=t,this.isManufPLanAllowd=t.IsManufPlanAllowedFromNative;var i=this;null!=t&&null!=t.enoviaURL||(t=this.getOptions()),t.parent=i.nativeOptions.mainContent,0!=t.modelIds.length?e.retrieveModeldetails(t.modelIds).then(function(e){t.contextList=e,i.createContextView(t)}):i.createContextView(t)},createContextView:function(e){if(e.contextList)for(var t=0;t<e.contextList.length;t++)e.commonModelIDs.includes(e.contextList[t].physicalID)?e.contextList[t].isToPropagate=!1:e.contextList[t].isToPropagate=!0;var i={};if(e.enabledAxis)for(t=0;t<e.enabledAxis.length;t++)e.commonCriteria.includes(e.enabledAxis[t])?i[e.enabledAxis[t]]="true":i[e.enabledAxis[t]]="mixedState";e.enabledCriteriaArray=i,this.contextDialog=new n(e),this.contextDialog.renderNative(e)},onModelSearchOK:function(t){var i=this;t.IsManufPlanAllowedFromNative=this.isManufPLanAllowd,t.modelIds&&(t.modelIds=t.modelIds.split(",")),t.enabledAxis&&(t.enabledAxis=t.enabledAxis.split(",")),e.retrieveModeldetails(t.modelIds).then(function(e){if(t.contextList=e,t.contextList)for(var n=0;n<t.contextList.length;n++)t.contextList[n].isToPropagate=!1;i.contextDialog.onModelSearchOK(t)})}}}),define("DS/CfgWebinWinInterop/scripts/CfgWIWDisplayEffectivityDialog",["DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/Controls/TooltipModel","DS/CfgBaseUX/scripts/CfgContainerView","DS/CfgBaseUX/scripts/CfgData","DS/CoreEvents/ModelEvents","DS/UIKIT/Mask","DS/CfgBaseUX/scripts/CfgXMLServices","DS/CfgEffectivityViewUX/scripts/CfgEffectivityViewFactory","i18n!DS/CfgEvolutionUX/assets/nls/CfgEvolutionUX","i18n!DS/CfgWebinWinInterop/assets/nls/CfgWebinWinInterop","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css","css!DS/CfgFilterUX/CfgFilterUX.css"],function(e,t,i,n,o,s,r,a,l,c,f,d){"use strict";return{destroy:function(){widget.body.empty()},getOptions:function(){var e={};return location.href.search("3DDashboard")>0&&(e.currentEffExp="",e.enoviaURL="https://vdevpril0196plp.dsone.3ds.com/3DSpace",e.tenantID="OnPremise",e.user="H37",e.mode="Native",e.federatedSearchURL="https://vdevpril0196plp.dsone.3ds.com/federated",e.currentEvolutionEff='<?xml version="1.0" encoding="UTF-8"?><CfgEffectivityExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpression.xsd"><Expression Domain="ConfigChange_Evolution"><Context HolderType="Model" HolderName="M-0000001" DescId="1"><AND><TreeSeries Type="ProductState" Name="M-0000001"><Tree><Root Name="M-0000001" Revision="A" DescId="2" IsExcluded="false"></Root></Tree></TreeSeries><Series Type="Unit" Name="M-0000001"><Interval><From Value="1" IsExcluded="false"></From></Interval></Series></AND></Context></Expression><Description><Context DescId="1" DisplayName="model1" CurrentState="Marketing"></Context><TreeSeries DescId="2" Revision="A" DisplayName="model1" CurrentState="Product Management"></TreeSeries></Description></CfgEffectivityExpression>',e.projectedEvolutionEff='<?xml version="1.0" encoding="UTF-8"?><CfgEffectivityExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpression.xsd"><Expression Domain="ConfigChange_Evolution"><Context HolderType="Model" HolderName="M-0000001" DescId="1"><AND><TreeSeries Type="ProductState" Name="M-0000001"><Tree><Root Name="M-0000001" Revision="A" DescId="2" IsExcluded="false"></Root></Tree></TreeSeries><Series Type="Unit" Name="M-0000001"><Interval><From Value="1" IsExcluded="false"></From></Interval></Series></AND></Context></Expression><Description><Context DescId="1" DisplayName="model1" CurrentState="Marketing"></Context><TreeSeries DescId="2" Revision="A" DisplayName="model1" CurrentState="Product Management"></TreeSeries></Description></CfgEffectivityExpression>',e.variantEff='<?xml version="1.0" encoding="UTF-8"?><CfgEffectivityExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpression.xsd"><Expression Domain="ConfigChange_Variant"><Context HolderType="Model" HolderName="M-0000001" DescId="1"><AND><Feature Type="ConfigFeature" Name="rating" DescId="2"><Feature Type="ConfigFeature" Name="110" DescId="3"></Feature><Feature Type="ConfigFeature" Name="220" DescId="4"></Feature></Feature><Feature Type="ConfigFeature" Name="color" DescId="5"><Feature Type="ConfigFeature" Name="green" DescId="6"></Feature><Feature Type="ConfigFeature" Name="red" DescId="7"></Feature></Feature></AND></Context></Expression><Description><Option DescId="4" DisplayName="220" Description="" SequenceOrder="1"></Option><Option DescId="7" DisplayName="red" Description="" SequenceOrder="1"></Option><Context DescId="1" DisplayName="model1" CurrentState="Marketing"></Context><Option DescId="3" DisplayName="110" Description="" SequenceOrder="1"></Option><Feature DescId="5" DisplayName="color" Description="" IsExclusive="true" Revision="-"></Feature><Feature DescId="2" DisplayName="rating" Description="" IsExclusive="true" Revision="-"></Feature><Option DescId="6" DisplayName="green" Description="" SequenceOrder="1"></Option></Description></CfgEffectivityExpression>'),e},onOkClicked:function(e){t.sendNotificationWebInWin({eventName:"cfgDisplayEffectivity",operation:"Close",operationVersion:"1.0",content:""})},createView:function(e){this.wiwEffectivityViewDiv.setContent(""),this.effViewInstance=this.cfgEffViewFactory.createInstance(e,this.wiwEffectivityViewDiv,!0),this.effViewInstance.render(),a.unmask(this.effViewContainer._body)},updateEffectivityView:function(e){var i=this,n=t.isDefined(e.data.instanceDetails)?e.data.instanceDetails.name+" "+e.data.instanceDetails.revision:"";if(this.wiwTitleDiv.innerText=n,t.isDefined(e.displayMessage)&&""!=e.displayMessage)return this.wiwEffectivityViewDiv.setContent(e.displayMessage),void this.wiwTitleDiv.parentElement.hide();this.wiwTitleDiv.parentElement.show(),t.isDefined(e.data.modelConnectionsLoaded)&&0==e.data.modelConnectionsLoaded&&""!=e.data.instanceDetails.ID?this.cfgEffViewFactory.loadEffectivities(e.data.instanceDetails.ID,e.tenantID).then(function(e){i.createView(e)},function(e){i.errorHandling(d.loadEffectivities)}):i.prepareEffViewDataFromXML(e).then(function(e){i.createView(e)},function(e){i.errorHandling(d.prepareEffViewDataFromXML)})},initEffectivityView:function(e){this.options=e;var i=this,s={isHeader:!1,isFooter:!0,firstButtonText:d.Close_Button,onButtonClickCB:i.onOkClicked};if(i.effViewContainer=new o(s).render(),i.effViewContainer.inject(e.mainContent),t.isDefined(e.displayHeader)&&1==e.displayHeader){var r=new UWA.createElement("div",{class:"wiwEffectivityViewHeaderDiv"}).inject(this.effViewContainer._body),l=new UWA.createElement("div",{class:"wiwIconDiv"}).inject(r);new UWA.createElement("img",{src:e.enoviaURL+"/snresources/images/icons/small/"+e.data.instanceDetails.icon+".png"}).inject(l),this.wiwTitleDiv=new UWA.createElement("div",{class:"wiwTitleDiv"}).inject(r);var f=t.isDefined(e.data.instanceDetails)?e.data.instanceDetails.name+" "+e.data.instanceDetails.revision:"";if(this.wiwTitleDiv.innerText=f,t.isDefined(e.multiInstance)&&1==e.multiInstance){var u=new UWA.createElement("div",{class:"wiwRefreshDiv",html:UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-refresh"})}).inject(r);u.tooltipInfos=new n({shortHelp:d.wiwRefreshEffectivity}),u.set({events:{click:function(e){t.sendNotificationWebInWin({eventName:"cfgDisplayEffectivity",operation:"Refresh",operationVersion:"1.0",content:""})}}})}}this.wiwEffectivityViewDiv=new UWA.createElement("div",{class:"wiwEffectivityViewDiv"}).inject(this.effViewContainer._body),t.isDefined(e.displayHeader)&&1==e.displayHeader&&this.wiwEffectivityViewDiv.addClassName("wiwEffectivityViewDivHeaderAvailable"),this.cfgEffViewFactory=new c,t.isDefined(e.displayMessage)&&""!=e.displayMessage?this.wiwEffectivityViewDiv.setContent(e.displayMessage):(a.mask(i.effViewContainer._body),this.effViewInstance,t.isDefined(e.data.modelConnectionsLoaded)&&0==e.data.modelConnectionsLoaded&&""!=e.data.instanceDetails.ID?this.cfgEffViewFactory.loadEffectivities(e.data.instanceDetails.ID,e.tenantID).then(function(e){i.createView(e)},function(e){i.errorHandling(d.loadEffectivities)}):t.populateSecurityContext().then(function(n){t.populateDisplayExpressionXSLT().then(function(t){i.prepareEffViewDataFromXML(e).then(function(e){i.createView(e)},function(e){i.errorHandling(d.prepareEffViewDataFromXML)})},function(e){i.errorHandling(d.populateDisplayExpressionXSLT)})},function(e){i.errorHandling(d.populateSecurityContext)}))},errorHandling:function(e){""!=e&&t.showwarning(e,"error"),a.unmask(this.effViewContainer._body)},prepareEffViewDataFromXML:function(e){return new Promise(function(i,n){var o={instanceID:"",effData:{variantExpression:"",variantDisplayExpression:"",variantJSDisplayExpression:"",officialEvolutionExpression:"",projectedEvolutionExpression:"",officialEvolutionDisplayExpression:"",projectedEvolutionDisplayExpression:"",officialJSEvolutionDisplayExpression:"",projectedJSEvolutionDisplayExpression:""},modelData:[],effModels:[],isSearchKO:!1},s=e.data.effectivityDetails;t.isDefined(s.currentEvolutionEff)&&""!=s.currentEvolutionEff&&(o.effData.officialEvolutionExpression=s.currentEvolutionEff,o.effData.officialEvolutionDisplayExpression=t.getDisplayExpressionUsingXSLT(o.effData.officialEvolutionExpression)),t.isDefined(s.projectedEvolutionEff)&&""!=s.projectedEvolutionEff&&(o.effData.projectedEvolutionExpression=s.projectedEvolutionEff,o.effData.projectedEvolutionDisplayExpression=t.getDisplayExpressionUsingXSLT(o.effData.projectedEvolutionExpression)),t.isDefined(s.variantEff)&&""!=s.variantEff&&(o.effData.variantExpression=s.variantEff,o.effData.variantDisplayExpression=t.getDisplayExpressionUsingXSLT(o.effData.variantExpression)),o.effData.officialJSEvolutionDisplayExpression=l.buildJSDisplayExpression(o.effData.officialEvolutionExpression,"EVOLUTION"),o.effData.projectedJSEvolutionDisplayExpression=l.buildJSDisplayExpression(o.effData.projectedEvolutionExpression,"EVOLUTION"),o.effData.variantJSDisplayExpression=l.buildJSDisplayExpression(o.effData.variantExpression,"VARIANT"),o.modelData=l.getModelsFromExpression(o.effData.officialEvolutionExpression,o.effData.variantExpression),t.getModelDataUsingSearchService(o.modelData).then(function(e){o.modelData=[],e.results&&e.results.forEach(function(e){o.modelData.push({modelID:t.getAttributeValue(e.attributes,"resourceid"),modelLabel:t.getAttributeValue(e.attributes,"ds6w:label"),modelName:t.getAttributeValue(e.attributes,"ds6w:identifier"),modelIcon:t.getAttributeValue(e.attributes,"type_icon_url")})}),i(o)},function(e){o.isSearchKO=!0,i(o)})})}}}),define("DS/CfgWebinWinInterop/scripts/CfgWIWEffectivityDialogs",["DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","i18n!DS/CfgEvolutionUX/assets/nls/CfgEvolutionUX","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css"],function(e,t,i,n){"use strict";return{destroy:function(){widget.body.empty()},getOptions:function(){return{}},editEvolution:function(t){this.nativeOptions=t;var i,n,o={tenant:this.nativeOptions.tenantID,environment:this.nativeOptions.mode,mode:"EditEvolution",modelList:[],modelIds:this.nativeOptions.modelIds,enabledCritData:this.nativeOptions.enabledCriteria,Access:{SetEvolutionEffectvity:"true"},parent:this.nativeOptions.mainContent,parentElement:this.nativeOptions.mainContent,dialogue:{okHandler:null,hasEffectivity:null,effExpressionXml:null}};""==this.nativeOptions.currentEffExp?i=!1:(console.log("Decoupled Evolution Effectivity"),i=!0,n=this.nativeOptions.currentEffExp),o.dialogue.hasEffectivity=i,o.dialogue.effExpressionXml=n,e.retrieveModeldetails(this.nativeOptions.modelIds).then(function(e){o.modelList=e,require(["DS/CfgEvolutionUX/CfgEditEvolutionLayout"],function(e){e.create(o)})})},editVariant:function(i){this.nativeOptions=i;var n=this;n.effOptions={evoEffXML:n.nativeOptions.currentEvoEffExp,varEffXML:n.nativeOptions.currentEffExp,hasEffectivity:""!=n.nativeOptions.currentEffExp,parent:n.nativeOptions.mainContent,parentElement:n.nativeOptions.mainContent},e.retrieveModeldetails(n.nativeOptions.modelIds).then(function(e){n.effOptions.contextData=e,void 0!==window.__karma__?window.jQueryURL="VENENO6WPlugins/plugins/jquery/latest/jquery":window.jQueryURL="../webapps/VENENO6WPlugins/plugins/jquery/latest/jquery",t.populateDisplayExpressionXSLT().then(function(){require(["DS/CfgVariantEffectivityEditor/scripts/CfgVariantEffectivityInit"],function(e){e.init(n.effOptions)})})})},editSessionEffectivity:function(e){this.nativeOptions=e;null!=e&&null!=e.enoviaURL||(e=this.getOptions()),e.parent=this.nativeOptions.mainContent,e.mode="SessionEffectivity",e.environment="Native",e.tenant="OnPremise";e.Access={SetSessionEffectvity:"true"},e.iXml=e.currentEffExp,require(["DS/CfgEvolutionUX/CfgEvolutionLayoutFactory"],function(t){t.createNative(e)})},onModelSearchOKSessionEff:function(t){t.modelIds&&(t.modelIds=t.modelIds.split(",")),e.retrieveModeldetails(t.modelIds).then(function(e){t.modelIds=e,require(["DS/CfgEvolutionUX/CfgEvolutionLayoutFactory"],function(t){t.addModelFromNative(e)})})}}}),define("DS/CfgWebinWinInterop/scripts/CfgWIWAuthoringContext",["DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/CoreEvents/ModelEvents","DS/CfgBaseUX/scripts/CfgData","DS/CfgAuthoringContextUX/scripts/CfgAuthContextChangeView","i18n!DS/CfgEvolutionUX/assets/nls/CfgEvolutionUX","DS/CfgAuthoringContextUX/scripts/CfgCAListDialog","DS/CfgBaseUX/scripts/CfgContainerView","i18n!DS/CfgWebinWinInterop/assets/nls/CfgWebinWinInterop","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css"],function(e,t,i,n,o,s,r,a,l,c){"use strict";return{destroy:function(){widget.body.empty()},getOptions:function(){return{}},initAuthContextPowerBy:function(e){this.nativeOptions=e;null!=e&&null!=e.enoviaURL||(e=this.getOptions());var i={};if(i.parent=this.nativeOptions.mainContent,this.CfgAuthoringContextView=new s(i),this.CfgAuthoringContextView&&("powerBy"==this.nativeOptions.mode||"Native"==this.nativeOptions.mode)){t.sendNotificationWebInWin({eventName:"cfgAuthoringContext",operation:"Init_Complete",operationVersion:"1.0",content:{}})}},setAuthContextPowerBy:function(e){this.nativeOptions.mainContent&&this.nativeOptions.mainContent.inject(widget.body),UWA.is(e)?this.CfgAuthoringContextView&&this.CfgAuthoringContextView.setContext(e):console.log("setAuthContext | Options not set")},launchCAListView:function(e){var t={isHeader:!1,isFooter:!0,firstButtonText:c.OK_Button,secondButtonText:c.Cancel_Button,headerText:"",onButtonClickCB:this.onOkCancelClicked};this.caListViewContainer=new l(t).render(),this.caListViewContainer.inject(e.mainContent),this.caListViewContainer.enableDisableFirstorSecondButton("firstButton",!0),this.caListViewContainer.hideScrollBarInContainerBody(),o.clear(),o.caListActionEvents=new n,this.subscribeCAListActionEvents();var i={renderTo:new UWA.createElement("div",{class:"wiw-show-ca-list"}).inject(this.caListViewContainer._body)};a.createNative(i)},onOkCancelClicked:function(e){var i="firstButton"===e.buttonId?a.getSelectedCAItemForNative():{},n={eventName:"cfgShowCAList",operation:"firstButton"===e.buttonId?"OK":"Cancel",operationVersion:"1.0",content:JSON.stringify(i)};t.sendNotificationWebInWin(n)},subscribeCAListActionEvents:function(){o.caListActionEvents.subscribe({event:"enableOkButtonInCAListContainerView"},()=>{this.caListViewContainer.enableDisableFirstorSecondButton("firstButton",!1)})}}}),define("DS/CfgWebinWinInterop/scripts/CfgWIWFilterDialog",["DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/CfgBaseUX/scripts/CfgContainerView","DS/CfgFilterUX/CfgFilterEditor","DS/CfgBaseUX/scripts/CfgData","DS/CoreEvents/ModelEvents","DS/UIKIT/Mask","DS/Controls/LineEditor","DS/Controls/TooltipModel","DS/CfgBaseUX/scripts/CfgXMLServices","i18n!DS/CfgEvolutionUX/assets/nls/CfgEvolutionUX","i18n!DS/CfgWebinWinInterop/assets/nls/CfgWebinWinInterop","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css","css!DS/CfgFilterUX/CfgFilterUX.css"],function(e,t,i,n,o,s,r,a,l,c,f,d,u){"use strict";var p={destroy:function(){widget.body.empty()},getOptions:function(){return{}},onOkCancelClicked:function(e){if("firstButton"==e.buttonId&&""==p.filterNameEditor.value)return p.CfgFilterEditor.alertDiv.add({message:u.Error_missing_filter_title,style:{position:"absolute"},className:"error"}),p.CfgFilterEditor.alertDiv.elements.container.addClassName("CfgAlertstyle"),void p.CfgFilterEditor.alertDiv.show();var i="firstButton"==e.buttonId?p.CfgFilterEditor.getDataForWIWFilter():{};i.filterName=p.filterNameEditor.value,i.filterDescription=t.isDefined(p.filterDescriptionEditor)?p.filterDescriptionEditor.value:"";var n={eventName:"cfgConfigurationFilter",operation:"firstButton"==e.buttonId?"OK":"Cancel",operationVersion:"1.0",content:JSON.stringify(i)};t.sendNotificationWebInWin(n),p.CfgFilterEditor.sendConfigurationFilterTrackerEvent(i.filterXML)},onPCSearchOKFilter:function(e){p.CfgFilterEditor.onPCSearchOKFilter(e)},onCASearchOKFilter:function(e){p.CfgFilterEditor.onCASearchOKFilter(e)},execute:function(e){this.options=e;var i=this;s.ModelEvents=new r;t.checkDecouplingActivation().then(function(e){console.log(e),s.configurationCriteria=e,t.populateDisplayExpressionXSLT().then(function(){if(t.isDefined(i.options.iModelsList))i.options.iModelsList.length>0&&f.RetrieveConfiguratorDataFromFilterXML(i.options.expression).then(function(e){p.CfgFilterEditor=new o(i.options),p.CfgFilterEditor.render(),a.unmask(i.filterViewContainer._body)},function(e){i.errorHandling(u.RetrieveConfiguratorDataFromFilterXML)});else{var e=i.options.rootId;if(null!=e){var n=e,s={};s.parentID=n,t.getConfiguredObjectInfo(s).then(function(e){null!=e.contexts.content.results[0]&&null!=e.contexts.content.results[0].notification&&"unaccessible"==e.contexts.content.results[0].notification.code&&"ERROR"==e.contexts.content.results[0].notification.type||("1.2"==e.version?i.options.iModelsList=e.contexts.content.results:"1.0"==e.version&&(i.options.iModelsList=e.Contexts.Content.results),i.options.iModelsList.length>0&&f.RetrieveConfiguratorDataFromFilterXML(i.options.expression).then(function(e){p.CfgFilterEditor=new o(i.options),p.CfgFilterEditor.render(),a.unmask(i.filterViewContainer._body)},function(e){i.errorHandling(u.RetrieveConfiguratorDataFromFilterXML)}))},function(e){i.errorHandling(u.getConfiguredObjectInfo)})}}},function(e){i.errorHandling(u.populateDisplayExpressionXSLT)})})},errorHandling:function(e){""!=e&&null!=e&&null!=e&&t.showwarning(e,"error"),a.unmask(this.filterViewContainer._body)},createEditior:function(e,t,i){var n=new UWA.createElement("div",{class:"wiwFilterDiv"}).inject(this.filterViewContainer._body),o=new UWA.createElement("div",{class:"wiwFilterLabelDiv"}).inject(n);(new UWA.createElement("div",{class:"labelDiv"}).inject(o).setHTML(e),i)&&new UWA.createElement("div",{class:"wiwFilterAsteriskDiv"}).inject(o).addClassName("fonticon fonticon-asterisk-alt");"Predefined"!==this.filterType&&"Product Configuration"!==this.filterType||o.setStyle("min-width","120px");var s=new UWA.createElement("div",{class:"wiwFilterLineEdtrDiv"}).inject(n),r=new l({placeholder:i?u.titleEditorPlaceholder:u.descriptionEditorPlaceholder}).inject(s);return r.addEventListener("uncommittedChange",function(e){r.tooltipInfos=new c({shortHelp:r.valueToCommit}),0==r.valueToCommit.length&&(p.CfgFilterEditor.alertDiv.add({message:u.Error_missing_filter_title,style:{position:"absolute"},className:"error"}),p.CfgFilterEditor.alertDiv.elements.container.addClassName("CfgAlertstyle"),p.CfgFilterEditor.alertDiv.show())}),r.value=t,r.tooltipInfos=new c({shortHelp:t}),r},initFilterDialog:function(e){try{var i=this;this.filterType=t.isDefined(e.FilterType)?e.FilterType:"";var o={isHeader:!1,isFooter:!0,firstButtonText:"Product Configuration"===this.filterType?null:d.CFG_Ok,secondButtonText:"Product Configuration"===this.filterType?u.Close_Button:d.CFG_Cancel,headerText:"",onButtonClickCB:i.onOkCancelClicked};i.filterViewContainer=new n(o).render(),i.filterViewContainer.inject(e.mainContent),this.wiwFilterAlertDiv=new UWA.createElement("div",{class:"wiwFilterAlertDiv"}).inject(i.filterViewContainer._body),a.mask(i.filterViewContainer._body),this.filterNameEditor=this.createEditior(u.Filter_Label_Title,e.filterName,!0),"Predefined"!==this.filterType&&"Product Configuration"!==this.filterType||(this.filterDescriptionEditor=this.createEditior(u.Filter_Label_Description,e.filterDescription,!1));var r=new UWA.createElement("div",{class:"wiwFilteroperationDiv"}).inject(i.filterViewContainer._body);t.isDefined(this.filterDescriptionEditor)&&r.setStyle("height","calc( 100% - 71px)"),"Product Configuration"===this.filterType&&(i.filterViewContainer._body.getChildren().forEach(e=>{e.addClassName("wiwReadOnly")}),t.showwarning(u.PC_edit_warning,"info"),this.removeDateFromPCFilterXML(e));var l={rootId:e.rootId,expression:{},tenant:e.tenantID,platformUrl:e.enoviaURL,renderTo:r,renderToApp:r,displayCompactMode:!0,iModelsList:e.iModelsList,callback:function(){}};if(l.FilterType=e.FilterType,l.filterMode=e.filterMode,l.operation=e.operation,t.isDefined(e.crData)&&(e.crData=JSON.parse(e.crData),1!=e.crData.crFilter&&"true"!=e.crData.crFilter||(l.expression.configurationRevision=e.crData.crID,l.expression.modelId="")),t.isDefined(e.filterXML)&&""!=e.filterXML){if(l.expression.modelId=t.isDefined(e.modelId)?e.modelId:"",l.expression.filterXML=e.filterXML,t.isDefined(e.filterUXData)){e.filterUXData="{"+e.filterUXData+"}";try{e.filterUXData=JSON.parse(e.filterUXData)}catch(i){console.log(i),t.showwarning(u.exceptionOccured,"error"),e.filterUXData=void 0}t.isDefined(e.filterUXData)?(e.variants=e.filterUXData.variants,t.isDefined(e.filterUXData.PC)&&(e.PCID=e.filterUXData.PC.PCID)):e.variants={displayExpression:"",xmlExpression:""}}else e.variants={displayExpression:"",xmlExpression:""};l.expression.variants=e.variants,t.isDefined(e.PCID)&&(l.PCID=e.PCID),l.expression.view=e.view}this.execute(l),s.ModelEvents.subscribe({event:"LaunchingDictionarySelection"},function(t){s.renderTo=e.mainContent,s.renderToApp=e.mainContent,i.filterViewContainer&&i.filterViewContainer.hide()}),s.ModelEvents.subscribe({event:"ConfigRevisionDialogClosed"},function(e){i.filterViewContainer&&i.filterViewContainer.show()}),s.ModelEvents.subscribe({event:"ProductStateDialogClosed"},function(e){i.filterViewContainer&&i.filterViewContainer.show()}),s.ModelEvents.subscribe({event:"UnitsDialogClosed"},function(e){i.filterViewContainer&&i.filterViewContainer.show()}),s.ModelEvents.subscribe({event:"ConfiguratorLaunched"},function(t){s.renderTo=e.mainContent,s.renderToApp=e.mainContent,i.filterViewContainer&&i.filterViewContainer.hide()}),s.ModelEvents.subscribe({event:"ConfiguratorClosed"},function(e){i.filterViewContainer&&i.filterViewContainer.show()})}catch(e){console.log(e),this.errorHandling(u.exceptionOccured)}},removeDateFromPCFilterXML:function(e){if(!t.isParamDefined(e.filterXML))return;let i=(new DOMParser).parseFromString(e.filterXML,"text/xml");i.getElementsByTagName("FilterSelection").length>0&&i.getElementsByTagName("Date").length>0&&i.getElementsByTagName("FilterSelection")[0].removeChild(i.getElementsByTagName("Date")[0]);let n=new XMLSerializer;e.filterXML=n.serializeToString(i)}};return p}),define("DS/CfgWebinWinInterop/scripts/CfgWIWDialogs",["DS/CfgBaseUX/scripts/CfgController","DS/CfgWebinWinInterop/scripts/CfgWIWConfigurationRevisionDialogs","DS/CfgWebinWinInterop/scripts/CfgWIWUtility","DS/CfgBaseUX/scripts/CfgUtility","UWA/Core","DS/CfgWebinWinInterop/scripts/CfgWIWEffectivityDialogs","DS/CfgWebinWinInterop/scripts/CfgWIWAuthoringContext","DS/CfgWebinWinInterop/scripts/CfgWIWConfigurationContextDialog","DS/CfgWebinWinInterop/scripts/CfgWIWFilterDialog","DS/CfgWebinWinInterop/scripts/CfgWIWDisplayEffectivityDialog","DS/CfgBaseUX/scripts/CfgCacheManager","DS/CfgWebinWinInterop/scripts/CfgWIWPropertiesDialog","i18n!DS/CfgEvolutionUX/assets/nls/CfgEvolutionUX","css!DS/CfgWebinWinInterop/CfgWebinWinInterop.css"],function(e,t,i,n,o,s,r,a,l,c,f,d,u){"use strict";return{destroy:function(){widget.body.empty()},dummy:function(){},getOptions:function(){return location.href.search("3DDashboard"),options},createNativeLayout:function(e){widget.body.empty(),widget.body.setStyle("height",document.body.parentElement.clientHeight+"px"),widget.addEvent("onResize",function(){widget.body.setStyle("height",document.body.parentElement.clientHeight+"px")}),(this.mainContent=new UWA.createElement("div",{id:"cfgNative-main-container",class:"cfgNative-main-container"})).inject(widget.body)},initWIWDialog:function(t){if(t.cfgWIWTraces&&console.log("initWIWDialog -"+JSON.stringify(t)),t.mode="Native",t.modelIds&&(t.modelIds=t.modelIds.split(",")),t.enabledAxis){t.enabledAxis=t.enabledAxis.split(",");var i={feature:"false",productState:"false",unit:"false",contextualDate:"false",milestone:"false",manufacturingPlan:"false"};t.enabledAxis.forEach(function(e){e=e.replace(" ",""),i[e]="true"}),t.enabledCriteria=i}this.nativeOptions=t;var o=this;return e.init("","",this.nativeOptions.mode),enoviaServerFilterWidget.tenant=this.nativeOptions.tenantID,enoviaServerFilterWidget.baseURL=this.nativeOptions.enoviaURL,enoviaServerFilterWidget.userID=this.nativeOptions.user,enoviaServerFilterWidget.federatedURL=this.nativeOptions.federatedSearchURL,enoviaServerFilterWidget.cfgWIWTraces=this.nativeOptions.cfgWIWTraces,n.isDefined(t.userSettings)&&""!=t.userSettings&&(t.userSettings=JSON.parse(t.userSettings),f.setInLocalStorage(t.userSettings)),new Promise(function(e,t){n.populateSecurityContext().then(function(){o.createNativeLayout(),e()})})},editEvolution:function(e){var t=this;null!=e&&null!=e.enoviaURL||(e=this.getOptions()),this.initWIWDialog(e).then(function(){t.nativeOptions.mainContent=t.mainContent,s.editEvolution(t.nativeOptions)})},initAuthContext:function(e){var t=this;null!=e&&null!=e.enoviaURL||(e=this.getOptions()),this.initWIWDialog(e).then(function(){t.nativeOptions.mainContent=t.mainContent,r.initAuthContextPowerBy(t.nativeOptions)})},setAuthContext:function(e){enoviaServerFilterWidget.cfgWIWTraces&&console.log("setAuthContext -"+JSON.stringify(e)),r.setAuthContextPowerBy(e)},editVariant:function(e){var t=this;null!=e&&null!=e.enoviaURL||(e=this.getOptions()),this.initWIWDialog(e).then(function(){t.nativeOptions.mainContent=t.mainContent,s.editVariant(t.nativeOptions)})},initConfigurationContext:function(e){var t=this;null!=e&&null!=e.enoviaURL||(e=this.getOptions()),e.commonModelIDs&&(e.commonModelIDs=e.commonModelIDs.split(",")),e.commonCriteria&&(e.commonCriteria=e.commonCriteria.split(",")),n.isDefined(e.pandOAccess)&&""!=e.pandOAccess&&(e.pandOAccess=JSON.parse(e.pandOAccess)),this.initWIWDialog(e).then(function(){t.nativeOptions.mainContent=t.mainContent,a.initConfigurationContext(t.nativeOptions)})},onModelSearchOK:function(e){enoviaServerFilterWidget.cfgWIWTraces&&console.log("onModelSearchOK -"+JSON.stringify(e)),a.onModelSearchOK(e)},editSessionEffectivity:function(e){var t=this;null!=e&&null!=e.enoviaURL||(e=this.getOptions()),this.initWIWDialog(e).then(function(){t.nativeOptions.mainContent=t.mainContent,s.editSessionEffectivity(t.nativeOptions)})},onModelSearchOKSessionEff:function(e){enoviaServerFilterWidget.cfgWIWTraces&&console.log("onModelSearchOKSessionEff -"+JSON.stringify(e)),s.onModelSearchOKSessionEff(e)},launchCAListView:function(e){void 0!==e&&void 0!==e.enoviaURL||(e=this.getOptions()),this.initWIWDialog(e).then(()=>{this.nativeOptions.mainContent=this.mainContent,r.launchCAListView(this.nativeOptions)})},addInstancesToCR:async function(e){e&&e.enoviaURL||(e=this.getOptions()),await this.initWIWDialog(e),this.nativeOptions.mainContent=this.mainContent,t.launchAddtoCRDialog(this.nativeOptions)},launchPropertiesInNative:async function(e){e&&e.enoviaURL||(e=this.getOptions()),await this.initWIWDialog(e),this.nativeOptions.mainContent=this.mainContent,d.createPropertiesComponentInNative(this.nativeOptions)},launchConfigurationFilter:function(e){var t=this;null!=e&&null!=e.enoviaURL||(e=this.getOptions()),this.initWIWDialog(e).then(function(){if(n.isDefined(e.DictionaryList)&&""!=e.DictionaryList){var o=e.DictionaryList.split(",");0!=o.length&&i.retrieveModeldetails(o).then(function(i){t.nativeOptions.iModelsList=i,t.nativeOptions.mainContent=t.mainContent,console.log("launchConfigurationFilter-"+JSON.stringify(e)),l.initFilterDialog(t.nativeOptions)})}else t.nativeOptions.mainContent=t.mainContent,console.log("launchConfigurationFilter-"+JSON.stringify(e)),l.initFilterDialog(t.nativeOptions)})},onPCSearchOKFilter:function(e){enoviaServerFilterWidget.cfgWIWTraces&&console.log("onPCSearchOKFilter -"+JSON.stringify(e)),l.onPCSearchOKFilter(e)},onCASearchOKFilter:function(e){var t=e.id.split(",");l.onCASearchOKFilter({caIDArray:t})},displayEffectivity:function(e){var t=this;null!=e&&null!=e.enoviaURL||(e=this.getOptions()),this.initWIWDialog(e).then(function(){t.nativeOptions.mainContent=t.mainContent,console.log("viewPropertiesEffectivity-"+JSON.stringify(e)),c.initEffectivityView(t.nativeOptions)})},updateEffectivityView:function(e){console.log(" updateEffectivityView viewPropertiesEffectivity-"+JSON.stringify(e)),c.updateEffectivityView(e)}}});