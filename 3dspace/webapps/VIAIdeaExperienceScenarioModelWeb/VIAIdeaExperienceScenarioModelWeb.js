define("DS/VIAIdeaExperienceScenarioModelWeb/interfaces/CATI3DXVCXScenarioAsset",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DXVCXScenarioAsset",required:{getVCXScenario:function(){}},optional:{}})}),define("DS/VIAIdeaExperienceScenarioModelWeb/extensions/CATE3DXVCXScenarioAsset",["UWA/Core","UWA/Class","UWA/Class/Listener","UWA/Class/Events"],function(e,t,n,r){"use strict";return t.extend(n,r,{init:function(){},Build:function(){this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"ASSET_CHANGED",()=>{this._clearScenario(),this.dispatchEvent("SCENARIO_CHANGED")})},Dispose:function(){this._clearScenario()},_clearScenario:function(){delete this._vcxScenario,delete this._vcxScenarioPromise},getVCXScenario:function(){return this._vcxScenario?e.Promise.resolve(this._vcxScenario):this._vcxScenarioPromise?this._vcxScenarioPromise:(this._vcxScenarioPromise=this.QueryInterface("CATI3DXAssetHolder")._resolveAsset().then(t=>t&&t.GetType&&"VCXScenario"===t.GetType()?(this._vcxScenario=t,delete this._vcxScenarioPromise,this._vcxScenario):e.Promise.reject(new Error("Cant retrieve VCXScenario for object "+this.GetObject().GetID()))).catch(t=>(delete this._vcxScenarioPromise,e.Promise.reject(t))),this._vcxScenarioPromise)}})}),define("DS/VIAIdeaExperienceScenarioModelWeb/expCoreLink/ExpCoreLinkServiceVCXScenario",["UWA/Core","UWA/Class","DS/CAT3DExpModel/expCoreLink/ExpCoreLinkService","DS/CAT3DExpModel/CAT3DXModel"],function(e,t,n,r){"use strict";return n.extend({_getChildLinkContextFromIdentifier:function(t,n){var i=t._getContent().GetValueByName("scenariosKF");if(1!==i.length)return e.Promise.reject(new Error("Cant retrieve ScenarioKF"));var c=i[0],o=r._getExpObjectFromData(c);if(!o.QueryInterface)return e.Promise.reject(new Error("Cant resolve link without OMComponent"));var a=o._experienceBase,s=this._getScenario(a,n);return s?e.Promise.resolve(this._createExpCoreLinkContext("ExpCoreLinkContextVCXScenario",s)):(o.QueryInterface("CATI3DXJSONProcessor").Process(),(s=this._getScenario(a,n))?e.Promise.resolve(this._createExpCoreLinkContext("ExpCoreLinkContextVCXScenario",s)):e.Promise.reject(new Error("Cant retrieve VCXScenario")))},_getScenario:function(e,t){return e.getManager("VCXScenarioManager").GetScenarios()[t]}})}),define("DS/VIAIdeaExperienceScenarioModelWeb/interfaces/VIAIIxpWizardedScenarioDescriptor",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(e,t){"use strict";return t.singleton({interfaceName:"VIAIIxpWizardedScenarioDescriptor",required:{Clear:function(){},NewAct:function(){},RemoveAct:function(){},GetActs:function(){},GetActCount:function(){},GetStartupAct:function(){},SetStartupAct:function(){},GetActByIndex:function(){},GetActIndex:function(){},MoveActToPosition:function(){},MoveActBeforeOtherAct:function(){},MoveActAfterOtherAct:function(){},MoveUpAct:function(){},MoveDownAct:function(){}},optional:{}})}),define("DS/VIAIdeaExperienceScenarioModelWeb/extensions/VIAEIxpWizardedScenarioDescriptor",["UWA/Core","DS/MathematicsES/MathsDef","DS/CAT3DExpModel/CAT3DXModel","UWA/Class/Events","UWA/Class/Listener"],function(e,t,n,r,i){"use strict";return e.Class.extend(r,i,{init:function(){this._parent()},Dispose:function(){this._parent(),this.stopListening()},Build:function(){var e=this;this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"acts.CHANGED",function(t){e.dispatchEvent("ACTS.CHANGED",[t])}),this.listenTo(this.QueryInterface("CATI3DExperienceObject"),"startupAct.CHANGED",function(t){e.dispatchEvent("STARTUPACT.CHANGED",[t])})},Clear:function(){this.QueryInterface("CATI3DExperienceObject").SetValueByName("acts",[])},NewAct:function(e){return n.CreateAct(e,this.GetObject())},RemoveAct:function(t){if(e.is(t)){var n=this.GetActs(),r=n.indexOf(t);if(r>=0){n.splice(r,1),this.QueryInterface("CATI3DExperienceObject").SetValueByName("acts",n),this.GetStartupAct()===t&&(n.length>0?this.SetStartupAct(n[0]):this.SetStartupAct(void 0))}else{var i=t.QueryInterface("CATI3DExperienceObject").GetValueByName("_varName");e.log("ERROR RemoveAct : unable to find act named : "+i)}}else e.log("ERROR RemoveAct : invalid parameter !")},GetActs:function(){var t=this.QueryInterface("CATI3DExperienceObject");if(e.is(t)){var n=t.GetValueByName("acts");if(e.is(n))return n;e.log("ERROR on GetActs, unable to get acts !")}else e.log("ERROR on GetActs, unable to retrieve CATI3DExperienceObject !")},GetActCount:function(){var t=this.GetActs();return e.is(t)?t.length:(e.log("ERROR on GetActCount, unable to get acts !"),null)},SetStartupAct:function(t){var n=this.QueryInterface("CATI3DExperienceObject");e.is(n)?n.SetValueByName("startupAct",t):e.log("ERROR on SetStartupAct, unable to retrieve CATI3DExperienceObject !")},GetStartupAct:function(){var t=this.QueryInterface("CATI3DExperienceObject");if(e.is(t)){var n=t.GetValueByName("startupAct");if(e.is(n))return n;e.log("WARNING on GetStartupAct, startup act not set !")}else e.log("ERROR on GetStartupAct, unable to retrieve CATI3DExperienceObject !")},GetActByIndex:function(e){var t=this.GetActs();if(!(e<0||e>=t.length))return t[e]},GetActIndex:function(e){return this.GetActs().indexOf(e)},MoveActToPosition:function(e,t){var n=this.QueryInterface("CATI3DExperienceObject"),r=n.GetValueByName("acts"),i=this.GetActIndex(e);i>=0&&r.splice(i,1),t<0||t>r.length||(r.splice(t,0,e),n.SetValueByName("acts",r))},MoveActBeforeOtherAct:function(e,t){var n=this.QueryInterface("CATI3DExperienceObject"),r=n.GetValueByName("acts"),i=this.GetActIndex(e);i>=0&&r.splice(i,1);var c=this.GetActIndex(t);c<0||(r.splice(c,0,e),n.SetValueByName("acts",r))},MoveActAfterOtherAct:function(e,t){var n=this.QueryInterface("CATI3DExperienceObject"),r=n.GetValueByName("acts"),i=this.GetActIndex(e);i>=0&&r.splice(i,1);var c=this.GetActIndex(t);c<0||(r.splice(c+1,0,e),n.SetValueByName("acts",r))},MoveUpAct:function(e){var t=this.QueryInterface("CATI3DExperienceObject"),n=t.GetValueByName("acts"),r=this.GetActIndex(e);--r<0||(n.splice(r+1,1),n.splice(r,0,e),t.SetValueByName("acts",n))},MoveDownAct:function(e){var t=this.QueryInterface("CATI3DExperienceObject"),n=t.GetValueByName("acts"),r=this.GetActIndex(e);r<0||r===n.length-1||(r++,n.splice(r-1,1),n.splice(r,0,e),t.SetValueByName("acts",n))}})}),define("DS/VIAIdeaExperienceScenarioModelWeb/expCoreLink/ExpCoreLinkContextVCXScenario",["UWA/Core","UWA/Class","DS/CAT3DExpModel/expCoreLink/ExpCoreLinkContext"],function(e,t,n){"use strict";return n.extend({init:function(e,t){this._vcxScenario=e,this._parent(e,t)},_getContent:function(){return this._vcxScenario},_getParentLinkContext:function(){return null},_getParentService:function(){return null}})}),define("DS/VIAIdeaExperienceScenarioModelWeb/interfaces/CATI3DXJSONProcessor",["UWA/Class","DS/WebComponentModeler/CATWebInterface"],function(e,t){"use strict";return t.singleton({interfaceName:"CATI3DXJSONProcessor",required:{Process:function(){}},optional:{}})});