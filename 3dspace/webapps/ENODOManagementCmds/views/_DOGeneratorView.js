define("DS/ENODOManagementCmds/views/_DOGeneratorView",["css!DS/UIKIT/UIKIT","css!DS/ENODOManagementCmds/ENODOManagementCmds","i18n!DS/ENODOManagementCmds/assets/nls/DOGeneratorCmd","UWA/Controls/Abstract","UWA/Class/Events","DS/Windows/Panel","DS/UIKIT/Modal","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ButtonGroup","DS/Tree/TreeDocument","DS/TreeModel/DataModelSet","DS/Tree/TreeNodeModel","DS/DataGridView/DataGridView","DS/DataGridView/DataGridViewLayout"],function(e,t,n,a,o,r,i,l,d,c,s,m,u,p,g){"use strict";return a.extend(o,{name:"dogeneratorview",_command_id:"",_applyOnlyToThisApp:!1,_nodesID:null,_gridView:null,init:function(e){this._parent(e);var t=this;e.controller&&(this.controller=e.controller),require(["DS/ENOFloatingPanel/ENOFloatingPanel"],function(a){t._command_id=e._command_id,t._selectedFormat=[],t._displayWarning=e.display_warning,t.elements.container=t._createContent(),t.elements.floatingpanel=new a({className:t.name,body:t.elements.container,footer:t._buildFooter(),title:n.title,overlay:!0,closable:!0,animate:!0,resizable:!0,visible:!0,events:{onClose:function(){t.controller._destroyCmd()}}}),t.elements.floatingpanel.inject(widget.body)})},_createContent:function(){var e=this,t=UWA.createElement("div",{class:"dogeneratorview_content"}),a=UWA.createElement("p",{content:n.info.generationOnRep});t.appendChild(a);var o=UWA.createElement("div",{id:"dogeneratorview_formatdiv",class:"dogeneratorview_format"});t.appendChild(o);var r;r=this.controller.model.format;for(var i=new s,l=[],d=0;d<r.length;d++){var c=r[d];if(c.hasOwnProperty("format")&&c.hasOwnProperty("connector")&&c.hasOwnProperty("type")&&c.hasOwnProperty("parameter")){var m=c.hasOwnProperty("activationType")?c.activationType:"defaultinactive",g=c.hasOwnProperty("converter")?c.converter:"",v=c.hasOwnProperty("outputStreamId")?c.outputStreamId:"",h={format:c.format,connector:c.connector,type:c.type,parameter:c.parameter,converter:g,usage:v,initialIndex:d,activationType:m};l.push(h)}}i.prepareUpdate(),l.forEach(function(e){var t=new u({label:e.Text,grid:e});i.addRoot(t),!e.hasOwnProperty("activationType")||"forcedactive"!==e.activationType&&"defaultactive"!==e.activationType||t.select()}),i.pushUpdate();var w=[{text:n.column.connector,dataIndex:"connector",editableFlag:!1},{text:n.column.type,dataIndex:"type",editableFlag:!1},{text:n.column.format,dataIndex:"format",editableFlag:!1},{text:n.column.parameters,dataIndex:"parameter",editableFlag:!1},{text:n.column.usage,dataIndex:"usage",editableFlag:!1}];return this._gridView=new p({treeDocument:i,columns:w,rowSelection:"multiple",cellSelection:"none",showSelectionCheckBoxesFlag:"true"}),this._gridView.treeDocument.addEventListener("pushUpdate",function(){e._retrieveSelection().length>0?e.elements.generatebutton.disabled=!1:e.elements.generatebutton.disabled=!0}),this._gridView.inject(t),t},_retrieveSelection:function(){var e=[];if(UWA.is(this._gridView))for(var t=this._gridView.treeDocument.getSelectedNodes(),n=-1,a=0;a<t.length;a++)n=t[a].options.grid.initialIndex,e.push(n);return e},_buildFooter:function(){var e=this,t=UWA.createElement("div",{class:"footerModal"}),a=!(e._retrieveSelection().length>0);e.elements.generatebutton=new l({label:n.buttons.generate,emphasize:"primary",touchMode:!0,allowUnsafeHTMLLabel:!1,disabled:a}),e.elements.generatebutton.addEventListener("buttonclick",function(){e._gridView&&(e.controller.model.updateSelection(e._retrieveSelection()),e.controller._generateDO())}),t.appendChild(e.elements.generatebutton.getContent());var o=new l({label:n.buttons.cancel,emphasize:"secondary",touchMode:!0,allowUnsafeHTMLLabel:!1});return o.addEventListener("click",function(){e.controller._destroyCmd()}),o.inject(t),t}})});