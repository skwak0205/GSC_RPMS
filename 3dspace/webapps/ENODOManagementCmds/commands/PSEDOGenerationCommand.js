define("DS/ENODOManagementCmds/commands/PSEDOGenerationCommand",["UWA/Core","DS/ApplicationFrame/Command","DS/PADUtils/PADContext","i18n!DS/ENODOManagementCmds/assets/nls/DOGeneratorCmd","DS/ENODOUtilsServices/DOServices"],function(e,t,i,n,o){"use strict";return t.extend({_retrieveSelectionAndFilters:function(e,t){var i,o={selections:[]},s=[],r=[];for(i=0;i<t.length;i++){var a=t[i],c=a.getOccurencePath(),l=a.getID(),d=new RegExp("^[0-9a-f.]+$");if(!UWA.is(l)||!d.test(l.toLowerCase()))throw n.error.invalidPhID;var h=a.getRoot().getID(),m=s.indexOf(h);if(-1===m){s.push(h);var D=[c];r.push(D)}else r[m]&&r[m].push(c)}var g,u={V1:{}};for(g=0;g<s.length;g++){if((D={}).paths=r[g],void 0!==e.HasFilter&&"function"==typeof e.HasFilter){var p=e.HasFilter(s[g]);if(UWA.is(p.hasFilter)&&!0===p.hasFilter&&UWA.is(e.GetFilterSpec(s[g],u).CVQuery)){var f=e.GetFilterSpec(s[g],u).CVQuery;D.filter=f}}o.selections.push(D)}return console.log(o),o},init:function(e){this._parent(e);var t=i.get(),n=t.options.model?t.options.model:t.getPADTreeDocument();n.getXSO().onPostAdd(this._check_select.bind(this)),n.getXSO().onPostRemove(this._check_select.bind(this)),n.getXSO().onEmpty(this._check_select.bind(this))},_check_select:function(){!0===i.get().getPADTreeDocument().getXSO().get().length>0?this.enable():this.disable()},execute:function(){var e=this,t=i.get(),s=t.options.model?t.options.model:t.getPADTreeDocument();require(["DS/ENODOManagementCmds/commands/GenericDOGenerationCmd"],function(i){var r=s.getSelectedNodes();try{var a=e._retrieveSelectionAndFilters(t,r);return new i({command_id:e.options.ID,data:{selections:a.selections,context:widget.data.appId}})}catch(e){o._displayNotification("error",n.error.title,e)}})}})});