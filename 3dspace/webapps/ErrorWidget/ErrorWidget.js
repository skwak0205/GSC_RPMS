define("DS/ErrorWidget/ErrorWidget",["UWA/Controls/Abstract","UWA/Json","DS/WidgetServices/WidgetServices","DS/UIKIT/Input/Button","DS/UIKIT/Alert","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","css!DS/ErrorWidget/ErrorWidget.css","i18n!DS/ErrorWidget/assets/nls/langEW"],function(t,i,e,s,n,a,o,r,c){"use strict";return t.extend({notificationsManager:null,defaultOptions:{className:""},init:function(t,i,e){this._parent(e),this.initUI(t,i)},initUI:function(t,i){this.savedDimension=null,this.widgetPere=i,this.notification=null},instantiateNotif:function(){null==this.notification&&(this.notification=new n({className:"ErrorNotification "+this.options.className,visible:!0,hideDelay:5e3,autoHide:!0,events:{onClick:function(t,i){this.remove(i)}}}),this.widgetPere&&this.notification.inject(this.widgetPere,"top"))},addSuccess:function(t,i){this.instantiateNotif();var e=!1;return null!=i&&""!=i?e=this.changeMessage(t,i):i="",0==e&&this.notification.add({message:t,className:"success "+i}),{eventID:"success",msg:t}},addInfo:function(t,i){this.instantiateNotif();var e=!1;return null!=i&&""!=i?e=this.changeMessage(t,i):i="",0==e&&this.notification.add({message:t,className:"primary "+i}),{eventID:"info",msg:t}},addError:function(t,i){this.instantiateNotif();var e=!1;return null!=i&&""!=i?e=this.changeMessage(t,i):i="",0==e&&this.notification.add({message:t,className:"error "+i}),{eventID:"error",msg:t}},addWarning:function(t,i){this.instantiateNotif();var e=!1;return null!=i&&""!=i?e=this.changeMessage(t,i):i="",0==e&&this.notification.add({message:t,className:"warning "+i}),{eventID:"warning",msg:t}},changeMessage:function(t,i){var e=!1;return this.notification.getMessages().forEach(function(s){if(s.hasClassName(i)){e=!0;for(var n=!1,a=s.childNodes,o=a.length-1;o>=0;o--)a[o].nodeType==Node.TEXT_NODE&&(!1===n?(n=!0,a[o].nodeValue=t):s.removeChild(a[o]))}}),e},addJSONError:function(t,e){var s="",n="error";if(i.isJson(t)||"object"==typeof t){var a=t;"object"!=typeof t&&(a=i.decode(t)),s+=this.getMessageErrorFromCode(a),a.hasOwnProperty("type")&&(n=a.type),!e&&a.hasOwnProperty("customClass")&&(e=a.customClass)}else s=t;return"warning"==n?this.addWarning(s,e):this.addError(s,e)},getMessageErrorFromCode:function(t){var i="";if(t.hasOwnProperty("message"))switch(i=t.message,t.code+""){case"502":i=c.get("Server issue");break;case"403":i=c.get("Forbidden access")}else i=t;return i},display:function(t){null===this.notificationsManager&&(this.notificationsManager=a,o.setNotificationManager(this.notificationsManager),o.setStackingPolicy(9));var i={level:t.level,title:t.title,subtitle:t.subtitle,message:t.message?t.message:"",sticky:"error"===t.level};this.notificationsManager.addNotif(i)},displayJSONError:function(t,i){return this.addJSONError(t,i)},clearAllMessages:function(){this.notification&&this.notification.destroy(),this.notification=null}})});