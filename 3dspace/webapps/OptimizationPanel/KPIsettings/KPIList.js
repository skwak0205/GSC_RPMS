define("DS/OptimizationPanel/KPIsettings/KPIList",["DS/OptimizationPanel/KPIsettings/KPIcomponent","DS/Controls/Button","DS/CoreEvents/ModelEvents","css!DS/OptimizationPanel/KPIsettings/PanelKPI.css"],function(t,i,e){"use strict";var n=function(t){this._init(t)};return n.prototype._init=function(t){this._listKPI=t&&t.listKPI?t.listKPI:["other1","other2"],this._modelEvents=t&&t.modelEvents?t.modelEvents:"other model events",this._id=t&&t.id?t.id:"other",this._kpiList=t&&t.modelC0.tabId[this._id].kpiList?t.modelC0.tabId[this._id].kpiList:{},this._kpiComponentStatus=[],this._initDom(t)},n.prototype._initDom=function(e){this._content=document.createElement("div"),this._content.classList.add("kpi-list"),this._content.setAttribute("myid",this._id),this._contentKPI=document.createElement("div"),this._contentKPI.classList.add("kpi-container"),this._content.appendChild(this._contentKPI),this._kpiObject=[],this._buttonGenerate=new i({label:"GENERATE CONFIGURATION",emphasize:"primary",disabled:!0,allowUnsafeHTMLLabel:!1}),this._buttonGenerate.id="generate",this._buttonGenerate.inject(this._content),0===Object.keys(this._kpiList).length&&this._kpiList.constructor===Object?e.modelC0.tabId[this._id].kpiList={}:(this._buttonGenerate.disabled=!1,this._contentKPI.setAttribute("style","background-color: #f4f5f6; opacity:0.7; pointer-events: none;"));for(var n=0;n<this._listKPI.length;n++)this._kpiObject[n]=new t({name:this._listKPI[n],modelEvents:this._modelEvents,id:this._id,modelC0:e.modelC0}),this._kpiObject[n].inject(this._contentKPI);var s=this;this._buttonGenerate.addEventListener("buttonclick",function(t){var i=t.dsModel;s._modelEvents.publish({event:"kpilist-generate-configuration-pressed",data:s._id}),i.elements.button.previousElementSibling.setAttribute("style","background-color: #f4f5f6; opacity:0.7; pointer-events: none;")}),this._subscribeEvents(e)},n.prototype.inject=function(t){t.appendChild(this._content)},n.prototype._subscribeEvents=function(t){this._listSubscription=[];var i=this;i._listSubscription.push(i._modelEvents.subscribe({event:"kpi-component-onchange"},function(){var e=0;for(var n in i._listKPI)t.modelC0.tabId[i._id]&&t.modelC0.tabId[i._id].kpiList[i._listKPI[n]]&&(e+=1);i._buttonGenerate.disabled=0===e}))},n.prototype.destroy=function(){this._content=null;var t=0,i=this._listSubscription.length;for(t=0;t<i;t++)this._modelEvents.unsubscribe(this._listSubscription[t]);for(t=0;t<this._kpiObject.length;t++)this._kpiObject[t].destroy()},n});