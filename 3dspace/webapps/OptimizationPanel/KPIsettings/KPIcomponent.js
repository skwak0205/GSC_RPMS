define("DS/OptimizationPanel/KPIsettings/KPIcomponent",["DS/Controls/Button","DS/Controls/Slider","DS/Controls/Toggle","DS/CoreEvents/ModelEvents","DS/UIKIT/Tooltip","css!DS/UIKIT/UIKIT.css","css!DS/OptimizationPanel/KPIsettings/PanelKPI.css"],function(t,e,i,n,s){"use strict";var l=function(t){this._name=t&&t.name?t.name:"kpi",this._modelEvents=t&&t.modelEvents?t.modelEvents:new n,this._id=t&&t.id?t.id:"other",this._init(t)};return l.prototype._init=function(t){this._buttonState=!(!t||!t.modelC0.tabId[this._id].kpiList[this._name])&&t.modelC0.tabId[this._id].kpiList[this._name].button,this._sliderState=t&&t.modelC0.tabId[this._id].kpiList[this._name]?t.modelC0.tabId[this._id].kpiList[this._name].slider:3,this._maxState=!(!t||!t.modelC0.tabId[this._id].kpiList[this._name])&&t.modelC0.tabId[this._id].kpiList[this._name].max,this._initDom(t)},l.prototype._initDom=function(n){this._content=document.createElement("div"),this._content.classList.add("kpi-content"),this._content.id=this._name,this._slider=new e({minValue:0,maxValue:5,stepValue:1,value:this._sliderState}),this._button=new t({label:this._name,type:"check",checkFlag:this._buttonState,allowUnsafeHTMLLabel:!1}),this._tooltip=new s({target:this._slider.getContent(),body:this._slider.value}),this._switch=new i({type:"switch",internalLabelsFlag:!0,checkFlag:this._maxState,allowUnsafeHTMLLabel:!1}),this._tooltip.inject(this._content),this._slider.inject(this._content),this._button.inject(this._content),this._switch.inject(this._content);for(var l=this._content.querySelectorAll(".wux-controls-switch"),o=this._content.querySelectorAll(".wux-controls-switch .wux-controls-toggle-switch-label-right"),a=this._content.querySelectorAll(".wux-controls-switch .wux-controls-toggle-switch-label-left"),d=0;d<l.length;d++)o[d].innerHTML=null,a[d].innerHTML=null;!0===this._buttonState&&(this._content.childNodes[1].classList.add("visible"),this._content.childNodes[3].classList.add("visible"));var c=this;this._button.addEventListener("buttonclick",function(t){var e=t.dsModel;if(e.checkFlag){n.modelC0.tabId[c._id].kpiList[c._name]={},n.modelC0.tabId[c._id].kpiList[c._name].button=!0;for(var i=e.elements.button.previousElementSibling.getAttribute("keymap-manager"),s=c._content.querySelectorAll(".wux-controls-slider"),o=0;o<s.length;o++)s[o].attributes[1].value===i&&s[o].classList.add("visible");n.modelC0.tabId[c._id].kpiList[c._name].slider=c._slider.value;var a=e.elements.button.nextElementSibling.getAttribute("keymap-manager");for(o=0;o<l.length;o++)l[o].attributes[1].value===a&&l[o].classList.add("visible");n.modelC0.tabId[c._id].kpiList[c._name].max=c._switch.checkFlag}else e.elements.button.previousElementSibling.classList.remove("visible"),e.elements.button.nextElementSibling.classList.remove("visible"),delete n.modelC0.tabId[c._id].kpiList[c._name];c._modelEvents.publish({event:"kpi-component-onchange",data:e.elements.container.parentElement.id})}),this._slider.addEventListener("change",function(t){var e=t.dsModel,i=e.value;c._tooltip.setBody(i.toString()),c._modelEvents.publish({event:"kpi-component-onchange",data:e.elements.container.parentElement.id}),n.modelC0.tabId[c._id].kpiList[c._name].slider=c._slider.value}),this._switch.addEventListener("buttonclick",function(t){var e=t.dsModel;c._modelEvents.publish({event:"kpi-component-onchange",data:e.elements.container.parentElement.id}),n.modelC0.tabId[c._id].kpiList[c._name].max=c._switch.checkFlag}),this._kpiStatus=this._getStatus()},l.prototype.inject=function(t){t.appendChild(this._content)},l.prototype._getStatus=function(){return this._kpiStatus={button:this._button.checkFlag,slider:this._slider.value,max:this._switch.checkFlag},this._kpiStatus},l.prototype.destroy=function(){this._content=null},l});