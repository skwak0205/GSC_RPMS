define("DS/OptimizationPanel/KPIsettings/ConfigComponent",["DS/UIKIT/Iconbar","DS/CoreEvents/ModelEvents","css!DS/OptimizationPanel/KPIsettings/PanelKPI.css"],function(t,e){"use strict";var n=function(t){this._parentModelEvents=t&&t.modelEvents?t.modelEvents:"other",this._parentIMe=t&&t.myME?t.myME:"nothing",this._name=t&&t.modelC0.defConfig[this._id]?t.modelC0.defConfig[this._id].name:t.name,this._idContent=t&&t.modelC0.defConfig[this._id]?t.modelC0.defConfig[this._id].id:"config"+t.name.substring(14,16),this._current=!(!t||t.modelC0.current!==this._id)||t.current,this._init(t)};return n.prototype._init=function(t){this._initDom(t)},n.prototype._initDom=function(e){if(this._content=document.createElement("div"),this._content.classList.add("config-content"),this._content.id=this._idContent,this._confContent=document.createElement("div"),this._confContent.classList.add("content-conf-active"),this._nameConf=document.createElement("span"),this._nameConf.classList.add("editable-config-content"),this._nameConf.setAttribute("contenteditable",!0),this._nameConf.setAttribute("min-length","1"),this._nameConf.setAttribute("tabindex","0"),this._nameConf.innerHTML=this._name,this._iconCheck=document.createElement("span"),this._iconCheck.classList.add("wux-ui-3ds"),this._iconCheck.classList.add("wux-ui-3ds-1x"),this._iconCheck.classList.add("wux-ui-3ds-check"),this._colorGraph=document.createElement("span"),this._colorGraph.classList.add("circle-graph"),this._confContent.appendChild(this._colorGraph),this._confContent.appendChild(this._iconCheck),this._confContent.appendChild(this._nameConf),!0===this._current){for(var n=document.querySelectorAll(".wux-ui-3ds-check"),i=0;i<n.length;i++)n[i].removeAttribute("checked");this._iconCheck.setAttribute("checked",!0),this._parentModelEvents.publish({event:"config-current-change",data:this._content.id})}var o=this;this._nameConf.addEventListener("keypress",function(t){13===t.which&&t.preventDefault()}),this._nameConf.addEventListener("click",function(){}),this._nameConf.addEventListener("blur",function(){""===this.innerHTML.replace(/^[\s(&nbsp;)]+/g,"").replace(/[\s(&nbsp;)]+$/g,"")&&(this.innerHTML="Default"),o._parentModelEvents.publish({event:"config-name-change",data:{id:o._content.id,name:this.innerHTML}}),e.modelC0.defConfig[o._content.id].name=this.innerHTML}),this._iconCheck.addEventListener("click",function(){for(var t=document.querySelectorAll(".wux-ui-3ds-check"),n=0;n<t.length;n++)t[n].removeAttribute("checked");this.setAttribute("checked",!0),e.modelC0.current=o._content.id,o._parentModelEvents.publish({event:"config-current-change",data:this.parentElement.parentElement.id})}),this._content.appendChild(this._confContent),this._iconbar=new t({renderTo:this._content,items:[{fonticon:"plus",text:"Next config",handler:function(){console.log("next conf of "+o._content.id),o._parentModelEvents.publish({event:"config-component-next",data:o._content.id})}},{fonticon:"refresh",text:"Re calculate config",handler:function(){console.log("Refresh "+o._content.id),o._parentModelEvents.publish({event:"config-component-refresh",data:o._content.id})}},{fonticon:"trash",text:"Delete config",handler:function(){console.log("suppres"),o._parentIMe.publish({event:"delete-config",data:o._content.id})}}]})},n.prototype.inject=function(t){t.appendChild(this._content)},n.prototype.destroy=function(){this._content=null},n});