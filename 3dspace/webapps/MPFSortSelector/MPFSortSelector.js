define("DS/MPFSortSelector/SortSelectorEntry",["UWA/Core","UWA/Class/View","DS/MPFSort/SortOrder","DS/MPFSort/SortDirection"],function(t,e,s,n){"use strict";return e.extend({tagName:"li",className:"mpf-sort-selector-entry",setup:function(t){this.name=t.name,this.label=t.label,this.eventName=t.eventName,this.sortOrder=t.order||s.ALPHA_NUMERICAL,this.sortDirection=t.selected||n.UNSORTED,this.sortLabel=this._createSortLabel(),this.ascSortButton=this._createAscSortButton(),this.descSortButton=this._createDescSortButton()},render:function(){return this.container.setContent([this.sortLabel,this.ascSortButton,this.descSortButton]),this},destroy:function(){this._parent()},setSelectedSortDirection:function(t){switch(this.sortDirection=t,t){case n.ASCENDING:this.ascSortButton.addClassName("mpf-selected"),this.descSortButton.removeClassName("mpf-selected");break;case n.DESCENDING:this.ascSortButton.removeClassName("mpf-selected"),this.descSortButton.addClassName("mpf-selected");break;default:this.ascSortButton.removeClassName("mpf-selected"),this.descSortButton.removeClassName("mpf-selected")}},_createSortLabel:function(){return t.createElement("span",{class:"mpf-label",text:this.label})},_createAscSortButton:function(){var e=["fonticon"];return this.sortOrder===s.ALPHA_NUMERICAL?e.push("fonticon-sort-alpha-asc"):this.sortOrder===s.NUMERICAL&&e.push("fonticon-sort-num-asc "),this.sortDirection===n.ASCENDING&&e.push("mpf-selected"),t.createElement("div",{class:e.join(" "),events:{click:this.dispatchEvent.bind(this,this.eventName,{sort:this.name,direction:n.ASCENDING})}})},_createDescSortButton:function(){var e=["fonticon"];return this.sortOrder===s.ALPHA_NUMERICAL?e.push("fonticon-sort-alpha-desc"):this.sortOrder===s.NUMERICAL&&e.push("fonticon-sort-num-desc"),this.sortDirection===n.DESCENDING&&e.push("mpf-selected"),t.createElement("div",{class:e.join(" "),events:{click:this.dispatchEvent.bind(this,this.eventName,{sort:this.name,direction:n.DESCENDING})}})}})}),define("DS/MPFSortSelector/SortSelector",["UWA/Core","UWA/Event","UWA/Class/View","DS/MPFSortSelector/SortSelectorEntry","DS/MPFSort/SortDirection","DS/MPFUtils/MPFUtils","i18n!DS/MPFSortSelector/assets/nls/SortSelector","css!DS/MPFSortSelector/MPFSortSelector"],function(t,e,s,n,r,i,o){"use strict";var c,a={SORT:"sort"};return(c=s.extend({className:"mpf-sort-selector",setup:function(e){this.eventName=e.eventName||a.SORT,this.entryOptions=e.entries,this.selectedSort=this._getSelectedSort(),this.selector=this._createSelector(),this.menuEntries=this._createMenuEntries(),this.menu=this._createMenu(),this._listenToMenu(),this._onClickOutside=this._close.bind(this),t.extendElement(document.body).addEvent("click",this._onClickOutside),this.container.addEvent("click",this._captureClick)},render:function(){return this.container.setContent([this.selector,this.menu]),this.menuEntries.forEach(function(t){t.render()}),this},destroy:function(){this.menuEntries.forEach(function(t){this.stopListening(t)},this),t.extendElement(document.body).removeEvent("click",this._onClickOutside),this.container.removeEvent("click",this._captureClick),this._parent()},_captureClick:function(t){e.stopPropagation(t)},_createSelector:function(){return t.createElement("div",{class:"mpf-selector",html:[{class:"mpf-active-sort",html:[{class:"mpf-sort-label",text:o.get("sortedBy",{name:this.selectedSort.label})}]},{class:"mpf-open-button fonticon fonticon-expand-down"}],events:{click:this._onClickSelector.bind(this)}})},_onClickSelector:function(){this.container.toggleClassName("mpf-open")},_close:function(){this.container.removeClassName("mpf-open")},_getSelectedSort:function(){return i.findInArray(this.entryOptions,function(t){return t.selected})},_createMenu:function(){return t.createElement("ul",{class:"mpf-sort-selector-menu",html:this.menuEntries})},_createMenuEntries:function(){return this.entryOptions.map(function(t){return t.eventName=this.eventName,t.className="mpf-sort-selector-entry "+t.name,new n(t)},this)},_listenToMenu:function(){this.menuEntries.forEach(function(t){this.listenTo(t,this.eventName,this.onSort.bind(this,t))},this)},onSort:function(t,e){var s;this.menuEntries.forEach(function(s){s===t?s.setSelectedSortDirection(e.direction):s.setSelectedSortDirection(r.UNSORTED)},this),s=this._getSelectedMenuEntry(),this.getElement(".mpf-sort-label").setText(o.get("sortedBy",{name:s.label})),this.dispatchEvent(this.eventName,e),this._close()},_getSelectedMenuEntry:function(){return i.findInArray(this.menuEntries,function(t){return t.sortDirection!==r.UNSORTED})}})).Events=Object.freeze(a),c});