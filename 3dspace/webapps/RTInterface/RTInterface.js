define("DS/RTInterface/drivers/PAPI_driver",["DS/PlatformAPI/PlatformAPI","DS/RTProxyDriver/RTLogger"],function(e,n){"use strict";return{isConnected:!1,cache:[],init:function(){e.subscribe("towidgetim.ds.com",e=>{switch(n.RTInterface("event received - event:"+e&&e.evenement),e.evenement){case"CONNECTED":this.isConnected=!0,this.flushCache();break;case"DISCONNECTED":this.isConnected=!1}}),e.publish("fromwidgetim.ds.com",{evenement:"GETLOGINOKDATA"})},addCallbacks:function(t,r,a){const c=a||function(e){return"towidget."+e+".im.ds.com"}(r);return e.subscribe(c,function(e){if(!e)return console.error("[RTInterface] addCallbacks - error: no data received from server");n.RTInterface("data received on channel: "+c),n.RTInterface(e);for(let n of t)n(e)}),!0},send:function(t,r){n.RTInterface("data to send - action: "+t.action),n.RTInterface(t);const a=r||"toRTC.im.ds.com";return this.isConnected?e.publish(a,t):this.cache.push({data:t,channel:r}),t},flushCache:function(){if(0==this.cache.length)return n.RTInterface("cache is empty");for(;this.cache.length>0;){if(!this.isConnected)return n.RTInterface("connection lost, unable to continue flushing cache");let t=this.cache.shift();n.RTInterface("flushing cache - data to send - action: "+t.data.action),n.RTInterface(t.data),e.publish(t.channel,t.data)}}}}),define("DS/RTInterface/index",["DS/RTInterface/drivers/PAPI_driver","DS/RTProxyDriver/RTLogger"],function(e,n){"use strict";n.addLevel("RTInterface","magenta"),n.RTInterface("load");return{_init:function(){n.RTInterface("driver init"),e.init()},addCallback:function(e,t,r){return n.RTInterface("addCallback"),this.addCallbacks([e],t,r)},addCallbacks:function(t,r,a){if(n.RTInterface("addCallbacks - platformId: "+r),!t||!Array.isArray(t)||!t.length||!r&&!a)return console.error("[RTInterface] addCallbacks - error: missing callbacks or platformId or channel"),{error:"missing callbacks or platformId or channel"};for(let e of t)if("function"!=typeof e)return console.error("[RTInterface] addCallbacks - error: callback is not a function"),{error:"callback is not a function"};return e.addCallbacks(t,r,a)},send:function(t,r){return n.RTInterface("send - data: "+t),t?(t.TxID=(a=t.action,Date.now()+"-r"+Math.floor(1e3*Math.random())+"-"+(a||"noAction")),e.send(t,r)):(console.error("[RTInterface] send - error: missing data"),{error:"missing data"});var a}}}),define("DS/RTInterface/RTInterface",["DS/RTInterface/index"],function(e){"use strict";return document.RTInterface?document.RTInterface:(e._init(),document.RTInterface=e,document.RTInterface)});