define("DS/VCXWebQueryEngine/VCXQueryEngineNonMatchingActions",["UWA/Class","DS/VCXWebKernelCommands/VCXCmdChangeVisibility","DS/VCXWebModifiablesServices/VCXModifiablesChangeServices","DS/VCXWebVisibility/VCXIVisibility"],function(e,t,n,r){"use strict";var o=e.extend({ghost:!1,hide:!1,init:function(){this._arrNonMatchingObjects=[]},_Process:function(e,o,i){var s;i>0&&(s="DS/VCXWebQueryEngine/VCXQueryEngineNonMatchingActions:_Process",console.time(s)),this._arrNonMatchingObjects=o;var a=e.getManager("VCXCommandManager"),c=e.getManager("VCXScenarioManager"),u=[];if(this.hide||this.ghost)if(o.forEach(function(e){var t=e.GetObject();t.IsKindOf("VCXWebComponentOccurrence")&&!t.IsDressup&&u.push(t)}),this.hide){var p=new t(c,e.ComponentsMap,a);p.ChangeVisibility(u,r.EVisState.Hidden),a.Push(p)}else this.ghost&&u.forEach(function(t){n.Ghost(e,t.QueryInterface("W3AISGNodeHolder").getPathElement(),!0)});i>0&&console.time(s)}});return Object.defineProperty(o.prototype,"nonMatchingObjects",{enumerable:!0,get:function(){return this._arrNonMatchingObjects}}),o}),define("DS/VCXWebQueryEngine/VCXQueryEngineMatchingActions",["UWA/Class","DS/VCXWebKernel/VCXCmdChangeSelection","DS/VCXWebKernelCommands/VCXCmdChangeVisibility","DS/VCXWebVisibility/VCXIVisibility"],function(e,t,n,r){"use strict";var o=e.extend({select:!1,show:!1,zoomToFit:!1,init:function(){this._arrMatchingObjects=[]},_Process:function(e,o,i){var s;i>0&&(s="DS/VCXWebQueryEngine/VCXQueryEngineMatchingActions:_Process",console.time(s)),this._arrMatchingObjects=o;var a=e.getManager("VCXCommandManager");a.StartTransaction();var c=e.getManager("VCXScenarioManager");if(this.show||this.zoomToFit){if(this.show){var u=[];o.forEach(function(e){var t=e.GetObject();t.IsKindOf("VCXWebComponentOccurrence")&&!t.IsDressup&&u.push(t)});var p=new n(c,e.ComponentsMap,a);p.ChangeVisibility(u,r.EVisState.Visible),a.Push(p)}if(this.zoomToFit)for(var h=e.getManager("VCXContextManager").getMainViewer().getViewpoints(),l=0;l<h.length;l++)h[l].reframe(null,0)}var b=e.getManager("VCXSelectionManager");if(this.select){var f;i>0&&(f="DS/VCXWebQueryEngine/VCXQueryEngineMatchingActions:_Process | Select Objects",console.time(f));for(var g=new t(b,!0),d=[],y=0;y<o.length;++y)d.push(o[y].GetObject());if(g.SetComponentsSelection(d),i>1)for(var C=0;C<o.length;C++){var V=o[C];console.log("  -> id="+V.GetHashing()+", type="+V.GetObject().GetType())}a.Push(g),i>0&&console.timeEnd(f)}a.EndTransaction("QueryEngineMatchingActions"),b.RefreshXSO(),i>0&&console.time(s)}});return Object.defineProperty(o.prototype,"matchingObjects",{enumerable:!0,get:function(){return this._arrMatchingObjects}}),o}),define("DS/VCXWebQueryEngine/VCXQueryOperator",["UWA/Class"],function(e){"use strict";return e.extend({init:function(e){this._strOperator=e,this.SetOperand(null)},SetOperator:function(e){this._strOperator=e},GetOperator:function(){return this._strOperator},SetOperand:function(e){this._operand=e},GetOperand:function(){return this._operand},Process:function(e){if(!this._operand)return!1;var t=this.GetOperator(),n=e.GetValue();"number"!=typeof n&&(n=e.ToString(),t.contains("==")||(n=n.toLowerCase()));var r=this.GetOperand().GetValue();"number"!=typeof r&&(r=this.GetOperand().ToString(),t.contains("==")||(r=r.toLowerCase()));var o=!1;switch(t){case"=":o=n===r;break;case"!=":o=n!==r;break;case"<":o=n<r;break;case"<=":o=n<=r;break;case">":o=n>r;break;case">=":o=n>=r;break;case"==":o=n===r;break;case"!==":o=n!==r;break;case"contains":o=-1!=n.indexOf(r);break;case"wildcard":o=n===r;break;case"regexp":o=null!==n.match(r);break;case"found":o=null!==n;break;case"exists":o=n===r;break;case"!exists":o=n!==r;break;default:o=!1,console.log("WARNING: unknown operator : "+t)}return o}})}),define("DS/VCXWebQueryEngine/VCXQueryEngineInputData",["UWA/Class"],function(e){"use strict";return e.extend({selectionName:"",inputObjects:[],init:function(){},_Process:function(e,t){if(0===this.inputObjects.length){var n;if(t>0&&(n="DS/VCXWebQueryEngine/VCXQueryEngineInputData:_Process",console.time(n)),""===this.selectionName){t>1&&console.log("Getting all objects...");var r=e.ComponentsMap.GetComponentTable(),o=this;Object.keys(r).forEach(function(e){var n=r[e];t>1&&console.log("id="+e+", type="+n.GetType()),o.inputObjects.push(n)})}else t>1&&console.log("Getting objects from the specified selection set...");t>0&&console.timeEnd(n)}return this.inputObjects}})}),define("DS/VCXWebQueryEngine/VCXQueryPropertyOperator",["DS/VCXWebProperties/VCXProperty","DS/VCXWebQueryEngine/VCXQueryOperator"],function(e,t){"use strict";var n=function(t,n){e.call(this,t,n)};return(n.prototype=Object.create(e.prototype)).SetOperator=function(e){this._operator=new t(e),this._operator.SetOperand(this.GetPropertyValue())},n.prototype.GetOperator=function(){return this._operator},n.prototype.Process=function(e){return!!this._operator&&this._operator.Process(e)},n.prototype.Clone=function(){var e=new n(this.GetValue());return e.SetPropertyName(this.GetPropertyName()),e.SetOperator(this.GetOperator()),e},n}),define("DS/VCXWebQueryEngine/VCXQueryPropertyOperatorSet",["DS/VCXWebProperties/VCXPropertySet","DS/VCXWebProperties/VCXPropertyInfo","DS/VCXWebProperties/VCXPropertyValueInt","DS/VCXWebProperties/VCXPropertyValueBoolean","DS/VCXWebProperties/VCXPropertyValueString","DS/VCXWebQueryEngine/VCXQueryPropertyOperator"],function(e,t,n,r,o,i){"use strict";var s=function(t){e.call(this),this.SetUnionMode(!0)};return(s.prototype=Object.create(e.prototype)).SetUnionMode=function(e){this._bUnionMode=void 0===e||e},s.prototype.GetUnionMode=function(){return this._bUnionMode},s.prototype.AddPropertyOperator=function(e,s,a){var c=new t(e),u=null;switch(typeof a){case"number":u=new n;break;case"boolean":u=new r;break;default:u=new o}u.FromString(a);var p=new i(c,u);return p.SetOperator(s),this.AddOrModifyProperty(p)},s.prototype.Clone=function(){var e=new s(this.GetValue());return e.UnionMode=this.UnionMode,e},Object.defineProperty(s.prototype,"UnionMode",{enumerable:!0,get:function(){return this.GetUnionMode()},set:function(e){this.SetUnionMode(e)}}),s}),define("DS/VCXWebQueryEngine/VCXQueryEngine",["UWA/Class","DS/VCXWebQueryEngine/VCXQueryPropertyOperatorSet","DS/VCXWebQueryEngine/VCXQueryEngineInputData","DS/VCXWebQueryEngine/VCXQueryEngineMatchingActions","DS/VCXWebQueryEngine/VCXQueryEngineNonMatchingActions"],function(e,t,n,r,o){"use strict";var i=e.extend({verboseMode:0,init:function(){},initialize:function(){},postInitialize:function(){},unInitialize:function(){},SelectFromAllObjects:function(e){var t=new n(this._experienceBase,this.verboseMode),o=new r;return o.select=!0,this.Run(t,e,o)},SelectFromSelection:function(e,t){var o=new n(this._experienceBase,this.verboseMode);o.inputObjects=e;var i=new r;return i.select=!0,this.Run(o,t,i)},GetFromSelection:function(e,t,i,s){var a=new n(this._experienceBase,this.verboseMode);a.inputObjects=e;var c=new r;c.select=!0;var u=new o,p=this.Run(a,t,c,u);return c.matchingObjects,u.nonMatchingObjects,p},Run:function(e,i,s,a){if(!e||!i||!s)return!1;if(!(e instanceof n))return!1;if(!(i instanceof t))return!1;if(!(s instanceof r))return!1;if(a&&!(a instanceof o))return!1;var c,u=e._Process(this._experienceBase,this.verboseMode),p=[],h=[];return!!function(e,t,n,r){if(!e||!t||!n)return!1;var o;this.verboseMode>0&&(o="DS/VCXWebQueryEngine/VCXQueryEngine:_Query",console.time(o),this.verboseMode>1&&console.log(o+"..."));for(var i=0;i<e.length;i++){var s=e[i],a="";this.verboseMode>1&&(a="Checking component "+s.GetID());var c=s.QueryInterface("VCXIModifiable");if(c){if(this.verboseMode>1){var u=c.GetProperty("Actor.Name");u&&(a=a+", modifiable "+c.GetHashing()+" '"+u.GetPropertyValue().GetValue()+"'"),console.log(a)}var p=0===t.FilterMode,h=[];t.GetListPropertyNames(h);for(var l=0;l<h.length;l++){var b=t.GetProperty(h[l]);if(b){var f=b.GetPropertyInfo()._strPropertyName;this.verboseMode>1&&(a="  "+f);var u=c.GetProperty(f);if(u){if(this.verboseMode>1&&console.log(a),(p=b.Process(u.GetPropertyValue()))===(1===t.FilterMode)){this.verboseMode>1&&(p?console.log("    Retained. Loop broken for OR optimization"):console.log("    Rejected. Loop broken for AND optimization"));break}}else{if(this.verboseMode>1&&(a+=" - inexisting property from filter"),0===t.FilterMode){p=!1,this.verboseMode>1&&console.log(a+"\n    Rejected. Loop broken for AND optimization");break}this.verboseMode>1&&console.log(a+"\n    Rejected. Loop continued for OR optimization")}}else console.error("Error: can't retrieve property '"+h[l]+"' from the query!")}p?(this.verboseMode>1&&console.log(" --\x3e object matching"),n.push(c)):r&&r.push(c)}else this.verboseMode>1&&console.log(a+" - Rejected")}this.verboseMode>0&&(console.timeEnd(o),console.log("QueryEngine: "+n.length+" object(s) found"));return!0}.call(this,u,i,p,h)&&(this.verboseMode>0&&(c="DS/VCXWebQueryEngine/VCXQueryEngine:Run | Actions",console.time(c)),s._Process(this._experienceBase,p,this.verboseMode),a&&a._Process(this._experienceBase,h,this.verboseMode),this.verboseMode>0&&console.time(c),!0)}});return Object.defineProperty(i.prototype,"componentType",{enumerable:!0,get:function(){return"VCXQueryEngine"}}),i});