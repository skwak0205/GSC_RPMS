define("DS/DMUBaseReview/DMUPreferences",["UWA/Class"],function(e){"use strict";return e.extend({init:function(){this._parent();var e={};this.setPreference=function(t,i){e[t]=i},this.getPreference=function(t){return e[t]?e[t]:window.widget&&window.widget.hasPreference(t)?window.widget.getValue(t):null}}})}),define("DS/DMUBaseReview/DMUOverloadableObject",["DS/DMUBaseExperience/EXPObject","DS/DMUBaseExperience/DMUContextManager","DS/DMUMeasurable/DMUToolsSceneGraph"],function(e,t,i){"use strict";var n=[{name:"sType",type:"string",JSONname:"type"},{name:"sID",type:"string",JSONname:"id"},{name:"sUuid",type:"string",JSONname:"uuid"},{name:"sName",type:"string",JSONname:"Name"},{name:"bEditable",type:"boolean",JSONname:"editable"},{name:"sDescription",type:"string",JSONname:"Description"}];return e.extend({init:function(e,t){this._parent(e,t),this.addParameters(n);var r,o=this,a=!1;this.getPathElement=function(){return r||(r=i.buildPathElement(o.getNode())),r.clone()},this.updateRepresentation=function(e,t){o.getNode().updateRepresentation(e,a),t&&(o.updateModel&&o.updateModel(e),o.fireEvent("onDMUObjectVisuRefreshRequired",{dmuObject:o}))},this.setGhostMode=function(e){a=e},this.setNodePickable=function(e){o.getNode().setPickable(e)},this.isEditable=function(){return o.getAttribute("bEditable")||void 0===o.getAttribute("bEditable")}},remove:function(){for(var e=this.getParent()&&this.getParent().getSlides?this.getParent().getSlides():[],t=e.length-1;t>=0;t--)e[t]&&e[t].removeObjectOverload(e[t].getOverloadForTarget(this));this._parent()},setNominalAttribute:function(e,t){e&&this.hasAttribute(e)&&(this["_"+e]=t,this.makeDirty())},getNominalAttribute:function(e){return this["_"+e]},setAttribute:function(e,i){if(e){var n=0,r=!1,o=this.getParameters();if(o){for(n=0;n<o.length;n++)if(o[n].name===e&&"boolean"==typeof o[n].isOverloadable){r=o[n].isOverloadable;break}var a=!0;if(r){var s=null,l=t.getReviewContext({viewer:this.getViewer()});if(l&&l.getCurrentSessionMarkup()&&(s=l.getCurrentSessionMarkup().getCurrentSlide?l.getCurrentSessionMarkup().getCurrentSlide():null),s){var u=!1,c=s.getOverloadForTarget(this);if(null==c&&(c={target:this,state:{}},u=!0),c){var g=c.state;if(g){var d=c.state[e];if(void 0===d){for(var f=!1,h=0;!f&&h<o.length;h++){var p=o[h];p.name===e&&p.isOverloadable&&(g[e]=i,this.makeDirty(),a=!1,f=!0)}!0===f&&u&&s.addObjectOverload(c)}void 0!==d&&(g[e]=i,this.makeDirty(),a=!1)}}}}a&&this._parent(e,i)}}},getAttribute:function(e){var i;if(e){var n=0,r=!1,o=this.getParameters();if(o){for(n=0;n<o.length;n++)if(o[n].name===e&&"boolean"==typeof o[n].isOverloadable){r=o[n].isOverloadable;break}if(r){var a=null,s=t.getReviewContext({viewer:this.getViewer()});if(s&&s.getCurrentSessionMarkup()&&(a=s.getCurrentSessionMarkup().getCurrentSlide?s.getCurrentSessionMarkup().getCurrentSlide():null),a){var l=a.getOverloadForTarget(this);if(l&&l.state)i=l.state[e];else{var u=a.getPointedFormats?a.getPointedFormats():null;if(u&&u.length)for(n=0;n<u.length;n++)if((l=u[n].getOverloadForTarget(this))&&l.state){i=l.state[e];break}}}}void 0===i&&(i=this.getNominalAttribute(e))}}return i}})}),define("DS/DMUBaseReview/DMULinksManagerExport",["require","exports"],function(e,t){"use strict";return class{static getObjectDefinition(e){let t={};return e.exportLinksManagerData(t),t}}}),define("DS/DMUBaseReview/DMUOccurrenceOverloaderImport",["UWA/Class"],function(e){"use strict";return e.extend({init:function(e){this.importData=function(t,i,n){t&&i&&e&&(i.fillObjectAttributes(e,t,n),i.registerForPostImport(e))},this.afterImport=function(){e&&e.fireEvent("onDMUObjectInitialized",{dmuObject:e})}}})}),define("DS/DMUBaseReview/DMULinksManagerImport",["UWA/Class"],function(e){"use strict";return e.extend({init:function(e){this.importData=function(t,i,n){t&&i&&e&&(i.fillObjectAttributes(e,t,n),e.importLinksManagerData(t),i.registerForPostImport(e))},this.afterImport=function(){e&&e.fireEvent("onDMUObjectInitialized",{dmuObject:e})}}})}),define("DS/DMUBaseReview/DMUOccurrenceOverloader",["DS/DMUBaseReview/DMUOverloadableObject","DS/Visualization/Node3D","DS/DMUMeasurable/DMUToolsSceneGraph","DS/DMUBaseExperience/DMUContextManager","DS/DMUBaseReview/DMUOccurrenceOverloaderImport"],function(e,t,i,n,r){"use strict";var o=[{name:"sTargetId",type:"string",JSONname:"targetId"},{name:"bVisible",type:"bool",JSONname:"PropertiesOccurrenceOverloader.GraphicProperties.visible",isOverloadable:!0},{name:"cColor",type:"Color",JSONname:"PropertiesOccurrenceOverloader.GraphicProperties.color",isOverloadable:!0},{name:"fOpacity",type:"float",JSONname:"PropertiesOccurrenceOverloader.GraphicProperties.opacity",isOverloadable:!0},{name:"mTransfoMatrix",type:"Matrix4",JSONname:"PropertiesOccurrenceOverloader.transformationMatrix",isOverloadable:!0},{name:"mPosition",type:"Matrix4",JSONname:"PropertiesOccurrenceOverloader.position",isOverloadable:!0}];return e.extend({init:function(e,a){this._parent(e,a),this.addParameters(o),this.setAttribute("sType","OccurrenceOverloader");var s,l=this,u=new t;u.getDMUType=function(){return l.getType()},this.setNode(u);var c=new r(this);function g(){if(!s&&l.getAttribute("sTargetId")){var e=a.getAttribute("oLinksManager");e&&(s=e.getChildWithID(l.getAttribute("sTargetId")))&&(s.idPath=e.getOccurrenceIdPath(s.path))}}this.importData=c.importData,this.afterImport=c.afterImport,this._parentRemove=this.remove,this.remove=function(){l._parentRemove(),c=null},this.setOccurrence=function(e){e&&(s=null,l.setAttribute("sTargetId",e.id),g())},this.isOverloading=function(e){if(!s||s&&!s.idPath)return!1;var t=e.idPath||i.getIdPath(e.pathElement);if(s.idPath.length!==t.length)return!1;for(var n=0;n<s.idPath.length;n++)if(s.idPath[n]!==t[n])return!1;return!0},this.isOverloadedInCurrentSlide=function(){if(!s||s&&!s.idPath)return!1;var t=n.getReviewContext({viewer:e});if(t&&t.getCurrentSessionMarkup()){var i=t.getCurrentSessionMarkup().getCurrentSlide();if(i){var r=i.getOverloadForTarget(l);return null!=r}}return!1},this._parentGetNominalAttribute=this.getNominalAttribute,this.getNominalAttribute=function(e){if("bVisible"!==e&&"cColor"!==e&&"fOpacity"!==e&&"mPosition"!==e&&"mTransfoMatrix"!==e)return l._parentGetNominalAttribute(e)},this.getOccurrencePathElement=function(){s||g();var e=a.getAttribute("oLinksManager");return e&&s?e.getOccurrencePathElement(s.id):null},this.getOccurrenceIDPath=function(){return s&&s.idPath||g(),s?s.idPath:null}}})}),define("DS/DMUBaseReview/DMUEnvironment",["require","exports","DS/DMUBaseExperience/EXPManagerSet","DS/DMUBaseReview/DMUOverloadableObject","DS/DMUBaseExperience/EXPToolsVisualization"],function(e,t,i,n,r){"use strict";let o=[{name:"vViewpointPosition",type:"Vector3",JSONname:"ViewpointProperty.Position",isOverloadable:!0},{name:"vViewpointSight",type:"Vector3",JSONname:"ViewpointProperty.Sight",isOverloadable:!0},{name:"vViewpointUp",type:"Vector3",JSONname:"ViewpointProperty.Up",isOverloadable:!0},{name:"vViewpointRight",type:"Vector3",JSONname:"ViewpointProperty.Right",isOverloadable:!0},{name:"fViewpointTargetDistance",type:"float",JSONname:"ViewpointProperty.targetDistance",isOverloadable:!0},{name:"fViewpointFieldOfView",type:"float",JSONname:"ViewpointProperty.fieldOfView",isOverloadable:!0},{name:"iViewpointType",type:"int",JSONname:"ViewpointProperty.type",isOverloadable:!0},{name:"bLockUnlockSection",type:"bool",JSONname:"SessionProperty.LockUnlockSection",isOverloadable:!0},{name:"sFocusProperty",type:"listStrings",JSONname:"FocusProperty.targetId",isOverloadable:!0},{name:"fDocumentRotationAngle",type:"float",JSONname:"DocumentProperty.fDocumentRotationAngle",isOverloadable:!0}];return class extends n{constructor(e,t){super(e,t),this.setAttribute("sType","Environment"),this.addParameters(o);let n=this;this.setActiveFlag=function(t){!t&&e.currentViewpoint&&e.currentViewpoint.setAngle(45)},this.getEnvironmentInfo=function(){let t=r.getViewpointInfo(e.currentViewpoint);if(t){let r={vViewpointSight:t.sight,vViewpointRight:t.right,vViewpointUp:t.up,vViewpointPosition:t.position,fViewpointTargetDistance:t.distance,iViewpointType:t.projectionType,fViewpointFieldOfView:t.angle};if(e.get2DMode()){let e=i.getManager({name:"DMU2DSheetManager",context:n.getFrameWindow()});e&&("Document"===e.getDocumentType()?r.fDocumentRotationAngle=e.getDocumentRotationAngle():e.getCurrentSheet()&&(r.sFocusProperty=[e.getCurrentSheet()]))}return e._lockUnlockCmd&&(r.bLockUnlockSection=e._lockUnlockCmd.getState()),r}},this.getCurrentSlideEnvironmentInfo=function(){return{vViewpointSight:n.getAttribute("vViewpointSight"),vViewpointRight:n.getAttribute("vViewpointRight"),vViewpointUp:n.getAttribute("vViewpointUp"),vViewpointPosition:n.getAttribute("vViewpointPosition"),fViewpointTargetDistance:n.getAttribute("fViewpointTargetDistance"),iViewpointType:n.getAttribute("iViewpointType"),fViewpointFieldOfView:n.getAttribute("fViewpointFieldOfView"),sFocusProperty:n.getAttribute("sFocusProperty"),fDocumentRotationAngle:n.getAttribute("fDocumentRotationAngle"),bLockUnlockSection:n.getAttribute("bLockUnlockSection")}},this.refresh=function(t){let o=t||{};!function(t,r){if(e.get2DMode()){let e=i.getManager({name:"DMU2DSheetManager",context:n.getFrameWindow()});if(e){let i=t?t.fDocumentRotationAngle:n.getAttribute("fDocumentRotationAngle");i&&e.setDocumentRotation(i);let o=t?t.sFocusProperty:n.getAttribute("sFocusProperty");if(o&&o.length>0){let t=function(e,t){for(let i=0;i<e.length;i++)if(e[i].toString().match(t))return i;return-1}(o,/^Drw.+/);return-1===t&&(t=0),void e.setCurrentSheet({sheetID:o[t],callback:r})}}}r()}(o.envInfos,function(){let t=o.viewpoint?o.viewpoint:e.currentViewpoint;e._lockUnlockCmd&&e._lockUnlockCmd.setState(o.envInfos?o.envInfos.bLockUnlockSection:n.getAttribute("bLockUnlockSection"));let i=o.envInfos?o.envInfos.vViewpointPosition:n.getAttribute("vViewpointPosition");if(null==i)return;let a=o.envInfos?o.envInfos.vViewpointSight:n.getAttribute("vViewpointSight");if(null==a)return;let s=o.envInfos?o.envInfos.fViewpointTargetDistance:n.getAttribute("fViewpointTargetDistance");if(null==s)return;let l=o.envInfos?o.envInfos.vViewpointUp:n.getAttribute("vViewpointUp");if(null==l)return;let u=o.envInfos?o.envInfos.iViewpointType:n.getAttribute("iViewpointType");0!==u&&1!==u||u===t.getProjectionType()||t.setProjectionType(u);let c=o.envInfos?o.envInfos.fViewpointFieldOfView:n.getAttribute("fViewpointFieldOfView");c=null==c||isNaN(c)?45:c,t.setAngle(c),r.moveViewpoint({viewpoint:t,eyePosition:i,sightDirection:a,upDirection:l,targetDistance:s,duration:o.duration})})}}}}),define("DS/DMUBaseReview/DMULinksManager",["require","exports","DS/DMUMeasurable/DMUToolsSceneGraph","DS/Visualization/PathElement","DS/DMUBaseReview/DMULinksManagerImport","DS/DMUBaseExperience/DMUObject"],function(e,t,i,n,r,o){"use strict";return class extends o{constructor(e,t){super(e,t),this.addParameters([{name:"sType",type:"string",JSONname:"type",defaultValue:"ExternalLinks"}]);let o=this,a=[],s=[],l=new r(this);this.importData=l.importData,this.afterImport=l.afterImport;let u=this.remove;this.remove=function(){a&&(a.length=0),s&&(s.length=0),u()},this.getOccurrences=function(){return s},this.getEntities=function(){return a},this.getChildWithID=function(e){let t=null;return s.some(function(i){if(i&&i.id===e)return t=i,!0}),t||a.some(function(i){if(i&&i.id===e)return t=i,!0}),t},this.getOccurrenceIdPath=function(e){let t=[];for(let i=0;i<e.length;i++)for(let n=0;n<a.length;n++)if(a[n].id===e[i]){t.push(a[n].identifier);break}return t},this.getOccurrence=function(e,n){if(!e)return;let r,o,l=e.idPath||[];if(e.pathElement){let t=function(e){let t=e.clone();for(t.internalPath=[];t.getElement(0)&&!i.isPLMNode(t.getElement(0));)t.externalPath.shift();for(;t&&!i.isPLMNode(t.getLastElement(!0));)t=t.getParentPath();return t}(e.pathElement);if(t)for(o=0;o<t.getLength();o++)l.push(i.getNodeID(t.getElement(o)))}if(l.length){let e,i=[],u=!0,c=[];for(o=0;o<l.length;o++){e=null;for(let t=0;t<a.length;t++)if(a[t]&&a[t].identifier&&a[t].identifier===l[o]){e=a[t];break}e?i.push(e.id):(n&&(e={id:t.computeNewID(),identifier:l[o]},c.push(e),i.push(e.id)),u=!1)}if(u){let e,t,n=!1;for(let o=0;!n&&o<s.length;o++)if(e=s[o].path,i.length===e.length){t=!0;for(let n=0;t&&n<e.length;n++)t=i[n]===e[n];n=t,t&&(r=s[o])}}n&&(a=a.concat(c),r||(r={id:t.computeNewID(),path:i},s.push(r)))}return r},this.getOccurrencePathElement=function(t){for(let r=0;r<s.length;r++)if(s[r].id===t&&s[r].path){let t,o=i.getRootBag(e),l=[o],u=s[r].path,c=0;for(let e=0;o&&e<u.length;e++){t=null;for(let n=0;n<a.length;n++)if(a[n].id===u[e]){let e=!1;if((t=a[n]).identifier){let n=o.getChildren();for(let r=0;!e&&r<n.length;r++){let a=n[r];i.getNodeID(a)&&(e=i.getNodeID(a)===t.identifier)&&(c++,o=a)}}e&&o&&l.push(o);break}}if(l.length&&c===u.length)return new n(l)}},this.exportLinksManagerData=function(e){let t,i;e.entities=[];let n=o.getEntities();for(t=0;t<n.length;t++)i=n[t],e.entities.push({id:i.id,identifier:i.identifier});e.occurrences=[];let r=o.getOccurrences();for(t=0;t<r.length;t++)i=r[t],e.occurrences.push({id:i.id,path:i.path})},this.importLinksManagerData=function(e){let t,i;if(e.entities&&e.entities.length)for(t=0;t<e.entities.length;t++)i=e.entities[t],a.push({id:i.id,identifier:i.identifier});if(e.occurrences&&e.occurrences.length)for(t=0;t<e.occurrences.length;t++)(i=e.occurrences[t]).id&&i.path&&s.push({id:i.id,path:i.path})}}}}),define("DS/DMUBaseReview/DMUExperience",["require","exports","DS/DMUBaseExperience/EXPControllerEvents","DS/DMUMeasurable/DMUToolsSceneGraph","DS/DMUBaseExperience/DMUContextManager","DS/DMUBaseReview/DMUPreferences","DS/Visualization/Node3D","DS/DMUBaseReview/DMULinksManager","DS/DMUBaseExperience/DMUObject","DS/DMUBaseReview/DMUEnvironment"],function(e,t,i,n,r,o,a,s,l,u){"use strict";class c extends l{constructor(e,t){super(e,t),this.setNode(new a("DMUTemporaryReviewBag"));let i=this,n=[],r=0,o=new s(e,this);this.getType=function(){return"DMUTemporaryBag"},this.getOccurence=function(e,t){if(o)return o.getOccurrence(e,t)},this.getAttribute=function(e){return"oLinksManager"===e?o:void 0},this.refreshNode=function(){for(let e=0;e<n.length;e++)n[e].refreshNode()};let l=this.setVisibleFlag;this.setVisibleFlag=function(e){l(e);for(let t=0;t<n.length;t++)n[t].setVisibleFlag(e)},this.getOrCreateOccurrenceOverloader=function(){return null},this.setDirtyFlag=function(){},this.computeNewID=function(){return(++r).toString()},this.computeNewName=function(e){if(!e||!e.object)return"";let t,i=1,r=e.prefix+"."+i,o=[];for(t=0;t<n.length;t++)e.object.getType()===n[t].getType()&&o.push(n[t].getAttribute("sName"));for(;-1!==o.indexOf(r);)i++,r=e.prefix+"."+i;return r};let u=this.remove;this.remove=function(){for(let e=0;e<n.length;e++)n[e].remove();n.length=0,u()},this.setActiveFlag=function(e){for(let t=0;t<n.length;t++)n[t].setActiveFlag(e)},this.getDMUObjectFromPathElement=function(e){if(!e)return;let t,r=e.getLastElement(!0);if(i.getNode()===r)return i;for(let i=0;i<n.length;i++){if(n[i].getNode&&n[i].getNode()===r){t=n[i];break}if(n[i].getDMUObjectFromPathElement&&(t=n[i].getDMUObjectFromPathElement(e)))return t}return t},this.addDMUObject=function(e){n.push(e),e.getNode()&&i.getNode().addChild(e.getNode()),e.setDisplayedFlag(!0),i.fireEvent("onDMUObjectAddedInObject",{dmuObject:e,parentObject:i})},this.getDMUObjects=function(e){let t=[];for(let i=0;i<n.length;i++)(!e||e&&n[i]&&n[i].getType()===e)&&t.push(n[i]);return t},this.removeDMUObjects=function(e){let t,r,o;if(Array.isArray(e)){for(t=e.length-1;t>=0;t--)for(r=n.length-1;r>=0;r--)if((o=n[r])===e[t]){i.getNode().removeChild(o.getNode()),n.splice(r,1),o.remove(),i.fireEvent("onDMUObjectRemovedFromObject",{dmuObject:o,parentObject:i});break}}else for(t=n.length-1;t>=0;t--)o=n[t],(!e||e&&o&&o.getType()===e)&&(i.getNode().removeChild(o.getNode()),n.splice(t,1),o.remove(),i.fireEvent("onDMUObjectRemovedFromObject",{dmuObject:o,parentObject:i}))}}}return class extends l{constructor(e){super(e.getViewer());let t,s,l,g,d=e.getViewer(),f=this,h=!1,p=new o,v=null,m=new c(e.getViewer(),this),D=[],b={},E=new u(d,f),O=null,M=!1;this.setNode(new a("DMUReviewBag")),this.getNode().addChild(m.getNode()),this.setReviewCtxInformation=function(e){O&&O.reviewId===e.reviewId&&O.fromIssue&&(e.fromIssue=O.fromIssue),O=e,f.fireEvent("onReviewCtxInformationChanged",O)},this.getReviewCtxInformation=function(){return O},this.getDMUPreferenceRepository=function(){return p},this.setCurrentSessionMarkup=function(e){v&&(s||(f.getNode().removeChild(v.getNode()),l?v.setVisibleFlag(!1):(v.remove(),f.fireEvent("onReviewRemoved",{reviewId:O?O.reviewId:null,highlightId:O?O.highlightId:null})))),(v=e)&&!D.includes(v)?f.setVisibleMarkups(s?[...D,v]:[v]):v||f.setVisibleMarkups([]),f.fireEvent("onCurrentSessionMarkupChanged",{currentMarkup:v})},this.getCurrentSessionMarkup=function(){return v},this.getTransientReviewBag=function(){return m},this.enableMultipleMarkupVisibility=(e=>{s!==e&&((s=e)?f.setVisibleMarkups(D):f.setVisibleMarkups(v?[v]:[]))}),this.getVisibleMarkups=(()=>D),this.setVisibleMarkups=(e=>{const t=f.getNode();t&&(D.forEach(e=>{const i=e.getNode();i&&t.removeChild(i),e.setVisibleFlag(!1,!0)}),e.forEach(e=>{const i=e.getNode();i&&t.addChild(i),e.setVisibleFlag(!0,!0)}),D=e.slice())}),this.getDMUObjectFromPathElement=function(e){if(!e)return;let t=v?v.getDMUObjectFromPathElement(e):void 0;if(!t&&l){let i=l.getMarkups();for(let n=0;n<i.length;n++){let r=i[n].getMarkupContent();if(!r&&i[n].getRepRef()&&(r=i[n].getRepRef().getMarkupContent()),!r)continue;if(t=r.getDMUObjectFromPathElement(e))return t;let o=i[n].getReplies();for(let i=0;i<o.length;i++)if(!(r=o[i].getMarkupContent())&&o[i].getRepRef()&&(r=o[i].getRepRef().getMarkupContent()),r&&(t=r.getDMUObjectFromPathElement(e)))return t}}return t||(t=m.getDMUObjectFromPathElement(e)),t},this.getUIManager=function(){return t},this.setUIManager=function(e){!t&&e&&(t=e).setActiveFlag(!0)},this.setActiveFlag=function(i){i!==h&&((h=i)?e.getViewer().getRootNode().addChild(f.getNode()):e.getViewer().getRootNode().removeChild(f.getNode()),t&&t.setActiveFlag(h),E&&E.setActiveFlag(h),v&&v.setActiveFlag(h),m&&m.setActiveFlag(h),l&&l.setActiveFlag(h))},this.getActiveFlag=function(){return h},this.refreshNode=function(){v&&v.refreshNode(),m&&m.refreshNode(),l&&l.refreshNode()};let w=this.remove;this.remove=function(){if(f.removeInternalDataModel(),m&&(f.getNode().removeChild(m.getNode()),m.remove()),E&&E.remove(),t&&(t.remove(),t=null),g){let e=Object.keys(b);for(let t=0;t<e.length;t++)g.removeEvent(b[e[t]]);b={},r.unreferenceEventsController({viewer:d})}d.getRootNode().remove(f.getNode()),v=E=O=null,w()},this.removeInternalDataModel=function(){l&&(l.remove(),l=null),v&&(f.getNode().removeChild(v.getNode()),v.remove()),f.fireEvent("onReviewRemoved",{reviewId:O?O.reviewId:null,highlightId:O?O.highlightId:null})};let P=this.setReadOnly;this.setReadOnly=function(e){v&&v.setReadOnly(e),l&&l.setReadOnly(e),t&&t.setReadOnly(e),P(e)};let S=this.setVisibleFlag;this.setVisibleFlag=function(e){e!==f.isVisible()&&(S(e),v&&v.setVisibleFlag(e),m&&m.setVisibleFlag(e),l&&l.setVisibleFlag(e))},this.getEnvironment=function(){return E},this.getValidation=function(){return l},this.setValidation=function(e){l&&f.getNode().removeChild(l.getNode()),e&&(l=e,f.getNode().addChild(l.getNode()))},function(){if(!g){g=r.getEventsController({viewer:e.getViewer()});let t=function(){let e=r.getContextViewer({viewer:d});if(e){let t=e.getRootBagPath().getChildrenPathes();if(O)for(let e=0;e<t.length;e++)if(n.getNodeID(t[e].getLastElement(!0))===O.contextId)return;!O&&t.length||r.removeReviewContext({viewer:d})}},o=function(){g.removeEvent(b.EXPRootRemovedEvent),b.EXPRootRemovedEvent=-1},a=function(){b.EXPRootRemovedEvent=g.addEvent(i.Events.EXPRootRemovedEvent,t)};b.EXPApplyFilterBeginEvent=g.addEvent(i.Events.EXPApplyFilterBeginEvent,o),b.EXPFilterAppliedEvent=g.addEvent(i.Events.EXPFilterAppliedEvent,a),b.EXPLoadingFailureEvent=g.addEvent(i.Events.EXPLoadingFailureEvent,a),b.EXPRemoveFilterBeginEvent=g.addEvent(i.Events.EXPRemoveFilterBeginEvent,o),b.EXPFilterRemovedEvent=g.addEvent(i.Events.EXPFilterRemovedEvent,a),b.EXPRootRemovedEvent=g.addEvent(i.Events.EXPRootRemovedEvent,t),b.EXPAssetChangedEvent=g.addEvent(i.Events.EXPAssetChangedEvent,t),b.EXPExperienceDisposed=g.addEvent(i.Events.EXPExperienceDisposed,t),b.EXPRefreshEvent=g.addEvent(i.Events.EXPRefreshEvent,()=>{M=!0}),b.EXPRefreshBeginEvent=g.addEvent(i.Events.EXPRefreshBeginEvent,()=>{M||o()}),b.EXPRefreshCompletedEvent=g.addEvent(i.Events.EXPRefreshCompletedEvent,()=>{M?M=!1:a()})}f.setActiveFlag(!0)}()}}});