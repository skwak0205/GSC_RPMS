define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase",["UWA/Core","UWA/Class","UWA/Promise","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/LifecycleServices","DS/WAFData/WAFData","DS/ENOXVersionExplorerUtils/VersionExplorerSettings"],function(e,r,t,i,s,o,n){"use strict";var a=void 0,c=void 0,u=void 0;function l(e,r,t){function u(s){var c,u=i.getHeaders(encodeURIComponent(s));e.serviceURI.contains("http")&&n._RDF_SETTINGS._DEBUG_MODE?(c=e.serviceURI,"GET"===e.method&&delete u["Content-Type"]):e.serviceURI.contains("search")?c=i.getPlatformWSUrl("3DSearch",a||i.getTenant(),e.serviceURI,null):(e.serviceURI.contains("versiongraph")&&delete u["DS-Change-Authoring-Context"],c=i.get3DSpaceWSUrl(a||i.getTenant(),e.serviceURI,null),u.SecurityContext=encodeURIComponent(s)),"GET"===e.method&&(c+=(c.indexOf("?")>=0?"&":"?")+"timestamp="+Date.now().toString()),o.authenticatedRequest(c,{method:e.method,headers:u,timeout:6e5,data:void 0===e.data?"":e.data,type:"json",onComplete:function(e){"failure"===e.status||!1===e.success?t(e):r(e)},onTimeout:function(e){t(e)},onFailure:function(e){t(e)}})}"string"==typeof c&&c.length?u(c):s.getSecurityContextPromise(a||i.getTenant()).then(function(e){u(e)}).catch(function(e){t(e)})}return r.extend({getVersionsFromVersion:function(e,r){var t=Array.isArray(r)?{method:"POST",serviceURI:"/resources/v1/dslc/versiongraph?withThumbnail=1&withIsLastVersion=1&withAttributes=1&withCopyFrom=1",data:JSON.stringify({graphRequests:[{id:e,attributes:r}]})}:{method:"GET",serviceURI:"/resources/v1/dslc/versiongraph/"+e+"?withThumbnail=1&withIsLastVersion=1&withAttributes=1&withCopyFrom=1",data:""};return this._returnPromise(t)},checkAccess:function(e){var r={boAccessRights:[]};e.forEach(function(e){var t=[];e.access.forEach(function(e){t.push({access:{physical:e}})}),r.boAccessRights.push({objectID:e.pid,accessRight:t})});var t={method:"POST",serviceURI:"/resources/pno/ownership/checkaccess",data:JSON.stringify(r)};return this._returnPromise(t)},setTenantId:function(e){a=e},getTenantId:function(){return a||i.getTenant()},setServiceId:function(e){u=e},getServiceId:function(){return u},setSecurityContext:function(e){c=e},getSecurityContext:function(e){return c},_returnPromise:function(e){return new t(function(r,t){n._RDF_SETTINGS._DEBUG_MODE?l(e,r,t):i.app_initialization(function(){l(e,r,t)})})},reviseAsMajor:function(r){var t={data:[]},i=r.physIds,s=r.titles;if(!(Array.isArray(i)&&Array.isArray(s)&&i.length>0&&i.length===s.length))throw Error("ModelWebServicesBase: reviseAsMajor-inputs are not valid");for(var o=0;o<i.length;o++)t.data.push(e.extend({physicalid:i[o]},"string"==typeof s[o]&&s[o].length?{title:s[o]}:{}));r={method:"POST",serviceURI:"/resources/lifecycle/revise/major",data:JSON.stringify(t)};return this._returnPromise(r)},getPropFromVersion:function(e){var r={lIds:e,plmparameters:"false",attributes:"true",navigateToMain:"false",debug_properties:"false"},t={method:"POST",serviceURI:"/resources/v1/collabServices/attributes/op/read",data:JSON.stringify(r)};return this._returnPromise(t)},getVersionFamilyData:function(e){var r={method:"GET",serviceURI:"/resources/lifecycle/revision/versionFamilyData",data:"physicalid="+e};return this._returnPromise(r)},getPersonInfoPromise:function(e){return this._returnPromise({method:"GET",serviceURI:"/resources/modeler/pno/person/"+e})},getBranchFilterPromise:function(e){var r={branchFilterRequests:[]};e.forEach(function(e){r.branchFilterRequests.push({id:e})});var t={method:"POST",serviceURI:"/resources/v1/dslc/getbranchfilter",data:JSON.stringify(r)};return this._returnPromise(t)}})}),define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesHistory2",["UWA/Core","DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase","DS/ENOXVersionExplorerUtils/VersionExplorerSettings"],function(e,r,t){"use strict";return r.extend({getVersionsFromVersion:function(e,r,i){var s;s=!0===i?"/resources/v1/dslc/versiongraph?withThumbnail=1&withIsLastVersion=1&withAttributes=1&withCopyFrom=1&withAdjacentVersion=1":"/resources/v1/dslc/versiongraph?withThumbnail=0&withIsLastVersion=1&withAttributes=1&withCopyFrom=1&withAdjacentVersion=1";var o={items:[],versions:[]},n=this,a=t.historyConfig;if(null!=a&&a.historyConfig)for(var c=0,u=a.historyConfig,l=u.length;c<l;c++){var h=u[c];r.indexOf(h.attribute)<0&&r.push(h.attribute)}function d(e){var t=[];if(!Array.isArray(e))throw Error("ModelWebServicesHistory2:getVersionsFromVersion - No IDs to");for(var i=0,o=e.length;i<o;i++)t.push({id:e[i],attributes:r});return{method:"POST",serviceURI:s,data:JSON.stringify({graphRequests:t})}}return this._returnPromise(d(Array.isArray(e)?e:[e])).then(function e(r){var t=[];return r.graphs.forEach(function(e){e.item&&!e.item.partial?(o.versions=o.versions.concat(e.versions),o.items.push(e.item)):e.item&&!0===e.item.partial&&e.versions&&e.versions[0]&&o.versions.findIndex(function(r){return r.id===e.versions[0].id})<0&&t.push(e.versions[0].id)}),t.length?n._returnPromise(d(t)).then(e):Promise.resolve(o)})}})}),define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesRDF",["UWA/Core","DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase","DS/ENOXVersionExplorerUtils/VersionExplorerSettings","DS/ENOXVersionExplorerUtils/ENOXVersionExplorerUtils"],function(e,r,t,i){"use strict";return r.extend({getVersionsFromVersion:function(e){var r={method:"GET",serviceURI:t._RDF_SETTINGS._BASE_URL+"/resources/"+e+"?$mask="+(t._RDF_SETTINGS._VERSION_MASK_GET||"dslc:Mask.VersionDefault"),data:""};return this._returnPromise(r)},addVersionPromise:function(r){var s=t._RDF_SETTINGS._BASE_URL;r.customData=r.customData||{};var o=t._RDF_SETTINGS._VERSION_DATAMODEL_TYPE||"dslc:ItemVersion",n=t._RDF_SETTINGS._VERSION_MASK_ADD||"dslc:ItemVersionCommandMask",a=t._RDF_SETTINGS._VERSION_MASK_OPTIONS_BUILDER?t._RDF_SETTINGS._VERSION_MASK_OPTIONS_BUILDER(r,i.getSemanticDescription):{for:"<"+r.itemID+">",origin:"<"+r.parentid+">",intent:i.getSemanticDescription(r.versionSemantic),copy:!0},c={method:"POST",serviceURI:s+(r.customURI||"/classes/"+o+"?$mask="+n),data:JSON.stringify(e.extend(a,r.customData))};return this._returnPromise(c)}})}),define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesP",["UWA/Core","DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase","DS/ENOXVersionExplorerUtils/VersionExplorerSettings"],function(e,r,t){"use strict";return r.extend({getVersionsFromVersion:function(e,r){var i="/resources/v1/dslc/versiongraph?withThumbnail=1&withIsLastVersion=1&withAttributes=1&withCopyFrom=1",s=t.historyConfig;if(null!=s&&s.historyConfig)for(var o=0,n=s.historyConfig,a=n.length;o<a;o++){var c=n[o];r.indexOf(c.attribute)<0&&r.push(c.attribute)}return this._returnPromise(function(e){var t=[];if(!Array.isArray(e))throw Error("ModelWebServicesHistory2:getVersionsFromVersion - No IDs to");for(var s=0,o=e.length;s<o;s++)t.push({id:e[s],attributes:r});return{method:"POST",serviceURI:i,data:JSON.stringify({graphRequests:t})}}(Array.isArray(e)?e:[e]))}})}),define("DS/ENOXVersionExplorerModelWebServices/ModelWebServicesHistory",["UWA/Core","DS/ENOXVersionExplorerModelWebServices/ModelWebServicesBase","DS/ENOXVersionExplorerUtils/VersionExplorerSettings"],function(e,r,t){"use strict";return r.extend({getVersionsFromVersion:function(r){var i="",s=t.historyConfig;if(null!=s&&s.historyConfig){i="&custAttribs=";for(var o=0,n=s.historyConfig,a=n.length;o<a;o++){var c=n[o];i.indexOf(e.Utils.encodeUrl(c.attribute))<0&&(i+=e.Utils.encodeUrl(c.attribute)+"~~~")}}var u={method:"GET",serviceURI:"/resources/lifecycle/history/links",data:"physicalid="+r+"&depth=100&height=100"+i};return this._returnPromise(u)}})});