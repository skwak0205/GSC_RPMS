//! Private Method emxUICoreTreeNode.clone()
//!     This methods creates a clone of this node. This method is
//!     considered PRIVATE and MAY NOT be used by developers.
define("DS/ENOSharingWebUI/utils/SharingViewConstants",[],function(){return{TYPE_LARGE_RESPONSIVE_TILE:1,TYPE_DATA_GRID:2,TYPE_SMALL_RESPONSIVE_TILE:3,TYPE_LARGE_RESPONSIVE_TILE_STRING:"Tile View",TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING:"Group Tile View",TYPE_LARGE_RESPONSIVE_TILE_SORTED_ASC_STRING:"Sorted Asc Tile View",TYPE_LARGE_RESPONSIVE_TILE_STRING_DESC_STRING:"Sorted Desc Tile View",TYPE_LARGE_RESPONSIVE_LIST_STRING:"List View"}}),define("DS/ENOSharingWebUI/utils/ShareModelServices",["UWA/Core","UWA/Class","DS/Tree/TreeNodeModel","WebappsUtils/WebappsUtils","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","i18n!DS/ENOSharingWebUI/assets/nls/SharingNLS"],function(e,t,o,i,n,r){"use strict";function a(){this.data={},this.swymURL=""}return a.prototype={getMenuList:function(e){var t=[];if(e&&e.length)for(var o=0;o<e.length;o++){var n=e[o],r=i.getWebappsBaseUrl();r=0==o?r+"WUXResponsiveTileView/assets/ExpandAll.png":r+"WUXResponsiveTileView/assets/CollapseAll.png",t.push({type:"PushItem",title:n,icon:r,action:{callback:function(e){this.dispatchEvent("onContextualMenuClicked")}}}),o>=0&&o<e.length&&t.push({type:"SeparatorItem"})}return t},getImageFile:function(e,t,o){this.swymURL=o;var i="";return""!=o&&(i=o+e+"/"),i},getAvatarDetails:function(e){var t={},o=[[7,139,250],[249,87,83],[111,188,75],[158,132,106],[170,75,178],[26,153,123],[245,100,163],[255,138,46]];if(null!=e&&null!==e){var i=e.match(/\b\w/g),n=i[0].toUpperCase(),r=i[i.length-1].toUpperCase(),a=n+r,s=Math.ceil((n.charCodeAt(0)+r.charCodeAt(0))%o.length),l="rgb("+o[s][0]+","+o[s][1]+","+o[s][2]+")";t.name=e,t.avatarStr=a,t.avatarColor=l}return t},_createModels:function(e,t,o){var i=this,n=[],r="";if(e.hasOwnProperty("swymURL")&&(r=e.swymURL),null!=e&&null!=e&&e.hasOwnProperty("objectID")){var a=e.objectID,s=e.ownership;null!=s&&null!=s&&Array.isArray(s)&&s.forEach(function(e){var s=i._createNodeOptions(a,e,o,r),l=s.subLabel;if(n.push(s),null!=t&&""!=l&&0==t.hasOwnProperty(l)){var c=[];c.push(s),t[l]=c}else t[l].push(s)})}return n},_createNodeOptions:function(e,t,o,n){if(t.hasOwnProperty("owner")){var a=t.owner,s=new Object;if(s.objectID=e,null!==a){var l=null,c=null,d="";t.hasOwnProperty("access")&&(d=(l=t.access).logical,s.rights=l,s.logical=d,s.subLabel=o[s.logical],void 0===s.subLabel&&(s.subLabel=function(e){var t=e;switch(e){case"Reader":t="Can Read";break;case"Author":t="Can Edit";break;case"Viewer":t="Can View";break;case"Owner":t="Can Manage";break;case"Can Read":t="Reader";break;case"Can Edit":t="Author";break;case"Can View":t="Viewer";break;case"Can Manage":t="Owner";break;case"CanAddRemoveAttachments":t="Can Add / Remove Attachments";break;case"Can Add / Remove Attachments":t="CanAddRemoveAttachments";break;case"Leader":t="Leader";break;case"Project Lead":t="Project Lead";break;case"Project Member":t="Project Member"}return t}(s.logical))),t.hasOwnProperty("inheritedPath")&&(c=t.inheritedPath,s.inheritedPath=c);var u="",h="",p="",g="",_="",w="",b="",m="",v="",f="",V="";if(a.hasOwnProperty("person")){f=a.comment,s.comment=f,p=a.person.personID,u=a.person.personFirstName,h=a.person.personLastName;var S="fonticon fonticon-user";""==(g=a.person.personFullName)&&(g=p);var y=p.substring(0,p.indexOf("_PRJ")),C=this.getImageFile(y,g,n);""!=C?s.picture=C:("user-image-avatar",V=i.getWebappsAssetUrl("ENOSharingWebUI","img/icon_Person.png"),s.icon=S),s.id=p}if(a.hasOwnProperty("collabSpace")){w=a.collabSpace.collabSpaceID,s.id=w,""==g&&(a.collabSpace.hasOwnProperty("collabSpaceTitle")&&(m=a.collabSpace.collabSpaceTitle),g=""!=m?m:w,a.hasOwnProperty("organization")&&(_=a.organization.orgID,a.organization.hasOwnProperty("orgTitle")&&(g=g+"/"+(v=a.organization.orgTitle)))),V=i.getWebappsAssetUrl("ENOSharingWebUI","img/Collab_Space_Thumbnail.png");S="fonticon fonticon-discovery-project";s.icon=S,s.picture=V,s.thumbnail=V,s.collabSpaceTitle=m}a.hasOwnProperty("organization")&&(_=a.organization.orgID,a.organization.hasOwnProperty("orgTitle")&&(v=a.organization.orgTitle),s.orgTitle=v);var I="";a.hasOwnProperty("group")&&(s.userGrpID=a.group.groupURI,S="fonticon fonticon-users-group",s.icon=S,g=a.group.groupTitle,b=a.group.groupURI,I=a.group.groupTitle,s.groupTitle=a.group.groupTitle,s.id=a.group.groupURI,V=i.getWebappsAssetUrl("ENOSharingWebUI","img/User_Group.png"),s.picture=V),s.personID=p,s.personFirstName=u,s.personLastName=h,s.personFullName=g,s.orgID=_,s.collabSpaceID=w,s.groupURI=b,""!=g?s.label=g:""!==_?s.label=_:""!==b&&(s.label=b);var E={objectID:e,personID:p,personFirstName:u,personLastName:h,personFullName:g,orgID:_,collabSpaceID:w,groupURI:b,rights:l,logicalRights:d,inheritedPath:c,subLabel:s.subLabel,picture:s.picture,thumbnail:s.thumbnail,icon:s.icon,orgTitle:v,collabSpaceTitle:m,groupTitle:I};s.grid=E,s.customTooltip=g,s.multipleTitleLineNumber=!0;var D=[];let M={};Object.keys(o).forEach(function(e){if(s.subLabel!=o[e]){var t=o[e];M[t]=e,D.push(t)}});var x=r.remove;D.push(x),s.menuIdObj=M,s.contextualMenu=D}return s}},_createModelForAddMember:function(t){new Object;if(t){t._attributes&&t._attributes.revision&&t._attributes.revision.value&&(t.revision=t._attributes.revision.value),t._attributes&&t._attributes.owner&&t._attributes.owner.valueDB&&(t.ownerFullName=t._attributes.owner.valueDB),t._attributes&&t._attributes.type&&t._attributes.type.valueDB&&(t.typeDisplayName=t._attributes.objectId.valueDB),t._attributes&&t._attributes.type_icon_url&&(t.urlIcon=t._attributes.type_icon_url),t._attributes&&t._attributes.owner&&t._attributes.owner.value&&(t.owner=t._attributes.owner.value),t._attributes&&t._attributes.label&&(t.label=t._attributes.label),t._attributes&&t._attributes.objectId&&(t.id=t._attributes.objectId),t._attributes&&t._attributes.label&&(t.label=t._attributes.label),t._attributes&&t._attributes.owner&&t._attributes.owner.value&&(t.owner=t._attributes.owner.value),t._attributes&&t._attributes._DS_ATTR_type&&(t.type=t._attributes._DS_ATTR_type);var o=e.extend(t,{getRevision:function(){return t.revision},getOwnerFullName:function(){return t.ownerfullName},getTypeDisplayName:function(){return t.typeDisplayName},getUrlIcon:function(){return t.urlIcon},getOwner:function(){return t.owner},getLabel:function(){return t.label},getID:function(){return t.id},getLabel:function(){return t.label},getOwner:function(){return t.owner},getType:function(){return t.type},getDisplayName:function(){return t.label},getSelectedNodes:function(){return[this]},object:{revision:t.revision,ownerFullName:t.ownerFullName,icons:[t.urlIcon]},options:void 0});return t.grid||(t.grid=""),o}},isServicesInitialized:function(){return!1},groupBy:function(e,t,o){var i=[];return e.forEach(function(e){e[_options].hasOwnProperty(t)&&e[_options][t]==o&&i.push(e)}),i},_createAccessListFromResponse:function(e,t){var o={};null!=t&&void 0!==t&&t.hasOwnProperty("response")&&Array.isArray(t.response)&&t.response.forEach(function(t){if(t.hasOwnProperty("objectID")){if(e!=t.objectID)return;if(t.hasOwnProperty("access")&&Array.isArray(t.access))t.access.forEach(function(e){e.hasOwnProperty("logical")&&e.hasOwnProperty("nls")&&(o[e.logical]=e.nls)})}});return o},_createNLSAccessListFromResponse:function(e,t){var o={};null!=t&&void 0!==t&&t.hasOwnProperty("response")&&Array.isArray(t.response)&&t.response.forEach(function(t){if(t.hasOwnProperty("objectID")){if(e!=t.objectID)return;if(t.hasOwnProperty("access")&&Array.isArray(t.access))t.access.forEach(function(e){e.hasOwnProperty("logical")&&e.hasOwnProperty("nls")&&(o[e.nls]=e.logical)})}});return o},_createAttributeListFromResponse:function(e,t){var o={};null!=t&&void 0!==t&&t.hasOwnProperty("response")&&Array.isArray(t.response)&&t.response.forEach(function(e){e.hasOwnProperty("physicalId")&&(o[e.physicalId]=e)});return o}},new a}),define("DS/ENOSharingWebUI/views/SharingEmptyView",["UWA/Core","UWA/Class/View"],function(e,t){"use strict";return{getEmptyView:function(o){return t.extend({tagName:"div",className:"empty-text-view",render:function(){var t=e.createElement("div",{class:"empty-view empty-view-root"}),i=e.createElement("div",{class:"empty-view-infos"}).inject(t);e.createElement("span",{class:"empty-view-icon center-block fonticon fonticon-5x fonticon-picture"}).inject(i),e.createElement("span",{class:"empty-view-title center-block",text:o}).inject(i);return this.container.setContent(t),this},show:function(){}})}}}),define("DS/ENOSharingWebUI/controller/SharingWidgetController",["UWA/Controls/Abstract","UWA/Json","UWA/Promise","DS/WidgetServices/WidgetServices","DS/WAFData/WAFData","DS/LifecycleServices/LifecycleServicesSettings","DS/LifecycleServices/LifecycleServices"],function(e,t,o,i,n,r,a){var s=void 0,l=void 0;function c(e,t,o,i){var c=null;function d(e){var t,a=r.getHeaders(encodeURIComponent(e));c.serviceURI.contains("http")&&DEBUG_MODE?(t=c.serviceURI,"GET"===c.method&&delete a["Content-Type"]):c.serviceURI.contains("search")?t=r.getPlatformWSUrl("3DSearch",s||r.getTenant(),c.serviceURI,null):(t=r.get3DSpaceWSUrl(s||r.getTenant(),c.serviceURI,null),a.SecurityContext=encodeURIComponent(e)),"GET"===c.method&&(t+=(t.indexOf("?")>=0?"&":"?")+"timestamp="+Date.now().toString()),n.authenticatedRequest(t,{method:c.method,headers:a,timeout:6e5,data:void 0===c.data?"":c.data,type:"json",onComplete:function(e){!function(e){var t=this;if("failure"===e.status||!1===e.success){var o=UWA.i18n("OperationFailed");e.hasOwnProperty("ownershipVector")&&e.ownershipVector.length>0&&e.ownershipVector[0].hasOwnProperty("ownership")&&e.ownershipVector[0].ownership.length>0&&e.ownershipVector[0].ownership[0].hasOwnProperty("result")&&e.ownershipVector[0].ownership[0].result.hasOwnProperty("message")&&(o=e.ownershipVector[0].ownership[0].result.message),t.eventData={eventID:"error",msg:o},require(["DS/PADUtils/PADContext"],function(e){e.get().displayNotification(t.eventData)})}else if(c.serviceURI.indexOf("update")<=1){logicalAccessService=c.serviceURI.indexOf("logicalaccess");var n=c.serviceURI.indexOf("getAttributesForAccessRights");if(-1===logicalAccessService)if(-1===n){if(e.hasOwnProperty("ownershipVector")){e.ownershipVector;var r={response:e.ownershipVector};i.dispatchEvent("fetchedOwnershipData",r)}}else e.hasOwnProperty("results")&&(r={response:e.results,completionData:e.completionData},i.dispatchEvent("fetchedAttributeList",r));else e.hasOwnProperty("accessList")&&(e.accessList,r={response:e.accessList},i.dispatchEvent("fetchedAccessList",r))}else r={response:e.ownershipVector},i.dispatchEvent("refreshViewOnUpdate",r)}(e)},onTimeout:function(e){o(e)},onFailure:function(e){o(e)}})}null!==e&&e.hasOwnProperty("inputs")&&(c=e.inputs),null!==e&&e.hasOwnProperty("modelArray")&&e.modelArray,window.__karma__&&(l="ctx::VPLMProjectLeader.MyCompany.3DS Collab Space"),"string"==typeof l&&l.length?d(l):a.getSecurityContextPromise(s||r.getTenant()).then(function(e){d(e)}).catch(function(e){o(e)})}return e.extend({getListOfAttributesForObject:function(e,o){var i='{ "requests": ';Array.isArray(e)&&null!=e&&e.length>0&&(i+=t.encode(e)+"}");var n={method:"POST",serviceURI:"/resources/accessRightServices/ar/getAttributesForAccessRights",data:i};return this._returnPromise(n)},getListOfLogicalRightsForObject:function(e,o){var i='{ "businessObject": ';Array.isArray(e)&&null!=e&&e.length>0&&(i+=t.encode(e)+"}");var n={method:"POST",serviceURI:0===e[0].objectID.indexOf("cid:")?"/resources/lifecycle/ownership/logicalaccess":"/resources/pno/ownership/logicalaccess",data:i};return this._returnPromise(n)},getAccess:function(e,o){var i='{ "businessObject": ';Array.isArray(e)&&null!=e&&e.length>0&&(i+=t.encode(e)+"}");var n={method:"POST",serviceURI:0===e[0].objectID.indexOf("cid:")?"/resources/lifecycle/ownership":"/resources/pno/ownership",data:i};return this._returnPromise(n,o)},setTenantId:function(e){s=e},getTenantId:function(){return s||r.getTenant()},setSecurityContext:function(e){l=e},_returnPromise:function(e,t){var i=this;return new o(function(o,n){var a={inputs:e,modelArray:t};r.app_initialization(function(){c(a,0,n,i),console.log("test")})})},removeAccess:function(e){if(null!=e&&Array.isArray(e)){var t=[];e.forEach(function(e){var o={},i=(e.options.objectID,e.options.userGrpID),n=e.options.personID,r=null,a=null;null!=n&&""!=n&&(r={personID:e.options.personID});var s=e.options.orgID,l=e.options.collabSpaceID;null!=s&&""!=s&&(s={orgID:e.options.orgID},l={collabSpaceID:e.options.collabSpaceID}),null!=i&&""!=i&&(a={groupTitle:e.options.groupTitle,groupURI:e.options.groupURI}),o.access={logical:"Empty"},o.inheritedPath=e.options.inheritedPath,o.operation="REMOVE",null!=s&&(o.owner={comment:"-",collabSpace:l,organization:s}),null!=r&&(o.owner={comment:"-",person:r}),null!=a&&(o.owner={comment:"-",group:a});var c=[];c.push(o),t.push({objectID:e.options.objectID,ownership:c})});var o={ownershipVector:t},i=this;a.getSecurityContextPromise(r.getTenant()).then(function(e){i.getCompleteData(o,e)}).catch(function(e){reject(e)})}},getCompleteData:function(e,o){var i=this,a=r.getHeaders(encodeURIComponent(o));a.SecurityContext=encodeURIComponent(o);for(var s=r.get3DSpaceWSUrl(r.getTenant(),"/resources/accessRightServices/ar/getCompletedData",null),l=[],c=0;c<e.ownershipVector.length;c++)null==e.ownershipVector[c].objectID&&null==e.ownershipVector[c].objectID||l.push(e.ownershipVector[c].objectID);var d=t.encode({requests:l});n.authenticatedRequest(s,{method:"POST",headers:a,timeout:6e5,data:d,type:"json",onComplete:function(t){if("failure"===t.status||!1===t.success){reject(t);var o={error:t.status};caller.dispatchEvent("failedGettingOwnershipDatq",o)}else{if(null!=t.results[0].invalidList&&t.results[0].invalidList.length>0){t.results[0].invalidList.forEach(function(t){for(var o=0;o<e.ownershipVector.length;o++)e.ownershipVector[o].objectID===t&&e.ownershipVector.splice(o,1)})}else if(null!=t.results[0].validList&&t.results[0].validList.length>0){var n=[];n=t.results[0].validList,expandedOwnershipItems=[],n.forEach(function(t){for(var o=0;o<e.ownershipVector.length;o++)e.ownershipVector[o].objectID!=t&&e.ownershipVector.length>0&&expandedOwnershipItems.push({objectID:t,ownership:e.ownershipVector[o].ownership})}),expandedOwnershipItems.forEach(function(t){e.ownershipVector.push(t)})}i.commitWithSCPCS(e)}},onTimeout:function(e){reject(e)},onFailure:function(e){reject(e)}})},commitWithSCPCS:function(e){var o=t.encode(e),i={method:"POST",serviceURI:0===e.ownershipVector[0].objectID.indexOf("cid:")?"/resources/lifecycle/ownership/update":"/resources/pno/ownership/update",data:o};return this._returnPromise(i,null)},updateAccess:function(e){var t=this;a.getSecurityContextPromise(r.getTenant()).then(function(o){t.getCompleteData(e,o)}).catch(function(e){reject(e)})}})}),define("DS/ENOSharingWebUI/views/Mediator",["DS/Core/ModelEvents"],function(e){"use strict";var t=null,o=function(){t=new e};return o.prototype.publish=function(e,o){t.publish({event:e,data:o})},o.prototype.subscribe=function(e,o){return t.subscribe({event:e},o)},o.prototype.unsubscribe=function(e){t.unsubscribe(e)},o.prototype.createNewChannel=function(){return new e},o.prototype.getApplicationBroker=function(){return t},o.prototype.destroy=function(){t.destroy()},o}),define("DS/ENOSharingWebUI/views/SharingResponsiveTile",["UWA/Core","DS/CollectionView/ResponsiveLargeTilesCollectionView","DS/ENOSharingWebUI/utils/ShareModelServices","WebappsUtils/WebappsUtils","css!DS/ENOSharingWebUI/ENOSharingWebUI.css"],function(e,t,o,i){"use strict";let n="";return t.extend({init:function(e){e.hasOwnProperty("swymURL")&&""!==e.swymURL&&(n=e.swymURL),this._parent(e)}})}),define("DS/ENOSharingWebUI/views/SharingCollectionViewUI",["DS/Tree/TreeDocument","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveLargeTilesCollectionView","DS/Controls/Accordeon","DS/ENOSharingWebUI/views/Mediator","DS/Handlebars/Handlebars","DS/ENOSharingWebUI/utils/SharingViewConstants","text!DS/ENOSharingWebUI/views/SharingCollectionView.html","i18n!DS/ENOSharingWebUI/assets/nls/SharingNLS","DS/TreeModel/DataModelSet","DS/Tweakers/GeneratedToolbar","DS/WebappsUtils/WebappsUtils","DS/ENOSharingWebUI/utils/ShareModelServices","UWA/Core","DS/Controls/Toggle","DS/Controls/ButtonGroup","DS/Controls/LineEditor"],function(e,t,o,i,n,r,a,s,l,c,d,u,h,p,g,_,w){"use strict";var b={useDragAndDrop:!1,pageScrollValueTriggeringInfiniteScroll:.5,domId:"sharing-accordion-tileview",height:"inherit",displayTitleTooltip:!0,displayPropertiesTooltip:!0,useDragAndDrop:!1,useNativeScroller:!0,displayedOptionalCellProperties:["contextualMenu","activeFlag"],selectionBehavior:{canInteractiveMultiselectWithCheckboxClick:!0,unselectAllOnEmptyArea:!0,toggle:!0}};var m=function(){this.currentView=a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING};return m.prototype.getIconItems=function(){return{entries:[{id:"share",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"forward ",fontIconFamily:1},label:l["topbar-share"],className:"sharing-share",position:"far",category:"1",value:this.onShare.bind(this),tooltip:l["topbar-share"]}},{id:"filter",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"filter",fontIconFamily:1},label:l["Parameter.Add.QuickToTable"],className:"sharing-filter-view",position:"far",category:"1",value:this.onFilter.bind(this),tooltip:l.filter}},{id:"group",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"group",fontIconFamily:1},label:l.groupView,className:"sharing-group-view",position:"far",category:"1",disabled:!1,value:this.onChangeViewToGroupView.bind(this),tooltip:l.groupView}},{id:"listView",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"view-list",fontIconFamily:1},label:l.listView,className:"sharing-list-view",position:"far",category:"1",value:this.onChangeViewToListView.bind(this),tooltip:l.listView}},{id:"sort-asc",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"alpha-sorting-a-z",fontIconFamily:1},label:l.sortAscListView,className:"sharing-asc-list-view",position:"far",category:"1",value:this.onChangeViewToSortAscListView.bind(this),tooltip:l.sortAscListView}},{id:"sort-desc",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"alpha-sorting-z-a",fontIconFamily:1},label:l.sortDescListView,className:"sharing-desc-list-view",position:"far",category:"1",value:this.onChangeViewToSortDescListView.bind(this),tooltip:l.sortDescListView}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:1},label:l.remove,className:"sharing-delete",position:"far",category:"1",disabled:!0,value:this.onDelete.bind(this),tooltip:l.remove}}]}},m.prototype.init=function(e){var c=this;this.options=e,this._allData=e.data,this._model=e.model,this._gridModel=e.gridModel,this._groupedGridModel=e.groupedGridModel,this._toolbarChannel=(new n).createNewChannel();var m=r.compile(s)();e.container||(e.container=e._triptychWrapper.getMainPanelContainer()),e.container.innerHTML=m,e.columnsConfiguration=[{dataIndex:"tree"},{text:"logicalRights",dataIndex:"logicalRights"},{text:"personID",dataIndex:"personID"},{text:"personFirstName",dataIndex:"personFirstName"},{text:"personLastName",dataIndex:"personLastName"},{text:"personFullName",dataIndex:"personFullName"},{text:"orgID",dataIndex:"orgID"},{text:"collabSpaceID",dataIndex:"collabSpaceID"}],e.views=[a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING,a.TYPE_LARGE_RESPONSIVE_TILE_STRING,a.TYPE_LARGE_RESPONSIVE_TILE_SORTED_ASC_STRING,a.TYPE_LARGE_RESPONSIVE_TILE_SORTED_DESC_STRING],this._columnsConfiguration=e.columnsConfiguration,this.viewContainer=e.container.querySelector(".sharingcollectionview-content-container"),this.collectionViewEvents=e.collectionViewEvents,this._selectedItems=[],this.uniqueIdentifier=e.uniqueIdentifier,e.withmultisel&&(this.toolbarOptions.withmultisel=!0),e.sort;const v=d.prototype.createTreeDocument(this.getIconItems());this._filterLayoutDiv=e.container.querySelector(".sharingcollectionview-filter-container"),this._searchAreaDiv=new p.Element("div",{class:"search-area-display"}).inject(this._filterLayoutDiv),this._searchInput=new w({placeholder:l.Filter,id:"search_userName",class:"search-input",value:"",sizeInCharNumber:75,selectAllOnFocus:!0}).inject(this._searchAreaDiv),this._checkButtonGroupDiv=new p.Element("div",{class:"check-button-group"}).inject(this._filterLayoutDiv),this._checkButtonGroupDiv.setStyle("display","flex"),this._checkButtonGroupDiv.setStyle("flex-direction","row"),this._checkButtonGroupDiv.setStyle("flex-wrap","wrap");c=this;if(this._searchInput.addEventListener("change",function(){c.accordeonContainer.isHidden()||c._filterAccordionTileSearchString(c._searchInput.value)}),this._searchInput.addEventListener("uncommittedChange",function(e){c.accordeonContainer.isHidden()||c._filterAccordionTileSearchString(e.dsModel._properties.valueToCommit.value)}),this._canEditCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canEditButton=new g({type:"checkbox",label:l.get("CanEdit"),value:0,checkFlag:!0}),this._canEditCBGroup.addChild(this._canEditButton),this._canEditCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Author",c._canEditButton.checkFlag)}),this._canReadCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canReadButton=new g({type:"checkbox",label:l.get("CanRead"),value:0,checkFlag:!0}),this._canReadCBGroup.addChild(this._canReadButton),this._canReadCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Reader",c._canReadButton.checkFlag)}),this._canViewCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canViewButton=new g({type:"checkbox",label:l.get("CanView"),value:2,checkFlag:!0}),this._canViewCBGroup.addChild(this._canViewButton),this._canViewCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Viewer",c._canViewButton.checkFlag)}),this._canManageCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canManageButton=new g({type:"checkbox",label:l.get("CanManage"),value:3,checkFlag:!0}),this._canManageCBGroup.addChild(this._canManageButton),this._canManageCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Owner",c._canManageButton.checkFlag)}),this._canAddRemoveAttachmentsCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._canAddRemoveAttachmentsButton=new g({type:"checkbox",label:l.get("CanAddRemoveAttachments"),value:4,checkFlag:!0}),this._canAddRemoveAttachmentsCBGroup.addChild(this._canAddRemoveAttachmentsButton),this._canAddRemoveAttachmentsCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("CanAddRemoveAttachments",c._canAddRemoveAttachmentsButton.checkFlag)}),this._leaderCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._leaderButton=new g({type:"checkbox",label:l.get("Leader"),value:3,checkFlag:!0}),this._leaderCBGroup.addChild(this._leaderButton),this._leaderCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Leader",c._leaderButton.checkFlag)}),this._projectLeadCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._projectLeadButton=new g({type:"checkbox",label:l.get("ProjectLeadFilter"),value:3,checkFlag:!0}),this._projectLeadCBGroup.addChild(this._projectLeadButton),this._projectLeadCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Project Lead",c._projectLeadButton.checkFlag)}),this._projectMemberCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._projectMemberButton=new g({type:"checkbox",label:l.get("ProjectMemberFilter"),value:3,checkFlag:!0}),this._projectMemberCBGroup.addChild(this._projectMemberButton),this._projectMemberCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Project Member",c._projectMemberButton.checkFlag)}),this._showUsersWithInheritedPermissionCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._showUsersWithInheritedPermissionButton=new g({type:"checkbox",label:l.get("ShowUsersWithInheritedPermission"),value:5,checkFlag:!0}),this._showUsersWithInheritedPermissionCBGroup.addChild(this._showUsersWithInheritedPermissionButton),this._showUsersWithInheritedPermissionCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Show users with inherited permission",c._showUsersWithInheritedPermissionButton.checkFlag)}),this._readCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._readButton=new g({type:"checkbox",label:l.get("Read"),value:6,checkFlag:!0}),this._readCBGroup.addChild(this._readButton),this._readCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Read",c._readButton.checkFlag)}),this._addCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._addButton=new g({type:"checkbox",label:l.get("Add"),value:7,checkFlag:!0}),this._addCBGroup.addChild(this._addButton),this._addCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Add",c._addButton.checkFlag)}),this._basicCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._basicButton=new g({type:"checkbox",label:l.get("Basic"),value:8,checkFlag:!0}),this._basicCBGroup.addChild(this._basicButton),this._basicCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Basic",c._basicButton.checkFlag)}),this._readWriteCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._readWriteButton=new g({type:"checkbox",label:l.get("ReadWrite"),value:9,checkFlag:!0}),this._readWriteCBGroup.addChild(this._readWriteButton),this._readWriteCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("ReadWrite",c._readWriteButton.checkFlag)}),this._removeCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._removeButton=new g({type:"checkbox",label:l.get("Remove"),value:10,checkFlag:!0}),this._removeCBGroup.addChild(this._removeButton),this._removeCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("remove",c._removeButton.checkFlag)}),this._addRemoveCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._addRemoveButton=new g({type:"checkbox",label:l.get("AddRemove"),value:11,checkFlag:!0}),this._addRemoveCBGroup.addChild(this._addRemoveButton),this._addRemoveCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("AddRemove",c._addRemoveButton.checkFlag)}),this._fullCBGroup=new _({type:"checkbox"}).inject(this._checkButtonGroupDiv),this._fullButton=new g({type:"checkbox",label:l.get("Full"),value:12,checkFlag:!0}),this._fullCBGroup.addChild(this._fullButton),this._fullCBGroup.addEventListener("click",function(){c.accordeonContainer.isHidden()||c._filterAccordionTile("Full",c._fullButton.checkFlag)}),this._getDatatoUpdateOwnership=function(e,t){var o="",i="",n="",r="",a="",s="",l="",c="",d="",u="",h=e[0].options.objectID,p="";return e[0].options.hasOwnProperty("comment")&&(p=e[0].options.comment),e[0].options.hasOwnProperty("personFirstName")&&(o=e[0].options.personFirstName),e[0].options.hasOwnProperty("personLastName")&&(i=e[0].options.personLastName),e[0].options.hasOwnProperty("personFullName")&&(n=e[0].options.personFullName),e[0].options.hasOwnProperty("personID")&&(r=e[0].options.personID),e[0].options.hasOwnProperty("orgID")&&(a=e[0].options.orgID),e[0].options.hasOwnProperty("collabSpaceID")&&(s=e[0].options.collabSpaceID),e[0].options.hasOwnProperty("collabSpaceTitle")&&(l=e[0].options.collabSpaceTitle),e[0].options.hasOwnProperty("orgTitle")&&(c=e[0].options.orgTitle),e[0].options.hasOwnProperty("groupURI")&&(d=e[0].options.groupURI),e[0].options.hasOwnProperty("groupTitle")&&(u=e[0].options.groupTitle),{ownershipVector:[{objectID:h,ownership:[{operation:"ADD",owner:0!=r.length?{person:{personFirstName:o,personFullName:n,personID:r,personLastName:i},comment:p}:""!=d&&""!=u?{comment:"-",group:{groupURI:d,groupTitle:u}}:{comment:"-",organization:{orgID:a,orgTitle:c},collabSpace:{collabSpaceID:s,collabSpaceTitle:l}},access:{logical:t}}]}]}},this.noOfSelectedItems=0,this._titleGroupCollection=function(t){var i=new o(b);i.onSelectionAdd(function(e){e._options.hasOwnProperty("isAggrShape")&&e._options.isAggrShape?(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView()):0==c.noOfSelectedItems&&(0==c.noOfSelectedItems&&0===e.options.contextualMenu.length?c._toolbar.updateNodeModel("delete",{disabled:!0}):c._toolbar.updateNodeModel("delete",{disabled:!1}),c._toolbar.pushUpdateView()),c.noOfSelectedItems++}),i.onSelectionRemove(function(e){c.noOfSelectedItems--,e._options.hasOwnProperty("isAggrShape")&&e._options.isAggrShape&&(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView()),0==c.noOfSelectedItems&&(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView())});var n={callback:function(e){var t=[];if(e&&e.cellInfos&&e.cellInfos.cellModel){var o=[];if((o=e.cellInfos.cellModel._options.contextualMenu).indexOf("Remove")<o.length-1){var i=o.indexOf("Remove");o[i]="RemoveAccess"}for(var n=0;n<o.length;n++){var r="";null!=c.options.accessListToNlsValues&&(r=c.options.accessListToNlsValues[o[n]]),void 0!==r&&""!==r||(r=o[n]);var a=l[r];null!=a&&(r=a),0===o[n].localeCompare(l.remove)?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(t){var o={operation:"delete",selectedItems:e.cellInfos.manager.getTreeDocument().getSelectedNodes()};c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-delete",data:o})}}}):r===l.Author?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Author");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Reader?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Reader");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Viewer?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Viewer");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Owner?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Owner");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Read?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Read");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Add?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Add");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Basic?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Basic");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.ReadWrite?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"ReadWrite");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.AddRemove?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"AddRemove");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Full?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Full");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.RemoveAccess?t.push({type:"PushItem",title:"Remove",icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Remove");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.CanAddRemoveAttachments?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"CanAddRemoveAttachments");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Leader?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Leader");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.ProjectLead?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Project Lead");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.ProjectMember?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Project Member");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):o[n].contains(l.CompareInheritedPermission)&&t.push({type:"PushItem",title:o[n],icon:""}),t.push({type:"SeparatorItem"})}}return t}};return i.onContextualEvent=n,e.onPostCellRequest&&i.onPostCellRequest(e.onPostCellRequest),e.onContextualEventCallback&&(i.onContextualEvent={callback:e.onContextualEventCallback}),i},e.container.getElementsByClassName("wux-controls-buttongroup wux-controls-abstract").length>0)for(var f=e.container.getElementsByClassName("wux-controls-buttongroup wux-controls-abstract").length,V=0;V<f;V++)e.container.getElementsByClassName("wux-controls-buttongroup wux-controls-abstract")[V].setStyle("margin-right","8px");if(e.container.getElement(".sharingcollectionview-filter-container").setStyle("padding-bottom","8px"),e.container.getElement(".sharingcollectionview-filter-container").setStyle("display","none"),this._toolbar=new d({overflowManagement:"dropdown",direction:"horizontal",items:v}),this._toolbarContainer=e.container.querySelector(".sharingcollectionview-toolbar-container"),this._toolbar.inject(this._toolbarContainer),e.views&&3!==e.views.length&&(e.views.includes("Grid"),e.views.includes("Thumbnail"),e.views.includes("Tile")),this.currentView=e.currentView?e.currentView:a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING,e.uniqueIdentifier)widget.getValue(e.uniqueIdentifier);e.onPostCellRequest=function(e){var t=e.cellView;if(p.is(t)&&p.is(t.contentView)){t=e.cellView;var o=e.cellModel;if(p.is(o)&&p.is(o._options)){let t="",i="fonticon fonticon-user",n="fonticon fonticon-discovery-project";if(e.cellView.contentView.picture="",p.is(o._options.personID)&&(t=o._options.personID),""!=t){let r=null;if(null==(r=h.swymURL)||""===r){let t=o._options.personFullName,i=h.getAvatarDetails(t);e.cellView.contentView.elements.picture.style["background-image"]="",e.cellView.contentView.elements.picture.style.background=i.avatarColor,e.cellView.contentView.elements.picture.style.cursor="auto",e.cellView.contentView.elements.picture.style["text-align"]="center",e.cellView.contentView.elements.picture.style.width="50px",e.cellView.contentView.elements.picture.style.height="50px",e.cellView.contentView.elements.picture.style.padding="5px",e.cellView.contentView.elements.picture.style["vertical-align"]="middle",e.cellView.contentView.elements.picture.style.display="table-cell",e.cellView.contentView.elements.picture.innerHTML=i.avatarStr,e.cellView.contentView.elements.picture.style["font-size"]="30px",e.cellView.contentView.elements.picture.style["border-radius"]="50%",e.cellView.contentView.elements.picture.style.color="white"}else{e.cellView.contentView.elements.picture.style["background-position"]="center center",e.cellView.contentView.elements.picture.style["background-color"]="#f9f9f9",e.cellView.contentView.elements.picture.style["user-select"]="none",e.cellView.contentView.elements.picture.style["background-size"]="cover",e.cellView.contentView.elements.picture.style["background-repeat"]="no-repeat",e.cellView.contentView.elements.picture.style.position="relative",e.cellView.contentView.elements.picture.style.width="80px",e.cellView.contentView.elements.picture.style.height="60px",e.cellView.contentView.elements.picture.style["border-radius"]="0%";let o=r+"/api/user/getpicture/login/"+t.split("_PRJ")[0]+"/format/normal";e.cellView.contentView.picture=n,e.cellView.contentView.checkbox.hide(),e.cellView.contentView.elements.picture.style["background-image"]="url("+o+")"}o._options.icon=i,e.cellView.contentView.icon=i}else if(e.cellView.contentView.elements.picture.style["background-position"]="center center",e.cellView.contentView.elements.picture.style["background-color"]="#f9f9f9",e.cellView.contentView.elements.picture.style["user-select"]="none",e.cellView.contentView.elements.picture.style["background-size"]="cover",e.cellView.contentView.elements.picture.style["background-repeat"]="no-repeat",e.cellView.contentView.elements.picture.style.position="relative",e.cellView.contentView.elements.picture.style.width="80px",e.cellView.contentView.elements.picture.style.height="60px",e.cellView.contentView.elements.picture.style["border-radius"]="0%",p.is(o._options.collabSpaceID)&&""!=o._options.collabSpaceID){let t=u.getWebappsAssetUrl("ENOSharingWebUI","img/Collab_Space_Thumbnail.png");o._options.icon=n,o._options.picture=t,o._options.thumbnail=t,e.cellView.contentView.picture=n,e.cellView.contentView.checkbox.hide()}else if(p.is(o._options.userGrpID)&&""!=o._options.userGrpID){let t=u.getWebappsAssetUrl("ENOSharingWebUI","img/User_Group.png");e.cellView.contentView.picture=t,e.cellView.contentView.checkbox.hide()}}if(p.is(o.__dataModelSet)&&p.is(o.__dataModelSet._listOfDataModels)&&p.is(o.__dataModelSet._listOfDataModels[o.__dataModelID])){let t="",i="fonticon fonticon-user",n="fonticon fonticon-discovery-project";if(e.cellView.contentView.picture="",p.is(o.__dataModelSet._listOfDataModels[o.__dataModelID]._data)&&p.is(o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.personID)&&(t=o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.personID),""!=t){let r=null;if(null==(r=h.swymURL)){let t=o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.personFullName,i=h.getAvatarDetails(t);e.cellView.contentView.elements.picture.style["background-image"]="",e.cellView.contentView.elements.picture.style.background=i.avatarColor,e.cellView.contentView.elements.picture.style.cursor="auto",e.cellView.contentView.elements.picture.style["text-align"]="center",e.cellView.contentView.elements.picture.style.width="50px",e.cellView.contentView.elements.picture.style.height="50px",e.cellView.contentView.elements.picture.style.padding="5px",e.cellView.contentView.elements.picture.style["vertical-align"]="middle",e.cellView.contentView.elements.picture.style.display="table-cell",e.cellView.contentView.elements.picture.innerHTML=i.avatarStr,e.cellView.contentView.elements.picture.style["font-size"]="30px",e.cellView.contentView.elements.picture.style["border-radius"]="50%",e.cellView.contentView.elements.picture.style.color="white"}else{e.cellView.contentView.elements.picture.style["background-position"]="center center",e.cellView.contentView.elements.picture.style["background-color"]="#f9f9f9",e.cellView.contentView.elements.picture.style["user-select"]="none",e.cellView.contentView.elements.picture.style["background-size"]="cover",e.cellView.contentView.elements.picture.style["background-repeat"]="no-repeat",e.cellView.contentView.elements.picture.style.position="relative",e.cellView.contentView.elements.picture.style.width="80px",e.cellView.contentView.elements.picture.style.height="60px",e.cellView.contentView.elements.picture.style["border-radius"]="0%";let o=r+"/api/user/getpicture/login/"+t.split("_PRJ")[0]+"/format/normal";e.cellView.contentView.elements.picture.style["background-image"]=o,e.cellView.contentView.picture=n,e.cellView.contentView.checkbox.hide(),e.cellView.contentView.elements.picture.style["background-image"]="url("+o+")"}o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.icon=i,e.cellView.contentView.icon=i}else if(e.cellView.contentView.elements.picture.style["background-position"]="center center",e.cellView.contentView.elements.picture.style["background-color"]="#f9f9f9",e.cellView.contentView.elements.picture.style["user-select"]="none",e.cellView.contentView.elements.picture.style["background-size"]="cover",e.cellView.contentView.elements.picture.style["background-repeat"]="no-repeat",e.cellView.contentView.elements.picture.style.position="relative",e.cellView.contentView.elements.picture.style.width="80px",e.cellView.contentView.elements.picture.style.height="60px",e.cellView.contentView.elements.picture.style["border-radius"]="0%",p.is(o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.collabSpaceID)&&""!=o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.collabSpaceID){let t=u.getWebappsAssetUrl("ENOSharingWebUI","img/Collab_Space_Thumbnail.png");o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.icon=n,o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.picture=t,o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.thumbnail=t,e.cellView.contentView.picture=n,e.cellView.contentView.checkbox.hide()}else if(p.is(o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.userGrpID)&&""!=o.__dataModelSet._listOfDataModels[o.__dataModelID]._data.userGrpID){let t=u.getWebappsAssetUrl("ENOSharingWebUI","img/User_Group.png");e.cellView.contentView.checkbox.hide(),e.cellView.contentView.picture=t}}}};var S=new o(b);S.onSelectionAdd(function(e){e._options.hasOwnProperty("isAggrShape")&&e._options.isAggrShape?(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView()):0==c.noOfSelectedItems&&(c._toolbar.updateNodeModel("delete",{disabled:!1}),c._toolbar.pushUpdateView()),c.noOfSelectedItems++}),S.onSelectionRemove(function(e){c.noOfSelectedItems--,e._options.hasOwnProperty("isAggrShape")&&e._options.isAggrShape&&(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView()),0==c.noOfSelectedItems&&(c._toolbar.updateNodeModel("delete",{disabled:!0}),c._toolbar.pushUpdateView())});var y={callback:function(e){var t=[];if(e&&e.cellInfos&&e.cellInfos.cellModel){var o=[];if(e.cellInfos.cellModel.__dataModelSet&&e.cellInfos.cellModel.__dataModelSet._listOfDataModels&&e.cellInfos.cellModel.__dataModelSet._listOfDataModels[e.cellInfos.cellModel.__dataModelID]._data&&(o=e.cellInfos.cellModel.__dataModelSet._listOfDataModels[e.cellInfos.cellModel.__dataModelID]._data.contextualMenu),o.indexOf("Remove")<o.length-1){var i=o.indexOf("Remove");o[i]="RemoveAccess"}for(var n=0;n<o.length;n++){var r="";null!=c.options.accessListToNlsValues&&(r=c.options.accessListToNlsValues[o[n]]),void 0!==r&&""!==r||(r=o[n]);var a=l[r];null!=a&&(r=a),0===o[n].localeCompare(l.remove)?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(t){var o={operation:"delete",selectedItems:e.cellInfos.manager.getTreeDocument().getSelectedNodes()};c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-delete",data:o})}}}):r===l.Author?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Author");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Reader?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Reader");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Viewer?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Viewer");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Owner?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Owner");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Read?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Read");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Add?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Add");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Basic?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Basic");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.ReadWrite?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"ReadWrite");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.AddRemove?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"AddRemove");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Full?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Full");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.RemoveAccess?t.push({type:"PushItem",title:"Remove",icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Remove");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.CanAddRemoveAttachments?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"CanAddRemoveAttachments");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.Leader?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Leader");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.ProjectLead?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Project Lead");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):r===l.ProjectMember?t.push({type:"PushItem",title:o[n],icon:"",action:{callback:function(){o[n];var t=e.cellInfos.manager.getTreeDocument().getSelectedNodes(),i=c._getDatatoUpdateOwnership(t,"Project Member");c.collectionViewEvents.publish({event:"enox-ctxMenu-operation-change-access",data:i})}}}):o[n].contains(l.CompareInheritedPermission)&&t.push({type:"PushItem",title:o[n],icon:""}),t.push({type:"SeparatorItem"})}}return t}};S.onContextualEvent=y,this._tilecollectionView=S,e.onPostCellRequest&&S.onPostCellRequest(e.onPostCellRequest),this._tilecollectionGroupViewCollection={},this.accordeonContainer=new p.Element("div",{class:"accordeon-section-container"}),this._accordeonView=new i({class:"accordeonView",styles:{width:"100%"},exclusive:!1});c=this;e.groupHeaders&&(this.accordeonHeaders=e.groupHeaders,Array.isArray(e.groupHeaders)&&e.groupHeaders.forEach(function(e){c._tilecollectionGroupViewCollection[e]=c._titleGroupCollection(e)}));let C={selectionMode:"row",columns:this._columnsConfiguration,showSelectionCheckBoxesFlag:"OnOver",cellSelection:"single",pageScrollValueTriggeringInfiniteScroll:.5,placeholder:" abc "};this._dataGridView=new t(C),this._dataGridView.onReady(function(){e.groupingOptions&&(c.groupingOptionsforViewSwitch=e.groupingOptions,c._dataGridView.prepareUpdateView(),c._dataGridView.groupRows(e.groupingOptions),c._dataGridView.pushUpdateView())}),e.onContextualEventCallback&&(this._tilecollectionView.onContextualEvent={callback:e.onContextualEventCallback}),this._subscribeToEvents(e),c._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:a.TYPE_LARGE_RESPONSIVE_TILE_STRING})},m.prototype._filterAccordionTileSearchString=function(e){var t=this._gridModel,o=t.getRoots();t.prepareUpdate(),o.forEach(t=>{m.prototype._hideShowRow(e,t,this.options)}),this._gridModel.pushUpdate();var i=this;Object.keys(this._groupedGridModel).forEach(function(t){i._groupedGridModel[t].prepareUpdate(),i._groupedGridModel[t].getRoots().forEach(t=>{m.prototype._hideShowRow(e,t,i.options)}),i._groupedGridModel[t].pushUpdate()})},m.prototype._hideShowRow=function(e,t,o){if(e){var i=new RegExp(e,"i"),n=!1;if(t.options.children){t.options.children.forEach(t=>{m.prototype._hideShowRow(e,t,o)})}else{if(o.columnToSearch)o.columnToSearch.forEach(e=>{n=n||i.test(t.options.grid[e])});else Object.keys(t.options.grid).forEach(e=>{n=n||i.test(t.options.grid[e])});n?t.show():t.hide(!0)}}else if(t.options.children){t.options.children.forEach(t=>{m.prototype._hideShowRow(e,t,o)})}else t.show()},m.prototype._filterAccordionTile=function(e,t){for(var o=this.accordeonContainer.getElementsByClassName("wux-controls-expander-header").length,i="",n=0;n<o;n++){var r=this.accordeonContainer.getElementsByClassName("wux-controls-expander-header")[n].getElementsByClassName("headerTitle")[0].innerText.indexOf("(");" "==this.accordeonContainer.getElementsByClassName("wux-controls-expander-header")[n].getElementsByClassName("headerTitle")[0].innerText[r-1]&&(r-=1),i=this.accordeonContainer.getElementsByClassName("wux-controls-expander-header")[n].getElementsByClassName("headerTitle")[0].innerText.slice(0,r),this.options.accessListToNlsValues.hasOwnProperty(i)&&this.options.accessListToNlsValues[i].contains(e)&&(t?this.accordeonContainer.getElementsByClassName("wux-controls-expander-header")[n].show():this.accordeonContainer.getElementsByClassName("wux-controls-expander-header")[n].hide())}var a=this._gridModel,s=a.getRoots();a.prepareUpdate(),s.forEach(o=>{m.prototype._hideShowRowListView(e,o,this.options,t)}),this._gridModel.pushUpdate();var l=this;Object.keys(this._groupedGridModel).forEach(function(o){l._groupedGridModel[o].prepareUpdate(),l._groupedGridModel[o].getRoots().forEach(o=>{m.prototype._hideShowRowListView(e,o,l.options,t)}),l._groupedGridModel[o].pushUpdate()})},m.prototype._hideShowRowListView=function(e,t,o,i){if(e){var n=new RegExp(e,"i"),r=!1;if(t.options.children){t.options.children.forEach(t=>{m.prototype._hideShowRowListView(e,t,o,i)})}else{if(o.columnToSearch)o.columnToSearch.forEach(e=>{r=r||n.test(t.options.grid[e])});else Object.keys(t.options.grid).forEach(e=>{r=r||n.test(t.options.grid[e])});1==i&&(r&&t.show(),t.options.inheritedPath.length>0&&t.options.subLabel.contains("Inherited")&&e.contains(l.ShowUsersWithInheritedPermission)&&t.show()),0==i&&(r&&t.hide(!0),t.options.inheritedPath.length>0&&t.options.subLabel.contains("Inherited")&&e.contains(l.ShowUsersWithInheritedPermission)&&t.hide(!0))}}else if(t.options.children){t.options.children.forEach(t=>{m.prototype._hideShowRowListView(e,t,o,i)})}else t.show()},m.prototype._subscribeToEvents=function(e){var t=this,o=(t._tilecollectionView.getModel(),this._gridModel.getXSO());t._toolbarChannel.subscribe({event:"enox-collection-toolbar-switch-view-activated"},function(o){t.viewContainer.innerHTML="",e.uniqueIdentifier&&widget.setValue(e.uniqueIdentifier,o),null===widget.body&&1===navigator.userAgentData.brands.length&&-1!==navigator.userAgentData.brands[0].brand.indexOf("Chromium")&&t._toolbar.updateNodeModel("share",{disabled:!0}),o===a.TYPE_LARGE_RESPONSIVE_TILE_STRING?(t._tilecollectionView.getContent().inject(t.viewContainer),t.currentView=a.TYPE_LARGE_RESPONSIVE_TILE_STRING,t._toolbar.prepareUpdateView(),t._toolbar.updateNodeModel("filter",{disabled:!1}),t._toolbar.updateNodeModel("group",{disabled:!1}),t._toolbar.updateNodeModel("listView",{disabled:!0}),t._toolbar.updateNodeModel("sort-asc",{disabled:!1}),t._toolbar.updateNodeModel("sort-desc",{disabled:!1}),t._toolbar.updateNodeModel("delete",{disabled:!0}),t.noOfSelectedItems=0,t._toolbar.pushUpdateView(),0==t._filterLayoutDiv.isHidden()?t.viewContainer.getElementsByClassName("wux-layouts-collectionview wux-controls-abstract wux-layouts-responsivecollectionview wux-layout-largetilecollectionView")[0].setStyle("top","125px"):t.viewContainer.getElementsByClassName("wux-layouts-collectionview wux-controls-abstract wux-layouts-responsivecollectionview wux-layout-largetilecollectionView").length>0&&t.viewContainer.getElementsByClassName("wux-layouts-collectionview wux-controls-abstract wux-layouts-responsivecollectionview wux-layout-largetilecollectionView")[0].setStyle("top","50px"),t.checkNoDataFoundMessage()):o===a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING?(t._accordeonView&&(t._accordeonView.getContent().inject(t.accordeonContainer),t.accordeonContainer.inject(t.viewContainer)),t.currentView=a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING,t._toolbar.prepareUpdateView(),0===t.accordeonContainer.getElementsByClassName("wux-controls-expander-header").length?(t._toolbar.updateNodeModel("filter",{disabled:!0}),t._toolbar.updateNodeModel("group",{disabled:!0}),t._toolbar.updateNodeModel("listView",{disabled:!0}),t._toolbar.updateNodeModel("sort-asc",{disabled:!0}),t._toolbar.updateNodeModel("sort-desc",{disabled:!0}),t._toolbar.updateNodeModel("delete",{disabled:!0}),t.noOfSelectedItems=0):(t._toolbar.updateNodeModel("filter",{disabled:!1}),t._toolbar.updateNodeModel("group",{disabled:!0}),t._toolbar.updateNodeModel("listView",{disabled:!1}),t._toolbar.updateNodeModel("sort-asc",{disabled:!1}),t._toolbar.updateNodeModel("sort-desc",{disabled:!1}),t._toolbar.updateNodeModel("delete",{disabled:!0}),t.noOfSelectedItems=0),t._toolbar.pushUpdateView(),t.checkNoDataFoundMessage()):o===a.TYPE_LARGE_RESPONSIVE_TILE_SORTED_ASC_STRING&&(t._tilecollectionView.getContent().inject(t.viewContainer),t.currentView=a.TYPE_LARGE_RESPONSIVE_TILE_STRING,t.checkNoDataFoundMessage())}),t._toolbarChannel.subscribe({event:"enox-collection-toolbar-sort-activated"},function(e){var o={sortAttribute:e.sortAttribute,sortOrder:e.sortOrder},i="asc"===o.sortOrder.toLowerCase()?1:-1;t._tilecollectionView.treeDocument.prepareUpdate(),t._tilecollectionView.treeDocument._getTrueRoot().sortChildren({isRecursive:!0,sortFunction:function(e,t){try{return console.log("TreeNode MODEL A "+e.getSortableAttributeValue(o.sortAttribute)+"/n"),console.log("TreeNode MODEL B "+t.getSortableAttributeValue(o.sortAttribute)+"/n"),i*e.getSortableAttributeValue(o.sortAttribute).localeCompare(t.getSortableAttributeValue(o.sortAttribute))}catch(e){}return 0}}),t._tilecollectionView.treeDocument.pushUpdate(),t._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:a.TYPE_LARGE_RESPONSIVE_TILE_STRING})}),t._toolbarChannel.subscribe({event:"enox-collection-toolbar-filter-search-value"},function(e){t.collectionViewEvents.publish({event:"filter-on-search",data:e.searchValue[0]})}),o.onChange(function(){var e=t._gridModel.getSelectedNodes();e.map(function(e){return e._options.grid.id});t._selectedItems=[],0!==e.length&&(t._selectedItems=e),t.collectionViewEvents.publish({event:"xsourcing-collectionview-selection-updated",data:{selectedItems:t._selectedItems}})}),t.collectionViewEvents.subscribe({event:"xsourcing-collectionview-disable-toolbar-button"},function(e){t._toolbar.prepareUpdateView(),t._toolbar.updateNodeModel(e,{disabled:!0}),t._toolbar.pushUpdateView(),t._toolbarChannel.publish({event:"enox-collection-toolbar-disable-action",data:e})}),t.collectionViewEvents.subscribe({event:"xsourcing-collectionview-updateModel"},function(e){}),t.collectionViewEvents.subscribe({event:"xsourcing-collectionview-enable-toolbar-button"},function(e){t._toolbar.prepareUpdateView(),t._toolbar.updateNodeModel(e,{disabled:!1}),t._toolbar.pushUpdateView()}),t.collectionViewEvents.subscribe({event:"xsourcing-collectionview-update-count"},function(){t._updateCount()}),t.collectionViewEvents.subscribe({event:"xsourcing-collectionview-load-full-model"},function(){t.options.groupingOptions&&t._dataGridView.groupRows()})},m.prototype.setModel=function(e){this._dataGridView.treeDocument=e,this._tilecollectionView.treeDocument=e,this._tilecollectionView.loadApplicativeModel(e),this._updateCount()},m.prototype.invalidateLayout=function(){this.viewContainer.innerHTML="",this.currentView===a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING?(this._accordeonView&&this._accordeonView.getContent().inject(this.accordeonContainer),this.accordeonContainer.inject(this.viewContainer)):this._tilecollectionView.getContent().inject(this.viewContainer)},m.prototype.setGroupedModel=function(e){var t=this,o=Object.keys(e);t._accordeonView&&t._accordeonView.clear();o.forEach(function(o){if(t._accordeonView){var i=p.createElement("div",{class:"accordeonDiv",styles:{width:"100%"}});if(t._tilecollectionGroupViewCollection.hasOwnProperty(o)||(t._tilecollectionGroupViewCollection[o]=t._titleGroupCollection(o)),t._tilecollectionGroupViewCollection.hasOwnProperty(o)&&t._tilecollectionGroupViewCollection[o]&&e[o]._numberOfNodesInDocument>0){t._tilecollectionGroupViewCollection[o].treeDocument=e[o];var n=e[o].getRoots().length;n,t._tilecollectionGroupViewCollection[o].height=function(e,t){switch(e){case 1:return 110;case 2:return 182}if(e>2)return 70*e+(42+10*(e-2))}(n),t._tilecollectionGroupViewCollection[o].loadApplicativeModel(e[o]),t._accordeonView.addItem({header:o+" ( "+n+" )",content:t._tilecollectionGroupViewCollection[o].getContent().inject(i)})}}}),t._groupedGridModel=e,t._updateCountForAccordeon();var i=250;null!==t.accordeonContainer.getParent()&&null!==t.accordeonContainer.getParent().getParent()&&null!==t.accordeonContainer.getParent().getParent().getParent()&&null!==t.accordeonContainer.getParent().getParent().getParent().getParent()&&t.accordeonContainer.getParent().getParent().getParent().getParent().hasClassName("facetContainer")&&(i=t.accordeonContainer.getParent().getParent().getParent().getParent().getStyle("height").replace("px","")),i-=60,t.accordeonContainer.getElementsByClassName("wux-controls-abstract wux-controls-accordeon-container")[0].setStyle("height",i),t.accordeonContainer.getElementsByClassName("wux-controls-abstract wux-controls-accordeon-container")[0].setStyle("overflow-y","auto");for(var n=0;n<t.accordeonContainer.getElementsByClassName("wux-scroller wux-ui-is-rendered").length;n++)t.accordeonContainer.getElementsByClassName("wux-scroller wux-ui-is-rendered")[n].setStyle("overflow-y","hidden")},m.prototype._updateCount=function(){var e="";!1===this.options.showNodeCount?e="":(e=0,e=this._tilecollectionView&&this._tilecollectionView.treeDocument?this._tilecollectionView.treeDocument.getAllDescendants().length:this._tilecollectionGroupView&&this._tilecollectionGroupView.treeDocument?this._tilecollectionGroupView.treeDocument.getAllDescendants().length:this._dataGridView.treeDocument?this._dataGridView.treeDocument.getAllDescendants().length:0),this._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:this.currentView}),this._toolbarChannel.publish({event:"enox-collection-toolbar-items-count-update",data:e}),this.checkNoDataFoundMessage()},m.prototype._updateCountForAccordeon=function(){var e=this,t="";if(!1===e.options.showNodeCount)t="";else{t=0;var o=Object.keys(this._tilecollectionGroupViewCollection);o.length>0&&o.forEach(function(o){e._tilecollectionGroupViewCollection[o]&&(t+=e._tilecollectionGroupViewCollection[o].treeDocument.getAllDescendants())})}this._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING}),this._toolbarChannel.publish({event:"enox-collection-toolbar-items-count-update",data:t}),this.checkNoDataFoundMessage()},m.prototype.addExpander=function(e){var t=new p.Element("div",{styles:{height:"100%"}}),o=e.container.querySelector(".sharingcollectionview-content-container");o.style.height=e.expander.height?e.expander.height:"250px",this._expander=new WUXExpander({style:e.expander.style?e.expander.style:"simple",header:e.expander.expanderHeader?e.expander.expanderHeader:"",body:o,allowUnsafeHTMLHeader:!1,expandedFlag:!!e.expander.expandedFlag&&e.expander.expandedFlag}).inject(t),t.inject(e.container)},m.prototype.checkNoDataFoundMessage=function(){if(this._dataGridView.treeDocument){var e=null;if(e=null==widget.body?null:widget.getElement('[id="no-object-found-"]'),0!==this._dataGridView.treeDocument.getAllDescendants().length)e&&e.remove();else if((!e||e.parentNode!==this.viewContainer)&&"Grid View"!==this.currentView){this._noObjectAvailableDiv=p.createElement("div",{class:"fonticon fonticon-forward"}),this.viewContainer.style.textAlign="center",this._noObjectAvailableDiv.setStyle("font-size","72px"),this._noObjectAvailableDiv.setStyle("color","#b4b6ba"),this._noObjectAvailableDiv.setStyle("text-align","center"),this._notSharedDiv=p.createElement("div",{text:p.i18n("NotShared")}),this._notSharedDiv.setStyle("font-size","18px"),this._notSharedDiv.setStyle("color","#b4b6ba"),this._notSharedDiv.setStyle("text-align","center"),this.viewContainer.innerHTML="",this.viewContainer.appendChild(this._noObjectAvailableDiv),this.viewContainer.appendChild(this._notSharedDiv);var t=this;let e=document.querySelector(".EP_tab_sharing").clientHeight;e<130?(this._noObjectAvailableDiv.setStyle("display","none"),this._notSharedDiv.setStyle("padding","30px"),this._notSharedDiv.setStyle("font-size","24px"),e<90&&this._notSharedDiv.setStyle("display","none")):(this._noObjectAvailableDiv.setStyle("display","block"),this._notSharedDiv.setStyle("font-size","18px"),this._notSharedDiv.setStyle("padding","0px"),this._notSharedDiv.setStyle("text-align","center"),e<90?this._notSharedDiv.setStyle("display","none"):this._notSharedDiv.setStyle("display","block")),window.onresize=function(){let e=document.querySelector(".EP_tab_sharing").clientHeight;e<130?(t._noObjectAvailableDiv.setStyle("display","none"),t._notSharedDiv.setStyle("padding","30px"),t._notSharedDiv.setStyle("font-size","24px"),e<90&&t._notSharedDiv.setStyle("display","none")):(t._noObjectAvailableDiv.setStyle("display","block"),t._notSharedDiv.setStyle("font-size","18px"),t._notSharedDiv.setStyle("padding","0px"),t._notSharedDiv.setStyle("text-align","center"),e<90?t._notSharedDiv.setStyle("display","none"):t._notSharedDiv.setStyle("display","block"))}}}},m.prototype.checkIfExceedsDeleteLimit=function(e){return!1},m.prototype.onChangeViewToListView=function(){this._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:a.TYPE_LARGE_RESPONSIVE_TILE_STRING})},m.prototype.onChangeViewToGroupView=function(){var e=this.viewContainer.querySelector(".sharing-group-view");e&&e.setStyle("disable","true"),this._groupedGridModel?this.setGroupedModel(this._groupedGridModel):this._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING})},m.prototype.onChangeViewToSortAscListView=function(){this._toolbarChannel.publish({event:"enox-collection-toolbar-sort-activated",data:{sortAttribute:"label",sortOrder:"asc"}})},m.prototype.onChangeViewToSortDescListView=function(){this._toolbarChannel.publish({event:"enox-collection-toolbar-sort-activated",data:{sortAttribute:"label",sortOrder:"desc"}})},m.prototype.onDelete=function(){Array.prototype.extend=function(e){e&&Array.isArray(e)&&e.forEach(function(e){this.push(e)},this)};var e=[],t=this;if(this.currentView===a.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING){var o=Object.keys(this._tilecollectionGroupViewCollection),i=[];o.forEach(function(o){t._groupedGridModel[o]&&(i=t._tilecollectionGroupViewCollection[o].treeDocument.getSelectedNodes(),e.extend(i))})}else e=this._tilecollectionView.treeDocument.getSelectedNodes();var n={operation:"delete",selectedItems:e};this.collectionViewEvents.publish({event:"enox-collection-delete-operation",data:n})},m.prototype.updateView=function(){this._toolbarChannel.publish({event:"enox-collection-toolbar-switch-view-activated",data:this.currentView})},m.prototype.onShare=function(){this.collectionViewEvents.publish({event:"enox-collection-share-operation",data:{}})},m.prototype.onFilter=function(){this.collectionViewEvents.publish({event:"enox-collection-filter-operation",data:this.currentView})},m}),define("DS/ENOSharingWebUI/model/SharingAccordionModel",["DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/TreeModel/DataModelSet","DS/WebappsUtils/WebappsUtils","DS/ENOSharingWebUI/utils/ShareModelServices","i18n!DS/ENOSharingWebUI/assets/nls/SharingNLS"],function(e,t,o,i,n,r){"use strict";let a={useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},id:"sharing-widget",class:"sharing-widget",selection:{nodes:!0,rowHeaders:!1,columnHeaders:!1,toggle:!0,canMultiSelect:!0},onLoadGroupBy:function(){this.ungroupRoots(),this.groupRoots({propertiesToGroup:["logicalRights"]})},onSorting:function(e){this.prepareUpdate(),widget.setValue("sorting",e);var t="asc"===(e.sortOrder||"").toLowerCase()?1:-1;this._getTrueRoot().sortChildren({isRecursive:!0,sortFunction:function(o,i){return t*(o.getSortableAttributeValue(e.sortAttribute)<i.getSortableAttributeValue(e.sortAttribute)?-1:1)}}),this.pushUpdate()},reApplyUserCurrentViewOptions:function(){try{var e=widget.getValue("sorting");e&&this.onSorting(e)}catch(e){console.error("something went wrong when re-applying user view options")}},reApplyGroups:function(){try{this.onLoadGroupBy()}catch(e){console.error("something went wrong when re-applying user view options")}}};return{getModel:(i,r,s)=>(function(i,r,s){let l=new o,c=new e(a);c.dataModelSet=l,c.prepareUpdate();let d,u=[];return d=i.response,u=n._createModels(d,r,s),d.forEach(function(e){e.hasOwnProperty("objectID")&&(n._createModels(e,r,s),Object.keys(r).forEach(function(e){let o=r[e];if(0!=o.length){var i=new t({id:e,label:e+" ( "+o.length+" ) ",subLabel:e});i.NODE_SOURCE=1,c.addChild(i),o.forEach(function(e){var o=new t(e);i.addChild(o)})}}))}),c.pushUpdate(),c})(i,r,s),destroy:()=>{model=new e({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!1}})}}}),define("DS/ENOSharingWebUI/views/SharingCollectionView",["UWA/Class","DS/Tree/TreeNodeModel","DS/TreeModel/DataModelSet","DS/Tree/TreeDocument","DS/ENOSharingWebUI/views/SharingCollectionViewUI"],function(e,t,o,i,n){"use strict";var r=function(){this._xsourcingCollectionViewUI=new n};return r.prototype.init=function(e){this.options=e,this._data=this.options.data,this._dataModelSet=new o,this._model=new i({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},selection:{toggle:!0,canMultiSelect:!0},dataModelSet:this._dataModelSet}),this._gridModel=new i({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},selection:{toggle:!0,canMultiSelect:!0}}),this._groupedGridModel={},this._groupedModel={},this._groupedDataModelSet={},e.gridModel=this._gridModel,e.groupedGridModel=this._groupedGridModel,e.model=this._model;var t=this;if(e.groupHeaders&&Array.isArray(e.groupHeaders)){e.groupHeaders.length;this._groupHeaders=e.groupHeaders,e.groupHeaders.forEach(function(e){t._groupedGridModel[e]=new i,t._groupedDataModelSet[e]=new o,t._groupedModel[e]=new i({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},selection:{toggle:!0,canMultiSelect:!0},dataModelSet:t._groupedDataModelSet[e]})})}this.collectionViewEvents=e.collectionViewEvents,this.collectionViewEvents||(this.collectionViewEvents=e._mediator.createNewChannel()),e.collectionViewEvents=this.collectionViewEvents,this._xsourcingCollectionViewUI.init(e),this._setData(this.options.data),this.subscribeToEvents(e)},r.prototype.subscribeToEvents=function(e){var o=this;this.options.collectionViewEvents.subscribe({event:"add-model"},function(e){e.contextualMenu=[""],e.tooltip&&(e.customTooltip=o._getCustomToolTip(e.tooltip));var i=new t(e);o._gridModel.addRoot(i,0),o._xsourcingCollectionViewUI._updateCount()}),this.options.applicationChannel&&(this.options.applicationChannel.subscribe({event:"search-in-current-dashboard"},function(e){o._handlefilterData(e)}),this.options.applicationChannel.subscribe({event:"group-by-rights"},function(e){o._handlefilterDataForRights(e)})),e.rowSelectCallback&&this._gridModel.addEventListener("select",function(t){e.rowSelectCallback(t.data.nodeModel.options.grid)}),e.rowUnSelectCallback&&this._gridModel.addEventListener("unselect",function(t){e.rowUnSelectCallback(t.data.nodeModel.options.grid)}),e.collectionViewEvents.subscribe({event:"filter-on-search"},function(e){o._handlefilterData(e)}),e.collectionViewEvents.subscribe({event:"d6w-tagger-filter-action"},function(e){o._handleTaggerFilter(e)})},r.prototype._setData=function(e){var o,n=this;this._model.empty(),this._gridModel.empty(),(o=Object.keys(this._groupedGridModel)).forEach(function(e){n._groupedGridModel[e].empty()}),this._model.prepareUpdate(),this._gridModel.prepareUpdate(),o.forEach(function(e){n._groupedGridModel[e].prepareUpdate()});for(var r={},a=0;a<e.length;a++){var s=e[a];s.contextualMenu&&(s.onContextMenuBuildCallback=function(e){var t=this,o=[];if(e&&e.length)for(var i=0;i<e.length;i++){var r=e[i];o.push({type:"PushItem",title:r,icon:"",action:{callback:function(e){var o=[];o.push(t);var i={operation:"ctxtMenu",selectedItems:o};n.options.applicationChannel.publish({event:"enox-ctxMenu-operation",data:i})}}})}return o}),s.tooltip&&(s.customTooltip=n._getCustomToolTip(s.tooltip)),t.prototype.getSortableAttributeValue=function(e){for(var t=this.getSortableAttributes(),o=0;o<t.length;o++)if(t[o].name===e)return t[o].value},t.prototype.getSortableAttributes=function(){var e=[];return this.options?(e.push({name:"label",value:this.options.label}),e.push({name:"logical",value:this.options.logical}),e.push({name:"subLabel",value:this.options.subLabel}),e):(console.error(" you need to call basic method before !"),e)};var l=t.createTreeNodeDataModel(this._dataModelSet,e[a]),c="";if(c=e[a].hasOwnProperty("access")?e[a].access:e[a].subLabel,this._groupedDataModelSet[c]&&this._groupedModel[c]){var d=t.createTreeNodeDataModel(this._groupedDataModelSet[c],e[a]);this._groupedModel[c].addChild(d)}this._model.addChild(l);var u=new t(e[a]);if(this._gridModel.addRoot(l),r.hasOwnProperty(c))r[c].push(e[a]);else{var h=[];h.push(e[a]),r[c]=h}this._groupedGridModel.hasOwnProperty(c)?this._groupedGridModel[c].addRoot(u):(this._groupedGridModel[c]=new i({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},selection:{nodes:!0,toggle:!0,canMultiSelect:!0}}),this._groupedGridModel[c].addRoot(u))}this._gridModel.pushUpdate(),this._model.pushUpdate(),(o=Object.keys(this._groupedGridModel)).forEach(function(e){n._groupedGridModel[e].pushUpdate()}),this._xsourcingCollectionViewUI.hasOwnProperty("currentViewAtTimeOfShareLaunch")&&null!=this._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch?("Group Tile View"==this._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch?(this._xsourcingCollectionViewUI.setModel(this._gridModel),this._xsourcingCollectionViewUI.setGroupedModel(this._groupedGridModel)):this._xsourcingCollectionViewUI.setModel(this._gridModel),this._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch=void 0):""==this._xsourcingCollectionViewUI.options.lastCurrentView||"Group Tile View"===this._xsourcingCollectionViewUI.options.lastCurrentView?(this._xsourcingCollectionViewUI.setModel(this._gridModel),this._xsourcingCollectionViewUI.setGroupedModel(this._groupedGridModel)):this._xsourcingCollectionViewUI.setModel(this._gridModel)},r.prototype._getCustomToolTip=function(e){var t="";return e.forEach(function(e){""!==e.data&&void 0!==e.data&&(""!==t&&(t+="\n"),t=t+e.label+": "+e.data)}),t},r.prototype._handleTaggerFilter=function(e){for(var o=new i,n=0;n<e.length;n++){var r=new t(e[n]);o.addRoot(r)}this._xsourcingCollectionViewUI.setModel(o)},r.prototype._handlefilterData=function(e){var t=this._gridModel,o=t.getRoots();t.prepareUpdate(),o.forEach(t=>{r.prototype._hideShowRow(e,t,this.options)}),t.pushUpdate()},r.prototype._handlefilterDataForRights=function(e){var t=this._gridModel,o=t.getRoots();t.prepareUpdate(),o.forEach(t=>{r.prototype._hideShowRowForRights(e,t,this.options)&&grouptedNodes.push(t)}),t.pushUpdate()},r.prototype._hideShowRow=function(e,t,o){if(e){var i=new RegExp(e,"i"),n=!1;if(t.options.children){t.options.children.forEach(t=>{r.prototype._hideShowRow(e,t,o)})}else{if(o.columnToSearch)o.columnToSearch.forEach(e=>{n=n||i.test(t.options.grid[e])});else Object.keys(t.options.grid).forEach(e=>{n=n||i.test(t.options.grid[e])});n?t.show():t.hide(!0)}}else if(t.options.children){t.options.children.forEach(t=>{r.prototype._hideShowRow(e,t,o)})}else t.show()},r.prototype._hideShowRowForRights=function(e,t,o){if(e){var i=new RegExp(e,"i"),n=!1;if(!t.options.children){if(o.columnToSearch)o.columnToSearch.forEach(e=>{n=n||i.test(t.options.grid[e])});else Object.keys(t.options.grid).forEach(e=>{n=n||i.test(t.options.grid[e])});return!!n}t.options.children.forEach(t=>{r.prototype._hideShowRow(e,t,o)})}else{if(!t.options.children)return!0;t.options.children.forEach(t=>{r.prototype._hideShowRow(e,t,o)})}return!1},r.prototype.handleModelUpdate=function(e){var t=this,o=[],n=[];e&&Array.isArray(e)&&e.forEach(function(e){e.hasOwnProperty("logical")&&("Empty"===e.logical?o.push(e):n.push(e))});t._gridModel,t._gridModel.getRoots();var r=Object.keys(t._groupedGridModel);t._gridModel.prepareUpdate(),o.forEach(function(e){var o=e.id;let i=[];t._gridModel.prepareUpdate(),i=t._gridModel.search({match:function(e){if(o&&-1!==e.nodeModel.options.id.indexOf(o))return!0}});for(var n=0;n<i.length;n++)t._gridModel.removeRoot(i[n]),t._gridModel.pushUpdate();t._gridModel.pushUpdate(),i=[],r.forEach(function(e){t._groupedGridModel[e].prepareUpdate(),i=t._groupedGridModel[e].search({match:function(e){if(o&&-1!==e.nodeModel.options.id.indexOf(o))return!0}});for(var n=0;n<i.length;n++)t._groupedGridModel[e].removeRoot(i[n]);t._groupedGridModel[e].pushUpdate()})}),n.forEach(function(e){var o=e.id;let n=[];var r=Object.keys(t._groupedGridModel);function a(e){var t=e;switch(e){case"Reader":t="Can Read";break;case"Author":t="Can Edit";break;case"Viewer":t="Can View";break;case"Owner":t="Can Manage";break;case"Can Read":t="Reader";break;case"Can Edit":t="Author";break;case"Can View":t="Viewer";break;case"Can Manage":t="Owner";break;case"CanAddRemoveAttachments":t="Can Add / Remove Attachments";break;case"Can Add / Remove Attachments":t="CanAddRemoveAttachments";break;case"Leader":t="Leader";break;case"Project Lead":t="Project Lead";break;case"Project Member":t="Project Member"}return t}t._gridModel.prepareUpdate(),n=t._gridModel.search({match:function(e){if(o&&-1!==e.nodeModel.options.id.indexOf(o))return!0}});for(var s=0;s<n.length;s++)t._gridModel.removeRoot(n[s]),t._gridModel.pushUpdate(),e.hasOwnProperty("logical")&&(n[s].__dataModelSet._listOfDataModels[n[s].__dataModelID]._data.logical=e.logical,n[s].__dataModelSet._listOfDataModels[n[s].__dataModelID]._data.subLabel=a(e.logical),n[s].options.logical=e.logical,n[s].options.subLabel=a(e.logical)),e.hasOwnProperty("inheritedPath")&&(n[s].__dataModelSet._listOfDataModels[n[s].__dataModelID]._data.inheritedPath=e.inheritedPath,n[s].options.inheritedPath=e.inheritedPath),e.hasOwnProperty("rights")&&(n[s].__dataModelSet._listOfDataModels[n[s].__dataModelID]._data.rights=e.rights,n[s].options.rights=e.rights),t._gridModel.addRoot(n[s]),t._gridModel.pushUpdate();t._gridModel.pushUpdate(),n=[];var l=[],c="",d=!0;r.forEach(function(r){if(d){0!=(n=t._groupedGridModel[r].search({match:function(e){if(o&&-1!==e.nodeModel.options.id.indexOf(o))return!0}})).length&&(l=n);for(var s="",u=a(e.logical),h=0;h<n.length;h++)if(t._groupedGridModel[r].prepareUpdate(),s=a(s=n[h].options.logical),e.hasOwnProperty("logical")&&(n[h].options.logical=e.logical),e.hasOwnProperty("inheritedPath")&&(n[h].options.inheritedPath=e.inheritedPath),e.hasOwnProperty("rights")&&(n[h].options.rights=e.rights),r===s){if(t._groupedGridModel[r].removeRoot(n[h]),t._groupedGridModel[r].pushUpdate(),0===t._groupedGridModel[r]._numberOfNodesInDocument){for(var p=Object.keys(t._groupedGridModel),g={},_=0;_<p.length;_++)p[_]!=r&&(g[p[_]]=t._groupedGridModel[p[_]]);t._groupedGridModel=g}c=s,d=!1}for(h=0;h<l.length;h++){p=Object.keys(t._groupedGridModel);var w=!1;for(_=0;_<p.length;_++){var b;if(p[_]===u)l[h].options.subLabel=p[_],l[h].options.contextualMenu[l[h].options.contextualMenu.indexOf(p[_])]=c,(b={})[c]=a(c),l[h].options.menuIdObj=b,t._groupedGridModel[p[_]].addRoot(l[h]),t._groupedGridModel[p[_]].pushUpdate(),w=!0}if(0==w)l[h].options.subLabel=u,l[h].options.contextualMenu[l[h].options.contextualMenu.indexOf(u)]=c,(b={})[c]=a(c),l[h].options.menuIdObj=b,t._groupedGridModel[u]=new i({useAsyncPreExpand:!0,shouldBeSelected:function(e){return!0},selection:{toggle:!0,canMultiSelect:!0},dataModelSet:t._groupedDataModelSet[u]}),t._groupedGridModel[u].addRoot(l[h]),t._groupedGridModel[u].pushUpdate(),w=!0}}})}),"Group Tile View"===t._xsourcingCollectionViewUI.currentView?(t._xsourcingCollectionViewUI.setModel(t._gridModel),t._xsourcingCollectionViewUI.setGroupedModel(t._groupedGridModel)):t._xsourcingCollectionViewUI.setModel(t._gridModel)},r}),define("DS/ENOSharingWebUI/ENOSharingWebUI",["DS/EditPropWidget/facets/Common/FacetsBase","UWA/Core","UWA/Class/Model","UWA/Widget","DS/ENOSharingWebUI/controller/SharingWidgetController","DS/LifecycleServices/LifecycleServicesSettings","UWA/Controls/ThemedScroller","DS/ENOSharingWebUI/utils/ShareModelServices","DS/Tree/TreeDocument","DS/EditPropWidget/constants/EditPropConstants","WebappsUtils/WebappsUtils","DS/CoreEvents/ModelEvents","DS/ApplicationFrame/Command","DS/ApplicationFrame/CommandsManager","DS/ApplicationFrame/CommandFactory","DS/ENOSharingWebUI/views/SharingEmptyView","DS/ENOSharingWebUI/utils/SharingViewConstants","DS/PlatformAPI/PlatformAPI","DS/Tree/TreeNodeModel","DS/Controls/ResponsiveTileView","DS/WidgetServices/WidgetServices","DS/ENOSharingWebUI/model/SharingAccordionModel","DS/ENOSharingWebUI/views/SharingCollectionView","DS/ENOSharingWebUI/views/Mediator","i18n!DS/ENOSharingWebUI/assets/nls/SharingNLS"],function(e,t,o,i,n,r,a,s,l,c,d,u,h,p,g,_,w,b,m,v,f,V,S,y,C){"use strict";var I=new u;return e.extend({defaultOptions:{className:"sharingWidget"},_eventListeners:[],init:function(e){this._parent(e),this.lastCurrentView="";var t=this;t.getModel();t._initUI(),t._emptyView=null,t._viewChannel=(new y).createNewChannel(),t._controller=new n({events:{fetchedOwnershipData:function(e){f.get3DSwymUrlAsync({onComplete:function(o){null==o&&(o=""),e.response[0].swymURL=o,t._buildAccordionModel(e)}})},refreshViewOnUpdate:function(e){t.onRefresh()},fetchedAccessList:function(e){t._buildAccessList(e)},fetchedAttributeList:function(e){t._buildAttributeList(e)}}}),b.subscribe("ENOLC_RIGHTS_UPDATED",function(e){var o=e.data.paths;t._updateTree(o)})},_initUI:function(){var e=this.elements.container=UWA.createElement("div",{name:"sharing-widget",class:"sharingWidget"});this.elements.content=UWA.createElement("div",{class:"content_Sharing"}).inject(e);this.elements.content.setStyle("width","100%"),this.elements.content.setStyle("height","100%"),(this.elements.contentScroll=UWA.createElement("div",{class:"contentScroll_Sharing",width:"98%",height:"100%"})).inject(this.elements.content)},_initDataModels:function(){this._modelArray=new Array,this._rightsToNodeOptionsMap=new Object,this._idToNodeOptionsMap=new Object,this._collection=null,this._accessListToNlsValues=null,this._TreeDocument=null,this._AccordionModelView=null,this.accordeonContainer=null,this._ListOfTileViewCollection=[],this._sortedTileLayout=null,this._sortedTileLayoutDiv=null,this._searchView=null,this._currentModelId=null,this.searchData={},this.searchTextBox=null,this._scroller=(new a).inject(this.elements.content),this._scroller.getContent().setStyle("height","100%"),this._scrollerContainer=UWA.createElement("div",{id:"sharingScrollerContainer",class:"sharingScrollerContainer"}),this._scroller.getInnerElement().setContent(this._scrollerContainer),this._currentView=w.TYPE_LARGE_RESPONSIVE_TILE,this.elements.contentScroll.inject(this.elements.content),this._AccordionModel=null,this.hasOwnProperty("odtName")&&"ShareLaunch"===this.odtName||V.destroy(),this.subscribeToEvents(),self._emptyView=null},_emptyDataModels:function(){null!=this._modelArray&&delete this._modelArray,this._groups&&delete this._groups,this._rightsToNodeOptionsMap&&delete this._rightsToNodeOptionsMap,this._rightsToTreeDocumentMap&&delete this._rightsToTreeDocumentMap,this._idToRightsMap&&delete this._idToRightsMap,this._idToNodeOptionsMap&&delete this._idToNodeOptionsMap,this._idToTreeNodeMap&&delete this._idToTreeNodeMap,this.rightsToAccordeonIndex&&delete this._rightsToAccordeonIndex,this._AccordionModelView&&(delete this._AccordionModelView,this._AccordionModelView=null),this._TreeDocument&&(this._TreeDocument.empty(),delete this._TreeDocument,this._TreeDocument=null),this._ListOfTileViewCollection=[],this.searchData={},this.searchTextBox=null,this._emptyView=null,self._UWAModelArray&&(self._UWAModelArray=[]),this._collection=null,this._accessListToNlsValues=null},_buildAttributeList:function(e){null!=e&&null!=e&&(this._isTypeSupportedToCommand=!0,e.hasOwnProperty("completionData")&&0==e.completionData.validList.length&&(this._isTypeSupportedToCommand=!1),this._attributeList={},this._attributeList=s._createAttributeListFromResponse(this.currentModelId,e),this._buildView({idList:[{id:this.currentModelId}]}))},_buildAccessList:function(e){null!=e&&null!=e&&(this.showLoader(),this._accessListToNlsValues={},this._accessListToNlsValues=s._createAccessListFromResponse(this.currentModelId,e),this._NlsValuesToaccessList=s._createNLSAccessListFromResponse(this.currentModelId,e))},_buildView:function(e){this._getRights(e)},_getRights:function(e){var t=[];if(e.hasOwnProperty("idList")){t=[];for(var o=0;o<e.idList.length;o++)t.push({objectID:e.idList[o].id});this._controller.getAccess(t,this._modelArray)}},_getAttributesOfSelectedItems:function(e){var t=[];if(e.hasOwnProperty("idList")){t=[];for(var o=0;o<e.idList.length;o++)t.push(e.idList[o].id);this._controller.getListOfAttributesForObject(t,[])}},_getAccessRightsToNlsList:function(e){var t=[];if(e.hasOwnProperty("idList")){t=[];for(var o=0;o<e.idList.length;o++)t.push({objectID:e.idList[o].id});this._controller.getListOfLogicalRightsForObject(t,[])}},destroyComponent:function(){UWA.is(this.destroy,"function")&&this.destroy()},onRefresh:function(){this.updateFacet()},onAction:function(e){},isActionAvailable:function(e){return!0},hide:function(){this._isVisible=!1,this.elements.container.hide()},show:function(){this._isVisible=!0,this.elements.container.show()},updateFacet:function(){null!=this.sharingCollectionView&&(this.lastCurrentView=this.sharingCollectionView._xsourcingCollectionViewUI.currentView);var e=this.getModel();if(e){var t=this;if(t.elements.contentScroll.empty(),window.__karma__&&(!t.hasOwnProperty("odtName")||"ShareLaunch"!==t.odtName)){r.init();r.setOptions({platform_services:[{"3DSpace":"odtUrl/3DSpace",platformId:"OnPremise"}],wintop:!1}),r.setTenant("OnPremise")}r.app_initialization(function(){var o=e.getTenant(),i=(e.getAllAttributes(),e.get("objectId"));t.currentModelId!==i?(t.currentModelId=i,t.elements.content.empty(),t._emptyDataModels()):t.elements.content.empty();var n=e.get("type"),a=e.get("_DS_ATTR_type"),s=void 0;window.__karma__&&(o="OnPremise"),t._3DSpaceURL=r.get3DSpaceBaseUrl(o),t._3DSWYMURL=r.getPlatformBaseUrl("3DSwym",o),null!=a&&(s=null!=a.valueDB?a.valueDB:a),null==s&&(s=null!=n?n.valueDB:t.cacheType),t.cacheType=s,widget.setValue("x3dPlatformId",o);var l={idList:[{id:t.currentModelId,type:a}]};t._initDataModels(),t._getAttributesOfSelectedItems(l),setTimeout(function(){t._getAccessRightsToNlsList(l)},100)})}else console.warn("No Model")},_buildAccordionModel:function(e){var t=this;if(null==e||null==e)return;t._rightsToNodeOptionsMap={},t._AccordionModel=V.getModel(e,t._rightsToNodeOptionsMap,t._accessListToNlsValues);var o=new S,i={};i.container=t.elements.container,i.sort=[{id:"title",text:"rights",type:"string"}];var n=[];let r=Object.keys(t._rightsToNodeOptionsMap);r&&r.forEach(function(e){let o=t._rightsToNodeOptionsMap[e];if(null!=o&&Array.isArray(o))for(var i=0;i<o.length;i++){if(o[i].inheritedPath.length>0){if(!o[i].hasOwnProperty("access")){o[i].contextualMenu=[];var r=t._attributeList[o[i].objectID].name;o[i].contextualMenu[0]=UWA.i18n("InheritedRightsCannotBeChangedHere{0}").format(r),o[i].access=o[i].subLabel,o[i].subLabel="Inherited ";for(var a=0;a<o[i].inheritedPath.length;a++){var s=o[i].inheritedPath[a].inheritedAccess.logical,l=t._accessListToNlsValues[s];void 0===l&&(l=s),o[i].subLabel+=l+" access from "+o[i].inheritedPath[a].inheritedFrom.objectTNR+"\n"}}}else if(null!=t._attributeList&&t._attributeList.hasOwnProperty(o[i].objectID)){var c=t._attributeList[o[i].objectID].owner+"_PRJ";o[i].id===c&&t._attributeList[o[i].objectID].type.contains("Workspace")&&(o[i].contextualMenu=[],o[i].access=o[i].subLabel,o[i].subLabel+="\n\n"+o[i].personFullName+" is already the main owner of this object.")}null!=t._attributeList&&t._attributeList.hasOwnProperty(o[i].objectID)&&(o[i].type=t._attributeList[o[i].objectID].type,o[i].isAggrShape="3DPart"==t._attributeList[o[i].objectID].PLMEntity&&"3DShape"==t._attributeList[o[i].objectID].type,o[i].isAggrShape&&(o[i].contextualMenu=[])),0==t._isTypeSupportedToCommand&&(o[i].contextualMenu=[]),n.indexOf(o[i])<0&&n.push(o[i])}}),i.data=n,i.lastCurrentView=t.lastCurrentView,i.applicationChannelEvents=[],i.applicationChannelEvents.push({eventName:"add-model"}),i.views=[w.TYPE_LARGE_RESPONSIVE_TILE_STRING,w.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING,w.TYPE_LARGE_RESPONSIVE_TILE_SORTED_ASC_STRING,w.TYPE_LARGE_RESPONSIVE_TILE_SORTED_DESC_STRING],i.currentView=w.TYPE_LARGE_RESPONSIVE_TILE_GROUP_STRING,i._mediator=new y;var a=r;i.groupHeaders=a,i.groupingOptions={dataIndexesToGroup:["logicalRights"]},i.accessListToNlsValues=t._NlsValuesToaccessList,t.hasOwnProperty("sharingCollectionView")&&t.sharingCollectionView._xsourcingCollectionViewUI.hasOwnProperty("currentViewAtTimeOfShareLaunch")&&null!=t.sharingCollectionView._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch&&(o._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch=t.sharingCollectionView._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch),o.init(i),t.sharingCollectionView=o,o.collectionViewEvents.subscribe({event:"enox-collection-share-operation"},function(e){t._addNewMembers()}),o.collectionViewEvents.subscribe({event:"enox-collection-filter-operation"},function(e){if(t.elements.container.getElementsByClassName("sharingcollectionview-filter-container")[0].isHidden()){t.elements.container.getElementsByClassName("sharingcollectionview-filter-container")[0].show(),w.TYPE_LARGE_RESPONSIVE_TILE_STRING===e&&t.elements.container.getElementsByClassName("wux-layouts-collectionview wux-controls-abstract wux-layouts-responsivecollectionview wux-layout-largetilecollectionView")[0].setStyle("top","125px"),t.sharingCollectionView._xsourcingCollectionViewUI._canReadCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._canEditCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._canViewCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._canManageCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._canAddRemoveAttachmentsCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._showUsersWithInheritedPermissionCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._readCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._addCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._basicCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._readWriteCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._removeCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._addRemoveCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._fullCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._leaderCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._projectLeadCBGroup.hide(),t.sharingCollectionView._xsourcingCollectionViewUI._projectMemberCBGroup.hide(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.Reader)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._canReadCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.Author)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._canEditCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.Viewer)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._canViewCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.Owner)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._canManageCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.CanAddRemoveAttachments)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._canAddRemoveAttachmentsCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.Read)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._readCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.Add)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._addCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.Basic)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._basicCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.ReadWrite)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._readWriteCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.remove)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._removeCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.AddRemove)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._addRemoveCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.Full)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._fullCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues.Leader)>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._leaderCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues["Project Lead"])>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._projectLeadCBGroup.show(),t.sharingCollectionView._groupHeaders.indexOf(t._accessListToNlsValues["Project Member"])>=0&&t.sharingCollectionView._xsourcingCollectionViewUI._projectMemberCBGroup.show();var o=!1;if(t.sharingCollectionView&&t.sharingCollectionView._data&&t.sharingCollectionView._data.length>0)for(var i=0;i<t.sharingCollectionView._data.length;i++)if(t.sharingCollectionView._data[i].inheritedPath.length>0){o=!0;break}o?t.sharingCollectionView._xsourcingCollectionViewUI._showUsersWithInheritedPermissionCBGroup.show():t.sharingCollectionView._xsourcingCollectionViewUI._showUsersWithInheritedPermissionCBGroup.hide()}else t.elements.container.getElementsByClassName("sharingcollectionview-filter-container")[0].hide(),w.TYPE_LARGE_RESPONSIVE_TILE_STRING===e&&t.elements.container.getElementsByClassName("wux-layouts-collectionview wux-controls-abstract wux-layouts-responsivecollectionview wux-layout-largetilecollectionView")[0].setStyle("top","50px")}),o.collectionViewEvents.subscribe({event:"xsourcing-collectionview-cell-dblclick"},function(e){}),o.collectionViewEvents.subscribe({event:"xsourcing-collectionview-selection-updated"},function(e){e.selectedItems.length>0?o.collectionViewEvents.publish({event:"xsourcing-collectionview-enable-toolbar-button",data:"delete"}):(o.collectionViewEvents.publish({event:"xsourcing-collectionview-disable-toolbar-button",data:"delete"}),t._viewChannel.publish({event:"xsourcing-collectionview-unselected-object-id",data:{selectedObject:null}}))}),o.collectionViewEvents.subscribe({event:"enox-collection-delete-operation"},function(e){e.selectedItems&&Array.isArray(e.selectedItems)&&t._controller.removeAccess(e.selectedItems)}),o.collectionViewEvents.subscribe({event:"enox-ctxMenu-operation-delete"},function(e){e.selectedItems&&Array.isArray(e.selectedItems)&&t._controller.removeAccess(e.selectedItems)}),o.collectionViewEvents.subscribe({event:"enox-ctxMenu-operation-change-access"},function(e){e&&t._controller.updateAccess(e)}),o.collectionViewEvents.subscribe({event:"xsourcing-collectionview-updateModel"},function(e){e&&Array.isArray(e)&&o.handleModelUpdate(e)}),t.hideLoader()},_addNewMembers:function(){var e=this.getModel();p.getCommand("ActionBar_ShareCmd");this.sharingCollectionView._xsourcingCollectionViewUI.currentViewAtTimeOfShareLaunch=this.sharingCollectionView._xsourcingCollectionViewUI.currentView;var t=s._createModelForAddMember(e),o=this,i="DS/ENOCollabSharingCmds/commands/ShareCmd/ActionBar_ShareCmd".replace(/\./g,"/");require(["DS/ApplicationFrame/CommandFactory",i],function(e,i){var n=e._createCommand(i,{ID:"ActionBar_ShareCmd"});n.options={},n.options.context=t,n.options.sharingWebUI=o,n.beginExecute(),n.execute(),n.endExecute()})},subscribeToEvents:function(){var e=this;I.subscribe({event:"sharing-delete-access"},function(t){if(e._controller&&t){var o=[];o.push(t),e._controller.removeAccess(o)}}),I.subscribe({event:"onSaveInCache"},function(e){})},getNodesByRights:function(e){return this._TreeDocument.search({match:function(t){if(e&&-1!==t.nodeModel.options.subLabel.indexOf(e))return!0}})}})});