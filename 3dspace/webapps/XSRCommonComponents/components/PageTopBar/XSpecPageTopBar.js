define("DS/XSRCommonComponents/components/PageTopBar/XSpecPageTopBar",["UWA/Core","DS/Controls/TooltipModel","DS/ResizeSensor/js/ResizeSensor","DS/ENOXPageToolBar/js/PageToolBar","DS/XSRCommonComponents/utils/Constants","DS/XSRCommonComponents/utils/RequestUtil","css!DS/XSRCommonComponents/components/PageTopBar/XSpecPageTopBar.css"],function(e,t,i,n,o,s){"use strict";var a=function(){};return a.prototype.initialize=function(t){var i=t.appCore;this.modelEvents=i?i.basicModelEvents:void 0,this.triptychManager=i?i.triptychManager:void 0,this.appCore=i;var o=t.withBackButton,s=t.onclikBackCallback,a=t.container,r={withInformationButton:t.withInformationButton,withWelcomePanelButton:t.withWelcomePanelButton,isWelcomePanelCollapsed:t.isWelcomePanelCollapsed,modelEvents:this.modelEvents},c=t.withWelcomePanelButton?"xsr-page-top-bar-wrapper":"xsr-page-top-bar-wrapper xsr-page-top-bar-nocollapse";this.target=e.createElement("div",{class:c}).inject(a),this._pageToolBar=new n(r),this._pageToolBar.render().inject(this.target),o&&(this.backButton=e.createElement("div",{class:"xsr-page-top-bar-back-command wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-left"}).inject(this._pageToolBar.getBodyContent()),this.backButton.addEventListener("click",function(){s()})),this.titleSection=e.createElement("div",{class:"xsr-page-top-bar-title"}).inject(this._pageToolBar.getBodyContent()),this.iconSection=e.createElement("div",{class:"xsr-page-top-bar-icons"}).inject(this._pageToolBar.getBodyContent()),this._subscribeToEvents()},a.prototype._subscribeToEvents=function(){var e=this;this.modelEvents&&(this._subscribeList=[],this._subscribeList.push(this.modelEvents.subscribe({event:o.WELCOMEPANEL_EVENT_COLLAPSE},function(){e.triptychManager&&(e.appCore.viewerNav.enabled?e.triptychManager.hideLeftPanel():e.triptychManager._collapseLeftPanel())})),this._subscribeList.push(this.modelEvents.subscribe({event:o.WELCOMEPANEL_EVENT_EXPAND},function(){e.triptychManager.getCommandId()==o.TOOLBAR_CMD_MULTIGRID&&e.triptychManager.isRightPanelVisible&&e.triptychManager.hideRightPanel();let t=s.getTouchMode()||s.isMobile();!e.triptychManager||t&&e.appCore.viewerNav.enabled||e.triptychManager._expandLeftPanel(),e.appCore.welcomePanelInstance.show()})),this._subscribeList.push(this.modelEvents.subscribe({event:"xsr-page-top-bar-set-icons"},function(t){t&&(t.container.inject(e.iconSection),t.enableResizer&&t.resizerCallback&&new i(e.target,function(){t.resizerCallback(e.target)}))})))},a.prototype.setTitle=function(e,i){this.titleSection&&(this.titleSection.innerText="");var n="";e&&(n=e),i&&(n=n.length>0?n+" - "+i:i),this.titleSection&&(this.titleSection.innerText=n),i&&(this.titleSection.tooltipInfos=new t({shortHelp:i,allowUnsafeHTMLShortHelp:!1}))},a.prototype.resetContent=function(){this.iconSection.empty(),this.titleSection.empty()},a.prototype.destroy=function(){this._subscribeList&&this.modelEvents.unsubscribeList(this._subscribeList)},a});