define("DS/XSRCommonComponents/createform/view/NewDialog",["UWA/Core","UWA/Class/View","DS/Controls/Button","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/XSRCommonComponents/utils/XSRMask","i18n!DS/XSRCommonComponents/assets/nls/XSRCommonComponents"],function(t,e,i,n,o,l,s){"use strict";return e.extend({setup:function(t){this._parentView=t,this.options=t},render:function(){return this.elements.mContainer=new t.Element("div",{class:"target-dialog-container"}),this._dialog=null,this.container=this.elements.mContainer,this.container.inject(this.options.renderTo),this._showDialog(this.options),this},closeDialog:function(){this.destroy()},destroyPrevDialog:function(){var t=document.getElementsByClassName("target-dialog-container");t.length>0&&t[0].destroy()},_showDialog:function(e){var l=new t.Element("div",{class:"xsr-dialog-immersiveframe"}).inject(this.container),a=new o;a.inject(l);var d=this,r=e.position||{at:"center",my:"center"},h=e.width?e.width:"",g=e.minWidth?e.minWidth:h,c=e.height?e.height:-1,m=e.minHeight?e.minHeight:c,u=!e.largeButtons||e.largeButtons;this._dialog=new n({title:e.Title?e.Title:"",immersiveFrame:a,position:r,resizableFlag:!0,domId:"xsr-new-dialog",modalFlag:!0,titleBarVisibleFlag:void 0===e.titleBarVisibleFlag||e.titleBarVisibleFlag,closeButtonFlag:void 0===e.closeButtonFlag||e.closeButtonFlag,width:h,minWidth:g,minHeight:m,height:c,content:e.Content?e.Content:""});var C=new i({allowUnsafeHTMLLabel:!1,touchMode:u,label:e.CancelLabel?e.CancleLabel:s.Cancel,onClick:function(t){d.dispatchEvent("EVENT_CLICK_SPEC_CANCEL"),d.closeDialog()}}),b=new i({label:e.OKLabel?e.OKLabel:s.CreateandClose,disabled:!0,allowUnsafeHTMLLabel:!1,touchMode:u,onClick:function(t){var e=t.dsModel;e.dialog,d.dispatchEvent("EVENT_CLICK_SPEC_OK")}}),_=new i({allowUnsafeHTMLLabel:!1,label:e.ApplyLabel?e.ApplyLabel:s.Create,disabled:!0,touchMode:u,onClick:function(t){d.dispatchEvent("EVENT_CLICK_SPEC_APPLY")}});return e.NoButtons?d.listenTo(d,"XSR_SHOW_DIALOG_CLOSE_BUTTON",function(t){t&&t.Close&&(C.label=s.Close,this._dialog.buttons={Ok:C},this._dialog.closeButtonFlag=!0)}):this._dialog.buttons={Cancel:C,Ok:b,Apply:_},e.RemoveApplyButton&&this._dialog.buttons.Apply.remove(),d.listenTo(d,"ENABLE_OK_BUTTON",function(t){t?(this._dialog.buttons.Ok.disabled=!1,this._dialog.buttons.Apply.disabled=!1):(this._dialog.buttons.Ok.disabled=!0,this._dialog.buttons.Apply.disabled=!0)}),d.listenTo(d,"CONTAINS_DIRTY_FIELD",function(t){void 0!==t.hasDirtyField&&t.hasDirtyField?(this._dialog.buttons.Ok.disabled=!0,this._dialog.buttons.Apply.disabled=!0):(this._dialog.buttons.Ok.disabled=!1,this._dialog.buttons.Apply.disabled=!1)}),this._dialog.addEventListener("close",function(t){d.destroy()}),this._dialog},maskOrUnMaskDialog:function(t){var e=document.getElementsByClassName("target-dialog-container");if(e&&e.length>0){var i=e[0].getElementsByClassName("wux-windows-window-maincontent")[0];i&&l.isMasked(i)?l.unmaskLoader(i):i&&l.maskLoader(i,t)}}})});