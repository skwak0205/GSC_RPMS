define("DS/XSRCommonComponents/utils/IndexServiceProvider",["UWA/Class","UWA/Promise","DS/WAFData/WAFData","DS/XSRCommonComponents/utils/RequestUtil","DS/XSRCommonComponents/utils/Constants"],function(e,t,n,s,i){"use strict";var r=["resourceid","physicalid","ds6w:label","type_icon_url","ds6w:description","ds6w:globalType","ds6w:reserved","ds6w:cadMaster","ds6wg:EnterpriseExtension.V_PartNumber","ds6wg:PLMReference.V_isLastVersion","ds6w:reservedBy","ds6w:type","ds6w:responsible","ds6w:identifier","ds6wg:MaterialUsageExtension.DeclaredQuantity","ds6wg:revision","ds6w:kind","thumbnail_2d","ds6w:status","ds6w:modified","ds6w:created"];const a=["ds6w:label","ds6w:type","physicalid","ro.plminstance.V_treeorder"];return e.extend({init:function(e){this._parent(e),this.platFormId=s.getPlatformId()},getSearchResults:function(e,i,r,a,o,d){var c=this,l=s.getSecurityContext()?s.getSecurityContext():d;return new t(function(t,s){var d=e,u={label:"Recent",version:2,order_field:"ds6w:modified",order_by:"desc",nresults:500,tenant:c.platFormId,locale:widget.lang,select_predicate:r,with_synthesis:!0,with_nls:!0,login:{"3dspace":{SecurityContext:l}},specific_source_parameter:{drive:{additional_query:' AND NOT ([policy]:"Version")'}},resourceid_in:o||void 0};u[i.key]=i.value,a&&(u.next_start=a),n.authenticatedRequest(d,{method:"POST",headers:{"content-type":"application/json",SecurityContext:l},data:JSON.stringify(u),onComplete:function(e){t(e)},onFailure:s})})},searchSpecifications:function(e,t,n,i,r){var a=s.get3DSearchURL()+"/search?tenant:"+this.platFormId;return this.getSearchResults(a,e,t,n,i,r)},recentSpecifications:function(e,t,n){var i=s.get3DSearchURL()+"/recent?tenant:"+this.platFormId;return this.getSearchResults(i,e,t,n)},fetchItemData:function(e,n){var i=this,a={label:"XSR-"+s.getloginUser().id+"-"+(new Date).getTime(),physicalid:e,select_file:["icon","thumbnail_2d"],tenant:i.platFormId,select_predicate:n&&null!=n?n:r};return new t(function(e,t){s.send3DSpaceRequest("resources/enoauthoring/fetch/v1?tenant="+i.platFormId,"POST",{type:"json",headers:{"Content-type":"application/json"},data:JSON.stringify(a)},e,t)})},expand:function(e,n,o){var d=this;i.TYPE_DOCUMENT;let c="XSR-"+s.getloginUser().id+"-"+(new Date).getTime();var l={no_type_filter_rel:["XCADBaseDependency"],expand_iter:"1",select_bo:r,select_rel:a,label:c,tenant:d.platFormId,root_path_physicalid:[e]};return new t(function(e,t){s.send3DSpaceRequest("resources/enoauthoring/expand/v1?tenant="+d.platFormId,"POST",{type:"json",headers:{"Content-type":"application/json;"},data:JSON.stringify(l)},e,t)})},searchGlobal:function(e,t,n){var i=s.get3DSearchURL()+"/search";return this.getSearchResults(i,t,e,n)}})});