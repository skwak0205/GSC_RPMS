define("DS/QualityManagerUI/GIVisualQualityCustomPresetDlg",["UWA/Core","DS/QualityManager/QMGIController","DS/WebappsUtils/WebappsUtils","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ButtonGroup","DS/Controls/Expander","DS/Controls/SpinBox","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/Slider","DS/QualityManagerUI/SliderSpinBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager"],function(e,t,i,n,s,l,a,o,r,c,p,d,h,u){"use strict";var g=!1,m=!1,y=function(e){this.options=e,this.init()};return y.prototype.init=function(){var e=this.options.frameWindow;this._webGLV6Viewer=e.getViewer(),this._immersiveFrame=e.getImmersiveFrame(),t.isInitialized||t.init(),u.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang");var i=this;u.loadResource({resourceFile:"QualityManagerUI/QualityManager"}),u.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},function(){i.mbdResources=this}),this.currentPresetMode=t.getCurrentPreset(),this.currentPreset="Custom",this.properties=this.buildProperties(),this.buildDialog(),this.initializedUIfromDB()},y.prototype.GetResString=function(e){var t="";return this.mbdResources&&(t=this.mbdResources.getKey({key:e})),t},y.prototype.buildProperties=function(){return{Global:{id:"Global"},Accumulation:{id:"Accumulation"},GlobalIllumination:{id:"GlobalIllumination"},FinalGathering:{id:"FinalGathering"},Caustics:{id:"Caustics"},RayOffset:{id:"RayOffset"},Shadows:{id:"Shadows"},Reflections:{id:"Reflections"},Bloom:{id:"Bloom"},DepthOfField:{id:"DepthOfField"},Downsampling:{id:"Downsampling"}}},y.prototype.buildDialog=function(){var e=UWA.createElement("div",{class:"wux-control-inline-container",style:{"vertical-align":"top"}});this.buildViewContent().inject(e);var t=new n({}),i=new n({});new n({});this.QualityManagerDialog=new s({title:"Raytracer Visual Quality",content:e,immersiveFrame:this._immersiveFrame,ResizableFlag:!0,width:700,height:400,buttons:{Ok:t,Cancel:i},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea,resizableFlag:!0})},y.prototype.buildViewContent=function(){var t=this,i=e.createElement("div",{class:"wux-container",style:{"vertical-align":"top"}});return t.buildRenderModeView().inject(i),t.buildGlobalPresetButtonView().inject(i),t.buildAccumulationView().inject(i),t.buildGlobalIlluminationView().inject(i),t.buildFinalGatheringView().inject(i),t.buildCausticsView().inject(i),t.buildRayOffsetView().inject(i),t.buildShadowsView().inject(i),t.buildReflectionsView().inject(i),t.buildBloomView().inject(i),t.buildDepthOfFieldView().inject(i),t.buildDownsamplingView().inject(i),i},y.prototype.buildRenderModeView=function(){var e=this,t=new UWA.Element("div",{class:"wux-control-inline-container",style:{"vertical-align":"top"}});return new UWA.Element("div",{class:"wux-control-inline-container",text:"Render Mode:"}).inject(t).setStyles({width:"80px"}),e.staticButton=new n({emphasize:"primary",label:"Static",value:"Static"}).inject(t),e.batchButton=new n({emphasize:"primary",label:"Batch",value:"Batch"}).inject(t),e.addEventListenerRenderMode(e.staticButton,this.properties),e.addEventListenerRenderMode(e.batchButton,this.properties),t},y.prototype.addEventListenerRenderMode=function(e,i){var n=this;e.addEventListener("buttonclick",function(){n.currentPresetMode=e.label,t.setCurrentPreset(n.currentPresetMode),n.updateRenderButtonUI(n.currentPresetMode),n.updateGlobalPreset("Standard")})},y.prototype.buildGlobalPresetButtonView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",width:"450px",left:"250px"});var i=e.getPresetButtons().inject(t);return new UWA.Element("br").inject(t),e.properties.Global.presetButtonGroup=i,i.addEventListener("buttonclick",function(t){var n=i.getButtonFromValue(t.dsModel.value.toString());e.currentPreset=n.recId,e.updateGlobalPreset(e.currentPreset)}),t},y.prototype.buildAccumulationView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"});e.properties.Accumulation={};var n=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("MaxSamplePerPixelLabel").Text}).inject(i);n.setStyles({width:"290px",display:"inline-block"});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),l=new d({minValue:1,maxValue:1048576,initialValue:0,sliderMinValue:0,sliderMaxValue:14,sliderSoftLimitMax:14,sliderHardLimitMax:20,sliderInitialValue:0,spinSoftLimitMax:16384,spinHardLimitMax:1048576,stepValue:1,decimals:0,isExponential:1,recId:"MaxSamples"}).inject(s);l.setTooltips(this.GetResString("MaxSamplePerPixelControl").Tooltip),l.setHide("inline-block");var o=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("MinSamplePerPixelLabel").Text}).inject(i);o.setStyles({width:"290px",display:"inline-block"});s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var c=new d({minValue:1,maxValue:256,initialValue:0,sliderMinValue:0,sliderMaxValue:6,sliderSoftLimitMax:6,sliderHardLimitMax:8,sliderInitialValue:0,spinSoftLimitMax:64,spinHardLimitMax:256,stepValue:1,decimals:0,isExponential:1,recId:"MinSamples"}).inject(s);c.setTooltips(this.GetResString("MinSamplePerPixelControl").Tooltip),c.setHide("inline-block"),new UWA.Element("br").inject(i);var p=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("ClammpingMaxLumLabel").Text}).inject(i);p.setStyles({width:"290px"});s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var u=new d({minValue:.1,maxValue:100,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:.1,stepValue:1,decimals:2,isLogarithmic:1,recId:"Clamping"}).inject(s);u.setTooltips(this.GetResString("ClammpingMaxLumControl").Tooltip),new UWA.Element("br").inject(i);var g=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GaussFilterLabel").Text}).inject(i);g.setStyles({width:"300px"});var m=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),y=new r({label:"",recId:"GaussFilter"}).inject(m);y.tooltipInfos=new h({shortHelp:this.GetResString("GaussFilterControl").Tooltip}),new UWA.Element("br").inject(i),new UWA.Element("br").inject(i);var S=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("SizeLabel").Text}).inject(i);S.setStyles({width:"290px"});s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var w=new d({minValue:1,maxValue:6,initialValue:1,stepValue:.1,decimals:1,recId:"Size"}).inject(s);w.setTooltips(this.GetResString("SizeControl").Tooltip);var b=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("CenterWeightLabel").Text}).inject(i);b.setStyles({width:"290px"});s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var x=new d({minValue:.1,maxValue:3,initialValue:0,stepValue:.1,decimals:1,recId:"CenterWeight"}).inject(s);x.setTooltips(this.GetResString("CenterWeightControl").Tooltip);var v=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);v.setStyle("Width","600px");new a({style:"filled-group",header:"Accumulation",body:i}).inject(v);return e.properties.Accumulation.minSamplesSliderSpinBox=c,e.properties.Accumulation.MinSamplesLabel=o,e.properties.Accumulation.clampingSliderSpinBox=u,e.properties.Accumulation.clampingLabel=p,e.properties.Accumulation.accumulationToggle=y,e.properties.Accumulation.SizeSliderSpinBox=w,e.properties.Accumulation.CenterSliderSpinBox=x,e.properties.Accumulation.gaussFilterLabel=g,e.properties.Accumulation.sizeLabel=S,e.properties.Accumulation.centerWeightLabel=b,e.properties.Accumulation.maxSamplesSliderSpinBox=l,e.properties.Accumulation.MaxSamplesLabel=n,e.addEventListenerSliderSpinBox("Accumulation",l),e.addEventListenerSliderSpinBox("Accumulation",c),e.addEventListenerSliderSpinBox("Accumulation",u),e.addEventListenerSliderSpinBox("Accumulation",w),e.addEventListenerSliderSpinBox("Accumulation",x),e.addEventListenerToggle("Accumulation",y),t},y.prototype.buildGlobalIlluminationView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"}),n=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("MaxTraceDepthLabel").Text}).inject(i);n.setStyles({width:"290px"});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),l=new d({minValue:1,maxValue:1e3,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,spinSoftLimitMax:100,spinHardLimitMax:1e3,initialValue:1,stepValue:1,decimals:0,isLinear:1,recId:"MaxTraceDepth"}).inject(s);l.setTooltips(this.GetResString("MaxTraceDepthControl").Tooltip);var o=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GlossyThresholdLabel").Text}).inject(i);o.setStyles({width:"290px"});s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var p=new d({minValue:0,maxValue:1,initialValue:0,stepValue:.01,decimals:2,recId:"GlossyThreshold"}).inject(s);p.setTooltips(this.GetResString("GlossyThresholdControl").Tooltip);var u=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("RenderRefractiveShadowsLabel").Text}).inject(i);u.setStyles({width:"300px"});var g=new UWA.Element("div",{class:"wux-control-inline-container"}),m=new r({label:"",recId:"RenderRefractiveShadow"}).inject(g);m.tooltipInfos=new h({shortHelp:this.GetResString("RenderRefractiveShadowsControl").Tooltip}),g.inject(i);var y=new UWA.Element("div",{class:"wux-container"}),S=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);S.setStyle("Width","580px");new a({style:"filled-group",header:"Advanced",body:y}).inject(S);var w=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("LocationBasedImportanceSamplingLabel").Text}).inject(y);w.setStyles({width:"285px"});g=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(y);var b=new r({label:"",recId:"LocationBasedSampling"}).inject(g);b.tooltipInfos=new h({shortHelp:this.GetResString("LocationBasedImportanceSamplingControl").Tooltip}),new UWA.Element("br").inject(y),new UWA.Element("br").inject(y);var x=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("EmissiveObjectsImportanceSamplingLabel").Text}).inject(y);new UWA.Element("br").inject(x),new UWA.Element("br").inject(x);var v=new UWA.Element("div",{class:"wux-container"}).inject(x),C=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("ImportanceDistributionMethodLabel").Text}).inject(v);C.setStyles({width:"280px"});for(var f=["Equal","Propertional to Power"],I=["Equal","Propertional to Power"],A=[],E=0;E<f.length;E++)A[E]={labelItem:f[E],valueItem:I[E]};var M=new c({elementsList:A,selectedIndex:1,recId:"Distribution",enableSearchFlag:!1}).inject(v);M.getContent().style.width="130px",M.tooltipInfos=new h({shortHelp:this.GetResString("ImportanceDistributionMethodControl").Tooltip});var L=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("ImportanceSamplingFactorLabel").Text}).inject(v);L.setStyles({width:"275px"});s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(v);var U=new d({minValue:0,maxValue:1e3,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:0,spinSoftLimitMax:20,spinHardLimitMax:1e3,stepValue:1,decimals:2,isLogarithmic:1,recId:"Factor"}).inject(s);U.setTooltips(this.GetResString("ImportanceSamplingFactorControl").Tooltip);var D=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PathTerminationStartDepthLabel").Text}).inject(y);D.setStyles({width:"280px"});s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(y);var T=new d({minValue:0,maxValue:1e3,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,spinSoftLimitMax:32,spinHardLimitMax:1e3,initialValue:0,stepValue:1,decimals:0,isLogarithmic:1,recId:"PathTerminationDepth"}).inject(s);T.setTooltips(this.GetResString("PathTerminationStartDepthControl").Tooltip);var B=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PhotonMapVisualizationModeLabel").Text}).inject(y);B.setStyles({width:"285px"});f=["None","Final Gathering","Caustics"],I=["None","Final Gathering","Caustics"];var j=[];for(E=0;E<f.length;E++)j[E]={labelItem:f[E],valueItem:I[E]};s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(y);var R=new c({elementsList:j,selectedIndex:2,recId:"VisualizationMode",enableSearchFlag:!1}).inject(s);R.getContent().style.width="130px",R.tooltipInfos=new h({shortHelp:this.GetResString("PhotonMapVisualizationModeControl").Tooltip});var G=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);G.setStyle("Width","600px");new a({style:"filled-group",header:"Global Illumination",body:i}).inject(G);return e.properties.GlobalIllumination={},e.properties.GlobalIllumination.traceDepthSliderSpinBox=l,e.properties.GlobalIllumination.glossyThresholdSliderSpinBox=p,e.properties.GlobalIllumination.refractiveShadowsToggle=m,e.properties.GlobalIllumination.samplingToggle=b,e.properties.GlobalIllumination.distributionComboBox=M,e.properties.GlobalIllumination.factorSliderSpinBox=U,e.properties.GlobalIllumination.pathTerminationSliderSpinBox=T,e.properties.GlobalIllumination.visualizationModeComboBox=R,e.properties.GlobalIllumination.visualizationModeLabel=B,e.properties.GlobalIllumination.maxTraceLabel=n,e.properties.GlobalIllumination.glossyLabel=o,e.properties.GlobalIllumination.refractiveLabel=u,e.properties.GlobalIllumination.samplingLabel=w,e.properties.GlobalIllumination.distributionLabel=C,e.properties.GlobalIllumination.factorLabel=L,e.properties.GlobalIllumination.pathTerminationLabel=D,e.addEventListenerSliderSpinBox("GlobalIllumination",l),e.addEventListenerSliderSpinBox("GlobalIllumination",p),e.addEventListenerToggle("GlobalIllumination",m),e.addEventListenerToggle("GlobalIllumination",b),e.addEventListenerComboBox("GlobalIllumination",M),e.addEventListenerSliderSpinBox("GlobalIllumination",U),e.addEventListenerSliderSpinBox("GlobalIllumination",T),e.addEventListenerComboBox("GlobalIllumination",R),t},y.prototype.buildFinalGatheringView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"}),n=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("EnableFinalGatheringLabel").Text}).inject(i);n.setStyles({width:"300px"});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),l=new r({label:"",recId:"EnableFinalGathering"}).inject(s);l.tooltipInfos=new h({shortHelp:this.GetResString("EnableFinalGatheringControl").Tooltip});var o=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PhotonNumberLabel").Text}).inject(i);o.setStyles({width:"290px"});var c=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),p=new d({minValue:1e3,maxValue:1e8,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:1e7,spinHardLimitMax:1e8,stepValue:1,decimals:0,isLogarithmic:1,recId:"NoOfPhotons"}).inject(c);p.setTooltips(this.GetResString("PhotonNumberControl").Tooltip);var u=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PathDepthLabel").Text}).inject(i);u.setStyles({width:"290px"});c=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var g=new d({minValue:1,maxValue:1e3,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:32,spinHardLimitMax:1e3,stepValue:1,decimals:0,isLogarithmic:1,recId:"PathDepth"}).inject(c);g.setTooltips(this.GetResString("PathDepthControl").Tooltip);var m=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PhotonRadiusLabel").Text}).inject(i);m.setStyles({width:"290px"});c=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var y=new d({minValue:1,maxValue:1e6,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:1e3,spinHardLimitMax:1e6,stepValue:1,decimals:1,isLogarithmic:1,recId:"PhotonRadius"}).inject(c);y.setTooltips(this.GetResString("PhotonRadiusControl").Tooltip);var S=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("RefineFinalGatheringMapLabel").Text}).inject(i);S.setStyles({width:"300px"});s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var w=new r({label:"",recId:"RefineMap"}).inject(s);w.tooltipInfos=new h({shortHelp:this.GetResString("RefineFinalGatheringMapControl").Tooltip}),new UWA.Element("br").inject(i),new UWA.Element("br").inject(i);var b=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("PrecalculateIrradianceLabel").Text}).inject(i);b.setStyles({width:"300px"});s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var x=new r({label:"",recId:"PrecalculateIrradiance"}).inject(s);x.tooltipInfos=new h({shortHelp:this.GetResString("PrecalculateIrradianceControl").Tooltip});var v=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);v.setStyle("Width","600px");new a({style:"filled-group",header:"Final Gathering",body:i}).inject(v);return e.properties.FinalGathering={},e.properties.FinalGathering.EnableFinalGatheringToggle=l,e.properties.FinalGathering.photonNoSliderSpinBox=p,e.properties.FinalGathering.pathDepthSliderSpinBox=g,e.properties.FinalGathering.photonRadiusSliderSpinBox=y,e.properties.FinalGathering.irradianceToggle=x,e.properties.FinalGathering.refineFinalGatheringToggle=w,e.properties.FinalGathering.EnableFinalGatheringLabel=n,e.properties.FinalGathering.photonNoLabel=o,e.properties.FinalGathering.pathDepthLabel=u,e.properties.FinalGathering.photonRadiusLabel=m,e.properties.FinalGathering.refineFinalGatheringLabel=S,e.properties.FinalGathering.irradianceLabel=b,e.addEventListenerToggle("FinalGathering",l),e.addEventListenerSliderSpinBox("FinalGathering",p),e.addEventListenerSliderSpinBox("FinalGathering",g),e.addEventListenerSliderSpinBox("FinalGathering",y),e.addEventListenerToggle("FinalGathering",x),e.addEventListenerToggle("FinalGathering",w),t},y.prototype.buildCausticsView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"}),i=new UWA.Element("div",{class:"wux-container"}),n=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("CausticsLabel").Text}).inject(i);n.setStyles({width:"300px"});for(var s=["None","Pathtracer","Caustics Photons"],l=["None","Pathtracer","Caustics Photons"],o=[],p=0;p<s.length;p++)o[p]={labelItem:s[p],valueItem:l[p]};var u=new c({elementsList:o,selectedIndex:1,recId:"Caustics",enableSearchFlag:!1}).inject(i);u.getContent().style.width="130px",u.tooltipInfos=new h({shortHelp:this.GetResString("CausticsControl").Tooltip});var g=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("CausticPhotonNumberLabel").Text}).inject(i);g.setStyles({width:"290px"});var m=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),y=new d({minValue:1e3,maxValue:1e8,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:1e7,spinHardLimitMax:1e8,stepValue:1,decimals:0,isLogarithmic:1,recId:"PhotonNumber"}).inject(m);y.setTooltips(this.GetResString("CausticPhotonNumberControl").Tooltip);var S=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("CausticPathDepthLabel").Text}).inject(i);S.setStyles({width:"290px"});m=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var w=new d({minValue:1,maxValue:1e3,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:32,spinHardLimitMax:1e3,stepValue:1,decimals:0,isLogarithmic:1,recId:"PathDepth"}).inject(m);w.setTooltips(this.GetResString("CausticPathDepthControl").Tooltip);var b=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("CausticRadiusLabel").Text}).inject(i);b.setStyles({width:"290px"});m=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i);var x=new d({minValue:.1,maxValue:1e5,sliderMinValue:0,sliderMaxValue:100,sliderInitialValue:0,initialValue:1,spinSoftLimitMax:1e3,spinHardLimitMax:1e6,stepValue:1,decimals:1,isLogarithmic:1,recId:"CausticRadius"}).inject(m);x.setTooltips(this.GetResString("CausticRadiusControl").Tooltip);var v=new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("RefineCausticMapLabel").Text}).inject(i);v.setStyles({width:"300px"});var C=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(i),f=new r({label:"",recId:"refinePhotonMap"}).inject(C);f.tooltipInfos=new h({shortHelp:this.GetResString("RefineCausticMapControl").Tooltip});var I=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t);I.setStyle("Width","600px");new a({style:"filled-group",header:"Caustics",body:i}).inject(I);return e.properties.Caustics={},e.properties.Caustics.causticsComboBox=u,e.properties.Caustics.photonNoSliderSpinBox=y,e.properties.Caustics.pathDepthSliderSpinBox=w,e.properties.Caustics.photonRadiusSliderSpinBox=x,e.properties.Caustics.refineCausticToggle=f,e.properties.Caustics.causticsLabel=n,e.properties.Caustics.photonNoLabel=g,e.properties.Caustics.pathDepthLabel=S,e.properties.Caustics.photonRadiusLabel=b,e.properties.Caustics.refineCausticLabel=v,e.addEventListenerComboBox("Caustics",u),e.addEventListenerSliderSpinBox("Caustics",y),e.addEventListenerSliderSpinBox("Caustics",w),e.addEventListenerSliderSpinBox("Caustics",x),e.addEventListenerToggle("Caustics",f),t},y.prototype.buildRayOffsetView=function(){var e=UWA.Element("div",{class:"wux-container"}),t=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("RayOffsetLabel").Text}).inject(t).setStyles({width:"290px"});var i=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t),n=new d({minValue:.001,maxValue:1e4,sliderMinValue:0,sliderMaxValue:100,initialValue:.01,spinSoftLimitMax:1e3,spinSoftLimitMin:.01,spinHardLimitMax:1e4,spinHardLimitMin:.001,stepValue:1,decimals:3,isLogarithmic:1,recId:"RayOffset"}).inject(i);n.setTooltips(this.GetResString("RayOffsetControl").Tooltip);var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(e);s.setStyle("Width","600px");var l=new a({style:"filled-group",header:"Ray Offset",body:t}).inject(s);return this.properties.RayOffset={},this.properties.RayOffset.rayOffsetSliderSpinBox=n,this.properties.RayOffset.expander=l,this.addEventListenerSliderSpinBox("RayOffset",n),e},y.prototype.buildShadowsView=function(){var e=UWA.Element("div",{class:"wux-container"}),t=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GIAllowGroundShadowLabel").Text}).inject(t).setStyles({width:"300px"});var i=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t),n=new r({label:"",recId:"AllowGroundShadows"}).inject(i);n.tooltipInfos=new h({shortHelp:this.GetResString("GIAllowGroundShadowControl").Tooltip});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(e);s.setStyle("Width","600px");var l=new a({style:"filled-group",header:"Shadows",body:t}).inject(s);return this.properties.Shadows={},this.properties.Shadows.shadowsToggle=n,this.properties.Shadows.expander=l,this.addEventListenerToggle("Shadows",n),e},y.prototype.buildReflectionsView=function(){var e=UWA.Element("div",{class:"wux-container"}),t=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GIAllowGroundReflLabel").Text}).inject(t).setStyles({width:"300px"});var i=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t),n=new r({label:"",recId:"AllowReflectionsOnGround"}).inject(i);n.tooltipInfos=new h({shortHelp:this.GetResString("GIAllowGroundReflControl").Tooltip});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(e);s.setStyle("Width","600px");var l=new a({style:"filled-group",header:"Reflections",body:t}).inject(s);return this.properties.Reflections={},this.properties.Reflections.reflectionsToggle=n,this.properties.Reflections.expander=l,this.addEventListenerToggle("Reflections",n),e},y.prototype.buildBloomView=function(){var e=UWA.Element("div",{class:"wux-container"}),t=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GIAllowBloomLabel").Text}).inject(t).setStyles({width:"300px"});var i=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t),n=new r({label:"",recId:"AllowBloom"}).inject(i);n.tooltipInfos=new h({shortHelp:this.GetResString("GIAllowBloomControl").Tooltip});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(e);s.setStyle("Width","600px");var l=new a({style:"filled-group",header:"Bloom",body:t}).inject(s);return this.properties.Bloom={},this.properties.Bloom.bloomToggle=n,this.properties.Bloom.expander=l,this.addEventListenerToggle("Bloom",n),e},y.prototype.buildDepthOfFieldView=function(){var e=UWA.Element("div",{class:"wux-container"}),t=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GIAllowDoFLabel").Text}).inject(t).setStyles({width:"300px"});var i=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t),n=new r({label:"",recId:"AllowDepthOfField"}).inject(i);n.tooltipInfos=new h({shortHelp:this.GetResString("GIAllowDoFControl").Tooltip});var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(e);s.setStyle("Width","600px");var l=new a({style:"filled-group",header:"Depth Of Field",body:t}).inject(s);return this.properties.DepthOfField={},this.properties.DepthOfField.depthToggle=n,this.properties.DepthOfField.expander=l,this.addEventListenerToggle("DepthOfField",n),e},y.prototype.buildDownsamplingView=function(){var e=UWA.Element("div",{class:"wux-container"}),t=new UWA.Element("div",{class:"wux-container"});new UWA.Element("div",{class:"wux-control-inline-container",text:this.GetResString("GIDownsamplingFactorLabel").Text}).inject(t).setStyles({width:"290px"});var i=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(t),n=new d({minValue:.4,maxValue:1,initialValue:.4,stepValue:.1,decimals:1,recId:"DownsamplingFctor"}).inject(i);n.setTooltips(this.GetResString("GIDownsamplingFactorControl").Tooltip);var s=new UWA.Element("div",{class:"wux-control-inline-container"}).inject(e);s.setStyle("Width","600px");var l=new a({style:"filled-group",header:"Downsampling",body:t}).inject(s);return this.properties.Downsampling={},this.properties.Downsampling.downsamplingSliderSpinBox=n,this.properties.Downsampling.expander=l,this.addEventListenerSliderSpinBox("Downsampling",n),e},y.prototype.getPresetButtons=function(){var e=new l;e.addChild(new n({checkFlag:!1,value:"Standard",displayStyle:"lite-borders",emphasize:"primary",icon:i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/CATRdgStellarConfig1.png",recId:"Standard"})),e.addChild(new n({checkFlag:!1,value:"OptimizeInterior",emphasize:"primary",displayStyle:"lite-borders",icon:i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/CATRdgStellarConfig2.png",recId:"OptimizeInterior"})),e.addChild(new n({checkFlag:!1,value:"OptimizeCaustics",emphasize:"primary",displayStyle:"lite-borders",icon:i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/CATRdgStellarConfig3.png",recId:"OptimizeCaustics"}));for(var t=e._getButtonList(),s=0;s<t.length;s++){t[s].getContent().tooltipInfos=new h({shortHelp:t[s].recId})}return e},y.prototype.DoUpdatePropertyCombo=function(){var e=!1;return m||g||(e=!0),e},y.prototype.addEventListenerComboBox=function(e,t){var i=this;t.addEventListener("change",function(){var n=t.recId,s=t.currentValue;i.DoUpdatePropertyCombo()&&(!0,i.updateAttribute(e,n,s),!1),"Caustics"==n&&("None"==s||"Pathtracer"==s?(i.properties.Caustics.photonNoSliderSpinBox.setDisabled(!0),i.properties.Caustics.pathDepthSliderSpinBox.setDisabled(!0),i.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(!0),i.properties.Caustics.refineCausticToggle.disabled=!0):(i.properties.Caustics.photonNoSliderSpinBox.setDisabled(!1),i.properties.Caustics.pathDepthSliderSpinBox.setDisabled(!1),i.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(!1),i.properties.Caustics.refineCausticToggle.disabled=!1))})},y.prototype.addEventListenerSliderSpinBox=function(e,t){var i=this;t.elements.slider.addEventListener("change",function(e){t._createEvents()}),t.elements.spinBox.addEventListener("change",function(n){t._createEvents();var s=t.options.recId,l=t.elements.spinBox.value;i.DoUpdatePropertyCombo()&&(!0,i.updateAttribute(e,s,l),!1)})},y.prototype.addEventListenerToggle=function(e,t){var i=this;t.addEventListener("change",function(){var n=t.recId,s=t.checkFlag;switch(i.DoUpdatePropertyCombo()&&(!0,i.updateAttribute(e,n,s),!1),n){case"GaussFilter":s?(i.properties.Accumulation.SizeSliderSpinBox.setDisabled(!1),i.properties.Accumulation.CenterSliderSpinBox.setDisabled(!1)):(i.properties.Accumulation.SizeSliderSpinBox.setDisabled(!0),i.properties.Accumulation.CenterSliderSpinBox.setDisabled(!0));break;case"EnableFinalGathering":s?(i.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(!1),i.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(!1),i.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(!1),i.properties.FinalGathering.refineFinalGatheringToggle.disabled=!1,i.properties.FinalGathering.irradianceToggle.disabled=!1):(i.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(!0),i.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(!0),i.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(!0),i.properties.FinalGathering.refineFinalGatheringToggle.disabled=!0,i.properties.FinalGathering.irradianceToggle.disabled=!0)}})},y.prototype.initializedUIfromDB=function(){g=!0,this.updateRenderButtonUI(this.currentPresetMode);t.getCurrentGlobalPreset(this.currentPresetMode);for(var e in m=!0,this.properties)"Global"!=e&&this.updatePropertyUI(e,"Custom");this.updateParameterDependencies(),m=!1,g=!1},y.prototype.updateParameterDependencies=function(){var e=this;e.properties.Accumulation.accumulationToggle.checkFlag?(e.properties.Accumulation.SizeSliderSpinBox.setDisabled(!1),e.properties.Accumulation.CenterSliderSpinBox.setDisabled(!1)):(e.properties.Accumulation.SizeSliderSpinBox.setDisabled(!0),e.properties.Accumulation.CenterSliderSpinBox.setDisabled(!0)),e.properties.FinalGathering.EnableFinalGatheringToggle.checkFlag?(e.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(!1),e.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(!1),e.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(!1),e.properties.FinalGathering.refineFinalGatheringToggle.disabled=!1,e.properties.FinalGathering.irradianceToggle.disabled=!1):(e.properties.FinalGathering.photonNoSliderSpinBox.setDisabled(!0),e.properties.FinalGathering.photonRadiusSliderSpinBox.setDisabled(!0),e.properties.FinalGathering.pathDepthSliderSpinBox.setDisabled(!0),e.properties.FinalGathering.refineFinalGatheringToggle.disabled=!0,e.properties.FinalGathering.irradianceToggle.disabled=!0),"None"==e.properties.Caustics.causticsComboBox.currentValue||"Pathtracer"==e.properties.Caustics.causticsComboBox.currentValue?(e.properties.Caustics.photonNoSliderSpinBox.setDisabled(!0),e.properties.Caustics.pathDepthSliderSpinBox.setDisabled(!0),e.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(!0),e.properties.Caustics.refineCausticToggle.disabled=!0):(e.properties.Caustics.photonNoSliderSpinBox.setDisabled(!1),e.properties.Caustics.pathDepthSliderSpinBox.setDisabled(!1),e.properties.Caustics.photonRadiusSliderSpinBox.setDisabled(!1),e.properties.Caustics.refineCausticToggle.disabled=!1)},y.prototype.updateGlobalPreset=function(e){t.setGlobalPreset(this.currentPresetMode,e,!0),this.updatePropertyUI("Accumulation",e),this.updatePropertyUI("GlobalIllumination",e),this.updatePropertyUI("FinalGathering",e),this.updatePropertyUI("Caustics",e),this.updatePropertyUI("RayOffset",e),this.updatePropertyUI("Shadows",e),this.updatePropertyUI("Reflections",e),this.updatePropertyUI("Bloom",e),this.updatePropertyUI("DepthOfField",e),this.updatePropertyUI("Downsampling",e)},y.prototype.updatePropertyUI=function(i,n){var s=t.getPresetValue(this.currentPresetMode,n);if(!e.is(s))return!1;var l=s[i];if(!e.is(l))return!1;switch(this.updatePropertyPresetButtonUI(i,n),i){case"Accumulation":this.properties[i].maxSamplesSliderSpinBox.setValue(l.MaxSamples),this.properties[i].minSamplesSliderSpinBox.setValue(l.MinSamples),this.properties[i].clampingSliderSpinBox.setValue(l.Clamping),this.properties[i].accumulationToggle.checkFlag=l.GaussFilter,this.properties[i].SizeSliderSpinBox.setValue(l.Size),this.properties[i].CenterSliderSpinBox.setValue(l.CenterWeight);break;case"GlobalIllumination":this.properties[i].traceDepthSliderSpinBox.setValue(l.MaxTraceDepth),this.properties[i].glossyThresholdSliderSpinBox.setValue(l.GlossyThreshold),this.properties[i].refractiveShadowsToggle.checkFlag=l.RenderRefractiveShadow,this.properties[i].samplingToggle.checkFlag=l.LocationBasedSampling,this.properties[i].distributionComboBox.currentValue=l.Distribution,this.properties[i].factorSliderSpinBox.setValue(l.Factor),this.properties[i].pathTerminationSliderSpinBox.setValue(l.PathTerminationDepth),this.properties[i].visualizationModeComboBox.currentValue=l.VisualizationMode;break;case"FinalGathering":this.properties[i].EnableFinalGatheringToggle.checkFlag=l.EnableFinalGathering,this.properties[i].photonNoSliderSpinBox.setValue(l.NoOfPhotons),this.properties[i].pathDepthSliderSpinBox.setValue(l.PathDepth),this.properties[i].photonRadiusSliderSpinBox.setValue(l.PhotonRadius),this.properties[i].irradianceToggle.checkFlag=l.PrecalculateIrradiance,this.properties[i].refineFinalGatheringToggle.checkFlag=l.RefineMap;break;case"Caustics":this.properties[i].causticsComboBox.currentValue=l.Caustics,this.properties[i].photonNoSliderSpinBox.setValue(l.PhotonNumber),this.properties[i].pathDepthSliderSpinBox.setValue(l.PathDepth),this.properties[i].photonRadiusSliderSpinBox.setValue(l.CausticRadius),this.properties[i].refineCausticToggle.checkFlag=l.refinePhotonMap;break;case"RayOffset":this.properties[i].rayOffsetSliderSpinBox.setValue(l.RayOffset);break;case"Shadows":this.properties[i].shadowsToggle.checkFlag=l.AllowGroundShadows;break;case"Reflections":this.properties[i].reflectionsToggle.checkFlag=l.AllowReflectionsOnGround;break;case"Bloom":this.properties[i].bloomToggle.checkFlag=l.AllowBloom;break;case"DepthOfField":this.properties[i].depthToggle.checkFlag=l.AllowDepthOfField;break;case"Downsampling":this.properties[i].downsamplingSliderSpinBox.setValue(l.DownsamplingFctor)}},y.prototype.updateRenderButtonUI=function(e){for(var i in"Static"==e?(this.staticButton.checkFlag=!0,this.batchButton.checkFlag=!1):(this.staticButton.checkFlag=!1,this.batchButton.checkFlag=!0),t._QMSettings)this.updateUI(i,e)},y.prototype.updateUI=function(e,i){var n="inline-block";switch("RayOffset"!=e&&"AllowGroundShadows"!=e&&"AllowReflectionsOnGround"!=e&&"AllowBloom"!=e&&"AllowDepthOfField"!=e&&"DownsamplingFctor"!=e||(n="block"),t.getQMsetting(e,i)||(n="none"),e){case"MaxSamples":this.properties.Accumulation.MaxSamplesLabel.setStyles({display:n}),this.properties.Accumulation.maxSamplesSliderSpinBox.setHide(n);break;case"MinSamples":this.properties.Accumulation.MinSamplesLabel.setStyles({display:n}),this.properties.Accumulation.minSamplesSliderSpinBox.setHide(n);break;case"Clamping":this.properties.Accumulation.clampingLabel.setStyles({display:n}),this.properties.Accumulation.clampingSliderSpinBox.setHide(n);break;case"GaussFilter":this.properties.Accumulation.gaussFilterLabel.setStyles({display:n}),this.properties.Accumulation.accumulationToggle.getContent().style.display=n;break;case"Size":this.properties.Accumulation.sizeLabel.setStyles({display:n}),this.properties.Accumulation.SizeSliderSpinBox.setHide(n);break;case"CenterWeight":this.properties.Accumulation.centerWeightLabel.setStyles({display:n}),this.properties.Accumulation.CenterSliderSpinBox.setHide(n);break;case"MAxTraceDepth":this.properties.GlobalIllumination.maxTraceLabel.setStyles({display:n}),this.properties.GlobalIllumination.traceDepthSliderSpinBox.setHide(n);break;case"GlossyThreshold":this.properties.GlobalIllumination.glossyLabel.setStyles({display:n}),this.properties.GlobalIllumination.glossyThresholdSliderSpinBox.setHide(n);break;case"RenderRefractiveShadow":this.properties.GlobalIllumination.refractiveLabel.setStyles({display:n}),this.properties.GlobalIllumination.refractiveShadowsToggle.getContent().style.display=n;break;case"LocationBasedSampling":this.properties.GlobalIllumination.samplingLabel.setStyles({display:n}),this.properties.GlobalIllumination.samplingToggle.getContent().style.display=n;break;case"Distribution":this.properties.GlobalIllumination.distributionLabel.setStyles({display:n}),this.properties.GlobalIllumination.distributionComboBox.getContent().style.display=n;break;case"Factor":this.properties.GlobalIllumination.factorLabel.setStyles({display:n}),this.properties.GlobalIllumination.factorSliderSpinBox.setHide(n);break;case"PathTerminationDepth":this.properties.GlobalIllumination.pathTerminationLabel.setStyles({display:n}),this.properties.GlobalIllumination.pathTerminationSliderSpinBox.setHide(n);break;case"VisualizationMode":this.properties.GlobalIllumination.visualizationModeLabel.setStyles({display:n}),this.properties.GlobalIllumination.visualizationModeComboBox.getContent().style.display=n;break;case"EnableFinalGathering":this.properties.FinalGathering.EnableFinalGatheringLabel.setStyles({display:n}),this.properties.FinalGathering.EnableFinalGatheringToggle.getContent().style.display=n;break;case"NoOfPhotons":this.properties.FinalGathering.photonNoLabel.setStyles({display:n}),this.properties.FinalGathering.photonNoSliderSpinBox.setHide(n);break;case"PathDepth":this.properties.FinalGathering.pathDepthLabel.setStyles({display:n}),this.properties.FinalGathering.pathDepthSliderSpinBox.setHide(n);break;case"PhotonRadius":this.properties.FinalGathering.photonRadiusLabel.setStyles({display:n}),this.properties.FinalGathering.photonRadiusSliderSpinBox.setHide(n);break;case"RefineMap":this.properties.FinalGathering.refineFinalGatheringLabel.setStyles({display:n}),this.properties.FinalGathering.refineFinalGatheringToggle.getContent().style.display=n;break;case"PrecalculateIrradiance":this.properties.FinalGathering.irradianceLabel.setStyles({display:n}),this.properties.FinalGathering.irradianceToggle.getContent().style.display=n;break;case"Caustics":this.properties.Caustics.causticsLabel.setStyles({display:n}),this.properties.Caustics.causticsComboBox.getContent().style.display=n;break;case"CausticsPhotonNumber":this.properties.Caustics.photonNoLabel.setStyles({display:n}),this.properties.Caustics.photonNoSliderSpinBox.setHide(n);break;case"CausticsPathDepth":this.properties.Caustics.pathDepthLabel.setStyles({display:n}),this.properties.Caustics.pathDepthSliderSpinBox.setHide(n);break;case"CausticRadius":this.properties.Caustics.photonRadiusLabel.setStyles({display:n}),this.properties.Caustics.photonRadiusSliderSpinBox.setHide(n);break;case"CausticRefinePhotonMap":this.properties.Caustics.refineCausticLabel.setStyles({display:n}),this.properties.Caustics.refineCausticToggle.getContent().style.display=n;break;case"RayOffset":this.properties.RayOffset.expander.getContent().style.display=n;break;case"AllowGroundShadows":this.properties.Shadows.expander.getContent().style.display=n;break;case"AllowReflectionsOnGround":this.properties.Reflections.expander.getContent().style.display=n;break;case"AllowBloom":this.properties.Bloom.expander.getContent().style.display=n;break;case"AllowDepthOfField":this.properties.DepthOfField.expander.getContent().style.display=n;break;case"DownsamplingFctor":this.properties.Downsampling.expander.getContent().style.display=n}},y.prototype.updatePropertyPresetButtonUI=function(t,i){var n=this.properties[t];if(e.is(n)){var s=this.properties.Global.presetButtonGroup;if(e.is(s))if("Custom"==i)for(var l=0;l<s.getButtonCount();l++)s.getButton(l).checkFlag=!1;else s.getButtonFromValue(i).checkFlag=!0}},y.prototype.updateAttribute=function(e,i,n){t.setAttribute(this.currentPresetMode,"Custom",e,i,n),this.updatePropertyPresetButtonUI(e,"Custom")},y}),define("DS/QualityManagerUI/GIVisualQualityUIDlg",["UWA/Core","DS/QualityManager/QMGIController","DS/WebappsUtils/WebappsUtils","DS/QualityManagerUI/GIVisualQualityCustomPresetDlg","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ComboBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager"],function(e,t,i,n,s,l,a,o,r){"use strict";var c=!1,p=function(e){this.options=e,this.init()};return p.prototype.init=function(){var e=this.options.frameWindow;this._webGLV6Viewer=e.getViewer(),this._immersiveFrame=e.getImmersiveFrame(),t.isInitialized||t.init(),this.currentPresetMode=t.getCurrentPreset(),r.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang");var i=this;r.loadResource({resourceFile:"QualityManagerUI/QualityManager"}),r.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},function(){i.mbdResources=this}),this.properties={},this.buildDialog(),this.initializedUIfromDB()},p.prototype.initializedUIfromDB=function(){c=!0;var e=t.getCurrentGlobalPreset("Static");this.properties.Static.staticComboBox.currentValue=e,e=t.getCurrentGlobalPreset("Batch"),this.properties.Batch.batchComboBox.currentValue=e,c=!1},p.prototype.buildDialog=function(){var e=UWA.createElement("div",{class:"wux-control-inline-container",style:{"vertical-align":"top"}});this.buildViewContent().inject(e),this.GIVisualQualityUIDlg=new l({title:"Raytracer Visual Quality",content:e,immersiveFrame:this._immersiveFrame,ResizableFlag:!0,width:270,height:80,allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea}),this.GIVisualQualityUIDlg.addEventListener("close",function(){t.commitToDB()})},p.prototype.buildViewContent=function(){for(var e=UWA.createElement("div",{class:"wux-container"}),t=["Standard","Optimize Interior","Optimize Caustics","Custom"],i=["Standard","OptimizeInterior","OptimizeCaustics","Custom"],n=[],s=0;s<t.length;s++)n[s]={labelItem:t[s],valueItem:i[s]};return this.buildStaticView(n).inject(e),this.buildBatchView(n).inject(e),this.buildCustomizeButtonView().inject(e),e},p.prototype.buildStaticView=function(e){var t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"200px"}),new UWA.Element("div",{class:"wux-control-inline-container",text:"Static:"}).inject(t).setStyles({width:"40px"});var i=new a({elementsList:e,selectedIndex:1,recId:"Static",enableSearchFlag:!1}).inject(t);return i.getContent().style.width="70%",this.properties.Static={},this.properties.Static.staticComboBox=i,this.addEventListenerComboBox(i),t},p.prototype.buildBatchView=function(e){var t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"200px"}),new UWA.Element("div",{class:"wux-control-inline-container",text:"Batch:"}).inject(t).setStyles({width:"40px"});var i=new a({elementsList:e,selectedIndex:1,recId:"Batch",enableSearchFlag:!1}).inject(t);return i.getContent().style.width="70%",this.properties.Batch={},this.properties.Batch.batchComboBox=i,this.addEventListenerComboBox(i),t},p.prototype.buildCustomizeButtonView=function(){var e=this,l=UWA.createElement("div",{class:"wux-container"});l.setStyles({position:"absolute",width:"0px",left:"225px",top:"20px"});var a=new s({recId:"customizeButton",displayStyle:"lite",icon:i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorSettings.png"}).inject(l),r=this.options;return a.getContent().tooltipInfos=new o({shortHelp:"Customize"}),a.addEventListener("buttonclick",function(){e.GIVisualQualityUIDlg.hide();var i=new n(r);i.currentPreset="Custom",i.QualityManagerDialog.addEventListener("close",function(){t.restoreFromDB(),i.QualityManagerDialog.close(),e.GIVisualQualityUIDlg.show()}),i.QualityManagerDialog.buttons.Ok.addEventListener("click",function(){"Linked"==this.currentPresetMode?(t.setGlobalPresetOnDB("Static","Custom",!1),t.setGlobalPresetOnDB("Dynamic","Custom",!1),e.properties.Static.staticComboBox.currentValue="Custom",e.properties.Dynamic.dynamicComboBox.currentValue="Custom"):(e.currentPresetMode=i.currentPresetMode,t.setGlobalPresetOnDB(e.currentPresetMode,"Custom",!1),"Static"==e.currentPresetMode?e.properties.Static.staticComboBox.currentValue="Custom":e.properties.Batch.batchComboBox.currentValue="Custom"),t.commitToDB(),i.QualityManagerDialog.close(),e.GIVisualQualityUIDlg.show()}),i.QualityManagerDialog.buttons.Cancel.addEventListener("click",function(){t.restoreFromDB(),i.QualityManagerDialog.close(),e.GIVisualQualityUIDlg.show()})}),l},p.prototype.addEventListenerComboBox=function(e){var i=this;e.addEventListener("change",function(){if(!c){var n=e.recId;t.setCurrentPreset(n),i.currentPresetMode=n;var s=e.currentValue;i.updateGlobalPreset(n,s)}})},p.prototype.updateGlobalPreset=function(e,i){t.setGlobalPreset(e,i,!1)},p}),define("DS/QualityManagerUI/QMUIAdvancedPresetSelectionDlg",["UWA/Core","DS/QualityManager/QMController","DS/WebappsUtils/WebappsUtils","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ButtonGroup","DS/Controls/SpinBox","DS/Controls/Toggle","DS/Controls/ComboBox","DS/QualityManagerUI/SliderSpinBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager","DS/Utilities/TouchUtils","i18n!DS/QualityManagerUI/assets/nls/translation"],function(e,t,i,n,s,l,a,o,r,c,p,d,h,u){"use strict";var g=!1,m=!1,y=!1,S=!1,w=function(e){this.saveToCustom_Static=!1,this.saveToCustom_Dynamic=!1,this._toHide=[],this.options=e,this.options.initCB=this.options.initCB||function(e){},this.options.closeCB=this.options.closeCB||function(e){},this.init(),this.batching=void 0,this.localCache=void 0,this.localCacheSize=void 0;i.getWebappsBaseUrl();if(window.widget)window.widget.getUrl(),window.widget.getValue("title")};return w.prototype.init=function(){this.STATIC_STRING="_MODE_STATIC",this.DYNAMIC_STRING="_MODE_DYNAMIC",this.RenderMode_Static_Str="Static",this.RenderMode_Dynamic_Str="Dynamic",this.touch=h.getTouchMode(),this._webGLV6Viewer=this.options.viewer,this._effectSettings=this._webGLV6Viewer._viewerEffectSettings,this.useMobile=!!this._webGLV6Viewer&&this._webGLV6Viewer.mobile,this._immersiveFrame=this.options.immersiveFrame,t.isInitialized||t.init(this._webGLV6Viewer),d.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang");var e=this;d.loadResource({resourceFile:"QualityManagerUI/QualityManager"}),d.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},function(){e.mbdResources=this,e.updateUILabelTooltip()}),this.currentPresetMode=t.getCurrentRenderMode(),this.properties=this.buildProperties(),this.propertiesGlobal=this.buildGlobalProperties(),this.propertiesStatic=this.buildProperties(),this.propertiesDynamic=this.buildProperties(),this.labelElements={},this.staticHelpElements={},this.dynamicHelpElements={},this.buildDialog(),this.initializedUIfromDB(),this.mbdResources&&this.updateUI()},w.prototype.buildProperties=function(){return{AntiAliasing:{id:"AntiAliasing"},PixelCulling:{id:"PixelCulling"},Transparency:{id:"Transparency"},Shadows:{id:"Shadows"},Reflections:{id:"Reflections"},Refractions:{id:"Refractions"},AmbientOcclusion:{id:"AmbientOcclusion"},DepthBufferOptions:{id:"DepthBufferOptions"},Material:{id:"Material"},Downsampling:{id:"Downsampling"}}},w.prototype.buildGlobalProperties=function(){return{Global:{id:"Global"}}},w.prototype.buildDialog=function(){var e=this,t=UWA.createElement("div",{class:"wux-control-inline-container"});t.setStyle("vertical-align","top"),t.setStyles({width:"630px"}),e.buildViewContent().inject(t);for(var i=0;i<this._toHide.length;i++)this._toHide[i].hide();var l=new n;l.getContent().id="OKButton";var a=new n;a.getContent().id="CancelButton";new n({});e.QualityManagerDialog=new s({title:"Visual Quality",content:t,immersiveFrame:e._immersiveFrame,position:{of:e._immersiveFrame.getFreeZone()},identifier:"WebVisuAdvancedVisualQuality-"+e._immersiveFrame.identifier,buttons:{Ok:l,Cancel:a},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea,resizableFlag:!0}),this.touch&&(e.QualityManagerDialog.getContent().touchMode=!0),e.QualityManagerDialog.getContent().id="Visual Quality",e.options.initCB(this),e.QualityManagerDialog.addEventListener("close",function(){e.options.closeCB(e)}),e.QualityManagerDialog.buttons.Ok.addEventListener("click",function(){e.validate()}),e.QualityManagerDialog.buttons.Cancel.addEventListener("click",function(){e.invalidate()}),document.addEventListener("touchChange",this.onTouchChange.bind(this))},w.prototype.onTouchChange=function(e){h.getTouchMode(),h.applyTouch(this.QualityManagerDialog.content,!1)},w.prototype.validate=function(){if(this.saveToCustom_Static&&t.setGlobalPresetOnDB("Static","Custom",!1),this.saveToCustom_Dynamic&&!t.getLinkedPresetStatus()&&t.setGlobalPresetOnDB("Dynamic","Custom",!1),void 0!==this.batching&&t.setBatching(this.batching),void 0!==this.localCache&&t.setLocalCache(this.localCache),void 0!==this.localCacheSize&&t.setLocalCacheSizeOnDB(this.localCacheSize),t.getLinkedPresetStatus())if(this.saveToCustom_Static){var e=t.getPresetValue("Static","Custom");for(var i in e){var n=e[i];for(var s in n){var l=n[s];t.setAttributeOnDynamicMode("Dynamic","Custom",i,s,l)}}t.setGlobalPresetOnDB("Dynamic","Custom",!1)}else{var a=t.getCurrentGlobalPreset(this.RenderMode_Static_Str);t.setGlobalPresetOnDB("Dynamic",a,!0)}t.commitToDB(),this.QualityManagerDialog.close()},w.prototype.invalidate=function(){t.restoreFromDB(),this.QualityManagerDialog.close()},w.prototype.buildViewContent=function(){var e=this,i=UWA.createElement("div",{class:"wux-container"});return i.setStyle("vertical-align","top"),e.buildRenderModeView().inject(i),e.buildAntiAliasingView().inject(i),e.buildPixelcullingView().inject(i),e.buildTransparencyView().inject(i),e.buildShadowView().inject(i),e.buildReflectionsView().inject(i),e.buildRefractionsView().inject(i),e.buildAmbientOcclusionView().inject(i),e.buildDepthBufferView().inject(i),e.buildMaterialView().inject(i),e.buildDownsamplingView().inject(i),e._webGLV6Viewer._getOOCManager()&&(t.activateLocalCache?e.buildLocalCacheView().inject(i):e.buildBatchingView().inject(i)),i},w.prototype.updateUILabelTooltip=function(){this.QMUIPresetSelectionDlg&&this.updateUI()},w.prototype.updateUI=function(){var e=this,t=e.GetResString("VisualQuality");for(var i in null!=t&&""!==t&&(e.QualityManagerDialog.title=e.GetLabel(t)),e.labelElements){var n=e.GetResString(i);null!=n&&""!==n&&(e.labelElements[i].textContent=e.GetLabel(n),"Static"!==i&&"Dynamic"!==i||e.DetermineLabelLength(n))}for(var i in e.staticHelpElements){var s=e.GetResString(i);null!=s&&""!==s&&("CullMinPixelSizeControl"===i||"DownsamplingControl"===i?e.staticHelpElements[i].elements.spinBox.tooltipInfos.shortHelp=e.GetHelp(s):e.staticHelpElements[i].tooltipInfos.shortHelp=e.GetHelp(s))}for(var i in e.dynamicHelpElements){var l=e.GetResString(i);null!=l&&""!==l&&("CullMinPixelSizeControl"===i||"DownsamplingControl"===i?e.dynamicHelpElements[i].elements.spinBox.tooltipInfos.shortHelp=e.GetHelp(l):e.dynamicHelpElements[i].tooltipInfos.shortHelp=e.GetHelp(l))}},w.prototype.GetResString=function(e){var t="";return this.mbdResources&&(t=this.mbdResources.getKey({key:e})),t},w.prototype.GetLabel=function(e){var t="";return void 0!==e.Text&&(t=e.Text),t},w.prototype.GetHelp=function(e){var t="";return void 0!==e.Tooltip&&(t=e.Tooltip),t},w.prototype.DetermineLabelLength=function(e){var t,i=this,n=(t=e.Text).length;"Static"!=t&&"Dynamic"!=t&&(n>0&&n<6?(i.staticLabel.style.width="30px",i.staticCombo.getContent().style.width="26%",i.dynamicLabel.style.width="30px",i.dynamicCombo.getContent().style.width="26%"):n>=6&&n<=9?(i.staticLabel.style.width="50px",i.staticCombo.getContent().style.width="22%",i.dynamicLabel.style.width="65px",i.dynamicCombo.getContent().style.width="20%"):n>9&&n<=12&&(i.staticLabel.style.width="90px",i.staticCombo.getContent().style.width="15%",i.dynamicLabel.style.width="90px",i.dynamicCombo.getContent().style.width="15%"))},w.prototype.buildRenderModeView=function(){var e=this,t=i.getWebappsBaseUrl(),s=new UWA.Element("div",{class:"wux-container"});return s.setStyles({position:"relative",display:"inline-block",width:"400px",left:"230px",height:"32px"}),e.staticLabel=new UWA.Element("label",{class:"wux-control-inline-container",text:"Static"}).inject(s),e.staticLabel.style.width="40px",e.staticLabel.style.color="#42a2da",e.staticLabel.style.fontWeight="bold",e.staticCombo=e.getPresetCombo().inject(s),e.staticCombo.getContent().id="Static",e.staticCombo.getContent().style.width="30%",e.staticCombo.tooltipInfos=new p({shortHelp:"Change all parameters to selected preset."}),e.linkButton=new n({displayStyle:"lite",icon:t+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png"}).inject(s),e.linkButton.getContent().setStyles({margin:"0px 5px 0px 5px"}),e.linkButton.tooltipInfos=new p({shortHelp:this.GetResString("LinkControl").Tooltip}),e.linkButton.getContent().id="Link",e.dynamicLabel=new UWA.Element("div",{class:"wux-control-inline-container",text:"Dynamic"}).inject(s),e.dynamicLabel.style.width="52px",e.dynamicLabel.style.color="#42a2da",e.dynamicLabel.style.fontWeight="bold",e.dynamicCombo=e.getPresetCombo().inject(s),e.dynamicCombo.getContent().id="Dynamic",e.dynamicCombo.getContent().style.width="30%",e.dynamicCombo.tooltipInfos=new p({shortHelp:"Change all parameters to selected preset."}),this.touch&&(s.setStyles({width:"800px",left:"320px",height:"46px"}),e.staticLabel.style.width="60px",e.staticCombo.getContent().style.width="180px",e.dynamicLabel.style.width="75px",e.dynamicCombo.getContent().style.width="180px"),e.addEventListenerGlobalPreset(e.staticCombo),e.addEventListenerGlobalPreset(e.dynamicCombo),e.addEventListenerLinkButton(e.linkButton,e.dynamicCombo),e.propertiesGlobal.Global={},e.propertiesGlobal.Global.staticCombo=e.staticCombo,e.propertiesGlobal.Global.dynamicCombo=e.dynamicCombo,e.labelElements.Static=e.staticLabel,e.labelElements.Dynamic=e.dynamicLabel,e.staticHelpElements.StaticMode=e.staticCombo,e.dynamicHelpElements.DynamicMode=e.dynamicCombo,s},w.prototype.addEventListenerGlobalPreset=function(e){var t=this;e.addEventListener("change",function(){var i=e.getContent().id,n=e.value;S||y||g||(m=!0,t.updateGlobalPreset(i,n),m=!1)})},w.prototype.updateGlobalPreset=function(e,i){var n=null;for(var s in e===this.RenderMode_Static_Str?n=this.propertiesStatic:e===this.RenderMode_Dynamic_Str&&(n=this.propertiesDynamic),t.setGlobalPreset(e,i,!0),n)"Global"!=s&&this.updatePropertyUI(s,i,e);"Custom"!==i&&this.setSaveToCustomFlag(e,!1)},w.prototype.setSaveToCustomFlag=function(e,t){e===this.RenderMode_Static_Str?this.saveToCustom_Static=t:e===this.RenderMode_Dynamic_Str&&(this.saveToCustom_Dynamic=t)},w.prototype.addEventListenerLinkButton=function(e,n){var s=this;e.addEventListener("buttonclick",function(){if(n.disabled)t.setLinkedPresetStatus(!1),t.setCurrentRenderMode("Static"),s.currentPresetMode="Static",n.disabled=!1,e.icon=i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png",s.EnableDisableDynamicControls(e,n);else{var l=t.getCurrentGlobalPreset("Static"),a=t.getPresetValue("Static",l);for(var o in a){var r=a[o];for(var c in r){var p=r[c];t.setAttributeOnDynamicMode("Dynamic",l,o,c,p)}}t.setLinkedPresetStatus(!0),n.disabled=!0,e.icon=i.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png",s.EnableDisableDynamicControls(e,n)}})},w.prototype.buildAntiAliasingView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});var n=i.getWebappsBaseUrl(),s=new UWA.Element("div",{class:"wux-container"}).inject(t),l=[u.PostProcessElements.NoAA,u.PostProcessElements.FXAA,u.PostProcessElements.SMAA,u.PostProcessElements.TAA,u.PostProcessElements.Iterative],a=["NoAA","FXAA","SMAA","TAA","Iterative"],o=new UWA.Element("label",{class:"wux-control-inline-container",text:"Anti-aliasing"}).inject(s);o.style.color="#3d3d3d",o.style.fontWeight="bold",o.setStyles({width:"205px"}),o.setStyle("vertical-align","top");for(var c=[],d=0;d<l.length;d++)c[d]={labelItem:l[d],valueItem:a[d]};var h=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1}).inject(s);if(h.getContent().style.width="27%",h.getContent().style.verticalAlign="top",h.getContent().id="AntiAliasing"+this.STATIC_STRING,h.tooltipInfos=new p({shortHelp:"Anti-aliasing is refined when the viewpoint is idle and nothing changes in the scene."}),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(s);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(s);var g=[];for(d=0;d<l.length-1;d++)g[d]={labelItem:l[d],valueItem:a[d]};var m=new r({elementsList:g,selectedIndex:1,enableSearchFlag:!1}).inject(s);return m.getContent().style.width="27%",m.getContent().style.verticalAlign="top",m.getContent().id="AntiAliasing"+this.DYNAMIC_STRING,m.tooltipInfos=new p({shortHelp:"Anti-aliasing is refined when the viewpoint is idle and nothing changes in the scene."}),this.touch&&(t.setStyles({width:"950px",height:"46px"}),o.setStyles({width:"270px"}),h.getContent().style.width="260px",m.getContent().style.width="260px"),e.propertiesStatic.AntiAliasing={},e.propertiesStatic.AntiAliasing.postProcCombo=h,e.propertiesDynamic.AntiAliasing={},e.propertiesDynamic.AntiAliasing.postProcCombo=m,e.addEventListenerComboBox("AntiAliasing",h,this.RenderMode_Static_Str),e.addEventListenerComboBox("AntiAliasing",m,this.RenderMode_Dynamic_Str),e.labelElements.PostProcessAALabel=o,e.staticHelpElements.PostProcessAAControl=h,e.dynamicHelpElements.PostProcessAAControl=m,this._effectSettings._isBlackListed("AntiAliasing")&&(this._toHide.push(s),this._toHide.push(t)),t},w.prototype.buildPixelcullingView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});var n=i.getWebappsBaseUrl(),s=new UWA.Element("div",{class:"wux-container"}).inject(t),l=new UWA.Element("label",{class:"wux-control-inline-container",text:"Pixel culling"}).inject(s);l.style.color="#3d3d3d",l.style.fontWeight="bold",l.setStyles({width:"198px"}),l.setStyle("vertical-align","top");var a=new c({minValue:0,maxValue:400,stepValue:1,initialValue:8}).inject(s);if(a.getContent().style.display="inline-block",a.getContent().style.verticalAlign="top",a.elements.slider.getContent().style.width="99px",a.elements.slider.getContent().style.height="20px",a.elements.spinBox.getContent().style.minWidth="60px",a.elements.spinBox.getContent().style.width="60px",a.elements.spinBox.getContent().style.verticalAlign="bottom",a.getContent().id="PixelCulling"+this.STATIC_STRING,a.setTooltips("Adds or removes display quality for objects.Even if you do not want to remove geometry, it is often useful to remove details you do not need to see. Set a low value if you want to see all the details, or a high value to remove details."),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(s);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(s);var o=new c({minValue:0,maxValue:400,stepValue:1,initialValue:8}).inject(s);return o.getContent().style.display="inline-block",o.getContent().style.verticalAlign="top",o.elements.slider.getContent().style.width="99px",o.elements.slider.getContent().style.height="20px",o.elements.spinBox.getContent().style.minWidth="60px",o.elements.spinBox.getContent().style.width="60px",o.elements.spinBox.getContent().style.verticalAlign="bottom",o.getContent().id="PixelCulling"+this.DYNAMIC_STRING,o.setTooltips("Adds or removes display quality for objects.Even if you do not want to remove geometry, it is often useful to remove details you do not need to see. Set a low value if you want to see all the details, or a high value to remove details."),this.touch&&(t.setStyles({width:"950px",height:"46px"}),l.setStyles({width:"270px"}),a.elements.spinBox.getContent().style.width="145px",a.elements.slider.getContent().style.width="105px",a.elements.slider.getContent().style.height="40px",o.elements.spinBox.getContent().style.width="145px",o.elements.slider.getContent().style.width="105px",o.elements.slider.getContent().style.height="40px"),e.propertiesStatic.PixelCulling={},e.propertiesStatic.PixelCulling.pixelCullingSpinBox=a,e.propertiesDynamic.PixelCulling={},e.propertiesDynamic.PixelCulling.pixelCullingSpinBox=o,e.addEventListenerSpinBox("PixelCulling",a,this.RenderMode_Static_Str),e.addEventListenerSpinBox("PixelCulling",o,this.RenderMode_Dynamic_Str),e.labelElements.CullMinPixelSizeLabel=l,e.staticHelpElements.CullMinPixelSizeControl=a,e.dynamicHelpElements.CullMinPixelSizeControl=o,this._effectSettings._isBlackListed("PixelCulling")&&(this._toHide.push(s),this._toHide.push(t)),t},w.prototype.buildTransparencyView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});for(var n=i.getWebappsBaseUrl(),s=new UWA.Element("div",{class:"wux-container"}).inject(t),l=[u.TransparencyElements.AlphaBlending,u.TransparencyElements.WeightedAverage],a=["AlphaBlending","WeightedAverage"],o=[],c=0;c<l.length;c++)o[c]={labelItem:l[c],valueItem:a[c]};var d=new UWA.Element("label",{class:"wux-control-inline-container",text:"Transparency"}).inject(s);d.style.color="#3d3d3d",d.style.fontWeight="bold",d.setStyles({width:"205px"}),d.setStyle("vertical-align","top");var h=new r({elementsList:o,selectedIndex:1,enableSearchFlag:!1}).inject(s);if(h.getContent().style.width="27%",h.getContent().style.verticalAlign="top",h.getContent().id="Transparency"+this.STATIC_STRING,h.tooltipInfos=new p({shortHelp:"Default (Alpha Blending Without Sort), Low(Alpha Blending), Medium(Alpha Blending), High(Order Independent Transparency)"}),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(s);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(s);var g=new r({elementsList:o,selectedIndex:1,enableSearchFlag:!1}).inject(s);return g.getContent().style.width="27%",g.getContent().style.verticalAlign="top",g.getContent().id="Transparency"+this.DYNAMIC_STRING,g.tooltipInfos=new p({shortHelp:"Default (Alpha Blending Without Sort), Low(Alpha Blending), Medium(Alpha Blending), High(Order Independent Transparency)"}),this.touch&&(t.setStyles({width:"950px",height:"46px"}),d.setStyles({width:"270px"}),h.getContent().style.width="260px",g.getContent().style.width="260px"),e.propertiesStatic.Transparency={},e.propertiesStatic.Transparency.transparencyCombo=h,e.propertiesDynamic.Transparency={},e.propertiesDynamic.Transparency.transparencyCombo=g,e.addEventListenerComboBox("Transparency",h,this.RenderMode_Static_Str),e.addEventListenerComboBox("Transparency",g,this.RenderMode_Dynamic_Str),e.labelElements.TranspModeLabel=d,e.staticHelpElements.TranspModeControl=h,e.dynamicHelpElements.TranspModeControl=g,this._effectSettings._isBlackListed("Transparency")&&(this._toHide.push(s),this._toHide.push(t)),t},w.prototype.buildShadowView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"600px",display:"inline-block"});for(var s=i.getWebappsBaseUrl(),l=[u.Elements.Low,u.Elements.Medium,u.Elements.High,u.Elements.Ultra,u.Elements.Default,u.Elements.Custom],a=["Low","Medium","High","Ultra","Default","Custom"],c=[],d=0;d<l.length;d++)c[d]={labelItem:l[d],valueItem:a[d]};var h=new UWA.createElement("div",{class:"wux-container"}).inject(t);h.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px"}),h.setStyle("vertical-align","top");var g=new n({emphasize:"primary",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"lite"}).inject(h);g.getContent().style.verticalAlign="top",g.getContent().id="ExpanderButtonShadows";var m=new UWA.Element("label",{class:"wux-control-inline-container",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},text:"Shadows"}).inject(h);m.style.color="#3d3d3d",m.style.fontWeight="bold",m.setStyles({width:"204px"}),m.setStyles({marginTop:"8px"}),m.setStyles({marginLeft:"12px"}),m.setStyle("vertical-align","top");var y=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});if(y.getContent().style.width="27%",y.getContent().style.verticalAlign="top",y.getContent().style.marginTop="5px",y.getContent().id="Shadows"+this.STATIC_STRING,y.tooltipInfos=new p({shortHelp:"Change Shadows properties to selected preset(Low/Medium/High/Ultra)"}),y.inject(h),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(h);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(h);var S=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});S.getContent().style.width="27%",S.getContent().style.verticalAlign="top",S.getContent().style.marginTop="5px",S.getContent().id="Shadows"+this.DYNAMIC_STRING,S.tooltipInfos=new p({shortHelp:"Change Shadows properties to selected preset(Low/Medium/High/Ultra)"}),S.inject(h);var w=new UWA.Element("div",{class:"wux-container"}).inject(t);w.setStyles({position:"relative",display:"inline-block",width:"600px"}),w.setStyles({display:"none"});var b=new UWA.Element("div",{class:"wux-container"}).inject(w);if(b.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var x=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Ground shadows"}).inject(b);x.setStyles({position:"relative"}),x.style.color="#3d3d3d",x.setStyles({width:"235px"}),x.setStyle("vertical-align","top");var v=new o({type:"switch",label:""}).inject(b);if(v.getContent().style.width="21.9%",v.getContent().style.display="inline-block",v.getContent().style.verticalAlign="top",v.getContent().id="AllowGroundShadows"+this.STATIC_STRING,v.tooltipInfos=new p({shortHelp:"Permit ground shadow computation whenever it is not costly."}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var C=new o({type:"switch",label:""}).inject(b);C.getContent().style.width="21.9%",C.getContent().style.display="inline-block",C.getContent().style.verticalAlign="top",C.getContent().id="AllowGroundShadows"+this.DYNAMIC_STRING,C.tooltipInfos=new p({shortHelp:"Permit ground shadow computation whenever it is not costly."});var f=new UWA.Element("div",{class:"wux-container"}).inject(w);if(f.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f);var I=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Inter-object shadows"}).inject(f);I.setStyles({position:"relative"}),I.style.color="#3d3d3d",I.setStyles({width:"235px"}),I.setStyle("vertical-align","top");var A=new o({type:"switch",label:""}).inject(f);if(A.getContent().style.width="21.9%",A.getContent().style.display="inline-block",A.getContent().style.verticalAlign="top",A.getContent().id="AllowInterObjectShadows"+this.STATIC_STRING,A.tooltipInfos=new p({shortHelp:"Activate/deactivate inter-object shadow."}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f);var E=new o({type:"switch",label:""}).inject(f);E.getContent().style.width="21.9%",E.getContent().style.display="inline-block",E.getContent().style.verticalAlign="top",E.getContent().id="AllowInterObjectShadows"+this.DYNAMIC_STRING,E.tooltipInfos=new p({shortHelp:"Activate/deactivate inter-object shadow."});var M=new UWA.Element("div",{class:"wux-container"}).inject(w);if(M.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(M);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(M);var L=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Transparent-object shadows"}).inject(M);L.setStyles({position:"relative"}),L.style.color="#3d3d3d",L.setStyles({width:"235px"}),L.setStyle("vertical-align","top");var U=new o({type:"switch",label:""}).inject(M);if(U.getContent().style.width="21.9%",U.getContent().style.display="inline-block",U.getContent().style.verticalAlign="top",U.getContent().id="AllowTransparentObjectShadows"+this.STATIC_STRING,U.tooltipInfos=new p({shortHelp:"Activate/deactivate transparent-object shadow."}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(M),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(M);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(M),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(M);var D=new o({type:"switch",label:""}).inject(M);D.getContent().style.width="21.9%",D.getContent().style.display="inline-block",D.getContent().style.verticalAlign="top",D.getContent().id="AllowTransparentObjectShadows"+this.DYNAMIC_STRING,D.tooltipInfos=new p({shortHelp:"Activate/deactivate transparent-object shadow."});var T=[u.FilteringElements.PCFOptimized,u.FilteringElements.ESM,u.FilteringElements.Poisson],B=["PCFOptimized","ESM","poisson"],j=new UWA.Element("div",{class:"wux-container"}).inject(w);if(j.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(j);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(j);var R=new UWA.Element("label",{class:"wux-control-inline-container",text:"Filtering to use"}).inject(j);R.setStyles({position:"relative"}),R.style.color="#3d3d3d",R.setStyles({width:"235px"}),R.setStyle("vertical-align","top");for(c=[],d=0;d<T.length;d++)c[d]={labelItem:T[d],valueItem:B[d]};var G=new r({elementsList:c,selectedIndex:2,enableSearchFlag:!1}).inject(j);if(G.getContent().style.width="21.9%",G.getContent().style.verticalAlign="top",G.getContent().id="ShadowFilter"+this.STATIC_STRING,G.tooltipInfos=new p({shortHelp:"PCF-optimized (Percentage Closer Filtering), ESM(Exponential shadow map), Poisson()"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(j),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(j);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(j),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(j);var V=new r({elementsList:c,selectedIndex:2,enableSearchFlag:!1}).inject(j);V.getContent().style.width="21.9%",V.getContent().style.verticalAlign="top",V.getContent().id="ShadowFilter"+this.DYNAMIC_STRING,V.tooltipInfos=new p({shortHelp:"PCF-optimized (Percentage Closer Filtering), ESM(Exponential shadow map), Poisson()"});T=[u.Elements.Low,u.Elements.Medium,u.Elements.High],B=["Low","Medium","High"];var _=new UWA.Element("div",{class:"wux-container"}).inject(w);if(_.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(_);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(_);var W=new UWA.Element("label",{class:"wux-control-inline-container",text:"Filtering quality"}).inject(_);W.setStyles({position:"relative"}),W.style.color="#3d3d3d",W.setStyles({width:"235px"}),W.setStyle("vertical-align","top");for(c=[],d=0;d<T.length;d++)c[d]={labelItem:T[d],valueItem:B[d]};var F=new r({elementsList:c,selectedIndex:2,enableSearchFlag:!1}).inject(_);if(F.getContent().style.width="21.9%",F.getContent().style.verticalAlign="top",F.getContent().id="ShadowQuality"+this.STATIC_STRING,F.tooltipInfos=new p({shortHelp:"Filtering quality"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(_),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(_);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(_),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(_);var Q=new r({elementsList:c,selectedIndex:2,enableSearchFlag:!1}).inject(_);Q.getContent().style.width="21.9%",Q.getContent().style.verticalAlign="top",Q.getContent().id="ShadowQuality"+this.DYNAMIC_STRING,Q.tooltipInfos=new p({shortHelp:"Filtering quality"});var P=this.touch;return g.addEventListener("click",function(){"none"==w.style.display?(g.icon={iconName:"expand-down",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},w.setStyles({display:"inline-block"}),P?t.setStyles({height:"272px"}):t.setStyles({height:"192px"})):(g.icon={iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},w.setStyles({display:"none"}),P?t.setStyles({height:"48px"}):t.setStyles({height:"32px"}))}),this.touch&&(h.setStyles({width:"950px",height:"46px"}),m.setStyles({width:"267px"}),y.getContent().style.width="260px",S.getContent().style.width="260px",w.setStyles({width:"950px"}),b.setStyles({height:"46px"}),x.setStyles({width:"294px"}),v.getContent().style.width="220px",C.getContent().style.width="220px",f.setStyles({height:"46px"}),I.setStyles({width:"294px"}),A.getContent().style.width="220px",E.getContent().style.width="220px",M.setStyles({height:"46px"}),L.setStyles({width:"294px"}),U.getContent().style.width="220px",D.getContent().style.width="220px",j.setStyles({height:"46px"}),R.setStyles({width:"294px"}),G.getContent().style.width="220px",V.getContent().style.width="220px",_.setStyles({height:"46px"}),W.setStyles({width:"294px"}),F.getContent().style.width="220px",Q.getContent().style.width="220px"),e.propertiesStatic.Shadows={},e.propertiesStatic.Shadows.presetCombo=y,e.propertiesStatic.Shadows.groundShadowsToggle=v,e.propertiesStatic.Shadows.interObjectShadowsToggle=A,e.propertiesStatic.Shadows.transObjectShadowsToggle=U,e.propertiesStatic.Shadows.filteringTypeCombo=G,e.propertiesStatic.Shadows.filteringQualityCombo=F,e.propertiesDynamic.Shadows={},e.propertiesDynamic.Shadows.presetCombo=S,e.propertiesDynamic.Shadows.groundShadowsToggle=C,e.propertiesDynamic.Shadows.interObjectShadowsToggle=E,e.propertiesDynamic.Shadows.transObjectShadowsToggle=D,e.propertiesDynamic.Shadows.filteringTypeCombo=V,e.propertiesDynamic.Shadows.filteringQualityCombo=Q,e.addEventListenerPropertyPreset("Shadows",y,this.RenderMode_Static_Str),e.addEventListenerPropertyPreset("Shadows",S,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Shadows",v,this.RenderMode_Static_Str),e.addEventListenerToggle("Shadows",C,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Shadows",A,this.RenderMode_Static_Str),e.addEventListenerToggle("Shadows",E,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Shadows",U,this.RenderMode_Static_Str),e.addEventListenerToggle("Shadows",D,this.RenderMode_Dynamic_Str),e.addEventListenerComboBox("Shadows",G,this.RenderMode_Static_Str),e.addEventListenerComboBox("Shadows",V,this.RenderMode_Dynamic_Str),e.addEventListenerComboBox("Shadows",F,this.RenderMode_Static_Str),e.addEventListenerComboBox("Shadows",Q,this.RenderMode_Dynamic_Str),e.labelElements.ShadowsLabel=m,e.labelElements.AllowGroundShadowLabel=x,e.labelElements.AllowInterObjShadowLabel=I,e.labelElements.AllowTransObjShadowLabel=L,e.labelElements.ShadowFilteringLabel=R,e.labelElements.ShadowFilteringQualityLabel=W,e.staticHelpElements.ShadowsControl=y,e.staticHelpElements.AllowGroundShadowControl=v,e.staticHelpElements.AllowInterObjShadowControl=A,e.staticHelpElements.AllowTransObjShadowControl=U,e.staticHelpElements.ShadowFilteringControl=G,e.staticHelpElements.ShadowFilteringQualityControl=F,e.dynamicHelpElements.ShadowsControl=S,e.dynamicHelpElements.AllowGroundShadowControl=C,e.dynamicHelpElements.AllowInterObjShadowControl=E,e.dynamicHelpElements.AllowTransObjShadowControl=D,e.dynamicHelpElements.ShadowFilteringControl=V,e.dynamicHelpElements.ShadowFilteringQualityControl=Q,this._effectSettings._isBlackListed("InterObjectShadows")&&(this._toHide.push(_),this._toHide.push(j),this._toHide.push(f)),this._effectSettings._isBlackListed("GroundShadows")&&this._toHide.push(b),this._effectSettings._isBlackListed("TransparentObjectShadows")&&this._toHide.push(M),this._effectSettings._isBlackListed("InterObjectShadows")&&this._effectSettings._isBlackListed("GroundShadows")&&this._effectSettings._isBlackListed("TransparentObjectShadows")&&this._toHide.push(t),t},w.prototype.buildReflectionsView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"600px",display:"inline-block"});for(var s=i.getWebappsBaseUrl(),l=[u.Elements.Low,u.Elements.Medium,u.Elements.High,u.Elements.Ultra,u.Elements.Default,u.Elements.Custom],a=["Low","Medium","High","Ultra","Default","Custom"],c=[],d=0;d<l.length;d++)c[d]={labelItem:l[d],valueItem:a[d]};var h=new UWA.Element("div",{class:"wux-container"}).inject(t);h.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px"}),h.setStyle("vertical-align","top");var g=new n({emphasize:"primary",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"lite",type:"standard"}).inject(h);g.getContent().style.verticalAlign="top",g.getContent().id="ExpanderButtonReflections";var m=new UWA.Element("label",{class:"wux-control-inline-container",text:"Reflections"}).inject(h);m.style.color="#3d3d3d",m.style.fontWeight="bold",m.setStyles({width:"204px"}),m.setStyles({marginTop:"8px"}),m.setStyles({marginLeft:"12px"}),m.setStyle("vertical-align","top");var y=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});if(y.getContent().style.width="27%",y.getContent().style.verticalAlign="top",y.getContent().style.marginTop="5px",y.getContent().id="Reflections"+this.STATIC_STRING,y.tooltipInfos=new p({shortHelp:"Change Reflections properties to selected preset(Low/Medium/High/Ultra)"}),y.inject(h),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(h);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(h);var S=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});S.getContent().style.width="27%",S.getContent().style.verticalAlign="top",S.getContent().style.marginTop="5px",S.getContent().id="Reflections"+this.DYNAMIC_STRING,S.tooltipInfos=new p({shortHelp:"Change Reflections properties to selected preset(Low/Medium/High/Ultra)"}),S.inject(h);var w=new UWA.Element("div",{class:"wux-container"}).inject(t);w.setStyles({position:"relative",display:"inline-block",width:"600px"}),w.setStyles({display:"none"});var b=new UWA.Element("div",{class:"wux-container"}).inject(w);if(b.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var x=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Reflections on ground"}).inject(b);x.setStyles({position:"relative"}),x.style.color="#3d3d3d",x.setStyles({width:"235px"}),x.setStyle("vertical-align","top");var v=new o({type:"switch",label:""}).inject(b);if(v.getContent().style.width="21.9%",v.getContent().style.display="inline-block",v.getContent().style.verticalAlign="top",v.getContent().id="AllowGroundReflection"+this.STATIC_STRING,v.tooltipInfos=new p({shortHelp:"Allow the Reflection on ground effect. But if the ambiance does not activate this effect, the quality manager will not force it. The model is reflected on the ground."}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var C=new o({type:"switch",label:""}).inject(b);C.getContent().style.width="21.9%",C.getContent().style.display="inline-block",C.getContent().style.verticalAlign="top",C.getContent().id="AllowGroundReflection"+this.DYNAMIC_STRING,C.tooltipInfos=new p({shortHelp:"Allow the Reflection on ground effect. But if the ambiance does not activate this effect, the quality manager will not force it. The model is reflected on the ground."});var f=new UWA.Element("div",{class:"wux-container"}).inject(w);if(f.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f);var I=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Reflections between objects"}).inject(f);I.setStyles({position:"relative"}),I.style.color="#3d3d3d",I.setStyles({width:"235px"}),I.setStyle("vertical-align","top");var A=new o({type:"switch",label:""}).inject(f);if(A.getContent().style.width="21.9%",A.getContent().style.display="inline-block",A.getContent().style.verticalAlign="top",A.getContent().id="AllowInterObjectReflections"+this.STATIC_STRING,A.tooltipInfos=new p({shortHelp:"Glossy materials can reflect other objects in the scene."}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(f);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(f);var E=new o({type:"switch",label:""}).inject(f);E.getContent().style.width="21.9%",E.getContent().style.display="inline-block",E.getContent().style.verticalAlign="top",E.getContent().id="AllowInterObjectReflections"+this.DYNAMIC_STRING,E.tooltipInfos=new p({shortHelp:"Glossy materials can reflect other objects in the scene."});var M=this.touch;return g.addEventListener("click",function(){"none"==w.style.display?(w.setStyles({display:"inline-block"}),g.icon={iconName:"expand-down",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},M?t.setStyles({height:"138px"}):t.setStyles({height:"96px"})):(w.setStyles({display:"none"}),g.icon={iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},M?t.setStyles({height:"46px"}):t.setStyles({height:"32px"}))}),this.touch&&(h.setStyles({width:"950px",height:"46px"}),m.setStyles({width:"267px"}),y.getContent().style.width="260px",S.getContent().style.width="260px",w.setStyles({width:"950px"}),b.setStyles({height:"46px"}),x.setStyles({width:"294px"}),v.getContent().style.width="220px",C.getContent().style.width="220px",f.setStyles({height:"46px"}),I.setStyles({width:"294px"}),A.getContent().style.width="220px",E.getContent().style.width="220px"),e.propertiesStatic.Reflections={},e.propertiesStatic.Reflections.presetCombo=y,e.propertiesStatic.Reflections.reflectionsToggle=v,e.propertiesStatic.Reflections.interObjectReflectionsToggle=A,e.propertiesDynamic.Reflections={},e.propertiesDynamic.Reflections.presetCombo=S,e.propertiesDynamic.Reflections.reflectionsToggle=C,e.propertiesDynamic.Reflections.interObjectReflectionsToggle=E,e.addEventListenerPropertyPreset("Reflections",y,this.RenderMode_Static_Str),e.addEventListenerPropertyPreset("Reflections",S,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Reflections",v,this.RenderMode_Static_Str),e.addEventListenerToggle("Reflections",C,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Reflections",A,this.RenderMode_Static_Str),e.addEventListenerToggle("Reflections",E,this.RenderMode_Dynamic_Str),e.labelElements.ReflectionsLabel=m,e.labelElements.GroundReflModeLabel=x,e.labelElements.InterObjReflectionsLabel=I,e.staticHelpElements.ReflectionsControl=y,e.staticHelpElements.GroundReflModeControl=v,e.staticHelpElements.InterObjReflectionsControl=A,e.dynamicHelpElements.ReflectionsControl=S,e.dynamicHelpElements.GroundReflModeControl=C,e.dynamicHelpElements.InterObjReflectionsControl=E,this._effectSettings._isBlackListed("SSR")&&this._toHide.push(f),this._effectSettings._isBlackListed("GroundReflection")&&this._toHide.push(b),this._effectSettings._isBlackListed("SSR")&&this._effectSettings._isBlackListed("GroundReflection")&&this._toHide.push(t),t},w.prototype.buildRefractionsView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"600px",display:"inline-block"});for(var s=i.getWebappsBaseUrl(),l=[u.Elements.Low,u.Elements.Medium,u.Elements.High,u.Elements.Ultra,u.Elements.Default,u.Elements.Custom],a=["Low","Medium","High","Ultra","Default","Custom"],c=[],d=0;d<l.length;d++)c[d]={labelItem:l[d],valueItem:a[d]};var h=new UWA.Element("div",{class:"wux-container"}).inject(t);h.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px"}),h.setStyle("vertical-align","top");var g=new n({emphasize:"primary",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"lite",type:"standard"}).inject(h);g.getContent().style.verticalAlign="top",g.getContent().id="ExpanderButtonRefractions";var m=new UWA.Element("label",{class:"wux-control-inline-container",text:"Refractions"}).inject(h);m.style.color="#3d3d3d",m.style.fontWeight="bold",m.setStyles({width:"204px"}),m.setStyles({marginTop:"8px"}),m.setStyles({marginLeft:"12px"}),m.setStyle("vertical-align","top");var y=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});if(y.getContent().style.width="27%",y.getContent().style.verticalAlign="top",y.getContent().style.marginTop="5px",y.getContent().id="Refractions"+this.STATIC_STRING,y.tooltipInfos=new p({shortHelp:"Change Refractions properties to selected preset(Low/Medium/High/Ultra)"}),y.inject(h),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(h);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(h);var S=new r({elementsList:c,selectedIndex:1,enableSearchFlag:!1});S.getContent().style.width="27%",S.getContent().style.verticalAlign="top",S.getContent().style.marginTop="5px",S.getContent().id="Refractions"+this.DYNAMIC_STRING,S.tooltipInfos=new p({shortHelp:"Change Refractions properties to selected preset(Low/Medium/High/Ultra)"}),S.inject(h);var w=new UWA.Element("div",{class:"wux-container"}).inject(t);w.setStyles({position:"relative",display:"inline-block",width:"600px"}),w.setStyles({display:"none"});var b=new UWA.Element("div",{class:"wux-container"}).inject(w);if(b.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var x=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Refractions between objects"}).inject(b);x.setStyles({position:"relative"}),x.style.color="#3d3d3d",x.setStyles({width:"235px"}),x.setStyle("vertical-align","top");var v=new o({type:"switch",label:""}).inject(b);if(v.getContent().style.width="21.9%",v.getContent().style.display="inline-block",v.getContent().style.verticalAlign="top",v.getContent().id="AllowInterObjectRefractions"+this.STATIC_STRING,v.tooltipInfos=new p({shortHelp:"Transparent materials can refract other objects in the scene."}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(b);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(b);var C=new o({type:"switch",label:""}).inject(b);C.getContent().style.width="21.9%",C.getContent().style.display="inline-block",C.getContent().style.verticalAlign="top",C.getContent().id="AllowInterObjectRefractions"+this.DYNAMIC_STRING,C.tooltipInfos=new p({shortHelp:"Transparent materials can refract other objects in the scene."});var f=this.touch;return g.addEventListener("click",function(){"none"==w.style.display?(w.setStyles({display:"inline-block"}),g.icon={iconName:"expand-down",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},f?t.setStyles({height:"92px"}):t.setStyles({height:"64px"})):(w.setStyles({display:"none"}),g.icon={iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},f?t.setStyles({height:"46px"}):t.setStyles({height:"32px"}))}),this.touch&&(h.setStyles({width:"950px",height:"46px"}),m.setStyles({width:"267px"}),y.getContent().style.width="260px",S.getContent().style.width="260px",w.setStyles({width:"950px"}),b.setStyles({height:"46px"}),x.setStyles({width:"294px"}),v.getContent().style.width="220px",C.getContent().style.width="220px"),e.propertiesStatic.Refractions={},e.propertiesStatic.Refractions.presetCombo=y,e.propertiesStatic.Refractions.interObjectRefractionsToggle=v,e.propertiesDynamic.Refractions={},e.propertiesDynamic.Refractions.presetCombo=S,e.propertiesDynamic.Refractions.interObjectRefractionsToggle=C,e.addEventListenerPropertyPreset("Refractions",y,this.RenderMode_Static_Str),e.addEventListenerPropertyPreset("Refractions",S,this.RenderMode_Dynamic_Str),e.addEventListenerToggle("Refractions",v,this.RenderMode_Static_Str),e.addEventListenerToggle("Refractions",C,this.RenderMode_Dynamic_Str),e.labelElements.RefractionsLabel=m,e.labelElements.InterObjRefractionsLabel=x,e.staticHelpElements.RefractionsControl=y,e.staticHelpElements.InterObjRefractionsControl=v,e.dynamicHelpElements.RefractionsControl=S,e.dynamicHelpElements.InterObjRefractionsControl=C,this._effectSettings._isBlackListed("SSRefraction")&&(this._toHide.push(t),this._toHide.push(h)),t},w.prototype.buildAmbientOcclusionView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px",left:"23px",verticalAlign:"top"});for(var n=i.getWebappsBaseUrl(),s=new UWA.Element("div",{class:"wux-container"}).inject(t),l=[u.SSAOElements.None,u.SSAOElements.Low,u.SSAOElements.Medium,u.SSAOElements.High],a=[0,8,16,32],o=[],c=0;c<l.length;c++)o[c]={labelItem:l[c],valueItem:a[c]};var d=new UWA.Element("label",{class:"wux-control-inline-container",text:"Allow Ambient occlusion"}).inject(s);d.style.color="#3d3d3d",d.style.fontWeight="bold",d.setStyles({width:"205px"}),d.setStyle("vertical-align","top");var h=new r({elementsList:o,selectedIndex:1,enableSearchFlag:!1}).inject(s);if(h.getContent().style.width="27%",h.getContent().style.verticalAlign="top",h.getContent().id="NoOfSamples"+this.STATIC_STRING,h.tooltipInfos=new p({shortHelp:"Allow the Ambient Occlusion to be activated on the viewer. But if the ambiance does not activate this effect, the quality manager will not force it. The number of samples defines the quality of the Ambient Occlusion.The more the better."}),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(s);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(s);var g=new r({elementsList:o,selectedIndex:1,enableSearchFlag:!1}).inject(s);return g.getContent().style.width="27%",g.getContent().style.verticalAlign="top",g.getContent().id="NoOfSamples"+this.DYNAMIC_STRING,g.tooltipInfos=new p({shortHelp:"Allow the Ambient Occlusion to be activated on the viewer. But if the ambiance does not activate this effect, the quality manager will not force it. The number of samples defines the quality of the Ambient Occlusion.The more the better."}),this.touch&&(t.setStyles({width:"950px",height:"46px"}),d.setStyles({width:"270px"}),h.getContent().style.width="260px",g.getContent().style.width="260px"),e.propertiesStatic.AmbientOcclusion={},e.propertiesStatic.AmbientOcclusion.SSAOCombo=h,e.propertiesDynamic.AmbientOcclusion={},e.propertiesDynamic.AmbientOcclusion.SSAOCombo=g,e.addEventListenerComboBox("AmbientOcclusion",h,this.RenderMode_Static_Str),e.addEventListenerComboBox("AmbientOcclusion",g,this.RenderMode_Dynamic_Str),e.labelElements.OcclusionLabel=d,e.staticHelpElements.SSAOSettingControl=h,e.dynamicHelpElements.SSAOSettingControl=g,this._effectSettings._isBlackListed("SSAO")&&(this._toHide.push(t),this._toHide.push(s)),t},w.prototype.buildDepthBufferView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});var n=i.getWebappsBaseUrl(),s=new UWA.Element("div",{class:"wux-container"}).inject(t),l=new UWA.Element("label",{class:"wux-control-inline-container",text:"Depth Flickering Reduction"}).inject(s);l.style.color="#3d3d3d",l.style.fontWeight="bold",l.setStyles({width:"205px"}),l.setStyle("vertical-align","top");var a=new o({type:"switch",label:""}).inject(s);if(a.getContent().style.width="27%",a.getContent().style.display="inline-block",a.getContent().style.verticalAlign="top",a.getContent().id="DepthFlickeringReduction"+this.STATIC_STRING,a.tooltipInfos=new p({shortHelp:"Reduces Flickering effect of overlapping surfaces"}),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(s);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(s);var r=new o({type:"switch",label:""}).inject(s);return r.getContent().style.width="27%",r.getContent().style.display="inline-block",r.getContent().style.verticalAlign="top",r.getContent().id="DepthFlickeringReduction"+this.DYNAMIC_STRING,r.tooltipInfos=new p({shortHelp:"Reduces Flickering effect of overlapping surfaces"}),this.touch&&(t.setStyles({width:"950px",height:"46px"}),l.setStyles({width:"270px"}),a.getContent().style.width="260px",r.getContent().style.width="260px"),e.propertiesStatic.DepthBufferOptions={},e.propertiesStatic.DepthBufferOptions.depthToggle=a,e.propertiesDynamic.DepthBufferOptions={},e.propertiesDynamic.DepthBufferOptions.depthToggle=r,e.addEventListenerToggle("DepthBufferOptions",a,this.RenderMode_Static_Str),e.addEventListenerToggle("DepthBufferOptions",r,this.RenderMode_Dynamic_Str),e.labelElements.AllowDepthBufferLabel=l,e.staticHelpElements.AllowDepthBufferControl=a,e.dynamicHelpElements.AllowDepthBufferControl=r,this._effectSettings._isBlackListed("ZPrePass")&&(this._toHide.push(t),this._toHide.push(s)),t},w.prototype.buildBatchingView=function(){var e=UWA.Element("div",{class:"wux-container"});e.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});i.getWebappsBaseUrl();var n=new UWA.Element("div",{class:"wux-container"}).inject(e),s=new UWA.Element("label",{class:"wux-control-inline-container",text:"Large assembly download boost"}).inject(n);s.style.color="#3d3d3d",s.style.fontWeight="bold",s.setStyles({width:"205px"}),s.setStyle("vertical-align","top");var l=new o({type:"switch",label:"",checkFlag:t.getBatching()}).inject(n);return l.getContent().style.width="27%",l.getContent().style.display="inline-block",l.getContent().style.verticalAlign="top",l.getContent().id="BatchingFlickeringReduction"+this.STATIC_STRING,l.tooltipInfos=new p({shortHelp:"Large assembly download boost (page refresh needed)"}),this.touch&&(e.setStyles({width:"950px",height:"46px"}),s.setStyles({width:"270px"}),l.getContent().style.width="260px"),this.addEventListenerBatchingToggle("Batching",l),this.labelElements.Batching=s,this.staticHelpElements.Batching=l,e},w.prototype.buildLocalCacheView=function(){var e=this,n=UWA.Element("div",{class:"wux-container"});n.setStyles({position:"relative",left:"23px",width:"500px",height:"48px",verticalAlign:"top"});i.getWebappsBaseUrl();var s=new UWA.Element("div",{class:"wux-container"}).inject(n),l=new UWA.Element("label",{class:"wux-control-inline-container",text:"Enable navigation cache"}).inject(s);l.style.color="#3d3d3d",l.style.fontWeight="bold",l.setStyles({width:"205px"}),l.setStyle("vertical-align","top");var r=new o({type:"switch",label:"",checkFlag:t.getLocalCache()}).inject(s);r.getContent().style.width="27%",r.getContent().style.display="inline-block",r.getContent().style.verticalAlign="top",r.getContent().id="LocalCacheFlickeringReduction"+this.STATIC_STRING,r.tooltipInfos=new p({shortHelp:"Activate models local cache."}),this.touch&&(n.setStyles({width:"950px",height:"46px"}),l.setStyles({width:"270px"}),r.getContent().style.width="260px"),e.addEventListenerLocalCacheToggle("LocalCache",r),e.labelElements.LocalCache=l,e.staticHelpElements.LocalCache=r;var c=new UWA.Element("div",{class:"wux-container"}).inject(n),d=new UWA.Element("label",{class:"wux-control-inline-container",text:"Navigation cache max size (MB)"}).inject(c);d.style.color="#3d3d3d",d.style.fontWeight="bold",d.setStyles({width:"205px"}),d.setStyle("vertical-align","center");var h=new a({minValue:0,maxValue:2048,stepValue:1,value:t.getLocalCacheSize(),decimals:0}).inject(c);return h.getContent().style.width="60px",h.getContent().id="LocalCacheSizeFlickeringReduction"+this.STATIC_STRING,h.tooltipInfos=new p({shortHelp:"Local cache maximum size."}),this.touch&&(n.setStyles({width:"950px",height:"46px"}),d.setStyles({width:"270px"}),localCacheSizeStaticToggle.getContent().style.width="260px"),e.addEventListenerLocalCacheSize("LocalCache",h),e.labelElements.LocalCacheSize=d,e.staticHelpElements.LocalCacheSize=h,n},w.prototype.buildMaterialView=function(){var e=this,t=new UWA.Element("div",{class:"wux-container"});t.setStyles({width:"600px",display:"inline-block"});for(var s=i.getWebappsBaseUrl(),l=[u.Elements.Low,u.Elements.Medium,u.Elements.High,u.Elements.Ultra,u.Elements.Default,u.Elements.Custom],a=["Low","Medium","High","Ultra","Default","Custom"],o=[],c=0;c<l.length;c++)o[c]={labelItem:l[c],valueItem:a[c]};var d=new UWA.Element("div",{class:"wux-container"}).inject(t);d.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px"}),d.setStyle("vertical-align","top");var h=new n({emphasize:"primary",icon:{iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"lite",type:"standard"}).inject(d);h.getContent().style.verticalAlign="top",h.getContent().id="ExpanderButtonMaterial";var g=new UWA.Element("label",{class:"wux-control-inline-container",text:"Material"}).inject(d);g.style.color="#3d3d3d",g.style.fontWeight="bold",g.setStyles({width:"204px"}),g.setStyles({marginTop:"8px"}),g.setStyles({marginLeft:"12px"}),g.setStyle("vertical-align","top");var m=new r({elementsList:o,selectedIndex:1,enableSearchFlag:!1});if(m.getContent().style.width="27%",m.getContent().style.verticalAlign="top",m.getContent().style.marginTop="5px",m.getContent().id="Material"+this.STATIC_STRING,m.tooltipInfos=new p({shortHelp:"Change Material properties to selected preset(Low/Medium/High/Ultra)"}),m.inject(d),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(d);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(d);var y=new r({elementsList:o,selectedIndex:1,enableSearchFlag:!1});y.getContent().style.width="27%",y.getContent().style.verticalAlign="top",y.getContent().style.marginTop="5px",y.getContent().id="Material"+this.DYNAMIC_STRING,y.tooltipInfos=new p({shortHelp:"Change Materials properties to selected preset(Low/Medium/High/Ultra)"}),y.inject(d);var S=new UWA.Element("div",{class:"wux-container"}).inject(t);S.setStyles({position:"relative",display:"inline-block",width:"600px"}),S.setStyles({display:"none"});var w=[u.Elements.Low,u.Elements.Medium,u.Elements.High,u.Elements.Ultra],b=["Low","Medium","High","Ultra"],x=new UWA.Element("div",{class:"wux-container"}).inject(S);if(x.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(x);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(x);var v=new UWA.Element("label",{class:"wux-control-inline-container",text:"Metallic Flakes Quality"}).inject(x);v.setStyles({position:"relative"}),v.style.color="#3d3d3d",v.setStyles({width:"235px"}),v.setStyle("vertical-align","top");for(o=[],c=0;c<w.length;c++)o[c]={labelItem:w[c],valueItem:b[c]};var C=new r({elementsList:o,selectedIndex:1,enableSearchFlag:!1}).inject(x);if(C.getContent().style.width="21.9%",C.getContent().style.verticalAlign="top",C.getContent().id="FlakesQuality"+this.STATIC_STRING,C.tooltipInfos=new p({shortHelp:""}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(x),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(x);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(x),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(x);var f=new r({elementsList:o,selectedIndex:1,enableSearchFlag:!1}).inject(x);f.getContent().style.width="21.9%",f.getContent().style.verticalAlign="top",f.getContent().id="FlakesQuality"+this.DYNAMIC_STRING,f.tooltipInfos=new p({shortHelp:""});w=[u.Elements.Low,u.Elements.High],b=["Low","High"];this._webGLV6Viewer._useViewPanel||(w.push(u.Elements.Ultra),b.push("Ultra"));var I=new UWA.Element("div",{class:"wux-container"}).inject(S);if(I.setStyles({position:"relative",height:"32px",right:"8px"}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(I);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(I);var A=new UWA.Element("label",{class:"wux-control-inline-container",text:"Default Material Quality"}).inject(I);A.setStyles({position:"relative"}),A.style.color="#3d3d3d",A.setStyles({width:"235px"}),A.setStyle("vertical-align","top");for(o=[],c=0;c<w.length;c++)o[c]={labelItem:w[c],valueItem:b[c]};var E=new r({elementsList:o,selectedIndex:1,enableSearchFlag:!1}).inject(I);if(E.getContent().style.width="21.9%",E.getContent().style.verticalAlign="top",E.getContent().id="DefaultMaterialQuality"+this.STATIC_STRING,E.tooltipInfos=new p({shortHelp:""}),this.touch)new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(I),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(I);else new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(I),new UWA.Element("img",{src:s+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(I);var M=new r({elementsList:o,selectedIndex:1,enableSearchFlag:!1}).inject(I);M.getContent().style.width="21.9%",M.getContent().style.verticalAlign="top",M.getContent().id="DefaultMaterialQuality"+this.DYNAMIC_STRING,M.tooltipInfos=new p({shortHelp:""});var L=this.touch;return h.addEventListener("click",function(){"none"==S.style.display?(S.setStyles({display:"inline-block"}),h.icon={iconName:"expand-down",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},L?t.setStyles({height:"138px"}):t.setStyles({height:"96px"})):(t.setStyles({position:"relative",display:"inline-block",width:"600px",height:"32px"}),S.setStyles({display:"none"}),h.icon={iconName:"expand-right",fontIconSize:"0.8x",fontIconFamily:WUXManagedFontIcons.Font3DS},L?t.setStyles({height:"46px"}):t.setStyles({height:"32px"}))}),this.touch&&(d.setStyles({width:"950px",height:"46px"}),g.setStyles({width:"267px"}),m.getContent().style.width="260px",y.getContent().style.width="260px",S.setStyles({width:"950px"}),x.setStyles({height:"46px"}),v.setStyles({width:"294px"}),C.getContent().style.width="220px",f.getContent().style.width="220px",I.setStyles({height:"46px"}),A.setStyles({width:"294px"}),E.getContent().style.width="220px",M.getContent().style.width="220px"),e.propertiesStatic.Material={},e.propertiesStatic.Material.presetCombo=m,e.propertiesStatic.Material.flakesQualityCombo=C,e.propertiesStatic.Material.defaultMaterialQualityCombo=E,e.propertiesDynamic.Material={},e.propertiesDynamic.Material.presetCombo=y,e.propertiesDynamic.Material.flakesQualityCombo=f,e.propertiesDynamic.Material.defaultMaterialQualityCombo=M,e.addEventListenerPropertyPreset("Material",m,this.RenderMode_Static_Str),e.addEventListenerPropertyPreset("Material",y,this.RenderMode_Dynamic_Str),e.addEventListenerComboBox("Material",C,this.RenderMode_Static_Str),e.addEventListenerComboBox("Material",f,this.RenderMode_Dynamic_Str),e.addEventListenerComboBox("Material",E,this.RenderMode_Static_Str),e.addEventListenerComboBox("Material",M,this.RenderMode_Dynamic_Str),e.labelElements.MaterialLabel=g,e.labelElements.FlakesQualityLabel=v,e.labelElements.DefaultMaterialQualityLabel=A,e.staticHelpElements.MaterialControl=m,e.staticHelpElements.FlakesQualityControl=C,e.staticHelpElements.DefaultMaterialQualityControl=E,e.dynamicHelpElements.MaterialControl=y,e.dynamicHelpElements.FlakesQualityControl=f,e.dynamicHelpElements.DefaultMaterialQualityControl=M,this._effectSettings._isBlackListed("FlakesQuality")&&this._toHide.push(x),this._effectSettings._isBlackListed("DefaultMaterialQuality")&&this._toHide.push(I),this._effectSettings._isBlackListed("DefaultMaterialQuality")&&this._effectSettings._isBlackListed("FlakesQuality")&&this._toHide.push(t),t},w.prototype.buildDownsamplingView=function(){var e=this,t=UWA.Element("div",{class:"wux-container"});t.setStyles({position:"relative",left:"23px",display:"inline-block",width:"600px",height:"32px",verticalAlign:"top"});var n=i.getWebappsBaseUrl(),s=new UWA.Element("div",{class:"wux-container"}).inject(t),l=new UWA.Element("label",{class:"wux-control-inline-container",text:"Downsampling Factor"}).inject(s);l.style.color="#3d3d3d",l.style.fontWeight="bold",l.setStyles({width:"198px"}),l.setStyle("vertical-align","top");var a=new c({minValue:.4,maxValue:1,decimals:1,stepValue:.1,initialValue:1}).inject(s);if(a.getContent().style.display="inline-block",a.getContent().style.verticalAlign="top",a.elements.slider.getContent().style.width="99px",a.elements.slider.getContent().style.height="20px",a.elements.spinBox.getContent().style.minWidth="60px",a.elements.spinBox.getContent().style.width="60px",a.elements.spinBox.getContent().style.verticalAlign="bottom",a.getContent().id="Downsampling"+this.STATIC_STRING,a.setTooltips(""),this.touch)new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLineTouch.png"}).inject(s);else new UWA.Element("img",{src:n+"QualityManagerUI/assets/icons/32/I_QSeparatorLine.png"}).inject(s);var o=new c({minValue:.4,maxValue:1,decimals:1,stepValue:.1,initialValue:1}).inject(s);return o.getContent().style.display="inline-block",o.getContent().style.verticalAlign="top",o.elements.slider.getContent().style.width="99px",o.elements.slider.getContent().style.height="20px",o.elements.spinBox.getContent().style.minWidth="60px",o.elements.spinBox.getContent().style.width="60px",o.elements.spinBox.getContent().style.verticalAlign="bottom",o.getContent().id="Downsampling"+this.DYNAMIC_STRING,o.setTooltips(""),this.touch&&(t.setStyles({width:"950px",height:"46px"}),l.setStyles({width:"270px"}),a.elements.spinBox.getContent().style.width="145px",a.elements.slider.getContent().style.width="105px",a.elements.slider.getContent().style.height="40px",o.elements.spinBox.getContent().style.width="145px",o.elements.slider.getContent().style.width="105px",o.elements.slider.getContent().style.height="40px"),e.propertiesStatic.Downsampling={},e.propertiesStatic.Downsampling.downsamplingSpinBox=a,e.propertiesDynamic.Downsampling={},e.propertiesDynamic.Downsampling.downsamplingSpinBox=o,e.addEventListenerSpinBox("Downsampling",a,this.RenderMode_Static_Str),e.addEventListenerSpinBox("Downsampling",o,this.RenderMode_Dynamic_Str),e.labelElements.DownsamplingLabel=l,e.staticHelpElements.DownsamplingControl=a,e.dynamicHelpElements.DownsamplingControl=o,this._effectSettings._isBlackListed("DownsamplingFactor")&&(this._toHide.push(s),this._toHide.push(t)),t},w.prototype.getPresetCombo=function(){for(var e=[u.Elements.Low,u.Elements.Medium,u.Elements.High,u.Elements.Ultra,u.Elements.Default,u.Elements.Custom],t=["Low","Medium","High","Ultra","Default","Custom"],i=[],n=0;n<e.length;n++)i[n]={labelItem:e[n],valueItem:t[n]};var s=new r({elementsList:i,selectedIndex:1,enableSearchFlag:!1});return s.getContent().id="CustomPreset",s},w.prototype.addEventListenerComboBox=function(e,t,i){var n=this;t.addEventListener("change",function(){var s=t.getContent().id.toString(),l=s.indexOf("_MODE_"),a=s.substring(0,l),o=t.currentValue;n.DoUpdatePropertyCombo()&&(S=!0,n.updateAttribute(e,a,o,i),S=!1)})},w.prototype.addEventListenerSpinBox=function(e,t,i){var n=this;t.elements.slider.addEventListener("change",function(e){t._createEvents()}),t.elements.spinBox.addEventListener("change",function(s){t._createEvents();var l=t.getContent().id.toString(),a=l.indexOf("_MODE_"),o=l.substring(0,a),r=t.elements.spinBox.value;n.DoUpdatePropertyCombo()&&(S=!0,n.updateAttribute(e,o,r,i),S=!1)})},w.prototype.addEventListenerToggle=function(e,t,i){var n=this;t.addEventListener("change",function(){var s=t.getContent().id.toString(),l=s.indexOf("_MODE_"),a=s.substring(0,l),o=t.checkFlag;switch(a){case"AllowInterObjectShadows":i==n.RenderMode_Static_Str?(n.propertiesStatic.Shadows.filteringTypeCombo.disabled=!o,n.propertiesStatic.Shadows.filteringQualityCombo.disabled=!o):(n.propertiesDynamic.Shadows.filteringTypeCombo.disabled=!o,n.propertiesDynamic.Shadows.filteringQualityCombo.disabled=!o)}n.DoUpdatePropertyCombo()&&(S=!0,n.updateAttribute(e,a,o,i),S=!1)})},w.prototype.addEventListenerBatchingToggle=function(e,t){var i=this;t.addEventListener("change",function(){var e=t.checkFlag;i.updateBatching(e)})},w.prototype.addEventListenerLocalCacheToggle=function(e,t){var i=this;t.addEventListener("change",function(){var e=t.checkFlag;i.updateLocalCache(e)})},w.prototype.addEventListenerLocalCacheSize=function(e,t){var i=this;t.addEventListener("change",function(e){var n=t.value;i.updateLocalCacheSize(n)})},w.prototype.updateBatching=function(e){this.batching=!!e},w.prototype.updateLocalCache=function(e){this.localCache=!!e},w.prototype.updateLocalCacheSize=function(e){this.localCacheSize=e},w.prototype.EnableDisableDynamicControls=function(e,t){var i=this;t.disabled?(i.propertiesDynamic.AntiAliasing.postProcCombo.disabled=!0,i.propertiesDynamic.PixelCulling.pixelCullingSpinBox.setDisabled(!0),i.propertiesDynamic.Transparency.transparencyCombo.disabled=!0,i.propertiesDynamic.Shadows.presetCombo.disabled=!0,i.propertiesDynamic.Shadows.groundShadowsToggle.disabled=!0,i.propertiesDynamic.Shadows.interObjectShadowsToggle.disabled=!0,i.propertiesDynamic.Shadows.transObjectShadowsToggle.disabled=!0,i.propertiesDynamic.Shadows.filteringTypeCombo.disabled=!0,i.propertiesDynamic.Shadows.filteringQualityCombo.disabled=!0,i.propertiesDynamic.Reflections.presetCombo.disabled=!0,i.propertiesDynamic.Reflections.reflectionsToggle.disabled=!0,i.propertiesDynamic.Reflections.interObjectReflectionsToggle.disabled=!0,i.propertiesDynamic.Refractions.presetCombo.disabled=!0,i.propertiesDynamic.Refractions.interObjectRefractionsToggle.disabled=!0,i.propertiesDynamic.AmbientOcclusion.SSAOCombo.disabled=!0,i.propertiesDynamic.DepthBufferOptions.depthToggle.disabled=!0,i.propertiesDynamic.Material.presetCombo.disabled=!0,i.propertiesDynamic.Material.flakesQualityCombo.disabled=!0,i.propertiesDynamic.Material.defaultMaterialQualityCombo.disabled=!0,i.propertiesDynamic.Downsampling.downsamplingSpinBox.setDisabled(!0)):(i.propertiesDynamic.AntiAliasing.postProcCombo.disabled=!1,i.propertiesDynamic.PixelCulling.pixelCullingSpinBox.setDisabled(!1),i.propertiesDynamic.Transparency.transparencyCombo.disabled=!1,i.propertiesDynamic.Shadows.presetCombo.disabled=!1,i.propertiesDynamic.Shadows.groundShadowsToggle.disabled=!1,i.propertiesDynamic.Shadows.interObjectShadowsToggle.disabled=!1,i.propertiesDynamic.Shadows.transObjectShadowsToggle.disabled=!1,i.updateParameterDependencies(),i.propertiesDynamic.Reflections.presetCombo.disabled=!1,i.propertiesDynamic.Reflections.reflectionsToggle.disabled=!1,i.propertiesDynamic.Reflections.interObjectReflectionsToggle.disabled=!1,i.propertiesDynamic.Refractions.presetCombo.disabled=!1,i.propertiesDynamic.Refractions.interObjectRefractionsToggle.disabled=!1,i.propertiesDynamic.AmbientOcclusion.SSAOCombo.disabled=!1,i.propertiesDynamic.DepthBufferOptions.depthToggle.disabled=!1,i.propertiesDynamic.Material.presetCombo.disabled=!1,i.propertiesDynamic.Material.flakesQualityCombo.disabled=!1,i.propertiesDynamic.Material.defaultMaterialQualityCombo.disabled=!0,i.propertiesDynamic.Downsampling.downsamplingSpinBox.setDisabled(!0))},w.prototype.initializedUIfromDB=function(){var e=this;g=!0;var i=t.getCurrentGlobalPreset(this.RenderMode_Static_Str),n=t.getCurrentGlobalPreset(this.RenderMode_Dynamic_Str);for(var s in m=!0,e.updateGlobalPresetUI(i,e.RenderMode_Static_Str),e.updateGlobalPresetUI(n,e.RenderMode_Dynamic_Str),m=!1,y=!0,e.propertiesStatic)"Global"!=s&&e.updatePropertyUI(s,i,this.RenderMode_Static_Str);for(var s in e.propertiesDynamic)"Global"!=s&&e.updatePropertyUI(s,n,this.RenderMode_Dynamic_Str);y=!1,g=!1,this.updateParameterDependencies()},w.prototype.updateParameterDependencies=function(){var e=this;e.propertiesStatic.Shadows.filteringTypeCombo.disabled=!e.propertiesStatic.Shadows.interObjectShadowsToggle.checkFlag,e.propertiesDynamic.Shadows.filteringTypeCombo.disabled=!e.propertiesDynamic.Shadows.interObjectShadowsToggle.checkFlag,e.propertiesStatic.Shadows.filteringQualityCombo.disabled=!e.propertiesStatic.Shadows.interObjectShadowsToggle.checkFlag,e.propertiesDynamic.Shadows.filteringQualityCombo.disabled=!e.propertiesDynamic.Shadows.interObjectShadowsToggle.checkFlag},w.prototype.DoUpdatePropertyCombo=function(){var e=!1;return m||y||g||(e=!0),e},w.prototype.DoUpdatePresetButtonGroup=function(){var e=!1;return S||m||g||(e=!0),e},w.prototype.addEventListenerPropertyPreset=function(e,t,i){var n=this;t.addEventListener("change",function(){var s=t.currentValue;n.DoUpdatePresetButtonGroup()&&(y=!0,m=!0,n.updateProperty(e,s,i),n.updateGlobalPresetUI("Custom",i),n.setSaveToCustomFlag(i,!0),m=!1,y=!1)})},w.prototype.updateProperty=function(e,i,n){t.setProperty(n,i,e),this.updatePropertyUI(e,i,n)},w.prototype.updatePropertyUI=function(i,n,s){if(t.getLinkedPresetStatus())var l=t.getPresetValue("Static",n);else l=t.getPresetValue(s,n);if(!e.is(l))return!1;var a=l[i];if(!e.is(a))return!1;"Custom"==n&&(n=a.Preset);var o=null;switch(s===this.RenderMode_Static_Str?o=this.propertiesStatic:s===this.RenderMode_Dynamic_Str&&(o=this.propertiesDynamic),this.updatePropertyPresetUI(i,n,s),i){case"AntiAliasing":o[i].postProcCombo.currentValue=a.AntiAliasing;break;case"PixelCulling":o[i].pixelCullingSpinBox.setValue(a.PixelCulling);break;case"Transparency":o[i].transparencyCombo.currentValue=a.Transparency;break;case"Shadows":o[i].filteringTypeCombo.currentValue=a.ShadowFilter,o[i].filteringQualityCombo.currentValue=a.ShadowQuality,o[i].groundShadowsToggle.checkFlag=a.AllowGroundShadows,o[i].interObjectShadowsToggle.checkFlag=a.AllowInterObjectShadows,o[i].transObjectShadowsToggle.checkFlag=a.AllowTransparentObjectShadows;break;case"Reflections":o[i].reflectionsToggle.checkFlag=a.AllowGroundReflection,o[i].interObjectReflectionsToggle.checkFlag=a.AllowInterObjectReflections;break;case"Refractions":o[i].interObjectRefractionsToggle.checkFlag=a.AllowInterObjectRefractions;break;case"AmbientOcclusion":o[i].SSAOCombo.currentValue=a.NoOfSamples;break;case"DepthBufferOptions":o[i].depthToggle.checkFlag=a.DepthFlickeringReduction;break;case"Material":if(o[i].flakesQualityCombo.currentValue=a.FlakesQuality,"Dynamic"===s)break;this._webGLV6Viewer._useViewPanel&&"Ultra"===a.DefaultMaterialQuality&&(a.DefaultMaterialQuality="High"),this.propertiesStatic[i].defaultMaterialQualityCombo.currentValue=a.DefaultMaterialQuality,this.propertiesDynamic[i].defaultMaterialQualityCombo.currentValue=a.DefaultMaterialQuality;break;case"Downsampling":if("Dynamic"===s)break;this.propertiesStatic[i].downsamplingSpinBox.setValue(a.Downsampling),this.propertiesDynamic[i].downsamplingSpinBox.setValue(a.Downsampling)}},w.prototype.updatePropertyPresetUI=function(t,i,n){if("Shadows"===t.toString()||"Reflections"===t.toString()||"Refractions"===t.toString()||"Material"===t.toString()){var s=null;n===this.RenderMode_Static_Str?s=this.propertiesStatic:n===this.RenderMode_Dynamic_Str&&(s=this.propertiesDynamic);var l=s[t];if(e.is(l)){var a=l.presetCombo;e.is(a)&&(a.currentValue=i)}}},w.prototype.updateAttribute=function(e,i,n,s){t.getLinkedPresetStatus()?(t.setAttribute("Static","Custom",e,i,n),t.setAttribute("Dynamic","Custom",e,i,n)):t.setAttribute(s,"Custom",e,i,n),this.updatePropertyUI(e,"Custom",s),this.updateGlobalPresetUI("Custom",s),this.setSaveToCustomFlag(s,!0)},w.prototype.updateGlobalPresetUI=function(e,t){var i=null;t===this.RenderMode_Static_Str?i=this.propertiesGlobal.Global.staticCombo:t===this.RenderMode_Dynamic_Str&&(i=this.propertiesGlobal.Global.dynamicCombo),i.currentValue=e},w}),define("DS/QualityManagerUI/QMUIPresetSelectionDlg",["UWA/Core","DS/QualityManager/QMController","DS/QualityManagerUI/QMUIAdvancedPresetSelectionDlg","DS/WebappsUtils/WebappsUtils","DS/Controls/Button","DS/Windows/Dialog","DS/Controls/ComboBox","DS/Controls/TooltipModel","DS/RuntimeView/NLSManager","DS/Utilities/TouchUtils","i18n!DS/QualityManagerUI/assets/nls/translation"],function(e,t,i,n,s,l,a,o,r,c,p){"use strict";var d=!1,h=function(e){this.options=e,this.options.initCB=this.options.initCB||function(e){},this.options.closeCB=this.options.closeCB||function(e){},this.options.swapStartCB=this.options.swapStartCB||function(){},this.options.swapEndCB=this.options.swapEndCB||function(){},this.init()};return h.prototype.init=function(){this._webGLV6Viewer=this.options.viewer,this._immersiveFrame=this.options.immersiveFrame,t.isInitialized||t.init(this._webGLV6Viewer),this.touch=c.getTouchMode(),this.mobile=this._webGLV6Viewer.mobile&&"true"!==localStorage.getItem("__WEBVISU_MOBILE_QM_POC__"),r.DEFAULT_LANGUAGE=widget.lang?widget.lang:widget.getValue("lang");var e=this;r.loadResource({resourceFile:"QualityManagerUI/QualityManager"}),r.onResourceLoaded({resourceFile:"QualityManagerUI/QualityManager"},function(){e.mbdResources=this,e.updateUILabelTooltip()}),this.currentPresetMode=t.getCurrentRenderMode(),this.properties={},this.labelElements={},this.helpElements={},this.mobile?this.buildMobileDialog():(this.buildDialog(),this.initializedUIfromDB()),this.mbdResources&&this.updateUI()},h.prototype.updateUILabelTooltip=function(){this.QMUIPresetSelectionDlg&&this.updateUI()},h.prototype.updateUI=function(){var e=this,t=e.GetResString("VisualQuality");if(null!=t&&""!==t&&(e.QMUIPresetSelectionDlg.title=e.GetLabel(t)),!this.mobile){for(var i in e.labelElements){var n=e.GetResString(i);null!=n&&""!==n&&(e.labelElements[i].textContent=e.GetLabel(n))}for(var i in e.helpElements){var s=e.GetResString(i);null!=s&&""!==s&&(e.helpElements[i].tooltipInfos.shortHelp=e.GetHelp(s))}}},h.prototype.GetResString=function(e){var t="";return this.mbdResources&&(t=this.mbdResources.getKey({key:e})),t},h.prototype.GetLabel=function(e){var t="";return void 0!==e.Text&&(t=e.Text),t},h.prototype.GetHelp=function(e){var t="";return void 0!==e.Tooltip&&(t=e.Tooltip),t},h.prototype.buildMobileDialog=function(){var e=this,i=UWA.createElement("div",{class:"wux-control-inline-container",style:{"vertical-align":"top"}});i.setText(p.MobileMessage);var n=new s;n.getContent().id="OKButton",e.QMUIPresetSelectionDlg=new l({title:"Visual Quality",content:i,immersiveFrame:e._immersiveFrame,ResizableFlag:!1,width:320,position:{of:e._immersiveFrame.getFreeZone()},identifier:"WebVisuVisualQuality-"+e._immersiveFrame.identifier,buttons:{Ok:n},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea}),e.options.initCB(this),e.QMUIPresetSelectionDlg.addEventListener("close",function(){t.commitToDB(),e.options.closeCB(e)}),e.QMUIPresetSelectionDlg.buttons.Ok.addEventListener("click",function(){e.invalidate()})},h.prototype.buildDialog=function(){var e=this,i=UWA.createElement("div",{class:"wux-container",style:{"vertical-align":"top"}}),n=new s;n.getContent().id="OKButton";var a=new s;a.getContent().id="CancelButton",e.buildViewContent().inject(i),e.QMUIPresetSelectionDlg=new l({title:"Visual Quality",content:i,immersiveFrame:e._immersiveFrame,ResizableFlag:!1,width:320,position:{of:e._immersiveFrame.getFreeZone()},identifier:"WebVisuVisualQuality-"+e._immersiveFrame.identifier,buttons:{Ok:n,Cancel:a},allowedDockAreas:WUXDockAreaEnum.TopDockArea|WUXDockAreaEnum.BottomDockArea|WUXDockAreaEnum.LeftDockArea|WUXDockAreaEnum.RightDockArea}),e.QMUIPresetSelectionDlg.getContent().id="RasterizerVisualQuality",this.touch&&(e.QMUIPresetSelectionDlg.touchMode=!0),e.options.initCB(this),e.QMUIPresetSelectionDlg.addEventListener("close",function(){t.commitToDB(),e.options.closeCB(e)}),e.QMUIPresetSelectionDlg.buttons.Ok.addEventListener("click",function(){e.validate()}),e.QMUIPresetSelectionDlg.buttons.Cancel.addEventListener("click",function(){e.invalidate()})},h.prototype.validate=function(){t.commitToDB(),this.QMUIPresetSelectionDlg.close()},h.prototype.invalidate=function(){t.restoreFromDB(),this.QMUIPresetSelectionDlg.close()},h.prototype.buildViewContent=function(){for(var e=UWA.createElement("div",{class:"wux-container"}),t=[p.Elements.Low,p.Elements.Medium,p.Elements.High,p.Elements.Ultra,p.Elements.Default,p.Elements.Custom],i=["Low","Medium","High","Ultra","Default","Custom"],n=[],s=0;s<t.length;s++)n[s]={labelItem:t[s],valueItem:i[s]};var l=UWA.createElement("div",{class:"wux-container"}).inject(e);l.setStyles({display:"grid","grid-template-columns":"auto fit-content(100%)","grid-template-rows":"auto auto auto","grid-column-gap":"5px","grid-row-gap":"14px"}),this.buildStaticView(n).inject(UWA.createElement("div",{class:"wux-container"}).inject(l)),this.buildDynamicView(n).inject(UWA.createElement("div",{class:"wux-container"}).inject(l));var a=UWA.createElement("div",{class:"wux-container"}).inject(l);return a.setStyles({display:"flex","grid-column":"2/3","grid-row":"1/3"}),this.buildLinkButtonView().inject(a),(a=UWA.createElement("div",{class:"wux-container"}).inject(l)).setStyles({display:"flex","grid-column":"1/3","grid-row":"3/4"}),this.buildCustomizeButtonView().inject(a),e},h.prototype.buildLinkButtonView=function(){var e=this,i=UWA.createElement("div",{class:"wux-container"});i.setStyles({display:"flex",width:"20px"});var l=new UWA.Element("div",{class:"wux-container"}).inject(i);l.setStyles({"margin-top":"auto","margin-bottom":"auto"});new s({disabled:!1,displayStyle:"lite",icon:n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinkLines.png"}).inject(l);var a=new UWA.Element("div",{class:"wux-container"}).inject(i);a.setStyles({position:"relative",left:"-20px","margin-top":"auto","margin-bottom":"auto"}),e.linkButton=new s({disabled:!1,displayStyle:"lite",icon:n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png"}).inject(a),e.linkButton.getContent().id="Link",e.linkButton.tooltipInfos=new o({shortHelp:"Link / Unlink static and dynamic preset."}),e.helpElements.LinkControl=e.linkButton;var r=this.properties.Dynamic.dynamicComboBox;return e.linkButton.addEventListener("buttonclick",function(){if(r.disabled)t.setLinkedPresetStatus(!1),e.linkButton.icon=n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png",r.disabled=!1;else{t.setLinkedPresetStatus(!0),e.linkButton.icon=n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png",r.disabled=!0,e.properties.Dynamic.dynamicComboBox.currentValue=e.properties.Static.staticComboBox.currentValue;var i=t.getCurrentGlobalPreset("Static"),s=t.getPresetValue("Static",i);for(var l in s){var a=s[l];for(var o in a){var c=a[o];t.setAttributeOnDynamicMode("Dynamic",i,l,o,c)}}}e.updateGlobalPreset(e.currentPresetMode,e.properties.Static.staticComboBox.currentValue)}),i},h.prototype.buildCustomizeButtonView=function(){var e=this,t=UWA.createElement("div",{class:"wux-container"});t.setStyles({width:"100%"});var l=new s({label:p.AdvancedSettings,icon:{iconName:"cog",fontIconSize:"1x",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(t);l.getContent().style.width="100%",l.getContent().id="ButtonAdvancedSettings",l.tooltipInfos=new o({shortHelp:"Click to edit custom preset (static and dynamic mode)"}),e.helpElements.AdvancedSettings=l;var a=this.options,r=this.properties.Dynamic.dynamicComboBox;return l.addEventListener("click",function(){e.options.swapStartCB(),e.QMUIPresetSelectionDlg.close();var t=new i(a);r.disabled?(t.dynamicCombo.disabled=!0,t.linkButton.icon=n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png",t.EnableDisableDynamicControls(t.linkButton,t.dynamicCombo)):(t.dynamicCombo.disabled=!1,t.linkButton.icon=n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorUnlinked.png",t.EnableDisableDynamicControls(t.linkButton,t.dynamicCombo)),e.options.swapEndCB()}),t},h.prototype.buildStaticView=function(e){var t=new UWA.Element("div",{class:"wux-container"});t.setStyles({"justify-content":"space-between",display:"flex"});var i=new UWA.Element("div",{class:"wux-control-inline-container",text:"Static mode"}).inject(t);i.setStyles({"margin-bottom":"auto","margin-top":"auto"});var n=new a({elementsList:e,selectedIndex:4,enableSearchFlag:!1}).inject(t);return n.getContent().id="Static",n.tooltipInfos=new o({shortHelp:"Change all parameters to selected preset."}),this.labelElements.StaticModeLabel=i,this.helpElements.StaticMode=n,this.properties.Static={},this.properties.Static.staticComboBox=n,this.addEventListenerComboBox(n),t},h.prototype.buildDynamicView=function(e){var t=new UWA.Element("div",{class:"wux-container"});t.setStyles({"justify-content":"space-between",display:"flex"});var i=new UWA.Element("div",{class:"wux-control-inline-container",text:"Dynamic mode"}).inject(t);i.setStyles({"margin-bottom":"auto","margin-top":"auto"});var n=new a({elementsList:e,selectedIndex:4,enableSearchFlag:!1,disabled:!1}).inject(t);return n.getContent().id="Dynamic",n.tooltipInfos=new o({shortHelp:"Change all parameters to selected preset."}),this.labelElements.DynamicModeLabel=i,this.helpElements.DynamicMode=n,this.properties.Dynamic={},this.properties.Dynamic.dynamicComboBox=n,this.addEventListenerComboBox(n),t},h.prototype.addEventListenerComboBox=function(e){var i=this;e.addEventListener("change",function(){if(!d){var n=e.getContent().id;i.currentPresetMode=n,t.setCurrentRenderMode(i.currentPresetMode);var s=e.currentValue;i.updateGlobalPreset(i.currentPresetMode,s),t.getLinkedPresetStatus()&&(i.properties.Dynamic.dynamicComboBox.currentValue=s)}})},h.prototype.updateGlobalPreset=function(e,i){t.getLinkedPresetStatus()?(t.setGlobalPreset("Static",i,!1),t.setGlobalPreset("Dynamic",i,!1)):t.setGlobalPreset(e,i,!1)},h.prototype.initializedUIfromDB=function(){d=!0;var e=t.getCurrentGlobalPreset("Static");this.properties.Static.staticComboBox.currentValue=e;var i=t.getCurrentGlobalPreset("Dynamic");this.properties.Dynamic.dynamicComboBox.currentValue=i;var s=this.properties.Dynamic.dynamicComboBox;t.getLinkedPresetStatus()&&(s.disabled=!0,this.linkButton.icon=n.getWebappsBaseUrl()+"QualityManagerUI/assets/icons/32/I_QEditorLinked.png"),d=!1},h}),define("DS/QualityManagerUI/SliderSpinBox",["UWA/Core","DS/Controls/Slider","DS/Controls/SpinBox","DS/Controls/TooltipModel","UWA/Controls/Abstract"],function(e,t,i,n){"use strict";return e.Controls.Abstract.extend({init:function(e){this._parent(e),this.recId=e.recId||null,this.isExponential=e.isExponential||!1,this.isLogarithmic=e.isLogarithmic||!1,this.isLinear=e.isLinear||!1,this.minValue=e.minValue,this.spinBoxMaxValue=e.maxValue,this.sliderMaxValue=this.spinBoxMaxValue,this.initialValue=e.initialValue,this.spinBoxStepValue=e.stepValue,this.sliderStepValue=this.spinBoxStepValue,this._value=this.initialValue,this.sliderMinValue=this.minValue,this.sliderInitialValue=this.initialValue,this.decimals=e.decimals,(this.isLogarithmic||this.isExponential||this.isLinear)&&(this.sliderMaxValue=e.sliderMaxValue,this.sliderMinValue=e.sliderMinValue,this.sliderInitialValue=e.sliderInitialValue),this.spinSoftLimitMax=e.spinSoftLimitMax||this.spinBoxMaxValue,this.spinSoftLimitMin=e.spinSoftLimitMin||this.minValue,this.spinHardLimitMax=e.spinHardLimitMax||this.spinBoxMaxValue,this.spinHardLimitMin=e.spinHardLimitMin||this.minValue,this.sliderSoftLimitMax=e.sliderSoftLimitMax||null,this.sliderSoftLimitMin=e.sliderSoftLimitMin||null,this.sliderHardLimitMax=e.sliderHardLimitMax||null,this.sliderHardLimitMin=e.sliderHardLimitMin||null,this.minv=this.spinSoftLimitMin,this.maxv=this.spinSoftLimitMax,this.scale=(Math.log(this.spinSoftLimitMax)-Math.log(this.spinSoftLimitMax))/(this.sliderMaxValue-this.sliderMinValue),this.step=(this.spinSoftLimitMax-this.spinSoftLimitMin)/(this.sliderMaxValue-this.sliderMinValue),this.iPixels=100,this.b=this._optimizeBVal(this.spinSoftLimitMin,this.spinSoftLimitMax,this.spinBoxStepValue,this.iPixels),this.UserEdited=!1,this._createLayout()},setValue:function(e){if(void 0!==e&&!(e<this.minValue||e>this.spinBoxMaxValue))if(this._value=e,this.isExponential||this.isLogarithmic||this.isLinear){if(this.elements.spinBox.value=e,this.isExponential){var t=Math.round(Math.log2(e));this.value=Math.pow(2,t),this.elements.slider.value=t}else if(this.isLogarithmic){var i=Math.round(this.iPixels*((Math.log(e+this.b)-Math.log(this.minv+this.b))/(Math.log(this.maxv+this.b)-Math.log(this.minv+this.b))));this.value=e,this.elements.slider.value=i,this.elements.spinBox.value=e}else if(this.isLinear){var n=Math.round(this.sliderMinValue+(e-this.minValue)/this.step);this.value=(n-this.sliderMinValue)*this.step+this.minValue,this.elements.slider.value=n,this.elements.spinBox.value=e}}else this.elements.spinBox.value=e,this.elements.slider.value=e},getValue:function(){return this._value},setDisabled:function(e){this.elements.spinBox.disabled=e,this.elements.slider.disabled=e},setTooltips:function(e){var t=new n({shortHelp:e});this.elements.spinBox.tooltipInfos=t},setHide:function(e){this.elements.spinBox.getContent().style.display=e,this.elements.slider.getContent().style.display=e,this.elements.slider.getContent().style.height="10px"},_createLayout:function(){this.elements.container=e.createElement("div",{Class:"dx-slider-spinbox-container"});var n=e.Element("div",{class:"wux-container"}),s=new e.Element("div",{class:"wux-control-inline-container"}).inject(n);this.elements.slider=new t({minValue:this.sliderMinValue,maxValue:this.sliderMaxValue,stepValue:this.sliderStepValue,value:this.sliderInitialValue}).inject(s),this.elements.slider.getContent().style.width="100px",this.elements.slider.getContent().style.height="10px",this.slider=this.elements.slider;var l=new e.Element("div",{class:"wux-control-inline-container"}).inject(n);this.elements.spinBox=new i({minValue:this.minValue,maxValue:this.spinBoxMaxValue,stepValue:this.spinBoxStepValue,value:this.initialValue,decimals:this.decimals}).inject(l),this.elements.spinBox.getContent().style.width="100px",n.inject(this.elements.container)},_createEvents:function(){var e=this;e.elements.slider.addEventListener("change",function(t){var i=t.dsModel.value;if(e.options.isExponential){if(i=Math.pow(2,i),e.value===i)return}else if(e.options.isLogarithmic){if(i>=0&&i<1&&"PathTerminationDepth"==e.recId)return e.elements.slider.value=0,void(e.elements.spinBox.value=0);if(1==i&&"PathTerminationDepth"==e.recId)return e.elements.slider.value=1,void(e.elements.spinBox.value=1);if(i=Math.exp((Math.log(e.maxv+e.b)-Math.log(e.minv+e.b))*i*.01+Math.log(e.minv+e.b))-e.b,e.value===i.toFixed())return}else if(e.options.isLinear&&(i=(t.dsModel.value-e.sliderMinValue)*e.step+e.minValue,e.value===i))return;e.value!==i&&(e.value=i,e.setSpinBox=!0,e.elements.spinBox.value=i)}),e.elements.spinBox.addEventListener("change",function(t){var i=t.dsModel.value,n=Math.round(Math.log2(i));if(e.options.isExponential){if(e.value===i)return;i<e.spinHardLimitMax&&i>e.spinSoftLimitMax?e.elements.slider.maxValue=e.sliderHardLimitMax:e.elements.slider.maxValue=e.sliderSoftLimitMax,i!=t.dsModel.valueToCommit?(n=i>=t.dsModel.valueToCommit?Math.ceil(Math.log2(i)):Math.floor(Math.log2(i)),i=Math.pow(2,n),e.value=i,e.elements.spinBox.value=i):(n=Math.round(Math.log2(i)),i=Math.pow(2,n),e.value=i,e.elements.spinBox.value=i),e.elements.slider.value=e._actualValueToSliderValue(n)}else if(e.options.isLogarithmic){if(i>=0&&i<1&&"PathTerminationDepth"==e.recId)return e.elements.spinBox.value=0,void(e.elements.slider.value=0);i!=t.dsModel.valueToCommit?e.UserEdited=!1:e.UserEdited=!0;var s=i.toFixed();e.UserEdited?s<=e.spinHardLimitMax&&s>e.spinSoftLimitMax||i>=e.spinHardLimitMin&&i<e.spinSoftLimitMin?(e.minv=e.spinHardLimitMin,e.b=e._optimizeBVal(e.spinHardLimitMin,e.spinHardLimitMax,e.spinBoxStepValue,e.iPixels),e.maxv=e.spinHardLimitMax):(e.minv=e.spinSoftLimitMin,e.b=e._optimizeBVal(e.spinSoftLimitMin,e.spinSoftLimitMax,e.spinBoxStepValue,e.iPixels),e.maxv=e.spinSoftLimitMax):e.UserEdited=!1;var l=Math.round(e.iPixels*((Math.log(i+e.b)-Math.log(e.minv+e.b))/(Math.log(e.maxv+e.b)-Math.log(e.minv+e.b))));if(e.value=Math.exp((Math.log(e.maxv+e.b)-Math.log(e.minv+e.b))*l*.01+Math.log(e.minv+e.b))-e.b,e.value===i)return;e.elements.slider.value=l}else if(e.options.isLinear){i!=t.dsModel.valueToCommit?e.UserEdited=!1:e.UserEdited=!0,e.UserEdited&&(i<=e.spinHardLimitMax&&i>e.spinSoftLimitMax||i>=e.spinHardLimitMin&&i<e.spinSoftLimitMin?(e.minValue=e.spinHardLimitMin,e.step=(e.spinHardLimitMax-e.spinHardLimitMin)/(e.sliderMaxValue-e.sliderMinValue)):(e.minValue=e.spinSoftLimitMin,e.step=(e.spinSoftLimitMax-e.spinSoftLimitMin)/(e.sliderMaxValue-e.sliderMinValue)));var a=Math.round(e.sliderMinValue+(t.dsModel.valueToCommit-e.minValue)/e.step);if(e.value=(a-e.sliderMinValue)*e.step+e.minValue,e.value===i)return;e.elements.slider.value=a}else{if(e.value=i,e.value===i)return;e.elements.slider.value=e._actualValueToSliderValue(e.value)}})},_optimizeBVal:function(e,t,i,n){for(var s=e,l=t,a=.5*(s+l),o=(Math.log(e+i+s),Math.log(e+s),Math.log(t+s),Math.log(e+s),Math.log(e+i+l),Math.log(e+l),Math.log(t+l),Math.log(e+l),n*(Math.log(e+i+a)-Math.log(e+a))/(Math.log(t+a)-Math.log(e+a))),r=0;r<20;r++)o<1?(l=a,o):(s=a,o),a=.5*(s+l),o=n*(Math.log(s+i+a)-Math.log(s+a))/(Math.log(l+a)-Math.log(s+a));return a},_sliderValueToActualValue:function(e){return e},_actualValueToSliderValue:function(e){return e}})});