define("DS/MPFClientReviewComponent/ReviewMessageTile",["UWA/Core","UWA/String","UWA/Class/View","i18n!DS/MPFClientReviewComponent/assets/nls/MPFClientReviewComponent","css!DS/MPFClientReviewComponent/MPFClientReviewComponent"],function(e,t,s,i){"use strict";return s.extend({className:"mpf-review-message-tile",domEvents:{resize:"handleMessageOverflow","click .mpf-message-body":"toggleFold"},setup:function(e){this.review=e.review,this.locale=e.locale||"fr-FR",this.maxMessageHeight=e.maxMessageHeight||100},render:function(){return this.messageBody=this._createMessageContainer(),this.container.setContent([this._createHeader(),this.messageBody,this._createFooter()]),this},destroy:function(){this.stopListening(),this.review=null,this.messageBody=null,this._parent(),this.container=null},handleMessageOverflow:function(){this.messageBody&&this._calculateOverflow(this.messageBody)>0?(this.messageBody.addClassName("mpf-long"),this.foldMessage(!this.messageBody.hasClassName("mpf-unfold"))):(this.messageBody.removeClassName("mpf-long"),this.foldMessage(!1))},toggleFold:function(){this.messageBody&&this.messageBody.hasClassName("mpf-long")&&(this.messageBody.toggleClassName("mpf-unfold"),this.foldMessage(!this.messageBody.hasClassName("mpf-unfold")))},foldMessage:function(e){this.messageBody&&(e?this.messageBody.setStyle("max-height",this.maxMessageHeight+"px"):this.messageBody.setStyle("max-height","none"))},_createHeader:function(){var t="Marketplace: 3dprinting | ";return t+=i.get("process")+": Material Jetting | ",t+=i.get("material")+": ABS",e.createElement("div",{class:"mpf-message-header",text:t})},_createMessageContainer:function(){var t,s;return s=this.review.getMessage(),(t=e.createElement("div",{class:"mpf-message-body",text:s})).addContent(this._createBlendOutOverlapElement()),t},_createBlendOutOverlapElement:function(){return e.createElement("div",{class:"mpf-blend-white"})},_createFooter:function(){var s="Cyril "+"Dijon"[0]+".",n=new Date("06/11/2017").toLocaleDateString(this.locale,{day:"numeric",month:"long",year:"numeric"});return e.createElement("div",{class:"review-message-footer",html:[{tag:"div",text:t.format(i.get("byAuthorOnDate"),s,n)},{tag:"a",text:i.get("report"),events:{click:this._onReportReview.bind(this)}}]})},_onReportReview:function(){this.dispatchEvent("reportReview")},_calculateOverflow:function(e){return e.getScrolls().height-this.maxMessageHeight}})}),define("DS/MPFClientReviewComponent/ThumbsUpTile",["UWA/Core","UWA/Class/View","DS/MPFError/BadArgumentError","css!DS/MPFClientReviewComponent/MPFClientReviewComponent"],function(e,t,s){"use strict";return t.extend({className:"mpf-thumbs-up-tile",setup:function(t){if(!e.is(t.label,"string"))throw new s("options.label must be a string");this.label=t.label},render:function(){return this.container.setContent([e.createElement("span",{class:"thumbs-up-label",text:this.label}),e.createElement("span",{class:"fonticon fonticon-thumbs-up"})]),this},destroy:function(){this.label=null,this._parent(),this.container=null}})}),define("DS/MPFClientReviewComponent/ReviewRatingTile",["UWA/Core","UWA/Class/View","DS/MPFClientReviewComponent/ThumbsUpTile","DS/MPFView/RatingStarsTile","DS/MPFServices/ObjectService"],function(e,t,s,i,n){"use strict";return t.extend({className:"mpf-review-rating-tile",setup:function(e){this.review=e.review},render:function(){return this.starsTile=this._createStarsTile(),this.thumbsUpTiles=this._createThumbsUpTiles(),this.container.setContent([this.starsTile,{tag:"div",class:"thumbs-up-tiles-container",html:this.thumbsUpTiles}]),this},destroy:function(){if(Array.isArray(this.thumbsUpTiles)&&this.thumbsUpTiles.length>0)for(var e=0;e<this.thumbsUpTiles.length;e++)this.thumbsUpTiles[e].destroy();this.starsTile&&this.starsTile.destroy(),this._parent(),this.container=null},_createStarsTile:function(){return new i({rating:this.review.getRating()}).render()},_createThumbsUpTiles:function(){var e,t=[];e=["Goods and services","Lab communication"];for(var i=0;i<e.length;i++)t.push(new s({label:e[i]}).render());return t}})}),define("DS/MPFClientReviewComponent/ClientReviewComponent",["UWA/Core","UWA/Class/View","DS/MPFClientReviewComponent/ReviewRatingTile","DS/MPFClientReviewComponent/ReviewMessageTile","css!DS/MPFClientReviewComponent/MPFClientReviewComponent"],function(e,t,s,i){"use strict";return t.extend({className:"mpf-client-review",setup:function(e){this.locale=e.locale||"en-US",this.review=e.review,this.maxMessageHeight=e.maxMessageHeight||"100px",this.ratingTile=this._createRatingTile(),this.messageTile=this._createMessageTile(),this.listenTo(this.messageTile,"reportReview",this._onReportReview.bind(this))},render:function(){return this.container.setContent([this.ratingTile.render(),this.messageTile.render()]),this},destroy:function(){this.ratingTile.destroy(),this.messageTile.destroy(),this.stopListening(),this.review=null,this._parent(),this.container=null},_createRatingTile:function(){return new s({review:this.review})},_createMessageTile:function(){return new i({review:this.review,locale:this.locale,maxMessageHeight:this.maxMessageHeight})},_onReportReview:function(){this.dispatchEvent("reportReview",{review:this.review})}})});