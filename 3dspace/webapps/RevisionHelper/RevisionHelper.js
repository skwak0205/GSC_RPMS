define("DS/RevisionHelper/3DSearchRevisionImpl",["UWA/Core","UWA/Class","UWA/Class/Debug","text!DS/SNInfraUX/assets/3DSearchRevision.json","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils"],function(i,s,e,t,n,r,o){"use strict";return s.singleton(e,{options:null,init:function(){n.log("3DSpaceRevision init");try{this.options=JSON.parse(t)}catch(i){n.error("Unable to parse JSON:",t,i)}},getRevisions:function(){if(i.is(this.options))return this.options.show_search_results_revision_array},getRevisionOptions:function(){if(i.is(this.options))return this.options},getAdminRevision:function(){if(i.is(this.options))return this.options.admin_revision},getDefaultRevision:function(){return this.options.show_search_results_revision_array[0].id},getOptionsDetails:function(s){var e,t=this.getRevisions();if(i.is(t)&&t.length>0)for(var n=0;n<t.length;n++)s===t[n].id&&(e=t[n]);return e},_checkCSVAvailability:function(s){var e=this;return r.getOption("search_web_in_win")?(e.CSVpromise.resolve([]),e.CSVpromise.promise):(o.getGrantedRoles(function(t){for(var n=!1,r=0;r<t.length;r++){var o=t[r];if(i.is(o)&&i.is(o.platforms,"array")&&(0===o.platforms.length||o.platforms.indexOf(s)>=0&&"CSV"===o.id)){n=!0;break}}n?e.CSVpromise.resolve(t):e.CSVpromise.reject(t)}),this.CSVpromise.promise)}})});