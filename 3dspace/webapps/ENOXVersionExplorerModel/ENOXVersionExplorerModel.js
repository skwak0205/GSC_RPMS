define("DS/ENOXVersionExplorerModel/VersionTreeDocumentModel",["DS/LifecycleDAGModel/DAGDocumentModel","DS/ENOXVersionExplorerUtils/VersionExplorerSettings","DS/LifecycleDAGUtils/ArrayFunctions"],function(t,i,e){return t.extend({init:function(t){this._parent(t),this.highlightedLinks=[]},usePersistentColor:function(){return!0!==this.persistentColor&&i.historyConfig&&i.historyConfig.settings&&i.historyConfig.settings.thumbnailGraph&&"true"===i.historyConfig.settings.thumbnailGraph.persistentColor&&(this.persistentColor=!0),this.persistentColor},highlightLink:function(t){Array.isArray(t)&&2===t.length&&(this.highlightedLinks.push(t),this._trueRoot._modelEvents.publish({event:"highlightLink",data:e.intersectionDifference(this._nodeList,t,function(t,i){return t.options.id===i})[0].intersection}))},unhighlightLink:function(t){if(Array.isArray(t)&&2===t.length){var i=this.highlightedLinks.findIndex(function(i){return i[0]===t[0]&&i[1]===t[1]||i[1]===t[0]&&i[0]===t[1]});i>=0&&this._trueRoot._modelEvents.publish({event:"unhighlightLink",data:e.intersectionDifference(this._nodeList,this.highlightedLinks.splice(i,1)[0],function(t,i){return t.options.id===i})[0].intersection})}},getHighlightedLinksData:function(){var t=[],i=this;return this.highlightedLinks.length&&(t=this.highlightedLinks.reduce(function(t,n){return t.push(e.intersectionDifference(i._nodeList,n,function(t,i){return t.options.id===i})[0].intersection),t},t)),t}})}),define("DS/ENOXVersionExplorerModel/VersionTreeNodeModel",["DS/LifecycleDAGModel/DAGNodeModelBase","UWA/Core"],function(t,i){"use strict";var e=function(e,n,o,s,r,h,p,a,c,l,d){if(e)if(e instanceof t)for(var u in this.options={},e.options)"children"!==u&&(this.options[u]=i.clone(e.options[u]));else this.options={id:e,creationDate:o,fakeDate:s,ancestors:a,eStrings:c,copyFrom:h,grid:i.extend(n,{__isLeaf__:l,context:"",creationDate:o,__isActive__:!1}),label:n.title,data:{id:e,serviceId:r,contextId:p,physicalid:e,type:d,displayName:n.title,revision:n.code,name:n.title}};else this.options={isEmpty:!0};t.call(this,this.options)};return(e.prototype=Object.create(t.prototype)).constructor=e,e.prototype.isMIB=function(){return 0==this.options.grid.id.indexOf("Branch:")||0==this.options.grid.id.indexOf("branch:")||0==this.options.grid.id.indexOf("bid:")},e.prototype.isLeaf=function(){return!0===this.options.grid.__isLeaf__},e.prototype.isActive=function(){return!0===this.options.grid.__isActive__},e.prototype.clone=function(){return new e(this)},e.prototype.sortFunction=function(t,i){return!i&&(i=t=this),t.options.creationDate.getTime()<i.options.creationDate.getTime()},e.prototype.addMergeParent=function(i){if(i instanceof t)i=i._getID();else if("string"!=typeof i||!i.length)throw Error("VersionTreeNodeModel.addMergeAncestor:parent cannot be null");Array.isArray(this.options.ancestors)&&this.options.ancestors.findIndex(function(t){return t.id===i&&"I"===t.semantic})<0&&this.options.ancestors.push({semantic:"I",id:i})},e.prototype._getID=function(){return this.isEmpty()?this._id:this.options.id},e.prototype.refreshNodeData=function(e){var n=!1,o=(e=e||{})instanceof t?e.options.grid:e,s={};for(var r in e.options&&e.options.eStrings&&(s=e.options.eStrings),o)if(!r.startsWith("__")||!r.endsWith("__"))if("title"===r){var h=o.title||o.label;h&&this.options.label!==h&&(this.setAttribute("title",this.options.data.displayName=this.options.label=h),n=!0)}else if("thumbnail"===r){var p=this.options.grid[r];p||(p=""),o[r]&&o[r]!==p&&o[r].length>0?(this.setAttribute(r,o[r]),n=!0):(null==o[r]||0===o[r].length)&&p.length>0&&(this.setAttribute(r,p),n=!0)}else if(o[r]instanceof Date)o[r].getTime()!==this.options.grid[r].getTime()&&(this.setAttribute(r,o[r]),n=!0);else if(!0===s[o[r]]){var a=o[r];null!==a&&(a=i.String.unescapeHTML(o[r])),a!==this.options.grid[r]&&(this.setAttribute(r,a),n=!0)}else o[r]!==this.options.grid[r]&&(this.setAttribute(r,o[r]),n=!0);return e.options&&Array.isArray(e.options.ancestors)&&e.options.ancestors.length&&(this.options.ancestors=e.options.ancestors),n},e.prototype.getAttribute=function(t){return this.options.grid[t]},e});