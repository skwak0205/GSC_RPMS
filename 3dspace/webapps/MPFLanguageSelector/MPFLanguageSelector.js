define("DS/MPFLanguageSelector/LanguageSelector",["UWA/Core","UWA/Class/View","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Input/Toggle","DS/MPFUtils/MPFUtils","i18n!DS/MPFLanguageSelector/assets/nls/languageSelector","css!DS/MPFLanguageSelector/MPFLanguageSelector"],function(e,n,t,a,r,o,g){"use strict";var i={en:"English",fr:"Français",de:"Deutsch",ja:"日本語",ko:"한국어",ru:"Pусский",zh:"中文"};return n.extend({className:"mpf-language-selector",domEvents:{click:"onClick"},setup:function(){this._currentLanguage=this._getCurrentLanguage(),this._languageLabel=this._createLanguageLabel(),this._icon=this._createIcon(),this._modal=this._createModal()},render:function(){return this.container.setContent([this._languageLabel,this._icon]),this},destroy:function(){this._modal.destroy(),this._modal=null,this._parent(),this.container=null},onClick:function(){this._modal.show()},onSave:function(e){var n;n=this._getSelectedLanguage(),this._setCurrentLanguageCookie(n),this._modal.hide(),this._reloadPage()},onCancel:function(){this._modal.hide()},_reloadPage:function(){window.location.reload()},_createLanguageLabel:function(){return e.createElement("span",{class:"mpf-label",text:i[this._getCurrentLanguage()]})},_createIcon:function(){return e.createElement("span",{class:"fonticon fonticon-globe"})},_createModal:function(){return new t({renderTo:document.body,header:g.get("languagePreferences"),body:this._createLanguageOptions(),footer:[new a({className:"primary",value:g.get("save"),events:{onClick:this.onSave.bind(this)}}),new a({value:g.get("cancel"),events:{onClick:this.onCancel.bind(this)}})]})},_createLanguageOptions:function(){return e.createElement("ul",{class:"mpf-language-selector-list",html:[this._createLanguageOption("en",g.get("english"),"en"===this._currentLanguage),this._createLanguageOption("fr",g.get("french"),"fr"===this._currentLanguage),this._createLanguageOption("de",g.get("german"),"de"===this._currentLanguage),this._createLanguageOption("ja",g.get("japanese"),"ja"===this._currentLanguage),this._createLanguageOption("ko",g.get("korean"),"ko"===this._currentLanguage),this._createLanguageOption("ru",g.get("russian"),"ru"===this._currentLanguage),this._createLanguageOption("zh",g.get("chinese"),"zh"===this._currentLanguage)]})},_createLanguageOption:function(n,t,a){return e.createElement("li",{html:new r({name:"mpfLanguagePreference",value:n,className:"primary",label:t,checked:a})})},_getCurrentLanguage:function(){var e;return this._currentLanguage||(e=this._getCurrentLanguageFromCookie(),this._currentLanguage=e?decodeURIComponent(e.value):"en"),this._currentLanguage},_getCurrentLanguageFromCookie:function(){return document.cookie.split(/\s*;\s*/).map(function(e){var n;return{key:(n=e.split("=")).length>=1?n[0]:null,value:n.length>=2?n[1]:null}}).find(function(e){return e.key===encodeURIComponent("swymlang")})},_setCurrentLanguageCookie:function(e){var n,t,a,r,o;n=encodeURIComponent("swymlang")+"="+encodeURIComponent(e),a=new Date,t="; expires="+new Date(a.getFullYear()+1,a.getMonth(),a.getDate()).toUTCString(),o="; domain="+(r=window.location.hostname).substring(r.indexOf(".")),document.cookie=n+t+o+"; path=/"},_getSelectedLanguage:function(){var e,n;return e=document.getElementsByName("mpfLanguagePreference"),(n=o.findInArray(e,function(e){return e.checked}))&&n.value}})});